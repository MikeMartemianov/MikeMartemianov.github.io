(() => {
  var __create = Object.create;
  var __defProp = Object.defineProperty;
  var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
  var __getOwnPropNames = Object.getOwnPropertyNames;
  var __getProtoOf = Object.getPrototypeOf;
  var __hasOwnProp = Object.prototype.hasOwnProperty;
  var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
  var __commonJS = (cb, mod) => function __require() {
    return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
  };
  var __export = (target, all) => {
    for (var name in all)
      __defProp(target, name, { get: all[name], enumerable: true });
  };
  var __copyProps = (to, from, except, desc) => {
    if (from && typeof from === "object" || typeof from === "function") {
      for (let key of __getOwnPropNames(from))
        if (!__hasOwnProp.call(to, key) && key !== except)
          __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
    }
    return to;
  };
  var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
    // If the importer is in node compatibility mode or this is not an ESM
    // file that has been converted to a CommonJS file using a Babel-
    // compatible transform (i.e. "__esModule" has not been set), then set
    // "default" to the CommonJS "module.exports" for node compatibility.
    isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
    mod
  ));
  var __publicField = (obj, key, value) => {
    __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);
    return value;
  };
  var __accessCheck = (obj, member, msg) => {
    if (!member.has(obj))
      throw TypeError("Cannot " + msg);
  };
  var __privateGet = (obj, member, getter) => {
    __accessCheck(obj, member, "read from private field");
    return getter ? getter.call(obj) : member.get(obj);
  };
  var __privateAdd = (obj, member, value) => {
    if (member.has(obj))
      throw TypeError("Cannot add the same private member more than once");
    member instanceof WeakSet ? member.add(obj) : member.set(obj, value);
  };
  var __privateMethod = (obj, member, method) => {
    __accessCheck(obj, member, "access private method");
    return method;
  };

  // node_modules/howler/dist/howler.js
  var require_howler = __commonJS({
    "node_modules/howler/dist/howler.js"(exports) {
      (function() {
        "use strict";
        var HowlerGlobal2 = function() {
          this.init();
        };
        HowlerGlobal2.prototype = {
          /**
           * Initialize the global Howler object.
           * @return {Howler}
           */
          init: function() {
            var self2 = this || Howler2;
            self2._counter = 1e3;
            self2._html5AudioPool = [];
            self2.html5PoolSize = 10;
            self2._codecs = {};
            self2._howls = [];
            self2._muted = false;
            self2._volume = 1;
            self2._canPlayEvent = "canplaythrough";
            self2._navigator = typeof window !== "undefined" && window.navigator ? window.navigator : null;
            self2.masterGain = null;
            self2.noAudio = false;
            self2.usingWebAudio = true;
            self2.autoSuspend = true;
            self2.ctx = null;
            self2.autoUnlock = true;
            self2._setup();
            return self2;
          },
          /**
           * Get/set the global volume for all sounds.
           * @param  {Float} vol Volume from 0.0 to 1.0.
           * @return {Howler/Float}     Returns self or current volume.
           */
          volume: function(vol) {
            var self2 = this || Howler2;
            vol = parseFloat(vol);
            if (!self2.ctx) {
              setupAudioContext();
            }
            if (typeof vol !== "undefined" && vol >= 0 && vol <= 1) {
              self2._volume = vol;
              if (self2._muted) {
                return self2;
              }
              if (self2.usingWebAudio) {
                self2.masterGain.gain.setValueAtTime(vol, Howler2.ctx.currentTime);
              }
              for (var i = 0; i < self2._howls.length; i++) {
                if (!self2._howls[i]._webAudio) {
                  var ids = self2._howls[i]._getSoundIds();
                  for (var j = 0; j < ids.length; j++) {
                    var sound = self2._howls[i]._soundById(ids[j]);
                    if (sound && sound._node) {
                      sound._node.volume = sound._volume * vol;
                    }
                  }
                }
              }
              return self2;
            }
            return self2._volume;
          },
          /**
           * Handle muting and unmuting globally.
           * @param  {Boolean} muted Is muted or not.
           */
          mute: function(muted) {
            var self2 = this || Howler2;
            if (!self2.ctx) {
              setupAudioContext();
            }
            self2._muted = muted;
            if (self2.usingWebAudio) {
              self2.masterGain.gain.setValueAtTime(muted ? 0 : self2._volume, Howler2.ctx.currentTime);
            }
            for (var i = 0; i < self2._howls.length; i++) {
              if (!self2._howls[i]._webAudio) {
                var ids = self2._howls[i]._getSoundIds();
                for (var j = 0; j < ids.length; j++) {
                  var sound = self2._howls[i]._soundById(ids[j]);
                  if (sound && sound._node) {
                    sound._node.muted = muted ? true : sound._muted;
                  }
                }
              }
            }
            return self2;
          },
          /**
           * Handle stopping all sounds globally.
           */
          stop: function() {
            var self2 = this || Howler2;
            for (var i = 0; i < self2._howls.length; i++) {
              self2._howls[i].stop();
            }
            return self2;
          },
          /**
           * Unload and destroy all currently loaded Howl objects.
           * @return {Howler}
           */
          unload: function() {
            var self2 = this || Howler2;
            for (var i = self2._howls.length - 1; i >= 0; i--) {
              self2._howls[i].unload();
            }
            if (self2.usingWebAudio && self2.ctx && typeof self2.ctx.close !== "undefined") {
              self2.ctx.close();
              self2.ctx = null;
              setupAudioContext();
            }
            return self2;
          },
          /**
           * Check for codec support of specific extension.
           * @param  {String} ext Audio file extention.
           * @return {Boolean}
           */
          codecs: function(ext) {
            return (this || Howler2)._codecs[ext.replace(/^x-/, "")];
          },
          /**
           * Setup various state values for global tracking.
           * @return {Howler}
           */
          _setup: function() {
            var self2 = this || Howler2;
            self2.state = self2.ctx ? self2.ctx.state || "suspended" : "suspended";
            self2._autoSuspend();
            if (!self2.usingWebAudio) {
              if (typeof Audio !== "undefined") {
                try {
                  var test = new Audio();
                  if (typeof test.oncanplaythrough === "undefined") {
                    self2._canPlayEvent = "canplay";
                  }
                } catch (e) {
                  self2.noAudio = true;
                }
              } else {
                self2.noAudio = true;
              }
            }
            try {
              var test = new Audio();
              if (test.muted) {
                self2.noAudio = true;
              }
            } catch (e) {
            }
            if (!self2.noAudio) {
              self2._setupCodecs();
            }
            return self2;
          },
          /**
           * Check for browser support for various codecs and cache the results.
           * @return {Howler}
           */
          _setupCodecs: function() {
            var self2 = this || Howler2;
            var audioTest = null;
            try {
              audioTest = typeof Audio !== "undefined" ? new Audio() : null;
            } catch (err) {
              return self2;
            }
            if (!audioTest || typeof audioTest.canPlayType !== "function") {
              return self2;
            }
            var mpegTest = audioTest.canPlayType("audio/mpeg;").replace(/^no$/, "");
            var ua = self2._navigator ? self2._navigator.userAgent : "";
            var checkOpera = ua.match(/OPR\/(\d+)/g);
            var isOldOpera = checkOpera && parseInt(checkOpera[0].split("/")[1], 10) < 33;
            var checkSafari = ua.indexOf("Safari") !== -1 && ua.indexOf("Chrome") === -1;
            var safariVersion = ua.match(/Version\/(.*?) /);
            var isOldSafari = checkSafari && safariVersion && parseInt(safariVersion[1], 10) < 15;
            self2._codecs = {
              mp3: !!(!isOldOpera && (mpegTest || audioTest.canPlayType("audio/mp3;").replace(/^no$/, ""))),
              mpeg: !!mpegTest,
              opus: !!audioTest.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/, ""),
              ogg: !!audioTest.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""),
              oga: !!audioTest.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""),
              wav: !!(audioTest.canPlayType('audio/wav; codecs="1"') || audioTest.canPlayType("audio/wav")).replace(/^no$/, ""),
              aac: !!audioTest.canPlayType("audio/aac;").replace(/^no$/, ""),
              caf: !!audioTest.canPlayType("audio/x-caf;").replace(/^no$/, ""),
              m4a: !!(audioTest.canPlayType("audio/x-m4a;") || audioTest.canPlayType("audio/m4a;") || audioTest.canPlayType("audio/aac;")).replace(/^no$/, ""),
              m4b: !!(audioTest.canPlayType("audio/x-m4b;") || audioTest.canPlayType("audio/m4b;") || audioTest.canPlayType("audio/aac;")).replace(/^no$/, ""),
              mp4: !!(audioTest.canPlayType("audio/x-mp4;") || audioTest.canPlayType("audio/mp4;") || audioTest.canPlayType("audio/aac;")).replace(/^no$/, ""),
              weba: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, "")),
              webm: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, "")),
              dolby: !!audioTest.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/, ""),
              flac: !!(audioTest.canPlayType("audio/x-flac;") || audioTest.canPlayType("audio/flac;")).replace(/^no$/, "")
            };
            return self2;
          },
          /**
           * Some browsers/devices will only allow audio to be played after a user interaction.
           * Attempt to automatically unlock audio on the first user interaction.
           * Concept from: http://paulbakaus.com/tutorials/html5/web-audio-on-ios/
           * @return {Howler}
           */
          _unlockAudio: function() {
            var self2 = this || Howler2;
            if (self2._audioUnlocked || !self2.ctx) {
              return;
            }
            self2._audioUnlocked = false;
            self2.autoUnlock = false;
            if (!self2._mobileUnloaded && self2.ctx.sampleRate !== 44100) {
              self2._mobileUnloaded = true;
              self2.unload();
            }
            self2._scratchBuffer = self2.ctx.createBuffer(1, 1, 22050);
            var unlock = function(e) {
              while (self2._html5AudioPool.length < self2.html5PoolSize) {
                try {
                  var audioNode = new Audio();
                  audioNode._unlocked = true;
                  self2._releaseHtml5Audio(audioNode);
                } catch (e2) {
                  self2.noAudio = true;
                  break;
                }
              }
              for (var i = 0; i < self2._howls.length; i++) {
                if (!self2._howls[i]._webAudio) {
                  var ids = self2._howls[i]._getSoundIds();
                  for (var j = 0; j < ids.length; j++) {
                    var sound = self2._howls[i]._soundById(ids[j]);
                    if (sound && sound._node && !sound._node._unlocked) {
                      sound._node._unlocked = true;
                      sound._node.load();
                    }
                  }
                }
              }
              self2._autoResume();
              var source = self2.ctx.createBufferSource();
              source.buffer = self2._scratchBuffer;
              source.connect(self2.ctx.destination);
              if (typeof source.start === "undefined") {
                source.noteOn(0);
              } else {
                source.start(0);
              }
              if (typeof self2.ctx.resume === "function") {
                self2.ctx.resume();
              }
              source.onended = function() {
                source.disconnect(0);
                self2._audioUnlocked = true;
                document.removeEventListener("touchstart", unlock, true);
                document.removeEventListener("touchend", unlock, true);
                document.removeEventListener("click", unlock, true);
                document.removeEventListener("keydown", unlock, true);
                for (var i2 = 0; i2 < self2._howls.length; i2++) {
                  self2._howls[i2]._emit("unlock");
                }
              };
            };
            document.addEventListener("touchstart", unlock, true);
            document.addEventListener("touchend", unlock, true);
            document.addEventListener("click", unlock, true);
            document.addEventListener("keydown", unlock, true);
            return self2;
          },
          /**
           * Get an unlocked HTML5 Audio object from the pool. If none are left,
           * return a new Audio object and throw a warning.
           * @return {Audio} HTML5 Audio object.
           */
          _obtainHtml5Audio: function() {
            var self2 = this || Howler2;
            if (self2._html5AudioPool.length) {
              return self2._html5AudioPool.pop();
            }
            var testPlay = new Audio().play();
            if (testPlay && typeof Promise !== "undefined" && (testPlay instanceof Promise || typeof testPlay.then === "function")) {
              testPlay.catch(function() {
                console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.");
              });
            }
            return new Audio();
          },
          /**
           * Return an activated HTML5 Audio object to the pool.
           * @return {Howler}
           */
          _releaseHtml5Audio: function(audio) {
            var self2 = this || Howler2;
            if (audio._unlocked) {
              self2._html5AudioPool.push(audio);
            }
            return self2;
          },
          /**
           * Automatically suspend the Web Audio AudioContext after no sound has played for 30 seconds.
           * This saves processing/energy and fixes various browser-specific bugs with audio getting stuck.
           * @return {Howler}
           */
          _autoSuspend: function() {
            var self2 = this;
            if (!self2.autoSuspend || !self2.ctx || typeof self2.ctx.suspend === "undefined" || !Howler2.usingWebAudio) {
              return;
            }
            for (var i = 0; i < self2._howls.length; i++) {
              if (self2._howls[i]._webAudio) {
                for (var j = 0; j < self2._howls[i]._sounds.length; j++) {
                  if (!self2._howls[i]._sounds[j]._paused) {
                    return self2;
                  }
                }
              }
            }
            if (self2._suspendTimer) {
              clearTimeout(self2._suspendTimer);
            }
            self2._suspendTimer = setTimeout(function() {
              if (!self2.autoSuspend) {
                return;
              }
              self2._suspendTimer = null;
              self2.state = "suspending";
              var handleSuspension = function() {
                self2.state = "suspended";
                if (self2._resumeAfterSuspend) {
                  delete self2._resumeAfterSuspend;
                  self2._autoResume();
                }
              };
              self2.ctx.suspend().then(handleSuspension, handleSuspension);
            }, 3e4);
            return self2;
          },
          /**
           * Automatically resume the Web Audio AudioContext when a new sound is played.
           * @return {Howler}
           */
          _autoResume: function() {
            var self2 = this;
            if (!self2.ctx || typeof self2.ctx.resume === "undefined" || !Howler2.usingWebAudio) {
              return;
            }
            if (self2.state === "running" && self2.ctx.state !== "interrupted" && self2._suspendTimer) {
              clearTimeout(self2._suspendTimer);
              self2._suspendTimer = null;
            } else if (self2.state === "suspended" || self2.state === "running" && self2.ctx.state === "interrupted") {
              self2.ctx.resume().then(function() {
                self2.state = "running";
                for (var i = 0; i < self2._howls.length; i++) {
                  self2._howls[i]._emit("resume");
                }
              });
              if (self2._suspendTimer) {
                clearTimeout(self2._suspendTimer);
                self2._suspendTimer = null;
              }
            } else if (self2.state === "suspending") {
              self2._resumeAfterSuspend = true;
            }
            return self2;
          }
        };
        var Howler2 = new HowlerGlobal2();
        var Howl2 = function(o) {
          var self2 = this;
          if (!o.src || o.src.length === 0) {
            console.error("An array of source files must be passed with any new Howl.");
            return;
          }
          self2.init(o);
        };
        Howl2.prototype = {
          /**
           * Initialize a new Howl group object.
           * @param  {Object} o Passed in properties for this group.
           * @return {Howl}
           */
          init: function(o) {
            var self2 = this;
            if (!Howler2.ctx) {
              setupAudioContext();
            }
            self2._autoplay = o.autoplay || false;
            self2._format = typeof o.format !== "string" ? o.format : [o.format];
            self2._html5 = o.html5 || false;
            self2._muted = o.mute || false;
            self2._loop = o.loop || false;
            self2._pool = o.pool || 5;
            self2._preload = typeof o.preload === "boolean" || o.preload === "metadata" ? o.preload : true;
            self2._rate = o.rate || 1;
            self2._sprite = o.sprite || {};
            self2._src = typeof o.src !== "string" ? o.src : [o.src];
            self2._volume = o.volume !== void 0 ? o.volume : 1;
            self2._xhr = {
              method: o.xhr && o.xhr.method ? o.xhr.method : "GET",
              headers: o.xhr && o.xhr.headers ? o.xhr.headers : null,
              withCredentials: o.xhr && o.xhr.withCredentials ? o.xhr.withCredentials : false
            };
            self2._duration = 0;
            self2._state = "unloaded";
            self2._sounds = [];
            self2._endTimers = {};
            self2._queue = [];
            self2._playLock = false;
            self2._onend = o.onend ? [{ fn: o.onend }] : [];
            self2._onfade = o.onfade ? [{ fn: o.onfade }] : [];
            self2._onload = o.onload ? [{ fn: o.onload }] : [];
            self2._onloaderror = o.onloaderror ? [{ fn: o.onloaderror }] : [];
            self2._onplayerror = o.onplayerror ? [{ fn: o.onplayerror }] : [];
            self2._onpause = o.onpause ? [{ fn: o.onpause }] : [];
            self2._onplay = o.onplay ? [{ fn: o.onplay }] : [];
            self2._onstop = o.onstop ? [{ fn: o.onstop }] : [];
            self2._onmute = o.onmute ? [{ fn: o.onmute }] : [];
            self2._onvolume = o.onvolume ? [{ fn: o.onvolume }] : [];
            self2._onrate = o.onrate ? [{ fn: o.onrate }] : [];
            self2._onseek = o.onseek ? [{ fn: o.onseek }] : [];
            self2._onunlock = o.onunlock ? [{ fn: o.onunlock }] : [];
            self2._onresume = [];
            self2._webAudio = Howler2.usingWebAudio && !self2._html5;
            if (typeof Howler2.ctx !== "undefined" && Howler2.ctx && Howler2.autoUnlock) {
              Howler2._unlockAudio();
            }
            Howler2._howls.push(self2);
            if (self2._autoplay) {
              self2._queue.push({
                event: "play",
                action: function() {
                  self2.play();
                }
              });
            }
            if (self2._preload && self2._preload !== "none") {
              self2.load();
            }
            return self2;
          },
          /**
           * Load the audio file.
           * @return {Howler}
           */
          load: function() {
            var self2 = this;
            var url = null;
            if (Howler2.noAudio) {
              self2._emit("loaderror", null, "No audio support.");
              return;
            }
            if (typeof self2._src === "string") {
              self2._src = [self2._src];
            }
            for (var i = 0; i < self2._src.length; i++) {
              var ext, str5;
              if (self2._format && self2._format[i]) {
                ext = self2._format[i];
              } else {
                str5 = self2._src[i];
                if (typeof str5 !== "string") {
                  self2._emit("loaderror", null, "Non-string found in selected audio sources - ignoring.");
                  continue;
                }
                ext = /^data:audio\/([^;,]+);/i.exec(str5);
                if (!ext) {
                  ext = /\.([^.]+)$/.exec(str5.split("?", 1)[0]);
                }
                if (ext) {
                  ext = ext[1].toLowerCase();
                }
              }
              if (!ext) {
                console.warn('No file extension was found. Consider using the "format" property or specify an extension.');
              }
              if (ext && Howler2.codecs(ext)) {
                url = self2._src[i];
                break;
              }
            }
            if (!url) {
              self2._emit("loaderror", null, "No codec support for selected audio sources.");
              return;
            }
            self2._src = url;
            self2._state = "loading";
            if (window.location.protocol === "https:" && url.slice(0, 5) === "http:") {
              self2._html5 = true;
              self2._webAudio = false;
            }
            new Sound2(self2);
            if (self2._webAudio) {
              loadBuffer(self2);
            }
            return self2;
          },
          /**
           * Play a sound or resume previous playback.
           * @param  {String/Number} sprite   Sprite name for sprite playback or sound id to continue previous.
           * @param  {Boolean} internal Internal Use: true prevents event firing.
           * @return {Number}          Sound ID.
           */
          play: function(sprite, internal) {
            var self2 = this;
            var id = null;
            if (typeof sprite === "number") {
              id = sprite;
              sprite = null;
            } else if (typeof sprite === "string" && self2._state === "loaded" && !self2._sprite[sprite]) {
              return null;
            } else if (typeof sprite === "undefined") {
              sprite = "__default";
              if (!self2._playLock) {
                var num = 0;
                for (var i = 0; i < self2._sounds.length; i++) {
                  if (self2._sounds[i]._paused && !self2._sounds[i]._ended) {
                    num++;
                    id = self2._sounds[i]._id;
                  }
                }
                if (num === 1) {
                  sprite = null;
                } else {
                  id = null;
                }
              }
            }
            var sound = id ? self2._soundById(id) : self2._inactiveSound();
            if (!sound) {
              return null;
            }
            if (id && !sprite) {
              sprite = sound._sprite || "__default";
            }
            if (self2._state !== "loaded") {
              sound._sprite = sprite;
              sound._ended = false;
              var soundId = sound._id;
              self2._queue.push({
                event: "play",
                action: function() {
                  self2.play(soundId);
                }
              });
              return soundId;
            }
            if (id && !sound._paused) {
              if (!internal) {
                self2._loadQueue("play");
              }
              return sound._id;
            }
            if (self2._webAudio) {
              Howler2._autoResume();
            }
            var seek = Math.max(0, sound._seek > 0 ? sound._seek : self2._sprite[sprite][0] / 1e3);
            var duration = Math.max(0, (self2._sprite[sprite][0] + self2._sprite[sprite][1]) / 1e3 - seek);
            var timeout = duration * 1e3 / Math.abs(sound._rate);
            var start = self2._sprite[sprite][0] / 1e3;
            var stop = (self2._sprite[sprite][0] + self2._sprite[sprite][1]) / 1e3;
            sound._sprite = sprite;
            sound._ended = false;
            var setParams = function() {
              sound._paused = false;
              sound._seek = seek;
              sound._start = start;
              sound._stop = stop;
              sound._loop = !!(sound._loop || self2._sprite[sprite][2]);
            };
            if (seek >= stop) {
              self2._ended(sound);
              return;
            }
            var node = sound._node;
            if (self2._webAudio) {
              var playWebAudio = function() {
                self2._playLock = false;
                setParams();
                self2._refreshBuffer(sound);
                var vol = sound._muted || self2._muted ? 0 : sound._volume;
                node.gain.setValueAtTime(vol, Howler2.ctx.currentTime);
                sound._playStart = Howler2.ctx.currentTime;
                if (typeof node.bufferSource.start === "undefined") {
                  sound._loop ? node.bufferSource.noteGrainOn(0, seek, 86400) : node.bufferSource.noteGrainOn(0, seek, duration);
                } else {
                  sound._loop ? node.bufferSource.start(0, seek, 86400) : node.bufferSource.start(0, seek, duration);
                }
                if (timeout !== Infinity) {
                  self2._endTimers[sound._id] = setTimeout(self2._ended.bind(self2, sound), timeout);
                }
                if (!internal) {
                  setTimeout(function() {
                    self2._emit("play", sound._id);
                    self2._loadQueue();
                  }, 0);
                }
              };
              if (Howler2.state === "running" && Howler2.ctx.state !== "interrupted") {
                playWebAudio();
              } else {
                self2._playLock = true;
                self2.once("resume", playWebAudio);
                self2._clearTimer(sound._id);
              }
            } else {
              var playHtml5 = function() {
                node.currentTime = seek;
                node.muted = sound._muted || self2._muted || Howler2._muted || node.muted;
                node.volume = sound._volume * Howler2.volume();
                node.playbackRate = sound._rate;
                try {
                  var play = node.play();
                  if (play && typeof Promise !== "undefined" && (play instanceof Promise || typeof play.then === "function")) {
                    self2._playLock = true;
                    setParams();
                    play.then(function() {
                      self2._playLock = false;
                      node._unlocked = true;
                      if (!internal) {
                        self2._emit("play", sound._id);
                      } else {
                        self2._loadQueue();
                      }
                    }).catch(function() {
                      self2._playLock = false;
                      self2._emit("playerror", sound._id, "Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");
                      sound._ended = true;
                      sound._paused = true;
                    });
                  } else if (!internal) {
                    self2._playLock = false;
                    setParams();
                    self2._emit("play", sound._id);
                  }
                  node.playbackRate = sound._rate;
                  if (node.paused) {
                    self2._emit("playerror", sound._id, "Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");
                    return;
                  }
                  if (sprite !== "__default" || sound._loop) {
                    self2._endTimers[sound._id] = setTimeout(self2._ended.bind(self2, sound), timeout);
                  } else {
                    self2._endTimers[sound._id] = function() {
                      self2._ended(sound);
                      node.removeEventListener("ended", self2._endTimers[sound._id], false);
                    };
                    node.addEventListener("ended", self2._endTimers[sound._id], false);
                  }
                } catch (err) {
                  self2._emit("playerror", sound._id, err);
                }
              };
              if (node.src === "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA") {
                node.src = self2._src;
                node.load();
              }
              var loadedNoReadyState = window && window.ejecta || !node.readyState && Howler2._navigator.isCocoonJS;
              if (node.readyState >= 3 || loadedNoReadyState) {
                playHtml5();
              } else {
                self2._playLock = true;
                self2._state = "loading";
                var listener = function() {
                  self2._state = "loaded";
                  playHtml5();
                  node.removeEventListener(Howler2._canPlayEvent, listener, false);
                };
                node.addEventListener(Howler2._canPlayEvent, listener, false);
                self2._clearTimer(sound._id);
              }
            }
            return sound._id;
          },
          /**
           * Pause playback and save current position.
           * @param  {Number} id The sound ID (empty to pause all in group).
           * @return {Howl}
           */
          pause: function(id) {
            var self2 = this;
            if (self2._state !== "loaded" || self2._playLock) {
              self2._queue.push({
                event: "pause",
                action: function() {
                  self2.pause(id);
                }
              });
              return self2;
            }
            var ids = self2._getSoundIds(id);
            for (var i = 0; i < ids.length; i++) {
              self2._clearTimer(ids[i]);
              var sound = self2._soundById(ids[i]);
              if (sound && !sound._paused) {
                sound._seek = self2.seek(ids[i]);
                sound._rateSeek = 0;
                sound._paused = true;
                self2._stopFade(ids[i]);
                if (sound._node) {
                  if (self2._webAudio) {
                    if (!sound._node.bufferSource) {
                      continue;
                    }
                    if (typeof sound._node.bufferSource.stop === "undefined") {
                      sound._node.bufferSource.noteOff(0);
                    } else {
                      sound._node.bufferSource.stop(0);
                    }
                    self2._cleanBuffer(sound._node);
                  } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {
                    sound._node.pause();
                  }
                }
              }
              if (!arguments[1]) {
                self2._emit("pause", sound ? sound._id : null);
              }
            }
            return self2;
          },
          /**
           * Stop playback and reset to start.
           * @param  {Number} id The sound ID (empty to stop all in group).
           * @param  {Boolean} internal Internal Use: true prevents event firing.
           * @return {Howl}
           */
          stop: function(id, internal) {
            var self2 = this;
            if (self2._state !== "loaded" || self2._playLock) {
              self2._queue.push({
                event: "stop",
                action: function() {
                  self2.stop(id);
                }
              });
              return self2;
            }
            var ids = self2._getSoundIds(id);
            for (var i = 0; i < ids.length; i++) {
              self2._clearTimer(ids[i]);
              var sound = self2._soundById(ids[i]);
              if (sound) {
                sound._seek = sound._start || 0;
                sound._rateSeek = 0;
                sound._paused = true;
                sound._ended = true;
                self2._stopFade(ids[i]);
                if (sound._node) {
                  if (self2._webAudio) {
                    if (sound._node.bufferSource) {
                      if (typeof sound._node.bufferSource.stop === "undefined") {
                        sound._node.bufferSource.noteOff(0);
                      } else {
                        sound._node.bufferSource.stop(0);
                      }
                      self2._cleanBuffer(sound._node);
                    }
                  } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {
                    sound._node.currentTime = sound._start || 0;
                    sound._node.pause();
                    if (sound._node.duration === Infinity) {
                      self2._clearSound(sound._node);
                    }
                  }
                }
                if (!internal) {
                  self2._emit("stop", sound._id);
                }
              }
            }
            return self2;
          },
          /**
           * Mute/unmute a single sound or all sounds in this Howl group.
           * @param  {Boolean} muted Set to true to mute and false to unmute.
           * @param  {Number} id    The sound ID to update (omit to mute/unmute all).
           * @return {Howl}
           */
          mute: function(muted, id) {
            var self2 = this;
            if (self2._state !== "loaded" || self2._playLock) {
              self2._queue.push({
                event: "mute",
                action: function() {
                  self2.mute(muted, id);
                }
              });
              return self2;
            }
            if (typeof id === "undefined") {
              if (typeof muted === "boolean") {
                self2._muted = muted;
              } else {
                return self2._muted;
              }
            }
            var ids = self2._getSoundIds(id);
            for (var i = 0; i < ids.length; i++) {
              var sound = self2._soundById(ids[i]);
              if (sound) {
                sound._muted = muted;
                if (sound._interval) {
                  self2._stopFade(sound._id);
                }
                if (self2._webAudio && sound._node) {
                  sound._node.gain.setValueAtTime(muted ? 0 : sound._volume, Howler2.ctx.currentTime);
                } else if (sound._node) {
                  sound._node.muted = Howler2._muted ? true : muted;
                }
                self2._emit("mute", sound._id);
              }
            }
            return self2;
          },
          /**
           * Get/set the volume of this sound or of the Howl group. This method can optionally take 0, 1 or 2 arguments.
           *   volume() -> Returns the group's volume value.
           *   volume(id) -> Returns the sound id's current volume.
           *   volume(vol) -> Sets the volume of all sounds in this Howl group.
           *   volume(vol, id) -> Sets the volume of passed sound id.
           * @return {Howl/Number} Returns self or current volume.
           */
          volume: function() {
            var self2 = this;
            var args = arguments;
            var vol, id;
            if (args.length === 0) {
              return self2._volume;
            } else if (args.length === 1 || args.length === 2 && typeof args[1] === "undefined") {
              var ids = self2._getSoundIds();
              var index = ids.indexOf(args[0]);
              if (index >= 0) {
                id = parseInt(args[0], 10);
              } else {
                vol = parseFloat(args[0]);
              }
            } else if (args.length >= 2) {
              vol = parseFloat(args[0]);
              id = parseInt(args[1], 10);
            }
            var sound;
            if (typeof vol !== "undefined" && vol >= 0 && vol <= 1) {
              if (self2._state !== "loaded" || self2._playLock) {
                self2._queue.push({
                  event: "volume",
                  action: function() {
                    self2.volume.apply(self2, args);
                  }
                });
                return self2;
              }
              if (typeof id === "undefined") {
                self2._volume = vol;
              }
              id = self2._getSoundIds(id);
              for (var i = 0; i < id.length; i++) {
                sound = self2._soundById(id[i]);
                if (sound) {
                  sound._volume = vol;
                  if (!args[2]) {
                    self2._stopFade(id[i]);
                  }
                  if (self2._webAudio && sound._node && !sound._muted) {
                    sound._node.gain.setValueAtTime(vol, Howler2.ctx.currentTime);
                  } else if (sound._node && !sound._muted) {
                    sound._node.volume = vol * Howler2.volume();
                  }
                  self2._emit("volume", sound._id);
                }
              }
            } else {
              sound = id ? self2._soundById(id) : self2._sounds[0];
              return sound ? sound._volume : 0;
            }
            return self2;
          },
          /**
           * Fade a currently playing sound between two volumes (if no id is passed, all sounds will fade).
           * @param  {Number} from The value to fade from (0.0 to 1.0).
           * @param  {Number} to   The volume to fade to (0.0 to 1.0).
           * @param  {Number} len  Time in milliseconds to fade.
           * @param  {Number} id   The sound id (omit to fade all sounds).
           * @return {Howl}
           */
          fade: function(from, to, len4, id) {
            var self2 = this;
            if (self2._state !== "loaded" || self2._playLock) {
              self2._queue.push({
                event: "fade",
                action: function() {
                  self2.fade(from, to, len4, id);
                }
              });
              return self2;
            }
            from = Math.min(Math.max(0, parseFloat(from)), 1);
            to = Math.min(Math.max(0, parseFloat(to)), 1);
            len4 = parseFloat(len4);
            self2.volume(from, id);
            var ids = self2._getSoundIds(id);
            for (var i = 0; i < ids.length; i++) {
              var sound = self2._soundById(ids[i]);
              if (sound) {
                if (!id) {
                  self2._stopFade(ids[i]);
                }
                if (self2._webAudio && !sound._muted) {
                  var currentTime = Howler2.ctx.currentTime;
                  var end = currentTime + len4 / 1e3;
                  sound._volume = from;
                  sound._node.gain.setValueAtTime(from, currentTime);
                  sound._node.gain.linearRampToValueAtTime(to, end);
                }
                self2._startFadeInterval(sound, from, to, len4, ids[i], typeof id === "undefined");
              }
            }
            return self2;
          },
          /**
           * Starts the internal interval to fade a sound.
           * @param  {Object} sound Reference to sound to fade.
           * @param  {Number} from The value to fade from (0.0 to 1.0).
           * @param  {Number} to   The volume to fade to (0.0 to 1.0).
           * @param  {Number} len  Time in milliseconds to fade.
           * @param  {Number} id   The sound id to fade.
           * @param  {Boolean} isGroup   If true, set the volume on the group.
           */
          _startFadeInterval: function(sound, from, to, len4, id, isGroup) {
            var self2 = this;
            var vol = from;
            var diff = to - from;
            var steps = Math.abs(diff / 0.01);
            var stepLen = Math.max(4, steps > 0 ? len4 / steps : len4);
            var lastTick = Date.now();
            sound._fadeTo = to;
            sound._interval = setInterval(function() {
              var tick = (Date.now() - lastTick) / len4;
              lastTick = Date.now();
              vol += diff * tick;
              vol = Math.round(vol * 100) / 100;
              if (diff < 0) {
                vol = Math.max(to, vol);
              } else {
                vol = Math.min(to, vol);
              }
              if (self2._webAudio) {
                sound._volume = vol;
              } else {
                self2.volume(vol, sound._id, true);
              }
              if (isGroup) {
                self2._volume = vol;
              }
              if (to < from && vol <= to || to > from && vol >= to) {
                clearInterval(sound._interval);
                sound._interval = null;
                sound._fadeTo = null;
                self2.volume(to, sound._id);
                self2._emit("fade", sound._id);
              }
            }, stepLen);
          },
          /**
           * Internal method that stops the currently playing fade when
           * a new fade starts, volume is changed or the sound is stopped.
           * @param  {Number} id The sound id.
           * @return {Howl}
           */
          _stopFade: function(id) {
            var self2 = this;
            var sound = self2._soundById(id);
            if (sound && sound._interval) {
              if (self2._webAudio) {
                sound._node.gain.cancelScheduledValues(Howler2.ctx.currentTime);
              }
              clearInterval(sound._interval);
              sound._interval = null;
              self2.volume(sound._fadeTo, id);
              sound._fadeTo = null;
              self2._emit("fade", id);
            }
            return self2;
          },
          /**
           * Get/set the loop parameter on a sound. This method can optionally take 0, 1 or 2 arguments.
           *   loop() -> Returns the group's loop value.
           *   loop(id) -> Returns the sound id's loop value.
           *   loop(loop) -> Sets the loop value for all sounds in this Howl group.
           *   loop(loop, id) -> Sets the loop value of passed sound id.
           * @return {Howl/Boolean} Returns self or current loop value.
           */
          loop: function() {
            var self2 = this;
            var args = arguments;
            var loop, id, sound;
            if (args.length === 0) {
              return self2._loop;
            } else if (args.length === 1) {
              if (typeof args[0] === "boolean") {
                loop = args[0];
                self2._loop = loop;
              } else {
                sound = self2._soundById(parseInt(args[0], 10));
                return sound ? sound._loop : false;
              }
            } else if (args.length === 2) {
              loop = args[0];
              id = parseInt(args[1], 10);
            }
            var ids = self2._getSoundIds(id);
            for (var i = 0; i < ids.length; i++) {
              sound = self2._soundById(ids[i]);
              if (sound) {
                sound._loop = loop;
                if (self2._webAudio && sound._node && sound._node.bufferSource) {
                  sound._node.bufferSource.loop = loop;
                  if (loop) {
                    sound._node.bufferSource.loopStart = sound._start || 0;
                    sound._node.bufferSource.loopEnd = sound._stop;
                    if (self2.playing(ids[i])) {
                      self2.pause(ids[i], true);
                      self2.play(ids[i], true);
                    }
                  }
                }
              }
            }
            return self2;
          },
          /**
           * Get/set the playback rate of a sound. This method can optionally take 0, 1 or 2 arguments.
           *   rate() -> Returns the first sound node's current playback rate.
           *   rate(id) -> Returns the sound id's current playback rate.
           *   rate(rate) -> Sets the playback rate of all sounds in this Howl group.
           *   rate(rate, id) -> Sets the playback rate of passed sound id.
           * @return {Howl/Number} Returns self or the current playback rate.
           */
          rate: function() {
            var self2 = this;
            var args = arguments;
            var rate, id;
            if (args.length === 0) {
              id = self2._sounds[0]._id;
            } else if (args.length === 1) {
              var ids = self2._getSoundIds();
              var index = ids.indexOf(args[0]);
              if (index >= 0) {
                id = parseInt(args[0], 10);
              } else {
                rate = parseFloat(args[0]);
              }
            } else if (args.length === 2) {
              rate = parseFloat(args[0]);
              id = parseInt(args[1], 10);
            }
            var sound;
            if (typeof rate === "number") {
              if (self2._state !== "loaded" || self2._playLock) {
                self2._queue.push({
                  event: "rate",
                  action: function() {
                    self2.rate.apply(self2, args);
                  }
                });
                return self2;
              }
              if (typeof id === "undefined") {
                self2._rate = rate;
              }
              id = self2._getSoundIds(id);
              for (var i = 0; i < id.length; i++) {
                sound = self2._soundById(id[i]);
                if (sound) {
                  if (self2.playing(id[i])) {
                    sound._rateSeek = self2.seek(id[i]);
                    sound._playStart = self2._webAudio ? Howler2.ctx.currentTime : sound._playStart;
                  }
                  sound._rate = rate;
                  if (self2._webAudio && sound._node && sound._node.bufferSource) {
                    sound._node.bufferSource.playbackRate.setValueAtTime(rate, Howler2.ctx.currentTime);
                  } else if (sound._node) {
                    sound._node.playbackRate = rate;
                  }
                  var seek = self2.seek(id[i]);
                  var duration = (self2._sprite[sound._sprite][0] + self2._sprite[sound._sprite][1]) / 1e3 - seek;
                  var timeout = duration * 1e3 / Math.abs(sound._rate);
                  if (self2._endTimers[id[i]] || !sound._paused) {
                    self2._clearTimer(id[i]);
                    self2._endTimers[id[i]] = setTimeout(self2._ended.bind(self2, sound), timeout);
                  }
                  self2._emit("rate", sound._id);
                }
              }
            } else {
              sound = self2._soundById(id);
              return sound ? sound._rate : self2._rate;
            }
            return self2;
          },
          /**
           * Get/set the seek position of a sound. This method can optionally take 0, 1 or 2 arguments.
           *   seek() -> Returns the first sound node's current seek position.
           *   seek(id) -> Returns the sound id's current seek position.
           *   seek(seek) -> Sets the seek position of the first sound node.
           *   seek(seek, id) -> Sets the seek position of passed sound id.
           * @return {Howl/Number} Returns self or the current seek position.
           */
          seek: function() {
            var self2 = this;
            var args = arguments;
            var seek, id;
            if (args.length === 0) {
              if (self2._sounds.length) {
                id = self2._sounds[0]._id;
              }
            } else if (args.length === 1) {
              var ids = self2._getSoundIds();
              var index = ids.indexOf(args[0]);
              if (index >= 0) {
                id = parseInt(args[0], 10);
              } else if (self2._sounds.length) {
                id = self2._sounds[0]._id;
                seek = parseFloat(args[0]);
              }
            } else if (args.length === 2) {
              seek = parseFloat(args[0]);
              id = parseInt(args[1], 10);
            }
            if (typeof id === "undefined") {
              return 0;
            }
            if (typeof seek === "number" && (self2._state !== "loaded" || self2._playLock)) {
              self2._queue.push({
                event: "seek",
                action: function() {
                  self2.seek.apply(self2, args);
                }
              });
              return self2;
            }
            var sound = self2._soundById(id);
            if (sound) {
              if (typeof seek === "number" && seek >= 0) {
                var playing = self2.playing(id);
                if (playing) {
                  self2.pause(id, true);
                }
                sound._seek = seek;
                sound._ended = false;
                self2._clearTimer(id);
                if (!self2._webAudio && sound._node && !isNaN(sound._node.duration)) {
                  sound._node.currentTime = seek;
                }
                var seekAndEmit = function() {
                  if (playing) {
                    self2.play(id, true);
                  }
                  self2._emit("seek", id);
                };
                if (playing && !self2._webAudio) {
                  var emitSeek = function() {
                    if (!self2._playLock) {
                      seekAndEmit();
                    } else {
                      setTimeout(emitSeek, 0);
                    }
                  };
                  setTimeout(emitSeek, 0);
                } else {
                  seekAndEmit();
                }
              } else {
                if (self2._webAudio) {
                  var realTime = self2.playing(id) ? Howler2.ctx.currentTime - sound._playStart : 0;
                  var rateSeek = sound._rateSeek ? sound._rateSeek - sound._seek : 0;
                  return sound._seek + (rateSeek + realTime * Math.abs(sound._rate));
                } else {
                  return sound._node.currentTime;
                }
              }
            }
            return self2;
          },
          /**
           * Check if a specific sound is currently playing or not (if id is provided), or check if at least one of the sounds in the group is playing or not.
           * @param  {Number}  id The sound id to check. If none is passed, the whole sound group is checked.
           * @return {Boolean} True if playing and false if not.
           */
          playing: function(id) {
            var self2 = this;
            if (typeof id === "number") {
              var sound = self2._soundById(id);
              return sound ? !sound._paused : false;
            }
            for (var i = 0; i < self2._sounds.length; i++) {
              if (!self2._sounds[i]._paused) {
                return true;
              }
            }
            return false;
          },
          /**
           * Get the duration of this sound. Passing a sound id will return the sprite duration.
           * @param  {Number} id The sound id to check. If none is passed, return full source duration.
           * @return {Number} Audio duration in seconds.
           */
          duration: function(id) {
            var self2 = this;
            var duration = self2._duration;
            var sound = self2._soundById(id);
            if (sound) {
              duration = self2._sprite[sound._sprite][1] / 1e3;
            }
            return duration;
          },
          /**
           * Returns the current loaded state of this Howl.
           * @return {String} 'unloaded', 'loading', 'loaded'
           */
          state: function() {
            return this._state;
          },
          /**
           * Unload and destroy the current Howl object.
           * This will immediately stop all sound instances attached to this group.
           */
          unload: function() {
            var self2 = this;
            var sounds = self2._sounds;
            for (var i = 0; i < sounds.length; i++) {
              if (!sounds[i]._paused) {
                self2.stop(sounds[i]._id);
              }
              if (!self2._webAudio) {
                self2._clearSound(sounds[i]._node);
                sounds[i]._node.removeEventListener("error", sounds[i]._errorFn, false);
                sounds[i]._node.removeEventListener(Howler2._canPlayEvent, sounds[i]._loadFn, false);
                sounds[i]._node.removeEventListener("ended", sounds[i]._endFn, false);
                Howler2._releaseHtml5Audio(sounds[i]._node);
              }
              delete sounds[i]._node;
              self2._clearTimer(sounds[i]._id);
            }
            var index = Howler2._howls.indexOf(self2);
            if (index >= 0) {
              Howler2._howls.splice(index, 1);
            }
            var remCache = true;
            for (i = 0; i < Howler2._howls.length; i++) {
              if (Howler2._howls[i]._src === self2._src || self2._src.indexOf(Howler2._howls[i]._src) >= 0) {
                remCache = false;
                break;
              }
            }
            if (cache && remCache) {
              delete cache[self2._src];
            }
            Howler2.noAudio = false;
            self2._state = "unloaded";
            self2._sounds = [];
            self2 = null;
            return null;
          },
          /**
           * Listen to a custom event.
           * @param  {String}   event Event name.
           * @param  {Function} fn    Listener to call.
           * @param  {Number}   id    (optional) Only listen to events for this sound.
           * @param  {Number}   once  (INTERNAL) Marks event to fire only once.
           * @return {Howl}
           */
          on: function(event, fn, id, once) {
            var self2 = this;
            var events = self2["_on" + event];
            if (typeof fn === "function") {
              events.push(once ? { id, fn, once } : { id, fn });
            }
            return self2;
          },
          /**
           * Remove a custom event. Call without parameters to remove all events.
           * @param  {String}   event Event name.
           * @param  {Function} fn    Listener to remove. Leave empty to remove all.
           * @param  {Number}   id    (optional) Only remove events for this sound.
           * @return {Howl}
           */
          off: function(event, fn, id) {
            var self2 = this;
            var events = self2["_on" + event];
            var i = 0;
            if (typeof fn === "number") {
              id = fn;
              fn = null;
            }
            if (fn || id) {
              for (i = 0; i < events.length; i++) {
                var isId = id === events[i].id;
                if (fn === events[i].fn && isId || !fn && isId) {
                  events.splice(i, 1);
                  break;
                }
              }
            } else if (event) {
              self2["_on" + event] = [];
            } else {
              var keys = Object.keys(self2);
              for (i = 0; i < keys.length; i++) {
                if (keys[i].indexOf("_on") === 0 && Array.isArray(self2[keys[i]])) {
                  self2[keys[i]] = [];
                }
              }
            }
            return self2;
          },
          /**
           * Listen to a custom event and remove it once fired.
           * @param  {String}   event Event name.
           * @param  {Function} fn    Listener to call.
           * @param  {Number}   id    (optional) Only listen to events for this sound.
           * @return {Howl}
           */
          once: function(event, fn, id) {
            var self2 = this;
            self2.on(event, fn, id, 1);
            return self2;
          },
          /**
           * Emit all events of a specific type and pass the sound id.
           * @param  {String} event Event name.
           * @param  {Number} id    Sound ID.
           * @param  {Number} msg   Message to go with event.
           * @return {Howl}
           */
          _emit: function(event, id, msg) {
            var self2 = this;
            var events = self2["_on" + event];
            for (var i = events.length - 1; i >= 0; i--) {
              if (!events[i].id || events[i].id === id || event === "load") {
                setTimeout(function(fn) {
                  fn.call(this, id, msg);
                }.bind(self2, events[i].fn), 0);
                if (events[i].once) {
                  self2.off(event, events[i].fn, events[i].id);
                }
              }
            }
            self2._loadQueue(event);
            return self2;
          },
          /**
           * Queue of actions initiated before the sound has loaded.
           * These will be called in sequence, with the next only firing
           * after the previous has finished executing (even if async like play).
           * @return {Howl}
           */
          _loadQueue: function(event) {
            var self2 = this;
            if (self2._queue.length > 0) {
              var task = self2._queue[0];
              if (task.event === event) {
                self2._queue.shift();
                self2._loadQueue();
              }
              if (!event) {
                task.action();
              }
            }
            return self2;
          },
          /**
           * Fired when playback ends at the end of the duration.
           * @param  {Sound} sound The sound object to work with.
           * @return {Howl}
           */
          _ended: function(sound) {
            var self2 = this;
            var sprite = sound._sprite;
            if (!self2._webAudio && sound._node && !sound._node.paused && !sound._node.ended && sound._node.currentTime < sound._stop) {
              setTimeout(self2._ended.bind(self2, sound), 100);
              return self2;
            }
            var loop = !!(sound._loop || self2._sprite[sprite][2]);
            self2._emit("end", sound._id);
            if (!self2._webAudio && loop) {
              self2.stop(sound._id, true).play(sound._id);
            }
            if (self2._webAudio && loop) {
              self2._emit("play", sound._id);
              sound._seek = sound._start || 0;
              sound._rateSeek = 0;
              sound._playStart = Howler2.ctx.currentTime;
              var timeout = (sound._stop - sound._start) * 1e3 / Math.abs(sound._rate);
              self2._endTimers[sound._id] = setTimeout(self2._ended.bind(self2, sound), timeout);
            }
            if (self2._webAudio && !loop) {
              sound._paused = true;
              sound._ended = true;
              sound._seek = sound._start || 0;
              sound._rateSeek = 0;
              self2._clearTimer(sound._id);
              self2._cleanBuffer(sound._node);
              Howler2._autoSuspend();
            }
            if (!self2._webAudio && !loop) {
              self2.stop(sound._id, true);
            }
            return self2;
          },
          /**
           * Clear the end timer for a sound playback.
           * @param  {Number} id The sound ID.
           * @return {Howl}
           */
          _clearTimer: function(id) {
            var self2 = this;
            if (self2._endTimers[id]) {
              if (typeof self2._endTimers[id] !== "function") {
                clearTimeout(self2._endTimers[id]);
              } else {
                var sound = self2._soundById(id);
                if (sound && sound._node) {
                  sound._node.removeEventListener("ended", self2._endTimers[id], false);
                }
              }
              delete self2._endTimers[id];
            }
            return self2;
          },
          /**
           * Return the sound identified by this ID, or return null.
           * @param  {Number} id Sound ID
           * @return {Object}    Sound object or null.
           */
          _soundById: function(id) {
            var self2 = this;
            for (var i = 0; i < self2._sounds.length; i++) {
              if (id === self2._sounds[i]._id) {
                return self2._sounds[i];
              }
            }
            return null;
          },
          /**
           * Return an inactive sound from the pool or create a new one.
           * @return {Sound} Sound playback object.
           */
          _inactiveSound: function() {
            var self2 = this;
            self2._drain();
            for (var i = 0; i < self2._sounds.length; i++) {
              if (self2._sounds[i]._ended) {
                return self2._sounds[i].reset();
              }
            }
            return new Sound2(self2);
          },
          /**
           * Drain excess inactive sounds from the pool.
           */
          _drain: function() {
            var self2 = this;
            var limit = self2._pool;
            var cnt = 0;
            var i = 0;
            if (self2._sounds.length < limit) {
              return;
            }
            for (i = 0; i < self2._sounds.length; i++) {
              if (self2._sounds[i]._ended) {
                cnt++;
              }
            }
            for (i = self2._sounds.length - 1; i >= 0; i--) {
              if (cnt <= limit) {
                return;
              }
              if (self2._sounds[i]._ended) {
                if (self2._webAudio && self2._sounds[i]._node) {
                  self2._sounds[i]._node.disconnect(0);
                }
                self2._sounds.splice(i, 1);
                cnt--;
              }
            }
          },
          /**
           * Get all ID's from the sounds pool.
           * @param  {Number} id Only return one ID if one is passed.
           * @return {Array}    Array of IDs.
           */
          _getSoundIds: function(id) {
            var self2 = this;
            if (typeof id === "undefined") {
              var ids = [];
              for (var i = 0; i < self2._sounds.length; i++) {
                ids.push(self2._sounds[i]._id);
              }
              return ids;
            } else {
              return [id];
            }
          },
          /**
           * Load the sound back into the buffer source.
           * @param  {Sound} sound The sound object to work with.
           * @return {Howl}
           */
          _refreshBuffer: function(sound) {
            var self2 = this;
            sound._node.bufferSource = Howler2.ctx.createBufferSource();
            sound._node.bufferSource.buffer = cache[self2._src];
            if (sound._panner) {
              sound._node.bufferSource.connect(sound._panner);
            } else {
              sound._node.bufferSource.connect(sound._node);
            }
            sound._node.bufferSource.loop = sound._loop;
            if (sound._loop) {
              sound._node.bufferSource.loopStart = sound._start || 0;
              sound._node.bufferSource.loopEnd = sound._stop || 0;
            }
            sound._node.bufferSource.playbackRate.setValueAtTime(sound._rate, Howler2.ctx.currentTime);
            return self2;
          },
          /**
           * Prevent memory leaks by cleaning up the buffer source after playback.
           * @param  {Object} node Sound's audio node containing the buffer source.
           * @return {Howl}
           */
          _cleanBuffer: function(node) {
            var self2 = this;
            var isIOS = Howler2._navigator && Howler2._navigator.vendor.indexOf("Apple") >= 0;
            if (!node.bufferSource) {
              return self2;
            }
            if (Howler2._scratchBuffer && node.bufferSource) {
              node.bufferSource.onended = null;
              node.bufferSource.disconnect(0);
              if (isIOS) {
                try {
                  node.bufferSource.buffer = Howler2._scratchBuffer;
                } catch (e) {
                }
              }
            }
            node.bufferSource = null;
            return self2;
          },
          /**
           * Set the source to a 0-second silence to stop any downloading (except in IE).
           * @param  {Object} node Audio node to clear.
           */
          _clearSound: function(node) {
            var checkIE = /MSIE |Trident\//.test(Howler2._navigator && Howler2._navigator.userAgent);
            if (!checkIE) {
              node.src = "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA";
            }
          }
        };
        var Sound2 = function(howl) {
          this._parent = howl;
          this.init();
        };
        Sound2.prototype = {
          /**
           * Initialize a new Sound object.
           * @return {Sound}
           */
          init: function() {
            var self2 = this;
            var parent = self2._parent;
            self2._muted = parent._muted;
            self2._loop = parent._loop;
            self2._volume = parent._volume;
            self2._rate = parent._rate;
            self2._seek = 0;
            self2._paused = true;
            self2._ended = true;
            self2._sprite = "__default";
            self2._id = ++Howler2._counter;
            parent._sounds.push(self2);
            self2.create();
            return self2;
          },
          /**
           * Create and setup a new sound object, whether HTML5 Audio or Web Audio.
           * @return {Sound}
           */
          create: function() {
            var self2 = this;
            var parent = self2._parent;
            var volume = Howler2._muted || self2._muted || self2._parent._muted ? 0 : self2._volume;
            if (parent._webAudio) {
              self2._node = typeof Howler2.ctx.createGain === "undefined" ? Howler2.ctx.createGainNode() : Howler2.ctx.createGain();
              self2._node.gain.setValueAtTime(volume, Howler2.ctx.currentTime);
              self2._node.paused = true;
              self2._node.connect(Howler2.masterGain);
            } else if (!Howler2.noAudio) {
              self2._node = Howler2._obtainHtml5Audio();
              self2._errorFn = self2._errorListener.bind(self2);
              self2._node.addEventListener("error", self2._errorFn, false);
              self2._loadFn = self2._loadListener.bind(self2);
              self2._node.addEventListener(Howler2._canPlayEvent, self2._loadFn, false);
              self2._endFn = self2._endListener.bind(self2);
              self2._node.addEventListener("ended", self2._endFn, false);
              self2._node.src = parent._src;
              self2._node.preload = parent._preload === true ? "auto" : parent._preload;
              self2._node.volume = volume * Howler2.volume();
              self2._node.load();
            }
            return self2;
          },
          /**
           * Reset the parameters of this sound to the original state (for recycle).
           * @return {Sound}
           */
          reset: function() {
            var self2 = this;
            var parent = self2._parent;
            self2._muted = parent._muted;
            self2._loop = parent._loop;
            self2._volume = parent._volume;
            self2._rate = parent._rate;
            self2._seek = 0;
            self2._rateSeek = 0;
            self2._paused = true;
            self2._ended = true;
            self2._sprite = "__default";
            self2._id = ++Howler2._counter;
            return self2;
          },
          /**
           * HTML5 Audio error listener callback.
           */
          _errorListener: function() {
            var self2 = this;
            self2._parent._emit("loaderror", self2._id, self2._node.error ? self2._node.error.code : 0);
            self2._node.removeEventListener("error", self2._errorFn, false);
          },
          /**
           * HTML5 Audio canplaythrough listener callback.
           */
          _loadListener: function() {
            var self2 = this;
            var parent = self2._parent;
            parent._duration = Math.ceil(self2._node.duration * 10) / 10;
            if (Object.keys(parent._sprite).length === 0) {
              parent._sprite = { __default: [0, parent._duration * 1e3] };
            }
            if (parent._state !== "loaded") {
              parent._state = "loaded";
              parent._emit("load");
              parent._loadQueue();
            }
            self2._node.removeEventListener(Howler2._canPlayEvent, self2._loadFn, false);
          },
          /**
           * HTML5 Audio ended listener callback.
           */
          _endListener: function() {
            var self2 = this;
            var parent = self2._parent;
            if (parent._duration === Infinity) {
              parent._duration = Math.ceil(self2._node.duration * 10) / 10;
              if (parent._sprite.__default[1] === Infinity) {
                parent._sprite.__default[1] = parent._duration * 1e3;
              }
              parent._ended(self2);
            }
            self2._node.removeEventListener("ended", self2._endFn, false);
          }
        };
        var cache = {};
        var loadBuffer = function(self2) {
          var url = self2._src;
          if (cache[url]) {
            self2._duration = cache[url].duration;
            loadSound(self2);
            return;
          }
          if (/^data:[^;]+;base64,/.test(url)) {
            var data = atob(url.split(",")[1]);
            var dataView = new Uint8Array(data.length);
            for (var i = 0; i < data.length; ++i) {
              dataView[i] = data.charCodeAt(i);
            }
            decodeAudioData(dataView.buffer, self2);
          } else {
            var xhr = new XMLHttpRequest();
            xhr.open(self2._xhr.method, url, true);
            xhr.withCredentials = self2._xhr.withCredentials;
            xhr.responseType = "arraybuffer";
            if (self2._xhr.headers) {
              Object.keys(self2._xhr.headers).forEach(function(key) {
                xhr.setRequestHeader(key, self2._xhr.headers[key]);
              });
            }
            xhr.onload = function() {
              var code = (xhr.status + "")[0];
              if (code !== "0" && code !== "2" && code !== "3") {
                self2._emit("loaderror", null, "Failed loading audio file with status: " + xhr.status + ".");
                return;
              }
              decodeAudioData(xhr.response, self2);
            };
            xhr.onerror = function() {
              if (self2._webAudio) {
                self2._html5 = true;
                self2._webAudio = false;
                self2._sounds = [];
                delete cache[url];
                self2.load();
              }
            };
            safeXhrSend(xhr);
          }
        };
        var safeXhrSend = function(xhr) {
          try {
            xhr.send();
          } catch (e) {
            xhr.onerror();
          }
        };
        var decodeAudioData = function(arraybuffer, self2) {
          var error = function() {
            self2._emit("loaderror", null, "Decoding audio data failed.");
          };
          var success = function(buffer) {
            if (buffer && self2._sounds.length > 0) {
              cache[self2._src] = buffer;
              loadSound(self2, buffer);
            } else {
              error();
            }
          };
          if (typeof Promise !== "undefined" && Howler2.ctx.decodeAudioData.length === 1) {
            Howler2.ctx.decodeAudioData(arraybuffer).then(success).catch(error);
          } else {
            Howler2.ctx.decodeAudioData(arraybuffer, success, error);
          }
        };
        var loadSound = function(self2, buffer) {
          if (buffer && !self2._duration) {
            self2._duration = buffer.duration;
          }
          if (Object.keys(self2._sprite).length === 0) {
            self2._sprite = { __default: [0, self2._duration * 1e3] };
          }
          if (self2._state !== "loaded") {
            self2._state = "loaded";
            self2._emit("load");
            self2._loadQueue();
          }
        };
        var setupAudioContext = function() {
          if (!Howler2.usingWebAudio) {
            return;
          }
          try {
            if (typeof AudioContext !== "undefined") {
              Howler2.ctx = new AudioContext();
            } else if (typeof webkitAudioContext !== "undefined") {
              Howler2.ctx = new webkitAudioContext();
            } else {
              Howler2.usingWebAudio = false;
            }
          } catch (e) {
            Howler2.usingWebAudio = false;
          }
          if (!Howler2.ctx) {
            Howler2.usingWebAudio = false;
          }
          var iOS = /iP(hone|od|ad)/.test(Howler2._navigator && Howler2._navigator.platform);
          var appVersion = Howler2._navigator && Howler2._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);
          var version = appVersion ? parseInt(appVersion[1], 10) : null;
          if (iOS && version && version < 9) {
            var safari = /safari/.test(Howler2._navigator && Howler2._navigator.userAgent.toLowerCase());
            if (Howler2._navigator && !safari) {
              Howler2.usingWebAudio = false;
            }
          }
          if (Howler2.usingWebAudio) {
            Howler2.masterGain = typeof Howler2.ctx.createGain === "undefined" ? Howler2.ctx.createGainNode() : Howler2.ctx.createGain();
            Howler2.masterGain.gain.setValueAtTime(Howler2._muted ? 0 : Howler2._volume, Howler2.ctx.currentTime);
            Howler2.masterGain.connect(Howler2.ctx.destination);
          }
          Howler2._setup();
        };
        if (typeof define === "function" && define.amd) {
          define([], function() {
            return {
              Howler: Howler2,
              Howl: Howl2
            };
          });
        }
        if (typeof exports !== "undefined") {
          exports.Howler = Howler2;
          exports.Howl = Howl2;
        }
        if (typeof global !== "undefined") {
          global.HowlerGlobal = HowlerGlobal2;
          global.Howler = Howler2;
          global.Howl = Howl2;
          global.Sound = Sound2;
        } else if (typeof window !== "undefined") {
          window.HowlerGlobal = HowlerGlobal2;
          window.Howler = Howler2;
          window.Howl = Howl2;
          window.Sound = Sound2;
        }
      })();
      (function() {
        "use strict";
        HowlerGlobal.prototype._pos = [0, 0, 0];
        HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0];
        HowlerGlobal.prototype.stereo = function(pan) {
          var self2 = this;
          if (!self2.ctx || !self2.ctx.listener) {
            return self2;
          }
          for (var i = self2._howls.length - 1; i >= 0; i--) {
            self2._howls[i].stereo(pan);
          }
          return self2;
        };
        HowlerGlobal.prototype.pos = function(x, y, z) {
          var self2 = this;
          if (!self2.ctx || !self2.ctx.listener) {
            return self2;
          }
          y = typeof y !== "number" ? self2._pos[1] : y;
          z = typeof z !== "number" ? self2._pos[2] : z;
          if (typeof x === "number") {
            self2._pos = [x, y, z];
            if (typeof self2.ctx.listener.positionX !== "undefined") {
              self2.ctx.listener.positionX.setTargetAtTime(self2._pos[0], Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.positionY.setTargetAtTime(self2._pos[1], Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.positionZ.setTargetAtTime(self2._pos[2], Howler.ctx.currentTime, 0.1);
            } else {
              self2.ctx.listener.setPosition(self2._pos[0], self2._pos[1], self2._pos[2]);
            }
          } else {
            return self2._pos;
          }
          return self2;
        };
        HowlerGlobal.prototype.orientation = function(x, y, z, xUp, yUp, zUp) {
          var self2 = this;
          if (!self2.ctx || !self2.ctx.listener) {
            return self2;
          }
          var or = self2._orientation;
          y = typeof y !== "number" ? or[1] : y;
          z = typeof z !== "number" ? or[2] : z;
          xUp = typeof xUp !== "number" ? or[3] : xUp;
          yUp = typeof yUp !== "number" ? or[4] : yUp;
          zUp = typeof zUp !== "number" ? or[5] : zUp;
          if (typeof x === "number") {
            self2._orientation = [x, y, z, xUp, yUp, zUp];
            if (typeof self2.ctx.listener.forwardX !== "undefined") {
              self2.ctx.listener.forwardX.setTargetAtTime(x, Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.forwardY.setTargetAtTime(y, Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.forwardZ.setTargetAtTime(z, Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.upX.setTargetAtTime(xUp, Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.upY.setTargetAtTime(yUp, Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.upZ.setTargetAtTime(zUp, Howler.ctx.currentTime, 0.1);
            } else {
              self2.ctx.listener.setOrientation(x, y, z, xUp, yUp, zUp);
            }
          } else {
            return or;
          }
          return self2;
        };
        Howl.prototype.init = function(_super) {
          return function(o) {
            var self2 = this;
            self2._orientation = o.orientation || [1, 0, 0];
            self2._stereo = o.stereo || null;
            self2._pos = o.pos || null;
            self2._pannerAttr = {
              coneInnerAngle: typeof o.coneInnerAngle !== "undefined" ? o.coneInnerAngle : 360,
              coneOuterAngle: typeof o.coneOuterAngle !== "undefined" ? o.coneOuterAngle : 360,
              coneOuterGain: typeof o.coneOuterGain !== "undefined" ? o.coneOuterGain : 0,
              distanceModel: typeof o.distanceModel !== "undefined" ? o.distanceModel : "inverse",
              maxDistance: typeof o.maxDistance !== "undefined" ? o.maxDistance : 1e4,
              panningModel: typeof o.panningModel !== "undefined" ? o.panningModel : "HRTF",
              refDistance: typeof o.refDistance !== "undefined" ? o.refDistance : 1,
              rolloffFactor: typeof o.rolloffFactor !== "undefined" ? o.rolloffFactor : 1
            };
            self2._onstereo = o.onstereo ? [{ fn: o.onstereo }] : [];
            self2._onpos = o.onpos ? [{ fn: o.onpos }] : [];
            self2._onorientation = o.onorientation ? [{ fn: o.onorientation }] : [];
            return _super.call(this, o);
          };
        }(Howl.prototype.init);
        Howl.prototype.stereo = function(pan, id) {
          var self2 = this;
          if (!self2._webAudio) {
            return self2;
          }
          if (self2._state !== "loaded") {
            self2._queue.push({
              event: "stereo",
              action: function() {
                self2.stereo(pan, id);
              }
            });
            return self2;
          }
          var pannerType = typeof Howler.ctx.createStereoPanner === "undefined" ? "spatial" : "stereo";
          if (typeof id === "undefined") {
            if (typeof pan === "number") {
              self2._stereo = pan;
              self2._pos = [pan, 0, 0];
            } else {
              return self2._stereo;
            }
          }
          var ids = self2._getSoundIds(id);
          for (var i = 0; i < ids.length; i++) {
            var sound = self2._soundById(ids[i]);
            if (sound) {
              if (typeof pan === "number") {
                sound._stereo = pan;
                sound._pos = [pan, 0, 0];
                if (sound._node) {
                  sound._pannerAttr.panningModel = "equalpower";
                  if (!sound._panner || !sound._panner.pan) {
                    setupPanner(sound, pannerType);
                  }
                  if (pannerType === "spatial") {
                    if (typeof sound._panner.positionX !== "undefined") {
                      sound._panner.positionX.setValueAtTime(pan, Howler.ctx.currentTime);
                      sound._panner.positionY.setValueAtTime(0, Howler.ctx.currentTime);
                      sound._panner.positionZ.setValueAtTime(0, Howler.ctx.currentTime);
                    } else {
                      sound._panner.setPosition(pan, 0, 0);
                    }
                  } else {
                    sound._panner.pan.setValueAtTime(pan, Howler.ctx.currentTime);
                  }
                }
                self2._emit("stereo", sound._id);
              } else {
                return sound._stereo;
              }
            }
          }
          return self2;
        };
        Howl.prototype.pos = function(x, y, z, id) {
          var self2 = this;
          if (!self2._webAudio) {
            return self2;
          }
          if (self2._state !== "loaded") {
            self2._queue.push({
              event: "pos",
              action: function() {
                self2.pos(x, y, z, id);
              }
            });
            return self2;
          }
          y = typeof y !== "number" ? 0 : y;
          z = typeof z !== "number" ? -0.5 : z;
          if (typeof id === "undefined") {
            if (typeof x === "number") {
              self2._pos = [x, y, z];
            } else {
              return self2._pos;
            }
          }
          var ids = self2._getSoundIds(id);
          for (var i = 0; i < ids.length; i++) {
            var sound = self2._soundById(ids[i]);
            if (sound) {
              if (typeof x === "number") {
                sound._pos = [x, y, z];
                if (sound._node) {
                  if (!sound._panner || sound._panner.pan) {
                    setupPanner(sound, "spatial");
                  }
                  if (typeof sound._panner.positionX !== "undefined") {
                    sound._panner.positionX.setValueAtTime(x, Howler.ctx.currentTime);
                    sound._panner.positionY.setValueAtTime(y, Howler.ctx.currentTime);
                    sound._panner.positionZ.setValueAtTime(z, Howler.ctx.currentTime);
                  } else {
                    sound._panner.setPosition(x, y, z);
                  }
                }
                self2._emit("pos", sound._id);
              } else {
                return sound._pos;
              }
            }
          }
          return self2;
        };
        Howl.prototype.orientation = function(x, y, z, id) {
          var self2 = this;
          if (!self2._webAudio) {
            return self2;
          }
          if (self2._state !== "loaded") {
            self2._queue.push({
              event: "orientation",
              action: function() {
                self2.orientation(x, y, z, id);
              }
            });
            return self2;
          }
          y = typeof y !== "number" ? self2._orientation[1] : y;
          z = typeof z !== "number" ? self2._orientation[2] : z;
          if (typeof id === "undefined") {
            if (typeof x === "number") {
              self2._orientation = [x, y, z];
            } else {
              return self2._orientation;
            }
          }
          var ids = self2._getSoundIds(id);
          for (var i = 0; i < ids.length; i++) {
            var sound = self2._soundById(ids[i]);
            if (sound) {
              if (typeof x === "number") {
                sound._orientation = [x, y, z];
                if (sound._node) {
                  if (!sound._panner) {
                    if (!sound._pos) {
                      sound._pos = self2._pos || [0, 0, -0.5];
                    }
                    setupPanner(sound, "spatial");
                  }
                  if (typeof sound._panner.orientationX !== "undefined") {
                    sound._panner.orientationX.setValueAtTime(x, Howler.ctx.currentTime);
                    sound._panner.orientationY.setValueAtTime(y, Howler.ctx.currentTime);
                    sound._panner.orientationZ.setValueAtTime(z, Howler.ctx.currentTime);
                  } else {
                    sound._panner.setOrientation(x, y, z);
                  }
                }
                self2._emit("orientation", sound._id);
              } else {
                return sound._orientation;
              }
            }
          }
          return self2;
        };
        Howl.prototype.pannerAttr = function() {
          var self2 = this;
          var args = arguments;
          var o, id, sound;
          if (!self2._webAudio) {
            return self2;
          }
          if (args.length === 0) {
            return self2._pannerAttr;
          } else if (args.length === 1) {
            if (typeof args[0] === "object") {
              o = args[0];
              if (typeof id === "undefined") {
                if (!o.pannerAttr) {
                  o.pannerAttr = {
                    coneInnerAngle: o.coneInnerAngle,
                    coneOuterAngle: o.coneOuterAngle,
                    coneOuterGain: o.coneOuterGain,
                    distanceModel: o.distanceModel,
                    maxDistance: o.maxDistance,
                    refDistance: o.refDistance,
                    rolloffFactor: o.rolloffFactor,
                    panningModel: o.panningModel
                  };
                }
                self2._pannerAttr = {
                  coneInnerAngle: typeof o.pannerAttr.coneInnerAngle !== "undefined" ? o.pannerAttr.coneInnerAngle : self2._coneInnerAngle,
                  coneOuterAngle: typeof o.pannerAttr.coneOuterAngle !== "undefined" ? o.pannerAttr.coneOuterAngle : self2._coneOuterAngle,
                  coneOuterGain: typeof o.pannerAttr.coneOuterGain !== "undefined" ? o.pannerAttr.coneOuterGain : self2._coneOuterGain,
                  distanceModel: typeof o.pannerAttr.distanceModel !== "undefined" ? o.pannerAttr.distanceModel : self2._distanceModel,
                  maxDistance: typeof o.pannerAttr.maxDistance !== "undefined" ? o.pannerAttr.maxDistance : self2._maxDistance,
                  refDistance: typeof o.pannerAttr.refDistance !== "undefined" ? o.pannerAttr.refDistance : self2._refDistance,
                  rolloffFactor: typeof o.pannerAttr.rolloffFactor !== "undefined" ? o.pannerAttr.rolloffFactor : self2._rolloffFactor,
                  panningModel: typeof o.pannerAttr.panningModel !== "undefined" ? o.pannerAttr.panningModel : self2._panningModel
                };
              }
            } else {
              sound = self2._soundById(parseInt(args[0], 10));
              return sound ? sound._pannerAttr : self2._pannerAttr;
            }
          } else if (args.length === 2) {
            o = args[0];
            id = parseInt(args[1], 10);
          }
          var ids = self2._getSoundIds(id);
          for (var i = 0; i < ids.length; i++) {
            sound = self2._soundById(ids[i]);
            if (sound) {
              var pa = sound._pannerAttr;
              pa = {
                coneInnerAngle: typeof o.coneInnerAngle !== "undefined" ? o.coneInnerAngle : pa.coneInnerAngle,
                coneOuterAngle: typeof o.coneOuterAngle !== "undefined" ? o.coneOuterAngle : pa.coneOuterAngle,
                coneOuterGain: typeof o.coneOuterGain !== "undefined" ? o.coneOuterGain : pa.coneOuterGain,
                distanceModel: typeof o.distanceModel !== "undefined" ? o.distanceModel : pa.distanceModel,
                maxDistance: typeof o.maxDistance !== "undefined" ? o.maxDistance : pa.maxDistance,
                refDistance: typeof o.refDistance !== "undefined" ? o.refDistance : pa.refDistance,
                rolloffFactor: typeof o.rolloffFactor !== "undefined" ? o.rolloffFactor : pa.rolloffFactor,
                panningModel: typeof o.panningModel !== "undefined" ? o.panningModel : pa.panningModel
              };
              var panner = sound._panner;
              if (!panner) {
                if (!sound._pos) {
                  sound._pos = self2._pos || [0, 0, -0.5];
                }
                setupPanner(sound, "spatial");
                panner = sound._panner;
              }
              panner.coneInnerAngle = pa.coneInnerAngle;
              panner.coneOuterAngle = pa.coneOuterAngle;
              panner.coneOuterGain = pa.coneOuterGain;
              panner.distanceModel = pa.distanceModel;
              panner.maxDistance = pa.maxDistance;
              panner.refDistance = pa.refDistance;
              panner.rolloffFactor = pa.rolloffFactor;
              panner.panningModel = pa.panningModel;
            }
          }
          return self2;
        };
        Sound.prototype.init = function(_super) {
          return function() {
            var self2 = this;
            var parent = self2._parent;
            self2._orientation = parent._orientation;
            self2._stereo = parent._stereo;
            self2._pos = parent._pos;
            self2._pannerAttr = parent._pannerAttr;
            _super.call(this);
            if (self2._stereo) {
              parent.stereo(self2._stereo);
            } else if (self2._pos) {
              parent.pos(self2._pos[0], self2._pos[1], self2._pos[2], self2._id);
            }
          };
        }(Sound.prototype.init);
        Sound.prototype.reset = function(_super) {
          return function() {
            var self2 = this;
            var parent = self2._parent;
            self2._orientation = parent._orientation;
            self2._stereo = parent._stereo;
            self2._pos = parent._pos;
            self2._pannerAttr = parent._pannerAttr;
            if (self2._stereo) {
              parent.stereo(self2._stereo);
            } else if (self2._pos) {
              parent.pos(self2._pos[0], self2._pos[1], self2._pos[2], self2._id);
            } else if (self2._panner) {
              self2._panner.disconnect(0);
              self2._panner = void 0;
              parent._refreshBuffer(self2);
            }
            return _super.call(this);
          };
        }(Sound.prototype.reset);
        var setupPanner = function(sound, type) {
          type = type || "spatial";
          if (type === "spatial") {
            sound._panner = Howler.ctx.createPanner();
            sound._panner.coneInnerAngle = sound._pannerAttr.coneInnerAngle;
            sound._panner.coneOuterAngle = sound._pannerAttr.coneOuterAngle;
            sound._panner.coneOuterGain = sound._pannerAttr.coneOuterGain;
            sound._panner.distanceModel = sound._pannerAttr.distanceModel;
            sound._panner.maxDistance = sound._pannerAttr.maxDistance;
            sound._panner.refDistance = sound._pannerAttr.refDistance;
            sound._panner.rolloffFactor = sound._pannerAttr.rolloffFactor;
            sound._panner.panningModel = sound._pannerAttr.panningModel;
            if (typeof sound._panner.positionX !== "undefined") {
              sound._panner.positionX.setValueAtTime(sound._pos[0], Howler.ctx.currentTime);
              sound._panner.positionY.setValueAtTime(sound._pos[1], Howler.ctx.currentTime);
              sound._panner.positionZ.setValueAtTime(sound._pos[2], Howler.ctx.currentTime);
            } else {
              sound._panner.setPosition(sound._pos[0], sound._pos[1], sound._pos[2]);
            }
            if (typeof sound._panner.orientationX !== "undefined") {
              sound._panner.orientationX.setValueAtTime(sound._orientation[0], Howler.ctx.currentTime);
              sound._panner.orientationY.setValueAtTime(sound._orientation[1], Howler.ctx.currentTime);
              sound._panner.orientationZ.setValueAtTime(sound._orientation[2], Howler.ctx.currentTime);
            } else {
              sound._panner.setOrientation(sound._orientation[0], sound._orientation[1], sound._orientation[2]);
            }
          } else {
            sound._panner = Howler.ctx.createStereoPanner();
            sound._panner.pan.setValueAtTime(sound._stereo, Howler.ctx.currentTime);
          }
          sound._panner.connect(sound._node);
          if (!sound._paused) {
            sound._parent.pause(sound._id, true).play(sound._id, true);
          }
        };
      })();
    }
  });

  // node_modules/earcut/src/earcut.js
  var require_earcut = __commonJS({
    "node_modules/earcut/src/earcut.js"(exports, module) {
      "use strict";
      module.exports = earcut2;
      module.exports.default = earcut2;
      function earcut2(data, holeIndices, dim) {
        dim = dim || 2;
        var hasHoles = holeIndices && holeIndices.length, outerLen = hasHoles ? holeIndices[0] * dim : data.length, outerNode = linkedList(data, 0, outerLen, dim, true), triangles = [];
        if (!outerNode || outerNode.next === outerNode.prev)
          return triangles;
        var minX, minY, maxX, maxY, x, y, invSize;
        if (hasHoles)
          outerNode = eliminateHoles(data, holeIndices, outerNode, dim);
        if (data.length > 80 * dim) {
          minX = maxX = data[0];
          minY = maxY = data[1];
          for (var i = dim; i < outerLen; i += dim) {
            x = data[i];
            y = data[i + 1];
            if (x < minX)
              minX = x;
            if (y < minY)
              minY = y;
            if (x > maxX)
              maxX = x;
            if (y > maxY)
              maxY = y;
          }
          invSize = Math.max(maxX - minX, maxY - minY);
          invSize = invSize !== 0 ? 32767 / invSize : 0;
        }
        earcutLinked(outerNode, triangles, dim, minX, minY, invSize, 0);
        return triangles;
      }
      function linkedList(data, start, end, dim, clockwise) {
        var i, last;
        if (clockwise === signedArea(data, start, end, dim) > 0) {
          for (i = start; i < end; i += dim)
            last = insertNode(i, data[i], data[i + 1], last);
        } else {
          for (i = end - dim; i >= start; i -= dim)
            last = insertNode(i, data[i], data[i + 1], last);
        }
        if (last && equals6(last, last.next)) {
          removeNode(last);
          last = last.next;
        }
        return last;
      }
      function filterPoints(start, end) {
        if (!start)
          return start;
        if (!end)
          end = start;
        var p = start, again;
        do {
          again = false;
          if (!p.steiner && (equals6(p, p.next) || area(p.prev, p, p.next) === 0)) {
            removeNode(p);
            p = end = p.prev;
            if (p === p.next)
              break;
            again = true;
          } else {
            p = p.next;
          }
        } while (again || p !== end);
        return end;
      }
      function earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {
        if (!ear)
          return;
        if (!pass && invSize)
          indexCurve(ear, minX, minY, invSize);
        var stop = ear, prev, next;
        while (ear.prev !== ear.next) {
          prev = ear.prev;
          next = ear.next;
          if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {
            triangles.push(prev.i / dim | 0);
            triangles.push(ear.i / dim | 0);
            triangles.push(next.i / dim | 0);
            removeNode(ear);
            ear = next.next;
            stop = next.next;
            continue;
          }
          ear = next;
          if (ear === stop) {
            if (!pass) {
              earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);
            } else if (pass === 1) {
              ear = cureLocalIntersections(filterPoints(ear), triangles, dim);
              earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);
            } else if (pass === 2) {
              splitEarcut(ear, triangles, dim, minX, minY, invSize);
            }
            break;
          }
        }
      }
      function isEar(ear) {
        var a = ear.prev, b = ear, c = ear.next;
        if (area(a, b, c) >= 0)
          return false;
        var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;
        var x0 = ax < bx ? ax < cx ? ax : cx : bx < cx ? bx : cx, y0 = ay < by ? ay < cy ? ay : cy : by < cy ? by : cy, x1 = ax > bx ? ax > cx ? ax : cx : bx > cx ? bx : cx, y1 = ay > by ? ay > cy ? ay : cy : by > cy ? by : cy;
        var p = c.next;
        while (p !== a) {
          if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0)
            return false;
          p = p.next;
        }
        return true;
      }
      function isEarHashed(ear, minX, minY, invSize) {
        var a = ear.prev, b = ear, c = ear.next;
        if (area(a, b, c) >= 0)
          return false;
        var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;
        var x0 = ax < bx ? ax < cx ? ax : cx : bx < cx ? bx : cx, y0 = ay < by ? ay < cy ? ay : cy : by < cy ? by : cy, x1 = ax > bx ? ax > cx ? ax : cx : bx > cx ? bx : cx, y1 = ay > by ? ay > cy ? ay : cy : by > cy ? by : cy;
        var minZ = zOrder(x0, y0, minX, minY, invSize), maxZ = zOrder(x1, y1, minX, minY, invSize);
        var p = ear.prevZ, n = ear.nextZ;
        while (p && p.z >= minZ && n && n.z <= maxZ) {
          if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c && pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0)
            return false;
          p = p.prevZ;
          if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c && pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0)
            return false;
          n = n.nextZ;
        }
        while (p && p.z >= minZ) {
          if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c && pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0)
            return false;
          p = p.prevZ;
        }
        while (n && n.z <= maxZ) {
          if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c && pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0)
            return false;
          n = n.nextZ;
        }
        return true;
      }
      function cureLocalIntersections(start, triangles, dim) {
        var p = start;
        do {
          var a = p.prev, b = p.next.next;
          if (!equals6(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {
            triangles.push(a.i / dim | 0);
            triangles.push(p.i / dim | 0);
            triangles.push(b.i / dim | 0);
            removeNode(p);
            removeNode(p.next);
            p = start = b;
          }
          p = p.next;
        } while (p !== start);
        return filterPoints(p);
      }
      function splitEarcut(start, triangles, dim, minX, minY, invSize) {
        var a = start;
        do {
          var b = a.next.next;
          while (b !== a.prev) {
            if (a.i !== b.i && isValidDiagonal(a, b)) {
              var c = splitPolygon(a, b);
              a = filterPoints(a, a.next);
              c = filterPoints(c, c.next);
              earcutLinked(a, triangles, dim, minX, minY, invSize, 0);
              earcutLinked(c, triangles, dim, minX, minY, invSize, 0);
              return;
            }
            b = b.next;
          }
          a = a.next;
        } while (a !== start);
      }
      function eliminateHoles(data, holeIndices, outerNode, dim) {
        var queue = [], i, len4, start, end, list;
        for (i = 0, len4 = holeIndices.length; i < len4; i++) {
          start = holeIndices[i] * dim;
          end = i < len4 - 1 ? holeIndices[i + 1] * dim : data.length;
          list = linkedList(data, start, end, dim, false);
          if (list === list.next)
            list.steiner = true;
          queue.push(getLeftmost(list));
        }
        queue.sort(compareX);
        for (i = 0; i < queue.length; i++) {
          outerNode = eliminateHole(queue[i], outerNode);
        }
        return outerNode;
      }
      function compareX(a, b) {
        return a.x - b.x;
      }
      function eliminateHole(hole, outerNode) {
        var bridge = findHoleBridge(hole, outerNode);
        if (!bridge) {
          return outerNode;
        }
        var bridgeReverse = splitPolygon(bridge, hole);
        filterPoints(bridgeReverse, bridgeReverse.next);
        return filterPoints(bridge, bridge.next);
      }
      function findHoleBridge(hole, outerNode) {
        var p = outerNode, hx = hole.x, hy = hole.y, qx = -Infinity, m;
        do {
          if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {
            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);
            if (x <= hx && x > qx) {
              qx = x;
              m = p.x < p.next.x ? p : p.next;
              if (x === hx)
                return m;
            }
          }
          p = p.next;
        } while (p !== outerNode);
        if (!m)
          return null;
        var stop = m, mx = m.x, my = m.y, tanMin = Infinity, tan;
        p = m;
        do {
          if (hx >= p.x && p.x >= mx && hx !== p.x && pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {
            tan = Math.abs(hy - p.y) / (hx - p.x);
            if (locallyInside(p, hole) && (tan < tanMin || tan === tanMin && (p.x > m.x || p.x === m.x && sectorContainsSector(m, p)))) {
              m = p;
              tanMin = tan;
            }
          }
          p = p.next;
        } while (p !== stop);
        return m;
      }
      function sectorContainsSector(m, p) {
        return area(m.prev, m, p.prev) < 0 && area(p.next, m, m.next) < 0;
      }
      function indexCurve(start, minX, minY, invSize) {
        var p = start;
        do {
          if (p.z === 0)
            p.z = zOrder(p.x, p.y, minX, minY, invSize);
          p.prevZ = p.prev;
          p.nextZ = p.next;
          p = p.next;
        } while (p !== start);
        p.prevZ.nextZ = null;
        p.prevZ = null;
        sortLinked(p);
      }
      function sortLinked(list) {
        var i, p, q, e, tail, numMerges, pSize, qSize, inSize = 1;
        do {
          p = list;
          list = null;
          tail = null;
          numMerges = 0;
          while (p) {
            numMerges++;
            q = p;
            pSize = 0;
            for (i = 0; i < inSize; i++) {
              pSize++;
              q = q.nextZ;
              if (!q)
                break;
            }
            qSize = inSize;
            while (pSize > 0 || qSize > 0 && q) {
              if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {
                e = p;
                p = p.nextZ;
                pSize--;
              } else {
                e = q;
                q = q.nextZ;
                qSize--;
              }
              if (tail)
                tail.nextZ = e;
              else
                list = e;
              e.prevZ = tail;
              tail = e;
            }
            p = q;
          }
          tail.nextZ = null;
          inSize *= 2;
        } while (numMerges > 1);
        return list;
      }
      function zOrder(x, y, minX, minY, invSize) {
        x = (x - minX) * invSize | 0;
        y = (y - minY) * invSize | 0;
        x = (x | x << 8) & 16711935;
        x = (x | x << 4) & 252645135;
        x = (x | x << 2) & 858993459;
        x = (x | x << 1) & 1431655765;
        y = (y | y << 8) & 16711935;
        y = (y | y << 4) & 252645135;
        y = (y | y << 2) & 858993459;
        y = (y | y << 1) & 1431655765;
        return x | y << 1;
      }
      function getLeftmost(start) {
        var p = start, leftmost = start;
        do {
          if (p.x < leftmost.x || p.x === leftmost.x && p.y < leftmost.y)
            leftmost = p;
          p = p.next;
        } while (p !== start);
        return leftmost;
      }
      function pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {
        return (cx - px) * (ay - py) >= (ax - px) * (cy - py) && (ax - px) * (by - py) >= (bx - px) * (ay - py) && (bx - px) * (cy - py) >= (cx - px) * (by - py);
      }
      function isValidDiagonal(a, b) {
        return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && // dones't intersect other edges
        (locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b) && // locally visible
        (area(a.prev, a, b.prev) || area(a, b.prev, b)) || // does not create opposite-facing sectors
        equals6(a, b) && area(a.prev, a, a.next) > 0 && area(b.prev, b, b.next) > 0);
      }
      function area(p, q, r) {
        return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);
      }
      function equals6(p1, p2) {
        return p1.x === p2.x && p1.y === p2.y;
      }
      function intersects(p1, q1, p2, q2) {
        var o1 = sign(area(p1, q1, p2));
        var o2 = sign(area(p1, q1, q2));
        var o3 = sign(area(p2, q2, p1));
        var o4 = sign(area(p2, q2, q1));
        if (o1 !== o2 && o3 !== o4)
          return true;
        if (o1 === 0 && onSegment(p1, p2, q1))
          return true;
        if (o2 === 0 && onSegment(p1, q2, q1))
          return true;
        if (o3 === 0 && onSegment(p2, p1, q2))
          return true;
        if (o4 === 0 && onSegment(p2, q1, q2))
          return true;
        return false;
      }
      function onSegment(p, q, r) {
        return q.x <= Math.max(p.x, r.x) && q.x >= Math.min(p.x, r.x) && q.y <= Math.max(p.y, r.y) && q.y >= Math.min(p.y, r.y);
      }
      function sign(num) {
        return num > 0 ? 1 : num < 0 ? -1 : 0;
      }
      function intersectsPolygon(a, b) {
        var p = a;
        do {
          if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i && intersects(p, p.next, a, b))
            return true;
          p = p.next;
        } while (p !== a);
        return false;
      }
      function locallyInside(a, b) {
        return area(a.prev, a, a.next) < 0 ? area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 : area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;
      }
      function middleInside(a, b) {
        var p = a, inside = false, px = (a.x + b.x) / 2, py = (a.y + b.y) / 2;
        do {
          if (p.y > py !== p.next.y > py && p.next.y !== p.y && px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x)
            inside = !inside;
          p = p.next;
        } while (p !== a);
        return inside;
      }
      function splitPolygon(a, b) {
        var a2 = new Node(a.i, a.x, a.y), b2 = new Node(b.i, b.x, b.y), an = a.next, bp = b.prev;
        a.next = b;
        b.prev = a;
        a2.next = an;
        an.prev = a2;
        b2.next = a2;
        a2.prev = b2;
        bp.next = b2;
        b2.prev = bp;
        return b2;
      }
      function insertNode(i, x, y, last) {
        var p = new Node(i, x, y);
        if (!last) {
          p.prev = p;
          p.next = p;
        } else {
          p.next = last.next;
          p.prev = last;
          last.next.prev = p;
          last.next = p;
        }
        return p;
      }
      function removeNode(p) {
        p.next.prev = p.prev;
        p.prev.next = p.next;
        if (p.prevZ)
          p.prevZ.nextZ = p.nextZ;
        if (p.nextZ)
          p.nextZ.prevZ = p.prevZ;
      }
      function Node(i, x, y) {
        this.i = i;
        this.x = x;
        this.y = y;
        this.prev = null;
        this.next = null;
        this.z = 0;
        this.prevZ = null;
        this.nextZ = null;
        this.steiner = false;
      }
      earcut2.deviation = function(data, holeIndices, dim, triangles) {
        var hasHoles = holeIndices && holeIndices.length;
        var outerLen = hasHoles ? holeIndices[0] * dim : data.length;
        var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));
        if (hasHoles) {
          for (var i = 0, len4 = holeIndices.length; i < len4; i++) {
            var start = holeIndices[i] * dim;
            var end = i < len4 - 1 ? holeIndices[i + 1] * dim : data.length;
            polygonArea -= Math.abs(signedArea(data, start, end, dim));
          }
        }
        var trianglesArea = 0;
        for (i = 0; i < triangles.length; i += 3) {
          var a = triangles[i] * dim;
          var b = triangles[i + 1] * dim;
          var c = triangles[i + 2] * dim;
          trianglesArea += Math.abs(
            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) - (data[a] - data[b]) * (data[c + 1] - data[a + 1])
          );
        }
        return polygonArea === 0 && trianglesArea === 0 ? 0 : Math.abs((trianglesArea - polygonArea) / polygonArea);
      };
      function signedArea(data, start, end, dim) {
        var sum = 0;
        for (var i = start, j = end - dim; i < end; i += dim) {
          sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);
          j = i;
        }
        return sum;
      }
      earcut2.flatten = function(data) {
        var dim = data[0][0].length, result = { vertices: [], holes: [], dimensions: dim }, holeIndex = 0;
        for (var i = 0; i < data.length; i++) {
          for (var j = 0; j < data[i].length; j++) {
            for (var d = 0; d < dim; d++)
              result.vertices.push(data[i][j][d]);
          }
          if (i > 0) {
            holeIndex += data[i - 1].length;
            result.holes.push(holeIndex);
          }
        }
        return result;
      };
    }
  });

  // node_modules/@wonderlandengine/components/dist/index.js
  var dist_exports = {};
  __export(dist_exports, {
    ARCamera8thwall: () => ARCamera8thwall,
    Anchor: () => Anchor,
    Cursor: () => Cursor,
    CursorTarget: () => CursorTarget,
    DebugObject: () => DebugObject,
    DeviceOrientationLook: () => DeviceOrientationLook,
    FingerCursor: () => FingerCursor,
    FixedFoveation: () => FixedFoveation,
    HandTracking: () => HandTracking,
    HitTestLocation: () => HitTestLocation,
    HowlerAudioListener: () => HowlerAudioListener,
    HowlerAudioSource: () => HowlerAudioSource,
    ImageTexture: () => ImageTexture,
    InputProfile: () => InputProfile,
    MouseLookComponent: () => MouseLookComponent,
    OrbitalCamera: () => OrbitalCamera,
    PlaneDetection: () => PlaneDetection,
    PlayerHeight: () => PlayerHeight,
    TargetFramerate: () => TargetFramerate,
    TeleportComponent: () => TeleportComponent,
    Trail: () => Trail,
    TwoJointIkSolver: () => TwoJointIkSolver,
    VideoTexture: () => VideoTexture,
    VrModeActiveSwitch: () => VrModeActiveSwitch,
    Vrm: () => Vrm,
    WasdControlsComponent: () => WasdControlsComponent,
    isPointLocalOnXRPlanePolygon: () => isPointLocalOnXRPlanePolygon,
    isPointWorldOnXRPlanePolygon: () => isPointWorldOnXRPlanePolygon
  });

  // node_modules/@wonderlandengine/api/dist/index.js
  var __defProp2 = Object.defineProperty;
  var __getOwnPropDesc2 = Object.getOwnPropertyDescriptor;
  var __decorateClass = (decorators, target, key, kind) => {
    for (var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc2(target, key) : target, i = decorators.length - 1, decorator; i >= 0; i--)
      (decorator = decorators[i]) && (result = (kind ? decorator(target, key, result) : decorator(result)) || result);
    return kind && result && __defProp2(target, key, result), result;
  };
  var Type = ((Type2) => (Type2[Type2.Native = 0] = "Native", Type2[Type2.Bool = 1] = "Bool", Type2[Type2.Int = 2] = "Int", Type2[Type2.Float = 3] = "Float", Type2[Type2.String = 4] = "String", Type2[Type2.Enum = 5] = "Enum", Type2[Type2.Object = 6] = "Object", Type2[Type2.Mesh = 7] = "Mesh", Type2[Type2.Texture = 8] = "Texture", Type2[Type2.Material = 9] = "Material", Type2[Type2.Animation = 10] = "Animation", Type2[Type2.Skin = 11] = "Skin", Type2[Type2.Color = 12] = "Color", Type2[Type2.Vector2 = 13] = "Vector2", Type2[Type2.Vector3 = 14] = "Vector3", Type2[Type2.Vector4 = 15] = "Vector4", Type2))(Type || {});
  var DefaultPropertyCloner = class {
    clone(type, value) {
      switch (type) {
        case 12:
        case 13:
        case 14:
        case 15:
          return value.slice();
        default:
          return value;
      }
    }
  };
  var defaultPropertyCloner = new DefaultPropertyCloner();
  var Property = { bool(defaultValue = false) {
    return { type: 1, default: defaultValue };
  }, int(defaultValue = 0) {
    return { type: 2, default: defaultValue };
  }, float(defaultValue = 0) {
    return { type: 3, default: defaultValue };
  }, string(defaultValue = "") {
    return { type: 4, default: defaultValue };
  }, enum(values, defaultValue) {
    return { type: 5, values, default: defaultValue };
  }, object(opts) {
    return { type: 6, default: null, required: opts?.required ?? false };
  }, mesh(opts) {
    return { type: 7, default: null, required: opts?.required ?? false };
  }, texture(opts) {
    return { type: 8, default: null, required: opts?.required ?? false };
  }, material(opts) {
    return { type: 9, default: null, required: opts?.required ?? false };
  }, animation(opts) {
    return { type: 10, default: null, required: opts?.required ?? false };
  }, skin(opts) {
    return { type: 11, default: null, required: opts?.required ?? false };
  }, color(r = 0, g = 0, b = 0, a = 1) {
    return { type: 12, default: [r, g, b, a] };
  }, vector2(x = 0, y = 0) {
    return { type: 13, default: [x, y] };
  }, vector3(x = 0, y = 0, z = 0) {
    return { type: 14, default: [x, y, z] };
  }, vector4(x = 0, y = 0, z = 0, w = 0) {
    return { type: 15, default: [x, y, z, w] };
  } };
  function propertyDecorator(data) {
    return function(target, propertyKey) {
      let ctor = target.constructor;
      ctor.Properties = ctor.hasOwnProperty("Properties") ? ctor.Properties : {}, ctor.Properties[propertyKey] = data;
    };
  }
  function enumerable() {
    return function(_, __, descriptor) {
      descriptor.enumerable = true;
    };
  }
  function nativeProperty() {
    return function(target, propertyKey, descriptor) {
      enumerable()(target, propertyKey, descriptor), propertyDecorator({ type: 0 })(target, propertyKey);
    };
  }
  var property = {};
  for (let name in Property)
    property[name] = (...args) => {
      let functor = Property[name];
      return propertyDecorator(functor(...args));
    };
  function isNumber(value) {
    return value == null ? false : typeof value == "number" || value.constructor === Number;
  }
  function isImageLike(value) {
    return value instanceof HTMLImageElement || value instanceof HTMLVideoElement || value instanceof HTMLCanvasElement;
  }
  var Emitter = class {
    _listeners = [];
    _notifying = false;
    _transactions = [];
    add(listener, opts = {}) {
      let { once = false, id = void 0 } = opts, data = { id, once, callback: listener };
      return this._notifying ? (this._transactions.push({ type: 1, data }), this) : (this._listeners.push(data), this);
    }
    push(...listeners) {
      for (let cb of listeners)
        this.add(cb);
      return this;
    }
    once(listener) {
      return this.add(listener, { once: true });
    }
    remove(listener) {
      if (this._notifying)
        return this._transactions.push({ type: 2, data: listener }), this;
      let listeners = this._listeners;
      for (let i = 0; i < listeners.length; ++i) {
        let target = listeners[i];
        (target.callback === listener || target.id === listener) && listeners.splice(i--, 1);
      }
      return this;
    }
    has(listener) {
      let listeners = this._listeners;
      for (let i = 0; i < listeners.length; ++i) {
        let target = listeners[i];
        if (target.callback === listener || target.id === listener)
          return true;
      }
      return false;
    }
    notify(...data) {
      let listeners = this._listeners;
      this._notifying = true;
      for (let i = 0; i < listeners.length; ++i) {
        let listener = listeners[i];
        listener.once && listeners.splice(i--, 1);
        try {
          listener.callback(...data);
        } catch (e) {
          console.error(e);
        }
      }
      this._notifying = false, this._flushTransactions();
    }
    notifyUnsafe(...data) {
      let listeners = this._listeners;
      for (let i = 0; i < listeners.length; ++i) {
        let listener = listeners[i];
        listener.once && listeners.splice(i--, 1), listener.callback(...data);
      }
      this._flushTransactions();
    }
    promise() {
      return new Promise((res, _) => {
        this.once((...args) => {
          args.length > 1 ? res(args) : res(args[0]);
        });
      });
    }
    get listenerCount() {
      return this._listeners.length;
    }
    get isEmpty() {
      return this.listenerCount === 0;
    }
    _flushTransactions() {
      let listeners = this._listeners;
      for (let transaction of this._transactions)
        transaction.type === 1 ? listeners.push(transaction.data) : this.remove(transaction.data);
      this._transactions.length = 0;
    }
  };
  var RetainEmitterUndefined = {};
  var RetainEmitter = class extends Emitter {
    _event = RetainEmitterUndefined;
    _reset;
    add(listener, opts) {
      let immediate = opts?.immediate ?? true;
      return this._event !== RetainEmitterUndefined && immediate && listener(...this._event), super.add(listener, opts), this;
    }
    once(listener, immediate) {
      return this.add(listener, { once: true, immediate });
    }
    notify(...data) {
      this._event = data, super.notify(...data);
    }
    notifyUnsafe(...data) {
      this._event = data, super.notifyUnsafe(...data);
    }
    reset() {
      return this._event = RetainEmitterUndefined, this;
    }
    get data() {
      return this.isDataRetained ? this._event : void 0;
    }
    get isDataRetained() {
      return this._event !== RetainEmitterUndefined;
    }
  };
  var Resource = class {
    _index = -1;
    _id = -1;
    _engine;
    constructor(engine, index) {
      this._engine = engine, this._index = index, this._id = index;
    }
    get engine() {
      return this._engine;
    }
    get index() {
      return this._index;
    }
    equals(other) {
      return other ? this._index === other._index : false;
    }
    get isDestroyed() {
      return this._index <= 0;
    }
  };
  function createDestroyedProxy2(type) {
    return new Proxy({}, { get(_, param) {
      if (param === "isDestroyed")
        return true;
      throw new Error(`Cannot read '${param}' of destroyed ${type}`);
    }, set(_, param) {
      throw new Error(`Cannot write '${param}' of destroyed ${type}`);
    } });
  }
  var LogTag = ((LogTag2) => (LogTag2[LogTag2.Engine = 0] = "Engine", LogTag2[LogTag2.Scene = 1] = "Scene", LogTag2[LogTag2.Component = 2] = "Component", LogTag2))(LogTag || {});
  var Collider = ((Collider2) => (Collider2[Collider2.Sphere = 0] = "Sphere", Collider2[Collider2.AxisAlignedBox = 1] = "AxisAlignedBox", Collider2[Collider2.Box = 2] = "Box", Collider2))(Collider || {});
  var Alignment = ((Alignment2) => (Alignment2[Alignment2.Left = 0] = "Left", Alignment2[Alignment2.Center = 1] = "Center", Alignment2[Alignment2.Right = 2] = "Right", Alignment2))(Alignment || {});
  var VerticalAlignment = ((VerticalAlignment2) => (VerticalAlignment2[VerticalAlignment2.Line = 0] = "Line", VerticalAlignment2[VerticalAlignment2.Middle = 1] = "Middle", VerticalAlignment2[VerticalAlignment2.Top = 2] = "Top", VerticalAlignment2[VerticalAlignment2.Bottom = 3] = "Bottom", VerticalAlignment2))(VerticalAlignment || {});
  var TextEffect = ((TextEffect2) => (TextEffect2[TextEffect2.None = 0] = "None", TextEffect2[TextEffect2.Outline = 1] = "Outline", TextEffect2))(TextEffect || {});
  var TextWrapMode = ((TextWrapMode2) => (TextWrapMode2[TextWrapMode2.None = 0] = "None", TextWrapMode2[TextWrapMode2.Soft = 1] = "Soft", TextWrapMode2[TextWrapMode2.Hard = 2] = "Hard", TextWrapMode2[TextWrapMode2.Clip = 3] = "Clip", TextWrapMode2))(TextWrapMode || {});
  var InputType = ((InputType2) => (InputType2[InputType2.Head = 0] = "Head", InputType2[InputType2.EyeLeft = 1] = "EyeLeft", InputType2[InputType2.EyeRight = 2] = "EyeRight", InputType2[InputType2.ControllerLeft = 3] = "ControllerLeft", InputType2[InputType2.ControllerRight = 4] = "ControllerRight", InputType2[InputType2.RayLeft = 5] = "RayLeft", InputType2[InputType2.RayRight = 6] = "RayRight", InputType2))(InputType || {});
  var ProjectionType = ((ProjectionType2) => (ProjectionType2[ProjectionType2.Perspective = 0] = "Perspective", ProjectionType2[ProjectionType2.Orthographic = 1] = "Orthographic", ProjectionType2))(ProjectionType || {});
  var LightType = ((LightType2) => (LightType2[LightType2.Point = 0] = "Point", LightType2[LightType2.Spot = 1] = "Spot", LightType2[LightType2.Sun = 2] = "Sun", LightType2))(LightType || {});
  var AnimationState = ((AnimationState2) => (AnimationState2[AnimationState2.Playing = 0] = "Playing", AnimationState2[AnimationState2.Paused = 1] = "Paused", AnimationState2[AnimationState2.Stopped = 2] = "Stopped", AnimationState2))(AnimationState || {});
  var RootMotionMode = ((RootMotionMode2) => (RootMotionMode2[RootMotionMode2.None = 0] = "None", RootMotionMode2[RootMotionMode2.ApplyToOwner = 1] = "ApplyToOwner", RootMotionMode2[RootMotionMode2.Script = 2] = "Script", RootMotionMode2))(RootMotionMode || {});
  var ForceMode = ((ForceMode2) => (ForceMode2[ForceMode2.Force = 0] = "Force", ForceMode2[ForceMode2.Impulse = 1] = "Impulse", ForceMode2[ForceMode2.VelocityChange = 2] = "VelocityChange", ForceMode2[ForceMode2.Acceleration = 3] = "Acceleration", ForceMode2))(ForceMode || {});
  var CollisionEventType = ((CollisionEventType2) => (CollisionEventType2[CollisionEventType2.Touch = 0] = "Touch", CollisionEventType2[CollisionEventType2.TouchLost = 1] = "TouchLost", CollisionEventType2[CollisionEventType2.TriggerTouch = 2] = "TriggerTouch", CollisionEventType2[CollisionEventType2.TriggerTouchLost = 3] = "TriggerTouchLost", CollisionEventType2))(CollisionEventType || {});
  var Shape = ((Shape2) => (Shape2[Shape2.None = 0] = "None", Shape2[Shape2.Sphere = 1] = "Sphere", Shape2[Shape2.Capsule = 2] = "Capsule", Shape2[Shape2.Box = 3] = "Box", Shape2[Shape2.Plane = 4] = "Plane", Shape2[Shape2.ConvexMesh = 5] = "ConvexMesh", Shape2[Shape2.TriangleMesh = 6] = "TriangleMesh", Shape2))(Shape || {});
  var MeshAttribute = ((MeshAttribute2) => (MeshAttribute2[MeshAttribute2.Position = 0] = "Position", MeshAttribute2[MeshAttribute2.Tangent = 1] = "Tangent", MeshAttribute2[MeshAttribute2.Normal = 2] = "Normal", MeshAttribute2[MeshAttribute2.TextureCoordinate = 3] = "TextureCoordinate", MeshAttribute2[MeshAttribute2.Color = 4] = "Color", MeshAttribute2[MeshAttribute2.JointId = 5] = "JointId", MeshAttribute2[MeshAttribute2.JointWeight = 6] = "JointWeight", MeshAttribute2))(MeshAttribute || {});
  var DestroyedObjectInstance = createDestroyedProxy2("object");
  var DestroyedComponentInstance = createDestroyedProxy2("component");
  var DestroyedPrefabInstance = createDestroyedProxy2("prefab/scene");
  function isMeshShape(shape) {
    return shape === 5 || shape === 6;
  }
  function isBaseComponentClass(value) {
    return !!value && value.hasOwnProperty("_isBaseComponent") && value._isBaseComponent;
  }
  var SQRT_3 = Math.sqrt(3);
  var _a;
  var Component3 = (_a = class {
    static _pack(scene, id) {
      return scene << 22 | id;
    }
    static _inheritProperties() {
      inheritProperties(this);
    }
    _manager;
    _id;
    _localId;
    _object;
    _scene;
    constructor(scene, manager = -1, id = -1) {
      this._scene = scene, this._manager = manager, this._localId = id, this._id = _a._pack(scene._index, id), this._object = null;
    }
    get scene() {
      return this._scene;
    }
    get engine() {
      return this._scene.engine;
    }
    get type() {
      return this.constructor.TypeName;
    }
    get object() {
      if (!this._object) {
        let objectId = this.engine.wasm._wl_component_get_object(this._manager, this._id);
        this._object = this._scene.wrap(objectId);
      }
      return this._object;
    }
    set active(active) {
      this.engine.wasm._wl_component_setActive(this._manager, this._id, active);
    }
    get active() {
      return this.markedActive && this._scene.isActive;
    }
    get markedActive() {
      return this.engine.wasm._wl_component_isActive(this._manager, this._id) != 0;
    }
    copy(src) {
      let properties = this.constructor.Properties;
      if (!properties)
        return this;
      for (let name in properties) {
        let property2 = properties[name], value = src[name];
        if (value === void 0)
          continue;
        let cloner = property2.cloner ?? defaultPropertyCloner;
        this[name] = cloner.clone(property2.type, value);
      }
      return this;
    }
    destroy() {
      let manager = this._manager;
      manager < 0 || this._id < 0 || this.engine.wasm._wl_component_remove(manager, this._id);
    }
    equals(otherComponent) {
      return otherComponent ? this._manager === otherComponent._manager && this._id === otherComponent._id : false;
    }
    resetProperties() {
      let properties = this.constructor.Properties;
      if (!properties)
        return this;
      for (let name in properties) {
        let property2 = properties[name], cloner = property2.cloner ?? defaultPropertyCloner;
        this[name] = cloner.clone(property2.type, property2.default);
      }
      return this;
    }
    reset() {
      return this.resetProperties();
    }
    validateProperties() {
      let ctor = this.constructor;
      if (ctor.Properties) {
        for (let name in ctor.Properties)
          if (ctor.Properties[name].required && !this[name])
            throw new Error(`Property '${name}' is required but was not initialized`);
      }
    }
    toString() {
      return this.isDestroyed ? "Component(destroyed)" : `Component('${this.type}', ${this._localId})`;
    }
    get isDestroyed() {
      return this._id < 0;
    }
    _copy(src, offsetsPtr) {
      let wasm = this.engine.wasm, offsets = wasm.HEAPU32, offsetsStart = offsetsPtr >>> 2, destScene = this._scene, ctor = this.constructor;
      for (let name in ctor.Properties) {
        let value = src[name];
        if (value === null) {
          this[name] = null;
          continue;
        }
        let prop = ctor.Properties[name], offset2 = offsets[offsetsStart + prop.type], retargeted;
        switch (prop.type) {
          case 6: {
            let index = wasm._wl_object_index(value._id), id = wasm._wl_object_id(destScene._index, index + offset2);
            retargeted = destScene.wrap(id);
            break;
          }
          case 10:
            retargeted = destScene.animations.wrap(offset2 + value._index);
            break;
          case 11:
            retargeted = destScene.skins.wrap(offset2 + value._index);
            break;
          default:
            retargeted = (prop.cloner ?? defaultPropertyCloner).clone(prop.type, value);
            break;
        }
        this[name] = retargeted;
      }
      return this;
    }
    _triggerInit() {
      if (this.init)
        try {
          this.init();
        } catch (e) {
          this.engine.log.error(2, `Exception during ${this.type} init() on object ${this.object.name}`), this.engine.log.error(2, e);
        }
      let oldActivate = this.onActivate;
      this.onActivate = function() {
        this.onActivate = oldActivate;
        let failed = false;
        try {
          this.validateProperties();
        } catch (e) {
          this.engine.log.error(2, `Exception during ${this.type} validateProperties() on object ${this.object.name}`), this.engine.log.error(2, e), failed = true;
        }
        try {
          this.start?.();
        } catch (e) {
          this.engine.log.error(2, `Exception during ${this.type} start() on object ${this.object.name}`), this.engine.log.error(2, e), failed = true;
        }
        if (failed) {
          this.active = false;
          return;
        }
        if (this.onActivate)
          try {
            this.onActivate();
          } catch (e) {
            this.engine.log.error(2, `Exception during ${this.type} onActivate() on object ${this.object.name}`), this.engine.log.error(2, e);
          }
      };
    }
    _triggerUpdate(dt) {
      if (this.update)
        try {
          this.update(dt);
        } catch (e) {
          this.engine.log.error(2, `Exception during ${this.type} update() on object ${this.object.name}`), this.engine.log.error(2, e), this.engine.wasm._deactivate_component_on_error && (this.active = false);
        }
    }
    _triggerOnActivate() {
      if (this.onActivate)
        try {
          this.onActivate();
        } catch (e) {
          this.engine.log.error(2, `Exception during ${this.type} onActivate() on object ${this.object.name}`), this.engine.log.error(2, e);
        }
    }
    _triggerOnDeactivate() {
      if (this.onDeactivate)
        try {
          this.onDeactivate();
        } catch (e) {
          this.engine.log.error(2, `Exception during ${this.type} onDeactivate() on object ${this.object.name}`), this.engine.log.error(2, e);
        }
    }
    _triggerOnDestroy() {
      try {
        this.onDestroy && this.onDestroy();
      } catch (e) {
        this.engine.log.error(2, `Exception during ${this.type} onDestroy() on object ${this.object.name}`), this.engine.log.error(2, e);
      }
      this._scene._components.destroy(this);
    }
  }, __publicField(_a, "_isBaseComponent", true), __publicField(_a, "_propertyOrder", []), __publicField(_a, "TypeName"), __publicField(_a, "Properties"), __publicField(_a, "InheritProperties"), __publicField(_a, "onRegister"), _a);
  var _a2;
  var BrokenComponent = (_a2 = class extends Component3 {
  }, __publicField(_a2, "TypeName", "__broken-component__"), _a2);
  function inheritProperties(target) {
    if (!target.TypeName)
      return;
    let chain = [], curr = target;
    for (; curr && !isBaseComponentClass(curr); ) {
      let comp = curr;
      if (!(comp.hasOwnProperty("InheritProperties") ? comp.InheritProperties : true))
        break;
      comp.hasOwnProperty("Properties") && chain.push(comp), curr = Object.getPrototypeOf(curr);
    }
    if (!chain.length || chain.length === 1 && chain[0] === target)
      return;
    let merged = {};
    for (let i = chain.length - 1; i >= 0; --i)
      Object.assign(merged, chain[i].Properties);
    target.Properties = merged;
  }
  var _a3;
  var CollisionComponent = (_a3 = class extends Component3 {
    getExtents(out = new Float32Array(3)) {
      let wasm = this.engine.wasm, ptr = wasm._wl_collision_component_get_extents(this._id) / 4;
      return out[0] = wasm.HEAPF32[ptr], out[1] = wasm.HEAPF32[ptr + 1], out[2] = wasm.HEAPF32[ptr + 2], out;
    }
    get collider() {
      return this.engine.wasm._wl_collision_component_get_collider(this._id);
    }
    set collider(collider) {
      this.engine.wasm._wl_collision_component_set_collider(this._id, collider);
    }
    get extents() {
      let wasm = this.engine.wasm;
      return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_collision_component_get_extents(this._id), 3);
    }
    set extents(extents) {
      let wasm = this.engine.wasm, ptr = wasm._wl_collision_component_get_extents(this._id) / 4;
      wasm.HEAPF32[ptr] = extents[0], wasm.HEAPF32[ptr + 1] = extents[1], wasm.HEAPF32[ptr + 2] = extents[2];
    }
    get radius() {
      let wasm = this.engine.wasm;
      if (this.collider === 0)
        return wasm.HEAPF32[wasm._wl_collision_component_get_extents(this._id) >> 2];
      let extents = new Float32Array(wasm.HEAPF32.buffer, wasm._wl_collision_component_get_extents(this._id), 3), x2 = extents[0] * extents[0], y2 = extents[1] * extents[1], z2 = extents[2] * extents[2];
      return Math.sqrt(x2 + y2 + z2) / 2;
    }
    set radius(radius) {
      let length5 = this.collider === 0 ? radius : 2 * radius / SQRT_3;
      this.extents.set([length5, length5, length5]);
    }
    get group() {
      return this.engine.wasm._wl_collision_component_get_group(this._id);
    }
    set group(group) {
      this.engine.wasm._wl_collision_component_set_group(this._id, group);
    }
    queryOverlaps() {
      let count = this.engine.wasm._wl_collision_component_query_overlaps(this._id, this.engine.wasm._tempMem, this.engine.wasm._tempMemSize >> 1), overlaps = new Array(count);
      for (let i = 0; i < count; ++i) {
        let id = this.engine.wasm._tempMemUint16[i];
        overlaps[i] = this._scene._components.wrapCollision(id);
      }
      return overlaps;
    }
  }, __publicField(_a3, "TypeName", "collision"), _a3);
  __decorateClass([nativeProperty()], CollisionComponent.prototype, "collider", 1), __decorateClass([nativeProperty()], CollisionComponent.prototype, "extents", 1), __decorateClass([nativeProperty()], CollisionComponent.prototype, "group", 1);
  var _a4;
  var TextComponent = (_a4 = class extends Component3 {
    get alignment() {
      return this.engine.wasm._wl_text_component_get_horizontal_alignment(this._id);
    }
    set alignment(alignment) {
      this.engine.wasm._wl_text_component_set_horizontal_alignment(this._id, alignment);
    }
    get verticalAlignment() {
      return this.engine.wasm._wl_text_component_get_vertical_alignment(this._id);
    }
    set verticalAlignment(verticalAlignment) {
      this.engine.wasm._wl_text_component_set_vertical_alignment(this._id, verticalAlignment);
    }
    get justification() {
      return this.verticalAlignment;
    }
    set justification(justification) {
      this.verticalAlignment = justification;
    }
    get characterSpacing() {
      return this.engine.wasm._wl_text_component_get_character_spacing(this._id);
    }
    set characterSpacing(spacing) {
      this.engine.wasm._wl_text_component_set_character_spacing(this._id, spacing);
    }
    get lineSpacing() {
      return this.engine.wasm._wl_text_component_get_line_spacing(this._id);
    }
    set lineSpacing(spacing) {
      this.engine.wasm._wl_text_component_set_line_spacing(this._id, spacing);
    }
    get effect() {
      return this.engine.wasm._wl_text_component_get_effect(this._id);
    }
    set effect(effect) {
      this.engine.wasm._wl_text_component_set_effect(this._id, effect);
    }
    get wrapMode() {
      return this.engine.wasm._wl_text_component_get_wrapMode(this._id);
    }
    set wrapMode(wrapMode) {
      this.engine.wasm._wl_text_component_set_wrapMode(this._id, wrapMode);
    }
    get wrapWidth() {
      return this.engine.wasm._wl_text_component_get_wrapWidth(this._id);
    }
    set wrapWidth(width) {
      this.engine.wasm._wl_text_component_set_wrapWidth(this._id, width);
    }
    get text() {
      let wasm = this.engine.wasm, ptr = wasm._wl_text_component_get_text(this._id);
      return wasm.UTF8ToString(ptr);
    }
    set text(text) {
      let wasm = this.engine.wasm;
      wasm._wl_text_component_set_text(this._id, wasm.tempUTF8(text.toString()));
    }
    set material(material) {
      let matIndex = material ? material._id : 0;
      this.engine.wasm._wl_text_component_set_material(this._id, matIndex);
    }
    get material() {
      let index = this.engine.wasm._wl_text_component_get_material(this._id);
      return this.engine.materials.wrap(index);
    }
    getBoundingBoxForText(text, out = new Float32Array(4)) {
      let wasm = this.engine.wasm, textPtr = wasm.tempUTF8(text, 4 * 4);
      return this.engine.wasm._wl_text_component_get_boundingBox(this._id, textPtr, wasm._tempMem), out[0] = wasm._tempMemFloat[0], out[1] = wasm._tempMemFloat[1], out[2] = wasm._tempMemFloat[2], out[3] = wasm._tempMemFloat[3], out;
    }
    getBoundingBox(out = new Float32Array(4)) {
      let wasm = this.engine.wasm;
      return this.engine.wasm._wl_text_component_get_boundingBox(this._id, 0, wasm._tempMem), out[0] = wasm._tempMemFloat[0], out[1] = wasm._tempMemFloat[1], out[2] = wasm._tempMemFloat[2], out[3] = wasm._tempMemFloat[3], out;
    }
  }, __publicField(_a4, "TypeName", "text"), _a4);
  __decorateClass([nativeProperty()], TextComponent.prototype, "alignment", 1), __decorateClass([nativeProperty()], TextComponent.prototype, "verticalAlignment", 1), __decorateClass([nativeProperty()], TextComponent.prototype, "justification", 1), __decorateClass([nativeProperty()], TextComponent.prototype, "characterSpacing", 1), __decorateClass([nativeProperty()], TextComponent.prototype, "lineSpacing", 1), __decorateClass([nativeProperty()], TextComponent.prototype, "effect", 1), __decorateClass([nativeProperty()], TextComponent.prototype, "wrapMode", 1), __decorateClass([nativeProperty()], TextComponent.prototype, "wrapWidth", 1), __decorateClass([nativeProperty()], TextComponent.prototype, "text", 1), __decorateClass([nativeProperty()], TextComponent.prototype, "material", 1);
  var _a5;
  var ViewComponent = (_a5 = class extends Component3 {
    get projectionType() {
      return this.engine.wasm._wl_view_component_get_projectionType(this._id);
    }
    set projectionType(type) {
      this.engine.wasm._wl_view_component_set_projectionType(this._id, type);
    }
    getProjectionMatrix(out = new Float32Array(16)) {
      let wasm = this.engine.wasm, ptr = wasm._wl_view_component_get_projection_matrix(this._id) / 4;
      for (let i = 0; i < 16; ++i)
        out[i] = wasm.HEAPF32[ptr + i];
      return out;
    }
    get projectionMatrix() {
      let wasm = this.engine.wasm;
      return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_view_component_get_projection_matrix(this._id), 16);
    }
    get near() {
      return this.engine.wasm._wl_view_component_get_near(this._id);
    }
    set near(near) {
      this.engine.wasm._wl_view_component_set_near(this._id, near);
    }
    get far() {
      return this.engine.wasm._wl_view_component_get_far(this._id);
    }
    set far(far) {
      this.engine.wasm._wl_view_component_set_far(this._id, far);
    }
    get fov() {
      return this.engine.wasm._wl_view_component_get_fov(this._id);
    }
    set fov(fov) {
      this.engine.wasm._wl_view_component_set_fov(this._id, fov);
    }
    get extent() {
      return this.engine.wasm._wl_view_component_get_extent(this._id);
    }
    set extent(extent) {
      this.engine.wasm._wl_view_component_set_extent(this._id, extent);
    }
  }, __publicField(_a5, "TypeName", "view"), _a5);
  __decorateClass([nativeProperty()], ViewComponent.prototype, "projectionType", 1), __decorateClass([enumerable()], ViewComponent.prototype, "projectionMatrix", 1), __decorateClass([nativeProperty()], ViewComponent.prototype, "near", 1), __decorateClass([nativeProperty()], ViewComponent.prototype, "far", 1), __decorateClass([nativeProperty()], ViewComponent.prototype, "fov", 1), __decorateClass([nativeProperty()], ViewComponent.prototype, "extent", 1);
  var _a6;
  var InputComponent = (_a6 = class extends Component3 {
    get inputType() {
      return this.engine.wasm._wl_input_component_get_type(this._id);
    }
    set inputType(type) {
      this.engine.wasm._wl_input_component_set_type(this._id, type);
    }
    get xrInputSource() {
      let xr = this.engine.xr;
      if (!xr)
        return null;
      for (let inputSource of xr.session.inputSources)
        if (inputSource.handedness == this.handedness)
          return inputSource;
      return null;
    }
    get handedness() {
      let inputType = this.inputType;
      return inputType == 4 || inputType == 6 || inputType == 2 ? "right" : inputType == 3 || inputType == 5 || inputType == 1 ? "left" : null;
    }
  }, __publicField(_a6, "TypeName", "input"), _a6);
  __decorateClass([nativeProperty()], InputComponent.prototype, "inputType", 1), __decorateClass([enumerable()], InputComponent.prototype, "xrInputSource", 1), __decorateClass([enumerable()], InputComponent.prototype, "handedness", 1);
  var _a7;
  var LightComponent = (_a7 = class extends Component3 {
    getColor(out = new Float32Array(3)) {
      let wasm = this.engine.wasm, ptr = wasm._wl_light_component_get_color(this._id) / 4;
      return out[0] = wasm.HEAPF32[ptr], out[1] = wasm.HEAPF32[ptr + 1], out[2] = wasm.HEAPF32[ptr + 2], out;
    }
    setColor(c) {
      let wasm = this.engine.wasm, ptr = wasm._wl_light_component_get_color(this._id) / 4;
      wasm.HEAPF32[ptr] = c[0], wasm.HEAPF32[ptr + 1] = c[1], wasm.HEAPF32[ptr + 2] = c[2];
    }
    get color() {
      let wasm = this.engine.wasm;
      return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_light_component_get_color(this._id), 3);
    }
    set color(c) {
      this.color.set(c);
    }
    get lightType() {
      return this.engine.wasm._wl_light_component_get_type(this._id);
    }
    set lightType(t) {
      this.engine.wasm._wl_light_component_set_type(this._id, t);
    }
    get intensity() {
      return this.engine.wasm._wl_light_component_get_intensity(this._id);
    }
    set intensity(intensity) {
      this.engine.wasm._wl_light_component_set_intensity(this._id, intensity);
    }
    get outerAngle() {
      return this.engine.wasm._wl_light_component_get_outerAngle(this._id);
    }
    set outerAngle(angle2) {
      this.engine.wasm._wl_light_component_set_outerAngle(this._id, angle2);
    }
    get innerAngle() {
      return this.engine.wasm._wl_light_component_get_innerAngle(this._id);
    }
    set innerAngle(angle2) {
      this.engine.wasm._wl_light_component_set_innerAngle(this._id, angle2);
    }
    get shadows() {
      return !!this.engine.wasm._wl_light_component_get_shadows(this._id);
    }
    set shadows(b) {
      this.engine.wasm._wl_light_component_set_shadows(this._id, b);
    }
    get shadowRange() {
      return this.engine.wasm._wl_light_component_get_shadowRange(this._id);
    }
    set shadowRange(range) {
      this.engine.wasm._wl_light_component_set_shadowRange(this._id, range);
    }
    get shadowBias() {
      return this.engine.wasm._wl_light_component_get_shadowBias(this._id);
    }
    set shadowBias(bias) {
      this.engine.wasm._wl_light_component_set_shadowBias(this._id, bias);
    }
    get shadowNormalBias() {
      return this.engine.wasm._wl_light_component_get_shadowNormalBias(this._id);
    }
    set shadowNormalBias(bias) {
      this.engine.wasm._wl_light_component_set_shadowNormalBias(this._id, bias);
    }
    get shadowTexelSize() {
      return this.engine.wasm._wl_light_component_get_shadowTexelSize(this._id);
    }
    set shadowTexelSize(size) {
      this.engine.wasm._wl_light_component_set_shadowTexelSize(this._id, size);
    }
    get cascadeCount() {
      return this.engine.wasm._wl_light_component_get_cascadeCount(this._id);
    }
    set cascadeCount(count) {
      this.engine.wasm._wl_light_component_set_cascadeCount(this._id, count);
    }
  }, __publicField(_a7, "TypeName", "light"), _a7);
  __decorateClass([nativeProperty()], LightComponent.prototype, "color", 1), __decorateClass([nativeProperty()], LightComponent.prototype, "lightType", 1), __decorateClass([nativeProperty()], LightComponent.prototype, "intensity", 1), __decorateClass([nativeProperty()], LightComponent.prototype, "outerAngle", 1), __decorateClass([nativeProperty()], LightComponent.prototype, "innerAngle", 1), __decorateClass([nativeProperty()], LightComponent.prototype, "shadows", 1), __decorateClass([nativeProperty()], LightComponent.prototype, "shadowRange", 1), __decorateClass([nativeProperty()], LightComponent.prototype, "shadowBias", 1), __decorateClass([nativeProperty()], LightComponent.prototype, "shadowNormalBias", 1), __decorateClass([nativeProperty()], LightComponent.prototype, "shadowTexelSize", 1), __decorateClass([nativeProperty()], LightComponent.prototype, "cascadeCount", 1);
  var _a8;
  var AnimationComponent = (_a8 = class extends Component3 {
    onEvent = new Emitter();
    set animation(anim) {
      this.scene.assertOrigin(anim), this.engine.wasm._wl_animation_component_set_animation(this._id, anim ? anim._id : 0);
    }
    get animation() {
      let index = this.engine.wasm._wl_animation_component_get_animation(this._id);
      return this._scene.animations.wrap(index);
    }
    set playCount(playCount) {
      this.engine.wasm._wl_animation_component_set_playCount(this._id, playCount);
    }
    get playCount() {
      return this.engine.wasm._wl_animation_component_get_playCount(this._id);
    }
    set speed(speed) {
      this.engine.wasm._wl_animation_component_set_speed(this._id, speed);
    }
    get speed() {
      return this.engine.wasm._wl_animation_component_get_speed(this._id);
    }
    get state() {
      return this.engine.wasm._wl_animation_component_state(this._id);
    }
    get rootMotionMode() {
      return this.engine.wasm._wl_animation_component_get_rootMotionMode(this._id);
    }
    set rootMotionMode(mode) {
      this.engine.wasm._wl_animation_component_set_rootMotionMode(this._id, mode);
    }
    get iteration() {
      return this.engine.wasm._wl_animation_component_get_iteration(this._id);
    }
    get position() {
      return this.engine.wasm._wl_animation_component_get_position(this._id);
    }
    get duration() {
      return this.engine.wasm._wl_animation_component_get_duration(this._id);
    }
    play() {
      this.engine.wasm._wl_animation_component_play(this._id);
    }
    stop() {
      this.engine.wasm._wl_animation_component_stop(this._id);
    }
    pause() {
      this.engine.wasm._wl_animation_component_pause(this._id);
    }
    getFloatParameter(name) {
      let wasm = this.engine.wasm, index = wasm._wl_animation_component_getGraphParamIndex(this._id, wasm.tempUTF8(name));
      if (index === -1)
        throw Error(`Missing parameter '${name}'`);
      return wasm._wl_animation_component_getGraphParamValue(this._id, index, wasm._tempMem), wasm._tempMemFloat[0];
    }
    setFloatParameter(name, value) {
      let wasm = this.engine.wasm, index = wasm._wl_animation_component_getGraphParamIndex(this._id, wasm.tempUTF8(name));
      if (index === -1)
        throw Error(`Missing parameter '${name}'`);
      wasm._tempMemFloat[0] = value, wasm._wl_animation_component_setGraphParamValue(this._id, index, wasm._tempMem);
    }
    getRootMotionTranslation(out = new Float32Array(3)) {
      let wasm = this.engine.wasm;
      return wasm._wl_animation_component_get_rootMotion_translation(this._id, wasm._tempMem), out[0] = wasm._tempMemFloat[0], out[1] = wasm._tempMemFloat[1], out[2] = wasm._tempMemFloat[2], out;
    }
    getRootMotionRotation(out = new Float32Array(3)) {
      let wasm = this.engine.wasm;
      return wasm._wl_animation_component_get_rootMotion_rotation(this._id, wasm._tempMem), out[0] = wasm._tempMemFloat[0], out[1] = wasm._tempMemFloat[1], out[2] = wasm._tempMemFloat[2], out;
    }
  }, __publicField(_a8, "TypeName", "animation"), _a8);
  __decorateClass([nativeProperty()], AnimationComponent.prototype, "animation", 1), __decorateClass([nativeProperty()], AnimationComponent.prototype, "playCount", 1), __decorateClass([nativeProperty()], AnimationComponent.prototype, "speed", 1), __decorateClass([enumerable()], AnimationComponent.prototype, "state", 1), __decorateClass([nativeProperty(), enumerable()], AnimationComponent.prototype, "rootMotionMode", 1);
  var _a9;
  var MeshComponent = (_a9 = class extends Component3 {
    set material(material) {
      this.engine.wasm._wl_mesh_component_set_material(this._id, material ? material._id : 0);
    }
    get material() {
      let index = this.engine.wasm._wl_mesh_component_get_material(this._id);
      return this.engine.materials.wrap(index);
    }
    get mesh() {
      let index = this.engine.wasm._wl_mesh_component_get_mesh(this._id);
      return this.engine.meshes.wrap(index);
    }
    set mesh(mesh) {
      this.engine.wasm._wl_mesh_component_set_mesh(this._id, mesh?._id ?? 0);
    }
    get skin() {
      let index = this.engine.wasm._wl_mesh_component_get_skin(this._id);
      return this._scene.skins.wrap(index);
    }
    set skin(skin) {
      this.scene.assertOrigin(skin), this.engine.wasm._wl_mesh_component_set_skin(this._id, skin ? skin._id : 0);
    }
    get morphTargets() {
      let index = this.engine.wasm._wl_mesh_component_get_morph_targets(this._id);
      return this.engine.morphTargets.wrap(index);
    }
    set morphTargets(morphTargets) {
      this.engine.wasm._wl_mesh_component_set_morph_targets(this._id, morphTargets?._id ?? 0);
    }
    get morphTargetWeights() {
      return this.getMorphTargetWeights();
    }
    set morphTargetWeights(weights) {
      this.setMorphTargetWeights(weights);
    }
    getMorphTargetWeights(out) {
      let wasm = this.engine.wasm, count = wasm._wl_mesh_component_get_morph_target_weights(this._id, wasm._tempMem);
      out || (out = new Float32Array(count));
      for (let i = 0; i < count; ++i)
        out[i] = wasm._tempMemFloat[i];
      return out;
    }
    getMorphTargetWeight(target) {
      let count = this.morphTargets?.count ?? 0;
      if (target >= count)
        throw new Error(`Index ${target} is out of bounds for ${count} targets`);
      return this.engine.wasm._wl_mesh_component_get_morph_target_weight(this._id, target);
    }
    setMorphTargetWeights(weights) {
      let count = this.morphTargets?.count ?? 0;
      if (weights.length !== count)
        throw new Error(`Expected ${count} weights but got ${weights.length}`);
      let wasm = this.engine.wasm;
      wasm._tempMemFloat.set(weights), wasm._wl_mesh_component_set_morph_target_weights(this._id, wasm._tempMem, weights.length);
    }
    setMorphTargetWeight(target, weight) {
      let count = this.morphTargets?.count ?? 0;
      if (target >= count)
        throw new Error(`Index ${target} is out of bounds for ${count} targets`);
      this.engine.wasm._wl_mesh_component_set_morph_target_weight(this._id, target, weight);
    }
  }, __publicField(_a9, "TypeName", "mesh"), _a9);
  __decorateClass([nativeProperty()], MeshComponent.prototype, "material", 1), __decorateClass([nativeProperty()], MeshComponent.prototype, "mesh", 1), __decorateClass([nativeProperty()], MeshComponent.prototype, "skin", 1), __decorateClass([nativeProperty()], MeshComponent.prototype, "morphTargets", 1), __decorateClass([nativeProperty()], MeshComponent.prototype, "morphTargetWeights", 1);
  var LockAxis = ((LockAxis2) => (LockAxis2[LockAxis2.None = 0] = "None", LockAxis2[LockAxis2.X = 1] = "X", LockAxis2[LockAxis2.Y = 2] = "Y", LockAxis2[LockAxis2.Z = 4] = "Z", LockAxis2))(LockAxis || {});
  var _a10;
  var PhysXComponent = (_a10 = class extends Component3 {
    getTranslationOffset(out = new Float32Array(3)) {
      let wasm = this.engine.wasm;
      return wasm._wl_physx_component_get_offsetTranslation(this._id, wasm._tempMem), out[0] = wasm._tempMemFloat[0], out[1] = wasm._tempMemFloat[1], out[2] = wasm._tempMemFloat[2], out;
    }
    getRotationOffset(out = new Float32Array(4)) {
      let wasm = this.engine.wasm, ptr = wasm._wl_physx_component_get_offsetTransform(this._id) >> 2;
      return out[0] = wasm.HEAPF32[ptr], out[1] = wasm.HEAPF32[ptr + 1], out[2] = wasm.HEAPF32[ptr + 2], out[3] = wasm.HEAPF32[ptr + 3], out;
    }
    getExtents(out = new Float32Array(3)) {
      let wasm = this.engine.wasm, ptr = wasm._wl_physx_component_get_extents(this._id) / 4;
      return out[0] = wasm.HEAPF32[ptr], out[1] = wasm.HEAPF32[ptr + 1], out[2] = wasm.HEAPF32[ptr + 2], out;
    }
    getLinearVelocity(out = new Float32Array(3)) {
      let wasm = this.engine.wasm, tempMemFloat = wasm._tempMemFloat;
      return wasm._wl_physx_component_get_linearVelocity(this._id, wasm._tempMem), out[0] = tempMemFloat[0], out[1] = tempMemFloat[1], out[2] = tempMemFloat[2], out;
    }
    getAngularVelocity(out = new Float32Array(3)) {
      let wasm = this.engine.wasm, tempMemFloat = wasm._tempMemFloat;
      return wasm._wl_physx_component_get_angularVelocity(this._id, wasm._tempMem), out[0] = tempMemFloat[0], out[1] = tempMemFloat[1], out[2] = tempMemFloat[2], out;
    }
    set static(b) {
      this.engine.wasm._wl_physx_component_set_static(this._id, b);
    }
    get static() {
      return !!this.engine.wasm._wl_physx_component_get_static(this._id);
    }
    get translationOffset() {
      return this.getTranslationOffset();
    }
    set translationOffset(offset2) {
      this.engine.wasm._wl_physx_component_set_offsetTranslation(this._id, offset2[0], offset2[1], offset2[2]);
    }
    get rotationOffset() {
      return this.getRotationOffset();
    }
    set rotationOffset(offset2) {
      this.engine.wasm._wl_physx_component_set_offsetRotation(this._id, offset2[0], offset2[1], offset2[2], offset2[3]);
    }
    set kinematic(b) {
      this.engine.wasm._wl_physx_component_set_kinematic(this._id, b);
    }
    get kinematic() {
      return !!this.engine.wasm._wl_physx_component_get_kinematic(this._id);
    }
    set gravity(b) {
      this.engine.wasm._wl_physx_component_set_gravity(this._id, b);
    }
    get gravity() {
      return !!this.engine.wasm._wl_physx_component_get_gravity(this._id);
    }
    set simulate(b) {
      this.engine.wasm._wl_physx_component_set_simulate(this._id, b);
    }
    get simulate() {
      return !!this.engine.wasm._wl_physx_component_get_simulate(this._id);
    }
    set allowSimulation(b) {
      this.engine.wasm._wl_physx_component_set_allowSimulation(this._id, b);
    }
    get allowSimulation() {
      return !!this.engine.wasm._wl_physx_component_get_allowSimulation(this._id);
    }
    set allowQuery(b) {
      this.engine.wasm._wl_physx_component_set_allowQuery(this._id, b);
    }
    get allowQuery() {
      return !!this.engine.wasm._wl_physx_component_get_allowQuery(this._id);
    }
    set trigger(b) {
      this.engine.wasm._wl_physx_component_set_trigger(this._id, b);
    }
    get trigger() {
      return !!this.engine.wasm._wl_physx_component_get_trigger(this._id);
    }
    set shape(s) {
      this.engine.wasm._wl_physx_component_set_shape(this._id, s);
    }
    get shape() {
      return this.engine.wasm._wl_physx_component_get_shape(this._id);
    }
    set shapeData(d) {
      d == null || !isMeshShape(this.shape) || this.engine.wasm._wl_physx_component_set_shape_data(this._id, d.index);
    }
    get shapeData() {
      return isMeshShape(this.shape) ? { index: this.engine.wasm._wl_physx_component_get_shape_data(this._id) } : null;
    }
    set extents(e) {
      this.extents.set(e);
    }
    get extents() {
      let wasm = this.engine.wasm, ptr = wasm._wl_physx_component_get_extents(this._id);
      return new Float32Array(wasm.HEAPF32.buffer, ptr, 3);
    }
    get staticFriction() {
      return this.engine.wasm._wl_physx_component_get_staticFriction(this._id);
    }
    set staticFriction(v) {
      this.engine.wasm._wl_physx_component_set_staticFriction(this._id, v);
    }
    get dynamicFriction() {
      return this.engine.wasm._wl_physx_component_get_dynamicFriction(this._id);
    }
    set dynamicFriction(v) {
      this.engine.wasm._wl_physx_component_set_dynamicFriction(this._id, v);
    }
    get bounciness() {
      return this.engine.wasm._wl_physx_component_get_bounciness(this._id);
    }
    set bounciness(v) {
      this.engine.wasm._wl_physx_component_set_bounciness(this._id, v);
    }
    get linearDamping() {
      return this.engine.wasm._wl_physx_component_get_linearDamping(this._id);
    }
    set linearDamping(v) {
      this.engine.wasm._wl_physx_component_set_linearDamping(this._id, v);
    }
    get angularDamping() {
      return this.engine.wasm._wl_physx_component_get_angularDamping(this._id);
    }
    set angularDamping(v) {
      this.engine.wasm._wl_physx_component_set_angularDamping(this._id, v);
    }
    set linearVelocity(v) {
      this.engine.wasm._wl_physx_component_set_linearVelocity(this._id, v[0], v[1], v[2]);
    }
    get linearVelocity() {
      let wasm = this.engine.wasm;
      return wasm._wl_physx_component_get_linearVelocity(this._id, wasm._tempMem), new Float32Array(wasm.HEAPF32.buffer, wasm._tempMem, 3);
    }
    set angularVelocity(v) {
      this.engine.wasm._wl_physx_component_set_angularVelocity(this._id, v[0], v[1], v[2]);
    }
    get angularVelocity() {
      let wasm = this.engine.wasm;
      return wasm._wl_physx_component_get_angularVelocity(this._id, wasm._tempMem), new Float32Array(wasm.HEAPF32.buffer, wasm._tempMem, 3);
    }
    set groupsMask(flags) {
      this.engine.wasm._wl_physx_component_set_groupsMask(this._id, flags);
    }
    get groupsMask() {
      return this.engine.wasm._wl_physx_component_get_groupsMask(this._id);
    }
    set blocksMask(flags) {
      this.engine.wasm._wl_physx_component_set_blocksMask(this._id, flags);
    }
    get blocksMask() {
      return this.engine.wasm._wl_physx_component_get_blocksMask(this._id);
    }
    set linearLockAxis(lock) {
      this.engine.wasm._wl_physx_component_set_linearLockAxis(this._id, lock);
    }
    get linearLockAxis() {
      return this.engine.wasm._wl_physx_component_get_linearLockAxis(this._id);
    }
    set angularLockAxis(lock) {
      this.engine.wasm._wl_physx_component_set_angularLockAxis(this._id, lock);
    }
    get angularLockAxis() {
      return this.engine.wasm._wl_physx_component_get_angularLockAxis(this._id);
    }
    set mass(m) {
      this.engine.wasm._wl_physx_component_set_mass(this._id, m);
    }
    get mass() {
      return this.engine.wasm._wl_physx_component_get_mass(this._id);
    }
    set massSpaceInteriaTensor(v) {
      this.engine.wasm._wl_physx_component_set_massSpaceInertiaTensor(this._id, v[0], v[1], v[2]);
    }
    set sleepOnActivate(flag) {
      this.engine.wasm._wl_physx_component_set_sleepOnActivate(this._id, flag);
    }
    get sleepOnActivate() {
      return !!this.engine.wasm._wl_physx_component_get_sleepOnActivate(this._id);
    }
    addForce(f, m = 0, localForce = false, p, local = false) {
      let wasm = this.engine.wasm;
      if (!p) {
        wasm._wl_physx_component_addForce(this._id, f[0], f[1], f[2], m, localForce);
        return;
      }
      wasm._wl_physx_component_addForceAt(this._id, f[0], f[1], f[2], m, localForce, p[0], p[1], p[2], local);
    }
    addTorque(f, m = 0) {
      this.engine.wasm._wl_physx_component_addTorque(this._id, f[0], f[1], f[2], m);
    }
    onCollision(callback) {
      return this.onCollisionWith(this, callback);
    }
    onCollisionWith(otherComp, callback) {
      let callbacks = this.scene._pxCallbacks;
      return callbacks.has(this._id) || callbacks.set(this._id, []), callbacks.get(this._id).push(callback), this.engine.wasm._wl_physx_component_addCallback(this._id, otherComp._id);
    }
    removeCollisionCallback(callbackId) {
      let r = this.engine.wasm._wl_physx_component_removeCallback(this._id, callbackId), callbacks = this.scene._pxCallbacks;
      r && callbacks.get(this._id).splice(-r);
    }
  }, __publicField(_a10, "TypeName", "physx"), _a10);
  __decorateClass([nativeProperty()], PhysXComponent.prototype, "static", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "translationOffset", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "rotationOffset", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "kinematic", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "gravity", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "simulate", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "allowSimulation", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "allowQuery", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "trigger", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "shape", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "shapeData", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "extents", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "staticFriction", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "dynamicFriction", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "bounciness", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "linearDamping", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "angularDamping", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "linearVelocity", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "angularVelocity", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "groupsMask", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "blocksMask", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "linearLockAxis", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "angularLockAxis", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "mass", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "sleepOnActivate", 1);
  var MeshIndexType = ((MeshIndexType2) => (MeshIndexType2[MeshIndexType2.UnsignedByte = 1] = "UnsignedByte", MeshIndexType2[MeshIndexType2.UnsignedShort = 2] = "UnsignedShort", MeshIndexType2[MeshIndexType2.UnsignedInt = 4] = "UnsignedInt", MeshIndexType2))(MeshIndexType || {});
  var MeshSkinningType = ((MeshSkinningType2) => (MeshSkinningType2[MeshSkinningType2.None = 0] = "None", MeshSkinningType2[MeshSkinningType2.FourJoints = 1] = "FourJoints", MeshSkinningType2[MeshSkinningType2.EightJoints = 2] = "EightJoints", MeshSkinningType2))(MeshSkinningType || {});
  var Mesh = class extends Resource {
    constructor(engine, params) {
      if (!isNumber(params)) {
        let mesh = engine.meshes.create(params);
        return super(engine, mesh._index), mesh;
      }
      super(engine, params);
    }
    get vertexCount() {
      return this.engine.wasm._wl_mesh_get_vertexCount(this._id);
    }
    get indexData() {
      let wasm = this.engine.wasm, tempMem = wasm._tempMem, ptr = wasm._wl_mesh_get_indexData(this._id, tempMem, tempMem + 4);
      if (ptr === null)
        return null;
      let indexCount = wasm.HEAPU32[tempMem / 4];
      switch (wasm.HEAPU32[tempMem / 4 + 1]) {
        case 1:
          return new Uint8Array(wasm.HEAPU8.buffer, ptr, indexCount);
        case 2:
          return new Uint16Array(wasm.HEAPU16.buffer, ptr, indexCount);
        case 4:
          return new Uint32Array(wasm.HEAPU32.buffer, ptr, indexCount);
      }
      return null;
    }
    update() {
      this.engine.wasm._wl_mesh_update(this._id);
    }
    getBoundingSphere(out = new Float32Array(4)) {
      let wasm = this.engine.wasm;
      return this.engine.wasm._wl_mesh_get_boundingSphere(this._id, wasm._tempMem), out[0] = wasm._tempMemFloat[0], out[1] = wasm._tempMemFloat[1], out[2] = wasm._tempMemFloat[2], out[3] = wasm._tempMemFloat[3], out;
    }
    attribute(attr) {
      if (typeof attr != "number")
        throw new TypeError("Expected number, but got " + typeof attr);
      let wasm = this.engine.wasm, tempMemUint32 = wasm._tempMemUint32;
      if (wasm._wl_mesh_get_attribute(this._id, attr, wasm._tempMem), tempMemUint32[0] == 255)
        return null;
      let arraySize = tempMemUint32[5];
      return new MeshAttributeAccessor(this.engine, { attribute: tempMemUint32[0], offset: tempMemUint32[1], stride: tempMemUint32[2], formatSize: tempMemUint32[3], componentCount: tempMemUint32[4], arraySize: arraySize || 1, length: this.vertexCount, bufferType: attr !== 5 ? Float32Array : Uint16Array });
    }
    destroy() {
      this.engine.wasm._wl_mesh_destroy(this._id), this.engine.meshes._destroy(this);
    }
    toString() {
      return this.isDestroyed ? "Mesh(destroyed)" : `Mesh(${this._index})`;
    }
  };
  var MeshAttributeAccessor = class {
    length = 0;
    _engine;
    _attribute = -1;
    _offset = 0;
    _stride = 0;
    _formatSize = 0;
    _componentCount = 0;
    _arraySize = 1;
    _bufferType;
    _tempBufferGetter;
    constructor(engine, options) {
      this._engine = engine;
      let wasm = this._engine.wasm;
      this._attribute = options.attribute, this._offset = options.offset, this._stride = options.stride, this._formatSize = options.formatSize, this._componentCount = options.componentCount, this._arraySize = options.arraySize, this._bufferType = options.bufferType, this.length = options.length, this._tempBufferGetter = this._bufferType === Float32Array ? wasm.getTempBufferF32.bind(wasm) : wasm.getTempBufferU16.bind(wasm);
    }
    createArray(count = 1) {
      return count = count > this.length ? this.length : count, new this._bufferType(count * this._componentCount * this._arraySize);
    }
    get(index, out = this.createArray()) {
      if (out.length % this._componentCount !== 0)
        throw new Error(`out.length, ${out.length} is not a multiple of the attribute vector components, ${this._componentCount}`);
      let dest = this._tempBufferGetter(out.length), elementSize = this._bufferType.BYTES_PER_ELEMENT, destSize = elementSize * out.length, srcFormatSize = this._formatSize * this._arraySize, destFormatSize = this._componentCount * elementSize * this._arraySize;
      this._engine.wasm._wl_mesh_get_attribute_values(this._attribute, srcFormatSize, this._offset + index * this._stride, this._stride, destFormatSize, dest.byteOffset, destSize);
      for (let i = 0; i < out.length; ++i)
        out[i] = dest[i];
      return out;
    }
    set(i, v) {
      if (v.length % this._componentCount !== 0)
        throw new Error(`out.length, ${v.length} is not a multiple of the attribute vector components, ${this._componentCount}`);
      let elementSize = this._bufferType.BYTES_PER_ELEMENT, srcSize = elementSize * v.length, srcFormatSize = this._componentCount * elementSize * this._arraySize, destFormatSize = this._formatSize * this._arraySize, wasm = this._engine.wasm;
      if (v.buffer != wasm.HEAPU8.buffer) {
        let dest = this._tempBufferGetter(v.length);
        dest.set(v), v = dest;
      }
      return wasm._wl_mesh_set_attribute_values(this._attribute, srcFormatSize, v.byteOffset, srcSize, destFormatSize, this._offset + i * this._stride, this._stride), this;
    }
    get engine() {
      return this._engine;
    }
  };
  var temp2d = null;
  var Texture = class extends Resource {
    constructor(engine, param) {
      if (isImageLike(param)) {
        let texture = engine.textures.create(param);
        return super(engine, texture._index), texture;
      }
      super(engine, param);
    }
    get valid() {
      return !this.isDestroyed;
    }
    get id() {
      return this.index;
    }
    update() {
      let image = this._imageIndex;
      !this.valid || !image || this.engine.wasm._wl_renderer_updateImage(image);
    }
    get width() {
      let element = this.htmlElement;
      if (element)
        return element.width;
      let wasm = this.engine.wasm;
      return wasm._wl_image_size(this._imageIndex, wasm._tempMem), wasm._tempMemUint32[0];
    }
    get height() {
      let element = this.htmlElement;
      if (element)
        return element.height;
      let wasm = this.engine.wasm;
      return wasm._wl_image_size(this._imageIndex, wasm._tempMem), wasm._tempMemUint32[1];
    }
    get htmlElement() {
      let image = this._imageIndex;
      if (!image)
        return null;
      let wasm = this.engine.wasm, jsImageIndex = wasm._wl_image_get_jsImage_index(image);
      return wasm._images[jsImageIndex];
    }
    updateSubImage(x, y, w, h) {
      if (this.isDestroyed)
        return;
      let image = this._imageIndex;
      if (!image)
        return;
      let wasm = this.engine.wasm, jsImageIndex = wasm._wl_image_get_jsImage_index(image);
      if (!temp2d) {
        let canvas2 = document.createElement("canvas"), ctx = canvas2.getContext("2d");
        if (!ctx)
          throw new Error("Texture.updateSubImage(): Failed to obtain CanvasRenderingContext2D.");
        temp2d = { canvas: canvas2, ctx };
      }
      let img = wasm._images[jsImageIndex];
      if (!img)
        return;
      temp2d.canvas.width = w, temp2d.canvas.height = h, temp2d.ctx.drawImage(img, x, y, w, h, 0, 0, w, h);
      let yOffset = (img.videoHeight ?? img.height) - y - h;
      wasm._images[jsImageIndex] = temp2d.canvas, wasm._wl_renderer_updateImage(image, x, yOffset), wasm._images[jsImageIndex] = img;
    }
    destroy() {
      this.engine.wasm._wl_texture_destroy(this._id), this.engine.textures._destroy(this);
    }
    toString() {
      return this.isDestroyed ? "Texture(destroyed)" : `Texture(${this._index})`;
    }
    get _imageIndex() {
      return this.engine.wasm._wl_texture_get_image_index(this._id);
    }
  };
  var XR = class {
    #wasm;
    #mode;
    constructor(wasm, mode) {
      this.#wasm = wasm, this.#mode = mode;
    }
    get sessionMode() {
      return this.#mode;
    }
    get session() {
      return this.#wasm.webxr_session;
    }
    get frame() {
      return this.#wasm.webxr_frame;
    }
    referenceSpaceForType(type) {
      return this.#wasm.webxr_refSpaces[type] ?? null;
    }
    set currentReferenceSpace(refSpace) {
      this.#wasm.webxr_refSpace = refSpace, this.#wasm.webxr_refSpaceType = null;
      for (let type of Object.keys(this.#wasm.webxr_refSpaces))
        this.#wasm.webxr_refSpaces[type] === refSpace && (this.#wasm.webxr_refSpaceType = type);
    }
    get currentReferenceSpace() {
      return this.#wasm.webxr_refSpace;
    }
    get currentReferenceSpaceType() {
      return this.#wasm.webxr_refSpaceType;
    }
    get baseLayer() {
      return this.#wasm.webxr_baseLayer;
    }
    get framebuffers() {
      return Array.isArray(this.#wasm.webxr_fbo) ? this.#wasm.webxr_fbo.map((id) => this.#wasm.GL.framebuffers[id]) : [this.#wasm.GL.framebuffers[this.#wasm.webxr_fbo]];
    }
  };
  var MaterialParamType = ((MaterialParamType2) => (MaterialParamType2[MaterialParamType2.UnsignedInt = 0] = "UnsignedInt", MaterialParamType2[MaterialParamType2.Int = 1] = "Int", MaterialParamType2[MaterialParamType2.HalfFloat = 2] = "HalfFloat", MaterialParamType2[MaterialParamType2.Float = 3] = "Float", MaterialParamType2[MaterialParamType2.Sampler = 4] = "Sampler", MaterialParamType2[MaterialParamType2.Font = 5] = "Font", MaterialParamType2))(MaterialParamType || {});
  var _a11;
  var Material = (_a11 = class extends Resource {
    constructor(engine, params) {
      if (typeof params != "number") {
        if (!params?.pipeline)
          throw new Error("Missing parameter 'pipeline'");
        let template = engine.materials.getTemplate(params.pipeline), material = new template();
        return super(engine, material._index), material;
      }
      super(engine, params);
    }
    hasParameter(name) {
      let parameters = this.constructor.Parameters;
      return parameters && parameters.has(name);
    }
    get shader() {
      return this.pipeline;
    }
    get pipeline() {
      let wasm = this.engine.wasm;
      return wasm.UTF8ToString(wasm._wl_material_get_pipeline(this._id));
    }
    clone() {
      let index = this.engine.wasm._wl_material_clone(this._id);
      return this.engine.materials.wrap(index);
    }
    toString() {
      return this.isDestroyed ? "Material(destroyed)" : `Material('${this.pipeline}', ${this._index})`;
    }
    static wrap(engine, index) {
      return engine.materials.wrap(index);
    }
  }, __publicField(_a11, "_destroyedPrototype", createDestroyedProxy2("material")), _a11);
  var SceneType = ((SceneType2) => (SceneType2[SceneType2.Prefab = 0] = "Prefab", SceneType2[SceneType2.Main = 1] = "Main", SceneType2[SceneType2.Dependency = 2] = "Dependency", SceneType2))(SceneType || {});
  function assert(bit) {
    if (bit >= 32)
      throw new Error(`BitSet.enable(): Value ${bit} is over 31`);
  }
  var BitSet = class {
    _bits = 0;
    enable(...bits) {
      for (let bit of bits)
        assert(bit), this._bits |= 1 << bit >>> 0;
      return this;
    }
    enableAll() {
      return this._bits = -1, this;
    }
    disable(...bits) {
      for (let bit of bits)
        assert(bit), this._bits &= ~(1 << bit >>> 0);
      return this;
    }
    disableAll() {
      return this._bits = 0, this;
    }
    enabled(bit) {
      return !!(this._bits & 1 << bit >>> 0);
    }
  };
  var LogLevel = ((LogLevel2) => (LogLevel2[LogLevel2.Info = 0] = "Info", LogLevel2[LogLevel2.Warn = 1] = "Warn", LogLevel2[LogLevel2.Error = 2] = "Error", LogLevel2))(LogLevel || {});
  var Logger = class {
    levels = new BitSet();
    tags = new BitSet().enableAll();
    constructor(...levels) {
      this.levels.enable(...levels);
    }
    info(tag, ...msg) {
      return this.levels.enabled(0) && this.tags.enabled(tag) && console.log(...msg), this;
    }
    warn(tag, ...msg) {
      return this.levels.enabled(1) && this.tags.enabled(tag) && console.warn(...msg), this;
    }
    error(tag, ...msg) {
      return this.levels.enabled(2) && this.tags.enabled(tag) && console.error(...msg), this;
    }
  };
  function decode(data, tagger = (_, value) => value, options = {}) {
    let { dictionary = "object" } = options, dataView = new DataView(data.buffer, data.byteOffset, data.byteLength), offset2 = 0;
    function commitRead(length5, value) {
      return offset2 += length5, value;
    }
    function readArrayBuffer(length5) {
      return commitRead(length5, data.subarray(offset2, offset2 + length5));
    }
    function readFloat16() {
      let POW_2_24 = 5960464477539063e-23, tempArrayBuffer = new ArrayBuffer(4), tempDataView = new DataView(tempArrayBuffer), value = readUint16(), sign = value & 32768, exponent = value & 31744, fraction = value & 1023;
      if (exponent === 31744)
        exponent = 261120;
      else if (exponent !== 0)
        exponent += 114688;
      else if (fraction !== 0)
        return (sign ? -1 : 1) * fraction * POW_2_24;
      return tempDataView.setUint32(0, sign << 16 | exponent << 13 | fraction << 13), tempDataView.getFloat32(0);
    }
    function readFloat32() {
      return commitRead(4, dataView.getFloat32(offset2));
    }
    function readFloat64() {
      return commitRead(8, dataView.getFloat64(offset2));
    }
    function readUint8() {
      return commitRead(1, data[offset2]);
    }
    function readUint16() {
      return commitRead(2, dataView.getUint16(offset2));
    }
    function readUint32() {
      return commitRead(4, dataView.getUint32(offset2));
    }
    function readUint64() {
      return commitRead(8, dataView.getBigUint64(offset2));
    }
    function readBreak() {
      return data[offset2] !== 255 ? false : (offset2 += 1, true);
    }
    function readLength(additionalInformation) {
      if (additionalInformation < 24)
        return additionalInformation;
      if (additionalInformation === 24)
        return readUint8();
      if (additionalInformation === 25)
        return readUint16();
      if (additionalInformation === 26)
        return readUint32();
      if (additionalInformation === 27) {
        let integer = readUint64();
        return integer <= Number.MAX_SAFE_INTEGER ? Number(integer) : integer;
      }
      if (additionalInformation === 31)
        return -1;
      throw new Error("CBORError: Invalid length encoding");
    }
    function readIndefiniteStringLength(majorType) {
      let initialByte = readUint8();
      if (initialByte === 255)
        return -1;
      let length5 = readLength(initialByte & 31);
      if (length5 < 0 || initialByte >> 5 !== majorType)
        throw new Error("CBORError: Invalid indefinite length element");
      return Number(length5);
    }
    function appendUtf16Data(utf16data, length5) {
      for (let i = 0; i < length5; ++i) {
        let value = readUint8();
        value & 128 && (value < 224 ? (value = (value & 31) << 6 | readUint8() & 63, length5 -= 1) : value < 240 ? (value = (value & 15) << 12 | (readUint8() & 63) << 6 | readUint8() & 63, length5 -= 2) : (value = (value & 7) << 18 | (readUint8() & 63) << 12 | (readUint8() & 63) << 6 | readUint8() & 63, length5 -= 3)), value < 65536 ? utf16data.push(value) : (value -= 65536, utf16data.push(55296 | value >> 10), utf16data.push(56320 | value & 1023));
      }
    }
    function decodeItem() {
      let initialByte = readUint8(), majorType = initialByte >> 5, additionalInformation = initialByte & 31, i, length5;
      if (majorType === 7)
        switch (additionalInformation) {
          case 25:
            return readFloat16();
          case 26:
            return readFloat32();
          case 27:
            return readFloat64();
        }
      if (length5 = readLength(additionalInformation), length5 < 0 && (majorType < 2 || 6 < majorType))
        throw new Error("CBORError: Invalid length");
      switch (majorType) {
        case 0:
          return length5;
        case 1:
          return typeof length5 == "number" ? -1 - length5 : -1n - length5;
        case 2: {
          if (length5 < 0) {
            let elements = [], fullArrayLength = 0;
            for (; (length5 = readIndefiniteStringLength(majorType)) >= 0; )
              fullArrayLength += length5, elements.push(readArrayBuffer(length5));
            let fullArray = new Uint8Array(fullArrayLength), fullArrayOffset = 0;
            for (i = 0; i < elements.length; ++i)
              fullArray.set(elements[i], fullArrayOffset), fullArrayOffset += elements[i].length;
            return fullArray;
          }
          return readArrayBuffer(length5).slice();
        }
        case 3: {
          let utf16data = [];
          if (length5 < 0)
            for (; (length5 = readIndefiniteStringLength(majorType)) >= 0; )
              appendUtf16Data(utf16data, length5);
          else
            appendUtf16Data(utf16data, length5);
          let string = "", DECODE_CHUNK_SIZE = 8192;
          for (i = 0; i < utf16data.length; i += DECODE_CHUNK_SIZE)
            string += String.fromCharCode.apply(null, utf16data.slice(i, i + DECODE_CHUNK_SIZE));
          return string;
        }
        case 4: {
          let retArray;
          if (length5 < 0) {
            retArray = [];
            let index = 0;
            for (; !readBreak(); )
              retArray.push(decodeItem());
          } else
            for (retArray = new Array(length5), i = 0; i < length5; ++i)
              retArray[i] = decodeItem();
          return retArray;
        }
        case 5: {
          if (dictionary === "map") {
            let retMap = /* @__PURE__ */ new Map();
            for (i = 0; i < length5 || length5 < 0 && !readBreak(); ++i) {
              let key = decodeItem();
              if (retMap.has(key))
                throw new Error("CBORError: Duplicate key encountered");
              retMap.set(key, decodeItem());
            }
            return retMap;
          }
          let retObject = {};
          for (i = 0; i < length5 || length5 < 0 && !readBreak(); ++i) {
            let key = decodeItem();
            if (Object.prototype.hasOwnProperty.call(retObject, key))
              throw new Error("CBORError: Duplicate key encountered");
            retObject[key] = decodeItem();
          }
          return retObject;
        }
        case 6: {
          let value = decodeItem(), tag = length5;
          if (value instanceof Uint8Array)
            switch (tag) {
              case 2:
              case 3:
                let num = value.reduce((acc, n) => (acc << 8n) + BigInt(n), 0n);
                return tag == 3 && (num = -1n - num), num;
              case 64:
                return value;
              case 72:
                return new Int8Array(value.buffer);
              case 69:
                return new Uint16Array(value.buffer);
              case 77:
                return new Int16Array(value.buffer);
              case 70:
                return new Uint32Array(value.buffer);
              case 78:
                return new Int32Array(value.buffer);
              case 71:
                return new BigUint64Array(value.buffer);
              case 79:
                return new BigInt64Array(value.buffer);
              case 85:
                return new Float32Array(value.buffer);
              case 86:
                return new Float64Array(value.buffer);
            }
          return tagger(tag, value);
        }
        case 7:
          switch (length5) {
            case 20:
              return false;
            case 21:
              return true;
            case 22:
              return null;
            case 23:
              return;
            default:
              return length5;
          }
      }
    }
    let ret = decodeItem();
    if (offset2 !== data.byteLength)
      throw new Error("CBORError: Remaining bytes");
    return ret;
  }
  var CBOR = { decode };
  var _componentDefaults = /* @__PURE__ */ new Map([[1, false], [2, 0], [3, 0], [4, ""], [5, void 0], [6, null], [7, null], [8, null], [9, null], [10, null], [11, null], [12, Float32Array.from([0, 0, 0, 1])], [13, Float32Array.from([0, 0])], [14, Float32Array.from([0, 0, 0])], [15, Float32Array.from([0, 0, 0, 0])]]);
  function _setupDefaults(ctor) {
    for (let name in ctor.Properties) {
      let p = ctor.Properties[name];
      if (p.type === 5)
        p.values?.length ? (typeof p.default != "number" && (p.default = p.values.indexOf(p.default)), (p.default < 0 || p.default >= p.values.length) && (p.default = 0)) : p.default = void 0;
      else if ((p.type === 12 || p.type === 13 || p.type === 14 || p.type === 15) && Array.isArray(p.default))
        p.default = Float32Array.from(p.default);
      else if (p.default === void 0) {
        let cloner = p.cloner ?? defaultPropertyCloner;
        p.default = cloner.clone(p.type, _componentDefaults.get(p.type));
      }
      ctor.prototype[name] = p.default;
    }
  }
  function _setPropertyOrder(ctor) {
    ctor._propertyOrder = ctor.hasOwnProperty("Properties") ? Object.keys(ctor.Properties).sort() : [];
  }
  var WASM2 = class {
    worker = "";
    wasm = null;
    canvas = null;
    preinitializedWebGPUDevice = null;
    webxr_session = null;
    webxr_requestSession = null;
    webxr_offerSession = null;
    webxr_frame = null;
    webxr_refSpace = null;
    webxr_refSpaces = null;
    webxr_refSpaceType = null;
    webxr_baseLayer = null;
    webxr_framebufferScaleFactor = 1;
    webxr_fbo = 0;
    UTF8ViewToString;
    _log = new Logger();
    _deactivate_component_on_error = false;
    _tempMem = null;
    _tempMemSize = 0;
    _tempMemFloat = null;
    _tempMemInt = null;
    _tempMemUint8 = null;
    _tempMemUint32 = null;
    _tempMemUint16 = null;
    _loadingScreen = null;
    _sceneLoadedCallback = [];
    _images = [null];
    _components = null;
    _componentTypes = [];
    _componentTypeIndices = {};
    _engine = null;
    _withPhysX = false;
    _utf8Decoder = new TextDecoder("utf8");
    _brokenComponentIndex = 0;
    constructor(threads2) {
      threads2 ? this.UTF8ViewToString = (s, e) => s ? this._utf8Decoder.decode(this.HEAPU8.slice(s, e)) : "" : this.UTF8ViewToString = (s, e) => s ? this._utf8Decoder.decode(this.HEAPU8.subarray(s, e)) : "", this._brokenComponentIndex = this._registerComponent(BrokenComponent);
    }
    reset() {
      this._wl_reset(), this._components = null, this._images.length = 1, this.allocateTempMemory(1024), this._componentTypes = [], this._componentTypeIndices = {}, this._brokenComponentIndex = this._registerComponent(BrokenComponent);
    }
    isRegistered(type) {
      return type in this._componentTypeIndices;
    }
    _registerComponentLegacy(typeName, params, object) {
      let ctor = class extends Component3 {
      };
      return ctor.TypeName = typeName, ctor.Properties = params, Object.assign(ctor.prototype, object), this._registerComponent(ctor);
    }
    _registerComponent(ctor) {
      if (!ctor.TypeName)
        throw new Error("no name provided for component.");
      if (!ctor.prototype._triggerInit)
        throw new Error(`registerComponent(): Component ${ctor.TypeName} must extend Component`);
      inheritProperties(ctor), _setupDefaults(ctor), _setPropertyOrder(ctor);
      let typeIndex = ctor.TypeName in this._componentTypeIndices ? this._componentTypeIndices[ctor.TypeName] : this._componentTypes.length;
      return this._componentTypes[typeIndex] = ctor, this._componentTypeIndices[ctor.TypeName] = typeIndex, ctor === BrokenComponent || (this._log.info(0, "Registered component", ctor.TypeName, `(class ${ctor.name})`, "with index", typeIndex), ctor.onRegister && ctor.onRegister(this._engine)), typeIndex;
    }
    allocateTempMemory(size) {
      this._log.info(0, "Allocating temp mem:", size), this._tempMemSize = size, this._tempMem && this._free(this._tempMem), this._tempMem = this._malloc(this._tempMemSize), this.updateTempMemory();
    }
    requireTempMem(size) {
      this._tempMemSize >= size || this.allocateTempMemory(Math.ceil(size / 1024) * 1024);
    }
    updateTempMemory() {
      this._tempMemFloat = new Float32Array(this.HEAP8.buffer, this._tempMem, this._tempMemSize >> 2), this._tempMemInt = new Int32Array(this.HEAP8.buffer, this._tempMem, this._tempMemSize >> 2), this._tempMemUint32 = new Uint32Array(this.HEAP8.buffer, this._tempMem, this._tempMemSize >> 2), this._tempMemUint16 = new Uint16Array(this.HEAP8.buffer, this._tempMem, this._tempMemSize >> 1), this._tempMemUint8 = new Uint8Array(this.HEAP8.buffer, this._tempMem, this._tempMemSize);
    }
    getTempBufferU8(count) {
      return this.requireTempMem(count), this._tempMemUint8;
    }
    getTempBufferU16(count) {
      return this.requireTempMem(count * 2), this._tempMemUint16;
    }
    getTempBufferU32(count) {
      return this.requireTempMem(count * 4), this._tempMemUint32;
    }
    getTempBufferI32(count) {
      return this.requireTempMem(count * 4), this._tempMemInt;
    }
    getTempBufferF32(count) {
      return this.requireTempMem(count * 4), this._tempMemFloat;
    }
    tempUTF8(str5, byteOffset = 0) {
      let strLen = this.lengthBytesUTF8(str5) + 1;
      this.requireTempMem(strLen + byteOffset);
      let ptr = this._tempMem + byteOffset;
      return this.stringToUTF8(str5, ptr, strLen), ptr;
    }
    copyBufferToHeap(buffer) {
      let size = buffer.byteLength, ptr = this._malloc(size);
      return this.HEAPU8.set(new Uint8Array(buffer), ptr), ptr;
    }
    get withPhysX() {
      return this._withPhysX;
    }
    _setEngine(engine) {
      this._engine = engine;
    }
    _wljs_xr_session_start(mode) {
      this._engine.xr === null && (this._engine.xr = new XR(this, mode), this._engine.onXRSessionStart.notify(this.webxr_session, mode));
    }
    _wljs_xr_session_end() {
      let startEmitter = this._engine.onXRSessionStart;
      startEmitter instanceof RetainEmitter && startEmitter.reset(), this._engine.onXRSessionEnd.notify(), this._engine.xr = null;
    }
    _wljs_xr_disable() {
      this._engine.arSupported = false, this._engine.vrSupported = false;
    }
    _wljs_init(withPhysX) {
      this._withPhysX = withPhysX, this.allocateTempMemory(1024);
    }
    _wljs_scene_switch(index) {
      let scene = this._engine._scenes[index];
      this._components = scene?._jsComponents ?? null;
    }
    _wljs_destroy_image(index) {
      let img = this._images[index];
      img && (this._images[index] = null, img.src !== void 0 && (img.src = ""), img.onload !== void 0 && (img.onload = null), img.onerror !== void 0 && (img.onerror = null));
    }
    _wljs_objects_markDestroyed(sceneIndex, idsPtr, count) {
      let scene = this._engine._scenes[sceneIndex], start = idsPtr >>> 1;
      for (let i = 0; i < count; ++i) {
        let id = this.HEAPU16[start + i];
        scene._destroyObject(id);
      }
    }
    _wljs_scene_initialize(sceneIndex, idsPtr, idsEnd, paramDataPtr, paramDataEndPtr, offsetsPtr, offsetsEndPtr) {
      let cbor = this.HEAPU8.subarray(paramDataPtr, paramDataEndPtr), offsets = this.HEAPU32.subarray(offsetsPtr >>> 2, offsetsEndPtr >>> 2), ids = this.HEAPU16.subarray(idsPtr >>> 1, idsEnd >>> 1), engine = this._engine, scene = engine._scenes[sceneIndex], components = scene._jsComponents, decoded;
      try {
        decoded = CBOR.decode(cbor);
      } catch (e) {
        this._log.error(0, "Exception during component parameter decoding"), this._log.error(2, e);
        return;
      }
      if (!Array.isArray(decoded)) {
        this._log.error(0, "Parameter data must be an array");
        return;
      }
      if (decoded.length !== ids.length) {
        this._log.error(0, `Parameter data has size ${decoded.length} but expected ${ids.length}`);
        return;
      }
      for (let i = 0; i < decoded.length; ++i) {
        let id = Component3._pack(sceneIndex, ids[i]), index = this._wl_get_js_component_index_for_id(id), component = components[index], ctor = component.constructor;
        if (ctor == BrokenComponent)
          continue;
        let paramNames = ctor._propertyOrder, paramValues = decoded[i];
        if (!Array.isArray(paramValues)) {
          this._log.error(0, "Component parameter data must be an array");
          continue;
        }
        if (paramValues.length !== paramNames.length) {
          this._log.error(0, `Component parameter data has size ${paramValues.length} but expected ${paramNames.length}`);
          continue;
        }
        for (let j = 0; j < paramValues.length; ++j) {
          let name = paramNames[j], property2 = ctor.Properties[name], type = property2.type, value = paramValues[j];
          if (value === void 0) {
            value = (property2.cloner ?? defaultPropertyCloner).clone(type, property2.default), component[name] = value;
            continue;
          }
          switch (typeof value == "number" && (value += offsets[type]), type) {
            case 1:
            case 2:
            case 3:
            case 4:
            case 5:
            case 13:
            case 14:
            case 15:
              break;
            case 6:
              value = value ? scene.wrap(this._wl_object_id(scene._index, value)) : null;
              break;
            case 7:
              value = engine.meshes.wrap(value);
              break;
            case 8:
              value = engine.textures.wrap(value);
              break;
            case 9:
              value = engine.materials.wrap(value);
              break;
            case 10:
              value = scene.animations.wrap(value);
              break;
            case 11:
              value = scene.skins.wrap(value);
              break;
            case 12:
              let max2 = (1 << value.BYTES_PER_ELEMENT * 8) - 1;
              value = Float32Array.from(value, (f, _) => f / max2);
              break;
          }
          component[name] = value;
        }
      }
    }
    _wljs_set_component_param_translation(scene, component, param, valuePtr, valueEndPtr) {
      let comp = this._engine._scenes[scene]._jsComponents[component], value = this.UTF8ViewToString(valuePtr, valueEndPtr), paramName = comp.constructor._propertyOrder[param];
      comp[paramName] = value;
    }
    _wljs_get_component_type_index(namePtr, nameEndPtr) {
      let typename = this.UTF8ViewToString(namePtr, nameEndPtr), index = this._componentTypeIndices[typename];
      return index === void 0 ? this._brokenComponentIndex : index;
    }
    _wljs_component_create(sceneIndex, index, id, type, object) {
      this._engine._scenes[sceneIndex]._components.createJs(index, id, type, object);
    }
    _wljs_component_init(scene, component) {
      this._engine._scenes[scene]._jsComponents[component]._triggerInit();
    }
    _wljs_component_update(component, dt) {
      this._components[component]._triggerUpdate(dt);
    }
    _wljs_component_onActivate(component) {
      this._components[component]._triggerOnActivate();
    }
    _wljs_component_onDeactivate(component) {
      this._components[component]._triggerOnDeactivate();
    }
    _wljs_component_markDestroyed(sceneIndex, manager, componentId) {
      this._engine._scenes[sceneIndex]._destroyComponent(manager, componentId);
    }
    _wljs_swap(scene, a, b) {
      let components = this._engine._scenes[scene]._jsComponents, componentA = components[a];
      components[a] = components[b], components[b] = componentA;
    }
    _wljs_copy(srcSceneIndex, srcIndex, dstSceneIndex, dstIndex, offsetsPtr) {
      let srcScene = this._engine._scenes[srcSceneIndex], destComp = this._engine._scenes[dstSceneIndex]._jsComponents[dstIndex], srcComp = srcScene._jsComponents[srcIndex];
      try {
        destComp._copy(srcComp, offsetsPtr);
      } catch (e) {
        this._log.error(2, `Exception during ${destComp.type} copy() on object ${destComp.object.name}`), this._log.error(2, e);
      }
    }
    _wljs_trigger_animationEvent(componentId, namePtr, nameEndPtr) {
      let comp = this._engine.scene._components.wrapAnimation(componentId), nameStr = this.UTF8ViewToString(namePtr, nameEndPtr);
      comp.onEvent.notify(nameStr);
    }
  };
  function throwInvalidRuntime(version) {
    return function() {
      throw new Error(`Feature added in version ${version}.
	\u2192 Please use a Wonderland Engine editor version >= ${version}`);
    };
  }
  var requireRuntime1_2_1 = throwInvalidRuntime("1.2.1");
  WASM2.prototype._wl_text_component_get_wrapMode = requireRuntime1_2_1;
  WASM2.prototype._wl_text_component_set_wrapMode = requireRuntime1_2_1;
  WASM2.prototype._wl_text_component_get_wrapWidth = requireRuntime1_2_1;
  WASM2.prototype._wl_text_component_set_wrapWidth = requireRuntime1_2_1;
  WASM2.prototype._wl_font_get_outlineSize = requireRuntime1_2_1;
  WASM2.prototype._wl_scene_create_chunked_start = requireRuntime1_2_1;
  WASM2.prototype._wl_scene_create_chunked_buffer_size = requireRuntime1_2_1;
  WASM2.prototype._wl_scene_create_chunked_next = requireRuntime1_2_1;
  WASM2.prototype._wl_scene_create_chunked_abort = requireRuntime1_2_1;
  WASM2.prototype._wl_scene_create_chunked_end_prefab = requireRuntime1_2_1;
  WASM2.prototype._wl_scene_create_chunked_end_main = requireRuntime1_2_1;
  WASM2.prototype._wl_scene_create_chunked_end_queued = requireRuntime1_2_1;
  var requireRuntime1_2_2 = throwInvalidRuntime("1.2.2");
  WASM2.prototype._wl_view_component_get_projectionType = requireRuntime1_2_2;
  WASM2.prototype._wl_view_component_set_projectionType = requireRuntime1_2_2;
  WASM2.prototype._wl_view_component_get_extent = requireRuntime1_2_2;
  WASM2.prototype._wl_view_component_set_extent = requireRuntime1_2_2;
  WASM2.prototype._wl_animation_component_get_rootMotionMode = requireRuntime1_2_2;
  WASM2.prototype._wl_animation_component_set_rootMotionMode = requireRuntime1_2_2;
  WASM2.prototype._wl_animation_component_get_rootMotion_translation = requireRuntime1_2_2;
  WASM2.prototype._wl_animation_component_get_rootMotion_rotation = requireRuntime1_2_2;
  var requireRuntime1_2_3 = throwInvalidRuntime("1.2.3");
  WASM2.prototype._wl_scene_environment_set_intensity = requireRuntime1_2_3;
  WASM2.prototype._wl_scene_environment_get_intensity = requireRuntime1_2_3;
  WASM2.prototype._wl_scene_environment_set_tint = requireRuntime1_2_3;
  WASM2.prototype._wl_scene_environment_get_tint = requireRuntime1_2_3;
  WASM2.prototype._wl_scene_environment_set_coefficients = requireRuntime1_2_3;
  WASM2.prototype._wl_scene_environment_get_coefficients = requireRuntime1_2_3;
  WASM2.prototype._wl_animation_component_get_iteration = requireRuntime1_2_3;
  WASM2.prototype._wl_animation_component_get_position = requireRuntime1_2_3;
  WASM2.prototype._wl_animation_component_get_duration = requireRuntime1_2_3;
  WASM2.prototype._wl_renderer_streaming_idle = requireRuntime1_2_3;

  // node_modules/@wonderlandengine/components/dist/8thwall-camera.js
  var ARCamera8thwall = class extends Component3 {
    /* 8thwall camera pipeline module name */
    name = "wonderland-engine-8thwall-camera";
    started = false;
    view = null;
    // cache camera
    position = [0, 0, 0];
    // cache 8thwall cam position
    rotation = [0, 0, 0, -1];
    // cache 8thwall cam rotation
    glTextureRenderer = null;
    // cache XR8.GlTextureRenderer.pipelineModule
    promptForDeviceMotion() {
      return new Promise(async (resolve, reject) => {
        window.dispatchEvent(new Event("8thwall-request-user-interaction"));
        window.addEventListener("8thwall-safe-to-request-permissions", async () => {
          try {
            const motionEvent = await DeviceMotionEvent.requestPermission();
            resolve(motionEvent);
          } catch (exception) {
            reject(exception);
          }
        });
      });
    }
    async getPermissions() {
      if (DeviceMotionEvent && DeviceMotionEvent.requestPermission) {
        try {
          const result = await DeviceMotionEvent.requestPermission();
          if (result !== "granted") {
            throw new Error("MotionEvent");
          }
        } catch (exception) {
          if (exception.name === "NotAllowedError") {
            const motionEvent = await this.promptForDeviceMotion();
            if (motionEvent !== "granted") {
              throw new Error("MotionEvent");
            }
          } else {
            throw new Error("MotionEvent");
          }
        }
      }
      try {
        const stream = await navigator.mediaDevices.getUserMedia({
          video: true,
          audio: true
        });
        stream.getTracks().forEach((track) => {
          track.stop();
        });
      } catch (exception) {
        throw new Error("Camera");
      }
    }
    init() {
      this.view = this.object.getComponent("view");
      this.onUpdate = this.onUpdate.bind(this);
      this.onAttach = this.onAttach.bind(this);
      this.onException = this.onException.bind(this);
      this.onCameraStatusChange = this.onCameraStatusChange.bind(this);
    }
    async start() {
      this.view = this.object.getComponent("view");
      if (!this.useCustomUIOverlays) {
        OverlaysHandler.init();
      }
      try {
        await this.getPermissions();
      } catch (error) {
        window.dispatchEvent(new CustomEvent("8thwall-permission-fail", { detail: error }));
        return;
      }
      await this.waitForXR8();
      XR8.XrController.configure({
        disableWorldTracking: false
      });
      this.glTextureRenderer = XR8.GlTextureRenderer.pipelineModule();
      XR8.addCameraPipelineModules([
        this.glTextureRenderer,
        XR8.XrController.pipelineModule(),
        this
      ]);
      const config = {
        cameraConfig: {
          direction: XR8.XrConfig.camera().BACK
        },
        canvas: Module.canvas,
        allowedDevices: XR8.XrConfig.device().ANY,
        ownRunLoop: false
      };
      XR8.run(config);
    }
    /**
     * @private
     * 8thwall pipeline function
     */
    onAttach(params) {
      this.started = true;
      this.engine.scene.colorClearEnabled = false;
      const gl = Module.ctx;
      const rot = this.object.rotationWorld;
      const pos = this.object.getTranslationWorld([]);
      this.position = Array.from(pos);
      this.rotation = Array.from(rot);
      XR8.XrController.updateCameraProjectionMatrix({
        origin: { x: pos[0], y: pos[1], z: pos[2] },
        facing: { x: rot[0], y: rot[1], z: rot[2], w: rot[3] },
        cam: {
          pixelRectWidth: Module.canvas.width,
          pixelRectHeight: Module.canvas.height,
          nearClipPlane: this.view.near,
          farClipPlane: this.view.far
        }
      });
      this.engine.scene.onPreRender.push(() => {
        gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, null);
        XR8.runPreRender(Date.now());
        XR8.runRender();
      });
      this.engine.scene.onPostRender.push(() => {
        XR8.runPostRender(Date.now());
      });
    }
    /**
     * @private
     * 8thwall pipeline function
     */
    onCameraStatusChange(e) {
      if (e && e.status === "failed") {
        this.onException(new Error(`Camera failed with status: ${e.status}`));
      }
    }
    /**
     * @private
     * 8thwall pipeline function
     */
    onUpdate(e) {
      if (!e.processCpuResult.reality)
        return;
      const { rotation, position, intrinsics } = e.processCpuResult.reality;
      this.rotation[0] = rotation.x;
      this.rotation[1] = rotation.y;
      this.rotation[2] = rotation.z;
      this.rotation[3] = rotation.w;
      this.position[0] = position.x;
      this.position[1] = position.y;
      this.position[2] = position.z;
      if (intrinsics) {
        const projectionMatrix = this.view.projectionMatrix;
        for (let i = 0; i < 16; i++) {
          if (Number.isFinite(intrinsics[i])) {
            projectionMatrix[i] = intrinsics[i];
          }
        }
      }
      if (position && rotation) {
        this.object.rotationWorld = this.rotation;
        this.object.setTranslationWorld(this.position);
      }
    }
    /**
     * @private
     * 8thwall pipeline function
     */
    onException(error) {
      console.error("8thwall exception:", error);
      window.dispatchEvent(new CustomEvent("8thwall-error", { detail: error }));
    }
    waitForXR8() {
      return new Promise((resolve, _rej) => {
        if (window.XR8) {
          resolve();
        } else {
          window.addEventListener("xrloaded", () => resolve());
        }
      });
    }
  };
  __publicField(ARCamera8thwall, "TypeName", "8thwall-camera");
  __publicField(ARCamera8thwall, "Properties", {
    /** Override the WL html overlays for handling camera/motion permissions and error handling */
    useCustomUIOverlays: { type: Type.Bool, default: false }
  });
  var OverlaysHandler = {
    init: function() {
      this.handleRequestUserInteraction = this.handleRequestUserInteraction.bind(this);
      this.handlePermissionFail = this.handlePermissionFail.bind(this);
      this.handleError = this.handleError.bind(this);
      window.addEventListener("8thwall-request-user-interaction", this.handleRequestUserInteraction);
      window.addEventListener("8thwall-permission-fail", this.handlePermissionFail);
      window.addEventListener("8thwall-error", this.handleError);
    },
    handleRequestUserInteraction: function() {
      const overlay = this.showOverlay(requestPermissionOverlay);
      window.addEventListener("8thwall-safe-to-request-permissions", () => {
        overlay.remove();
      });
    },
    handlePermissionFail: function(_reason) {
      this.showOverlay(failedPermissionOverlay);
    },
    handleError: function(_error) {
      this.showOverlay(runtimeErrorOverlay);
    },
    showOverlay: function(htmlContent) {
      const overlay = document.createElement("div");
      overlay.innerHTML = htmlContent;
      document.body.appendChild(overlay);
      return overlay;
    }
  };
  var requestPermissionOverlay = `
<style>
  #request-permission-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 999;
    color: #fff;
    background-color: rgba(0, 0, 0, 0.5);
    text-align: center;
    font-family: sans-serif;
  }

  .request-permission-overlay_title {
    margin: 30px;
    font-size: 32px;
  }

  .request-permission-overlay_button {
    background-color: #e80086;
    font-size: 22px;
    padding: 10px 30px;
    color: #fff;
    border-radius: 15px;
    border: none;
  }
</style>

<div id="request-permission-overlay">
  <div class="request-permission-overlay_title">This app requires to use your camera and motion sensors</div>

  <button class="request-permission-overlay_button" onclick="window.dispatchEvent(new Event('8thwall-safe-to-request-permissions'))">OK</button>
</div>`;
  var failedPermissionOverlay = `
<style>
  #failed-permission-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 999;
    color: #fff;
    background-color: rgba(0, 0, 0, 0.5);
    text-align: center;
    font-family: sans-serif;
  }

  .failed-permission-overlay_title {
    margin: 30px;
    font-size: 32px;
  }

  .failed-permission-overlay_button {
    background-color: #e80086;
    font-size: 22px;
    padding: 10px 30px;
    color: #fff;
    border-radius: 15px;
    border: none;
  }
</style>

<div id="failed-permission-overlay">
  <div class="failed-permission-overlay_title">Failed to grant permissions. Reset the the permissions and refresh the page.</div>

  <button class="failed-permission-overlay_button" onclick="window.location.reload()">Refresh the page</button>
</div>`;
  var runtimeErrorOverlay = `
<style>
  #wall-error-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 999;
    color: #fff;
    background-color: rgba(0, 0, 0, 0.5);
    text-align: center;
    font-family: sans-serif;
  }

  .wall-error-overlay_title {
    margin: 30px;
    font-size: 32px;
  }

  .wall-error-overlay_button {
    background-color: #e80086;
    font-size: 22px;
    padding: 10px 30px;
    color: #fff;
    border-radius: 15px;
    border: none;
  }
</style>

<div id="wall-error-overlay">
  <div class="wall-error-overlay_title">Error has occurred. Please reload the page</div>

  <button class="wall-error-overlay_button" onclick="window.location.reload()">Reload</button>
</div>`;

  // node_modules/@wonderlandengine/components/dist/utils/webxr.js
  var tempVec = new Float32Array(3);
  var tempQuat = new Float32Array(4);
  function setXRRigidTransformLocal(o, transform) {
    const r = transform.orientation;
    tempQuat[0] = r.x;
    tempQuat[1] = r.y;
    tempQuat[2] = r.z;
    tempQuat[3] = r.w;
    const t = transform.position;
    tempVec[0] = t.x;
    tempVec[1] = t.y;
    tempVec[2] = t.z;
    o.resetPositionRotation();
    o.setRotationLocal(tempQuat);
    o.translateLocal(tempVec);
  }

  // node_modules/@wonderlandengine/components/dist/anchor.js
  var __decorate = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var tempVec3 = new Float32Array(3);
  var tempQuat2 = new Float32Array(4);
  var _anchors, _addAnchor, addAnchor_fn, _removeAnchor, removeAnchor_fn, _getFrame, getFrame_fn, _createAnchor, createAnchor_fn, _onAddAnchor, onAddAnchor_fn, _onRestoreAnchor, onRestoreAnchor_fn, _onCreate, onCreate_fn;
  var _Anchor = class extends Component3 {
    constructor() {
      super(...arguments);
      __privateAdd(this, _getFrame);
      __privateAdd(this, _createAnchor);
      __privateAdd(this, _onAddAnchor);
      __privateAdd(this, _onRestoreAnchor);
      __privateAdd(this, _onCreate);
      __publicField(this, "persist", false);
      /** Unique identifier to load a persistent anchor from, or empty/null if unknown */
      __publicField(this, "uuid", null);
      /** The xrAnchor, if created */
      __publicField(this, "xrAnchor", null);
      /** Emits events when the anchor is created either by being restored or newly created */
      __publicField(this, "onCreate", new Emitter());
      /** Whether the anchor is currently being tracked */
      __publicField(this, "visible", false);
      /** Emits an event when this anchor starts tracking */
      __publicField(this, "onTrackingFound", new Emitter());
      /** Emits an event when this anchor stops tracking */
      __publicField(this, "onTrackingLost", new Emitter());
      /** XRFrame to use for creating the anchor */
      __publicField(this, "xrFrame", null);
      /** XRHitTestResult to use for creating the anchor */
      __publicField(this, "xrHitResult", null);
    }
    /** Retrieve all anchors of the current scene */
    static getAllAnchors() {
      return __privateGet(_Anchor, _anchors);
    }
    /**
     * Create a new anchor
     *
     * @param o Object to attach the component to
     * @param params Parameters for the anchor component
     * @param frame XRFrame to use for anchor cration, if null, will use the current frame if available
     * @param hitResult Optional hit-test result to create the anchor with
     * @returns Promise for the newly created anchor component
     */
    static create(o, params, frame, hitResult) {
      const a = o.addComponent(_Anchor, { ...params, active: false });
      if (a === null)
        return null;
      a.xrHitResult = hitResult ?? null;
      a.xrFrame = frame ?? null;
      a.onCreate.once(() => (a.xrFrame = null, a.xrHitResult = null));
      a.active = true;
      return a.onCreate.promise();
    }
    start() {
      if (this.uuid && this.engine.xr) {
        this.persist = true;
        if (this.engine.xr.session.restorePersistentAnchor === void 0) {
          console.warn("anchor: Persistent anchors are not supported by your client. Ignoring persist property.");
        }
        this.engine.xr.session.restorePersistentAnchor(this.uuid).then(__privateMethod(this, _onRestoreAnchor, onRestoreAnchor_fn).bind(this));
      } else if (__privateMethod(this, _getFrame, getFrame_fn).call(this)) {
        __privateMethod(this, _createAnchor, createAnchor_fn).call(this).then(__privateMethod(this, _onAddAnchor, onAddAnchor_fn).bind(this));
      } else {
        throw new Error("Anchors can only be created during the XR frame in an active XR session");
      }
    }
    update() {
      if (!this.xrAnchor || !this.engine.xr)
        return;
      const pose = this.engine.xr.frame.getPose(this.xrAnchor.anchorSpace, this.engine.xr.currentReferenceSpace);
      const visible = !!pose;
      if (visible != this.visible) {
        this.visible = visible;
        (visible ? this.onTrackingFound : this.onTrackingLost).notify(this);
      }
      if (pose) {
        setXRRigidTransformLocal(this.object, pose.transform);
      }
    }
    onDestroy() {
      var _a12;
      __privateMethod(_a12 = _Anchor, _removeAnchor, removeAnchor_fn).call(_a12, this);
    }
  };
  var Anchor = _Anchor;
  _anchors = new WeakMap();
  _addAnchor = new WeakSet();
  addAnchor_fn = function(anchor) {
    __privateGet(_Anchor, _anchors).push(anchor);
  };
  _removeAnchor = new WeakSet();
  removeAnchor_fn = function(anchor) {
    const index = __privateGet(_Anchor, _anchors).indexOf(anchor);
    if (index < 0)
      return;
    __privateGet(_Anchor, _anchors).splice(index, 1);
  };
  _getFrame = new WeakSet();
  getFrame_fn = function() {
    return this.xrFrame || this.engine.xr.frame;
  };
  _createAnchor = new WeakSet();
  createAnchor_fn = async function() {
    if (!__privateMethod(this, _getFrame, getFrame_fn).call(this).createAnchor) {
      throw new Error("Cannot create anchor - anchors not supported, did you enable the 'anchors' WebXR feature?");
    }
    if (this.xrHitResult) {
      if (this.xrHitResult.createAnchor === void 0) {
        throw new Error("Requested anchor on XRHitTestResult, but WebXR hit-test feature is not available.");
      }
      return this.xrHitResult.createAnchor();
    } else {
      this.object.getTranslationWorld(tempVec3);
      tempQuat2.set(this.object.rotationWorld);
      const rotation = tempQuat2;
      const anchorPose = new XRRigidTransform({ x: tempVec3[0], y: tempVec3[1], z: tempVec3[2] }, { x: rotation[0], y: rotation[1], z: rotation[2], w: rotation[3] });
      return __privateMethod(this, _getFrame, getFrame_fn).call(this)?.createAnchor(anchorPose, this.engine.xr.currentReferenceSpace);
    }
  };
  _onAddAnchor = new WeakSet();
  onAddAnchor_fn = function(anchor) {
    if (!anchor)
      return;
    if (this.persist) {
      if (anchor.requestPersistentHandle !== void 0) {
        anchor.requestPersistentHandle().then((uuid) => {
          var _a12;
          this.uuid = uuid;
          __privateMethod(this, _onCreate, onCreate_fn).call(this, anchor);
          __privateMethod(_a12 = _Anchor, _addAnchor, addAnchor_fn).call(_a12, this);
        });
        return;
      } else {
        console.warn("anchor: Persistent anchors are not supported by your client. Ignoring persist property.");
      }
    }
    __privateMethod(this, _onCreate, onCreate_fn).call(this, anchor);
  };
  _onRestoreAnchor = new WeakSet();
  onRestoreAnchor_fn = function(anchor) {
    __privateMethod(this, _onCreate, onCreate_fn).call(this, anchor);
  };
  _onCreate = new WeakSet();
  onCreate_fn = function(anchor) {
    this.xrAnchor = anchor;
    this.onCreate.notify(this);
  };
  __privateAdd(Anchor, _addAnchor);
  __privateAdd(Anchor, _removeAnchor);
  __publicField(Anchor, "TypeName", "anchor");
  /* Static management of all anchors */
  __privateAdd(Anchor, _anchors, []);
  __decorate([
    property.bool(false)
  ], Anchor.prototype, "persist", void 0);
  __decorate([
    property.string()
  ], Anchor.prototype, "uuid", void 0);

  // node_modules/@wonderlandengine/components/dist/cursor-target.js
  var CursorTarget = class extends Component3 {
    /** Emitter for events when the target is hovered */
    onHover = new Emitter();
    /** Emitter for events when the target is unhovered */
    onUnhover = new Emitter();
    /** Emitter for events when the target is clicked */
    onClick = new Emitter();
    /** Emitter for events when the cursor moves on the target */
    onMove = new Emitter();
    /** Emitter for events when the user pressed the select button on the target */
    onDown = new Emitter();
    /** Emitter for events when the user unpressed the select button on the target */
    onUp = new Emitter();
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    this.onHover.add(f);
     */
    addHoverFunction(f) {
      this.onHover.add(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    this.onHover.remove(f);
     */
    removeHoverFunction(f) {
      this.onHover.remove(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    this.onUnhover.add(f);
     */
    addUnHoverFunction(f) {
      this.onUnhover.add(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    this.onUnhover.remove(f);
     */
    removeUnHoverFunction(f) {
      this.onUnhover.remove(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    this.onClick.add(f);
     */
    addClickFunction(f) {
      this.onClick.add(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onClick.remove(f);
     */
    removeClickFunction(f) {
      this.onClick.remove(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onMove.add(f);
     */
    addMoveFunction(f) {
      this.onMove.add(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onMove.remove(f);
     */
    removeMoveFunction(f) {
      this.onMove.remove(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onDown.add(f);
     */
    addDownFunction(f) {
      this.onDown.add(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onDown.remove(f);
     */
    removeDownFunction(f) {
      this.onDown.remove(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onUp.add(f);
     */
    addUpFunction(f) {
      this.onUp.add(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onUp.remove(f);
     */
    removeUpFunction(f) {
      this.onUp.remove(f);
    }
  };
  __publicField(CursorTarget, "TypeName", "cursor-target");
  __publicField(CursorTarget, "Properties", {});

  // node_modules/gl-matrix/esm/common.js
  var EPSILON = 1e-6;
  var ARRAY_TYPE = typeof Float32Array !== "undefined" ? Float32Array : Array;
  var RANDOM = Math.random;
  var degree = Math.PI / 180;
  if (!Math.hypot)
    Math.hypot = function() {
      var y = 0, i = arguments.length;
      while (i--) {
        y += arguments[i] * arguments[i];
      }
      return Math.sqrt(y);
    };

  // node_modules/gl-matrix/esm/mat3.js
  function create() {
    var out = new ARRAY_TYPE(9);
    if (ARRAY_TYPE != Float32Array) {
      out[1] = 0;
      out[2] = 0;
      out[3] = 0;
      out[5] = 0;
      out[6] = 0;
      out[7] = 0;
    }
    out[0] = 1;
    out[4] = 1;
    out[8] = 1;
    return out;
  }

  // node_modules/gl-matrix/esm/mat4.js
  var mat4_exports = {};
  __export(mat4_exports, {
    add: () => add,
    adjoint: () => adjoint,
    clone: () => clone,
    copy: () => copy,
    create: () => create2,
    determinant: () => determinant,
    equals: () => equals,
    exactEquals: () => exactEquals,
    frob: () => frob,
    fromQuat: () => fromQuat,
    fromQuat2: () => fromQuat2,
    fromRotation: () => fromRotation,
    fromRotationTranslation: () => fromRotationTranslation,
    fromRotationTranslationScale: () => fromRotationTranslationScale,
    fromRotationTranslationScaleOrigin: () => fromRotationTranslationScaleOrigin,
    fromScaling: () => fromScaling,
    fromTranslation: () => fromTranslation,
    fromValues: () => fromValues,
    fromXRotation: () => fromXRotation,
    fromYRotation: () => fromYRotation,
    fromZRotation: () => fromZRotation,
    frustum: () => frustum,
    getRotation: () => getRotation,
    getScaling: () => getScaling,
    getTranslation: () => getTranslation,
    identity: () => identity,
    invert: () => invert,
    lookAt: () => lookAt,
    mul: () => mul,
    multiply: () => multiply,
    multiplyScalar: () => multiplyScalar,
    multiplyScalarAndAdd: () => multiplyScalarAndAdd,
    ortho: () => ortho,
    orthoNO: () => orthoNO,
    orthoZO: () => orthoZO,
    perspective: () => perspective,
    perspectiveFromFieldOfView: () => perspectiveFromFieldOfView,
    perspectiveNO: () => perspectiveNO,
    perspectiveZO: () => perspectiveZO,
    rotate: () => rotate,
    rotateX: () => rotateX,
    rotateY: () => rotateY,
    rotateZ: () => rotateZ,
    scale: () => scale,
    set: () => set,
    str: () => str,
    sub: () => sub,
    subtract: () => subtract,
    targetTo: () => targetTo,
    translate: () => translate,
    transpose: () => transpose
  });
  function create2() {
    var out = new ARRAY_TYPE(16);
    if (ARRAY_TYPE != Float32Array) {
      out[1] = 0;
      out[2] = 0;
      out[3] = 0;
      out[4] = 0;
      out[6] = 0;
      out[7] = 0;
      out[8] = 0;
      out[9] = 0;
      out[11] = 0;
      out[12] = 0;
      out[13] = 0;
      out[14] = 0;
    }
    out[0] = 1;
    out[5] = 1;
    out[10] = 1;
    out[15] = 1;
    return out;
  }
  function clone(a) {
    var out = new ARRAY_TYPE(16);
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    out[3] = a[3];
    out[4] = a[4];
    out[5] = a[5];
    out[6] = a[6];
    out[7] = a[7];
    out[8] = a[8];
    out[9] = a[9];
    out[10] = a[10];
    out[11] = a[11];
    out[12] = a[12];
    out[13] = a[13];
    out[14] = a[14];
    out[15] = a[15];
    return out;
  }
  function copy(out, a) {
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    out[3] = a[3];
    out[4] = a[4];
    out[5] = a[5];
    out[6] = a[6];
    out[7] = a[7];
    out[8] = a[8];
    out[9] = a[9];
    out[10] = a[10];
    out[11] = a[11];
    out[12] = a[12];
    out[13] = a[13];
    out[14] = a[14];
    out[15] = a[15];
    return out;
  }
  function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {
    var out = new ARRAY_TYPE(16);
    out[0] = m00;
    out[1] = m01;
    out[2] = m02;
    out[3] = m03;
    out[4] = m10;
    out[5] = m11;
    out[6] = m12;
    out[7] = m13;
    out[8] = m20;
    out[9] = m21;
    out[10] = m22;
    out[11] = m23;
    out[12] = m30;
    out[13] = m31;
    out[14] = m32;
    out[15] = m33;
    return out;
  }
  function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {
    out[0] = m00;
    out[1] = m01;
    out[2] = m02;
    out[3] = m03;
    out[4] = m10;
    out[5] = m11;
    out[6] = m12;
    out[7] = m13;
    out[8] = m20;
    out[9] = m21;
    out[10] = m22;
    out[11] = m23;
    out[12] = m30;
    out[13] = m31;
    out[14] = m32;
    out[15] = m33;
    return out;
  }
  function identity(out) {
    out[0] = 1;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = 1;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[10] = 1;
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function transpose(out, a) {
    if (out === a) {
      var a01 = a[1], a02 = a[2], a03 = a[3];
      var a12 = a[6], a13 = a[7];
      var a23 = a[11];
      out[1] = a[4];
      out[2] = a[8];
      out[3] = a[12];
      out[4] = a01;
      out[6] = a[9];
      out[7] = a[13];
      out[8] = a02;
      out[9] = a12;
      out[11] = a[14];
      out[12] = a03;
      out[13] = a13;
      out[14] = a23;
    } else {
      out[0] = a[0];
      out[1] = a[4];
      out[2] = a[8];
      out[3] = a[12];
      out[4] = a[1];
      out[5] = a[5];
      out[6] = a[9];
      out[7] = a[13];
      out[8] = a[2];
      out[9] = a[6];
      out[10] = a[10];
      out[11] = a[14];
      out[12] = a[3];
      out[13] = a[7];
      out[14] = a[11];
      out[15] = a[15];
    }
    return out;
  }
  function invert(out, a) {
    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];
    var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];
    var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];
    var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];
    var b00 = a00 * a11 - a01 * a10;
    var b01 = a00 * a12 - a02 * a10;
    var b02 = a00 * a13 - a03 * a10;
    var b03 = a01 * a12 - a02 * a11;
    var b04 = a01 * a13 - a03 * a11;
    var b05 = a02 * a13 - a03 * a12;
    var b06 = a20 * a31 - a21 * a30;
    var b07 = a20 * a32 - a22 * a30;
    var b08 = a20 * a33 - a23 * a30;
    var b09 = a21 * a32 - a22 * a31;
    var b10 = a21 * a33 - a23 * a31;
    var b11 = a22 * a33 - a23 * a32;
    var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
    if (!det) {
      return null;
    }
    det = 1 / det;
    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;
    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;
    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;
    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;
    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;
    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;
    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;
    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;
    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;
    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;
    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;
    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;
    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;
    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;
    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;
    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;
    return out;
  }
  function adjoint(out, a) {
    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];
    var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];
    var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];
    var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];
    out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);
    out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));
    out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);
    out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));
    out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));
    out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);
    out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));
    out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);
    out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);
    out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));
    out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);
    out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));
    out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));
    out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);
    out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));
    out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);
    return out;
  }
  function determinant(a) {
    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];
    var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];
    var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];
    var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];
    var b00 = a00 * a11 - a01 * a10;
    var b01 = a00 * a12 - a02 * a10;
    var b02 = a00 * a13 - a03 * a10;
    var b03 = a01 * a12 - a02 * a11;
    var b04 = a01 * a13 - a03 * a11;
    var b05 = a02 * a13 - a03 * a12;
    var b06 = a20 * a31 - a21 * a30;
    var b07 = a20 * a32 - a22 * a30;
    var b08 = a20 * a33 - a23 * a30;
    var b09 = a21 * a32 - a22 * a31;
    var b10 = a21 * a33 - a23 * a31;
    var b11 = a22 * a33 - a23 * a32;
    return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
  }
  function multiply(out, a, b) {
    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];
    var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];
    var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];
    var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];
    var b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];
    out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;
    out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;
    out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;
    out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;
    b0 = b[4];
    b1 = b[5];
    b2 = b[6];
    b3 = b[7];
    out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;
    out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;
    out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;
    out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;
    b0 = b[8];
    b1 = b[9];
    b2 = b[10];
    b3 = b[11];
    out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;
    out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;
    out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;
    out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;
    b0 = b[12];
    b1 = b[13];
    b2 = b[14];
    b3 = b[15];
    out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;
    out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;
    out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;
    out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;
    return out;
  }
  function translate(out, a, v) {
    var x = v[0], y = v[1], z = v[2];
    var a00, a01, a02, a03;
    var a10, a11, a12, a13;
    var a20, a21, a22, a23;
    if (a === out) {
      out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];
      out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];
      out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];
      out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];
    } else {
      a00 = a[0];
      a01 = a[1];
      a02 = a[2];
      a03 = a[3];
      a10 = a[4];
      a11 = a[5];
      a12 = a[6];
      a13 = a[7];
      a20 = a[8];
      a21 = a[9];
      a22 = a[10];
      a23 = a[11];
      out[0] = a00;
      out[1] = a01;
      out[2] = a02;
      out[3] = a03;
      out[4] = a10;
      out[5] = a11;
      out[6] = a12;
      out[7] = a13;
      out[8] = a20;
      out[9] = a21;
      out[10] = a22;
      out[11] = a23;
      out[12] = a00 * x + a10 * y + a20 * z + a[12];
      out[13] = a01 * x + a11 * y + a21 * z + a[13];
      out[14] = a02 * x + a12 * y + a22 * z + a[14];
      out[15] = a03 * x + a13 * y + a23 * z + a[15];
    }
    return out;
  }
  function scale(out, a, v) {
    var x = v[0], y = v[1], z = v[2];
    out[0] = a[0] * x;
    out[1] = a[1] * x;
    out[2] = a[2] * x;
    out[3] = a[3] * x;
    out[4] = a[4] * y;
    out[5] = a[5] * y;
    out[6] = a[6] * y;
    out[7] = a[7] * y;
    out[8] = a[8] * z;
    out[9] = a[9] * z;
    out[10] = a[10] * z;
    out[11] = a[11] * z;
    out[12] = a[12];
    out[13] = a[13];
    out[14] = a[14];
    out[15] = a[15];
    return out;
  }
  function rotate(out, a, rad, axis) {
    var x = axis[0], y = axis[1], z = axis[2];
    var len4 = Math.hypot(x, y, z);
    var s, c, t;
    var a00, a01, a02, a03;
    var a10, a11, a12, a13;
    var a20, a21, a22, a23;
    var b00, b01, b02;
    var b10, b11, b12;
    var b20, b21, b22;
    if (len4 < EPSILON) {
      return null;
    }
    len4 = 1 / len4;
    x *= len4;
    y *= len4;
    z *= len4;
    s = Math.sin(rad);
    c = Math.cos(rad);
    t = 1 - c;
    a00 = a[0];
    a01 = a[1];
    a02 = a[2];
    a03 = a[3];
    a10 = a[4];
    a11 = a[5];
    a12 = a[6];
    a13 = a[7];
    a20 = a[8];
    a21 = a[9];
    a22 = a[10];
    a23 = a[11];
    b00 = x * x * t + c;
    b01 = y * x * t + z * s;
    b02 = z * x * t - y * s;
    b10 = x * y * t - z * s;
    b11 = y * y * t + c;
    b12 = z * y * t + x * s;
    b20 = x * z * t + y * s;
    b21 = y * z * t - x * s;
    b22 = z * z * t + c;
    out[0] = a00 * b00 + a10 * b01 + a20 * b02;
    out[1] = a01 * b00 + a11 * b01 + a21 * b02;
    out[2] = a02 * b00 + a12 * b01 + a22 * b02;
    out[3] = a03 * b00 + a13 * b01 + a23 * b02;
    out[4] = a00 * b10 + a10 * b11 + a20 * b12;
    out[5] = a01 * b10 + a11 * b11 + a21 * b12;
    out[6] = a02 * b10 + a12 * b11 + a22 * b12;
    out[7] = a03 * b10 + a13 * b11 + a23 * b12;
    out[8] = a00 * b20 + a10 * b21 + a20 * b22;
    out[9] = a01 * b20 + a11 * b21 + a21 * b22;
    out[10] = a02 * b20 + a12 * b21 + a22 * b22;
    out[11] = a03 * b20 + a13 * b21 + a23 * b22;
    if (a !== out) {
      out[12] = a[12];
      out[13] = a[13];
      out[14] = a[14];
      out[15] = a[15];
    }
    return out;
  }
  function rotateX(out, a, rad) {
    var s = Math.sin(rad);
    var c = Math.cos(rad);
    var a10 = a[4];
    var a11 = a[5];
    var a12 = a[6];
    var a13 = a[7];
    var a20 = a[8];
    var a21 = a[9];
    var a22 = a[10];
    var a23 = a[11];
    if (a !== out) {
      out[0] = a[0];
      out[1] = a[1];
      out[2] = a[2];
      out[3] = a[3];
      out[12] = a[12];
      out[13] = a[13];
      out[14] = a[14];
      out[15] = a[15];
    }
    out[4] = a10 * c + a20 * s;
    out[5] = a11 * c + a21 * s;
    out[6] = a12 * c + a22 * s;
    out[7] = a13 * c + a23 * s;
    out[8] = a20 * c - a10 * s;
    out[9] = a21 * c - a11 * s;
    out[10] = a22 * c - a12 * s;
    out[11] = a23 * c - a13 * s;
    return out;
  }
  function rotateY(out, a, rad) {
    var s = Math.sin(rad);
    var c = Math.cos(rad);
    var a00 = a[0];
    var a01 = a[1];
    var a02 = a[2];
    var a03 = a[3];
    var a20 = a[8];
    var a21 = a[9];
    var a22 = a[10];
    var a23 = a[11];
    if (a !== out) {
      out[4] = a[4];
      out[5] = a[5];
      out[6] = a[6];
      out[7] = a[7];
      out[12] = a[12];
      out[13] = a[13];
      out[14] = a[14];
      out[15] = a[15];
    }
    out[0] = a00 * c - a20 * s;
    out[1] = a01 * c - a21 * s;
    out[2] = a02 * c - a22 * s;
    out[3] = a03 * c - a23 * s;
    out[8] = a00 * s + a20 * c;
    out[9] = a01 * s + a21 * c;
    out[10] = a02 * s + a22 * c;
    out[11] = a03 * s + a23 * c;
    return out;
  }
  function rotateZ(out, a, rad) {
    var s = Math.sin(rad);
    var c = Math.cos(rad);
    var a00 = a[0];
    var a01 = a[1];
    var a02 = a[2];
    var a03 = a[3];
    var a10 = a[4];
    var a11 = a[5];
    var a12 = a[6];
    var a13 = a[7];
    if (a !== out) {
      out[8] = a[8];
      out[9] = a[9];
      out[10] = a[10];
      out[11] = a[11];
      out[12] = a[12];
      out[13] = a[13];
      out[14] = a[14];
      out[15] = a[15];
    }
    out[0] = a00 * c + a10 * s;
    out[1] = a01 * c + a11 * s;
    out[2] = a02 * c + a12 * s;
    out[3] = a03 * c + a13 * s;
    out[4] = a10 * c - a00 * s;
    out[5] = a11 * c - a01 * s;
    out[6] = a12 * c - a02 * s;
    out[7] = a13 * c - a03 * s;
    return out;
  }
  function fromTranslation(out, v) {
    out[0] = 1;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = 1;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[10] = 1;
    out[11] = 0;
    out[12] = v[0];
    out[13] = v[1];
    out[14] = v[2];
    out[15] = 1;
    return out;
  }
  function fromScaling(out, v) {
    out[0] = v[0];
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = v[1];
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[10] = v[2];
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function fromRotation(out, rad, axis) {
    var x = axis[0], y = axis[1], z = axis[2];
    var len4 = Math.hypot(x, y, z);
    var s, c, t;
    if (len4 < EPSILON) {
      return null;
    }
    len4 = 1 / len4;
    x *= len4;
    y *= len4;
    z *= len4;
    s = Math.sin(rad);
    c = Math.cos(rad);
    t = 1 - c;
    out[0] = x * x * t + c;
    out[1] = y * x * t + z * s;
    out[2] = z * x * t - y * s;
    out[3] = 0;
    out[4] = x * y * t - z * s;
    out[5] = y * y * t + c;
    out[6] = z * y * t + x * s;
    out[7] = 0;
    out[8] = x * z * t + y * s;
    out[9] = y * z * t - x * s;
    out[10] = z * z * t + c;
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function fromXRotation(out, rad) {
    var s = Math.sin(rad);
    var c = Math.cos(rad);
    out[0] = 1;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = c;
    out[6] = s;
    out[7] = 0;
    out[8] = 0;
    out[9] = -s;
    out[10] = c;
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function fromYRotation(out, rad) {
    var s = Math.sin(rad);
    var c = Math.cos(rad);
    out[0] = c;
    out[1] = 0;
    out[2] = -s;
    out[3] = 0;
    out[4] = 0;
    out[5] = 1;
    out[6] = 0;
    out[7] = 0;
    out[8] = s;
    out[9] = 0;
    out[10] = c;
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function fromZRotation(out, rad) {
    var s = Math.sin(rad);
    var c = Math.cos(rad);
    out[0] = c;
    out[1] = s;
    out[2] = 0;
    out[3] = 0;
    out[4] = -s;
    out[5] = c;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[10] = 1;
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function fromRotationTranslation(out, q, v) {
    var x = q[0], y = q[1], z = q[2], w = q[3];
    var x2 = x + x;
    var y2 = y + y;
    var z2 = z + z;
    var xx = x * x2;
    var xy = x * y2;
    var xz = x * z2;
    var yy = y * y2;
    var yz = y * z2;
    var zz = z * z2;
    var wx = w * x2;
    var wy = w * y2;
    var wz = w * z2;
    out[0] = 1 - (yy + zz);
    out[1] = xy + wz;
    out[2] = xz - wy;
    out[3] = 0;
    out[4] = xy - wz;
    out[5] = 1 - (xx + zz);
    out[6] = yz + wx;
    out[7] = 0;
    out[8] = xz + wy;
    out[9] = yz - wx;
    out[10] = 1 - (xx + yy);
    out[11] = 0;
    out[12] = v[0];
    out[13] = v[1];
    out[14] = v[2];
    out[15] = 1;
    return out;
  }
  function fromQuat2(out, a) {
    var translation = new ARRAY_TYPE(3);
    var bx = -a[0], by = -a[1], bz = -a[2], bw = a[3], ax = a[4], ay = a[5], az = a[6], aw = a[7];
    var magnitude = bx * bx + by * by + bz * bz + bw * bw;
    if (magnitude > 0) {
      translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;
      translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;
      translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;
    } else {
      translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;
      translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;
      translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;
    }
    fromRotationTranslation(out, a, translation);
    return out;
  }
  function getTranslation(out, mat) {
    out[0] = mat[12];
    out[1] = mat[13];
    out[2] = mat[14];
    return out;
  }
  function getScaling(out, mat) {
    var m11 = mat[0];
    var m12 = mat[1];
    var m13 = mat[2];
    var m21 = mat[4];
    var m22 = mat[5];
    var m23 = mat[6];
    var m31 = mat[8];
    var m32 = mat[9];
    var m33 = mat[10];
    out[0] = Math.hypot(m11, m12, m13);
    out[1] = Math.hypot(m21, m22, m23);
    out[2] = Math.hypot(m31, m32, m33);
    return out;
  }
  function getRotation(out, mat) {
    var scaling = new ARRAY_TYPE(3);
    getScaling(scaling, mat);
    var is1 = 1 / scaling[0];
    var is2 = 1 / scaling[1];
    var is3 = 1 / scaling[2];
    var sm11 = mat[0] * is1;
    var sm12 = mat[1] * is2;
    var sm13 = mat[2] * is3;
    var sm21 = mat[4] * is1;
    var sm22 = mat[5] * is2;
    var sm23 = mat[6] * is3;
    var sm31 = mat[8] * is1;
    var sm32 = mat[9] * is2;
    var sm33 = mat[10] * is3;
    var trace = sm11 + sm22 + sm33;
    var S = 0;
    if (trace > 0) {
      S = Math.sqrt(trace + 1) * 2;
      out[3] = 0.25 * S;
      out[0] = (sm23 - sm32) / S;
      out[1] = (sm31 - sm13) / S;
      out[2] = (sm12 - sm21) / S;
    } else if (sm11 > sm22 && sm11 > sm33) {
      S = Math.sqrt(1 + sm11 - sm22 - sm33) * 2;
      out[3] = (sm23 - sm32) / S;
      out[0] = 0.25 * S;
      out[1] = (sm12 + sm21) / S;
      out[2] = (sm31 + sm13) / S;
    } else if (sm22 > sm33) {
      S = Math.sqrt(1 + sm22 - sm11 - sm33) * 2;
      out[3] = (sm31 - sm13) / S;
      out[0] = (sm12 + sm21) / S;
      out[1] = 0.25 * S;
      out[2] = (sm23 + sm32) / S;
    } else {
      S = Math.sqrt(1 + sm33 - sm11 - sm22) * 2;
      out[3] = (sm12 - sm21) / S;
      out[0] = (sm31 + sm13) / S;
      out[1] = (sm23 + sm32) / S;
      out[2] = 0.25 * S;
    }
    return out;
  }
  function fromRotationTranslationScale(out, q, v, s) {
    var x = q[0], y = q[1], z = q[2], w = q[3];
    var x2 = x + x;
    var y2 = y + y;
    var z2 = z + z;
    var xx = x * x2;
    var xy = x * y2;
    var xz = x * z2;
    var yy = y * y2;
    var yz = y * z2;
    var zz = z * z2;
    var wx = w * x2;
    var wy = w * y2;
    var wz = w * z2;
    var sx = s[0];
    var sy = s[1];
    var sz = s[2];
    out[0] = (1 - (yy + zz)) * sx;
    out[1] = (xy + wz) * sx;
    out[2] = (xz - wy) * sx;
    out[3] = 0;
    out[4] = (xy - wz) * sy;
    out[5] = (1 - (xx + zz)) * sy;
    out[6] = (yz + wx) * sy;
    out[7] = 0;
    out[8] = (xz + wy) * sz;
    out[9] = (yz - wx) * sz;
    out[10] = (1 - (xx + yy)) * sz;
    out[11] = 0;
    out[12] = v[0];
    out[13] = v[1];
    out[14] = v[2];
    out[15] = 1;
    return out;
  }
  function fromRotationTranslationScaleOrigin(out, q, v, s, o) {
    var x = q[0], y = q[1], z = q[2], w = q[3];
    var x2 = x + x;
    var y2 = y + y;
    var z2 = z + z;
    var xx = x * x2;
    var xy = x * y2;
    var xz = x * z2;
    var yy = y * y2;
    var yz = y * z2;
    var zz = z * z2;
    var wx = w * x2;
    var wy = w * y2;
    var wz = w * z2;
    var sx = s[0];
    var sy = s[1];
    var sz = s[2];
    var ox = o[0];
    var oy = o[1];
    var oz = o[2];
    var out0 = (1 - (yy + zz)) * sx;
    var out1 = (xy + wz) * sx;
    var out2 = (xz - wy) * sx;
    var out4 = (xy - wz) * sy;
    var out5 = (1 - (xx + zz)) * sy;
    var out6 = (yz + wx) * sy;
    var out8 = (xz + wy) * sz;
    var out9 = (yz - wx) * sz;
    var out10 = (1 - (xx + yy)) * sz;
    out[0] = out0;
    out[1] = out1;
    out[2] = out2;
    out[3] = 0;
    out[4] = out4;
    out[5] = out5;
    out[6] = out6;
    out[7] = 0;
    out[8] = out8;
    out[9] = out9;
    out[10] = out10;
    out[11] = 0;
    out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);
    out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);
    out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);
    out[15] = 1;
    return out;
  }
  function fromQuat(out, q) {
    var x = q[0], y = q[1], z = q[2], w = q[3];
    var x2 = x + x;
    var y2 = y + y;
    var z2 = z + z;
    var xx = x * x2;
    var yx = y * x2;
    var yy = y * y2;
    var zx = z * x2;
    var zy = z * y2;
    var zz = z * z2;
    var wx = w * x2;
    var wy = w * y2;
    var wz = w * z2;
    out[0] = 1 - yy - zz;
    out[1] = yx + wz;
    out[2] = zx - wy;
    out[3] = 0;
    out[4] = yx - wz;
    out[5] = 1 - xx - zz;
    out[6] = zy + wx;
    out[7] = 0;
    out[8] = zx + wy;
    out[9] = zy - wx;
    out[10] = 1 - xx - yy;
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function frustum(out, left, right, bottom, top, near, far) {
    var rl = 1 / (right - left);
    var tb = 1 / (top - bottom);
    var nf = 1 / (near - far);
    out[0] = near * 2 * rl;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = near * 2 * tb;
    out[6] = 0;
    out[7] = 0;
    out[8] = (right + left) * rl;
    out[9] = (top + bottom) * tb;
    out[10] = (far + near) * nf;
    out[11] = -1;
    out[12] = 0;
    out[13] = 0;
    out[14] = far * near * 2 * nf;
    out[15] = 0;
    return out;
  }
  function perspectiveNO(out, fovy, aspect, near, far) {
    var f = 1 / Math.tan(fovy / 2), nf;
    out[0] = f / aspect;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = f;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[11] = -1;
    out[12] = 0;
    out[13] = 0;
    out[15] = 0;
    if (far != null && far !== Infinity) {
      nf = 1 / (near - far);
      out[10] = (far + near) * nf;
      out[14] = 2 * far * near * nf;
    } else {
      out[10] = -1;
      out[14] = -2 * near;
    }
    return out;
  }
  var perspective = perspectiveNO;
  function perspectiveZO(out, fovy, aspect, near, far) {
    var f = 1 / Math.tan(fovy / 2), nf;
    out[0] = f / aspect;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = f;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[11] = -1;
    out[12] = 0;
    out[13] = 0;
    out[15] = 0;
    if (far != null && far !== Infinity) {
      nf = 1 / (near - far);
      out[10] = far * nf;
      out[14] = far * near * nf;
    } else {
      out[10] = -1;
      out[14] = -near;
    }
    return out;
  }
  function perspectiveFromFieldOfView(out, fov, near, far) {
    var upTan = Math.tan(fov.upDegrees * Math.PI / 180);
    var downTan = Math.tan(fov.downDegrees * Math.PI / 180);
    var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180);
    var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180);
    var xScale = 2 / (leftTan + rightTan);
    var yScale = 2 / (upTan + downTan);
    out[0] = xScale;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = yScale;
    out[6] = 0;
    out[7] = 0;
    out[8] = -((leftTan - rightTan) * xScale * 0.5);
    out[9] = (upTan - downTan) * yScale * 0.5;
    out[10] = far / (near - far);
    out[11] = -1;
    out[12] = 0;
    out[13] = 0;
    out[14] = far * near / (near - far);
    out[15] = 0;
    return out;
  }
  function orthoNO(out, left, right, bottom, top, near, far) {
    var lr = 1 / (left - right);
    var bt = 1 / (bottom - top);
    var nf = 1 / (near - far);
    out[0] = -2 * lr;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = -2 * bt;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[10] = 2 * nf;
    out[11] = 0;
    out[12] = (left + right) * lr;
    out[13] = (top + bottom) * bt;
    out[14] = (far + near) * nf;
    out[15] = 1;
    return out;
  }
  var ortho = orthoNO;
  function orthoZO(out, left, right, bottom, top, near, far) {
    var lr = 1 / (left - right);
    var bt = 1 / (bottom - top);
    var nf = 1 / (near - far);
    out[0] = -2 * lr;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = -2 * bt;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[10] = nf;
    out[11] = 0;
    out[12] = (left + right) * lr;
    out[13] = (top + bottom) * bt;
    out[14] = near * nf;
    out[15] = 1;
    return out;
  }
  function lookAt(out, eye, center, up) {
    var x0, x1, x2, y0, y1, y2, z0, z1, z2, len4;
    var eyex = eye[0];
    var eyey = eye[1];
    var eyez = eye[2];
    var upx = up[0];
    var upy = up[1];
    var upz = up[2];
    var centerx = center[0];
    var centery = center[1];
    var centerz = center[2];
    if (Math.abs(eyex - centerx) < EPSILON && Math.abs(eyey - centery) < EPSILON && Math.abs(eyez - centerz) < EPSILON) {
      return identity(out);
    }
    z0 = eyex - centerx;
    z1 = eyey - centery;
    z2 = eyez - centerz;
    len4 = 1 / Math.hypot(z0, z1, z2);
    z0 *= len4;
    z1 *= len4;
    z2 *= len4;
    x0 = upy * z2 - upz * z1;
    x1 = upz * z0 - upx * z2;
    x2 = upx * z1 - upy * z0;
    len4 = Math.hypot(x0, x1, x2);
    if (!len4) {
      x0 = 0;
      x1 = 0;
      x2 = 0;
    } else {
      len4 = 1 / len4;
      x0 *= len4;
      x1 *= len4;
      x2 *= len4;
    }
    y0 = z1 * x2 - z2 * x1;
    y1 = z2 * x0 - z0 * x2;
    y2 = z0 * x1 - z1 * x0;
    len4 = Math.hypot(y0, y1, y2);
    if (!len4) {
      y0 = 0;
      y1 = 0;
      y2 = 0;
    } else {
      len4 = 1 / len4;
      y0 *= len4;
      y1 *= len4;
      y2 *= len4;
    }
    out[0] = x0;
    out[1] = y0;
    out[2] = z0;
    out[3] = 0;
    out[4] = x1;
    out[5] = y1;
    out[6] = z1;
    out[7] = 0;
    out[8] = x2;
    out[9] = y2;
    out[10] = z2;
    out[11] = 0;
    out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);
    out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);
    out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);
    out[15] = 1;
    return out;
  }
  function targetTo(out, eye, target, up) {
    var eyex = eye[0], eyey = eye[1], eyez = eye[2], upx = up[0], upy = up[1], upz = up[2];
    var z0 = eyex - target[0], z1 = eyey - target[1], z2 = eyez - target[2];
    var len4 = z0 * z0 + z1 * z1 + z2 * z2;
    if (len4 > 0) {
      len4 = 1 / Math.sqrt(len4);
      z0 *= len4;
      z1 *= len4;
      z2 *= len4;
    }
    var x0 = upy * z2 - upz * z1, x1 = upz * z0 - upx * z2, x2 = upx * z1 - upy * z0;
    len4 = x0 * x0 + x1 * x1 + x2 * x2;
    if (len4 > 0) {
      len4 = 1 / Math.sqrt(len4);
      x0 *= len4;
      x1 *= len4;
      x2 *= len4;
    }
    out[0] = x0;
    out[1] = x1;
    out[2] = x2;
    out[3] = 0;
    out[4] = z1 * x2 - z2 * x1;
    out[5] = z2 * x0 - z0 * x2;
    out[6] = z0 * x1 - z1 * x0;
    out[7] = 0;
    out[8] = z0;
    out[9] = z1;
    out[10] = z2;
    out[11] = 0;
    out[12] = eyex;
    out[13] = eyey;
    out[14] = eyez;
    out[15] = 1;
    return out;
  }
  function str(a) {
    return "mat4(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ", " + a[4] + ", " + a[5] + ", " + a[6] + ", " + a[7] + ", " + a[8] + ", " + a[9] + ", " + a[10] + ", " + a[11] + ", " + a[12] + ", " + a[13] + ", " + a[14] + ", " + a[15] + ")";
  }
  function frob(a) {
    return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);
  }
  function add(out, a, b) {
    out[0] = a[0] + b[0];
    out[1] = a[1] + b[1];
    out[2] = a[2] + b[2];
    out[3] = a[3] + b[3];
    out[4] = a[4] + b[4];
    out[5] = a[5] + b[5];
    out[6] = a[6] + b[6];
    out[7] = a[7] + b[7];
    out[8] = a[8] + b[8];
    out[9] = a[9] + b[9];
    out[10] = a[10] + b[10];
    out[11] = a[11] + b[11];
    out[12] = a[12] + b[12];
    out[13] = a[13] + b[13];
    out[14] = a[14] + b[14];
    out[15] = a[15] + b[15];
    return out;
  }
  function subtract(out, a, b) {
    out[0] = a[0] - b[0];
    out[1] = a[1] - b[1];
    out[2] = a[2] - b[2];
    out[3] = a[3] - b[3];
    out[4] = a[4] - b[4];
    out[5] = a[5] - b[5];
    out[6] = a[6] - b[6];
    out[7] = a[7] - b[7];
    out[8] = a[8] - b[8];
    out[9] = a[9] - b[9];
    out[10] = a[10] - b[10];
    out[11] = a[11] - b[11];
    out[12] = a[12] - b[12];
    out[13] = a[13] - b[13];
    out[14] = a[14] - b[14];
    out[15] = a[15] - b[15];
    return out;
  }
  function multiplyScalar(out, a, b) {
    out[0] = a[0] * b;
    out[1] = a[1] * b;
    out[2] = a[2] * b;
    out[3] = a[3] * b;
    out[4] = a[4] * b;
    out[5] = a[5] * b;
    out[6] = a[6] * b;
    out[7] = a[7] * b;
    out[8] = a[8] * b;
    out[9] = a[9] * b;
    out[10] = a[10] * b;
    out[11] = a[11] * b;
    out[12] = a[12] * b;
    out[13] = a[13] * b;
    out[14] = a[14] * b;
    out[15] = a[15] * b;
    return out;
  }
  function multiplyScalarAndAdd(out, a, b, scale6) {
    out[0] = a[0] + b[0] * scale6;
    out[1] = a[1] + b[1] * scale6;
    out[2] = a[2] + b[2] * scale6;
    out[3] = a[3] + b[3] * scale6;
    out[4] = a[4] + b[4] * scale6;
    out[5] = a[5] + b[5] * scale6;
    out[6] = a[6] + b[6] * scale6;
    out[7] = a[7] + b[7] * scale6;
    out[8] = a[8] + b[8] * scale6;
    out[9] = a[9] + b[9] * scale6;
    out[10] = a[10] + b[10] * scale6;
    out[11] = a[11] + b[11] * scale6;
    out[12] = a[12] + b[12] * scale6;
    out[13] = a[13] + b[13] * scale6;
    out[14] = a[14] + b[14] * scale6;
    out[15] = a[15] + b[15] * scale6;
    return out;
  }
  function exactEquals(a, b) {
    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];
  }
  function equals(a, b) {
    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];
    var a4 = a[4], a5 = a[5], a6 = a[6], a7 = a[7];
    var a8 = a[8], a9 = a[9], a10 = a[10], a11 = a[11];
    var a12 = a[12], a13 = a[13], a14 = a[14], a15 = a[15];
    var b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];
    var b4 = b[4], b5 = b[5], b6 = b[6], b7 = b[7];
    var b8 = b[8], b9 = b[9], b10 = b[10], b11 = b[11];
    var b12 = b[12], b13 = b[13], b14 = b[14], b15 = b[15];
    return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= EPSILON * Math.max(1, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= EPSILON * Math.max(1, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= EPSILON * Math.max(1, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= EPSILON * Math.max(1, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= EPSILON * Math.max(1, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= EPSILON * Math.max(1, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= EPSILON * Math.max(1, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= EPSILON * Math.max(1, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= EPSILON * Math.max(1, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= EPSILON * Math.max(1, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= EPSILON * Math.max(1, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= EPSILON * Math.max(1, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= EPSILON * Math.max(1, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= EPSILON * Math.max(1, Math.abs(a15), Math.abs(b15));
  }
  var mul = multiply;
  var sub = subtract;

  // node_modules/gl-matrix/esm/quat.js
  var quat_exports = {};
  __export(quat_exports, {
    add: () => add4,
    calculateW: () => calculateW,
    clone: () => clone4,
    conjugate: () => conjugate,
    copy: () => copy4,
    create: () => create5,
    dot: () => dot3,
    equals: () => equals4,
    exactEquals: () => exactEquals4,
    exp: () => exp,
    fromEuler: () => fromEuler,
    fromMat3: () => fromMat3,
    fromValues: () => fromValues4,
    getAngle: () => getAngle,
    getAxisAngle: () => getAxisAngle,
    identity: () => identity2,
    invert: () => invert2,
    len: () => len2,
    length: () => length3,
    lerp: () => lerp3,
    ln: () => ln,
    mul: () => mul3,
    multiply: () => multiply3,
    normalize: () => normalize3,
    pow: () => pow,
    random: () => random2,
    rotateX: () => rotateX3,
    rotateY: () => rotateY3,
    rotateZ: () => rotateZ3,
    rotationTo: () => rotationTo,
    scale: () => scale4,
    set: () => set4,
    setAxes: () => setAxes,
    setAxisAngle: () => setAxisAngle,
    slerp: () => slerp,
    sqlerp: () => sqlerp,
    sqrLen: () => sqrLen2,
    squaredLength: () => squaredLength3,
    str: () => str3
  });

  // node_modules/gl-matrix/esm/vec3.js
  var vec3_exports = {};
  __export(vec3_exports, {
    add: () => add2,
    angle: () => angle,
    bezier: () => bezier,
    ceil: () => ceil,
    clone: () => clone2,
    copy: () => copy2,
    create: () => create3,
    cross: () => cross,
    dist: () => dist,
    distance: () => distance,
    div: () => div,
    divide: () => divide,
    dot: () => dot,
    equals: () => equals2,
    exactEquals: () => exactEquals2,
    floor: () => floor,
    forEach: () => forEach,
    fromValues: () => fromValues2,
    hermite: () => hermite,
    inverse: () => inverse,
    len: () => len,
    length: () => length,
    lerp: () => lerp,
    max: () => max,
    min: () => min,
    mul: () => mul2,
    multiply: () => multiply2,
    negate: () => negate,
    normalize: () => normalize,
    random: () => random,
    rotateX: () => rotateX2,
    rotateY: () => rotateY2,
    rotateZ: () => rotateZ2,
    round: () => round,
    scale: () => scale2,
    scaleAndAdd: () => scaleAndAdd,
    set: () => set2,
    sqrDist: () => sqrDist,
    sqrLen: () => sqrLen,
    squaredDistance: () => squaredDistance,
    squaredLength: () => squaredLength,
    str: () => str2,
    sub: () => sub2,
    subtract: () => subtract2,
    transformMat3: () => transformMat3,
    transformMat4: () => transformMat4,
    transformQuat: () => transformQuat,
    zero: () => zero
  });
  function create3() {
    var out = new ARRAY_TYPE(3);
    if (ARRAY_TYPE != Float32Array) {
      out[0] = 0;
      out[1] = 0;
      out[2] = 0;
    }
    return out;
  }
  function clone2(a) {
    var out = new ARRAY_TYPE(3);
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    return out;
  }
  function length(a) {
    var x = a[0];
    var y = a[1];
    var z = a[2];
    return Math.hypot(x, y, z);
  }
  function fromValues2(x, y, z) {
    var out = new ARRAY_TYPE(3);
    out[0] = x;
    out[1] = y;
    out[2] = z;
    return out;
  }
  function copy2(out, a) {
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    return out;
  }
  function set2(out, x, y, z) {
    out[0] = x;
    out[1] = y;
    out[2] = z;
    return out;
  }
  function add2(out, a, b) {
    out[0] = a[0] + b[0];
    out[1] = a[1] + b[1];
    out[2] = a[2] + b[2];
    return out;
  }
  function subtract2(out, a, b) {
    out[0] = a[0] - b[0];
    out[1] = a[1] - b[1];
    out[2] = a[2] - b[2];
    return out;
  }
  function multiply2(out, a, b) {
    out[0] = a[0] * b[0];
    out[1] = a[1] * b[1];
    out[2] = a[2] * b[2];
    return out;
  }
  function divide(out, a, b) {
    out[0] = a[0] / b[0];
    out[1] = a[1] / b[1];
    out[2] = a[2] / b[2];
    return out;
  }
  function ceil(out, a) {
    out[0] = Math.ceil(a[0]);
    out[1] = Math.ceil(a[1]);
    out[2] = Math.ceil(a[2]);
    return out;
  }
  function floor(out, a) {
    out[0] = Math.floor(a[0]);
    out[1] = Math.floor(a[1]);
    out[2] = Math.floor(a[2]);
    return out;
  }
  function min(out, a, b) {
    out[0] = Math.min(a[0], b[0]);
    out[1] = Math.min(a[1], b[1]);
    out[2] = Math.min(a[2], b[2]);
    return out;
  }
  function max(out, a, b) {
    out[0] = Math.max(a[0], b[0]);
    out[1] = Math.max(a[1], b[1]);
    out[2] = Math.max(a[2], b[2]);
    return out;
  }
  function round(out, a) {
    out[0] = Math.round(a[0]);
    out[1] = Math.round(a[1]);
    out[2] = Math.round(a[2]);
    return out;
  }
  function scale2(out, a, b) {
    out[0] = a[0] * b;
    out[1] = a[1] * b;
    out[2] = a[2] * b;
    return out;
  }
  function scaleAndAdd(out, a, b, scale6) {
    out[0] = a[0] + b[0] * scale6;
    out[1] = a[1] + b[1] * scale6;
    out[2] = a[2] + b[2] * scale6;
    return out;
  }
  function distance(a, b) {
    var x = b[0] - a[0];
    var y = b[1] - a[1];
    var z = b[2] - a[2];
    return Math.hypot(x, y, z);
  }
  function squaredDistance(a, b) {
    var x = b[0] - a[0];
    var y = b[1] - a[1];
    var z = b[2] - a[2];
    return x * x + y * y + z * z;
  }
  function squaredLength(a) {
    var x = a[0];
    var y = a[1];
    var z = a[2];
    return x * x + y * y + z * z;
  }
  function negate(out, a) {
    out[0] = -a[0];
    out[1] = -a[1];
    out[2] = -a[2];
    return out;
  }
  function inverse(out, a) {
    out[0] = 1 / a[0];
    out[1] = 1 / a[1];
    out[2] = 1 / a[2];
    return out;
  }
  function normalize(out, a) {
    var x = a[0];
    var y = a[1];
    var z = a[2];
    var len4 = x * x + y * y + z * z;
    if (len4 > 0) {
      len4 = 1 / Math.sqrt(len4);
    }
    out[0] = a[0] * len4;
    out[1] = a[1] * len4;
    out[2] = a[2] * len4;
    return out;
  }
  function dot(a, b) {
    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];
  }
  function cross(out, a, b) {
    var ax = a[0], ay = a[1], az = a[2];
    var bx = b[0], by = b[1], bz = b[2];
    out[0] = ay * bz - az * by;
    out[1] = az * bx - ax * bz;
    out[2] = ax * by - ay * bx;
    return out;
  }
  function lerp(out, a, b, t) {
    var ax = a[0];
    var ay = a[1];
    var az = a[2];
    out[0] = ax + t * (b[0] - ax);
    out[1] = ay + t * (b[1] - ay);
    out[2] = az + t * (b[2] - az);
    return out;
  }
  function hermite(out, a, b, c, d, t) {
    var factorTimes2 = t * t;
    var factor1 = factorTimes2 * (2 * t - 3) + 1;
    var factor2 = factorTimes2 * (t - 2) + t;
    var factor3 = factorTimes2 * (t - 1);
    var factor4 = factorTimes2 * (3 - 2 * t);
    out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;
    out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;
    out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;
    return out;
  }
  function bezier(out, a, b, c, d, t) {
    var inverseFactor = 1 - t;
    var inverseFactorTimesTwo = inverseFactor * inverseFactor;
    var factorTimes2 = t * t;
    var factor1 = inverseFactorTimesTwo * inverseFactor;
    var factor2 = 3 * t * inverseFactorTimesTwo;
    var factor3 = 3 * factorTimes2 * inverseFactor;
    var factor4 = factorTimes2 * t;
    out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;
    out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;
    out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;
    return out;
  }
  function random(out, scale6) {
    scale6 = scale6 || 1;
    var r = RANDOM() * 2 * Math.PI;
    var z = RANDOM() * 2 - 1;
    var zScale = Math.sqrt(1 - z * z) * scale6;
    out[0] = Math.cos(r) * zScale;
    out[1] = Math.sin(r) * zScale;
    out[2] = z * scale6;
    return out;
  }
  function transformMat4(out, a, m) {
    var x = a[0], y = a[1], z = a[2];
    var w = m[3] * x + m[7] * y + m[11] * z + m[15];
    w = w || 1;
    out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;
    out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;
    out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;
    return out;
  }
  function transformMat3(out, a, m) {
    var x = a[0], y = a[1], z = a[2];
    out[0] = x * m[0] + y * m[3] + z * m[6];
    out[1] = x * m[1] + y * m[4] + z * m[7];
    out[2] = x * m[2] + y * m[5] + z * m[8];
    return out;
  }
  function transformQuat(out, a, q) {
    var qx = q[0], qy = q[1], qz = q[2], qw = q[3];
    var x = a[0], y = a[1], z = a[2];
    var uvx = qy * z - qz * y, uvy = qz * x - qx * z, uvz = qx * y - qy * x;
    var uuvx = qy * uvz - qz * uvy, uuvy = qz * uvx - qx * uvz, uuvz = qx * uvy - qy * uvx;
    var w2 = qw * 2;
    uvx *= w2;
    uvy *= w2;
    uvz *= w2;
    uuvx *= 2;
    uuvy *= 2;
    uuvz *= 2;
    out[0] = x + uvx + uuvx;
    out[1] = y + uvy + uuvy;
    out[2] = z + uvz + uuvz;
    return out;
  }
  function rotateX2(out, a, b, rad) {
    var p = [], r = [];
    p[0] = a[0] - b[0];
    p[1] = a[1] - b[1];
    p[2] = a[2] - b[2];
    r[0] = p[0];
    r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);
    r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad);
    out[0] = r[0] + b[0];
    out[1] = r[1] + b[1];
    out[2] = r[2] + b[2];
    return out;
  }
  function rotateY2(out, a, b, rad) {
    var p = [], r = [];
    p[0] = a[0] - b[0];
    p[1] = a[1] - b[1];
    p[2] = a[2] - b[2];
    r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);
    r[1] = p[1];
    r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad);
    out[0] = r[0] + b[0];
    out[1] = r[1] + b[1];
    out[2] = r[2] + b[2];
    return out;
  }
  function rotateZ2(out, a, b, rad) {
    var p = [], r = [];
    p[0] = a[0] - b[0];
    p[1] = a[1] - b[1];
    p[2] = a[2] - b[2];
    r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);
    r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);
    r[2] = p[2];
    out[0] = r[0] + b[0];
    out[1] = r[1] + b[1];
    out[2] = r[2] + b[2];
    return out;
  }
  function angle(a, b) {
    var ax = a[0], ay = a[1], az = a[2], bx = b[0], by = b[1], bz = b[2], mag1 = Math.sqrt(ax * ax + ay * ay + az * az), mag2 = Math.sqrt(bx * bx + by * by + bz * bz), mag = mag1 * mag2, cosine = mag && dot(a, b) / mag;
    return Math.acos(Math.min(Math.max(cosine, -1), 1));
  }
  function zero(out) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
    return out;
  }
  function str2(a) {
    return "vec3(" + a[0] + ", " + a[1] + ", " + a[2] + ")";
  }
  function exactEquals2(a, b) {
    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];
  }
  function equals2(a, b) {
    var a0 = a[0], a1 = a[1], a2 = a[2];
    var b0 = b[0], b1 = b[1], b2 = b[2];
    return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= EPSILON * Math.max(1, Math.abs(a2), Math.abs(b2));
  }
  var sub2 = subtract2;
  var mul2 = multiply2;
  var div = divide;
  var dist = distance;
  var sqrDist = squaredDistance;
  var len = length;
  var sqrLen = squaredLength;
  var forEach = function() {
    var vec = create3();
    return function(a, stride, offset2, count, fn, arg) {
      var i, l;
      if (!stride) {
        stride = 3;
      }
      if (!offset2) {
        offset2 = 0;
      }
      if (count) {
        l = Math.min(count * stride + offset2, a.length);
      } else {
        l = a.length;
      }
      for (i = offset2; i < l; i += stride) {
        vec[0] = a[i];
        vec[1] = a[i + 1];
        vec[2] = a[i + 2];
        fn(vec, vec, arg);
        a[i] = vec[0];
        a[i + 1] = vec[1];
        a[i + 2] = vec[2];
      }
      return a;
    };
  }();

  // node_modules/gl-matrix/esm/vec4.js
  function create4() {
    var out = new ARRAY_TYPE(4);
    if (ARRAY_TYPE != Float32Array) {
      out[0] = 0;
      out[1] = 0;
      out[2] = 0;
      out[3] = 0;
    }
    return out;
  }
  function clone3(a) {
    var out = new ARRAY_TYPE(4);
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    out[3] = a[3];
    return out;
  }
  function fromValues3(x, y, z, w) {
    var out = new ARRAY_TYPE(4);
    out[0] = x;
    out[1] = y;
    out[2] = z;
    out[3] = w;
    return out;
  }
  function copy3(out, a) {
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    out[3] = a[3];
    return out;
  }
  function set3(out, x, y, z, w) {
    out[0] = x;
    out[1] = y;
    out[2] = z;
    out[3] = w;
    return out;
  }
  function add3(out, a, b) {
    out[0] = a[0] + b[0];
    out[1] = a[1] + b[1];
    out[2] = a[2] + b[2];
    out[3] = a[3] + b[3];
    return out;
  }
  function scale3(out, a, b) {
    out[0] = a[0] * b;
    out[1] = a[1] * b;
    out[2] = a[2] * b;
    out[3] = a[3] * b;
    return out;
  }
  function length2(a) {
    var x = a[0];
    var y = a[1];
    var z = a[2];
    var w = a[3];
    return Math.hypot(x, y, z, w);
  }
  function squaredLength2(a) {
    var x = a[0];
    var y = a[1];
    var z = a[2];
    var w = a[3];
    return x * x + y * y + z * z + w * w;
  }
  function normalize2(out, a) {
    var x = a[0];
    var y = a[1];
    var z = a[2];
    var w = a[3];
    var len4 = x * x + y * y + z * z + w * w;
    if (len4 > 0) {
      len4 = 1 / Math.sqrt(len4);
    }
    out[0] = x * len4;
    out[1] = y * len4;
    out[2] = z * len4;
    out[3] = w * len4;
    return out;
  }
  function dot2(a, b) {
    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];
  }
  function lerp2(out, a, b, t) {
    var ax = a[0];
    var ay = a[1];
    var az = a[2];
    var aw = a[3];
    out[0] = ax + t * (b[0] - ax);
    out[1] = ay + t * (b[1] - ay);
    out[2] = az + t * (b[2] - az);
    out[3] = aw + t * (b[3] - aw);
    return out;
  }
  function exactEquals3(a, b) {
    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];
  }
  function equals3(a, b) {
    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];
    var b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];
    return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= EPSILON * Math.max(1, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= EPSILON * Math.max(1, Math.abs(a3), Math.abs(b3));
  }
  var forEach2 = function() {
    var vec = create4();
    return function(a, stride, offset2, count, fn, arg) {
      var i, l;
      if (!stride) {
        stride = 4;
      }
      if (!offset2) {
        offset2 = 0;
      }
      if (count) {
        l = Math.min(count * stride + offset2, a.length);
      } else {
        l = a.length;
      }
      for (i = offset2; i < l; i += stride) {
        vec[0] = a[i];
        vec[1] = a[i + 1];
        vec[2] = a[i + 2];
        vec[3] = a[i + 3];
        fn(vec, vec, arg);
        a[i] = vec[0];
        a[i + 1] = vec[1];
        a[i + 2] = vec[2];
        a[i + 3] = vec[3];
      }
      return a;
    };
  }();

  // node_modules/gl-matrix/esm/quat.js
  function create5() {
    var out = new ARRAY_TYPE(4);
    if (ARRAY_TYPE != Float32Array) {
      out[0] = 0;
      out[1] = 0;
      out[2] = 0;
    }
    out[3] = 1;
    return out;
  }
  function identity2(out) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
    out[3] = 1;
    return out;
  }
  function setAxisAngle(out, axis, rad) {
    rad = rad * 0.5;
    var s = Math.sin(rad);
    out[0] = s * axis[0];
    out[1] = s * axis[1];
    out[2] = s * axis[2];
    out[3] = Math.cos(rad);
    return out;
  }
  function getAxisAngle(out_axis, q) {
    var rad = Math.acos(q[3]) * 2;
    var s = Math.sin(rad / 2);
    if (s > EPSILON) {
      out_axis[0] = q[0] / s;
      out_axis[1] = q[1] / s;
      out_axis[2] = q[2] / s;
    } else {
      out_axis[0] = 1;
      out_axis[1] = 0;
      out_axis[2] = 0;
    }
    return rad;
  }
  function getAngle(a, b) {
    var dotproduct = dot3(a, b);
    return Math.acos(2 * dotproduct * dotproduct - 1);
  }
  function multiply3(out, a, b) {
    var ax = a[0], ay = a[1], az = a[2], aw = a[3];
    var bx = b[0], by = b[1], bz = b[2], bw = b[3];
    out[0] = ax * bw + aw * bx + ay * bz - az * by;
    out[1] = ay * bw + aw * by + az * bx - ax * bz;
    out[2] = az * bw + aw * bz + ax * by - ay * bx;
    out[3] = aw * bw - ax * bx - ay * by - az * bz;
    return out;
  }
  function rotateX3(out, a, rad) {
    rad *= 0.5;
    var ax = a[0], ay = a[1], az = a[2], aw = a[3];
    var bx = Math.sin(rad), bw = Math.cos(rad);
    out[0] = ax * bw + aw * bx;
    out[1] = ay * bw + az * bx;
    out[2] = az * bw - ay * bx;
    out[3] = aw * bw - ax * bx;
    return out;
  }
  function rotateY3(out, a, rad) {
    rad *= 0.5;
    var ax = a[0], ay = a[1], az = a[2], aw = a[3];
    var by = Math.sin(rad), bw = Math.cos(rad);
    out[0] = ax * bw - az * by;
    out[1] = ay * bw + aw * by;
    out[2] = az * bw + ax * by;
    out[3] = aw * bw - ay * by;
    return out;
  }
  function rotateZ3(out, a, rad) {
    rad *= 0.5;
    var ax = a[0], ay = a[1], az = a[2], aw = a[3];
    var bz = Math.sin(rad), bw = Math.cos(rad);
    out[0] = ax * bw + ay * bz;
    out[1] = ay * bw - ax * bz;
    out[2] = az * bw + aw * bz;
    out[3] = aw * bw - az * bz;
    return out;
  }
  function calculateW(out, a) {
    var x = a[0], y = a[1], z = a[2];
    out[0] = x;
    out[1] = y;
    out[2] = z;
    out[3] = Math.sqrt(Math.abs(1 - x * x - y * y - z * z));
    return out;
  }
  function exp(out, a) {
    var x = a[0], y = a[1], z = a[2], w = a[3];
    var r = Math.sqrt(x * x + y * y + z * z);
    var et = Math.exp(w);
    var s = r > 0 ? et * Math.sin(r) / r : 0;
    out[0] = x * s;
    out[1] = y * s;
    out[2] = z * s;
    out[3] = et * Math.cos(r);
    return out;
  }
  function ln(out, a) {
    var x = a[0], y = a[1], z = a[2], w = a[3];
    var r = Math.sqrt(x * x + y * y + z * z);
    var t = r > 0 ? Math.atan2(r, w) / r : 0;
    out[0] = x * t;
    out[1] = y * t;
    out[2] = z * t;
    out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);
    return out;
  }
  function pow(out, a, b) {
    ln(out, a);
    scale4(out, out, b);
    exp(out, out);
    return out;
  }
  function slerp(out, a, b, t) {
    var ax = a[0], ay = a[1], az = a[2], aw = a[3];
    var bx = b[0], by = b[1], bz = b[2], bw = b[3];
    var omega, cosom, sinom, scale0, scale1;
    cosom = ax * bx + ay * by + az * bz + aw * bw;
    if (cosom < 0) {
      cosom = -cosom;
      bx = -bx;
      by = -by;
      bz = -bz;
      bw = -bw;
    }
    if (1 - cosom > EPSILON) {
      omega = Math.acos(cosom);
      sinom = Math.sin(omega);
      scale0 = Math.sin((1 - t) * omega) / sinom;
      scale1 = Math.sin(t * omega) / sinom;
    } else {
      scale0 = 1 - t;
      scale1 = t;
    }
    out[0] = scale0 * ax + scale1 * bx;
    out[1] = scale0 * ay + scale1 * by;
    out[2] = scale0 * az + scale1 * bz;
    out[3] = scale0 * aw + scale1 * bw;
    return out;
  }
  function random2(out) {
    var u1 = RANDOM();
    var u2 = RANDOM();
    var u3 = RANDOM();
    var sqrt1MinusU1 = Math.sqrt(1 - u1);
    var sqrtU1 = Math.sqrt(u1);
    out[0] = sqrt1MinusU1 * Math.sin(2 * Math.PI * u2);
    out[1] = sqrt1MinusU1 * Math.cos(2 * Math.PI * u2);
    out[2] = sqrtU1 * Math.sin(2 * Math.PI * u3);
    out[3] = sqrtU1 * Math.cos(2 * Math.PI * u3);
    return out;
  }
  function invert2(out, a) {
    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];
    var dot5 = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;
    var invDot = dot5 ? 1 / dot5 : 0;
    out[0] = -a0 * invDot;
    out[1] = -a1 * invDot;
    out[2] = -a2 * invDot;
    out[3] = a3 * invDot;
    return out;
  }
  function conjugate(out, a) {
    out[0] = -a[0];
    out[1] = -a[1];
    out[2] = -a[2];
    out[3] = a[3];
    return out;
  }
  function fromMat3(out, m) {
    var fTrace = m[0] + m[4] + m[8];
    var fRoot;
    if (fTrace > 0) {
      fRoot = Math.sqrt(fTrace + 1);
      out[3] = 0.5 * fRoot;
      fRoot = 0.5 / fRoot;
      out[0] = (m[5] - m[7]) * fRoot;
      out[1] = (m[6] - m[2]) * fRoot;
      out[2] = (m[1] - m[3]) * fRoot;
    } else {
      var i = 0;
      if (m[4] > m[0])
        i = 1;
      if (m[8] > m[i * 3 + i])
        i = 2;
      var j = (i + 1) % 3;
      var k = (i + 2) % 3;
      fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1);
      out[i] = 0.5 * fRoot;
      fRoot = 0.5 / fRoot;
      out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;
      out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;
      out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;
    }
    return out;
  }
  function fromEuler(out, x, y, z) {
    var halfToRad = 0.5 * Math.PI / 180;
    x *= halfToRad;
    y *= halfToRad;
    z *= halfToRad;
    var sx = Math.sin(x);
    var cx = Math.cos(x);
    var sy = Math.sin(y);
    var cy = Math.cos(y);
    var sz = Math.sin(z);
    var cz = Math.cos(z);
    out[0] = sx * cy * cz - cx * sy * sz;
    out[1] = cx * sy * cz + sx * cy * sz;
    out[2] = cx * cy * sz - sx * sy * cz;
    out[3] = cx * cy * cz + sx * sy * sz;
    return out;
  }
  function str3(a) {
    return "quat(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ")";
  }
  var clone4 = clone3;
  var fromValues4 = fromValues3;
  var copy4 = copy3;
  var set4 = set3;
  var add4 = add3;
  var mul3 = multiply3;
  var scale4 = scale3;
  var dot3 = dot2;
  var lerp3 = lerp2;
  var length3 = length2;
  var len2 = length3;
  var squaredLength3 = squaredLength2;
  var sqrLen2 = squaredLength3;
  var normalize3 = normalize2;
  var exactEquals4 = exactEquals3;
  var equals4 = equals3;
  var rotationTo = function() {
    var tmpvec3 = create3();
    var xUnitVec3 = fromValues2(1, 0, 0);
    var yUnitVec3 = fromValues2(0, 1, 0);
    return function(out, a, b) {
      var dot5 = dot(a, b);
      if (dot5 < -0.999999) {
        cross(tmpvec3, xUnitVec3, a);
        if (len(tmpvec3) < 1e-6)
          cross(tmpvec3, yUnitVec3, a);
        normalize(tmpvec3, tmpvec3);
        setAxisAngle(out, tmpvec3, Math.PI);
        return out;
      } else if (dot5 > 0.999999) {
        out[0] = 0;
        out[1] = 0;
        out[2] = 0;
        out[3] = 1;
        return out;
      } else {
        cross(tmpvec3, a, b);
        out[0] = tmpvec3[0];
        out[1] = tmpvec3[1];
        out[2] = tmpvec3[2];
        out[3] = 1 + dot5;
        return normalize3(out, out);
      }
    };
  }();
  var sqlerp = function() {
    var temp1 = create5();
    var temp2 = create5();
    return function(out, a, b, c, d, t) {
      slerp(temp1, a, d, t);
      slerp(temp2, b, c, t);
      slerp(out, temp1, temp2, 2 * t * (1 - t));
      return out;
    };
  }();
  var setAxes = function() {
    var matr = create();
    return function(out, view, right, up) {
      matr[0] = right[0];
      matr[3] = right[1];
      matr[6] = right[2];
      matr[1] = up[0];
      matr[4] = up[1];
      matr[7] = up[2];
      matr[2] = -view[0];
      matr[5] = -view[1];
      matr[8] = -view[2];
      return normalize3(out, fromMat3(out, matr));
    };
  }();

  // node_modules/gl-matrix/esm/quat2.js
  var quat2_exports = {};
  __export(quat2_exports, {
    add: () => add5,
    clone: () => clone5,
    conjugate: () => conjugate2,
    copy: () => copy5,
    create: () => create6,
    dot: () => dot4,
    equals: () => equals5,
    exactEquals: () => exactEquals5,
    fromMat4: () => fromMat4,
    fromRotation: () => fromRotation2,
    fromRotationTranslation: () => fromRotationTranslation2,
    fromRotationTranslationValues: () => fromRotationTranslationValues,
    fromTranslation: () => fromTranslation2,
    fromValues: () => fromValues5,
    getDual: () => getDual,
    getReal: () => getReal,
    getTranslation: () => getTranslation2,
    identity: () => identity3,
    invert: () => invert3,
    len: () => len3,
    length: () => length4,
    lerp: () => lerp4,
    mul: () => mul4,
    multiply: () => multiply4,
    normalize: () => normalize4,
    rotateAroundAxis: () => rotateAroundAxis,
    rotateByQuatAppend: () => rotateByQuatAppend,
    rotateByQuatPrepend: () => rotateByQuatPrepend,
    rotateX: () => rotateX4,
    rotateY: () => rotateY4,
    rotateZ: () => rotateZ4,
    scale: () => scale5,
    set: () => set5,
    setDual: () => setDual,
    setReal: () => setReal,
    sqrLen: () => sqrLen3,
    squaredLength: () => squaredLength4,
    str: () => str4,
    translate: () => translate2
  });
  function create6() {
    var dq = new ARRAY_TYPE(8);
    if (ARRAY_TYPE != Float32Array) {
      dq[0] = 0;
      dq[1] = 0;
      dq[2] = 0;
      dq[4] = 0;
      dq[5] = 0;
      dq[6] = 0;
      dq[7] = 0;
    }
    dq[3] = 1;
    return dq;
  }
  function clone5(a) {
    var dq = new ARRAY_TYPE(8);
    dq[0] = a[0];
    dq[1] = a[1];
    dq[2] = a[2];
    dq[3] = a[3];
    dq[4] = a[4];
    dq[5] = a[5];
    dq[6] = a[6];
    dq[7] = a[7];
    return dq;
  }
  function fromValues5(x1, y1, z1, w1, x2, y2, z2, w2) {
    var dq = new ARRAY_TYPE(8);
    dq[0] = x1;
    dq[1] = y1;
    dq[2] = z1;
    dq[3] = w1;
    dq[4] = x2;
    dq[5] = y2;
    dq[6] = z2;
    dq[7] = w2;
    return dq;
  }
  function fromRotationTranslationValues(x1, y1, z1, w1, x2, y2, z2) {
    var dq = new ARRAY_TYPE(8);
    dq[0] = x1;
    dq[1] = y1;
    dq[2] = z1;
    dq[3] = w1;
    var ax = x2 * 0.5, ay = y2 * 0.5, az = z2 * 0.5;
    dq[4] = ax * w1 + ay * z1 - az * y1;
    dq[5] = ay * w1 + az * x1 - ax * z1;
    dq[6] = az * w1 + ax * y1 - ay * x1;
    dq[7] = -ax * x1 - ay * y1 - az * z1;
    return dq;
  }
  function fromRotationTranslation2(out, q, t) {
    var ax = t[0] * 0.5, ay = t[1] * 0.5, az = t[2] * 0.5, bx = q[0], by = q[1], bz = q[2], bw = q[3];
    out[0] = bx;
    out[1] = by;
    out[2] = bz;
    out[3] = bw;
    out[4] = ax * bw + ay * bz - az * by;
    out[5] = ay * bw + az * bx - ax * bz;
    out[6] = az * bw + ax * by - ay * bx;
    out[7] = -ax * bx - ay * by - az * bz;
    return out;
  }
  function fromTranslation2(out, t) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
    out[3] = 1;
    out[4] = t[0] * 0.5;
    out[5] = t[1] * 0.5;
    out[6] = t[2] * 0.5;
    out[7] = 0;
    return out;
  }
  function fromRotation2(out, q) {
    out[0] = q[0];
    out[1] = q[1];
    out[2] = q[2];
    out[3] = q[3];
    out[4] = 0;
    out[5] = 0;
    out[6] = 0;
    out[7] = 0;
    return out;
  }
  function fromMat4(out, a) {
    var outer = create5();
    getRotation(outer, a);
    var t = new ARRAY_TYPE(3);
    getTranslation(t, a);
    fromRotationTranslation2(out, outer, t);
    return out;
  }
  function copy5(out, a) {
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    out[3] = a[3];
    out[4] = a[4];
    out[5] = a[5];
    out[6] = a[6];
    out[7] = a[7];
    return out;
  }
  function identity3(out) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
    out[3] = 1;
    out[4] = 0;
    out[5] = 0;
    out[6] = 0;
    out[7] = 0;
    return out;
  }
  function set5(out, x1, y1, z1, w1, x2, y2, z2, w2) {
    out[0] = x1;
    out[1] = y1;
    out[2] = z1;
    out[3] = w1;
    out[4] = x2;
    out[5] = y2;
    out[6] = z2;
    out[7] = w2;
    return out;
  }
  var getReal = copy4;
  function getDual(out, a) {
    out[0] = a[4];
    out[1] = a[5];
    out[2] = a[6];
    out[3] = a[7];
    return out;
  }
  var setReal = copy4;
  function setDual(out, q) {
    out[4] = q[0];
    out[5] = q[1];
    out[6] = q[2];
    out[7] = q[3];
    return out;
  }
  function getTranslation2(out, a) {
    var ax = a[4], ay = a[5], az = a[6], aw = a[7], bx = -a[0], by = -a[1], bz = -a[2], bw = a[3];
    out[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;
    out[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;
    out[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;
    return out;
  }
  function translate2(out, a, v) {
    var ax1 = a[0], ay1 = a[1], az1 = a[2], aw1 = a[3], bx1 = v[0] * 0.5, by1 = v[1] * 0.5, bz1 = v[2] * 0.5, ax2 = a[4], ay2 = a[5], az2 = a[6], aw2 = a[7];
    out[0] = ax1;
    out[1] = ay1;
    out[2] = az1;
    out[3] = aw1;
    out[4] = aw1 * bx1 + ay1 * bz1 - az1 * by1 + ax2;
    out[5] = aw1 * by1 + az1 * bx1 - ax1 * bz1 + ay2;
    out[6] = aw1 * bz1 + ax1 * by1 - ay1 * bx1 + az2;
    out[7] = -ax1 * bx1 - ay1 * by1 - az1 * bz1 + aw2;
    return out;
  }
  function rotateX4(out, a, rad) {
    var bx = -a[0], by = -a[1], bz = -a[2], bw = a[3], ax = a[4], ay = a[5], az = a[6], aw = a[7], ax1 = ax * bw + aw * bx + ay * bz - az * by, ay1 = ay * bw + aw * by + az * bx - ax * bz, az1 = az * bw + aw * bz + ax * by - ay * bx, aw1 = aw * bw - ax * bx - ay * by - az * bz;
    rotateX3(out, a, rad);
    bx = out[0];
    by = out[1];
    bz = out[2];
    bw = out[3];
    out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;
    out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;
    out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;
    out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;
    return out;
  }
  function rotateY4(out, a, rad) {
    var bx = -a[0], by = -a[1], bz = -a[2], bw = a[3], ax = a[4], ay = a[5], az = a[6], aw = a[7], ax1 = ax * bw + aw * bx + ay * bz - az * by, ay1 = ay * bw + aw * by + az * bx - ax * bz, az1 = az * bw + aw * bz + ax * by - ay * bx, aw1 = aw * bw - ax * bx - ay * by - az * bz;
    rotateY3(out, a, rad);
    bx = out[0];
    by = out[1];
    bz = out[2];
    bw = out[3];
    out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;
    out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;
    out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;
    out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;
    return out;
  }
  function rotateZ4(out, a, rad) {
    var bx = -a[0], by = -a[1], bz = -a[2], bw = a[3], ax = a[4], ay = a[5], az = a[6], aw = a[7], ax1 = ax * bw + aw * bx + ay * bz - az * by, ay1 = ay * bw + aw * by + az * bx - ax * bz, az1 = az * bw + aw * bz + ax * by - ay * bx, aw1 = aw * bw - ax * bx - ay * by - az * bz;
    rotateZ3(out, a, rad);
    bx = out[0];
    by = out[1];
    bz = out[2];
    bw = out[3];
    out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;
    out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;
    out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;
    out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;
    return out;
  }
  function rotateByQuatAppend(out, a, q) {
    var qx = q[0], qy = q[1], qz = q[2], qw = q[3], ax = a[0], ay = a[1], az = a[2], aw = a[3];
    out[0] = ax * qw + aw * qx + ay * qz - az * qy;
    out[1] = ay * qw + aw * qy + az * qx - ax * qz;
    out[2] = az * qw + aw * qz + ax * qy - ay * qx;
    out[3] = aw * qw - ax * qx - ay * qy - az * qz;
    ax = a[4];
    ay = a[5];
    az = a[6];
    aw = a[7];
    out[4] = ax * qw + aw * qx + ay * qz - az * qy;
    out[5] = ay * qw + aw * qy + az * qx - ax * qz;
    out[6] = az * qw + aw * qz + ax * qy - ay * qx;
    out[7] = aw * qw - ax * qx - ay * qy - az * qz;
    return out;
  }
  function rotateByQuatPrepend(out, q, a) {
    var qx = q[0], qy = q[1], qz = q[2], qw = q[3], bx = a[0], by = a[1], bz = a[2], bw = a[3];
    out[0] = qx * bw + qw * bx + qy * bz - qz * by;
    out[1] = qy * bw + qw * by + qz * bx - qx * bz;
    out[2] = qz * bw + qw * bz + qx * by - qy * bx;
    out[3] = qw * bw - qx * bx - qy * by - qz * bz;
    bx = a[4];
    by = a[5];
    bz = a[6];
    bw = a[7];
    out[4] = qx * bw + qw * bx + qy * bz - qz * by;
    out[5] = qy * bw + qw * by + qz * bx - qx * bz;
    out[6] = qz * bw + qw * bz + qx * by - qy * bx;
    out[7] = qw * bw - qx * bx - qy * by - qz * bz;
    return out;
  }
  function rotateAroundAxis(out, a, axis, rad) {
    if (Math.abs(rad) < EPSILON) {
      return copy5(out, a);
    }
    var axisLength = Math.hypot(axis[0], axis[1], axis[2]);
    rad = rad * 0.5;
    var s = Math.sin(rad);
    var bx = s * axis[0] / axisLength;
    var by = s * axis[1] / axisLength;
    var bz = s * axis[2] / axisLength;
    var bw = Math.cos(rad);
    var ax1 = a[0], ay1 = a[1], az1 = a[2], aw1 = a[3];
    out[0] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;
    out[1] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;
    out[2] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;
    out[3] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;
    var ax = a[4], ay = a[5], az = a[6], aw = a[7];
    out[4] = ax * bw + aw * bx + ay * bz - az * by;
    out[5] = ay * bw + aw * by + az * bx - ax * bz;
    out[6] = az * bw + aw * bz + ax * by - ay * bx;
    out[7] = aw * bw - ax * bx - ay * by - az * bz;
    return out;
  }
  function add5(out, a, b) {
    out[0] = a[0] + b[0];
    out[1] = a[1] + b[1];
    out[2] = a[2] + b[2];
    out[3] = a[3] + b[3];
    out[4] = a[4] + b[4];
    out[5] = a[5] + b[5];
    out[6] = a[6] + b[6];
    out[7] = a[7] + b[7];
    return out;
  }
  function multiply4(out, a, b) {
    var ax0 = a[0], ay0 = a[1], az0 = a[2], aw0 = a[3], bx1 = b[4], by1 = b[5], bz1 = b[6], bw1 = b[7], ax1 = a[4], ay1 = a[5], az1 = a[6], aw1 = a[7], bx0 = b[0], by0 = b[1], bz0 = b[2], bw0 = b[3];
    out[0] = ax0 * bw0 + aw0 * bx0 + ay0 * bz0 - az0 * by0;
    out[1] = ay0 * bw0 + aw0 * by0 + az0 * bx0 - ax0 * bz0;
    out[2] = az0 * bw0 + aw0 * bz0 + ax0 * by0 - ay0 * bx0;
    out[3] = aw0 * bw0 - ax0 * bx0 - ay0 * by0 - az0 * bz0;
    out[4] = ax0 * bw1 + aw0 * bx1 + ay0 * bz1 - az0 * by1 + ax1 * bw0 + aw1 * bx0 + ay1 * bz0 - az1 * by0;
    out[5] = ay0 * bw1 + aw0 * by1 + az0 * bx1 - ax0 * bz1 + ay1 * bw0 + aw1 * by0 + az1 * bx0 - ax1 * bz0;
    out[6] = az0 * bw1 + aw0 * bz1 + ax0 * by1 - ay0 * bx1 + az1 * bw0 + aw1 * bz0 + ax1 * by0 - ay1 * bx0;
    out[7] = aw0 * bw1 - ax0 * bx1 - ay0 * by1 - az0 * bz1 + aw1 * bw0 - ax1 * bx0 - ay1 * by0 - az1 * bz0;
    return out;
  }
  var mul4 = multiply4;
  function scale5(out, a, b) {
    out[0] = a[0] * b;
    out[1] = a[1] * b;
    out[2] = a[2] * b;
    out[3] = a[3] * b;
    out[4] = a[4] * b;
    out[5] = a[5] * b;
    out[6] = a[6] * b;
    out[7] = a[7] * b;
    return out;
  }
  var dot4 = dot3;
  function lerp4(out, a, b, t) {
    var mt = 1 - t;
    if (dot4(a, b) < 0)
      t = -t;
    out[0] = a[0] * mt + b[0] * t;
    out[1] = a[1] * mt + b[1] * t;
    out[2] = a[2] * mt + b[2] * t;
    out[3] = a[3] * mt + b[3] * t;
    out[4] = a[4] * mt + b[4] * t;
    out[5] = a[5] * mt + b[5] * t;
    out[6] = a[6] * mt + b[6] * t;
    out[7] = a[7] * mt + b[7] * t;
    return out;
  }
  function invert3(out, a) {
    var sqlen = squaredLength4(a);
    out[0] = -a[0] / sqlen;
    out[1] = -a[1] / sqlen;
    out[2] = -a[2] / sqlen;
    out[3] = a[3] / sqlen;
    out[4] = -a[4] / sqlen;
    out[5] = -a[5] / sqlen;
    out[6] = -a[6] / sqlen;
    out[7] = a[7] / sqlen;
    return out;
  }
  function conjugate2(out, a) {
    out[0] = -a[0];
    out[1] = -a[1];
    out[2] = -a[2];
    out[3] = a[3];
    out[4] = -a[4];
    out[5] = -a[5];
    out[6] = -a[6];
    out[7] = a[7];
    return out;
  }
  var length4 = length3;
  var len3 = length4;
  var squaredLength4 = squaredLength3;
  var sqrLen3 = squaredLength4;
  function normalize4(out, a) {
    var magnitude = squaredLength4(a);
    if (magnitude > 0) {
      magnitude = Math.sqrt(magnitude);
      var a0 = a[0] / magnitude;
      var a1 = a[1] / magnitude;
      var a2 = a[2] / magnitude;
      var a3 = a[3] / magnitude;
      var b0 = a[4];
      var b1 = a[5];
      var b2 = a[6];
      var b3 = a[7];
      var a_dot_b = a0 * b0 + a1 * b1 + a2 * b2 + a3 * b3;
      out[0] = a0;
      out[1] = a1;
      out[2] = a2;
      out[3] = a3;
      out[4] = (b0 - a0 * a_dot_b) / magnitude;
      out[5] = (b1 - a1 * a_dot_b) / magnitude;
      out[6] = (b2 - a2 * a_dot_b) / magnitude;
      out[7] = (b3 - a3 * a_dot_b) / magnitude;
    }
    return out;
  }
  function str4(a) {
    return "quat2(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ", " + a[4] + ", " + a[5] + ", " + a[6] + ", " + a[7] + ")";
  }
  function exactEquals5(a, b) {
    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7];
  }
  function equals5(a, b) {
    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3], a4 = a[4], a5 = a[5], a6 = a[6], a7 = a[7];
    var b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3], b4 = b[4], b5 = b[5], b6 = b[6], b7 = b[7];
    return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= EPSILON * Math.max(1, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= EPSILON * Math.max(1, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= EPSILON * Math.max(1, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= EPSILON * Math.max(1, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= EPSILON * Math.max(1, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= EPSILON * Math.max(1, Math.abs(a7), Math.abs(b7));
  }

  // node_modules/@wonderlandengine/components/dist/hit-test-location.js
  var __decorate2 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var HitTestLocation = class extends Component3 {
    tempScaling = new Float32Array(3);
    visible = false;
    xrHitTestSource = null;
    /** Reference space for creating the hit test when the session starts */
    xrReferenceSpace = null;
    /**
     * For maintaining backwards compatibility: Whether to scale the object to 0 and back.
     * @deprecated Use onHitLost and onHitFound instead.
     */
    scaleObject = true;
    /** Emits an event when the hit test switches from visible to invisible */
    onHitLost = new Emitter();
    /** Emits an event when the hit test switches from invisible to visible */
    onHitFound = new Emitter();
    onSessionStartCallback = null;
    onSessionEndCallback = null;
    start() {
      this.onSessionStartCallback = this.onXRSessionStart.bind(this);
      this.onSessionEndCallback = this.onXRSessionEnd.bind(this);
      if (this.scaleObject) {
        this.tempScaling.set(this.object.scalingLocal);
        this.object.scale([0, 0, 0]);
        this.onHitLost.add(() => {
          this.tempScaling.set(this.object.scalingLocal);
          this.object.scale([0, 0, 0]);
        });
        this.onHitFound.add(() => {
          this.object.scalingLocal.set(this.tempScaling);
          this.object.setDirty();
        });
      }
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this.onSessionStartCallback);
      this.engine.onXRSessionEnd.add(this.onSessionEndCallback);
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this.onSessionStartCallback);
      this.engine.onXRSessionEnd.remove(this.onSessionEndCallback);
    }
    update() {
      const wasVisible = this.visible;
      if (this.xrHitTestSource) {
        const frame = this.engine.xrFrame;
        if (!frame)
          return;
        let hitTestResults = frame.getHitTestResults(this.xrHitTestSource);
        if (hitTestResults.length > 0) {
          let pose = hitTestResults[0].getPose(this.engine.xr.currentReferenceSpace);
          this.visible = !!pose;
          if (pose) {
            setXRRigidTransformLocal(this.object, pose.transform);
          }
        } else {
          this.visible = false;
        }
      }
      if (this.visible != wasVisible) {
        (this.visible ? this.onHitFound : this.onHitLost).notify(this);
      }
    }
    getHitTestResults(frame = this.engine.xr?.frame ?? null) {
      if (!frame)
        return [];
      if (!this.xrHitTestSource)
        return [];
      return frame.getHitTestResults(this.xrHitTestSource);
    }
    onXRSessionStart(session) {
      if (session.requestHitTestSource === void 0) {
        console.error("hit-test-location: hit test feature not available. Deactivating component.");
        this.active = false;
        return;
      }
      session.requestHitTestSource({
        space: this.xrReferenceSpace ?? this.engine.xr.referenceSpaceForType("viewer")
      }).then((hitTestSource) => {
        this.xrHitTestSource = hitTestSource;
      }).catch(console.error);
    }
    onXRSessionEnd() {
      if (!this.xrHitTestSource)
        return;
      this.xrHitTestSource.cancel();
      this.xrHitTestSource = null;
    }
  };
  __publicField(HitTestLocation, "TypeName", "hit-test-location");
  __decorate2([
    property.bool(true)
  ], HitTestLocation.prototype, "scaleObject", void 0);

  // node_modules/@wonderlandengine/components/dist/cursor.js
  var __decorate3 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var tempVec2 = new Float32Array(3);
  var ZERO = [0, 0, 0];
  var CursorTargetEmitters = class {
    /** Emitter for events when the target is hovered */
    onHover = new Emitter();
    /** Emitter for events when the target is unhovered */
    onUnhover = new Emitter();
    /** Emitter for events when the target is clicked */
    onClick = new Emitter();
    /** Emitter for events when the cursor moves on the target */
    onMove = new Emitter();
    /** Emitter for events when the user pressed the select button on the target */
    onDown = new Emitter();
    /** Emitter for events when the user unpressed the select button on the target */
    onUp = new Emitter();
  };
  var Cursor = class extends Component3 {
    static onRegister(engine) {
      engine.registerComponent(HitTestLocation);
    }
    _collisionMask = 0;
    _onDeactivateCallbacks = [];
    _input = null;
    _origin = new Float32Array(3);
    _cursorObjScale = new Float32Array(3);
    _direction = new Float32Array(3);
    _projectionMatrix = new Float32Array(16);
    _viewComponent = null;
    _isDown = false;
    _lastIsDown = false;
    _arTouchDown = false;
    _lastPointerPos = new Float32Array(2);
    _lastCursorPosOnTarget = new Float32Array(3);
    _hitTestLocation = null;
    _hitTestObject = null;
    _onSessionStartCallback = null;
    /**
     * Whether the cursor (and cursorObject) is visible, i.e. pointing at an object
     * that matches the collision group
     */
    visible = true;
    /** Currently hovered object */
    hoveringObject = null;
    /** CursorTarget component of the currently hovered object */
    hoveringObjectTarget = null;
    /** Whether the cursor is hovering reality via hit-test */
    hoveringReality = false;
    /**
     * Global target lets you receive global cursor events on any object.
     */
    globalTarget = new CursorTargetEmitters();
    /**
     * Hit test target lets you receive cursor events for "reality", if
     * `useWebXRHitTest` is set to `true`.
     *
     * @example
     * ```js
     * cursor.hitTestTarget.onClick.add((hit, cursor) => {
     *     // User clicked on reality
     * });
     * ```
     */
    hitTestTarget = new CursorTargetEmitters();
    /** World position of the cursor */
    cursorPos = new Float32Array(3);
    /** Collision group for the ray cast. Only objects in this group will be affected by this cursor. */
    collisionGroup = 1;
    /** (optional) Object that visualizes the cursor's ray. */
    cursorRayObject = null;
    /** Axis along which to scale the `cursorRayObject`. */
    cursorRayScalingAxis = 2;
    /** (optional) Object that visualizes the cursor's hit location. */
    cursorObject = null;
    /** Handedness for VR cursors to accept trigger events only from respective controller. */
    handedness = 0;
    /** Mode for raycasting, whether to use PhysX or simple collision components */
    rayCastMode = 0;
    /** Maximum distance for the cursor's ray cast. */
    maxDistance = 100;
    /** Whether to set the CSS style of the mouse cursor on desktop */
    styleCursor = true;
    /**
     * Use WebXR hit-test if available.
     *
     * Attaches a hit-test-location component to the cursorObject, which will be used
     * by the cursor to send events to the hitTestTarget with HitTestResult.
     */
    useWebXRHitTest = false;
    _onViewportResize = () => {
      if (!this._viewComponent)
        return;
      mat4_exports.invert(this._projectionMatrix, this._viewComponent.projectionMatrix);
    };
    start() {
      this._collisionMask = 1 << this.collisionGroup;
      if (this.handedness == 0) {
        const inputComp = this.object.getComponent("input");
        if (!inputComp) {
          console.warn("cursor component on object", this.object.name, 'was configured with handedness "input component", but object has no input component.');
        } else {
          this.handedness = inputComp.handedness || "none";
          this._input = inputComp;
        }
      } else {
        this.handedness = ["left", "right", "none"][this.handedness - 1];
      }
      this._viewComponent = this.object.getComponent(ViewComponent);
      if (this.useWebXRHitTest) {
        this._hitTestObject = this.engine.scene.addObject(this.object);
        this._hitTestLocation = this._hitTestObject.addComponent(HitTestLocation, {
          scaleObject: false
        }) ?? null;
      }
      this._onSessionStartCallback = this.setupVREvents.bind(this);
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this._onSessionStartCallback);
      this.engine.onResize.add(this._onViewportResize);
      this._setCursorVisibility(true);
      if (this._viewComponent != null) {
        const canvas2 = this.engine.canvas;
        const onClick = this.onClick.bind(this);
        const onPointerMove = this.onPointerMove.bind(this);
        const onPointerDown = this.onPointerDown.bind(this);
        const onPointerUp = this.onPointerUp.bind(this);
        canvas2.addEventListener("click", onClick);
        canvas2.addEventListener("pointermove", onPointerMove);
        canvas2.addEventListener("pointerdown", onPointerDown);
        canvas2.addEventListener("pointerup", onPointerUp);
        this._onDeactivateCallbacks.push(() => {
          canvas2.removeEventListener("click", onClick);
          canvas2.removeEventListener("pointermove", onPointerMove);
          canvas2.removeEventListener("pointerdown", onPointerDown);
          canvas2.removeEventListener("pointerup", onPointerUp);
        });
      }
      this._onViewportResize();
    }
    _setCursorRayTransform(hitPosition) {
      if (!this.cursorRayObject)
        return;
      const dist2 = vec3_exports.dist(this._origin, hitPosition);
      this.cursorRayObject.setPositionLocal([0, 0, -dist2 / 2]);
      if (this.cursorRayScalingAxis != 4) {
        tempVec2.fill(1);
        tempVec2[this.cursorRayScalingAxis] = dist2 / 2;
        this.cursorRayObject.setScalingLocal(tempVec2);
      }
    }
    _setCursorVisibility(visible) {
      if (this.visible == visible)
        return;
      this.visible = visible;
      if (!this.cursorObject)
        return;
      if (visible) {
        this.cursorObject.setScalingWorld(this._cursorObjScale);
      } else {
        this.cursorObject.getScalingWorld(this._cursorObjScale);
        this.cursorObject.scaleLocal([0, 0, 0]);
      }
    }
    update() {
      if (this.engine.xr && this._arTouchDown && this._input && this.engine.xr.session.inputSources[0].handedness === "none" && this.engine.xr.session.inputSources[0].gamepad) {
        const p = this.engine.xr.session.inputSources[0].gamepad.axes;
        this._direction[0] = p[0];
        this._direction[1] = -p[1];
        this._direction[2] = -1;
        this.applyTransformAndProjectDirection();
      } else if (this.engine.xr && this._input && this._input.xrInputSource) {
        this._direction[0] = 0;
        this._direction[1] = 0;
        this._direction[2] = -1;
        this.applyTransformToDirection();
      } else if (this._viewComponent) {
        this.updateDirection();
      }
      this.rayCast(null, this.engine.xr?.frame);
      if (this.cursorObject) {
        if (this.hoveringObject && (this.cursorPos[0] != 0 || this.cursorPos[1] != 0 || this.cursorPos[2] != 0)) {
          this._setCursorVisibility(true);
          this.cursorObject.setPositionWorld(this.cursorPos);
          this._setCursorRayTransform(this.cursorPos);
        } else {
          this._setCursorVisibility(false);
        }
      }
    }
    /* Returns the hovered cursor target, if available */
    notify(event, originalEvent) {
      const target = this.hoveringObject;
      if (target) {
        const cursorTarget = this.hoveringObjectTarget;
        if (cursorTarget)
          cursorTarget[event].notify(target, this, originalEvent ?? void 0);
        this.globalTarget[event].notify(target, this, originalEvent ?? void 0);
      }
    }
    hoverBehaviour(rayHit, hitTestResult, doClick, originalEvent) {
      const hit = !this.hoveringReality && rayHit.hitCount > 0 ? rayHit.objects[0] : null;
      if (hit) {
        if (!this.hoveringObject || !this.hoveringObject.equals(hit)) {
          if (this.hoveringObject) {
            this.notify("onUnhover", originalEvent);
          }
          this.hoveringObject = hit;
          this.hoveringObjectTarget = this.hoveringObject.getComponent(CursorTarget);
          if (this.styleCursor)
            this.engine.canvas.style.cursor = "pointer";
          this.notify("onHover", originalEvent);
        }
      } else if (this.hoveringObject) {
        this.notify("onUnhover", originalEvent);
        this.hoveringObject = null;
        this.hoveringObjectTarget = null;
        if (this.styleCursor)
          this.engine.canvas.style.cursor = "default";
      }
      if (this.hoveringObject) {
        if (this._isDown !== this._lastIsDown) {
          this.notify(this._isDown ? "onDown" : "onUp", originalEvent);
        }
        if (doClick)
          this.notify("onClick", originalEvent);
      } else if (this.hoveringReality) {
        if (this._isDown !== this._lastIsDown) {
          (this._isDown ? this.hitTestTarget.onDown : this.hitTestTarget.onUp).notify(hitTestResult, this, originalEvent ?? void 0);
        }
        if (doClick)
          this.hitTestTarget.onClick.notify(hitTestResult, this, originalEvent ?? void 0);
      }
      if (hit) {
        if (this.hoveringObject) {
          this.hoveringObject.transformPointInverseWorld(tempVec2, this.cursorPos);
        } else {
          tempVec2.set(this.cursorPos);
        }
        if (!vec3_exports.equals(this._lastCursorPosOnTarget, tempVec2)) {
          this.notify("onMove", originalEvent);
          this._lastCursorPosOnTarget.set(tempVec2);
        }
      } else if (this.hoveringReality) {
        if (!vec3_exports.equals(this._lastCursorPosOnTarget, this.cursorPos)) {
          this.hitTestTarget.onMove.notify(hitTestResult, this, originalEvent ?? void 0);
          this._lastCursorPosOnTarget.set(this.cursorPos);
        }
      } else {
        this._lastCursorPosOnTarget.set(this.cursorPos);
      }
      this._lastIsDown = this._isDown;
    }
    /**
     * Setup event listeners on session object
     * @param s WebXR session
     *
     * Sets up 'select' and 'end' events.
     */
    setupVREvents(s) {
      if (!s)
        console.error("setupVREvents called without a valid session");
      if (!this.active)
        return;
      const onSelect = this.onSelect.bind(this);
      s.addEventListener("select", onSelect);
      const onSelectStart = this.onSelectStart.bind(this);
      s.addEventListener("selectstart", onSelectStart);
      const onSelectEnd = this.onSelectEnd.bind(this);
      s.addEventListener("selectend", onSelectEnd);
      this._onDeactivateCallbacks.push(() => {
        if (!this.engine.xr)
          return;
        s.removeEventListener("select", onSelect);
        s.removeEventListener("selectstart", onSelectStart);
        s.removeEventListener("selectend", onSelectEnd);
      });
      this._onViewportResize();
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this._onSessionStartCallback);
      this.engine.onResize.remove(this._onViewportResize);
      this._setCursorVisibility(false);
      if (this.hoveringObject)
        this.notify("onUnhover", null);
      if (this.cursorRayObject)
        this.cursorRayObject.setScalingLocal(ZERO);
      for (const f of this._onDeactivateCallbacks)
        f();
      this._onDeactivateCallbacks.length = 0;
    }
    onDestroy() {
      this._hitTestObject?.destroy();
    }
    /** 'select' event listener */
    onSelect(e) {
      if (e.inputSource.handedness != this.handedness)
        return;
      this.rayCast(e, e.frame, true);
    }
    /** 'selectstart' event listener */
    onSelectStart(e) {
      this._arTouchDown = true;
      if (e.inputSource.handedness == this.handedness) {
        this._isDown = true;
        this.rayCast(e, e.frame);
      }
    }
    /** 'selectend' event listener */
    onSelectEnd(e) {
      this._arTouchDown = false;
      if (e.inputSource.handedness == this.handedness) {
        this._isDown = false;
        this.rayCast(e, e.frame);
      }
    }
    /** 'pointermove' event listener */
    onPointerMove(e) {
      if (!e.isPrimary)
        return;
      this.updateMousePos(e);
      this.rayCast(e, null);
    }
    /** 'click' event listener */
    onClick(e) {
      this.updateMousePos(e);
      this.rayCast(e, null, true);
    }
    /** 'pointerdown' event listener */
    onPointerDown(e) {
      if (!e.isPrimary || e.button !== 0)
        return;
      this.updateMousePos(e);
      this._isDown = true;
      this.rayCast(e);
    }
    /** 'pointerup' event listener */
    onPointerUp(e) {
      if (!e.isPrimary || e.button !== 0)
        return;
      this.updateMousePos(e);
      this._isDown = false;
      this.rayCast(e);
    }
    /**
     * Update mouse position in non-VR mode and raycast for new position
     * @returns @ref RayHit for new position.
     */
    updateMousePos(e) {
      this._lastPointerPos[0] = e.clientX;
      this._lastPointerPos[1] = e.clientY;
      this.updateDirection();
    }
    updateDirection() {
      const bounds = this.engine.canvas.getBoundingClientRect();
      const left = this._lastPointerPos[0] / bounds.width;
      const top = this._lastPointerPos[1] / bounds.height;
      this._direction[0] = left * 2 - 1;
      this._direction[1] = -top * 2 + 1;
      this._direction[2] = -1;
      this.applyTransformAndProjectDirection();
    }
    applyTransformAndProjectDirection() {
      vec3_exports.transformMat4(this._direction, this._direction, this._projectionMatrix);
      vec3_exports.normalize(this._direction, this._direction);
      this.applyTransformToDirection();
    }
    applyTransformToDirection() {
      this.object.transformVectorWorld(this._direction, this._direction);
      this.object.getPositionWorld(this._origin);
    }
    rayCast(originalEvent, frame = null, doClick = false) {
      const rayHit = this.rayCastMode == 0 ? this.engine.scene.rayCast(this._origin, this._direction, this._collisionMask) : this.engine.physics.rayCast(this._origin, this._direction, this._collisionMask, this.maxDistance);
      let hitResultDistance = Infinity;
      let hitTestResult = null;
      if (this._hitTestLocation?.visible) {
        this._hitTestObject.getPositionWorld(this.cursorPos);
        hitResultDistance = vec3_exports.distance(this.object.getPositionWorld(tempVec2), this.cursorPos);
        hitTestResult = this._hitTestLocation?.getHitTestResults(frame)[0];
      }
      let hoveringReality = false;
      if (rayHit.hitCount > 0) {
        const d = rayHit.distances[0];
        if (hitResultDistance >= d) {
          this.cursorPos.set(rayHit.locations[0]);
        } else {
          hoveringReality = true;
        }
      } else if (hitResultDistance < Infinity) {
      } else {
        this.cursorPos.fill(0);
      }
      if (hoveringReality && !this.hoveringReality) {
        this.hitTestTarget.onHover.notify(hitTestResult, this);
      } else if (!hoveringReality && this.hoveringReality) {
        this.hitTestTarget.onUnhover.notify(hitTestResult, this);
      }
      this.hoveringReality = hoveringReality;
      this.hoverBehaviour(rayHit, hitTestResult, doClick, originalEvent);
      return rayHit;
    }
  };
  __publicField(Cursor, "TypeName", "cursor");
  /* Dependencies is deprecated, but we keep it here for compatibility
   * with 1.0.0-rc2 until 1.0.0 is released */
  __publicField(Cursor, "Dependencies", [HitTestLocation]);
  __decorate3([
    property.int(1)
  ], Cursor.prototype, "collisionGroup", void 0);
  __decorate3([
    property.object()
  ], Cursor.prototype, "cursorRayObject", void 0);
  __decorate3([
    property.enum(["x", "y", "z", "none"], "z")
  ], Cursor.prototype, "cursorRayScalingAxis", void 0);
  __decorate3([
    property.object()
  ], Cursor.prototype, "cursorObject", void 0);
  __decorate3([
    property.enum(["input component", "left", "right", "none"], "input component")
  ], Cursor.prototype, "handedness", void 0);
  __decorate3([
    property.enum(["collision", "physx"], "collision")
  ], Cursor.prototype, "rayCastMode", void 0);
  __decorate3([
    property.float(100)
  ], Cursor.prototype, "maxDistance", void 0);
  __decorate3([
    property.bool(true)
  ], Cursor.prototype, "styleCursor", void 0);
  __decorate3([
    property.bool(false)
  ], Cursor.prototype, "useWebXRHitTest", void 0);

  // node_modules/@wonderlandengine/components/dist/debug-object.js
  var __decorate4 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var DebugObject = class extends Component3 {
    /** A second object to print the name of */
    obj = null;
    start() {
      let origin = new Float32Array(3);
      quat2_exports.getTranslation(origin, this.object.transformWorld);
      console.log("Debug object:", this.object.name);
      console.log("Other object:", this.obj?.name);
      console.log("	translation", origin);
      console.log("	transformWorld", this.object.transformWorld);
      console.log("	transformLocal", this.object.transformLocal);
    }
  };
  __publicField(DebugObject, "TypeName", "debug-object");
  __decorate4([
    property.object()
  ], DebugObject.prototype, "obj", void 0);

  // node_modules/@wonderlandengine/components/dist/device-orientation-look.js
  function quatFromEulerYXZ(out, x, y, z) {
    const c1 = Math.cos(x / 2);
    const c2 = Math.cos(y / 2);
    const c3 = Math.cos(z / 2);
    const s1 = Math.sin(x / 2);
    const s2 = Math.sin(y / 2);
    const s3 = Math.sin(z / 2);
    out[0] = s1 * c2 * c3 + c1 * s2 * s3;
    out[1] = c1 * s2 * c3 - s1 * c2 * s3;
    out[2] = c1 * c2 * s3 - s1 * s2 * c3;
    out[3] = c1 * c2 * c3 + s1 * s2 * s3;
  }
  var DeviceOrientationLook = class extends Component3 {
    start() {
      this.rotationX = 0;
      this.rotationY = 0;
      this.lastClientX = -1;
      this.lastClientY = -1;
    }
    init() {
      this.deviceOrientation = [0, 0, 0, 1];
      this.screenOrientation = window.innerHeight > window.innerWidth ? 0 : 90;
      this._origin = [0, 0, 0];
      window.addEventListener("deviceorientation", function(e) {
        let alpha = e.alpha || 0;
        let beta = e.beta || 0;
        let gamma = e.gamma || 0;
        const toRad = Math.PI / 180;
        quatFromEulerYXZ(this.deviceOrientation, beta * toRad, alpha * toRad, -gamma * toRad);
      }.bind(this));
      window.addEventListener("orientationchange", function(e) {
        this.screenOrientation = window.orientation || 0;
      }.bind(this), false);
    }
    update() {
      if (this.engine.xr)
        return;
      this.object.getTranslationLocal(this._origin);
      this.object.resetTransform();
      if (this.screenOrientation != 0) {
        this.object.rotateAxisAngleDeg([0, 0, -1], this.screenOrientation);
      }
      this.object.rotate([-Math.sqrt(0.5), 0, 0, Math.sqrt(0.5)]);
      this.object.rotate(this.deviceOrientation);
      this.object.translate(this._origin);
    }
  };
  __publicField(DeviceOrientationLook, "TypeName", "device-orientation-look");
  __publicField(DeviceOrientationLook, "Properties", {});

  // node_modules/@wonderlandengine/components/dist/finger-cursor.js
  var FingerCursor = class extends Component3 {
    init() {
      this.lastTarget = null;
    }
    start() {
      this.tip = this.object.getComponent("collision");
    }
    update() {
      const overlaps = this.tip.queryOverlaps();
      let overlapFound = null;
      for (let i = 0; i < overlaps.length; ++i) {
        const o = overlaps[i].object;
        const target = o.getComponent("cursor-target");
        if (target) {
          if (!target.equals(this.lastTarget)) {
            target.onHover(o, this);
            target.onClick(o, this);
          }
          overlapFound = target;
          break;
        }
      }
      if (!overlapFound) {
        if (this.lastTarget)
          this.lastTarget.onUnhover(this.lastTarget.object, this);
        this.lastTarget = null;
        return;
      } else {
        this.lastTarget = overlapFound;
      }
    }
  };
  __publicField(FingerCursor, "TypeName", "finger-cursor");
  __publicField(FingerCursor, "Properties", {});

  // node_modules/@wonderlandengine/components/dist/fixed-foveation.js
  var FixedFoveation = class extends Component3 {
    start() {
      this.onSessionStartCallback = this.setFixedFoveation.bind(this);
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this.onSessionStartCallback);
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this.onSessionStartCallback);
    }
    setFixedFoveation() {
      this.engine.xr.baseLayer.fixedFoveation = this.fixedFoveation;
    }
  };
  __publicField(FixedFoveation, "TypeName", "fixed-foveation");
  __publicField(FixedFoveation, "Properties", {
    /** Amount to apply from 0 (none) to 1 (full) */
    fixedFoveation: { type: Type.Float, default: 0.5 }
  });

  // node_modules/@wonderlandengine/components/dist/hand-tracking.js
  var __decorate5 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var ORDERED_JOINTS = [
    "wrist",
    "thumb-metacarpal",
    "thumb-phalanx-proximal",
    "thumb-phalanx-distal",
    "thumb-tip",
    "index-finger-metacarpal",
    "index-finger-phalanx-proximal",
    "index-finger-phalanx-intermediate",
    "index-finger-phalanx-distal",
    "index-finger-tip",
    "middle-finger-metacarpal",
    "middle-finger-phalanx-proximal",
    "middle-finger-phalanx-intermediate",
    "middle-finger-phalanx-distal",
    "middle-finger-tip",
    "ring-finger-metacarpal",
    "ring-finger-phalanx-proximal",
    "ring-finger-phalanx-intermediate",
    "ring-finger-phalanx-distal",
    "ring-finger-tip",
    "pinky-finger-metacarpal",
    "pinky-finger-phalanx-proximal",
    "pinky-finger-phalanx-intermediate",
    "pinky-finger-phalanx-distal",
    "pinky-finger-tip"
  ];
  var invTranslation = vec3_exports.create();
  var invRotation = quat_exports.create();
  var tempVec0 = vec3_exports.create();
  var tempVec1 = vec3_exports.create();
  var HandTracking = class extends Component3 {
    /** Handedness determining whether to receive tracking input from right or left hand */
    handedness = 0;
    /** (optional) Mesh to use to visualize joints */
    jointMesh = null;
    /** Material to use for display. Applied to either the spawned skinned mesh or the joint spheres. */
    jointMaterial = null;
    /** (optional) Skin to apply tracked joint poses to. If not present,
     * joint spheres will be used for display instead. */
    handSkin = null;
    /** Deactivate children if no pose was tracked */
    deactivateChildrenWithoutPose = true;
    /** Controller objects to activate including children if no pose is available */
    controllerToDeactivate = null;
    init() {
      this.handedness = ["left", "right"][this.handedness];
    }
    joints = {};
    session = null;
    /* Whether last update had a hand pose */
    hasPose = false;
    _childrenActive = true;
    start() {
      if (!("XRHand" in window)) {
        console.warn("WebXR Hand Tracking not supported by this browser.");
        this.active = false;
        return;
      }
      if (this.handSkin) {
        const skin = this.handSkin;
        const jointIds = skin.jointIds;
        this.joints[ORDERED_JOINTS[0]] = this.engine.wrapObject(jointIds[0]);
        for (let j = 0; j < jointIds.length; ++j) {
          const joint = this.engine.wrapObject(jointIds[j]);
          this.joints[joint.name] = joint;
        }
        return;
      }
      const jointObjects = this.engine.scene.addObjects(ORDERED_JOINTS.length, this.object, ORDERED_JOINTS.length);
      for (let j = 0; j < ORDERED_JOINTS.length; ++j) {
        const joint = jointObjects[j];
        joint.addComponent(MeshComponent, {
          mesh: this.jointMesh,
          material: this.jointMaterial
        });
        this.joints[ORDERED_JOINTS[j]] = joint;
        joint.name = ORDERED_JOINTS[j];
      }
    }
    update(dt) {
      if (!this.engine.xr)
        return;
      this.hasPose = false;
      if (this.engine.xr.session.inputSources) {
        for (let i = 0; i < this.engine.xr.session.inputSources.length; ++i) {
          const inputSource = this.engine.xr.session.inputSources[i];
          if (!inputSource?.hand || inputSource?.handedness != this.handedness)
            continue;
          const wristSpace = inputSource.hand.get("wrist");
          if (wristSpace) {
            const p = this.engine.xr.frame.getJointPose(wristSpace, this.engine.xr.currentReferenceSpace);
            if (p) {
              setXRRigidTransformLocal(this.object, p.transform);
            }
          }
          this.object.getRotationLocal(invRotation);
          quat_exports.conjugate(invRotation, invRotation);
          this.object.getPositionLocal(invTranslation);
          this.joints["wrist"].resetTransform();
          for (let j = 0; j < ORDERED_JOINTS.length; ++j) {
            const jointName = ORDERED_JOINTS[j];
            const joint = this.joints[jointName];
            if (!joint)
              continue;
            let jointPose = null;
            const jointSpace = inputSource.hand.get(jointName);
            if (jointSpace) {
              jointPose = this.engine.xr.frame.getJointPose(jointSpace, this.engine.xr.currentReferenceSpace);
            }
            if (jointPose) {
              this.hasPose = true;
              joint.resetPositionRotation();
              joint.translateLocal([
                jointPose.transform.position.x - invTranslation[0],
                jointPose.transform.position.y - invTranslation[1],
                jointPose.transform.position.z - invTranslation[2]
              ]);
              joint.rotateLocal(invRotation);
              joint.rotateObject([
                jointPose.transform.orientation.x,
                jointPose.transform.orientation.y,
                jointPose.transform.orientation.z,
                jointPose.transform.orientation.w
              ]);
              if (!this.handSkin) {
                const r = jointPose.radius || 7e-3;
                joint.setScalingLocal([r, r, r]);
              }
            }
          }
        }
      }
      if (!this.hasPose && this._childrenActive) {
        this._childrenActive = false;
        if (this.deactivateChildrenWithoutPose) {
          this.setChildrenActive(false);
        }
        if (this.controllerToDeactivate) {
          this.controllerToDeactivate.active = true;
          this.setChildrenActive(true, this.controllerToDeactivate);
        }
      } else if (this.hasPose && !this._childrenActive) {
        this._childrenActive = true;
        if (this.deactivateChildrenWithoutPose) {
          this.setChildrenActive(true);
        }
        if (this.controllerToDeactivate) {
          this.controllerToDeactivate.active = false;
          this.setChildrenActive(false, this.controllerToDeactivate);
        }
      }
    }
    setChildrenActive(active, object) {
      object = object || this.object;
      const children = object.children;
      for (const o of children) {
        o.active = active;
        this.setChildrenActive(active, o);
      }
    }
    isGrabbing() {
      this.joints["index-finger-tip"].getPositionLocal(tempVec0);
      this.joints["thumb-tip"].getPositionLocal(tempVec1);
      return vec3_exports.sqrDist(tempVec0, tempVec1) < 1e-3;
    }
  };
  __publicField(HandTracking, "TypeName", "hand-tracking");
  __decorate5([
    property.enum(["left", "right"])
  ], HandTracking.prototype, "handedness", void 0);
  __decorate5([
    property.mesh()
  ], HandTracking.prototype, "jointMesh", void 0);
  __decorate5([
    property.material()
  ], HandTracking.prototype, "jointMaterial", void 0);
  __decorate5([
    property.skin()
  ], HandTracking.prototype, "handSkin", void 0);
  __decorate5([
    property.bool(true)
  ], HandTracking.prototype, "deactivateChildrenWithoutPose", void 0);
  __decorate5([
    property.object()
  ], HandTracking.prototype, "controllerToDeactivate", void 0);

  // node_modules/@wonderlandengine/components/dist/howler-audio-listener.js
  var import_howler = __toESM(require_howler(), 1);
  var HowlerAudioListener = class extends Component3 {
    init() {
      this.origin = new Float32Array(3);
      this.fwd = new Float32Array(3);
      this.up = new Float32Array(3);
    }
    update() {
      if (!this.spatial)
        return;
      this.object.getTranslationWorld(this.origin);
      this.object.getForward(this.fwd);
      this.object.getUp(this.up);
      Howler.pos(this.origin[0], this.origin[1], this.origin[2]);
      Howler.orientation(this.fwd[0], this.fwd[1], this.fwd[2], this.up[0], this.up[1], this.up[2]);
    }
  };
  __publicField(HowlerAudioListener, "TypeName", "howler-audio-listener");
  __publicField(HowlerAudioListener, "Properties", {
    /** Whether audio should be spatialized/positional. */
    spatial: { type: Type.Bool, default: true }
  });

  // node_modules/@wonderlandengine/components/dist/howler-audio-source.js
  var import_howler2 = __toESM(require_howler(), 1);
  var HowlerAudioSource = class extends Component3 {
    start() {
      this.audio = new Howl({
        src: [this.src],
        loop: this.loop,
        volume: this.volume,
        autoplay: this.autoplay
      });
      this.lastPlayedAudioId = null;
      this.origin = new Float32Array(3);
      this.lastOrigin = new Float32Array(3);
      if (this.spatial && this.autoplay) {
        this.updatePosition();
        this.play();
      }
    }
    update() {
      if (!this.spatial || !this.lastPlayedAudioId)
        return;
      this.object.getTranslationWorld(this.origin);
      if (Math.abs(this.lastOrigin[0] - this.origin[0]) > 5e-3 || Math.abs(this.lastOrigin[1] - this.origin[1]) > 5e-3 || Math.abs(this.lastOrigin[2] - this.origin[2]) > 5e-3) {
        this.updatePosition();
      }
    }
    updatePosition() {
      this.audio.pos(this.origin[0], this.origin[1], this.origin[2], this.lastPlayedAudioId);
      this.lastOrigin.set(this.origin);
    }
    play() {
      if (this.lastPlayedAudioId)
        this.audio.stop(this.lastPlayedAudioId);
      this.lastPlayedAudioId = this.audio.play();
      if (this.spatial)
        this.updatePosition();
    }
    stop() {
      if (!this.lastPlayedAudioId)
        return;
      this.audio.stop(this.lastPlayedAudioId);
      this.lastPlayedAudioId = null;
    }
    onDeactivate() {
      this.stop();
    }
  };
  __publicField(HowlerAudioSource, "TypeName", "howler-audio-source");
  __publicField(HowlerAudioSource, "Properties", {
    /** Volume */
    volume: { type: Type.Float, default: 1 },
    /** Whether audio should be spatialized/positional */
    spatial: { type: Type.Bool, default: true },
    /** Whether to loop the sound */
    loop: { type: Type.Bool, default: false },
    /** Whether to start playing automatically */
    autoplay: { type: Type.Bool, default: false },
    /** URL to a sound file to play */
    src: { type: Type.String, default: "" }
  });

  // node_modules/@wonderlandengine/components/dist/utils/utils.js
  function setFirstMaterialTexture(mat, texture, customTextureProperty) {
    if (customTextureProperty !== "auto") {
      mat[customTextureProperty] = texture;
      return true;
    }
    const shader = mat.shader;
    if (shader === "Flat Opaque Textured") {
      mat.flatTexture = texture;
      return true;
    } else if (shader === "Phong Opaque Textured" || shader === "Foliage" || shader === "Phong Normalmapped" || shader === "Phong Lightmapped") {
      mat.diffuseTexture = texture;
      return true;
    } else if (shader === "Particle") {
      mat.mainTexture = texture;
      return true;
    } else if (shader === "DistanceFieldVector") {
      mat.vectorTexture = texture;
      return true;
    } else if (shader === "Background" || shader === "Sky") {
      mat.texture = texture;
      return true;
    } else if (shader === "Physical Opaque Textured") {
      mat.albedoTexture = texture;
      return true;
    }
    return false;
  }
  function deg2rad(value) {
    return value * Math.PI / 180;
  }
  function rad2deg(value) {
    return value * 180 / Math.PI;
  }

  // node_modules/@wonderlandengine/components/dist/image-texture.js
  var ImageTexture = class extends Component3 {
    start() {
      if (!this.material) {
        throw Error("image-texture: material property not set");
      }
      this.engine.textures.load(this.url, "anonymous").then((texture) => {
        const mat = this.material;
        if (!setFirstMaterialTexture(mat, texture, this.textureProperty)) {
          console.error("Shader", mat.shader, "not supported by image-texture");
        }
      }).catch(console.err);
    }
  };
  __publicField(ImageTexture, "TypeName", "image-texture");
  __publicField(ImageTexture, "Properties", {
    /** URL to download the image from */
    url: Property.string(),
    /** Material to apply the video texture to */
    material: Property.material(),
    /** Name of the texture property to set */
    textureProperty: Property.string("auto")
  });

  // node_modules/@wonderlandengine/components/dist/mouse-look.js
  var __decorate6 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var preventDefault = (e) => {
    e.preventDefault();
  };
  var MouseLookComponent = class extends Component3 {
    /** Mouse look sensitivity */
    sensitity = 0.25;
    /** Require a mouse button to be pressed to control view.
     * Otherwise view will allways follow mouse movement */
    requireMouseDown = true;
    /** If "moveOnClick" is enabled, mouse button which should
     * be held down to control view */
    mouseButtonIndex = 0;
    /** Enables pointer lock on "mousedown" event on canvas */
    pointerLockOnClick = false;
    currentRotationY = 0;
    currentRotationX = 0;
    origin = new Float32Array(3);
    parentOrigin = new Float32Array(3);
    rotationX = 0;
    rotationY = 0;
    mouseDown = false;
    onActivate() {
      document.addEventListener("mousemove", this.onMouseMove);
      const canvas2 = this.engine.canvas;
      if (this.pointerLockOnClick) {
        canvas2.addEventListener("mousedown", this.requestPointerLock);
      }
      if (this.requireMouseDown) {
        if (this.mouseButtonIndex === 2) {
          canvas2.addEventListener("contextmenu", preventDefault, false);
        }
        canvas2.addEventListener("mousedown", this.onMouseDown);
        canvas2.addEventListener("mouseup", this.onMouseUp);
      }
    }
    onDeactivate() {
      document.removeEventListener("mousemove", this.onMouseMove);
      const canvas2 = this.engine.canvas;
      if (this.pointerLockOnClick) {
        canvas2.removeEventListener("mousedown", this.requestPointerLock);
      }
      if (this.requireMouseDown) {
        if (this.mouseButtonIndex === 2) {
          canvas2.removeEventListener("contextmenu", preventDefault, false);
        }
        canvas2.removeEventListener("mousedown", this.onMouseDown);
        canvas2.removeEventListener("mouseup", this.onMouseUp);
      }
    }
    requestPointerLock = () => {
      const canvas2 = this.engine.canvas;
      canvas2.requestPointerLock = canvas2.requestPointerLock || canvas2.mozRequestPointerLock || canvas2.webkitRequestPointerLock;
      canvas2.requestPointerLock();
    };
    onMouseDown = (e) => {
      if (e.button === this.mouseButtonIndex) {
        this.mouseDown = true;
        document.body.style.cursor = "grabbing";
        if (e.button === 1) {
          e.preventDefault();
          return false;
        }
      }
    };
    onMouseUp = (e) => {
      if (e.button === this.mouseButtonIndex) {
        this.mouseDown = false;
        document.body.style.cursor = "initial";
      }
    };
    onMouseMove = (e) => {
      if (this.active && (this.mouseDown || !this.requireMouseDown)) {
        this.rotationY = -this.sensitity * e.movementX / 100;
        this.rotationX = -this.sensitity * e.movementY / 100;
        this.currentRotationX += this.rotationX;
        this.currentRotationY += this.rotationY;
        this.currentRotationX = Math.min(1.507, this.currentRotationX);
        this.currentRotationX = Math.max(-1.507, this.currentRotationX);
        this.object.getPositionWorld(this.origin);
        const parent = this.object.parent;
        if (parent) {
          parent.getPositionWorld(this.parentOrigin);
          vec3_exports.sub(this.origin, this.origin, this.parentOrigin);
        }
        this.object.resetPositionRotation();
        this.object.rotateAxisAngleRadLocal([1, 0, 0], this.currentRotationX);
        this.object.rotateAxisAngleRadLocal([0, 1, 0], this.currentRotationY);
        this.object.translateLocal(this.origin);
      }
    };
  };
  __publicField(MouseLookComponent, "TypeName", "mouse-look");
  __decorate6([
    property.float(0.25)
  ], MouseLookComponent.prototype, "sensitity", void 0);
  __decorate6([
    property.bool(true)
  ], MouseLookComponent.prototype, "requireMouseDown", void 0);
  __decorate6([
    property.int()
  ], MouseLookComponent.prototype, "mouseButtonIndex", void 0);
  __decorate6([
    property.bool(false)
  ], MouseLookComponent.prototype, "pointerLockOnClick", void 0);

  // node_modules/@wonderlandengine/components/dist/player-height.js
  var __decorate7 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var PlayerHeight = class extends Component3 {
    height = 1.75;
    onSessionStartCallback;
    onSessionEndCallback;
    start() {
      this.object.resetPositionRotation();
      this.object.translateLocal([0, this.height, 0]);
      this.onSessionStartCallback = this.onXRSessionStart.bind(this);
      this.onSessionEndCallback = this.onXRSessionEnd.bind(this);
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this.onSessionStartCallback);
      this.engine.onXRSessionEnd.add(this.onSessionEndCallback);
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this.onSessionStartCallback);
      this.engine.onXRSessionEnd.remove(this.onSessionEndCallback);
    }
    onXRSessionStart() {
      const type = this.engine.xr?.currentReferenceSpaceType;
      if (type !== "local" && type !== "viewer") {
        this.object.resetPositionRotation();
      }
    }
    onXRSessionEnd() {
      const type = this.engine.xr?.currentReferenceSpaceType;
      if (type !== "local" && type !== "viewer") {
        this.object.resetPositionRotation();
        this.object.translateLocal([0, this.height, 0]);
      }
    }
  };
  __publicField(PlayerHeight, "TypeName", "player-height");
  __decorate7([
    property.float(1.75)
  ], PlayerHeight.prototype, "height", void 0);

  // node_modules/@wonderlandengine/components/dist/target-framerate.js
  var TargetFramerate = class extends Component3 {
    start() {
      this.onSessionStartCallback = this.setTargetFramerate.bind(this);
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this.onSessionStartCallback);
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this.onSessionStartCallback);
    }
    setTargetFramerate(s) {
      if (s.supportedFrameRates && s.updateTargetFrameRate) {
        const a = this.engine.xr.session.supportedFrameRates;
        a.sort((a2, b) => Math.abs(a2 - this.framerate) - Math.abs(b - this.framerate));
        this.engine.xr.session.updateTargetFrameRate(a[0]);
      }
    }
  };
  __publicField(TargetFramerate, "TypeName", "target-framerate");
  __publicField(TargetFramerate, "Properties", {
    framerate: { type: Type.Float, default: 90 }
  });

  // node_modules/@wonderlandengine/components/dist/teleport.js
  var TeleportComponent = class extends Component3 {
    init() {
      this._prevThumbstickAxis = new Float32Array(2);
      this._tempVec = new Float32Array(3);
      this._tempVec0 = new Float32Array(3);
      this._currentIndicatorRotation = 0;
      this.input = this.object.getComponent("input");
      if (!this.input) {
        console.error(this.object.name, "generic-teleport-component.js: input component is required on the object");
        return;
      }
      if (!this.teleportIndicatorMeshObject) {
        console.error(this.object.name, "generic-teleport-component.js: Teleport indicator mesh is missing");
        return;
      }
      if (!this.camRoot) {
        console.error(this.object.name, "generic-teleport-component.js: camRoot not set");
        return;
      }
      this.isIndicating = false;
      this.indicatorHidden = true;
      this.hitSpot = new Float32Array(3);
      this._hasHit = false;
      this._extraRotation = 0;
      this._currentStickAxes = new Float32Array(2);
    }
    start() {
      if (this.cam) {
        this.isMouseIndicating = false;
        canvas.addEventListener("mousedown", this.onMouseDown.bind(this));
        canvas.addEventListener("mouseup", this.onMouseUp.bind(this));
      }
      if (this.handedness == 0) {
        const inputComp = this.object.getComponent("input");
        if (!inputComp) {
          console.warn("teleport component on object", this.object.name, 'was configured with handedness "input component", but object has no input component.');
        } else {
          this.handedness = inputComp.handedness;
          this.input = inputComp;
        }
      } else {
        this.handedness = ["left", "right"][this.handedness - 1];
      }
      this.onSessionStartCallback = this.setupVREvents.bind(this);
      this.teleportIndicatorMeshObject.active = false;
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this.onSessionStartCallback);
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this.onSessionStartCallback);
    }
    /* Get current camera Y rotation */
    _getCamRotation() {
      this.eyeLeft.getForward(this._tempVec);
      this._tempVec[1] = 0;
      vec3_exports.normalize(this._tempVec, this._tempVec);
      return Math.atan2(this._tempVec[0], this._tempVec[2]);
    }
    update() {
      let inputLength = 0;
      if (this.gamepad && this.gamepad.axes) {
        this._currentStickAxes[0] = this.gamepad.axes[2];
        this._currentStickAxes[1] = this.gamepad.axes[3];
        inputLength = Math.abs(this._currentStickAxes[0]) + Math.abs(this._currentStickAxes[1]);
      }
      if (!this.isIndicating && this._prevThumbstickAxis[1] >= this.thumbstickActivationThreshhold && this._currentStickAxes[1] < this.thumbstickActivationThreshhold) {
        this.isIndicating = true;
      } else if (this.isIndicating && inputLength < this.thumbstickDeactivationThreshhold) {
        this.isIndicating = false;
        this.teleportIndicatorMeshObject.active = false;
        if (this._hasHit) {
          this._teleportPlayer(this.hitSpot, this._extraRotation);
        }
      }
      if (this.isIndicating && this.teleportIndicatorMeshObject && this.input) {
        const origin = this._tempVec0;
        this.object.getPositionWorld(origin);
        const direction2 = this.object.getForwardWorld(this._tempVec);
        let rayHit = this.rayHit = this.rayCastMode == 0 ? this.engine.scene.rayCast(origin, direction2, 1 << this.floorGroup) : this.engine.physics.rayCast(origin, direction2, 1 << this.floorGroup, this.maxDistance);
        if (rayHit.hitCount > 0) {
          this.indicatorHidden = false;
          this._extraRotation = Math.PI + Math.atan2(this._currentStickAxes[0], this._currentStickAxes[1]);
          this._currentIndicatorRotation = this._getCamRotation() + (this._extraRotation - Math.PI);
          this.teleportIndicatorMeshObject.resetPositionRotation();
          this.teleportIndicatorMeshObject.rotateAxisAngleRad([0, 1, 0], this._currentIndicatorRotation);
          this.teleportIndicatorMeshObject.translate(rayHit.locations[0]);
          this.teleportIndicatorMeshObject.translate([
            0,
            this.indicatorYOffset,
            0
          ]);
          this.teleportIndicatorMeshObject.active = true;
          this.hitSpot.set(rayHit.locations[0]);
          this._hasHit = true;
        } else {
          if (!this.indicatorHidden) {
            this.teleportIndicatorMeshObject.active = false;
            this.indicatorHidden = true;
          }
          this._hasHit = false;
        }
      } else if (this.teleportIndicatorMeshObject && this.isMouseIndicating) {
        this.onMousePressed();
      }
      this._prevThumbstickAxis.set(this._currentStickAxes);
    }
    setupVREvents(s) {
      this.session = s;
      s.addEventListener("end", function() {
        this.gamepad = null;
        this.session = null;
      }.bind(this));
      if (s.inputSources && s.inputSources.length) {
        for (let i = 0; i < s.inputSources.length; i++) {
          let inputSource = s.inputSources[i];
          if (inputSource.handedness == this.handedness) {
            this.gamepad = inputSource.gamepad;
          }
        }
      }
      s.addEventListener("inputsourceschange", function(e) {
        if (e.added && e.added.length) {
          for (let i = 0; i < e.added.length; i++) {
            let inputSource = e.added[i];
            if (inputSource.handedness == this.handedness) {
              this.gamepad = inputSource.gamepad;
            }
          }
        }
      }.bind(this));
    }
    onMouseDown() {
      this.isMouseIndicating = true;
    }
    onMouseUp() {
      this.isMouseIndicating = false;
      this.teleportIndicatorMeshObject.active = false;
      if (this._hasHit) {
        this._teleportPlayer(this.hitSpot, 0);
      }
    }
    onMousePressed() {
      let origin = [0, 0, 0];
      this.cam.getPositionWorld(origin);
      const direction2 = this.cam.getForward(this._tempVec);
      let rayHit = this.rayHit = this.rayCastMode == 0 ? this.engine.scene.rayCast(origin, direction2, 1 << this.floorGroup) : this.engine.physics.rayCast(origin, direction2, 1 << this.floorGroup, this.maxDistance);
      if (rayHit.hitCount > 0) {
        this.indicatorHidden = false;
        direction2[1] = 0;
        vec3_exports.normalize(direction2, direction2);
        this._currentIndicatorRotation = -Math.sign(direction2[2]) * Math.acos(direction2[0]) - Math.PI * 0.5;
        this.teleportIndicatorMeshObject.resetPositionRotation();
        this.teleportIndicatorMeshObject.rotateAxisAngleRad([0, 1, 0], this._currentIndicatorRotation);
        this.teleportIndicatorMeshObject.translate(rayHit.locations[0]);
        this.teleportIndicatorMeshObject.active = true;
        this.hitSpot = rayHit.locations[0];
        this._hasHit = true;
      } else {
        if (!this.indicatorHidden) {
          this.teleportIndicatorMeshObject.active = false;
          this.indicatorHidden = true;
        }
        this._hasHit = false;
      }
    }
    _teleportPlayer(newPosition, rotationToAdd) {
      this.camRoot.rotateAxisAngleRad([0, 1, 0], rotationToAdd);
      const p = this._tempVec;
      const p1 = this._tempVec0;
      if (this.session) {
        this.eyeLeft.getPositionWorld(p);
        this.eyeRight.getPositionWorld(p1);
        vec3_exports.add(p, p, p1);
        vec3_exports.scale(p, p, 0.5);
      } else {
        this.cam.getPositionWorld(p);
      }
      this.camRoot.getPositionWorld(p1);
      vec3_exports.sub(p, p1, p);
      p[0] += newPosition[0];
      p[1] = newPosition[1];
      p[2] += newPosition[2];
      this.camRoot.setPositionWorld(p);
    }
  };
  __publicField(TeleportComponent, "TypeName", "teleport");
  __publicField(TeleportComponent, "Properties", {
    /** Object that will be placed as indiciation forwhere the player will teleport to. */
    teleportIndicatorMeshObject: { type: Type.Object },
    /** Root of the player, the object that will be positioned on teleportation. */
    camRoot: { type: Type.Object },
    /** Non-vr camera for use outside of VR */
    cam: { type: Type.Object },
    /** Left eye for use in VR*/
    eyeLeft: { type: Type.Object },
    /** Right eye for use in VR*/
    eyeRight: { type: Type.Object },
    /** Handedness for VR cursors to accept trigger events only from respective controller. */
    handedness: {
      type: Type.Enum,
      values: ["input component", "left", "right", "none"],
      default: "input component"
    },
    /** Collision group of valid "floor" objects that can be teleported on */
    floorGroup: { type: Type.Int, default: 1 },
    /** How far the thumbstick needs to be pushed to have the teleport target indicator show up */
    thumbstickActivationThreshhold: { type: Type.Float, default: -0.7 },
    /** How far the thumbstick needs to be released to execute the teleport */
    thumbstickDeactivationThreshhold: { type: Type.Float, default: 0.3 },
    /** Offset to apply to the indicator object, e.g. to avoid it from Z-fighting with the floor */
    indicatorYOffset: { type: Type.Float, default: 0.01 },
    /** Mode for raycasting, whether to use PhysX or simple collision components */
    rayCastMode: {
      type: Type.Enum,
      values: ["collision", "physx"],
      default: "collision"
    },
    /** Max distance for PhysX raycast */
    maxDistance: { type: Type.Float, default: 100 }
  });

  // node_modules/@wonderlandengine/components/dist/trail.js
  var __decorate8 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var direction = vec3_exports.create();
  var offset = vec3_exports.create();
  var normal = vec3_exports.create();
  var UP = vec3_exports.fromValues(0, 1, 0);
  var Trail = class extends Component3 {
    /** The material to apply to the trail mesh */
    material = null;
    /** The number of segments in the trail mesh */
    segments = 50;
    /** The time interval before recording a new point */
    interval = 0.1;
    /** The width of the trail (in world space) */
    width = 1;
    /** Whether or not the trail should taper off */
    taper = true;
    /**
     * The maximum delta time in seconds, above which the trail resets.
     * This prevents the trail from jumping around when updates happen
     * infrequently (e.g. when the tab doesn't have focus).
     */
    resetThreshold = 0.5;
    _currentPointIndex = 0;
    _timeTillNext = 0;
    _points = [];
    _trailContainer = null;
    _meshComp = null;
    _mesh = null;
    _indexData = null;
    start() {
      this._points = new Array(this.segments + 1);
      for (let i = 0; i < this._points.length; ++i) {
        this._points[i] = vec3_exports.create();
      }
      this._timeTillNext = this.interval;
      this._trailContainer = this.engine.scene.addObject();
      this._meshComp = this._trailContainer.addComponent("mesh");
      this._meshComp.material = this.material;
      const vertexCount = 2 * this._points.length;
      this._indexData = new Uint32Array(6 * this.segments);
      for (let i = 0, v = 0; i < vertexCount - 2; i += 2, v += 6) {
        this._indexData.subarray(v, v + 6).set([i + 1, i + 0, i + 2, i + 2, i + 3, i + 1]);
      }
      this._mesh = new Mesh(this.engine, {
        vertexCount,
        indexData: this._indexData,
        indexType: MeshIndexType.UnsignedInt
      });
      this._meshComp.mesh = this._mesh;
    }
    updateVertices() {
      if (!this._mesh)
        return;
      const positions = this._mesh.attribute(MeshAttribute.Position);
      const texCoords = this._mesh.attribute(MeshAttribute.TextureCoordinate);
      const normals = this._mesh.attribute(MeshAttribute.Normal);
      vec3_exports.set(direction, 0, 0, 0);
      for (let i = 0; i < this._points.length; ++i) {
        const curr = this._points[(this._currentPointIndex + i + 1) % this._points.length];
        const next = this._points[(this._currentPointIndex + i + 2) % this._points.length];
        if (i !== this._points.length - 1) {
          vec3_exports.sub(direction, next, curr);
        }
        vec3_exports.cross(offset, UP, direction);
        vec3_exports.normalize(offset, offset);
        const timeFraction = 1 - this._timeTillNext / this.interval;
        const fraction = (i - timeFraction) / this.segments;
        vec3_exports.scale(offset, offset, (this.taper ? fraction : 1) * this.width / 2);
        positions.set(i * 2, [
          curr[0] - offset[0],
          curr[1] - offset[1],
          curr[2] - offset[2]
        ]);
        positions.set(i * 2 + 1, [
          curr[0] + offset[0],
          curr[1] + offset[1],
          curr[2] + offset[2]
        ]);
        if (normals) {
          vec3_exports.cross(normal, direction, offset);
          vec3_exports.normalize(normal, normal);
          normals.set(i * 2, normal);
          normals.set(i * 2 + 1, normal);
        }
        if (texCoords) {
          texCoords.set(i * 2, [0, fraction]);
          texCoords.set(i * 2 + 1, [1, fraction]);
        }
      }
      this._mesh.update();
    }
    resetTrail() {
      this.object.getPositionWorld(this._points[0]);
      for (let i = 1; i < this._points.length; ++i) {
        vec3_exports.copy(this._points[i], this._points[0]);
      }
      this._currentPointIndex = 0;
      this._timeTillNext = this.interval;
    }
    update(dt) {
      this._timeTillNext -= dt;
      if (dt > this.resetThreshold) {
        this.resetTrail();
      }
      if (this._timeTillNext < 0) {
        this._currentPointIndex = (this._currentPointIndex + 1) % this._points.length;
        this._timeTillNext = this._timeTillNext % this.interval + this.interval;
      }
      this.object.getPositionWorld(this._points[this._currentPointIndex]);
      this.updateVertices();
    }
    onActivate() {
      this.resetTrail();
      if (this._meshComp)
        this._meshComp.active = true;
    }
    onDeactivate() {
      if (this._meshComp)
        this._meshComp.active = false;
    }
    onDestroy() {
      if (this._trailContainer)
        this._trailContainer.destroy();
      if (this._mesh)
        this._mesh.destroy();
    }
  };
  __publicField(Trail, "TypeName", "trail");
  __decorate8([
    property.material()
  ], Trail.prototype, "material", void 0);
  __decorate8([
    property.int(50)
  ], Trail.prototype, "segments", void 0);
  __decorate8([
    property.float(50)
  ], Trail.prototype, "interval", void 0);
  __decorate8([
    property.float(1)
  ], Trail.prototype, "width", void 0);
  __decorate8([
    property.bool(true)
  ], Trail.prototype, "taper", void 0);
  __decorate8([
    property.float(1)
  ], Trail.prototype, "resetThreshold", void 0);

  // node_modules/@wonderlandengine/components/dist/two-joint-ik-solver.js
  function clamp(v, a, b) {
    return Math.max(a, Math.min(v, b));
  }
  var rootScaling = new Float32Array(3);
  var tempQuat3 = new Float32Array(4);
  var middlePos = new Float32Array(3);
  var endPos = new Float32Array(3);
  var targetPos = new Float32Array(3);
  var helperPos = new Float32Array(3);
  var rootTransform = new Float32Array(8);
  var middleTransform = new Float32Array(8);
  var endTransform = new Float32Array(8);
  var twoJointIK = function() {
    const ta = new Float32Array(3);
    const ca = new Float32Array(3);
    const ba = new Float32Array(3);
    const ab = new Float32Array(3);
    const cb = new Float32Array(3);
    const axis0 = new Float32Array(3);
    const axis1 = new Float32Array(3);
    const temp = new Float32Array(3);
    return function(root, middle, b, c, targetPos2, eps, helper) {
      ba.set(b);
      const lab = vec3_exports.length(ba);
      vec3_exports.sub(ta, b, c);
      const lcb = vec3_exports.length(ta);
      ta.set(targetPos2);
      const lat = clamp(vec3_exports.length(ta), eps, lab + lcb - eps);
      ca.set(c);
      vec3_exports.scale(ab, b, -1);
      vec3_exports.sub(cb, c, b);
      vec3_exports.normalize(ca, ca);
      vec3_exports.normalize(ba, ba);
      vec3_exports.normalize(ab, ab);
      vec3_exports.normalize(cb, cb);
      vec3_exports.normalize(ta, ta);
      const ac_ab_0 = Math.acos(clamp(vec3_exports.dot(ca, ba), -1, 1));
      const ba_bc_0 = Math.acos(clamp(vec3_exports.dot(ab, cb), -1, 1));
      const ac_at_0 = Math.acos(clamp(vec3_exports.dot(ca, ta), -1, 1));
      const ac_ab_1 = Math.acos(clamp((lcb * lcb - lab * lab - lat * lat) / (-2 * lab * lat), -1, 1));
      const ba_bc_1 = Math.acos(clamp((lat * lat - lab * lab - lcb * lcb) / (-2 * lab * lcb), -1, 1));
      if (helper) {
        vec3_exports.sub(ba, helper, b);
        vec3_exports.normalize(ba, ba);
      }
      vec3_exports.cross(axis0, ca, ba);
      vec3_exports.normalize(axis0, axis0);
      vec3_exports.cross(axis1, c, targetPos2);
      vec3_exports.normalize(axis1, axis1);
      middle.transformVectorInverseLocal(temp, axis0);
      root.rotateAxisAngleRadObject(axis1, ac_at_0);
      root.rotateAxisAngleRadObject(axis0, ac_ab_1 - ac_ab_0);
      middle.rotateAxisAngleRadObject(axis0, ba_bc_1 - ba_bc_0);
    };
  }();
  var TwoJointIkSolver = class extends Component3 {
    time = 0;
    start() {
      this.root.getTransformLocal(rootTransform);
      this.middle.getTransformLocal(middleTransform);
      this.end.getTransformLocal(endTransform);
    }
    update(dt) {
      this.time += dt;
      this.root.setTransformLocal(rootTransform);
      this.middle.setTransformLocal(middleTransform);
      this.end.setTransformLocal(endTransform);
      this.root.getScalingWorld(rootScaling);
      this.middle.getPositionLocal(middlePos);
      this.end.getPositionLocal(endPos);
      this.middle.transformPointLocal(endPos, endPos);
      if (this.helper) {
        this.helper.getPositionWorld(helperPos);
        this.root.transformPointInverseWorld(helperPos, helperPos);
        vec3_exports.div(helperPos, helperPos, rootScaling);
      }
      this.target.getPositionWorld(targetPos);
      this.root.transformPointInverseWorld(targetPos, targetPos);
      vec3_exports.div(targetPos, targetPos, rootScaling);
      twoJointIK(this.root, this.middle, middlePos, endPos, targetPos, 0.01, this.helper ? helperPos : null, this.time);
      if (this.copyTargetRotation) {
        this.end.setRotationWorld(this.target.getRotationWorld(tempQuat3));
      }
    }
  };
  __publicField(TwoJointIkSolver, "TypeName", "two-joint-ik-solver");
  __publicField(TwoJointIkSolver, "Properties", {
    /** Root bone, never moves */
    root: Property.object(),
    /** Bone attached to the root */
    middle: Property.object(),
    /** Bone attached to the middle */
    end: Property.object(),
    /** Target the joins should reach for */
    target: Property.object(),
    /** Flag for copying rotation from target to end */
    copyTargetRotation: Property.bool(true),
    /** Helper object to use to determine joint rotation axis */
    helper: Property.object()
  });

  // node_modules/@wonderlandengine/components/dist/video-texture.js
  var VideoTexture = class extends Component3 {
    init() {
      if (!this.material) {
        throw Error("video-texture: material property not set");
      }
      this.loaded = false;
      this.frameUpdateRequested = true;
    }
    start() {
      this.video = document.createElement("video");
      this.video.src = this.url;
      this.video.crossOrigin = "anonymous";
      this.video.playsInline = true;
      this.video.loop = this.loop;
      this.video.muted = this.muted;
      this.video.addEventListener("playing", () => {
        this.loaded = true;
      });
      if (this.autoplay) {
        const playAfterUserGesture = () => {
          this.video.play();
          window.removeEventListener("click", playAfterUserGesture);
          window.removeEventListener("touchstart", playAfterUserGesture);
        };
        window.addEventListener("click", playAfterUserGesture);
        window.addEventListener("touchstart", playAfterUserGesture);
      }
    }
    applyTexture() {
      const mat = this.material;
      const shader = mat.shader;
      const texture = this.texture = new Texture(this.engine, this.video);
      if (!setFirstMaterialTexture(mat, texture, this.textureProperty)) {
        console.error("Shader", shader, "not supported by video-texture");
      }
      if ("requestVideoFrameCallback" in this.video) {
        this.video.requestVideoFrameCallback(this.updateVideo.bind(this));
      } else {
        this.video.addEventListener("timeupdate", () => {
          this.frameUpdateRequested = true;
        });
      }
    }
    update(dt) {
      if (this.loaded && this.frameUpdateRequested) {
        if (this.texture) {
          this.texture.update();
        } else {
          this.applyTexture();
        }
        this.frameUpdateRequested = false;
      }
    }
    updateVideo() {
      this.frameUpdateRequested = true;
      this.video.requestVideoFrameCallback(this.updateVideo.bind(this));
    }
  };
  __publicField(VideoTexture, "TypeName", "video-texture");
  __publicField(VideoTexture, "Properties", {
    /** URL to download video from */
    url: Property.string(),
    /** Material to apply the video texture to */
    material: Property.material(),
    /** Whether to loop the video */
    loop: Property.bool(true),
    /** Whether to automatically start playing the video */
    autoplay: Property.bool(true),
    /** Whether to mute sound */
    muted: Property.bool(true),
    /** Name of the texture property to set */
    textureProperty: Property.string("auto")
  });

  // node_modules/@wonderlandengine/components/dist/vr-mode-active-switch.js
  var VrModeActiveSwitch = class extends Component3 {
    start() {
      this.components = [];
      this.getComponents(this.object);
      this.onXRSessionEnd();
      this.onSessionStartCallback = this.onXRSessionStart.bind(this);
      this.onSessionEndCallback = this.onXRSessionEnd.bind(this);
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this.onSessionStartCallback);
      this.engine.onXRSessionEnd.add(this.onSessionEndCallback);
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this.onSessionStartCallback);
      this.engine.onXRSessionEnd.remove(this.onSessionEndCallback);
    }
    getComponents(obj) {
      const comps = obj.getComponents().filter((c) => c.type !== "vr-mode-active-switch");
      this.components = this.components.concat(comps);
      if (this.affectChildren) {
        let children = obj.children;
        for (let i = 0; i < children.length; ++i) {
          this.getComponents(children[i]);
        }
      }
    }
    setComponentsActive(active) {
      const comps = this.components;
      for (let i = 0; i < comps.length; ++i) {
        comps[i].active = active;
      }
    }
    onXRSessionStart() {
      this.setComponentsActive(this.activateComponents == 0);
    }
    onXRSessionEnd() {
      this.setComponentsActive(this.activateComponents != 0);
    }
  };
  __publicField(VrModeActiveSwitch, "TypeName", "vr-mode-active-switch");
  __publicField(VrModeActiveSwitch, "Properties", {
    /** When components should be active: In VR or when not in VR */
    activateComponents: {
      type: Type.Enum,
      values: ["in VR", "in non-VR"],
      default: "in VR"
    },
    /** Whether child object's components should be affected */
    affectChildren: { type: Type.Bool, default: true }
  });

  // node_modules/@wonderlandengine/components/dist/plane-detection.js
  var import_earcut = __toESM(require_earcut(), 1);
  var __decorate9 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var tempVec32 = new Float32Array(3);
  function extentsFromContour(out, points) {
    if (points.length == 0)
      return out;
    let absMaxX = Math.abs(points[0].x);
    let absMaxZ = Math.abs(points[0].z);
    for (let i = 1; i < points.length; ++i) {
      absMaxX = Math.max(absMaxX, Math.abs(points[i].x));
      absMaxZ = Math.max(absMaxZ, Math.abs(points[i].z));
    }
    out[0] = absMaxX;
    out[1] = 0;
    out[2] = absMaxZ;
  }
  function within(x, a, b) {
    if (a > b)
      return x < a && x > b;
    return x > a && x < b;
  }
  function isPointLocalOnXRPlanePolygon(p, plane) {
    const points = plane.polygon;
    if (points.length < 3)
      return false;
    const pX = p[0];
    const pZ = p[2];
    let intersections = 0;
    for (let n = 0, l = points.length - 1; n < points.length; ++n) {
      const aX = points[l].x;
      const aZ = points[l].z;
      const s = (points[n].z - aZ) / (points[n].x - aX);
      const x = Math.abs((pZ - aZ) / s);
      if (x >= 0 && x <= 1 && within(x + pX, aX, points[n].x))
        ++intersections;
      l = n;
    }
    return (intersections & 1) == 0;
  }
  function isPointWorldOnXRPlanePolygon(object, p, plane) {
    if (plane.polygon.length < 3)
      return false;
    isPointLocalOnXRPlanePolygon(object.transformPointInverseWorld(tempVec32, p), plane);
  }
  function planeMeshFromContour(engine, points, meshToUpdate = null) {
    const vertexCount = points.length;
    const vertices = new Float32Array(vertexCount * 2);
    for (let i = 0, d = 0; i < vertexCount; ++i, d += 2) {
      vertices[d] = points[i].x;
      vertices[d + 1] = points[i].z;
    }
    const triangles = (0, import_earcut.default)(vertices);
    const mesh = meshToUpdate || new Mesh(engine, {
      vertexCount,
      /* Assumption here that we will never have more than 256 points
       * in the detected plane meshes! */
      indexType: MeshIndexType.UnsignedByte,
      indexData: triangles
    });
    if (mesh.vertexCount !== vertexCount) {
      console.warn("vertexCount of meshToUpdate did not match required vertexCount");
      return mesh;
    }
    const positions = mesh.attribute(MeshAttribute.Position);
    const textureCoords = mesh.attribute(MeshAttribute.TextureCoordinate);
    const normals = mesh.attribute(MeshAttribute.Normal);
    tempVec32[1] = 0;
    for (let i = 0, s = 0; i < vertexCount; ++i, s += 2) {
      tempVec32[0] = vertices[s];
      tempVec32[2] = vertices[s + 1];
      positions.set(i, tempVec32);
    }
    textureCoords?.set(0, vertices);
    if (normals) {
      tempVec32[0] = 0;
      tempVec32[1] = 1;
      tempVec32[2] = 0;
      for (let i = 0; i < vertexCount; ++i) {
        normals.set(i, tempVec32);
      }
    }
    if (meshToUpdate)
      mesh.update();
    return mesh;
  }
  var _planeLost, planeLost_fn, _planeFound, planeFound_fn, _planeUpdate, planeUpdate_fn, _planeUpdatePose, planeUpdatePose_fn;
  var PlaneDetection = class extends Component3 {
    constructor() {
      super(...arguments);
      __privateAdd(this, _planeLost);
      __privateAdd(this, _planeFound);
      __privateAdd(this, _planeUpdate);
      __privateAdd(this, _planeUpdatePose);
      /**
       * Material to assign to created plane meshes or `null` if meshes should not be created.
       */
      __publicField(this, "planeMaterial", null);
      /**
       * Collision mask to assign to newly created collision components or a negative value if
       * collision components should not be created.
       */
      __publicField(this, "collisionMask", -1);
      /** Map of all planes and their last updated timestamps */
      __publicField(this, "planes", /* @__PURE__ */ new Map());
      /** Objects generated for each XRPlane */
      __publicField(this, "planeObjects", /* @__PURE__ */ new Map());
      /** Called when a plane starts tracking */
      __publicField(this, "onPlaneFound", new Emitter());
      /** Called when a plane stops tracking */
      __publicField(this, "onPlaneLost", new Emitter());
    }
    update() {
      if (!this.engine.xr?.frame)
        return;
      if (this.engine.xr.frame.detectedPlanes === void 0) {
        console.error("plane-detection: WebXR feature not available.");
        this.active = false;
        return;
      }
      const detectedPlanes = this.engine.xr.frame.detectedPlanes;
      for (const [plane, _] of this.planes) {
        if (!detectedPlanes.has(plane)) {
          __privateMethod(this, _planeLost, planeLost_fn).call(this, plane);
        }
      }
      detectedPlanes.forEach((plane) => {
        if (this.planes.has(plane)) {
          if (plane.lastChangedTime > this.planes.get(plane)) {
            __privateMethod(this, _planeUpdate, planeUpdate_fn).call(this, plane);
          }
        } else {
          __privateMethod(this, _planeFound, planeFound_fn).call(this, plane);
        }
        __privateMethod(this, _planeUpdatePose, planeUpdatePose_fn).call(this, plane);
      });
    }
  };
  _planeLost = new WeakSet();
  planeLost_fn = function(plane) {
    this.planes.delete(plane);
    const o = this.planeObjects.get(plane);
    this.onPlaneLost.notify(plane, o);
    if (o.objectId > 0)
      o.destroy();
  };
  _planeFound = new WeakSet();
  planeFound_fn = function(plane) {
    this.planes.set(plane, plane.lastChangedTime);
    const o = this.engine.scene.addObject(this.object);
    this.planeObjects.set(plane, o);
    if (this.planeMaterial) {
      o.addComponent(MeshComponent, {
        mesh: planeMeshFromContour(this.engine, plane.polygon),
        material: this.planeMaterial
      });
    }
    if (this.collisionMask >= 0) {
      extentsFromContour(tempVec32, plane.polygon);
      tempVec32[1] = 0.025;
      o.addComponent(CollisionComponent, {
        group: this.collisionMask,
        collider: Collider.Box,
        extents: tempVec32
      });
    }
    this.onPlaneFound.notify(plane, o);
  };
  _planeUpdate = new WeakSet();
  planeUpdate_fn = function(plane) {
    this.planes.set(plane, plane.lastChangedTime);
    const planeMesh = this.planeObjects.get(plane).getComponent(MeshComponent);
    if (!planeMesh)
      return;
    planeMeshFromContour(this.engine, plane.polygon, planeMesh.mesh);
  };
  _planeUpdatePose = new WeakSet();
  planeUpdatePose_fn = function(plane) {
    const o = this.planeObjects.get(plane);
    const pose = this.engine.xr.frame.getPose(plane.planeSpace, this.engine.xr.currentReferenceSpace);
    if (!pose) {
      o.active = false;
      return;
    }
    setXRRigidTransformLocal(o, pose.transform);
  };
  __publicField(PlaneDetection, "TypeName", "plane-detection");
  __decorate9([
    property.material()
  ], PlaneDetection.prototype, "planeMaterial", void 0);
  __decorate9([
    property.int()
  ], PlaneDetection.prototype, "collisionMask", void 0);

  // node_modules/@wonderlandengine/components/dist/vrm.js
  var VRM_ROLL_AXES = {
    X: [1, 0, 0],
    Y: [0, 1, 0],
    Z: [0, 0, 1]
  };
  var VRM_AIM_AXES = {
    PositiveX: [1, 0, 0],
    NegativeX: [-1, 0, 0],
    PositiveY: [0, 1, 0],
    NegativeY: [0, -1, 0],
    PositiveZ: [0, 0, 1],
    NegativeZ: [0, 0, -1]
  };
  var Vrm = class extends Component3 {
    /** Meta information about the VRM model */
    meta = null;
    /** The humanoid bones of the VRM model */
    bones = {
      /* Torso */
      hips: null,
      spine: null,
      chest: null,
      upperChest: null,
      neck: null,
      /* Head */
      head: null,
      leftEye: null,
      rightEye: null,
      jaw: null,
      /* Legs */
      leftUpperLeg: null,
      leftLowerLeg: null,
      leftFoot: null,
      leftToes: null,
      rightUpperLeg: null,
      rightLowerLeg: null,
      rightFoot: null,
      rightToes: null,
      /* Arms */
      leftShoulder: null,
      leftUpperArm: null,
      leftLowerArm: null,
      leftHand: null,
      rightShoulder: null,
      rightUpperArm: null,
      rightLowerArm: null,
      rightHand: null,
      /* Fingers */
      leftThumbMetacarpal: null,
      leftThumbProximal: null,
      leftThumbDistal: null,
      leftIndexProximal: null,
      leftIndexIntermediate: null,
      leftIndexDistal: null,
      leftMiddleProximal: null,
      leftMiddleIntermediate: null,
      leftMiddleDistal: null,
      leftRingProximal: null,
      leftRingIntermediate: null,
      leftRingDistal: null,
      leftLittleProximal: null,
      leftLittleIntermediate: null,
      leftLittleDistal: null,
      rightThumbMetacarpal: null,
      rightThumbProximal: null,
      rightThumbDistal: null,
      rightIndexProximal: null,
      rightIndexIntermediate: null,
      rightIndexDistal: null,
      rightMiddleProximal: null,
      rightMiddleIntermediate: null,
      rightMiddleDistal: null,
      rightRingProximal: null,
      rightRingIntermediate: null,
      rightRingDistal: null,
      rightLittleProximal: null,
      rightLittleIntermediate: null,
      rightLittleDistal: null
    };
    /** Rotations of the bones in the rest pose (T-pose) */
    restPose = {};
    /* All node constraints, ordered to deal with dependencies */
    _nodeConstraints = [];
    /* VRMC_springBone chains */
    _springChains = [];
    /* Spherical colliders for spring bones */
    _sphereColliders = [];
    /* Capsule shaped colliders for spring bones */
    _capsuleColliders = [];
    /* Indicates which meshes are rendered in first/third person views */
    _firstPersonAnnotations = [];
    /* Contains details for (bone type) lookAt behaviour */
    _lookAt = null;
    /* Whether or not the VRM component has been initialized with `initializeVrm` */
    _initialized = false;
    init() {
      this._tempV3 = vec3_exports.create();
      this._tempV3A = vec3_exports.create();
      this._tempV3B = vec3_exports.create();
      this._tempQuat = quat_exports.create();
      this._tempQuatA = quat_exports.create();
      this._tempQuatB = quat_exports.create();
      this._tempMat4A = mat4_exports.create();
      this._tempQuat2 = quat2_exports.create();
      this._tailToShape = vec3_exports.create();
      this._headToTail = vec3_exports.create();
      this._inertia = vec3_exports.create();
      this._stiffness = vec3_exports.create();
      this._external = vec3_exports.create();
      this._rightVector = vec3_exports.set(vec3_exports.create(), 1, 0, 0);
      this._upVector = vec3_exports.set(vec3_exports.create(), 0, 1, 0);
      this._forwardVector = vec3_exports.set(vec3_exports.create(), 0, 0, 1);
      this._identityQuat = quat_exports.identity(quat_exports.create());
      this._rad2deg = 180 / Math.PI;
    }
    start() {
      if (!this.src) {
        console.error("vrm: src property not set");
        return;
      }
      this.engine.scene.append(this.src, { loadGltfExtensions: true }).then(({ root, extensions }) => {
        root.children.forEach((child) => child.parent = this.object);
        this._initializeVrm(extensions);
        root.destroy();
      });
    }
    /**
     * Parses the VRM glTF extensions and initializes the vrm component.
     * @param {GLTFExtensions} extensions The glTF extensions for the VRM model
     */
    _initializeVrm(extensions) {
      if (this._initialized) {
        throw Error("VRM component has already been initialized");
      }
      const VRMC_vrm = extensions.root["VRMC_vrm"];
      if (!VRMC_vrm) {
        throw Error("Missing VRM extensions");
      }
      if (VRMC_vrm.specVersion !== "1.0") {
        throw Error(`Unsupported VRM version, only 1.0 is supported, but encountered '${VRMC_vrm.specVersion}'`);
      }
      this.meta = VRMC_vrm.meta;
      this._parseHumanoid(VRMC_vrm.humanoid, extensions);
      if (VRMC_vrm.firstPerson) {
        this._parseFirstPerson(VRMC_vrm.firstPerson, extensions);
      }
      if (VRMC_vrm.lookAt) {
        this._parseLookAt(VRMC_vrm.lookAt);
      }
      this._findAndParseNodeConstraints(extensions);
      const springBone = extensions.root["VRMC_springBone"];
      if (springBone) {
        this._parseAndInitializeSpringBones(springBone, extensions);
      }
      this._initialized = true;
    }
    _parseHumanoid(humanoid, extensions) {
      for (const boneName in humanoid.humanBones) {
        if (!(boneName in this.bones)) {
          console.warn(`Unrecognized bone '${boneName}'`);
          continue;
        }
        const node = humanoid.humanBones[boneName].node;
        const objectId = extensions.idMapping[node];
        this.bones[boneName] = this.engine.wrapObject(objectId);
        this.restPose[boneName] = quat_exports.copy(quat_exports.create(), this.bones[boneName].rotationLocal);
      }
    }
    _parseFirstPerson(firstPerson, extensions) {
      for (const meshAnnotation of firstPerson.meshAnnotations) {
        const annotation = {
          node: this.engine.wrapObject(extensions.idMapping[meshAnnotation.node]),
          firstPerson: true,
          thirdPerson: true
        };
        switch (meshAnnotation.type) {
          case "firstPersonOnly":
            annotation.thirdPerson = false;
            break;
          case "thirdPersonOnly":
            annotation.firstPerson = false;
            break;
          case "both":
            break;
          case "auto":
            console.warn("First person mesh annotation type 'auto' is not supported, treating as 'both'!");
            break;
          default:
            console.error(`Invalid mesh annotation type '${meshAnnotation.type}'`);
            break;
        }
        this._firstPersonAnnotations.push(annotation);
      }
    }
    _parseLookAt(lookAt2) {
      if (lookAt2.type !== "bone") {
        console.warn(`Unsupported lookAt type '${lookAt2.type}', only 'bone' is supported`);
        return;
      }
      const parseRangeMap = (rangeMap) => {
        return {
          inputMaxValue: rangeMap.inputMaxValue,
          outputScale: rangeMap.outputScale
        };
      };
      this._lookAt = {
        offsetFromHeadBone: lookAt2.offsetFromHeadBone || [0, 0, 0],
        horizontalInner: parseRangeMap(lookAt2.rangeMapHorizontalInner),
        horizontalOuter: parseRangeMap(lookAt2.rangeMapHorizontalOuter),
        verticalDown: parseRangeMap(lookAt2.rangeMapVerticalDown),
        verticalUp: parseRangeMap(lookAt2.rangeMapVerticalUp)
      };
    }
    _findAndParseNodeConstraints(extensions) {
      const traverse = (object) => {
        const nodeExtensions = extensions.node[object.objectId];
        if (nodeExtensions && "VRMC_node_constraint" in nodeExtensions) {
          const nodeConstraintExtension = nodeExtensions["VRMC_node_constraint"];
          const constraint = nodeConstraintExtension.constraint;
          let type, axis;
          if ("roll" in constraint) {
            type = "roll";
            axis = VRM_ROLL_AXES[constraint.roll.rollAxis];
          } else if ("aim" in constraint) {
            type = "aim";
            axis = VRM_AIM_AXES[constraint.aim.aimAxis];
          } else if ("rotation" in constraint) {
            type = "rotation";
          }
          if (type) {
            const source = this.engine.wrapObject(extensions.idMapping[constraint[type].source]);
            this._nodeConstraints.push({
              type,
              source,
              destination: object,
              axis,
              weight: constraint[type].weight,
              /* Rest pose */
              destinationRestLocalRotation: quat_exports.copy(quat_exports.create(), object.rotationLocal),
              sourceRestLocalRotation: quat_exports.copy(quat_exports.create(), source.rotationLocal),
              sourceRestLocalRotationInv: quat_exports.invert(quat_exports.create(), source.rotationLocal)
            });
          } else {
            console.warn("Unrecognized or invalid VRMC_node_constraint, ignoring it");
          }
        }
        for (const child of object.children) {
          traverse(child);
        }
      };
      traverse(this.object);
    }
    _parseAndInitializeSpringBones(springBone, extensions) {
      const colliders = (springBone.colliders || []).map((collider, i) => {
        const shapeType = "capsule" in collider.shape ? "capsule" : "sphere";
        return {
          id: i,
          object: this.engine.wrapObject(extensions.idMapping[collider.node]),
          shape: {
            isCapsule: shapeType === "capsule",
            radius: collider.shape[shapeType].radius,
            offset: collider.shape[shapeType].offset,
            tail: collider.shape[shapeType].tail
          },
          cache: {
            head: vec3_exports.create(),
            tail: vec3_exports.create()
          }
        };
      });
      this._sphereColliders = colliders.filter((c) => !c.shape.isCapsule);
      this._capsuleColliders = colliders.filter((c) => c.shape.isCapsule);
      const colliderGroups = (springBone.colliderGroups || []).map((group) => ({
        name: group.name,
        colliders: group.colliders.map((c) => colliders[c])
      }));
      for (const spring of springBone.springs) {
        const joints = [];
        for (const joint of spring.joints) {
          const springJoint = {
            hitRadius: 0,
            stiffness: 1,
            gravityPower: 0,
            gravityDir: [0, -1, 0],
            dragForce: 0.5,
            node: null,
            state: null
          };
          Object.assign(springJoint, joint);
          springJoint.node = this.engine.wrapObject(extensions.idMapping[springJoint.node]);
          joints.push(springJoint);
        }
        const springChainColliders = (spring.colliderGroups || []).flatMap((cg) => colliderGroups[cg].colliders);
        this._springChains.push({
          name: spring.name,
          center: spring.center ? this.engine.wrapObject(extensions.idMapping[spring.center]) : null,
          joints,
          sphereColliders: springChainColliders.filter((c) => !c.shape.isCapsule),
          capsuleColliders: springChainColliders.filter((c) => c.shape.isCapsule)
        });
      }
      for (const springChain of this._springChains) {
        for (let i = 0; i < springChain.joints.length - 1; ++i) {
          const springBoneJoint = springChain.joints[i];
          const childSpringBoneJoint = springChain.joints[i + 1];
          const springBonePosition = springBoneJoint.node.getTranslationWorld(vec3_exports.create());
          const childSpringBonePosition = childSpringBoneJoint.node.getTranslationWorld(vec3_exports.create());
          const boneDirection = vec3_exports.subtract(this._tempV3A, springBonePosition, childSpringBonePosition);
          const state = {
            prevTail: childSpringBonePosition,
            currentTail: vec3_exports.copy(vec3_exports.create(), childSpringBonePosition),
            initialLocalRotation: quat_exports.copy(quat_exports.create(), springBoneJoint.node.rotationLocal),
            initialLocalTransformInvert: quat2_exports.invert(quat2_exports.create(), springBoneJoint.node.transformLocal),
            boneAxis: vec3_exports.normalize(vec3_exports.create(), childSpringBoneJoint.node.getTranslationLocal(this._tempV3)),
            /* Ensure bone length is at least 1cm to avoid jittery behaviour from zero-length bones */
            boneLength: Math.max(0.01, vec3_exports.length(boneDirection)),
            /* Tail positions in center space, if needed */
            prevTailCenter: null,
            currentTailCenter: null
          };
          if (springChain.center) {
            state.prevTailCenter = springChain.center.transformPointInverseWorld(vec3_exports.create(), childSpringBonePosition);
            state.currentTailCenter = vec3_exports.copy(vec3_exports.create(), childSpringBonePosition);
          }
          springBoneJoint.state = state;
        }
      }
    }
    update(dt) {
      if (!this._initialized) {
        return;
      }
      this._resolveLookAt();
      this._resolveConstraints();
      this._updateSpringBones(dt);
    }
    _rangeMap(rangeMap, input) {
      const maxValue = rangeMap.inputMaxValue;
      const outputScale = rangeMap.outputScale;
      return Math.min(input, maxValue) / maxValue * outputScale;
    }
    _resolveLookAt() {
      if (!this._lookAt || !this.lookAtTarget) {
        return;
      }
      const lookAtSource = this.bones.head.transformPointWorld(this._tempV3A, this._lookAt.offsetFromHeadBone);
      const lookAtTarget = this.lookAtTarget.getTranslationWorld(this._tempV3B);
      const lookAtDirection = vec3_exports.sub(this._tempV3A, lookAtTarget, lookAtSource);
      vec3_exports.normalize(lookAtDirection, lookAtDirection);
      this.bones.head.parent.transformVectorInverseWorld(lookAtDirection);
      const z = vec3_exports.dot(lookAtDirection, this._forwardVector);
      const x = vec3_exports.dot(lookAtDirection, this._rightVector);
      const yaw = Math.atan2(x, z) * this._rad2deg;
      const xz = Math.sqrt(x * x + z * z);
      const y = vec3_exports.dot(lookAtDirection, this._upVector);
      let pitch = Math.atan2(-y, xz) * this._rad2deg;
      if (pitch > 0) {
        pitch = this._rangeMap(this._lookAt.verticalDown, pitch);
      } else {
        pitch = -this._rangeMap(this._lookAt.verticalUp, -pitch);
      }
      if (this.bones.leftEye) {
        let yawLeft = yaw;
        if (yawLeft > 0) {
          yawLeft = this._rangeMap(this._lookAt.horizontalInner, yawLeft);
        } else {
          yawLeft = -this._rangeMap(this._lookAt.horizontalOuter, -yawLeft);
        }
        const eyeRotation = quat_exports.fromEuler(this._tempQuatA, pitch, yawLeft, 0);
        this.bones.leftEye.rotationLocal = quat_exports.multiply(eyeRotation, this.restPose.leftEye, eyeRotation);
      }
      if (this.bones.rightEye) {
        let yawRight = yaw;
        if (yawRight > 0) {
          yawRight = this._rangeMap(this._lookAt.horizontalOuter, yawRight);
        } else {
          yawRight = -this._rangeMap(this._lookAt.horizontalInner, -yawRight);
        }
        const eyeRotation = quat_exports.fromEuler(this._tempQuatA, pitch, yawRight, 0);
        this.bones.rightEye.rotationLocal = quat_exports.multiply(eyeRotation, this.restPose.rightEye, eyeRotation);
      }
    }
    _resolveConstraints() {
      for (const nodeConstraint of this._nodeConstraints) {
        this._resolveConstraint(nodeConstraint);
      }
    }
    _resolveConstraint(nodeConstraint) {
      const dstRestQuat = nodeConstraint.destinationRestLocalRotation;
      const srcRestQuatInv = nodeConstraint.sourceRestLocalRotationInv;
      const targetQuat = quat_exports.identity(this._tempQuatA);
      switch (nodeConstraint.type) {
        case "roll":
          {
            const deltaSrcQuat = quat_exports.multiply(this._tempQuatA, srcRestQuatInv, nodeConstraint.source.rotationLocal);
            const deltaSrcQuatInParent = quat_exports.multiply(this._tempQuatA, nodeConstraint.sourceRestLocalRotation, deltaSrcQuat);
            quat_exports.mul(deltaSrcQuatInParent, deltaSrcQuatInParent, srcRestQuatInv);
            const dstRestQuatInv = quat_exports.invert(this._tempQuatB, dstRestQuat);
            const deltaSrcQuatInDst = quat_exports.multiply(this._tempQuatB, dstRestQuatInv, deltaSrcQuatInParent);
            quat_exports.multiply(deltaSrcQuatInDst, deltaSrcQuatInDst, dstRestQuat);
            const toVec = vec3_exports.transformQuat(this._tempV3A, nodeConstraint.axis, deltaSrcQuatInDst);
            const fromToQuat = quat_exports.rotationTo(this._tempQuatA, nodeConstraint.axis, toVec);
            quat_exports.mul(targetQuat, dstRestQuat, quat_exports.invert(this._tempQuat, fromToQuat));
            quat_exports.mul(targetQuat, targetQuat, deltaSrcQuatInDst);
          }
          break;
        case "aim":
          {
            const dstParentWorldQuat = nodeConstraint.destination.parent.rotationWorld;
            const fromVec = vec3_exports.transformQuat(this._tempV3A, nodeConstraint.axis, dstRestQuat);
            vec3_exports.transformQuat(fromVec, fromVec, dstParentWorldQuat);
            const toVec = nodeConstraint.source.getTranslationWorld(this._tempV3B);
            vec3_exports.sub(toVec, toVec, nodeConstraint.destination.getTranslationWorld(this._tempV3));
            vec3_exports.normalize(toVec, toVec);
            const fromToQuat = quat_exports.rotationTo(this._tempQuatA, fromVec, toVec);
            quat_exports.mul(targetQuat, quat_exports.invert(this._tempQuat, dstParentWorldQuat), fromToQuat);
            quat_exports.mul(targetQuat, targetQuat, dstParentWorldQuat);
            quat_exports.mul(targetQuat, targetQuat, dstRestQuat);
          }
          break;
        case "rotation":
          {
            const srcDeltaQuat = quat_exports.mul(targetQuat, srcRestQuatInv, nodeConstraint.source.rotationLocal);
            quat_exports.mul(targetQuat, dstRestQuat, srcDeltaQuat);
          }
          break;
      }
      quat_exports.slerp(targetQuat, dstRestQuat, targetQuat, nodeConstraint.weight);
      nodeConstraint.destination.rotationLocal = targetQuat;
    }
    _updateSpringBones(dt) {
      this._sphereColliders.forEach(({ object, shape, cache }) => {
        const offset2 = vec3_exports.copy(cache.head, shape.offset);
        object.transformVectorWorld(offset2);
        vec3_exports.add(cache.head, object.getTranslationWorld(this._tempV3), offset2);
      });
      this._capsuleColliders.forEach(({ object, shape, cache }) => {
        const shapeCenter = object.getTranslationWorld(this._tempV3A);
        const headOffset = vec3_exports.copy(cache.head, shape.offset);
        object.transformVectorWorld(headOffset);
        vec3_exports.add(cache.head, shapeCenter, headOffset);
        const tailOffset = vec3_exports.copy(cache.tail, shape.tail);
        object.transformVectorWorld(tailOffset);
        vec3_exports.add(cache.tail, shapeCenter, tailOffset);
      });
      this._springChains.forEach((springChain) => {
        for (let i = 0; i < springChain.joints.length - 1; ++i) {
          const joint = springChain.joints[i];
          const parentWorldRotation = joint.node.parent ? joint.node.parent.rotationWorld : this._identityQuat;
          const inertia = this._inertia;
          if (springChain.center) {
            vec3_exports.sub(inertia, joint.state.currentTailCenter, joint.state.prevTailCenter);
            springChain.center.transformVectorWorld(inertia);
          } else {
            vec3_exports.sub(inertia, joint.state.currentTail, joint.state.prevTail);
          }
          vec3_exports.scale(inertia, inertia, 1 - joint.dragForce);
          const stiffness = vec3_exports.copy(this._stiffness, joint.state.boneAxis);
          vec3_exports.transformQuat(stiffness, stiffness, joint.state.initialLocalRotation);
          vec3_exports.transformQuat(stiffness, stiffness, parentWorldRotation);
          vec3_exports.scale(stiffness, stiffness, dt * joint.stiffness);
          const external = vec3_exports.scale(this._external, joint.gravityDir, dt * joint.gravityPower);
          const nextTail = vec3_exports.copy(this._tempV3A, joint.state.currentTail);
          vec3_exports.add(nextTail, nextTail, inertia);
          vec3_exports.add(nextTail, nextTail, stiffness);
          vec3_exports.add(nextTail, nextTail, external);
          const worldPosition = joint.node.getTranslationWorld(this._tempV3B);
          vec3_exports.sub(nextTail, nextTail, worldPosition);
          vec3_exports.normalize(nextTail, nextTail);
          vec3_exports.scaleAndAdd(nextTail, worldPosition, nextTail, joint.state.boneLength);
          for (const { shape, cache } of springChain.sphereColliders) {
            let tailToShape = this._tailToShape;
            const sphereCenter = cache.head;
            tailToShape = vec3_exports.sub(tailToShape, nextTail, sphereCenter);
            const radius = shape.radius + joint.hitRadius;
            const dist2 = vec3_exports.length(tailToShape) - radius;
            if (dist2 < 0) {
              vec3_exports.normalize(tailToShape, tailToShape);
              vec3_exports.scaleAndAdd(nextTail, nextTail, tailToShape, -dist2);
              vec3_exports.sub(nextTail, nextTail, worldPosition);
              vec3_exports.normalize(nextTail, nextTail);
              vec3_exports.scaleAndAdd(nextTail, worldPosition, nextTail, joint.state.boneLength);
            }
          }
          for (const { shape, cache } of springChain.capsuleColliders) {
            let tailToShape = this._tailToShape;
            const head = cache.head;
            const tail = cache.tail;
            tailToShape = vec3_exports.sub(tailToShape, nextTail, head);
            const headToTail = vec3_exports.sub(this._headToTail, tail, head);
            const dot5 = vec3_exports.dot(headToTail, tailToShape);
            if (vec3_exports.squaredLength(headToTail) <= dot5) {
              vec3_exports.sub(tailToShape, nextTail, tail);
            } else if (dot5 > 0) {
              vec3_exports.scale(headToTail, headToTail, dot5 / vec3_exports.squaredLength(headToTail));
              vec3_exports.sub(tailToShape, tailToShape, headToTail);
            }
            const radius = shape.radius + joint.hitRadius;
            const dist2 = vec3_exports.length(tailToShape) - radius;
            if (dist2 < 0) {
              vec3_exports.normalize(tailToShape, tailToShape);
              vec3_exports.scaleAndAdd(nextTail, nextTail, tailToShape, -dist2);
              vec3_exports.sub(nextTail, nextTail, worldPosition);
              vec3_exports.normalize(nextTail, nextTail);
              vec3_exports.scaleAndAdd(nextTail, worldPosition, nextTail, joint.state.boneLength);
            }
          }
          vec3_exports.copy(joint.state.prevTail, joint.state.currentTail);
          vec3_exports.copy(joint.state.currentTail, nextTail);
          if (springChain.center) {
            vec3_exports.copy(joint.state.prevTailCenter, joint.state.currentTailCenter);
            vec3_exports.copy(joint.state.currentTailCenter, nextTail);
            springChain.center.transformPointInverseWorld(joint.state.currentTailCenter);
          }
          joint.node.parent.transformPointInverseWorld(nextTail);
          const nextTailDualQuat = quat2_exports.fromTranslation(this._tempQuat2, nextTail);
          quat2_exports.multiply(nextTailDualQuat, joint.state.initialLocalTransformInvert, nextTailDualQuat);
          quat2_exports.getTranslation(nextTail, nextTailDualQuat);
          vec3_exports.normalize(nextTail, nextTail);
          const jointRotation = quat_exports.rotationTo(this._tempQuatA, joint.state.boneAxis, nextTail);
          joint.node.rotationLocal = quat_exports.mul(this._tempQuatA, joint.state.initialLocalRotation, jointRotation);
        }
      });
    }
    /**
     * @param {boolean} firstPerson Whether the model should render for first person or third person views
     */
    set firstPerson(firstPerson) {
      this._firstPersonAnnotations.forEach((annotation) => {
        const visible = firstPerson == annotation.firstPerson || firstPerson != annotation.thirdPerson;
        annotation.node.getComponents("mesh").forEach((mesh) => {
          mesh.active = visible;
        });
      });
    }
  };
  __publicField(Vrm, "TypeName", "vrm");
  __publicField(Vrm, "Properties", {
    /** URL to a VRM file to load */
    src: { type: Type.String },
    /** Object the VRM is looking at */
    lookAtTarget: { type: Type.Object }
  });

  // node_modules/@wonderlandengine/components/dist/wasd-controls.js
  var _direction = new Float32Array(3);
  var WasdControlsComponent = class extends Component3 {
    init() {
      this.up = false;
      this.right = false;
      this.down = false;
      this.left = false;
      window.addEventListener("keydown", this.press.bind(this));
      window.addEventListener("keyup", this.release.bind(this));
    }
    start() {
      this.headObject = this.headObject || this.object;
    }
    update() {
      vec3_exports.zero(_direction);
      if (this.up)
        _direction[2] -= 1;
      if (this.down)
        _direction[2] += 1;
      if (this.left)
        _direction[0] -= 1;
      if (this.right)
        _direction[0] += 1;
      vec3_exports.normalize(_direction, _direction);
      _direction[0] *= this.speed;
      _direction[2] *= this.speed;
      vec3_exports.transformQuat(_direction, _direction, this.headObject.transformWorld);
      if (this.lockY) {
        _direction[1] = 0;
        vec3_exports.normalize(_direction, _direction);
        vec3_exports.scale(_direction, _direction, this.speed);
      }
      this.object.translateLocal(_direction);
    }
    press(e) {
      if (e.keyCode === 38 || e.keyCode === 87 || e.keyCode === 90) {
        this.up = true;
      } else if (e.keyCode === 39 || e.keyCode === 68) {
        this.right = true;
      } else if (e.keyCode === 40 || e.keyCode === 83) {
        this.down = true;
      } else if (e.keyCode === 37 || e.keyCode === 65 || e.keyCode === 81) {
        this.left = true;
      }
    }
    release(e) {
      if (e.keyCode === 38 || e.keyCode === 87 || e.keyCode === 90) {
        this.up = false;
      } else if (e.keyCode === 39 || e.keyCode === 68) {
        this.right = false;
      } else if (e.keyCode === 40 || e.keyCode === 83) {
        this.down = false;
      } else if (e.keyCode === 37 || e.keyCode === 65 || e.keyCode === 81) {
        this.left = false;
      }
    }
  };
  __publicField(WasdControlsComponent, "TypeName", "wasd-controls");
  __publicField(WasdControlsComponent, "Properties", {
    /** Movement speed in m/s. */
    speed: { type: Type.Float, default: 0.1 },
    /** Flag for only moving the object on the global x & z planes */
    lockY: { type: Type.Bool, default: false },
    /** Object of which the orientation is used to determine forward direction */
    headObject: { type: Type.Object }
  });

  // node_modules/@wonderlandengine/components/dist/input-profile.js
  var __decorate10 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var _tempVec = vec3_exports.create();
  var _tempQuat = quat_exports.create();
  var _tempRotation1 = new Float32Array(4);
  var _tempRotation2 = new Float32Array(4);
  var minTemp = new Float32Array(3);
  var maxTemp = new Float32Array(3);
  var hands = ["left", "right"];
  var _InputProfile = class extends Component3 {
    _gamepadObjects = {};
    _controllerModel = null;
    _defaultControllerComponents;
    _handedness;
    _profileJSON = null;
    _buttons = [];
    _axes = [];
    /**
     * The XR gamepad associated with the current input source.
     */
    gamepad;
    /**
     * A reference to the emitter which triggered on model lodaed event.
     */
    onModelLoaded = new Emitter();
    /**
     * Returns url of input profile json file
     */
    url;
    /**
     * A set of components to filter during component retrieval.
     */
    toFilter = /* @__PURE__ */ new Set(["vr-mode-active-mode-switch"]);
    /**
     * The index representing the handedness of the controller (0 for left, 1 for right).
     */
    handedness = 0;
    /**
     * The base path where XR input profiles are stored.
     */
    defaultBasePath;
    /**
     * An optional folder path for loading custom XR input profiles.
     */
    customBasePath;
    /**
     * The default 3D controller model used when a custom model fails to load.
     */
    defaultController;
    /**
     * The object which has HandTracking component added to it.
     */
    trackedHand;
    /**
     * If true, the input profile will be mapped to the default controller, and no dynamic 3D model of controller will be loaded.
     */
    mapToDefaultController;
    /**
     * If true, adds a VR mode switch component to the loaded controller model.
     */
    addVrModeSwitch;
    onActivate() {
      this._handedness = hands[this.handedness];
      const defaultHandName = "Hand" + this._handedness.charAt(0).toUpperCase() + this._handedness.slice(1);
      this.trackedHand = this.trackedHand ?? this.object.parent?.findByNameRecursive(defaultHandName)[0];
      this.defaultController = this.defaultController || this.object.children[0];
      this._defaultControllerComponents = this._getComponents(this.defaultController);
      this.engine.onXRSessionStart.add(() => {
        this.engine.xr?.session.addEventListener("inputsourceschange", this._onInputSourcesChange.bind(this));
      });
    }
    onDeactivate() {
      this.engine.xr?.session?.removeEventListener("inputsourceschange", this._onInputSourcesChange.bind(this));
    }
    /**
     * Sets newly loaded controllers for the HandTracking component to proper switching.
     * @param controllerObject The controller object.
     * @hidden
     */
    _setHandTrackingControllers(controllerObject) {
      const handtrackingComponent = this.trackedHand.getComponent(HandTracking);
      if (!handtrackingComponent)
        return;
      handtrackingComponent.controllerToDeactivate = controllerObject;
    }
    /**
     * Retrieves all components from the specified object and its children.
     * @param obj The object to retrieve components from.
     * @return An array of components.
     * @hidden
     */
    _getComponents(obj) {
      const components = [];
      if (obj == null)
        return components;
      const stack = [obj];
      while (stack.length > 0) {
        const currentObj = stack.pop();
        const comps = currentObj.getComponents().filter((c) => !this.toFilter.has(c.type));
        components.push(...comps);
        const children = currentObj.children;
        for (let i = children.length - 1; i >= 0; --i) {
          stack.push(children[i]);
        }
      }
      return components;
    }
    /**
     * Activates or deactivates components based on the specified boolean value.
     * @param active If true, components are set to active; otherwise, they are set to inactive.
     * @hidden
     */
    _setComponentsActive(active) {
      const comps = this._defaultControllerComponents;
      if (comps == void 0)
        return;
      for (let i = 0; i < comps.length; ++i) {
        comps[i].active = active;
      }
    }
    /**
     * Event handler triggered when XR input sources change.
     * Detects new XR input sources and initiates the loading of input profiles.
     * @param event The XR input source change event.
     * @hidden
     */
    _onInputSourcesChange(event) {
      if (this._isModelLoaded() && !this.mapToDefaultController) {
        this._setComponentsActive(false);
      }
      event.added.forEach((xrInputSource) => {
        if (xrInputSource.hand != null)
          return;
        if (this._handedness != xrInputSource.handedness)
          return;
        this.gamepad = xrInputSource.gamepad;
        const profile = this.customBasePath !== "" ? this.customBasePath : this.defaultBasePath + xrInputSource.profiles[0];
        this.url = profile + "/profile.json";
        this._profileJSON = _InputProfile.Cache.get(this.url) ?? null;
        if (this._profileJSON != null)
          return;
        fetch(this.url).then((res) => res.json()).then((out) => {
          this._profileJSON = out;
          _InputProfile.Cache.set(this.url, this._profileJSON);
          if (!this._isModelLoaded())
            this._loadAndMapGamepad(profile);
        }).catch((e) => {
          console.error(`Failed to load profile from ${this.url}. Reason:`, e);
        });
      });
    }
    /**
     * Checks if the 3D controller model is loaded.
     * @return True if the model is loaded; otherwise, false.
     * @hidden
     */
    _isModelLoaded() {
      return this._controllerModel !== null;
    }
    /**
     * Loads the 3D controller model and caches the mapping to the gamepad.
     * @param profile The path to the input profile.
     * @hidden
     */
    async _loadAndMapGamepad(profile) {
      const assetPath = profile + "/" + this._handedness + ".glb";
      this._controllerModel = this.defaultController;
      if (!this.mapToDefaultController) {
        try {
          this._controllerModel = await this.engine.scene.append(assetPath);
        } catch (e) {
          console.error(`Failed to load i-p controller model. Reason:`, e, `Continuing with ${this._handedness} default controller.`);
          this._setComponentsActive(true);
        }
        this._controllerModel.parent = this.object;
        this._controllerModel.setPositionLocal([0, 0, 0]);
        this._setComponentsActive(false);
        if (this.addVrModeSwitch)
          this._controllerModel.addComponent(VrModeActiveSwitch);
        this.onModelLoaded.notify();
      }
      this._cacheGamepadObjectsFromProfile(this._profileJSON, this._controllerModel);
      this._setHandTrackingControllers(this._controllerModel);
      this.update = () => this._mapGamepadInput();
    }
    /**
     * Caches gamepad objects (buttons, axes) from the loaded input profile.
     * @hidden
     */
    _cacheGamepadObjectsFromProfile(profile, obj) {
      const components = profile.layouts[this._handedness].components;
      if (!components)
        return;
      this._buttons = [];
      this._axes = [];
      for (const i in components) {
        const visualResponses = components[i].visualResponses;
        for (const j in visualResponses) {
          const visualResponse = visualResponses[j];
          const valueNode = visualResponse.valueNodeName;
          const minNode = visualResponse.minNodeName;
          const maxNode = visualResponse.maxNodeName;
          this._gamepadObjects[valueNode] = obj.findByNameRecursive(valueNode)[0];
          this._gamepadObjects[minNode] = obj.findByNameRecursive(minNode)[0];
          this._gamepadObjects[maxNode] = obj.findByNameRecursive(maxNode)[0];
          const indice = visualResponses[j].componentProperty;
          const response = {
            target: this._gamepadObjects[valueNode],
            min: this._gamepadObjects[minNode],
            max: this._gamepadObjects[maxNode],
            id: components[i].gamepadIndices[indice]
            // Assign a unique ID
          };
          switch (indice) {
            case "button":
              this._buttons.push(response);
              break;
            case "xAxis":
            case "yAxis":
              this._axes.push(response);
              break;
          }
        }
      }
    }
    /**
     * Assigns a transformed position and rotation to the target based on minimum and maximum values and a normalized input value.
     * @param target The target object to be transformed.
     * @param min The minimum object providing transformation limits.
     * @param max The maximum object providing transformation limits.
     * @param value The normalized input value.
     * @hidden
     */
    _assignTransform(target, min2, max2, value) {
      vec3_exports.lerp(_tempVec, min2.getPositionWorld(minTemp), max2.getPositionWorld(maxTemp), value);
      target.setPositionWorld(_tempVec);
      quat_exports.lerp(_tempQuat, min2.getRotationWorld(_tempRotation1), max2.getRotationWorld(_tempRotation2), value);
      quat_exports.normalize(_tempQuat, _tempQuat);
      target.setRotationWorld(_tempQuat);
    }
    /**
     * Maps input values (buttons, axes) to the 3D controller model.
     * @hidden
     */
    _mapGamepadInput() {
      for (const button of this._buttons) {
        const buttonValue = this.gamepad.buttons[button.id].value;
        this._assignTransform(button.target, button.min, button.max, buttonValue);
      }
      for (const axis of this._axes) {
        const axisValue = this.gamepad.axes[axis.id];
        const normalizedAxisValue = (axisValue + 1) / 2;
        this._assignTransform(axis.target, axis.min, axis.max, normalizedAxisValue);
      }
    }
  };
  var InputProfile = _InputProfile;
  __publicField(InputProfile, "TypeName", "input-profile");
  /**
   * A cache to store loaded profiles for reuse.
   */
  __publicField(InputProfile, "Cache", /* @__PURE__ */ new Map());
  __decorate10([
    property.enum(hands, 0)
  ], InputProfile.prototype, "handedness", void 0);
  __decorate10([
    property.string("https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@latest/dist/profiles/")
  ], InputProfile.prototype, "defaultBasePath", void 0);
  __decorate10([
    property.string()
  ], InputProfile.prototype, "customBasePath", void 0);
  __decorate10([
    property.object()
  ], InputProfile.prototype, "defaultController", void 0);
  __decorate10([
    property.object()
  ], InputProfile.prototype, "trackedHand", void 0);
  __decorate10([
    property.bool(false)
  ], InputProfile.prototype, "mapToDefaultController", void 0);
  __decorate10([
    property.bool(true)
  ], InputProfile.prototype, "addVrModeSwitch", void 0);

  // node_modules/@wonderlandengine/components/dist/orbital-camera.js
  var __decorate11 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var preventDefault2 = (e) => {
    e.preventDefault();
  };
  var tempVec4 = [0, 0, 0];
  var tempquat = quat_exports.create();
  var tempquat2 = quat_exports.create();
  var tempVec33 = vec3_exports.create();
  var OrbitalCamera = class extends Component3 {
    mouseButtonIndex = 0;
    radial = 5;
    minElevation = 0;
    maxElevation = 89.99;
    minZoom = 0.01;
    maxZoom = 10;
    xSensitivity = 0.5;
    ySensitivity = 0.5;
    zoomSensitivity = 0.02;
    damping = 0.9;
    _mouseDown = false;
    _origin = [0, 0, 0];
    _azimuth = 0;
    _polar = 45;
    _initialPinchDistance = 0;
    _touchStartX = 0;
    _touchStartY = 0;
    _azimuthSpeed = 0;
    _polarSpeed = 0;
    init() {
      this.object.getPositionWorld(this._origin);
    }
    start() {
      this._updateCamera();
    }
    onActivate() {
      const canvas2 = this.engine.canvas;
      if (this.mouseButtonIndex === 2) {
        canvas2.addEventListener("contextmenu", preventDefault2, { passive: false });
      }
      canvas2.addEventListener("mousedown", this._onMouseDown);
      canvas2.addEventListener("wheel", this._onMouseScroll, { passive: false });
      canvas2.addEventListener("touchstart", this._onTouchStart, { passive: false });
      canvas2.addEventListener("touchmove", this._onTouchMove, { passive: false });
      canvas2.addEventListener("touchend", this._onTouchEnd);
    }
    onDeactivate() {
      const canvas2 = this.engine.canvas;
      if (this.mouseButtonIndex === 2) {
        canvas2.removeEventListener("contextmenu", preventDefault2);
      }
      canvas2.removeEventListener("mousemove", this._onMouseMove);
      canvas2.removeEventListener("mousedown", this._onMouseDown);
      canvas2.removeEventListener("wheel", this._onMouseScroll);
      canvas2.removeEventListener("touchstart", this._onTouchStart);
      canvas2.removeEventListener("touchmove", this._onTouchMove);
      canvas2.removeEventListener("touchend", this._onTouchEnd);
      this._mouseDown = false;
      this._initialPinchDistance = 0;
      this._touchStartX = 0;
      this._touchStartY = 0;
      this._azimuthSpeed = 0;
      this._polarSpeed = 0;
    }
    update() {
      this._azimuthSpeed *= this.damping;
      this._polarSpeed *= this.damping;
      if (Math.abs(this._azimuthSpeed) < 0.01)
        this._azimuthSpeed = 0;
      if (Math.abs(this._polarSpeed) < 0.01)
        this._polarSpeed = 0;
      this._azimuth += this._azimuthSpeed;
      this._polar += this._polarSpeed;
      this._polar = Math.min(this.maxElevation, Math.max(this.minElevation, this._polar));
      if (this._azimuthSpeed !== 0 || this._polarSpeed !== 0) {
        this._updateCamera();
      }
    }
    /**
     * Get the closest position to the given position on the orbit sphere of the camera.
     * This can be used to get a position and rotation to transition to.
     *
     * You pass this a position object. The method calculates the closest positition and updates the position parameter.
     * It also sets the rotation parameter to reflect the rotate the camera will have when it is on the orbit sphere,
     * pointing towards the center.
     * @param position the position to get the closest position to
     * @param rotation the rotation to get the closest position to
     */
    getClosestPosition(position, rotation) {
      this.object.getRotationWorld(tempquat);
      this.object.lookAt(this._origin);
      this.object.getRotationWorld(tempquat2);
      if (quat_exports.dot(tempquat, tempquat2) < 0) {
        quat_exports.scale(tempquat2, tempquat2, -1);
      }
      this.object.setRotationWorld(tempquat);
      const directionToCamera = vec3_exports.create();
      vec3_exports.subtract(directionToCamera, position, this._origin);
      vec3_exports.normalize(directionToCamera, directionToCamera);
      const nearestPointOnSphere = vec3_exports.create();
      vec3_exports.scale(nearestPointOnSphere, directionToCamera, this.radial);
      vec3_exports.add(nearestPointOnSphere, nearestPointOnSphere, this._origin);
      vec3_exports.copy(position, nearestPointOnSphere);
      quat_exports.copy(rotation, tempquat2);
    }
    /**
     * Set the camera position based on the given position and calculate the rotation.
     * @param cameraPosition the position to set the camera to
     */
    setPosition(cameraPosition) {
      const centerOfOrbit = this._origin;
      vec3_exports.subtract(tempVec33, cameraPosition, centerOfOrbit);
      vec3_exports.normalize(tempVec33, tempVec33);
      const azimuth = Math.atan2(tempVec33[0], tempVec33[2]);
      const polar = Math.acos(tempVec33[1]);
      const azimuthDeg = rad2deg(azimuth);
      const polarDeg = 90 - rad2deg(polar);
      this._azimuth = azimuthDeg;
      this._polar = polarDeg;
    }
    /**
     * Update the camera position based on the current azimuth,
     * polar and radial values
     */
    _updateCamera() {
      const azimuthInRadians = deg2rad(this._azimuth);
      const polarInRadians = deg2rad(this._polar);
      tempVec4[0] = this.radial * Math.sin(azimuthInRadians) * Math.cos(polarInRadians);
      tempVec4[1] = this.radial * Math.sin(polarInRadians);
      tempVec4[2] = this.radial * Math.cos(azimuthInRadians) * Math.cos(polarInRadians);
      this.object.setPositionWorld(tempVec4);
      this.object.translateWorld(this._origin);
      this.object.lookAt(this._origin);
    }
    /* Mouse Event Handlers */
    _onMouseDown = (e) => {
      window.addEventListener("mouseup", this._onMouseUp);
      window.addEventListener("mousemove", this._onMouseMove);
      if (e.button === this.mouseButtonIndex) {
        this._mouseDown = true;
        document.body.style.cursor = "grabbing";
        if (e.button === 1) {
          e.preventDefault();
          return false;
        }
      }
    };
    _onMouseUp = (e) => {
      window.removeEventListener("mouseup", this._onMouseUp);
      window.removeEventListener("mousemove", this._onMouseMove);
      if (e.button === this.mouseButtonIndex) {
        this._mouseDown = false;
        document.body.style.cursor = "initial";
      }
    };
    _onMouseMove = (e) => {
      if (this.active && this._mouseDown) {
        if (this.active && this._mouseDown) {
          this._azimuthSpeed = -(e.movementX * this.xSensitivity);
          this._polarSpeed = e.movementY * this.ySensitivity;
        }
      }
    };
    _onMouseScroll = (e) => {
      e.preventDefault();
      this.radial *= 1 - e.deltaY * this.zoomSensitivity * -1e-3;
      this.radial = Math.min(this.maxZoom, Math.max(this.minZoom, this.radial));
      this._updateCamera();
    };
    /* Touch event handlers */
    _onTouchStart = (e) => {
      if (e.touches.length === 1) {
        e.preventDefault();
        this._touchStartX = e.touches[0].clientX;
        this._touchStartY = e.touches[0].clientY;
        this._mouseDown = true;
      } else if (e.touches.length === 2) {
        this._initialPinchDistance = this._getDistanceBetweenTouches(e.touches);
        e.preventDefault();
      }
    };
    _onTouchMove = (e) => {
      if (!this.active || !this._mouseDown) {
        return;
      }
      e.preventDefault();
      if (e.touches.length === 1) {
        const deltaX = e.touches[0].clientX - this._touchStartX;
        const deltaY = e.touches[0].clientY - this._touchStartY;
        this._azimuthSpeed = -(deltaX * this.xSensitivity);
        this._polarSpeed = deltaY * this.ySensitivity;
        this._touchStartX = e.touches[0].clientX;
        this._touchStartY = e.touches[0].clientY;
      } else if (e.touches.length === 2) {
        const currentPinchDistance = this._getDistanceBetweenTouches(e.touches);
        const pinchScale = this._initialPinchDistance / currentPinchDistance;
        this.radial *= pinchScale;
        this.radial = Math.min(this.maxZoom, Math.max(this.minZoom, this.radial));
        this._updateCamera();
        this._initialPinchDistance = currentPinchDistance;
      }
    };
    _onTouchEnd = (e) => {
      if (e.touches.length < 2) {
        this._mouseDown = false;
      }
      if (e.touches.length === 1) {
        this._touchStartX = e.touches[0].clientX;
        this._touchStartY = e.touches[0].clientY;
      }
    };
    /**
     * Helper function to calculate the distance between two touch points
     * @param touches list of touch points
     * @returns distance between the two touch points
     */
    _getDistanceBetweenTouches(touches) {
      const dx = touches[0].clientX - touches[1].clientX;
      const dy = touches[0].clientY - touches[1].clientY;
      return Math.sqrt(dx * dx + dy * dy);
    }
  };
  __publicField(OrbitalCamera, "TypeName", "orbital-camera");
  __decorate11([
    property.int()
  ], OrbitalCamera.prototype, "mouseButtonIndex", void 0);
  __decorate11([
    property.float(5)
  ], OrbitalCamera.prototype, "radial", void 0);
  __decorate11([
    property.float()
  ], OrbitalCamera.prototype, "minElevation", void 0);
  __decorate11([
    property.float(89.99)
  ], OrbitalCamera.prototype, "maxElevation", void 0);
  __decorate11([
    property.float()
  ], OrbitalCamera.prototype, "minZoom", void 0);
  __decorate11([
    property.float(10)
  ], OrbitalCamera.prototype, "maxZoom", void 0);
  __decorate11([
    property.float(0.5)
  ], OrbitalCamera.prototype, "xSensitivity", void 0);
  __decorate11([
    property.float(0.5)
  ], OrbitalCamera.prototype, "ySensitivity", void 0);
  __decorate11([
    property.float(0.02)
  ], OrbitalCamera.prototype, "zoomSensitivity", void 0);
  __decorate11([
    property.float(0.9)
  ], OrbitalCamera.prototype, "damping", void 0);

  // js/spawn-mesh-on-select.js
  var spawn_mesh_on_select_exports = {};
  __export(spawn_mesh_on_select_exports, {
    SpawnMeshOnSelect: () => SpawnMeshOnSelect
  });
  var SpawnMeshOnSelect = class extends Component3 {
    start() {
      this.engine.onXRSessionStart.add(this.onXRSessionStart.bind(this));
    }
    onXRSessionStart(s) {
      s.addEventListener("select", this.spawnMesh.bind(this));
    }
    spawnMesh() {
      const spawnedObject = this.engine.scene.addObject();
      spawnedObject.setTransformLocal(this.object.getTransformWorld()).scale([0.25, 0.25, 0.25]).translate([0, 0.25, 0]);
      const mesh = spawnedObject.addComponent(MeshComponent);
      mesh.material = this.material;
      mesh.mesh = this.mesh;
      mesh.active = true;
    }
  };
  __publicField(SpawnMeshOnSelect, "TypeName", "spawn-mesh-on-select");
  __publicField(SpawnMeshOnSelect, "Properties", {
    /* The mesh to spawn */
    mesh: Property.mesh(),
    /* The material to spawn the mesh with */
    material: Property.material()
  });

  // cache/js/_editor_index.js
  _registerEditor(dist_exports);
  _registerEditor(spawn_mesh_on_select_exports);
})();
/*! Bundled license information:

howler/dist/howler.js:
  (*!
   *  howler.js v2.2.4
   *  howlerjs.com
   *
   *  (c) 2013-2020, James Simpson of GoldFire Studios
   *  goldfirestudios.com
   *
   *  MIT License
   *)
  (*!
   *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
   *  
   *  howler.js v2.2.4
   *  howlerjs.com
   *
   *  (c) 2013-2020, James Simpson of GoldFire Studios
   *  goldfirestudios.com
   *
   *  MIT License
   *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vbm9kZV9tb2R1bGVzL2hvd2xlci9kaXN0L2hvd2xlci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZWFyY3V0L3NyYy9lYXJjdXQuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC9pbmRleC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvbm9kZV9tb2R1bGVzL3dhc20tZmVhdHVyZS1kZXRlY3QvZGlzdC9lc20vaW5kZXguanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9zcmMvcHJvcGVydHkudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9zcmMvZGVjb3JhdG9ycy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvYXBpL3NyYy91dGlscy9vYmplY3QudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9zcmMvdXRpbHMvZXZlbnQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9zcmMvcmVzb3VyY2VzL3Jlc291cmNlLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9hcGkvc3JjL2NvbXBvbmVudC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvYXBpL3NyYy91dGlscy9mZXRjaC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvYXBpL3NyYy9wcmVmYWIudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9zcmMvdXRpbHMvbWlzYy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvYXBpL3NyYy93b25kZXJsYW5kLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9hcGkvc3JjL3Jlc291cmNlcy9tYXRlcmlhbC1tYW5hZ2VyLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9hcGkvc3JjL3Jlc291cmNlcy9tZXNoLW1hbmFnZXIudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9zcmMvcmVzb3VyY2VzL3RleHR1cmUtbWFuYWdlci50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvYXBpL3NyYy9zY2VuZS1nbHRmLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9hcGkvc3JjL3NjZW5lLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9hcGkvc3JjL2VuZ2luZS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvYXBpL3NyYy91dGlscy9iaXRzZXQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9zcmMvdXRpbHMvbG9nZ2VyLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9hcGkvc3JjL3V0aWxzL2Nib3IudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9zcmMvd2FzbS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvYXBpL3NyYy92ZXJzaW9uLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9hcGkvc3JjL2luZGV4LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvOHRod2FsbC1jYW1lcmEuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC91dGlscy93ZWJ4ci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L2FuY2hvci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L2N1cnNvci10YXJnZXQuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dsLW1hdHJpeC9lc20vY29tbW9uLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9nbC1tYXRyaXgvZXNtL21hdDMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dsLW1hdHJpeC9lc20vbWF0NC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZ2wtbWF0cml4L2VzbS9xdWF0LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9nbC1tYXRyaXgvZXNtL3ZlYzMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dsLW1hdHJpeC9lc20vdmVjNC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZ2wtbWF0cml4L2VzbS9xdWF0Mi5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L2hpdC10ZXN0LWxvY2F0aW9uLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvY3Vyc29yLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvZGVidWctb2JqZWN0LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvZGV2aWNlLW9yaWVudGF0aW9uLWxvb2suanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC9maW5nZXItY3Vyc29yLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvZml4ZWQtZm92ZWF0aW9uLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvaGFuZC10cmFja2luZy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L2hvd2xlci1hdWRpby1saXN0ZW5lci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L2hvd2xlci1hdWRpby1zb3VyY2UuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC91dGlscy91dGlscy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L2ltYWdlLXRleHR1cmUuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC9tb3VzZS1sb29rLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvcGxheWVyLWhlaWdodC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L3RhcmdldC1mcmFtZXJhdGUuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC90ZWxlcG9ydC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L3RyYWlsLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvdHdvLWpvaW50LWlrLXNvbHZlci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L3ZpZGVvLXRleHR1cmUuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC92ci1tb2RlLWFjdGl2ZS1zd2l0Y2guanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC9wbGFuZS1kZXRlY3Rpb24uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC92cm0uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC93YXNkLWNvbnRyb2xzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvaW5wdXQtcHJvZmlsZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L29yYml0YWwtY2FtZXJhLmpzIiwgIi4uLy4uL2pzL3NwYXduLW1lc2gtb24tc2VsZWN0LmpzIiwgIl9lZGl0b3JfaW5kZXguanMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8qIVxuICogIGhvd2xlci5qcyB2Mi4yLjRcbiAqICBob3dsZXJqcy5jb21cbiAqXG4gKiAgKGMpIDIwMTMtMjAyMCwgSmFtZXMgU2ltcHNvbiBvZiBHb2xkRmlyZSBTdHVkaW9zXG4gKiAgZ29sZGZpcmVzdHVkaW9zLmNvbVxuICpcbiAqICBNSVQgTGljZW5zZVxuICovXG5cbihmdW5jdGlvbigpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgLyoqIEdsb2JhbCBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgdGhlIGdsb2JhbCBjb250cm9sbGVyLiBBbGwgY29udGFpbmVkIG1ldGhvZHMgYW5kIHByb3BlcnRpZXMgYXBwbHlcbiAgICogdG8gYWxsIHNvdW5kcyB0aGF0IGFyZSBjdXJyZW50bHkgcGxheWluZyBvciB3aWxsIGJlIGluIHRoZSBmdXR1cmUuXG4gICAqL1xuICB2YXIgSG93bGVyR2xvYmFsID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5pbml0KCk7XG4gIH07XG4gIEhvd2xlckdsb2JhbC5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSB0aGUgZ2xvYmFsIEhvd2xlciBvYmplY3QuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcblxuICAgICAgLy8gQ3JlYXRlIGEgZ2xvYmFsIElEIGNvdW50ZXIuXG4gICAgICBzZWxmLl9jb3VudGVyID0gMTAwMDtcblxuICAgICAgLy8gUG9vbCBvZiB1bmxvY2tlZCBIVE1MNSBBdWRpbyBvYmplY3RzLlxuICAgICAgc2VsZi5faHRtbDVBdWRpb1Bvb2wgPSBbXTtcbiAgICAgIHNlbGYuaHRtbDVQb29sU2l6ZSA9IDEwO1xuXG4gICAgICAvLyBJbnRlcm5hbCBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5fY29kZWNzID0ge307XG4gICAgICBzZWxmLl9ob3dscyA9IFtdO1xuICAgICAgc2VsZi5fbXV0ZWQgPSBmYWxzZTtcbiAgICAgIHNlbGYuX3ZvbHVtZSA9IDE7XG4gICAgICBzZWxmLl9jYW5QbGF5RXZlbnQgPSAnY2FucGxheXRocm91Z2gnO1xuICAgICAgc2VsZi5fbmF2aWdhdG9yID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5uYXZpZ2F0b3IpID8gd2luZG93Lm5hdmlnYXRvciA6IG51bGw7XG5cbiAgICAgIC8vIFB1YmxpYyBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5tYXN0ZXJHYWluID0gbnVsbDtcbiAgICAgIHNlbGYubm9BdWRpbyA9IGZhbHNlO1xuICAgICAgc2VsZi51c2luZ1dlYkF1ZGlvID0gdHJ1ZTtcbiAgICAgIHNlbGYuYXV0b1N1c3BlbmQgPSB0cnVlO1xuICAgICAgc2VsZi5jdHggPSBudWxsO1xuXG4gICAgICAvLyBTZXQgdG8gZmFsc2UgdG8gZGlzYWJsZSB0aGUgYXV0byBhdWRpbyB1bmxvY2tlci5cbiAgICAgIHNlbGYuYXV0b1VubG9jayA9IHRydWU7XG5cbiAgICAgIC8vIFNldHVwIHRoZSB2YXJpb3VzIHN0YXRlIHZhbHVlcyBmb3IgZ2xvYmFsIHRyYWNraW5nLlxuICAgICAgc2VsZi5fc2V0dXAoKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldC9zZXQgdGhlIGdsb2JhbCB2b2x1bWUgZm9yIGFsbCBzb3VuZHMuXG4gICAgICogQHBhcmFtICB7RmxvYXR9IHZvbCBWb2x1bWUgZnJvbSAwLjAgdG8gMS4wLlxuICAgICAqIEByZXR1cm4ge0hvd2xlci9GbG9hdH0gICAgIFJldHVybnMgc2VsZiBvciBjdXJyZW50IHZvbHVtZS5cbiAgICAgKi9cbiAgICB2b2x1bWU6IGZ1bmN0aW9uKHZvbCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcbiAgICAgIHZvbCA9IHBhcnNlRmxvYXQodm9sKTtcblxuICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhbiBBdWRpb0NvbnRleHQgY3JlYXRlZCB5ZXQsIHJ1biB0aGUgc2V0dXAuXG4gICAgICBpZiAoIXNlbGYuY3R4KSB7XG4gICAgICAgIHNldHVwQXVkaW9Db250ZXh0KCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2Ygdm9sICE9PSAndW5kZWZpbmVkJyAmJiB2b2wgPj0gMCAmJiB2b2wgPD0gMSkge1xuICAgICAgICBzZWxmLl92b2x1bWUgPSB2b2w7XG5cbiAgICAgICAgLy8gRG9uJ3QgdXBkYXRlIGFueSBvZiB0aGUgbm9kZXMgaWYgd2UgYXJlIG11dGVkLlxuICAgICAgICBpZiAoc2VsZi5fbXV0ZWQpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdoZW4gdXNpbmcgV2ViIEF1ZGlvLCB3ZSBqdXN0IG5lZWQgdG8gYWRqdXN0IHRoZSBtYXN0ZXIgZ2Fpbi5cbiAgICAgICAgaWYgKHNlbGYudXNpbmdXZWJBdWRpbykge1xuICAgICAgICAgIHNlbGYubWFzdGVyR2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKHZvbCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBMb29wIHRocm91Z2ggYW5kIGNoYW5nZSB2b2x1bWUgZm9yIGFsbCBIVE1MNSBhdWRpbyBub2Rlcy5cbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKCFzZWxmLl9ob3dsc1tpXS5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAgIC8vIEdldCBhbGwgb2YgdGhlIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICAgICAgICB2YXIgaWRzID0gc2VsZi5faG93bHNbaV0uX2dldFNvdW5kSWRzKCk7XG5cbiAgICAgICAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgc291bmRzIGFuZCBjaGFuZ2UgdGhlIHZvbHVtZXMuXG4gICAgICAgICAgICBmb3IgKHZhciBqPTA7IGo8aWRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX2hvd2xzW2ldLl9zb3VuZEJ5SWQoaWRzW2pdKTtcblxuICAgICAgICAgICAgICBpZiAoc291bmQgJiYgc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fbm9kZS52b2x1bWUgPSBzb3VuZC5fdm9sdW1lICogdm9sO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmLl92b2x1bWU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBtdXRpbmcgYW5kIHVubXV0aW5nIGdsb2JhbGx5LlxuICAgICAqIEBwYXJhbSAge0Jvb2xlYW59IG11dGVkIElzIG11dGVkIG9yIG5vdC5cbiAgICAgKi9cbiAgICBtdXRlOiBmdW5jdGlvbihtdXRlZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcblxuICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhbiBBdWRpb0NvbnRleHQgY3JlYXRlZCB5ZXQsIHJ1biB0aGUgc2V0dXAuXG4gICAgICBpZiAoIXNlbGYuY3R4KSB7XG4gICAgICAgIHNldHVwQXVkaW9Db250ZXh0KCk7XG4gICAgICB9XG5cbiAgICAgIHNlbGYuX211dGVkID0gbXV0ZWQ7XG5cbiAgICAgIC8vIFdpdGggV2ViIEF1ZGlvLCB3ZSBqdXN0IG5lZWQgdG8gbXV0ZSB0aGUgbWFzdGVyIGdhaW4uXG4gICAgICBpZiAoc2VsZi51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICAgIHNlbGYubWFzdGVyR2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKG11dGVkID8gMCA6IHNlbGYuX3ZvbHVtZSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIExvb3AgdGhyb3VnaCBhbmQgbXV0ZSBhbGwgSFRNTDUgQXVkaW8gbm9kZXMuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKCFzZWxmLl9ob3dsc1tpXS5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAvLyBHZXQgYWxsIG9mIHRoZSBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAgICAgIHZhciBpZHMgPSBzZWxmLl9ob3dsc1tpXS5fZ2V0U291bmRJZHMoKTtcblxuICAgICAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgc291bmRzIGFuZCBtYXJrIHRoZSBhdWRpbyBub2RlIGFzIG11dGVkLlxuICAgICAgICAgIGZvciAodmFyIGo9MDsgajxpZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX2hvd2xzW2ldLl9zb3VuZEJ5SWQoaWRzW2pdKTtcblxuICAgICAgICAgICAgaWYgKHNvdW5kICYmIHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLm11dGVkID0gKG11dGVkKSA/IHRydWUgOiBzb3VuZC5fbXV0ZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgc3RvcHBpbmcgYWxsIHNvdW5kcyBnbG9iYWxseS5cbiAgICAgKi9cbiAgICBzdG9wOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgSG93bHMgYW5kIHN0b3AgdGhlbS5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9ob3dscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBzZWxmLl9ob3dsc1tpXS5zdG9wKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBVbmxvYWQgYW5kIGRlc3Ryb3kgYWxsIGN1cnJlbnRseSBsb2FkZWQgSG93bCBvYmplY3RzLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICB1bmxvYWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcblxuICAgICAgZm9yICh2YXIgaT1zZWxmLl9ob3dscy5sZW5ndGgtMTsgaT49MDsgaS0tKSB7XG4gICAgICAgIHNlbGYuX2hvd2xzW2ldLnVubG9hZCgpO1xuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgYSBuZXcgQXVkaW9Db250ZXh0IHRvIG1ha2Ugc3VyZSBpdCBpcyBmdWxseSByZXNldC5cbiAgICAgIGlmIChzZWxmLnVzaW5nV2ViQXVkaW8gJiYgc2VsZi5jdHggJiYgdHlwZW9mIHNlbGYuY3R4LmNsb3NlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzZWxmLmN0eC5jbG9zZSgpO1xuICAgICAgICBzZWxmLmN0eCA9IG51bGw7XG4gICAgICAgIHNldHVwQXVkaW9Db250ZXh0KCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBmb3IgY29kZWMgc3VwcG9ydCBvZiBzcGVjaWZpYyBleHRlbnNpb24uXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBleHQgQXVkaW8gZmlsZSBleHRlbnRpb24uXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKi9cbiAgICBjb2RlY3M6IGZ1bmN0aW9uKGV4dCkge1xuICAgICAgcmV0dXJuICh0aGlzIHx8IEhvd2xlcikuX2NvZGVjc1tleHQucmVwbGFjZSgvXngtLywgJycpXTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0dXAgdmFyaW91cyBzdGF0ZSB2YWx1ZXMgZm9yIGdsb2JhbCB0cmFja2luZy5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgX3NldHVwOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIEtlZXBzIHRyYWNrIG9mIHRoZSBzdXNwZW5kL3Jlc3VtZSBzdGF0ZSBvZiB0aGUgQXVkaW9Db250ZXh0LlxuICAgICAgc2VsZi5zdGF0ZSA9IHNlbGYuY3R4ID8gc2VsZi5jdHguc3RhdGUgfHwgJ3N1c3BlbmRlZCcgOiAnc3VzcGVuZGVkJztcblxuICAgICAgLy8gQXV0b21hdGljYWxseSBiZWdpbiB0aGUgMzAtc2Vjb25kIHN1c3BlbmQgcHJvY2Vzc1xuICAgICAgc2VsZi5fYXV0b1N1c3BlbmQoKTtcblxuICAgICAgLy8gQ2hlY2sgaWYgYXVkaW8gaXMgYXZhaWxhYmxlLlxuICAgICAgaWYgKCFzZWxmLnVzaW5nV2ViQXVkaW8pIHtcbiAgICAgICAgLy8gTm8gYXVkaW8gaXMgYXZhaWxhYmxlIG9uIHRoaXMgc3lzdGVtIGlmIG5vQXVkaW8gaXMgc2V0IHRvIHRydWUuXG4gICAgICAgIGlmICh0eXBlb2YgQXVkaW8gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciB0ZXN0ID0gbmV3IEF1ZGlvKCk7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBjYW5wbGF5dGhyb3VnaCBldmVudCBpcyBhdmFpbGFibGUuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRlc3Qub25jYW5wbGF5dGhyb3VnaCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgc2VsZi5fY2FuUGxheUV2ZW50ID0gJ2NhbnBsYXknO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgc2VsZi5ub0F1ZGlvID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsZi5ub0F1ZGlvID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUZXN0IHRvIG1ha2Ugc3VyZSBhdWRpbyBpc24ndCBkaXNhYmxlZCBpbiBJbnRlcm5ldCBFeHBsb3Jlci5cbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciB0ZXN0ID0gbmV3IEF1ZGlvKCk7XG4gICAgICAgIGlmICh0ZXN0Lm11dGVkKSB7XG4gICAgICAgICAgc2VsZi5ub0F1ZGlvID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge31cblxuICAgICAgLy8gQ2hlY2sgZm9yIHN1cHBvcnRlZCBjb2RlY3MuXG4gICAgICBpZiAoIXNlbGYubm9BdWRpbykge1xuICAgICAgICBzZWxmLl9zZXR1cENvZGVjcygpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgZm9yIGJyb3dzZXIgc3VwcG9ydCBmb3IgdmFyaW91cyBjb2RlY3MgYW5kIGNhY2hlIHRoZSByZXN1bHRzLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBfc2V0dXBDb2RlY3M6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcbiAgICAgIHZhciBhdWRpb1Rlc3QgPSBudWxsO1xuXG4gICAgICAvLyBNdXN0IHdyYXAgaW4gYSB0cnkvY2F0Y2ggYmVjYXVzZSBJRTExIGluIHNlcnZlciBtb2RlIHRocm93cyBhbiBlcnJvci5cbiAgICAgIHRyeSB7XG4gICAgICAgIGF1ZGlvVGVzdCA9ICh0eXBlb2YgQXVkaW8gIT09ICd1bmRlZmluZWQnKSA/IG5ldyBBdWRpbygpIDogbnVsbDtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgaWYgKCFhdWRpb1Rlc3QgfHwgdHlwZW9mIGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgdmFyIG1wZWdUZXN0ID0gYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9tcGVnOycpLnJlcGxhY2UoL15ubyQvLCAnJyk7XG5cbiAgICAgIC8vIE9wZXJhIHZlcnNpb24gPDMzIGhhcyBtaXhlZCBNUDMgc3VwcG9ydCwgc28gd2UgbmVlZCB0byBjaGVjayBmb3IgYW5kIGJsb2NrIGl0LlxuICAgICAgdmFyIHVhID0gc2VsZi5fbmF2aWdhdG9yID8gc2VsZi5fbmF2aWdhdG9yLnVzZXJBZ2VudCA6ICcnO1xuICAgICAgdmFyIGNoZWNrT3BlcmEgPSB1YS5tYXRjaCgvT1BSXFwvKFxcZCspL2cpO1xuICAgICAgdmFyIGlzT2xkT3BlcmEgPSAoY2hlY2tPcGVyYSAmJiBwYXJzZUludChjaGVja09wZXJhWzBdLnNwbGl0KCcvJylbMV0sIDEwKSA8IDMzKTtcbiAgICAgIHZhciBjaGVja1NhZmFyaSA9IHVhLmluZGV4T2YoJ1NhZmFyaScpICE9PSAtMSAmJiB1YS5pbmRleE9mKCdDaHJvbWUnKSA9PT0gLTE7XG4gICAgICB2YXIgc2FmYXJpVmVyc2lvbiA9IHVhLm1hdGNoKC9WZXJzaW9uXFwvKC4qPykgLyk7XG4gICAgICB2YXIgaXNPbGRTYWZhcmkgPSAoY2hlY2tTYWZhcmkgJiYgc2FmYXJpVmVyc2lvbiAmJiBwYXJzZUludChzYWZhcmlWZXJzaW9uWzFdLCAxMCkgPCAxNSk7XG5cbiAgICAgIHNlbGYuX2NvZGVjcyA9IHtcbiAgICAgICAgbXAzOiAhISghaXNPbGRPcGVyYSAmJiAobXBlZ1Rlc3QgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9tcDM7JykucmVwbGFjZSgvXm5vJC8sICcnKSkpLFxuICAgICAgICBtcGVnOiAhIW1wZWdUZXN0LFxuICAgICAgICBvcHVzOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vb2dnOyBjb2RlY3M9XCJvcHVzXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBvZ2c6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9vZ2c7IGNvZGVjcz1cInZvcmJpc1wiJykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgb2dhOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vb2dnOyBjb2RlY3M9XCJ2b3JiaXNcIicpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIHdhdjogISEoYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby93YXY7IGNvZGVjcz1cIjFcIicpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vd2F2JykpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIGFhYzogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL2FhYzsnKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBjYWY6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby94LWNhZjsnKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBtNGE6ICEhKGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8veC1tNGE7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9tNGE7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9hYWM7JykpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIG00YjogISEoYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby94LW00YjsnKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL200YjsnKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL2FhYzsnKSkucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgbXA0OiAhIShhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3gtbXA0OycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbXA0OycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vYWFjOycpKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICB3ZWJhOiAhISghaXNPbGRTYWZhcmkgJiYgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby93ZWJtOyBjb2RlY3M9XCJ2b3JiaXNcIicpLnJlcGxhY2UoL15ubyQvLCAnJykpLFxuICAgICAgICB3ZWJtOiAhISghaXNPbGRTYWZhcmkgJiYgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby93ZWJtOyBjb2RlY3M9XCJ2b3JiaXNcIicpLnJlcGxhY2UoL15ubyQvLCAnJykpLFxuICAgICAgICBkb2xieTogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL21wNDsgY29kZWNzPVwiZWMtM1wiJykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgZmxhYzogISEoYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby94LWZsYWM7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9mbGFjOycpKS5yZXBsYWNlKC9ebm8kLywgJycpXG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU29tZSBicm93c2Vycy9kZXZpY2VzIHdpbGwgb25seSBhbGxvdyBhdWRpbyB0byBiZSBwbGF5ZWQgYWZ0ZXIgYSB1c2VyIGludGVyYWN0aW9uLlxuICAgICAqIEF0dGVtcHQgdG8gYXV0b21hdGljYWxseSB1bmxvY2sgYXVkaW8gb24gdGhlIGZpcnN0IHVzZXIgaW50ZXJhY3Rpb24uXG4gICAgICogQ29uY2VwdCBmcm9tOiBodHRwOi8vcGF1bGJha2F1cy5jb20vdHV0b3JpYWxzL2h0bWw1L3dlYi1hdWRpby1vbi1pb3MvXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIF91bmxvY2tBdWRpbzogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICAvLyBPbmx5IHJ1biB0aGlzIGlmIFdlYiBBdWRpbyBpcyBzdXBwb3J0ZWQgYW5kIGl0IGhhc24ndCBhbHJlYWR5IGJlZW4gdW5sb2NrZWQuXG4gICAgICBpZiAoc2VsZi5fYXVkaW9VbmxvY2tlZCB8fCAhc2VsZi5jdHgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzZWxmLl9hdWRpb1VubG9ja2VkID0gZmFsc2U7XG4gICAgICBzZWxmLmF1dG9VbmxvY2sgPSBmYWxzZTtcblxuICAgICAgLy8gU29tZSBtb2JpbGUgZGV2aWNlcy9wbGF0Zm9ybXMgaGF2ZSBkaXN0b3J0aW9uIGlzc3VlcyB3aGVuIG9wZW5pbmcvY2xvc2luZyB0YWJzIGFuZC9vciB3ZWIgdmlld3MuXG4gICAgICAvLyBCdWdzIGluIHRoZSBicm93c2VyIChlc3BlY2lhbGx5IE1vYmlsZSBTYWZhcmkpIGNhbiBjYXVzZSB0aGUgc2FtcGxlUmF0ZSB0byBjaGFuZ2UgZnJvbSA0NDEwMCB0byA0ODAwMC5cbiAgICAgIC8vIEJ5IGNhbGxpbmcgSG93bGVyLnVubG9hZCgpLCB3ZSBjcmVhdGUgYSBuZXcgQXVkaW9Db250ZXh0IHdpdGggdGhlIGNvcnJlY3Qgc2FtcGxlUmF0ZS5cbiAgICAgIGlmICghc2VsZi5fbW9iaWxlVW5sb2FkZWQgJiYgc2VsZi5jdHguc2FtcGxlUmF0ZSAhPT0gNDQxMDApIHtcbiAgICAgICAgc2VsZi5fbW9iaWxlVW5sb2FkZWQgPSB0cnVlO1xuICAgICAgICBzZWxmLnVubG9hZCgpO1xuICAgICAgfVxuXG4gICAgICAvLyBTY3JhdGNoIGJ1ZmZlciBmb3IgZW5hYmxpbmcgaU9TIHRvIGRpc3Bvc2Ugb2Ygd2ViIGF1ZGlvIGJ1ZmZlcnMgY29ycmVjdGx5LCBhcyBwZXI6XG4gICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI0MTE5Njg0XG4gICAgICBzZWxmLl9zY3JhdGNoQnVmZmVyID0gc2VsZi5jdHguY3JlYXRlQnVmZmVyKDEsIDEsIDIyMDUwKTtcblxuICAgICAgLy8gQ2FsbCB0aGlzIG1ldGhvZCBvbiB0b3VjaCBzdGFydCB0byBjcmVhdGUgYW5kIHBsYXkgYSBidWZmZXIsXG4gICAgICAvLyB0aGVuIGNoZWNrIGlmIHRoZSBhdWRpbyBhY3R1YWxseSBwbGF5ZWQgdG8gZGV0ZXJtaW5lIGlmXG4gICAgICAvLyBhdWRpbyBoYXMgbm93IGJlZW4gdW5sb2NrZWQgb24gaU9TLCBBbmRyb2lkLCBldGMuXG4gICAgICB2YXIgdW5sb2NrID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAvLyBDcmVhdGUgYSBwb29sIG9mIHVubG9ja2VkIEhUTUw1IEF1ZGlvIG9iamVjdHMgdGhhdCBjYW5cbiAgICAgICAgLy8gYmUgdXNlZCBmb3IgcGxheWluZyBzb3VuZHMgd2l0aG91dCB1c2VyIGludGVyYWN0aW9uLiBIVE1MNVxuICAgICAgICAvLyBBdWRpbyBvYmplY3RzIG11c3QgYmUgaW5kaXZpZHVhbGx5IHVubG9ja2VkLCBhcyBvcHBvc2VkXG4gICAgICAgIC8vIHRvIHRoZSBXZWJBdWRpbyBBUEkgd2hpY2ggb25seSBuZWVkcyBhIHNpbmdsZSBhY3RpdmF0aW9uLlxuICAgICAgICAvLyBUaGlzIG11c3Qgb2NjdXIgYmVmb3JlIFdlYkF1ZGlvIHNldHVwIG9yIHRoZSBzb3VyY2Uub25lbmRlZFxuICAgICAgICAvLyBldmVudCB3aWxsIG5vdCBmaXJlLlxuICAgICAgICB3aGlsZSAoc2VsZi5faHRtbDVBdWRpb1Bvb2wubGVuZ3RoIDwgc2VsZi5odG1sNVBvb2xTaXplKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBhdWRpb05vZGUgPSBuZXcgQXVkaW8oKTtcblxuICAgICAgICAgICAgLy8gTWFyayB0aGlzIEF1ZGlvIG9iamVjdCBhcyB1bmxvY2tlZCB0byBlbnN1cmUgaXQgY2FuIGdldCByZXR1cm5lZFxuICAgICAgICAgICAgLy8gdG8gdGhlIHVubG9ja2VkIHBvb2wgd2hlbiByZWxlYXNlZC5cbiAgICAgICAgICAgIGF1ZGlvTm9kZS5fdW5sb2NrZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAvLyBBZGQgdGhlIGF1ZGlvIG5vZGUgdG8gdGhlIHBvb2wuXG4gICAgICAgICAgICBzZWxmLl9yZWxlYXNlSHRtbDVBdWRpbyhhdWRpb05vZGUpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHNlbGYubm9BdWRpbyA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBMb29wIHRocm91Z2ggYW55IGFzc2lnbmVkIGF1ZGlvIG5vZGVzIGFuZCB1bmxvY2sgdGhlbS5cbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKCFzZWxmLl9ob3dsc1tpXS5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAgIC8vIEdldCBhbGwgb2YgdGhlIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICAgICAgICB2YXIgaWRzID0gc2VsZi5faG93bHNbaV0uX2dldFNvdW5kSWRzKCk7XG5cbiAgICAgICAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgc291bmRzIGFuZCB1bmxvY2sgdGhlIGF1ZGlvIG5vZGVzLlxuICAgICAgICAgICAgZm9yICh2YXIgaj0wOyBqPGlkcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9ob3dsc1tpXS5fc291bmRCeUlkKGlkc1tqXSk7XG5cbiAgICAgICAgICAgICAgaWYgKHNvdW5kICYmIHNvdW5kLl9ub2RlICYmICFzb3VuZC5fbm9kZS5fdW5sb2NrZWQpIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5fdW5sb2NrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmxvYWQoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpeCBBbmRyb2lkIGNhbiBub3QgcGxheSBpbiBzdXNwZW5kIHN0YXRlLlxuICAgICAgICBzZWxmLl9hdXRvUmVzdW1lKCk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGFuIGVtcHR5IGJ1ZmZlci5cbiAgICAgICAgdmFyIHNvdXJjZSA9IHNlbGYuY3R4LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuICAgICAgICBzb3VyY2UuYnVmZmVyID0gc2VsZi5fc2NyYXRjaEJ1ZmZlcjtcbiAgICAgICAgc291cmNlLmNvbm5lY3Qoc2VsZi5jdHguZGVzdGluYXRpb24pO1xuXG4gICAgICAgIC8vIFBsYXkgdGhlIGVtcHR5IGJ1ZmZlci5cbiAgICAgICAgaWYgKHR5cGVvZiBzb3VyY2Uuc3RhcnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc291cmNlLm5vdGVPbigwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzb3VyY2Uuc3RhcnQoMCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYWxsaW5nIHJlc3VtZSgpIG9uIGEgc3RhY2sgaW5pdGlhdGVkIGJ5IHVzZXIgZ2VzdHVyZSBpcyB3aGF0IGFjdHVhbGx5IHVubG9ja3MgdGhlIGF1ZGlvIG9uIEFuZHJvaWQgQ2hyb21lID49IDU1LlxuICAgICAgICBpZiAodHlwZW9mIHNlbGYuY3R4LnJlc3VtZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHNlbGYuY3R4LnJlc3VtZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0dXAgYSB0aW1lb3V0IHRvIGNoZWNrIHRoYXQgd2UgYXJlIHVubG9ja2VkIG9uIHRoZSBuZXh0IGV2ZW50IGxvb3AuXG4gICAgICAgIHNvdXJjZS5vbmVuZGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc291cmNlLmRpc2Nvbm5lY3QoMCk7XG5cbiAgICAgICAgICAvLyBVcGRhdGUgdGhlIHVubG9ja2VkIHN0YXRlIGFuZCBwcmV2ZW50IHRoaXMgY2hlY2sgZnJvbSBoYXBwZW5pbmcgYWdhaW4uXG4gICAgICAgICAgc2VsZi5fYXVkaW9VbmxvY2tlZCA9IHRydWU7XG5cbiAgICAgICAgICAvLyBSZW1vdmUgdGhlIHRvdWNoIHN0YXJ0IGxpc3RlbmVyLlxuICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB1bmxvY2ssIHRydWUpO1xuICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdW5sb2NrLCB0cnVlKTtcbiAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHVubG9jaywgdHJ1ZSk7XG4gICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHVubG9jaywgdHJ1ZSk7XG5cbiAgICAgICAgICAvLyBMZXQgYWxsIHNvdW5kcyBrbm93IHRoYXQgYXVkaW8gaGFzIGJlZW4gdW5sb2NrZWQuXG4gICAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBzZWxmLl9ob3dsc1tpXS5fZW1pdCgndW5sb2NrJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfTtcblxuICAgICAgLy8gU2V0dXAgYSB0b3VjaCBzdGFydCBsaXN0ZW5lciB0byBhdHRlbXB0IGFuIHVubG9jayBpbi5cbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB1bmxvY2ssIHRydWUpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB1bmxvY2ssIHRydWUpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB1bmxvY2ssIHRydWUpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHVubG9jaywgdHJ1ZSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgYW4gdW5sb2NrZWQgSFRNTDUgQXVkaW8gb2JqZWN0IGZyb20gdGhlIHBvb2wuIElmIG5vbmUgYXJlIGxlZnQsXG4gICAgICogcmV0dXJuIGEgbmV3IEF1ZGlvIG9iamVjdCBhbmQgdGhyb3cgYSB3YXJuaW5nLlxuICAgICAqIEByZXR1cm4ge0F1ZGlvfSBIVE1MNSBBdWRpbyBvYmplY3QuXG4gICAgICovXG4gICAgX29idGFpbkh0bWw1QXVkaW86IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcblxuICAgICAgLy8gUmV0dXJuIHRoZSBuZXh0IG9iamVjdCBmcm9tIHRoZSBwb29sIGlmIG9uZSBleGlzdHMuXG4gICAgICBpZiAoc2VsZi5faHRtbDVBdWRpb1Bvb2wubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBzZWxmLl9odG1sNUF1ZGlvUG9vbC5wb3AoKTtcbiAgICAgIH1cblxuICAgICAgLy8uQ2hlY2sgaWYgdGhlIGF1ZGlvIGlzIGxvY2tlZCBhbmQgdGhyb3cgYSB3YXJuaW5nLlxuICAgICAgdmFyIHRlc3RQbGF5ID0gbmV3IEF1ZGlvKCkucGxheSgpO1xuICAgICAgaWYgKHRlc3RQbGF5ICYmIHR5cGVvZiBQcm9taXNlICE9PSAndW5kZWZpbmVkJyAmJiAodGVzdFBsYXkgaW5zdGFuY2VvZiBQcm9taXNlIHx8IHR5cGVvZiB0ZXN0UGxheS50aGVuID09PSAnZnVuY3Rpb24nKSkge1xuICAgICAgICB0ZXN0UGxheS5jYXRjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ0hUTUw1IEF1ZGlvIHBvb2wgZXhoYXVzdGVkLCByZXR1cm5pbmcgcG90ZW50aWFsbHkgbG9ja2VkIGF1ZGlvIG9iamVjdC4nKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXcgQXVkaW8oKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIGFuIGFjdGl2YXRlZCBIVE1MNSBBdWRpbyBvYmplY3QgdG8gdGhlIHBvb2wuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIF9yZWxlYXNlSHRtbDVBdWRpbzogZnVuY3Rpb24oYXVkaW8pIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIERvbid0IGFkZCBhdWRpbyB0byB0aGUgcG9vbCBpZiB3ZSBkb24ndCBrbm93IGlmIGl0IGhhcyBiZWVuIHVubG9ja2VkLlxuICAgICAgaWYgKGF1ZGlvLl91bmxvY2tlZCkge1xuICAgICAgICBzZWxmLl9odG1sNUF1ZGlvUG9vbC5wdXNoKGF1ZGlvKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEF1dG9tYXRpY2FsbHkgc3VzcGVuZCB0aGUgV2ViIEF1ZGlvIEF1ZGlvQ29udGV4dCBhZnRlciBubyBzb3VuZCBoYXMgcGxheWVkIGZvciAzMCBzZWNvbmRzLlxuICAgICAqIFRoaXMgc2F2ZXMgcHJvY2Vzc2luZy9lbmVyZ3kgYW5kIGZpeGVzIHZhcmlvdXMgYnJvd3Nlci1zcGVjaWZpYyBidWdzIHdpdGggYXVkaW8gZ2V0dGluZyBzdHVjay5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgX2F1dG9TdXNwZW5kOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgaWYgKCFzZWxmLmF1dG9TdXNwZW5kIHx8ICFzZWxmLmN0eCB8fCB0eXBlb2Ygc2VsZi5jdHguc3VzcGVuZCA9PT0gJ3VuZGVmaW5lZCcgfHwgIUhvd2xlci51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgYW55IHNvdW5kcyBhcmUgcGxheWluZy5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9ob3dscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoc2VsZi5faG93bHNbaV0uX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgZm9yICh2YXIgaj0wOyBqPHNlbGYuX2hvd2xzW2ldLl9zb3VuZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGlmICghc2VsZi5faG93bHNbaV0uX3NvdW5kc1tqXS5fcGF1c2VkKSB7XG4gICAgICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoc2VsZi5fc3VzcGVuZFRpbWVyKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChzZWxmLl9zdXNwZW5kVGltZXIpO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyBzb3VuZCBoYXMgcGxheWVkIGFmdGVyIDMwIHNlY29uZHMsIHN1c3BlbmQgdGhlIGNvbnRleHQuXG4gICAgICBzZWxmLl9zdXNwZW5kVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIXNlbGYuYXV0b1N1c3BlbmQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLl9zdXNwZW5kVGltZXIgPSBudWxsO1xuICAgICAgICBzZWxmLnN0YXRlID0gJ3N1c3BlbmRpbmcnO1xuXG4gICAgICAgIC8vIEhhbmRsZSB1cGRhdGluZyB0aGUgc3RhdGUgb2YgdGhlIGF1ZGlvIGNvbnRleHQgYWZ0ZXIgc3VzcGVuZGluZy5cbiAgICAgICAgdmFyIGhhbmRsZVN1c3BlbnNpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLnN0YXRlID0gJ3N1c3BlbmRlZCc7XG5cbiAgICAgICAgICBpZiAoc2VsZi5fcmVzdW1lQWZ0ZXJTdXNwZW5kKSB7XG4gICAgICAgICAgICBkZWxldGUgc2VsZi5fcmVzdW1lQWZ0ZXJTdXNwZW5kO1xuICAgICAgICAgICAgc2VsZi5fYXV0b1Jlc3VtZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBFaXRoZXIgdGhlIHN0YXRlIGdldHMgc3VzcGVuZGVkIG9yIGl0IGlzIGludGVycnVwdGVkLlxuICAgICAgICAvLyBFaXRoZXIgd2F5LCB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGUgc3RhdGUgdG8gc3VzcGVuZGVkLlxuICAgICAgICBzZWxmLmN0eC5zdXNwZW5kKCkudGhlbihoYW5kbGVTdXNwZW5zaW9uLCBoYW5kbGVTdXNwZW5zaW9uKTtcbiAgICAgIH0sIDMwMDAwKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEF1dG9tYXRpY2FsbHkgcmVzdW1lIHRoZSBXZWIgQXVkaW8gQXVkaW9Db250ZXh0IHdoZW4gYSBuZXcgc291bmQgaXMgcGxheWVkLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBfYXV0b1Jlc3VtZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGlmICghc2VsZi5jdHggfHwgdHlwZW9mIHNlbGYuY3R4LnJlc3VtZSA9PT0gJ3VuZGVmaW5lZCcgfHwgIUhvd2xlci51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHNlbGYuc3RhdGUgPT09ICdydW5uaW5nJyAmJiBzZWxmLmN0eC5zdGF0ZSAhPT0gJ2ludGVycnVwdGVkJyAmJiBzZWxmLl9zdXNwZW5kVGltZXIpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYuX3N1c3BlbmRUaW1lcik7XG4gICAgICAgIHNlbGYuX3N1c3BlbmRUaW1lciA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKHNlbGYuc3RhdGUgPT09ICdzdXNwZW5kZWQnIHx8IHNlbGYuc3RhdGUgPT09ICdydW5uaW5nJyAmJiBzZWxmLmN0eC5zdGF0ZSA9PT0gJ2ludGVycnVwdGVkJykge1xuICAgICAgICBzZWxmLmN0eC5yZXN1bWUoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYuc3RhdGUgPSAncnVubmluZyc7XG5cbiAgICAgICAgICAvLyBFbWl0IHRvIGFsbCBIb3dscyB0aGF0IHRoZSBhdWRpbyBoYXMgcmVzdW1lZC5cbiAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHNlbGYuX2hvd2xzW2ldLl9lbWl0KCdyZXN1bWUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChzZWxmLl9zdXNwZW5kVGltZXIpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQoc2VsZi5fc3VzcGVuZFRpbWVyKTtcbiAgICAgICAgICBzZWxmLl9zdXNwZW5kVGltZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHNlbGYuc3RhdGUgPT09ICdzdXNwZW5kaW5nJykge1xuICAgICAgICBzZWxmLl9yZXN1bWVBZnRlclN1c3BlbmQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG4gIH07XG5cbiAgLy8gU2V0dXAgdGhlIGdsb2JhbCBhdWRpbyBjb250cm9sbGVyLlxuICB2YXIgSG93bGVyID0gbmV3IEhvd2xlckdsb2JhbCgpO1xuXG4gIC8qKiBHcm91cCBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gYXVkaW8gZ3JvdXAgY29udHJvbGxlci5cbiAgICogQHBhcmFtIHtPYmplY3R9IG8gUGFzc2VkIGluIHByb3BlcnRpZXMgZm9yIHRoaXMgZ3JvdXAuXG4gICAqL1xuICB2YXIgSG93bCA9IGZ1bmN0aW9uKG8pIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBUaHJvdyBhbiBlcnJvciBpZiBubyBzb3VyY2UgaXMgcHJvdmlkZWQuXG4gICAgaWYgKCFvLnNyYyB8fCBvLnNyYy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0FuIGFycmF5IG9mIHNvdXJjZSBmaWxlcyBtdXN0IGJlIHBhc3NlZCB3aXRoIGFueSBuZXcgSG93bC4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzZWxmLmluaXQobyk7XG4gIH07XG4gIEhvd2wucHJvdG90eXBlID0ge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgYSBuZXcgSG93bCBncm91cCBvYmplY3QuXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBvIFBhc3NlZCBpbiBwcm9wZXJ0aWVzIGZvciB0aGlzIGdyb3VwLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgaW5pdDogZnVuY3Rpb24obykge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGFuIEF1ZGlvQ29udGV4dCBjcmVhdGVkIHlldCwgcnVuIHRoZSBzZXR1cC5cbiAgICAgIGlmICghSG93bGVyLmN0eCkge1xuICAgICAgICBzZXR1cEF1ZGlvQ29udGV4dCgpO1xuICAgICAgfVxuXG4gICAgICAvLyBTZXR1cCB1c2VyLWRlZmluZWQgZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5fYXV0b3BsYXkgPSBvLmF1dG9wbGF5IHx8IGZhbHNlO1xuICAgICAgc2VsZi5fZm9ybWF0ID0gKHR5cGVvZiBvLmZvcm1hdCAhPT0gJ3N0cmluZycpID8gby5mb3JtYXQgOiBbby5mb3JtYXRdO1xuICAgICAgc2VsZi5faHRtbDUgPSBvLmh0bWw1IHx8IGZhbHNlO1xuICAgICAgc2VsZi5fbXV0ZWQgPSBvLm11dGUgfHwgZmFsc2U7XG4gICAgICBzZWxmLl9sb29wID0gby5sb29wIHx8IGZhbHNlO1xuICAgICAgc2VsZi5fcG9vbCA9IG8ucG9vbCB8fCA1O1xuICAgICAgc2VsZi5fcHJlbG9hZCA9ICh0eXBlb2Ygby5wcmVsb2FkID09PSAnYm9vbGVhbicgfHwgby5wcmVsb2FkID09PSAnbWV0YWRhdGEnKSA/IG8ucHJlbG9hZCA6IHRydWU7XG4gICAgICBzZWxmLl9yYXRlID0gby5yYXRlIHx8IDE7XG4gICAgICBzZWxmLl9zcHJpdGUgPSBvLnNwcml0ZSB8fCB7fTtcbiAgICAgIHNlbGYuX3NyYyA9ICh0eXBlb2Ygby5zcmMgIT09ICdzdHJpbmcnKSA/IG8uc3JjIDogW28uc3JjXTtcbiAgICAgIHNlbGYuX3ZvbHVtZSA9IG8udm9sdW1lICE9PSB1bmRlZmluZWQgPyBvLnZvbHVtZSA6IDE7XG4gICAgICBzZWxmLl94aHIgPSB7XG4gICAgICAgIG1ldGhvZDogby54aHIgJiYgby54aHIubWV0aG9kID8gby54aHIubWV0aG9kIDogJ0dFVCcsXG4gICAgICAgIGhlYWRlcnM6IG8ueGhyICYmIG8ueGhyLmhlYWRlcnMgPyBvLnhoci5oZWFkZXJzIDogbnVsbCxcbiAgICAgICAgd2l0aENyZWRlbnRpYWxzOiBvLnhociAmJiBvLnhoci53aXRoQ3JlZGVudGlhbHMgPyBvLnhoci53aXRoQ3JlZGVudGlhbHMgOiBmYWxzZSxcbiAgICAgIH07XG5cbiAgICAgIC8vIFNldHVwIGFsbCBvdGhlciBkZWZhdWx0IHByb3BlcnRpZXMuXG4gICAgICBzZWxmLl9kdXJhdGlvbiA9IDA7XG4gICAgICBzZWxmLl9zdGF0ZSA9ICd1bmxvYWRlZCc7XG4gICAgICBzZWxmLl9zb3VuZHMgPSBbXTtcbiAgICAgIHNlbGYuX2VuZFRpbWVycyA9IHt9O1xuICAgICAgc2VsZi5fcXVldWUgPSBbXTtcbiAgICAgIHNlbGYuX3BsYXlMb2NrID0gZmFsc2U7XG5cbiAgICAgIC8vIFNldHVwIGV2ZW50IGxpc3RlbmVycy5cbiAgICAgIHNlbGYuX29uZW5kID0gby5vbmVuZCA/IFt7Zm46IG8ub25lbmR9XSA6IFtdO1xuICAgICAgc2VsZi5fb25mYWRlID0gby5vbmZhZGUgPyBbe2ZuOiBvLm9uZmFkZX1dIDogW107XG4gICAgICBzZWxmLl9vbmxvYWQgPSBvLm9ubG9hZCA/IFt7Zm46IG8ub25sb2FkfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ubG9hZGVycm9yID0gby5vbmxvYWRlcnJvciA/IFt7Zm46IG8ub25sb2FkZXJyb3J9XSA6IFtdO1xuICAgICAgc2VsZi5fb25wbGF5ZXJyb3IgPSBvLm9ucGxheWVycm9yID8gW3tmbjogby5vbnBsYXllcnJvcn1dIDogW107XG4gICAgICBzZWxmLl9vbnBhdXNlID0gby5vbnBhdXNlID8gW3tmbjogby5vbnBhdXNlfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ucGxheSA9IG8ub25wbGF5ID8gW3tmbjogby5vbnBsYXl9XSA6IFtdO1xuICAgICAgc2VsZi5fb25zdG9wID0gby5vbnN0b3AgPyBbe2ZuOiBvLm9uc3RvcH1dIDogW107XG4gICAgICBzZWxmLl9vbm11dGUgPSBvLm9ubXV0ZSA/IFt7Zm46IG8ub25tdXRlfV0gOiBbXTtcbiAgICAgIHNlbGYuX29udm9sdW1lID0gby5vbnZvbHVtZSA/IFt7Zm46IG8ub252b2x1bWV9XSA6IFtdO1xuICAgICAgc2VsZi5fb25yYXRlID0gby5vbnJhdGUgPyBbe2ZuOiBvLm9ucmF0ZX1dIDogW107XG4gICAgICBzZWxmLl9vbnNlZWsgPSBvLm9uc2VlayA/IFt7Zm46IG8ub25zZWVrfV0gOiBbXTtcbiAgICAgIHNlbGYuX29udW5sb2NrID0gby5vbnVubG9jayA/IFt7Zm46IG8ub251bmxvY2t9XSA6IFtdO1xuICAgICAgc2VsZi5fb25yZXN1bWUgPSBbXTtcblxuICAgICAgLy8gV2ViIEF1ZGlvIG9yIEhUTUw1IEF1ZGlvP1xuICAgICAgc2VsZi5fd2ViQXVkaW8gPSBIb3dsZXIudXNpbmdXZWJBdWRpbyAmJiAhc2VsZi5faHRtbDU7XG5cbiAgICAgIC8vIEF1dG9tYXRpY2FsbHkgdHJ5IHRvIGVuYWJsZSBhdWRpby5cbiAgICAgIGlmICh0eXBlb2YgSG93bGVyLmN0eCAhPT0gJ3VuZGVmaW5lZCcgJiYgSG93bGVyLmN0eCAmJiBIb3dsZXIuYXV0b1VubG9jaykge1xuICAgICAgICBIb3dsZXIuX3VubG9ja0F1ZGlvKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEtlZXAgdHJhY2sgb2YgdGhpcyBIb3dsIGdyb3VwIGluIHRoZSBnbG9iYWwgY29udHJvbGxlci5cbiAgICAgIEhvd2xlci5faG93bHMucHVzaChzZWxmKTtcblxuICAgICAgLy8gSWYgdGhleSBzZWxlY3RlZCBhdXRvcGxheSwgYWRkIGEgcGxheSBldmVudCB0byB0aGUgbG9hZCBxdWV1ZS5cbiAgICAgIGlmIChzZWxmLl9hdXRvcGxheSkge1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ3BsYXknLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnBsYXkoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBMb2FkIHRoZSBzb3VyY2UgZmlsZSB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAgICAgIGlmIChzZWxmLl9wcmVsb2FkICYmIHNlbGYuX3ByZWxvYWQgIT09ICdub25lJykge1xuICAgICAgICBzZWxmLmxvYWQoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIExvYWQgdGhlIGF1ZGlvIGZpbGUuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIGxvYWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHVybCA9IG51bGw7XG5cbiAgICAgIC8vIElmIG5vIGF1ZGlvIGlzIGF2YWlsYWJsZSwgcXVpdCBpbW1lZGlhdGVseS5cbiAgICAgIGlmIChIb3dsZXIubm9BdWRpbykge1xuICAgICAgICBzZWxmLl9lbWl0KCdsb2FkZXJyb3InLCBudWxsLCAnTm8gYXVkaW8gc3VwcG9ydC4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBNYWtlIHN1cmUgb3VyIHNvdXJjZSBpcyBpbiBhbiBhcnJheS5cbiAgICAgIGlmICh0eXBlb2Ygc2VsZi5fc3JjID09PSAnc3RyaW5nJykge1xuICAgICAgICBzZWxmLl9zcmMgPSBbc2VsZi5fc3JjXTtcbiAgICAgIH1cblxuICAgICAgLy8gTG9vcCB0aHJvdWdoIHRoZSBzb3VyY2VzIGFuZCBwaWNrIHRoZSBmaXJzdCBvbmUgdGhhdCBpcyBjb21wYXRpYmxlLlxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NyYy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZXh0LCBzdHI7XG5cbiAgICAgICAgaWYgKHNlbGYuX2Zvcm1hdCAmJiBzZWxmLl9mb3JtYXRbaV0pIHtcbiAgICAgICAgICAvLyBJZiBhbiBleHRlbnNpb24gd2FzIHNwZWNpZmllZCwgdXNlIHRoYXQgaW5zdGVhZC5cbiAgICAgICAgICBleHQgPSBzZWxmLl9mb3JtYXRbaV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBzb3VyY2UgaXMgYSBzdHJpbmcuXG4gICAgICAgICAgc3RyID0gc2VsZi5fc3JjW2ldO1xuICAgICAgICAgIGlmICh0eXBlb2Ygc3RyICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgc2VsZi5fZW1pdCgnbG9hZGVycm9yJywgbnVsbCwgJ05vbi1zdHJpbmcgZm91bmQgaW4gc2VsZWN0ZWQgYXVkaW8gc291cmNlcyAtIGlnbm9yaW5nLicpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gRXh0cmFjdCB0aGUgZmlsZSBleHRlbnNpb24gZnJvbSB0aGUgVVJMIG9yIGJhc2U2NCBkYXRhIFVSSS5cbiAgICAgICAgICBleHQgPSAvXmRhdGE6YXVkaW9cXC8oW147LF0rKTsvaS5leGVjKHN0cik7XG4gICAgICAgICAgaWYgKCFleHQpIHtcbiAgICAgICAgICAgIGV4dCA9IC9cXC4oW14uXSspJC8uZXhlYyhzdHIuc3BsaXQoJz8nLCAxKVswXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGV4dCkge1xuICAgICAgICAgICAgZXh0ID0gZXh0WzFdLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gTG9nIGEgd2FybmluZyBpZiBubyBleHRlbnNpb24gd2FzIGZvdW5kLlxuICAgICAgICBpZiAoIWV4dCkge1xuICAgICAgICAgIGNvbnNvbGUud2FybignTm8gZmlsZSBleHRlbnNpb24gd2FzIGZvdW5kLiBDb25zaWRlciB1c2luZyB0aGUgXCJmb3JtYXRcIiBwcm9wZXJ0eSBvciBzcGVjaWZ5IGFuIGV4dGVuc2lvbi4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoaXMgZXh0ZW5zaW9uIGlzIGF2YWlsYWJsZS5cbiAgICAgICAgaWYgKGV4dCAmJiBIb3dsZXIuY29kZWNzKGV4dCkpIHtcbiAgICAgICAgICB1cmwgPSBzZWxmLl9zcmNbaV07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCF1cmwpIHtcbiAgICAgICAgc2VsZi5fZW1pdCgnbG9hZGVycm9yJywgbnVsbCwgJ05vIGNvZGVjIHN1cHBvcnQgZm9yIHNlbGVjdGVkIGF1ZGlvIHNvdXJjZXMuJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc2VsZi5fc3JjID0gdXJsO1xuICAgICAgc2VsZi5fc3RhdGUgPSAnbG9hZGluZyc7XG5cbiAgICAgIC8vIElmIHRoZSBob3N0aW5nIHBhZ2UgaXMgSFRUUFMgYW5kIHRoZSBzb3VyY2UgaXNuJ3QsXG4gICAgICAvLyBkcm9wIGRvd24gdG8gSFRNTDUgQXVkaW8gdG8gYXZvaWQgTWl4ZWQgQ29udGVudCBlcnJvcnMuXG4gICAgICBpZiAod2luZG93LmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6JyAmJiB1cmwuc2xpY2UoMCwgNSkgPT09ICdodHRwOicpIHtcbiAgICAgICAgc2VsZi5faHRtbDUgPSB0cnVlO1xuICAgICAgICBzZWxmLl93ZWJBdWRpbyA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgYSBuZXcgc291bmQgb2JqZWN0IGFuZCBhZGQgaXQgdG8gdGhlIHBvb2wuXG4gICAgICBuZXcgU291bmQoc2VsZik7XG5cbiAgICAgIC8vIExvYWQgYW5kIGRlY29kZSB0aGUgYXVkaW8gZGF0YSBmb3IgcGxheWJhY2suXG4gICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgbG9hZEJ1ZmZlcihzZWxmKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFBsYXkgYSBzb3VuZCBvciByZXN1bWUgcHJldmlvdXMgcGxheWJhY2suXG4gICAgICogQHBhcmFtICB7U3RyaW5nL051bWJlcn0gc3ByaXRlICAgU3ByaXRlIG5hbWUgZm9yIHNwcml0ZSBwbGF5YmFjayBvciBzb3VuZCBpZCB0byBjb250aW51ZSBwcmV2aW91cy5cbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBpbnRlcm5hbCBJbnRlcm5hbCBVc2U6IHRydWUgcHJldmVudHMgZXZlbnQgZmlyaW5nLlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgU291bmQgSUQuXG4gICAgICovXG4gICAgcGxheTogZnVuY3Rpb24oc3ByaXRlLCBpbnRlcm5hbCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGlkID0gbnVsbDtcblxuICAgICAgLy8gRGV0ZXJtaW5lIGlmIGEgc3ByaXRlLCBzb3VuZCBpZCBvciBub3RoaW5nIHdhcyBwYXNzZWRcbiAgICAgIGlmICh0eXBlb2Ygc3ByaXRlID09PSAnbnVtYmVyJykge1xuICAgICAgICBpZCA9IHNwcml0ZTtcbiAgICAgICAgc3ByaXRlID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHNwcml0ZSA9PT0gJ3N0cmluZycgJiYgc2VsZi5fc3RhdGUgPT09ICdsb2FkZWQnICYmICFzZWxmLl9zcHJpdGVbc3ByaXRlXSkge1xuICAgICAgICAvLyBJZiB0aGUgcGFzc2VkIHNwcml0ZSBkb2Vzbid0IGV4aXN0LCBkbyBub3RoaW5nLlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHNwcml0ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLy8gVXNlIHRoZSBkZWZhdWx0IHNvdW5kIHNwcml0ZSAocGxheXMgdGhlIGZ1bGwgYXVkaW8gbGVuZ3RoKS5cbiAgICAgICAgc3ByaXRlID0gJ19fZGVmYXVsdCc7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBzaW5nbGUgcGF1c2VkIHNvdW5kIHRoYXQgaXNuJ3QgZW5kZWQuXG4gICAgICAgIC8vIElmIHRoZXJlIGlzLCBwbGF5IHRoYXQgc291bmQuIElmIG5vdCwgY29udGludWUgYXMgdXN1YWwuXG4gICAgICAgIGlmICghc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgICB2YXIgbnVtID0gMDtcbiAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5fc291bmRzW2ldLl9wYXVzZWQgJiYgIXNlbGYuX3NvdW5kc1tpXS5fZW5kZWQpIHtcbiAgICAgICAgICAgICAgbnVtKys7XG4gICAgICAgICAgICAgIGlkID0gc2VsZi5fc291bmRzW2ldLl9pZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAobnVtID09PSAxKSB7XG4gICAgICAgICAgICBzcHJpdGUgPSBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZCA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEdldCB0aGUgc2VsZWN0ZWQgbm9kZSwgb3IgZ2V0IG9uZSBmcm9tIHRoZSBwb29sLlxuICAgICAgdmFyIHNvdW5kID0gaWQgPyBzZWxmLl9zb3VuZEJ5SWQoaWQpIDogc2VsZi5faW5hY3RpdmVTb3VuZCgpO1xuXG4gICAgICAvLyBJZiB0aGUgc291bmQgZG9lc24ndCBleGlzdCwgZG8gbm90aGluZy5cbiAgICAgIGlmICghc291bmQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlbGVjdCB0aGUgc3ByaXRlIGRlZmluaXRpb24uXG4gICAgICBpZiAoaWQgJiYgIXNwcml0ZSkge1xuICAgICAgICBzcHJpdGUgPSBzb3VuZC5fc3ByaXRlIHx8ICdfX2RlZmF1bHQnO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgd2UgbXVzdCB3YWl0IHRvIGdldCB0aGUgYXVkaW8ncyBkdXJhdGlvbi5cbiAgICAgIC8vIFdlIGFsc28gbmVlZCB0byB3YWl0IHRvIG1ha2Ugc3VyZSB3ZSBkb24ndCBydW4gaW50byByYWNlIGNvbmRpdGlvbnMgd2l0aFxuICAgICAgLy8gdGhlIG9yZGVyIG9mIGZ1bmN0aW9uIGNhbGxzLlxuICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgICAvLyBTZXQgdGhlIHNwcml0ZSB2YWx1ZSBvbiB0aGlzIHNvdW5kLlxuICAgICAgICBzb3VuZC5fc3ByaXRlID0gc3ByaXRlO1xuXG4gICAgICAgIC8vIE1hcmsgdGhpcyBzb3VuZCBhcyBub3QgZW5kZWQgaW4gY2FzZSBhbm90aGVyIHNvdW5kIGlzIHBsYXllZCBiZWZvcmUgdGhpcyBvbmUgbG9hZHMuXG4gICAgICAgIHNvdW5kLl9lbmRlZCA9IGZhbHNlO1xuXG4gICAgICAgIC8vIEFkZCB0aGUgc291bmQgdG8gdGhlIHF1ZXVlIHRvIGJlIHBsYXllZCBvbiBsb2FkLlxuICAgICAgICB2YXIgc291bmRJZCA9IHNvdW5kLl9pZDtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdwbGF5JyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5wbGF5KHNvdW5kSWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNvdW5kSWQ7XG4gICAgICB9XG5cbiAgICAgIC8vIERvbid0IHBsYXkgdGhlIHNvdW5kIGlmIGFuIGlkIHdhcyBwYXNzZWQgYW5kIGl0IGlzIGFscmVhZHkgcGxheWluZy5cbiAgICAgIGlmIChpZCAmJiAhc291bmQuX3BhdXNlZCkge1xuICAgICAgICAvLyBUcmlnZ2VyIHRoZSBwbGF5IGV2ZW50LCBpbiBvcmRlciB0byBrZWVwIGl0ZXJhdGluZyB0aHJvdWdoIHF1ZXVlLlxuICAgICAgICBpZiAoIWludGVybmFsKSB7XG4gICAgICAgICAgc2VsZi5fbG9hZFF1ZXVlKCdwbGF5Jyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc291bmQuX2lkO1xuICAgICAgfVxuXG4gICAgICAvLyBNYWtlIHN1cmUgdGhlIEF1ZGlvQ29udGV4dCBpc24ndCBzdXNwZW5kZWQsIGFuZCByZXN1bWUgaXQgaWYgaXQgaXMuXG4gICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgSG93bGVyLl9hdXRvUmVzdW1lKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIERldGVybWluZSBob3cgbG9uZyB0byBwbGF5IGZvciBhbmQgd2hlcmUgdG8gc3RhcnQgcGxheWluZy5cbiAgICAgIHZhciBzZWVrID0gTWF0aC5tYXgoMCwgc291bmQuX3NlZWsgPiAwID8gc291bmQuX3NlZWsgOiBzZWxmLl9zcHJpdGVbc3ByaXRlXVswXSAvIDEwMDApO1xuICAgICAgdmFyIGR1cmF0aW9uID0gTWF0aC5tYXgoMCwgKChzZWxmLl9zcHJpdGVbc3ByaXRlXVswXSArIHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzFdKSAvIDEwMDApIC0gc2Vlayk7XG4gICAgICB2YXIgdGltZW91dCA9IChkdXJhdGlvbiAqIDEwMDApIC8gTWF0aC5hYnMoc291bmQuX3JhdGUpO1xuICAgICAgdmFyIHN0YXJ0ID0gc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMF0gLyAxMDAwO1xuICAgICAgdmFyIHN0b3AgPSAoc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMF0gKyBzZWxmLl9zcHJpdGVbc3ByaXRlXVsxXSkgLyAxMDAwO1xuICAgICAgc291bmQuX3Nwcml0ZSA9IHNwcml0ZTtcblxuICAgICAgLy8gTWFyayB0aGUgc291bmQgYXMgZW5kZWQgaW5zdGFudGx5IHNvIHRoYXQgdGhpcyBhc3luYyBwbGF5YmFja1xuICAgICAgLy8gZG9lc24ndCBnZXQgZ3JhYmJlZCBieSBhbm90aGVyIGNhbGwgdG8gcGxheSB3aGlsZSB0aGlzIG9uZSB3YWl0cyB0byBzdGFydC5cbiAgICAgIHNvdW5kLl9lbmRlZCA9IGZhbHNlO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIHBhcmFtZXRlcnMgb2YgdGhlIHNvdW5kLlxuICAgICAgdmFyIHNldFBhcmFtcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBzb3VuZC5fcGF1c2VkID0gZmFsc2U7XG4gICAgICAgIHNvdW5kLl9zZWVrID0gc2VlaztcbiAgICAgICAgc291bmQuX3N0YXJ0ID0gc3RhcnQ7XG4gICAgICAgIHNvdW5kLl9zdG9wID0gc3RvcDtcbiAgICAgICAgc291bmQuX2xvb3AgPSAhIShzb3VuZC5fbG9vcCB8fCBzZWxmLl9zcHJpdGVbc3ByaXRlXVsyXSk7XG4gICAgICB9O1xuXG4gICAgICAvLyBFbmQgdGhlIHNvdW5kIGluc3RhbnRseSBpZiBzZWVrIGlzIGF0IHRoZSBlbmQuXG4gICAgICBpZiAoc2VlayA+PSBzdG9wKSB7XG4gICAgICAgIHNlbGYuX2VuZGVkKHNvdW5kKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBCZWdpbiB0aGUgYWN0dWFsIHBsYXliYWNrLlxuICAgICAgdmFyIG5vZGUgPSBzb3VuZC5fbm9kZTtcbiAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAvLyBGaXJlIHRoaXMgd2hlbiB0aGUgc291bmQgaXMgcmVhZHkgdG8gcGxheSB0byBiZWdpbiBXZWIgQXVkaW8gcGxheWJhY2suXG4gICAgICAgIHZhciBwbGF5V2ViQXVkaW8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLl9wbGF5TG9jayA9IGZhbHNlO1xuICAgICAgICAgIHNldFBhcmFtcygpO1xuICAgICAgICAgIHNlbGYuX3JlZnJlc2hCdWZmZXIoc291bmQpO1xuXG4gICAgICAgICAgLy8gU2V0dXAgdGhlIHBsYXliYWNrIHBhcmFtcy5cbiAgICAgICAgICB2YXIgdm9sID0gKHNvdW5kLl9tdXRlZCB8fCBzZWxmLl9tdXRlZCkgPyAwIDogc291bmQuX3ZvbHVtZTtcbiAgICAgICAgICBub2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUodm9sLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICBzb3VuZC5fcGxheVN0YXJ0ID0gSG93bGVyLmN0eC5jdXJyZW50VGltZTtcblxuICAgICAgICAgIC8vIFBsYXkgdGhlIHNvdW5kIHVzaW5nIHRoZSBzdXBwb3J0ZWQgbWV0aG9kLlxuICAgICAgICAgIGlmICh0eXBlb2Ygbm9kZS5idWZmZXJTb3VyY2Uuc3RhcnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBzb3VuZC5fbG9vcCA/IG5vZGUuYnVmZmVyU291cmNlLm5vdGVHcmFpbk9uKDAsIHNlZWssIDg2NDAwKSA6IG5vZGUuYnVmZmVyU291cmNlLm5vdGVHcmFpbk9uKDAsIHNlZWssIGR1cmF0aW9uKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc291bmQuX2xvb3AgPyBub2RlLmJ1ZmZlclNvdXJjZS5zdGFydCgwLCBzZWVrLCA4NjQwMCkgOiBub2RlLmJ1ZmZlclNvdXJjZS5zdGFydCgwLCBzZWVrLCBkdXJhdGlvbik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gU3RhcnQgYSBuZXcgdGltZXIgaWYgbm9uZSBpcyBwcmVzZW50LlxuICAgICAgICAgIGlmICh0aW1lb3V0ICE9PSBJbmZpbml0eSkge1xuICAgICAgICAgICAgc2VsZi5fZW5kVGltZXJzW3NvdW5kLl9pZF0gPSBzZXRUaW1lb3V0KHNlbGYuX2VuZGVkLmJpbmQoc2VsZiwgc291bmQpLCB0aW1lb3V0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWludGVybmFsKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBzZWxmLl9lbWl0KCdwbGF5Jywgc291bmQuX2lkKTtcbiAgICAgICAgICAgICAgc2VsZi5fbG9hZFF1ZXVlKCk7XG4gICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKEhvd2xlci5zdGF0ZSA9PT0gJ3J1bm5pbmcnICYmIEhvd2xlci5jdHguc3RhdGUgIT09ICdpbnRlcnJ1cHRlZCcpIHtcbiAgICAgICAgICBwbGF5V2ViQXVkaW8oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxmLl9wbGF5TG9jayA9IHRydWU7XG5cbiAgICAgICAgICAvLyBXYWl0IGZvciB0aGUgYXVkaW8gY29udGV4dCB0byByZXN1bWUgYmVmb3JlIHBsYXlpbmcuXG4gICAgICAgICAgc2VsZi5vbmNlKCdyZXN1bWUnLCBwbGF5V2ViQXVkaW8pO1xuXG4gICAgICAgICAgLy8gQ2FuY2VsIHRoZSBlbmQgdGltZXIuXG4gICAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihzb3VuZC5faWQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGaXJlIHRoaXMgd2hlbiB0aGUgc291bmQgaXMgcmVhZHkgdG8gcGxheSB0byBiZWdpbiBIVE1MNSBBdWRpbyBwbGF5YmFjay5cbiAgICAgICAgdmFyIHBsYXlIdG1sNSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG5vZGUuY3VycmVudFRpbWUgPSBzZWVrO1xuICAgICAgICAgIG5vZGUubXV0ZWQgPSBzb3VuZC5fbXV0ZWQgfHwgc2VsZi5fbXV0ZWQgfHwgSG93bGVyLl9tdXRlZCB8fCBub2RlLm11dGVkO1xuICAgICAgICAgIG5vZGUudm9sdW1lID0gc291bmQuX3ZvbHVtZSAqIEhvd2xlci52b2x1bWUoKTtcbiAgICAgICAgICBub2RlLnBsYXliYWNrUmF0ZSA9IHNvdW5kLl9yYXRlO1xuXG4gICAgICAgICAgLy8gU29tZSBicm93c2VycyB3aWxsIHRocm93IGFuIGVycm9yIGlmIHRoaXMgaXMgY2FsbGVkIHdpdGhvdXQgdXNlciBpbnRlcmFjdGlvbi5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHBsYXkgPSBub2RlLnBsYXkoKTtcblxuICAgICAgICAgICAgLy8gU3VwcG9ydCBvbGRlciBicm93c2VycyB0aGF0IGRvbid0IHN1cHBvcnQgcHJvbWlzZXMsIGFuZCB0aHVzIGRvbid0IGhhdmUgdGhpcyBpc3N1ZS5cbiAgICAgICAgICAgIGlmIChwbGF5ICYmIHR5cGVvZiBQcm9taXNlICE9PSAndW5kZWZpbmVkJyAmJiAocGxheSBpbnN0YW5jZW9mIFByb21pc2UgfHwgdHlwZW9mIHBsYXkudGhlbiA9PT0gJ2Z1bmN0aW9uJykpIHtcbiAgICAgICAgICAgICAgLy8gSW1wbGVtZW50cyBhIGxvY2sgdG8gcHJldmVudCBET01FeGNlcHRpb246IFRoZSBwbGF5KCkgcmVxdWVzdCB3YXMgaW50ZXJydXB0ZWQgYnkgYSBjYWxsIHRvIHBhdXNlKCkuXG4gICAgICAgICAgICAgIHNlbGYuX3BsYXlMb2NrID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAvLyBTZXQgcGFyYW0gdmFsdWVzIGltbWVkaWF0ZWx5LlxuICAgICAgICAgICAgICBzZXRQYXJhbXMoKTtcblxuICAgICAgICAgICAgICAvLyBSZWxlYXNlcyB0aGUgbG9jayBhbmQgZXhlY3V0ZXMgcXVldWVkIGFjdGlvbnMuXG4gICAgICAgICAgICAgIHBsYXlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgIHNlbGYuX3BsYXlMb2NrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICBub2RlLl91bmxvY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICBpZiAoIWludGVybmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3BsYXknLCBzb3VuZC5faWQpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fbG9hZFF1ZXVlKCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICBzZWxmLl9wbGF5TG9jayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgc2VsZi5fZW1pdCgncGxheWVycm9yJywgc291bmQuX2lkLCAnUGxheWJhY2sgd2FzIHVuYWJsZSB0byBzdGFydC4gVGhpcyBpcyBtb3N0IGNvbW1vbmx5IGFuIGlzc3VlICcgK1xuICAgICAgICAgICAgICAgICAgICAnb24gbW9iaWxlIGRldmljZXMgYW5kIENocm9tZSB3aGVyZSBwbGF5YmFjayB3YXMgbm90IHdpdGhpbiBhIHVzZXIgaW50ZXJhY3Rpb24uJyk7XG5cbiAgICAgICAgICAgICAgICAgIC8vIFJlc2V0IHRoZSBlbmRlZCBhbmQgcGF1c2VkIHZhbHVlcy5cbiAgICAgICAgICAgICAgICAgIHNvdW5kLl9lbmRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICBzb3VuZC5fcGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWludGVybmFsKSB7XG4gICAgICAgICAgICAgIHNlbGYuX3BsYXlMb2NrID0gZmFsc2U7XG4gICAgICAgICAgICAgIHNldFBhcmFtcygpO1xuICAgICAgICAgICAgICBzZWxmLl9lbWl0KCdwbGF5Jywgc291bmQuX2lkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2V0dGluZyByYXRlIGJlZm9yZSBwbGF5aW5nIHdvbid0IHdvcmsgaW4gSUUsIHNvIHdlIHNldCBpdCBhZ2FpbiBoZXJlLlxuICAgICAgICAgICAgbm9kZS5wbGF5YmFja1JhdGUgPSBzb3VuZC5fcmF0ZTtcblxuICAgICAgICAgICAgLy8gSWYgdGhlIG5vZGUgaXMgc3RpbGwgcGF1c2VkLCB0aGVuIHdlIGNhbiBhc3N1bWUgdGhlcmUgd2FzIGEgcGxheWJhY2sgaXNzdWUuXG4gICAgICAgICAgICBpZiAobm9kZS5wYXVzZWQpIHtcbiAgICAgICAgICAgICAgc2VsZi5fZW1pdCgncGxheWVycm9yJywgc291bmQuX2lkLCAnUGxheWJhY2sgd2FzIHVuYWJsZSB0byBzdGFydC4gVGhpcyBpcyBtb3N0IGNvbW1vbmx5IGFuIGlzc3VlICcgK1xuICAgICAgICAgICAgICAgICdvbiBtb2JpbGUgZGV2aWNlcyBhbmQgQ2hyb21lIHdoZXJlIHBsYXliYWNrIHdhcyBub3Qgd2l0aGluIGEgdXNlciBpbnRlcmFjdGlvbi4nKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTZXR1cCB0aGUgZW5kIHRpbWVyIG9uIHNwcml0ZXMgb3IgbGlzdGVuIGZvciB0aGUgZW5kZWQgZXZlbnQuXG4gICAgICAgICAgICBpZiAoc3ByaXRlICE9PSAnX19kZWZhdWx0JyB8fCBzb3VuZC5fbG9vcCkge1xuICAgICAgICAgICAgICBzZWxmLl9lbmRUaW1lcnNbc291bmQuX2lkXSA9IHNldFRpbWVvdXQoc2VsZi5fZW5kZWQuYmluZChzZWxmLCBzb3VuZCksIHRpbWVvdXQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2VsZi5fZW5kVGltZXJzW3NvdW5kLl9pZF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAvLyBGaXJlIGVuZGVkIG9uIHRoaXMgYXVkaW8gbm9kZS5cbiAgICAgICAgICAgICAgICBzZWxmLl9lbmRlZChzb3VuZCk7XG5cbiAgICAgICAgICAgICAgICAvLyBDbGVhciB0aGlzIGxpc3RlbmVyLlxuICAgICAgICAgICAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBzZWxmLl9lbmRUaW1lcnNbc291bmQuX2lkXSwgZmFsc2UpO1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgc2VsZi5fZW5kVGltZXJzW3NvdW5kLl9pZF0sIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3BsYXllcnJvcicsIHNvdW5kLl9pZCwgZXJyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gSWYgdGhpcyBpcyBzdHJlYW1pbmcgYXVkaW8sIG1ha2Ugc3VyZSB0aGUgc3JjIGlzIHNldCBhbmQgbG9hZCBhZ2Fpbi5cbiAgICAgICAgaWYgKG5vZGUuc3JjID09PSAnZGF0YTphdWRpby93YXY7YmFzZTY0LFVrbEdSaWdBQUFCWFFWWkZabTEwSUJJQUFBQUJBQUVBUkt3QUFJaFlBUUFDQUJBQUFBQmtZWFJoQWdBQUFBRUEnKSB7XG4gICAgICAgICAgbm9kZS5zcmMgPSBzZWxmLl9zcmM7XG4gICAgICAgICAgbm9kZS5sb2FkKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBQbGF5IGltbWVkaWF0ZWx5IGlmIHJlYWR5LCBvciB3YWl0IGZvciB0aGUgJ2NhbnBsYXl0aHJvdWdoJ2UgdmVudC5cbiAgICAgICAgdmFyIGxvYWRlZE5vUmVhZHlTdGF0ZSA9ICh3aW5kb3cgJiYgd2luZG93LmVqZWN0YSkgfHwgKCFub2RlLnJlYWR5U3RhdGUgJiYgSG93bGVyLl9uYXZpZ2F0b3IuaXNDb2Nvb25KUyk7XG4gICAgICAgIGlmIChub2RlLnJlYWR5U3RhdGUgPj0gMyB8fCBsb2FkZWROb1JlYWR5U3RhdGUpIHtcbiAgICAgICAgICBwbGF5SHRtbDUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxmLl9wbGF5TG9jayA9IHRydWU7XG4gICAgICAgICAgc2VsZi5fc3RhdGUgPSAnbG9hZGluZyc7XG5cbiAgICAgICAgICB2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuX3N0YXRlID0gJ2xvYWRlZCc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEJlZ2luIHBsYXliYWNrLlxuICAgICAgICAgICAgcGxheUh0bWw1KCk7XG5cbiAgICAgICAgICAgIC8vIENsZWFyIHRoaXMgbGlzdGVuZXIuXG4gICAgICAgICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoSG93bGVyLl9jYW5QbGF5RXZlbnQsIGxpc3RlbmVyLCBmYWxzZSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoSG93bGVyLl9jYW5QbGF5RXZlbnQsIGxpc3RlbmVyLCBmYWxzZSk7XG5cbiAgICAgICAgICAvLyBDYW5jZWwgdGhlIGVuZCB0aW1lci5cbiAgICAgICAgICBzZWxmLl9jbGVhclRpbWVyKHNvdW5kLl9pZCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNvdW5kLl9pZDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUGF1c2UgcGxheWJhY2sgYW5kIHNhdmUgY3VycmVudCBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIFRoZSBzb3VuZCBJRCAoZW1wdHkgdG8gcGF1c2UgYWxsIGluIGdyb3VwKS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIHBhdXNlOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCBvciBhIHBsYXkoKSBwcm9taXNlIGlzIHBlbmRpbmcsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBwYXVzZSB3aGVuIGNhcGFibGUuXG4gICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnIHx8IHNlbGYuX3BsYXlMb2NrKSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAncGF1c2UnLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnBhdXNlKGlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyBpZCBpcyBwYXNzZWQsIGdldCBhbGwgSUQncyB0byBiZSBwYXVzZWQuXG4gICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIENsZWFyIHRoZSBlbmQgdGltZXIuXG4gICAgICAgIHNlbGYuX2NsZWFyVGltZXIoaWRzW2ldKTtcblxuICAgICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgICBpZiAoc291bmQgJiYgIXNvdW5kLl9wYXVzZWQpIHtcbiAgICAgICAgICAvLyBSZXNldCB0aGUgc2VlayBwb3NpdGlvbi5cbiAgICAgICAgICBzb3VuZC5fc2VlayA9IHNlbGYuc2VlayhpZHNbaV0pO1xuICAgICAgICAgIHNvdW5kLl9yYXRlU2VlayA9IDA7XG4gICAgICAgICAgc291bmQuX3BhdXNlZCA9IHRydWU7XG5cbiAgICAgICAgICAvLyBTdG9wIGN1cnJlbnRseSBydW5uaW5nIGZhZGVzLlxuICAgICAgICAgIHNlbGYuX3N0b3BGYWRlKGlkc1tpXSk7XG5cbiAgICAgICAgICBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIHNvdW5kIGhhcyBiZWVuIGNyZWF0ZWQuXG4gICAgICAgICAgICAgIGlmICghc291bmQuX25vZGUuYnVmZmVyU291cmNlKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAodHlwZW9mIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5zdG9wID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5ub3RlT2ZmKDApO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5zdG9wKDApO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIGJ1ZmZlciBzb3VyY2UuXG4gICAgICAgICAgICAgIHNlbGYuX2NsZWFuQnVmZmVyKHNvdW5kLl9ub2RlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzTmFOKHNvdW5kLl9ub2RlLmR1cmF0aW9uKSB8fCBzb3VuZC5fbm9kZS5kdXJhdGlvbiA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUucGF1c2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGaXJlIHRoZSBwYXVzZSBldmVudCwgdW5sZXNzIGB0cnVlYCBpcyBwYXNzZWQgYXMgdGhlIDJuZCBhcmd1bWVudC5cbiAgICAgICAgaWYgKCFhcmd1bWVudHNbMV0pIHtcbiAgICAgICAgICBzZWxmLl9lbWl0KCdwYXVzZScsIHNvdW5kID8gc291bmQuX2lkIDogbnVsbCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFN0b3AgcGxheWJhY2sgYW5kIHJlc2V0IHRvIHN0YXJ0LlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgVGhlIHNvdW5kIElEIChlbXB0eSB0byBzdG9wIGFsbCBpbiBncm91cCkuXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gaW50ZXJuYWwgSW50ZXJuYWwgVXNlOiB0cnVlIHByZXZlbnRzIGV2ZW50IGZpcmluZy5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIHN0b3A6IGZ1bmN0aW9uKGlkLCBpbnRlcm5hbCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIHN0b3Agd2hlbiBjYXBhYmxlLlxuICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJyB8fCBzZWxmLl9wbGF5TG9jaykge1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ3N0b3AnLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnN0b3AoaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5vIGlkIGlzIHBhc3NlZCwgZ2V0IGFsbCBJRCdzIHRvIGJlIHN0b3BwZWQuXG4gICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIENsZWFyIHRoZSBlbmQgdGltZXIuXG4gICAgICAgIHNlbGYuX2NsZWFyVGltZXIoaWRzW2ldKTtcblxuICAgICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgICAvLyBSZXNldCB0aGUgc2VlayBwb3NpdGlvbi5cbiAgICAgICAgICBzb3VuZC5fc2VlayA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICAgIHNvdW5kLl9yYXRlU2VlayA9IDA7XG4gICAgICAgICAgc291bmQuX3BhdXNlZCA9IHRydWU7XG4gICAgICAgICAgc291bmQuX2VuZGVkID0gdHJ1ZTtcblxuICAgICAgICAgIC8vIFN0b3AgY3VycmVudGx5IHJ1bm5pbmcgZmFkZXMuXG4gICAgICAgICAgc2VsZi5fc3RvcEZhZGUoaWRzW2ldKTtcblxuICAgICAgICAgIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgc291bmQncyBBdWRpb0J1ZmZlclNvdXJjZU5vZGUgaGFzIGJlZW4gY3JlYXRlZC5cbiAgICAgICAgICAgICAgaWYgKHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc291bmQuX25vZGUuYnVmZmVyU291cmNlLnN0b3AgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2Uubm90ZU9mZigwKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLnN0b3AoMCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIGJ1ZmZlciBzb3VyY2UuXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xlYW5CdWZmZXIoc291bmQuX25vZGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFpc05hTihzb3VuZC5fbm9kZS5kdXJhdGlvbikgfHwgc291bmQuX25vZGUuZHVyYXRpb24gPT09IEluZmluaXR5KSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmN1cnJlbnRUaW1lID0gc291bmQuX3N0YXJ0IHx8IDA7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLnBhdXNlKCk7XG5cbiAgICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyBhIGxpdmUgc3RyZWFtLCBzdG9wIGRvd25sb2FkIG9uY2UgdGhlIGF1ZGlvIGlzIHN0b3BwZWQuXG4gICAgICAgICAgICAgIGlmIChzb3VuZC5fbm9kZS5kdXJhdGlvbiA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgICAgICBzZWxmLl9jbGVhclNvdW5kKHNvdW5kLl9ub2RlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghaW50ZXJuYWwpIHtcbiAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3N0b3AnLCBzb3VuZC5faWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTXV0ZS91bm11dGUgYSBzaW5nbGUgc291bmQgb3IgYWxsIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gbXV0ZWQgU2V0IHRvIHRydWUgdG8gbXV0ZSBhbmQgZmFsc2UgdG8gdW5tdXRlLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgICAgVGhlIHNvdW5kIElEIHRvIHVwZGF0ZSAob21pdCB0byBtdXRlL3VubXV0ZSBhbGwpLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgbXV0ZTogZnVuY3Rpb24obXV0ZWQsIGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gbXV0ZSB3aGVuIGNhcGFibGUuXG4gICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnfHwgc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdtdXRlJyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5tdXRlKG11dGVkLCBpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgYXBwbHlpbmcgbXV0ZS91bm11dGUgdG8gYWxsIHNvdW5kcywgdXBkYXRlIHRoZSBncm91cCdzIHZhbHVlLlxuICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtdXRlZCA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgc2VsZi5fbXV0ZWQgPSBtdXRlZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5fbXV0ZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gaWQgaXMgcGFzc2VkLCBnZXQgYWxsIElEJ3MgdG8gYmUgbXV0ZWQuXG4gICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgIHNvdW5kLl9tdXRlZCA9IG11dGVkO1xuXG4gICAgICAgICAgLy8gQ2FuY2VsIGFjdGl2ZSBmYWRlIGFuZCBzZXQgdGhlIHZvbHVtZSB0byB0aGUgZW5kIHZhbHVlLlxuICAgICAgICAgIGlmIChzb3VuZC5faW50ZXJ2YWwpIHtcbiAgICAgICAgICAgIHNlbGYuX3N0b3BGYWRlKHNvdW5kLl9pZCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmIHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICBzb3VuZC5fbm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKG11dGVkID8gMCA6IHNvdW5kLl92b2x1bWUsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLm11dGVkID0gSG93bGVyLl9tdXRlZCA/IHRydWUgOiBtdXRlZDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLl9lbWl0KCdtdXRlJywgc291bmQuX2lkKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCB0aGUgdm9sdW1lIG9mIHRoaXMgc291bmQgb3Igb2YgdGhlIEhvd2wgZ3JvdXAuIFRoaXMgbWV0aG9kIGNhbiBvcHRpb25hbGx5IHRha2UgMCwgMSBvciAyIGFyZ3VtZW50cy5cbiAgICAgKiAgIHZvbHVtZSgpIC0+IFJldHVybnMgdGhlIGdyb3VwJ3Mgdm9sdW1lIHZhbHVlLlxuICAgICAqICAgdm9sdW1lKGlkKSAtPiBSZXR1cm5zIHRoZSBzb3VuZCBpZCdzIGN1cnJlbnQgdm9sdW1lLlxuICAgICAqICAgdm9sdW1lKHZvbCkgLT4gU2V0cyB0aGUgdm9sdW1lIG9mIGFsbCBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAqICAgdm9sdW1lKHZvbCwgaWQpIC0+IFNldHMgdGhlIHZvbHVtZSBvZiBwYXNzZWQgc291bmQgaWQuXG4gICAgICogQHJldHVybiB7SG93bC9OdW1iZXJ9IFJldHVybnMgc2VsZiBvciBjdXJyZW50IHZvbHVtZS5cbiAgICAgKi9cbiAgICB2b2x1bWU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICB2YXIgdm9sLCBpZDtcblxuICAgICAgLy8gRGV0ZXJtaW5lIHRoZSB2YWx1ZXMgYmFzZWQgb24gYXJndW1lbnRzLlxuICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIFJldHVybiB0aGUgdmFsdWUgb2YgdGhlIGdyb3Vwcycgdm9sdW1lLlxuICAgICAgICByZXR1cm4gc2VsZi5fdm9sdW1lO1xuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMSB8fCBhcmdzLmxlbmd0aCA9PT0gMiAmJiB0eXBlb2YgYXJnc1sxXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLy8gRmlyc3QgY2hlY2sgaWYgdGhpcyBpcyBhbiBJRCwgYW5kIGlmIG5vdCwgYXNzdW1lIGl0IGlzIGEgbmV3IHZvbHVtZS5cbiAgICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKCk7XG4gICAgICAgIHZhciBpbmRleCA9IGlkcy5pbmRleE9mKGFyZ3NbMF0pO1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1swXSwgMTApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZvbCA9IHBhcnNlRmxvYXQoYXJnc1swXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPj0gMikge1xuICAgICAgICB2b2wgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIHRoZSB2b2x1bWUgb3IgcmV0dXJuIHRoZSBjdXJyZW50IHZvbHVtZS5cbiAgICAgIHZhciBzb3VuZDtcbiAgICAgIGlmICh0eXBlb2Ygdm9sICE9PSAndW5kZWZpbmVkJyAmJiB2b2wgPj0gMCAmJiB2b2wgPD0gMSkge1xuICAgICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIGNoYW5nZSB2b2x1bWUgd2hlbiBjYXBhYmxlLlxuICAgICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnfHwgc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgIGV2ZW50OiAndm9sdW1lJyxcbiAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHNlbGYudm9sdW1lLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXQgdGhlIGdyb3VwIHZvbHVtZS5cbiAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzZWxmLl92b2x1bWUgPSB2b2w7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVcGRhdGUgb25lIG9yIGFsbCB2b2x1bWVzLlxuICAgICAgICBpZCA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPGlkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZFtpXSk7XG5cbiAgICAgICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgICAgIHNvdW5kLl92b2x1bWUgPSB2b2w7XG5cbiAgICAgICAgICAgIC8vIFN0b3AgY3VycmVudGx5IHJ1bm5pbmcgZmFkZXMuXG4gICAgICAgICAgICBpZiAoIWFyZ3NbMl0pIHtcbiAgICAgICAgICAgICAgc2VsZi5fc3RvcEZhZGUoaWRbaV0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUgJiYgIXNvdW5kLl9tdXRlZCkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKHZvbCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNvdW5kLl9ub2RlICYmICFzb3VuZC5fbXV0ZWQpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUudm9sdW1lID0gdm9sICogSG93bGVyLnZvbHVtZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZWxmLl9lbWl0KCd2b2x1bWUnLCBzb3VuZC5faWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc291bmQgPSBpZCA/IHNlbGYuX3NvdW5kQnlJZChpZCkgOiBzZWxmLl9zb3VuZHNbMF07XG4gICAgICAgIHJldHVybiBzb3VuZCA/IHNvdW5kLl92b2x1bWUgOiAwO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRmFkZSBhIGN1cnJlbnRseSBwbGF5aW5nIHNvdW5kIGJldHdlZW4gdHdvIHZvbHVtZXMgKGlmIG5vIGlkIGlzIHBhc3NlZCwgYWxsIHNvdW5kcyB3aWxsIGZhZGUpLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gZnJvbSBUaGUgdmFsdWUgdG8gZmFkZSBmcm9tICgwLjAgdG8gMS4wKS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHRvICAgVGhlIHZvbHVtZSB0byBmYWRlIHRvICgwLjAgdG8gMS4wKS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGxlbiAgVGltZSBpbiBtaWxsaXNlY29uZHMgdG8gZmFkZS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkICAgVGhlIHNvdW5kIGlkIChvbWl0IHRvIGZhZGUgYWxsIHNvdW5kcykuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBmYWRlOiBmdW5jdGlvbihmcm9tLCB0bywgbGVuLCBpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIGZhZGUgd2hlbiBjYXBhYmxlLlxuICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJyB8fCBzZWxmLl9wbGF5TG9jaykge1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ2ZhZGUnLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLmZhZGUoZnJvbSwgdG8sIGxlbiwgaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgdG8vZnJvbS9sZW4gdmFsdWVzIGFyZSBudW1iZXJzLlxuICAgICAgZnJvbSA9IE1hdGgubWluKE1hdGgubWF4KDAsIHBhcnNlRmxvYXQoZnJvbSkpLCAxKTtcbiAgICAgIHRvID0gTWF0aC5taW4oTWF0aC5tYXgoMCwgcGFyc2VGbG9hdCh0bykpLCAxKTtcbiAgICAgIGxlbiA9IHBhcnNlRmxvYXQobGVuKTtcblxuICAgICAgLy8gU2V0IHRoZSB2b2x1bWUgdG8gdGhlIHN0YXJ0IHBvc2l0aW9uLlxuICAgICAgc2VsZi52b2x1bWUoZnJvbSwgaWQpO1xuXG4gICAgICAvLyBGYWRlIHRoZSB2b2x1bWUgb2Ygb25lIG9yIGFsbCBzb3VuZHMuXG4gICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgICAvLyBDcmVhdGUgYSBsaW5lYXIgZmFkZSBvciBmYWxsIGJhY2sgdG8gdGltZW91dHMgd2l0aCBIVE1MNSBBdWRpby5cbiAgICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgICAgLy8gU3RvcCB0aGUgcHJldmlvdXMgZmFkZSBpZiBubyBzcHJpdGUgaXMgYmVpbmcgdXNlZCAob3RoZXJ3aXNlLCB2b2x1bWUgaGFuZGxlcyB0aGlzKS5cbiAgICAgICAgICBpZiAoIWlkKSB7XG4gICAgICAgICAgICBzZWxmLl9zdG9wRmFkZShpZHNbaV0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIElmIHdlIGFyZSB1c2luZyBXZWIgQXVkaW8sIGxldCB0aGUgbmF0aXZlIG1ldGhvZHMgZG8gdGhlIGFjdHVhbCBmYWRlLlxuICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiAhc291bmQuX211dGVkKSB7XG4gICAgICAgICAgICB2YXIgY3VycmVudFRpbWUgPSBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lO1xuICAgICAgICAgICAgdmFyIGVuZCA9IGN1cnJlbnRUaW1lICsgKGxlbiAvIDEwMDApO1xuICAgICAgICAgICAgc291bmQuX3ZvbHVtZSA9IGZyb207XG4gICAgICAgICAgICBzb3VuZC5fbm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKGZyb20sIGN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUodG8sIGVuZCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5fc3RhcnRGYWRlSW50ZXJ2YWwoc291bmQsIGZyb20sIHRvLCBsZW4sIGlkc1tpXSwgdHlwZW9mIGlkID09PSAndW5kZWZpbmVkJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0aGUgaW50ZXJuYWwgaW50ZXJ2YWwgdG8gZmFkZSBhIHNvdW5kLlxuICAgICAqIEBwYXJhbSAge09iamVjdH0gc291bmQgUmVmZXJlbmNlIHRvIHNvdW5kIHRvIGZhZGUuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBmcm9tIFRoZSB2YWx1ZSB0byBmYWRlIGZyb20gKDAuMCB0byAxLjApLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gdG8gICBUaGUgdm9sdW1lIHRvIGZhZGUgdG8gKDAuMCB0byAxLjApLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gbGVuICBUaW1lIGluIG1pbGxpc2Vjb25kcyB0byBmYWRlLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgICBUaGUgc291bmQgaWQgdG8gZmFkZS5cbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBpc0dyb3VwICAgSWYgdHJ1ZSwgc2V0IHRoZSB2b2x1bWUgb24gdGhlIGdyb3VwLlxuICAgICAqL1xuICAgIF9zdGFydEZhZGVJbnRlcnZhbDogZnVuY3Rpb24oc291bmQsIGZyb20sIHRvLCBsZW4sIGlkLCBpc0dyb3VwKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgdm9sID0gZnJvbTtcbiAgICAgIHZhciBkaWZmID0gdG8gLSBmcm9tO1xuICAgICAgdmFyIHN0ZXBzID0gTWF0aC5hYnMoZGlmZiAvIDAuMDEpO1xuICAgICAgdmFyIHN0ZXBMZW4gPSBNYXRoLm1heCg0LCAoc3RlcHMgPiAwKSA/IGxlbiAvIHN0ZXBzIDogbGVuKTtcbiAgICAgIHZhciBsYXN0VGljayA9IERhdGUubm93KCk7XG5cbiAgICAgIC8vIFN0b3JlIHRoZSB2YWx1ZSBiZWluZyBmYWRlZCB0by5cbiAgICAgIHNvdW5kLl9mYWRlVG8gPSB0bztcblxuICAgICAgLy8gVXBkYXRlIHRoZSB2b2x1bWUgdmFsdWUgb24gZWFjaCBpbnRlcnZhbCB0aWNrLlxuICAgICAgc291bmQuX2ludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgdm9sdW1lIGJhc2VkIG9uIHRoZSB0aW1lIHNpbmNlIHRoZSBsYXN0IHRpY2suXG4gICAgICAgIHZhciB0aWNrID0gKERhdGUubm93KCkgLSBsYXN0VGljaykgLyBsZW47XG4gICAgICAgIGxhc3RUaWNrID0gRGF0ZS5ub3coKTtcbiAgICAgICAgdm9sICs9IGRpZmYgKiB0aWNrO1xuXG4gICAgICAgIC8vIFJvdW5kIHRvIHdpdGhpbiAyIGRlY2ltYWwgcG9pbnRzLlxuICAgICAgICB2b2wgPSBNYXRoLnJvdW5kKHZvbCAqIDEwMCkgLyAxMDA7XG5cbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSB2b2x1bWUgaXMgaW4gdGhlIHJpZ2h0IGJvdW5kcy5cbiAgICAgICAgaWYgKGRpZmYgPCAwKSB7XG4gICAgICAgICAgdm9sID0gTWF0aC5tYXgodG8sIHZvbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm9sID0gTWF0aC5taW4odG8sIHZvbCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGFuZ2UgdGhlIHZvbHVtZS5cbiAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgc291bmQuX3ZvbHVtZSA9IHZvbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxmLnZvbHVtZSh2b2wsIHNvdW5kLl9pZCwgdHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXQgdGhlIGdyb3VwJ3Mgdm9sdW1lLlxuICAgICAgICBpZiAoaXNHcm91cCkge1xuICAgICAgICAgIHNlbGYuX3ZvbHVtZSA9IHZvbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdoZW4gdGhlIGZhZGUgaXMgY29tcGxldGUsIHN0b3AgaXQgYW5kIGZpcmUgZXZlbnQuXG4gICAgICAgIGlmICgodG8gPCBmcm9tICYmIHZvbCA8PSB0bykgfHwgKHRvID4gZnJvbSAmJiB2b2wgPj0gdG8pKSB7XG4gICAgICAgICAgY2xlYXJJbnRlcnZhbChzb3VuZC5faW50ZXJ2YWwpO1xuICAgICAgICAgIHNvdW5kLl9pbnRlcnZhbCA9IG51bGw7XG4gICAgICAgICAgc291bmQuX2ZhZGVUbyA9IG51bGw7XG4gICAgICAgICAgc2VsZi52b2x1bWUodG8sIHNvdW5kLl9pZCk7XG4gICAgICAgICAgc2VsZi5fZW1pdCgnZmFkZScsIHNvdW5kLl9pZCk7XG4gICAgICAgIH1cbiAgICAgIH0sIHN0ZXBMZW4pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBtZXRob2QgdGhhdCBzdG9wcyB0aGUgY3VycmVudGx5IHBsYXlpbmcgZmFkZSB3aGVuXG4gICAgICogYSBuZXcgZmFkZSBzdGFydHMsIHZvbHVtZSBpcyBjaGFuZ2VkIG9yIHRoZSBzb3VuZCBpcyBzdG9wcGVkLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgVGhlIHNvdW5kIGlkLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX3N0b3BGYWRlOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcblxuICAgICAgaWYgKHNvdW5kICYmIHNvdW5kLl9pbnRlcnZhbCkge1xuICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICBzb3VuZC5fbm9kZS5nYWluLmNhbmNlbFNjaGVkdWxlZFZhbHVlcyhIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoc291bmQuX2ludGVydmFsKTtcbiAgICAgICAgc291bmQuX2ludGVydmFsID0gbnVsbDtcbiAgICAgICAgc2VsZi52b2x1bWUoc291bmQuX2ZhZGVUbywgaWQpO1xuICAgICAgICBzb3VuZC5fZmFkZVRvID0gbnVsbDtcbiAgICAgICAgc2VsZi5fZW1pdCgnZmFkZScsIGlkKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldC9zZXQgdGhlIGxvb3AgcGFyYW1ldGVyIG9uIGEgc291bmQuIFRoaXMgbWV0aG9kIGNhbiBvcHRpb25hbGx5IHRha2UgMCwgMSBvciAyIGFyZ3VtZW50cy5cbiAgICAgKiAgIGxvb3AoKSAtPiBSZXR1cm5zIHRoZSBncm91cCdzIGxvb3AgdmFsdWUuXG4gICAgICogICBsb29wKGlkKSAtPiBSZXR1cm5zIHRoZSBzb3VuZCBpZCdzIGxvb3AgdmFsdWUuXG4gICAgICogICBsb29wKGxvb3ApIC0+IFNldHMgdGhlIGxvb3AgdmFsdWUgZm9yIGFsbCBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAqICAgbG9vcChsb29wLCBpZCkgLT4gU2V0cyB0aGUgbG9vcCB2YWx1ZSBvZiBwYXNzZWQgc291bmQgaWQuXG4gICAgICogQHJldHVybiB7SG93bC9Cb29sZWFufSBSZXR1cm5zIHNlbGYgb3IgY3VycmVudCBsb29wIHZhbHVlLlxuICAgICAqL1xuICAgIGxvb3A6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICB2YXIgbG9vcCwgaWQsIHNvdW5kO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIHZhbHVlcyBmb3IgbG9vcCBhbmQgaWQuXG4gICAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gUmV0dXJuIHRoZSBncm91J3MgbG9vcCB2YWx1ZS5cbiAgICAgICAgcmV0dXJuIHNlbGYuX2xvb3A7XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgbG9vcCA9IGFyZ3NbMF07XG4gICAgICAgICAgc2VsZi5fbG9vcCA9IGxvb3A7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUmV0dXJuIHRoaXMgc291bmQncyBsb29wIHZhbHVlLlxuICAgICAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKHBhcnNlSW50KGFyZ3NbMF0sIDEwKSk7XG4gICAgICAgICAgcmV0dXJuIHNvdW5kID8gc291bmQuX2xvb3AgOiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICBsb29wID0gYXJnc1swXTtcbiAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzFdLCAxMCk7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5vIGlkIGlzIHBhc3NlZCwgZ2V0IGFsbCBJRCdzIHRvIGJlIGxvb3BlZC5cbiAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgICAgc291bmQuX2xvb3AgPSBsb29wO1xuICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBzb3VuZC5fbm9kZSAmJiBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UpIHtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5sb29wID0gbG9vcDtcbiAgICAgICAgICAgIGlmIChsb29wKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5sb29wU3RhcnQgPSBzb3VuZC5fc3RhcnQgfHwgMDtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3BFbmQgPSBzb3VuZC5fc3RvcDtcblxuICAgICAgICAgICAgICAvLyBJZiBwbGF5aW5nLCByZXN0YXJ0IHBsYXliYWNrIHRvIGVuc3VyZSBsb29waW5nIHVwZGF0ZXMuXG4gICAgICAgICAgICAgIGlmIChzZWxmLnBsYXlpbmcoaWRzW2ldKSkge1xuICAgICAgICAgICAgICAgIHNlbGYucGF1c2UoaWRzW2ldLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBzZWxmLnBsYXkoaWRzW2ldLCB0cnVlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCB0aGUgcGxheWJhY2sgcmF0ZSBvZiBhIHNvdW5kLiBUaGlzIG1ldGhvZCBjYW4gb3B0aW9uYWxseSB0YWtlIDAsIDEgb3IgMiBhcmd1bWVudHMuXG4gICAgICogICByYXRlKCkgLT4gUmV0dXJucyB0aGUgZmlyc3Qgc291bmQgbm9kZSdzIGN1cnJlbnQgcGxheWJhY2sgcmF0ZS5cbiAgICAgKiAgIHJhdGUoaWQpIC0+IFJldHVybnMgdGhlIHNvdW5kIGlkJ3MgY3VycmVudCBwbGF5YmFjayByYXRlLlxuICAgICAqICAgcmF0ZShyYXRlKSAtPiBTZXRzIHRoZSBwbGF5YmFjayByYXRlIG9mIGFsbCBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAqICAgcmF0ZShyYXRlLCBpZCkgLT4gU2V0cyB0aGUgcGxheWJhY2sgcmF0ZSBvZiBwYXNzZWQgc291bmQgaWQuXG4gICAgICogQHJldHVybiB7SG93bC9OdW1iZXJ9IFJldHVybnMgc2VsZiBvciB0aGUgY3VycmVudCBwbGF5YmFjayByYXRlLlxuICAgICAqL1xuICAgIHJhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICB2YXIgcmF0ZSwgaWQ7XG5cbiAgICAgIC8vIERldGVybWluZSB0aGUgdmFsdWVzIGJhc2VkIG9uIGFyZ3VtZW50cy5cbiAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBXZSB3aWxsIHNpbXBseSByZXR1cm4gdGhlIGN1cnJlbnQgcmF0ZSBvZiB0aGUgZmlyc3Qgbm9kZS5cbiAgICAgICAgaWQgPSBzZWxmLl9zb3VuZHNbMF0uX2lkO1xuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAvLyBGaXJzdCBjaGVjayBpZiB0aGlzIGlzIGFuIElELCBhbmQgaWYgbm90LCBhc3N1bWUgaXQgaXMgYSBuZXcgcmF0ZSB2YWx1ZS5cbiAgICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKCk7XG4gICAgICAgIHZhciBpbmRleCA9IGlkcy5pbmRleE9mKGFyZ3NbMF0pO1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1swXSwgMTApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJhdGUgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHJhdGUgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIHRoZSBwbGF5YmFjayByYXRlIG9yIHJldHVybiB0aGUgY3VycmVudCB2YWx1ZS5cbiAgICAgIHZhciBzb3VuZDtcbiAgICAgIGlmICh0eXBlb2YgcmF0ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBjaGFuZ2UgcGxheWJhY2sgcmF0ZSB3aGVuIGNhcGFibGUuXG4gICAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcgfHwgc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgIGV2ZW50OiAncmF0ZScsXG4gICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBzZWxmLnJhdGUuYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldCB0aGUgZ3JvdXAgcmF0ZS5cbiAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzZWxmLl9yYXRlID0gcmF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSBvbmUgb3IgYWxsIHZvbHVtZXMuXG4gICAgICAgIGlkID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgICAgICBmb3IgKHZhciBpPTA7IGk8aWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkW2ldKTtcblxuICAgICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgICAgLy8gS2VlcCB0cmFjayBvZiBvdXIgcG9zaXRpb24gd2hlbiB0aGUgcmF0ZSBjaGFuZ2VkIGFuZCB1cGRhdGUgdGhlIHBsYXliYWNrXG4gICAgICAgICAgICAvLyBzdGFydCBwb3NpdGlvbiBzbyB3ZSBjYW4gcHJvcGVybHkgYWRqdXN0IHRoZSBzZWVrIHBvc2l0aW9uIGZvciB0aW1lIGVsYXBzZWQuXG4gICAgICAgICAgICBpZiAoc2VsZi5wbGF5aW5nKGlkW2ldKSkge1xuICAgICAgICAgICAgICBzb3VuZC5fcmF0ZVNlZWsgPSBzZWxmLnNlZWsoaWRbaV0pO1xuICAgICAgICAgICAgICBzb3VuZC5fcGxheVN0YXJ0ID0gc2VsZi5fd2ViQXVkaW8gPyBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lIDogc291bmQuX3BsYXlTdGFydDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNvdW5kLl9yYXRlID0gcmF0ZTtcblxuICAgICAgICAgICAgLy8gQ2hhbmdlIHRoZSBwbGF5YmFjayByYXRlLlxuICAgICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmIHNvdW5kLl9ub2RlICYmIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZSkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UucGxheWJhY2tSYXRlLnNldFZhbHVlQXRUaW1lKHJhdGUsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5wbGF5YmFja1JhdGUgPSByYXRlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBSZXNldCB0aGUgdGltZXJzLlxuICAgICAgICAgICAgdmFyIHNlZWsgPSBzZWxmLnNlZWsoaWRbaV0pO1xuICAgICAgICAgICAgdmFyIGR1cmF0aW9uID0gKChzZWxmLl9zcHJpdGVbc291bmQuX3Nwcml0ZV1bMF0gKyBzZWxmLl9zcHJpdGVbc291bmQuX3Nwcml0ZV1bMV0pIC8gMTAwMCkgLSBzZWVrO1xuICAgICAgICAgICAgdmFyIHRpbWVvdXQgPSAoZHVyYXRpb24gKiAxMDAwKSAvIE1hdGguYWJzKHNvdW5kLl9yYXRlKTtcblxuICAgICAgICAgICAgLy8gU3RhcnQgYSBuZXcgZW5kIHRpbWVyIGlmIHNvdW5kIGlzIGFscmVhZHkgcGxheWluZy5cbiAgICAgICAgICAgIGlmIChzZWxmLl9lbmRUaW1lcnNbaWRbaV1dIHx8ICFzb3VuZC5fcGF1c2VkKSB7XG4gICAgICAgICAgICAgIHNlbGYuX2NsZWFyVGltZXIoaWRbaV0pO1xuICAgICAgICAgICAgICBzZWxmLl9lbmRUaW1lcnNbaWRbaV1dID0gc2V0VGltZW91dChzZWxmLl9lbmRlZC5iaW5kKHNlbGYsIHNvdW5kKSwgdGltZW91dCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3JhdGUnLCBzb3VuZC5faWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWQpO1xuICAgICAgICByZXR1cm4gc291bmQgPyBzb3VuZC5fcmF0ZSA6IHNlbGYuX3JhdGU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQvc2V0IHRoZSBzZWVrIHBvc2l0aW9uIG9mIGEgc291bmQuIFRoaXMgbWV0aG9kIGNhbiBvcHRpb25hbGx5IHRha2UgMCwgMSBvciAyIGFyZ3VtZW50cy5cbiAgICAgKiAgIHNlZWsoKSAtPiBSZXR1cm5zIHRoZSBmaXJzdCBzb3VuZCBub2RlJ3MgY3VycmVudCBzZWVrIHBvc2l0aW9uLlxuICAgICAqICAgc2VlayhpZCkgLT4gUmV0dXJucyB0aGUgc291bmQgaWQncyBjdXJyZW50IHNlZWsgcG9zaXRpb24uXG4gICAgICogICBzZWVrKHNlZWspIC0+IFNldHMgdGhlIHNlZWsgcG9zaXRpb24gb2YgdGhlIGZpcnN0IHNvdW5kIG5vZGUuXG4gICAgICogICBzZWVrKHNlZWssIGlkKSAtPiBTZXRzIHRoZSBzZWVrIHBvc2l0aW9uIG9mIHBhc3NlZCBzb3VuZCBpZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsL051bWJlcn0gUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IHNlZWsgcG9zaXRpb24uXG4gICAgICovXG4gICAgc2VlazogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIHZhciBzZWVrLCBpZDtcblxuICAgICAgLy8gRGV0ZXJtaW5lIHRoZSB2YWx1ZXMgYmFzZWQgb24gYXJndW1lbnRzLlxuICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIFdlIHdpbGwgc2ltcGx5IHJldHVybiB0aGUgY3VycmVudCBwb3NpdGlvbiBvZiB0aGUgZmlyc3Qgbm9kZS5cbiAgICAgICAgaWYgKHNlbGYuX3NvdW5kcy5sZW5ndGgpIHtcbiAgICAgICAgICBpZCA9IHNlbGYuX3NvdW5kc1swXS5faWQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgLy8gRmlyc3QgY2hlY2sgaWYgdGhpcyBpcyBhbiBJRCwgYW5kIGlmIG5vdCwgYXNzdW1lIGl0IGlzIGEgbmV3IHNlZWsgcG9zaXRpb24uXG4gICAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcygpO1xuICAgICAgICB2YXIgaW5kZXggPSBpZHMuaW5kZXhPZihhcmdzWzBdKTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMF0sIDEwKTtcbiAgICAgICAgfSBlbHNlIGlmIChzZWxmLl9zb3VuZHMubGVuZ3RoKSB7XG4gICAgICAgICAgaWQgPSBzZWxmLl9zb3VuZHNbMF0uX2lkO1xuICAgICAgICAgIHNlZWsgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHNlZWsgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gSUQsIGJhaWwgb3V0LlxuICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gc2VlayB3aGVuIGNhcGFibGUuXG4gICAgICBpZiAodHlwZW9mIHNlZWsgPT09ICdudW1iZXInICYmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcgfHwgc2VsZi5fcGxheUxvY2spKSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAnc2VlaycsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuc2Vlay5hcHBseShzZWxmLCBhcmdzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcblxuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2VlayA9PT0gJ251bWJlcicgJiYgc2VlayA+PSAwKSB7XG4gICAgICAgICAgLy8gUGF1c2UgdGhlIHNvdW5kIGFuZCB1cGRhdGUgcG9zaXRpb24gZm9yIHJlc3RhcnRpbmcgcGxheWJhY2suXG4gICAgICAgICAgdmFyIHBsYXlpbmcgPSBzZWxmLnBsYXlpbmcoaWQpO1xuICAgICAgICAgIGlmIChwbGF5aW5nKSB7XG4gICAgICAgICAgICBzZWxmLnBhdXNlKGlkLCB0cnVlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBNb3ZlIHRoZSBwb3NpdGlvbiBvZiB0aGUgdHJhY2sgYW5kIGNhbmNlbCB0aW1lci5cbiAgICAgICAgICBzb3VuZC5fc2VlayA9IHNlZWs7XG4gICAgICAgICAgc291bmQuX2VuZGVkID0gZmFsc2U7XG4gICAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihpZCk7XG5cbiAgICAgICAgICAvLyBVcGRhdGUgdGhlIHNlZWsgcG9zaXRpb24gZm9yIEhUTUw1IEF1ZGlvLlxuICAgICAgICAgIGlmICghc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUgJiYgIWlzTmFOKHNvdW5kLl9ub2RlLmR1cmF0aW9uKSkge1xuICAgICAgICAgICAgc291bmQuX25vZGUuY3VycmVudFRpbWUgPSBzZWVrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFNlZWsgYW5kIGVtaXQgd2hlbiByZWFkeS5cbiAgICAgICAgICB2YXIgc2Vla0FuZEVtaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIFJlc3RhcnQgdGhlIHBsYXliYWNrIGlmIHRoZSBzb3VuZCB3YXMgcGxheWluZy5cbiAgICAgICAgICAgIGlmIChwbGF5aW5nKSB7XG4gICAgICAgICAgICAgIHNlbGYucGxheShpZCwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3NlZWsnLCBpZCk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIC8vIFdhaXQgZm9yIHRoZSBwbGF5IGxvY2sgdG8gYmUgdW5zZXQgYmVmb3JlIGVtaXR0aW5nIChIVE1MNSBBdWRpbykuXG4gICAgICAgICAgaWYgKHBsYXlpbmcgJiYgIXNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgICB2YXIgZW1pdFNlZWsgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgaWYgKCFzZWxmLl9wbGF5TG9jaykge1xuICAgICAgICAgICAgICAgIHNlZWtBbmRFbWl0KCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChlbWl0U2VlaywgMCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGVtaXRTZWVrLCAwKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2Vla0FuZEVtaXQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgICB2YXIgcmVhbFRpbWUgPSBzZWxmLnBsYXlpbmcoaWQpID8gSG93bGVyLmN0eC5jdXJyZW50VGltZSAtIHNvdW5kLl9wbGF5U3RhcnQgOiAwO1xuICAgICAgICAgICAgdmFyIHJhdGVTZWVrID0gc291bmQuX3JhdGVTZWVrID8gc291bmQuX3JhdGVTZWVrIC0gc291bmQuX3NlZWsgOiAwO1xuICAgICAgICAgICAgcmV0dXJuIHNvdW5kLl9zZWVrICsgKHJhdGVTZWVrICsgcmVhbFRpbWUgKiBNYXRoLmFicyhzb3VuZC5fcmF0ZSkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc291bmQuX25vZGUuY3VycmVudFRpbWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBhIHNwZWNpZmljIHNvdW5kIGlzIGN1cnJlbnRseSBwbGF5aW5nIG9yIG5vdCAoaWYgaWQgaXMgcHJvdmlkZWQpLCBvciBjaGVjayBpZiBhdCBsZWFzdCBvbmUgb2YgdGhlIHNvdW5kcyBpbiB0aGUgZ3JvdXAgaXMgcGxheWluZyBvciBub3QuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSAgaWQgVGhlIHNvdW5kIGlkIHRvIGNoZWNrLiBJZiBub25lIGlzIHBhc3NlZCwgdGhlIHdob2xlIHNvdW5kIGdyb3VwIGlzIGNoZWNrZWQuXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gVHJ1ZSBpZiBwbGF5aW5nIGFuZCBmYWxzZSBpZiBub3QuXG4gICAgICovXG4gICAgcGxheWluZzogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gQ2hlY2sgdGhlIHBhc3NlZCBzb3VuZCBJRCAoaWYgYW55KS5cbiAgICAgIGlmICh0eXBlb2YgaWQgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZCk7XG4gICAgICAgIHJldHVybiBzb3VuZCA/ICFzb3VuZC5fcGF1c2VkIDogZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIE90aGVyd2lzZSwgbG9vcCB0aHJvdWdoIGFsbCBzb3VuZHMgYW5kIGNoZWNrIGlmIGFueSBhcmUgcGxheWluZy5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9zb3VuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKCFzZWxmLl9zb3VuZHNbaV0uX3BhdXNlZCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBkdXJhdGlvbiBvZiB0aGlzIHNvdW5kLiBQYXNzaW5nIGEgc291bmQgaWQgd2lsbCByZXR1cm4gdGhlIHNwcml0ZSBkdXJhdGlvbi5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIFRoZSBzb3VuZCBpZCB0byBjaGVjay4gSWYgbm9uZSBpcyBwYXNzZWQsIHJldHVybiBmdWxsIHNvdXJjZSBkdXJhdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IEF1ZGlvIGR1cmF0aW9uIGluIHNlY29uZHMuXG4gICAgICovXG4gICAgZHVyYXRpb246IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgZHVyYXRpb24gPSBzZWxmLl9kdXJhdGlvbjtcblxuICAgICAgLy8gSWYgd2UgcGFzcyBhbiBJRCwgZ2V0IHRoZSBzb3VuZCBhbmQgcmV0dXJuIHRoZSBzcHJpdGUgbGVuZ3RoLlxuICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcbiAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICBkdXJhdGlvbiA9IHNlbGYuX3Nwcml0ZVtzb3VuZC5fc3ByaXRlXVsxXSAvIDEwMDA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkdXJhdGlvbjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBsb2FkZWQgc3RhdGUgb2YgdGhpcyBIb3dsLlxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gJ3VubG9hZGVkJywgJ2xvYWRpbmcnLCAnbG9hZGVkJ1xuICAgICAqL1xuICAgIHN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zdGF0ZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVW5sb2FkIGFuZCBkZXN0cm95IHRoZSBjdXJyZW50IEhvd2wgb2JqZWN0LlxuICAgICAqIFRoaXMgd2lsbCBpbW1lZGlhdGVseSBzdG9wIGFsbCBzb3VuZCBpbnN0YW5jZXMgYXR0YWNoZWQgdG8gdGhpcyBncm91cC5cbiAgICAgKi9cbiAgICB1bmxvYWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBTdG9wIHBsYXlpbmcgYW55IGFjdGl2ZSBzb3VuZHMuXG4gICAgICB2YXIgc291bmRzID0gc2VsZi5fc291bmRzO1xuICAgICAgZm9yICh2YXIgaT0wOyBpPHNvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBTdG9wIHRoZSBzb3VuZCBpZiBpdCBpcyBjdXJyZW50bHkgcGxheWluZy5cbiAgICAgICAgaWYgKCFzb3VuZHNbaV0uX3BhdXNlZCkge1xuICAgICAgICAgIHNlbGYuc3RvcChzb3VuZHNbaV0uX2lkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgc291cmNlIG9yIGRpc2Nvbm5lY3QuXG4gICAgICAgIGlmICghc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAvLyBTZXQgdGhlIHNvdXJjZSB0byAwLXNlY29uZCBzaWxlbmNlIHRvIHN0b3AgYW55IGRvd25sb2FkaW5nIChleGNlcHQgaW4gSUUpLlxuICAgICAgICAgIHNlbGYuX2NsZWFyU291bmQoc291bmRzW2ldLl9ub2RlKTtcblxuICAgICAgICAgIC8vIFJlbW92ZSBhbnkgZXZlbnQgbGlzdGVuZXJzLlxuICAgICAgICAgIHNvdW5kc1tpXS5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIHNvdW5kc1tpXS5fZXJyb3JGbiwgZmFsc2UpO1xuICAgICAgICAgIHNvdW5kc1tpXS5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKEhvd2xlci5fY2FuUGxheUV2ZW50LCBzb3VuZHNbaV0uX2xvYWRGbiwgZmFsc2UpO1xuICAgICAgICAgIHNvdW5kc1tpXS5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdlbmRlZCcsIHNvdW5kc1tpXS5fZW5kRm4sIGZhbHNlKTtcblxuICAgICAgICAgIC8vIFJlbGVhc2UgdGhlIEF1ZGlvIG9iamVjdCBiYWNrIHRvIHRoZSBwb29sLlxuICAgICAgICAgIEhvd2xlci5fcmVsZWFzZUh0bWw1QXVkaW8oc291bmRzW2ldLl9ub2RlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEVtcHR5IG91dCBhbGwgb2YgdGhlIG5vZGVzLlxuICAgICAgICBkZWxldGUgc291bmRzW2ldLl9ub2RlO1xuXG4gICAgICAgIC8vIE1ha2Ugc3VyZSBhbGwgdGltZXJzIGFyZSBjbGVhcmVkIG91dC5cbiAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihzb3VuZHNbaV0uX2lkKTtcbiAgICAgIH1cblxuICAgICAgLy8gUmVtb3ZlIHRoZSByZWZlcmVuY2VzIGluIHRoZSBnbG9iYWwgSG93bGVyIG9iamVjdC5cbiAgICAgIHZhciBpbmRleCA9IEhvd2xlci5faG93bHMuaW5kZXhPZihzZWxmKTtcbiAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgIEhvd2xlci5faG93bHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH1cblxuICAgICAgLy8gRGVsZXRlIHRoaXMgc291bmQgZnJvbSB0aGUgY2FjaGUgKGlmIG5vIG90aGVyIEhvd2wgaXMgdXNpbmcgaXQpLlxuICAgICAgdmFyIHJlbUNhY2hlID0gdHJ1ZTtcbiAgICAgIGZvciAoaT0wOyBpPEhvd2xlci5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKEhvd2xlci5faG93bHNbaV0uX3NyYyA9PT0gc2VsZi5fc3JjIHx8IHNlbGYuX3NyYy5pbmRleE9mKEhvd2xlci5faG93bHNbaV0uX3NyYykgPj0gMCkge1xuICAgICAgICAgIHJlbUNhY2hlID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGNhY2hlICYmIHJlbUNhY2hlKSB7XG4gICAgICAgIGRlbGV0ZSBjYWNoZVtzZWxmLl9zcmNdO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhciBnbG9iYWwgZXJyb3JzLlxuICAgICAgSG93bGVyLm5vQXVkaW8gPSBmYWxzZTtcblxuICAgICAgLy8gQ2xlYXIgb3V0IGBzZWxmYC5cbiAgICAgIHNlbGYuX3N0YXRlID0gJ3VubG9hZGVkJztcbiAgICAgIHNlbGYuX3NvdW5kcyA9IFtdO1xuICAgICAgc2VsZiA9IG51bGw7XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBMaXN0ZW4gdG8gYSBjdXN0b20gZXZlbnQuXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgIGV2ZW50IEV2ZW50IG5hbWUuXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGZuICAgIExpc3RlbmVyIHRvIGNhbGwuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSAgIGlkICAgIChvcHRpb25hbCkgT25seSBsaXN0ZW4gdG8gZXZlbnRzIGZvciB0aGlzIHNvdW5kLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gICBvbmNlICAoSU5URVJOQUwpIE1hcmtzIGV2ZW50IHRvIGZpcmUgb25seSBvbmNlLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgb246IGZ1bmN0aW9uKGV2ZW50LCBmbiwgaWQsIG9uY2UpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBldmVudHMgPSBzZWxmWydfb24nICsgZXZlbnRdO1xuXG4gICAgICBpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGV2ZW50cy5wdXNoKG9uY2UgPyB7aWQ6IGlkLCBmbjogZm4sIG9uY2U6IG9uY2V9IDoge2lkOiBpZCwgZm46IGZufSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYSBjdXN0b20gZXZlbnQuIENhbGwgd2l0aG91dCBwYXJhbWV0ZXJzIHRvIHJlbW92ZSBhbGwgZXZlbnRzLlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gICBldmVudCBFdmVudCBuYW1lLlxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmbiAgICBMaXN0ZW5lciB0byByZW1vdmUuIExlYXZlIGVtcHR5IHRvIHJlbW92ZSBhbGwuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSAgIGlkICAgIChvcHRpb25hbCkgT25seSByZW1vdmUgZXZlbnRzIGZvciB0aGlzIHNvdW5kLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgb2ZmOiBmdW5jdGlvbihldmVudCwgZm4sIGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgZXZlbnRzID0gc2VsZlsnX29uJyArIGV2ZW50XTtcbiAgICAgIHZhciBpID0gMDtcblxuICAgICAgLy8gQWxsb3cgcGFzc2luZyBqdXN0IGFuIGV2ZW50IGFuZCBJRC5cbiAgICAgIGlmICh0eXBlb2YgZm4gPT09ICdudW1iZXInKSB7XG4gICAgICAgIGlkID0gZm47XG4gICAgICAgIGZuID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaWYgKGZuIHx8IGlkKSB7XG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBldmVudCBzdG9yZSBhbmQgcmVtb3ZlIHRoZSBwYXNzZWQgZnVuY3Rpb24uXG4gICAgICAgIGZvciAoaT0wOyBpPGV2ZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBpc0lkID0gKGlkID09PSBldmVudHNbaV0uaWQpO1xuICAgICAgICAgIGlmIChmbiA9PT0gZXZlbnRzW2ldLmZuICYmIGlzSWQgfHwgIWZuICYmIGlzSWQpIHtcbiAgICAgICAgICAgIGV2ZW50cy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZXZlbnQpIHtcbiAgICAgICAgLy8gQ2xlYXIgb3V0IGFsbCBldmVudHMgb2YgdGhpcyB0eXBlLlxuICAgICAgICBzZWxmWydfb24nICsgZXZlbnRdID0gW107XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBDbGVhciBvdXQgYWxsIGV2ZW50cyBvZiBldmVyeSB0eXBlLlxuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHNlbGYpO1xuICAgICAgICBmb3IgKGk9MDsgaTxrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKChrZXlzW2ldLmluZGV4T2YoJ19vbicpID09PSAwKSAmJiBBcnJheS5pc0FycmF5KHNlbGZba2V5c1tpXV0pKSB7XG4gICAgICAgICAgICBzZWxmW2tleXNbaV1dID0gW107XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBMaXN0ZW4gdG8gYSBjdXN0b20gZXZlbnQgYW5kIHJlbW92ZSBpdCBvbmNlIGZpcmVkLlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gICBldmVudCBFdmVudCBuYW1lLlxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmbiAgICBMaXN0ZW5lciB0byBjYWxsLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gICBpZCAgICAob3B0aW9uYWwpIE9ubHkgbGlzdGVuIHRvIGV2ZW50cyBmb3IgdGhpcyBzb3VuZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIG9uY2U6IGZ1bmN0aW9uKGV2ZW50LCBmbiwgaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gU2V0dXAgdGhlIGV2ZW50IGxpc3RlbmVyLlxuICAgICAgc2VsZi5vbihldmVudCwgZm4sIGlkLCAxKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEVtaXQgYWxsIGV2ZW50cyBvZiBhIHNwZWNpZmljIHR5cGUgYW5kIHBhc3MgdGhlIHNvdW5kIGlkLlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gZXZlbnQgRXZlbnQgbmFtZS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkICAgIFNvdW5kIElELlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gbXNnICAgTWVzc2FnZSB0byBnbyB3aXRoIGV2ZW50LlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX2VtaXQ6IGZ1bmN0aW9uKGV2ZW50LCBpZCwgbXNnKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgZXZlbnRzID0gc2VsZlsnX29uJyArIGV2ZW50XTtcblxuICAgICAgLy8gTG9vcCB0aHJvdWdoIGV2ZW50IHN0b3JlIGFuZCBmaXJlIGFsbCBmdW5jdGlvbnMuXG4gICAgICBmb3IgKHZhciBpPWV2ZW50cy5sZW5ndGgtMTsgaT49MDsgaS0tKSB7XG4gICAgICAgIC8vIE9ubHkgZmlyZSB0aGUgbGlzdGVuZXIgaWYgdGhlIGNvcnJlY3QgSUQgaXMgdXNlZC5cbiAgICAgICAgaWYgKCFldmVudHNbaV0uaWQgfHwgZXZlbnRzW2ldLmlkID09PSBpZCB8fCBldmVudCA9PT0gJ2xvYWQnKSB7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbihmbikge1xuICAgICAgICAgICAgZm4uY2FsbCh0aGlzLCBpZCwgbXNnKTtcbiAgICAgICAgICB9LmJpbmQoc2VsZiwgZXZlbnRzW2ldLmZuKSwgMCk7XG5cbiAgICAgICAgICAvLyBJZiB0aGlzIGV2ZW50IHdhcyBzZXR1cCB3aXRoIGBvbmNlYCwgcmVtb3ZlIGl0LlxuICAgICAgICAgIGlmIChldmVudHNbaV0ub25jZSkge1xuICAgICAgICAgICAgc2VsZi5vZmYoZXZlbnQsIGV2ZW50c1tpXS5mbiwgZXZlbnRzW2ldLmlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUGFzcyB0aGUgZXZlbnQgdHlwZSBpbnRvIGxvYWQgcXVldWUgc28gdGhhdCBpdCBjYW4gY29udGludWUgc3RlcHBpbmcuXG4gICAgICBzZWxmLl9sb2FkUXVldWUoZXZlbnQpO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUXVldWUgb2YgYWN0aW9ucyBpbml0aWF0ZWQgYmVmb3JlIHRoZSBzb3VuZCBoYXMgbG9hZGVkLlxuICAgICAqIFRoZXNlIHdpbGwgYmUgY2FsbGVkIGluIHNlcXVlbmNlLCB3aXRoIHRoZSBuZXh0IG9ubHkgZmlyaW5nXG4gICAgICogYWZ0ZXIgdGhlIHByZXZpb3VzIGhhcyBmaW5pc2hlZCBleGVjdXRpbmcgKGV2ZW4gaWYgYXN5bmMgbGlrZSBwbGF5KS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9sb2FkUXVldWU6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGlmIChzZWxmLl9xdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciB0YXNrID0gc2VsZi5fcXVldWVbMF07XG5cbiAgICAgICAgLy8gUmVtb3ZlIHRoaXMgdGFzayBpZiBhIG1hdGNoaW5nIGV2ZW50IHdhcyBwYXNzZWQuXG4gICAgICAgIGlmICh0YXNrLmV2ZW50ID09PSBldmVudCkge1xuICAgICAgICAgIHNlbGYuX3F1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgc2VsZi5fbG9hZFF1ZXVlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSdW4gdGhlIHRhc2sgaWYgbm8gZXZlbnQgdHlwZSBpcyBwYXNzZWQuXG4gICAgICAgIGlmICghZXZlbnQpIHtcbiAgICAgICAgICB0YXNrLmFjdGlvbigpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBGaXJlZCB3aGVuIHBsYXliYWNrIGVuZHMgYXQgdGhlIGVuZCBvZiB0aGUgZHVyYXRpb24uXG4gICAgICogQHBhcmFtICB7U291bmR9IHNvdW5kIFRoZSBzb3VuZCBvYmplY3QgdG8gd29yayB3aXRoLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX2VuZGVkOiBmdW5jdGlvbihzb3VuZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHNwcml0ZSA9IHNvdW5kLl9zcHJpdGU7XG5cbiAgICAgIC8vIElmIHdlIGFyZSB1c2luZyBJRSBhbmQgdGhlcmUgd2FzIG5ldHdvcmsgbGF0ZW5jeSB3ZSBtYXkgYmUgY2xpcHBpbmdcbiAgICAgIC8vIGF1ZGlvIGJlZm9yZSBpdCBjb21wbGV0ZXMgcGxheWluZy4gTGV0cyBjaGVjayB0aGUgbm9kZSB0byBtYWtlIHN1cmUgaXRcbiAgICAgIC8vIGJlbGlldmVzIGl0IGhhcyBjb21wbGV0ZWQsIGJlZm9yZSBlbmRpbmcgdGhlIHBsYXliYWNrLlxuICAgICAgaWYgKCFzZWxmLl93ZWJBdWRpbyAmJiBzb3VuZC5fbm9kZSAmJiAhc291bmQuX25vZGUucGF1c2VkICYmICFzb3VuZC5fbm9kZS5lbmRlZCAmJiBzb3VuZC5fbm9kZS5jdXJyZW50VGltZSA8IHNvdW5kLl9zdG9wKSB7XG4gICAgICAgIHNldFRpbWVvdXQoc2VsZi5fZW5kZWQuYmluZChzZWxmLCBzb3VuZCksIDEwMCk7XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBTaG91bGQgdGhpcyBzb3VuZCBsb29wP1xuICAgICAgdmFyIGxvb3AgPSAhIShzb3VuZC5fbG9vcCB8fCBzZWxmLl9zcHJpdGVbc3ByaXRlXVsyXSk7XG5cbiAgICAgIC8vIEZpcmUgdGhlIGVuZGVkIGV2ZW50LlxuICAgICAgc2VsZi5fZW1pdCgnZW5kJywgc291bmQuX2lkKTtcblxuICAgICAgLy8gUmVzdGFydCB0aGUgcGxheWJhY2sgZm9yIEhUTUw1IEF1ZGlvIGxvb3AuXG4gICAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvICYmIGxvb3ApIHtcbiAgICAgICAgc2VsZi5zdG9wKHNvdW5kLl9pZCwgdHJ1ZSkucGxheShzb3VuZC5faWQpO1xuICAgICAgfVxuXG4gICAgICAvLyBSZXN0YXJ0IHRoaXMgdGltZXIgaWYgb24gYSBXZWIgQXVkaW8gbG9vcC5cbiAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBsb29wKSB7XG4gICAgICAgIHNlbGYuX2VtaXQoJ3BsYXknLCBzb3VuZC5faWQpO1xuICAgICAgICBzb3VuZC5fc2VlayA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICBzb3VuZC5fcmF0ZVNlZWsgPSAwO1xuICAgICAgICBzb3VuZC5fcGxheVN0YXJ0ID0gSG93bGVyLmN0eC5jdXJyZW50VGltZTtcblxuICAgICAgICB2YXIgdGltZW91dCA9ICgoc291bmQuX3N0b3AgLSBzb3VuZC5fc3RhcnQpICogMTAwMCkgLyBNYXRoLmFicyhzb3VuZC5fcmF0ZSk7XG4gICAgICAgIHNlbGYuX2VuZFRpbWVyc1tzb3VuZC5faWRdID0gc2V0VGltZW91dChzZWxmLl9lbmRlZC5iaW5kKHNlbGYsIHNvdW5kKSwgdGltZW91dCk7XG4gICAgICB9XG5cbiAgICAgIC8vIE1hcmsgdGhlIG5vZGUgYXMgcGF1c2VkLlxuICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmICFsb29wKSB7XG4gICAgICAgIHNvdW5kLl9wYXVzZWQgPSB0cnVlO1xuICAgICAgICBzb3VuZC5fZW5kZWQgPSB0cnVlO1xuICAgICAgICBzb3VuZC5fc2VlayA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICBzb3VuZC5fcmF0ZVNlZWsgPSAwO1xuICAgICAgICBzZWxmLl9jbGVhclRpbWVyKHNvdW5kLl9pZCk7XG5cbiAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIGJ1ZmZlciBzb3VyY2UuXG4gICAgICAgIHNlbGYuX2NsZWFuQnVmZmVyKHNvdW5kLl9ub2RlKTtcblxuICAgICAgICAvLyBBdHRlbXB0IHRvIGF1dG8tc3VzcGVuZCBBdWRpb0NvbnRleHQgaWYgbm8gc291bmRzIGFyZSBzdGlsbCBwbGF5aW5nLlxuICAgICAgICBIb3dsZXIuX2F1dG9TdXNwZW5kKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFdoZW4gdXNpbmcgYSBzcHJpdGUsIGVuZCB0aGUgdHJhY2suXG4gICAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvICYmICFsb29wKSB7XG4gICAgICAgIHNlbGYuc3RvcChzb3VuZC5faWQsIHRydWUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2xlYXIgdGhlIGVuZCB0aW1lciBmb3IgYSBzb3VuZCBwbGF5YmFjay5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIFRoZSBzb3VuZCBJRC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9jbGVhclRpbWVyOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBpZiAoc2VsZi5fZW5kVGltZXJzW2lkXSkge1xuICAgICAgICAvLyBDbGVhciB0aGUgdGltZW91dCBvciByZW1vdmUgdGhlIGVuZGVkIGxpc3RlbmVyLlxuICAgICAgICBpZiAodHlwZW9mIHNlbGYuX2VuZFRpbWVyc1tpZF0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQoc2VsZi5fZW5kVGltZXJzW2lkXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcbiAgICAgICAgICBpZiAoc291bmQgJiYgc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgc2VsZi5fZW5kVGltZXJzW2lkXSwgZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGRlbGV0ZSBzZWxmLl9lbmRUaW1lcnNbaWRdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBzb3VuZCBpZGVudGlmaWVkIGJ5IHRoaXMgSUQsIG9yIHJldHVybiBudWxsLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgU291bmQgSURcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgIFNvdW5kIG9iamVjdCBvciBudWxsLlxuICAgICAqL1xuICAgIF9zb3VuZEJ5SWQ6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgc291bmRzIGFuZCBmaW5kIHRoZSBvbmUgd2l0aCB0aGlzIElELlxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoaWQgPT09IHNlbGYuX3NvdW5kc1tpXS5faWQpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5fc291bmRzW2ldO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYW4gaW5hY3RpdmUgc291bmQgZnJvbSB0aGUgcG9vbCBvciBjcmVhdGUgYSBuZXcgb25lLlxuICAgICAqIEByZXR1cm4ge1NvdW5kfSBTb3VuZCBwbGF5YmFjayBvYmplY3QuXG4gICAgICovXG4gICAgX2luYWN0aXZlU291bmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBzZWxmLl9kcmFpbigpO1xuXG4gICAgICAvLyBGaW5kIHRoZSBmaXJzdCBpbmFjdGl2ZSBub2RlIHRvIHJlY3ljbGUuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChzZWxmLl9zb3VuZHNbaV0uX2VuZGVkKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuX3NvdW5kc1tpXS5yZXNldCgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5vIGluYWN0aXZlIG5vZGUgd2FzIGZvdW5kLCBjcmVhdGUgYSBuZXcgb25lLlxuICAgICAgcmV0dXJuIG5ldyBTb3VuZChzZWxmKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRHJhaW4gZXhjZXNzIGluYWN0aXZlIHNvdW5kcyBmcm9tIHRoZSBwb29sLlxuICAgICAqL1xuICAgIF9kcmFpbjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgbGltaXQgPSBzZWxmLl9wb29sO1xuICAgICAgdmFyIGNudCA9IDA7XG4gICAgICB2YXIgaSA9IDA7XG5cbiAgICAgIC8vIElmIHRoZXJlIGFyZSBsZXNzIHNvdW5kcyB0aGFuIHRoZSBtYXggcG9vbCBzaXplLCB3ZSBhcmUgZG9uZS5cbiAgICAgIGlmIChzZWxmLl9zb3VuZHMubGVuZ3RoIDwgbGltaXQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBDb3VudCB0aGUgbnVtYmVyIG9mIGluYWN0aXZlIHNvdW5kcy5cbiAgICAgIGZvciAoaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoc2VsZi5fc291bmRzW2ldLl9lbmRlZCkge1xuICAgICAgICAgIGNudCsrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFJlbW92ZSBleGNlc3MgaW5hY3RpdmUgc291bmRzLCBnb2luZyBpbiByZXZlcnNlIG9yZGVyLlxuICAgICAgZm9yIChpPXNlbGYuX3NvdW5kcy5sZW5ndGggLSAxOyBpPj0wOyBpLS0pIHtcbiAgICAgICAgaWYgKGNudCA8PSBsaW1pdCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLl9zb3VuZHNbaV0uX2VuZGVkKSB7XG4gICAgICAgICAgLy8gRGlzY29ubmVjdCB0aGUgYXVkaW8gc291cmNlIHdoZW4gdXNpbmcgV2ViIEF1ZGlvLlxuICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBzZWxmLl9zb3VuZHNbaV0uX25vZGUpIHtcbiAgICAgICAgICAgIHNlbGYuX3NvdW5kc1tpXS5fbm9kZS5kaXNjb25uZWN0KDApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFJlbW92ZSBzb3VuZHMgdW50aWwgd2UgaGF2ZSB0aGUgcG9vbCBzaXplLlxuICAgICAgICAgIHNlbGYuX3NvdW5kcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgY250LS07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IGFsbCBJRCdzIGZyb20gdGhlIHNvdW5kcyBwb29sLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgT25seSByZXR1cm4gb25lIElEIGlmIG9uZSBpcyBwYXNzZWQuXG4gICAgICogQHJldHVybiB7QXJyYXl9ICAgIEFycmF5IG9mIElEcy5cbiAgICAgKi9cbiAgICBfZ2V0U291bmRJZHM6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZhciBpZHMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlkcy5wdXNoKHNlbGYuX3NvdW5kc1tpXS5faWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGlkcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBbaWRdO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBMb2FkIHRoZSBzb3VuZCBiYWNrIGludG8gdGhlIGJ1ZmZlciBzb3VyY2UuXG4gICAgICogQHBhcmFtICB7U291bmR9IHNvdW5kIFRoZSBzb3VuZCBvYmplY3QgdG8gd29yayB3aXRoLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX3JlZnJlc2hCdWZmZXI6IGZ1bmN0aW9uKHNvdW5kKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIFNldHVwIHRoZSBidWZmZXIgc291cmNlIGZvciBwbGF5YmFjay5cbiAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZSA9IEhvd2xlci5jdHguY3JlYXRlQnVmZmVyU291cmNlKCk7XG4gICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UuYnVmZmVyID0gY2FjaGVbc2VsZi5fc3JjXTtcblxuICAgICAgLy8gQ29ubmVjdCB0byB0aGUgY29ycmVjdCBub2RlLlxuICAgICAgaWYgKHNvdW5kLl9wYW5uZXIpIHtcbiAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmNvbm5lY3Qoc291bmQuX3Bhbm5lcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UuY29ubmVjdChzb3VuZC5fbm9kZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNldHVwIGxvb3BpbmcgYW5kIHBsYXliYWNrIHJhdGUuXG4gICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcCA9IHNvdW5kLl9sb29wO1xuICAgICAgaWYgKHNvdW5kLl9sb29wKSB7XG4gICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5sb29wU3RhcnQgPSBzb3VuZC5fc3RhcnQgfHwgMDtcbiAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3BFbmQgPSBzb3VuZC5fc3RvcCB8fCAwO1xuICAgICAgfVxuICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLnBsYXliYWNrUmF0ZS5zZXRWYWx1ZUF0VGltZShzb3VuZC5fcmF0ZSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQcmV2ZW50IG1lbW9yeSBsZWFrcyBieSBjbGVhbmluZyB1cCB0aGUgYnVmZmVyIHNvdXJjZSBhZnRlciBwbGF5YmFjay5cbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IG5vZGUgU291bmQncyBhdWRpbyBub2RlIGNvbnRhaW5pbmcgdGhlIGJ1ZmZlciBzb3VyY2UuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfY2xlYW5CdWZmZXI6IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBpc0lPUyA9IEhvd2xlci5fbmF2aWdhdG9yICYmIEhvd2xlci5fbmF2aWdhdG9yLnZlbmRvci5pbmRleE9mKCdBcHBsZScpID49IDA7XG5cbiAgICAgIGlmICghbm9kZS5idWZmZXJTb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIGlmIChIb3dsZXIuX3NjcmF0Y2hCdWZmZXIgJiYgbm9kZS5idWZmZXJTb3VyY2UpIHtcbiAgICAgICAgbm9kZS5idWZmZXJTb3VyY2Uub25lbmRlZCA9IG51bGw7XG4gICAgICAgIG5vZGUuYnVmZmVyU291cmNlLmRpc2Nvbm5lY3QoMCk7XG4gICAgICAgIGlmIChpc0lPUykge1xuICAgICAgICAgIHRyeSB7IG5vZGUuYnVmZmVyU291cmNlLmJ1ZmZlciA9IEhvd2xlci5fc2NyYXRjaEJ1ZmZlcjsgfSBjYXRjaChlKSB7fVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBub2RlLmJ1ZmZlclNvdXJjZSA9IG51bGw7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHNvdXJjZSB0byBhIDAtc2Vjb25kIHNpbGVuY2UgdG8gc3RvcCBhbnkgZG93bmxvYWRpbmcgKGV4Y2VwdCBpbiBJRSkuXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBub2RlIEF1ZGlvIG5vZGUgdG8gY2xlYXIuXG4gICAgICovXG4gICAgX2NsZWFyU291bmQ6IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIHZhciBjaGVja0lFID0gL01TSUUgfFRyaWRlbnRcXC8vLnRlc3QoSG93bGVyLl9uYXZpZ2F0b3IgJiYgSG93bGVyLl9uYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgIGlmICghY2hlY2tJRSkge1xuICAgICAgICBub2RlLnNyYyA9ICdkYXRhOmF1ZGlvL3dhdjtiYXNlNjQsVWtsR1JpZ0FBQUJYUVZaRlptMTBJQklBQUFBQkFBRUFSS3dBQUloWUFRQUNBQkFBQUFCa1lYUmhBZ0FBQUFFQSc7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKiBTaW5nbGUgU291bmQgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogU2V0dXAgdGhlIHNvdW5kIG9iamVjdCwgd2hpY2ggZWFjaCBub2RlIGF0dGFjaGVkIHRvIGEgSG93bCBncm91cCBpcyBjb250YWluZWQgaW4uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBob3dsIFRoZSBIb3dsIHBhcmVudCBncm91cC5cbiAgICovXG4gIHZhciBTb3VuZCA9IGZ1bmN0aW9uKGhvd2wpIHtcbiAgICB0aGlzLl9wYXJlbnQgPSBob3dsO1xuICAgIHRoaXMuaW5pdCgpO1xuICB9O1xuICBTb3VuZC5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSBhIG5ldyBTb3VuZCBvYmplY3QuXG4gICAgICogQHJldHVybiB7U291bmR9XG4gICAgICovXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBTZXR1cCB0aGUgZGVmYXVsdCBwYXJhbWV0ZXJzLlxuICAgICAgc2VsZi5fbXV0ZWQgPSBwYXJlbnQuX211dGVkO1xuICAgICAgc2VsZi5fbG9vcCA9IHBhcmVudC5fbG9vcDtcbiAgICAgIHNlbGYuX3ZvbHVtZSA9IHBhcmVudC5fdm9sdW1lO1xuICAgICAgc2VsZi5fcmF0ZSA9IHBhcmVudC5fcmF0ZTtcbiAgICAgIHNlbGYuX3NlZWsgPSAwO1xuICAgICAgc2VsZi5fcGF1c2VkID0gdHJ1ZTtcbiAgICAgIHNlbGYuX2VuZGVkID0gdHJ1ZTtcbiAgICAgIHNlbGYuX3Nwcml0ZSA9ICdfX2RlZmF1bHQnO1xuXG4gICAgICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBJRCBmb3IgdGhpcyBzb3VuZC5cbiAgICAgIHNlbGYuX2lkID0gKytIb3dsZXIuX2NvdW50ZXI7XG5cbiAgICAgIC8vIEFkZCBpdHNlbGYgdG8gdGhlIHBhcmVudCdzIHBvb2wuXG4gICAgICBwYXJlbnQuX3NvdW5kcy5wdXNoKHNlbGYpO1xuXG4gICAgICAvLyBDcmVhdGUgdGhlIG5ldyBub2RlLlxuICAgICAgc2VsZi5jcmVhdGUoKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbmQgc2V0dXAgYSBuZXcgc291bmQgb2JqZWN0LCB3aGV0aGVyIEhUTUw1IEF1ZGlvIG9yIFdlYiBBdWRpby5cbiAgICAgKiBAcmV0dXJuIHtTb3VuZH1cbiAgICAgKi9cbiAgICBjcmVhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcbiAgICAgIHZhciB2b2x1bWUgPSAoSG93bGVyLl9tdXRlZCB8fCBzZWxmLl9tdXRlZCB8fCBzZWxmLl9wYXJlbnQuX211dGVkKSA/IDAgOiBzZWxmLl92b2x1bWU7XG5cbiAgICAgIGlmIChwYXJlbnQuX3dlYkF1ZGlvKSB7XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgZ2FpbiBub2RlIGZvciBjb250cm9sbGluZyB2b2x1bWUgKHRoZSBzb3VyY2Ugd2lsbCBjb25uZWN0IHRvIHRoaXMpLlxuICAgICAgICBzZWxmLl9ub2RlID0gKHR5cGVvZiBIb3dsZXIuY3R4LmNyZWF0ZUdhaW4gPT09ICd1bmRlZmluZWQnKSA/IEhvd2xlci5jdHguY3JlYXRlR2Fpbk5vZGUoKSA6IEhvd2xlci5jdHguY3JlYXRlR2FpbigpO1xuICAgICAgICBzZWxmLl9ub2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUodm9sdW1lLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgc2VsZi5fbm9kZS5wYXVzZWQgPSB0cnVlO1xuICAgICAgICBzZWxmLl9ub2RlLmNvbm5lY3QoSG93bGVyLm1hc3RlckdhaW4pO1xuICAgICAgfSBlbHNlIGlmICghSG93bGVyLm5vQXVkaW8pIHtcbiAgICAgICAgLy8gR2V0IGFuIHVubG9ja2VkIEF1ZGlvIG9iamVjdCBmcm9tIHRoZSBwb29sLlxuICAgICAgICBzZWxmLl9ub2RlID0gSG93bGVyLl9vYnRhaW5IdG1sNUF1ZGlvKCk7XG5cbiAgICAgICAgLy8gTGlzdGVuIGZvciBlcnJvcnMgKGh0dHA6Ly9kZXYudzMub3JnL2h0bWw1L3NwZWMtYXV0aG9yLXZpZXcvc3BlYy5odG1sI21lZGlhZXJyb3IpLlxuICAgICAgICBzZWxmLl9lcnJvckZuID0gc2VsZi5fZXJyb3JMaXN0ZW5lci5iaW5kKHNlbGYpO1xuICAgICAgICBzZWxmLl9ub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgc2VsZi5fZXJyb3JGbiwgZmFsc2UpO1xuXG4gICAgICAgIC8vIExpc3RlbiBmb3IgJ2NhbnBsYXl0aHJvdWdoJyBldmVudCB0byBsZXQgdXMga25vdyB0aGUgc291bmQgaXMgcmVhZHkuXG4gICAgICAgIHNlbGYuX2xvYWRGbiA9IHNlbGYuX2xvYWRMaXN0ZW5lci5iaW5kKHNlbGYpO1xuICAgICAgICBzZWxmLl9ub2RlLmFkZEV2ZW50TGlzdGVuZXIoSG93bGVyLl9jYW5QbGF5RXZlbnQsIHNlbGYuX2xvYWRGbiwgZmFsc2UpO1xuXG4gICAgICAgIC8vIExpc3RlbiBmb3IgdGhlICdlbmRlZCcgZXZlbnQgb24gdGhlIHNvdW5kIHRvIGFjY291bnQgZm9yIGVkZ2UtY2FzZSB3aGVyZVxuICAgICAgICAvLyBhIGZpbml0ZSBzb3VuZCBoYXMgYSBkdXJhdGlvbiBvZiBJbmZpbml0eS5cbiAgICAgICAgc2VsZi5fZW5kRm4gPSBzZWxmLl9lbmRMaXN0ZW5lci5iaW5kKHNlbGYpO1xuICAgICAgICBzZWxmLl9ub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgc2VsZi5fZW5kRm4sIGZhbHNlKTtcblxuICAgICAgICAvLyBTZXR1cCB0aGUgbmV3IGF1ZGlvIG5vZGUuXG4gICAgICAgIHNlbGYuX25vZGUuc3JjID0gcGFyZW50Ll9zcmM7XG4gICAgICAgIHNlbGYuX25vZGUucHJlbG9hZCA9IHBhcmVudC5fcHJlbG9hZCA9PT0gdHJ1ZSA/ICdhdXRvJyA6IHBhcmVudC5fcHJlbG9hZDtcbiAgICAgICAgc2VsZi5fbm9kZS52b2x1bWUgPSB2b2x1bWUgKiBIb3dsZXIudm9sdW1lKCk7XG5cbiAgICAgICAgLy8gQmVnaW4gbG9hZGluZyB0aGUgc291cmNlLlxuICAgICAgICBzZWxmLl9ub2RlLmxvYWQoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlc2V0IHRoZSBwYXJhbWV0ZXJzIG9mIHRoaXMgc291bmQgdG8gdGhlIG9yaWdpbmFsIHN0YXRlIChmb3IgcmVjeWNsZSkuXG4gICAgICogQHJldHVybiB7U291bmR9XG4gICAgICovXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcblxuICAgICAgLy8gUmVzZXQgYWxsIG9mIHRoZSBwYXJhbWV0ZXJzIG9mIHRoaXMgc291bmQuXG4gICAgICBzZWxmLl9tdXRlZCA9IHBhcmVudC5fbXV0ZWQ7XG4gICAgICBzZWxmLl9sb29wID0gcGFyZW50Ll9sb29wO1xuICAgICAgc2VsZi5fdm9sdW1lID0gcGFyZW50Ll92b2x1bWU7XG4gICAgICBzZWxmLl9yYXRlID0gcGFyZW50Ll9yYXRlO1xuICAgICAgc2VsZi5fc2VlayA9IDA7XG4gICAgICBzZWxmLl9yYXRlU2VlayA9IDA7XG4gICAgICBzZWxmLl9wYXVzZWQgPSB0cnVlO1xuICAgICAgc2VsZi5fZW5kZWQgPSB0cnVlO1xuICAgICAgc2VsZi5fc3ByaXRlID0gJ19fZGVmYXVsdCc7XG5cbiAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IElEIHNvIHRoYXQgaXQgaXNuJ3QgY29uZnVzZWQgd2l0aCB0aGUgcHJldmlvdXMgc291bmQuXG4gICAgICBzZWxmLl9pZCA9ICsrSG93bGVyLl9jb3VudGVyO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSFRNTDUgQXVkaW8gZXJyb3IgbGlzdGVuZXIgY2FsbGJhY2suXG4gICAgICovXG4gICAgX2Vycm9yTGlzdGVuZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBGaXJlIGFuIGVycm9yIGV2ZW50IGFuZCBwYXNzIGJhY2sgdGhlIGNvZGUuXG4gICAgICBzZWxmLl9wYXJlbnQuX2VtaXQoJ2xvYWRlcnJvcicsIHNlbGYuX2lkLCBzZWxmLl9ub2RlLmVycm9yID8gc2VsZi5fbm9kZS5lcnJvci5jb2RlIDogMCk7XG5cbiAgICAgIC8vIENsZWFyIHRoZSBldmVudCBsaXN0ZW5lci5cbiAgICAgIHNlbGYuX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBzZWxmLl9lcnJvckZuLCBmYWxzZSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEhUTUw1IEF1ZGlvIGNhbnBsYXl0aHJvdWdoIGxpc3RlbmVyIGNhbGxiYWNrLlxuICAgICAqL1xuICAgIF9sb2FkTGlzdGVuZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcblxuICAgICAgLy8gUm91bmQgdXAgdGhlIGR1cmF0aW9uIHRvIGFjY291bnQgZm9yIHRoZSBsb3dlciBwcmVjaXNpb24gaW4gSFRNTDUgQXVkaW8uXG4gICAgICBwYXJlbnQuX2R1cmF0aW9uID0gTWF0aC5jZWlsKHNlbGYuX25vZGUuZHVyYXRpb24gKiAxMCkgLyAxMDtcblxuICAgICAgLy8gU2V0dXAgYSBzcHJpdGUgaWYgbm9uZSBpcyBkZWZpbmVkLlxuICAgICAgaWYgKE9iamVjdC5rZXlzKHBhcmVudC5fc3ByaXRlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcGFyZW50Ll9zcHJpdGUgPSB7X19kZWZhdWx0OiBbMCwgcGFyZW50Ll9kdXJhdGlvbiAqIDEwMDBdfTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmVudC5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICAgIHBhcmVudC5fc3RhdGUgPSAnbG9hZGVkJztcbiAgICAgICAgcGFyZW50Ll9lbWl0KCdsb2FkJyk7XG4gICAgICAgIHBhcmVudC5fbG9hZFF1ZXVlKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIENsZWFyIHRoZSBldmVudCBsaXN0ZW5lci5cbiAgICAgIHNlbGYuX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihIb3dsZXIuX2NhblBsYXlFdmVudCwgc2VsZi5fbG9hZEZuLCBmYWxzZSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEhUTUw1IEF1ZGlvIGVuZGVkIGxpc3RlbmVyIGNhbGxiYWNrLlxuICAgICAqL1xuICAgIF9lbmRMaXN0ZW5lcjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBPbmx5IGhhbmRsZSB0aGUgYGVuZGVkYGAgZXZlbnQgaWYgdGhlIGR1cmF0aW9uIGlzIEluZmluaXR5LlxuICAgICAgaWYgKHBhcmVudC5fZHVyYXRpb24gPT09IEluZmluaXR5KSB7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgcGFyZW50IGR1cmF0aW9uIHRvIG1hdGNoIHRoZSByZWFsIGF1ZGlvIGR1cmF0aW9uLlxuICAgICAgICAvLyBSb3VuZCB1cCB0aGUgZHVyYXRpb24gdG8gYWNjb3VudCBmb3IgdGhlIGxvd2VyIHByZWNpc2lvbiBpbiBIVE1MNSBBdWRpby5cbiAgICAgICAgcGFyZW50Ll9kdXJhdGlvbiA9IE1hdGguY2VpbChzZWxmLl9ub2RlLmR1cmF0aW9uICogMTApIC8gMTA7XG5cbiAgICAgICAgLy8gVXBkYXRlIHRoZSBzcHJpdGUgdGhhdCBjb3JyZXNwb25kcyB0byB0aGUgcmVhbCBkdXJhdGlvbi5cbiAgICAgICAgaWYgKHBhcmVudC5fc3ByaXRlLl9fZGVmYXVsdFsxXSA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICBwYXJlbnQuX3Nwcml0ZS5fX2RlZmF1bHRbMV0gPSBwYXJlbnQuX2R1cmF0aW9uICogMTAwMDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJ1biB0aGUgcmVndWxhciBlbmRlZCBtZXRob2QuXG4gICAgICAgIHBhcmVudC5fZW5kZWQoc2VsZik7XG4gICAgICB9XG5cbiAgICAgIC8vIENsZWFyIHRoZSBldmVudCBsaXN0ZW5lciBzaW5jZSB0aGUgZHVyYXRpb24gaXMgbm93IGNvcnJlY3QuXG4gICAgICBzZWxmLl9ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgc2VsZi5fZW5kRm4sIGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqIEhlbHBlciBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIHZhciBjYWNoZSA9IHt9O1xuXG4gIC8qKlxuICAgKiBCdWZmZXIgYSBzb3VuZCBmcm9tIFVSTCwgRGF0YSBVUkkgb3IgY2FjaGUgYW5kIGRlY29kZSB0byBhdWRpbyBzb3VyY2UgKFdlYiBBdWRpbyBBUEkpLlxuICAgKiBAcGFyYW0gIHtIb3dsfSBzZWxmXG4gICAqL1xuICB2YXIgbG9hZEJ1ZmZlciA9IGZ1bmN0aW9uKHNlbGYpIHtcbiAgICB2YXIgdXJsID0gc2VsZi5fc3JjO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhlIGJ1ZmZlciBoYXMgYWxyZWFkeSBiZWVuIGNhY2hlZCBhbmQgdXNlIGl0IGluc3RlYWQuXG4gICAgaWYgKGNhY2hlW3VybF0pIHtcbiAgICAgIC8vIFNldCB0aGUgZHVyYXRpb24gZnJvbSB0aGUgY2FjaGUuXG4gICAgICBzZWxmLl9kdXJhdGlvbiA9IGNhY2hlW3VybF0uZHVyYXRpb247XG5cbiAgICAgIC8vIExvYWQgdGhlIHNvdW5kIGludG8gdGhpcyBIb3dsLlxuICAgICAgbG9hZFNvdW5kKHNlbGYpO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKC9eZGF0YTpbXjtdKztiYXNlNjQsLy50ZXN0KHVybCkpIHtcbiAgICAgIC8vIERlY29kZSB0aGUgYmFzZTY0IGRhdGEgVVJJIHdpdGhvdXQgWEhSLCBzaW5jZSBzb21lIGJyb3dzZXJzIGRvbid0IHN1cHBvcnQgaXQuXG4gICAgICB2YXIgZGF0YSA9IGF0b2IodXJsLnNwbGl0KCcsJylbMV0pO1xuICAgICAgdmFyIGRhdGFWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoZGF0YS5sZW5ndGgpO1xuICAgICAgZm9yICh2YXIgaT0wOyBpPGRhdGEubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgZGF0YVZpZXdbaV0gPSBkYXRhLmNoYXJDb2RlQXQoaSk7XG4gICAgICB9XG5cbiAgICAgIGRlY29kZUF1ZGlvRGF0YShkYXRhVmlldy5idWZmZXIsIHNlbGYpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBMb2FkIHRoZSBidWZmZXIgZnJvbSB0aGUgVVJMLlxuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgeGhyLm9wZW4oc2VsZi5feGhyLm1ldGhvZCwgdXJsLCB0cnVlKTtcbiAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSBzZWxmLl94aHIud2l0aENyZWRlbnRpYWxzO1xuICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdhcnJheWJ1ZmZlcic7XG5cbiAgICAgIC8vIEFwcGx5IGFueSBjdXN0b20gaGVhZGVycyB0byB0aGUgcmVxdWVzdC5cbiAgICAgIGlmIChzZWxmLl94aHIuaGVhZGVycykge1xuICAgICAgICBPYmplY3Qua2V5cyhzZWxmLl94aHIuaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihrZXksIHNlbGYuX3hoci5oZWFkZXJzW2tleV0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBNYWtlIHN1cmUgd2UgZ2V0IGEgc3VjY2Vzc2Z1bCByZXNwb25zZSBiYWNrLlxuICAgICAgICB2YXIgY29kZSA9ICh4aHIuc3RhdHVzICsgJycpWzBdO1xuICAgICAgICBpZiAoY29kZSAhPT0gJzAnICYmIGNvZGUgIT09ICcyJyAmJiBjb2RlICE9PSAnMycpIHtcbiAgICAgICAgICBzZWxmLl9lbWl0KCdsb2FkZXJyb3InLCBudWxsLCAnRmFpbGVkIGxvYWRpbmcgYXVkaW8gZmlsZSB3aXRoIHN0YXR1czogJyArIHhoci5zdGF0dXMgKyAnLicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlY29kZUF1ZGlvRGF0YSh4aHIucmVzcG9uc2UsIHNlbGYpO1xuICAgICAgfTtcbiAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGFuIGVycm9yLCBzd2l0Y2ggdG8gSFRNTDUgQXVkaW8uXG4gICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgIHNlbGYuX2h0bWw1ID0gdHJ1ZTtcbiAgICAgICAgICBzZWxmLl93ZWJBdWRpbyA9IGZhbHNlO1xuICAgICAgICAgIHNlbGYuX3NvdW5kcyA9IFtdO1xuICAgICAgICAgIGRlbGV0ZSBjYWNoZVt1cmxdO1xuICAgICAgICAgIHNlbGYubG9hZCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgc2FmZVhoclNlbmQoeGhyKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNlbmQgdGhlIFhIUiByZXF1ZXN0IHdyYXBwZWQgaW4gYSB0cnkvY2F0Y2guXG4gICAqIEBwYXJhbSAge09iamVjdH0geGhyIFhIUiB0byBzZW5kLlxuICAgKi9cbiAgdmFyIHNhZmVYaHJTZW5kID0gZnVuY3Rpb24oeGhyKSB7XG4gICAgdHJ5IHtcbiAgICAgIHhoci5zZW5kKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgeGhyLm9uZXJyb3IoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIERlY29kZSBhdWRpbyBkYXRhIGZyb20gYW4gYXJyYXkgYnVmZmVyLlxuICAgKiBAcGFyYW0gIHtBcnJheUJ1ZmZlcn0gYXJyYXlidWZmZXIgVGhlIGF1ZGlvIGRhdGEuXG4gICAqIEBwYXJhbSAge0hvd2x9ICAgICAgICBzZWxmXG4gICAqL1xuICB2YXIgZGVjb2RlQXVkaW9EYXRhID0gZnVuY3Rpb24oYXJyYXlidWZmZXIsIHNlbGYpIHtcbiAgICAvLyBGaXJlIGEgbG9hZCBlcnJvciBpZiBzb21ldGhpbmcgYnJva2UuXG4gICAgdmFyIGVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLl9lbWl0KCdsb2FkZXJyb3InLCBudWxsLCAnRGVjb2RpbmcgYXVkaW8gZGF0YSBmYWlsZWQuJyk7XG4gICAgfTtcblxuICAgIC8vIExvYWQgdGhlIHNvdW5kIG9uIHN1Y2Nlc3MuXG4gICAgdmFyIHN1Y2Nlc3MgPSBmdW5jdGlvbihidWZmZXIpIHtcbiAgICAgIGlmIChidWZmZXIgJiYgc2VsZi5fc291bmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY2FjaGVbc2VsZi5fc3JjXSA9IGJ1ZmZlcjtcbiAgICAgICAgbG9hZFNvdW5kKHNlbGYsIGJ1ZmZlcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlcnJvcigpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBEZWNvZGUgdGhlIGJ1ZmZlciBpbnRvIGFuIGF1ZGlvIHNvdXJjZS5cbiAgICBpZiAodHlwZW9mIFByb21pc2UgIT09ICd1bmRlZmluZWQnICYmIEhvd2xlci5jdHguZGVjb2RlQXVkaW9EYXRhLmxlbmd0aCA9PT0gMSkge1xuICAgICAgSG93bGVyLmN0eC5kZWNvZGVBdWRpb0RhdGEoYXJyYXlidWZmZXIpLnRoZW4oc3VjY2VzcykuY2F0Y2goZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBIb3dsZXIuY3R4LmRlY29kZUF1ZGlvRGF0YShhcnJheWJ1ZmZlciwgc3VjY2VzcywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTb3VuZCBpcyBub3cgbG9hZGVkLCBzbyBmaW5pc2ggc2V0dGluZyBldmVyeXRoaW5nIHVwIGFuZCBmaXJlIHRoZSBsb2FkZWQgZXZlbnQuXG4gICAqIEBwYXJhbSAge0hvd2x9IHNlbGZcbiAgICogQHBhcmFtICB7T2JqZWN0fSBidWZmZXIgVGhlIGRlY29kZWQgYnVmZmVyIHNvdW5kIHNvdXJjZS5cbiAgICovXG4gIHZhciBsb2FkU291bmQgPSBmdW5jdGlvbihzZWxmLCBidWZmZXIpIHtcbiAgICAvLyBTZXQgdGhlIGR1cmF0aW9uLlxuICAgIGlmIChidWZmZXIgJiYgIXNlbGYuX2R1cmF0aW9uKSB7XG4gICAgICBzZWxmLl9kdXJhdGlvbiA9IGJ1ZmZlci5kdXJhdGlvbjtcbiAgICB9XG5cbiAgICAvLyBTZXR1cCBhIHNwcml0ZSBpZiBub25lIGlzIGRlZmluZWQuXG4gICAgaWYgKE9iamVjdC5rZXlzKHNlbGYuX3Nwcml0ZSkubGVuZ3RoID09PSAwKSB7XG4gICAgICBzZWxmLl9zcHJpdGUgPSB7X19kZWZhdWx0OiBbMCwgc2VsZi5fZHVyYXRpb24gKiAxMDAwXX07XG4gICAgfVxuXG4gICAgLy8gRmlyZSB0aGUgbG9hZGVkIGV2ZW50LlxuICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgIHNlbGYuX3N0YXRlID0gJ2xvYWRlZCc7XG4gICAgICBzZWxmLl9lbWl0KCdsb2FkJyk7XG4gICAgICBzZWxmLl9sb2FkUXVldWUoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHVwIHRoZSBhdWRpbyBjb250ZXh0IHdoZW4gYXZhaWxhYmxlLCBvciBzd2l0Y2ggdG8gSFRNTDUgQXVkaW8gbW9kZS5cbiAgICovXG4gIHZhciBzZXR1cEF1ZGlvQ29udGV4dCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIElmIHdlIGhhdmUgYWxyZWFkeSBkZXRlY3RlZCB0aGF0IFdlYiBBdWRpbyBpc24ndCBzdXBwb3J0ZWQsIGRvbid0IHJ1biB0aGlzIHN0ZXAgYWdhaW4uXG4gICAgaWYgKCFIb3dsZXIudXNpbmdXZWJBdWRpbykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIHdlIGFyZSB1c2luZyBXZWIgQXVkaW8gYW5kIHNldHVwIHRoZSBBdWRpb0NvbnRleHQgaWYgd2UgYXJlLlxuICAgIHRyeSB7XG4gICAgICBpZiAodHlwZW9mIEF1ZGlvQ29udGV4dCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgSG93bGVyLmN0eCA9IG5ldyBBdWRpb0NvbnRleHQoKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHdlYmtpdEF1ZGlvQ29udGV4dCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgSG93bGVyLmN0eCA9IG5ldyB3ZWJraXRBdWRpb0NvbnRleHQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIEhvd2xlci51c2luZ1dlYkF1ZGlvID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICBIb3dsZXIudXNpbmdXZWJBdWRpbyA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBhdWRpbyBjb250ZXh0IGNyZWF0aW9uIHN0aWxsIGZhaWxlZCwgc2V0IHVzaW5nIHdlYiBhdWRpbyB0byBmYWxzZS5cbiAgICBpZiAoIUhvd2xlci5jdHgpIHtcbiAgICAgIEhvd2xlci51c2luZ1dlYkF1ZGlvID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgYSB3ZWJ2aWV3IGlzIGJlaW5nIHVzZWQgb24gaU9TOCBvciBlYXJsaWVyIChyYXRoZXIgdGhhbiB0aGUgYnJvd3NlcikuXG4gICAgLy8gSWYgaXQgaXMsIGRpc2FibGUgV2ViIEF1ZGlvIGFzIGl0IGNhdXNlcyBjcmFzaGluZy5cbiAgICB2YXIgaU9TID0gKC9pUChob25lfG9kfGFkKS8udGVzdChIb3dsZXIuX25hdmlnYXRvciAmJiBIb3dsZXIuX25hdmlnYXRvci5wbGF0Zm9ybSkpO1xuICAgIHZhciBhcHBWZXJzaW9uID0gSG93bGVyLl9uYXZpZ2F0b3IgJiYgSG93bGVyLl9uYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvT1MgKFxcZCspXyhcXGQrKV8/KFxcZCspPy8pO1xuICAgIHZhciB2ZXJzaW9uID0gYXBwVmVyc2lvbiA/IHBhcnNlSW50KGFwcFZlcnNpb25bMV0sIDEwKSA6IG51bGw7XG4gICAgaWYgKGlPUyAmJiB2ZXJzaW9uICYmIHZlcnNpb24gPCA5KSB7XG4gICAgICB2YXIgc2FmYXJpID0gL3NhZmFyaS8udGVzdChIb3dsZXIuX25hdmlnYXRvciAmJiBIb3dsZXIuX25hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk7XG4gICAgICBpZiAoSG93bGVyLl9uYXZpZ2F0b3IgJiYgIXNhZmFyaSkge1xuICAgICAgICBIb3dsZXIudXNpbmdXZWJBdWRpbyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENyZWF0ZSBhbmQgZXhwb3NlIHRoZSBtYXN0ZXIgR2Fpbk5vZGUgd2hlbiB1c2luZyBXZWIgQXVkaW8gKHVzZWZ1bCBmb3IgcGx1Z2lucyBvciBhZHZhbmNlZCB1c2FnZSkuXG4gICAgaWYgKEhvd2xlci51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICBIb3dsZXIubWFzdGVyR2FpbiA9ICh0eXBlb2YgSG93bGVyLmN0eC5jcmVhdGVHYWluID09PSAndW5kZWZpbmVkJykgPyBIb3dsZXIuY3R4LmNyZWF0ZUdhaW5Ob2RlKCkgOiBIb3dsZXIuY3R4LmNyZWF0ZUdhaW4oKTtcbiAgICAgIEhvd2xlci5tYXN0ZXJHYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUoSG93bGVyLl9tdXRlZCA/IDAgOiBIb3dsZXIuX3ZvbHVtZSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICBIb3dsZXIubWFzdGVyR2Fpbi5jb25uZWN0KEhvd2xlci5jdHguZGVzdGluYXRpb24pO1xuICAgIH1cblxuICAgIC8vIFJlLXJ1biB0aGUgc2V0dXAgb24gSG93bGVyLlxuICAgIEhvd2xlci5fc2V0dXAoKTtcbiAgfTtcblxuICAvLyBBZGQgc3VwcG9ydCBmb3IgQU1EIChBc3luY2hyb25vdXMgTW9kdWxlIERlZmluaXRpb24pIGxpYnJhcmllcyBzdWNoIGFzIHJlcXVpcmUuanMuXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoW10sIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgSG93bGVyOiBIb3dsZXIsXG4gICAgICAgIEhvd2w6IEhvd2xcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICAvLyBBZGQgc3VwcG9ydCBmb3IgQ29tbW9uSlMgbGlicmFyaWVzIHN1Y2ggYXMgYnJvd3NlcmlmeS5cbiAgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJykge1xuICAgIGV4cG9ydHMuSG93bGVyID0gSG93bGVyO1xuICAgIGV4cG9ydHMuSG93bCA9IEhvd2w7XG4gIH1cblxuICAvLyBBZGQgdG8gZ2xvYmFsIGluIE5vZGUuanMgKGZvciB0ZXN0aW5nLCBldGMpLlxuICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBnbG9iYWwuSG93bGVyR2xvYmFsID0gSG93bGVyR2xvYmFsO1xuICAgIGdsb2JhbC5Ib3dsZXIgPSBIb3dsZXI7XG4gICAgZ2xvYmFsLkhvd2wgPSBIb3dsO1xuICAgIGdsb2JhbC5Tb3VuZCA9IFNvdW5kO1xuICB9IGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7ICAvLyBEZWZpbmUgZ2xvYmFsbHkgaW4gY2FzZSBBTUQgaXMgbm90IGF2YWlsYWJsZSBvciB1bnVzZWQuXG4gICAgd2luZG93Lkhvd2xlckdsb2JhbCA9IEhvd2xlckdsb2JhbDtcbiAgICB3aW5kb3cuSG93bGVyID0gSG93bGVyO1xuICAgIHdpbmRvdy5Ib3dsID0gSG93bDtcbiAgICB3aW5kb3cuU291bmQgPSBTb3VuZDtcbiAgfVxufSkoKTtcblxuXG4vKiFcbiAqICBTcGF0aWFsIFBsdWdpbiAtIEFkZHMgc3VwcG9ydCBmb3Igc3RlcmVvIGFuZCAzRCBhdWRpbyB3aGVyZSBXZWIgQXVkaW8gaXMgc3VwcG9ydGVkLlxuICogIFxuICogIGhvd2xlci5qcyB2Mi4yLjRcbiAqICBob3dsZXJqcy5jb21cbiAqXG4gKiAgKGMpIDIwMTMtMjAyMCwgSmFtZXMgU2ltcHNvbiBvZiBHb2xkRmlyZSBTdHVkaW9zXG4gKiAgZ29sZGZpcmVzdHVkaW9zLmNvbVxuICpcbiAqICBNSVQgTGljZW5zZVxuICovXG5cbihmdW5jdGlvbigpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgLy8gU2V0dXAgZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICBIb3dsZXJHbG9iYWwucHJvdG90eXBlLl9wb3MgPSBbMCwgMCwgMF07XG4gIEhvd2xlckdsb2JhbC5wcm90b3R5cGUuX29yaWVudGF0aW9uID0gWzAsIDAsIC0xLCAwLCAxLCAwXTtcblxuICAvKiogR2xvYmFsIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIEhlbHBlciBtZXRob2QgdG8gdXBkYXRlIHRoZSBzdGVyZW8gcGFubmluZyBwb3NpdGlvbiBvZiBhbGwgY3VycmVudCBIb3dscy5cbiAgICogRnV0dXJlIEhvd2xzIHdpbGwgbm90IHVzZSB0aGlzIHZhbHVlIHVubGVzcyBleHBsaWNpdGx5IHNldC5cbiAgICogQHBhcmFtICB7TnVtYmVyfSBwYW4gQSB2YWx1ZSBvZiAtMS4wIGlzIGFsbCB0aGUgd2F5IGxlZnQgYW5kIDEuMCBpcyBhbGwgdGhlIHdheSByaWdodC5cbiAgICogQHJldHVybiB7SG93bGVyL051bWJlcn0gICAgIFNlbGYgb3IgY3VycmVudCBzdGVyZW8gcGFubmluZyB2YWx1ZS5cbiAgICovXG4gIEhvd2xlckdsb2JhbC5wcm90b3R5cGUuc3RlcmVvID0gZnVuY3Rpb24ocGFuKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLmN0eCB8fCAhc2VsZi5jdHgubGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgSG93bHMgYW5kIHVwZGF0ZSB0aGVpciBzdGVyZW8gcGFubmluZy5cbiAgICBmb3IgKHZhciBpPXNlbGYuX2hvd2xzLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHtcbiAgICAgIHNlbGYuX2hvd2xzW2ldLnN0ZXJlbyhwYW4pO1xuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQvc2V0IHRoZSBwb3NpdGlvbiBvZiB0aGUgbGlzdGVuZXIgaW4gM0QgY2FydGVzaWFuIHNwYWNlLiBTb3VuZHMgdXNpbmdcbiAgICogM0QgcG9zaXRpb24gd2lsbCBiZSByZWxhdGl2ZSB0byB0aGUgbGlzdGVuZXIncyBwb3NpdGlvbi5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB4IFRoZSB4LXBvc2l0aW9uIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB5IFRoZSB5LXBvc2l0aW9uIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB6IFRoZSB6LXBvc2l0aW9uIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHJldHVybiB7SG93bGVyL0FycmF5fSAgIFNlbGYgb3IgY3VycmVudCBsaXN0ZW5lciBwb3NpdGlvbi5cbiAgICovXG4gIEhvd2xlckdsb2JhbC5wcm90b3R5cGUucG9zID0gZnVuY3Rpb24oeCwgeSwgeikge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5jdHggfHwgIXNlbGYuY3R4Lmxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIGRlZmF1bHRzIGZvciBvcHRpb25hbCAneScgJiAneicuXG4gICAgeSA9ICh0eXBlb2YgeSAhPT0gJ251bWJlcicpID8gc2VsZi5fcG9zWzFdIDogeTtcbiAgICB6ID0gKHR5cGVvZiB6ICE9PSAnbnVtYmVyJykgPyBzZWxmLl9wb3NbMl0gOiB6O1xuXG4gICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xuICAgICAgc2VsZi5fcG9zID0gW3gsIHksIHpdO1xuXG4gICAgICBpZiAodHlwZW9mIHNlbGYuY3R4Lmxpc3RlbmVyLnBvc2l0aW9uWCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIucG9zaXRpb25YLnNldFRhcmdldEF0VGltZShzZWxmLl9wb3NbMF0sIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLnBvc2l0aW9uWS5zZXRUYXJnZXRBdFRpbWUoc2VsZi5fcG9zWzFdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci5wb3NpdGlvblouc2V0VGFyZ2V0QXRUaW1lKHNlbGYuX3Bvc1syXSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLnNldFBvc2l0aW9uKHNlbGYuX3Bvc1swXSwgc2VsZi5fcG9zWzFdLCBzZWxmLl9wb3NbMl0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gc2VsZi5fcG9zO1xuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQvc2V0IHRoZSBkaXJlY3Rpb24gdGhlIGxpc3RlbmVyIGlzIHBvaW50aW5nIGluIHRoZSAzRCBjYXJ0ZXNpYW4gc3BhY2UuXG4gICAqIEEgZnJvbnQgYW5kIHVwIHZlY3RvciBtdXN0IGJlIHByb3ZpZGVkLiBUaGUgZnJvbnQgaXMgdGhlIGRpcmVjdGlvbiB0aGVcbiAgICogZmFjZSBvZiB0aGUgbGlzdGVuZXIgaXMgcG9pbnRpbmcsIGFuZCB1cCBpcyB0aGUgZGlyZWN0aW9uIHRoZSB0b3Agb2YgdGhlXG4gICAqIGxpc3RlbmVyIGlzIHBvaW50aW5nLiBUaHVzLCB0aGVzZSB2YWx1ZXMgYXJlIGV4cGVjdGVkIHRvIGJlIGF0IHJpZ2h0IGFuZ2xlc1xuICAgKiBmcm9tIGVhY2ggb3RoZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geCAgIFRoZSB4LW9yaWVudGF0aW9uIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB5ICAgVGhlIHktb3JpZW50YXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHogICBUaGUgei1vcmllbnRhdGlvbiBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geFVwIFRoZSB4LW9yaWVudGF0aW9uIG9mIHRoZSB0b3Agb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHlVcCBUaGUgeS1vcmllbnRhdGlvbiBvZiB0aGUgdG9wIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB6VXAgVGhlIHotb3JpZW50YXRpb24gb2YgdGhlIHRvcCBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEByZXR1cm4ge0hvd2xlci9BcnJheX0gICAgIFJldHVybnMgc2VsZiBvciB0aGUgY3VycmVudCBvcmllbnRhdGlvbiB2ZWN0b3JzLlxuICAgKi9cbiAgSG93bGVyR2xvYmFsLnByb3RvdHlwZS5vcmllbnRhdGlvbiA9IGZ1bmN0aW9uKHgsIHksIHosIHhVcCwgeVVwLCB6VXApIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuY3R4IHx8ICFzZWxmLmN0eC5saXN0ZW5lcikge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBkZWZhdWx0cyBmb3Igb3B0aW9uYWwgJ3knICYgJ3onLlxuICAgIHZhciBvciA9IHNlbGYuX29yaWVudGF0aW9uO1xuICAgIHkgPSAodHlwZW9mIHkgIT09ICdudW1iZXInKSA/IG9yWzFdIDogeTtcbiAgICB6ID0gKHR5cGVvZiB6ICE9PSAnbnVtYmVyJykgPyBvclsyXSA6IHo7XG4gICAgeFVwID0gKHR5cGVvZiB4VXAgIT09ICdudW1iZXInKSA/IG9yWzNdIDogeFVwO1xuICAgIHlVcCA9ICh0eXBlb2YgeVVwICE9PSAnbnVtYmVyJykgPyBvcls0XSA6IHlVcDtcbiAgICB6VXAgPSAodHlwZW9mIHpVcCAhPT0gJ251bWJlcicpID8gb3JbNV0gOiB6VXA7XG5cbiAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICBzZWxmLl9vcmllbnRhdGlvbiA9IFt4LCB5LCB6LCB4VXAsIHlVcCwgelVwXTtcblxuICAgICAgaWYgKHR5cGVvZiBzZWxmLmN0eC5saXN0ZW5lci5mb3J3YXJkWCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIuZm9yd2FyZFguc2V0VGFyZ2V0QXRUaW1lKHgsIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLmZvcndhcmRZLnNldFRhcmdldEF0VGltZSh5LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci5mb3J3YXJkWi5zZXRUYXJnZXRBdFRpbWUoeiwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIudXBYLnNldFRhcmdldEF0VGltZSh4VXAsIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLnVwWS5zZXRUYXJnZXRBdFRpbWUoeVVwLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci51cFouc2V0VGFyZ2V0QXRUaW1lKHpVcCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLnNldE9yaWVudGF0aW9uKHgsIHksIHosIHhVcCwgeVVwLCB6VXApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gb3I7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqIEdyb3VwIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIEFkZCBuZXcgcHJvcGVydGllcyB0byB0aGUgY29yZSBpbml0LlxuICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gX3N1cGVyIENvcmUgaW5pdCBtZXRob2QuXG4gICAqIEByZXR1cm4ge0hvd2x9XG4gICAqL1xuICBIb3dsLnByb3RvdHlwZS5pbml0ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIHJldHVybiBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIFNldHVwIHVzZXItZGVmaW5lZCBkZWZhdWx0IHByb3BlcnRpZXMuXG4gICAgICBzZWxmLl9vcmllbnRhdGlvbiA9IG8ub3JpZW50YXRpb24gfHwgWzEsIDAsIDBdO1xuICAgICAgc2VsZi5fc3RlcmVvID0gby5zdGVyZW8gfHwgbnVsbDtcbiAgICAgIHNlbGYuX3BvcyA9IG8ucG9zIHx8IG51bGw7XG4gICAgICBzZWxmLl9wYW5uZXJBdHRyID0ge1xuICAgICAgICBjb25lSW5uZXJBbmdsZTogdHlwZW9mIG8uY29uZUlubmVyQW5nbGUgIT09ICd1bmRlZmluZWQnID8gby5jb25lSW5uZXJBbmdsZSA6IDM2MCxcbiAgICAgICAgY29uZU91dGVyQW5nbGU6IHR5cGVvZiBvLmNvbmVPdXRlckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZU91dGVyQW5nbGUgOiAzNjAsXG4gICAgICAgIGNvbmVPdXRlckdhaW46IHR5cGVvZiBvLmNvbmVPdXRlckdhaW4gIT09ICd1bmRlZmluZWQnID8gby5jb25lT3V0ZXJHYWluIDogMCxcbiAgICAgICAgZGlzdGFuY2VNb2RlbDogdHlwZW9mIG8uZGlzdGFuY2VNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLmRpc3RhbmNlTW9kZWwgOiAnaW52ZXJzZScsXG4gICAgICAgIG1heERpc3RhbmNlOiB0eXBlb2Ygby5tYXhEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLm1heERpc3RhbmNlIDogMTAwMDAsXG4gICAgICAgIHBhbm5pbmdNb2RlbDogdHlwZW9mIG8ucGFubmluZ01vZGVsICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmluZ01vZGVsIDogJ0hSVEYnLFxuICAgICAgICByZWZEaXN0YW5jZTogdHlwZW9mIG8ucmVmRGlzdGFuY2UgIT09ICd1bmRlZmluZWQnID8gby5yZWZEaXN0YW5jZSA6IDEsXG4gICAgICAgIHJvbGxvZmZGYWN0b3I6IHR5cGVvZiBvLnJvbGxvZmZGYWN0b3IgIT09ICd1bmRlZmluZWQnID8gby5yb2xsb2ZmRmFjdG9yIDogMVxuICAgICAgfTtcblxuICAgICAgLy8gU2V0dXAgZXZlbnQgbGlzdGVuZXJzLlxuICAgICAgc2VsZi5fb25zdGVyZW8gPSBvLm9uc3RlcmVvID8gW3tmbjogby5vbnN0ZXJlb31dIDogW107XG4gICAgICBzZWxmLl9vbnBvcyA9IG8ub25wb3MgPyBbe2ZuOiBvLm9ucG9zfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ub3JpZW50YXRpb24gPSBvLm9ub3JpZW50YXRpb24gPyBbe2ZuOiBvLm9ub3JpZW50YXRpb259XSA6IFtdO1xuXG4gICAgICAvLyBDb21wbGV0ZSBpbml0aWxpemF0aW9uIHdpdGggaG93bGVyLmpzIGNvcmUncyBpbml0IGZ1bmN0aW9uLlxuICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIG8pO1xuICAgIH07XG4gIH0pKEhvd2wucHJvdG90eXBlLmluaXQpO1xuXG4gIC8qKlxuICAgKiBHZXQvc2V0IHRoZSBzdGVyZW8gcGFubmluZyBvZiB0aGUgYXVkaW8gc291cmNlIGZvciB0aGlzIHNvdW5kIG9yIGFsbCBpbiB0aGUgZ3JvdXAuXG4gICAqIEBwYXJhbSAge051bWJlcn0gcGFuICBBIHZhbHVlIG9mIC0xLjAgaXMgYWxsIHRoZSB3YXkgbGVmdCBhbmQgMS4wIGlzIGFsbCB0aGUgd2F5IHJpZ2h0LlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIChvcHRpb25hbCkgVGhlIHNvdW5kIElELiBJZiBub25lIGlzIHBhc3NlZCwgYWxsIGluIGdyb3VwIHdpbGwgYmUgdXBkYXRlZC5cbiAgICogQHJldHVybiB7SG93bC9OdW1iZXJ9ICAgIFJldHVybnMgc2VsZiBvciB0aGUgY3VycmVudCBzdGVyZW8gcGFubmluZyB2YWx1ZS5cbiAgICovXG4gIEhvd2wucHJvdG90eXBlLnN0ZXJlbyA9IGZ1bmN0aW9uKHBhbiwgaWQpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIGNoYW5nZSBzdGVyZW8gcGFuIHdoZW4gY2FwYWJsZS5cbiAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgZXZlbnQ6ICdzdGVyZW8nLFxuICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYuc3RlcmVvKHBhbiwgaWQpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIFBhbm5lclN0ZXJlb05vZGUgc3VwcG9ydCBhbmQgZmFsbGJhY2sgdG8gUGFubmVyTm9kZSBpZiBpdCBkb2Vzbid0IGV4aXN0LlxuICAgIHZhciBwYW5uZXJUeXBlID0gKHR5cGVvZiBIb3dsZXIuY3R4LmNyZWF0ZVN0ZXJlb1Bhbm5lciA9PT0gJ3VuZGVmaW5lZCcpID8gJ3NwYXRpYWwnIDogJ3N0ZXJlbyc7XG5cbiAgICAvLyBTZXR1cCB0aGUgZ3JvdXAncyBzdGVyZW8gcGFubmluZyBpZiBubyBJRCBpcyBwYXNzZWQuXG4gICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFJldHVybiB0aGUgZ3JvdXAncyBzdGVyZW8gcGFubmluZyBpZiBubyBwYXJhbWV0ZXJzIGFyZSBwYXNzZWQuXG4gICAgICBpZiAodHlwZW9mIHBhbiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgc2VsZi5fc3RlcmVvID0gcGFuO1xuICAgICAgICBzZWxmLl9wb3MgPSBbcGFuLCAwLCAwXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBzZWxmLl9zdGVyZW87XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hhbmdlIHRoZSBzdHJlbyBwYW5uaW5nIG9mIG9uZSBvciBhbGwgc291bmRzIGluIGdyb3VwLlxuICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwYW4gPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgc291bmQuX3N0ZXJlbyA9IHBhbjtcbiAgICAgICAgICBzb3VuZC5fcG9zID0gW3BhbiwgMCwgMF07XG5cbiAgICAgICAgICBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIC8vIElmIHdlIGFyZSBmYWxsaW5nIGJhY2ssIG1ha2Ugc3VyZSB0aGUgcGFubmluZ01vZGVsIGlzIGVxdWFscG93ZXIuXG4gICAgICAgICAgICBzb3VuZC5fcGFubmVyQXR0ci5wYW5uaW5nTW9kZWwgPSAnZXF1YWxwb3dlcic7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGEgcGFubmVyIHNldHVwIGFuZCBjcmVhdGUgYSBuZXcgb25lIGlmIG5vdC5cbiAgICAgICAgICAgIGlmICghc291bmQuX3Bhbm5lciB8fCAhc291bmQuX3Bhbm5lci5wYW4pIHtcbiAgICAgICAgICAgICAgc2V0dXBQYW5uZXIoc291bmQsIHBhbm5lclR5cGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocGFubmVyVHlwZSA9PT0gJ3NwYXRpYWwnKSB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2Ygc291bmQuX3Bhbm5lci5wb3NpdGlvblggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5wb3NpdGlvblguc2V0VmFsdWVBdFRpbWUocGFuLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWS5zZXRWYWx1ZUF0VGltZSgwLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWi5zZXRWYWx1ZUF0VGltZSgwLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnNldFBvc2l0aW9uKHBhbiwgMCwgMCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIucGFuLnNldFZhbHVlQXRUaW1lKHBhbiwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5fZW1pdCgnc3RlcmVvJywgc291bmQuX2lkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gc291bmQuX3N0ZXJlbztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQvc2V0IHRoZSAzRCBzcGF0aWFsIHBvc2l0aW9uIG9mIHRoZSBhdWRpbyBzb3VyY2UgZm9yIHRoaXMgc291bmQgb3IgZ3JvdXAgcmVsYXRpdmUgdG8gdGhlIGdsb2JhbCBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB4ICBUaGUgeC1wb3NpdGlvbiBvZiB0aGUgYXVkaW8gc291cmNlLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHkgIFRoZSB5LXBvc2l0aW9uIG9mIHRoZSBhdWRpbyBzb3VyY2UuXG4gICAqIEBwYXJhbSAge051bWJlcn0geiAgVGhlIHotcG9zaXRpb24gb2YgdGhlIGF1ZGlvIHNvdXJjZS5cbiAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAob3B0aW9uYWwpIFRoZSBzb3VuZCBJRC4gSWYgbm9uZSBpcyBwYXNzZWQsIGFsbCBpbiBncm91cCB3aWxsIGJlIHVwZGF0ZWQuXG4gICAqIEByZXR1cm4ge0hvd2wvQXJyYXl9ICAgIFJldHVybnMgc2VsZiBvciB0aGUgY3VycmVudCAzRCBzcGF0aWFsIHBvc2l0aW9uOiBbeCwgeSwgel0uXG4gICAqL1xuICBIb3dsLnByb3RvdHlwZS5wb3MgPSBmdW5jdGlvbih4LCB5LCB6LCBpZCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gY2hhbmdlIHBvc2l0aW9uIHdoZW4gY2FwYWJsZS5cbiAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgZXZlbnQ6ICdwb3MnLFxuICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYucG9zKHgsIHksIHosIGlkKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIFNldCB0aGUgZGVmYXVsdHMgZm9yIG9wdGlvbmFsICd5JyAmICd6Jy5cbiAgICB5ID0gKHR5cGVvZiB5ICE9PSAnbnVtYmVyJykgPyAwIDogeTtcbiAgICB6ID0gKHR5cGVvZiB6ICE9PSAnbnVtYmVyJykgPyAtMC41IDogejtcblxuICAgIC8vIFNldHVwIHRoZSBncm91cCdzIHNwYXRpYWwgcG9zaXRpb24gaWYgbm8gSUQgaXMgcGFzc2VkLlxuICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBSZXR1cm4gdGhlIGdyb3VwJ3Mgc3BhdGlhbCBwb3NpdGlvbiBpZiBubyBwYXJhbWV0ZXJzIGFyZSBwYXNzZWQuXG4gICAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICAgIHNlbGYuX3BvcyA9IFt4LCB5LCB6XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBzZWxmLl9wb3M7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hhbmdlIHRoZSBzcGF0aWFsIHBvc2l0aW9uIG9mIG9uZSBvciBhbGwgc291bmRzIGluIGdyb3VwLlxuICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIHNvdW5kLl9wb3MgPSBbeCwgeSwgel07XG5cbiAgICAgICAgICBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGEgcGFubmVyIHNldHVwIGFuZCBjcmVhdGUgYSBuZXcgb25lIGlmIG5vdC5cbiAgICAgICAgICAgIGlmICghc291bmQuX3Bhbm5lciB8fCBzb3VuZC5fcGFubmVyLnBhbikge1xuICAgICAgICAgICAgICBzZXR1cFBhbm5lcihzb3VuZCwgJ3NwYXRpYWwnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5wb3NpdGlvblguc2V0VmFsdWVBdFRpbWUoeCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIucG9zaXRpb25ZLnNldFZhbHVlQXRUaW1lKHksIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWi5zZXRWYWx1ZUF0VGltZSh6LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIuc2V0UG9zaXRpb24oeCwgeSwgeik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5fZW1pdCgncG9zJywgc291bmQuX2lkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gc291bmQuX3BvcztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQvc2V0IHRoZSBkaXJlY3Rpb24gdGhlIGF1ZGlvIHNvdXJjZSBpcyBwb2ludGluZyBpbiB0aGUgM0QgY2FydGVzaWFuIGNvb3JkaW5hdGVcbiAgICogc3BhY2UuIERlcGVuZGluZyBvbiBob3cgZGlyZWN0aW9uIHRoZSBzb3VuZCBpcywgYmFzZWQgb24gdGhlIGBjb25lYCBhdHRyaWJ1dGVzLFxuICAgKiBhIHNvdW5kIHBvaW50aW5nIGF3YXkgZnJvbSB0aGUgbGlzdGVuZXIgY2FuIGJlIHF1aWV0IG9yIHNpbGVudC5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB4ICBUaGUgeC1vcmllbnRhdGlvbiBvZiB0aGUgc291cmNlLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHkgIFRoZSB5LW9yaWVudGF0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAqIEBwYXJhbSAge051bWJlcn0geiAgVGhlIHotb3JpZW50YXRpb24gb2YgdGhlIHNvdXJjZS5cbiAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAob3B0aW9uYWwpIFRoZSBzb3VuZCBJRC4gSWYgbm9uZSBpcyBwYXNzZWQsIGFsbCBpbiBncm91cCB3aWxsIGJlIHVwZGF0ZWQuXG4gICAqIEByZXR1cm4ge0hvd2wvQXJyYXl9ICAgIFJldHVybnMgc2VsZiBvciB0aGUgY3VycmVudCAzRCBzcGF0aWFsIG9yaWVudGF0aW9uOiBbeCwgeSwgel0uXG4gICAqL1xuICBIb3dsLnByb3RvdHlwZS5vcmllbnRhdGlvbiA9IGZ1bmN0aW9uKHgsIHksIHosIGlkKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLl93ZWJBdWRpbykge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBjaGFuZ2Ugb3JpZW50YXRpb24gd2hlbiBjYXBhYmxlLlxuICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICBldmVudDogJ29yaWVudGF0aW9uJyxcbiAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLm9yaWVudGF0aW9uKHgsIHksIHosIGlkKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIFNldCB0aGUgZGVmYXVsdHMgZm9yIG9wdGlvbmFsICd5JyAmICd6Jy5cbiAgICB5ID0gKHR5cGVvZiB5ICE9PSAnbnVtYmVyJykgPyBzZWxmLl9vcmllbnRhdGlvblsxXSA6IHk7XG4gICAgeiA9ICh0eXBlb2YgeiAhPT0gJ251bWJlcicpID8gc2VsZi5fb3JpZW50YXRpb25bMl0gOiB6O1xuXG4gICAgLy8gU2V0dXAgdGhlIGdyb3VwJ3Mgc3BhdGlhbCBvcmllbnRhdGlvbiBpZiBubyBJRCBpcyBwYXNzZWQuXG4gICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFJldHVybiB0aGUgZ3JvdXAncyBzcGF0aWFsIG9yaWVudGF0aW9uIGlmIG5vIHBhcmFtZXRlcnMgYXJlIHBhc3NlZC5cbiAgICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgc2VsZi5fb3JpZW50YXRpb24gPSBbeCwgeSwgel07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gc2VsZi5fb3JpZW50YXRpb247XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hhbmdlIHRoZSBzcGF0aWFsIG9yaWVudGF0aW9uIG9mIG9uZSBvciBhbGwgc291bmRzIGluIGdyb3VwLlxuICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIHNvdW5kLl9vcmllbnRhdGlvbiA9IFt4LCB5LCB6XTtcblxuICAgICAgICAgIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBwYW5uZXIgc2V0dXAgYW5kIGNyZWF0ZSBhIG5ldyBvbmUgaWYgbm90LlxuICAgICAgICAgICAgaWYgKCFzb3VuZC5fcGFubmVyKSB7XG4gICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIGEgcG9zaXRpb24gdG8gc2V0dXAgdGhlIG5vZGUgd2l0aC5cbiAgICAgICAgICAgICAgaWYgKCFzb3VuZC5fcG9zKSB7XG4gICAgICAgICAgICAgICAgc291bmQuX3BvcyA9IHNlbGYuX3BvcyB8fCBbMCwgMCwgLTAuNV07XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBzZXR1cFBhbm5lcihzb3VuZCwgJ3NwYXRpYWwnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzb3VuZC5fcGFubmVyLm9yaWVudGF0aW9uWCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5vcmllbnRhdGlvblguc2V0VmFsdWVBdFRpbWUoeCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIub3JpZW50YXRpb25ZLnNldFZhbHVlQXRUaW1lKHksIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLm9yaWVudGF0aW9uWi5zZXRWYWx1ZUF0VGltZSh6LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIuc2V0T3JpZW50YXRpb24oeCwgeSwgeik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5fZW1pdCgnb3JpZW50YXRpb24nLCBzb3VuZC5faWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBzb3VuZC5fb3JpZW50YXRpb247XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgcGFubmVyIG5vZGUncyBhdHRyaWJ1dGVzIGZvciBhIHNvdW5kIG9yIGdyb3VwIG9mIHNvdW5kcy5cbiAgICogVGhpcyBtZXRob2QgY2FuIG9wdGlvbmFsbCB0YWtlIDAsIDEgb3IgMiBhcmd1bWVudHMuXG4gICAqICAgcGFubmVyQXR0cigpIC0+IFJldHVybnMgdGhlIGdyb3VwJ3MgdmFsdWVzLlxuICAgKiAgIHBhbm5lckF0dHIoaWQpIC0+IFJldHVybnMgdGhlIHNvdW5kIGlkJ3MgdmFsdWVzLlxuICAgKiAgIHBhbm5lckF0dHIobykgLT4gU2V0J3MgdGhlIHZhbHVlcyBvZiBhbGwgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICogICBwYW5uZXJBdHRyKG8sIGlkKSAtPiBTZXQncyB0aGUgdmFsdWVzIG9mIHBhc3NlZCBzb3VuZCBpZC5cbiAgICpcbiAgICogICBBdHRyaWJ1dGVzOlxuICAgKiAgICAgY29uZUlubmVyQW5nbGUgLSAoMzYwIGJ5IGRlZmF1bHQpIEEgcGFyYW1ldGVyIGZvciBkaXJlY3Rpb25hbCBhdWRpbyBzb3VyY2VzLCB0aGlzIGlzIGFuIGFuZ2xlLCBpbiBkZWdyZWVzLFxuICAgKiAgICAgICAgICAgICAgICAgICAgICBpbnNpZGUgb2Ygd2hpY2ggdGhlcmUgd2lsbCBiZSBubyB2b2x1bWUgcmVkdWN0aW9uLlxuICAgKiAgICAgY29uZU91dGVyQW5nbGUgLSAoMzYwIGJ5IGRlZmF1bHQpIEEgcGFyYW1ldGVyIGZvciBkaXJlY3Rpb25hbCBhdWRpbyBzb3VyY2VzLCB0aGlzIGlzIGFuIGFuZ2xlLCBpbiBkZWdyZWVzLFxuICAgKiAgICAgICAgICAgICAgICAgICAgICBvdXRzaWRlIG9mIHdoaWNoIHRoZSB2b2x1bWUgd2lsbCBiZSByZWR1Y2VkIHRvIGEgY29uc3RhbnQgdmFsdWUgb2YgYGNvbmVPdXRlckdhaW5gLlxuICAgKiAgICAgY29uZU91dGVyR2FpbiAtICgwIGJ5IGRlZmF1bHQpIEEgcGFyYW1ldGVyIGZvciBkaXJlY3Rpb25hbCBhdWRpbyBzb3VyY2VzLCB0aGlzIGlzIHRoZSBnYWluIG91dHNpZGUgb2YgdGhlXG4gICAqICAgICAgICAgICAgICAgICAgICAgYGNvbmVPdXRlckFuZ2xlYC4gSXQgaXMgYSBsaW5lYXIgdmFsdWUgaW4gdGhlIHJhbmdlIGBbMCwgMV1gLlxuICAgKiAgICAgZGlzdGFuY2VNb2RlbCAtICgnaW52ZXJzZScgYnkgZGVmYXVsdCkgRGV0ZXJtaW5lcyBhbGdvcml0aG0gdXNlZCB0byByZWR1Y2Ugdm9sdW1lIGFzIGF1ZGlvIG1vdmVzIGF3YXkgZnJvbVxuICAgKiAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyLiBDYW4gYmUgYGxpbmVhcmAsIGBpbnZlcnNlYCBvciBgZXhwb25lbnRpYWwuXG4gICAqICAgICBtYXhEaXN0YW5jZSAtICgxMDAwMCBieSBkZWZhdWx0KSBUaGUgbWF4aW11bSBkaXN0YW5jZSBiZXR3ZWVuIHNvdXJjZSBhbmQgbGlzdGVuZXIsIGFmdGVyIHdoaWNoIHRoZSB2b2x1bWVcbiAgICogICAgICAgICAgICAgICAgICAgd2lsbCBub3QgYmUgcmVkdWNlZCBhbnkgZnVydGhlci5cbiAgICogICAgIHJlZkRpc3RhbmNlIC0gKDEgYnkgZGVmYXVsdCkgQSByZWZlcmVuY2UgZGlzdGFuY2UgZm9yIHJlZHVjaW5nIHZvbHVtZSBhcyBzb3VyY2UgbW92ZXMgZnVydGhlciBmcm9tIHRoZSBsaXN0ZW5lci5cbiAgICogICAgICAgICAgICAgICAgICAgVGhpcyBpcyBzaW1wbHkgYSB2YXJpYWJsZSBvZiB0aGUgZGlzdGFuY2UgbW9kZWwgYW5kIGhhcyBhIGRpZmZlcmVudCBlZmZlY3QgZGVwZW5kaW5nIG9uIHdoaWNoIG1vZGVsXG4gICAqICAgICAgICAgICAgICAgICAgIGlzIHVzZWQgYW5kIHRoZSBzY2FsZSBvZiB5b3VyIGNvb3JkaW5hdGVzLiBHZW5lcmFsbHksIHZvbHVtZSB3aWxsIGJlIGVxdWFsIHRvIDEgYXQgdGhpcyBkaXN0YW5jZS5cbiAgICogICAgIHJvbGxvZmZGYWN0b3IgLSAoMSBieSBkZWZhdWx0KSBIb3cgcXVpY2tseSB0aGUgdm9sdW1lIHJlZHVjZXMgYXMgc291cmNlIG1vdmVzIGZyb20gbGlzdGVuZXIuIFRoaXMgaXMgc2ltcGx5IGFcbiAgICogICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZSBvZiB0aGUgZGlzdGFuY2UgbW9kZWwgYW5kIGNhbiBiZSBpbiB0aGUgcmFuZ2Ugb2YgYFswLCAxXWAgd2l0aCBgbGluZWFyYCBhbmQgYFswLCBcdTIyMUVdYFxuICAgKiAgICAgICAgICAgICAgICAgICAgIHdpdGggYGludmVyc2VgIGFuZCBgZXhwb25lbnRpYWxgLlxuICAgKiAgICAgcGFubmluZ01vZGVsIC0gKCdIUlRGJyBieSBkZWZhdWx0KSBEZXRlcm1pbmVzIHdoaWNoIHNwYXRpYWxpemF0aW9uIGFsZ29yaXRobSBpcyB1c2VkIHRvIHBvc2l0aW9uIGF1ZGlvLlxuICAgKiAgICAgICAgICAgICAgICAgICAgIENhbiBiZSBgSFJURmAgb3IgYGVxdWFscG93ZXJgLlxuICAgKlxuICAgKiBAcmV0dXJuIHtIb3dsL09iamVjdH0gUmV0dXJucyBzZWxmIG9yIGN1cnJlbnQgcGFubmVyIGF0dHJpYnV0ZXMuXG4gICAqL1xuICBIb3dsLnByb3RvdHlwZS5wYW5uZXJBdHRyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgIHZhciBvLCBpZCwgc291bmQ7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBEZXRlcm1pbmUgdGhlIHZhbHVlcyBiYXNlZCBvbiBhcmd1bWVudHMuXG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBSZXR1cm4gdGhlIGdyb3VwJ3MgcGFubmVyIGF0dHJpYnV0ZSB2YWx1ZXMuXG4gICAgICByZXR1cm4gc2VsZi5fcGFubmVyQXR0cjtcbiAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIG8gPSBhcmdzWzBdO1xuXG4gICAgICAgIC8vIFNldCB0aGUgZ3JvdSdzIHBhbm5lciBhdHRyaWJ1dGUgdmFsdWVzLlxuICAgICAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGlmICghby5wYW5uZXJBdHRyKSB7XG4gICAgICAgICAgICBvLnBhbm5lckF0dHIgPSB7XG4gICAgICAgICAgICAgIGNvbmVJbm5lckFuZ2xlOiBvLmNvbmVJbm5lckFuZ2xlLFxuICAgICAgICAgICAgICBjb25lT3V0ZXJBbmdsZTogby5jb25lT3V0ZXJBbmdsZSxcbiAgICAgICAgICAgICAgY29uZU91dGVyR2Fpbjogby5jb25lT3V0ZXJHYWluLFxuICAgICAgICAgICAgICBkaXN0YW5jZU1vZGVsOiBvLmRpc3RhbmNlTW9kZWwsXG4gICAgICAgICAgICAgIG1heERpc3RhbmNlOiBvLm1heERpc3RhbmNlLFxuICAgICAgICAgICAgICByZWZEaXN0YW5jZTogby5yZWZEaXN0YW5jZSxcbiAgICAgICAgICAgICAgcm9sbG9mZkZhY3Rvcjogby5yb2xsb2ZmRmFjdG9yLFxuICAgICAgICAgICAgICBwYW5uaW5nTW9kZWw6IG8ucGFubmluZ01vZGVsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuX3Bhbm5lckF0dHIgPSB7XG4gICAgICAgICAgICBjb25lSW5uZXJBbmdsZTogdHlwZW9mIG8ucGFubmVyQXR0ci5jb25lSW5uZXJBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIuY29uZUlubmVyQW5nbGUgOiBzZWxmLl9jb25lSW5uZXJBbmdsZSxcbiAgICAgICAgICAgIGNvbmVPdXRlckFuZ2xlOiB0eXBlb2Ygby5wYW5uZXJBdHRyLmNvbmVPdXRlckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmVyQXR0ci5jb25lT3V0ZXJBbmdsZSA6IHNlbGYuX2NvbmVPdXRlckFuZ2xlLFxuICAgICAgICAgICAgY29uZU91dGVyR2FpbjogdHlwZW9mIG8ucGFubmVyQXR0ci5jb25lT3V0ZXJHYWluICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmVyQXR0ci5jb25lT3V0ZXJHYWluIDogc2VsZi5fY29uZU91dGVyR2FpbixcbiAgICAgICAgICAgIGRpc3RhbmNlTW9kZWw6IHR5cGVvZiBvLnBhbm5lckF0dHIuZGlzdGFuY2VNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIuZGlzdGFuY2VNb2RlbCA6IHNlbGYuX2Rpc3RhbmNlTW9kZWwsXG4gICAgICAgICAgICBtYXhEaXN0YW5jZTogdHlwZW9mIG8ucGFubmVyQXR0ci5tYXhEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIubWF4RGlzdGFuY2UgOiBzZWxmLl9tYXhEaXN0YW5jZSxcbiAgICAgICAgICAgIHJlZkRpc3RhbmNlOiB0eXBlb2Ygby5wYW5uZXJBdHRyLnJlZkRpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmVyQXR0ci5yZWZEaXN0YW5jZSA6IHNlbGYuX3JlZkRpc3RhbmNlLFxuICAgICAgICAgICAgcm9sbG9mZkZhY3RvcjogdHlwZW9mIG8ucGFubmVyQXR0ci5yb2xsb2ZmRmFjdG9yICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmVyQXR0ci5yb2xsb2ZmRmFjdG9yIDogc2VsZi5fcm9sbG9mZkZhY3RvcixcbiAgICAgICAgICAgIHBhbm5pbmdNb2RlbDogdHlwZW9mIG8ucGFubmVyQXR0ci5wYW5uaW5nTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5wYW5uZXJBdHRyLnBhbm5pbmdNb2RlbCA6IHNlbGYuX3Bhbm5pbmdNb2RlbFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFJldHVybiB0aGlzIHNvdW5kJ3MgcGFubmVyIGF0dHJpYnV0ZSB2YWx1ZXMuXG4gICAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKHBhcnNlSW50KGFyZ3NbMF0sIDEwKSk7XG4gICAgICAgIHJldHVybiBzb3VuZCA/IHNvdW5kLl9wYW5uZXJBdHRyIDogc2VsZi5fcGFubmVyQXR0cjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICBvID0gYXJnc1swXTtcbiAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1sxXSwgMTApO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSB0aGUgdmFsdWVzIG9mIHRoZSBzcGVjaWZpZWQgc291bmRzLlxuICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIC8vIE1lcmdlIHRoZSBuZXcgdmFsdWVzIGludG8gdGhlIHNvdW5kLlxuICAgICAgICB2YXIgcGEgPSBzb3VuZC5fcGFubmVyQXR0cjtcbiAgICAgICAgcGEgPSB7XG4gICAgICAgICAgY29uZUlubmVyQW5nbGU6IHR5cGVvZiBvLmNvbmVJbm5lckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZUlubmVyQW5nbGUgOiBwYS5jb25lSW5uZXJBbmdsZSxcbiAgICAgICAgICBjb25lT3V0ZXJBbmdsZTogdHlwZW9mIG8uY29uZU91dGVyQW5nbGUgIT09ICd1bmRlZmluZWQnID8gby5jb25lT3V0ZXJBbmdsZSA6IHBhLmNvbmVPdXRlckFuZ2xlLFxuICAgICAgICAgIGNvbmVPdXRlckdhaW46IHR5cGVvZiBvLmNvbmVPdXRlckdhaW4gIT09ICd1bmRlZmluZWQnID8gby5jb25lT3V0ZXJHYWluIDogcGEuY29uZU91dGVyR2FpbixcbiAgICAgICAgICBkaXN0YW5jZU1vZGVsOiB0eXBlb2Ygby5kaXN0YW5jZU1vZGVsICE9PSAndW5kZWZpbmVkJyA/IG8uZGlzdGFuY2VNb2RlbCA6IHBhLmRpc3RhbmNlTW9kZWwsXG4gICAgICAgICAgbWF4RGlzdGFuY2U6IHR5cGVvZiBvLm1heERpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ubWF4RGlzdGFuY2UgOiBwYS5tYXhEaXN0YW5jZSxcbiAgICAgICAgICByZWZEaXN0YW5jZTogdHlwZW9mIG8ucmVmRGlzdGFuY2UgIT09ICd1bmRlZmluZWQnID8gby5yZWZEaXN0YW5jZSA6IHBhLnJlZkRpc3RhbmNlLFxuICAgICAgICAgIHJvbGxvZmZGYWN0b3I6IHR5cGVvZiBvLnJvbGxvZmZGYWN0b3IgIT09ICd1bmRlZmluZWQnID8gby5yb2xsb2ZmRmFjdG9yIDogcGEucm9sbG9mZkZhY3RvcixcbiAgICAgICAgICBwYW5uaW5nTW9kZWw6IHR5cGVvZiBvLnBhbm5pbmdNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5pbmdNb2RlbCA6IHBhLnBhbm5pbmdNb2RlbFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIENyZWF0ZSBhIG5ldyBwYW5uZXIgbm9kZSBpZiBvbmUgZG9lc24ndCBhbHJlYWR5IGV4aXN0LlxuICAgICAgICB2YXIgcGFubmVyID0gc291bmQuX3Bhbm5lcjtcbiAgICAgICAgaWYgKCFwYW5uZXIpIHtcbiAgICAgICAgICAvLyBNYWtlIHN1cmUgd2UgaGF2ZSBhIHBvc2l0aW9uIHRvIHNldHVwIHRoZSBub2RlIHdpdGguXG4gICAgICAgICAgaWYgKCFzb3VuZC5fcG9zKSB7XG4gICAgICAgICAgICBzb3VuZC5fcG9zID0gc2VsZi5fcG9zIHx8IFswLCAwLCAtMC41XTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgcGFubmVyIG5vZGUuXG4gICAgICAgICAgc2V0dXBQYW5uZXIoc291bmQsICdzcGF0aWFsJyk7XG4gICAgICAgICAgcGFubmVyID0gc291bmQuX3Bhbm5lclxuICAgICAgICB9XG5cbiAgICAgICAgLy8gVXBkYXRlIHRoZSBwYW5uZXIgdmFsdWVzIG9yIGNyZWF0ZSBhIG5ldyBwYW5uZXIgaWYgbm9uZSBleGlzdHMuXG4gICAgICAgIHBhbm5lci5jb25lSW5uZXJBbmdsZSA9IHBhLmNvbmVJbm5lckFuZ2xlO1xuICAgICAgICBwYW5uZXIuY29uZU91dGVyQW5nbGUgPSBwYS5jb25lT3V0ZXJBbmdsZTtcbiAgICAgICAgcGFubmVyLmNvbmVPdXRlckdhaW4gPSBwYS5jb25lT3V0ZXJHYWluO1xuICAgICAgICBwYW5uZXIuZGlzdGFuY2VNb2RlbCA9IHBhLmRpc3RhbmNlTW9kZWw7XG4gICAgICAgIHBhbm5lci5tYXhEaXN0YW5jZSA9IHBhLm1heERpc3RhbmNlO1xuICAgICAgICBwYW5uZXIucmVmRGlzdGFuY2UgPSBwYS5yZWZEaXN0YW5jZTtcbiAgICAgICAgcGFubmVyLnJvbGxvZmZGYWN0b3IgPSBwYS5yb2xsb2ZmRmFjdG9yO1xuICAgICAgICBwYW5uZXIucGFubmluZ01vZGVsID0gcGEucGFubmluZ01vZGVsO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKiBTaW5nbGUgU291bmQgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogQWRkIG5ldyBwcm9wZXJ0aWVzIHRvIHRoZSBjb3JlIFNvdW5kIGluaXQuXG4gICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBfc3VwZXIgQ29yZSBTb3VuZCBpbml0IG1ldGhvZC5cbiAgICogQHJldHVybiB7U291bmR9XG4gICAqL1xuICBTb3VuZC5wcm90b3R5cGUuaW5pdCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBTZXR1cCB1c2VyLWRlZmluZWQgZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5fb3JpZW50YXRpb24gPSBwYXJlbnQuX29yaWVudGF0aW9uO1xuICAgICAgc2VsZi5fc3RlcmVvID0gcGFyZW50Ll9zdGVyZW87XG4gICAgICBzZWxmLl9wb3MgPSBwYXJlbnQuX3BvcztcbiAgICAgIHNlbGYuX3Bhbm5lckF0dHIgPSBwYXJlbnQuX3Bhbm5lckF0dHI7XG5cbiAgICAgIC8vIENvbXBsZXRlIGluaXRpbGl6YXRpb24gd2l0aCBob3dsZXIuanMgY29yZSBTb3VuZCdzIGluaXQgZnVuY3Rpb24uXG4gICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblxuICAgICAgLy8gSWYgYSBzdGVyZW8gb3IgcG9zaXRpb24gd2FzIHNwZWNpZmllZCwgc2V0IGl0IHVwLlxuICAgICAgaWYgKHNlbGYuX3N0ZXJlbykge1xuICAgICAgICBwYXJlbnQuc3RlcmVvKHNlbGYuX3N0ZXJlbyk7XG4gICAgICB9IGVsc2UgaWYgKHNlbGYuX3Bvcykge1xuICAgICAgICBwYXJlbnQucG9zKHNlbGYuX3Bvc1swXSwgc2VsZi5fcG9zWzFdLCBzZWxmLl9wb3NbMl0sIHNlbGYuX2lkKTtcbiAgICAgIH1cbiAgICB9O1xuICB9KShTb3VuZC5wcm90b3R5cGUuaW5pdCk7XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBTb3VuZC5yZXNldCBtZXRob2QgdG8gY2xlYW4gdXAgcHJvcGVydGllcyBmcm9tIHRoZSBzcGF0aWFsIHBsdWdpbi5cbiAgICogQHBhcmFtICB7RnVuY3Rpb259IF9zdXBlciBTb3VuZCByZXNldCBtZXRob2QuXG4gICAqIEByZXR1cm4ge1NvdW5kfVxuICAgKi9cbiAgU291bmQucHJvdG90eXBlLnJlc2V0ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBwYXJlbnQgPSBzZWxmLl9wYXJlbnQ7XG5cbiAgICAgIC8vIFJlc2V0IGFsbCBzcGF0aWFsIHBsdWdpbiBwcm9wZXJ0aWVzIG9uIHRoaXMgc291bmQuXG4gICAgICBzZWxmLl9vcmllbnRhdGlvbiA9IHBhcmVudC5fb3JpZW50YXRpb247XG4gICAgICBzZWxmLl9zdGVyZW8gPSBwYXJlbnQuX3N0ZXJlbztcbiAgICAgIHNlbGYuX3BvcyA9IHBhcmVudC5fcG9zO1xuICAgICAgc2VsZi5fcGFubmVyQXR0ciA9IHBhcmVudC5fcGFubmVyQXR0cjtcblxuICAgICAgLy8gSWYgYSBzdGVyZW8gb3IgcG9zaXRpb24gd2FzIHNwZWNpZmllZCwgc2V0IGl0IHVwLlxuICAgICAgaWYgKHNlbGYuX3N0ZXJlbykge1xuICAgICAgICBwYXJlbnQuc3RlcmVvKHNlbGYuX3N0ZXJlbyk7XG4gICAgICB9IGVsc2UgaWYgKHNlbGYuX3Bvcykge1xuICAgICAgICBwYXJlbnQucG9zKHNlbGYuX3Bvc1swXSwgc2VsZi5fcG9zWzFdLCBzZWxmLl9wb3NbMl0sIHNlbGYuX2lkKTtcbiAgICAgIH0gZWxzZSBpZiAoc2VsZi5fcGFubmVyKSB7XG4gICAgICAgIC8vIERpc2Nvbm5lY3QgdGhlIHBhbm5lci5cbiAgICAgICAgc2VsZi5fcGFubmVyLmRpc2Nvbm5lY3QoMCk7XG4gICAgICAgIHNlbGYuX3Bhbm5lciA9IHVuZGVmaW5lZDtcbiAgICAgICAgcGFyZW50Ll9yZWZyZXNoQnVmZmVyKHNlbGYpO1xuICAgICAgfVxuXG4gICAgICAvLyBDb21wbGV0ZSByZXNldHRpbmcgb2YgdGhlIHNvdW5kLlxuICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgIH07XG4gIH0pKFNvdW5kLnByb3RvdHlwZS5yZXNldCk7XG5cbiAgLyoqIEhlbHBlciBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgcGFubmVyIG5vZGUgYW5kIHNhdmUgaXQgb24gdGhlIHNvdW5kLlxuICAgKiBAcGFyYW0gIHtTb3VuZH0gc291bmQgU3BlY2lmaWMgc291bmQgdG8gc2V0dXAgcGFubmluZyBvbi5cbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgVHlwZSBvZiBwYW5uZXIgdG8gY3JlYXRlOiAnc3RlcmVvJyBvciAnc3BhdGlhbCcuXG4gICAqL1xuICB2YXIgc2V0dXBQYW5uZXIgPSBmdW5jdGlvbihzb3VuZCwgdHlwZSkge1xuICAgIHR5cGUgPSB0eXBlIHx8ICdzcGF0aWFsJztcblxuICAgIC8vIENyZWF0ZSB0aGUgbmV3IHBhbm5lciBub2RlLlxuICAgIGlmICh0eXBlID09PSAnc3BhdGlhbCcpIHtcbiAgICAgIHNvdW5kLl9wYW5uZXIgPSBIb3dsZXIuY3R4LmNyZWF0ZVBhbm5lcigpO1xuICAgICAgc291bmQuX3Bhbm5lci5jb25lSW5uZXJBbmdsZSA9IHNvdW5kLl9wYW5uZXJBdHRyLmNvbmVJbm5lckFuZ2xlO1xuICAgICAgc291bmQuX3Bhbm5lci5jb25lT3V0ZXJBbmdsZSA9IHNvdW5kLl9wYW5uZXJBdHRyLmNvbmVPdXRlckFuZ2xlO1xuICAgICAgc291bmQuX3Bhbm5lci5jb25lT3V0ZXJHYWluID0gc291bmQuX3Bhbm5lckF0dHIuY29uZU91dGVyR2FpbjtcbiAgICAgIHNvdW5kLl9wYW5uZXIuZGlzdGFuY2VNb2RlbCA9IHNvdW5kLl9wYW5uZXJBdHRyLmRpc3RhbmNlTW9kZWw7XG4gICAgICBzb3VuZC5fcGFubmVyLm1heERpc3RhbmNlID0gc291bmQuX3Bhbm5lckF0dHIubWF4RGlzdGFuY2U7XG4gICAgICBzb3VuZC5fcGFubmVyLnJlZkRpc3RhbmNlID0gc291bmQuX3Bhbm5lckF0dHIucmVmRGlzdGFuY2U7XG4gICAgICBzb3VuZC5fcGFubmVyLnJvbGxvZmZGYWN0b3IgPSBzb3VuZC5fcGFubmVyQXR0ci5yb2xsb2ZmRmFjdG9yO1xuICAgICAgc291bmQuX3Bhbm5lci5wYW5uaW5nTW9kZWwgPSBzb3VuZC5fcGFubmVyQXR0ci5wYW5uaW5nTW9kZWw7XG5cbiAgICAgIGlmICh0eXBlb2Ygc291bmQuX3Bhbm5lci5wb3NpdGlvblggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHNvdW5kLl9wYW5uZXIucG9zaXRpb25YLnNldFZhbHVlQXRUaW1lKHNvdW5kLl9wb3NbMF0sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWS5zZXRWYWx1ZUF0VGltZShzb3VuZC5fcG9zWzFdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgc291bmQuX3Bhbm5lci5wb3NpdGlvblouc2V0VmFsdWVBdFRpbWUoc291bmQuX3Bvc1syXSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzb3VuZC5fcGFubmVyLnNldFBvc2l0aW9uKHNvdW5kLl9wb3NbMF0sIHNvdW5kLl9wb3NbMV0sIHNvdW5kLl9wb3NbMl0pO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHNvdW5kLl9wYW5uZXIub3JpZW50YXRpb25YICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzb3VuZC5fcGFubmVyLm9yaWVudGF0aW9uWC5zZXRWYWx1ZUF0VGltZShzb3VuZC5fb3JpZW50YXRpb25bMF0sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICBzb3VuZC5fcGFubmVyLm9yaWVudGF0aW9uWS5zZXRWYWx1ZUF0VGltZShzb3VuZC5fb3JpZW50YXRpb25bMV0sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICBzb3VuZC5fcGFubmVyLm9yaWVudGF0aW9uWi5zZXRWYWx1ZUF0VGltZShzb3VuZC5fb3JpZW50YXRpb25bMl0sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc291bmQuX3Bhbm5lci5zZXRPcmllbnRhdGlvbihzb3VuZC5fb3JpZW50YXRpb25bMF0sIHNvdW5kLl9vcmllbnRhdGlvblsxXSwgc291bmQuX29yaWVudGF0aW9uWzJdKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc291bmQuX3Bhbm5lciA9IEhvd2xlci5jdHguY3JlYXRlU3RlcmVvUGFubmVyKCk7XG4gICAgICBzb3VuZC5fcGFubmVyLnBhbi5zZXRWYWx1ZUF0VGltZShzb3VuZC5fc3RlcmVvLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICB9XG5cbiAgICBzb3VuZC5fcGFubmVyLmNvbm5lY3Qoc291bmQuX25vZGUpO1xuXG4gICAgLy8gVXBkYXRlIHRoZSBjb25uZWN0aW9ucy5cbiAgICBpZiAoIXNvdW5kLl9wYXVzZWQpIHtcbiAgICAgIHNvdW5kLl9wYXJlbnQucGF1c2Uoc291bmQuX2lkLCB0cnVlKS5wbGF5KHNvdW5kLl9pZCwgdHJ1ZSk7XG4gICAgfVxuICB9O1xufSkoKTtcbiIsICIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZWFyY3V0O1xubW9kdWxlLmV4cG9ydHMuZGVmYXVsdCA9IGVhcmN1dDtcblxuZnVuY3Rpb24gZWFyY3V0KGRhdGEsIGhvbGVJbmRpY2VzLCBkaW0pIHtcblxuICAgIGRpbSA9IGRpbSB8fCAyO1xuXG4gICAgdmFyIGhhc0hvbGVzID0gaG9sZUluZGljZXMgJiYgaG9sZUluZGljZXMubGVuZ3RoLFxuICAgICAgICBvdXRlckxlbiA9IGhhc0hvbGVzID8gaG9sZUluZGljZXNbMF0gKiBkaW0gOiBkYXRhLmxlbmd0aCxcbiAgICAgICAgb3V0ZXJOb2RlID0gbGlua2VkTGlzdChkYXRhLCAwLCBvdXRlckxlbiwgZGltLCB0cnVlKSxcbiAgICAgICAgdHJpYW5nbGVzID0gW107XG5cbiAgICBpZiAoIW91dGVyTm9kZSB8fCBvdXRlck5vZGUubmV4dCA9PT0gb3V0ZXJOb2RlLnByZXYpIHJldHVybiB0cmlhbmdsZXM7XG5cbiAgICB2YXIgbWluWCwgbWluWSwgbWF4WCwgbWF4WSwgeCwgeSwgaW52U2l6ZTtcblxuICAgIGlmIChoYXNIb2xlcykgb3V0ZXJOb2RlID0gZWxpbWluYXRlSG9sZXMoZGF0YSwgaG9sZUluZGljZXMsIG91dGVyTm9kZSwgZGltKTtcblxuICAgIC8vIGlmIHRoZSBzaGFwZSBpcyBub3QgdG9vIHNpbXBsZSwgd2UnbGwgdXNlIHotb3JkZXIgY3VydmUgaGFzaCBsYXRlcjsgY2FsY3VsYXRlIHBvbHlnb24gYmJveFxuICAgIGlmIChkYXRhLmxlbmd0aCA+IDgwICogZGltKSB7XG4gICAgICAgIG1pblggPSBtYXhYID0gZGF0YVswXTtcbiAgICAgICAgbWluWSA9IG1heFkgPSBkYXRhWzFdO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSBkaW07IGkgPCBvdXRlckxlbjsgaSArPSBkaW0pIHtcbiAgICAgICAgICAgIHggPSBkYXRhW2ldO1xuICAgICAgICAgICAgeSA9IGRhdGFbaSArIDFdO1xuICAgICAgICAgICAgaWYgKHggPCBtaW5YKSBtaW5YID0geDtcbiAgICAgICAgICAgIGlmICh5IDwgbWluWSkgbWluWSA9IHk7XG4gICAgICAgICAgICBpZiAoeCA+IG1heFgpIG1heFggPSB4O1xuICAgICAgICAgICAgaWYgKHkgPiBtYXhZKSBtYXhZID0geTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG1pblgsIG1pblkgYW5kIGludlNpemUgYXJlIGxhdGVyIHVzZWQgdG8gdHJhbnNmb3JtIGNvb3JkcyBpbnRvIGludGVnZXJzIGZvciB6LW9yZGVyIGNhbGN1bGF0aW9uXG4gICAgICAgIGludlNpemUgPSBNYXRoLm1heChtYXhYIC0gbWluWCwgbWF4WSAtIG1pblkpO1xuICAgICAgICBpbnZTaXplID0gaW52U2l6ZSAhPT0gMCA/IDMyNzY3IC8gaW52U2l6ZSA6IDA7XG4gICAgfVxuXG4gICAgZWFyY3V0TGlua2VkKG91dGVyTm9kZSwgdHJpYW5nbGVzLCBkaW0sIG1pblgsIG1pblksIGludlNpemUsIDApO1xuXG4gICAgcmV0dXJuIHRyaWFuZ2xlcztcbn1cblxuLy8gY3JlYXRlIGEgY2lyY3VsYXIgZG91Ymx5IGxpbmtlZCBsaXN0IGZyb20gcG9seWdvbiBwb2ludHMgaW4gdGhlIHNwZWNpZmllZCB3aW5kaW5nIG9yZGVyXG5mdW5jdGlvbiBsaW5rZWRMaXN0KGRhdGEsIHN0YXJ0LCBlbmQsIGRpbSwgY2xvY2t3aXNlKSB7XG4gICAgdmFyIGksIGxhc3Q7XG5cbiAgICBpZiAoY2xvY2t3aXNlID09PSAoc2lnbmVkQXJlYShkYXRhLCBzdGFydCwgZW5kLCBkaW0pID4gMCkpIHtcbiAgICAgICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7IGkgKz0gZGltKSBsYXN0ID0gaW5zZXJ0Tm9kZShpLCBkYXRhW2ldLCBkYXRhW2kgKyAxXSwgbGFzdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChpID0gZW5kIC0gZGltOyBpID49IHN0YXJ0OyBpIC09IGRpbSkgbGFzdCA9IGluc2VydE5vZGUoaSwgZGF0YVtpXSwgZGF0YVtpICsgMV0sIGxhc3QpO1xuICAgIH1cblxuICAgIGlmIChsYXN0ICYmIGVxdWFscyhsYXN0LCBsYXN0Lm5leHQpKSB7XG4gICAgICAgIHJlbW92ZU5vZGUobGFzdCk7XG4gICAgICAgIGxhc3QgPSBsYXN0Lm5leHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxhc3Q7XG59XG5cbi8vIGVsaW1pbmF0ZSBjb2xpbmVhciBvciBkdXBsaWNhdGUgcG9pbnRzXG5mdW5jdGlvbiBmaWx0ZXJQb2ludHMoc3RhcnQsIGVuZCkge1xuICAgIGlmICghc3RhcnQpIHJldHVybiBzdGFydDtcbiAgICBpZiAoIWVuZCkgZW5kID0gc3RhcnQ7XG5cbiAgICB2YXIgcCA9IHN0YXJ0LFxuICAgICAgICBhZ2FpbjtcbiAgICBkbyB7XG4gICAgICAgIGFnYWluID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKCFwLnN0ZWluZXIgJiYgKGVxdWFscyhwLCBwLm5leHQpIHx8IGFyZWEocC5wcmV2LCBwLCBwLm5leHQpID09PSAwKSkge1xuICAgICAgICAgICAgcmVtb3ZlTm9kZShwKTtcbiAgICAgICAgICAgIHAgPSBlbmQgPSBwLnByZXY7XG4gICAgICAgICAgICBpZiAocCA9PT0gcC5uZXh0KSBicmVhaztcbiAgICAgICAgICAgIGFnYWluID0gdHJ1ZTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcCA9IHAubmV4dDtcbiAgICAgICAgfVxuICAgIH0gd2hpbGUgKGFnYWluIHx8IHAgIT09IGVuZCk7XG5cbiAgICByZXR1cm4gZW5kO1xufVxuXG4vLyBtYWluIGVhciBzbGljaW5nIGxvb3Agd2hpY2ggdHJpYW5ndWxhdGVzIGEgcG9seWdvbiAoZ2l2ZW4gYXMgYSBsaW5rZWQgbGlzdClcbmZ1bmN0aW9uIGVhcmN1dExpbmtlZChlYXIsIHRyaWFuZ2xlcywgZGltLCBtaW5YLCBtaW5ZLCBpbnZTaXplLCBwYXNzKSB7XG4gICAgaWYgKCFlYXIpIHJldHVybjtcblxuICAgIC8vIGludGVybGluayBwb2x5Z29uIG5vZGVzIGluIHotb3JkZXJcbiAgICBpZiAoIXBhc3MgJiYgaW52U2l6ZSkgaW5kZXhDdXJ2ZShlYXIsIG1pblgsIG1pblksIGludlNpemUpO1xuXG4gICAgdmFyIHN0b3AgPSBlYXIsXG4gICAgICAgIHByZXYsIG5leHQ7XG5cbiAgICAvLyBpdGVyYXRlIHRocm91Z2ggZWFycywgc2xpY2luZyB0aGVtIG9uZSBieSBvbmVcbiAgICB3aGlsZSAoZWFyLnByZXYgIT09IGVhci5uZXh0KSB7XG4gICAgICAgIHByZXYgPSBlYXIucHJldjtcbiAgICAgICAgbmV4dCA9IGVhci5uZXh0O1xuXG4gICAgICAgIGlmIChpbnZTaXplID8gaXNFYXJIYXNoZWQoZWFyLCBtaW5YLCBtaW5ZLCBpbnZTaXplKSA6IGlzRWFyKGVhcikpIHtcbiAgICAgICAgICAgIC8vIGN1dCBvZmYgdGhlIHRyaWFuZ2xlXG4gICAgICAgICAgICB0cmlhbmdsZXMucHVzaChwcmV2LmkgLyBkaW0gfCAwKTtcbiAgICAgICAgICAgIHRyaWFuZ2xlcy5wdXNoKGVhci5pIC8gZGltIHwgMCk7XG4gICAgICAgICAgICB0cmlhbmdsZXMucHVzaChuZXh0LmkgLyBkaW0gfCAwKTtcblxuICAgICAgICAgICAgcmVtb3ZlTm9kZShlYXIpO1xuXG4gICAgICAgICAgICAvLyBza2lwcGluZyB0aGUgbmV4dCB2ZXJ0ZXggbGVhZHMgdG8gbGVzcyBzbGl2ZXIgdHJpYW5nbGVzXG4gICAgICAgICAgICBlYXIgPSBuZXh0Lm5leHQ7XG4gICAgICAgICAgICBzdG9wID0gbmV4dC5uZXh0O1xuXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVhciA9IG5leHQ7XG5cbiAgICAgICAgLy8gaWYgd2UgbG9vcGVkIHRocm91Z2ggdGhlIHdob2xlIHJlbWFpbmluZyBwb2x5Z29uIGFuZCBjYW4ndCBmaW5kIGFueSBtb3JlIGVhcnNcbiAgICAgICAgaWYgKGVhciA9PT0gc3RvcCkge1xuICAgICAgICAgICAgLy8gdHJ5IGZpbHRlcmluZyBwb2ludHMgYW5kIHNsaWNpbmcgYWdhaW5cbiAgICAgICAgICAgIGlmICghcGFzcykge1xuICAgICAgICAgICAgICAgIGVhcmN1dExpbmtlZChmaWx0ZXJQb2ludHMoZWFyKSwgdHJpYW5nbGVzLCBkaW0sIG1pblgsIG1pblksIGludlNpemUsIDEpO1xuXG4gICAgICAgICAgICAvLyBpZiB0aGlzIGRpZG4ndCB3b3JrLCB0cnkgY3VyaW5nIGFsbCBzbWFsbCBzZWxmLWludGVyc2VjdGlvbnMgbG9jYWxseVxuICAgICAgICAgICAgfSBlbHNlIGlmIChwYXNzID09PSAxKSB7XG4gICAgICAgICAgICAgICAgZWFyID0gY3VyZUxvY2FsSW50ZXJzZWN0aW9ucyhmaWx0ZXJQb2ludHMoZWFyKSwgdHJpYW5nbGVzLCBkaW0pO1xuICAgICAgICAgICAgICAgIGVhcmN1dExpbmtlZChlYXIsIHRyaWFuZ2xlcywgZGltLCBtaW5YLCBtaW5ZLCBpbnZTaXplLCAyKTtcblxuICAgICAgICAgICAgLy8gYXMgYSBsYXN0IHJlc29ydCwgdHJ5IHNwbGl0dGluZyB0aGUgcmVtYWluaW5nIHBvbHlnb24gaW50byB0d29cbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFzcyA9PT0gMikge1xuICAgICAgICAgICAgICAgIHNwbGl0RWFyY3V0KGVhciwgdHJpYW5nbGVzLCBkaW0sIG1pblgsIG1pblksIGludlNpemUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8gY2hlY2sgd2hldGhlciBhIHBvbHlnb24gbm9kZSBmb3JtcyBhIHZhbGlkIGVhciB3aXRoIGFkamFjZW50IG5vZGVzXG5mdW5jdGlvbiBpc0VhcihlYXIpIHtcbiAgICB2YXIgYSA9IGVhci5wcmV2LFxuICAgICAgICBiID0gZWFyLFxuICAgICAgICBjID0gZWFyLm5leHQ7XG5cbiAgICBpZiAoYXJlYShhLCBiLCBjKSA+PSAwKSByZXR1cm4gZmFsc2U7IC8vIHJlZmxleCwgY2FuJ3QgYmUgYW4gZWFyXG5cbiAgICAvLyBub3cgbWFrZSBzdXJlIHdlIGRvbid0IGhhdmUgb3RoZXIgcG9pbnRzIGluc2lkZSB0aGUgcG90ZW50aWFsIGVhclxuICAgIHZhciBheCA9IGEueCwgYnggPSBiLngsIGN4ID0gYy54LCBheSA9IGEueSwgYnkgPSBiLnksIGN5ID0gYy55O1xuXG4gICAgLy8gdHJpYW5nbGUgYmJveDsgbWluICYgbWF4IGFyZSBjYWxjdWxhdGVkIGxpa2UgdGhpcyBmb3Igc3BlZWRcbiAgICB2YXIgeDAgPSBheCA8IGJ4ID8gKGF4IDwgY3ggPyBheCA6IGN4KSA6IChieCA8IGN4ID8gYnggOiBjeCksXG4gICAgICAgIHkwID0gYXkgPCBieSA/IChheSA8IGN5ID8gYXkgOiBjeSkgOiAoYnkgPCBjeSA/IGJ5IDogY3kpLFxuICAgICAgICB4MSA9IGF4ID4gYnggPyAoYXggPiBjeCA/IGF4IDogY3gpIDogKGJ4ID4gY3ggPyBieCA6IGN4KSxcbiAgICAgICAgeTEgPSBheSA+IGJ5ID8gKGF5ID4gY3kgPyBheSA6IGN5KSA6IChieSA+IGN5ID8gYnkgOiBjeSk7XG5cbiAgICB2YXIgcCA9IGMubmV4dDtcbiAgICB3aGlsZSAocCAhPT0gYSkge1xuICAgICAgICBpZiAocC54ID49IHgwICYmIHAueCA8PSB4MSAmJiBwLnkgPj0geTAgJiYgcC55IDw9IHkxICYmXG4gICAgICAgICAgICBwb2ludEluVHJpYW5nbGUoYXgsIGF5LCBieCwgYnksIGN4LCBjeSwgcC54LCBwLnkpICYmXG4gICAgICAgICAgICBhcmVhKHAucHJldiwgcCwgcC5uZXh0KSA+PSAwKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHAgPSBwLm5leHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGlzRWFySGFzaGVkKGVhciwgbWluWCwgbWluWSwgaW52U2l6ZSkge1xuICAgIHZhciBhID0gZWFyLnByZXYsXG4gICAgICAgIGIgPSBlYXIsXG4gICAgICAgIGMgPSBlYXIubmV4dDtcblxuICAgIGlmIChhcmVhKGEsIGIsIGMpID49IDApIHJldHVybiBmYWxzZTsgLy8gcmVmbGV4LCBjYW4ndCBiZSBhbiBlYXJcblxuICAgIHZhciBheCA9IGEueCwgYnggPSBiLngsIGN4ID0gYy54LCBheSA9IGEueSwgYnkgPSBiLnksIGN5ID0gYy55O1xuXG4gICAgLy8gdHJpYW5nbGUgYmJveDsgbWluICYgbWF4IGFyZSBjYWxjdWxhdGVkIGxpa2UgdGhpcyBmb3Igc3BlZWRcbiAgICB2YXIgeDAgPSBheCA8IGJ4ID8gKGF4IDwgY3ggPyBheCA6IGN4KSA6IChieCA8IGN4ID8gYnggOiBjeCksXG4gICAgICAgIHkwID0gYXkgPCBieSA/IChheSA8IGN5ID8gYXkgOiBjeSkgOiAoYnkgPCBjeSA/IGJ5IDogY3kpLFxuICAgICAgICB4MSA9IGF4ID4gYnggPyAoYXggPiBjeCA/IGF4IDogY3gpIDogKGJ4ID4gY3ggPyBieCA6IGN4KSxcbiAgICAgICAgeTEgPSBheSA+IGJ5ID8gKGF5ID4gY3kgPyBheSA6IGN5KSA6IChieSA+IGN5ID8gYnkgOiBjeSk7XG5cbiAgICAvLyB6LW9yZGVyIHJhbmdlIGZvciB0aGUgY3VycmVudCB0cmlhbmdsZSBiYm94O1xuICAgIHZhciBtaW5aID0gek9yZGVyKHgwLCB5MCwgbWluWCwgbWluWSwgaW52U2l6ZSksXG4gICAgICAgIG1heFogPSB6T3JkZXIoeDEsIHkxLCBtaW5YLCBtaW5ZLCBpbnZTaXplKTtcblxuICAgIHZhciBwID0gZWFyLnByZXZaLFxuICAgICAgICBuID0gZWFyLm5leHRaO1xuXG4gICAgLy8gbG9vayBmb3IgcG9pbnRzIGluc2lkZSB0aGUgdHJpYW5nbGUgaW4gYm90aCBkaXJlY3Rpb25zXG4gICAgd2hpbGUgKHAgJiYgcC56ID49IG1pblogJiYgbiAmJiBuLnogPD0gbWF4Wikge1xuICAgICAgICBpZiAocC54ID49IHgwICYmIHAueCA8PSB4MSAmJiBwLnkgPj0geTAgJiYgcC55IDw9IHkxICYmIHAgIT09IGEgJiYgcCAhPT0gYyAmJlxuICAgICAgICAgICAgcG9pbnRJblRyaWFuZ2xlKGF4LCBheSwgYngsIGJ5LCBjeCwgY3ksIHAueCwgcC55KSAmJiBhcmVhKHAucHJldiwgcCwgcC5uZXh0KSA+PSAwKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHAgPSBwLnByZXZaO1xuXG4gICAgICAgIGlmIChuLnggPj0geDAgJiYgbi54IDw9IHgxICYmIG4ueSA+PSB5MCAmJiBuLnkgPD0geTEgJiYgbiAhPT0gYSAmJiBuICE9PSBjICYmXG4gICAgICAgICAgICBwb2ludEluVHJpYW5nbGUoYXgsIGF5LCBieCwgYnksIGN4LCBjeSwgbi54LCBuLnkpICYmIGFyZWEobi5wcmV2LCBuLCBuLm5leHQpID49IDApIHJldHVybiBmYWxzZTtcbiAgICAgICAgbiA9IG4ubmV4dFo7XG4gICAgfVxuXG4gICAgLy8gbG9vayBmb3IgcmVtYWluaW5nIHBvaW50cyBpbiBkZWNyZWFzaW5nIHotb3JkZXJcbiAgICB3aGlsZSAocCAmJiBwLnogPj0gbWluWikge1xuICAgICAgICBpZiAocC54ID49IHgwICYmIHAueCA8PSB4MSAmJiBwLnkgPj0geTAgJiYgcC55IDw9IHkxICYmIHAgIT09IGEgJiYgcCAhPT0gYyAmJlxuICAgICAgICAgICAgcG9pbnRJblRyaWFuZ2xlKGF4LCBheSwgYngsIGJ5LCBjeCwgY3ksIHAueCwgcC55KSAmJiBhcmVhKHAucHJldiwgcCwgcC5uZXh0KSA+PSAwKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHAgPSBwLnByZXZaO1xuICAgIH1cblxuICAgIC8vIGxvb2sgZm9yIHJlbWFpbmluZyBwb2ludHMgaW4gaW5jcmVhc2luZyB6LW9yZGVyXG4gICAgd2hpbGUgKG4gJiYgbi56IDw9IG1heFopIHtcbiAgICAgICAgaWYgKG4ueCA+PSB4MCAmJiBuLnggPD0geDEgJiYgbi55ID49IHkwICYmIG4ueSA8PSB5MSAmJiBuICE9PSBhICYmIG4gIT09IGMgJiZcbiAgICAgICAgICAgIHBvaW50SW5UcmlhbmdsZShheCwgYXksIGJ4LCBieSwgY3gsIGN5LCBuLngsIG4ueSkgJiYgYXJlYShuLnByZXYsIG4sIG4ubmV4dCkgPj0gMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBuID0gbi5uZXh0WjtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuLy8gZ28gdGhyb3VnaCBhbGwgcG9seWdvbiBub2RlcyBhbmQgY3VyZSBzbWFsbCBsb2NhbCBzZWxmLWludGVyc2VjdGlvbnNcbmZ1bmN0aW9uIGN1cmVMb2NhbEludGVyc2VjdGlvbnMoc3RhcnQsIHRyaWFuZ2xlcywgZGltKSB7XG4gICAgdmFyIHAgPSBzdGFydDtcbiAgICBkbyB7XG4gICAgICAgIHZhciBhID0gcC5wcmV2LFxuICAgICAgICAgICAgYiA9IHAubmV4dC5uZXh0O1xuXG4gICAgICAgIGlmICghZXF1YWxzKGEsIGIpICYmIGludGVyc2VjdHMoYSwgcCwgcC5uZXh0LCBiKSAmJiBsb2NhbGx5SW5zaWRlKGEsIGIpICYmIGxvY2FsbHlJbnNpZGUoYiwgYSkpIHtcblxuICAgICAgICAgICAgdHJpYW5nbGVzLnB1c2goYS5pIC8gZGltIHwgMCk7XG4gICAgICAgICAgICB0cmlhbmdsZXMucHVzaChwLmkgLyBkaW0gfCAwKTtcbiAgICAgICAgICAgIHRyaWFuZ2xlcy5wdXNoKGIuaSAvIGRpbSB8IDApO1xuXG4gICAgICAgICAgICAvLyByZW1vdmUgdHdvIG5vZGVzIGludm9sdmVkXG4gICAgICAgICAgICByZW1vdmVOb2RlKHApO1xuICAgICAgICAgICAgcmVtb3ZlTm9kZShwLm5leHQpO1xuXG4gICAgICAgICAgICBwID0gc3RhcnQgPSBiO1xuICAgICAgICB9XG4gICAgICAgIHAgPSBwLm5leHQ7XG4gICAgfSB3aGlsZSAocCAhPT0gc3RhcnQpO1xuXG4gICAgcmV0dXJuIGZpbHRlclBvaW50cyhwKTtcbn1cblxuLy8gdHJ5IHNwbGl0dGluZyBwb2x5Z29uIGludG8gdHdvIGFuZCB0cmlhbmd1bGF0ZSB0aGVtIGluZGVwZW5kZW50bHlcbmZ1bmN0aW9uIHNwbGl0RWFyY3V0KHN0YXJ0LCB0cmlhbmdsZXMsIGRpbSwgbWluWCwgbWluWSwgaW52U2l6ZSkge1xuICAgIC8vIGxvb2sgZm9yIGEgdmFsaWQgZGlhZ29uYWwgdGhhdCBkaXZpZGVzIHRoZSBwb2x5Z29uIGludG8gdHdvXG4gICAgdmFyIGEgPSBzdGFydDtcbiAgICBkbyB7XG4gICAgICAgIHZhciBiID0gYS5uZXh0Lm5leHQ7XG4gICAgICAgIHdoaWxlIChiICE9PSBhLnByZXYpIHtcbiAgICAgICAgICAgIGlmIChhLmkgIT09IGIuaSAmJiBpc1ZhbGlkRGlhZ29uYWwoYSwgYikpIHtcbiAgICAgICAgICAgICAgICAvLyBzcGxpdCB0aGUgcG9seWdvbiBpbiB0d28gYnkgdGhlIGRpYWdvbmFsXG4gICAgICAgICAgICAgICAgdmFyIGMgPSBzcGxpdFBvbHlnb24oYSwgYik7XG5cbiAgICAgICAgICAgICAgICAvLyBmaWx0ZXIgY29saW5lYXIgcG9pbnRzIGFyb3VuZCB0aGUgY3V0c1xuICAgICAgICAgICAgICAgIGEgPSBmaWx0ZXJQb2ludHMoYSwgYS5uZXh0KTtcbiAgICAgICAgICAgICAgICBjID0gZmlsdGVyUG9pbnRzKGMsIGMubmV4dCk7XG5cbiAgICAgICAgICAgICAgICAvLyBydW4gZWFyY3V0IG9uIGVhY2ggaGFsZlxuICAgICAgICAgICAgICAgIGVhcmN1dExpbmtlZChhLCB0cmlhbmdsZXMsIGRpbSwgbWluWCwgbWluWSwgaW52U2l6ZSwgMCk7XG4gICAgICAgICAgICAgICAgZWFyY3V0TGlua2VkKGMsIHRyaWFuZ2xlcywgZGltLCBtaW5YLCBtaW5ZLCBpbnZTaXplLCAwKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBiID0gYi5uZXh0O1xuICAgICAgICB9XG4gICAgICAgIGEgPSBhLm5leHQ7XG4gICAgfSB3aGlsZSAoYSAhPT0gc3RhcnQpO1xufVxuXG4vLyBsaW5rIGV2ZXJ5IGhvbGUgaW50byB0aGUgb3V0ZXIgbG9vcCwgcHJvZHVjaW5nIGEgc2luZ2xlLXJpbmcgcG9seWdvbiB3aXRob3V0IGhvbGVzXG5mdW5jdGlvbiBlbGltaW5hdGVIb2xlcyhkYXRhLCBob2xlSW5kaWNlcywgb3V0ZXJOb2RlLCBkaW0pIHtcbiAgICB2YXIgcXVldWUgPSBbXSxcbiAgICAgICAgaSwgbGVuLCBzdGFydCwgZW5kLCBsaXN0O1xuXG4gICAgZm9yIChpID0gMCwgbGVuID0gaG9sZUluZGljZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgc3RhcnQgPSBob2xlSW5kaWNlc1tpXSAqIGRpbTtcbiAgICAgICAgZW5kID0gaSA8IGxlbiAtIDEgPyBob2xlSW5kaWNlc1tpICsgMV0gKiBkaW0gOiBkYXRhLmxlbmd0aDtcbiAgICAgICAgbGlzdCA9IGxpbmtlZExpc3QoZGF0YSwgc3RhcnQsIGVuZCwgZGltLCBmYWxzZSk7XG4gICAgICAgIGlmIChsaXN0ID09PSBsaXN0Lm5leHQpIGxpc3Quc3RlaW5lciA9IHRydWU7XG4gICAgICAgIHF1ZXVlLnB1c2goZ2V0TGVmdG1vc3QobGlzdCkpO1xuICAgIH1cblxuICAgIHF1ZXVlLnNvcnQoY29tcGFyZVgpO1xuXG4gICAgLy8gcHJvY2VzcyBob2xlcyBmcm9tIGxlZnQgdG8gcmlnaHRcbiAgICBmb3IgKGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgb3V0ZXJOb2RlID0gZWxpbWluYXRlSG9sZShxdWV1ZVtpXSwgb3V0ZXJOb2RlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0ZXJOb2RlO1xufVxuXG5mdW5jdGlvbiBjb21wYXJlWChhLCBiKSB7XG4gICAgcmV0dXJuIGEueCAtIGIueDtcbn1cblxuLy8gZmluZCBhIGJyaWRnZSBiZXR3ZWVuIHZlcnRpY2VzIHRoYXQgY29ubmVjdHMgaG9sZSB3aXRoIGFuIG91dGVyIHJpbmcgYW5kIGFuZCBsaW5rIGl0XG5mdW5jdGlvbiBlbGltaW5hdGVIb2xlKGhvbGUsIG91dGVyTm9kZSkge1xuICAgIHZhciBicmlkZ2UgPSBmaW5kSG9sZUJyaWRnZShob2xlLCBvdXRlck5vZGUpO1xuICAgIGlmICghYnJpZGdlKSB7XG4gICAgICAgIHJldHVybiBvdXRlck5vZGU7XG4gICAgfVxuXG4gICAgdmFyIGJyaWRnZVJldmVyc2UgPSBzcGxpdFBvbHlnb24oYnJpZGdlLCBob2xlKTtcblxuICAgIC8vIGZpbHRlciBjb2xsaW5lYXIgcG9pbnRzIGFyb3VuZCB0aGUgY3V0c1xuICAgIGZpbHRlclBvaW50cyhicmlkZ2VSZXZlcnNlLCBicmlkZ2VSZXZlcnNlLm5leHQpO1xuICAgIHJldHVybiBmaWx0ZXJQb2ludHMoYnJpZGdlLCBicmlkZ2UubmV4dCk7XG59XG5cbi8vIERhdmlkIEViZXJseSdzIGFsZ29yaXRobSBmb3IgZmluZGluZyBhIGJyaWRnZSBiZXR3ZWVuIGhvbGUgYW5kIG91dGVyIHBvbHlnb25cbmZ1bmN0aW9uIGZpbmRIb2xlQnJpZGdlKGhvbGUsIG91dGVyTm9kZSkge1xuICAgIHZhciBwID0gb3V0ZXJOb2RlLFxuICAgICAgICBoeCA9IGhvbGUueCxcbiAgICAgICAgaHkgPSBob2xlLnksXG4gICAgICAgIHF4ID0gLUluZmluaXR5LFxuICAgICAgICBtO1xuXG4gICAgLy8gZmluZCBhIHNlZ21lbnQgaW50ZXJzZWN0ZWQgYnkgYSByYXkgZnJvbSB0aGUgaG9sZSdzIGxlZnRtb3N0IHBvaW50IHRvIHRoZSBsZWZ0O1xuICAgIC8vIHNlZ21lbnQncyBlbmRwb2ludCB3aXRoIGxlc3NlciB4IHdpbGwgYmUgcG90ZW50aWFsIGNvbm5lY3Rpb24gcG9pbnRcbiAgICBkbyB7XG4gICAgICAgIGlmIChoeSA8PSBwLnkgJiYgaHkgPj0gcC5uZXh0LnkgJiYgcC5uZXh0LnkgIT09IHAueSkge1xuICAgICAgICAgICAgdmFyIHggPSBwLnggKyAoaHkgLSBwLnkpICogKHAubmV4dC54IC0gcC54KSAvIChwLm5leHQueSAtIHAueSk7XG4gICAgICAgICAgICBpZiAoeCA8PSBoeCAmJiB4ID4gcXgpIHtcbiAgICAgICAgICAgICAgICBxeCA9IHg7XG4gICAgICAgICAgICAgICAgbSA9IHAueCA8IHAubmV4dC54ID8gcCA6IHAubmV4dDtcbiAgICAgICAgICAgICAgICBpZiAoeCA9PT0gaHgpIHJldHVybiBtOyAvLyBob2xlIHRvdWNoZXMgb3V0ZXIgc2VnbWVudDsgcGljayBsZWZ0bW9zdCBlbmRwb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHAgPSBwLm5leHQ7XG4gICAgfSB3aGlsZSAocCAhPT0gb3V0ZXJOb2RlKTtcblxuICAgIGlmICghbSkgcmV0dXJuIG51bGw7XG5cbiAgICAvLyBsb29rIGZvciBwb2ludHMgaW5zaWRlIHRoZSB0cmlhbmdsZSBvZiBob2xlIHBvaW50LCBzZWdtZW50IGludGVyc2VjdGlvbiBhbmQgZW5kcG9pbnQ7XG4gICAgLy8gaWYgdGhlcmUgYXJlIG5vIHBvaW50cyBmb3VuZCwgd2UgaGF2ZSBhIHZhbGlkIGNvbm5lY3Rpb247XG4gICAgLy8gb3RoZXJ3aXNlIGNob29zZSB0aGUgcG9pbnQgb2YgdGhlIG1pbmltdW0gYW5nbGUgd2l0aCB0aGUgcmF5IGFzIGNvbm5lY3Rpb24gcG9pbnRcblxuICAgIHZhciBzdG9wID0gbSxcbiAgICAgICAgbXggPSBtLngsXG4gICAgICAgIG15ID0gbS55LFxuICAgICAgICB0YW5NaW4gPSBJbmZpbml0eSxcbiAgICAgICAgdGFuO1xuXG4gICAgcCA9IG07XG5cbiAgICBkbyB7XG4gICAgICAgIGlmIChoeCA+PSBwLnggJiYgcC54ID49IG14ICYmIGh4ICE9PSBwLnggJiZcbiAgICAgICAgICAgICAgICBwb2ludEluVHJpYW5nbGUoaHkgPCBteSA/IGh4IDogcXgsIGh5LCBteCwgbXksIGh5IDwgbXkgPyBxeCA6IGh4LCBoeSwgcC54LCBwLnkpKSB7XG5cbiAgICAgICAgICAgIHRhbiA9IE1hdGguYWJzKGh5IC0gcC55KSAvIChoeCAtIHAueCk7IC8vIHRhbmdlbnRpYWxcblxuICAgICAgICAgICAgaWYgKGxvY2FsbHlJbnNpZGUocCwgaG9sZSkgJiZcbiAgICAgICAgICAgICAgICAodGFuIDwgdGFuTWluIHx8ICh0YW4gPT09IHRhbk1pbiAmJiAocC54ID4gbS54IHx8IChwLnggPT09IG0ueCAmJiBzZWN0b3JDb250YWluc1NlY3RvcihtLCBwKSkpKSkpIHtcbiAgICAgICAgICAgICAgICBtID0gcDtcbiAgICAgICAgICAgICAgICB0YW5NaW4gPSB0YW47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwID0gcC5uZXh0O1xuICAgIH0gd2hpbGUgKHAgIT09IHN0b3ApO1xuXG4gICAgcmV0dXJuIG07XG59XG5cbi8vIHdoZXRoZXIgc2VjdG9yIGluIHZlcnRleCBtIGNvbnRhaW5zIHNlY3RvciBpbiB2ZXJ0ZXggcCBpbiB0aGUgc2FtZSBjb29yZGluYXRlc1xuZnVuY3Rpb24gc2VjdG9yQ29udGFpbnNTZWN0b3IobSwgcCkge1xuICAgIHJldHVybiBhcmVhKG0ucHJldiwgbSwgcC5wcmV2KSA8IDAgJiYgYXJlYShwLm5leHQsIG0sIG0ubmV4dCkgPCAwO1xufVxuXG4vLyBpbnRlcmxpbmsgcG9seWdvbiBub2RlcyBpbiB6LW9yZGVyXG5mdW5jdGlvbiBpbmRleEN1cnZlKHN0YXJ0LCBtaW5YLCBtaW5ZLCBpbnZTaXplKSB7XG4gICAgdmFyIHAgPSBzdGFydDtcbiAgICBkbyB7XG4gICAgICAgIGlmIChwLnogPT09IDApIHAueiA9IHpPcmRlcihwLngsIHAueSwgbWluWCwgbWluWSwgaW52U2l6ZSk7XG4gICAgICAgIHAucHJldlogPSBwLnByZXY7XG4gICAgICAgIHAubmV4dFogPSBwLm5leHQ7XG4gICAgICAgIHAgPSBwLm5leHQ7XG4gICAgfSB3aGlsZSAocCAhPT0gc3RhcnQpO1xuXG4gICAgcC5wcmV2Wi5uZXh0WiA9IG51bGw7XG4gICAgcC5wcmV2WiA9IG51bGw7XG5cbiAgICBzb3J0TGlua2VkKHApO1xufVxuXG4vLyBTaW1vbiBUYXRoYW0ncyBsaW5rZWQgbGlzdCBtZXJnZSBzb3J0IGFsZ29yaXRobVxuLy8gaHR0cDovL3d3dy5jaGlhcmsuZ3JlZW5lbmQub3JnLnVrL35zZ3RhdGhhbS9hbGdvcml0aG1zL2xpc3Rzb3J0Lmh0bWxcbmZ1bmN0aW9uIHNvcnRMaW5rZWQobGlzdCkge1xuICAgIHZhciBpLCBwLCBxLCBlLCB0YWlsLCBudW1NZXJnZXMsIHBTaXplLCBxU2l6ZSxcbiAgICAgICAgaW5TaXplID0gMTtcblxuICAgIGRvIHtcbiAgICAgICAgcCA9IGxpc3Q7XG4gICAgICAgIGxpc3QgPSBudWxsO1xuICAgICAgICB0YWlsID0gbnVsbDtcbiAgICAgICAgbnVtTWVyZ2VzID0gMDtcblxuICAgICAgICB3aGlsZSAocCkge1xuICAgICAgICAgICAgbnVtTWVyZ2VzKys7XG4gICAgICAgICAgICBxID0gcDtcbiAgICAgICAgICAgIHBTaXplID0gMDtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBpblNpemU7IGkrKykge1xuICAgICAgICAgICAgICAgIHBTaXplKys7XG4gICAgICAgICAgICAgICAgcSA9IHEubmV4dFo7XG4gICAgICAgICAgICAgICAgaWYgKCFxKSBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHFTaXplID0gaW5TaXplO1xuXG4gICAgICAgICAgICB3aGlsZSAocFNpemUgPiAwIHx8IChxU2l6ZSA+IDAgJiYgcSkpIHtcblxuICAgICAgICAgICAgICAgIGlmIChwU2l6ZSAhPT0gMCAmJiAocVNpemUgPT09IDAgfHwgIXEgfHwgcC56IDw9IHEueikpIHtcbiAgICAgICAgICAgICAgICAgICAgZSA9IHA7XG4gICAgICAgICAgICAgICAgICAgIHAgPSBwLm5leHRaO1xuICAgICAgICAgICAgICAgICAgICBwU2l6ZS0tO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGUgPSBxO1xuICAgICAgICAgICAgICAgICAgICBxID0gcS5uZXh0WjtcbiAgICAgICAgICAgICAgICAgICAgcVNpemUtLTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodGFpbCkgdGFpbC5uZXh0WiA9IGU7XG4gICAgICAgICAgICAgICAgZWxzZSBsaXN0ID0gZTtcblxuICAgICAgICAgICAgICAgIGUucHJldlogPSB0YWlsO1xuICAgICAgICAgICAgICAgIHRhaWwgPSBlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwID0gcTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRhaWwubmV4dFogPSBudWxsO1xuICAgICAgICBpblNpemUgKj0gMjtcblxuICAgIH0gd2hpbGUgKG51bU1lcmdlcyA+IDEpO1xuXG4gICAgcmV0dXJuIGxpc3Q7XG59XG5cbi8vIHotb3JkZXIgb2YgYSBwb2ludCBnaXZlbiBjb29yZHMgYW5kIGludmVyc2Ugb2YgdGhlIGxvbmdlciBzaWRlIG9mIGRhdGEgYmJveFxuZnVuY3Rpb24gek9yZGVyKHgsIHksIG1pblgsIG1pblksIGludlNpemUpIHtcbiAgICAvLyBjb29yZHMgYXJlIHRyYW5zZm9ybWVkIGludG8gbm9uLW5lZ2F0aXZlIDE1LWJpdCBpbnRlZ2VyIHJhbmdlXG4gICAgeCA9ICh4IC0gbWluWCkgKiBpbnZTaXplIHwgMDtcbiAgICB5ID0gKHkgLSBtaW5ZKSAqIGludlNpemUgfCAwO1xuXG4gICAgeCA9ICh4IHwgKHggPDwgOCkpICYgMHgwMEZGMDBGRjtcbiAgICB4ID0gKHggfCAoeCA8PCA0KSkgJiAweDBGMEYwRjBGO1xuICAgIHggPSAoeCB8ICh4IDw8IDIpKSAmIDB4MzMzMzMzMzM7XG4gICAgeCA9ICh4IHwgKHggPDwgMSkpICYgMHg1NTU1NTU1NTtcblxuICAgIHkgPSAoeSB8ICh5IDw8IDgpKSAmIDB4MDBGRjAwRkY7XG4gICAgeSA9ICh5IHwgKHkgPDwgNCkpICYgMHgwRjBGMEYwRjtcbiAgICB5ID0gKHkgfCAoeSA8PCAyKSkgJiAweDMzMzMzMzMzO1xuICAgIHkgPSAoeSB8ICh5IDw8IDEpKSAmIDB4NTU1NTU1NTU7XG5cbiAgICByZXR1cm4geCB8ICh5IDw8IDEpO1xufVxuXG4vLyBmaW5kIHRoZSBsZWZ0bW9zdCBub2RlIG9mIGEgcG9seWdvbiByaW5nXG5mdW5jdGlvbiBnZXRMZWZ0bW9zdChzdGFydCkge1xuICAgIHZhciBwID0gc3RhcnQsXG4gICAgICAgIGxlZnRtb3N0ID0gc3RhcnQ7XG4gICAgZG8ge1xuICAgICAgICBpZiAocC54IDwgbGVmdG1vc3QueCB8fCAocC54ID09PSBsZWZ0bW9zdC54ICYmIHAueSA8IGxlZnRtb3N0LnkpKSBsZWZ0bW9zdCA9IHA7XG4gICAgICAgIHAgPSBwLm5leHQ7XG4gICAgfSB3aGlsZSAocCAhPT0gc3RhcnQpO1xuXG4gICAgcmV0dXJuIGxlZnRtb3N0O1xufVxuXG4vLyBjaGVjayBpZiBhIHBvaW50IGxpZXMgd2l0aGluIGEgY29udmV4IHRyaWFuZ2xlXG5mdW5jdGlvbiBwb2ludEluVHJpYW5nbGUoYXgsIGF5LCBieCwgYnksIGN4LCBjeSwgcHgsIHB5KSB7XG4gICAgcmV0dXJuIChjeCAtIHB4KSAqIChheSAtIHB5KSA+PSAoYXggLSBweCkgKiAoY3kgLSBweSkgJiZcbiAgICAgICAgICAgKGF4IC0gcHgpICogKGJ5IC0gcHkpID49IChieCAtIHB4KSAqIChheSAtIHB5KSAmJlxuICAgICAgICAgICAoYnggLSBweCkgKiAoY3kgLSBweSkgPj0gKGN4IC0gcHgpICogKGJ5IC0gcHkpO1xufVxuXG4vLyBjaGVjayBpZiBhIGRpYWdvbmFsIGJldHdlZW4gdHdvIHBvbHlnb24gbm9kZXMgaXMgdmFsaWQgKGxpZXMgaW4gcG9seWdvbiBpbnRlcmlvcilcbmZ1bmN0aW9uIGlzVmFsaWREaWFnb25hbChhLCBiKSB7XG4gICAgcmV0dXJuIGEubmV4dC5pICE9PSBiLmkgJiYgYS5wcmV2LmkgIT09IGIuaSAmJiAhaW50ZXJzZWN0c1BvbHlnb24oYSwgYikgJiYgLy8gZG9uZXMndCBpbnRlcnNlY3Qgb3RoZXIgZWRnZXNcbiAgICAgICAgICAgKGxvY2FsbHlJbnNpZGUoYSwgYikgJiYgbG9jYWxseUluc2lkZShiLCBhKSAmJiBtaWRkbGVJbnNpZGUoYSwgYikgJiYgLy8gbG9jYWxseSB2aXNpYmxlXG4gICAgICAgICAgICAoYXJlYShhLnByZXYsIGEsIGIucHJldikgfHwgYXJlYShhLCBiLnByZXYsIGIpKSB8fCAvLyBkb2VzIG5vdCBjcmVhdGUgb3Bwb3NpdGUtZmFjaW5nIHNlY3RvcnNcbiAgICAgICAgICAgIGVxdWFscyhhLCBiKSAmJiBhcmVhKGEucHJldiwgYSwgYS5uZXh0KSA+IDAgJiYgYXJlYShiLnByZXYsIGIsIGIubmV4dCkgPiAwKTsgLy8gc3BlY2lhbCB6ZXJvLWxlbmd0aCBjYXNlXG59XG5cbi8vIHNpZ25lZCBhcmVhIG9mIGEgdHJpYW5nbGVcbmZ1bmN0aW9uIGFyZWEocCwgcSwgcikge1xuICAgIHJldHVybiAocS55IC0gcC55KSAqIChyLnggLSBxLngpIC0gKHEueCAtIHAueCkgKiAoci55IC0gcS55KTtcbn1cblxuLy8gY2hlY2sgaWYgdHdvIHBvaW50cyBhcmUgZXF1YWxcbmZ1bmN0aW9uIGVxdWFscyhwMSwgcDIpIHtcbiAgICByZXR1cm4gcDEueCA9PT0gcDIueCAmJiBwMS55ID09PSBwMi55O1xufVxuXG4vLyBjaGVjayBpZiB0d28gc2VnbWVudHMgaW50ZXJzZWN0XG5mdW5jdGlvbiBpbnRlcnNlY3RzKHAxLCBxMSwgcDIsIHEyKSB7XG4gICAgdmFyIG8xID0gc2lnbihhcmVhKHAxLCBxMSwgcDIpKTtcbiAgICB2YXIgbzIgPSBzaWduKGFyZWEocDEsIHExLCBxMikpO1xuICAgIHZhciBvMyA9IHNpZ24oYXJlYShwMiwgcTIsIHAxKSk7XG4gICAgdmFyIG80ID0gc2lnbihhcmVhKHAyLCBxMiwgcTEpKTtcblxuICAgIGlmIChvMSAhPT0gbzIgJiYgbzMgIT09IG80KSByZXR1cm4gdHJ1ZTsgLy8gZ2VuZXJhbCBjYXNlXG5cbiAgICBpZiAobzEgPT09IDAgJiYgb25TZWdtZW50KHAxLCBwMiwgcTEpKSByZXR1cm4gdHJ1ZTsgLy8gcDEsIHExIGFuZCBwMiBhcmUgY29sbGluZWFyIGFuZCBwMiBsaWVzIG9uIHAxcTFcbiAgICBpZiAobzIgPT09IDAgJiYgb25TZWdtZW50KHAxLCBxMiwgcTEpKSByZXR1cm4gdHJ1ZTsgLy8gcDEsIHExIGFuZCBxMiBhcmUgY29sbGluZWFyIGFuZCBxMiBsaWVzIG9uIHAxcTFcbiAgICBpZiAobzMgPT09IDAgJiYgb25TZWdtZW50KHAyLCBwMSwgcTIpKSByZXR1cm4gdHJ1ZTsgLy8gcDIsIHEyIGFuZCBwMSBhcmUgY29sbGluZWFyIGFuZCBwMSBsaWVzIG9uIHAycTJcbiAgICBpZiAobzQgPT09IDAgJiYgb25TZWdtZW50KHAyLCBxMSwgcTIpKSByZXR1cm4gdHJ1ZTsgLy8gcDIsIHEyIGFuZCBxMSBhcmUgY29sbGluZWFyIGFuZCBxMSBsaWVzIG9uIHAycTJcblxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuLy8gZm9yIGNvbGxpbmVhciBwb2ludHMgcCwgcSwgciwgY2hlY2sgaWYgcG9pbnQgcSBsaWVzIG9uIHNlZ21lbnQgcHJcbmZ1bmN0aW9uIG9uU2VnbWVudChwLCBxLCByKSB7XG4gICAgcmV0dXJuIHEueCA8PSBNYXRoLm1heChwLngsIHIueCkgJiYgcS54ID49IE1hdGgubWluKHAueCwgci54KSAmJiBxLnkgPD0gTWF0aC5tYXgocC55LCByLnkpICYmIHEueSA+PSBNYXRoLm1pbihwLnksIHIueSk7XG59XG5cbmZ1bmN0aW9uIHNpZ24obnVtKSB7XG4gICAgcmV0dXJuIG51bSA+IDAgPyAxIDogbnVtIDwgMCA/IC0xIDogMDtcbn1cblxuLy8gY2hlY2sgaWYgYSBwb2x5Z29uIGRpYWdvbmFsIGludGVyc2VjdHMgYW55IHBvbHlnb24gc2VnbWVudHNcbmZ1bmN0aW9uIGludGVyc2VjdHNQb2x5Z29uKGEsIGIpIHtcbiAgICB2YXIgcCA9IGE7XG4gICAgZG8ge1xuICAgICAgICBpZiAocC5pICE9PSBhLmkgJiYgcC5uZXh0LmkgIT09IGEuaSAmJiBwLmkgIT09IGIuaSAmJiBwLm5leHQuaSAhPT0gYi5pICYmXG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0cyhwLCBwLm5leHQsIGEsIGIpKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgcCA9IHAubmV4dDtcbiAgICB9IHdoaWxlIChwICE9PSBhKTtcblxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuLy8gY2hlY2sgaWYgYSBwb2x5Z29uIGRpYWdvbmFsIGlzIGxvY2FsbHkgaW5zaWRlIHRoZSBwb2x5Z29uXG5mdW5jdGlvbiBsb2NhbGx5SW5zaWRlKGEsIGIpIHtcbiAgICByZXR1cm4gYXJlYShhLnByZXYsIGEsIGEubmV4dCkgPCAwID9cbiAgICAgICAgYXJlYShhLCBiLCBhLm5leHQpID49IDAgJiYgYXJlYShhLCBhLnByZXYsIGIpID49IDAgOlxuICAgICAgICBhcmVhKGEsIGIsIGEucHJldikgPCAwIHx8IGFyZWEoYSwgYS5uZXh0LCBiKSA8IDA7XG59XG5cbi8vIGNoZWNrIGlmIHRoZSBtaWRkbGUgcG9pbnQgb2YgYSBwb2x5Z29uIGRpYWdvbmFsIGlzIGluc2lkZSB0aGUgcG9seWdvblxuZnVuY3Rpb24gbWlkZGxlSW5zaWRlKGEsIGIpIHtcbiAgICB2YXIgcCA9IGEsXG4gICAgICAgIGluc2lkZSA9IGZhbHNlLFxuICAgICAgICBweCA9IChhLnggKyBiLngpIC8gMixcbiAgICAgICAgcHkgPSAoYS55ICsgYi55KSAvIDI7XG4gICAgZG8ge1xuICAgICAgICBpZiAoKChwLnkgPiBweSkgIT09IChwLm5leHQueSA+IHB5KSkgJiYgcC5uZXh0LnkgIT09IHAueSAmJlxuICAgICAgICAgICAgICAgIChweCA8IChwLm5leHQueCAtIHAueCkgKiAocHkgLSBwLnkpIC8gKHAubmV4dC55IC0gcC55KSArIHAueCkpXG4gICAgICAgICAgICBpbnNpZGUgPSAhaW5zaWRlO1xuICAgICAgICBwID0gcC5uZXh0O1xuICAgIH0gd2hpbGUgKHAgIT09IGEpO1xuXG4gICAgcmV0dXJuIGluc2lkZTtcbn1cblxuLy8gbGluayB0d28gcG9seWdvbiB2ZXJ0aWNlcyB3aXRoIGEgYnJpZGdlOyBpZiB0aGUgdmVydGljZXMgYmVsb25nIHRvIHRoZSBzYW1lIHJpbmcsIGl0IHNwbGl0cyBwb2x5Z29uIGludG8gdHdvO1xuLy8gaWYgb25lIGJlbG9uZ3MgdG8gdGhlIG91dGVyIHJpbmcgYW5kIGFub3RoZXIgdG8gYSBob2xlLCBpdCBtZXJnZXMgaXQgaW50byBhIHNpbmdsZSByaW5nXG5mdW5jdGlvbiBzcGxpdFBvbHlnb24oYSwgYikge1xuICAgIHZhciBhMiA9IG5ldyBOb2RlKGEuaSwgYS54LCBhLnkpLFxuICAgICAgICBiMiA9IG5ldyBOb2RlKGIuaSwgYi54LCBiLnkpLFxuICAgICAgICBhbiA9IGEubmV4dCxcbiAgICAgICAgYnAgPSBiLnByZXY7XG5cbiAgICBhLm5leHQgPSBiO1xuICAgIGIucHJldiA9IGE7XG5cbiAgICBhMi5uZXh0ID0gYW47XG4gICAgYW4ucHJldiA9IGEyO1xuXG4gICAgYjIubmV4dCA9IGEyO1xuICAgIGEyLnByZXYgPSBiMjtcblxuICAgIGJwLm5leHQgPSBiMjtcbiAgICBiMi5wcmV2ID0gYnA7XG5cbiAgICByZXR1cm4gYjI7XG59XG5cbi8vIGNyZWF0ZSBhIG5vZGUgYW5kIG9wdGlvbmFsbHkgbGluayBpdCB3aXRoIHByZXZpb3VzIG9uZSAoaW4gYSBjaXJjdWxhciBkb3VibHkgbGlua2VkIGxpc3QpXG5mdW5jdGlvbiBpbnNlcnROb2RlKGksIHgsIHksIGxhc3QpIHtcbiAgICB2YXIgcCA9IG5ldyBOb2RlKGksIHgsIHkpO1xuXG4gICAgaWYgKCFsYXN0KSB7XG4gICAgICAgIHAucHJldiA9IHA7XG4gICAgICAgIHAubmV4dCA9IHA7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICBwLm5leHQgPSBsYXN0Lm5leHQ7XG4gICAgICAgIHAucHJldiA9IGxhc3Q7XG4gICAgICAgIGxhc3QubmV4dC5wcmV2ID0gcDtcbiAgICAgICAgbGFzdC5uZXh0ID0gcDtcbiAgICB9XG4gICAgcmV0dXJuIHA7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZU5vZGUocCkge1xuICAgIHAubmV4dC5wcmV2ID0gcC5wcmV2O1xuICAgIHAucHJldi5uZXh0ID0gcC5uZXh0O1xuXG4gICAgaWYgKHAucHJldlopIHAucHJldloubmV4dFogPSBwLm5leHRaO1xuICAgIGlmIChwLm5leHRaKSBwLm5leHRaLnByZXZaID0gcC5wcmV2Wjtcbn1cblxuZnVuY3Rpb24gTm9kZShpLCB4LCB5KSB7XG4gICAgLy8gdmVydGV4IGluZGV4IGluIGNvb3JkaW5hdGVzIGFycmF5XG4gICAgdGhpcy5pID0gaTtcblxuICAgIC8vIHZlcnRleCBjb29yZGluYXRlc1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcblxuICAgIC8vIHByZXZpb3VzIGFuZCBuZXh0IHZlcnRleCBub2RlcyBpbiBhIHBvbHlnb24gcmluZ1xuICAgIHRoaXMucHJldiA9IG51bGw7XG4gICAgdGhpcy5uZXh0ID0gbnVsbDtcblxuICAgIC8vIHotb3JkZXIgY3VydmUgdmFsdWVcbiAgICB0aGlzLnogPSAwO1xuXG4gICAgLy8gcHJldmlvdXMgYW5kIG5leHQgbm9kZXMgaW4gei1vcmRlclxuICAgIHRoaXMucHJldlogPSBudWxsO1xuICAgIHRoaXMubmV4dFogPSBudWxsO1xuXG4gICAgLy8gaW5kaWNhdGVzIHdoZXRoZXIgdGhpcyBpcyBhIHN0ZWluZXIgcG9pbnRcbiAgICB0aGlzLnN0ZWluZXIgPSBmYWxzZTtcbn1cblxuLy8gcmV0dXJuIGEgcGVyY2VudGFnZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlIHBvbHlnb24gYXJlYSBhbmQgaXRzIHRyaWFuZ3VsYXRpb24gYXJlYTtcbi8vIHVzZWQgdG8gdmVyaWZ5IGNvcnJlY3RuZXNzIG9mIHRyaWFuZ3VsYXRpb25cbmVhcmN1dC5kZXZpYXRpb24gPSBmdW5jdGlvbiAoZGF0YSwgaG9sZUluZGljZXMsIGRpbSwgdHJpYW5nbGVzKSB7XG4gICAgdmFyIGhhc0hvbGVzID0gaG9sZUluZGljZXMgJiYgaG9sZUluZGljZXMubGVuZ3RoO1xuICAgIHZhciBvdXRlckxlbiA9IGhhc0hvbGVzID8gaG9sZUluZGljZXNbMF0gKiBkaW0gOiBkYXRhLmxlbmd0aDtcblxuICAgIHZhciBwb2x5Z29uQXJlYSA9IE1hdGguYWJzKHNpZ25lZEFyZWEoZGF0YSwgMCwgb3V0ZXJMZW4sIGRpbSkpO1xuICAgIGlmIChoYXNIb2xlcykge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gaG9sZUluZGljZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBzdGFydCA9IGhvbGVJbmRpY2VzW2ldICogZGltO1xuICAgICAgICAgICAgdmFyIGVuZCA9IGkgPCBsZW4gLSAxID8gaG9sZUluZGljZXNbaSArIDFdICogZGltIDogZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICBwb2x5Z29uQXJlYSAtPSBNYXRoLmFicyhzaWduZWRBcmVhKGRhdGEsIHN0YXJ0LCBlbmQsIGRpbSkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHRyaWFuZ2xlc0FyZWEgPSAwO1xuICAgIGZvciAoaSA9IDA7IGkgPCB0cmlhbmdsZXMubGVuZ3RoOyBpICs9IDMpIHtcbiAgICAgICAgdmFyIGEgPSB0cmlhbmdsZXNbaV0gKiBkaW07XG4gICAgICAgIHZhciBiID0gdHJpYW5nbGVzW2kgKyAxXSAqIGRpbTtcbiAgICAgICAgdmFyIGMgPSB0cmlhbmdsZXNbaSArIDJdICogZGltO1xuICAgICAgICB0cmlhbmdsZXNBcmVhICs9IE1hdGguYWJzKFxuICAgICAgICAgICAgKGRhdGFbYV0gLSBkYXRhW2NdKSAqIChkYXRhW2IgKyAxXSAtIGRhdGFbYSArIDFdKSAtXG4gICAgICAgICAgICAoZGF0YVthXSAtIGRhdGFbYl0pICogKGRhdGFbYyArIDFdIC0gZGF0YVthICsgMV0pKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcG9seWdvbkFyZWEgPT09IDAgJiYgdHJpYW5nbGVzQXJlYSA9PT0gMCA/IDAgOlxuICAgICAgICBNYXRoLmFicygodHJpYW5nbGVzQXJlYSAtIHBvbHlnb25BcmVhKSAvIHBvbHlnb25BcmVhKTtcbn07XG5cbmZ1bmN0aW9uIHNpZ25lZEFyZWEoZGF0YSwgc3RhcnQsIGVuZCwgZGltKSB7XG4gICAgdmFyIHN1bSA9IDA7XG4gICAgZm9yICh2YXIgaSA9IHN0YXJ0LCBqID0gZW5kIC0gZGltOyBpIDwgZW5kOyBpICs9IGRpbSkge1xuICAgICAgICBzdW0gKz0gKGRhdGFbal0gLSBkYXRhW2ldKSAqIChkYXRhW2kgKyAxXSArIGRhdGFbaiArIDFdKTtcbiAgICAgICAgaiA9IGk7XG4gICAgfVxuICAgIHJldHVybiBzdW07XG59XG5cbi8vIHR1cm4gYSBwb2x5Z29uIGluIGEgbXVsdGktZGltZW5zaW9uYWwgYXJyYXkgZm9ybSAoZS5nLiBhcyBpbiBHZW9KU09OKSBpbnRvIGEgZm9ybSBFYXJjdXQgYWNjZXB0c1xuZWFyY3V0LmZsYXR0ZW4gPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgIHZhciBkaW0gPSBkYXRhWzBdWzBdLmxlbmd0aCxcbiAgICAgICAgcmVzdWx0ID0ge3ZlcnRpY2VzOiBbXSwgaG9sZXM6IFtdLCBkaW1lbnNpb25zOiBkaW19LFxuICAgICAgICBob2xlSW5kZXggPSAwO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGF0YVtpXS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgZm9yICh2YXIgZCA9IDA7IGQgPCBkaW07IGQrKykgcmVzdWx0LnZlcnRpY2VzLnB1c2goZGF0YVtpXVtqXVtkXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkgPiAwKSB7XG4gICAgICAgICAgICBob2xlSW5kZXggKz0gZGF0YVtpIC0gMV0ubGVuZ3RoO1xuICAgICAgICAgICAgcmVzdWx0LmhvbGVzLnB1c2goaG9sZUluZGV4KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbiIsICJleHBvcnQgKiBmcm9tICcuLzh0aHdhbGwtY2FtZXJhLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vYW5jaG9yLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vY3Vyc29yLXRhcmdldC5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2N1cnNvci5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2RlYnVnLW9iamVjdC5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2RldmljZS1vcmllbnRhdGlvbi1sb29rLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vZmluZ2VyLWN1cnNvci5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2ZpeGVkLWZvdmVhdGlvbi5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2hhbmQtdHJhY2tpbmcuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9oaXQtdGVzdC1sb2NhdGlvbi5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2hvd2xlci1hdWRpby1saXN0ZW5lci5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2hvd2xlci1hdWRpby1zb3VyY2UuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9pbWFnZS10ZXh0dXJlLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vbW91c2UtbG9vay5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3BsYXllci1oZWlnaHQuanMnO1xuZXhwb3J0ICogZnJvbSAnLi90YXJnZXQtZnJhbWVyYXRlLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vdGVsZXBvcnQuanMnO1xuZXhwb3J0ICogZnJvbSAnLi90cmFpbC5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3R3by1qb2ludC1pay1zb2x2ZXIuanMnO1xuZXhwb3J0ICogZnJvbSAnLi92aWRlby10ZXh0dXJlLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vdnItbW9kZS1hY3RpdmUtc3dpdGNoLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vcGxhbmUtZGV0ZWN0aW9uLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vdnJtLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vd2FzZC1jb250cm9scy5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2lucHV0LXByb2ZpbGUuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9vcmJpdGFsLWNhbWVyYS5qcyc7XG4iLCAiZXhwb3J0IGNvbnN0IGJpZ0ludD0oKT0+KGFzeW5jIGU9Pnt0cnl7cmV0dXJuKGF3YWl0IFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKGUpKS5pbnN0YW5jZS5leHBvcnRzLmIoQmlnSW50KDApKT09PUJpZ0ludCgwKX1jYXRjaChlKXtyZXR1cm4hMX19KShuZXcgVWludDhBcnJheShbMCw5NywxMTUsMTA5LDEsMCwwLDAsMSw2LDEsOTYsMSwxMjYsMSwxMjYsMywyLDEsMCw3LDUsMSwxLDk4LDAsMCwxMCw2LDEsNCwwLDMyLDAsMTFdKSksYnVsa01lbW9yeT1hc3luYygpPT5XZWJBc3NlbWJseS52YWxpZGF0ZShuZXcgVWludDhBcnJheShbMCw5NywxMTUsMTA5LDEsMCwwLDAsMSw0LDEsOTYsMCwwLDMsMiwxLDAsNSwzLDEsMCwxLDEwLDE0LDEsMTIsMCw2NSwwLDY1LDAsNjUsMCwyNTIsMTAsMCwwLDExXSkpLGV4Y2VwdGlvbnM9YXN5bmMoKT0+V2ViQXNzZW1ibHkudmFsaWRhdGUobmV3IFVpbnQ4QXJyYXkoWzAsOTcsMTE1LDEwOSwxLDAsMCwwLDEsNCwxLDk2LDAsMCwzLDIsMSwwLDEwLDgsMSw2LDAsNiw2NCwyNSwxMSwxMV0pKSxleHRlbmRlZENvbnN0PWFzeW5jKCk9PldlYkFzc2VtYmx5LnZhbGlkYXRlKG5ldyBVaW50OEFycmF5KFswLDk3LDExNSwxMDksMSwwLDAsMCw1LDMsMSwwLDEsMTEsOSwxLDAsNjUsMSw2NSwyLDEwNiwxMSwwXSkpLGdjPSgpPT4oYXN5bmMoKT0+V2ViQXNzZW1ibHkudmFsaWRhdGUobmV3IFVpbnQ4QXJyYXkoWzAsOTcsMTE1LDEwOSwxLDAsMCwwLDEsNSwxLDk1LDEsMTIwLDBdKSkpKCksanNwaT0oKT0+KGFzeW5jKCk9PlwiU3VzcGVuZGluZ1wiaW4gV2ViQXNzZW1ibHkpKCksbWVtb3J5NjQ9YXN5bmMoKT0+V2ViQXNzZW1ibHkudmFsaWRhdGUobmV3IFVpbnQ4QXJyYXkoWzAsOTcsMTE1LDEwOSwxLDAsMCwwLDUsMywxLDQsMV0pKSxtdWx0aU1lbW9yeT0oKT0+KGFzeW5jKCk9Pnt0cnl7cmV0dXJuIG5ldyBXZWJBc3NlbWJseS5Nb2R1bGUobmV3IFVpbnQ4QXJyYXkoWzAsOTcsMTE1LDEwOSwxLDAsMCwwLDUsNSwyLDAsMCwwLDBdKSksITB9Y2F0Y2goZSl7cmV0dXJuITF9fSkoKSxtdWx0aVZhbHVlPWFzeW5jKCk9PldlYkFzc2VtYmx5LnZhbGlkYXRlKG5ldyBVaW50OEFycmF5KFswLDk3LDExNSwxMDksMSwwLDAsMCwxLDYsMSw5NiwwLDIsMTI3LDEyNywzLDIsMSwwLDEwLDgsMSw2LDAsNjUsMCw2NSwwLDExXSkpLG11dGFibGVHbG9iYWxzPWFzeW5jKCk9PldlYkFzc2VtYmx5LnZhbGlkYXRlKG5ldyBVaW50OEFycmF5KFswLDk3LDExNSwxMDksMSwwLDAsMCwyLDgsMSwxLDk3LDEsOTgsMywxMjcsMSw2LDYsMSwxMjcsMSw2NSwwLDExLDcsNSwxLDEsOTcsMywxXSkpLHJlZmVyZW5jZVR5cGVzPWFzeW5jKCk9PldlYkFzc2VtYmx5LnZhbGlkYXRlKG5ldyBVaW50OEFycmF5KFswLDk3LDExNSwxMDksMSwwLDAsMCwxLDQsMSw5NiwwLDAsMywyLDEsMCwxMCw3LDEsNSwwLDIwOCwxMTIsMjYsMTFdKSkscmVsYXhlZFNpbWQ9YXN5bmMoKT0+V2ViQXNzZW1ibHkudmFsaWRhdGUobmV3IFVpbnQ4QXJyYXkoWzAsOTcsMTE1LDEwOSwxLDAsMCwwLDEsNSwxLDk2LDAsMSwxMjMsMywyLDEsMCwxMCwxNSwxLDEzLDAsNjUsMSwyNTMsMTUsNjUsMiwyNTMsMTUsMjUzLDEyOCwyLDExXSkpLHNhdHVyYXRlZEZsb2F0VG9JbnQ9YXN5bmMoKT0+V2ViQXNzZW1ibHkudmFsaWRhdGUobmV3IFVpbnQ4QXJyYXkoWzAsOTcsMTE1LDEwOSwxLDAsMCwwLDEsNCwxLDk2LDAsMCwzLDIsMSwwLDEwLDEyLDEsMTAsMCw2NywwLDAsMCwwLDI1MiwwLDI2LDExXSkpLHNpZ25FeHRlbnNpb25zPWFzeW5jKCk9PldlYkFzc2VtYmx5LnZhbGlkYXRlKG5ldyBVaW50OEFycmF5KFswLDk3LDExNSwxMDksMSwwLDAsMCwxLDQsMSw5NiwwLDAsMywyLDEsMCwxMCw4LDEsNiwwLDY1LDAsMTkyLDI2LDExXSkpLHNpbWQ9YXN5bmMoKT0+V2ViQXNzZW1ibHkudmFsaWRhdGUobmV3IFVpbnQ4QXJyYXkoWzAsOTcsMTE1LDEwOSwxLDAsMCwwLDEsNSwxLDk2LDAsMSwxMjMsMywyLDEsMCwxMCwxMCwxLDgsMCw2NSwwLDI1MywxNSwyNTMsOTgsMTFdKSksc3RyZWFtaW5nQ29tcGlsYXRpb249KCk9Pihhc3luYygpPT5cImNvbXBpbGVTdHJlYW1pbmdcImluIFdlYkFzc2VtYmx5KSgpLHRhaWxDYWxsPWFzeW5jKCk9PldlYkFzc2VtYmx5LnZhbGlkYXRlKG5ldyBVaW50OEFycmF5KFswLDk3LDExNSwxMDksMSwwLDAsMCwxLDQsMSw5NiwwLDAsMywyLDEsMCwxMCw2LDEsNCwwLDE4LDAsMTFdKSksdGhyZWFkcz0oKT0+KGFzeW5jIGU9Pnt0cnl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIE1lc3NhZ2VDaGFubmVsJiYobmV3IE1lc3NhZ2VDaGFubmVsKS5wb3J0MS5wb3N0TWVzc2FnZShuZXcgU2hhcmVkQXJyYXlCdWZmZXIoMSkpLFdlYkFzc2VtYmx5LnZhbGlkYXRlKGUpfWNhdGNoKGUpe3JldHVybiExfX0pKG5ldyBVaW50OEFycmF5KFswLDk3LDExNSwxMDksMSwwLDAsMCwxLDQsMSw5NiwwLDAsMywyLDEsMCw1LDQsMSwzLDEsMSwxMCwxMSwxLDksMCw2NSwwLDI1NCwxNiwyLDAsMjYsMTFdKSksdHlwZVJlZmxlY3Rpb249KCk9Pihhc3luYygpPT5cIkZ1bmN0aW9uXCJpbiBXZWJBc3NlbWJseSkoKTtcbiIsICIvKipcbiAqIENvbXBvbmVudCBwcm9wZXJ0eSB0eXBlLlxuICovXG5leHBvcnQgZW51bSBUeXBlIHtcbiAgICAvKipcbiAgICAgKiAqKk5hdGl2ZSoqXG4gICAgICpcbiAgICAgKiBQcm9wZXJ0eSBvZiBhIG5hdGl2ZSBjb21wb25lbnQuIE11c3Qgbm90IGJlIHVzZWQgaW4gY3VzdG9tIGNvbXBvbmVudHMuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgTmF0aXZlID0gMCxcblxuICAgIC8qKlxuICAgICAqICoqQm9vbCoqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGEgY2hlY2tib3guXG4gICAgICpcbiAgICAgKiBJbml0aWFsIHZhbHVlIGlzIGBmYWxzZWAsIHVubGVzcyBvdmVycmlkZGVuIGJ5IHRoZSBgZGVmYXVsdGAgcHJvcGVydHkuXG4gICAgICovXG4gICAgQm9vbCA9IDEsXG5cbiAgICAvKipcbiAgICAgKiAqKkludCoqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGFuIGludGVnZXIgaW5wdXQgZmllbGQuXG4gICAgICpcbiAgICAgKiBJbml0aWFsIHZhbHVlIGlzIGAwYCwgdW5sZXNzIG92ZXJyaWRkZW4gYnkgdGhlIGBkZWZhdWx0YCBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBJbnQgPSAyLFxuXG4gICAgLyoqXG4gICAgICogKipGbG9hdCoqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGEgZmxvYXRpbmcgcG9pbnQgaW5wdXQgZmllbGQuXG4gICAgICpcbiAgICAgKiBJbml0aWFsIHZhbHVlIGlzIGAwLjBgLCB1bmxlc3Mgb3ZlcnJpZGRlbiBieSB0aGUgYGRlZmF1bHRgIHByb3BlcnR5LlxuICAgICAqL1xuICAgIEZsb2F0ID0gMyxcblxuICAgIC8qKlxuICAgICAqICoqU3RyaW5nIC8gVGV4dCoqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGEgc2luZ2xlLWxpbmUgdGV4dCBpbnB1dCBmaWVsZC5cbiAgICAgKlxuICAgICAqIEluaXRpYWwgdmFsdWUgaXMgYW4gZW1wdHkgc3RyaW5nLCB1bmxlc3Mgb3ZlcnJpZGRlbiBieSB0aGUgYGRlZmF1bHRgXG4gICAgICogcHJvcGVydHkuXG4gICAgICovXG4gICAgU3RyaW5nID0gNCxcblxuICAgIC8qKlxuICAgICAqICoqRW51bWVyYXRpb24qKjpcbiAgICAgKlxuICAgICAqIEFwcGVhcnMgaW4gdGhlIGVkaXRvciBhcyBhIGRyb3Bkb3duIHdpdGggZ2l2ZW4gdmFsdWVzLiBUaGUgYWRkaXRpb25hbFxuICAgICAqIGB2YWx1ZXNgIHBhcmFtZXRlciB3aXRoIHNlbGVjdGlvbiBvcHRpb25zIGlzIG1hbmRhdG9yeS5cbiAgICAgKlxuICAgICAqIFRoZSBwcm9wZXJ0eSB2YWx1ZSBpcyByZXNvbHZlZCB0byBhbiAqKmluZGV4KiogaW50byB0aGUgYHZhbHVlc2AgYXJyYXkuXG4gICAgICpcbiAgICAgKiBJbml0aWFsIHZhbHVlIGlzIHRoZSBmaXJzdCBlbGVtZW50IGluIGB2YWx1ZXNgLCB1bmxlc3Mgb3ZlcnJpZGRlbiBieVxuICAgICAqIHRoZSBgZGVmYXVsdGAgcHJvcGVydHkuIFRoZSBgZGVmYXVsdGAgdmFsdWUgY2FuIGJlIGEgc3RyaW5nIG9yIGFuIGluZGV4XG4gICAgICogaW50byBgdmFsdWVzYC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqICAgICBjYW1lcmE6IHt0eXBlOiBUeXBlLkVudW0sIHZhbHVlczogWydhdXRvJywgJ2JhY2snLCAnZnJvbnQnXSwgZGVmYXVsdDogJ2F1dG8nfSxcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBFbnVtID0gNSxcblxuICAgIC8qKlxuICAgICAqICoqT2JqZWN0IHJlZmVyZW5jZSoqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGFuIG9iamVjdCByZXNvdXJjZSBzZWxlY3Rpb24gZHJvcGRvd25cbiAgICAgKiB3aXRoIG9iamVjdCBwaWNrZXIuXG4gICAgICpcbiAgICAgKiBJbml0aWFsIHZhbHVlIGlzIGBudWxsYC5cbiAgICAgKi9cbiAgICBPYmplY3QgPSA2LFxuXG4gICAgLyoqXG4gICAgICogKipNZXNoIHJlZmVyZW5jZSoqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGEgbWVzaCByZXNvdXJjZSBzZWxlY3Rpb24gZHJvcGRvd24uXG4gICAgICpcbiAgICAgKiBJbml0aWFsIHZhbHVlIGlzIGBudWxsYC5cbiAgICAgKi9cbiAgICBNZXNoID0gNyxcblxuICAgIC8qKlxuICAgICAqICoqVGV4dHVyZSByZWZlcmVuY2UqKjpcbiAgICAgKlxuICAgICAqIEFwcGVhcnMgaW4gdGhlIGVkaXRvciBhcyBhIHRleHR1cmUgcmVzb3VyY2Ugc2VsZWN0aW9uIGRyb3Bkb3duLlxuICAgICAqXG4gICAgICogSW5pdGlhbCB2YWx1ZSBpcyBgbnVsbGAuXG4gICAgICovXG4gICAgVGV4dHVyZSA9IDgsXG5cbiAgICAvKipcbiAgICAgKiAqKk1hdGVyaWFsIHJlZmVyZW5jZSoqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGEgbWF0ZXJpYWwgcmVzb3VyY2Ugc2VsZWN0aW9uIGRyb3Bkb3duLlxuICAgICAqXG4gICAgICogSW5pdGlhbCB2YWx1ZSBpcyBgbnVsbGAuXG4gICAgICovXG4gICAgTWF0ZXJpYWwgPSA5LFxuXG4gICAgLyoqXG4gICAgICogKipBbmltYXRpb24gcmVmZXJlbmNlKio6XG4gICAgICpcbiAgICAgKiBBcHBlYXJzIGluIHRoZSBlZGl0b3IgYXMgYW4gYW5pbWF0aW9uIHJlc291cmNlIHNlbGVjdGlvbiBkcm9wZG93bi5cbiAgICAgKlxuICAgICAqIEluaXRpYWwgdmFsdWUgaXMgYG51bGxgLlxuICAgICAqL1xuICAgIEFuaW1hdGlvbiA9IDEwLFxuXG4gICAgLyoqXG4gICAgICogKipTa2luIHJlZmVyZW5jZSoqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGEgc2tpbiByZXNvdXJjZSBzZWxlY3Rpb24gZHJvcGRvd24uXG4gICAgICpcbiAgICAgKiBJbml0aWFsIHZhbHVlIGlzIGBudWxsYC5cbiAgICAgKi9cbiAgICBTa2luID0gMTEsXG5cbiAgICAvKipcbiAgICAgKiAqKkNvbG9yKio6XG4gICAgICpcbiAgICAgKiBBcHBlYXJzIGluIHRoZSBlZGl0b3IgYXMgYSBjb2xvciB3aWRnZXQuXG4gICAgICpcbiAgICAgKiBJbml0aWFsIHZhbHVlIGlzIGBbMC4wLCAwLjAsIDAuMCwgMS4wXWAsIHVubGVzcyBvdmVycmlkZGVuIGJ5IHRoZVxuICAgICAqIGBkZWZhdWx0YCBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBDb2xvciA9IDEyLFxuXG4gICAgLyoqXG4gICAgICogKipWZWN0b3Igb2YgdHdvIGZsb2F0cyoqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGEgdHdvLWVsZW1lbnQgZmxvYXRpbmcgcG9pbnQgaW5wdXQgZmllbGQuXG4gICAgICpcbiAgICAgKiBJbml0aWFsIHZhbHVlIGlzIGBbMC4wLCAwLjBdYCwgdW5sZXNzIG92ZXJyaWRkZW4gYnkgdGhlXG4gICAgICogYGRlZmF1bHRgIHByb3BlcnR5LlxuICAgICAqL1xuICAgIFZlY3RvcjIgPSAxMyxcblxuICAgIC8qKlxuICAgICAqICoqVmVjdG9yIG9mIHRocmVlIGZsb2F0cyoqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGEgdGhyZWUtZWxlbWVudCBmbG9hdGluZyBwb2ludCBpbnB1dCBmaWVsZC5cbiAgICAgKlxuICAgICAqIEluaXRpYWwgdmFsdWUgaXMgYFswLjAsIDAuMCwgMC4wXWAsIHVubGVzcyBvdmVycmlkZGVuIGJ5IHRoZVxuICAgICAqIGBkZWZhdWx0YCBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBWZWN0b3IzID0gMTQsXG5cbiAgICAvKipcbiAgICAgKiAqKlZlY3RvciBvZiBmb3VyIGZsb2F0cyoqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGEgZm91ci1lbGVtZW50IGZsb2F0aW5nIHBvaW50IGlucHV0IGZpZWxkLlxuICAgICAqXG4gICAgICogSW5pdGlhbCB2YWx1ZSBpcyBgWzAuMCwgMC4wLCAwLjAsIDAuMF1gLCB1bmxlc3Mgb3ZlcnJpZGRlbiBieSB0aGVcbiAgICAgKiBgZGVmYXVsdGAgcHJvcGVydHkuXG4gICAgICovXG4gICAgVmVjdG9yNCA9IDE1LFxufVxuXG4vKipcbiAqIENsb25pbmcgaW50ZXJmYWNlIGZvciBjb21wb25lbnQgcHJvcGVydGllcy5cbiAqXG4gKiBVc2VkIGZvciBjb21wb25lbnQgaW5pdGlhbGl6YXRpb24gYW5kIGNsb25pbmcuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUHJvcGVydHlDbG9uZXIge1xuICAgIC8qKlxuICAgICAqIENsb25lIGEgcHJvcGVydHkgdmFsdWUuXG4gICAgICogQHBhcmFtIHR5cGUgVHlwZSBvZiB0aGUgcHJvcGVydHkuXG4gICAgICogQHBhcmFtIHZhbHVlIFZhbHVlIG9mIHRoZSBwcm9wZXJ0eS5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2xvbmVkIHZhbHVlLlxuICAgICAqL1xuICAgIGNsb25lKHR5cGU6IFR5cGUsIHZhbHVlOiBhbnkpOiBhbnk7XG59XG5cbi8qKlxuICogRGVmYXVsdCBjbG9uZXIgaW1wbGVtZW50YXRpb24uXG4gKlxuICogQ2xvbmVzIGFycmF5LWxpa2UgcHJvcGVydGllcyBhbmQgbGVhdmVzIGFsbCBvdGhlciB0eXBlcyB1bmNoYW5nZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBEZWZhdWx0UHJvcGVydHlDbG9uZXIgaW1wbGVtZW50cyBQcm9wZXJ0eUNsb25lciB7XG4gICAgY2xvbmUodHlwZTogVHlwZSwgdmFsdWU6IGFueSk6IGFueSB7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSBUeXBlLkNvbG9yOlxuICAgICAgICAgICAgY2FzZSBUeXBlLlZlY3RvcjI6XG4gICAgICAgICAgICBjYXNlIFR5cGUuVmVjdG9yMzpcbiAgICAgICAgICAgIGNhc2UgVHlwZS5WZWN0b3I0OlxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS5zbGljZSgpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKiBEZWZhdWx0IGNsb25lciBmb3IgcHJvcGVydHkgdmFsdWVzLiAqL1xuZXhwb3J0IGNvbnN0IGRlZmF1bHRQcm9wZXJ0eUNsb25lciA9IG5ldyBEZWZhdWx0UHJvcGVydHlDbG9uZXIoKTtcblxuLyoqXG4gKiBDdXN0b20gY29tcG9uZW50IHByb3BlcnR5LlxuICpcbiAqIEZvciBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGNvbXBvbmVudCBwcm9wZXJ0aWVzLCBoYXZlIGEgbG9va1xuICogYXQgdGhlIHtAbGluayBDb21wb25lbnQuUHJvcGVydGllc30gYXR0cmlidXRlLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIENvbXBvbmVudFByb3BlcnR5IHtcbiAgICAvKiogUHJvcGVydHkgdHlwZS4gKi9cbiAgICB0eXBlOiBUeXBlO1xuICAgIC8qKiBEZWZhdWx0IHZhbHVlLCBkZXBlbmRpbmcgb24gdHlwZS4gKi9cbiAgICBkZWZhdWx0PzogYW55O1xuICAgIC8qKiBWYWx1ZXMgZm9yIHtAbGluayBUeXBlLkVudW19ICovXG4gICAgdmFsdWVzPzogc3RyaW5nW107XG4gICAgcmVxdWlyZWQ/OiBib29sZWFuO1xuICAgIC8qKlxuICAgICAqIENsb25lciBmb3IgdGhlIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogSWYgbm90IGRlZmluZWQsIGZhbGxzIGJhY2sgdG8ge0BsaW5rIGRlZmF1bHRQcm9wZXJ0eUNsb25lcn0uIFRvIHByZXZlbnRcbiAgICAgKiBhbnkgY2xvbmluZywgc2V0IGEgY3VzdG9tIGNsb25lciB0aGF0IHBhc3NlcyB0aGUgb3JpZ2luYWwgdmFsdWUgYmFja1xuICAgICAqIGZyb20ge0BsaW5rIFByb3BlcnR5Q2xvbmVyLmNsb25lfS4gKi9cbiAgICBjbG9uZXI/OiBQcm9wZXJ0eUNsb25lcjtcbn1cblxuLyoqXG4gKiBDb21wb25lbnQgcHJvcGVydHkgbmFtZXNwYWNlLlxuICpcbiAqIFVzYWdlOlxuICpcbiAqIGBgYGpzXG4gKiBpbXBvcnQge0NvbXBvbmVudCwgUHJvcGVydHl9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4gKlxuICogY2xhc3MgTXlDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICogICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge1xuICogICAgICAgICBteUJvb2w6IFByb3BlcnR5LmJvb2wodHJ1ZSksXG4gKiAgICAgICAgIG15SW50OiBQcm9wZXJ0eS5pbnQoNDIpLFxuICogICAgICAgICBteVN0cmluZzogUHJvcGVydHkuc3RyaW5nKCdIZWxsbyBXb3JsZCEnKSxcbiAqICAgICAgICAgbXlNZXNoOiBQcm9wZXJ0eS5tZXNoKCksXG4gKiAgICAgfVxuICogfVxuICogYGBgXG4gKlxuICogRm9yIFR5cGVTY3JpcHQgdXNlcnMsIHlvdSBjYW4gdXNlIHRoZSBkZWNvcmF0b3JzIGluc3RlYWQuXG4gKi9cbmV4cG9ydCBjb25zdCBQcm9wZXJ0eSA9IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gYm9vbGVhbiBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkZWZhdWx0VmFsdWUgVGhlIGRlZmF1bHQgdmFsdWUuIElmIG5vdCBwcm92aWRlZCwgZGVmYXVsdHMgdG8gYGZhbHNlYC5cbiAgICAgKi9cbiAgICBib29sKGRlZmF1bHRWYWx1ZTogYm9vbGVhbiA9IGZhbHNlKTogQ29tcG9uZW50UHJvcGVydHkge1xuICAgICAgICByZXR1cm4ge3R5cGU6IFR5cGUuQm9vbCwgZGVmYXVsdDogZGVmYXVsdFZhbHVlfTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIGludGVnZXIgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGVmYXVsdFZhbHVlIFRoZSBkZWZhdWx0IHZhbHVlLiBJZiBub3QgcHJvdmlkZWQsIGRlZmF1bHRzIHRvIGAwYC5cbiAgICAgKi9cbiAgICBpbnQoZGVmYXVsdFZhbHVlOiBudW1iZXIgPSAwKTogQ29tcG9uZW50UHJvcGVydHkge1xuICAgICAgICByZXR1cm4ge3R5cGU6IFR5cGUuSW50LCBkZWZhdWx0OiBkZWZhdWx0VmFsdWV9O1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gZmxvYXQgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGVmYXVsdFZhbHVlIFRoZSBkZWZhdWx0IHZhbHVlLiBJZiBub3QgcHJvdmlkZWQsIGRlZmF1bHRzIHRvIGAwLjBgLlxuICAgICAqL1xuICAgIGZsb2F0KGRlZmF1bHRWYWx1ZTogbnVtYmVyID0gMC4wKTogQ29tcG9uZW50UHJvcGVydHkge1xuICAgICAgICByZXR1cm4ge3R5cGU6IFR5cGUuRmxvYXQsIGRlZmF1bHQ6IGRlZmF1bHRWYWx1ZX07XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBzdHJpbmcgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGVmYXVsdFZhbHVlIFRoZSBkZWZhdWx0IHZhbHVlLiBJZiBub3QgcHJvdmlkZWQsIGRlZmF1bHRzIHRvIGAnJ2AuXG4gICAgICovXG4gICAgc3RyaW5nKGRlZmF1bHRWYWx1ZSA9ICcnKTogQ29tcG9uZW50UHJvcGVydHkge1xuICAgICAgICByZXR1cm4ge3R5cGU6IFR5cGUuU3RyaW5nLCBkZWZhdWx0OiBkZWZhdWx0VmFsdWV9O1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gZW51bWVyYXRpb24gcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmFsdWVzIFRoZSBsaXN0IG9mIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gZGVmYXVsdFZhbHVlIFRoZSBkZWZhdWx0IHZhbHVlLiBDYW4gYmUgYSBzdHJpbmcgb3IgYW4gaW5kZXggaW50b1xuICAgICAqICAgICBgdmFsdWVzYC4gSWYgbm90IHByb3ZpZGVkLCBkZWZhdWx0cyB0byB0aGUgZmlyc3QgZWxlbWVudC5cbiAgICAgKi9cbiAgICBlbnVtKHZhbHVlczogc3RyaW5nW10sIGRlZmF1bHRWYWx1ZT86IHN0cmluZyB8IG51bWJlcik6IENvbXBvbmVudFByb3BlcnR5IHtcbiAgICAgICAgcmV0dXJuIHt0eXBlOiBUeXBlLkVudW0sIHZhbHVlcywgZGVmYXVsdDogZGVmYXVsdFZhbHVlfTtcbiAgICB9LFxuXG4gICAgLyoqIENyZWF0ZSBhbiB7QGxpbmsgT2JqZWN0M0R9IHJlZmVyZW5jZSBwcm9wZXJ0eS4gKi9cbiAgICBvYmplY3Qob3B0cz86IFByb3BlcnR5UmVmZXJlbmNlT3B0aW9ucyk6IENvbXBvbmVudFByb3BlcnR5IHtcbiAgICAgICAgcmV0dXJuIHt0eXBlOiBUeXBlLk9iamVjdCwgZGVmYXVsdDogbnVsbCwgcmVxdWlyZWQ6IG9wdHM/LnJlcXVpcmVkID8/IGZhbHNlfTtcbiAgICB9LFxuXG4gICAgLyoqIENyZWF0ZSBhIHtAbGluayBNZXNofSByZWZlcmVuY2UgcHJvcGVydHkuICovXG4gICAgbWVzaChvcHRzPzogUHJvcGVydHlSZWZlcmVuY2VPcHRpb25zKTogQ29tcG9uZW50UHJvcGVydHkge1xuICAgICAgICByZXR1cm4ge3R5cGU6IFR5cGUuTWVzaCwgZGVmYXVsdDogbnVsbCwgcmVxdWlyZWQ6IG9wdHM/LnJlcXVpcmVkID8/IGZhbHNlfTtcbiAgICB9LFxuXG4gICAgLyoqIENyZWF0ZSBhIHtAbGluayBUZXh0dXJlfSByZWZlcmVuY2UgcHJvcGVydHkuICovXG4gICAgdGV4dHVyZShvcHRzPzogUHJvcGVydHlSZWZlcmVuY2VPcHRpb25zKTogQ29tcG9uZW50UHJvcGVydHkge1xuICAgICAgICByZXR1cm4ge3R5cGU6IFR5cGUuVGV4dHVyZSwgZGVmYXVsdDogbnVsbCwgcmVxdWlyZWQ6IG9wdHM/LnJlcXVpcmVkID8/IGZhbHNlfTtcbiAgICB9LFxuXG4gICAgLyoqIENyZWF0ZSBhIHtAbGluayBNYXRlcmlhbH0gcmVmZXJlbmNlIHByb3BlcnR5LiAqL1xuICAgIG1hdGVyaWFsKG9wdHM/OiBQcm9wZXJ0eVJlZmVyZW5jZU9wdGlvbnMpOiBDb21wb25lbnRQcm9wZXJ0eSB7XG4gICAgICAgIHJldHVybiB7dHlwZTogVHlwZS5NYXRlcmlhbCwgZGVmYXVsdDogbnVsbCwgcmVxdWlyZWQ6IG9wdHM/LnJlcXVpcmVkID8/IGZhbHNlfTtcbiAgICB9LFxuXG4gICAgLyoqIENyZWF0ZSBhbiB7QGxpbmsgQW5pbWF0aW9ufSByZWZlcmVuY2UgcHJvcGVydHkuICovXG4gICAgYW5pbWF0aW9uKG9wdHM/OiBQcm9wZXJ0eVJlZmVyZW5jZU9wdGlvbnMpOiBDb21wb25lbnRQcm9wZXJ0eSB7XG4gICAgICAgIHJldHVybiB7dHlwZTogVHlwZS5BbmltYXRpb24sIGRlZmF1bHQ6IG51bGwsIHJlcXVpcmVkOiBvcHRzPy5yZXF1aXJlZCA/PyBmYWxzZX07XG4gICAgfSxcblxuICAgIC8qKiBDcmVhdGUgYSB7QGxpbmsgU2tpbn0gcmVmZXJlbmNlIHByb3BlcnR5LiAqL1xuICAgIHNraW4ob3B0cz86IFByb3BlcnR5UmVmZXJlbmNlT3B0aW9ucyk6IENvbXBvbmVudFByb3BlcnR5IHtcbiAgICAgICAgcmV0dXJuIHt0eXBlOiBUeXBlLlNraW4sIGRlZmF1bHQ6IG51bGwsIHJlcXVpcmVkOiBvcHRzPy5yZXF1aXJlZCA/PyBmYWxzZX07XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGNvbG9yIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHIgVGhlIHJlZCBjb21wb25lbnQsIGluIHRoZSByYW5nZSBbMDsgMV0uXG4gICAgICogQHBhcmFtIGcgVGhlIGdyZWVuIGNvbXBvbmVudCwgaW4gdGhlIHJhbmdlIFswOyAxXS5cbiAgICAgKiBAcGFyYW0gYiBUaGUgYmx1ZSBjb21wb25lbnQsIGluIHRoZSByYW5nZSBbMDsgMV0uXG4gICAgICogQHBhcmFtIGEgVGhlIGFscGhhIGNvbXBvbmVudCwgaW4gdGhlIHJhbmdlIFswOyAxXS5cbiAgICAgKi9cbiAgICBjb2xvcihyID0gMC4wLCBnID0gMC4wLCBiID0gMC4wLCBhID0gMS4wKTogQ29tcG9uZW50UHJvcGVydHkge1xuICAgICAgICByZXR1cm4ge3R5cGU6IFR5cGUuQ29sb3IsIGRlZmF1bHQ6IFtyLCBnLCBiLCBhXX07XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHR3by1lbGVtZW50IHZlY3RvciBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB4IFRoZSB4IGNvbXBvbmVudC5cbiAgICAgKiBAcGFyYW0geSBUaGUgeSBjb21wb25lbnQuXG4gICAgICovXG4gICAgdmVjdG9yMih4ID0gMC4wLCB5ID0gMC4wKTogQ29tcG9uZW50UHJvcGVydHkge1xuICAgICAgICByZXR1cm4ge3R5cGU6IFR5cGUuVmVjdG9yMiwgZGVmYXVsdDogW3gsIHldfTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgdGhyZWUtZWxlbWVudCB2ZWN0b3IgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geCBUaGUgeCBjb21wb25lbnQuXG4gICAgICogQHBhcmFtIHkgVGhlIHkgY29tcG9uZW50LlxuICAgICAqIEBwYXJhbSB6IFRoZSB6IGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICB2ZWN0b3IzKHggPSAwLjAsIHkgPSAwLjAsIHogPSAwLjApOiBDb21wb25lbnRQcm9wZXJ0eSB7XG4gICAgICAgIHJldHVybiB7dHlwZTogVHlwZS5WZWN0b3IzLCBkZWZhdWx0OiBbeCwgeSwgel19O1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBmb3VyLWVsZW1lbnQgdmVjdG9yIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHggVGhlIHggY29tcG9uZW50LlxuICAgICAqIEBwYXJhbSB5IFRoZSB5IGNvbXBvbmVudC5cbiAgICAgKiBAcGFyYW0geiBUaGUgeiBjb21wb25lbnQuXG4gICAgICogQHBhcmFtIHcgVGhlIHcgY29tcG9uZW50LlxuICAgICAqL1xuICAgIHZlY3RvcjQoeCA9IDAuMCwgeSA9IDAuMCwgeiA9IDAuMCwgdyA9IDAuMCk6IENvbXBvbmVudFByb3BlcnR5IHtcbiAgICAgICAgcmV0dXJuIHt0eXBlOiBUeXBlLlZlY3RvcjQsIGRlZmF1bHQ6IFt4LCB5LCB6LCB3XX07XG4gICAgfSxcbn07XG5cbi8qKlxuICogT3B0aW9ucyB0byBjcmVhdGUgYSByZWZlcmVuY2UgcHJvcGVydHksIGkuZS4sXG4gKiBvYmplY3QsIG1lc2gsIGFuaW1hdGlvbiwgc2tpbiwgZXRjLi4uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUHJvcGVydHlSZWZlcmVuY2VPcHRpb25zIHtcbiAgICAvKiogSWYgYHRydWVgLCB0aGUgY29tcG9uZW50IHdpbGwgdGhyb3cgaWYgdGhlIHByb3BlcnR5IGlzbid0IGluaXRpYWxpemVkLiAqL1xuICAgIHJlcXVpcmVkPzogYm9vbGVhbjtcbn1cblxuLyoqIEFsbCB0aGUga2V5cyB0aGF0IGV4aXN0cyBvbiB0aGUge0BsaW5rIFByb3BlcnR5fSBvYmplY3QuICovXG5leHBvcnQgdHlwZSBQcm9wZXJ0eUtleXMgPSBrZXlvZiB0eXBlb2YgUHJvcGVydHk7XG5cbi8qKiBSZXRyaWV2ZSBhbGwgdGhlIGFyZ3VtZW50IHR5cGVzIG9mIGEge0BsaW5rIFByb3BlcnR5fSBmdW5jdGlvbi4gKi9cbmV4cG9ydCB0eXBlIFByb3BlcnR5QXJnczxrZXkgZXh0ZW5kcyBQcm9wZXJ0eUtleXM+ID0gUGFyYW1ldGVyczwodHlwZW9mIFByb3BlcnR5KVtrZXldPjtcbiIsICJpbXBvcnQge0NvbXBvbmVudCwgQ29tcG9uZW50Q29uc3RydWN0b3J9IGZyb20gJy4vd29uZGVybGFuZC5qcyc7XG5pbXBvcnQge1Byb3BlcnR5LCBQcm9wZXJ0eUFyZ3MsIFByb3BlcnR5S2V5cywgQ29tcG9uZW50UHJvcGVydHksIFR5cGV9IGZyb20gJy4vcHJvcGVydHkuanMnO1xuXG4vKipcbiAqIERlY29yYXRvciBmb3IgSlMgY29tcG9uZW50IHByb3BlcnRpZXMuXG4gKlxuICogQHBhcmFtIGRhdGEgVGhlIHByb3BlcnR5IGRlc2NyaXB0aW9uIGFzIGFuIG9iamVjdCBsaXRlcmFsXG4gKiBAcmV0dXJucyBBIGRlY29yYXRvciBmdW5jdGlvbiBtb2RpZnlpbmcgdGhlIGBQcm9wZXJ0aWVzYCBzdGF0aWNcbiAqICAgICBhdHRyaWJ1dGVcbiAqL1xuZnVuY3Rpb24gcHJvcGVydHlEZWNvcmF0b3IoZGF0YTogQ29tcG9uZW50UHJvcGVydHkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldDogQ29tcG9uZW50LCBwcm9wZXJ0eUtleTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGN0b3IgPSB0YXJnZXQuY29uc3RydWN0b3IgYXMgQ29tcG9uZW50Q29uc3RydWN0b3I7XG4gICAgICAgIGN0b3IuUHJvcGVydGllcyA9IGN0b3IuaGFzT3duUHJvcGVydHkoJ1Byb3BlcnRpZXMnKSA/IGN0b3IuUHJvcGVydGllcyA6IHt9O1xuICAgICAgICBjdG9yLlByb3BlcnRpZXNbcHJvcGVydHlLZXldID0gZGF0YTtcbiAgICB9O1xufVxuXG4vKipcbiAqIERlY29yYXRvciBmb3IgbWFraW5nIGEgZ2V0dGVyIGVudW1lcmFibGUuXG4gKlxuICogVXNhZ2U6XG4gKlxuICogYGBgdHNcbiAqIGNsYXNzIE15Q2xhc3Mge1xuICogICAgIEBlbnVtZXJhYmxlKClcbiAqICAgICBnZXQgcHJvamVjdGlvbk1hdHJpeCgpOiBGbG9hdDMyQXJyYXkgeyAuLi4gfVxuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlbnVtZXJhYmxlKCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoXzogYW55LCBfXzogc3RyaW5nLCBkZXNjcmlwdG9yOiBQcm9wZXJ0eURlc2NyaXB0b3IpIHtcbiAgICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gdHJ1ZTtcbiAgICB9O1xufVxuXG4vKipcbiAqIERlY29yYXRvciBmb3IgbmF0aXZlIHByb3BlcnRpZXMuXG4gKlxuICogVXNhZ2U6XG4gKlxuICogYGBgdHNcbiAqIGNsYXNzIE15Q2xhc3Mge1xuICogICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gKiAgICAgZ2V0IHByb2plY3Rpb25NYXRyaXgoKTogRmxvYXQzMkFycmF5IHsgLi4uIH1cbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gbmF0aXZlUHJvcGVydHkoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChcbiAgICAgICAgdGFyZ2V0OiBDb21wb25lbnQsXG4gICAgICAgIHByb3BlcnR5S2V5OiBzdHJpbmcsXG4gICAgICAgIGRlc2NyaXB0b3I6IFByb3BlcnR5RGVzY3JpcHRvclxuICAgICkge1xuICAgICAgICBlbnVtZXJhYmxlKCkodGFyZ2V0LCBwcm9wZXJ0eUtleSwgZGVzY3JpcHRvcik7XG4gICAgICAgIHByb3BlcnR5RGVjb3JhdG9yKHt0eXBlOiBUeXBlLk5hdGl2ZX0pKHRhcmdldCwgcHJvcGVydHlLZXkpO1xuICAgIH07XG59XG5cbi8qKlxuICogUHJvcGVydHkgZGVjb3JhdG9ycyBuYW1lc3BhY2UuXG4gKlxuICogWW91IGNhbiB1c2UgdGhlIGRlY29yYXRvcnMgdG8gbWFyayBhIGNsYXNzIGF0dHJpYnV0ZSBhc1xuICogYSBXb25kZXJsYW5kIEVuZ2luZSBwcm9wZXJ0eS5cbiAqXG4gKiBVc2FnZTpcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHtNZXNofSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuICogaW1wb3J0IHtwcm9wZXJ0eX0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpL2RlY29yYXRvcnMuanMnO1xuICpcbiAqIGNsYXNzIE15Q29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAqICAgICBAcHJvcGVydHkuYm9vbCh0cnVlKVxuICogICAgIG15Qm9vbCE6IGJvb2xlYW47XG4gKlxuICogICAgIEBwcm9wZXJ0eS5pbnQoNDIpXG4gKiAgICAgbXlJbnQhOiBudW1iZXI7XG4gKlxuICogICAgIEBwcm9wZXJ0eS5zdHJpbmcoJ0hlbGxvIFdvcmxkIScpXG4gKiAgICAgbXlTdHJpbmchOiBzdHJpbmc7XG4gKlxuICogICAgIEBwcm9wZXJ0eS5tZXNoKClcbiAqICAgICBteU1lc2ghOiBNZXNoO1xuICogfVxuICogYGBgXG4gKlxuICogRm9yIEphdmFTY3JpcHQgdXNlcnMsIHBsZWFzZSBkZWNsYXJlIHRoZSBwcm9wZXJ0aWVzIHN0YXRpY2FsbHkuXG4gKi9cbmV4cG9ydCBjb25zdCBwcm9wZXJ0eSA9IHt9IGFzIHtcbiAgICBba2V5IGluIFByb3BlcnR5S2V5c106IChcbiAgICAgICAgLi4uYXJnczogUHJvcGVydHlBcmdzPGtleT5cbiAgICApID0+IFJldHVyblR5cGU8dHlwZW9mIHByb3BlcnR5RGVjb3JhdG9yPjtcbn07XG5cbmZvciAoY29uc3QgbmFtZSBpbiBQcm9wZXJ0eSkge1xuICAgIC8qIEFzc2lnbiBlYWNoIHByb3BlcnR5IGZ1bmN0b3IgdG8gYSBUeXBlU2NyaXB0IGRlY29yYXRvci5cbiAgICAgKiBUaGlzIGNvZGUgZXh0cmFjdHMgcGFyYW1ldGVycyBhbmQgcmV0dXJuIHR5cGUgdG8gcHJvdmlkZSBwcm9wZXJcbiAgICAgKiB0eXBpbmdzIHRvIHRoZSB1c2VyLiAqL1xuICAgIHByb3BlcnR5W25hbWUgYXMgUHJvcGVydHlLZXlzXSA9ICguLi5hcmdzOiBQcm9wZXJ0eUFyZ3M8UHJvcGVydHlLZXlzPikgPT4ge1xuICAgICAgICBjb25zdCBmdW5jdG9yID0gUHJvcGVydHlbbmFtZSBhcyBQcm9wZXJ0eUtleXNdIGFzIChcbiAgICAgICAgICAgIC4uLmFyZ3M6IHVua25vd25bXVxuICAgICAgICApID0+IENvbXBvbmVudFByb3BlcnR5O1xuICAgICAgICByZXR1cm4gcHJvcGVydHlEZWNvcmF0b3IoZnVuY3RvciguLi5hcmdzKSk7XG4gICAgfTtcbn1cbiIsICJpbXBvcnQge0ltYWdlTGlrZX0gZnJvbSAnLi4vdHlwZXMuanMnO1xuXG4vKipcbiAqIENoZWNrIGlmIGEgZ2l2ZW4gdmFsdWUgaXMgYSBuYXRpdmUgc3RyaW5nIG9yIGEgYFN0cmluZ2AgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBoYXMgdHlwZSBzdHJpbmcgbGl0ZXJhbCBvciBgU3RyaW5nYCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1N0cmluZyh2YWx1ZTogYW55KTogdmFsdWUgaXMgc3RyaW5nIHtcbiAgICBpZiAodmFsdWUgPT09ICcnKSByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gdmFsdWUgJiYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwgdmFsdWUuY29uc3RydWN0b3IgPT09IFN0cmluZyk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBnaXZlbiB2YWx1ZSBpcyBhIG5hdGl2ZSBudW1iZXIgb3IgYSBgTnVtYmVyYCBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGhhcyB0eXBlIG51bWJlciBsaXRlcmFsIG9yIGBOdW1iZXJgLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTnVtYmVyKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBudW1iZXIge1xuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgfHwgdmFsdWUuY29uc3RydWN0b3IgPT09IE51bWJlcjtcbn1cblxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIGEgZ2l2ZW4gdmFsdWUgaXMgYSB2aXN1YWwgbWVkaWEuXG4gKlxuICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVja1xuICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGFuIGltYWdlLCB2aWRlbywgb3IgY2FudmFzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNJbWFnZUxpa2UodmFsdWU6IGFueSk6IHZhbHVlIGlzIEltYWdlTGlrZSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgdmFsdWUgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50IHx8XG4gICAgICAgIHZhbHVlIGluc3RhbmNlb2YgSFRNTFZpZGVvRWxlbWVudCB8fFxuICAgICAgICB2YWx1ZSBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50XG4gICAgKTtcbn1cbiIsICIvKipcbiAqIExpc3RlbmVyIGNhbGxiYWNrIHR5cGUsIHVzZWQgaW4ge0BsaW5rIEVtaXR0ZXIuYWRkfS5cbiAqL1xuZXhwb3J0IHR5cGUgTGlzdGVuZXJDYWxsYmFjazxUIGV4dGVuZHMgdW5rbm93bltdID0gdm9pZFtdPiA9ICguLi5kYXRhOiBUKSA9PiB2b2lkO1xuXG4vKipcbiAqIFJlZ2lzdHJhdGlvbiBvcHRpb25zIGZvciBhIGxpc3RlbmVyIGluIGFuIHtAbGluayBFbWl0dGVyfS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBMaXN0ZW5lck9wdGlvbnMge1xuICAgIC8qKlxuICAgICAqIExpc3RlbmVyIGlkZW50aWZpZXIuIFRoaXMgaXMgdXNlZCB0byBmaW5kIGFuZCByZW1vdmUgdGhlIGxpc3RlbmVyXG4gICAgICogd2l0aG91dCBuZWVkaW5nIHRoZSBjYWxsYmFjayByZWZlcmVuY2UuXG4gICAgICpcbiAgICAgKiBUaGUgaWRlbnRpZmllciBjYW4gYmUgYW55IHR5cGUuIEhvd2V2ZXIsIHJlbWVtYmVyIHRoYXQgdGhlIGNvbXBhcmlzb24gd2lsbCBiZVxuICAgICAqIGJ5LXZhbHVlIGZvciBwcmltaXRpdmUgdHlwZXMgKHN0cmluZywgbnVtYmVyKSwgYnV0IGJ5IHJlZmVyZW5jZSBmb3Igb2JqZWN0cy5cbiAgICAgKlxuICAgICAqIEZvciBtb3JlIGluZm9ybWF0aW9uLCBwbGVhc2UgbG9vayBhdCB0aGUge0BsaW5rIEVtaXR0ZXIucmVtb3ZlfSBtZXRob2QuXG4gICAgICovXG4gICAgaWQ6IGFueSB8IHVuZGVmaW5lZDtcbiAgICAvKipcbiAgICAgKiBJZiBgdHJ1ZWAsIHRoZSBsaXN0ZW5lciBpcyBhdXRvbWF0aWNhbGx5IHJlbW92ZWQgYWZ0ZXIgaXQncyBpbnZva2VkLlxuICAgICAqIERlZmF1bHRzIHRvIGBmYWxzZWAuXG4gICAgICovXG4gICAgb25jZTogYm9vbGVhbjtcbn1cblxuLyoqIEludGVybmFsIGxpc3RlbmVyIHR5cGUuICovXG50eXBlIExpc3RlbmVyPFQgZXh0ZW5kcyB1bmtub3duW10+ID0gTGlzdGVuZXJPcHRpb25zICYge1xuICAgIGNhbGxiYWNrOiBMaXN0ZW5lckNhbGxiYWNrPFQ+O1xufTtcblxuLyoqIEludGVybmFsIHR5cGUgZm9yIHRyYW5zYWN0aW9uLiAqL1xuZW51bSBUcmFuc2FjdGlvblR5cGUge1xuICAgIEFkZGl0aW9uID0gMSxcbiAgICBSZW1vdmFsID0gMixcbn1cblxuLyoqXG4gKiBFdmVudCBlbWl0dGVyLlxuICpcbiAqIFRoaXMgY2xhc3MgYWxsb3dzIHRvIHJlZ2lzdGVyIGxpc3RlbmVycyB0aGF0IHdpbGwgZ2V0IG5vdGlmaWVkIGJ5IHRoZSBlbWl0dGVyLlxuICpcbiAqIFVzYWdlIGV4YW1wbGU6XG4gKlxuICogYGBganNcbiAqIC8vIGBvblByZVJlbmRlcmAgaXMgYW4gYEVtaXR0ZXJgIGluc3RhbmNlLlxuICogc2NlbmUub25QcmVSZW5kZXIuYWRkKCgpID0+IGNvbnNvbGUubG9nKCdiZWZvcmUgcmVuZGVyaW5nJykpO1xuICogLy8gYG9uUG9zdFJlbmRlcmAgaXMgYW4gYEVtaXR0ZXJgIGluc3RhbmNlLlxuICogc2NlbmUub25Qb3N0UmVuZGVyLmFkZCgoKSA9PiBjb25zb2xlLmxvZygnYWZ0ZXIgcmVuZGVyaW5nJykpO1xuICogYGBgXG4gKlxuICogWW91IGNhbiBjcmVhdGUgeW91ciBvd24gZW1pdHRlcnM6XG4gKlxuICogYGBganNcbiAqIGltcG9ydCB7RW1pdHRlcn0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbiAqXG4gKiBjb25zdCBlbWl0dGVyID0gbmV3IEVtaXR0ZXIoKTtcbiAqIGBgYFxuICpcbiAqIFlvdSBjYW4gbm90aWZ5IGxpc3RlbmVycyBpbiB0byB5b3VyIGVtaXR0ZXIgdXNpbmcge0BsaW5rIEVtaXR0ZXIubm90aWZ5fTpcbiAqXG4gKiBgYGBqc1xuICogLy8gTm90aWZpZXMgYWxsIHRoZSBsaXN0ZW5lcnMuXG4gKiBlbWl0dGVyLm5vdGlmeSgpO1xuICogLy8gTm90aWZpZXMgYWxsIHRoZSBsaXN0ZW5lcnMgd2l0aCBzb21lIGRhdGEuXG4gKiBlbWl0dGVyLm5vdGlmeSh7IG15SW50OiA0MiwgbXlTdHI6ICdIZWxsbyBXb3JsZCEnIH0pO1xuICogYGBgXG4gKlxuICogQGNhdGVnb3J5IGV2ZW50XG4gKi9cbmV4cG9ydCBjbGFzcyBFbWl0dGVyPFQgZXh0ZW5kcyB1bmtub3duW10gPSB2b2lkW10+IHtcbiAgICAvKipcbiAgICAgKiBMaXN0IG9mIGxpc3RlbmVycyB0byB0cmlnZ2VyIHdoZW4gYG5vdGlmeWAgaXMgY2FsbGVkLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHByb3RlY3RlZCByZWFkb25seSBfbGlzdGVuZXJzOiBMaXN0ZW5lcjxUPltdID0gW107XG5cbiAgICAvKipcbiAgICAgKiBgdHJ1ZWAgaWYgdGhlIGVtaXR0ZXIgaXMgY3VycmVudGx5IG5vdGlmeWluZyBsaXN0ZW5lcnMuIFRoaXNcbiAgICAgKiBpcyB1c2VkIHRvIGRlZmVyIGFkZGl0aW9uIGFuZCByZW1vdmFsLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHByaXZhdGUgX25vdGlmeWluZyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogUGVuZGluZyBhZGRpdGlvbnMgLyByZW1vdmFscywgcGVyZm9ybWVkIGR1cmluZyBhIG5vdGlmaWNhdGlvbi5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBwcml2YXRlIHJlYWRvbmx5IF90cmFuc2FjdGlvbnM6IHtcbiAgICAgICAgdHlwZTogVHJhbnNhY3Rpb25UeXBlO1xuICAgICAgICBkYXRhOiBMaXN0ZW5lcjxUPiB8IExpc3RlbmVyQ2FsbGJhY2s8VD47XG4gICAgfVtdID0gW107XG5cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlciBhIG5ldyBsaXN0ZW5lciB0byBiZSB0cmlnZ2VyZWQgb24ge0BsaW5rIEVtaXR0ZXIubm90aWZ5fS5cbiAgICAgKlxuICAgICAqIEJhc2ljIHVzYWdlOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBlbWl0dGVyLmFkZCgoZGF0YSkgPT4ge1xuICAgICAqICAgICBjb25zb2xlLmxvZygnZXZlbnQgcmVjZWl2ZWQhJyk7XG4gICAgICogICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQXV0b21hdGljYWxseSByZW1vdmUgdGhlIGxpc3RlbmVyIHdoZW4gYW4gZXZlbnQgaXMgcmVjZWl2ZWQ6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGVtaXR0ZXIuYWRkKChkYXRhKSA9PiB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKCdldmVudCByZWNlaXZlZCEnKTtcbiAgICAgKiAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICogfSwge29uY2U6IHRydWV9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBsaXN0ZW5lciBUaGUgY2FsbGJhY2sgdG8gcmVnaXN0ZXIuXG4gICAgICogQHBhcmFtIG9wdHMgVGhlIGxpc3RlbmVyIG9wdGlvbnMuIEZvciBtb3JlIGluZm9ybWF0aW9uLCBwbGVhc2UgaGF2ZSBhIGxvb2tcbiAgICAgKiAgICAgYXQgdGhlIHtAbGluayBMaXN0ZW5lck9wdGlvbnN9IGludGVyZmFjZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKVxuICAgICAqL1xuICAgIGFkZChsaXN0ZW5lcjogTGlzdGVuZXJDYWxsYmFjazxUPiwgb3B0czogUGFydGlhbDxMaXN0ZW5lck9wdGlvbnM+ID0ge30pOiB0aGlzIHtcbiAgICAgICAgY29uc3Qge29uY2UgPSBmYWxzZSwgaWQgPSB1bmRlZmluZWR9ID0gb3B0cztcbiAgICAgICAgY29uc3QgZGF0YSA9IHtpZCwgb25jZSwgY2FsbGJhY2s6IGxpc3RlbmVyfTtcbiAgICAgICAgaWYgKHRoaXMuX25vdGlmeWluZykge1xuICAgICAgICAgICAgdGhpcy5fdHJhbnNhY3Rpb25zLnB1c2goe3R5cGU6IFRyYW5zYWN0aW9uVHlwZS5BZGRpdGlvbiwgZGF0YX0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbGlzdGVuZXJzLnB1c2goZGF0YSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8ge0BsaW5rIEVtaXR0ZXIuYWRkfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBsaXN0ZW5lcnMgVGhlIGNhbGxiYWNrKHMpIHRvIHJlZ2lzdGVyLlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIEVtaXR0ZXIuYWRkfSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIHB1c2goLi4ubGlzdGVuZXJzOiBMaXN0ZW5lckNhbGxiYWNrPFQ+W10pOiB0aGlzIHtcbiAgICAgICAgZm9yIChjb25zdCBjYiBvZiBsaXN0ZW5lcnMpIHRoaXMuYWRkKGNiKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXIgYSBuZXcgbGlzdGVuZXIgdG8gYmUgdHJpZ2dlcmVkIG9uIHtAbGluayBFbWl0dGVyLm5vdGlmeX0uXG4gICAgICpcbiAgICAgKiBPbmNlIG5vdGlmaWVkLCB0aGUgbGlzdGVuZXIgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IHJlbW92ZWQuXG4gICAgICpcbiAgICAgKiBUaGUgbWV0aG9kIGlzIGVxdWl2YWxlbnQgdG8gY2FsbGluZyB7QGxpbmsgRW1pdHRlci5hZGR9IHdpdGg6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGVtaXR0ZXIuYWRkKGxpc3RlbmVyLCB7b25jZTogdHJ1ZX0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIGxpc3RlbmVyIFRoZSBjYWxsYmFjayB0byByZWdpc3Rlci5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICBvbmNlKGxpc3RlbmVyOiBMaXN0ZW5lckNhbGxiYWNrPFQ+KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFkZChsaXN0ZW5lciwge29uY2U6IHRydWV9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYSByZWdpc3RlcmVkIGxpc3RlbmVyLlxuICAgICAqXG4gICAgICogVXNhZ2Ugd2l0aCBhIGNhbGxiYWNrOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBsaXN0ZW5lciA9IChkYXRhKSA9PiBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgKiBlbWl0dGVyLmFkZChsaXN0ZW5lcik7XG4gICAgICpcbiAgICAgKiAvLyBSZW1vdmUgdXNpbmcgdGhlIGNhbGxiYWNrIHJlZmVyZW5jZTpcbiAgICAgKiBlbWl0dGVyLnJlbW92ZShsaXN0ZW5lcik7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBVc2FnZSB3aXRoIGFuIGlkOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBlbWl0dGVyLmFkZCgoZGF0YSkgPT4gY29uc29sZS5sb2coZGF0YSksIHtpZDogJ215LWNhbGxiYWNrJ30pO1xuICAgICAqXG4gICAgICogLy8gUmVtb3ZlIHVzaW5nIHRoZSBpZDpcbiAgICAgKiBlbWl0dGVyLnJlbW92ZSgnbXktY2FsbGJhY2snKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFVzaW5nIGlkZW50aWZpZXJzLCB5b3Ugd2lsbCBuZWVkIHRvIGVuc3VyZSB5b3VyIHZhbHVlIGlzIHVuaXF1ZSB0byBhdm9pZFxuICAgICAqIHJlbW92aW5nIGxpc3RlbmVycyBmcm9tIG90aGVyIGxpYnJhcmllcywgZS5nLiw6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGVtaXR0ZXIuYWRkKChkYXRhKSA9PiBjb25zb2xlLmxvZyhkYXRhKSwge2lkOiAnbm9uLXVuaXF1ZSd9KTtcbiAgICAgKiAvLyBUaGlzIHNlY29uZCBsaXN0ZW5lciBjb3VsZCBiZSBhZGRlZCBieSBhIHRoaXJkLXBhcnR5IGxpYnJhcnkuXG4gICAgICogZW1pdHRlci5hZGQoKGRhdGEpID0+IGNvbnNvbGUubG9nKCdIZWxsbyBGcm9tIExpYnJhcnkhJyksIHtpZDogJ25vbi11bmlxdWUnfSk7XG4gICAgICpcbiAgICAgKiAvLyBIbyBTbmFwISBUaGlzIGFsc28gcmVtb3ZlZCB0aGUgbGlicmFyeSBsaXN0ZW5lciFcbiAgICAgKiBlbWl0dGVyLnJlbW92ZSgnbm9uLXVuaXF1ZScpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogVGhlIGlkZW50aWZpZXIgY2FuIGJlIGFueSB0eXBlLiBIb3dldmVyLCByZW1lbWJlciB0aGF0IHRoZSBjb21wYXJpc29uIHdpbGwgYmVcbiAgICAgKiBieS12YWx1ZSBmb3IgcHJpbWl0aXZlIHR5cGVzIChzdHJpbmcsIG51bWJlciksIGJ1dCBieSByZWZlcmVuY2UgZm9yIG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBFeGFtcGxlOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBlbWl0dGVyLmFkZCgoKSA9PiBjb25zb2xlLmxvZygnSGVsbG8nKSwge2lkOiB7dmFsdWU6IDQyfX0pO1xuICAgICAqIGVtaXR0ZXIuYWRkKCgpID0+IGNvbnNvbGUubG9nKCdXb3JsZCEnKSwge2lkOiB7dmFsdWU6IDQyfX0pO1xuICAgICAqIGVtaXR0ZXIucmVtb3ZlKHt2YWx1ZTogNDJ9KTsgLy8gTm9uZSBvZiB0aGUgYWJvdmUgbGlzdGVuZXJzIG1hdGNoIVxuICAgICAqIGVtaXR0ZXIubm90aWZ5KCk7IC8vIFByaW50cyAnSGVsbG8nIGFuZCAnV29ybGQhJy5cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEhlcmUsIGJvdGggZW1pdHRlcnMgaGF2ZSBpZCBge3ZhbHVlOiA0Mn1gLCBidXQgdGhlIGNvbXBhcmlzb24gaXMgbWFkZSBieSByZWZlcmVuY2UuIFRodXMsXG4gICAgICogdGhlIGByZW1vdmUoKWAgY2FsbCBoYXMgbm8gZWZmZWN0LiBXZSBjYW4gbWFrZSBpdCB3b3JrIGJ5IGRvaW5nOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBpZCA9IHt2YWx1ZTogNDJ9O1xuICAgICAqIGVtaXR0ZXIuYWRkKCgpID0+IGNvbnNvbGUubG9nKCdIZWxsbycpLCB7aWR9KTtcbiAgICAgKiBlbWl0dGVyLmFkZCgoKSA9PiBjb25zb2xlLmxvZygnV29ybGQhJyksIHtpZH0pO1xuICAgICAqIGVtaXR0ZXIucmVtb3ZlKGlkKTsgLy8gU2FtZSByZWZlcmVuY2UsIGl0IHdvcmtzIVxuICAgICAqIGVtaXR0ZXIubm90aWZ5KCk7IC8vIERvZXNuJ3QgcHJpbnQuXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbGlzdGVuZXIgVGhlIHJlZ2lzdGVyZWQgY2FsbGJhY2sgb3IgYSB2YWx1ZSByZXByZXNlbnRpbmcgdGhlIGBpZGAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZylcbiAgICAgKi9cbiAgICByZW1vdmUobGlzdGVuZXI6IExpc3RlbmVyQ2FsbGJhY2s8VD4gfCBhbnkpOiB0aGlzIHtcbiAgICAgICAgaWYgKHRoaXMuX25vdGlmeWluZykge1xuICAgICAgICAgICAgdGhpcy5fdHJhbnNhY3Rpb25zLnB1c2goe3R5cGU6IFRyYW5zYWN0aW9uVHlwZS5SZW1vdmFsLCBkYXRhOiBsaXN0ZW5lcn0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBsaXN0ZW5lcnNbaV07XG4gICAgICAgICAgICBpZiAodGFyZ2V0LmNhbGxiYWNrID09PSBsaXN0ZW5lciB8fCB0YXJnZXQuaWQgPT09IGxpc3RlbmVyKSB7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpLS0sIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrIHdoZXRoZXIgdGhlIGxpc3RlbmVyIGlzIHJlZ2lzdGVyZWQuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIG1ldGhvZCBwZXJmb3JtcyBhIGxpbmVhciBzZWFyY2guXG4gICAgICpcbiAgICAgKiAqIEBub3RlIERvZXNuJ3QgYWNjb3VudCBmb3IgcGVuZGluZyBsaXN0ZW5lcnMsIGkuZS4sXG4gICAgICogbGlzdGVuZXJzIGFkZGVkIC8gcmVtb3ZlZCBkdXJpbmcgYSBub3RpZmljYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbGlzdGVuZXIgVGhlIHJlZ2lzdGVyZWQgY2FsbGJhY2sgb3IgYSB2YWx1ZSByZXByZXNlbnRpbmcgdGhlIGBpZGAuXG4gICAgICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBoYW5kbGUgaXMgZm91bmQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIGhhcyhsaXN0ZW5lcjogTGlzdGVuZXJDYWxsYmFjazxUPiB8IGFueSk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBsaXN0ZW5lcnNbaV07XG4gICAgICAgICAgICBpZiAodGFyZ2V0LmNhbGxiYWNrID09PSBsaXN0ZW5lciB8fCB0YXJnZXQuaWQgPT09IGxpc3RlbmVyKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTm90aWZ5IGxpc3RlbmVycyB3aXRoIHRoZSBnaXZlbiBkYXRhIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgbWV0aG9kIGVuc3VyZXMgYWxsIGxpc3RlbmVycyBhcmUgY2FsbGVkIGV2ZW4gaWZcbiAgICAgKiBhbiBleGNlcHRpb24gaXMgdGhyb3duLiBGb3IgKHBvc3NpYmx5KSBmYXN0ZXIgbm90aWZpY2F0aW9uLFxuICAgICAqIHBsZWFzZSB1c2Uge0BsaW5rIEVtaXR0ZXIubm90aWZ5VW5zYWZlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRvIHBhc3MgdG8gbGlzdGVuZXIgd2hlbiBpbnZva2VkLlxuICAgICAqL1xuICAgIG5vdGlmeSguLi5kYXRhOiBUKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycztcblxuICAgICAgICB0aGlzLl9ub3RpZnlpbmcgPSB0cnVlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgbGlzdGVuZXIgPSBsaXN0ZW5lcnNbaV07XG4gICAgICAgICAgICBpZiAobGlzdGVuZXIub25jZSkgbGlzdGVuZXJzLnNwbGljZShpLS0sIDEpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lci5jYWxsYmFjayguLi5kYXRhKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX25vdGlmeWluZyA9IGZhbHNlO1xuXG4gICAgICAgIC8qIFByb2Nlc3MgZGVmZXJyZWQgYWRkaXRpb25zICYgcmVtb3ZhbHMgKi9cbiAgICAgICAgdGhpcy5fZmx1c2hUcmFuc2FjdGlvbnMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBOb3RpZnkgbGlzdGVuZXJzIHdpdGggdGhlIGdpdmVuIGRhdGEgb2JqZWN0LlxuICAgICAqXG4gICAgICogQG5vdGUgQmVjYXVzZSB0aGlzIG1ldGhvZCBkb2Vzbid0IGNhdGNoIGV4Y2VwdGlvbnMsIHNvbWUgbGlzdGVuZXJzXG4gICAgICogd2lsbCBiZSBza2lwcGVkIG9uIGEgdGhyb3cuIFBsZWFzZSB1c2Uge0BsaW5rIEVtaXR0ZXIubm90aWZ5fSBmb3Igc2FmZVxuICAgICAqIG5vdGlmaWNhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRvIHBhc3MgdG8gbGlzdGVuZXIgd2hlbiBpbnZva2VkLlxuICAgICAqL1xuICAgIG5vdGlmeVVuc2FmZSguLi5kYXRhOiBUKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycztcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgbGlzdGVuZXIgPSBsaXN0ZW5lcnNbaV07XG4gICAgICAgICAgICBpZiAobGlzdGVuZXIub25jZSkgbGlzdGVuZXJzLnNwbGljZShpLS0sIDEpO1xuICAgICAgICAgICAgbGlzdGVuZXIuY2FsbGJhY2soLi4uZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBQcm9jZXNzIGRlZmVycmVkIGFkZGl0aW9ucyAmIHJlbW92YWxzICovXG4gICAgICAgIHRoaXMuX2ZsdXNoVHJhbnNhY3Rpb25zKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIGEgcHJvbWlzZSB0aGF0IHdpbGwgcmVzb2x2ZSBvbiB0aGUgbmV4dCBldmVudC5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoZSBwcm9taXNlIG1pZ2h0IG5ldmVyIHJlc29sdmUgaWYgbm8gZXZlbnQgaXMgc2VudC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGRhdGEgcGFzc2VkIHRvXG4gICAgICogICAgIHtAbGluayBFbWl0dGVyLm5vdGlmeX0uXG4gICAgICovXG4gICAgcHJvbWlzZSgpOiBQcm9taXNlPFQ+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMsIF8pID0+IHtcbiAgICAgICAgICAgIHRoaXMub25jZSgoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzKGFyZ3MpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcyhhcmdzWzBdIGFzIFQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBOdW1iZXIgb2YgbGlzdGVuZXJzLlxuICAgICAqXG4gICAgICogQG5vdGUgRG9lc24ndCBhY2NvdW50IGZvciBwZW5kaW5nIGxpc3RlbmVycywgaS5lLixcbiAgICAgKiBsaXN0ZW5lcnMgYWRkZWQgLyByZW1vdmVkIGR1cmluZyBhIG5vdGlmaWNhdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgbGlzdGVuZXJDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xpc3RlbmVycy5sZW5ndGg7XG4gICAgfVxuXG4gICAgLyoqIGB0cnVlYCBpZiBpdCBoYXMgbm8gbGlzdGVuZXJzLCBgZmFsc2VgIG90aGVyd2lzZS4gKi9cbiAgICBnZXQgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXJDb3VudCA9PT0gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGbHVzaCBhbGwgcGVuZGluZyB0cmFuc2FjdGlvbnMuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcHJpdmF0ZSBfZmx1c2hUcmFuc2FjdGlvbnMoKSB7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycztcbiAgICAgICAgZm9yIChjb25zdCB0cmFuc2FjdGlvbiBvZiB0aGlzLl90cmFuc2FjdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICh0cmFuc2FjdGlvbi50eXBlID09PSBUcmFuc2FjdGlvblR5cGUuQWRkaXRpb24pIHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcnMucHVzaCh0cmFuc2FjdGlvbi5kYXRhIGFzIExpc3RlbmVyPFQ+KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUodHJhbnNhY3Rpb24uZGF0YSBhcyBMaXN0ZW5lckNhbGxiYWNrPFQ+KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl90cmFuc2FjdGlvbnMubGVuZ3RoID0gMDtcbiAgICB9XG59XG5cbi8qKlxuICogUmVnaXN0cmF0aW9uIG9wdGlvbnMgZm9yIGEgbGlzdGVuZXIgaW4gYW4ge0BsaW5rIFJldGFpbkVtaXR0ZXJ9LlxuICpcbiAqIFRob3NlIG9wdGlvbnMgZXh0ZW5kIHtAbGluayBMaXN0ZW5lck9wdGlvbnN9LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFJldGFpbkxpc3RlbmVyT3B0aW9ucyBleHRlbmRzIExpc3RlbmVyT3B0aW9ucyB7XG4gICAgLyoqXG4gICAgICogSWYgYHRydWVgLCBkaXJlY3RseSByZXNvbHZlcyBpZiB0aGUgZW1pdHRlciByZXRhaW5zIGEgdmFsdWUuIElmIGBmYWxzZWAsXG4gICAgICogdGhlIGxpc3RlbmVyIGlzbid0IGludm9rZWQgdW50aWwgdGhlIG5leHQge0BsaW5rIEVtaXR0ZXIubm90aWZ5fS5cbiAgICAgKlxuICAgICAqIERlZmF1bHRzIHRvIGB0cnVlYC5cbiAgICAgKi9cbiAgICBpbW1lZGlhdGU6IGJvb2xlYW47XG59XG5cbi8qIER1bW15IHZhbHVlIHVzZWQgd2l0aCBSZXRhaW5FbWl0dGVyLiAqL1xuY29uc3QgUmV0YWluRW1pdHRlclVuZGVmaW5lZDogUmVjb3JkPGFueSwgdW5rbm93bj4gPSB7fTtcblxuLyoqXG4gKiBFdmVudCBlbWl0dGVyIHRoYXQgcmV0YWlucyBldmVudCBkYXRhIHdoZW4gbm90aWZpZWQuXG4gKlxuICogQWZ0ZXIgYSBub3RpZmljYXRpb24gaGFwcGVucywgc3Vic2VxdWVudCBjYWxscyB0byB7QGxpbmsgUmV0YWluRW1pdHRlci5hZGR9IHdpbGwgZ2V0XG4gKiBhdXRvbWF0aWNhbGx5IG5vdGlmaWVkLlxuICpcbiAqIFlvdSBjYW4gdXNlIGFub3RoZXIgZW1pdHRlciBpbiBvcmRlciB0byBjYW5jZWwgdGhlIGxhc3QgcmV0YWluZWQgZXZlbnQ6XG4gKlxuICogYGBganNcbiAqIGltcG9ydCB7RW1pdHRlciwgUmV0YWluZWRFbWl0dGVyfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuICpcbiAqIGNvbnN0IG9uU3RhcnQgPSBuZXcgUmV0YWluZWRFbWl0dGVyKCk7XG4gKlxuICogb25TdGFydC5ub3RpZnkoNDIpO1xuICogb25TdGFydC5hZGQoKGRhdGEpID0+IGNvbnNvbGUubG9nKGRhdGEpKSAvLyBQcmludHMgJzQyJy5cbiAqIGBgYFxuICpcbiAqIFlvdSBjYW4gcmVzZXQgdGhlIHN0YXRlIG9mIHRoZSBlbWl0dGVyLCBpLmUuLCBtYWtpbmcgaXQgZm9yZ2V0IGFib3V0IHRoZVxuICogbGFzdCBldmVudCB1c2luZzpcbiAqXG4gKiBgYGBqc1xuICogaW1wb3J0IHtFbWl0dGVyLCBSZXRhaW5lZEVtaXR0ZXJ9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4gKlxuICogY29uc3Qgb25TdGFydCA9IG5ldyBSZXRhaW5lZEVtaXR0ZXIoKTtcbiAqIG9uU3RhcnQubm90aWZ5KDQyKTtcbiAqIG9uU3RhcnQuYWRkKChkYXRhKSA9PiBjb25zb2xlLmxvZyhkYXRhKSkgLy8gUHJpbnRzICc0MicuXG4gKlxuICogLy8gUmVzZXQgdGhlIHN0YXRlIG9mIHRoZSBlbWl0dGVyLlxuICogb25TdGFydC5yZXNldCgpO1xuICogb25TdGFydC5hZGQoKGRhdGEpID0+IGNvbnNvbGUubG9nKGRhdGEpKSAvLyBEb2Vzbid0IHByaW50IGFueXRoaW5nLlxuICogYGBgXG4gKlxuICogRm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgZW1pdHRlcnMsIHBsZWFzZSBoYXZlIGEgbG9vayBhdCB0aGUgYmFzZSB7QGxpbmsgRW1pdHRlcn0gY2xhc3MuXG4gKlxuICogQGNhdGVnb3J5IGV2ZW50XG4gKi9cbmV4cG9ydCBjbGFzcyBSZXRhaW5FbWl0dGVyPFQgZXh0ZW5kcyB1bmtub3duW10gPSB2b2lkW10+IGV4dGVuZHMgRW1pdHRlcjxUPiB7XG4gICAgLyoqIFByZS1yZXNvbHZlZCBkYXRhLiBAaGlkZGVuICovXG4gICAgcHJvdGVjdGVkIF9ldmVudDogVCB8IHR5cGVvZiBSZXRhaW5FbWl0dGVyVW5kZWZpbmVkID0gUmV0YWluRW1pdHRlclVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEVtaXR0ZXIgdGFyZ2V0IHVzZWQgdG8gcmVzZXQgdGhlIHN0YXRlIG9mIHRoaXMgZW1pdHRlci5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgX3Jlc2V0OiBFbWl0dGVyPGFueT4gfCB1bmRlZmluZWQ7XG5cbiAgICAvKiogQG92ZXJyaWRlICovXG4gICAgYWRkKGxpc3RlbmVyOiBMaXN0ZW5lckNhbGxiYWNrPFQ+LCBvcHRzPzogUGFydGlhbDxSZXRhaW5MaXN0ZW5lck9wdGlvbnM+KTogdGhpcyB7XG4gICAgICAgIGNvbnN0IGltbWVkaWF0ZSA9IG9wdHM/LmltbWVkaWF0ZSA/PyB0cnVlO1xuICAgICAgICBpZiAodGhpcy5fZXZlbnQgIT09IFJldGFpbkVtaXR0ZXJVbmRlZmluZWQgJiYgaW1tZWRpYXRlKSB7XG4gICAgICAgICAgICBsaXN0ZW5lciguLi4odGhpcy5fZXZlbnQgYXMgVCkpO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyLmFkZChsaXN0ZW5lciwgb3B0cyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqXG4gICAgICogQHBhcmFtIGxpc3RlbmVyIFRoZSBjYWxsYmFjayB0byByZWdpc3Rlci5cbiAgICAgKiBAcGFyYW0gaW1tZWRpYXRlIElmIGB0cnVlYCwgZGlyZWN0bHkgcmVzb2x2ZXMgaWYgdGhlIGVtaXR0ZXIgcmV0YWlucyBhIHZhbHVlLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIG9uY2UobGlzdGVuZXI6IExpc3RlbmVyQ2FsbGJhY2s8VD4sIGltbWVkaWF0ZT86IGJvb2xlYW4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkKGxpc3RlbmVyLCB7b25jZTogdHJ1ZSwgaW1tZWRpYXRlfSk7XG4gICAgfVxuXG4gICAgLyoqIEBvdmVycmlkZSAqL1xuICAgIG5vdGlmeSguLi5kYXRhOiBUKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX2V2ZW50ID0gZGF0YTtcbiAgICAgICAgc3VwZXIubm90aWZ5KC4uLmRhdGEpO1xuICAgIH1cblxuICAgIC8qKiBAb3ZlcnJpZGUgKi9cbiAgICBub3RpZnlVbnNhZmUoLi4uZGF0YTogVCk6IHZvaWQge1xuICAgICAgICB0aGlzLl9ldmVudCA9IGRhdGE7XG4gICAgICAgIHN1cGVyLm5vdGlmeVVuc2FmZSguLi5kYXRhKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNldCB0aGUgc3RhdGUgb2YgdGhlIGVtaXR0ZXIuXG4gICAgICpcbiAgICAgKiBGdXJ0aGVyIGNhbGwgdG8ge0BsaW5rIEVtaXR0ZXIuYWRkfSB3aWxsIG5vdCBhdXRvbWF0aWNhbGx5IHJlc29sdmUsXG4gICAgICogdW50aWwgYSBuZXcgY2FsbCB0byB7QGxpbmsgRW1pdHRlci5ub3RpZnl9IGlzIHBlcmZvcm1lZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKVxuICAgICAqL1xuICAgIHJlc2V0KCk6IHRoaXMge1xuICAgICAgICB0aGlzLl9ldmVudCA9IFJldGFpbkVtaXR0ZXJVbmRlZmluZWQ7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKiBSZXR1cm5zIHRoZSByZXRhaW5lZCBkYXRhLCBvciBgdW5kZWZpbmVkYCBpZiBubyBkYXRhIHdhcyByZXRhaW5lZC4gKi9cbiAgICBnZXQgZGF0YSgpOiBUIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNEYXRhUmV0YWluZWQgPyB0aGlzLl9ldmVudCA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvKiogYHRydWVgIGlmIGRhdGEgaXMgcmV0YWluZWQgZnJvbSB0aGUgbGFzdCBldmVudCwgYGZhbHNlYCBvdGhlcndpc2UuICovXG4gICAgZ2V0IGlzRGF0YVJldGFpbmVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fZXZlbnQgIT09IFJldGFpbkVtaXR0ZXJVbmRlZmluZWQ7XG4gICAgfVxufVxuIiwgImltcG9ydCB7V29uZGVybGFuZEVuZ2luZX0gZnJvbSAnLi4vZW5naW5lLmpzJztcbmltcG9ydCB7UHJlZmFifSBmcm9tICcuLi9wcmVmYWIuanMnO1xuaW1wb3J0IHtTY2VuZX0gZnJvbSAnLi4vc2NlbmUuanMnO1xuaW1wb3J0IHtGaXJzdENvbnN0cnVjdG9yUGFyYW19IGZyb20gJy4uL3R5cGVzLmpzJztcblxuLyoqIEludGVyZmFjZSBmb3IgYSByZXNvdXJjZSBjbGFzcyAqL1xudHlwZSBSZXNvdXJjZUNvbnN0cnVjdG9yPFQgZXh0ZW5kcyBTY2VuZVJlc291cmNlIHwgUmVzb3VyY2U+ID0ge1xuICAgIG5ldyAoaG9zdDogRmlyc3RDb25zdHJ1Y3RvclBhcmFtPFQ+LCBpbmRleDogbnVtYmVyKTogVDtcbn07XG5cbi8qKlxuICogQ3JlYXRlIGEgcHJveHkgdGhyb3dpbmcgZGVzdHJveWVkIGVycm9ycyB1cG9uIGFjY2Vzcy5cbiAqXG4gKiBAcGFyYW0gdHlwZSBUaGUgdHlwZSB0byBkaXNwbGF5IHVwb24gZXJyb3JcbiAqIEByZXR1cm5zIFRoZSBwcm94eSBpbnN0YW5jZVxuICovXG5mdW5jdGlvbiBjcmVhdGVEZXN0cm95ZWRQcm94eTxUIGV4dGVuZHMgU2NlbmVSZXNvdXJjZSB8IFJlc291cmNlPihcbiAgICBob3N0OiBGaXJzdENvbnN0cnVjdG9yUGFyYW08VD4sXG4gICAgdHlwZTogUmVzb3VyY2VDb25zdHJ1Y3RvcjxUPlxuKSB7XG4gICAgcmV0dXJuIG5ldyBQcm94eShcbiAgICAgICAge30sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGdldChfLCBwYXJhbTogc3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtID09PSAnaXNEZXN0cm95ZWQnKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIGBDYW5ub3QgcmVhZCAnJHtwYXJhbX0nIG9mIGRlc3Ryb3llZCAnJHt0eXBlLm5hbWV9JyByZXNvdXJjZSBmcm9tICR7aG9zdH1gXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQoXywgcGFyYW06IHN0cmluZykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgYENhbm5vdCB3cml0ZSAnJHtwYXJhbX0nIG9mIGRlc3Ryb3llZCAnJHt0eXBlLm5hbWV9JyByZXNvdXJjZSBmcm9tICR7aG9zdH1gXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICApO1xufVxuXG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGVuZ2luZSByZXNvdXJjZXMsIHN1Y2ggYXM6XG4gKiAtIHtAbGluayBUZXh0dXJlfVxuICogLSB7QGxpbmsgTWVzaH1cbiAqIC0ge0BsaW5rIE1hdGVyaWFsfVxuICpcbiAqIEBzaW5jZSAxLjIuMFxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgUmVzb3VyY2Uge1xuICAgIC8qKiBSZWxhdGl2ZSBpbmRleCBpbiB0aGUgaG9zdC4gQGhpZGRlbiAqL1xuICAgIHJlYWRvbmx5IF9pbmRleDogbnVtYmVyID0gLTE7XG4gICAgLyoqIEZvciBjb21wYXRpYmlsaXR5IHdpdGggU2NlbmVSZXNvdXJjZS4gQGhpZGRlbiAqL1xuICAgIHJlYWRvbmx5IF9pZDogbnVtYmVyID0gLTE7XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBwcml2YXRlIHJlYWRvbmx5IF9lbmdpbmU6IFdvbmRlcmxhbmRFbmdpbmU7XG5cbiAgICBjb25zdHJ1Y3RvcihlbmdpbmU6IFdvbmRlcmxhbmRFbmdpbmUsIGluZGV4OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lID0gZW5naW5lO1xuICAgICAgICB0aGlzLl9pbmRleCA9IGluZGV4O1xuICAgICAgICB0aGlzLl9pZCA9IGluZGV4O1xuICAgIH1cblxuICAgIC8qKiBIb3N0aW5nIGVuZ2luZSBpbnN0YW5jZS4gKi9cbiAgICBnZXQgZW5naW5lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5naW5lO1xuICAgIH1cblxuICAgIC8qKiBJbmRleCBvZiB0aGlzIHJlc291cmNlIGluIHRoZSB7QGxpbmsgU2NlbmV9J3MgbWFuYWdlci4gKi9cbiAgICBnZXQgaW5kZXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbmRleDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgZXF1YWxpdHkgYnkgY29tcGFyaW5nIGlkcyBhbmQgKipub3QqKiB0aGUgSmF2YVNjcmlwdCByZWZlcmVuY2UuXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgSmF2YVNjcmlwdCByZWZlcmVuY2UgY29tcGFyaXNvbiBpbnN0ZWFkOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBtZXNoQSA9IGVuZ2luZS5tZXNoZXMuY3JlYXRlKHt2ZXJ0ZXhDb3VudDogMX0pO1xuICAgICAqIGNvbnN0IG1lc2hCID0gZW5naW5lLm1lc2hlcy5jcmVhdGUoe3ZlcnRleENvdW50OiAxfSk7XG4gICAgICogY29uc3QgbWVzaEMgPSBtZXNoQjtcbiAgICAgKiBjb25zb2xlLmxvZyhtZXNoQSA9PT0gbWVzaEIpOyAvLyBmYWxzZVxuICAgICAqIGNvbnNvbGUubG9nKG1lc2hBID09PSBtZXNoQSk7IC8vIHRydWVcbiAgICAgKiBjb25zb2xlLmxvZyhtZXNoQiA9PT0gbWVzaEMpOyAvLyB0cnVlXG4gICAgICogYGBgXG4gICAgICovXG4gICAgZXF1YWxzKG90aGVyOiB0aGlzIHwgdW5kZWZpbmVkIHwgbnVsbCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoIW90aGVyKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbmRleCA9PT0gb3RoZXIuX2luZGV4O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGB0cnVlYCBpZiB0aGUgb2JqZWN0IGlzIGRlc3Ryb3llZCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBJZiB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5lcmFzZVByb3RvdHlwZU9uRGVzdHJveX0gaXMgYHRydWVgLFxuICAgICAqIHJlYWRpbmcgYSBjbGFzcyBhdHRyaWJ1dGUgLyBtZXRob2Qgd2lsbCB0aHJvdy5cbiAgICAgKi9cbiAgICBnZXQgaXNEZXN0cm95ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbmRleCA8PSAwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBzY2VuZSByZXNvdXJjZXMsIHN1Y2ggYXM6XG4gKiAgKiAtIHtAbGluayBUZXh0dXJlfVxuICogLSB7QGxpbmsgTWVzaH1cbiAqIC0ge0BsaW5rIE1hdGVyaWFsfVxuICogLSB7QGxpbmsgU2tpbn1cbiAqIC0ge0BsaW5rIEFuaW1hdGlvbn1cbiAqXG4gKiBAc2luY2UgMS4yLjBcbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNjZW5lUmVzb3VyY2Uge1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgc3RhdGljIF9wYWNrKHNjZW5lOiBudW1iZXIsIGluZGV4OiBudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIChzY2VuZSA8PCAyMikgfCBpbmRleDtcbiAgICB9XG5cbiAgICAvKiogUmVsYXRpdmUgaW5kZXggaW4gdGhlIGhvc3QuIEBoaWRkZW4gKi9cbiAgICByZWFkb25seSBfaW5kZXg6IG51bWJlciA9IC0xO1xuICAgIC8qKiBGb3IgY29tcGF0aWJpbGl0eSB3aXRoIFNjZW5lUmVzb3VyY2UuIEBoaWRkZW4gKi9cbiAgICByZWFkb25seSBfaWQ6IG51bWJlciA9IC0xO1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IF9zY2VuZTogUHJlZmFiO1xuXG4gICAgY29uc3RydWN0b3Ioc2NlbmU6IFByZWZhYiwgaW5kZXg6IG51bWJlcikge1xuICAgICAgICB0aGlzLl9zY2VuZSA9IHNjZW5lO1xuICAgICAgICB0aGlzLl9pbmRleCA9IGluZGV4O1xuICAgICAgICB0aGlzLl9pZCA9IFNjZW5lUmVzb3VyY2UuX3BhY2soc2NlbmUuX2luZGV4LCBpbmRleCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGVxdWFsaXR5IGJ5IGNvbXBhcmluZyBpZHMgYW5kICoqbm90KiogdGhlIEphdmFTY3JpcHQgcmVmZXJlbmNlLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIEphdmFTY3JpcHQgcmVmZXJlbmNlIGNvbXBhcmlzb24gaW5zdGVhZDpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgbWVzaEEgPSBlbmdpbmUubWVzaGVzLmNyZWF0ZSh7dmVydGV4Q291bnQ6IDF9KTtcbiAgICAgKiBjb25zdCBtZXNoQiA9IGVuZ2luZS5tZXNoZXMuY3JlYXRlKHt2ZXJ0ZXhDb3VudDogMX0pO1xuICAgICAqIGNvbnN0IG1lc2hDID0gbWVzaEI7XG4gICAgICogY29uc29sZS5sb2cobWVzaEEgPT09IG1lc2hCKTsgLy8gZmFsc2VcbiAgICAgKiBjb25zb2xlLmxvZyhtZXNoQSA9PT0gbWVzaEEpOyAvLyB0cnVlXG4gICAgICogY29uc29sZS5sb2cobWVzaEIgPT09IG1lc2hDKTsgLy8gdHJ1ZVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGVxdWFscyhvdGhlcjogdGhpcyB8IHVuZGVmaW5lZCB8IG51bGwpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKCFvdGhlcikgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcy5faWQgPT09IG90aGVyLl9pZDtcbiAgICB9XG5cbiAgICAvKiogSG9zdGluZyBpbnN0YW5jZS4gKi9cbiAgICBnZXQgc2NlbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zY2VuZTtcbiAgICB9XG5cbiAgICAvKiogSG9zdGluZyBlbmdpbmUgaW5zdGFuY2UuICovXG4gICAgZ2V0IGVuZ2luZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjZW5lLmVuZ2luZTtcbiAgICB9XG5cbiAgICAvKiogSW5kZXggb2YgdGhpcyByZXNvdXJjZSBpbiB0aGUge0BsaW5rIFNjZW5lfSdzIG1hbmFnZXIuICovXG4gICAgZ2V0IGluZGV4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5kZXg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogYHRydWVgIGlmIHRoZSBvYmplY3QgaXMgZGVzdHJveWVkLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIElmIHtAbGluayBXb25kZXJsYW5kRW5naW5lLmVyYXNlUHJvdG90eXBlT25EZXN0cm95fSBpcyBgdHJ1ZWAsXG4gICAgICogcmVhZGluZyBhIGNsYXNzIGF0dHJpYnV0ZSAvIG1ldGhvZCB3aWxsIHRocm93LlxuICAgICAqL1xuICAgIGdldCBpc0Rlc3Ryb3llZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lkIDw9IDA7XG4gICAgfVxufVxuXG4vKipcbiAqIE1hbmFnZXIgZm9yIHJlc291cmNlcy5cbiAqXG4gKiBSZXNvdXJjZXMgYXJlIGFjY2Vzc2VkIHZpYSB0aGUgZW5naW5lIHRoZXkgYmVsb25nIHRvLlxuICpcbiAqIEBzZWUge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUudGV4dHVyZXN9LCB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5tZXNoZXN9LFxuICogYW5kIHtAbGluayBXb25kZXJsYW5kRW5naW5lLm1hdGVyaWFsc30uXG4gKlxuICogQHNpbmNlIDEuMi4wXG4gKi9cbmV4cG9ydCBjbGFzcyBSZXNvdXJjZU1hbmFnZXI8VCBleHRlbmRzIFNjZW5lUmVzb3VyY2UgfCBSZXNvdXJjZT4ge1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IF9ob3N0OiBGaXJzdENvbnN0cnVjdG9yUGFyYW08VD47XG4gICAgLyoqIENhY2hlLiBAaGlkZGVuICovXG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IF9jYWNoZTogKFQgfCBudWxsKVtdID0gW107XG5cbiAgICAvKiogUmVzb3VyY2UgY2xhc3MuIEBoaWRkZW4gKi9cbiAgICBwcml2YXRlIHJlYWRvbmx5IF90ZW1wbGF0ZTogUmVzb3VyY2VDb25zdHJ1Y3RvcjxUPjtcblxuICAgIC8qKiBEZXN0cnVjdG9yIHByb3h5LCB1c2VkIGlmIHtAbGluayBXb25kZXJsYW5kRW5naW5lLmVyYXNlUHJvdG90eXBlT25EZXN0cm95fSBpcyBgdHJ1ZWAuIEBoaWRkZW4gKi9cbiAgICBwcml2YXRlIF9kZXN0cnVjdG9yOiB7fSB8IG51bGwgPSBudWxsO1xuXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZW5naW5lOiBXb25kZXJsYW5kRW5naW5lO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IG1hbmFnZXJcbiAgICAgKlxuICAgICAqIEBwYXJhbSBob3N0IFRoZSBob3N0IGNvbnRhaW5pbmcgdGhlIG1hbmFnZWQgcmVzb3VyY2VzLlxuICAgICAqIEBwYXJhbSBDbGFzcyBUaGUgY2xhc3MgdG8gaW5zdGFudGlhdGUgd2hlbiB3cmFwcGluZyBhbiBpbmRleC5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihob3N0OiBGaXJzdENvbnN0cnVjdG9yUGFyYW08VD4sIENsYXNzOiBSZXNvdXJjZUNvbnN0cnVjdG9yPFQ+KSB7XG4gICAgICAgIHRoaXMuX2hvc3QgPSBob3N0O1xuICAgICAgICB0aGlzLl90ZW1wbGF0ZSA9IENsYXNzO1xuICAgICAgICB0aGlzLl9lbmdpbmUgPSAoaG9zdCBhcyBQcmVmYWIpLmVuZ2luZSA/PyBob3N0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdyYXAgdGhlIGluZGV4IGludG8gYSByZXNvdXJjZSBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoZSBpbmRleCBpcyByZWxhdGl2ZSB0byB0aGUgaG9zdCwgaS5lLiwgZG9lc24ndCBwYWNrIHRoZSBob3N0IGluZGV4IChpZiBhbnkpLlxuICAgICAqXG4gICAgICogQHBhcmFtIGluZGV4IFRoZSByZXNvdXJjZSBpbmRleC5cbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIHdyYXAoaW5kZXg6IG51bWJlcikge1xuICAgICAgICBpZiAoaW5kZXggPD0gMCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IHRleHR1cmUgPVxuICAgICAgICAgICAgdGhpcy5fY2FjaGVbaW5kZXhdID8/XG4gICAgICAgICAgICAodGhpcy5fY2FjaGVbaW5kZXhdID0gbmV3IHRoaXMuX3RlbXBsYXRlKHRoaXMuX2hvc3QsIGluZGV4KSk7XG4gICAgICAgIHJldHVybiB0ZXh0dXJlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIHRoZSByZXNvdXJjZSBhdCB0aGUgZ2l2ZW4gaW5kZXguXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGUgaW5kZXggaXMgcmVsYXRpdmUgdG8gdGhlIGhvc3QsIGkuZS4sIGRvZXNuJ3QgcGFjayB0aGUgaG9zdCBpbmRleC5cbiAgICAgKi9cbiAgICBnZXQoaW5kZXg6IG51bWJlcik6IFQgfCBudWxsIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlW2luZGV4XSA/PyBudWxsO1xuICAgIH1cblxuICAgIC8qKiBOdW1iZXIgb2YgdGV4dHVyZXMgYWxsb2NhdGVkIGluIHRoZSBtYW5hZ2VyLiAqL1xuICAgIGdldCBhbGxvY2F0ZWRDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlLmxlbmd0aDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBOdW1iZXIgb2YgdGV4dHVyZXMgaW4gdGhlIG1hbmFnZXIuXG4gICAgICpcbiAgICAgKiBAbm90ZSBGb3IgcGVyZm9ybWFuY2UgcmVhc29ucywgYXZvaWQgY2FsbGluZyB0aGlzIG1ldGhvZCB3aGVuIHBvc3NpYmxlLlxuICAgICAqL1xuICAgIGdldCBjb3VudCgpIHtcbiAgICAgICAgbGV0IGNvdW50ID0gMDtcbiAgICAgICAgZm9yIChjb25zdCByZXMgb2YgdGhpcy5fY2FjaGUpIHtcbiAgICAgICAgICAgIGlmIChyZXMgJiYgcmVzLmluZGV4ID49IDApICsrY291bnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgIH1cblxuICAgIC8qKiBIb3N0aW5nIGVuZ2luZSBpbnN0YW5jZS4gKi9cbiAgICBnZXQgZW5naW5lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5naW5lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlc3Ryb3kgdGhlIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBtZXRob2QgdGFrZXMgY2FyZSBvZiB0aGUgcHJvdG90eXBlIGRlc3RydWN0aW9uLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9kZXN0cm95KGluc3RhbmNlOiBUKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gaW5zdGFuY2UuaW5kZXg7XG4gICAgICAgIChpbnN0YW5jZS5faW5kZXggYXMgbnVtYmVyKSA9IC0xO1xuICAgICAgICAoaW5zdGFuY2UuX2lkIGFzIG51bWJlcikgPSAtMTtcbiAgICAgICAgdGhpcy5fY2FjaGVbaW5kZXhdID0gbnVsbDtcblxuICAgICAgICBpZiAoIXRoaXMuZW5naW5lLmVyYXNlUHJvdG90eXBlT25EZXN0cm95KSByZXR1cm47XG5cbiAgICAgICAgaWYgKCF0aGlzLl9kZXN0cnVjdG9yKVxuICAgICAgICAgICAgdGhpcy5fZGVzdHJ1Y3RvciA9IGNyZWF0ZURlc3Ryb3llZFByb3h5KHRoaXMuX2hvc3QsIHRoaXMuX3RlbXBsYXRlKTtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGluc3RhbmNlLCB0aGlzLl9kZXN0cnVjdG9yKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYXJrIGFsbCBpbnN0YW5jZXMgYXMgZGVzdHJveWVkLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9jbGVhcigpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuZ2luZS5lcmFzZVByb3RvdHlwZU9uRGVzdHJveSkgcmV0dXJuO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2NhY2hlLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuX2NhY2hlW2ldO1xuICAgICAgICAgICAgaWYgKGluc3RhbmNlKSB0aGlzLl9kZXN0cm95KGluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jYWNoZS5sZW5ndGggPSAwO1xuICAgIH1cbn1cbiIsICJpbXBvcnQge0xvZ1RhZ30gZnJvbSAnLi9pbmRleC5qcyc7XG5pbXBvcnQge1ByZWZhYn0gZnJvbSAnLi9wcmVmYWIuanMnO1xuaW1wb3J0IHtcbiAgICBBbmltYXRpb25Db21wb25lbnQsXG4gICAgQnJva2VuQ29tcG9uZW50LFxuICAgIENvbGxpc2lvbkNvbXBvbmVudCxcbiAgICBDb21wb25lbnQsXG4gICAgQ29tcG9uZW50Q29uc3RydWN0b3IsXG4gICAgRGVzdHJveWVkQ29tcG9uZW50SW5zdGFuY2UsXG4gICAgSW5wdXRDb21wb25lbnQsXG4gICAgTGlnaHRDb21wb25lbnQsXG4gICAgTWVzaENvbXBvbmVudCxcbiAgICBQaHlzWENvbXBvbmVudCxcbiAgICBUZXh0Q29tcG9uZW50LFxuICAgIFZpZXdDb21wb25lbnQsXG59IGZyb20gJy4vd29uZGVybGFuZC5qcyc7XG5cbi8qKlxuICogTWFuYWdlIGFsbCBjb21wb25lbnQgbWFuYWdlcnMgaW4gYSBzY2VuZS5cbiAqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBDb21wb25lbnRNYW5hZ2VycyB7XG4gICAgLyoqIEFuaW1hdGlvbiBtYW5hZ2VyIGluZGV4LiAqL1xuICAgIHJlYWRvbmx5IGFuaW1hdGlvbjogbnVtYmVyID0gLTE7XG4gICAgLyoqIENvbGxpc2lvbiBtYW5hZ2VyIGluZGV4LiAqL1xuICAgIHJlYWRvbmx5IGNvbGxpc2lvbjogbnVtYmVyID0gLTE7XG4gICAgLyoqIEphdmFTY3JpcHQgbWFuYWdlciBpbmRleC4gKi9cbiAgICByZWFkb25seSBqczogbnVtYmVyID0gLTE7XG4gICAgLyoqIFBoeXN4IG1hbmFnZXIgaW5kZXguICovXG4gICAgcmVhZG9ubHkgcGh5c3g6IG51bWJlciA9IC0xO1xuICAgIC8qKiBWaWV3IG1hbmFnZXIgaW5kZXguICovXG4gICAgcmVhZG9ubHkgdmlldzogbnVtYmVyID0gLTE7XG5cbiAgICAvKipcbiAgICAgKiBDb21wb25lbnQgY2xhc3MgaW5zdGFuY2VzIHBlciB0eXBlIHRvIGF2b2lkIEdDLlxuICAgICAqXG4gICAgICogQG5vdGUgTWFwcyB0aGUgbWFuYWdlciBpbmRleCB0byB0aGUgbGlzdCBvZiBjb21wb25lbnRzLlxuICAgICAqXG4gICAgICogQHRvZG86IFJlZmFjdG9yIFJlc291cmNlTWFuYWdlciBhbmQgcmUtdXNlIGZvciBjb21wb25lbnRzLlxuICAgICAqL1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NhY2hlOiAoQ29tcG9uZW50IHwgbnVsbClbXVtdID0gW107XG4gICAgLyoqIE1hbmFnZXIgaW5kZXggdG8gY29tcG9uZW50IGNsYXNzLiAqL1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NvbnN0cnVjdG9yczogQ29tcG9uZW50Q29uc3RydWN0b3JbXTtcbiAgICAvKiBNYW5hZ2VyIG5hbWUgdG8gdGhlIG1hbmFnZXIgaW5kZXguICovXG4gICAgcHJpdmF0ZSByZWFkb25seSBfbmF0aXZlTWFuYWdlcnM6IE1hcDxzdHJpbmcsIG51bWJlcj4gPSBuZXcgTWFwKCk7XG5cbiAgICAvKiogSG9zdCBpbnN0YW5jZS4gKi9cbiAgICBwcml2YXRlIHJlYWRvbmx5IF9zY2VuZTogUHJlZmFiO1xuXG4gICAgY29uc3RydWN0b3Ioc2NlbmU6IFByZWZhYikge1xuICAgICAgICB0aGlzLl9zY2VuZSA9IHNjZW5lO1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fc2NlbmUuZW5naW5lLndhc207XG5cbiAgICAgICAgY29uc3QgbmF0aXZlID0gW1xuICAgICAgICAgICAgQW5pbWF0aW9uQ29tcG9uZW50LFxuICAgICAgICAgICAgQ29sbGlzaW9uQ29tcG9uZW50LFxuICAgICAgICAgICAgSW5wdXRDb21wb25lbnQsXG4gICAgICAgICAgICBMaWdodENvbXBvbmVudCxcbiAgICAgICAgICAgIE1lc2hDb21wb25lbnQsXG4gICAgICAgICAgICBQaHlzWENvbXBvbmVudCxcbiAgICAgICAgICAgIFRleHRDb21wb25lbnQsXG4gICAgICAgICAgICBWaWV3Q29tcG9uZW50LFxuICAgICAgICBdO1xuICAgICAgICB0aGlzLl9jYWNoZSA9IG5ldyBBcnJheShuYXRpdmUubGVuZ3RoKTtcbiAgICAgICAgdGhpcy5fY29uc3RydWN0b3JzID0gbmV3IEFycmF5KG5hdGl2ZS5sZW5ndGgpO1xuXG4gICAgICAgIGZvciAoY29uc3QgQ2xhc3Mgb2YgbmF0aXZlKSB7XG4gICAgICAgICAgICBjb25zdCBwdHIgPSB3YXNtLnRlbXBVVEY4KENsYXNzLlR5cGVOYW1lKTtcbiAgICAgICAgICAgIGNvbnN0IG1hbmFnZXIgPSB3YXNtLl93bF9zY2VuZV9nZXRfY29tcG9uZW50X21hbmFnZXJfaW5kZXgoc2NlbmUuX2luZGV4LCBwdHIpO1xuICAgICAgICAgICAgdGhpcy5fY29uc3RydWN0b3JzO1xuICAgICAgICAgICAgdGhpcy5fY29uc3RydWN0b3JzW21hbmFnZXJdID0gQ2xhc3M7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZVttYW5hZ2VyXSA9IFtdIGFzIENvbXBvbmVudFtdO1xuICAgICAgICAgICAgdGhpcy5fbmF0aXZlTWFuYWdlcnMuc2V0KENsYXNzLlR5cGVOYW1lLCBtYW5hZ2VyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uID0gdGhpcy5fbmF0aXZlTWFuYWdlcnMuZ2V0KEFuaW1hdGlvbkNvbXBvbmVudC5UeXBlTmFtZSkhO1xuICAgICAgICB0aGlzLmNvbGxpc2lvbiA9IHRoaXMuX25hdGl2ZU1hbmFnZXJzLmdldChDb2xsaXNpb25Db21wb25lbnQuVHlwZU5hbWUpITtcbiAgICAgICAgdGhpcy5waHlzeCA9IHRoaXMuX25hdGl2ZU1hbmFnZXJzLmdldChQaHlzWENvbXBvbmVudC5UeXBlTmFtZSkhO1xuICAgICAgICB0aGlzLnZpZXcgPSB0aGlzLl9uYXRpdmVNYW5hZ2Vycy5nZXQoVmlld0NvbXBvbmVudC5UeXBlTmFtZSkhO1xuXG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20udGVtcFVURjgoJ2pzJyk7XG4gICAgICAgIHRoaXMuanMgPSB3YXNtLl93bF9zY2VuZV9nZXRfY29tcG9uZW50X21hbmFnZXJfaW5kZXgoc2NlbmUuX2luZGV4LCBwdHIpO1xuICAgICAgICB0aGlzLl9jYWNoZVt0aGlzLmpzXSA9IFtdIGFzIENvbXBvbmVudFtdO1xuICAgIH1cblxuICAgIGNyZWF0ZUpzKGluZGV4OiBudW1iZXIsIGlkOiBudW1iZXIsIHR5cGU6IG51bWJlciwgb2JqZWN0OiBudW1iZXIpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX3NjZW5lLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBjdG9yID0gd2FzbS5fY29tcG9uZW50VHlwZXNbdHlwZV07XG4gICAgICAgIGlmICghY3Rvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUeXBlIGluZGV4ICR7dHlwZX0gaXNuJ3QgcmVnaXN0ZXJlZGApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9nID0gdGhpcy5fc2NlbmUuZW5naW5lLmxvZztcblxuICAgICAgICBsZXQgY29tcG9uZW50ID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbXBvbmVudCA9IG5ldyBjdG9yKHRoaXMuX3NjZW5lLCB0aGlzLmpzLCBpZCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGxvZy5lcnJvcihcbiAgICAgICAgICAgICAgICBMb2dUYWcuQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgIGBFeGNlcHRpb24gZHVyaW5nIGluc3RhbnRpYXRpb24gb2YgY29tcG9uZW50ICR7Y3Rvci5UeXBlTmFtZX1gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbG9nLmVycm9yKExvZ1RhZy5Db21wb25lbnQsIGUpO1xuICAgICAgICAgICAgY29tcG9uZW50ID0gbmV3IEJyb2tlbkNvbXBvbmVudCh0aGlzLl9zY2VuZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29tcG9uZW50Ll9vYmplY3QgPSB0aGlzLl9zY2VuZS53cmFwKG9iamVjdCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbXBvbmVudC5yZXNldFByb3BlcnRpZXMoKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgbG9nLmVycm9yKFxuICAgICAgICAgICAgICAgIExvZ1RhZy5Db21wb25lbnQsXG4gICAgICAgICAgICAgICAgYEV4Y2VwdGlvbiBkdXJpbmcgJHtjb21wb25lbnQudHlwZX0gcmVzZXRQcm9wZXJ0aWVzKCkgb24gb2JqZWN0ICR7Y29tcG9uZW50Lm9iamVjdC5uYW1lfWBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBsb2cuZXJyb3IoTG9nVGFnLkNvbXBvbmVudCwgZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9zY2VuZS5fanNDb21wb25lbnRzW2luZGV4XSA9IGNvbXBvbmVudDtcblxuICAgICAgICAvKiBBZGQgdG8gY2FjaGUuIFRoaXMgaXMgcmVxdWlyZWQgYmVjYXVzZSBkZXN0cnVjdGlvbiBpc1xuICAgICAgICAgKiBJRC1iYXNlZCBhbmQgbm90IGluZGV4LWJhc2VkLiAqL1xuICAgICAgICB0aGlzLl9jYWNoZVt0aGlzLmpzXVtpZF0gPSBjb21wb25lbnQ7XG5cbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBhIGNhY2hlZCBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWFuYWdlciBUaGUgbWFuYWdlciBpbmRleC5cbiAgICAgKiBAcGFyYW0gaWQgVGhlIGNvbXBvbmVudCBpZC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY29tcG9uZW50IGlmIGNhY2hlZCwgYG51bGxgIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBnZXQobWFuYWdlcjogbnVtYmVyLCBpZDogbnVtYmVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZVttYW5hZ2VyXVtpZF0gPz8gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXcmFwIHRoZSBhbmltYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaWQgSWQgdG8gd3JhcC5cbiAgICAgKiBAcmV0dXJucyBUaGUgcHJldmlvdXMgaW5zdGFuY2UgaWYgaXQgd2FzIGNhY2hlZCwgb3IgYSBuZXcgb25lLlxuICAgICAqL1xuICAgIHdyYXBBbmltYXRpb24oaWQ6IG51bWJlcik6IEFuaW1hdGlvbkNvbXBvbmVudCB7XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBOYXRpdmUodGhpcy5hbmltYXRpb24sIGlkKSBhcyBBbmltYXRpb25Db21wb25lbnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV3JhcCB0aGUgY29sbGlzaW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGlkIElkIHRvIHdyYXAuXG4gICAgICogQHJldHVybnMgVGhlIHByZXZpb3VzIGluc3RhbmNlIGlmIGl0IHdhcyBjYWNoZWQsIG9yIGEgbmV3IG9uZS5cbiAgICAgKi9cbiAgICB3cmFwQ29sbGlzaW9uKGlkOiBudW1iZXIpOiBDb2xsaXNpb25Db21wb25lbnQge1xuICAgICAgICByZXR1cm4gdGhpcy53cmFwTmF0aXZlKHRoaXMuY29sbGlzaW9uLCBpZCkgYXMgQ29sbGlzaW9uQ29tcG9uZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdyYXAgdGhlIHZpZXcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaWQgSWQgdG8gd3JhcC5cbiAgICAgKiBAcmV0dXJucyBUaGUgcHJldmlvdXMgaW5zdGFuY2UgaWYgaXQgd2FzIGNhY2hlZCwgb3IgYSBuZXcgb25lLlxuICAgICAqL1xuICAgIHdyYXBWaWV3KGlkOiBudW1iZXIpOiBWaWV3Q29tcG9uZW50IHtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcE5hdGl2ZSh0aGlzLnZpZXcsIGlkKSBhcyBWaWV3Q29tcG9uZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdyYXAgdGhlIHBoeXN4LlxuICAgICAqXG4gICAgICogQHBhcmFtIGlkIElkIHRvIHdyYXAuXG4gICAgICogQHJldHVybnMgVGhlIHByZXZpb3VzIGluc3RhbmNlIGlmIGl0IHdhcyBjYWNoZWQsIG9yIGEgbmV3IG9uZS5cbiAgICAgKi9cbiAgICB3cmFwUGh5c3goaWQ6IG51bWJlcik6IFBoeXNYQ29tcG9uZW50IHtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcE5hdGl2ZSh0aGlzLnBoeXN4LCBpZCkgYXMgUGh5c1hDb21wb25lbnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGEgY29tcG9uZW50IGluc3RhbmNlIGlmIGl0IGV4aXN0cywgb3IgY3JlYXRlIGFuZCBjYWNoZVxuICAgICAqIGEgbmV3IG9uZS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS4gUGxlYXNlIGhhdmUgYSBsb29rIGF0XG4gICAgICoge0BsaW5rIE9iamVjdDNELmFkZENvbXBvbmVudH0gaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb21wb25lbnRUeXBlIENvbXBvbmVudCBtYW5hZ2VyIGluZGV4XG4gICAgICogQHBhcmFtIGNvbXBvbmVudElkIENvbXBvbmVudCBpZCBpbiB0aGUgbWFuYWdlclxuICAgICAqXG4gICAgICogQHJldHVybnMgSmF2YVNjcmlwdCBpbnN0YW5jZSB3cmFwcGluZyB0aGUgbmF0aXZlIGNvbXBvbmVudFxuICAgICAqL1xuICAgIHdyYXBOYXRpdmUobWFuYWdlcjogbnVtYmVyLCBpZDogbnVtYmVyKSB7XG4gICAgICAgIGlmIChpZCA8IDApIHJldHVybiBudWxsO1xuXG4gICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5fY2FjaGVbbWFuYWdlcl07XG4gICAgICAgIGlmIChjYWNoZVtpZF0pIHJldHVybiBjYWNoZVtpZF07XG5cbiAgICAgICAgY29uc3Qgc2NlbmUgPSB0aGlzLl9zY2VuZTtcbiAgICAgICAgY29uc3QgQ2xhc3MgPSB0aGlzLl9jb25zdHJ1Y3RvcnNbbWFuYWdlcl07XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IG5ldyBDbGFzcyhzY2VuZSwgbWFuYWdlciwgaWQpO1xuICAgICAgICBjYWNoZVtpZF0gPSBjb21wb25lbnQ7XG4gICAgICAgIHJldHVybiBjb21wb25lbnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV3JhcCBhIG5hdGl2ZSBvciBqcyBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAdGhyb3dzIEZvciBKYXZhU2NyaXB0IGNvbXBvbmVudHMgdGhhdCB3ZXJlbid0IHByZXZpb3VzbHkgY2FjaGVkLFxuICAgICAqIHNpbmNlIHRoYXQgd291bGQgYmUgYSBidWcgaW4gdGhlIHJ1bnRpbWUgLyBhcGkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWFuYWdlciBUaGUgbWFuYWdlciBpbmRleC5cbiAgICAgKiBAcGFyYW0gaWQgVGhlIGlkIHRvIHdyYXAuXG4gICAgICogQHJldHVybnMgVGhlIHByZXZpb3VzIGluc3RhbmNlIGlmIGl0IHdhcyBjYWNoZWQsIG9yIGEgbmV3IG9uZS5cbiAgICAgKi9cbiAgICB3cmFwQW55KG1hbmFnZXI6IG51bWJlciwgaWQ6IG51bWJlcikge1xuICAgICAgICBpZiAoaWQgPCAwKSByZXR1cm4gbnVsbDtcblxuICAgICAgICBpZiAobWFuYWdlciA9PT0gdGhpcy5qcykge1xuICAgICAgICAgICAgY29uc3QgZm91bmQgPSB0aGlzLl9jYWNoZVt0aGlzLmpzXVtpZF07XG4gICAgICAgICAgICBpZiAoIWZvdW5kKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdKUyBjb21wb25lbnRzIG11c3QgYWx3YXlzIGJlIGNhY2hlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZvdW5kLmNvbnN0cnVjdG9yICE9PSBCcm9rZW5Db21wb25lbnQgPyBmb3VuZCA6IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy53cmFwTmF0aXZlKG1hbmFnZXIsIGlkKTtcbiAgICB9XG5cbiAgICBnZXROYXRpdmVNYW5hZ2VyKG5hbWU6IHN0cmluZyk6IG51bWJlciB8IG51bGwge1xuICAgICAgICBjb25zdCBtYW5hZ2VyID0gdGhpcy5fbmF0aXZlTWFuYWdlcnMuZ2V0KG5hbWUpO1xuICAgICAgICByZXR1cm4gbWFuYWdlciAhPT0gdW5kZWZpbmVkID8gbWFuYWdlciA6IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGVyZm9ybSBjbGVhbnVwIHVwb24gY29tcG9uZW50IGRlc3RydWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGluc3RhbmNlIFRoZSBpbnN0YW5jZSB0byBkZXN0cm95LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGRlc3Ryb3koaW5zdGFuY2U6IENvbXBvbmVudCkge1xuICAgICAgICBjb25zdCBsb2NhbElkID0gaW5zdGFuY2UuX2xvY2FsSWQ7XG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBpbnN0YW5jZS5fbWFuYWdlcjtcbiAgICAgICAgKGluc3RhbmNlLl9pZCBhcyBudW1iZXIpID0gLTE7XG4gICAgICAgIChpbnN0YW5jZS5fbG9jYWxJZCBhcyBudW1iZXIpID0gLTE7XG4gICAgICAgIChpbnN0YW5jZS5fbWFuYWdlciBhcyBudW1iZXIpID0gLTE7XG5cbiAgICAgICAgY29uc3QgZXJhc2VQcm90b3R5cGVPbkRlc3Ryb3kgPSB0aGlzLl9zY2VuZS5lbmdpbmUuZXJhc2VQcm90b3R5cGVPbkRlc3Ryb3k7XG4gICAgICAgIC8qIERlc3Ryb3kgdGhlIHByb3RvdHlwZSBvZiB0aGlzIGluc3RhbmNlIHRvIGF2b2lkIHVzaW5nIGEgZGFuZ2xpbmcgY29tcG9uZW50ICovXG4gICAgICAgIGlmIChlcmFzZVByb3RvdHlwZU9uRGVzdHJveSAmJiBpbnN0YW5jZSkge1xuICAgICAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGluc3RhbmNlLCBEZXN0cm95ZWRDb21wb25lbnRJbnN0YW5jZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBSZW1vdmUgZnJvbSB0aGUgY2FjaGUgdG8gYXZvaWQgc2lkZS1lZmZlY3RzIHdoZW5cbiAgICAgICAgICogcmUtY3JlYXRpbmcgYSBjb21wb25lbnQgd2l0aCB0aGUgc2FtZSBpZC4gKi9cbiAgICAgICAgdGhpcy5fY2FjaGVbbWFuYWdlcl1bbG9jYWxJZF0gPSBudWxsO1xuICAgIH1cblxuICAgIC8qKiBOdW1iZXIgb2YgbWFuYWdlcnMsIGluY2x1ZGluZyB0aGUgSmF2YVNjcmlwdCBtYW5hZ2VyLiAqL1xuICAgIGdldCBtYW5hZ2Vyc0NvdW50KCkge1xuICAgICAgICAvKiArMSB0byBhY2NvdW50IGZvciB0aGUgSmF2YVNjcmlwdCBtYW5hZ2VyICovXG4gICAgICAgIHJldHVybiB0aGlzLl9uYXRpdmVNYW5hZ2Vycy5zaXplICsgMTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHtJbWFnZUxpa2UsIFByb2dyZXNzQ2FsbGJhY2t9IGZyb20gJy4uL3R5cGVzLmpzJztcblxuLyoqXG4gKiBUcmFuc2Zvcm1lciBmb3Ige0BsaW5rIFRyYW5zZm9ybVN0cmVhbX0gdGhhdCBwYXNzZXMgcmVhZCBwcm9ncmVzcyB0byBhXG4gKiBjYWxsYmFjay5cbiAqXG4gKiBJbnZva2VzIHRoZSBjYWxsYmFjayBmb3IgZWFjaCBzdHJlYW1lZCBjaHVuaywgYW5kIG9uZSBmaW5hbCB0aW1lIHdoZW4gdGhlXG4gKiBzdHJlYW0gY2xvc2VzLlxuICpcbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgRmV0Y2hQcm9ncmVzc1RyYW5zZm9ybWVyIGltcGxlbWVudHMgVHJhbnNmb3JtZXI8VWludDhBcnJheSwgVWludDhBcnJheT4ge1xuICAgICNwcm9ncmVzcyA9IDA7XG4gICAgI2NhbGxiYWNrOiBQcm9ncmVzc0NhbGxiYWNrO1xuICAgICN0b3RhbFNpemU6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yLlxuICAgICAqIEBwYXJhbSBjYWxsYmFjayBDYWxsYmFjayB0aGF0IHJlY2VpdmVzIHRoZSBwcm9ncmVzcy5cbiAgICAgKiBAcGFyYW0gdG90YWxTaXplIFRvdGFsIHNpemUgb2YgdGhlIGRhdGEuIFBhc3MgMCB0byBpbmRpY2F0ZSB0aGF0IHRoZVxuICAgICAqICAgICBzaXplIGlzIHVua25vd24sIHRoZW4gdGhlIGNhbGxiYWNrIHdpbGwgb25seSBiZSBjYWxsZWQgb25jZSBhZnRlclxuICAgICAqICAgICBhbGwgZGF0YSB3YXMgdHJhbnNmZXJyZWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoY2FsbGJhY2s6IFByb2dyZXNzQ2FsbGJhY2ssIHRvdGFsU2l6ZSA9IDApIHtcbiAgICAgICAgdGhpcy4jY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgdGhpcy4jdG90YWxTaXplID0gdG90YWxTaXplO1xuICAgIH1cblxuICAgIHRyYW5zZm9ybShjaHVuazogVWludDhBcnJheSwgY29udHJvbGxlcjogVHJhbnNmb3JtU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI8VWludDhBcnJheT4pIHtcbiAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKGNodW5rKTtcbiAgICAgICAgdGhpcy4jcHJvZ3Jlc3MgKz0gY2h1bmsubGVuZ3RoO1xuICAgICAgICBpZiAodGhpcy4jdG90YWxTaXplID4gMCkge1xuICAgICAgICAgICAgdGhpcy4jY2FsbGJhY2sodGhpcy4jcHJvZ3Jlc3MsIHRoaXMuI3RvdGFsU2l6ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmbHVzaCgpIHtcbiAgICAgICAgdGhpcy4jY2FsbGJhY2sodGhpcy4jcHJvZ3Jlc3MsIHRoaXMuI3Byb2dyZXNzKTtcbiAgICB9XG59XG5cbi8qKlxuICogU2luayBmb3IgYFdyaXRhYmxlU3RyZWFtYCB0aGF0IHdyaXRlcyBkYXRhIHRvIGFuIGBBcnJheUJ1ZmZlcmAuXG4gKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgQXJyYXlCdWZmZXJTaW5rIGltcGxlbWVudHMgVW5kZXJseWluZ1Npbms8VWludDhBcnJheT4ge1xuICAgICNidWZmZXI6IFVpbnQ4QXJyYXk7XG4gICAgI29mZnNldCA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3Rvci5cbiAgICAgKiBAcGFyYW0gc2l6ZSBJbml0aWFsIHNpemUgb2YgdGhlIGJ1ZmZlci4gSWYgbGVzcyB0aGFuIHRoZSByZWNlaXZlZCBkYXRhLFxuICAgICAqICAgICB0aGUgYnVmZmVyIGlzIGR5bmFtaWNhbGx5IHJlYWxsb2NhdGVkLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNpemUgPSAwKSB7XG4gICAgICAgIHRoaXMuI2J1ZmZlciA9IG5ldyBVaW50OEFycmF5KHNpemUpO1xuICAgIH1cblxuICAgIC8qKiBHZXQgdGhlIHJlY2VpdmVkIGRhdGEgYXMgYW4gYEFycmF5QnVmZmVyYC4gKi9cbiAgICBnZXQgYXJyYXlCdWZmZXIoKSB7XG4gICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gdGhpcy4jYnVmZmVyLmJ1ZmZlcjtcbiAgICAgICAgaWYgKHRoaXMuI29mZnNldCA8IGFycmF5QnVmZmVyLmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBhcnJheUJ1ZmZlci5zbGljZSgwLCB0aGlzLiNvZmZzZXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJheUJ1ZmZlcjtcbiAgICB9XG5cbiAgICB3cml0ZShjaHVuazogVWludDhBcnJheSkge1xuICAgICAgICBjb25zdCBuZXdMZW5ndGggPSB0aGlzLiNvZmZzZXQgKyBjaHVuay5sZW5ndGg7XG4gICAgICAgIGlmIChuZXdMZW5ndGggPiB0aGlzLiNidWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdCdWZmZXIgPSBuZXcgVWludDhBcnJheShcbiAgICAgICAgICAgICAgICBNYXRoLm1heCh0aGlzLiNidWZmZXIubGVuZ3RoICogMS41LCBuZXdMZW5ndGgpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbmV3QnVmZmVyLnNldCh0aGlzLiNidWZmZXIpO1xuICAgICAgICAgICAgdGhpcy4jYnVmZmVyID0gbmV3QnVmZmVyO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2J1ZmZlci5zZXQoY2h1bmssIHRoaXMuI29mZnNldCk7XG4gICAgICAgIHRoaXMuI29mZnNldCA9IG5ld0xlbmd0aDtcbiAgICB9XG59XG5cbi8qKlxuICogU291cmNlIGZvciBgUmVhZGFibGVTdHJlYW1gIHRoYXQgcmVhZHMgZGF0YSBmcm9tIGFuYEFycmF5QnVmZmVyYC5cbiAqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBBcnJheUJ1ZmZlclNvdXJjZSBpbXBsZW1lbnRzIFVuZGVybHlpbmdTb3VyY2U8VWludDhBcnJheT4ge1xuICAgICNidWZmZXI6IEFycmF5QnVmZmVyO1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0b3IuXG4gICAgICogQHBhcmFtIGJ1ZmZlciBCdWZmZXIgdG8gcmVhZCBmcm9tLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGJ1ZmZlcjogQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgdGhpcy4jYnVmZmVyID0gYnVmZmVyO1xuICAgIH1cblxuICAgIHN0YXJ0KGNvbnRyb2xsZXI6IFJlYWRhYmxlU3RyZWFtQ29udHJvbGxlcjxVaW50OEFycmF5Pikge1xuICAgICAgICBpZiAodGhpcy4jYnVmZmVyLmJ5dGVMZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUobmV3IFVpbnQ4QXJyYXkodGhpcy4jYnVmZmVyKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29udHJvbGxlci5jbG9zZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBGZXRjaCBhIGZpbGUgYXMgYW4gYEFycmF5QnVmZmVyYCwgd2l0aCBmZXRjaCBwcm9ncmVzcyBwYXNzZWQgdG8gYSBjYWxsYmFjay5cbiAqXG4gKiBAcGFyYW0gcGF0aCBQYXRoIG9mIHRoZSBmaWxlIHRvIGZldGNoLlxuICogQHBhcmFtIG9uUHJvZ3Jlc3MgQ2FsbGJhY2sgcmVjZWl2aW5nIHRoZSBjdXJyZW50IGZldGNoIHByb2dyZXNzIGFuZCB0b3RhbFxuICogICAgIHNpemUsIGluIGJ5dGVzLiBBbHNvIGNhbGxlZCBhIGZpbmFsIHRpbWUgb24gY29tcGxldGlvbi5cbiAqIEBwYXJhbSBzaWduYWwgQWJvcnQgc2lnbmFsIHBhc3NlZCB0byBgZmV0Y2goKWAuXG4gKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgZmV0Y2ggc3VjY2Vzc2Z1bGx5IGNvbXBsZXRlcy5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoV2l0aFByb2dyZXNzKFxuICAgIHBhdGg6IHN0cmluZyxcbiAgICBvblByb2dyZXNzPzogUHJvZ3Jlc3NDYWxsYmFjayxcbiAgICBzaWduYWw/OiBBYm9ydFNpZ25hbFxuKTogUHJvbWlzZTxBcnJheUJ1ZmZlcj4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHBhdGgsIHtzaWduYWx9KTtcbiAgICBpZiAoIXJlcy5vaykgdGhyb3cgcmVzLnN0YXR1c1RleHQ7XG4gICAgaWYgKCFvblByb2dyZXNzIHx8ICFyZXMuYm9keSkgcmV0dXJuIHJlcy5hcnJheUJ1ZmZlcigpO1xuICAgIGxldCBzaXplID0gTnVtYmVyKHJlcy5oZWFkZXJzLmdldCgnQ29udGVudC1MZW5ndGgnKSA/PyAwKTtcbiAgICBpZiAoTnVtYmVyLmlzTmFOKHNpemUpKSBzaXplID0gMDtcbiAgICBjb25zdCBzaW5rID0gbmV3IEFycmF5QnVmZmVyU2luayhzaXplKTtcbiAgICBhd2FpdCByZXMuYm9keVxuICAgICAgICAucGlwZVRocm91Z2gobmV3IFRyYW5zZm9ybVN0cmVhbShuZXcgRmV0Y2hQcm9ncmVzc1RyYW5zZm9ybWVyKG9uUHJvZ3Jlc3MsIHNpemUpKSlcbiAgICAgICAgLnBpcGVUbyhuZXcgV3JpdGFibGVTdHJlYW0oc2luaykpO1xuICAgIHJldHVybiBzaW5rLmFycmF5QnVmZmVyO1xufVxuXG4vKipcbiAqIEZldGNoIGEgZmlsZSBhcyBhIGBSZWFkYWJsZVN0cmVhbWAsIHdpdGggZmV0Y2ggcHJvZ3Jlc3MgcGFzc2VkIHRvIGFcbiAqIGNhbGxiYWNrLlxuICpcbiAqIEBwYXJhbSBwYXRoIFBhdGggb2YgdGhlIGZpbGUgdG8gZmV0Y2guXG4gKiBAcGFyYW0gb25Qcm9ncmVzcyBDYWxsYmFjayByZWNlaXZpbmcgdGhlIGN1cnJlbnQgZmV0Y2ggcHJvZ3Jlc3MgYW5kIHRvdGFsXG4gKiAgICAgc2l6ZSwgaW4gYnl0ZXMuIEFsc28gY2FsbGVkIGEgZmluYWwgdGltZSBvbiBjb21wbGV0aW9uLlxuICogQHBhcmFtIHNpZ25hbCBBYm9ydCBzaWduYWwgcGFzc2VkIHRvIGBmZXRjaCgpYC5cbiAqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBmZXRjaCBzdWNjZXNzZnVsbHkgY29tcGxldGVzLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hTdHJlYW1XaXRoUHJvZ3Jlc3MoXG4gICAgcGF0aDogc3RyaW5nLFxuICAgIG9uUHJvZ3Jlc3M/OiBQcm9ncmVzc0NhbGxiYWNrLFxuICAgIHNpZ25hbD86IEFib3J0U2lnbmFsXG4pOiBQcm9taXNlPFJlYWRhYmxlU3RyZWFtPFVpbnQ4QXJyYXk+PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2gocGF0aCwge3NpZ25hbH0pO1xuICAgIGlmICghcmVzLm9rKSB0aHJvdyByZXMuc3RhdHVzVGV4dDtcbiAgICBjb25zdCBib2R5ID0gcmVzLmJvZHkgPz8gbmV3IFJlYWRhYmxlU3RyZWFtKCk7XG4gICAgbGV0IHNpemUgPSBOdW1iZXIocmVzLmhlYWRlcnMuZ2V0KCdDb250ZW50LUxlbmd0aCcpID8/IDApO1xuICAgIGlmIChOdW1iZXIuaXNOYU4oc2l6ZSkpIHNpemUgPSAwO1xuICAgIGlmICghb25Qcm9ncmVzcykgcmV0dXJuIGJvZHk7XG4gICAgY29uc3Qgc3RyZWFtID0gYm9keS5waXBlVGhyb3VnaChcbiAgICAgICAgbmV3IFRyYW5zZm9ybVN0cmVhbShuZXcgRmV0Y2hQcm9ncmVzc1RyYW5zZm9ybWVyKG9uUHJvZ3Jlc3MsIHNpemUpKVxuICAgICk7XG4gICAgcmV0dXJuIHN0cmVhbTtcbn1cblxuLyoqXG4gKiBHZXQgcGFyZW50IHBhdGggZnJvbSBhIFVSTC5cbiAqXG4gKiBAcGFyYW0gdXJsIFVSTCB0byBnZXQgdGhlIHBhcmVudCBmcm9tLlxuICogQHJldHVybnMgUGFyZW50IFVSTCB3aXRob3V0IHRyYWlsaW5nIHNsYXNoLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QmFzZVVybCh1cmw6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHVybC5zdWJzdHJpbmcoMCwgdXJsLmxhc3RJbmRleE9mKCcvJykpO1xufVxuXG4vKipcbiAqIEdldCB0aGUgZmlsZW5hbWUgb2YgYSB1cmwuXG4gKlxuICogQHBhcmFtIHVybCBUaGUgdXJsIHRvIGV4dHJhY3QgdGhlIG5hbWUgZnJvbS5cbiAqIEByZXR1cm5zIEEgc3RyaW5nIGNvbnRhaW5pbmcgdGhlIGZpbGVuYW1lLiBJZiBubyBmaWxlbmFtZSBpcyBmb3VuZCxcbiAqICAgICByZXR1cm5zIHRoZSBpbnB1dCBzdHJpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWxlbmFtZSh1cmw6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKHVybC5lbmRzV2l0aCgnLycpKSB7XG4gICAgICAgIC8qIFJlbW92ZSB0cmFpbGluZyBzbGFzaC4gKi9cbiAgICAgICAgdXJsID0gdXJsLnN1YnN0cmluZygwLCB1cmwubGFzdEluZGV4T2YoJy8nKSk7XG4gICAgfVxuICAgIGNvbnN0IGxhc3RTbGFzaCA9IHVybC5sYXN0SW5kZXhPZignLycpO1xuICAgIGlmIChsYXN0U2xhc2ggPCAwKSByZXR1cm4gdXJsO1xuICAgIHJldHVybiB1cmwuc3Vic3RyaW5nKGxhc3RTbGFzaCArIDEpO1xufVxuXG4vKipcbiAqIFByb21pc2UgcmVzb2x2ZWQgb25jZSB0aGUgaW1hZ2UgaXMgcmVhZHkgdG8gYmUgdXNlZFxuICpcbiAqIEBwYXJhbSBpbWFnZSBUaGUgaW1hZ2UsIHZpZGVvLCBvciBjYW52YXMgdG8gd2FpdCBmb3IuXG4gKiBAcmV0dXJucyBBIHByb21pc2Ugd2l0aCB0aGUgaW1hZ2UsIG9uY2UgaXQncyByZWFkeSB0byBiZSB1c2VkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gb25JbWFnZVJlYWR5PFQgZXh0ZW5kcyBJbWFnZUxpa2U+KGltYWdlOiBUKTogUHJvbWlzZTxUPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xuICAgICAgICBpZiAoaW1hZ2UgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCkge1xuICAgICAgICAgICAgcmVzKGltYWdlKTtcbiAgICAgICAgfSBlbHNlIGlmIChpbWFnZSBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmIChpbWFnZS5yZWFkeVN0YXRlID49IDIpIHtcbiAgICAgICAgICAgICAgICByZXMoaW1hZ2UgYXMgVCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgICAnbG9hZGVkZGF0YScsXG4gICAgICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UucmVhZHlTdGF0ZSA+PSAyKSByZXMoaW1hZ2UpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge29uY2U6IHRydWV9XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2UgaWYgKChpbWFnZSBhcyBIVE1MSW1hZ2VFbGVtZW50KS5jb21wbGV0ZSkge1xuICAgICAgICAgICAgcmVzKGltYWdlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpbWFnZS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4gcmVzKGltYWdlKSwge29uY2U6IHRydWV9KTtcbiAgICAgICAgaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCByZWosIHtvbmNlOiB0cnVlfSk7XG4gICAgfSk7XG59XG4iLCAiaW1wb3J0IHtDb21wb25lbnRNYW5hZ2Vyc30gZnJvbSAnLi9jb21wb25lbnQuanMnO1xuaW1wb3J0IHtXb25kZXJsYW5kRW5naW5lfSBmcm9tICcuL2VuZ2luZS5qcyc7XG5pbXBvcnQge1Jlc291cmNlTWFuYWdlciwgU2NlbmVSZXNvdXJjZX0gZnJvbSAnLi9yZXNvdXJjZXMvcmVzb3VyY2UuanMnO1xuaW1wb3J0IHtQcm9ncmVzc0NhbGxiYWNrfSBmcm9tICcuL3R5cGVzLmpzJztcbmltcG9ydCB7XG4gICAgZmV0Y2hTdHJlYW1XaXRoUHJvZ3Jlc3MsXG4gICAgZmV0Y2hXaXRoUHJvZ3Jlc3MsXG4gICAgZ2V0QmFzZVVybCxcbiAgICBnZXRGaWxlbmFtZSxcbn0gZnJvbSAnLi91dGlscy9mZXRjaC5qcyc7XG5pbXBvcnQge2lzU3RyaW5nfSBmcm9tICcuL3V0aWxzL29iamVjdC5qcyc7XG5pbXBvcnQge1xuICAgIEFuaW1hdGlvbixcbiAgICBDb2xsaXNpb25DYWxsYmFjayxcbiAgICBDb21wb25lbnQsXG4gICAgRGVzdHJveWVkT2JqZWN0SW5zdGFuY2UsXG4gICAgT2JqZWN0M0QsXG4gICAgU2tpbixcbn0gZnJvbSAnLi93b25kZXJsYW5kLmpzJztcblxuLyoqIFNjZW5lIGxvYWRpbmcgb3B0aW9ucy4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2NlbmVMb2FkT3B0aW9ucyB7XG4gICAgLyoqIEFuIGluLW1lbW9yeSBidWZmZXIsIGNvbnRhaW5pbmcgdGhlIGJ5dGVzIG9mIGEgYC5iaW5gIGZpbGUuICovXG4gICAgYnVmZmVyOiBBcnJheUJ1ZmZlcjtcblxuICAgIC8qKiBQYXRoIGZyb20gd2hpY2ggcmVzb3VyY2VzIGFyZSByZXNvbHZlZCAoaW1hZ2VzLCBsYW5ndWFnZXMsIGV0Yy4uLikuICovXG4gICAgYmFzZVVSTDogc3RyaW5nO1xuXG4gICAgLyoqIElmIGB0cnVlYCwgZGlzcGF0Y2hlcyBhIHJlYWR5IGV2ZW50IGluIHRoZSBkb2N1bWVudC4gKi9cbiAgICBkaXNwYXRjaFJlYWR5RXZlbnQ/OiBib29sZWFuO1xufVxuXG4vKiogTG9hZGluZyBvcHRpb25zIGZvciBpbi1tZW1vcnkgZGF0YS4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSW5NZW1vcnlMb2FkT3B0aW9ucyB7XG4gICAgLyoqIEFuIGluLW1lbW9yeSBidWZmZXIsIGNvbnRhaW5pbmcgdGhlIGJ5dGVzIG9mIGEgYC5iaW5gIGZpbGUuICovXG4gICAgYnVmZmVyOiBBcnJheUJ1ZmZlcjtcbiAgICAvKiogUGF0aCBmcm9tIHdoaWNoIHJlc291cmNlcyBhcmUgcmVzb2x2ZWQgKGltYWdlcywgbGFuZ3VhZ2VzLCBldGMuLi4pLiAqL1xuICAgIGJhc2VVUkw6IHN0cmluZztcbiAgICAvKiogTmFtZSBvZiB0aGUgZmlsZS4gVGhpcyBpcyB0aGUgc2FtZSB0aGF0IHdpbGwgYmUgcmV0cmlldmVkIHZpYSB7QGxpbmsgU2NlbmUjZmlsZW5hbWV9ICovXG4gICAgZmlsZW5hbWU/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogTG9hZGluZyBvcHRpb25zIGZvciBzdHJlYW1lZCBkYXRhLlxuICpcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTdHJlYW1Mb2FkT3B0aW9ucyB7XG4gICAgLyoqIFN0cmVhbSB0aGF0IHRyYW5zZmVycyB0aGUgYnl0ZXMgb2YgYSBgLmJpbmAgZmlsZS4gKi9cbiAgICBzdHJlYW06IFJlYWRhYmxlU3RyZWFtPFVpbnQ4QXJyYXk+O1xuICAgIC8qKiBQYXRoIGZyb20gd2hpY2ggcmVzb3VyY2VzIGFyZSByZXNvbHZlZCAoaW1hZ2VzLCBsYW5ndWFnZXMsIGV0Yy4uLikuICovXG4gICAgYmFzZVVSTDogc3RyaW5nO1xuICAgIC8qKiBOYW1lIG9mIHRoZSBmaWxlLiBUaGlzIGlzIHRoZSBzYW1lIHRoYXQgd2lsbCBiZSByZXRyaWV2ZWQgdmlhIHtAbGluayBTY2VuZSNmaWxlbmFtZX0gKi9cbiAgICBmaWxlbmFtZT86IHN0cmluZztcbn1cblxuLyoqIE9wdGlvbnMgZm9yIGxvYWRpbmcgZmlsZXMgZnJvbSBhIFVSTC4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVXJsTG9hZE9wdGlvbnMge1xuICAgIC8qKiBVUkwgdG8gbG9hZC4gKi9cbiAgICB1cmw6IHN0cmluZztcbiAgICAvKiogU2lnbmFsIHRvIGFib3J0IHRoZSBmaWxlIGZldGNoIHJlcXVlc3QuICovXG4gICAgc2lnbmFsPzogQWJvcnRTaWduYWw7XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0byBsb2FkIHRoZSBmaWxlIGFzIHBhcnRzIG9mIGl0IGFyZSBmZXRjaGVkLiBJZiBgZmFsc2VgLFxuICAgICAqIGZldGNoZXMgdGhlIGVudGlyZSBmaWxlIGZpcnN0IGJlZm9yZSBsb2FkaW5nLiBTdHJlYW1lZCBsb2FkaW5nIHJlZHVjZXNcbiAgICAgKiBtZW1vcnkgdXNhZ2UuIElmIG5vdCBzZXQsIGRlZmF1bHRzIHRvIGB0cnVlYC5cbiAgICAgKi9cbiAgICBzdHJlYW1lZD86IGJvb2xlYW47XG59XG5cbi8qKiBPcHRpb25zIHVzZWQgZHVyaW5nIGxvYWRpbmcuICovXG5leHBvcnQgdHlwZSBMb2FkT3B0aW9ucyA9IHN0cmluZyB8IFVybExvYWRPcHRpb25zO1xuXG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIHByZWZhYnMsIHNjZW5lcywgYW5kIGdsVEYuXG4gKlxuICogRm9yIG1vcmUgaW5mb3JtYXRpb24gaGF2ZSBhIGxvb2sgYXQgdGhlIGRlcml2ZWQgdHlwZXM6XG4gKiAtIHtAbGluayBTY2VuZX0gZm9yIFdvbmRlcmxhbmQgRW5naW5lIGFjdGl2YXRhYmxlIHNjZW5lcyAoLmJpbilcbiAqIC0ge0BsaW5rIFByZWZhYkdMVEZ9IGZvciBnbFRGIHNjZW5lc1xuICpcbiAqICMjIyMgUmVzb3VyY2VzXG4gKlxuICogV2hpbGUgKiptZXNoZXMqKiwgKip0ZXh0dXJlcyoqLCBhbmQgKiptYXRlcmlhbHMqKiBhcmUgc2hhcmVkXG4gKiBvbiB0aGUge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmV9IGluc3RhbmNlLCBhIHNjZW5lIGNvbWVzIHdpdGg6XG4gKiAtIEFuaW1hdGlvbnM6IE1hbmFnZWQgdXNpbmcge0BsaW5rIFByZWZhYi5hbmltYXRpb25zfVxuICogLSBTa2luczogTWFuYWdlZCB1c2luZyB7QGxpbmsgUHJlZmFiLnNraW5zfVxuICpcbiAqIFRob3NlIHJlc291cmNlcyBhcmUgYm91bmQgdG8gdGhlIG9iamVjdCBoaWVyYXJjaHkgYW5kIGFyZSB0aHVzIHJlcXVpcmVkIHRvIGJlXG4gKiBwZXItc2NlbmUuXG4gKlxuICogIyMjIyBEZXN0cnVjdGlvblxuICpcbiAqIEZvciBub3csIGRlc3Ryb3lpbmcgYSBzY2VuZSBkb2Vzbid0IGF1dG9tYXRpY2FsbHkgcmVtb3ZlIHRoZSByZXNvdXJjZXMgaXRcbiAqIHJlZmVyZW5jZXMgaW4gdGhlIGVuZ2luZS4gRm9yIG1vcmUgaW5mb3JtYXRpb24sIGhhdmUgYSBsb29rIGF0IHRoZVxuICoge0BsaW5rIFNjZW5lLmRlc3Ryb3l9IG1ldGhvZC5cbiAqXG4gKiAjIyMjIElzb2xhdGlvblxuICpcbiAqIEl0J3MgZm9yYmlkZGVuIHRvIG1peCBvYmplY3RzIGFuZCBjb21wb25lbnRzIGZyb20gZGlmZmVyZW50IHNjZW5lcywgZS5nLixcbiAqXG4gKiBgYGBqc1xuICogY29uc3Qgb2JqQSA9IHNjZW5lQS5hZGRDaGlsZCgpO1xuICogY29uc3Qgb2JqQiA9IHNjZW5lQi5hZGRDaGlsZCgpO1xuICogb2JqQS5wYXJlbnQgPSBvYmpCOyAvLyBUaHJvd3NcbiAqIGBgYFxuICpcbiAqIEBjYXRlZ29yeSBzY2VuZVxuICpcbiAqIEBzaW5jZSAxLjIuMFxuICovXG5leHBvcnQgY2xhc3MgUHJlZmFiIHtcbiAgICBzdGF0aWMgbWFrZVVybExvYWRPcHRpb25zKG9wdGlvbnM6IExvYWRPcHRpb25zKTogVXJsTG9hZE9wdGlvbnMge1xuICAgICAgICByZXR1cm4gaXNTdHJpbmcob3B0aW9ucykgPyB7dXJsOiBvcHRpb25zfSA6IG9wdGlvbnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZCBhbiBgQXJyYXlCdWZmZXJgIHVzaW5nIGZldGNoLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdHMgVGhlIHVybCBvciBvcHRpb25zLlxuICAgICAqIEBwYXJhbSBwcm9ncmVzcyBQcm9ncmVzcyBjYWxsYmFja1xuICAgICAqIEByZXR1cm5zIEFuIHtAbGluayBJbk1lbW9yeUxvYWRPcHRpb25zfSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgc3RhdGljIGFzeW5jIGxvYWRCdWZmZXIoXG4gICAgICAgIG9wdGlvbnM6IExvYWRPcHRpb25zLFxuICAgICAgICBwcm9ncmVzcz86IFByb2dyZXNzQ2FsbGJhY2tcbiAgICApOiBQcm9taXNlPEluTWVtb3J5TG9hZE9wdGlvbnM+IHtcbiAgICAgICAgY29uc3Qgb3B0cyA9IFByZWZhYi5tYWtlVXJsTG9hZE9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IGZldGNoV2l0aFByb2dyZXNzKG9wdHMudXJsLCBwcm9ncmVzcywgb3B0cy5zaWduYWwpO1xuICAgICAgICBjb25zdCBiYXNlVVJMID0gZ2V0QmFzZVVybChvcHRzLnVybCk7XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gZ2V0RmlsZW5hbWUob3B0cy51cmwpO1xuICAgICAgICByZXR1cm4gey4uLm9wdHMsIGJ1ZmZlciwgYmFzZVVSTCwgZmlsZW5hbWV9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvYWQgYSBgUmVhZGFibGVTdHJlYW1gIHVzaW5nIGZldGNoLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdHMgVGhlIHVybCBvciBvcHRpb25zLlxuICAgICAqIEBwYXJhbSBwcm9ncmVzcyBQcm9ncmVzcyBjYWxsYmFja1xuICAgICAqIEByZXR1cm5zIEEge0BsaW5rIFN0cmVhbUxvYWRPcHRpb25zfSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgc3RhdGljIGFzeW5jIGxvYWRTdHJlYW0oXG4gICAgICAgIG9wdGlvbnM6IExvYWRPcHRpb25zLFxuICAgICAgICBwcm9ncmVzcz86IFByb2dyZXNzQ2FsbGJhY2tcbiAgICApOiBQcm9taXNlPFN0cmVhbUxvYWRPcHRpb25zPiB7XG4gICAgICAgIGNvbnN0IG9wdHMgPSBQcmVmYWIubWFrZVVybExvYWRPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCBmZXRjaFN0cmVhbVdpdGhQcm9ncmVzcyhvcHRzLnVybCwgcHJvZ3Jlc3MsIG9wdHMuc2lnbmFsKTtcbiAgICAgICAgY29uc3QgYmFzZVVSTCA9IGdldEJhc2VVcmwob3B0cy51cmwpO1xuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IGdldEZpbGVuYW1lKG9wdHMudXJsKTtcbiAgICAgICAgcmV0dXJuIHsuLi5vcHRzLCBzdHJlYW0sIGJhc2VVUkwsIGZpbGVuYW1lfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBWYWxpZGF0ZSB0aGUgaW4tbWVtb3J5IGxvYWQgb3B0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgdG8gdmFsaWRhdGUuXG4gICAgICogQHJldHVybnMgVmFsaWRhdGVkIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHN0YXRpYyB2YWxpZGF0ZUJ1ZmZlck9wdGlvbnMob3B0aW9uczogSW5NZW1vcnlMb2FkT3B0aW9ucyk6IHtcbiAgICAgICAgYnVmZmVyOiBBcnJheUJ1ZmZlcjtcbiAgICAgICAgYmFzZVVSTDogc3RyaW5nO1xuICAgICAgICB1cmw6IHN0cmluZztcbiAgICB9IHtcbiAgICAgICAgY29uc3Qge2J1ZmZlciwgYmFzZVVSTCwgZmlsZW5hbWUgPSAnc2NlbmUuYmluJ30gPSBvcHRpb25zO1xuICAgICAgICBpZiAoIWJ1ZmZlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWlzc2luZyAnYnVmZmVyJyBpbiBvcHRpb25zXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNTdHJpbmcoYmFzZVVSTCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm1pc3NpbmcgJ2Jhc2VVUkwnIGluIG9wdGlvbnNcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXJsID0gYmFzZVVSTCA/IGAke2Jhc2VVUkx9LyR7ZmlsZW5hbWV9YCA6IGZpbGVuYW1lO1xuICAgICAgICByZXR1cm4ge2J1ZmZlciwgYmFzZVVSTCwgdXJsfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBWYWxpZGF0ZSB0aGUgc3RyZWFtIGxvYWQgb3B0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgdG8gdmFsaWRhdGUuXG4gICAgICogQHJldHVybnMgVmFsaWRhdGVkIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHN0YXRpYyB2YWxpZGF0ZVN0cmVhbU9wdGlvbnMob3B0aW9uczogU3RyZWFtTG9hZE9wdGlvbnMpOiB7XG4gICAgICAgIHN0cmVhbTogUmVhZGFibGVTdHJlYW08VWludDhBcnJheT47XG4gICAgICAgIGJhc2VVUkw6IHN0cmluZztcbiAgICAgICAgdXJsOiBzdHJpbmc7XG4gICAgfSB7XG4gICAgICAgIGNvbnN0IHtzdHJlYW0sIGJhc2VVUkwsIGZpbGVuYW1lID0gJ3NjZW5lLmJpbid9ID0gb3B0aW9ucztcbiAgICAgICAgaWYgKCFzdHJlYW0pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm1pc3NpbmcgJ3N0cmVhbScgaW4gb3B0aW9uc1wiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzU3RyaW5nKGJhc2VVUkwpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtaXNzaW5nICdiYXNlVVJMJyBpbiBvcHRpb25zXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVybCA9IGJhc2VVUkwgPyBgJHtiYXNlVVJMfS8ke2ZpbGVuYW1lfWAgOiBmaWxlbmFtZTtcbiAgICAgICAgcmV0dXJuIHtzdHJlYW0sIGJhc2VVUkwsIHVybH07XG4gICAgfVxuXG4gICAgLyoqIEluZGV4IGluIHRoZSBzY2VuZSBtYW5hZ2VyLiBAaGlkZGVuICovXG4gICAgcmVhZG9ubHkgX2luZGV4O1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgcHJvdGVjdGVkIF9lbmdpbmU6IFdvbmRlcmxhbmRFbmdpbmU7XG5cbiAgICAvKipcbiAgICAgKiBDb21wb25lbnQgbWFuYWdlciBjYWNoaW5nIHRvIGF2b2lkIEdDLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHJlYWRvbmx5IF9jb21wb25lbnRzOiBDb21wb25lbnRNYW5hZ2VycztcbiAgICAvKipcbiAgICAgKiBKYXZhU2NyaXB0IGNvbXBvbmVudHMgZm9yIHRoaXMgc2NlbmUuXG4gICAgICpcbiAgICAgKiBUaGlzIGFycmF5IGlzIG1vdmVkIGludG8gdGhlIFdBU00gaW5zdGFuY2UgdXBvbiBhY3RpdmF0aW9uLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHJlYWRvbmx5IF9qc0NvbXBvbmVudHM6IENvbXBvbmVudFtdID0gW107XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbWFwIGlzIGluZGV4ZWQgdXNpbmcgdGhlIHBoeXN4IGNvbXBvbmVudCBpZC5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICByZWFkb25seSBfcHhDYWxsYmFja3M6IE1hcDxudW1iZXIsIENvbGxpc2lvbkNhbGxiYWNrW10+ID0gbmV3IE1hcCgpO1xuXG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBwcml2YXRlIHJlYWRvbmx5IF9hbmltYXRpb25zO1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgcHJpdmF0ZSByZWFkb25seSBfc2tpbnM7XG5cbiAgICAvKipcbiAgICAgKiBPYmplY3QgY2xhc3MgaW5zdGFuY2VzIHRvIGF2b2lkIEdDLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX29iamVjdENhY2hlOiAoT2JqZWN0M0QgfCBudWxsKVtdID0gW107XG5cbiAgICAvKipcbiAgICAgKiBgb25EZXN0cm95KClgIGRlcHRoLlxuICAgICAqXG4gICAgICogTXVsdGlwbGUgY29tcG9uZW50cyBjYW4gc3RhY2sgYG9uRGVzdHJveSgpYCBjYWxscy5cbiAgICAgKi9cbiAgICBwcml2YXRlIF9wZW5kaW5nRGVzdHJveTogbnVtYmVyID0gMDtcblxuICAgIC8qKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbmdpbmU6IFdvbmRlcmxhbmRFbmdpbmUsIGluZGV4OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lID0gZW5naW5lO1xuICAgICAgICB0aGlzLl9pbmRleCA9IGluZGV4O1xuXG4gICAgICAgIHRoaXMuX2NvbXBvbmVudHMgPSBuZXcgQ29tcG9uZW50TWFuYWdlcnModGhpcyk7XG4gICAgICAgIHRoaXMuX2FuaW1hdGlvbnMgPSBuZXcgUmVzb3VyY2VNYW5hZ2VyKHRoaXMgYXMgUHJlZmFiLCBBbmltYXRpb24pO1xuICAgICAgICB0aGlzLl9za2lucyA9IG5ldyBSZXNvdXJjZU1hbmFnZXIodGhpcyBhcyBQcmVmYWIsIFNraW4pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhIG5ldyB7QGxpbmsgT2JqZWN0M0R9IHRvIHRoZSByb290IG9iamVjdC5cbiAgICAgKlxuICAgICAqIFNlZSB7QGxpbmsgT2JqZWN0M0QuYWRkQ2hpbGR9IGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBuZXcge0BsaW5rIE9iamVjdDNEfS5cbiAgICAgKi9cbiAgICBhZGRDaGlsZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcCgwKS5hZGRDaGlsZCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhbiBvYmplY3QgdG8gdGhlIHNjZW5lLlxuICAgICAqXG4gICAgICogQWx0ZXJuYXRpdmVseSwgeW91IGNhbiB1c2Uge0BsaW5rIFByZWZhYi5hZGRDaGlsZH0gdG8gYWRkIHRoZSBvYmplY3RcbiAgICAgKiB0byB0aGUgcm9vdCwgb3Ige0BsaW5rIE9iamVjdDNELmFkZENoaWxkfSB0byBhZGQgdGhlIG9iamVjdCB0byBhIGdpdmVuIHBhcmVudDpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgcGFyZW50ID0gc2NlbmUuYWRkQ2hpbGQoKTtcbiAgICAgKiBjb25zdCBjaGlsZCA9IHBhcmVudC5hZGRDaGlsZCgpO1xuICAgICAqIC8vIEVxdWl2YWxlbnQgdXNpbmcgc2NlbmUuYWRkT2JqZWN0XG4gICAgICogY29uc3Qgc2libGluZyA9IHNjZW5lLmFkZE9iamVjdChwYXJlbnQpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHBhcmVudCBQYXJlbnQgb2JqZWN0IG9yIGBudWxsYC5cbiAgICAgKiBAcmV0dXJucyBBIG5ld2x5IGNyZWF0ZWQgb2JqZWN0LlxuICAgICAqL1xuICAgIGFkZE9iamVjdChwYXJlbnQ6IE9iamVjdDNEIHwgbnVsbCA9IG51bGwpOiBPYmplY3QzRCB7XG4gICAgICAgIGlmIChwYXJlbnQ/Lm1hcmtlZERlc3Ryb3llZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gYWRkIG9iamVjdC4gJHtwYXJlbnR9IGlzIG1hcmtlZCBhcyBkZXN0cm95ZWQuYCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hc3NlcnRPcmlnaW4ocGFyZW50KTtcbiAgICAgICAgcmV0dXJuIChwYXJlbnQgPz8gdGhpcy53cmFwKDApKS5hZGRDaGlsZCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEJhdGNoLWFkZCBvYmplY3RzIHRvIHRoZSBzY2VuZS5cbiAgICAgKlxuICAgICAqIFdpbGwgcHJvdmlkZSBiZXR0ZXIgcGVyZm9ybWFuY2UgZm9yIGFkZGluZyBtdWx0aXBsZSBvYmplY3RzIChlLmcuID4gMTYpXG4gICAgICogdGhhbiBjYWxsaW5nIHtAbGluayBTY2VuZSNhZGRPYmplY3R9IHJlcGVhdGVkbHkgaW4gYSBsb29wLlxuICAgICAqXG4gICAgICogQnkgcHJvdmlkaW5nIHVwZnJvbnQgaW5mb3JtYXRpb24gb2YgaG93IG1hbnkgb2JqZWN0cyB3aWxsIGJlIHJlcXVpcmVkLFxuICAgICAqIHRoZSBlbmdpbmUgaXMgYWJsZSB0byBiYXRjaC1hbGxvY2F0ZSB0aGUgcmVxdWlyZWQgbWVtb3J5IHJhdGhlciB0aGFuXG4gICAgICogY29udmVydmF0aXZlbHkgZ3JvdyB0aGUgbWVtb3J5IGluIHNtYWxsIHN0ZXBzLlxuICAgICAqXG4gICAgICogQGV4cGVyaW1lbnRhbCBUaGlzIEFQSSBtaWdodCBjaGFuZ2UgaW4gdXBjb21pbmcgdmVyc2lvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY291bnQgTnVtYmVyIG9mIG9iamVjdHMgdG8gYWRkLlxuICAgICAqIEBwYXJhbSBwYXJlbnQgUGFyZW50IG9iamVjdCBvciBgbnVsbGAsIGRlZmF1bHQgYG51bGxgLlxuICAgICAqIEBwYXJhbSBjb21wb25lbnRDb3VudEhpbnQgSGludCBmb3IgaG93IG1hbnkgY29tcG9uZW50cyBpbiB0b3RhbCB3aWxsXG4gICAgICogICAgICBiZSBhZGRlZCB0byB0aGUgY3JlYXRlZCBvYmplY3RzIGFmdGVyd2FyZHMsIGRlZmF1bHQgYDBgLlxuICAgICAqIEByZXR1cm5zIE5ld2x5IGNyZWF0ZWQgb2JqZWN0c1xuICAgICAqL1xuICAgIGFkZE9iamVjdHMoXG4gICAgICAgIGNvdW50OiBudW1iZXIsXG4gICAgICAgIHBhcmVudDogT2JqZWN0M0QgfCBudWxsID0gbnVsbCxcbiAgICAgICAgY29tcG9uZW50Q291bnRIaW50OiBudW1iZXIgPSAwXG4gICAgKTogT2JqZWN0M0RbXSB7XG4gICAgICAgIGNvbnN0IHBhcmVudElkID0gcGFyZW50ID8gcGFyZW50Ll9pZCA6IDA7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20ucmVxdWlyZVRlbXBNZW0oY291bnQgKiAyKTtcbiAgICAgICAgY29uc3QgYWN0dWFsQ291bnQgPSB0aGlzLmVuZ2luZS53YXNtLl93bF9zY2VuZV9hZGRfb2JqZWN0cyhcbiAgICAgICAgICAgIHRoaXMuX2luZGV4LFxuICAgICAgICAgICAgcGFyZW50SWQsXG4gICAgICAgICAgICBjb3VudCxcbiAgICAgICAgICAgIGNvbXBvbmVudENvdW50SGludCB8fCAwLFxuICAgICAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fdGVtcE1lbSxcbiAgICAgICAgICAgIHRoaXMuZW5naW5lLndhc20uX3RlbXBNZW1TaXplID4+IDFcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgaWRzID0gdGhpcy5lbmdpbmUud2FzbS5fdGVtcE1lbVVpbnQxNi5zdWJhcnJheSgwLCBhY3R1YWxDb3VudCk7XG4gICAgICAgIGNvbnN0IHdyYXBwZXIgPSB0aGlzLndyYXAuYmluZCh0aGlzKTtcbiAgICAgICAgY29uc3Qgb2JqZWN0cyA9IEFycmF5LmZyb20oaWRzLCB3cmFwcGVyKTtcbiAgICAgICAgcmV0dXJuIG9iamVjdHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJlLWFsbG9jYXRlIG1lbW9yeSBmb3IgYSBnaXZlbiBhbW91bnQgb2Ygb2JqZWN0cyBhbmQgY29tcG9uZW50cy5cbiAgICAgKlxuICAgICAqIFdpbGwgcHJvdmlkZSBiZXR0ZXIgcGVyZm9ybWFuY2UgZm9yIGFkZGluZyBvYmplY3RzIGxhdGVyIHdpdGgge0BsaW5rIFNjZW5lI2FkZE9iamVjdH1cbiAgICAgKiBhbmQge0BsaW5rIFNjZW5lI2FkZE9iamVjdHN9LlxuICAgICAqXG4gICAgICogQnkgcHJvdmlkaW5nIHVwZnJvbnQgaW5mb3JtYXRpb24gb2YgaG93IG1hbnkgb2JqZWN0cyB3aWxsIGJlIHJlcXVpcmVkLFxuICAgICAqIHRoZSBlbmdpbmUgaXMgYWJsZSB0byBiYXRjaC1hbGxvY2F0ZSB0aGUgcmVxdWlyZWQgbWVtb3J5IHJhdGhlciB0aGFuXG4gICAgICogY29uc2VydmF0aXZlbHkgZ3JvdyB0aGUgbWVtb3J5IGluIHNtYWxsIHN0ZXBzLlxuICAgICAqXG4gICAgICogKipFeHBlcmltZW50YWw6KiogVGhpcyBBUEkgbWlnaHQgY2hhbmdlIGluIHVwY29taW5nIHZlcnNpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9iamVjdENvdW50IE51bWJlciBvZiBvYmplY3RzIHRvIGFkZC5cbiAgICAgKiBAcGFyYW0gY29tcG9uZW50Q291bnRQZXJUeXBlIEFtb3VudCBvZiBjb21wb25lbnRzIHRvXG4gICAgICogICAgICBhbGxvY2F0ZSBmb3Ige0BsaW5rIE9iamVjdDNELmFkZENvbXBvbmVudH0sIGUuZy4gYHttZXNoOiAxMDAsIGNvbGxpc2lvbjogMjAwLCBcIm15LWNvbXBcIjogMTAwfWAuXG4gICAgICogQHNpbmNlIDAuOC4xMFxuICAgICAqL1xuICAgIHJlc2VydmVPYmplY3RzKG9iamVjdENvdW50OiBudW1iZXIsIGNvbXBvbmVudENvdW50UGVyVHlwZTogUmVjb3JkPHN0cmluZywgbnVtYmVyPikge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29tcG9uZW50Q291bnRQZXJUeXBlID0gY29tcG9uZW50Q291bnRQZXJUeXBlIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IG5hbWVzID0gT2JqZWN0LmtleXMoY29tcG9uZW50Q291bnRQZXJUeXBlKTtcblxuICAgICAgICBjb25zdCBjb3VudHNQZXJUeXBlSW5kZXggPSB3YXNtLl90ZW1wTWVtSW50O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2NvbXBvbmVudHMubWFuYWdlcnNDb3VudDsgKytpKSB7XG4gICAgICAgICAgICBjb3VudHNQZXJUeXBlSW5kZXhbaV0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgbmFtZSBvZiBuYW1lcykge1xuICAgICAgICAgICAgY29uc3QgY291bnQgPSBjb21wb25lbnRDb3VudFBlclR5cGVbbmFtZV07XG4gICAgICAgICAgICBjb25zdCBuYXRpdmVJbmRleCA9IHRoaXMuX2NvbXBvbmVudHMuZ2V0TmF0aXZlTWFuYWdlcihuYW1lKTtcbiAgICAgICAgICAgIGNvdW50c1BlclR5cGVJbmRleFtuYXRpdmVJbmRleCAhPT0gbnVsbCA/IG5hdGl2ZUluZGV4IDogdGhpcy5fY29tcG9uZW50cy5qc10gKz1cbiAgICAgICAgICAgICAgICBjb3VudDtcbiAgICAgICAgfVxuICAgICAgICB3YXNtLl93bF9zY2VuZV9yZXNlcnZlX29iamVjdHModGhpcy5faW5kZXgsIG9iamVjdENvdW50LCB3YXNtLl90ZW1wTWVtKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSb290IG9iamVjdCdzIGNoaWxkcmVuLlxuICAgICAqXG4gICAgICogU2VlIHtAbGluayBPYmplY3QzRC5nZXRDaGlsZHJlbn0gZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IERlc3RpbmF0aW9uIGFycmF5LCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IGB0aGlzLmNoaWxkcmVuQ291bnRgIGVsZW1lbnRzLlxuICAgICAqIEByZXR1cm5zIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICovXG4gICAgZ2V0Q2hpbGRyZW4ob3V0OiBPYmplY3QzRFtdID0gbmV3IEFycmF5KHRoaXMuY2hpbGRyZW5Db3VudCkpOiBPYmplY3QzRFtdIHtcbiAgICAgICAgY29uc3Qgcm9vdCA9IHRoaXMud3JhcCgwKTtcbiAgICAgICAgcmV0dXJuIHJvb3QuZ2V0Q2hpbGRyZW4ob3V0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUb3AtbGV2ZWwgb2JqZWN0cyBvZiB0aGlzIHNjZW5lLlxuICAgICAqXG4gICAgICogU2VlIHtAbGluayBPYmplY3QzRC5jaGlsZHJlbn0gZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4yLjBcbiAgICAgKi9cbiAgICBnZXQgY2hpbGRyZW4oKTogT2JqZWN0M0RbXSB7XG4gICAgICAgIGNvbnN0IHJvb3QgPSB0aGlzLndyYXAoMCk7XG4gICAgICAgIHJldHVybiByb290LmNoaWxkcmVuO1xuICAgIH1cblxuICAgIC8qKiBUaGUgbnVtYmVyIG9mIGNoaWxkcmVuIG9mIHRoZSByb290IG9iamVjdC4gKi9cbiAgICBnZXQgY2hpbGRyZW5Db3VudCgpOiBudW1iZXIge1xuICAgICAgICBjb25zdCByb290ID0gdGhpcy53cmFwKDApO1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfb2JqZWN0X2dldF9jaGlsZHJlbl9jb3VudChyb290Ll9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VhcmNoIGZvciBvYmplY3RzIG1hdGNoaW5nIHRoZSBuYW1lLlxuICAgICAqXG4gICAgICogU2VlIHtAbGluayBPYmplY3QzRC5maW5kQnlOYW1lfSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIHRvIHNlYXJjaCBmb3IuXG4gICAgICogQHBhcmFtIHJlY3Vyc2l2ZSBJZiBgdHJ1ZWAsIHRoZSBtZXRob2Qgd2lsbCBsb29rIGF0IGFsbCB0aGUgb2JqZWN0cyBvZlxuICAgICAqICAgICB0aGlzIHNjZW5lLiBJZiBgZmFsc2VgLCB0aGlzIG1ldGhvZCB3aWxsIG9ubHkgcGVyZm9ybSB0aGUgc2VhcmNoIGluXG4gICAgICogICAgIHJvb3Qgb2JqZWN0cy5cbiAgICAgKiBAcmV0dXJucyBBbiBhcnJheSBvZiB7QGxpbmsgT2JqZWN0M0R9IG1hdGNoaW5nIHRoZSBuYW1lLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMi4wXG4gICAgICovXG4gICAgZmluZEJ5TmFtZShuYW1lOiBzdHJpbmcsIHJlY3Vyc2l2ZSA9IGZhbHNlKTogT2JqZWN0M0RbXSB7XG4gICAgICAgIGNvbnN0IHJvb3QgPSB0aGlzLndyYXAoMCk7XG4gICAgICAgIHJldHVybiByb290LmZpbmRCeU5hbWUobmFtZSwgcmVjdXJzaXZlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZWFyY2ggZm9yIGFsbCAqKnRvcC1sZXZlbCoqIG9iamVjdHMgbWF0Y2hpbmcgdGhlIG5hbWUuXG4gICAgICpcbiAgICAgKiBTZWUge0BsaW5rIE9iamVjdDNELmZpbmRCeU5hbWVEaXJlY3R9IGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgdG8gc2VhcmNoIGZvci5cbiAgICAgKiBAcmV0dXJucyBBbiBhcnJheSBvZiB7QGxpbmsgT2JqZWN0M0R9IG1hdGNoaW5nIHRoZSBuYW1lLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMi4wXG4gICAgICovXG4gICAgZmluZEJ5TmFtZURpcmVjdChuYW1lOiBzdHJpbmcpOiBPYmplY3QzRFtdIHtcbiAgICAgICAgY29uc3Qgcm9vdCA9IHRoaXMud3JhcCgwKTtcbiAgICAgICAgcmV0dXJuIHJvb3QuZmluZEJ5TmFtZURpcmVjdChuYW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZWFyY2ggZm9yICoqYWxsIG9iamVjdHMqKiBtYXRjaGluZyB0aGUgbmFtZS5cbiAgICAgKlxuICAgICAqIFNlZSB7QGxpbmsgT2JqZWN0M0QuZmluZEJ5TmFtZVJlY3Vyc2l2ZX0gZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSB0byBzZWFyY2ggZm9yLlxuICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHtAbGluayBPYmplY3QzRH0gbWF0Y2hpbmcgdGhlIG5hbWUuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4yLjBcbiAgICAgKi9cbiAgICBmaW5kQnlOYW1lUmVjdXJzaXZlKG5hbWU6IHN0cmluZyk6IE9iamVjdDNEW10ge1xuICAgICAgICBjb25zdCByb290ID0gdGhpcy53cmFwKDApO1xuICAgICAgICByZXR1cm4gcm9vdC5maW5kQnlOYW1lUmVjdXJzaXZlKG5hbWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdyYXAgYW4gb2JqZWN0IElEIHVzaW5nIHtAbGluayBPYmplY3R9LlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBtZXRob2QgcGVyZm9ybXMgY2FjaGluZyBhbmQgd2lsbCByZXR1cm4gdGhlIHNhbWVcbiAgICAgKiBpbnN0YW5jZSBvbiBzdWJzZXF1ZW50IGNhbGxzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9iamVjdElkIElEIG9mIHRoZSBvYmplY3QgdG8gY3JlYXRlLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIG9iamVjdFxuICAgICAqL1xuICAgIHdyYXAob2JqZWN0SWQ6IG51bWJlcik6IE9iamVjdDNEIHtcbiAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLl9vYmplY3RDYWNoZTtcbiAgICAgICAgY29uc3QgbyA9IGNhY2hlW29iamVjdElkXSB8fCAoY2FjaGVbb2JqZWN0SWRdID0gbmV3IE9iamVjdDNEKHRoaXMsIG9iamVjdElkKSk7XG4gICAgICAgIHJldHVybiBvO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlc3Ryb3kgdGhlIHNjZW5lLlxuICAgICAqXG4gICAgICogRm9yIG5vdywgZGVzdHJveWluZyBhIHNjZW5lIGRvZXNuJ3QgcmVtb3ZlIHRoZSByZXNvdXJjZXMgaXQgcmVmZXJlbmNlcy4gVGh1cyxcbiAgICAgKiB5b3Ugd2lsbCBuZWVkIHRvIHJlbG9hZCBhIG1haW4gc2NlbmUgdG8gZnJlZSB0aGUgbWVtb3J5LlxuICAgICAqXG4gICAgICogRm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgZGVzdHJ1Y3Rpb24sIGhhdmUgYSBsb29rIGF0IHRoZSB7QGxpbmsgU2NlbmUuZGVzdHJveX0gbWV0aG9kLlxuICAgICAqL1xuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLl9wZW5kaW5nRGVzdHJveSA+IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkl0J3MgZm9yYmlkZGVuIHRvIGRlc3Ryb3kgYSBzY2VuZSBmcm9tIG9uRGVzdHJveSgpLlwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9weENhbGxiYWNrcy5jbGVhcigpO1xuICAgICAgICB0aGlzLmVuZ2luZS5fZGVzdHJveVNjZW5lKHRoaXMpO1xuICAgIH1cblxuICAgIC8qIFB1YmxpYyBHZXR0ZXJzICYgU2V0dGVycyAqL1xuXG4gICAgLyoqXG4gICAgICogYHRydWVgIGlmIHRoZSBzY2VuZSBpcyBhY3RpdmUsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqXG4gICAgICogQWx3YXlzIGZhbHNlIGZvciB7QGxpbmsgUHJlZmFifSBhbmQge0BsaW5rIFByZWZhYkdMVEZ9LlxuICAgICAqL1xuICAgIGdldCBpc0FjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5lbmdpbmUud2FzbS5fd2xfc2NlbmVfYWN0aXZlKHRoaXMuX2luZGV4KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWxhdGl2ZSBkaXJlY3Rvcnkgb2YgdGhlIHNjZW5lIHRoYXQgd2FzIGxvYWRlZC5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgdXNlZCBmb3IgbG9hZGluZyBhbnkgZmlsZXMgcmVsYXRpdmUgdG8gdGhlIHNjZW5lLlxuICAgICAqL1xuICAgIGdldCBiYXNlVVJMKCk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9zY2VuZV9nZXRfYmFzZVVSTCh0aGlzLl9pbmRleCk7XG4gICAgICAgIGlmICghcHRyKSByZXR1cm4gJyc7XG5cbiAgICAgICAgcmV0dXJuIHdhc20uVVRGOFRvU3RyaW5nKHB0cik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmlsZW5hbWUgdXNlZCB3aGVuIGxvYWRpbmcgdGhlIGZpbGUuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgc2NlbmVzIHdhcyBsb2FkZWQgZnJvbSBtZW1vcnkgYW5kIG5vIGZpbGVuYW1lIHdhcyBwcm92aWRlZCxcbiAgICAgKiB0aGlzIGFjY2Vzc29yIHdpbGwgcmV0dXJuIGFuIGVtcHR5IHN0cmluZy5cbiAgICAgKi9cbiAgICBnZXQgZmlsZW5hbWUoKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX3NjZW5lX2dldF9maWxlbmFtZSh0aGlzLl9pbmRleCk7XG4gICAgICAgIGlmICghcHRyKSByZXR1cm4gJyc7XG4gICAgICAgIHJldHVybiB3YXNtLlVURjhUb1N0cmluZyhwdHIpO1xuICAgIH1cblxuICAgIC8qKiBBbmltYXRpb24gcmVzb3VyY2VzICovXG4gICAgZ2V0IGFuaW1hdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hbmltYXRpb25zO1xuICAgIH1cblxuICAgIC8qKiBTa2luIHJlc291cmNlcyAqL1xuICAgIGdldCBza2lucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NraW5zO1xuICAgIH1cblxuICAgIC8qKiBIb3N0aW5nIGVuZ2luZSBpbnN0YW5jZS4gKi9cbiAgICBnZXQgZW5naW5lKCk6IFdvbmRlcmxhbmRFbmdpbmUge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5naW5lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGB0cnVlYCBpZiB0aGUgb2JqZWN0IGlzIGRlc3Ryb3llZCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBJZiB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5lcmFzZVByb3RvdHlwZU9uRGVzdHJveX0gaXMgYHRydWVgLFxuICAgICAqIHJlYWRpbmcgYSBjbGFzcyBhdHRyaWJ1dGUgLyBtZXRob2Qgd2lsbCB0aHJvdy5cbiAgICAgKi9cbiAgICBnZXQgaXNEZXN0cm95ZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbmRleCA8IDA7XG4gICAgfVxuXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1NjZW5lKGRlc3Ryb3llZCknO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgU2NlbmUoJyR7dGhpcy5maWxlbmFtZX0nLCAke3RoaXMuX2luZGV4fSlgO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyB0aGF0IHRoZSBpbnB1dCdzIHNjZW5lIGlzIHRoZSBzYW1lIGFzIHRoaXMgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBJdCBpcyBmb3JiaWRkZW4gdG8gbWl4IG9iamVjdHMgYW5kIGNvbXBvbmVudHMgZnJvbSBkaWZmZXJlbnQgc2NlbmVzLCBlLmcuLFxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBvYmpBID0gc2NlbmVBLmFkZE9iamVjdCgpO1xuICAgICAqIGNvbnN0IG9iakIgPSBzY2VuZUEuYWRkT2JqZWN0KCk7XG4gICAgICogb2JqQS5wYXJlbnQgPSBvYmpCOyAvLyBUaHJvd3NcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciBPYmplY3QgLyBjb21wb25lbnQgdG8gY2hlY2suXG4gICAgICpcbiAgICAgKiBAdGhyb3dzIElmIG90aGVyJ3Mgc2NlbmUgaXNuJ3QgdGhlIHNhbWUgcmVmZXJlbmNlIGFzIHRoaXMuXG4gICAgICovXG4gICAgYXNzZXJ0T3JpZ2luKG90aGVyOiBPYmplY3QzRCB8IENvbXBvbmVudCB8IFNjZW5lUmVzb3VyY2UgfCB1bmRlZmluZWQgfCBudWxsKSB7XG4gICAgICAgIGlmIChvdGhlciAmJiAob3RoZXIuc2NlbmUgYXMgUHJlZmFiKSAhPT0gdGhpcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBdHRlbXB0IHRvIHVzZSAke290aGVyfSBmcm9tICR7b3RoZXIuc2NlbmV9IGluICR7dGhpc31gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERvd25sb2FkIGRlcGVuZGVuY2llcyBhbmQgaW5pdGlhbGl6ZSB0aGUgc2NlbmUuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX2luaXRpYWxpemUoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3NjZW5lX2luaXRpYWxpemUodGhpcy5faW5kZXgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBlcmZvcm0gY2xlYW51cCB1cG9uIG9iamVjdCBkZXN0cnVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBsb2NhbElkIFRoZSBpZCB0byBkZXN0cm95LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9kZXN0cm95T2JqZWN0KGxvY2FsSWQ6IG51bWJlcikge1xuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuX29iamVjdENhY2hlW2xvY2FsSWRdO1xuICAgICAgICBpZiAoIWluc3RhbmNlKSByZXR1cm47XG5cbiAgICAgICAgKGluc3RhbmNlLl9pZCBhcyBudW1iZXIpID0gLTE7XG4gICAgICAgIChpbnN0YW5jZS5fbG9jYWxJZCBhcyBudW1iZXIpID0gLTE7XG5cbiAgICAgICAgLyogRGVzdHJveSB0aGUgcHJvdG90eXBlIG9mIHRoaXMgaW5zdGFuY2UgdG8gYXZvaWQgdXNpbmcgYSBkYW5nbGluZyBvYmplY3QgKi9cbiAgICAgICAgaWYgKHRoaXMuZW5naW5lLmVyYXNlUHJvdG90eXBlT25EZXN0cm95ICYmIGluc3RhbmNlKSB7XG4gICAgICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoaW5zdGFuY2UsIERlc3Ryb3llZE9iamVjdEluc3RhbmNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIFJlbW92ZSBmcm9tIHRoZSBjYWNoZSB0byBhdm9pZCBzaWRlLWVmZmVjdHMgd2hlblxuICAgICAgICAgKiByZS1jcmVhdGluZyBhbiBvYmplY3Qgd2l0aCB0aGUgc2FtZSBpZC4gKi9cbiAgICAgICAgdGhpcy5fb2JqZWN0Q2FjaGVbbG9jYWxJZF0gPSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIEphdmFTY3JpcHQgb25seSBkZXN0cnV0aW9uIG9mIGEgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQG5vdGUgUHJlZmVyIHRvIHVzZSB0aGlzIG1ldGhvZCB0byBtYW51YWxseSBjYWxsaW5nIHRoZSBkZXN0cnVjdGlvbiBjb2RlLFxuICAgICAqIHRvIHByb3RlY3QgdGhlIHVzZXIgZnJvbSBpbGxlZ2FsIG1ldGhvZCBjYWxscyBpbiB7QGxpbmsgQ29tcG9uZW50Lm9uRGVzdHJveX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWFuYWdlciBUaGUgY29tcG9uZW50IG1hbmFnZXIgaW5kZXguXG4gICAgICogQHBhcmFtIGlkIFRoZSBjb21wb25lbnQgaWQuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX2Rlc3Ryb3lDb21wb25lbnQobWFuYWdlcjogbnVtYmVyLCBpZDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXMuX2NvbXBvbmVudHMuZ2V0KG1hbmFnZXIsIGlkKTtcbiAgICAgICAgKyt0aGlzLl9wZW5kaW5nRGVzdHJveTtcbiAgICAgICAgY29tcG9uZW50Py5fdHJpZ2dlck9uRGVzdHJveSgpO1xuICAgICAgICAtLXRoaXMuX3BlbmRpbmdEZXN0cm95O1xuICAgIH1cbn1cbiIsICIvKipcbiAqIFNjaGVkdWxlIGEgdGltZW91dCwgcmVzb2x2aW5nIGluIGB0aW1lYCBtaWxsaXNlY29uZHMuXG4gKlxuICogQG5vdGUgYHNldFRpbWVvdXRgIGJlaW5nIGEgbWFjcm8tdGFzaywgdGhpcyBtZXRob2QgY2FuXG4gKiBiZSB1c2UgYXMgYSBkZWJvdW5jZSBjYWxsLlxuICpcbiAqIEBwYXJhbSB0aW1lIFRoZSB0aW1lIHVudGlsIGl0IHJlc29sdmVzLCBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcmV0dXJucyBBIHByb21pc2UgcmVzb2x2aW5nIGluIGB0aW1lYCBtcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRpbWVvdXQodGltZTogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMpID0+IHNldFRpbWVvdXQocmVzLCB0aW1lKSk7XG59XG5cbi8qKlxuICogQ2xhbXAgdGhlIHZhbHVlIGluIHRoZSByYW5nZSBbbWluOyBtYXhdLlxuICpcbiAqIEBwYXJhbSB2YWwgVGhlIHZhbHVlIHRvIGNsYW1wLlxuICogQHBhcmFtIG1pbiBUaGUgbWluaW11bSB2YWx1ZSAoaW5jbHVzaXZlKS5cbiAqIEBwYXJhbSBtYXggVGhlIG1heGltdW0gdmFsdWUgKGluY2x1c2l2ZSkuXG4gKiBAcmV0dXJucyBUaGUgY2xhbXBlZCB2YWx1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsYW1wKHZhbDogbnVtYmVyLCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiBNYXRoLm1heChNYXRoLm1pbihtYXgsIHZhbCksIG1pbik7XG59XG5cbi8qKlxuICogQ2FwaXRhbGl6ZSB0aGUgZmlyc3QgbGV0dGVyIGluIGEgc3RyaW5nLlxuICpcbiAqIEBub3RlIFRoZSBzdHJpbmcgbXVzdCBiZSBVVEYtOC5cbiAqXG4gKiBAcGFyYW0gc3RyIFRoZSBzdHJpbmcgdG8gZm9ybWF0LlxuICogQHJldHVybnMgVGhlIHN0cmluZyB3aXRoIHRoZSBmaXJzdCBsZXR0ZXIgY2FwaXRhbGl6ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYXBpdGFsaXplRmlyc3RVVEY4KHN0cjogc3RyaW5nKSB7XG4gICAgcmV0dXJuIGAke3N0clswXS50b1VwcGVyQ2FzZSgpfSR7c3RyLnN1YnN0cmluZygxKX1gO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIHByb3h5IHRocm93aW5nIGRlc3Ryb3llZCBlcnJvcnMgdXBvbiBhY2Nlc3MuXG4gKlxuICogQHBhcmFtIHR5cGUgVGhlIHR5cGUgdG8gZGlzcGxheSB1cG9uIGVycm9yXG4gKiBAcmV0dXJucyBUaGUgcHJveHkgaW5zdGFuY2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZURlc3Ryb3llZFByb3h5KHR5cGU6IHN0cmluZykge1xuICAgIHJldHVybiBuZXcgUHJveHkoXG4gICAgICAgIHt9LFxuICAgICAgICB7XG4gICAgICAgICAgICBnZXQoXywgcGFyYW06IHN0cmluZykge1xuICAgICAgICAgICAgICAgIGlmIChwYXJhbSA9PT0gJ2lzRGVzdHJveWVkJykgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgcmVhZCAnJHtwYXJhbX0nIG9mIGRlc3Ryb3llZCAke3R5cGV9YCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0KF8sIHBhcmFtOiBzdHJpbmcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCB3cml0ZSAnJHtwYXJhbX0nIG9mIGRlc3Ryb3llZCAke3R5cGV9YCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgKTtcbn1cbiIsICIvKipcbiAqIFR5cGVzXG4gKi9cblxuaW1wb3J0IHtuYXRpdmVQcm9wZXJ0eSwgZW51bWVyYWJsZX0gZnJvbSAnLi9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7V29uZGVybGFuZEVuZ2luZX0gZnJvbSAnLi9lbmdpbmUuanMnO1xuaW1wb3J0IHtpc0ltYWdlTGlrZSwgaXNOdW1iZXIsIGlzU3RyaW5nfSBmcm9tICcuL3V0aWxzL29iamVjdC5qcyc7XG5pbXBvcnQge0VtaXR0ZXJ9IGZyb20gJy4vdXRpbHMvZXZlbnQuanMnO1xuaW1wb3J0IHtNYXRlcmlhbH0gZnJvbSAnLi9yZXNvdXJjZXMvbWF0ZXJpYWwtbWFuYWdlci5qcyc7XG5pbXBvcnQge0NvbXBvbmVudFByb3BlcnR5LCBUeXBlLCBkZWZhdWx0UHJvcGVydHlDbG9uZXJ9IGZyb20gJy4vcHJvcGVydHkuanMnO1xuaW1wb3J0IHtXQVNNfSBmcm9tICcuL3dhc20uanMnO1xuaW1wb3J0IHtDb25zdHJ1Y3RvciwgSW1hZ2VMaWtlLCBOdW1iZXJBcnJheSwgVHlwZWRBcnJheSwgVHlwZWRBcnJheUN0b3J9IGZyb20gJy4vdHlwZXMuanMnO1xuaW1wb3J0IHtSZXNvdXJjZSwgU2NlbmVSZXNvdXJjZX0gZnJvbSAnLi9yZXNvdXJjZXMvcmVzb3VyY2UuanMnO1xuaW1wb3J0IHtQcmVmYWJ9IGZyb20gJy4vcHJlZmFiLmpzJztcbmltcG9ydCB7U2NlbmV9IGZyb20gJy4vc2NlbmUuanMnO1xuaW1wb3J0IHtjcmVhdGVEZXN0cm95ZWRQcm94eX0gZnJvbSAnLi91dGlscy9taXNjLmpzJztcblxuLyoqXG4gKiBDb21wb25lbnQgY29uc3RydWN0b3IgdHlwZS5cbiAqXG4gKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgcGxlYXNlIGhhdmUgYSBsb29rIGF0IHRoZSB7QGxpbmsgQ29tcG9uZW50fSBjbGFzcy5cbiAqL1xuZXhwb3J0IHR5cGUgQ29tcG9uZW50Q29uc3RydWN0b3I8VCBleHRlbmRzIENvbXBvbmVudCA9IENvbXBvbmVudD4gPSB7XG4gICAgbmV3IChzY2VuZTogUHJlZmFiLCBtYW5hZ2VyOiBudW1iZXIsIGlkOiBudW1iZXIpOiBUO1xufSAmIHtcbiAgICBfaXNCYXNlQ29tcG9uZW50OiBib29sZWFuO1xuICAgIF9wcm9wZXJ0eU9yZGVyOiBzdHJpbmdbXTtcbiAgICBUeXBlTmFtZTogc3RyaW5nO1xuICAgIFByb3BlcnRpZXM6IFJlY29yZDxzdHJpbmcsIENvbXBvbmVudFByb3BlcnR5PjtcbiAgICBJbmhlcml0UHJvcGVydGllcz86IGJvb2xlYW47XG4gICAgb25SZWdpc3Rlcj86IChlbmdpbmU6IFdvbmRlcmxhbmRFbmdpbmUpID0+IHZvaWQ7XG59O1xuXG4vKipcbiAqIENvbXBvbmVudCBwcm90b3R5cGUgaW50ZXJmYWNlLlxuICpcbiAqIFVzZXIgY29tcG9uZW50J3Mgc2hvdWxkIGhhdmUgdGhlIHNhbWUgc3RydWN0dXJlLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIENvbXBvbmVudFByb3RvIHtcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIGNvbXBvbmVudCBpbnN0YW50aWF0aW9uLlxuICAgICAqIEZvciBtb3JlIGluZm9ybWF0aW9uLCBwbGVhc2UgaGF2ZSBhIGxvb2sgYXQge0BsaW5rIENvbXBvbmVudC5pbml0fS5cbiAgICAgKi9cbiAgICBpbml0PzogKCkgPT4gdm9pZDtcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIGNvbXBvbmVudCBpcyBhY3RpdmF0ZWQgZm9yIHRoZSBmaXJzdCB0aW1lLlxuICAgICAqIEZvciBtb3JlIGluZm9ybWF0aW9uLCBwbGVhc2UgaGF2ZSBhIGxvb2sgYXQge0BsaW5rIENvbXBvbmVudC5zdGFydH0uXG4gICAgICovXG4gICAgc3RhcnQ/OiAoKSA9PiB2b2lkO1xuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBvbmNlIHBlciBmcmFtZS5cbiAgICAgKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgcGxlYXNlIGhhdmUgYSBsb29rIGF0IHtAbGluayBDb21wb25lbnQudXBkYXRlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkdCBEZWx0YSB0aW1lLCB0aW1lIHNpbmNlIGxhc3QgdXBkYXRlLlxuICAgICAqL1xuICAgIHVwZGF0ZT86IChkdDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIHRoZSBjb21wb25lbnQgZ29lcyBmcm9tIGRlYWN0aXZhdGVkIHRvIGFjdGl2YXRlZC5cbiAgICAgKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgcGxlYXNlIGhhdmUgYSBsb29rIGF0IHtAbGluayBDb21wb25lbnQub25BY3RpdmF0ZX0uXG4gICAgICovXG4gICAgb25BY3RpdmF0ZT86ICgpID0+IHZvaWQ7XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gdGhlIGNvbXBvbmVudCBnb2VzIGZyb20gYWN0aXZhdGVkIHRvIGRlYWN0aXZhdGVkLlxuICAgICAqIEZvciBtb3JlIGluZm9ybWF0aW9uLCBwbGVhc2UgaGF2ZSBhIGxvb2sgYXQge0BsaW5rIENvbXBvbmVudC5vbkRlYWN0aXZhdGV9LlxuICAgICAqL1xuICAgIG9uRGVhY3RpdmF0ZT86ICgpID0+IHZvaWQ7XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyByZW1vdmVkIGZyb20gaXRzIG9iamVjdC5cbiAgICAgKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgcGxlYXNlIGhhdmUgYSBsb29rIGF0IHtAbGluayBDb21wb25lbnQub25EZXN0cm95fS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjkuMFxuICAgICAqL1xuICAgIG9uRGVzdHJveT86ICgpID0+IHZvaWQ7XG59XG5cbi8qKlxuICogQ2FsbGJhY2sgdHJpZ2dlcmVkIG9uIGNvbGxpc2lvbiBldmVudC5cbiAqXG4gKiBAcGFyYW0gdHlwZSBUeXBlIG9mIHRoZSBldmVudC5cbiAqIEBwYXJhbSBvdGhlciBPdGhlciBjb21wb25lbnQgdGhhdCB3YXMgKHVuKWNvbGxpZGVkIHdpdGhcbiAqL1xuZXhwb3J0IHR5cGUgQ29sbGlzaW9uQ2FsbGJhY2sgPSAodHlwZTogQ29sbGlzaW9uRXZlbnRUeXBlLCBvdGhlcjogUGh5c1hDb21wb25lbnQpID0+IHZvaWQ7XG5cbi8qKiBAdG9kbyBSZW1vdmUgYXQgMS4wLjAgKi9cbmRlY2xhcmUgY29uc3QgV0w6IFdvbmRlcmxhbmRFbmdpbmU7XG5cbi8qKlxuICogV29uZGVybGFuZCBFbmdpbmUgQVBJXG4gKiBAbmFtZXNwYWNlIFdMXG4gKi9cblxuLyoqXG4gKiBEZWZhdWx0IHNldCBvZiBsb2dnaW5nIHRhZ3MgdXNlZCBieSB0aGUgQVBJLlxuICovXG5leHBvcnQgZW51bSBMb2dUYWcge1xuICAgIC8qKiBJbml0aWFsaXphdGlvbiwgY29tcG9uZW50IHJlZ2lzdHJhdGlvbiwgZXRjLi4uICovXG4gICAgRW5naW5lID0gMCxcbiAgICAvKiogU2NlbmUgbG9hZGluZyAqL1xuICAgIFNjZW5lID0gMSxcbiAgICAvKiogQ29tcG9uZW50IGluaXQsIHVwZGF0ZSwgZXRjLi4uICovXG4gICAgQ29tcG9uZW50ID0gMixcbn1cblxuLyoqXG4gKiBDb2xsaWRlciB0eXBlIGVudW0gZm9yIHtAbGluayBDb2xsaXNpb25Db21wb25lbnR9LlxuICovXG5leHBvcnQgZW51bSBDb2xsaWRlciB7XG4gICAgLyoqXG4gICAgICogKipTcGhlcmUgQ29sbGlkZXIqKjpcbiAgICAgKlxuICAgICAqIFNpbXBsZXN0IGFuZCBtb3N0IHBlcmZvcm1hbnQgY29sbGlzaW9uIHNoYXBlLiBJZiB0aGlzIHR5cGUgaXMgc2V0IG9uIGFcbiAgICAgKiB7QGxpbmsgQ29sbGlzaW9uQ29tcG9uZW50fSwgb25seSB0aGUgZmlyc3QgY29tcG9uZW50IG9mXG4gICAgICoge0BsaW5rIENvbGxpc2lvbkNvbXBvbmVudCNleHRlbnRzfSB3aWxsIGJlIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZSByYWRpdXMuXG4gICAgICovXG4gICAgU3BoZXJlID0gMCxcblxuICAgIC8qKlxuICAgICAqICoqQXhpcyBBbGlnbmVkIEJvdW5kaW5nIEJveCBDb2xsaWRlcioqOlxuICAgICAqXG4gICAgICogQm94IHRoYXQgaXMgYWx3YXlzIGFsaWduZWQgdG8gWFlaIGF4aXMuIEl0IGNhbm5vdCBiZSByb3RhdGVkIGJ1dCBpcyBtb3JlXG4gICAgICogZWZmaWNpZW50IHRoYW4ge0BsaW5rIENvbGxpZGVyLkJveH0uXG4gICAgICovXG4gICAgQXhpc0FsaWduZWRCb3ggPSAxLFxuXG4gICAgLyoqXG4gICAgICogKipBbGlnbmVkIEJvdW5kaW5nIEJveCBDb2xsaWRlcioqOlxuICAgICAqXG4gICAgICogQm94IHRoYXQgbWF0Y2hlcyB0aGUgb2JqZWN0J3Mgcm90YXRpb24gYW5kIHRyYW5zbGF0aW9uIGNvcnJlY3RseS4gVGhpc1xuICAgICAqIGlzIHRoZSBsZWFzdCBlZmZpY2llbnQgY29sbGlkZXIgYW5kIHNob3VsZCBvbmx5IGJlIGNob3NlbiBvdmVyXG4gICAgICoge0BsaW5rIENvbGxpZGVyLlNwaGVyZX0gYW5kIHtAbGluayBDb2xsaWRlci5BeGlzQWxpZ25lZEJveH0gaWYgcmVhbGx5XG4gICAgICogbmVjZXNzYXJ5LlxuICAgICAqL1xuICAgIEJveCA9IDIsXG59XG5cbi8qKlxuICogQWxpZ25tZW50IHR5cGUgZW51bSBmb3Ige0BsaW5rIFRleHRDb21wb25lbnR9LlxuICovXG5leHBvcnQgZW51bSBBbGlnbm1lbnQge1xuICAgIC8qKiBUZXh0IHN0YXJ0IGlzIGF0IG9iamVjdCBvcmlnaW4gKi9cbiAgICBMZWZ0ID0gMCxcblxuICAgIC8qKiBUZXh0IGNlbnRlciBpcyBhdCBvYmplY3Qgb3JpZ2luICovXG4gICAgQ2VudGVyID0gMSxcblxuICAgIC8qKiBUZXh0IGVuZCBpcyBhdCBvYmplY3Qgb3JpZ2luICovXG4gICAgUmlnaHQgPSAyLFxufVxuXG4vKipcbiAqIFZlcnRpY2FsIGFsaWdubWVudCB0eXBlIGVudW0gZm9yIHtAbGluayBUZXh0Q29tcG9uZW50fS5cbiAqL1xuZXhwb3J0IGVudW0gVmVydGljYWxBbGlnbm1lbnQge1xuICAgIC8qKiBUZXh0IGxpbmUgaXMgYXQgb2JqZWN0IG9yaWdpbiAqL1xuICAgIExpbmUgPSAwLFxuXG4gICAgLyoqIFRleHQgbWlkZGxlIGlzIGF0IG9iamVjdCBvcmlnaW4gKi9cbiAgICBNaWRkbGUgPSAxLFxuXG4gICAgLyoqIFRleHQgdG9wIGlzIGF0IG9iamVjdCBvcmlnaW4gKi9cbiAgICBUb3AgPSAyLFxuXG4gICAgLyoqIFRleHQgYm90dG9tIGlzIGF0IG9iamVjdCBvcmlnaW4gKi9cbiAgICBCb3R0b20gPSAzLFxufVxuXG4vKipcbiAqIEp1c3RpZmljYXRpb24gdHlwZSBlbnVtIGZvciB7QGxpbmsgVGV4dENvbXBvbmVudH0uXG4gKlxuICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgVmVydGljYWxBbGlnbm1lbnR9IGluc3RlYWQuXG4gKi9cbmV4cG9ydCBjb25zdCBKdXN0aWZpY2F0aW9uID0gVmVydGljYWxBbGlnbm1lbnQ7XG5cbi8qKlxuICogRWZmZWN0IHR5cGUgZW51bSBmb3Ige0BsaW5rIFRleHRDb21wb25lbnR9LlxuICovXG5leHBvcnQgZW51bSBUZXh0RWZmZWN0IHtcbiAgICAvKiogVGV4dCBpcyByZW5kZXJlZCBub3JtYWxseSAqL1xuICAgIE5vbmUgPSAwLFxuXG4gICAgLyoqIFRleHQgaXMgcmVuZGVyZWQgd2l0aCBhbiBvdXRsaW5lICovXG4gICAgT3V0bGluZSA9IDEsXG59XG5cbi8qKlxuICogV3JhcCBtb2RlIGVudW0gZm9yIHtAbGluayBUZXh0Q29tcG9uZW50fS5cbiAqXG4gKiBAc2luY2UgMS4yLjFcbiAqL1xuZXhwb3J0IGVudW0gVGV4dFdyYXBNb2RlIHtcbiAgICAvKiogVGV4dCBkb2Vzbid0IHdyYXAgYXV0b21hdGljYWxseSwgb25seSB3aXRoIGV4cGxpY2l0IG5ld2xpbmUgKi9cbiAgICBOb25lID0gMCxcblxuICAgIC8qKiBUZXh0IHdyYXBzIGF0IHdvcmQgYm91bmRhcmllcyAqL1xuICAgIFNvZnQgPSAxLFxuXG4gICAgLyoqIFRleHQgd3JhcHMgYW55d2hlcmUgKi9cbiAgICBIYXJkID0gMixcblxuICAgIC8qKiBUZXh0IGlzIGN1dCBvZmYgKi9cbiAgICBDbGlwID0gMyxcbn1cblxuLyoqXG4gKiBJbnB1dCB0eXBlIGVudW0gZm9yIHtAbGluayBJbnB1dENvbXBvbmVudH0uXG4gKi9cbmV4cG9ydCBlbnVtIElucHV0VHlwZSB7XG4gICAgLyoqIEhlYWQgaW5wdXQgKi9cbiAgICBIZWFkID0gMCxcblxuICAgIC8qKiBMZWZ0IGV5ZSBpbnB1dCAqL1xuICAgIEV5ZUxlZnQgPSAxLFxuXG4gICAgLyoqIFJpZ2h0IGV5ZSBpbnB1dCAqL1xuICAgIEV5ZVJpZ2h0ID0gMixcblxuICAgIC8qKiBMZWZ0IGNvbnRyb2xsZXIgaW5wdXQgKi9cbiAgICBDb250cm9sbGVyTGVmdCA9IDMsXG5cbiAgICAvKiogUmlnaHQgY29udHJvbGxlciBpbnB1dCAqL1xuICAgIENvbnRyb2xsZXJSaWdodCA9IDQsXG5cbiAgICAvKiogTGVmdCByYXkgaW5wdXQgKi9cbiAgICBSYXlMZWZ0ID0gNSxcblxuICAgIC8qKiBSaWdodCByYXkgaW5wdXQgKi9cbiAgICBSYXlSaWdodCA9IDYsXG59XG5cbi8qKlxuICogUHJvamVjdGlvbiB0eXBlIGVudW0gZm9yIHtAbGluayBWaWV3Q29tcG9uZW50fS5cbiAqL1xuZXhwb3J0IGVudW0gUHJvamVjdGlvblR5cGUge1xuICAgIC8qKiBQZXJzcGVjdGl2ZSBwcm9qZWN0aW9uICovXG4gICAgUGVyc3BlY3RpdmUgPSAwLFxuXG4gICAgLyoqIE9ydGhvZ3JhcGhpYyBwcm9qZWN0aW9uICovXG4gICAgT3J0aG9ncmFwaGljID0gMSxcbn1cblxuLyoqXG4gKiBMaWdodCB0eXBlIGVudW0gZm9yIHtAbGluayBMaWdodENvbXBvbmVudH0uXG4gKi9cbmV4cG9ydCBlbnVtIExpZ2h0VHlwZSB7XG4gICAgLyoqIFBvaW50IGxpZ2h0ICovXG4gICAgUG9pbnQgPSAwLFxuXG4gICAgLyoqIFNwb3QgbGlnaHQgKi9cbiAgICBTcG90ID0gMSxcblxuICAgIC8qKiBTdW4gbGlnaHQgLyBEaXJlY3Rpb25hbCBsaWdodCAqL1xuICAgIFN1biA9IDIsXG59XG5cbi8qKlxuICogQW5pbWF0aW9uIHN0YXRlIG9mIHtAbGluayBBbmltYXRpb25Db21wb25lbnR9LlxuICovXG5leHBvcnQgZW51bSBBbmltYXRpb25TdGF0ZSB7XG4gICAgLyoqIEFuaW1hdGlvbiBpcyBjdXJyZW50bHkgcGxheWluZyAqL1xuICAgIFBsYXlpbmcgPSAwLFxuXG4gICAgLyoqIEFuaW1hdGlvbiBpcyBwYXVzZWQgYW5kIHdpbGwgY29udGludWUgYXQgY3VycmVudCBwbGF5YmFja1xuICAgICAqIHRpbWUgb24ge0BsaW5rIEFuaW1hdGlvbkNvbXBvbmVudCNwbGF5fSAqL1xuICAgIFBhdXNlZCA9IDEsXG5cbiAgICAvKiogQW5pbWF0aW9uIGlzIHN0b3BwZWQgKi9cbiAgICBTdG9wcGVkID0gMixcbn1cblxuLyoqXG4gKiBSb290IG1vdGlvbiBtb2RlIG9mIHtAbGluayBBbmltYXRpb25Db21wb25lbnR9LlxuICovXG5leHBvcnQgZW51bSBSb290TW90aW9uTW9kZSB7XG4gICAgLyoqIERvIG5vdGhpbmcgKi9cbiAgICBOb25lID0gMCxcbiAgICAvKiogTW92ZSBhbmQgcm90YXRlIHJvb3Qgd2l0aCB0aGUgZGVsdGEgb2YgaXRzIG1vdGlvbiAqL1xuICAgIEFwcGx5VG9Pd25lciA9IDEsXG4gICAgLyoqIFN0b3JlIHRoZSBtb3Rpb24gdG8gYmUgcmV0cmlldmVkIGJ5IGEgSlMgc2NyaXB0ICovXG4gICAgU2NyaXB0ID0gMixcbn1cblxuLyoqXG4gKiBSaWdpZCBib2R5IGZvcmNlIG1vZGUgZm9yIHtAbGluayBQaHlzWENvbXBvbmVudCNhZGRGb3JjZX0gYW5kIHtAbGluayBQaHlzWENvbXBvbmVudCNhZGRUb3JxdWV9LlxuICpcbiAqIFtQaHlzWCBBUEkgUmVmZXJlbmNlXShodHRwczovL2dhbWV3b3Jrc2RvY3MubnZpZGlhLmNvbS9QaHlzWC80LjEvZG9jdW1lbnRhdGlvbi9waHlzeGFwaS9maWxlcy9zdHJ1Y3RQeEZvcmNlTW9kZS5odG1sKVxuICovXG5leHBvcnQgZW51bSBGb3JjZU1vZGUge1xuICAgIC8qKiBBcHBseSBhcyBmb3JjZSAqL1xuICAgIEZvcmNlID0gMCxcblxuICAgIC8qKiBBcHBseSBhcyBpbXB1bHNlICovXG4gICAgSW1wdWxzZSA9IDEsXG5cbiAgICAvKiogQXBwbHkgYXMgdmVsb2NpdHkgY2hhbmdlLCBtYXNzIGRlcGVuZGVudCAqL1xuICAgIFZlbG9jaXR5Q2hhbmdlID0gMixcblxuICAgIC8qKiBBcHBseSBhcyBtYXNzIGRlcGVuZGVudCBmb3JjZSAqL1xuICAgIEFjY2VsZXJhdGlvbiA9IDMsXG59XG5cbi8qKlxuICogQ29sbGlzaW9uIGNhbGxiYWNrIGV2ZW50IHR5cGUuXG4gKi9cbmV4cG9ydCBlbnVtIENvbGxpc2lvbkV2ZW50VHlwZSB7XG4gICAgLyoqIFRvdWNoL2NvbnRhY3QgZGV0ZWN0ZWQsIGNvbGxpc2lvbiAqL1xuICAgIFRvdWNoID0gMCxcblxuICAgIC8qKiBUb3VjaC9jb250YWN0IGxvc3QsIHVuY29sbGlkZSAqL1xuICAgIFRvdWNoTG9zdCA9IDEsXG5cbiAgICAvKiogVG91Y2gvY29udGFjdCB3aXRoIHRyaWdnZXIgZGV0ZWN0ZWQgKi9cbiAgICBUcmlnZ2VyVG91Y2ggPSAyLFxuXG4gICAgLyoqIFRvdWNoL2NvbnRhY3Qgd2l0aCB0cmlnZ2VyIGxvc3QgKi9cbiAgICBUcmlnZ2VyVG91Y2hMb3N0ID0gMyxcbn1cblxuLyoqXG4gKiBSaWdpZCBib2R5IHtAbGluayBQaHlzWENvbXBvbmVudCNzaGFwZX0uXG4gKlxuICogW1BoeXNYIFNESyBHdWlkZV0oaHR0cHM6Ly9nYW1ld29ya3Nkb2NzLm52aWRpYS5jb20vUGh5c1gvNC4xL2RvY3VtZW50YXRpb24vcGh5c3hndWlkZS9NYW51YWwvR2VvbWV0cnkuaHRtbCNnZW9tZXRyeS10eXBlcykuXG4gKi9cbmV4cG9ydCBlbnVtIFNoYXBlIHtcbiAgICAvKiogTm8gc2hhcGUuICovXG4gICAgTm9uZSA9IDAsXG5cbiAgICAvKiogU3BoZXJlIHNoYXBlLiAqL1xuICAgIFNwaGVyZSA9IDEsXG5cbiAgICAvKiogQ2Fwc3VsZSBzaGFwZS4gKi9cbiAgICBDYXBzdWxlID0gMixcblxuICAgIC8qKiBCb3ggc2hhcGUuICovXG4gICAgQm94ID0gMyxcblxuICAgIC8qKiBQbGFuZSBzaGFwZS4gKi9cbiAgICBQbGFuZSA9IDQsXG5cbiAgICAvKiogQ29udmV4IG1lc2ggc2hhcGUuICovXG4gICAgQ29udmV4TWVzaCA9IDUsXG5cbiAgICAvKiogVHJpYW5nbGUgbWVzaCBzaGFwZS4gKi9cbiAgICBUcmlhbmdsZU1lc2ggPSA2LFxufVxuXG4vKipcbiAqIE1lc2ggYXR0cmlidXRlIGVudW0uXG4gKiBAc2luY2UgMC45LjBcbiAqL1xuZXhwb3J0IGVudW0gTWVzaEF0dHJpYnV0ZSB7XG4gICAgLyoqIFBvc2l0aW9uIGF0dHJpYnV0ZSwgMyBmbG9hdHMgKi9cbiAgICBQb3NpdGlvbiA9IDAsXG5cbiAgICAvKiogVGFuZ2VudCBhdHRyaWJ1dGUsIDQgZmxvYXRzICovXG4gICAgVGFuZ2VudCA9IDEsXG5cbiAgICAvKiogTm9ybWFsIGF0dHJpYnV0ZSwgMyBmbG9hdHMgKi9cbiAgICBOb3JtYWwgPSAyLFxuXG4gICAgLyoqIFRleHR1cmUgY29vcmRpbmF0ZSBhdHRyaWJ1dGUsIDIgZmxvYXRzICovXG4gICAgVGV4dHVyZUNvb3JkaW5hdGUgPSAzLFxuXG4gICAgLyoqIENvbG9yIGF0dHJpYnV0ZSwgNCBmbG9hdHMsIFJHQkEsIHJhbmdlIGAwYCB0byBgMWAgKi9cbiAgICBDb2xvciA9IDQsXG5cbiAgICAvKiogSm9pbnQgaWQgYXR0cmlidXRlLCA4IHVuc2lnbmVkIGludHMgKi9cbiAgICBKb2ludElkID0gNSxcblxuICAgIC8qKiBKb2ludCB3ZWlnaHRzIGF0dHJpYnV0ZSwgOCBmbG9hdHMgKi9cbiAgICBKb2ludFdlaWdodCA9IDYsXG59XG5cbi8qKiBQcm94eSB1c2VkIHRvIG92ZXJyaWRlIHByb3RvdHlwZXMgb2YgZGVzdHJveWVkIG9iamVjdHMuICovXG5leHBvcnQgY29uc3QgRGVzdHJveWVkT2JqZWN0SW5zdGFuY2UgPSBjcmVhdGVEZXN0cm95ZWRQcm94eSgnb2JqZWN0Jyk7XG4vKiogUHJveHkgdXNlZCB0byBvdmVycmlkZSBwcm90b3R5cGVzIG9mIGRlc3Ryb3llZCBjb21wb25lbnRzLiAqL1xuZXhwb3J0IGNvbnN0IERlc3Ryb3llZENvbXBvbmVudEluc3RhbmNlID0gY3JlYXRlRGVzdHJveWVkUHJveHkoJ2NvbXBvbmVudCcpO1xuLyoqIFByb3h5IHVzZWQgdG8gb3ZlcnJpZGUgcHJvdG90eXBlcyBvZiBkZXN0cm95ZWQgcHJlZmFicy4gKi9cbmV4cG9ydCBjb25zdCBEZXN0cm95ZWRQcmVmYWJJbnN0YW5jZSA9IGNyZWF0ZURlc3Ryb3llZFByb3h5KCdwcmVmYWIvc2NlbmUnKTtcblxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIGEgZ2l2ZW4gc2hhcGUgaXMgYSBtZXNoIG9yIG5vdC5cbiAqXG4gKiBAcGFyYW0gc2hhcGUgVGhlIHNoYXBlIHRvIGNoZWNrLlxuICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBzaGFwZSBpcyBhIG1lc2gsIGBmYWxzZWAgaWYgaXQncyBhIHByaW1pdGl2ZS5cbiAqL1xuZnVuY3Rpb24gaXNNZXNoU2hhcGUoc2hhcGU6IFNoYXBlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHNoYXBlID09PSBTaGFwZS5Db252ZXhNZXNoIHx8IHNoYXBlID09PSBTaGFwZS5UcmlhbmdsZU1lc2g7XG59XG5cbi8qKlxuICogQ2hlY2sgd2hldGhlciBhbiBvYmplY3QgaXMgdGhlIHtAbGluayBDb21wb25lbnR9IGNsYXNzIG9yIG5vdCxcbiAqXG4gKiBAbm90ZSBUaGlzIG1ldGhvZCBpZiBmb29scHJvb2YgdG8gZGV2ZWxvcGVycyBpbmFkdmVydGVudGx5IHVzaW5nXG4gKiBtdWx0aXBsZSBXb25kZXJsYW5kIEVuZ2luZSBBUEkgaW4gYSBidW5kbGUuXG4gKlxuICogQHBhcmFtIHZhbHVlIFRoZSBvYmplY3QgdG8gY2hlY2suXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdCBpcyBhIHtAbGluayBDb21wb25lbnR9IGNsYXNzLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqL1xuZnVuY3Rpb24gaXNCYXNlQ29tcG9uZW50Q2xhc3MoXG4gICAgdmFsdWU6IENvbnN0cnVjdG9yPGFueT4gfCBudWxsXG4pOiB2YWx1ZSBpcyBDb21wb25lbnRDb25zdHJ1Y3RvciB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgISF2YWx1ZSAmJlxuICAgICAgICB2YWx1ZS5oYXNPd25Qcm9wZXJ0eSgnX2lzQmFzZUNvbXBvbmVudCcpICYmXG4gICAgICAgICh2YWx1ZSBhcyBDb21wb25lbnRDb25zdHJ1Y3RvcikuX2lzQmFzZUNvbXBvbmVudFxuICAgICk7XG59XG5cbi8qKlxuICogQ29uc3RhbnRzLlxuICovXG5cbi8qKlxuICogRGVmYXVsdCB3b3JsZCB1cCB2ZWN0b3IuXG4gKi9cbmNvbnN0IFVQX1ZFQ1RPUiA9IFswLCAxLCAwXTtcblxuY29uc3QgU1FSVF8zID0gTWF0aC5zcXJ0KDMpO1xuXG4vKipcbiAqIFByb3ZpZGVzIGFjY2VzcyB0byBhIGNvbXBvbmVudCBpbnN0YW5jZSBvZiBhIHNwZWNpZmllZCBjb21wb25lbnQgdHlwZS5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIFRoaXMgaXMgaG93IHlvdSBleHRlbmQgdGhpcyBjbGFzcyB0byBjcmVhdGUgeW91ciBvd24gY3VzdG9tXG4gKiBjb21wb25lbnQ6XG4gKlxuICogYGBganNcbiAqIGltcG9ydCB7IENvbXBvbmVudCwgVHlwZSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4gKlxuICogZXhwb3J0IGNsYXNzIE15Q29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAqICAgICBzdGF0aWMgVHlwZU5hbWUgPSAnbXktY29tcG9uZW50JztcbiAqICAgICBzdGF0aWMgUHJvcGVydGllcyA9IHtcbiAqICAgICAgICAgbXlCb29sZWFuOiB7IHR5cGU6IFR5cGUuQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSxcbiAqICAgICB9O1xuICogICAgIHN0YXJ0KCkge31cbiAqICAgICBvbkFjdGl2YXRlKCkge31cbiAqICAgICBvbkRlYWN0aXZhdGUoKSB7fVxuICogICAgIHVwZGF0ZShkdCkge31cbiAqIH1cbiAqIGBgYFxuICpcbiAqIEluIGEgY29tcG9uZW50LCB0aGUgc2NlbmUgY2FuIGJlIGFjY2Vzc2VkIHVzaW5nIGB0aGlzLnNjZW5lYDpcbiAqXG4gKiBgYGBqc1xuICogaW1wb3J0IHsgQ29tcG9uZW50LCBUeXBlIH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbiAqXG4gKiBleHBvcnQgY2xhc3MgTXlDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICogICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdteS1jb21wb25lbnQnO1xuICogICAgIHN0YXJ0KCkge1xuICogICAgICAgICBjb25zdCBvYmogPSB0aGlzLnNjZW5lLmFkZE9iamVjdCgpO1xuICogICAgIH1cbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgQ29tcG9uZW50IHtcbiAgICAvKipcbiAgICAgKiBQYWNrIHNjZW5lIGluZGV4IGFuZCBjb21wb25lbnQgaWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2NlbmUgU2NlbmUgaW5kZXguXG4gICAgICogQHBhcmFtIGlkIENvbXBvbmVudCBpZC5cbiAgICAgKiBAcmV0dXJucyBUaGUgcGFja2VkIGlkLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHN0YXRpYyBfcGFjayhzY2VuZTogbnVtYmVyLCBpZDogbnVtYmVyKSB7XG4gICAgICAgIHJldHVybiAoc2NlbmUgPDwgMjIpIHwgaWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogYHRydWVgIGZvciBldmVyeSBjbGFzcyBpbmhlcml0aW5nIGZyb20gdGhpcyBjbGFzcy5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgaXMgYSB3b3JrYXJvdW5kIGZvciBgaW5zdGFuY2VvZmAgdG8gcHJldmVudCBpc3N1ZXNcbiAgICAgKiB0aGF0IGNvdWxkIGFyaXNlIHdoZW4gYW4gYXBwbGljYXRpb24gZW5kcyB1cCB1c2luZyBtdWx0aXBsZSBBUEkgdmVyc2lvbnMuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgc3RhdGljIHJlYWRvbmx5IF9pc0Jhc2VDb21wb25lbnQgPSB0cnVlO1xuXG4gICAgLyoqXG4gICAgICogRml4ZWQgb3JkZXIgb2YgYXR0cmlidXRlcyBpbiB0aGUgYFByb3BlcnRpZXNgIGFycmF5LlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBpcyB1c2VkIGZvciBwYXJhbWV0ZXIgZGVzZXJpYWxpemF0aW9uIGFuZCBpcyBmaWxsZWQgZHVyaW5nXG4gICAgICogY29tcG9uZW50IHJlZ2lzdHJhdGlvbi5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzdGF0aWMgX3Byb3BlcnR5T3JkZXI6IHN0cmluZ1tdID0gW107XG5cbiAgICAvKipcbiAgICAgKiBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyBjb21wb25lbnQgY2xhc3MuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIHVzZWQgdG8gcmVnaXN0ZXIsIGFkZCwgYW5kIHJldHJpZXZlIGNvbXBvbmVudHMgb2YgYSBnaXZlbiB0eXBlLlxuICAgICAqL1xuICAgIHN0YXRpYyBUeXBlTmFtZTogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydGllcyBvZiB0aGlzIGNvbXBvbmVudCBjbGFzcy5cbiAgICAgKlxuICAgICAqIFByb3BlcnRpZXMgYXJlIHB1YmxpYyBhdHRyaWJ1dGVzIHRoYXQgY2FuIGJlIGNvbmZpZ3VyZWQgdmlhIHRoZVxuICAgICAqIFdvbmRlcmxhbmQgRWRpdG9yLlxuICAgICAqXG4gICAgICogRXhhbXBsZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogaW1wb3J0IHsgQ29tcG9uZW50LCBUeXBlIH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbiAgICAgKiBjbGFzcyBNeUNvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgICogICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdteS1jb21wb25lbnQnO1xuICAgICAqICAgICBzdGF0aWMgUHJvcGVydGllcyA9IHtcbiAgICAgKiAgICAgICAgIG15Qm9vbGVhbjogeyB0eXBlOiBUeXBlLkJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH0sXG4gICAgICogICAgICAgICBteUZsb2F0OiB7IHR5cGU6IFR5cGUuRmxvYXQsIGRlZmF1bHQ6IGZhbHNlIH0sXG4gICAgICogICAgICAgICBteVRleHR1cmU6IHsgdHlwZTogVHlwZS5UZXh0dXJlLCBkZWZhdWx0OiBudWxsIH0sXG4gICAgICogICAgIH07XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogUHJvcGVydGllcyBhcmUgYXV0b21hdGljYWxseSBhZGRlZCB0byBlYWNoIGNvbXBvbmVudCBpbnN0YW5jZSwgYW5kIGFyZVxuICAgICAqIGFjY2Vzc2libGUgbGlrZSBhbnkgSlMgYXR0cmlidXRlOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAvLyBDcmVhdGVzIGEgbmV3IGNvbXBvbmVudCBhbmQgc2V0IGVhY2ggcHJvcGVydGllcyB2YWx1ZTpcbiAgICAgKiBjb25zdCBteUNvbXBvbmVudCA9IG9iamVjdC5hZGRDb21wb25lbnQoTXlDb21wb25lbnQsIHtcbiAgICAgKiAgICAgbXlCb29sZWFuOiB0cnVlLFxuICAgICAqICAgICBteUZsb2F0OiA0Mi4wLFxuICAgICAqICAgICBteVRleHR1cmU6IG51bGxcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIC8vIFlvdSBjYW4gYWxzbyBvdmVycmlkZSB0aGUgcHJvcGVydGllcyBvbiB0aGUgaW5zdGFuY2U6XG4gICAgICogbXlDb21wb25lbnQubXlCb29sZWFuID0gZmFsc2U7XG4gICAgICogbXlDb21wb25lbnQubXlGbG9hdCA9IC00Mi4wO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogIyMjIyBSZWZlcmVuY2VzXG4gICAgICpcbiAgICAgKiBSZWZlcmVuY2UgdHlwZXMgKGkuZS4sIG1lc2gsIG9iamVjdCwgZXRjLi4uKSBjYW4gYWxzbyBiZSBsaXN0ZWQgYXMgKipyZXF1aXJlZCoqOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBpbXBvcnQge0NvbXBvbmVudCwgUHJvcGVydHl9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4gICAgICpcbiAgICAgKiBjbGFzcyBNeUNvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgICogICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge1xuICAgICAqICAgICAgICAgbXlPYmplY3Q6IFByb3BlcnR5Lm9iamVjdCh7cmVxdWlyZWQ6IHRydWV9KSxcbiAgICAgKiAgICAgICAgIG15QW5pbWF0aW9uOiBQcm9wZXJ0eS5hbmltYXRpb24oe3JlcXVpcmVkOiB0cnVlfSksXG4gICAgICogICAgICAgICBteVRleHR1cmU6IFByb3BlcnR5LnRleHR1cmUoe3JlcXVpcmVkOiB0cnVlfSksXG4gICAgICogICAgICAgICBteU1lc2g6IFByb3BlcnR5Lm1lc2goe3JlcXVpcmVkOiB0cnVlfSksXG4gICAgICogICAgIH1cbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBQbGVhc2Ugbm90ZSB0aGF0IHJlZmVyZW5jZXMgYXJlIHZhbGlkYXRlZCAqKm9uY2UqKiBiZWZvcmUgdGhlIGNhbGwgdG8ge0BsaW5rIENvbXBvbmVudC5zdGFydH0gb25seSxcbiAgICAgKiB2aWEgdGhlIHtAbGluayBDb21wb25lbnQudmFsaWRhdGVQcm9wZXJ0aWVzfSBtZXRob2QuXG4gICAgICovXG4gICAgc3RhdGljIFByb3BlcnRpZXM6IFJlY29yZDxzdHJpbmcsIENvbXBvbmVudFByb3BlcnR5PjtcblxuICAgIC8qKlxuICAgICAqIFdoZW4gc2V0IHRvIGB0cnVlYCwgdGhlIGNoaWxkIGNsYXNzIGluaGVyaXRzIGZyb20gdGhlIHBhcmVudFxuICAgICAqIHByb3BlcnRpZXMsIGFzIHNob3duIGluIHRoZSBmb2xsb3dpbmcgZXhhbXBsZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogaW1wb3J0IHtDb21wb25lbnQsIFByb3BlcnR5fSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuICAgICAqXG4gICAgICogY2xhc3MgUGFyZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAgKiAgICAgc3RhdGljIFR5cGVOYW1lID0gJ3BhcmVudCc7XG4gICAgICogICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge3BhcmVudE5hbWU6IFByb3BlcnR5LnN0cmluZygncGFyZW50Jyl9XG4gICAgICogfVxuICAgICAqXG4gICAgICogY2xhc3MgQ2hpbGQgZXh0ZW5kcyBQYXJlbnQge1xuICAgICAqICAgICBzdGF0aWMgVHlwZU5hbWUgPSAnY2hpbGQnO1xuICAgICAqICAgICBzdGF0aWMgUHJvcGVydGllcyA9IHtuYW1lOiBQcm9wZXJ0eS5zdHJpbmcoJ2NoaWxkJyl9XG4gICAgICogICAgIHN0YXRpYyBJbmhlcml0UHJvcGVydGllcyA9IHRydWU7XG4gICAgICpcbiAgICAgKiAgICAgc3RhcnQoKSB7XG4gICAgICogICAgICAgICAvLyBXb3JrcyBiZWNhdXNlIGBJbmhlcml0UHJvcGVydGllc2AgaXMgYHRydWVgLlxuICAgICAqICAgICAgICAgY29uc29sZS5sb2coYCR7dGhpcy5uYW1lfSBpbmhlcml0cyBmcm9tICR7dGhpcy5wYXJlbnROYW1lfWApO1xuICAgICAqICAgICB9XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQG5vdGUgUHJvcGVydGllcyBkZWZpbmVkIGluIGRlc2NlbmRhbnQgY2xhc3NlcyB3aWxsIG92ZXJyaWRlIHByb3BlcnRpZXNcbiAgICAgKiB3aXRoIHRoZSBzYW1lIG5hbWUgZGVmaW5lZCBpbiBhbmNlc3RvciBjbGFzc2VzLlxuICAgICAqXG4gICAgICogRGVmYXVsdHMgdG8gYHRydWVgLlxuICAgICAqL1xuICAgIHN0YXRpYyBJbmhlcml0UHJvcGVydGllcz86IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgd2hlbiB0aGlzIGNvbXBvbmVudCBjbGFzcyBpcyByZWdpc3RlcmVkLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIFRoaXMgY2FsbGJhY2sgY2FuIGJlIHVzZWQgdG8gcmVnaXN0ZXIgZGVwZW5kZW5jaWVzIG9mIGEgY29tcG9uZW50LFxuICAgICAqIGUuZy4sIGNvbXBvbmVudCBjbGFzc2VzIHRoYXQgbmVlZCB0byBiZSByZWdpc3RlcmVkIGluIG9yZGVyIHRvIGFkZFxuICAgICAqIHRoZW0gYXQgcnVudGltZSB3aXRoIHtAbGluayBPYmplY3QzRC5hZGRDb21wb25lbnR9LCBpbmRlcGVuZGVudCBvZiB3aGV0aGVyXG4gICAgICogdGhleSBhcmUgdXNlZCBpbiB0aGUgZWRpdG9yLlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjbGFzcyBTcGF3bmVyIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAgKiAgICAgc3RhdGljIFR5cGVOYW1lID0gJ3NwYXduZXInO1xuICAgICAqXG4gICAgICogICAgIHN0YXRpYyBvblJlZ2lzdGVyKGVuZ2luZSkge1xuICAgICAqICAgICAgICAgZW5naW5lLnJlZ2lzdGVyQ29tcG9uZW50KFNwYXduZWRDb21wb25lbnQpO1xuICAgICAqICAgICB9XG4gICAgICpcbiAgICAgKiAgICAgLy8gWW91IGNhbiBub3cgdXNlIGFkZENvbXBvbmVudCB3aXRoIFNwYXduZWRDb21wb25lbnRcbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogVGhpcyBjYWxsYmFjayBjYW4gYmUgdXNlZCB0byByZWdpc3RlciBkaWZmZXJlbnQgaW1wbGVtZW50YXRpb25zIG9mIGFcbiAgICAgKiBjb21wb25lbnQgZGVwZW5kaW5nIG9uIGNsaWVudCBmZWF0dXJlcyBvciBBUEkgdmVyc2lvbnMuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIC8vIFByb3BlcnRpZXMgbmVlZCB0byBiZSB0aGUgc2FtZSBmb3IgYWxsIGltcGxlbWVudGF0aW9ucyFcbiAgICAgKiBjb25zdCBTaGFyZWRQcm9wZXJ0aWVzID0ge307XG4gICAgICpcbiAgICAgKiBjbGFzcyBBbmNob3IgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgICAqICAgICBzdGF0aWMgVHlwZU5hbWUgPSAnc3Bhd25lcic7XG4gICAgICogICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0gU2hhcmVkUHJvcGVydGllcztcbiAgICAgKlxuICAgICAqICAgICBzdGF0aWMgb25SZWdpc3RlcihlbmdpbmUpIHtcbiAgICAgKiAgICAgICAgIGlmKG5hdmlnYXRvci54ciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICogICAgICAgICAgICAgLyogV2ViWFIgdW5zdXBwb3J0ZWQsIGtlZXAgdGhpcyBkdW1teSBjb21wb25lbnQgKlxcL1xuICAgICAqICAgICAgICAgICAgIHJldHVybjtcbiAgICAgKiAgICAgICAgIH1cbiAgICAgKiAgICAgICAgIC8qIFdlYlhSIHN1cHBvcnRlZCEgT3ZlcnJpZGUgYWxyZWFkeSByZWdpc3RlcmVkIGR1bW15IGltcGxlbWVudGF0aW9uXG4gICAgICogICAgICAgICAgKiB3aXRoIG9uZSBkZXBlbmRpbmcgb24gaGl0LXRlc3QgQVBJIHN1cHBvcnQgKlxcL1xuICAgICAqICAgICAgICAgZW5naW5lLnJlZ2lzdGVyQ29tcG9uZW50KHdpbmRvdy5IaXRUZXN0U291cmNlID09PSB1bmRlZmluZWQgP1xuICAgICAqICAgICAgICAgICAgIEFuY2hvcldpdGhvdXRIaXRUZXN0IDogQW5jaG9yV2l0aEhpdFRlc3QpO1xuICAgICAqICAgICB9XG4gICAgICpcbiAgICAgKiAgICAgLy8gVGhpcyBvbmUgaW1wbGVtZW50cyBubyBmdW5jdGlvbnNcbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICovXG4gICAgc3RhdGljIG9uUmVnaXN0ZXI/OiAoZW5naW5lOiBXb25kZXJsYW5kRW5naW5lKSA9PiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogQWxsb3dzIHRvIGluaGVyaXQgcHJvcGVydGllcyBkaXJlY3RseSBpbnNpZGUgdGhlIGVkaXRvci5cbiAgICAgKlxuICAgICAqIEBub3RlIERvIG5vdCB1c2UgZGlyZWN0bHksIHByZWZlciB1c2luZyB7QGxpbmsgaW5oZXJpdFByb3BlcnRpZXN9LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHN0YXRpYyBfaW5oZXJpdFByb3BlcnRpZXMoKSB7XG4gICAgICAgIGluaGVyaXRQcm9wZXJ0aWVzKHRoaXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgaW5pdGlhbGl6ZWQgYnkgdGhlIHJ1bnRpbWUuIFRoaXMgbWV0aG9kXG4gICAgICogd2lsbCBvbmx5IGJlIHRyaWdnZXJlZCAqKm9uY2UqKiBhZnRlciBpbnN0YW50aWF0aW9uLlxuICAgICAqXG4gICAgICogQG5vdGUgRHVyaW5nIHRoZSBpbml0aWFsaXphdGlvbiBwaGFzZSwgYHRoaXMuc2NlbmVgIHdpbGwgbm90IG1hdGNoXG4gICAgICogYGVuZ2luZS5zY2VuZWAsIHNpbmNlIGBlbmdpbmUuc2NlbmVgIHJlZmVyZW5jZXMgdGhlICoqYWN0aXZlKiogc2NlbmU6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGltcG9ydCB7Q29tcG9uZW50fSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuICAgICAqXG4gICAgICogY2xhc3MgTXlDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnR7XG4gICAgICogICAgIGluaXQoKSB7XG4gICAgICogICAgICAgICBjb25zdCBhY3RpdmVTY2VuZSA9IHRoaXMuZW5naW5lLnNjZW5lO1xuICAgICAqICAgICAgICAgY29uc29sZS5sb2codGhpcy5zY2VuZSA9PT0gYWN0aXZlU2NlbmUpOyAvLyBQcmludHMgYGZhbHNlYFxuICAgICAqICAgICB9XG4gICAgICogICAgIHN0YXJ0KCkge1xuICAgICAqICAgICAgICAgY29uc3QgYWN0aXZlU2NlbmUgPSB0aGlzLmVuZ2luZS5zY2VuZTtcbiAgICAgKiAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2NlbmUgPT09IGFjdGl2ZVNjZW5lKTsgLy8gUHJpbnRzIGB0cnVlYFxuICAgICAqICAgICB9XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGluaXQ/KCk6IHZvaWQ7XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIHN0YXJ0ZWQgYnkgdGhlIHJ1bnRpbWUsIG9yIGFjdGl2YXRlZC5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gdXNlIHRoYXQgdG8gcmUtaW5pdGlhbGl6ZSB0aGUgc3RhdGUgb2YgdGhlIGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICBzdGFydD8oKTogdm9pZDtcblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCAgKipldmVyeSBmcmFtZSoqIGJ5IHRoZSBydW50aW1lLlxuICAgICAqXG4gICAgICogWW91IHNob3VsZCBwZXJmb3JtIHlvdXIgYnVzaW5lc3MgbG9naWMgaW4gdGhpcyBtZXRob2QuIEV4YW1wbGU6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGltcG9ydCB7IENvbXBvbmVudCwgVHlwZSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4gICAgICpcbiAgICAgKiBjbGFzcyBUcmFuc2xhdGVGb3J3YXJkQ29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAgKiAgICAgc3RhdGljIFR5cGVOYW1lID0gJ3RyYW5zbGF0ZS1mb3J3YXJkLWNvbXBvbmVudCc7XG4gICAgICogICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge1xuICAgICAqICAgICAgICAgc3BlZWQ6IHsgdHlwZTogVHlwZS5GbG9hdCwgZGVmYXVsdDogMS4wIH1cbiAgICAgKiAgICAgfTtcbiAgICAgKiAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICogICAgICAgICB0aGlzLl9mb3J3YXJkID0gbmV3IEZsb2F0MzJBcnJheShbMCwgMCwgMF0pO1xuICAgICAqICAgICB9XG4gICAgICogICAgIHVwZGF0ZShkdCkge1xuICAgICAqICAgICAgICAgdGhpcy5vYmplY3QuZ2V0Rm9yd2FyZCh0aGlzLl9mb3J3YXJkKTtcbiAgICAgKiAgICAgICAgIHRoaXMuX2ZvcndhcmRbMF0gKj0gdGhpcy5zcGVlZDtcbiAgICAgKiAgICAgICAgIHRoaXMuX2ZvcndhcmRbMV0gKj0gdGhpcy5zcGVlZDtcbiAgICAgKiAgICAgICAgIHRoaXMuX2ZvcndhcmRbMl0gKj0gdGhpcy5zcGVlZDtcbiAgICAgKiAgICAgICAgIHRoaXMub2JqZWN0LnRyYW5zbGF0ZSh0aGlzLl9mb3J3YXJkKTtcbiAgICAgKiAgICAgfVxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBkZWx0YSBFbGFwc2VkIHRpbWUgYmV0d2VlbiB0aGlzIGZyYW1lIGFuZCB0aGUgcHJldmlvdXMgb25lLCBpbiAqKnNlY29uZHMqKi5cbiAgICAgKi9cbiAgICB1cGRhdGU/KGRlbHRhOiBudW1iZXIpOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gdGhlIGNvbXBvbmVudCBnb2VzIGZyb20gYW4gaW5hY3RpdmUgc3RhdGUgdG8gYW4gYWN0aXZlIHN0YXRlLlxuICAgICAqXG4gICAgICogQG5vdGUgV2hlbiB1c2luZyAoe0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUuc3dpdGNoVG99KSwgYWxsIHRoZSBjb21wb25lbnRzXG4gICAgICogdGhhdCB3ZXJlIHByZXZpb3VzbHkgYWN0aXZlIHdpbGwgdHJpZ2dlciB0aGlzIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBub3RlIFlvdSBjYW4gbWFudWFsbHkgYWN0aXZhdGUgb3IgZGVhY3RpdmF0ZSBhIGNvbXBvbmVudCB1c2luZzoge0BsaW5rIENvbXBvbmVudC5hY3RpdmU6c2V0dGVyfS5cbiAgICAgKi9cbiAgICBvbkFjdGl2YXRlPygpOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gdGhlIGNvbXBvbmVudCBnb2VzIGZyb20gYW4gYWN0aXZhdGVkIHN0YXRlIHRvIGFuIGluYWN0aXZlIHN0YXRlLlxuICAgICAqXG4gICAgICogQG5vdGUgV2hlbiB1c2luZyAoe0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUuc3dpdGNoVG99KSwgdGhlIGNvbXBvbmVudHMgb2ZcbiAgICAgKiB0aGUgc2NlbmUgZ2V0dGluZyBkZWFjdGl2YXRlZCB3aWxsIHRyaWdnZXIgdGhpcyBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAbm90ZSBZb3UgY2FuIG1hbnVhbGx5IGFjdGl2YXRlIG9yIGRlYWN0aXZhdGUgYSBjb21wb25lbnQgdXNpbmc6IHtAbGluayBDb21wb25lbnQuYWN0aXZlOnNldHRlcn0uXG4gICAgICovXG4gICAgb25EZWFjdGl2YXRlPygpOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyByZW1vdmVkIGZyb20gaXRzIG9iamVjdC5cbiAgICAgKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgcGxlYXNlIGhhdmUgYSBsb29rIGF0IHtAbGluayBDb21wb25lbnQub25EZXN0cm95fS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgbWV0aG9kIHdpbGwgbm90IGJlIHRyaWdnZXJlZCBmb3IgaW5hY3RpdmUgc2NlbmUgYmVpbmcgZGVzdHJveWVkLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOS4wXG4gICAgICovXG4gICAgb25EZXN0cm95PygpOiB2b2lkO1xuXG4gICAgLyoqIE1hbmFnZXIgaW5kZXguIEBoaWRkZW4gKi9cbiAgICByZWFkb25seSBfbWFuYWdlcjogbnVtYmVyO1xuICAgIC8qKiBQYWNrZWQgaWQsIGNvbnRhaW5pbmcgdGhlIHNjZW5lIGFuZCB0aGUgbG9jYWwgaWQuIEBoaWRkZW4gKi9cbiAgICByZWFkb25seSBfaWQ6IG51bWJlcjtcbiAgICAvKiogSWQgcmVsYXRpdmUgdG8gdGhlIHNjZW5lIGNvbXBvbmVudCdzIG1hbmFnZXIuIEBoaWRkZW4gKi9cbiAgICByZWFkb25seSBfbG9jYWxJZDogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogT2JqZWN0IGNvbnRhaW5pbmcgdGhpcyBvYmplY3QuXG4gICAgICpcbiAgICAgKiAqKk5vdGUqKjogVGhpcyBpcyBjYWNoZWQgZm9yIGZhc3RlciByZXRyaWV2YWwuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX29iamVjdDogT2JqZWN0M0QgfCBudWxsO1xuXG4gICAgLyoqIFNjZW5lIGluc3RhbmNlLiBAaGlkZGVuICovXG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IF9zY2VuZTogUHJlZmFiO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZW5naW5lIFRoZSBlbmdpbmUgaW5zdGFuY2UuXG4gICAgICogQHBhcmFtIG1hbmFnZXIgSW5kZXggb2YgdGhlIG1hbmFnZXIuXG4gICAgICogQHBhcmFtIGlkIFdBU00gY29tcG9uZW50IGluc3RhbmNlIGluZGV4LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNjZW5lOiBQcmVmYWIsIG1hbmFnZXI6IG51bWJlciA9IC0xLCBpZDogbnVtYmVyID0gLTEpIHtcbiAgICAgICAgdGhpcy5fc2NlbmUgPSBzY2VuZTtcbiAgICAgICAgdGhpcy5fbWFuYWdlciA9IG1hbmFnZXI7XG4gICAgICAgIHRoaXMuX2xvY2FsSWQgPSBpZDtcbiAgICAgICAgdGhpcy5faWQgPSBDb21wb25lbnQuX3BhY2soc2NlbmUuX2luZGV4LCBpZCk7XG4gICAgICAgIHRoaXMuX29iamVjdCA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqIFNjZW5lIHRoaXMgY29tcG9uZW50IGlzIHBhcnQgb2YuICovXG4gICAgZ2V0IHNjZW5lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2NlbmU7XG4gICAgfVxuXG4gICAgLyoqIEhvc3RpbmcgZW5naW5lIGluc3RhbmNlLiAqL1xuICAgIGdldCBlbmdpbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zY2VuZS5lbmdpbmU7XG4gICAgfVxuXG4gICAgLyoqIFRoZSBuYW1lIG9mIHRoaXMgY29tcG9uZW50J3MgdHlwZSAqL1xuICAgIGdldCB0eXBlKCk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yIGFzIENvbXBvbmVudENvbnN0cnVjdG9yO1xuICAgICAgICByZXR1cm4gY3Rvci5UeXBlTmFtZTtcbiAgICB9XG5cbiAgICAvKiogVGhlIG9iamVjdCB0aGlzIGNvbXBvbmVudCBpcyBhdHRhY2hlZCB0by4gKi9cbiAgICBnZXQgb2JqZWN0KCk6IE9iamVjdDNEIHtcbiAgICAgICAgaWYgKCF0aGlzLl9vYmplY3QpIHtcbiAgICAgICAgICAgIGNvbnN0IG9iamVjdElkID0gdGhpcy5lbmdpbmUud2FzbS5fd2xfY29tcG9uZW50X2dldF9vYmplY3QoXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFuYWdlcixcbiAgICAgICAgICAgICAgICB0aGlzLl9pZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMuX29iamVjdCA9IHRoaXMuX3NjZW5lLndyYXAob2JqZWN0SWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9vYmplY3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHdoZXRoZXIgdGhpcyBjb21wb25lbnQgaXMgYWN0aXZlLlxuICAgICAqXG4gICAgICogQWN0aXZhdGluZy9kZWFjdGl2YXRpbmcgYSBjb21wb25lbnQgY29tZXMgYXQgYSBzbWFsbCBjb3N0IG9mIHJlb3JkZXJpbmdcbiAgICAgKiBjb21wb25lbnRzIGluIHRoZSByZXNwZWN0aXZlIGNvbXBvbmVudCBtYW5hZ2VyLiBUaGlzIGZ1bmN0aW9uIHRoZXJlZm9yZVxuICAgICAqIGlzIG5vdCBhIHRyaXZpYWwgYXNzaWdubWVudC5cbiAgICAgKlxuICAgICAqIERvZXMgbm90aGluZyBpZiB0aGUgY29tcG9uZW50IGlzIGFscmVhZHkgYWN0aXZhdGVkL2RlYWN0aXZhdGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFjdGl2ZSBOZXcgYWN0aXZlIHN0YXRlLlxuICAgICAqL1xuICAgIHNldCBhY3RpdmUoYWN0aXZlOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2NvbXBvbmVudF9zZXRBY3RpdmUodGhpcy5fbWFuYWdlciwgdGhpcy5faWQsIGFjdGl2ZSk7XG4gICAgfVxuXG4gICAgLyoqIGB0cnVlYCBpZiB0aGUgY29tcG9uZW50IGlzIG1hcmtlZCBhcyBhY3RpdmUgYW5kIGl0cyBzY2VuZSBpcyBhY3RpdmUuICovXG4gICAgZ2V0IGFjdGl2ZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFya2VkQWN0aXZlICYmIHRoaXMuX3NjZW5lLmlzQWN0aXZlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGB0cnVlYCBpZiB0aGUgY29tcG9uZW50IGlzIG1hcmtlZCBhcyBhY3RpdmUgaW4gdGhlIHNjZW5lLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIEBub3RlIEF0IHRoZSBvcHBvc2l0ZSBvZiB7QGxpbmsgQ29tcG9uZW50LmFjdGl2ZX0sIHRoaXMgYWNjZXNzb3IgZG9lc24ndFxuICAgICAqIHRha2UgaW50byBhY2NvdW50IHdoZXRoZXIgdGhlIHNjZW5lIGlzIGFjdGl2ZSBvciBub3QuXG4gICAgICovXG4gICAgZ2V0IG1hcmtlZEFjdGl2ZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2NvbXBvbmVudF9pc0FjdGl2ZSh0aGlzLl9tYW5hZ2VyLCB0aGlzLl9pZCkgIT0gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb3B5IGFsbCB0aGUgcHJvcGVydGllcyBmcm9tIGBzcmNgIGludG8gdGhpcyBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBub3RlIE9ubHkgcHJvcGVydGllcyBhcmUgY29waWVkLiBJZiBhIGNvbXBvbmVudCBuZWVkcyB0b1xuICAgICAqIGNvcHkgZXh0cmEgZGF0YSwgaXQgbmVlZHMgdG8gb3ZlcnJpZGUgdGhpcyBtZXRob2QuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGVcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY2xhc3MgTXlDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgICAqICAgICBub25Qcm9wZXJ0eURhdGEgPSAnSGVsbG8gV29ybGQnO1xuICAgICAqXG4gICAgICogICAgIGNvcHkoc3JjKSB7XG4gICAgICogICAgICAgICBzdXBlci5jb3B5KHNyYyk7XG4gICAgICogICAgICAgICB0aGlzLm5vblByb3BlcnR5RGF0YSA9IHNyYy5ub25Qcm9wZXJ0eURhdGE7XG4gICAgICogICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgKiAgICAgfVxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBieSB7QGxpbmsgT2JqZWN0M0QuY2xvbmV9LiBEbyBub3QgYXR0ZW1wdCB0bzpcbiAgICAgKiAgICAgLSBDcmVhdGUgbmV3IGNvbXBvbmVudFxuICAgICAqICAgICAtIFJlYWQgcmVmZXJlbmNlcyB0byBvdGhlciBvYmplY3RzXG4gICAgICpcbiAgICAgKiBXaGVuIGNsb25pbmcgdmlhIHtAbGluayBPYmplY3QzRC5jbG9uZX0sIHRoaXMgbWV0aG9kIHdpbGwgYmUgY2FsbGVkIGJlZm9yZVxuICAgICAqIHtAbGluayBDb21wb25lbnQuc3RhcnR9LlxuICAgICAqXG4gICAgICogQG5vdGUgSmF2YVNjcmlwdCBjb21wb25lbnQgcHJvcGVydGllcyBhcmVuJ3QgcmV0YXJnZXRlZC4gVGh1cywgcmVmZXJlbmNlc1xuICAgICAqIGluc2lkZSB0aGUgc291cmNlIG9iamVjdCB3aWxsIG5vdCBiZSByZXRhcmdldGVkIHRvIHRoZSBkZXN0aW5hdGlvbiBvYmplY3QsXG4gICAgICogYXQgdGhlIGV4Y2VwdGlvbiBvZiB0aGUgc2tpbiBkYXRhIG9uIHtAbGluayBNZXNoQ29tcG9uZW50fSBhbmQge0BsaW5rIEFuaW1hdGlvbkNvbXBvbmVudH0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3JjIFRoZSBzb3VyY2UgY29tcG9uZW50IHRvIGNvcHkgZnJvbS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICBjb3B5KHNyYzogUmVjb3JkPHN0cmluZywgYW55Pik6IHRoaXMge1xuICAgICAgICBjb25zdCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvciBhcyBDb21wb25lbnRDb25zdHJ1Y3RvcjtcbiAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IGN0b3IuUHJvcGVydGllcztcbiAgICAgICAgaWYgKCFwcm9wZXJ0aWVzKSByZXR1cm4gdGhpcztcbiAgICAgICAgZm9yIChjb25zdCBuYW1lIGluIHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5ID0gcHJvcGVydGllc1tuYW1lXTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gc3JjW25hbWVdO1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29uc3QgY2xvbmVyID0gcHJvcGVydHkuY2xvbmVyID8/IGRlZmF1bHRQcm9wZXJ0eUNsb25lcjtcbiAgICAgICAgICAgICh0aGlzIGFzIFJlY29yZDxzdHJpbmcsIGFueT4pW25hbWVdID0gY2xvbmVyLmNsb25lKHByb3BlcnR5LnR5cGUsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhpcyBjb21wb25lbnQgZnJvbSBpdHMgb2JqZWN0cyBhbmQgZGVzdHJveSBpdC5cbiAgICAgKlxuICAgICAqIEl0IGlzIGJlc3QgcHJhY3RpY2UgdG8gc2V0IHRoZSBjb21wb25lbnQgdG8gYG51bGxgIGFmdGVyLFxuICAgICAqIHRvIGVuc3VyZSBpdCBkb2VzIG5vdCBnZXQgdXNlZCBsYXRlci5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogICAgYy5kZXN0cm95KCk7XG4gICAgICogICAgYyA9IG51bGw7XG4gICAgICogYGBgXG4gICAgICogQHNpbmNlIDAuOS4wXG4gICAgICovXG4gICAgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgbWFuYWdlciA9IHRoaXMuX21hbmFnZXI7XG4gICAgICAgIGlmIChtYW5hZ2VyIDwgMCB8fCB0aGlzLl9pZCA8IDApIHJldHVybjtcblxuICAgICAgICAvKiBUaGlzIGNhbGwgd2lsbCBtYXJrIHRoZSBjb21wb25lbnQgZGVzdHJveWVkLFxuICAgICAgICAgKiBhdXRvbWF0aWNhbGx5IGNhbGxpbmcgYF90cmlnZ2VyT25EZXN0cm95YC4gICovXG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2NvbXBvbmVudF9yZW1vdmUobWFuYWdlciwgdGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBlcXVhbGl0eSBieSBjb21wYXJpbmcgaWRzIGFuZCAqKm5vdCoqIHRoZSBKYXZhU2NyaXB0IHJlZmVyZW5jZS5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGUgVXNlIEphdmFTY3JpcHQgcmVmZXJlbmNlIGNvbXBhcmlzb24gaW5zdGVhZDpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgY29tcG9uZW50QSA9IG9iai5hZGRDb21wb25lbnQoJ21lc2gnKTtcbiAgICAgKiBjb25zdCBjb21wb25lbnRCID0gb2JqLmFkZENvbXBvbmVudCgnbWVzaCcpO1xuICAgICAqIGNvbnN0IGNvbXBvbmVudEMgPSBjb21wb25lbnRCO1xuICAgICAqIGNvbnNvbGUubG9nKGNvbXBvbmVudEEgPT09IGNvbXBvbmVudEIpOyAvLyBmYWxzZVxuICAgICAqIGNvbnNvbGUubG9nKGNvbXBvbmVudEEgPT09IGNvbXBvbmVudEEpOyAvLyB0cnVlXG4gICAgICogY29uc29sZS5sb2coY29tcG9uZW50QiA9PT0gY29tcG9uZW50Qyk7IC8vIHRydWVcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBlcXVhbHMob3RoZXJDb21wb25lbnQ6IENvbXBvbmVudCB8IHVuZGVmaW5lZCB8IG51bGwpOiBib29sZWFuIHtcbiAgICAgICAgLyoqIEB0b2RvKDIuMC4wKTogUmVtb3ZlIHRoaXMgbWV0aG9kLiAqL1xuICAgICAgICBpZiAoIW90aGVyQ29tcG9uZW50KSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0aGlzLl9tYW5hZ2VyID09PSBvdGhlckNvbXBvbmVudC5fbWFuYWdlciAmJiB0aGlzLl9pZCA9PT0gb3RoZXJDb21wb25lbnQuX2lkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlc2V0IHRoZSBjb21wb25lbnQgcHJvcGVydGllcyB0byBkZWZhdWx0LlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBpcyBhdXRvbWF0aWNhbGx5IGNhbGxlZCBkdXJpbmcgdGhlIGNvbXBvbmVudCBpbnN0YW50aWF0aW9uLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHJlc2V0UHJvcGVydGllcygpOiB0aGlzIHtcbiAgICAgICAgY29uc3QgY3RvciA9IHRoaXMuY29uc3RydWN0b3IgYXMgQ29tcG9uZW50Q29uc3RydWN0b3I7XG4gICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSBjdG9yLlByb3BlcnRpZXM7XG4gICAgICAgIGlmICghcHJvcGVydGllcykgcmV0dXJuIHRoaXM7XG4gICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IHByb3BlcnRpZXNbbmFtZV07XG4gICAgICAgICAgICBjb25zdCBjbG9uZXIgPSBwcm9wZXJ0eS5jbG9uZXIgPz8gZGVmYXVsdFByb3BlcnR5Q2xvbmVyO1xuICAgICAgICAgICAgKHRoaXMgYXMgUmVjb3JkPHN0cmluZywgYW55PilbbmFtZV0gPSBjbG9uZXIuY2xvbmUoXG4gICAgICAgICAgICAgICAgcHJvcGVydHkudHlwZSxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eS5kZWZhdWx0XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIENvbXBvbmVudC5yZXNldFByb3BlcnRpZXN9IGluc3RlYWQuICovXG4gICAgcmVzZXQoKTogdGhpcyB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc2V0UHJvcGVydGllcygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlIHRoZSBwcm9wZXJ0aWVzIG9uIHRoaXMgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAdGhyb3dzIElmIGFueSBvZiB0aGUgcmVxdWlyZWQgcHJvcGVydGllcyBpc24ndCBpbml0aWFsaXplZFxuICAgICAqIG9uIHRoaXMgaW5zdGFuY2UuXG4gICAgICovXG4gICAgdmFsaWRhdGVQcm9wZXJ0aWVzKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvciBhcyBDb21wb25lbnRDb25zdHJ1Y3RvcjtcbiAgICAgICAgaWYgKCFjdG9yLlByb3BlcnRpZXMpIHJldHVybjtcblxuICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gY3Rvci5Qcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBpZiAoIWN0b3IuUHJvcGVydGllc1tuYW1lXS5yZXF1aXJlZCkgY29udGludWU7XG4gICAgICAgICAgICBpZiAoISh0aGlzIGFzIFJlY29yZDxzdHJpbmcsIGFueT4pW25hbWVdKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBQcm9wZXJ0eSAnJHtuYW1lfScgaXMgcmVxdWlyZWQgYnV0IHdhcyBub3QgaW5pdGlhbGl6ZWRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBpZiAodGhpcy5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgcmV0dXJuICdDb21wb25lbnQoZGVzdHJveWVkKSc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGBDb21wb25lbnQoJyR7dGhpcy50eXBlfScsICR7dGhpcy5fbG9jYWxJZH0pYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBgdHJ1ZWAgaWYgdGhlIGNvbXBvbmVudCBpcyBkZXN0cm95ZWQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqXG4gICAgICogSWYge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUuZXJhc2VQcm90b3R5cGVPbkRlc3Ryb3l9IGlzIGB0cnVlYCxcbiAgICAgKiByZWFkaW5nIGEgY3VzdG9tIHByb3BlcnR5IHdpbGwgbm90IHdvcms6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGVuZ2luZS5lcmFzZVByb3RvdHlwZU9uRGVzdHJveSA9IHRydWU7XG4gICAgICpcbiAgICAgKiBjb25zdCBjb21wID0gb2JqLmFkZENvbXBvbmVudCgnbWVzaCcpO1xuICAgICAqIGNvbXAuY3VzdG9tUGFyYW0gPSAnSGVsbG8gV29ybGQhJztcbiAgICAgKlxuICAgICAqIGNvbnNvbGUubG9nKGNvbXAuaXNEZXN0cm95ZWQpOyAvLyBQcmludHMgYGZhbHNlYFxuICAgICAqIGNvbXAuZGVzdHJveSgpO1xuICAgICAqIGNvbnNvbGUubG9nKGNvbXAuaXNEZXN0cm95ZWQpOyAvLyBQcmludHMgYHRydWVgXG4gICAgICogY29uc29sZS5sb2coY29tcC5jdXN0b21QYXJhbSk7IC8vIFRocm93cyBhbiBlcnJvclxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMS4xXG4gICAgICovXG4gICAgZ2V0IGlzRGVzdHJveWVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faWQgPCAwO1xuICAgIH1cblxuICAgIC8qKiBAaGlkZGVuICovXG4gICAgX2NvcHkoc3JjOiB0aGlzLCBvZmZzZXRzUHRyOiBudW1iZXIpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG5cbiAgICAgICAgLyoqIEB0b2RvOiBTdXBwb3J0IHJldGFyZ2V0aW5nIGZvciBgT2JqZWN0M0QuY2xvbmVgIGFzIHdlbGwuICovXG4gICAgICAgIGNvbnN0IG9mZnNldHMgPSB3YXNtLkhFQVBVMzI7XG4gICAgICAgIGNvbnN0IG9mZnNldHNTdGFydCA9IG9mZnNldHNQdHIgPj4+IDI7XG5cbiAgICAgICAgY29uc3QgZGVzdFNjZW5lID0gdGhpcy5fc2NlbmU7XG5cbiAgICAgICAgY29uc3QgY3RvciA9IHRoaXMuY29uc3RydWN0b3IgYXMgQ29tcG9uZW50Q29uc3RydWN0b3I7XG4gICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiBjdG9yLlByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gKHNyYyBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+KVtuYW1lXTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICh0aGlzIGFzIFJlY29yZDxzdHJpbmcsIGFueT4pW25hbWVdID0gbnVsbDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgcHJvcCA9IGN0b3IuUHJvcGVydGllc1tuYW1lXTtcbiAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IG9mZnNldHNbb2Zmc2V0c1N0YXJ0ICsgcHJvcC50eXBlXTtcblxuICAgICAgICAgICAgbGV0IHJldGFyZ2V0ZWQ7XG4gICAgICAgICAgICBzd2l0Y2ggKHByb3AudHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgVHlwZS5PYmplY3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB3YXNtLl93bF9vYmplY3RfaW5kZXgoKHZhbHVlIGFzIE9iamVjdDNEKS5faWQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHdhc20uX3dsX29iamVjdF9pZChkZXN0U2NlbmUuX2luZGV4LCBpbmRleCArIG9mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgIHJldGFyZ2V0ZWQgPSBkZXN0U2NlbmUud3JhcChpZCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFR5cGUuQW5pbWF0aW9uOlxuICAgICAgICAgICAgICAgICAgICByZXRhcmdldGVkID0gZGVzdFNjZW5lLmFuaW1hdGlvbnMud3JhcChcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArICh2YWx1ZSBhcyBBbmltYXRpb24pLl9pbmRleFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFR5cGUuU2tpbjpcbiAgICAgICAgICAgICAgICAgICAgcmV0YXJnZXRlZCA9IGRlc3RTY2VuZS5za2lucy53cmFwKG9mZnNldCArICh2YWx1ZSBhcyBTa2luKS5faW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjbG9uZXIgPSBwcm9wLmNsb25lciA/PyBkZWZhdWx0UHJvcGVydHlDbG9uZXI7XG4gICAgICAgICAgICAgICAgICAgIHJldGFyZ2V0ZWQgPSBjbG9uZXIuY2xvbmUocHJvcC50eXBlLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKHRoaXMgYXMgUmVjb3JkPHN0cmluZywgYW55PilbbmFtZV0gPSByZXRhcmdldGVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXIgdGhlIGNvbXBvbmVudCB7QGxpbmsgQ29tcG9uZW50LmluaXR9IG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBub3RlIFVzZSB0aGlzIG1ldGhvZCBpbnN0ZWFkIG9mIGRpcmVjdGx5IGNhbGxpbmcge0BsaW5rIENvbXBvbmVudC5pbml0fSxcbiAgICAgKiBiZWNhdXNlIHRoaXMgbWV0aG9kIGNyZWF0ZXMgYW4gaGFuZGxlciBmb3IgdGhlIHtAbGluayBDb21wb25lbnQuc3RhcnR9LlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF90cmlnZ2VySW5pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaW5pdCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXQoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZ2luZS5sb2cuZXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIExvZ1RhZy5Db21wb25lbnQsXG4gICAgICAgICAgICAgICAgICAgIGBFeGNlcHRpb24gZHVyaW5nICR7dGhpcy50eXBlfSBpbml0KCkgb24gb2JqZWN0ICR7dGhpcy5vYmplY3QubmFtZX1gXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZ2luZS5sb2cuZXJyb3IoTG9nVGFnLkNvbXBvbmVudCwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKiBBcm0gb25BY3RpdmF0ZSgpIHdpdGggdGhlIGluaXRpYWwgc3RhcnQoKSBjYWxsICovXG4gICAgICAgIGNvbnN0IG9sZEFjdGl2YXRlID0gdGhpcy5vbkFjdGl2YXRlO1xuICAgICAgICB0aGlzLm9uQWN0aXZhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLm9uQWN0aXZhdGUgPSBvbGRBY3RpdmF0ZTtcbiAgICAgICAgICAgIGxldCBmYWlsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZVByb3BlcnRpZXMoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZ2luZS5sb2cuZXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIExvZ1RhZy5Db21wb25lbnQsXG4gICAgICAgICAgICAgICAgICAgIGBFeGNlcHRpb24gZHVyaW5nICR7dGhpcy50eXBlfSB2YWxpZGF0ZVByb3BlcnRpZXMoKSBvbiBvYmplY3QgJHt0aGlzLm9iamVjdC5uYW1lfWBcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5naW5lLmxvZy5lcnJvcihMb2dUYWcuQ29tcG9uZW50LCBlKTtcbiAgICAgICAgICAgICAgICBmYWlsZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQ/LigpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZW5naW5lLmxvZy5lcnJvcihcbiAgICAgICAgICAgICAgICAgICAgTG9nVGFnLkNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgYEV4Y2VwdGlvbiBkdXJpbmcgJHt0aGlzLnR5cGV9IHN0YXJ0KCkgb24gb2JqZWN0ICR7dGhpcy5vYmplY3QubmFtZX1gXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZ2luZS5sb2cuZXJyb3IoTG9nVGFnLkNvbXBvbmVudCwgZSk7XG4gICAgICAgICAgICAgICAgZmFpbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGZhaWxlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXRoaXMub25BY3RpdmF0ZSkgcmV0dXJuO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMub25BY3RpdmF0ZSgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZW5naW5lLmxvZy5lcnJvcihcbiAgICAgICAgICAgICAgICAgICAgTG9nVGFnLkNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgYEV4Y2VwdGlvbiBkdXJpbmcgJHt0aGlzLnR5cGV9IG9uQWN0aXZhdGUoKSBvbiBvYmplY3QgJHt0aGlzLm9iamVjdC5uYW1lfWBcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5naW5lLmxvZy5lcnJvcihMb2dUYWcuQ29tcG9uZW50LCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyIHRoZSBjb21wb25lbnQge0BsaW5rIENvbXBvbmVudC51cGRhdGV9IG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfdHJpZ2dlclVwZGF0ZShkdDogbnVtYmVyKSB7XG4gICAgICAgIGlmICghdGhpcy51cGRhdGUpIHJldHVybjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKGR0KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5lbmdpbmUubG9nLmVycm9yKFxuICAgICAgICAgICAgICAgIExvZ1RhZy5Db21wb25lbnQsXG4gICAgICAgICAgICAgICAgYEV4Y2VwdGlvbiBkdXJpbmcgJHt0aGlzLnR5cGV9IHVwZGF0ZSgpIG9uIG9iamVjdCAke3RoaXMub2JqZWN0Lm5hbWV9YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMuZW5naW5lLmxvZy5lcnJvcihMb2dUYWcuQ29tcG9uZW50LCBlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmVuZ2luZS53YXNtLl9kZWFjdGl2YXRlX2NvbXBvbmVudF9vbl9lcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyIHRoZSBjb21wb25lbnQge0BsaW5rIENvbXBvbmVudC5vbkFjdGl2YXRlfSBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX3RyaWdnZXJPbkFjdGl2YXRlKCkge1xuICAgICAgICBpZiAoIXRoaXMub25BY3RpdmF0ZSkgcmV0dXJuO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5vbkFjdGl2YXRlKCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMuZW5naW5lLmxvZy5lcnJvcihcbiAgICAgICAgICAgICAgICBMb2dUYWcuQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgIGBFeGNlcHRpb24gZHVyaW5nICR7dGhpcy50eXBlfSBvbkFjdGl2YXRlKCkgb24gb2JqZWN0ICR7dGhpcy5vYmplY3QubmFtZX1gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhpcy5lbmdpbmUubG9nLmVycm9yKExvZ1RhZy5Db21wb25lbnQsIGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlciB0aGUgY29tcG9uZW50IHtAbGluayBDb21wb25lbnQub25EZWFjdGl2YXRlfSBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX3RyaWdnZXJPbkRlYWN0aXZhdGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5vbkRlYWN0aXZhdGUpIHJldHVybjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMub25EZWFjdGl2YXRlKCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMuZW5naW5lLmxvZy5lcnJvcihcbiAgICAgICAgICAgICAgICBMb2dUYWcuQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgIGBFeGNlcHRpb24gZHVyaW5nICR7dGhpcy50eXBlfSBvbkRlYWN0aXZhdGUoKSBvbiBvYmplY3QgJHt0aGlzLm9iamVjdC5uYW1lfWBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLmVuZ2luZS5sb2cuZXJyb3IoTG9nVGFnLkNvbXBvbmVudCwgZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyIHRoZSBjb21wb25lbnQge0BsaW5rIENvbXBvbmVudC5vbkRlc3Ryb3l9IG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfdHJpZ2dlck9uRGVzdHJveSgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9uRGVzdHJveSkgdGhpcy5vbkRlc3Ryb3koKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5lbmdpbmUubG9nLmVycm9yKFxuICAgICAgICAgICAgICAgIExvZ1RhZy5Db21wb25lbnQsXG4gICAgICAgICAgICAgICAgYEV4Y2VwdGlvbiBkdXJpbmcgJHt0aGlzLnR5cGV9IG9uRGVzdHJveSgpIG9uIG9iamVjdCAke3RoaXMub2JqZWN0Lm5hbWV9YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMuZW5naW5lLmxvZy5lcnJvcihMb2dUYWcuQ29tcG9uZW50LCBlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zY2VuZS5fY29tcG9uZW50cy5kZXN0cm95KHRoaXMpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb21wb25lbnRzIG11c3QgYmUgcmVnaXN0ZXJlZCBiZWZvcmUgbG9hZGluZyAvIGFwcGVuZGluZyBhIHNjZW5lLlxuICpcbiAqIEl0J3MgcG9zc2libGUgdG8gZW5kIHVwIHdpdGggYSBicm9rZW4gY29tcG9uZW50IGluIHRoZSBmb2xsb3dpbmcgY2FzZXM6XG4gKlxuICogLSBDb21wb25lbnQgd2Fzbid0IHJlZ2lzdGVyZWQgd2hlbiB0aGUgc2NlbmUgd2FzIGxvYWRlZFxuICogLSBDb21wb25lbnQgaW5zdGFudGlhdGlvbiBmYWlsZWRcbiAqXG4gKiBUaGlzIGR1bW15IGNvbXBvbmVudCBpcyB0aHVzIHVzZWQgYXMgYSBwbGFjZWhvbGRlciBieSB0aGUgZW5naW5lLlxuICovXG5leHBvcnQgY2xhc3MgQnJva2VuQ29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnX19icm9rZW4tY29tcG9uZW50X18nO1xufVxuXG4vKipcbiAqIE1lcmdlIHRoZSBhc2NlbmRhbnQgcHJvcGVydGllcyBvZiBjbGFzc1xuICpcbiAqIFRoaXMgbWV0aG9kIHdhbGtzIHRoZSBwcm90b3R5cGUgY2hhaW4sIGFuZCBtZXJnZXNcbiAqIGFsbCB0aGUgcHJvcGVydGllcyBmb3VuZCBpbiBwYXJlbnQgY29tcG9uZW50cy5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqIGBgYGpzXG4gKiBpbXBvcnQge1Byb3BlcnR5LCBpbmhlcml0UHJvcGVydGllc30gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbiAqXG4gKiBjbGFzcyBQYXJlbnQge1xuICogICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0geyBwYXJlbnRQcm9wOiBQcm9wZXJ0eS5zdHJpbmcoJ3BhcmVudCcpIH07XG4gKiB9XG4gKlxuICogY2xhc3MgQ2hpbGQgZXh0ZW5kcyBQYXJlbnQge1xuICogICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0geyBjaGlsZFByb3A6IFByb3BlcnR5LnN0cmluZygnY2hpbGQnKSB9O1xuICogfVxuICogaW5oZXJpdFByb3BlcnRpZXMoQ2hpbGQpO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHRhcmdldCBUaGUgY2xhc3MgaW4gd2hpY2ggcHJvcGVydGllcyBzaG91bGQgYmUgbWVyZ2VkXG4gKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5oZXJpdFByb3BlcnRpZXModGFyZ2V0OiBDb21wb25lbnRDb25zdHJ1Y3Rvcikge1xuICAgIGlmICghdGFyZ2V0LlR5cGVOYW1lKSByZXR1cm47XG5cbiAgICBjb25zdCBjaGFpbjogQ29tcG9uZW50Q29uc3RydWN0b3JbXSA9IFtdO1xuICAgIGxldCBjdXJyOiBDb25zdHJ1Y3Rvcjxhbnk+IHwgbnVsbCA9IHRhcmdldDtcbiAgICB3aGlsZSAoY3VyciAmJiAhaXNCYXNlQ29tcG9uZW50Q2xhc3MoY3VycikpIHtcbiAgICAgICAgY29uc3QgY29tcCA9IGN1cnIgYXMgQ29tcG9uZW50Q29uc3RydWN0b3I7XG5cbiAgICAgICAgLyogU3RvcCBhdCB0aGUgZmlyc3QgY2xhc3MgdGhhdCBkb2Vzbid0IHJlcXVpcmUgcHJvcGVydGllcyBtZXJnaW5nICovXG4gICAgICAgIGNvbnN0IG5lZWRzTWVyZ2UgPSBjb21wLmhhc093blByb3BlcnR5KCdJbmhlcml0UHJvcGVydGllcycpXG4gICAgICAgICAgICA/IGNvbXAuSW5oZXJpdFByb3BlcnRpZXNcbiAgICAgICAgICAgIDogdHJ1ZTtcbiAgICAgICAgaWYgKCFuZWVkc01lcmdlKSBicmVhaztcblxuICAgICAgICBpZiAoY29tcC5oYXNPd25Qcm9wZXJ0eSgnUHJvcGVydGllcycpKSB7XG4gICAgICAgICAgICAvKiBXZSBwdXNoIHByb3BlcnRpZXMgZXZlbiBpZiB0aGUgb2JqZWN0IGlzbid0IGRlcml2aW5nIGZyb20gYSBDb21wb25lbnQgY2xhc3MuXG4gICAgICAgICAgICAgKiBUaGlzIGNvdWxkIHRoZW9yZXRpY2FsbHkgbGVhZCB0byBpc3N1ZSwgd2hlbiBpbmhlcml0aW5nIGZyb20gYW5vdGhlciB0eXBlXG4gICAgICAgICAgICAgKiBvZiBjb21wb25lbnQgKGxpdC1saWtlIGVsZW1lbnRzKSBidXQgZXh0cmVtZWx5IHVubGlrZWx5LiAqL1xuICAgICAgICAgICAgY2hhaW4ucHVzaChjb21wKTtcbiAgICAgICAgfVxuICAgICAgICBjdXJyID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGN1cnIpO1xuICAgIH1cblxuICAgIC8qIE5vIHByb3RvdHlwZSBtZXJnZSBpcyBuZWVkZWQuICovXG4gICAgaWYgKCFjaGFpbi5sZW5ndGggfHwgKGNoYWluLmxlbmd0aCA9PT0gMSAmJiBjaGFpblswXSA9PT0gdGFyZ2V0KSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbWVyZ2VkOiBSZWNvcmQ8c3RyaW5nLCBDb21wb25lbnRQcm9wZXJ0eT4gPSB7fTtcbiAgICBmb3IgKGxldCBpID0gY2hhaW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihtZXJnZWQsIGNoYWluW2ldLlByb3BlcnRpZXMpO1xuICAgIH1cbiAgICB0YXJnZXQuUHJvcGVydGllcyA9IG1lcmdlZDtcbn1cblxuLyoqXG4gKiBOYXRpdmUgY29sbGlzaW9uIGNvbXBvbmVudC5cbiAqXG4gKiBQcm92aWRlcyBhY2Nlc3MgdG8gYSBuYXRpdmUgY29sbGlzaW9uIGNvbXBvbmVudCBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGNsYXNzIENvbGxpc2lvbkNvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgLyoqIEBvdmVycmlkZSAqL1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdjb2xsaXNpb24nO1xuXG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldEV4dGVudHMoKTogRmxvYXQzMkFycmF5O1xuICAgIC8qKlxuICAgICAqIENvbGxpc2lvbiBjb21wb25lbnQgZXh0ZW50cy5cbiAgICAgKlxuICAgICAqIElmIHtAbGluayBjb2xsaWRlcn0gcmV0dXJucyB7QGxpbmsgQ29sbGlkZXIuU3BoZXJlfSwgb25seSB0aGUgZmlyc3RcbiAgICAgKiBjb21wb25lbnQgb2YgdGhlIHJldHVybmVkIHZlY3RvciBpcyB1c2VkLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBEZXN0aW5hdGlvbiBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgMyBlbGVtZW50cy5cbiAgICAgKiBAcmV0dXJucyBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqL1xuICAgIGdldEV4dGVudHM8VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQpOiBUO1xuICAgIGdldEV4dGVudHMob3V0OiBOdW1iZXJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoMykpOiBOdW1iZXJBcnJheSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9jb2xsaXNpb25fY29tcG9uZW50X2dldF9leHRlbnRzKHRoaXMuX2lkKSAvIDQ7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICBvdXRbMF0gPSB3YXNtLkhFQVBGMzJbcHRyXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5IRUFQRjMyW3B0ciArIDFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMl07XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuXG4gICAgLyoqIENvbGxpc2lvbiBjb21wb25lbnQgY29sbGlkZXIgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBjb2xsaWRlcigpOiBDb2xsaWRlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9jb2xsaXNpb25fY29tcG9uZW50X2dldF9jb2xsaWRlcih0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGNvbGxpc2lvbiBjb21wb25lbnQgY29sbGlkZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29sbGlkZXIgQ29sbGlkZXIgb2YgdGhlIGNvbGxpc2lvbiBjb21wb25lbnQuXG4gICAgICovXG4gICAgc2V0IGNvbGxpZGVyKGNvbGxpZGVyOiBDb2xsaWRlcikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9jb2xsaXNpb25fY29tcG9uZW50X3NldF9jb2xsaWRlcih0aGlzLl9pZCwgY29sbGlkZXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8ge0BsaW5rIENvbGxpc2lvbkNvbXBvbmVudC5nZXRFeHRlbnRzfS5cbiAgICAgKlxuICAgICAqIEBub3RlIFByZWZlciB0byB1c2Uge0BsaW5rIENvbGxpc2lvbkNvbXBvbmVudC5nZXRFeHRlbnRzfSBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgZXh0ZW50cygpOiBGbG9hdDMyQXJyYXkge1xuICAgICAgICAvKiogQHRvZG86IEJyZWFrIGF0IDIuMC4wLiBEbyBub3QgYWxsb3cgbW9kaWZ5aW5nIG1lbW9yeSBpbi1wbGFjZS4gKi9cbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KFxuICAgICAgICAgICAgd2FzbS5IRUFQRjMyLmJ1ZmZlcixcbiAgICAgICAgICAgIHdhc20uX3dsX2NvbGxpc2lvbl9jb21wb25lbnRfZ2V0X2V4dGVudHModGhpcy5faWQpLFxuICAgICAgICAgICAgM1xuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBjb2xsaXNpb24gY29tcG9uZW50IGV4dGVudHMuXG4gICAgICpcbiAgICAgKiBJZiB7QGxpbmsgY29sbGlkZXJ9IHJldHVybnMge0BsaW5rIENvbGxpZGVyLlNwaGVyZX0sIG9ubHkgdGhlIGZpcnN0XG4gICAgICogY29tcG9uZW50IG9mIHRoZSBwYXNzZWQgdmVjdG9yIGlzIHVzZWQuXG4gICAgICpcbiAgICAgKiBFeGFtcGxlOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAvLyBTcGFucyAxIHVuaXQgb24gdGhlIHgtYXhpcywgMiBvbiB0aGUgeS1heGlzLCAzIG9uIHRoZSB6LWF4aXMuXG4gICAgICogY29sbGlzaW9uLmV4dGVudCA9IFsxLCAyLCAzXTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBleHRlbnRzIEV4dGVudHMgb2YgdGhlIGNvbGxpc2lvbiBjb21wb25lbnQsIGV4cGVjdHMgYVxuICAgICAqICAgICAgMyBjb21wb25lbnQgYXJyYXkuXG4gICAgICovXG4gICAgc2V0IGV4dGVudHMoZXh0ZW50czogUmVhZG9ubHk8TnVtYmVyQXJyYXk+KSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9jb2xsaXNpb25fY29tcG9uZW50X2dldF9leHRlbnRzKHRoaXMuX2lkKSAvIDQ7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyXSA9IGV4dGVudHNbMF07XG4gICAgICAgIHdhc20uSEVBUEYzMltwdHIgKyAxXSA9IGV4dGVudHNbMV07XG4gICAgICAgIHdhc20uSEVBUEYzMltwdHIgKyAyXSA9IGV4dGVudHNbMl07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGNvbGxpc2lvbiBjb21wb25lbnQgcmFkaXVzLlxuICAgICAqXG4gICAgICogQG5vdGUgSWYge0BsaW5rIGNvbGxpZGVyfSBpcyBub3Qge0BsaW5rIENvbGxpZGVyLlNwaGVyZX0sIHRoZSByZXR1cm5lZCB2YWx1ZVxuICAgICAqIGNvcnJlc3BvbmRzIHRvIHRoZSByYWRpdXMgb2YgYSBzcGhlcmUgZW5jbG9zaW5nIHRoZSBzaGFwZS5cbiAgICAgKlxuICAgICAqIEV4YW1wbGU6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIHNwaGVyZS5yYWRpdXMgPSAzLjA7XG4gICAgICogY29uc29sZS5sb2coc3BoZXJlLnJhZGl1cyk7IC8vIDMuMFxuICAgICAqXG4gICAgICogYm94LmV4dGVudHMgPSBbMi4wLCAyLjAsIDIuMF07XG4gICAgICogY29uc29sZS5sb2coYm94LnJhZGl1cyk7IC8vIDEuNzMyLi4uXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKi9cbiAgICBnZXQgcmFkaXVzKCk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBpZiAodGhpcy5jb2xsaWRlciA9PT0gQ29sbGlkZXIuU3BoZXJlKVxuICAgICAgICAgICAgcmV0dXJuIHdhc20uSEVBUEYzMlt3YXNtLl93bF9jb2xsaXNpb25fY29tcG9uZW50X2dldF9leHRlbnRzKHRoaXMuX2lkKSA+PiAyXTtcbiAgICAgICAgY29uc3QgZXh0ZW50cyA9IG5ldyBGbG9hdDMyQXJyYXkoXG4gICAgICAgICAgICB3YXNtLkhFQVBGMzIuYnVmZmVyLFxuICAgICAgICAgICAgd2FzbS5fd2xfY29sbGlzaW9uX2NvbXBvbmVudF9nZXRfZXh0ZW50cyh0aGlzLl9pZCksXG4gICAgICAgICAgICAzXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHgyID0gZXh0ZW50c1swXSAqIGV4dGVudHNbMF07XG4gICAgICAgIGNvbnN0IHkyID0gZXh0ZW50c1sxXSAqIGV4dGVudHNbMV07XG4gICAgICAgIGNvbnN0IHoyID0gZXh0ZW50c1syXSAqIGV4dGVudHNbMl07XG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQoeDIgKyB5MiArIHoyKSAvIDI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGNvbGxpc2lvbiBjb21wb25lbnQgcmFkaXVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHJhZGl1cyBSYWRpdXMgb2YgdGhlIGNvbGxpc2lvbiBjb21wb25lbnRcbiAgICAgKlxuICAgICAqIEBub3RlIElmIHtAbGluayBjb2xsaWRlcn0gaXMgbm90IHtAbGluayBDb2xsaWRlci5TcGhlcmV9LFxuICAgICAqIHRoZSBleHRlbnRzIGFyZSBzZXQgdG8gZm9ybSBhIHNxdWFyZSB0aGF0IGZpdHMgYSBzcGhlcmUgd2l0aCB0aGUgcHJvdmlkZWQgcmFkaXVzLlxuICAgICAqXG4gICAgICogRXhhbXBsZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogYWFiYkNvbGxpc2lvbi5yYWRpdXMgPSAyLjA7IC8vIEFBQkIgZml0cyBhIHNwaGVyZSBvZiByYWRpdXMgMi4wXG4gICAgICogYm94Q29sbGlzaW9uLnJhZGl1cyA9IDMuMDsgLy8gQm94IG5vdyBmaXRzIGEgc3BoZXJlIG9mIHJhZGl1cyAzLjAsIGtlZXBpbmcgb3JpZW50YXRpb25cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqL1xuICAgIHNldCByYWRpdXMocmFkaXVzOiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gdGhpcy5jb2xsaWRlciA9PT0gQ29sbGlkZXIuU3BoZXJlID8gcmFkaXVzIDogKDIgKiByYWRpdXMpIC8gU1FSVF8zO1xuICAgICAgICB0aGlzLmV4dGVudHMuc2V0KFtsZW5ndGgsIGxlbmd0aCwgbGVuZ3RoXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29sbGlzaW9uIGNvbXBvbmVudCBncm91cC5cbiAgICAgKlxuICAgICAqIFRoZSBncm91cHMgaXMgYSBiaXRtYXNrIHRoYXQgaXMgY29tcGFyZWQgdG8gb3RoZXIgY29tcG9uZW50cyBpbiB7QGxpbmsgQ29sbGlzaW9uQ29tcG9uZW50I3F1ZXJ5T3ZlcmxhcHN9XG4gICAgICogb3IgdGhlIGdyb3VwIGluIHtAbGluayBTY2VuZSNyYXlDYXN0fS5cbiAgICAgKlxuICAgICAqIENvbGxpZGVycyB0aGF0IGhhdmUgbm8gY29tbW9uIGdyb3VwcyB3aWxsIG5vdCBvdmVybGFwIHdpdGggZWFjaCBvdGhlci4gSWYgYSBjb2xsaWRlclxuICAgICAqIGhhcyBub25lIG9mIHRoZSBncm91cHMgc2V0IGZvciB7QGxpbmsgU2NlbmUjcmF5Q2FzdH0sIHRoZSByYXkgd2lsbCBub3QgaGl0IGl0LlxuICAgICAqXG4gICAgICogRWFjaCBiaXQgcmVwcmVzZW50cyBiZWxvbmdpbmcgdG8gYSBncm91cCwgc2VlIGV4YW1wbGUuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqICAgIC8vIGMgYmVsb25ncyB0byBncm91cCAyXG4gICAgICogICAgYy5ncm91cCA9ICgxIDw8IDIpO1xuICAgICAqXG4gICAgICogICAgLy8gYyBiZWxvbmdzIHRvIGdyb3VwIDBcbiAgICAgKiAgICBjLmdyb3VwID0gKDEgPDwgMCk7XG4gICAgICpcbiAgICAgKiAgICAvLyBjIGJlbG9uZ3MgdG8gZ3JvdXAgMCAqYW5kKiAyXG4gICAgICogICAgYy5ncm91cCA9ICgxIDw8IDApIHwgKDEgPDwgMik7XG4gICAgICpcbiAgICAgKiAgICAoYy5ncm91cCAmICgxIDw8IDIpKSAhPSAwOyAvLyB0cnVlXG4gICAgICogICAgKGMuZ3JvdXAgJiAoMSA8PCA3KSkgIT0gMDsgLy8gZmFsc2VcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBncm91cCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfY29sbGlzaW9uX2NvbXBvbmVudF9nZXRfZ3JvdXAodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBjb2xsaXNpb24gY29tcG9uZW50IGdyb3VwLlxuICAgICAqXG4gICAgICogQHBhcmFtIGdyb3VwIEdyb3VwIG1hc2sgb2YgdGhlIGNvbGxpc2lvbiBjb21wb25lbnQuXG4gICAgICovXG4gICAgc2V0IGdyb3VwKGdyb3VwOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfY29sbGlzaW9uX2NvbXBvbmVudF9zZXRfZ3JvdXAodGhpcy5faWQsIGdyb3VwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBRdWVyeSBvdmVybGFwcGluZyBvYmplY3RzLlxuICAgICAqXG4gICAgICogVXNhZ2U6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IGNvbGxpc2lvbiA9IG9iamVjdC5nZXRDb21wb25lbnQoJ2NvbGxpc2lvbicpO1xuICAgICAqIGNvbnN0IG92ZXJsYXBzID0gY29sbGlzaW9uLnF1ZXJ5T3ZlcmxhcHMoKTtcbiAgICAgKiBmb3IoY29uc3Qgb3RoZXJDb2xsaXNpb24gb2Ygb3ZlcmxhcHMpIHtcbiAgICAgKiAgICAgY29uc3Qgb3RoZXJPYmplY3QgPSBvdGhlckNvbGxpc2lvbi5vYmplY3Q7XG4gICAgICogICAgIGNvbnNvbGUubG9nKGBDb2xsaXNpb24gd2l0aCBvYmplY3QgJHtvdGhlck9iamVjdC5vYmplY3RJZH1gKTtcbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBDb2xsaXNpb24gY29tcG9uZW50cyBvdmVybGFwcGluZyB0aGlzIGNvbGxpZGVyLlxuICAgICAqL1xuICAgIHF1ZXJ5T3ZlcmxhcHMoKTogQ29sbGlzaW9uQ29tcG9uZW50W10ge1xuICAgICAgICBjb25zdCBjb3VudCA9IHRoaXMuZW5naW5lLndhc20uX3dsX2NvbGxpc2lvbl9jb21wb25lbnRfcXVlcnlfb3ZlcmxhcHMoXG4gICAgICAgICAgICB0aGlzLl9pZCxcbiAgICAgICAgICAgIHRoaXMuZW5naW5lLndhc20uX3RlbXBNZW0sXG4gICAgICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl90ZW1wTWVtU2l6ZSA+PiAxXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IG92ZXJsYXBzOiBDb2xsaXNpb25Db21wb25lbnRbXSA9IG5ldyBBcnJheShjb3VudCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLmVuZ2luZS53YXNtLl90ZW1wTWVtVWludDE2W2ldO1xuICAgICAgICAgICAgb3ZlcmxhcHNbaV0gPSB0aGlzLl9zY2VuZS5fY29tcG9uZW50cy53cmFwQ29sbGlzaW9uKGlkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3ZlcmxhcHM7XG4gICAgfVxufVxuXG4vKipcbiAqIE5hdGl2ZSB0ZXh0IGNvbXBvbmVudFxuICpcbiAqIFByb3ZpZGVzIGFjY2VzcyB0byBhIG5hdGl2ZSB0ZXh0IGNvbXBvbmVudCBpbnN0YW5jZVxuICovXG5leHBvcnQgY2xhc3MgVGV4dENvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgLyoqIEBvdmVycmlkZSAqL1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICd0ZXh0JztcblxuICAgIC8qKiBUZXh0IGNvbXBvbmVudCBhbGlnbm1lbnQuICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgYWxpZ25tZW50KCk6IEFsaWdubWVudCB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9nZXRfaG9yaXpvbnRhbF9hbGlnbm1lbnQodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0ZXh0IGNvbXBvbmVudCBhbGlnbm1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYWxpZ25tZW50IEFsaWdubWVudCBmb3IgdGhlIHRleHQgY29tcG9uZW50LlxuICAgICAqL1xuICAgIHNldCBhbGlnbm1lbnQoYWxpZ25tZW50OiBBbGlnbm1lbnQpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfdGV4dF9jb21wb25lbnRfc2V0X2hvcml6b250YWxfYWxpZ25tZW50KHRoaXMuX2lkLCBhbGlnbm1lbnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRleHQgY29tcG9uZW50IHZlcnRpY2FsIGFsaWdubWVudC5cbiAgICAgKiBAc2luY2UgMS4yLjBcbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCB2ZXJ0aWNhbEFsaWdubWVudCgpOiBWZXJ0aWNhbEFsaWdubWVudCB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9nZXRfdmVydGljYWxfYWxpZ25tZW50KHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGV4dCBjb21wb25lbnQgdmVydGljYWwgYWxpZ25tZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHZlcnRpY2FsQWxpZ25tZW50IFZlcnRpY2FsIGZvciB0aGUgdGV4dCBjb21wb25lbnQuXG4gICAgICogQHNpbmNlIDEuMi4wXG4gICAgICovXG4gICAgc2V0IHZlcnRpY2FsQWxpZ25tZW50KHZlcnRpY2FsQWxpZ25tZW50OiBWZXJ0aWNhbEFsaWdubWVudCkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9zZXRfdmVydGljYWxfYWxpZ25tZW50KFxuICAgICAgICAgICAgdGhpcy5faWQsXG4gICAgICAgICAgICB2ZXJ0aWNhbEFsaWdubWVudFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRleHQgY29tcG9uZW50IGp1c3RpZmljYXRpb24uXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBUZXh0Q29tcG9uZW50LnZlcnRpY2FsQWxpZ25tZW50fSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IGp1c3RpZmljYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZlcnRpY2FsQWxpZ25tZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0ZXh0IGNvbXBvbmVudCBqdXN0aWZpY2F0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGp1c3RpZmljYXRpb24gSnVzdGlmaWNhdGlvbiBmb3IgdGhlIHRleHQgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgVGV4dENvbXBvbmVudC52ZXJ0aWNhbEFsaWdubWVudH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBzZXQganVzdGlmaWNhdGlvbihqdXN0aWZpY2F0aW9uOiBWZXJ0aWNhbEFsaWdubWVudCkge1xuICAgICAgICB0aGlzLnZlcnRpY2FsQWxpZ25tZW50ID0ganVzdGlmaWNhdGlvbjtcbiAgICB9XG5cbiAgICAvKiogVGV4dCBjb21wb25lbnQgY2hhcmFjdGVyIHNwYWNpbmcuICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgY2hhcmFjdGVyU3BhY2luZygpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfdGV4dF9jb21wb25lbnRfZ2V0X2NoYXJhY3Rlcl9zcGFjaW5nKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGV4dCBjb21wb25lbnQgY2hhcmFjdGVyIHNwYWNpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3BhY2luZyBDaGFyYWN0ZXIgc3BhY2luZyBmb3IgdGhlIHRleHQgY29tcG9uZW50LlxuICAgICAqL1xuICAgIHNldCBjaGFyYWN0ZXJTcGFjaW5nKHNwYWNpbmc6IG51bWJlcikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9zZXRfY2hhcmFjdGVyX3NwYWNpbmcodGhpcy5faWQsIHNwYWNpbmcpO1xuICAgIH1cblxuICAgIC8qKiBUZXh0IGNvbXBvbmVudCBsaW5lIHNwYWNpbmcuICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgbGluZVNwYWNpbmcoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X2dldF9saW5lX3NwYWNpbmcodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0ZXh0IGNvbXBvbmVudCBsaW5lIHNwYWNpbmdcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzcGFjaW5nIExpbmUgc3BhY2luZyBmb3IgdGhlIHRleHQgY29tcG9uZW50XG4gICAgICovXG4gICAgc2V0IGxpbmVTcGFjaW5nKHNwYWNpbmc6IG51bWJlcikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9zZXRfbGluZV9zcGFjaW5nKHRoaXMuX2lkLCBzcGFjaW5nKTtcbiAgICB9XG5cbiAgICAvKiogVGV4dCBjb21wb25lbnQgZWZmZWN0LiAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IGVmZmVjdCgpOiBUZXh0RWZmZWN0IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X2dldF9lZmZlY3QodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0ZXh0IGNvbXBvbmVudCBlZmZlY3RcbiAgICAgKlxuICAgICAqIEBwYXJhbSBlZmZlY3QgRWZmZWN0IGZvciB0aGUgdGV4dCBjb21wb25lbnRcbiAgICAgKi9cbiAgICBzZXQgZWZmZWN0KGVmZmVjdDogVGV4dEVmZmVjdCkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9zZXRfZWZmZWN0KHRoaXMuX2lkLCBlZmZlY3QpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRleHQgY29tcG9uZW50IGxpbmUgd3JhcCBtb2RlLlxuICAgICAqIEBzaW5jZSAxLjIuMVxuICAgICAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IHdyYXBNb2RlKCk6IFRleHRXcmFwTW9kZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9nZXRfd3JhcE1vZGUodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0ZXh0IGNvbXBvbmVudCBsaW5lIHdyYXAgbW9kZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB3cmFwTW9kZSBMaW5lIHdyYXAgbW9kZSBmb3IgdGhlIHRleHQgY29tcG9uZW50LlxuICAgICAqIEBzaW5jZSAxLjIuMVxuICAgICAqL1xuICAgIHNldCB3cmFwTW9kZSh3cmFwTW9kZTogVGV4dFdyYXBNb2RlKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X3NldF93cmFwTW9kZSh0aGlzLl9pZCwgd3JhcE1vZGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRleHQgY29tcG9uZW50IGxpbmUgd3JhcCB3aWR0aC5cbiAgICAgKiBAc2luY2UgMS4yLjFcbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCB3cmFwV2lkdGgoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X2dldF93cmFwV2lkdGgodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0ZXh0IGNvbXBvbmVudCBsaW5lIHdyYXAgd2lkdGguXG4gICAgICpcbiAgICAgKiBPbmx5IHRha2VzIGVmZmVjdCB3aGVuIHtAbGluayB3cmFwTW9kZX0gaXMgc29tZXRoaW5nIG90aGVyIHRoYW5cbiAgICAgKiB7QGxpbmsgVGV4dFdyYXBNb2RlLk5vbmV9LlxuICAgICAqXG4gICAgICogQHBhcmFtIHdpZHRoIExpbmUgd3JhcCB3aWR0aCBmb3IgdGhlIHRleHQgY29tcG9uZW50LlxuICAgICAqIEBzaW5jZSAxLjIuMVxuICAgICAqL1xuICAgIHNldCB3cmFwV2lkdGgod2lkdGg6IG51bWJlcikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9zZXRfd3JhcFdpZHRoKHRoaXMuX2lkLCB3aWR0aCk7XG4gICAgfVxuXG4gICAgLyoqIFRleHQgY29tcG9uZW50IHRleHQuICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgdGV4dCgpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfdGV4dF9jb21wb25lbnRfZ2V0X3RleHQodGhpcy5faWQpO1xuICAgICAgICByZXR1cm4gd2FzbS5VVEY4VG9TdHJpbmcocHRyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGV4dCBjb21wb25lbnQgdGV4dC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0ZXh0IFRleHQgb2YgdGhlIHRleHQgY29tcG9uZW50LlxuICAgICAqL1xuICAgIHNldCB0ZXh0KHRleHQ6IGFueSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfdGV4dF9jb21wb25lbnRfc2V0X3RleHQodGhpcy5faWQsIHdhc20udGVtcFVURjgodGV4dC50b1N0cmluZygpKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IG1hdGVyaWFsIHRvIHJlbmRlciB0aGUgdGV4dCB3aXRoLlxuICAgICAqXG4gICAgICogQHBhcmFtIG1hdGVyaWFsIE5ldyBtYXRlcmlhbC5cbiAgICAgKi9cbiAgICBzZXQgbWF0ZXJpYWwobWF0ZXJpYWw6IE1hdGVyaWFsIHwgbnVsbCB8IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBtYXRJbmRleCA9IG1hdGVyaWFsID8gbWF0ZXJpYWwuX2lkIDogMDtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfdGV4dF9jb21wb25lbnRfc2V0X21hdGVyaWFsKHRoaXMuX2lkLCBtYXRJbmRleCk7XG4gICAgfVxuXG4gICAgLyoqIE1hdGVyaWFsIHVzZWQgdG8gcmVuZGVyIHRoZSB0ZXh0LiAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IG1hdGVyaWFsKCk6IE1hdGVyaWFsIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5lbmdpbmUud2FzbS5fd2xfdGV4dF9jb21wb25lbnRfZ2V0X21hdGVyaWFsKHRoaXMuX2lkKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLm1hdGVyaWFscy53cmFwKGluZGV4KTtcbiAgICB9XG5cbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0Qm91bmRpbmdCb3hGb3JUZXh0KHRleHQ6IHN0cmluZyk6IEZsb2F0MzJBcnJheTtcbiAgICAvKipcbiAgICAgKiBBeGlzLWFsaWduZWQgYm91bmRpbmcgYm94IGZvciBhIGdpdmVuIHRleHQsIGluIG9iamVjdCBzcGFjZS5cbiAgICAgKlxuICAgICAqIFRvIGNhbGN1bGF0ZSB0aGUgc2l6ZSBmb3IgdGhlIGN1cnJlbnRseSBzZXQgdGV4dCwgdXNlXG4gICAgICoge0BsaW5rIGdldEJvdW5kaW5nQm94fS5cbiAgICAgKlxuICAgICAqIFVzZWZ1bCBmb3IgY2FsY3VsYXRpbmcgdGhlIHRleHQgc2l6ZSBiZWZvcmUgYW4gdXBkYXRlIGFuZCBwb3RlbnRpYWxseVxuICAgICAqIGFkanVzdGluZyB0aGUgdGV4dDpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogbGV0IHVwZGF0ZWROYW1lID0gJ3NvbWUgdmVyeSBsb25nIG5hbWUnO1xuICAgICAqIGNvbnN0IGJveCA9IG5ldyBGbG9hdDMyQXJyYXkoNCk7XG4gICAgICogdGV4dC5nZXRCb3VuZGluZ0JveEZvclRleHQodXBkYXRlZE5hbWUsIGJveCk7XG4gICAgICogY29uc3Qgd2lkdGggPSBib3hbMl0gLSBib3hbMF07XG4gICAgICogaWYod2lkdGggPiAyLjApIHtcbiAgICAgKiAgICAgdXBkYXRlZE5hbWUgPSB1cGRhdGVkTmFtZS5zbGljZSgwLCA1KSArICcuLi4nO1xuICAgICAqIH1cbiAgICAgKiB0ZXh0LnRleHQgPSB1cGRhdGVkTmFtZTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSB0ZXh0IFRleHQgc3RyaW5nIHRvIGNhbGN1bGF0ZSB0aGUgYm91bmRpbmcgYm94IGZvci5cbiAgICAgKiBAcGFyYW0gb3V0IFByZWFsbG9jYXRlZCBhcnJheSB0byB3cml0ZSBpbnRvLCB0byBhdm9pZCBnYXJiYWdlLFxuICAgICAqICAgICBvdGhlcndpc2Ugd2lsbCBhbGxvY2F0ZSBhIG5ldyBGbG9hdDMyQXJyYXkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBCb3VuZGluZyBib3ggLSBsZWZ0LCBib3R0b20sIHJpZ2h0LCB0b3AuXG4gICAgICovXG4gICAgZ2V0Qm91bmRpbmdCb3hGb3JUZXh0PFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4odGV4dDogc3RyaW5nLCBvdXQ6IFQpOiBUO1xuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRCb3VuZGluZ0JveEZvclRleHQ8VCBleHRlbmRzIE51bWJlckFycmF5PihcbiAgICAgICAgdGV4dDogc3RyaW5nLFxuICAgICAgICBvdXQ6IFQgfCBGbG9hdDMyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KDQpXG4gICAgKTogVCB8IEZsb2F0MzJBcnJheSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICAvKiBPZmZzZXQgYnkgNCBmbG9hdHMsIG91dHB1dCBpcyB3cml0dGVuIHRvIF90ZW1wTWVtICovXG4gICAgICAgIGNvbnN0IHRleHRQdHIgPSB3YXNtLnRlbXBVVEY4KHRleHQsIDQgKiA0KTtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfdGV4dF9jb21wb25lbnRfZ2V0X2JvdW5kaW5nQm94KFxuICAgICAgICAgICAgdGhpcy5faWQsXG4gICAgICAgICAgICB0ZXh0UHRyLFxuICAgICAgICAgICAgd2FzbS5fdGVtcE1lbVxuICAgICAgICApO1xuICAgICAgICBvdXRbMF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzJdO1xuICAgICAgICBvdXRbM10gPSB3YXNtLl90ZW1wTWVtRmxvYXRbM107XG4gICAgICAgIHJldHVybiBvdXQgYXMgVDtcbiAgICB9XG5cbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0Qm91bmRpbmdCb3goKTogRmxvYXQzMkFycmF5O1xuICAgIC8qKlxuICAgICAqIEF4aXMtYWxpZ25lZCBib3VuZGluZyBib3gsIGluIG9iamVjdCBzcGFjZS5cbiAgICAgKlxuICAgICAqIFRoZSBib3VuZGluZyBib3ggaXMgY29tcHV0ZWQgdXNpbmcgdGhlIGN1cnJlbnQgY29tcG9uZW50IHByb3BlcnRpZXNcbiAgICAgKiB0aGF0IGluZmx1ZW5jZSB0aGUgcG9zaXRpb24gYW5kIHNpemUgb2YgdGhlIHRleHQuIFRoZSBib3VuZGluZyBib3ggaXNcbiAgICAgKiBhZmZlY3RlZCBieSBhbGlnbm1lbnQsIHNwYWNpbmcsIGVmZmVjdCB0eXBlIGFuZCB0aGUgZm9udCBzZXQgaW4gdGhlXG4gICAgICogbWF0ZXJpYWwuXG4gICAgICpcbiAgICAgKiBUbyBjYWxjdWxhdGUgdGhlIHNpemUgZm9yIGEgZGlmZmVyZW50IHRleHQsIHVzZVxuICAgICAqIHtAbGluayBnZXRCb3VuZGluZ0JveEZvclRleHR9LlxuICAgICAqXG4gICAgICogVXNlZnVsIGZvciBhZGp1c3RpbmcgdGV4dCBwb3NpdGlvbiBvciBzY2FsaW5nOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBib3ggPSBuZXcgRmxvYXQzMkFycmF5KDQpO1xuICAgICAqIHRleHQuZ2V0Qm91bmRpbmdCb3goYm94KTtcbiAgICAgKiBjb25zdCB3aWR0aCA9IGJveFsyXSAtIGJveFswXTtcbiAgICAgKiAvLyBNYWtlIHRleHQgMW0gd2lkZVxuICAgICAqIHRleHQub2JqZWN0LnNldFNjYWxpbmdMb2NhbChbMS93aWR0aCwgMSwgMV0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHRleHQgVGV4dCBzdHJpbmcgdG8gY2FsY3VsYXRlIHRoZSBib3VuZGluZyBib3ggZm9yLlxuICAgICAqIEBwYXJhbSBvdXQgUHJlYWxsb2NhdGVkIGFycmF5IHRvIHdyaXRlIGludG8sIHRvIGF2b2lkIGdhcmJhZ2UsXG4gICAgICogICAgIG90aGVyd2lzZSB3aWxsIGFsbG9jYXRlIGEgbmV3IEZsb2F0MzJBcnJheS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEJvdW5kaW5nIGJveCAtIGxlZnQsIGJvdHRvbSwgcmlnaHQsIHRvcC5cbiAgICAgKi9cbiAgICBnZXRCb3VuZGluZ0JveDxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCk6IFQ7XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldEJvdW5kaW5nQm94PFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4oXG4gICAgICAgIG91dDogVCB8IEZsb2F0MzJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoNClcbiAgICApOiBUIHwgRmxvYXQzMkFycmF5IHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X2dldF9ib3VuZGluZ0JveCh0aGlzLl9pZCwgMCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG4gICAgICAgIG91dFszXSA9IHdhc20uX3RlbXBNZW1GbG9hdFszXTtcbiAgICAgICAgcmV0dXJuIG91dCBhcyBUO1xuICAgIH1cbn1cblxuLyoqXG4gKiBOYXRpdmUgdmlldyBjb21wb25lbnQuXG4gKlxuICogUHJvdmlkZXMgYWNjZXNzIHRvIGEgbmF0aXZlIHZpZXcgY29tcG9uZW50IGluc3RhbmNlLlxuICovXG5leHBvcnQgY2xhc3MgVmlld0NvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgLyoqIEBvdmVycmlkZSAqL1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICd2aWV3JztcblxuICAgIC8qKlxuICAgICAqIFByb2plY3Rpb24gdHlwZSBvZiB0aGUgdmlldy5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjIuMlxuICAgICAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IHByb2plY3Rpb25UeXBlKCk6IFByb2plY3Rpb25UeXBlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3ZpZXdfY29tcG9uZW50X2dldF9wcm9qZWN0aW9uVHlwZSh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBwcm9qZWN0aW9uIHR5cGUgb2YgdGhlIHZpZXcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHlwZSBOZXcgcHJvamVjdGlvbiB0eXBlLlxuICAgICAqIEBzaW5jZSAxLjIuMlxuICAgICAqL1xuICAgIHNldCBwcm9qZWN0aW9uVHlwZSh0eXBlKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3ZpZXdfY29tcG9uZW50X3NldF9wcm9qZWN0aW9uVHlwZSh0aGlzLl9pZCwgdHlwZSk7XG4gICAgfVxuXG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldFByb2plY3Rpb25NYXRyaXgoKTogRmxvYXQzMkFycmF5O1xuICAgIC8qKlxuICAgICAqIFByb2plY3Rpb24gbWF0cml4LlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBEZXN0aW5hdGlvbiBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgMTYgZWxlbWVudHMuXG4gICAgICogQHJldHVybnMgVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBnZXRQcm9qZWN0aW9uTWF0cml4PFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBUKTogVDtcbiAgICBnZXRQcm9qZWN0aW9uTWF0cml4KG91dDogTnVtYmVyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KDE2KSk6IE51bWJlckFycmF5IHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9XG4gICAgICAgICAgICB3YXNtLl93bF92aWV3X2NvbXBvbmVudF9nZXRfcHJvamVjdGlvbl9tYXRyaXgodGhpcy5faWQpIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7ICsraSkge1xuICAgICAgICAgICAgb3V0W2ldID0gd2FzbS5IRUFQRjMyW3B0ciArIGldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byB7QGxpbmsgVmlld0NvbXBvbmVudC5nZXRQcm9qZWN0aW9uTWF0cml4fS5cbiAgICAgKlxuICAgICAqIEBub3RlIFByZWZlciB0byB1c2Uge0BsaW5rIFZpZXdDb21wb25lbnQuZ2V0UHJvamVjdGlvbk1hdHJpeH0gZm9yIHBlcmZvcm1hbmNlLlxuICAgICAqL1xuICAgIEBlbnVtZXJhYmxlKClcbiAgICBnZXQgcHJvamVjdGlvbk1hdHJpeCgpOiBGbG9hdDMyQXJyYXkge1xuICAgICAgICAvKiogQHRvZG86IEJyZWFrIGF0IDIuMC4wLiBEbyBub3QgYWxsb3cgbW9kaWZ5aW5nIG1lbW9yeSBpbi1wbGFjZS4gKi9cbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KFxuICAgICAgICAgICAgd2FzbS5IRUFQRjMyLmJ1ZmZlcixcbiAgICAgICAgICAgIHdhc20uX3dsX3ZpZXdfY29tcG9uZW50X2dldF9wcm9qZWN0aW9uX21hdHJpeCh0aGlzLl9pZCksXG4gICAgICAgICAgICAxNlxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKiBWaWV3Q29tcG9uZW50IG5lYXIgY2xpcHBpbmcgcGxhbmUgdmFsdWUuICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgbmVhcigpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfdmlld19jb21wb25lbnRfZ2V0X25lYXIodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBuZWFyIGNsaXBwaW5nIHBsYW5lIGRpc3RhbmNlIGZvciB0aGUgdmlldy5cbiAgICAgKlxuICAgICAqIElmIGFuIFhSIHNlc3Npb24gaXMgYWN0aXZlLCB0aGUgY2hhbmdlIHdpbGwgYXBwbHkgaW4gdGhlXG4gICAgICogZm9sbG93aW5nIGZyYW1lLCBvdGhlcndpc2UgdGhlIGNoYW5nZSBpcyBpbW1lZGlhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmVhciBOZWFyIGRlcHRoIHZhbHVlLlxuICAgICAqL1xuICAgIHNldCBuZWFyKG5lYXI6IG51bWJlcikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF92aWV3X2NvbXBvbmVudF9zZXRfbmVhcih0aGlzLl9pZCwgbmVhcik7XG4gICAgfVxuXG4gICAgLyoqIEZhciBjbGlwcGluZyBwbGFuZSB2YWx1ZS4gKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBmYXIoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3ZpZXdfY29tcG9uZW50X2dldF9mYXIodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBmYXIgY2xpcHBpbmcgcGxhbmUgZGlzdGFuY2UgZm9yIHRoZSB2aWV3LlxuICAgICAqXG4gICAgICogSWYgYW4gWFIgc2Vzc2lvbiBpcyBhY3RpdmUsIHRoZSBjaGFuZ2Ugd2lsbCBhcHBseSBpbiB0aGVcbiAgICAgKiBmb2xsb3dpbmcgZnJhbWUsIG90aGVyd2lzZSB0aGUgY2hhbmdlIGlzIGltbWVkaWF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmYXIgTmVhciBkZXB0aCB2YWx1ZS5cbiAgICAgKi9cbiAgICBzZXQgZmFyKGZhcjogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3ZpZXdfY29tcG9uZW50X3NldF9mYXIodGhpcy5faWQsIGZhcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBob3Jpem9udGFsIGZpZWxkIG9mIHZpZXcgZm9yIHRoZSB2aWV3LCAqKmluIGRlZ3JlZXMqKi5cbiAgICAgKlxuICAgICAqIElmIGFuIFhSIHNlc3Npb24gaXMgYWN0aXZlIGFuZCB0aGlzIGlzIHRoZSBsZWZ0IG9yIHJpZ2h0IGV5ZSB2aWV3LCB0aGlzXG4gICAgICogcmV0dXJucyB0aGUgZmllbGQgb2YgdmlldyByZXBvcnRlZCBieSB0aGUgZGV2aWNlLCByZWdhcmRsZXNzIG9mIHRoZSBmb3ZcbiAgICAgKiB0aGF0IHdhcyBzZXQuXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgZm92KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF92aWV3X2NvbXBvbmVudF9nZXRfZm92KHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGhvcml6b250YWwgZmllbGQgb2YgdmlldyBmb3IgdGhlIHZpZXcsICoqaW4gZGVncmVlcyoqLlxuICAgICAqXG4gICAgICogT25seSBoYXMgYW4gZWZmZWN0IGlmIHtAbGluayBwcm9qZWN0aW9uVHlwZX0gaXNcbiAgICAgKiB7QGxpbmsgUHJvamVjdGlvblR5cGUuUGVyc3BlY3RpdmV9LlxuICAgICAqXG4gICAgICogSWYgYW4gWFIgc2Vzc2lvbiBpcyBhY3RpdmUgYW5kIHRoaXMgaXMgdGhlIGxlZnQgb3IgcmlnaHQgZXllIHZpZXcsIHRoZVxuICAgICAqIGZpZWxkIG9mIHZpZXcgcmVwb3J0ZWQgYnkgdGhlIGRldmljZSBpcyB1c2VkIGFuZCB0aGlzIHZhbHVlIGlzIGlnbm9yZWQuXG4gICAgICogQWZ0ZXIgdGhlIFhSIHNlc3Npb24gZW5kcywgdGhlIG5ldyB2YWx1ZSBpcyBhcHBsaWVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGZvdiBIb3Jpem9udGFsIGZpZWxkIG9mIHZpZXcsICoqaW4gZGVncmVlcyoqLlxuICAgICAqL1xuICAgIHNldCBmb3YoZm92KSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3ZpZXdfY29tcG9uZW50X3NldF9mb3YodGhpcy5faWQsIGZvdik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB3aWR0aCBvZiB0aGUgb3J0aG9ncmFwaGljIHZpZXdpbmcgdm9sdW1lLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMi4yXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgZXh0ZW50KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF92aWV3X2NvbXBvbmVudF9nZXRfZXh0ZW50KHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHdpZHRoIG9mIHRoZSBvcnRob2dyYXBoaWMgdmlld2luZyB2b2x1bWUuXG4gICAgICpcbiAgICAgKiBPbmx5IGhhcyBhbiBlZmZlY3QgaWYge0BsaW5rIHByb2plY3Rpb25UeXBlfSBpc1xuICAgICAqIHtAbGluayBQcm9qZWN0aW9uVHlwZS5PcnRob2dyYXBoaWN9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGV4dGVudCBOZXcgZXh0ZW50LlxuICAgICAqIEBzaW5jZSAxLjIuMlxuICAgICAqL1xuICAgIHNldCBleHRlbnQoZXh0ZW50KSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3ZpZXdfY29tcG9uZW50X3NldF9leHRlbnQodGhpcy5faWQsIGV4dGVudCk7XG4gICAgfVxufVxuXG4vKipcbiAqIE5hdGl2ZSBpbnB1dCBjb21wb25lbnQuXG4gKlxuICogUHJvdmlkZXMgYWNjZXNzIHRvIGEgbmF0aXZlIGlucHV0IGNvbXBvbmVudCBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGNsYXNzIElucHV0Q29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAvKiogQG92ZXJyaWRlICovXG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ2lucHV0JztcblxuICAgIC8qKiBJbnB1dCBjb21wb25lbnQgdHlwZSAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IGlucHV0VHlwZSgpOiBJbnB1dFR5cGUge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfaW5wdXRfY29tcG9uZW50X2dldF90eXBlKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgaW5wdXQgY29tcG9uZW50IHR5cGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW1zIE5ldyBpbnB1dCBjb21wb25lbnQgdHlwZS5cbiAgICAgKi9cbiAgICBzZXQgaW5wdXRUeXBlKHR5cGU6IElucHV0VHlwZSkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9pbnB1dF9jb21wb25lbnRfc2V0X3R5cGUodGhpcy5faWQsIHR5cGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdlYlhSIERldmljZSBBUEkgaW5wdXQgc291cmNlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGlucHV0IGNvbXBvbmVudCxcbiAgICAgKiBpZiB0eXBlIHtAbGluayBJbnB1dFR5cGUuQ29udHJvbGxlckxlZnR9IG9yIHtAbGluayBJbnB1dFR5cGUuQ29udHJvbGxlclJpZ2h0fS5cbiAgICAgKi9cbiAgICBAZW51bWVyYWJsZSgpXG4gICAgZ2V0IHhySW5wdXRTb3VyY2UoKTogWFJJbnB1dFNvdXJjZSB8IG51bGwge1xuICAgICAgICBjb25zdCB4ciA9IHRoaXMuZW5naW5lLnhyO1xuICAgICAgICBpZiAoIXhyKSByZXR1cm4gbnVsbDtcblxuICAgICAgICBmb3IgKGxldCBpbnB1dFNvdXJjZSBvZiB4ci5zZXNzaW9uLmlucHV0U291cmNlcykge1xuICAgICAgICAgICAgaWYgKGlucHV0U291cmNlLmhhbmRlZG5lc3MgPT0gdGhpcy5oYW5kZWRuZXNzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlucHV0U291cmNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogJ2xlZnQnLCAncmlnaHQnIG9yIGBudWxsYCBkZXBlbmRpbmcgb24gdGhlIHtAbGluayBJbnB1dENvbXBvbmVudCNpbnB1dFR5cGV9LlxuICAgICAqL1xuICAgIEBlbnVtZXJhYmxlKClcbiAgICBnZXQgaGFuZGVkbmVzcygpOiAnbGVmdCcgfCAncmlnaHQnIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IGlucHV0VHlwZSA9IHRoaXMuaW5wdXRUeXBlO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICBpbnB1dFR5cGUgPT0gSW5wdXRUeXBlLkNvbnRyb2xsZXJSaWdodCB8fFxuICAgICAgICAgICAgaW5wdXRUeXBlID09IElucHV0VHlwZS5SYXlSaWdodCB8fFxuICAgICAgICAgICAgaW5wdXRUeXBlID09IElucHV0VHlwZS5FeWVSaWdodFxuICAgICAgICApXG4gICAgICAgICAgICByZXR1cm4gJ3JpZ2h0JztcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgaW5wdXRUeXBlID09IElucHV0VHlwZS5Db250cm9sbGVyTGVmdCB8fFxuICAgICAgICAgICAgaW5wdXRUeXBlID09IElucHV0VHlwZS5SYXlMZWZ0IHx8XG4gICAgICAgICAgICBpbnB1dFR5cGUgPT0gSW5wdXRUeXBlLkV5ZUxlZnRcbiAgICAgICAgKVxuICAgICAgICAgICAgcmV0dXJuICdsZWZ0JztcblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbi8qKlxuICogTmF0aXZlIGxpZ2h0IGNvbXBvbmVudC5cbiAqXG4gKiBQcm92aWRlcyBhY2Nlc3MgdG8gYSBuYXRpdmUgbGlnaHQgY29tcG9uZW50IGluc3RhbmNlLlxuICovXG5leHBvcnQgY2xhc3MgTGlnaHRDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIC8qKiBAb3ZlcnJpZGUgKi9cbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnbGlnaHQnO1xuXG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldENvbG9yKCk6IEZsb2F0MzJBcnJheTtcbiAgICAvKipcbiAgICAgKiBHZXQgbGlnaHQgY29sb3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IERlc3RpbmF0aW9uIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCAzIGVsZW1lbnRzLlxuICAgICAqIEByZXR1cm5zIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgZ2V0Q29sb3I8VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQpOiBUO1xuICAgIGdldENvbG9yKG91dDogTnVtYmVyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KDMpKTogTnVtYmVyQXJyYXkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X2dldF9jb2xvcih0aGlzLl9pZCkgLyA0OyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgb3V0WzBdID0gd2FzbS5IRUFQRjMyW3B0cl07XG4gICAgICAgIG91dFsxXSA9IHdhc20uSEVBUEYzMltwdHIgKyAxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5IRUFQRjMyW3B0ciArIDJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBsaWdodCBjb2xvci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjIE5ldyBjb2xvciBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgMyBlbGVtZW50cy5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBzZXRDb2xvcihjOiBSZWFkb25seTxOdW1iZXJBcnJheT4pOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfY29sb3IodGhpcy5faWQpIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIHdhc20uSEVBUEYzMltwdHJdID0gY1swXTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDFdID0gY1sxXTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDJdID0gY1syXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBWaWV3IG9uIHRoZSBsaWdodCBjb2xvci5cbiAgICAgKlxuICAgICAqIEBub3RlIFByZWZlciB0byB1c2Uge0BsaW5rIGdldENvbG9yfSBpbiBwZXJmb3JtYW5jZS1jcml0aWNhbCBjb2RlLlxuICAgICAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IGNvbG9yKCk6IEZsb2F0MzJBcnJheSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShcbiAgICAgICAgICAgIHdhc20uSEVBUEYzMi5idWZmZXIsXG4gICAgICAgICAgICB3YXNtLl93bF9saWdodF9jb21wb25lbnRfZ2V0X2NvbG9yKHRoaXMuX2lkKSxcbiAgICAgICAgICAgIDNcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgbGlnaHQgY29sb3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYyBDb2xvciBvZiB0aGUgbGlnaHQgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQG5vdGUgUHJlZmVyIHRvIHVzZSB7QGxpbmsgc2V0Q29sb3J9IGluIHBlcmZvcm1hbmNlLWNyaXRpY2FsIGNvZGUuXG4gICAgICovXG4gICAgc2V0IGNvbG9yKGM6IFJlYWRvbmx5PE51bWJlckFycmF5Pikge1xuICAgICAgICB0aGlzLmNvbG9yLnNldChjKTtcbiAgICB9XG5cbiAgICAvKiogTGlnaHQgdHlwZS4gKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBsaWdodFR5cGUoKTogTGlnaHRUeXBlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfdHlwZSh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGxpZ2h0IHR5cGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbGlnaHRUeXBlIFR5cGUgb2YgdGhlIGxpZ2h0IGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICBzZXQgbGlnaHRUeXBlKHQ6IExpZ2h0VHlwZSkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfc2V0X3R5cGUodGhpcy5faWQsIHQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExpZ2h0IGludGVuc2l0eS5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBpbnRlbnNpdHkoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfaW50ZW5zaXR5KHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgbGlnaHQgaW50ZW5zaXR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGludGVuc2l0eSBJbnRlbnNpdHkgb2YgdGhlIGxpZ2h0IGNvbXBvbmVudC5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBzZXQgaW50ZW5zaXR5KGludGVuc2l0eTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9zZXRfaW50ZW5zaXR5KHRoaXMuX2lkLCBpbnRlbnNpdHkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE91dGVyIGFuZ2xlIGZvciBzcG90IGxpZ2h0cywgaW4gZGVncmVlcy5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBvdXRlckFuZ2xlKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfZ2V0X291dGVyQW5nbGUodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBvdXRlciBhbmdsZSBmb3Igc3BvdCBsaWdodHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYW5nbGUgT3V0ZXIgYW5nbGUsIGluIGRlZ3JlZXMuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgc2V0IG91dGVyQW5nbGUoYW5nbGU6IG51bWJlcikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfc2V0X291dGVyQW5nbGUodGhpcy5faWQsIGFuZ2xlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbm5lciBhbmdsZSBmb3Igc3BvdCBsaWdodHMsIGluIGRlZ3JlZXMuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgaW5uZXJBbmdsZSgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X2dldF9pbm5lckFuZ2xlKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgaW5uZXIgYW5nbGUgZm9yIHNwb3QgbGlnaHRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFuZ2xlIElubmVyIGFuZ2xlLCBpbiBkZWdyZWVzLlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIHNldCBpbm5lckFuZ2xlKGFuZ2xlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X3NldF9pbm5lckFuZ2xlKHRoaXMuX2lkLCBhbmdsZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgbGlnaHQgY2FzdHMgc2hhZG93cy5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBzaGFkb3dzKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISF0aGlzLmVuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfZ2V0X3NoYWRvd3ModGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRoZSBsaWdodCBjYXN0cyBzaGFkb3dzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGIgV2hldGhlciB0aGUgbGlnaHQgY2FzdHMgc2hhZG93cy5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBzZXQgc2hhZG93cyhiOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9zZXRfc2hhZG93cyh0aGlzLl9pZCwgYik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmFuZ2UgZm9yIHNoYWRvd3MuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgc2hhZG93UmFuZ2UoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfc2hhZG93UmFuZ2UodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCByYW5nZSBmb3Igc2hhZG93cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByYW5nZSBSYW5nZSBmb3Igc2hhZG93cy5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBzZXQgc2hhZG93UmFuZ2UocmFuZ2U6IG51bWJlcikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfc2V0X3NoYWRvd1JhbmdlKHRoaXMuX2lkLCByYW5nZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQmlhcyB2YWx1ZSBmb3Igc2hhZG93cy5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBzaGFkb3dCaWFzKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfZ2V0X3NoYWRvd0JpYXModGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBiaWFzIHZhbHVlIGZvciBzaGFkb3dzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGJpYXMgQmlhcyBmb3Igc2hhZG93cy5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBzZXQgc2hhZG93QmlhcyhiaWFzOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X3NldF9zaGFkb3dCaWFzKHRoaXMuX2lkLCBiaWFzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBOb3JtYWwgYmlhcyB2YWx1ZSBmb3Igc2hhZG93cy5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBzaGFkb3dOb3JtYWxCaWFzKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfZ2V0X3NoYWRvd05vcm1hbEJpYXModGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBub3JtYWwgYmlhcyB2YWx1ZSBmb3Igc2hhZG93cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiaWFzIE5vcm1hbCBiaWFzIGZvciBzaGFkb3dzLlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIHNldCBzaGFkb3dOb3JtYWxCaWFzKGJpYXM6IG51bWJlcikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfc2V0X3NoYWRvd05vcm1hbEJpYXModGhpcy5faWQsIGJpYXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRleGVsIHNpemUgZm9yIHNoYWRvd3MuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgc2hhZG93VGV4ZWxTaXplKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfZ2V0X3NoYWRvd1RleGVsU2l6ZSh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRleGVsIHNpemUgZm9yIHNoYWRvd3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2l6ZSBUZXhlbCBzaXplIGZvciBzaGFkb3dzLlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIHNldCBzaGFkb3dUZXhlbFNpemUoc2l6ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9zZXRfc2hhZG93VGV4ZWxTaXplKHRoaXMuX2lkLCBzaXplKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYXNjYWRlIGNvdW50IGZvciB7QGxpbmsgTGlnaHRUeXBlLlN1bn0gc2hhZG93cy5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBjYXNjYWRlQ291bnQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfY2FzY2FkZUNvdW50KHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgY2FzY2FkZSBjb3VudCBmb3Ige0BsaW5rIExpZ2h0VHlwZS5TdW59IHNoYWRvd3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY291bnQgQ2FzY2FkZSBjb3VudC5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBzZXQgY2FzY2FkZUNvdW50KGNvdW50OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X3NldF9jYXNjYWRlQ291bnQodGhpcy5faWQsIGNvdW50KTtcbiAgICB9XG59XG5cbi8qKlxuICogTmF0aXZlIGFuaW1hdGlvbiBjb21wb25lbnQuXG4gKlxuICogUHJvdmlkZXMgYWNjZXNzIHRvIGEgbmF0aXZlIGFuaW1hdGlvbiBjb21wb25lbnQgaW5zdGFuY2UuXG4gKi9cbmV4cG9ydCBjbGFzcyBBbmltYXRpb25Db21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIC8qKiBAb3ZlcnJpZGUgKi9cbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnYW5pbWF0aW9uJztcblxuICAgIC8qKlxuICAgICAqIEVtaXR0ZXIgZm9yIGFuaW1hdGlvbiBldmVudHMgdHJpZ2dlcmVkIG9uIHRoaXMgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogVGhlIGZpcnN0IGFyZ3VtZW50IGlzIHRoZSBuYW1lIG9mIHRoZSBldmVudC5cbiAgICAgKi9cbiAgICByZWFkb25seSBvbkV2ZW50ID0gbmV3IEVtaXR0ZXI8W3N0cmluZ10+KCk7XG5cbiAgICAvKipcbiAgICAgKiBTZXQgYW5pbWF0aW9uIHRvIHBsYXkuXG4gICAgICpcbiAgICAgKiBNYWtlIHN1cmUgdG8ge0BsaW5rIEFuaW1hdGlvbiNyZXRhcmdldH0gdGhlIGFuaW1hdGlvbiB0byBhZmZlY3QgdGhlXG4gICAgICogcmlnaHQgb2JqZWN0cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhbmltIEFuaW1hdGlvbiB0byBwbGF5LlxuICAgICAqL1xuICAgIHNldCBhbmltYXRpb24oYW5pbTogQW5pbWF0aW9uIHwgbnVsbCB8IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLnNjZW5lLmFzc2VydE9yaWdpbihhbmltKTtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9zZXRfYW5pbWF0aW9uKFxuICAgICAgICAgICAgdGhpcy5faWQsXG4gICAgICAgICAgICBhbmltID8gYW5pbS5faWQgOiAwXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqIEFuaW1hdGlvbiBzZXQgZm9yIHRoaXMgY29tcG9uZW50ICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgYW5pbWF0aW9uKCk6IEFuaW1hdGlvbiB8IG51bGwge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZW5naW5lLndhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfZ2V0X2FuaW1hdGlvbih0aGlzLl9pZCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zY2VuZS5hbmltYXRpb25zLndyYXAoaW5kZXgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBwbGF5IGNvdW50LiBTZXQgdG8gYDBgIHRvIGxvb3AgaW5kZWZpbml0ZWx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHBsYXlDb3VudCBOdW1iZXIgb2YgdGltZXMgdG8gcmVwZWF0IHRoZSBhbmltYXRpb24uXG4gICAgICovXG4gICAgc2V0IHBsYXlDb3VudChwbGF5Q291bnQ6IG51bWJlcikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9hbmltYXRpb25fY29tcG9uZW50X3NldF9wbGF5Q291bnQodGhpcy5faWQsIHBsYXlDb3VudCk7XG4gICAgfVxuXG4gICAgLyoqIE51bWJlciBvZiB0aW1lcyB0aGUgYW5pbWF0aW9uIGlzIHBsYXllZC4gKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBwbGF5Q291bnQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfZ2V0X3BsYXlDb3VudCh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHNwZWVkLiBTZXQgdG8gbmVnYXRpdmUgdmFsdWVzIHRvIHJ1biB0aGUgYW5pbWF0aW9uIGJhY2t3YXJkcy5cbiAgICAgKlxuICAgICAqIFNldHRpbmcgc3BlZWQgaGFzIGFuIGltbWVkaWF0ZSBlZmZlY3QgZm9yIHRoZSBjdXJyZW50IGZyYW1lJ3MgdXBkYXRlXG4gICAgICogYW5kIHdpbGwgY29udGludWUgd2l0aCB0aGUgc3BlZWQgZnJvbSB0aGUgY3VycmVudCBwb2ludCBpbiB0aGUgYW5pbWF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNwZWVkIE5ldyBzcGVlZCBhdCB3aGljaCB0byBwbGF5IHRoZSBhbmltYXRpb24uXG4gICAgICogQHNpbmNlIDAuOC4xMFxuICAgICAqL1xuICAgIHNldCBzcGVlZChzcGVlZDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfc2V0X3NwZWVkKHRoaXMuX2lkLCBzcGVlZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3BlZWQgZmFjdG9yIGF0IHdoaWNoIHRoZSBhbmltYXRpb24gaXMgcGxheWVkLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC4xMFxuICAgICAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IHNwZWVkKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9hbmltYXRpb25fY29tcG9uZW50X2dldF9zcGVlZCh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqIEN1cnJlbnQgcGxheWluZyBzdGF0ZSBvZiB0aGUgYW5pbWF0aW9uICovXG4gICAgQGVudW1lcmFibGUoKVxuICAgIGdldCBzdGF0ZSgpOiBBbmltYXRpb25TdGF0ZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9hbmltYXRpb25fY29tcG9uZW50X3N0YXRlKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIb3cgdG8gaGFuZGxlIHJvb3QgbW90aW9uIG9uIHRoaXMgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMi4yXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBAZW51bWVyYWJsZSgpXG4gICAgZ2V0IHJvb3RNb3Rpb25Nb2RlKCk6IFJvb3RNb3Rpb25Nb2RlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfZ2V0X3Jvb3RNb3Rpb25Nb2RlKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgaG93IHRvIGhhbmRsZSByb290IG1vdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtb2RlIE1vZGUgdG8gaGFuZGxlIHJvb3QgbW90aW9uLCBzZWUge0BsaW5rIFJvb3RNb3Rpb25Nb2RlfS5cbiAgICAgKiBAc2luY2UgMS4yLjJcbiAgICAgKi9cbiAgICBzZXQgcm9vdE1vdGlvbk1vZGUobW9kZTogUm9vdE1vdGlvbk1vZGUpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9zZXRfcm9vdE1vdGlvbk1vZGUodGhpcy5faWQsIG1vZGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEN1cnJlbnQgaXRlcmF0aW9uIG9mIHRoZSBhbmltYXRpb24uXG4gICAgICpcbiAgICAgKiBJZiB7QGxpbmsgcGxheUNvdW50fSBpcyBub3QgdW5saW1pdGVkLCB0aGUgdmFsdWUgaXMgaW4gdGhlIHJhbmdlIGZyb21cbiAgICAgKiBgMGAgdG8gYHBsYXlDb3VudGAuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4yLjNcbiAgICAgKi9cbiAgICBnZXQgaXRlcmF0aW9uKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9hbmltYXRpb25fY29tcG9uZW50X2dldF9pdGVyYXRpb24odGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEN1cnJlbnQgcGxheWluZyBwb3NpdGlvbiBvZiB0aGUgYW5pbWF0aW9uIHdpdGhpbiB0aGUgY3VycmVudCBpdGVyYXRpb24sXG4gICAgICogaW4gc2Vjb25kcy5cbiAgICAgKlxuICAgICAqIFRoZSB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgZnJvbSBgMC4wYCB0byB7QGxpbmsgQW5pbWF0aW9uQ29tcG9uZW50I2R1cmF0aW9ufSxcbiAgICAgKiBpZiBwbGF5aW5nIGluIHJldmVyc2UsIHRoaXMgcmFuZ2UgaXMgcmV2ZXJzZWQgYXMgd2VsbC5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjIuM1xuICAgICAqL1xuICAgIGdldCBwb3NpdGlvbigpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9nZXRfcG9zaXRpb24odGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEN1cnJlbnQgZHVyYXRpb24gdG8gbG9vcCBvbmUgaXRlcmF0aW9uIGluIHNlY29uZHMsIG9mZmVycyBhIG1vcmUgYWNjdXJhdGUgZHVyYXRpb25cbiAgICAgKiB0aGFuIHtAbGluayBBbmltYXRpb24jZHVyYXRpb259IHdoZW4gYmxlbmRpbmcgbXVsdGlwbGUgYW5pbWF0aW9ucy5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjIuM1xuICAgICAqL1xuICAgIGdldCBkdXJhdGlvbigpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9nZXRfZHVyYXRpb24odGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBsYXkgYW5pbWF0aW9uLlxuICAgICAqXG4gICAgICogSWYgdGhlIGFuaW1hdGlvbiBpcyBjdXJyZW50bHkgcGF1c2VkLCByZXN1bWVzIGZyb20gdGhhdCBwb3NpdGlvbi4gSWYgdGhlXG4gICAgICogYW5pbWF0aW9uIGlzIGFscmVhZHkgcGxheWluZywgZG9lcyBub3RoaW5nLlxuICAgICAqXG4gICAgICogVG8gcmVzdGFydCB0aGUgYW5pbWF0aW9uLCB7QGxpbmsgQW5pbWF0aW9uQ29tcG9uZW50I3N0b3B9IGl0IGZpcnN0LlxuICAgICAqL1xuICAgIHBsYXkoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfcGxheSh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqIFN0b3AgYW5pbWF0aW9uLiAqL1xuICAgIHN0b3AoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfc3RvcCh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqIFBhdXNlIGFuaW1hdGlvbi4gKi9cbiAgICBwYXVzZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9wYXVzZSh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2YWx1ZSBvZiBhIGZsb2F0IHBhcmFtZXRlciBpbiB0aGUgYXR0YWNoZWQgZ3JhcGguXG4gICAgICogVGhyb3dzIGlmIHRoZSBwYXJhbWV0ZXIgaXMgbWlzc2luZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIHBhcmFtZXRlci5cbiAgICAgKiBAc2luY2UgMS4yLjBcbiAgICAgKi9cbiAgICBnZXRGbG9hdFBhcmFtZXRlcihuYW1lOiBzdHJpbmcpOiBudW1iZXIgfCBudWxsIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGluZGV4ID0gd2FzbS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9nZXRHcmFwaFBhcmFtSW5kZXgoXG4gICAgICAgICAgICB0aGlzLl9pZCxcbiAgICAgICAgICAgIHdhc20udGVtcFVURjgobmFtZSlcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYE1pc3NpbmcgcGFyYW1ldGVyICcke25hbWV9J2ApO1xuICAgICAgICB9XG4gICAgICAgIHdhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfZ2V0R3JhcGhQYXJhbVZhbHVlKHRoaXMuX2lkLCBpbmRleCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIHJldHVybiB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB2YWx1ZSBvZiBhIGZsb2F0IHBhcmFtZXRlciBpbiB0aGUgYXR0YWNoZWQgZ3JhcGhcbiAgICAgKiBUaHJvd3MgaWYgdGhlIHBhcmFtZXRlciBpcyBtaXNzaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWUgTmFtZSBvZiB0aGUgcGFyYW1ldGVyLlxuICAgICAqIEBwYXJhbSB2YWx1ZSBGbG9hdCB2YWx1ZSB0byBzZXQuXG4gICAgICogQHJldHVybnMgMSBpZiB0aGUgcGFyYW1ldGVyIHdhcyBzdWNjZXNzZnVsbHkgc2V0LCAwIG9uIGZhaWwuXG4gICAgICogQHNpbmNlIDEuMi4wXG4gICAgICovXG4gICAgc2V0RmxvYXRQYXJhbWV0ZXIobmFtZTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBpbmRleCA9IHdhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfZ2V0R3JhcGhQYXJhbUluZGV4KFxuICAgICAgICAgICAgdGhpcy5faWQsXG4gICAgICAgICAgICB3YXNtLnRlbXBVVEY4KG5hbWUpXG4gICAgICAgICk7XG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBNaXNzaW5nIHBhcmFtZXRlciAnJHtuYW1lfSdgKTtcbiAgICAgICAgfVxuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMF0gPSB2YWx1ZTtcbiAgICAgICAgd2FzbS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9zZXRHcmFwaFBhcmFtVmFsdWUodGhpcy5faWQsIGluZGV4LCB3YXNtLl90ZW1wTWVtKTtcbiAgICB9XG5cbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0Um9vdE1vdGlvblRyYW5zbGF0aW9uKCk6IEZsb2F0MzJBcnJheTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHJvb3QgbW90aW9uIHRyYW5zbGF0aW9uIGluICoqbG9jYWwgc3BhY2UqKiBjYWxjdWxhdGVkIGZvciB0aGUgY3VycmVudCBmcmFtZS5cbiAgICAgKlxuICAgICAqIEBub3RlIElmIHtAbGluayBBbmltYXRpb25Db21wb25lbnQucm9vdE1vdGlvbk1vZGV9IGlzIG5vdFxuICAgICAqIHNldCB0byB7QGxpbmsgUm9vdE1vdGlvbk1vZGUuU2NyaXB0fSB0aGlzIHdpbGwgYWx3YXlzIHJldHVybiBhbiBpZGVudGl0eSB0cmFuc2xhdGlvbi5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjIuMlxuICAgICAqL1xuICAgIGdldFJvb3RNb3Rpb25UcmFuc2xhdGlvbjxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCk6IFQ7XG4gICAgZ2V0Um9vdE1vdGlvblRyYW5zbGF0aW9uKG91dDogTnVtYmVyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KDMpKTogTnVtYmVyQXJyYXkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9nZXRfcm9vdE1vdGlvbl90cmFuc2xhdGlvbih0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuXG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldFJvb3RNb3Rpb25Sb3RhdGlvbigpOiBGbG9hdDMyQXJyYXk7XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSByb290IG1vdGlvbiByb3RhdGlvbiBpbiAqKmxvY2FsIHNwYWNlKiogY2FsY3VsYXRlZCBmb3IgdGhlIGN1cnJlbnQgZnJhbWUuXG4gICAgICpcbiAgICAgKiBAbm90ZSBJZiB7QGxpbmsgQW5pbWF0aW9uQ29tcG9uZW50LnJvb3RNb3Rpb25Nb2RlfSBpcyBub3RcbiAgICAgKiBzZXQgdG8ge0BsaW5rIFJvb3RNb3Rpb25Nb2RlLlNjcmlwdH0gdGhpcyB3aWxsIGFsd2F5cyByZXR1cm4gYW4gaWRlbnRpdHkgcm90YXRpb24uXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4yLjJcbiAgICAgKi9cbiAgICBnZXRSb290TW90aW9uUm90YXRpb248VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQpOiBUO1xuICAgIGdldFJvb3RNb3Rpb25Sb3RhdGlvbihvdXQ6IE51bWJlckFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSgzKSk6IE51bWJlckFycmF5IHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfZ2V0X3Jvb3RNb3Rpb25fcm90YXRpb24odGhpcy5faWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBvdXRbMF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBOYXRpdmUgbWVzaCBjb21wb25lbnQuXG4gKlxuICogUHJvdmlkZXMgYWNjZXNzIHRvIGEgbmF0aXZlIG1lc2ggY29tcG9uZW50IGluc3RhbmNlLlxuICovXG5leHBvcnQgY2xhc3MgTWVzaENvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgLyoqIEBvdmVycmlkZSAqL1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdtZXNoJztcblxuICAgIC8qKlxuICAgICAqIFNldCBtYXRlcmlhbCB0byByZW5kZXIgdGhlIG1lc2ggd2l0aC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtYXRlcmlhbCBNYXRlcmlhbCB0byByZW5kZXIgdGhlIG1lc2ggd2l0aC5cbiAgICAgKi9cbiAgICBzZXQgbWF0ZXJpYWwobWF0ZXJpYWw6IE1hdGVyaWFsIHwgbnVsbCB8IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9tZXNoX2NvbXBvbmVudF9zZXRfbWF0ZXJpYWwoXG4gICAgICAgICAgICB0aGlzLl9pZCxcbiAgICAgICAgICAgIG1hdGVyaWFsID8gbWF0ZXJpYWwuX2lkIDogMFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKiBNYXRlcmlhbCB1c2VkIHRvIHJlbmRlciB0aGUgbWVzaC4gKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBtYXRlcmlhbCgpOiBNYXRlcmlhbCB8IG51bGwge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZW5naW5lLndhc20uX3dsX21lc2hfY29tcG9uZW50X2dldF9tYXRlcmlhbCh0aGlzLl9pZCk7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS5tYXRlcmlhbHMud3JhcChpbmRleCk7XG4gICAgfVxuXG4gICAgLyoqIE1lc2ggcmVuZGVyZWQgYnkgdGhpcyBjb21wb25lbnQuICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgbWVzaCgpOiBNZXNoIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5lbmdpbmUud2FzbS5fd2xfbWVzaF9jb21wb25lbnRfZ2V0X21lc2godGhpcy5faWQpO1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUubWVzaGVzLndyYXAoaW5kZXgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBtZXNoIHRvIHJlbmRlcmVkIHdpdGggdGhpcyBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWVzaCBNZXNoIHJlbmRlcmVkIGJ5IHRoaXMgY29tcG9uZW50LlxuICAgICAqL1xuICAgIHNldCBtZXNoKG1lc2g6IE1lc2ggfCBudWxsIHwgdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX21lc2hfY29tcG9uZW50X3NldF9tZXNoKHRoaXMuX2lkLCBtZXNoPy5faWQgPz8gMCk7XG4gICAgfVxuXG4gICAgLyoqIFNraW4gZm9yIHRoaXMgbWVzaCBjb21wb25lbnQuICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgc2tpbigpOiBTa2luIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5lbmdpbmUud2FzbS5fd2xfbWVzaF9jb21wb25lbnRfZ2V0X3NraW4odGhpcy5faWQpO1xuICAgICAgICByZXR1cm4gdGhpcy5fc2NlbmUuc2tpbnMud3JhcChpbmRleCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHNraW4gdG8gdHJhbnNmb3JtIHRoaXMgbWVzaCBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2tpbiBTa2luIHRvIHVzZSBmb3IgcmVuZGVyaW5nIHNraW5uZWQgbWVzaGVzLlxuICAgICAqL1xuICAgIHNldCBza2luKHNraW46IFNraW4gfCBudWxsIHwgdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuc2NlbmUuYXNzZXJ0T3JpZ2luKHNraW4pO1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9tZXNoX2NvbXBvbmVudF9zZXRfc2tpbih0aGlzLl9pZCwgc2tpbiA/IHNraW4uX2lkIDogMCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW9ycGggdGFyZ2V0cyBmb3IgdGhpcyBtZXNoIGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjIuMFxuICAgICAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IG1vcnBoVGFyZ2V0cygpOiBNb3JwaFRhcmdldHMgfCBudWxsIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmVuZ2luZS53YXNtLl93bF9tZXNoX2NvbXBvbmVudF9nZXRfbW9ycGhfdGFyZ2V0cyh0aGlzLl9pZCk7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS5tb3JwaFRhcmdldHMud3JhcChpbmRleCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IG1vcnBoIHRhcmdldHMgdG8gdHJhbnNmb3JtIHRoaXMgbWVzaCBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbW9ycGhUYXJnZXRzIE1vcnBoIHRhcmdldHMgdG8gdXNlIGZvciByZW5kZXJpbmcuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4yLjBcbiAgICAgKi9cbiAgICBzZXQgbW9ycGhUYXJnZXRzKG1vcnBoVGFyZ2V0czogTW9ycGhUYXJnZXRzIHwgbnVsbCB8IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9tZXNoX2NvbXBvbmVudF9zZXRfbW9ycGhfdGFyZ2V0cyhcbiAgICAgICAgICAgIHRoaXMuX2lkLFxuICAgICAgICAgICAgbW9ycGhUYXJnZXRzPy5faWQgPz8gMFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8ge0BsaW5rIGdldE1vcnBoVGFyZ2V0V2VpZ2h0c30uXG4gICAgICpcbiAgICAgKiBAbm90ZSBQcmVmZXIgdG8gdXNlIHtAbGluayBnZXRNb3JwaFRhcmdldFdlaWdodHN9IGZvciBwZXJmb3JtYW5jZS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjIuMFxuICAgICAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IG1vcnBoVGFyZ2V0V2VpZ2h0cygpOiBGbG9hdDMyQXJyYXkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRNb3JwaFRhcmdldFdlaWdodHMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIG1vcnBoIHRhcmdldCB3ZWlnaHRzIHRvIHRyYW5zZm9ybSB0aGlzIG1lc2ggY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHdlaWdodHMgTmV3IHdlaWdodHMuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4yLjBcbiAgICAgKi9cbiAgICBzZXQgbW9ycGhUYXJnZXRXZWlnaHRzKHdlaWdodHM6IFJlYWRvbmx5PE51bWJlckFycmF5Pikge1xuICAgICAgICB0aGlzLnNldE1vcnBoVGFyZ2V0V2VpZ2h0cyh3ZWlnaHRzKTtcbiAgICB9XG5cbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0TW9ycGhUYXJnZXRXZWlnaHRzKCk6IEZsb2F0MzJBcnJheTtcbiAgICAvKipcbiAgICAgKiBHZXQgbW9ycGggdGFyZ2V0IHdlaWdodHMgZm9yIHRoaXMgbWVzaCBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IERlc3RpbmF0aW9uIGFycmF5LCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IGFzIG1hbnkgZWxlbWVudHNcbiAgICAgKiAgICAgYXMge0BsaW5rIE1vcnBoVGFyZ2V0cy5jb3VudH0uXG4gICAgICogQHJldHVybnMgVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjIuMFxuICAgICAqL1xuICAgIGdldE1vcnBoVGFyZ2V0V2VpZ2h0czxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCk6IFQ7XG4gICAgZ2V0TW9ycGhUYXJnZXRXZWlnaHRzKG91dD86IE51bWJlckFycmF5KTogTnVtYmVyQXJyYXkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgY291bnQgPSB3YXNtLl93bF9tZXNoX2NvbXBvbmVudF9nZXRfbW9ycGhfdGFyZ2V0X3dlaWdodHMoXG4gICAgICAgICAgICB0aGlzLl9pZCxcbiAgICAgICAgICAgIHdhc20uX3RlbXBNZW1cbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCFvdXQpIHtcbiAgICAgICAgICAgIG91dCA9IG5ldyBGbG9hdDMyQXJyYXkoY291bnQpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7ICsraSkge1xuICAgICAgICAgICAgb3V0W2ldID0gd2FzbS5fdGVtcE1lbUZsb2F0W2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB3ZWlnaHQgb2YgYSBzaW5nbGUgbW9ycGggdGFyZ2V0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHRhcmdldCBJbmRleCBvZiB0aGUgbW9ycGggdGFyZ2V0LlxuICAgICAqIEByZXR1cm5zIFRoZSB3ZWlnaHQuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4yLjBcbiAgICAgKi9cbiAgICBnZXRNb3JwaFRhcmdldFdlaWdodCh0YXJnZXQ6IG51bWJlcikge1xuICAgICAgICBjb25zdCBjb3VudCA9IHRoaXMubW9ycGhUYXJnZXRzPy5jb3VudCA/PyAwO1xuICAgICAgICBpZiAodGFyZ2V0ID49IGNvdW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEluZGV4ICR7dGFyZ2V0fSBpcyBvdXQgb2YgYm91bmRzIGZvciAke2NvdW50fSB0YXJnZXRzYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX21lc2hfY29tcG9uZW50X2dldF9tb3JwaF90YXJnZXRfd2VpZ2h0KFxuICAgICAgICAgICAgdGhpcy5faWQsXG4gICAgICAgICAgICB0YXJnZXRcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgbW9ycGggdGFyZ2V0IHdlaWdodHMgZm9yIHRoaXMgbWVzaCBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gd2VpZ2h0cyBBcnJheSBvZiBuZXcgd2VpZ2h0cywgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCBhcyBtYW55XG4gICAgICogICAgIGVsZW1lbnRzIGFzIHtAbGluayBNb3JwaFRhcmdldHMuY291bnR9LlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMi4wXG4gICAgICovXG4gICAgc2V0TW9ycGhUYXJnZXRXZWlnaHRzKHdlaWdodHM6IFJlYWRvbmx5PE51bWJlckFycmF5Pikge1xuICAgICAgICBjb25zdCBjb3VudCA9IHRoaXMubW9ycGhUYXJnZXRzPy5jb3VudCA/PyAwO1xuICAgICAgICBpZiAod2VpZ2h0cy5sZW5ndGggIT09IGNvdW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkICR7Y291bnR9IHdlaWdodHMgYnV0IGdvdCAke3dlaWdodHMubGVuZ3RofWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXQuc2V0KHdlaWdodHMpO1xuICAgICAgICB3YXNtLl93bF9tZXNoX2NvbXBvbmVudF9zZXRfbW9ycGhfdGFyZ2V0X3dlaWdodHMoXG4gICAgICAgICAgICB0aGlzLl9pZCxcbiAgICAgICAgICAgIHdhc20uX3RlbXBNZW0sXG4gICAgICAgICAgICB3ZWlnaHRzLmxlbmd0aFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgd2VpZ2h0IG9mIGEgc2luZ2xlIG1vcnBoIHRhcmdldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0YXJnZXQgSW5kZXggb2YgdGhlIG1vcnBoIHRhcmdldC5cbiAgICAgKiBAcGFyYW0gd2VpZ2h0IFRoZSBuZXcgd2VpZ2h0LlxuICAgICAqXG4gICAgICogIyMgVXNhZ2VcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgbWVzaCA9IG9iamVjdC5nZXRDb21wb25lbnQoJ21lc2gnKTtcbiAgICAgKiBjb25zdCBtb3V0aFRhcmdldCA9IG1lc2gubW9ycGhUYXJnZXRzLmdldFRhcmdldEluZGV4KCdtb3V0aCcpO1xuICAgICAqIG1lc2guc2V0TW9ycGhUYXJnZXRXZWlnaHQobW91dGhUYXJnZXQsIDAuNSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4yLjBcbiAgICAgKi9cbiAgICBzZXRNb3JwaFRhcmdldFdlaWdodCh0YXJnZXQ6IG51bWJlciwgd2VpZ2h0OiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgY291bnQgPSB0aGlzLm1vcnBoVGFyZ2V0cz8uY291bnQgPz8gMDtcbiAgICAgICAgaWYgKHRhcmdldCA+PSBjb3VudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbmRleCAke3RhcmdldH0gaXMgb3V0IG9mIGJvdW5kcyBmb3IgJHtjb3VudH0gdGFyZ2V0c2ApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX21lc2hfY29tcG9uZW50X3NldF9tb3JwaF90YXJnZXRfd2VpZ2h0KFxuICAgICAgICAgICAgdGhpcy5faWQsXG4gICAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgICB3ZWlnaHRcbiAgICAgICAgKTtcbiAgICB9XG59XG5cbi8qKlxuICogRW51bSBmb3IgUGh5c2ljcyBheGVzIGxvY2tpbmdcbiAqXG4gKiBTZWUge0BsaW5rIFBoeXNYQ29tcG9uZW50LmFuZ3VsYXJMb2NrQXhpc30gYW5kIHtAbGluayBQaHlzWENvbXBvbmVudC5saW5lYXJMb2NrQXhpc30uXG4gKi9cbmV4cG9ydCBlbnVtIExvY2tBeGlzIHtcbiAgICAvKipcbiAgICAgKiBObyBheGlzIHNlbGVjdGVkLlxuICAgICAqL1xuICAgIE5vbmUgPSAwLFxuXG4gICAgLyoqXG4gICAgICogKipYIGF4aXMqKjpcbiAgICAgKi9cbiAgICBYID0gMSA8PCAwLFxuXG4gICAgLyoqXG4gICAgICogKipZIGF4aXMqKjpcbiAgICAgKi9cbiAgICBZID0gMSA8PCAxLFxuXG4gICAgLyoqXG4gICAgICogKipaIGF4aXMqKjpcbiAgICAgKi9cbiAgICBaID0gMSA8PCAyLFxufVxuXG4vKipcbiAqIE5hdGl2ZSBwaHlzeCByaWdpZCBib2R5IGNvbXBvbmVudC5cbiAqXG4gKiBQcm92aWRlcyBhY2Nlc3MgdG8gYSBuYXRpdmUgbWVzaCBjb21wb25lbnQgaW5zdGFuY2UuXG4gKiBPbmx5IGF2YWlsYWJsZSB3aGVuIHVzaW5nIHBoeXN4IGVuYWJsZWQgcnVudGltZSwgc2VlIFwiUHJvamVjdCBTZXR0aW5ncyA+IFJ1bnRpbWVcIi5cbiAqL1xuZXhwb3J0IGNsYXNzIFBoeXNYQ29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAvKiogQG92ZXJyaWRlICovXG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ3BoeXN4JztcblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRUcmFuc2xhdGlvbk9mZnNldCgpOiBGbG9hdDMyQXJyYXk7XG4gICAgLyoqXG4gICAgICogTG9jYWwgdHJhbnNsYXRpb24gb2Zmc2V0LlxuICAgICAqXG4gICAgICogQWxsb3dzIHRvIG1vdmUgYSBwaHlzeCBjb21wb25lbnQgd2l0aG91dCBjcmVhdGluZyBhIG5ldyBvYmplY3QgaW4gdGhlIGhpZXJhcmNoeS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgRGVzdGluYXRpb24gYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDMgZWxlbWVudHMuXG4gICAgICogQHJldHVybnMgVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjEuMVxuICAgICAqL1xuICAgIGdldFRyYW5zbGF0aW9uT2Zmc2V0PFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBUKTogVDtcbiAgICBnZXRUcmFuc2xhdGlvbk9mZnNldChvdXQ6IE51bWJlckFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSgzKSk6IE51bWJlckFycmF5IHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfb2Zmc2V0VHJhbnNsYXRpb24odGhpcy5faWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBvdXRbMF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRSb3RhdGlvbk9mZnNldCgpOiBGbG9hdDMyQXJyYXk7XG4gICAgLyoqXG4gICAgICogTG9jYWwgcm90YXRpb24gb2Zmc2V0IHJlcHJlc2VudGVkIGFzIGEgcXVhdGVybmlvbi5cbiAgICAgKlxuICAgICAqIEFsbG93cyB0byByb3RhdGUgYSBwaHlzeCBjb21wb25lbnQgd2l0aG91dCBjcmVhdGluZyBhIG5ldyBvYmplY3QgaW4gdGhlIGhpZXJhcmNoeS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgRGVzdGluYXRpb24gYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDQgZWxlbWVudHMuXG4gICAgICogQHJldHVybnMgVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjEuMVxuICAgICAqL1xuICAgIGdldFJvdGF0aW9uT2Zmc2V0PFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBUKTogVDtcbiAgICBnZXRSb3RhdGlvbk9mZnNldChvdXQ6IE51bWJlckFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSg0KSk6IE51bWJlckFycmF5IHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9XG4gICAgICAgICAgICB3YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X29mZnNldFRyYW5zZm9ybSh0aGlzLl9pZCkgPj4gMjsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIG91dFswXSA9IHdhc20uSEVBUEYzMltwdHJdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uSEVBUEYzMltwdHIgKyAyXTtcbiAgICAgICAgb3V0WzNdID0gd2FzbS5IRUFQRjMyW3B0ciArIDNdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRFeHRlbnRzKCk6IEZsb2F0MzJBcnJheTtcbiAgICAvKipcbiAgICAgKiBUaGUgc2hhcGUgZXh0ZW50cyBmb3IgY29sbGlzaW9uIGRldGVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgRGVzdGluYXRpb24gYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDMgZWxlbWVudHMuXG4gICAgICogQHJldHVybnMgVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBnZXRFeHRlbnRzPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBUKTogVDtcbiAgICBnZXRFeHRlbnRzKG91dDogTnVtYmVyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KDMpKTogTnVtYmVyQXJyYXkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9leHRlbnRzKHRoaXMuX2lkKSAvIDQ7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICBvdXRbMF0gPSB3YXNtLkhFQVBGMzJbcHRyXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5IRUFQRjMyW3B0ciArIDFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMl07XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuXG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldExpbmVhclZlbG9jaXR5KCk6IEZsb2F0MzJBcnJheTtcbiAgICAvKipcbiAgICAgKiBMaW5lYXIgdmVsb2NpdHkgb3IgYFswLCAwLCAwXWAgaWYgdGhlIGNvbXBvbmVudCBpcyBub3QgYWN0aXZlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBEZXN0aW5hdGlvbiBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgMyBlbGVtZW50cy5cbiAgICAgKiBAcmV0dXJucyBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqL1xuICAgIGdldExpbmVhclZlbG9jaXR5PFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBUKTogVDtcbiAgICBnZXRMaW5lYXJWZWxvY2l0eShvdXQ6IE51bWJlckFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSgzKSk6IE51bWJlckFycmF5IHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHRlbXBNZW1GbG9hdCA9IHdhc20uX3RlbXBNZW1GbG9hdDtcbiAgICAgICAgd2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9saW5lYXJWZWxvY2l0eShcbiAgICAgICAgICAgIHRoaXMuX2lkLFxuICAgICAgICAgICAgd2FzbS5fdGVtcE1lbVxuICAgICAgICApOyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgb3V0WzBdID0gdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB0ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHRlbXBNZW1GbG9hdFsyXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0QW5ndWxhclZlbG9jaXR5KCk6IEZsb2F0MzJBcnJheTtcbiAgICAvKipcbiAgICAgKiBBbmd1bGFyIHZlbG9jaXR5IG9yIGBbMCwgMCwgMF1gIGlmIHRoZSBjb21wb25lbnQgaXMgbm90IGFjdGl2ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgRGVzdGluYXRpb24gYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDMgZWxlbWVudHMuXG4gICAgICogQHJldHVybnMgVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBnZXRBbmd1bGFyVmVsb2NpdHk8VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQpOiBUO1xuICAgIGdldEFuZ3VsYXJWZWxvY2l0eShvdXQ6IE51bWJlckFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSgzKSk6IE51bWJlckFycmF5IHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHRlbXBNZW1GbG9hdCA9IHdhc20uX3RlbXBNZW1GbG9hdDtcbiAgICAgICAgd2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9hbmd1bGFyVmVsb2NpdHkoXG4gICAgICAgICAgICB0aGlzLl9pZCxcbiAgICAgICAgICAgIHdhc20uX3RlbXBNZW1cbiAgICAgICAgKTsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIG91dFswXSA9IHRlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB0ZW1wTWVtRmxvYXRbMl07XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHdoZXRoZXIgdGhpcyByaWdpZCBib2R5IGlzIHN0YXRpYy5cbiAgICAgKlxuICAgICAqIFNldHRpbmcgdGhpcyBwcm9wZXJ0eSBvbmx5IHRha2VzIGVmZmVjdCBvbmNlIHRoZSBjb21wb25lbnRcbiAgICAgKiBzd2l0Y2hlcyBmcm9tIGluYWN0aXZlIHRvIGFjdGl2ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiIFdoZXRoZXIgdGhlIHJpZ2lkIGJvZHkgc2hvdWxkIGJlIHN0YXRpYy5cbiAgICAgKi9cbiAgICBzZXQgc3RhdGljKGI6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9zdGF0aWModGhpcy5faWQsIGIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhpcyByaWdpZCBib2R5IGlzIHN0YXRpYy5cbiAgICAgKlxuICAgICAqIFRoaXMgcHJvcGVydHkgcmV0dXJucyB3aGV0aGVyIHRoZSByaWdpZCBib2R5IGlzICplZmZlY3RpdmVseSpcbiAgICAgKiBzdGF0aWMuIElmIHN0YXRpYyBwcm9wZXJ0eSB3YXMgc2V0IHdoaWxlIHRoZSByaWdpZCBib2R5IHdhc1xuICAgICAqIGFjdGl2ZSwgaXQgd2lsbCBub3QgdGFrZSBlZmZlY3QgdW50aWwgdGhlIHJpZ2lkIGJvZHkgaXMgc2V0XG4gICAgICogaW5hY3RpdmUgYW5kIGFjdGl2ZSBhZ2Fpbi4gVW50aWwgdGhlIGNvbXBvbmVudCBpcyBzZXQgaW5hY3RpdmUsXG4gICAgICogdGhpcyBnZXR0ZXIgd2lsbCByZXR1cm4gd2hldGhlciB0aGUgcmlnaWQgYm9keSBpcyBhY3R1YWxseVxuICAgICAqIHN0YXRpYy5cbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBzdGF0aWMoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfc3RhdGljKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBQaHlzWENvbXBvbmVudC5nZXRUcmFuc2xhdGlvbk9mZnNldH0uXG4gICAgICpcbiAgICAgKiBHaXZlcyBhIHF1aWNrIHZpZXcgb2YgdGhlIG9mZnNldCBpbiBhIGRlYnVnZ2VyLlxuICAgICAqXG4gICAgICogQG5vdGUgUHJlZmVyIHRvIHVzZSB7QGxpbmsgUGh5c1hDb21wb25lbnQuZ2V0VHJhbnNsYXRpb25PZmZzZXR9IGZvciBwZXJmb3JtYW5jZS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjEuMVxuICAgICAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IHRyYW5zbGF0aW9uT2Zmc2V0KCk6IEZsb2F0MzJBcnJheSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFRyYW5zbGF0aW9uT2Zmc2V0KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBvZmZzZXQgdHJhbnNsYXRpb24uXG4gICAgICpcbiAgICAgKiBUaGUgYXJyYXkgbXVzdCBiZSBhIHZlY3RvciBvZiBhdCBsZWFzdCAqKjMqKiBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoZSBjb21wb25lbnQgbXVzdCBiZSByZS1hY3RpdmF0ZWQgdG8gYXBwbHkgdGhlIGNoYW5nZS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjEuMVxuICAgICAqL1xuICAgIHNldCB0cmFuc2xhdGlvbk9mZnNldChvZmZzZXQ6IEFycmF5TGlrZTxudW1iZXI+KSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X29mZnNldFRyYW5zbGF0aW9uKFxuICAgICAgICAgICAgdGhpcy5faWQsXG4gICAgICAgICAgICBvZmZzZXRbMF0sXG4gICAgICAgICAgICBvZmZzZXRbMV0sXG4gICAgICAgICAgICBvZmZzZXRbMl1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBQaHlzWENvbXBvbmVudC5nZXRSb3RhdGlvbk9mZnNldH0uXG4gICAgICpcbiAgICAgKiBHaXZlcyBhIHF1aWNrIHZpZXcgb2YgdGhlIG9mZnNldCBpbiBhIGRlYnVnZ2VyLlxuICAgICAqXG4gICAgICogQG5vdGUgUHJlZmVyIHRvIHVzZSB7QGxpbmsgUGh5c1hDb21wb25lbnQuZ2V0Um90YXRpb25PZmZzZXR9IGZvciBwZXJmb3JtYW5jZS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjEuMVxuICAgICAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IHJvdGF0aW9uT2Zmc2V0KCk6IEZsb2F0MzJBcnJheSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFJvdGF0aW9uT2Zmc2V0KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBvZmZzZXQgcm90YXRpb24uXG4gICAgICpcbiAgICAgKiBUaGUgYXJyYXkgbXVzdCBiZSBhIHF1YXRlcm5pb24gb2YgYXQgbGVhc3QgKio0KiogZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGUgY29tcG9uZW50IG11c3QgYmUgcmUtYWN0aXZhdGVkIHRvIGFwcGx5IHRoZSBjaGFuZ2UuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4xLjFcbiAgICAgKi9cbiAgICBzZXQgcm90YXRpb25PZmZzZXQob2Zmc2V0OiBBcnJheUxpa2U8bnVtYmVyPikge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9vZmZzZXRSb3RhdGlvbihcbiAgICAgICAgICAgIHRoaXMuX2lkLFxuICAgICAgICAgICAgb2Zmc2V0WzBdLFxuICAgICAgICAgICAgb2Zmc2V0WzFdLFxuICAgICAgICAgICAgb2Zmc2V0WzJdLFxuICAgICAgICAgICAgb2Zmc2V0WzNdXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHdoZXRoZXIgdGhpcyByaWdpZCBib2R5IGlzIGtpbmVtYXRpYy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiIFdoZXRoZXIgdGhlIHJpZ2lkIGJvZHkgc2hvdWxkIGJlIGtpbmVtYXRpYy5cbiAgICAgKi9cbiAgICBzZXQga2luZW1hdGljKGI6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9raW5lbWF0aWModGhpcy5faWQsIGIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhpcyByaWdpZCBib2R5IGlzIGtpbmVtYXRpYy5cbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBraW5lbWF0aWMoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfa2luZW1hdGljKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgd2hldGhlciB0aGlzIHJpZ2lkIGJvZHkncyBncmF2aXR5IGlzIGVuYWJsZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYiBXaGV0aGVyIHRoZSByaWdpZCBib2R5J3MgZ3Jhdml0eSBzaG91bGQgYmUgZW5hYmxlZC5cbiAgICAgKi9cbiAgICBzZXQgZ3Jhdml0eShiOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfZ3Jhdml0eSh0aGlzLl9pZCwgYik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGlzIHJpZ2lkIGJvZHkncyBncmF2aXR5IGZsYWcgaXMgZW5hYmxlZC5cbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBncmF2aXR5KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISF0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2dyYXZpdHkodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRoaXMgcmlnaWQgYm9keSdzIHNpbXVsYXRlIGZsYWcgaXMgZW5hYmxlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiIFdoZXRoZXIgdGhlIHJpZ2lkIGJvZHkncyBzaW11bGF0ZSBmbGFnIHNob3VsZCBiZSBlbmFibGVkLlxuICAgICAqL1xuICAgIHNldCBzaW11bGF0ZShiOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfc2ltdWxhdGUodGhpcy5faWQsIGIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhpcyByaWdpZCBib2R5J3Mgc2ltdWxhdGUgZmxhZyBpcyBlbmFibGVkLlxuICAgICAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IHNpbXVsYXRlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISF0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X3NpbXVsYXRlKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgd2hldGhlciB0byBhbGxvdyBzaW11bGF0aW9uIG9mIHRoaXMgcmlnaWQgYm9keS5cbiAgICAgKlxuICAgICAqIHtAbGluayBhbGxvd1NpbXVsYXRpb259IGFuZCB7QGxpbmsgdHJpZ2dlcn0gY2FuIG5vdCBiZSBlbmFibGVkIGF0IHRoZVxuICAgICAqIHNhbWUgdGltZS4gRW5hYmxpbmcge0BsaW5rIGFsbG93U2ltdWxhdGlvbn0gd2hpbGUge0BsaW5rIHRyaWdnZXJ9IGlzIGVuYWJsZWRcbiAgICAgKiB3aWxsIGRpc2FibGUge0BsaW5rIHRyaWdnZXJ9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGIgV2hldGhlciB0byBhbGxvdyBzaW11bGF0aW9uIG9mIHRoaXMgcmlnaWQgYm9keS5cbiAgICAgKi9cbiAgICBzZXQgYWxsb3dTaW11bGF0aW9uKGI6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9hbGxvd1NpbXVsYXRpb24odGhpcy5faWQsIGIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdG8gYWxsb3cgc2ltdWxhdGlvbiBvZiB0aGlzIHJpZ2lkIGJvZHkuXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgYWxsb3dTaW11bGF0aW9uKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISF0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2FsbG93U2ltdWxhdGlvbih0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHdoZXRoZXIgdGhpcyByaWdpZCBib2R5IG1heSBiZSBxdWVyaWVkIGluIHJheSBjYXN0cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiIFdoZXRoZXIgdGhpcyByaWdpZCBib2R5IG1heSBiZSBxdWVyaWVkIGluIHJheSBjYXN0cy5cbiAgICAgKi9cbiAgICBzZXQgYWxsb3dRdWVyeShiOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfYWxsb3dRdWVyeSh0aGlzLl9pZCwgYik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGlzIHJpZ2lkIGJvZHkgbWF5IGJlIHF1ZXJpZWQgaW4gcmF5IGNhc3RzLlxuICAgICAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IGFsbG93UXVlcnkoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfYWxsb3dRdWVyeSh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHdoZXRoZXIgdGhpcyBwaHlzaWNzIGJvZHkgaXMgYSB0cmlnZ2VyLlxuICAgICAqXG4gICAgICoge0BsaW5rIGFsbG93U2ltdWxhdGlvbn0gYW5kIHtAbGluayB0cmlnZ2VyfSBjYW4gbm90IGJlIGVuYWJsZWQgYXQgdGhlXG4gICAgICogc2FtZSB0aW1lLiBFbmFibGluZyB0cmlnZ2VyIHdoaWxlIHtAbGluayBhbGxvd1NpbXVsYXRpb259IGlzIGVuYWJsZWQsXG4gICAgICogd2lsbCBkaXNhYmxlIHtAbGluayBhbGxvd1NpbXVsYXRpb259LlxuICAgICAqXG4gICAgICogQHBhcmFtIGIgV2hldGhlciB0aGlzIHBoeXNpY3MgYm9keSBpcyBhIHRyaWdnZXIuXG4gICAgICovXG4gICAgc2V0IHRyaWdnZXIoYjogYm9vbGVhbikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X3RyaWdnZXIodGhpcy5faWQsIGIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhpcyBwaHlzaWNzIGJvZHkgaXMgYSB0cmlnZ2VyLlxuICAgICAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IHRyaWdnZXIoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfdHJpZ2dlcih0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBzaGFwZSBmb3IgY29sbGlzaW9uIGRldGVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzIE5ldyBzaGFwZS5cbiAgICAgKiBAc2luY2UgMC44LjVcbiAgICAgKi9cbiAgICBzZXQgc2hhcGUoczogU2hhcGUpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9zaGFwZSh0aGlzLl9pZCwgcyk7XG4gICAgfVxuXG4gICAgLyoqIFRoZSBzaGFwZSBmb3IgY29sbGlzaW9uIGRldGVjdGlvbi4gKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBzaGFwZSgpOiBTaGFwZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X3NoYXBlKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgYWRkaXRpb25hbCBkYXRhIGZvciB0aGUgc2hhcGUuXG4gICAgICpcbiAgICAgKiBSZXRyaWV2ZWQgb25seSBmcm9tIHtAbGluayBQaHlzWENvbXBvbmVudCNzaGFwZURhdGF9LlxuICAgICAqIEBzaW5jZSAwLjguMTBcbiAgICAgKi9cbiAgICBzZXQgc2hhcGVEYXRhKGQpIHtcbiAgICAgICAgaWYgKGQgPT0gbnVsbCB8fCAhaXNNZXNoU2hhcGUodGhpcy5zaGFwZSkpIHJldHVybjtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9zaGFwZV9kYXRhKHRoaXMuX2lkLCBkLmluZGV4KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRpdGlvbmFsIGRhdGEgZm9yIHRoZSBzaGFwZS5cbiAgICAgKlxuICAgICAqIGBudWxsYCBmb3Ige0BsaW5rIFNoYXBlfSB2YWx1ZXM6IGBOb25lYCwgYFNwaGVyZWAsIGBDYXBzdWxlYCwgYEJveGAsIGBQbGFuZWAuXG4gICAgICogYHtpbmRleDogbn1gIGZvciBgVHJpYW5nbGVNZXNoYCBhbmQgYENvbnZleEh1bGxgLlxuICAgICAqXG4gICAgICogVGhpcyBkYXRhIGlzIGN1cnJlbnRseSBvbmx5IGZvciBwYXNzaW5nIG9udG8gb3IgY3JlYXRpbmcgb3RoZXIge0BsaW5rIFBoeXNYQ29tcG9uZW50fS5cbiAgICAgKiBAc2luY2UgMC44LjEwXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgc2hhcGVEYXRhKCk6IHtcbiAgICAgICAgaW5kZXg6IG51bWJlcjtcbiAgICB9IHwgbnVsbCB7XG4gICAgICAgIGlmICghaXNNZXNoU2hhcGUodGhpcy5zaGFwZSkpIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5kZXg6IHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfc2hhcGVfZGF0YSh0aGlzLl9pZCksXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBzaGFwZSBleHRlbnRzIGZvciBjb2xsaXNpb24gZGV0ZWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGUgTmV3IGV4dGVudHMgZm9yIHRoZSBzaGFwZS5cbiAgICAgKiBAc2luY2UgMC44LjVcbiAgICAgKi9cbiAgICBzZXQgZXh0ZW50cyhlOiBSZWFkb25seTxOdW1iZXJBcnJheT4pIHtcbiAgICAgICAgdGhpcy5leHRlbnRzLnNldChlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBQaHlzWENvbXBvbmVudC5nZXRFeHRlbnRzfS5cbiAgICAgKlxuICAgICAqIEBub3RlIFByZWZlciB0byB1c2Uge0BsaW5rIFBoeXNYQ29tcG9uZW50LmdldEV4dGVudHN9IGZvciBwZXJmb3JtYW5jZS5cbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBleHRlbnRzKCk6IEZsb2F0MzJBcnJheSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICAvKiogQHRvZG86IEJyZWFrIGF0IDIuMC4wLiBEbyBub3QgYWxsb3cgbW9kaWZ5aW5nIG1lbW9yeSBpbi1wbGFjZS4gKi9cbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9leHRlbnRzKHRoaXMuX2lkKTtcbiAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkod2FzbS5IRUFQRjMyLmJ1ZmZlciwgcHRyLCAzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgc3RhdGljRnJpY3Rpb24uXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgc3RhdGljRnJpY3Rpb24oKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfc3RhdGljRnJpY3Rpb24odGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBzdGF0aWNGcmljdGlvbi5cbiAgICAgKiBAcGFyYW0gdiBOZXcgc3RhdGljRnJpY3Rpb24uXG4gICAgICovXG4gICAgc2V0IHN0YXRpY0ZyaWN0aW9uKHY6IG51bWJlcikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X3N0YXRpY0ZyaWN0aW9uKHRoaXMuX2lkLCB2KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgZHluYW1pY0ZyaWN0aW9uLlxuICAgICAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IGR5bmFtaWNGcmljdGlvbigpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9keW5hbWljRnJpY3Rpb24odGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBkeW5hbWljRnJpY3Rpb25cbiAgICAgKiBAcGFyYW0gdiBOZXcgZHluYW1pY0RhbXBpbmcuXG4gICAgICovXG4gICAgc2V0IGR5bmFtaWNGcmljdGlvbih2OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9keW5hbWljRnJpY3Rpb24odGhpcy5faWQsIHYpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBib3VuY2luZXNzLlxuICAgICAqIEBzaW5jZSAwLjkuMFxuICAgICAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IGJvdW5jaW5lc3MoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfYm91bmNpbmVzcyh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGJvdW5jaW5lc3MuXG4gICAgICogQHBhcmFtIHYgTmV3IGJvdW5jaW5lc3MuXG4gICAgICogQHNpbmNlIDAuOS4wXG4gICAgICovXG4gICAgc2V0IGJvdW5jaW5lc3ModjogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfYm91bmNpbmVzcyh0aGlzLl9pZCwgdik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGxpbmVhckRhbXBpbmcvXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgbGluZWFyRGFtcGluZygpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9saW5lYXJEYW1waW5nKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgbGluZWFyRGFtcGluZy5cbiAgICAgKiBAcGFyYW0gdiBOZXcgbGluZWFyRGFtcGluZy5cbiAgICAgKi9cbiAgICBzZXQgbGluZWFyRGFtcGluZyh2OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9saW5lYXJEYW1waW5nKHRoaXMuX2lkLCB2KTtcbiAgICB9XG5cbiAgICAvKiogR2V0IGFuZ3VsYXJEYW1waW5nLiAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IGFuZ3VsYXJEYW1waW5nKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2FuZ3VsYXJEYW1waW5nKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgYW5ndWxhckRhbXBpbmcuXG4gICAgICogQHBhcmFtIHYgTmV3IGFuZ3VsYXJEYW1waW5nLlxuICAgICAqL1xuICAgIHNldCBhbmd1bGFyRGFtcGluZyh2OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9hbmd1bGFyRGFtcGluZyh0aGlzLl9pZCwgdik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGxpbmVhciB2ZWxvY2l0eS5cbiAgICAgKlxuICAgICAqIFtQaHlzWCBNYW51YWwgLSBcIlZlbG9jaXR5XCJdKGh0dHBzOi8vZ2FtZXdvcmtzZG9jcy5udmlkaWEuY29tL1BoeXNYLzQuMS9kb2N1bWVudGF0aW9uL3BoeXN4Z3VpZGUvTWFudWFsL1JpZ2lkQm9keUR5bmFtaWNzLmh0bWwjdmVsb2NpdHkpXG4gICAgICpcbiAgICAgKiBIYXMgbm8gZWZmZWN0LCBpZiB0aGUgY29tcG9uZW50IGlzIG5vdCBhY3RpdmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBOZXcgbGluZWFyIHZlbG9jaXR5LlxuICAgICAqL1xuICAgIHNldCBsaW5lYXJWZWxvY2l0eSh2OiBSZWFkb25seTxOdW1iZXJBcnJheT4pIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9saW5lYXJWZWxvY2l0eSh0aGlzLl9pZCwgdlswXSwgdlsxXSwgdlsyXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byB7QGxpbmsgUGh5c1hDb21wb25lbnQuZ2V0TGluZWFyVmVsb2NpdHl9LlxuICAgICAqXG4gICAgICogQG5vdGUgUHJlZmVyIHRvIHVzZSB7QGxpbmsgUGh5c1hDb21wb25lbnQuZ2V0TGluZWFyVmVsb2NpdHl9IGZvciBwZXJmb3JtYW5jZS5cbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBsaW5lYXJWZWxvY2l0eSgpOiBGbG9hdDMyQXJyYXkge1xuICAgICAgICAvKiogQHRvZG86IEJyZWFrIGF0IDIuMC4wLiBEbyBub3QgYWxsb3cgbW9kaWZ5aW5nIG1lbW9yeSBpbi1wbGFjZS4gKi9cbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfbGluZWFyVmVsb2NpdHkodGhpcy5faWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSh3YXNtLkhFQVBGMzIuYnVmZmVyLCB3YXNtLl90ZW1wTWVtLCAzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgYW5ndWxhciB2ZWxvY2l0eVxuICAgICAqXG4gICAgICogW1BoeXNYIE1hbnVhbCAtIFwiVmVsb2NpdHlcIl0oaHR0cHM6Ly9nYW1ld29ya3Nkb2NzLm52aWRpYS5jb20vUGh5c1gvNC4xL2RvY3VtZW50YXRpb24vcGh5c3hndWlkZS9NYW51YWwvUmlnaWRCb2R5RHluYW1pY3MuaHRtbCN2ZWxvY2l0eSlcbiAgICAgKlxuICAgICAqIEhhcyBubyBlZmZlY3QsIGlmIHRoZSBjb21wb25lbnQgaXMgbm90IGFjdGl2ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2IE5ldyBhbmd1bGFyIHZlbG9jaXR5XG4gICAgICovXG4gICAgc2V0IGFuZ3VsYXJWZWxvY2l0eSh2OiBSZWFkb25seTxOdW1iZXJBcnJheT4pIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9hbmd1bGFyVmVsb2NpdHkoXG4gICAgICAgICAgICB0aGlzLl9pZCxcbiAgICAgICAgICAgIHZbMF0sXG4gICAgICAgICAgICB2WzFdLFxuICAgICAgICAgICAgdlsyXVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8ge0BsaW5rIFBoeXNYQ29tcG9uZW50LmdldEFuZ3VsYXJWZWxvY2l0eX0uXG4gICAgICpcbiAgICAgKiBAbm90ZSBQcmVmZXIgdG8gdXNlIHtAbGluayBQaHlzWENvbXBvbmVudC5nZXRBbmd1bGFyVmVsb2NpdHl9IGZvciBwZXJmb3JtYW5jZS5cbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBhbmd1bGFyVmVsb2NpdHkoKTogRmxvYXQzMkFycmF5IHtcbiAgICAgICAgLyoqIEB0b2RvOiBCcmVhayBhdCAyLjAuMC4gRG8gbm90IGFsbG93IG1vZGlmeWluZyBtZW1vcnkgaW4tcGxhY2UuICovXG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2FuZ3VsYXJWZWxvY2l0eSh0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KHdhc20uSEVBUEYzMi5idWZmZXIsIHdhc20uX3RlbXBNZW0sIDMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY29tcG9uZW50cyBncm91cHMgbWFzay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmbGFncyBOZXcgZmxhZ3MgdGhhdCBuZWVkIHRvIGJlIHNldC5cbiAgICAgKi9cbiAgICBzZXQgZ3JvdXBzTWFzayhmbGFnczogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfZ3JvdXBzTWFzayh0aGlzLl9pZCwgZmxhZ3MpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY29tcG9uZW50cyBncm91cHMgbWFzayBmbGFncy5cbiAgICAgKlxuICAgICAqIEVhY2ggYml0IHJlcHJlc2VudHMgbWVtYmVyc2hpcCB0byBncm91cCwgc2VlIGV4YW1wbGUuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIC8vIEFzc2lnbiBjIHRvIGdyb3VwIDJcbiAgICAgKiBjLmdyb3Vwc01hc2sgPSAoMSA8PCAyKTtcbiAgICAgKlxuICAgICAqIC8vIEFzc2lnbiBjIHRvIGdyb3VwIDBcbiAgICAgKiBjLmdyb3Vwc01hc2sgID0gKDEgPDwgMCk7XG4gICAgICpcbiAgICAgKiAvLyBBc3NpZ24gYyB0byBncm91cCAwIGFuZCAyXG4gICAgICogYy5ncm91cHNNYXNrID0gKDEgPDwgMCkgfCAoMSA8PCAyKTtcbiAgICAgKlxuICAgICAqIChjLmdyb3Vwc01hc2sgJiAoMSA8PCAyKSkgIT0gMDsgLy8gdHJ1ZVxuICAgICAqIChjLmdyb3Vwc01hc2sgJiAoMSA8PCA3KSkgIT0gMDsgLy8gZmFsc2VcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBncm91cHNNYXNrKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2dyb3Vwc01hc2sodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY29tcG9uZW50cyBibG9ja3MgbWFzay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmbGFncyBOZXcgZmxhZ3MgdGhhdCBuZWVkIHRvIGJlIHNldC5cbiAgICAgKi9cbiAgICBzZXQgYmxvY2tzTWFzayhmbGFnczogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfYmxvY2tzTWFzayh0aGlzLl9pZCwgZmxhZ3MpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY29tcG9uZW50cyBibG9ja3MgbWFzayBmbGFncy5cbiAgICAgKlxuICAgICAqIEVhY2ggYml0IHJlcHJlc2VudHMgbWVtYmVyc2hpcCB0byB0aGUgYmxvY2ssIHNlZSBleGFtcGxlLlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAvLyBCbG9jayBvdmVybGFwIHdpdGggYW55IG9iamVjdHMgaW4gZ3JvdXAgMlxuICAgICAqIGMuYmxvY2tzTWFzayA9ICgxIDw8IDIpO1xuICAgICAqXG4gICAgICogLy8gQmxvY2sgb3ZlcmxhcCB3aXRoIGFueSBvYmplY3RzIGluIGdyb3VwIDBcbiAgICAgKiBjLmJsb2Nrc01hc2sgID0gKDEgPDwgMClcbiAgICAgKlxuICAgICAqIC8vIEJsb2NrIG92ZXJsYXAgd2l0aCBhbnkgb2JqZWN0cyBpbiBncm91cCAwIGFuZCAyXG4gICAgICogYy5ibG9ja3NNYXNrID0gKDEgPDwgMCkgfCAoMSA8PCAyKTtcbiAgICAgKlxuICAgICAqIChjLmJsb2Nrc01hc2sgJiAoMSA8PCAyKSkgIT0gMDsgLy8gdHJ1ZVxuICAgICAqIChjLmJsb2Nrc01hc2sgJiAoMSA8PCA3KSkgIT0gMDsgLy8gZmFsc2VcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBibG9ja3NNYXNrKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2Jsb2Nrc01hc2sodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBheGVzIHRvIGxvY2sgZm9yIGxpbmVhciB2ZWxvY2l0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBsb2NrIFRoZSBBeGlzIHRoYXQgbmVlZHMgdG8gYmUgc2V0LlxuICAgICAqXG4gICAgICogQ29tYmluZSBmbGFncyB3aXRoIEJpdHdpc2UgT1I6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGJvZHkubGluZWFyTG9ja0F4aXMgPSBMb2NrQXhpcy5YIHwgTG9ja0F4aXMuWTsgLy8geCBhbmQgeSBzZXRcbiAgICAgKiBib2R5LmxpbmVhckxvY2tBeGlzID0gTG9ja0F4aXMuWDsgLy8geSB1bnNldFxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBoYXMgbm8gZWZmZWN0IGlmIHRoZSBjb21wb25lbnQgaXMgc3RhdGljLlxuICAgICAqL1xuICAgIHNldCBsaW5lYXJMb2NrQXhpcyhsb2NrOiBMb2NrQXhpcykge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X2xpbmVhckxvY2tBeGlzKHRoaXMuX2lkLCBsb2NrKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxpbmVhciBsb2NrIGF4ZXMgZmxhZ3MuXG4gICAgICpcbiAgICAgKiBUbyBnZXQgdGhlIHN0YXRlIG9mIGEgc3BlY2lmaWMgZmxhZywgQml0d2lzZSBBTkQgd2l0aCB0aGUgTG9ja0F4aXMgbmVlZGVkLlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBpZihib2R5LmxpbmVhckxvY2tBeGlzICYgTG9ja0F4aXMuWSkge1xuICAgICAqICAgICBjb25zb2xlLmxvZyhcIlRoZSBZIGZsYWcgd2FzIHNldCFcIik7XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHJldHVybiBheGVzIHRoYXQgYXJlIGN1cnJlbnRseSBsb2NrZWQgZm9yIGxpbmVhciBtb3ZlbWVudC5cbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBsaW5lYXJMb2NrQXhpcygpOiBMb2NrQXhpcyB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2xpbmVhckxvY2tBeGlzKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgYXhlcyB0byBsb2NrIGZvciBhbmd1bGFyIHZlbG9jaXR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGxvY2sgVGhlIEF4aXMgdGhhdCBuZWVkcyB0byBiZSBzZXQuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGJvZHkuYW5ndWxhckxvY2tBeGlzID0gTG9ja0F4aXMuWCB8IExvY2tBeGlzLlk7IC8vIHggYW5kIHkgc2V0XG4gICAgICogYm9keS5hbmd1bGFyTG9ja0F4aXMgPSBMb2NrQXhpcy5YOyAvLyB5IHVuc2V0XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGhhcyBubyBlZmZlY3QgaWYgdGhlIGNvbXBvbmVudCBpcyBzdGF0aWMuXG4gICAgICovXG4gICAgc2V0IGFuZ3VsYXJMb2NrQXhpcyhsb2NrOiBMb2NrQXhpcykge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X2FuZ3VsYXJMb2NrQXhpcyh0aGlzLl9pZCwgbG9jayk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBhbmd1bGFyIGxvY2sgYXhlcyBmbGFncy5cbiAgICAgKlxuICAgICAqIFRvIGdldCB0aGUgc3RhdGUgb2YgYSBzcGVjaWZpYyBmbGFnLCBCaXR3aXNlIEFORCB3aXRoIHRoZSBMb2NrQXhpcyBuZWVkZWQ6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGlmKGJvZHkuYW5ndWxhckxvY2tBeGlzICYgTG9ja0F4aXMuWSkge1xuICAgICAqICAgICBjb25zb2xlLmxvZyhcIlRoZSBZIGZsYWcgd2FzIHNldCFcIik7XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHJldHVybiBheGVzIHRoYXQgYXJlIGN1cnJlbnRseSBsb2NrZWQgZm9yIGFuZ3VsYXIgbW92ZW1lbnQuXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgYW5ndWxhckxvY2tBeGlzKCk6IExvY2tBeGlzIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfYW5ndWxhckxvY2tBeGlzKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgbWFzcy5cbiAgICAgKlxuICAgICAqIFtQaHlzWCBNYW51YWwgLSBcIk1hc3MgUHJvcGVydGllc1wiXShodHRwczovL2dhbWV3b3Jrc2RvY3MubnZpZGlhLmNvbS9QaHlzWC80LjEvZG9jdW1lbnRhdGlvbi9waHlzeGd1aWRlL01hbnVhbC9SaWdpZEJvZHlEeW5hbWljcy5odG1sI21hc3MtcHJvcGVydGllcylcbiAgICAgKlxuICAgICAqIEBwYXJhbSBtIE5ldyBtYXNzLlxuICAgICAqL1xuICAgIHNldCBtYXNzKG06IG51bWJlcikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X21hc3ModGhpcy5faWQsIG0pO1xuICAgIH1cblxuICAgIC8qKiBNYXNzICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgbWFzcygpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9tYXNzKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgbWFzcyBzcGFjZSBpbnRlcmlhIHRlbnNvci5cbiAgICAgKlxuICAgICAqIFtQaHlzWCBNYW51YWwgLSBcIk1hc3MgUHJvcGVydGllc1wiXShodHRwczovL2dhbWV3b3Jrc2RvY3MubnZpZGlhLmNvbS9QaHlzWC80LjEvZG9jdW1lbnRhdGlvbi9waHlzeGd1aWRlL01hbnVhbC9SaWdpZEJvZHlEeW5hbWljcy5odG1sI21hc3MtcHJvcGVydGllcylcbiAgICAgKlxuICAgICAqIEhhcyBubyBlZmZlY3QsIGlmIHRoZSBjb21wb25lbnQgaXMgbm90IGFjdGl2ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2IE5ldyBtYXNzIHNwYWNlIGludGVyYXRpYSB0ZW5zb3IuXG4gICAgICovXG4gICAgc2V0IG1hc3NTcGFjZUludGVyaWFUZW5zb3IodjogUmVhZG9ubHk8TnVtYmVyQXJyYXk+KSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfbWFzc1NwYWNlSW5lcnRpYVRlbnNvcihcbiAgICAgICAgICAgIHRoaXMuX2lkLFxuICAgICAgICAgICAgdlswXSxcbiAgICAgICAgICAgIHZbMV0sXG4gICAgICAgICAgICB2WzJdXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSByaWdpZCBib2R5IHRvIHNsZWVwIHVwb24gYWN0aXZhdGlvbi5cbiAgICAgKlxuICAgICAqIFdoZW4gYXNsZWVwLCB0aGUgcmlnaWQgYm9keSB3aWxsIG5vdCBiZSBzaW11bGF0ZWQgdW50aWwgdGhlIG5leHQgY29udGFjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmbGFnIGB0cnVlYCB0byBzbGVlcCB1cG9uIGFjdGl2YXRpb24uXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4xLjVcbiAgICAgKi9cbiAgICBzZXQgc2xlZXBPbkFjdGl2YXRlKGZsYWc6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9zbGVlcE9uQWN0aXZhdGUodGhpcy5faWQsIGZsYWcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGB0cnVlYCBpZiB0aGUgcmlnaWQgYm9keSBpcyBzZXQgdG8gc2xlZXAgdXBvbiBhY3RpdmF0aW9uLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjEuNVxuICAgICAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IHNsZWVwT25BY3RpdmF0ZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9zbGVlcE9uQWN0aXZhdGUodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFwcGx5IGEgZm9yY2UuXG4gICAgICpcbiAgICAgKiBbUGh5c1ggTWFudWFsIC0gXCJBcHBseWluZyBGb3JjZXMgYW5kIFRvcnF1ZXNcIl0oaHR0cHM6Ly9nYW1ld29ya3Nkb2NzLm52aWRpYS5jb20vUGh5c1gvNC4xL2RvY3VtZW50YXRpb24vcGh5c3hndWlkZS9NYW51YWwvUmlnaWRCb2R5RHluYW1pY3MuaHRtbCNhcHBseWluZy1mb3JjZXMtYW5kLXRvcnF1ZXMpXG4gICAgICpcbiAgICAgKiBIYXMgbm8gZWZmZWN0LCBpZiB0aGUgY29tcG9uZW50IGlzIG5vdCBhY3RpdmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZiBGb3JjZSB2ZWN0b3IuXG4gICAgICogQHBhcmFtIG0gRm9yY2UgbW9kZSwgc2VlIHtAbGluayBGb3JjZU1vZGV9LCBkZWZhdWx0IGBGb3JjZWAuXG4gICAgICogQHBhcmFtIGxvY2FsRm9yY2UgV2hldGhlciB0aGUgZm9yY2UgdmVjdG9yIGlzIGluIGxvY2FsIHNwYWNlLCBkZWZhdWx0IGBmYWxzZWAuXG4gICAgICogQHBhcmFtIHAgUG9zaXRpb24gdG8gYXBwbHkgZm9yY2UgYXQsIGRlZmF1bHQgaXMgY2VudGVyIG9mIG1hc3MuXG4gICAgICogQHBhcmFtIGxvY2FsIFdoZXRoZXIgcG9zaXRpb24gaXMgaW4gbG9jYWwgc3BhY2UsIGRlZmF1bHQgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBhZGRGb3JjZShcbiAgICAgICAgZjogUmVhZG9ubHk8TnVtYmVyQXJyYXk+LFxuICAgICAgICBtOiBGb3JjZU1vZGUgPSBGb3JjZU1vZGUuRm9yY2UsXG4gICAgICAgIGxvY2FsRm9yY2U6IGJvb2xlYW4gPSBmYWxzZSxcbiAgICAgICAgcD86IFJlYWRvbmx5PE51bWJlckFycmF5PixcbiAgICAgICAgbG9jYWw6IGJvb2xlYW4gPSBmYWxzZVxuICAgICkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgaWYgKCFwKSB7XG4gICAgICAgICAgICB3YXNtLl93bF9waHlzeF9jb21wb25lbnRfYWRkRm9yY2UodGhpcy5faWQsIGZbMF0sIGZbMV0sIGZbMl0sIG0sIGxvY2FsRm9yY2UpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHdhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9hZGRGb3JjZUF0KFxuICAgICAgICAgICAgdGhpcy5faWQsXG4gICAgICAgICAgICBmWzBdLFxuICAgICAgICAgICAgZlsxXSxcbiAgICAgICAgICAgIGZbMl0sXG4gICAgICAgICAgICBtLFxuICAgICAgICAgICAgbG9jYWxGb3JjZSxcbiAgICAgICAgICAgIHBbMF0sXG4gICAgICAgICAgICBwWzFdLFxuICAgICAgICAgICAgcFsyXSxcbiAgICAgICAgICAgIGxvY2FsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXBwbHkgdG9ycXVlLlxuICAgICAqXG4gICAgICogW1BoeXNYIE1hbnVhbCAtIFwiQXBwbHlpbmcgRm9yY2VzIGFuZCBUb3JxdWVzXCJdKGh0dHBzOi8vZ2FtZXdvcmtzZG9jcy5udmlkaWEuY29tL1BoeXNYLzQuMS9kb2N1bWVudGF0aW9uL3BoeXN4Z3VpZGUvTWFudWFsL1JpZ2lkQm9keUR5bmFtaWNzLmh0bWwjYXBwbHlpbmctZm9yY2VzLWFuZC10b3JxdWVzKVxuICAgICAqXG4gICAgICogSGFzIG5vIGVmZmVjdCwgaWYgdGhlIGNvbXBvbmVudCBpcyBub3QgYWN0aXZlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGYgRm9yY2UgdmVjdG9yLlxuICAgICAqIEBwYXJhbSBtIEZvcmNlIG1vZGUsIHNlZSB7QGxpbmsgRm9yY2VNb2RlfSwgZGVmYXVsdCBgRm9yY2VgLlxuICAgICAqL1xuICAgIGFkZFRvcnF1ZShmOiBSZWFkb25seTxOdW1iZXJBcnJheT4sIG06IEZvcmNlTW9kZSA9IEZvcmNlTW9kZS5Gb3JjZSkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfYWRkVG9ycXVlKHRoaXMuX2lkLCBmWzBdLCBmWzFdLCBmWzJdLCBtKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgb24gY29sbGlzaW9uIGNhbGxiYWNrLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIEZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGlzIHJpZ2lkIGJvZHkgKHVuKWNvbGxpZGVzIHdpdGggYW55IG90aGVyLlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAgbGV0IHJpZ2lkQm9keSA9IHRoaXMub2JqZWN0LmdldENvbXBvbmVudCgncGh5c3gnKTtcbiAgICAgKiAgcmlnaWRCb2R5Lm9uQ29sbGlzaW9uKGZ1bmN0aW9uKHR5cGUsIG90aGVyKSB7XG4gICAgICogICAgICAvLyBJZ25vcmUgdW5jb2xsaWRlc1xuICAgICAqICAgICAgaWYodHlwZSA9PSBDb2xsaXNpb25FdmVudFR5cGUuVG91Y2hMb3N0KSByZXR1cm47XG4gICAgICpcbiAgICAgKiAgICAgIC8vIFRha2UgZGFtYWdlIG9uIGNvbGxpc2lvbiB3aXRoIGVuZW1pZXNcbiAgICAgKiAgICAgIGlmKG90aGVyLm9iamVjdC5uYW1lLnN0YXJ0c1dpdGgoXCJlbmVteS1cIikpIHtcbiAgICAgKiAgICAgICAgICB0aGlzLmFwcGx5RGFtYWdlKDEwKTtcbiAgICAgKiAgICAgIH1cbiAgICAgKiAgfS5iaW5kKHRoaXMpKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIElkIG9mIHRoZSBuZXcgY2FsbGJhY2sgZm9yIHVzZSB3aXRoIHtAbGluayBQaHlzWENvbXBvbmVudCNyZW1vdmVDb2xsaXNpb25DYWxsYmFja30uXG4gICAgICovXG4gICAgb25Db2xsaXNpb24oY2FsbGJhY2s6IENvbGxpc2lvbkNhbGxiYWNrKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub25Db2xsaXNpb25XaXRoKHRoaXMsIGNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgZmlsdGVyZWQgb24gY29sbGlzaW9uIGNhbGxiYWNrLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyQ29tcCBDb21wb25lbnQgZm9yIHdoaWNoIGNhbGxiYWNrcyB3aWxsXG4gICAgICogICAgICAgIGJlIHRyaWdnZXJlZC4gSWYgeW91IHBhc3MgdGhpcyBjb21wb25lbnQsIHRoZSBtZXRob2QgaXMgZXF1aXZhbGVudCB0by5cbiAgICAgKiAgICAgICAge0BsaW5rIFBoeXNYQ29tcG9uZW50I29uQ29sbGlzaW9ufS5cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgRnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoaXMgcmlnaWQgYm9keVxuICAgICAqICAgICAgICAodW4pY29sbGlkZXMgd2l0aCBgb3RoZXJDb21wYC5cbiAgICAgKiBAcmV0dXJucyBJZCBvZiB0aGUgbmV3IGNhbGxiYWNrIGZvciB1c2Ugd2l0aCB7QGxpbmsgUGh5c1hDb21wb25lbnQjcmVtb3ZlQ29sbGlzaW9uQ2FsbGJhY2t9LlxuICAgICAqL1xuICAgIG9uQ29sbGlzaW9uV2l0aChvdGhlckNvbXA6IHRoaXMsIGNhbGxiYWNrOiBDb2xsaXNpb25DYWxsYmFjayk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IHRoaXMuc2NlbmUuX3B4Q2FsbGJhY2tzO1xuICAgICAgICBpZiAoIWNhbGxiYWNrcy5oYXModGhpcy5faWQpKSB7XG4gICAgICAgICAgICBjYWxsYmFja3Muc2V0KHRoaXMuX2lkLCBbXSk7XG4gICAgICAgIH1cbiAgICAgICAgY2FsbGJhY2tzLmdldCh0aGlzLl9pZCkhLnB1c2goY2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2FkZENhbGxiYWNrKHRoaXMuX2lkLCBvdGhlckNvbXAuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYSBjb2xsaXNpb24gY2FsbGJhY2sgYWRkZWQgd2l0aCB7QGxpbmsgUGh5c1hDb21wb25lbnQjb25Db2xsaXNpb259IG9yIHtAbGluayBQaHlzWENvbXBvbmVudCNvbkNvbGxpc2lvbldpdGh9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGNhbGxiYWNrSWQgQ2FsbGJhY2sgaWQgYXMgcmV0dXJuZWQgYnkge0BsaW5rIFBoeXNYQ29tcG9uZW50I29uQ29sbGlzaW9ufSBvciB7QGxpbmsgUGh5c1hDb21wb25lbnQjb25Db2xsaXNpb25XaXRofS5cbiAgICAgKiBAdGhyb3dzIFdoZW4gdGhlIGNhbGxiYWNrIGRvZXMgbm90IGJlbG9uZyB0byB0aGUgY29tcG9uZW50LlxuICAgICAqIEB0aHJvd3MgV2hlbiB0aGUgY2FsbGJhY2sgZG9lcyBub3QgZXhpc3QuXG4gICAgICovXG4gICAgcmVtb3ZlQ29sbGlzaW9uQ2FsbGJhY2soY2FsbGJhY2tJZDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfcmVtb3ZlQ2FsbGJhY2sodGhpcy5faWQsIGNhbGxiYWNrSWQpO1xuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSB0aGlzLnNjZW5lLl9weENhbGxiYWNrcztcbiAgICAgICAgLyogciBpcyB0aGUgYW1vdW50IG9mIG9iamVjdCB0byByZW1vdmUgZnJvbSB0aGUgZW5kIG9mIHRoZVxuICAgICAgICAgKiBjYWxsYmFja3MgYXJyYXkgZm9yIHRoaXMgb2JqZWN0ICovXG4gICAgICAgIGlmIChyKSBjYWxsYmFja3MuZ2V0KHRoaXMuX2lkKSEuc3BsaWNlKC1yKTtcbiAgICB9XG59XG5cbi8qKlxuICogQWNjZXNzIHRvIHRoZSBwaHlzaWNzIHNjZW5lXG4gKi9cbmV4cG9ydCBjbGFzcyBQaHlzaWNzIHtcbiAgICAvKipcbiAgICAgKiBIaXQuXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9oaXQ6IFJheUhpdDtcblxuICAgIC8qKlxuICAgICAqIFdvbmRlcmxhbmQgRW5naW5lIGluc3RhbmNlXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHByb3RlY3RlZCByZWFkb25seSBfZW5naW5lOiBXb25kZXJsYW5kRW5naW5lO1xuXG4gICAgLyoqXG4gICAgICogUmF5IEhpdFxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBwcml2YXRlIF9yYXlIaXQ6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKGVuZ2luZTogV29uZGVybGFuZEVuZ2luZSkge1xuICAgICAgICB0aGlzLl9lbmdpbmUgPSBlbmdpbmU7XG4gICAgICAgIHRoaXMuX3JheUhpdCA9IGVuZ2luZS53YXNtLl9tYWxsb2MoNCAqICgzICogNCArIDMgKiA0ICsgNCArIDIpICsgNCk7XG4gICAgICAgIHRoaXMuX2hpdCA9IG5ldyBSYXlIaXQoZW5naW5lLnNjZW5lLCB0aGlzLl9yYXlIaXQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhc3QgYSByYXkgdGhyb3VnaCB0aGUgc2NlbmUgYW5kIGZpbmQgaW50ZXJzZWN0aW5nIHBoeXNpY3MgY29tcG9uZW50cy5cbiAgICAgKlxuICAgICAqIFRoZSByZXN1bHRpbmcgcmF5IGhpdCB3aWxsIGNvbnRhaW4gKip1cCB0byA0KiogY2xvc2VzdCByYXkgaGl0cyxcbiAgICAgKiBzb3J0ZWQgYnkgaW5jcmVhc2luZyBkaXN0YW5jZS5cbiAgICAgKlxuICAgICAqIEV4YW1wbGU6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IGhpdCA9IGVuZ2luZS5waHlzaWNzLnJheUNhc3QoXG4gICAgICogICAgIFswLCAwLCAwXSxcbiAgICAgKiAgICAgWzAsIDAsIDFdLFxuICAgICAqICAgICAxIDw8IDAgfCAxIDw8IDQsIC8vIE9ubHkgY2hlY2sgYWdhaW5zdCBwaHlzaWNzIGNvbXBvbmVudHMgaW4gZ3JvdXBzIDAgYW5kIDRcbiAgICAgKiAgICAgMjVcbiAgICAgKiApO1xuICAgICAqIGlmIChoaXQuaGl0Q291bnQgPiAwKSB7XG4gICAgICogICAgIGNvbnN0IGxvY2F0aW9ucyA9IGhpdC5nZXRMb2NhdGlvbnMoKTtcbiAgICAgKiAgICAgY29uc29sZS5sb2coYE9iamVjdCBoaXQgYXQ6ICR7bG9jYXRpb25zWzBdWzBdfSwgJHtsb2NhdGlvbnNbMF1bMV19LCAke2xvY2F0aW9uc1swXVsyXX1gKTtcbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbyBSYXkgb3JpZ2luLlxuICAgICAqIEBwYXJhbSBkIFJheSBkaXJlY3Rpb24uXG4gICAgICogQHBhcmFtIGdyb3VwTWFzayBCaXRtYXNrIG9mIHBoeXNpY3MgZ3JvdXBzIHRvIGZpbHRlciBieTogb25seSBvYmplY3RzXG4gICAgICogICAgICAgIHRoYXQgYXJlIHBhcnQgb2YgZ2l2ZW4gZ3JvdXBzIGFyZSBjb25zaWRlcmVkIGZvciB0aGUgcmF5Y2FzdC5cbiAgICAgKiBAcGFyYW0gbWF4RGlzdGFuY2UgTWF4aW11bSAqKmluY2x1c2l2ZSoqIGhpdCBkaXN0YW5jZS4gRGVmYXVsdHMgdG8gYDEwMGAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUge0BsaW5rIFJheUhpdH0gaW5zdGFuY2UsIGNhY2hlZCBieSB0aGlzIGNsYXNzLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhlIHJldHVybmVkIHtAbGluayBSYXlIaXR9IG9iamVjdCBpcyBvd25lZCBieSB0aGUge0BsaW5rIFBoeXNpY3N9XG4gICAgICogICAgICAgaW5zdGFuY2UgYW5kIHdpbGwgYmUgcmV1c2VkIHdpdGggdGhlIG5leHQge0BsaW5rIFBoeXNpY3MjcmF5Q2FzdH0gY2FsbC5cbiAgICAgKi9cbiAgICByYXlDYXN0KFxuICAgICAgICBvOiBSZWFkb25seTxOdW1iZXJBcnJheT4sXG4gICAgICAgIGQ6IFJlYWRvbmx5PE51bWJlckFycmF5PixcbiAgICAgICAgZ3JvdXBNYXNrOiBudW1iZXIsXG4gICAgICAgIG1heERpc3RhbmNlOiBudW1iZXIgPSAxMDAuMFxuICAgICk6IFJheUhpdCB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gdGhpcy5fZW5naW5lLnNjZW5lLl9pbmRleDtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX3BoeXN4X3JheV9jYXN0KFxuICAgICAgICAgICAgc2NlbmUsXG4gICAgICAgICAgICBvWzBdLFxuICAgICAgICAgICAgb1sxXSxcbiAgICAgICAgICAgIG9bMl0sXG4gICAgICAgICAgICBkWzBdLFxuICAgICAgICAgICAgZFsxXSxcbiAgICAgICAgICAgIGRbMl0sXG4gICAgICAgICAgICBncm91cE1hc2ssXG4gICAgICAgICAgICBtYXhEaXN0YW5jZSxcbiAgICAgICAgICAgIHRoaXMuX3JheUhpdFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gdGhpcy5faGl0O1xuICAgIH1cblxuICAgIC8qKiBIb3N0aW5nIGVuZ2luZSBpbnN0YW5jZS4gKi9cbiAgICBnZXQgZW5naW5lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5naW5lO1xuICAgIH1cbn1cblxuLyoqXG4gKiBNZXNoIGluZGV4IHR5cGUuXG4gKi9cbmV4cG9ydCBlbnVtIE1lc2hJbmRleFR5cGUge1xuICAgIC8qKiBTaW5nbGUgYnl0ZSBtZXNoIGluZGV4LCByYW5nZSAwLTI1NSAqL1xuICAgIFVuc2lnbmVkQnl0ZSA9IDEsXG5cbiAgICAvKiogVHdvIGJ5dGUgbWVzaCBpbmRleCwgcmFuZ2UgMC02NTUzNSAqL1xuICAgIFVuc2lnbmVkU2hvcnQgPSAyLFxuXG4gICAgLyoqIEZvdXIgYnl0ZSBtZXNoIGluZGV4LCByYW5nZSAwLTQyOTQ5NjcyOTUgKi9cbiAgICBVbnNpZ25lZEludCA9IDQsXG59XG5cbi8qKlxuICogTWVzaCBza2lubmluZyB0eXBlLlxuICovXG5leHBvcnQgZW51bSBNZXNoU2tpbm5pbmdUeXBlIHtcbiAgICAvKiogTm90IHNraW5uZWQgKi9cbiAgICBOb25lID0gMCxcblxuICAgIC8qKiBTa2lubmVkLCA0IGpvaW50cy93ZWlnaHQgcGVyIHZlcnRleCAqL1xuICAgIEZvdXJKb2ludHMgPSAxLFxuXG4gICAgLyoqIFNraW5uZWQsIDggam9pbnRzL3dlaWdodCBwZXIgdmVydGV4ICovXG4gICAgRWlnaHRKb2ludHMgPSAyLFxufVxuXG4vKipcbiAqIE1lc2ggY29uc3RydWN0b3IgcGFyYW1ldGVycyBvYmplY3QuXG4gKlxuICogVXNhZ2U6XG4gKlxuICogYGBganNcbiAqIGNvbnN0IG1lc2ggPSBNZXNoKHt2ZXJ0ZXhDb3VudDogMywgaW5kZXhEYXRhOiBbMCwgMSwgMl19KTtcbiAqIGBgYFxuICovXG5leHBvcnQgaW50ZXJmYWNlIE1lc2hQYXJhbWV0ZXJzIHtcbiAgICAvKiogTnVtYmVyIG9mIHZlcnRpY2VzIHRvIGFsbG9jYXRlLiAqL1xuICAgIHZlcnRleENvdW50OiBudW1iZXI7XG4gICAgLyoqIEluZGV4IGRhdGEgdmFsdWVzLiAqL1xuICAgIGluZGV4RGF0YTogUmVhZG9ubHk8TnVtYmVyQXJyYXk+O1xuICAgIC8qKiBJbmRleCB0eXBlLCBgbnVsbGAgaWYgbm90IGluZGV4ZWQuICovXG4gICAgaW5kZXhUeXBlOiBNZXNoSW5kZXhUeXBlO1xuICAgIC8qKiBXaGV0aGVyIHRoZSBtZXNoIHNob3VsZCBiZSBza2lubmVkLiBEZWZhdWx0cyB0byBub3Qgc2tpbm5lZC4gKi9cbiAgICBza2lubmluZ1R5cGU6IE1lc2hTa2lubmluZ1R5cGU7XG59XG5cbi8qKlxuICogV3JhcHBlciBhcm91bmQgYSBuYXRpdmUgbWVzaCBkYXRhLlxuICpcbiAqIEZvciBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGhvdyB0byBjcmVhdGUgbWVzaGVzLCBoYXZlIGEgbG9vayBhdCB0aGVcbiAqIHtAbGluayBNZXNoTWFuYWdlcn0gY2xhc3MuXG4gKlxuICogIyMjIyBVcGRhdGVcbiAqXG4gKiBUbyBtb2RpZnkgYSBtZXNoLCB5b3UgZ2V0IGFjY2VzcyB0byBhIHtAbGluayBNZXNoQXR0cmlidXRlQWNjZXNzb3J9IHRoYXRcbiAqIGFsbG93cyB5b3UgdG8gbW9kaWZ5IHRoZSBjb250ZW50IG9mIHRoZSBidWZmZXJzOlxuICpcbiAqIFVzYWdlOlxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCBtZXNoID0gZW5naW5lLmVzLmNyZWF0ZSh7dmVydGV4Q291bnQ6IDMsIGluZGV4RGF0YTogWzAsIDEsIDJdfSk7XG4gKiBjb25zdCBwb3NpdGlvbnMgPSBtZXNoLmF0dHJpYnV0ZShNZXNoQXR0cmlidXRlLlBvc2l0aW9uKTtcbiAqIC4uLlxuICogYGBgXG4gKlxuICogQG5vdGUgTWVzaGVzIGFyZSAqKnBlci1lbmdpbmUqKiwgdGhleSBjYW4gdGh1cyBiZSBzaGFyZWQgYnkgbXVsdGlwbGUgc2NlbmVzLlxuICovXG5leHBvcnQgY2xhc3MgTWVzaCBleHRlbmRzIFJlc291cmNlIHtcbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIE1lc2hNYW5hZ2VyLmNyZWF0ZX0gaW5zdGVhZCwgYWNjZXNzaWJsZSB2aWEge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUubWVzaGVzfTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgbWVzaCA9IGVuZ2luZS5tZXNoZXMuY3JlYXRlKHt2ZXJ0ZXhDb3VudDogMywgaW5kZXhEYXRhOiBbMCwgMSwgMl19KTtcbiAgICAgKiAuLi5cbiAgICAgKiBtZXNoLnVwZGF0ZSgpO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGVuZ2luZTogV29uZGVybGFuZEVuZ2luZSwgcGFyYW1zOiBQYXJ0aWFsPE1lc2hQYXJhbWV0ZXJzPiB8IG51bWJlcikge1xuICAgICAgICBpZiAoIWlzTnVtYmVyKHBhcmFtcykpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc2ggPSBlbmdpbmUubWVzaGVzLmNyZWF0ZShwYXJhbXMpO1xuICAgICAgICAgICAgLyogYHN1cGVyKClgIG11c3QgYmUgY2FsbGVkIGFzIHN0YXRlZCBpbiB0aGUgc3BlY2lmaWNhdGlvbiAqL1xuICAgICAgICAgICAgc3VwZXIoZW5naW5lLCBtZXNoLl9pbmRleCk7XG4gICAgICAgICAgICByZXR1cm4gbWVzaDtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihlbmdpbmUsIHBhcmFtcyk7XG4gICAgfVxuXG4gICAgLyoqIE51bWJlciBvZiB2ZXJ0aWNlcyBpbiB0aGlzIG1lc2guICovXG4gICAgZ2V0IHZlcnRleENvdW50KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9tZXNoX2dldF92ZXJ0ZXhDb3VudCh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqIEluZGV4IGRhdGEgKHJlYWQtb25seSkgb3IgYG51bGxgIGlmIHRoZSBtZXNoIGlzIG5vdCBpbmRleGVkLiAqL1xuICAgIGdldCBpbmRleERhdGEoKTogVWludDhBcnJheSB8IFVpbnQxNkFycmF5IHwgVWludDMyQXJyYXkgfCBudWxsIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHRlbXBNZW0gPSB3YXNtLl90ZW1wTWVtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9tZXNoX2dldF9pbmRleERhdGEodGhpcy5faWQsIHRlbXBNZW0sIHRlbXBNZW0gKyA0KTtcbiAgICAgICAgaWYgKHB0ciA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgY29uc3QgaW5kZXhDb3VudCA9IHdhc20uSEVBUFUzMlt0ZW1wTWVtIC8gNF07XG4gICAgICAgIGNvbnN0IGluZGV4U2l6ZSA9IHdhc20uSEVBUFUzMlt0ZW1wTWVtIC8gNCArIDFdO1xuICAgICAgICBzd2l0Y2ggKGluZGV4U2l6ZSkge1xuICAgICAgICAgICAgY2FzZSBNZXNoSW5kZXhUeXBlLlVuc2lnbmVkQnl0ZTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkod2FzbS5IRUFQVTguYnVmZmVyLCBwdHIsIGluZGV4Q291bnQpO1xuICAgICAgICAgICAgY2FzZSBNZXNoSW5kZXhUeXBlLlVuc2lnbmVkU2hvcnQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50MTZBcnJheSh3YXNtLkhFQVBVMTYuYnVmZmVyLCBwdHIsIGluZGV4Q291bnQpO1xuICAgICAgICAgICAgY2FzZSBNZXNoSW5kZXhUeXBlLlVuc2lnbmVkSW50OlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVWludDMyQXJyYXkod2FzbS5IRUFQVTMyLmJ1ZmZlciwgcHRyLCBpbmRleENvdW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBcHBseSBjaGFuZ2VzIHRvIHtAbGluayBhdHRyaWJ1dGUgfCB2ZXJ0ZXggYXR0cmlidXRlc30uXG4gICAgICpcbiAgICAgKiBVcGxvYWRzIHRoZSB1cGRhdGVkIHZlcnRleCBhdHRyaWJ1dGVzIHRvIHRoZSBHUFUgYW5kIHVwZGF0ZXMgdGhlIGJvdW5kaW5nXG4gICAgICogc3BoZXJlIHRvIG1hdGNoIHRoZSBuZXcgdmVydGV4IHBvc2l0aW9ucy5cbiAgICAgKlxuICAgICAqIFNpbmNlIHRoaXMgaXMgYW4gZXhwZW5zaXZlIG9wZXJhdGlvbiwgY2FsbCBpdCBvbmx5IG9uY2UgeW91IGhhdmUgcGVyZm9ybWVkXG4gICAgICogYWxsIG1vZGlmaWNhdGlvbnMgb24gYSBtZXNoIGFuZCBhdm9pZCBjYWxsaW5nIGlmIHlvdSBkaWQgbm90IHBlcmZvcm0gYW55XG4gICAgICogbW9kaWZpY2F0aW9ucyBhdCBhbGwuXG4gICAgICovXG4gICAgdXBkYXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9tZXNoX3VwZGF0ZSh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldEJvdW5kaW5nU3BoZXJlKCk6IEZsb2F0MzJBcnJheTtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0Qm91bmRpbmdTcGhlcmU8VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQpOiBUO1xuICAgIC8qKlxuICAgICAqIE1lc2ggYm91bmRpbmcgc3BoZXJlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBQcmVhbGxvY2F0ZWQgYXJyYXkgdG8gd3JpdGUgaW50bywgdG8gYXZvaWQgZ2FyYmFnZSxcbiAgICAgKiAgICAgb3RoZXJ3aXNlIHdpbGwgYWxsb2NhdGUgYSBuZXcgRmxvYXQzMkFycmF5LlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAgY29uc3Qgc3BoZXJlID0gbmV3IEZsb2F0MzJBcnJheSg0KTtcbiAgICAgKiAgZm9yKC4uLikge1xuICAgICAqICAgICAgbWVzaC5nZXRCb3VuZGluZ1NwaGVyZShzcGhlcmUpO1xuICAgICAqICAgICAgLi4uXG4gICAgICogIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIElmIHRoZSBwb3NpdGlvbiBkYXRhIGlzIGNoYW5nZWQsIGNhbGwge0BsaW5rIE1lc2gjdXBkYXRlfSB0byB1cGRhdGUgdGhlXG4gICAgICogYm91bmRpbmcgc3BoZXJlLlxuICAgICAqXG4gICAgICogQHJldHVybnMgQm91bmRpbmcgc3BoZXJlLCAwLTIgc3BoZXJlIG9yaWdpbiwgMyByYWRpdXMuXG4gICAgICovXG4gICAgZ2V0Qm91bmRpbmdTcGhlcmU8VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQgfCBGbG9hdDMyQXJyYXkpOiBUIHwgRmxvYXQzMkFycmF5O1xuICAgIGdldEJvdW5kaW5nU3BoZXJlPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4oXG4gICAgICAgIG91dDogVCB8IEZsb2F0MzJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoNClcbiAgICApOiBUIHwgRmxvYXQzMkFycmF5IHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX21lc2hfZ2V0X2JvdW5kaW5nU3BoZXJlKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsyXTtcbiAgICAgICAgb3V0WzNdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzNdO1xuICAgICAgICByZXR1cm4gb3V0IGFzIFQ7XG4gICAgfVxuXG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGF0dHJpYnV0ZShcbiAgICAgICAgYXR0cjogTWVzaEF0dHJpYnV0ZS5Qb3NpdGlvblxuICAgICk6IE1lc2hBdHRyaWJ1dGVBY2Nlc3NvcjxGbG9hdDMyQXJyYXlDb25zdHJ1Y3Rvcj4gfCBudWxsO1xuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBhdHRyaWJ1dGUoXG4gICAgICAgIGF0dHI6IE1lc2hBdHRyaWJ1dGUuVGFuZ2VudFxuICAgICk6IE1lc2hBdHRyaWJ1dGVBY2Nlc3NvcjxGbG9hdDMyQXJyYXlDb25zdHJ1Y3Rvcj4gfCBudWxsO1xuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBhdHRyaWJ1dGUoXG4gICAgICAgIGF0dHI6IE1lc2hBdHRyaWJ1dGUuTm9ybWFsXG4gICAgKTogTWVzaEF0dHJpYnV0ZUFjY2Vzc29yPEZsb2F0MzJBcnJheUNvbnN0cnVjdG9yPiB8IG51bGw7XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGF0dHJpYnV0ZShcbiAgICAgICAgYXR0cjogTWVzaEF0dHJpYnV0ZS5UZXh0dXJlQ29vcmRpbmF0ZVxuICAgICk6IE1lc2hBdHRyaWJ1dGVBY2Nlc3NvcjxGbG9hdDMyQXJyYXlDb25zdHJ1Y3Rvcj4gfCBudWxsO1xuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBhdHRyaWJ1dGUoXG4gICAgICAgIGF0dHI6IE1lc2hBdHRyaWJ1dGUuQ29sb3JcbiAgICApOiBNZXNoQXR0cmlidXRlQWNjZXNzb3I8RmxvYXQzMkFycmF5Q29uc3RydWN0b3I+IHwgbnVsbDtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgYXR0cmlidXRlKFxuICAgICAgICBhdHRyOiBNZXNoQXR0cmlidXRlLkpvaW50SWRcbiAgICApOiBNZXNoQXR0cmlidXRlQWNjZXNzb3I8VWludDE2QXJyYXlDb25zdHJ1Y3Rvcj4gfCBudWxsO1xuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBhdHRyaWJ1dGUoXG4gICAgICAgIGF0dHI6IE1lc2hBdHRyaWJ1dGUuSm9pbnRXZWlnaHRcbiAgICApOiBNZXNoQXR0cmlidXRlQWNjZXNzb3I8RmxvYXQzMkFycmF5Q29uc3RydWN0b3I+IHwgbnVsbDtcbiAgICAvKipcbiAgICAgKiBHZXQgYW4gYXR0cmlidXRlIGFjY2Vzc29yIHRvIHJldHJpZXZlIG9yIG1vZGlmeSBkYXRhIG9mIGdpdmUgYXR0cmlidXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGF0dHIgQXR0cmlidXRlIHRvIGdldCBhY2Nlc3MgdG9cbiAgICAgKiBAcmV0dXJucyBBdHRyaWJ1dGUgdG8gZ2V0IGFjY2VzcyB0byBvciBgbnVsbGAsIGlmIG1lc2ggZG9lcyBub3QgaGF2ZSB0aGlzIGF0dHJpYnV0ZS5cbiAgICAgKlxuICAgICAqIENhbGwge0BsaW5rIHVwZGF0ZX0gZm9yIGNoYW5nZXMgdG8gdmVydGV4IGF0dHJpYnV0ZXMgdG8gdGFrZSBlZmZlY3QuXG4gICAgICpcbiAgICAgKiBJZiB0aGVyZSBhcmUgbm8gc2hhZGVycyBpbiB0aGUgc2NlbmUgdGhhdCB1c2UgYFRleHR1cmVDb29yZGluYXRlYCBmb3IgZXhhbXBsZSxcbiAgICAgKiBubyBtZXNoZXMgd2lsbCBoYXZlIHRoZSBgVGV4dHVyZUNvb3JkaW5hdGVgIGF0dHJpYnV0ZS5cbiAgICAgKlxuICAgICAqIEZvciBmbGV4aWJsZSByZXVzYWJsZSBjb21wb25lbnRzLCB0YWtlIHRoaXMgaW50byBhY2NvdW50IHRoYXQgb25seSBgUG9zaXRpb25gXG4gICAgICogaXMgZ3VhcmFudGVlZCB0byBiZSBwcmVzZW50IGF0IGFsbCB0aW1lLlxuICAgICAqL1xuICAgIGF0dHJpYnV0ZShhdHRyOiBNZXNoQXR0cmlidXRlKTogTWVzaEF0dHJpYnV0ZUFjY2Vzc29yIHwgbnVsbDtcbiAgICBhdHRyaWJ1dGUoYXR0cjogTWVzaEF0dHJpYnV0ZSk6IE1lc2hBdHRyaWJ1dGVBY2Nlc3NvciB8IG51bGwge1xuICAgICAgICBpZiAodHlwZW9mIGF0dHIgIT0gJ251bWJlcicpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBudW1iZXIsIGJ1dCBnb3QgJyArIHR5cGVvZiBhdHRyKTtcblxuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgdGVtcE1lbVVpbnQzMiA9IHdhc20uX3RlbXBNZW1VaW50MzI7XG4gICAgICAgIHdhc20uX3dsX21lc2hfZ2V0X2F0dHJpYnV0ZSh0aGlzLl9pZCwgYXR0ciwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIGlmICh0ZW1wTWVtVWludDMyWzBdID09IDI1NSkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgY29uc3QgYXJyYXlTaXplID0gdGVtcE1lbVVpbnQzMls1XTtcbiAgICAgICAgcmV0dXJuIG5ldyBNZXNoQXR0cmlidXRlQWNjZXNzb3IodGhpcy5lbmdpbmUsIHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZTogdGVtcE1lbVVpbnQzMlswXSxcbiAgICAgICAgICAgIG9mZnNldDogdGVtcE1lbVVpbnQzMlsxXSxcbiAgICAgICAgICAgIHN0cmlkZTogdGVtcE1lbVVpbnQzMlsyXSxcbiAgICAgICAgICAgIGZvcm1hdFNpemU6IHRlbXBNZW1VaW50MzJbM10sXG4gICAgICAgICAgICBjb21wb25lbnRDb3VudDogdGVtcE1lbVVpbnQzMls0XSxcbiAgICAgICAgICAgIC8qIFRoZSBXQVNNIEFQSSByZXR1cm5zIGAwYCBmb3IgYSBzY2FsYXIgdmFsdWUuIFdlIGNsYW1wIGl0IHRvIDEgYXMgd2Ugc3RyaWN0bHkgdXNlIGl0IGFzIGEgbXVsdGlwbGllciBmb3IgZ2V0L3NldCBvcGVyYXRpb25zICovXG4gICAgICAgICAgICBhcnJheVNpemU6IGFycmF5U2l6ZSA/IGFycmF5U2l6ZSA6IDEsXG4gICAgICAgICAgICBsZW5ndGg6IHRoaXMudmVydGV4Q291bnQsXG4gICAgICAgICAgICBidWZmZXJUeXBlOiAoYXR0ciAhPT0gTWVzaEF0dHJpYnV0ZS5Kb2ludElkXG4gICAgICAgICAgICAgICAgPyBGbG9hdDMyQXJyYXlcbiAgICAgICAgICAgICAgICA6IFVpbnQxNkFycmF5KSBhcyBUeXBlZEFycmF5Q3RvcixcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzdHJveSBhbmQgZnJlZSB0aGUgbWVzaGVzIG1lbW9yeS5cbiAgICAgKlxuICAgICAqIEl0IGlzIGJlc3QgcHJhY3RpY2UgdG8gc2V0IHRoZSBtZXNoIHZhcmlhYmxlIHRvIGBudWxsYCBhZnRlciBjYWxsaW5nXG4gICAgICogZGVzdHJveSB0byBwcmV2ZW50IGFjY2lkZW50YWwgdXNlOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAgIG1lc2guZGVzdHJveSgpO1xuICAgICAqICAgbWVzaCA9IG51bGw7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBBY2Nlc3NpbmcgdGhlIG1lc2ggYWZ0ZXIgZGVzdHJ1Y3Rpb24gYmVoYXZlcyBsaWtlIGFjY2Vzc2luZyBhbiBlbXB0eVxuICAgICAqIG1lc2guXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC45LjBcbiAgICAgKi9cbiAgICBkZXN0cm95KCk6IHZvaWQge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9tZXNoX2Rlc3Ryb3kodGhpcy5faWQpO1xuICAgICAgICB0aGlzLmVuZ2luZS5tZXNoZXMuX2Rlc3Ryb3kodGhpcyk7XG4gICAgfVxuXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICByZXR1cm4gJ01lc2goZGVzdHJveWVkKSc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGBNZXNoKCR7dGhpcy5faW5kZXh9KWA7XG4gICAgfVxufVxuXG4vKipcbiAqIE9wdGlvbnMgdG8gY3JlYXRlIGEgbmV3IHtAbGluayBNZXNoQXR0cmlidXRlQWNjZXNzb3J9IGluc3RhbmNlLlxuICovXG5pbnRlcmZhY2UgTWVzaEF0dHJpYnV0ZUFjY2Vzc29yT3B0aW9uczxUIGV4dGVuZHMgVHlwZWRBcnJheUN0b3I+IHtcbiAgICBhdHRyaWJ1dGU6IG51bWJlcjtcbiAgICBvZmZzZXQ6IG51bWJlcjtcbiAgICBzdHJpZGU6IG51bWJlcjtcbiAgICBmb3JtYXRTaXplOiBudW1iZXI7XG4gICAgY29tcG9uZW50Q291bnQ6IG51bWJlcjtcbiAgICBhcnJheVNpemU6IG51bWJlcjtcbiAgICBsZW5ndGg6IG51bWJlcjtcbiAgICBidWZmZXJUeXBlOiBUO1xufVxuXG4vKipcbiAqIEFuIGl0ZXJhdG9yIG92ZXIgYSBtZXNoIHZlcnRleCBhdHRyaWJ1dGUuXG4gKlxuICogVXNhZ2U6XG4gKlxuICogYGBganNcbiAqIGNvbnN0IG1lc2ggPSB0aGlzLm9iamVjdC5nZXRDb21wb25lbnQoJ21lc2gnKS5tZXNoO1xuICogY29uc3QgcG9zaXRpb25zID0gbWVzaC5hdHRyaWJ1dGUoTWVzaEF0dHJpYnV0ZS5Qb3NpdGlvbik7XG4gKlxuICogLy8gRXF1aXZhbGVudCB0byBgbmV3IEZsb2F0MzJBcnJheSgzKWAuXG4gKiBjb25zdCB0ZW1wID0gcG9zaXRpb25zLmNyZWF0ZUFycmF5KCk7XG4gKlxuICogZm9yKGxldCBpID0gMDsgaSA8IHBvc2l0aW9ucy5sZW5ndGg7ICsraSkge1xuICogICAgIC8vIGBwb3NgIHdpbGwgcmVmZXJlbmNlIGB0ZW1wYCBhbmQgdGhlcmVieSBub3QgYWxsb2NhdGUgYWRkaXRpb25hbFxuICogICAgIC8vIG1lbW9yeSwgd2hpY2ggd291bGQgY2F1c2UgYSBwZXJmIHNwaWtlIHdoZW4gY29sbGVjdGVkLlxuICogICAgIGNvbnN0IHBvcyA9IHBvc2l0aW9ucy5nZXQoaSwgdGVtcCk7XG4gKiAgICAgLy8gU2NhbGUgcG9zaXRpb24gYnkgMiBvbiB4LWF4aXMgb25seS5cbiAqICAgICBwb3NbMF0gKj0gMi4wO1xuICogICAgIHBvc2l0aW9ucy5zZXQoaSwgcG9zKTtcbiAqIH1cbiAqIC8vIFdlJ3JlIGRvbmUgbW9kaWZ5aW5nLCB0ZWxsIHRoZSBlbmdpbmUgdG8gbW92ZSB2ZXJ0ZXggZGF0YSB0byB0aGUgR1BVLlxuICogbWVzaC51cGRhdGUoKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgTWVzaEF0dHJpYnV0ZUFjY2Vzc29yPFQgZXh0ZW5kcyBUeXBlZEFycmF5Q3RvciA9IFR5cGVkQXJyYXlDdG9yPiB7XG4gICAgLyoqIE1heCBudW1iZXIgb2YgZWxlbWVudHMuICovXG4gICAgcmVhZG9ubHkgbGVuZ3RoOiBudW1iZXIgPSAwO1xuXG4gICAgLyoqIFdvbmRlcmxhbmQgRW5naW5lIGluc3RhbmNlLiBAaGlkZGVuICovXG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IF9lbmdpbmU6IFdvbmRlcmxhbmRFbmdpbmU7XG5cbiAgICAvKiogQXR0cmlidXRlIGluZGV4LiBAaGlkZGVuICovXG4gICAgcHJpdmF0ZSBfYXR0cmlidXRlOiBudW1iZXIgPSAtMTtcbiAgICAvKiogQXR0cmlidXRlIG9mZnNldC4gQGhpZGRlbiAqL1xuICAgIHByaXZhdGUgX29mZnNldDogbnVtYmVyID0gMDtcbiAgICAvKiogQXR0cmlidXRlIHN0cmlkZS4gQGhpZGRlbiAqL1xuICAgIHByaXZhdGUgX3N0cmlkZTogbnVtYmVyID0gMDtcbiAgICAvKiogRm9ybWF0IHNpemUgbmF0aXZlIGVudW0uIEBoaWRkZW4gKi9cbiAgICBwcml2YXRlIF9mb3JtYXRTaXplOiBudW1iZXIgPSAwO1xuICAgIC8qKiBOdW1iZXIgb2YgY29tcG9uZW50cyBwZXIgdmVydGV4LiBAaGlkZGVuICovXG4gICAgcHJpdmF0ZSBfY29tcG9uZW50Q291bnQ6IG51bWJlciA9IDA7XG4gICAgLyoqIE51bWJlciBvZiB2YWx1ZXMgcGVyIHZlcnRleC4gQGhpZGRlbiAqL1xuICAgIHByaXZhdGUgX2FycmF5U2l6ZTogbnVtYmVyID0gMTtcbiAgICAvKipcbiAgICAgKiBDbGFzcyB0byBpbnN0YW50aWF0ZSBhbiBBcnJheUJ1ZmZlciB0byBnZXQvc2V0IHZhbHVlcy5cbiAgICAgKi9cbiAgICBwcml2YXRlIF9idWZmZXJUeXBlOiBUO1xuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHRvIGFsbG9jYXRlIHRlbXBvcmFyeSBXQVNNIG1lbW9yeS4gSXQgaXMgY2FjaGVkIGluIHRoZSBhY2Nlc3NvciB0byBhdm9pZFxuICAgICAqIGNvbmRpdGlvbmFscyBkdXJpbmcgZ2V0L3NldC5cbiAgICAgKi9cbiAgICBwcml2YXRlIF90ZW1wQnVmZmVyR2V0dGVyOiAoYnl0ZXM6IG51bWJlcikgPT4gVHlwZWRBcnJheTxUPjtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBub3RlIFBsZWFzZSB1c2Uge0BsaW5rIE1lc2guYXR0cmlidXRlfSB0byBjcmVhdGUgYSBuZXcgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBDb250YWlucyBpbmZvcm1hdGlvbiBhYm91dCBob3cgdG8gcmVhZCB0aGUgZGF0YS5cbiAgICAgKiBAbm90ZSBEbyBub3QgdXNlIHRoaXMgY29uc3RydWN0b3IuIEluc3RlYWQsIHBsZWFzZSB1c2UgdGhlIHtAbGluayBNZXNoLmF0dHJpYnV0ZX0gbWV0aG9kLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGVuZ2luZTogV29uZGVybGFuZEVuZ2luZSwgb3B0aW9uczogTWVzaEF0dHJpYnV0ZUFjY2Vzc29yT3B0aW9uczxUPikge1xuICAgICAgICB0aGlzLl9lbmdpbmUgPSBlbmdpbmU7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcblxuICAgICAgICB0aGlzLl9hdHRyaWJ1dGUgPSBvcHRpb25zLmF0dHJpYnV0ZTtcbiAgICAgICAgdGhpcy5fb2Zmc2V0ID0gb3B0aW9ucy5vZmZzZXQ7XG4gICAgICAgIHRoaXMuX3N0cmlkZSA9IG9wdGlvbnMuc3RyaWRlO1xuICAgICAgICB0aGlzLl9mb3JtYXRTaXplID0gb3B0aW9ucy5mb3JtYXRTaXplO1xuICAgICAgICB0aGlzLl9jb21wb25lbnRDb3VudCA9IG9wdGlvbnMuY29tcG9uZW50Q291bnQ7XG4gICAgICAgIHRoaXMuX2FycmF5U2l6ZSA9IG9wdGlvbnMuYXJyYXlTaXplO1xuICAgICAgICB0aGlzLl9idWZmZXJUeXBlID0gb3B0aW9ucy5idWZmZXJUeXBlO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IG9wdGlvbnMubGVuZ3RoO1xuXG4gICAgICAgIHRoaXMuX3RlbXBCdWZmZXJHZXR0ZXIgPSAoXG4gICAgICAgICAgICB0aGlzLl9idWZmZXJUeXBlID09PSBGbG9hdDMyQXJyYXlcbiAgICAgICAgICAgICAgICA/IHdhc20uZ2V0VGVtcEJ1ZmZlckYzMi5iaW5kKHdhc20pXG4gICAgICAgICAgICAgICAgOiB3YXNtLmdldFRlbXBCdWZmZXJVMTYuYmluZCh3YXNtKVxuICAgICAgICApIGFzICgpID0+IFR5cGVkQXJyYXk8VD47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IFR5cGVkQXJyYXkgdG8gaG9sZCB0aGlzIGF0dHJpYnV0ZSdzIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWZ1bCB0byBjcmVhdGUgYSB2aWV3IHRvIGhvbGQgdGhlIGRhdGEgdG9cbiAgICAgKiBwYXNzIHRvIHtAbGluayBnZXR9IGFuZCB7QGxpbmsgc2V0fVxuICAgICAqXG4gICAgICogRXhhbXBsZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgdmVydGV4Q291bnQgPSA0O1xuICAgICAqIGNvbnN0IHBvc2l0aW9uQXR0cmlidXRlID0gbWVzaC5hdHRyaWJ1dGUoTWVzaEF0dHJpYnV0ZS5Qb3NpdGlvbik7XG4gICAgICpcbiAgICAgKiAvLyBBIHBvc2l0aW9uIGhhcyAzIGZsb2F0cyBwZXIgdmVydGV4LiBUaHVzLCBwb3NpdGlvbnMgaGFzIGxlbmd0aCAzICogNC5cbiAgICAgKiBjb25zdCBwb3NpdGlvbnMgPSBwb3NpdGlvbkF0dHJpYnV0ZS5jcmVhdGVBcnJheSh2ZXJ0ZXhDb3VudCk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY291bnQgVGhlIG51bWJlciBvZiAqKnZlcnRpY2VzKiogZXhwZWN0ZWQuXG4gICAgICogQHJldHVybnMgQSBUeXBlZEFycmF5IHdpdGggdGhlIGFwcHJvcHJpYXRlIGZvcm1hdCB0byBhY2Nlc3MgdGhlIGRhdGFcbiAgICAgKi9cbiAgICBjcmVhdGVBcnJheShjb3VudCA9IDEpOiBUeXBlZEFycmF5PFQ+IHtcbiAgICAgICAgY291bnQgPSBjb3VudCA+IHRoaXMubGVuZ3RoID8gdGhpcy5sZW5ndGggOiBjb3VudDtcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzLl9idWZmZXJUeXBlKFxuICAgICAgICAgICAgY291bnQgKiB0aGlzLl9jb21wb25lbnRDb3VudCAqIHRoaXMuX2FycmF5U2l6ZVxuICAgICAgICApIGFzIFR5cGVkQXJyYXk8VD47XG4gICAgfVxuXG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldChpbmRleDogbnVtYmVyKTogVHlwZWRBcnJheTxUPjtcbiAgICAvKipcbiAgICAgKiBHZXQgYXR0cmlidXRlIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW5kZXggSW5kZXhcbiAgICAgKiBAcGFyYW0gb3V0IFByZWFsbG9jYXRlZCBhcnJheSB0byB3cml0ZSBpbnRvLFxuICAgICAqICAgICAgdG8gYXZvaWQgZ2FyYmFnZSwgb3RoZXJ3aXNlIHdpbGwgYWxsb2NhdGUgYSBuZXcgVHlwZWRBcnJheS5cbiAgICAgKlxuICAgICAqIGBvdXQubGVuZ3RoYCBuZWVkcyB0byBiZSBhIG11bHRpcGxlIG9mIHRoZSBhdHRyaWJ1dGVzIGNvbXBvbmVudCBjb3VudCwgc2VlXG4gICAgICoge0BsaW5rIE1lc2hBdHRyaWJ1dGV9LiBJZiBgb3V0Lmxlbmd0aGAgaXMgbW9yZSB0aGFuIG9uZSBtdWx0aXBsZSwgaXQgd2lsbCBiZVxuICAgICAqIGZpbGxlZCB3aXRoIHRoZSBuZXh0IG4gYXR0cmlidXRlIGVsZW1lbnRzLCB3aGljaCBjYW4gcmVkdWNlIG92ZXJoZWFkXG4gICAgICogb2YgdGhpcyBjYWxsLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIGBvdXRgIHBhcmFtZXRlclxuICAgICAqL1xuICAgIGdldDxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KGluZGV4OiBudW1iZXIsIG91dDogVCk6IFQ7XG4gICAgZ2V0KGluZGV4OiBudW1iZXIsIG91dDogTnVtYmVyQXJyYXkgPSB0aGlzLmNyZWF0ZUFycmF5KCkpOiBOdW1iZXJBcnJheSB7XG4gICAgICAgIGlmIChvdXQubGVuZ3RoICUgdGhpcy5fY29tcG9uZW50Q291bnQgIT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICBgb3V0Lmxlbmd0aCwgJHtvdXQubGVuZ3RofSBpcyBub3QgYSBtdWx0aXBsZSBvZiB0aGUgYXR0cmlidXRlIHZlY3RvciBjb21wb25lbnRzLCAke3RoaXMuX2NvbXBvbmVudENvdW50fWBcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkZXN0ID0gdGhpcy5fdGVtcEJ1ZmZlckdldHRlcihvdXQubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgZWxlbWVudFNpemUgPSB0aGlzLl9idWZmZXJUeXBlLkJZVEVTX1BFUl9FTEVNRU5UO1xuICAgICAgICBjb25zdCBkZXN0U2l6ZSA9IGVsZW1lbnRTaXplICogb3V0Lmxlbmd0aDtcbiAgICAgICAgY29uc3Qgc3JjRm9ybWF0U2l6ZSA9IHRoaXMuX2Zvcm1hdFNpemUgKiB0aGlzLl9hcnJheVNpemU7XG4gICAgICAgIGNvbnN0IGRlc3RGb3JtYXRTaXplID0gdGhpcy5fY29tcG9uZW50Q291bnQgKiBlbGVtZW50U2l6ZSAqIHRoaXMuX2FycmF5U2l6ZTtcblxuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfbWVzaF9nZXRfYXR0cmlidXRlX3ZhbHVlcyhcbiAgICAgICAgICAgIHRoaXMuX2F0dHJpYnV0ZSxcbiAgICAgICAgICAgIHNyY0Zvcm1hdFNpemUsXG4gICAgICAgICAgICB0aGlzLl9vZmZzZXQgKyBpbmRleCAqIHRoaXMuX3N0cmlkZSxcbiAgICAgICAgICAgIHRoaXMuX3N0cmlkZSxcbiAgICAgICAgICAgIGRlc3RGb3JtYXRTaXplLFxuICAgICAgICAgICAgZGVzdC5ieXRlT2Zmc2V0LFxuICAgICAgICAgICAgZGVzdFNpemVcbiAgICAgICAgKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG91dC5sZW5ndGg7ICsraSkgb3V0W2ldID0gZGVzdFtpXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgYXR0cmlidXRlIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaSBJbmRleFxuICAgICAqIEBwYXJhbSB2IFZhbHVlIHRvIHNldCB0aGUgZWxlbWVudCB0b1xuICAgICAqXG4gICAgICogYHYubGVuZ3RoYCBuZWVkcyB0byBiZSBhIG11bHRpcGxlIG9mIHRoZSBhdHRyaWJ1dGVzIGNvbXBvbmVudCBjb3VudCwgc2VlXG4gICAgICoge0BsaW5rIE1lc2hBdHRyaWJ1dGV9LiBJZiBgdi5sZW5ndGhgIGlzIG1vcmUgdGhhbiBvbmUgbXVsdGlwbGUsIGl0IHdpbGwgYmVcbiAgICAgKiBmaWxsZWQgd2l0aCB0aGUgbmV4dCBuIGF0dHJpYnV0ZSBlbGVtZW50cywgd2hpY2ggY2FuIHJlZHVjZSBvdmVyaGVhZFxuICAgICAqIG9mIHRoaXMgY2FsbC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKVxuICAgICAqL1xuICAgIHNldChpOiBudW1iZXIsIHY6IFJlYWRvbmx5PE51bWJlckFycmF5Pikge1xuICAgICAgICBpZiAodi5sZW5ndGggJSB0aGlzLl9jb21wb25lbnRDb3VudCAhPT0gMClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICBgb3V0Lmxlbmd0aCwgJHt2Lmxlbmd0aH0gaXMgbm90IGEgbXVsdGlwbGUgb2YgdGhlIGF0dHJpYnV0ZSB2ZWN0b3IgY29tcG9uZW50cywgJHt0aGlzLl9jb21wb25lbnRDb3VudH1gXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGVsZW1lbnRTaXplID0gdGhpcy5fYnVmZmVyVHlwZS5CWVRFU19QRVJfRUxFTUVOVDtcbiAgICAgICAgY29uc3Qgc3JjU2l6ZSA9IGVsZW1lbnRTaXplICogdi5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHNyY0Zvcm1hdFNpemUgPSB0aGlzLl9jb21wb25lbnRDb3VudCAqIGVsZW1lbnRTaXplICogdGhpcy5fYXJyYXlTaXplO1xuICAgICAgICBjb25zdCBkZXN0Rm9ybWF0U2l6ZSA9IHRoaXMuX2Zvcm1hdFNpemUgKiB0aGlzLl9hcnJheVNpemU7XG5cbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuXG4gICAgICAgIC8qIFVubGVzcyB3ZSBhcmUgYWxyZWFkeSB3b3JraW5nIHdpdGggZGF0YSBmcm9tIFdBU00gaGVhcCwgd2VcbiAgICAgICAgICogbmVlZCB0byBjb3B5IGludG8gdGVtcG9yYXJ5IG1lbW9yeS4gKi9cbiAgICAgICAgaWYgKCh2IGFzIEZsb2F0MzJBcnJheSkuYnVmZmVyICE9IHdhc20uSEVBUFU4LmJ1ZmZlcikge1xuICAgICAgICAgICAgY29uc3QgZGVzdCA9IHRoaXMuX3RlbXBCdWZmZXJHZXR0ZXIodi5sZW5ndGgpO1xuICAgICAgICAgICAgZGVzdC5zZXQodik7XG4gICAgICAgICAgICB2ID0gZGVzdDtcbiAgICAgICAgfVxuXG4gICAgICAgIHdhc20uX3dsX21lc2hfc2V0X2F0dHJpYnV0ZV92YWx1ZXMoXG4gICAgICAgICAgICB0aGlzLl9hdHRyaWJ1dGUsXG4gICAgICAgICAgICBzcmNGb3JtYXRTaXplLFxuICAgICAgICAgICAgKHYgYXMgRmxvYXQzMkFycmF5KS5ieXRlT2Zmc2V0LFxuICAgICAgICAgICAgc3JjU2l6ZSxcbiAgICAgICAgICAgIGRlc3RGb3JtYXRTaXplLFxuICAgICAgICAgICAgdGhpcy5fb2Zmc2V0ICsgaSAqIHRoaXMuX3N0cmlkZSxcbiAgICAgICAgICAgIHRoaXMuX3N0cmlkZVxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKiBIb3N0aW5nIGVuZ2luZSBpbnN0YW5jZS4gKi9cbiAgICBnZXQgZW5naW5lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5naW5lO1xuICAgIH1cbn1cblxuLyoqXG4gKiBXcmFwcGVyIGFyb3VuZCBhIG5hdGl2ZSBmb250IHJlc291cmNlLlxuICpcbiAqIEBub3RlIEZvbnRzIGFyZSAqKnBlci1lbmdpbmUqKiwgdGhleSBjYW4gdGh1cyBiZSBzaGFyZWQgYnkgbXVsdGlwbGUgc2NlbmVzLlxuICpcbiAqIEBzaW5jZSAxLjIuMFxuICovXG5leHBvcnQgY2xhc3MgRm9udCBleHRlbmRzIFJlc291cmNlIHtcbiAgICAvKiogRW0gaGVpZ2h0IGluIG9iamVjdCBzcGFjZS4gRXF1aXZhbGVudCB0byBsaW5lIGhlaWdodC4gKi9cbiAgICBnZXQgZW1IZWlnaHQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2ZvbnRfZ2V0X2VtSGVpZ2h0KHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYXAgaGVpZ2h0IGluIG9iamVjdCBzcGFjZS4gVGhpcyBpcyB0aGUgdHlwaWNhbCBoZWlnaHQgb2YgY2FwaXRhbFxuICAgICAqIGxldHRlcnMuIENhbiBiZSAwIGlmIG5vdCBkZWZpbmVkIGJ5IHRoZSBmb250LlxuICAgICAqL1xuICAgIGdldCBjYXBIZWlnaHQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2ZvbnRfZ2V0X2NhcEhlaWdodCh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogWCBoZWlnaHQgaW4gb2JqZWN0IHNwYWNlLiBUaGlzIGlzIHRoZSB0eXBpY2FsIGhlaWdodCBvZiBsb3dlcmNhc2VcbiAgICAgKiBsZXR0ZXJzLiBDYW4gYmUgMCBpZiBub3QgZGVmaW5lZCBieSB0aGUgZm9udC5cbiAgICAgKi9cbiAgICBnZXQgeEhlaWdodCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfZm9udF9nZXRfeEhlaWdodCh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3V0bGluZSBzaXplLiBUaGlzIGlzIHRoZSBmYWN0b3IgYnkgd2hpY2ggY2hhcmFjdGVycyBhcmUgZXhwYW5kZWQgdG9cbiAgICAgKiBjcmVhdGUgdGhlIG91dGxpbmUgZWZmZWN0LiBSZXR1cm5zIDAgaWYgdGhlIGZvbnQgd2FzIGNvbXBpbGVkIHdpdGhvdXRcbiAgICAgKiBhbiBvdXRsaW5lLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMi4xXG4gICAgICovXG4gICAgZ2V0IG91dGxpbmVTaXplKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9mb250X2dldF9vdXRsaW5lU2l6ZSh0aGlzLl9pZCk7XG4gICAgfVxufVxuXG4vKiogVGVtcG9yYXJ5IGNhbnZhcyAqL1xubGV0IHRlbXAyZDoge1xuICAgIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XG4gICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG59IHwgbnVsbCA9IG51bGw7XG5cbi8qKlxuICogV3JhcHBlciBhcm91bmQgYSBuYXRpdmUgdGV4dHVyZSBkYXRhLlxuICpcbiAqIEZvciBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGhvdyB0byBjcmVhdGUgbWVzaGVzLCBoYXZlIGEgbG9vayBhdCB0aGVcbiAqIHtAbGluayBUZXh0dXJlTWFuYWdlcn0gY2xhc3MuXG4gKlxuICogQG5vdGUgVGV4dHVyZXMgYXJlICoqcGVyLWVuZ2luZSoqLCB0aGV5IGNhbiB0aHVzIGJlIHNoYXJlZCBieSBtdWx0aXBsZSBzY2VuZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBUZXh0dXJlIGV4dGVuZHMgUmVzb3VyY2Uge1xuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgVGV4dHVyZU1hbmFnZXIuY3JlYXRlfSBpbnN0ZWFkLCBhY2Nlc3NpYmxlIHZpYVxuICAgICAqIHtAbGluayBXb25kZXJsYW5kRW5naW5lLnRleHR1cmVzfTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICAgKiBpbWFnZS5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICogICAgIGNvbnN0IHRleHR1cmUgPSBlbmdpbmUudGV4dHVyZXMuY3JlYXRlKGltYWdlKTtcbiAgICAgKiB9O1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGVuZ2luZTogV29uZGVybGFuZEVuZ2luZSwgcGFyYW06IEltYWdlTGlrZSB8IG51bWJlcikge1xuICAgICAgICBpZiAoaXNJbWFnZUxpa2UocGFyYW0pKSB7XG4gICAgICAgICAgICBjb25zdCB0ZXh0dXJlID0gZW5naW5lLnRleHR1cmVzLmNyZWF0ZShwYXJhbSk7XG4gICAgICAgICAgICAvKiBgc3VwZXIoKWAgbXVzdCBiZSBjYWxsZWQgYXMgc3RhdGVkIGluIHRoZSBzcGVjaWZpY2F0aW9uICovXG4gICAgICAgICAgICBzdXBlcihlbmdpbmUsIHRleHR1cmUuX2luZGV4KTtcbiAgICAgICAgICAgIHJldHVybiB0ZXh0dXJlO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGVuZ2luZSwgcGFyYW0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhpcyB0ZXh0dXJlIGlzIHZhbGlkXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIFNjZW5lUmVzb3VyY2UjaXNEZXN0cm95ZWR9IGluc3RlYWQuXG4gICAgICovXG4gICAgZ2V0IHZhbGlkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gIXRoaXMuaXNEZXN0cm95ZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5kZXggaW4gdGhpcyBtYW5hZ2VyLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayBUZXh0dXJlLmluZGV4fSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIGdldCBpZCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleDtcbiAgICB9XG5cbiAgICAvKiogVXBkYXRlIHRoZSB0ZXh0dXJlIHRvIG1hdGNoIHRoZSBIVE1MIGVsZW1lbnQgKGUuZy4gcmVmbGVjdCB0aGUgY3VycmVudCBmcmFtZSBvZiBhIHZpZGVvKS4gKi9cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIGNvbnN0IGltYWdlID0gdGhpcy5faW1hZ2VJbmRleDtcbiAgICAgICAgaWYgKCF0aGlzLnZhbGlkIHx8ICFpbWFnZSkgcmV0dXJuO1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9yZW5kZXJlcl91cGRhdGVJbWFnZShpbWFnZSk7XG4gICAgfVxuXG4gICAgLyoqIFdpZHRoIG9mIHRoZSB0ZXh0dXJlLiAqL1xuICAgIGdldCB3aWR0aCgpOiBudW1iZXIge1xuICAgICAgICAvKiBIVE1MIHRleHR1cmVzIHNob3VsZCBiZSByZWFkIGRpcmVjdGx5IGZyb20ganMsIHNpbmNlIHRoZSBDKysgY291bGQgYmVcbiAgICAgICAgICogb25lIGZyYW1lIG91dC1vZi1zeW5jIG9uIHRoZSBzaXplIG9mIHRoZSBlbGVtZW50IGl0c2VsZi4gKi9cbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuaHRtbEVsZW1lbnQ7XG4gICAgICAgIGlmIChlbGVtZW50KSByZXR1cm4gZWxlbWVudC53aWR0aDtcblxuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfaW1hZ2Vfc2l6ZSh0aGlzLl9pbWFnZUluZGV4LCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgcmV0dXJuIHdhc20uX3RlbXBNZW1VaW50MzJbMF07XG4gICAgfVxuXG4gICAgLyoqIEhlaWdodCBvZiB0aGUgdGV4dHVyZS4gKi9cbiAgICBnZXQgaGVpZ2h0KCk6IG51bWJlciB7XG4gICAgICAgIC8qIEhUTUwgdGV4dHVyZXMgc2hvdWxkIGJlIHJlYWQgZGlyZWN0bHkgZnJvbSBqcywgc2luY2UgdGhlIEMrKyBjb3VsZCBiZVxuICAgICAgICAgKiBvbmUgZnJhbWUgb3V0LW9mLXN5bmMgb24gdGhlIHNpemUgb2YgdGhlIGVsZW1lbnQgaXRzZWxmLiAqL1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5odG1sRWxlbWVudDtcbiAgICAgICAgaWYgKGVsZW1lbnQpIHJldHVybiBlbGVtZW50LmhlaWdodDtcblxuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfaW1hZ2Vfc2l6ZSh0aGlzLl9pbWFnZUluZGV4LCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgcmV0dXJuIHdhc20uX3RlbXBNZW1VaW50MzJbMV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgaHRtbCBlbGVtZW50IGFzc29jaWF0ZWQgdG8gdGhpcyB0ZXh0dXJlLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhY2Nlc3NvciB3aWxsIHJldHVybiBgbnVsbGAgaWYgdGhlIGltYWdlIGlzIGNvbXByZXNzZWQuXG4gICAgICovXG4gICAgZ2V0IGh0bWxFbGVtZW50KCk6IEltYWdlTGlrZSB8IG51bGwge1xuICAgICAgICBjb25zdCBpbWFnZSA9IHRoaXMuX2ltYWdlSW5kZXg7XG4gICAgICAgIGlmICghaW1hZ2UpIHJldHVybiBudWxsO1xuXG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBqc0ltYWdlSW5kZXggPSB3YXNtLl93bF9pbWFnZV9nZXRfanNJbWFnZV9pbmRleChpbWFnZSk7XG5cbiAgICAgICAgLyogU2luY2UgdGhlIGZpcnN0IGVsZW1lbnQgaXMgYG51bGxgLCBubyBuZWVkIHRvIGNoZWNrIGZvciBganNJbWFnZUluZGV4YCAqL1xuICAgICAgICByZXR1cm4gd2FzbS5faW1hZ2VzW2pzSW1hZ2VJbmRleF07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIGEgc3VicmFuZ2Ugb24gdGhlIHRleHR1cmUgdG8gbWF0Y2ggdGhlIEhUTUwgZWxlbWVudCAoZS5nLiByZWZsZWN0IHRoZSBjdXJyZW50IGZyYW1lIG9mIGEgdmlkZW8pLlxuICAgICAqXG4gICAgICogVXNhZ2U6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIC8vIENvcGllcyByZWN0YW5nbGUgb2YgcGl4ZWwgc3RhcnRpbmcgZnJvbSAoMTAsIDIwKVxuICAgICAqIHRleHR1cmUudXBkYXRlU3ViSW1hZ2UoMTAsIDIwLCA2MDAsIDQwMCk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0geCB4IG9mZnNldFxuICAgICAqIEBwYXJhbSB5IHkgb2Zmc2V0XG4gICAgICogQHBhcmFtIHcgd2lkdGhcbiAgICAgKiBAcGFyYW0gaCBoZWlnaHRcbiAgICAgKi9cbiAgICB1cGRhdGVTdWJJbWFnZSh4OiBudW1iZXIsIHk6IG51bWJlciwgdzogbnVtYmVyLCBoOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHJldHVybjtcblxuICAgICAgICBjb25zdCBpbWFnZSA9IHRoaXMuX2ltYWdlSW5kZXg7XG4gICAgICAgIGlmICghaW1hZ2UpIHJldHVybjtcblxuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QganNJbWFnZUluZGV4ID0gd2FzbS5fd2xfaW1hZ2VfZ2V0X2pzSW1hZ2VfaW5kZXgoaW1hZ2UpO1xuXG4gICAgICAgIC8qIExhenkgaW5pdGlhbGl6ZSB0ZW1wIGNhbnZhcyAqL1xuICAgICAgICBpZiAoIXRlbXAyZCkge1xuICAgICAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgICAgIGlmICghY3R4KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgICAgICAnVGV4dHVyZS51cGRhdGVTdWJJbWFnZSgpOiBGYWlsZWQgdG8gb2J0YWluIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC4nXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRlbXAyZCA9IHtcbiAgICAgICAgICAgICAgICBjYW52YXMsXG4gICAgICAgICAgICAgICAgY3R4LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGltZyA9IHdhc20uX2ltYWdlc1tqc0ltYWdlSW5kZXhdO1xuICAgICAgICBpZiAoIWltZykgcmV0dXJuO1xuXG4gICAgICAgIC8qKiBAdG9kbzogSWYgdGhlIGltYWdlIGlzIGFuIGluc3RhbmNlIG9mIGNhbnZhcywgdGhpc1xuICAgICAgICAgKiBjYW4gYmUgc2tpcHBlZCBlbnRpcmVseS4gKi9cbiAgICAgICAgdGVtcDJkLmNhbnZhcy53aWR0aCA9IHc7XG4gICAgICAgIHRlbXAyZC5jYW52YXMuaGVpZ2h0ID0gaDtcbiAgICAgICAgdGVtcDJkLmN0eC5kcmF3SW1hZ2UoaW1nLCB4LCB5LCB3LCBoLCAwLCAwLCB3LCBoKTtcblxuICAgICAgICBjb25zdCB5T2Zmc2V0ID0gKChpbWcgYXMgSFRNTFZpZGVvRWxlbWVudCkudmlkZW9IZWlnaHQgPz8gaW1nLmhlaWdodCkgLSB5IC0gaDtcbiAgICAgICAgd2FzbS5faW1hZ2VzW2pzSW1hZ2VJbmRleF0gPSB0ZW1wMmQuY2FudmFzO1xuICAgICAgICB3YXNtLl93bF9yZW5kZXJlcl91cGRhdGVJbWFnZShpbWFnZSwgeCwgeU9mZnNldCk7XG4gICAgICAgIHdhc20uX2ltYWdlc1tqc0ltYWdlSW5kZXhdID0gaW1nO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlc3Ryb3kgYW5kIGZyZWUgdGhlIHRleHR1cmUncyB0ZXh0dXJlIGFsdGFzIHNwYWNlIGFuZCBtZW1vcnkuXG4gICAgICpcbiAgICAgKiBJdCBpcyBiZXN0IHByYWN0aWNlIHRvIHNldCB0aGUgdGV4dHVyZSB2YXJpYWJsZSB0byBgbnVsbGAgYWZ0ZXIgY2FsbGluZ1xuICAgICAqIGRlc3Ryb3kgdG8gcHJldmVudCBhY2NpZGVudGFsIHVzZSBvZiB0aGUgaW52YWxpZCB0ZXh0dXJlOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAgIHRleHR1cmUuZGVzdHJveSgpO1xuICAgICAqICAgdGV4dHVyZSA9IG51bGw7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC45LjBcbiAgICAgKi9cbiAgICBkZXN0cm95KCk6IHZvaWQge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfdGV4dHVyZV9kZXN0cm95KHRoaXMuX2lkKTtcbiAgICAgICAgdGhpcy5lbmdpbmUudGV4dHVyZXMuX2Rlc3Ryb3kodGhpcyk7XG4gICAgfVxuXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1RleHR1cmUoZGVzdHJveWVkKSc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGBUZXh0dXJlKCR7dGhpcy5faW5kZXh9KWA7XG4gICAgfVxuICAgIHByaXZhdGUgZ2V0IF9pbWFnZUluZGV4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfdGV4dHVyZV9nZXRfaW1hZ2VfaW5kZXgodGhpcy5faWQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBXcmFwcGVyIGFyb3VuZCBhIG5hdGl2ZSBhbmltYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBBbmltYXRpb24gZXh0ZW5kcyBTY2VuZVJlc291cmNlIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gaW5kZXggSW5kZXggaW4gdGhlIG1hbmFnZXJcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihob3N0OiBXb25kZXJsYW5kRW5naW5lIHwgUHJlZmFiID0gV0wsIGluZGV4OiBudW1iZXIpIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBob3N0IGluc3RhbmNlb2YgUHJlZmFiID8gaG9zdCA6IGhvc3Quc2NlbmU7XG4gICAgICAgIHN1cGVyKHNjZW5lIGFzIFByZWZhYiwgaW5kZXgpO1xuICAgIH1cblxuICAgIC8qKiBEdXJhdGlvbiBvZiB0aGlzIGFuaW1hdGlvbi4gKi9cbiAgICBnZXQgZHVyYXRpb24oKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2FuaW1hdGlvbl9nZXRfZHVyYXRpb24odGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKiBOdW1iZXIgb2YgdHJhY2tzIGluIHRoaXMgYW5pbWF0aW9uLiAqL1xuICAgIGdldCB0cmFja0NvdW50KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9hbmltYXRpb25fZ2V0X3RyYWNrQ291bnQodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsb25lIHRoaXMgYW5pbWF0aW9uIHJldGFyZ2V0ZWQgdG8gYSBuZXcgc2V0IG9mIG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBUaGUgY2xvbmUgc2hhcmVzIG1vc3Qgb2YgdGhlIGRhdGEgd2l0aCB0aGUgb3JpZ2luYWwgYW5kIGlzIHRoZXJlZm9yZVxuICAgICAqIGxpZ2h0LXdlaWdodC5cbiAgICAgKlxuICAgICAqICoqRXhwZXJpbWVudGFsOioqIFRoaXMgQVBJIG1pZ2h0IGNoYW5nZSBpbiB1cGNvbWluZyB2ZXJzaW9ucy5cbiAgICAgKlxuICAgICAqIElmIHJldGFyZ2V0aW5nIHRvIHtAbGluayBTa2lufSwgdGhlIGpvaW4gbmFtZXMgd2lsbCBiZSB1c2VkIHRvIGRldGVybWluZSBhIG1hcHBpbmdcbiAgICAgKiBmcm9tIHRoZSBwcmV2aW91cyBza2luIHRvIHRoZSBuZXcgc2tpbi4gVGhlIHNvdXJjZSBza2luIHdpbGwgYmUgcmV0cmlldmVkIGZyb21cbiAgICAgKiB0aGUgZmlyc3QgdHJhY2sgaW4gdGhlIGFuaW1hdGlvbiB0aGF0IHRhcmdldHMgYSBqb2ludC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuZXdUYXJnZXRzIE5ldyB0YXJnZXRzIHBlciB0cmFjay4gRXhwZWN0ZWQgdG8gaGF2ZVxuICAgICAqICAgICAge0BsaW5rIEFuaW1hdGlvbiN0cmFja0NvdW50fSBlbGVtZW50cyBvciB0byBiZSBhIHtAbGluayBTa2lufS5cbiAgICAgKiBAcmV0dXJucyBUaGUgcmV0YXJnZXRlZCBjbG9uZSBvZiB0aGlzIGFuaW1hdGlvbi5cbiAgICAgKi9cbiAgICByZXRhcmdldChuZXdUYXJnZXRzOiBPYmplY3QzRFtdIHwgU2tpbik6IEFuaW1hdGlvbiB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBpZiAobmV3VGFyZ2V0cyBpbnN0YW5jZW9mIFNraW4pIHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gd2FzbS5fd2xfYW5pbWF0aW9uX3JldGFyZ2V0VG9Ta2luKHRoaXMuX2lkLCBuZXdUYXJnZXRzLl9pZCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2NlbmUuYW5pbWF0aW9ucy53cmFwKGluZGV4KSE7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmV3VGFyZ2V0cy5sZW5ndGggIT0gdGhpcy50cmFja0NvdW50KSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcbiAgICAgICAgICAgICAgICAnRXhwZWN0ZWQgJyArXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJhY2tDb3VudC50b1N0cmluZygpICtcbiAgICAgICAgICAgICAgICAgICAgJyB0YXJnZXRzLCBidXQgZ290ICcgK1xuICAgICAgICAgICAgICAgICAgICBuZXdUYXJnZXRzLmxlbmd0aC50b1N0cmluZygpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX21hbGxvYygyICogbmV3VGFyZ2V0cy5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld1RhcmdldHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IG9iamVjdDNkID0gbmV3VGFyZ2V0c1tpXTtcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuYXNzZXJ0T3JpZ2luKG9iamVjdDNkKTtcbiAgICAgICAgICAgIC8qIFVzZSBsb2NhbCBpZCBoZXJlIGFuZCAqKm5vdCoqIHBhY2tlZCBpZCwgYmVjYXVzZSB0aGUgV0FTTVxuICAgICAgICAgICAgICogdGFrZXMgb3duZXJzaGlwIGFuZCByZWludGVycHJldHMgdGhlIGlkcy4gKi9cbiAgICAgICAgICAgIHdhc20uSEVBUFUxNlsocHRyID4+PiAxKSArIGldID0gbmV3VGFyZ2V0c1tpXS5vYmplY3RJZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbmRleCA9IHdhc20uX3dsX2FuaW1hdGlvbl9yZXRhcmdldCh0aGlzLl9pZCwgcHRyKTtcbiAgICAgICAgd2FzbS5fZnJlZShwdHIpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLl9zY2VuZS5hbmltYXRpb25zLndyYXAoaW5kZXgpITtcbiAgICB9XG5cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAnQW5pbWF0aW9uKGRlc3Ryb3llZCknO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgQW5pbWF0aW9uKCR7dGhpcy5faW5kZXh9KWA7XG4gICAgfVxufVxuXG4vKipcbiAqIFNjZW5lIGdyYXBoIG9iamVjdC5cbiAqXG4gKiBOb2RlIGluIHRoZSBzY2VuZSBncmFwaCBvciBcImVudGl0eVwiLiBDb25zaXN0cyBvZiB0cmFuc2Zvcm1hdGlvbiBhbmQgYSByZWZlcmVuY2VcbiAqIHRvIGl0cyBwYXJlbnQgb2JqZWN0LiBVc3VhbGx5IGhvbGRzIGNvbXBvbmVudHMgYW5kIGlzIGFjY2Vzc2libGUgYnkgY29tcG9uZW50c1xuICogdGhyb3VnaCB7QGxpbmsgQ29tcG9uZW50I29iamVjdH0uXG4gKlxuICogT2JqZWN0cyBhcmUgc3RvcmVkIGluIGEgZGF0YSBvcmllbnRlZCBtYW5uZXIgaW5zaWRlIFdlYkFzc2VtYmx5IG1lbW9yeS4gVGhpcyBjbGFzc1xuICogaXMgYSBKYXZhU2NyaXB0IEFQSSB3cmFwcGVyIGFyb3VuZCB0aGlzIG1lbW9yeSBmb3IgbW9yZSBjb252ZW5pZW50IHVzZSBpblxuICogY29tcG9uZW50cy5cbiAqXG4gKiBPYmplY3RzIGNhbiBiZSBjcmVhdGVkIGFuZCBhZGRlZCB0byBhIHNjZW5lIHRocm91Z2gge0BsaW5rIFByZWZhYi5hZGRPYmplY3R9OlxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCBwYXJlbnQgPSBzY2VuZS5hZGRPYmplY3QoKTtcbiAqIHBhcmVudC5uYW1lID0gJ3BhcmVudGAnO1xuICogY29uc3QgY2hpbGQgPSBzY2VuZS5hZGRPYmplY3QocGFyZW50KTtcbiAqIGNoaWxkLm5hbWUgPSAnY2hpbGRgJztcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgT2JqZWN0M0Qge1xuICAgIC8qKlxuICAgICAqIFBhY2tlZCBvYmplY3QgaWQsIGNvbnRhaW5pbmcgc2NlbmUgaW5kZXggYW5kIGxvY2FsIGlkLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHJlYWRvbmx5IF9pZDogbnVtYmVyID0gLTE7XG4gICAgLyoqIE9iamVjdCBpZCwgcmVsYXRpdmUgdG8gdGhlIHNjZW5lIG1hbmFnZXIuIEBoaWRkZW4gKi9cbiAgICByZWFkb25seSBfbG9jYWxJZDogbnVtYmVyID0gLTE7XG5cbiAgICAvKiogU2NlbmUgaW5zdGFuY2UuIEBoaWRkZW4gKi9cbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgX3NjZW5lOiBQcmVmYWI7XG4gICAgLyoqIFdvbmRlcmxhbmQgRW5naW5lIGluc3RhbmNlLiBAaGlkZGVuICovXG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IF9lbmdpbmU6IFdvbmRlcmxhbmRFbmdpbmU7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gbyBPYmplY3QgaWQgdG8gd3JhcC5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIE9iamVjdHMgbXVzdCBiZSBvYnRhaW5lZCB2aWEge0BsaW5rIFNjZW5lLmFkZE9iamVjdH0gb3Ige0BsaW5rIFNjZW5lLndyYXB9OlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAvLyBDcmVhdGUgYSBuZXcgb2JqZWN0LlxuICAgICAqIGNvbnN0IG9iaiA9IHNjZW5lLmFkZE9iamVjdCgpO1xuICAgICAqXG4gICAgICogLy8gV3JhcCBhbiBvYmplY3QgdXNpbmcgaXRzIGlkLiBUaGUgaWQgbXVzdCBiZSB2YWxpZC5cbiAgICAgKiBjb25zdCBvYmogPSBzY2VuZS53cmFwKDApO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNjZW5lOiBXb25kZXJsYW5kRW5naW5lIHwgUHJlZmFiLCBpZDogbnVtYmVyKSB7XG4gICAgICAgIHNjZW5lID0gc2NlbmUgaW5zdGFuY2VvZiBQcmVmYWIgPyBzY2VuZSA6IHNjZW5lLnNjZW5lO1xuICAgICAgICB0aGlzLl9sb2NhbElkID0gaWQ7XG4gICAgICAgIHRoaXMuX2lkID0gKHNjZW5lLl9pbmRleCA8PCAyMikgfCBpZDtcbiAgICAgICAgdGhpcy5fc2NlbmUgPSBzY2VuZTtcbiAgICAgICAgLyoqIEB0b2RvOiBSZW1vdmUgYW5kIG9ubHkga2VlcCBnZXR0ZXIuICovXG4gICAgICAgIHRoaXMuX2VuZ2luZSA9IHNjZW5lLmVuZ2luZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBOYW1lIG9mIHRoZSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBVc2VmdWwgZm9yIGlkZW50aWZ5aW5nIG9iamVjdHMgZHVyaW5nIGRlYnVnZ2luZy5cbiAgICAgKi9cbiAgICBnZXQgbmFtZSgpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHJldHVybiB3YXNtLlVURjhUb1N0cmluZyh3YXNtLl93bF9vYmplY3RfbmFtZSh0aGlzLl9pZCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgb2JqZWN0J3MgbmFtZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuZXdOYW1lIFRoZSBuZXcgbmFtZSB0byBzZXQuXG4gICAgICovXG4gICAgc2V0IG5hbWUobmV3TmFtZTogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3NldF9uYW1lKHRoaXMuX2lkLCB3YXNtLnRlbXBVVEY4KG5ld05hbWUpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXJlbnQgb2YgdGhpcyBvYmplY3Qgb3IgYG51bGxgIGlmIHBhcmVudGVkIHRvIHJvb3QuXG4gICAgICovXG4gICAgZ2V0IHBhcmVudCgpOiBPYmplY3QzRCB8IG51bGwge1xuICAgICAgICBjb25zdCBwID0gdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9wYXJlbnQodGhpcy5faWQpO1xuICAgICAgICByZXR1cm4gcCA9PT0gMCA/IG51bGwgOiB0aGlzLl9zY2VuZS53cmFwKHApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8ge0BsaW5rIE9iamVjdDNELmdldENoaWxkcmVufS5cbiAgICAgKlxuICAgICAqIEBub3RlIFByZWZlciB0byB1c2Uge0BsaW5rIE9iamVjdDNELmdldENoaWxkcmVufSBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICovXG4gICAgZ2V0IGNoaWxkcmVuKCk6IE9iamVjdDNEW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRDaGlsZHJlbigpO1xuICAgIH1cblxuICAgIC8qKiBUaGUgbnVtYmVyIG9mIGNoaWxkcmVuIG9mIHRoaXMgb2JqZWN0LiAqL1xuICAgIGdldCBjaGlsZHJlbkNvdW50KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X2dldF9jaGlsZHJlbl9jb3VudCh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVwYXJlbnQgb2JqZWN0IHRvIGdpdmVuIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBub3RlIFJlcGFyZW50aW5nIGlzIG5vdCB0cml2aWFsIGFuZCBtaWdodCBoYXZlIGEgbm90aWNlYWJsZSBwZXJmb3JtYW5jZSBpbXBhY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmV3UGFyZW50IE5ldyBwYXJlbnQgb3IgYG51bGxgIHRvIHBhcmVudCB0byByb290XG4gICAgICovXG4gICAgc2V0IHBhcmVudChuZXdQYXJlbnQ6IE9iamVjdDNEIHwgdW5kZWZpbmVkIHwgbnVsbCkge1xuICAgICAgICBpZiAodGhpcy5tYXJrZWREZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0clRoaXMgPSB0aGlzLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBjb25zdCBzdHJQYXJlbnQgPSBuZXdQYXJlbnQgPyBuZXdQYXJlbnQgOiAncm9vdCc7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgYEZhaWxlZCB0byBhdHRhY2ggJHtzdHJUaGlzfSB0byAke3N0clBhcmVudH0uICR7c3RyVGhpc30gaXMgbWFya2VkIGFzIGRlc3Ryb3llZC5gXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKG5ld1BhcmVudD8ubWFya2VkRGVzdHJveWVkKSB7XG4gICAgICAgICAgICBjb25zdCBzdHJQYXJlbnQgPSBuZXdQYXJlbnQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICBgRmFpbGVkIHRvIGF0dGFjaCAke3RoaXN9IHRvICR7c3RyUGFyZW50fS4gJHtzdHJQYXJlbnR9IGlzIG1hcmtlZCBhcyBkZXN0cm95ZWQuYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNjZW5lLmFzc2VydE9yaWdpbihuZXdQYXJlbnQpO1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3NldF9wYXJlbnQoXG4gICAgICAgICAgICB0aGlzLl9pZCxcbiAgICAgICAgICAgIG5ld1BhcmVudCA9PSBudWxsID8gMCA6IG5ld1BhcmVudC5faWRcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKiogTG9jYWwgb2JqZWN0IGlkIGluIHRoZSBzY2VuZSBtYW5hZ2VyLiAqL1xuICAgIGdldCBvYmplY3RJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvY2FsSWQ7XG4gICAgfVxuXG4gICAgLyoqIFNjZW5lIGluc3RhbmNlLiAqL1xuICAgIGdldCBzY2VuZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjZW5lO1xuICAgIH1cblxuICAgIC8qKiBIb3N0aW5nIGVuZ2luZSBpbnN0YW5jZS4gKi9cbiAgICBnZXQgZW5naW5lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5naW5lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhbiBvYmplY3QgYXMgYSBjaGlsZCBvZiB0aGlzIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBuZXdseSBjcmVhdGVkIG9iamVjdC5cbiAgICAgKi9cbiAgICBhZGRDaGlsZCgpOiBPYmplY3QzRCB7XG4gICAgICAgIGNvbnN0IG9iamVjdElkID0gdGhpcy5lbmdpbmUud2FzbS5fd2xfc2NlbmVfYWRkX29iamVjdCh0aGlzLnNjZW5lLl9pbmRleCwgdGhpcy5faWQpO1xuICAgICAgICBjb25zdCBvYmogPSB0aGlzLnNjZW5lLndyYXAob2JqZWN0SWQpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsb25lIHRoaXMgaGllcmFyY2h5IGludG8gYSBuZXcgb25lLlxuICAgICAqXG4gICAgICogQ2xvbmluZyBjb3BpZXMgdGhlIGhpZXJhcmNoeSBzdHJ1Y3R1cmUsIG9iamVjdCBuYW1lcyxcbiAgICAgKiBhcyB3ZWxsIGFzIGNvbXBvbmVudHMuXG4gICAgICpcbiAgICAgKiBKYXZhU2NyaXB0IGNvbXBvbmVudHMgYXJlIGNsb25lZCB1c2luZyB7QGxpbmsgQ29tcG9uZW50LmNvcHl9LiBZb3UgY2FuXG4gICAgICogb3ZlcnJpZGUgdGhpcyBtZXRob2QgaW4geW91ciBjb21wb25lbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhcmVudCBUaGUgcGFyZW50IGZvciB0aGUgY2xvbmVkIGhpZXJhcmNoeSBvciBgbnVsbGAgdG8gY2xvbmVcbiAgICAgKiAgICAgaW50byB0aGUgc2NlbmUgcm9vdC4gRGVmYXVsdHMgdG8gYG51bGxgLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIGNsb25lIG9mIHRoaXMgb2JqZWN0LlxuICAgICAqL1xuICAgIGNsb25lKHBhcmVudDogT2JqZWN0M0QgfCBudWxsID0gbnVsbCk6IE9iamVjdDNEIHtcbiAgICAgICAgdGhpcy5zY2VuZS5hc3NlcnRPcmlnaW4ocGFyZW50KTtcbiAgICAgICAgY29uc3QgZW5naW5lID0gdGhpcy5fZW5naW5lO1xuICAgICAgICBjb25zdCBpZCA9IGVuZ2luZS53YXNtLl93bF9vYmplY3RfY2xvbmUodGhpcy5faWQsIHBhcmVudCA/IHBhcmVudC5faWQgOiAwKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjZW5lLndyYXAoaWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoaWxkcmVuIG9mIHRoaXMgb2JqZWN0LlxuICAgICAqXG4gICAgICogQG5vdGUgQ2hpbGQgb3JkZXIgaXMgKip1bmRlZmluZWQqKi4gTm8gYXNzdW1wdGlvbnMgc2hvdWxkIGJlIG1hZGVcbiAgICAgKiBhYm91dCB0aGUgaW5kZXggb2YgYSBzcGVjaWZpYyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBJZiB5b3UgbmVlZCB0byBhY2Nlc3MgYSBzcGVjaWZpYyBjaGlsZCBvZiB0aGlzIG9iamVjdCwgeW91IGNhblxuICAgICAqIHVzZSB7QGxpbmsgT2JqZWN0M0QuZmluZEJ5TmFtZX0uXG4gICAgICpcbiAgICAgKiBXaGVuIHRoZSBvYmplY3QgZXhpc3RzIGluIHRoZSBzY2VuZSBhdCBlZGl0b3IgdGltZSwgcHJlZmVyIHBhc3NpbmcgaXQgYXNcbiAgICAgKiBhIGNvbXBvbmVudCBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBub3RlIFdoZW4gcHJvdmlkaW5nIGFuIG91dHB1dCBhcnJheSwgb25seSBgdGhpcy5jaGlsZHJlbkNvdW50YCBlbGVtZW50cyB3aWxsIGJlIHdyaXR0ZW4uXG4gICAgICogVGhlIHJlc3Qgb2YgdGhlIGFycmF5IHdpbGwgbm90IGJlIG1vZGlmaWVkIGJ5IHRoaXMgbWV0aG9kLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBEZXN0aW5hdGlvbiBhcnJheSwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCBgdGhpcy5jaGlsZHJlbkNvdW50YCBlbGVtZW50cy5cbiAgICAgKiBAcmV0dXJucyBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqL1xuICAgIGdldENoaWxkcmVuKG91dDogT2JqZWN0M0RbXSA9IG5ldyBBcnJheSh0aGlzLmNoaWxkcmVuQ291bnQpKTogT2JqZWN0M0RbXSB7XG4gICAgICAgIGNvbnN0IGNoaWxkcmVuQ291bnQgPSB0aGlzLmNoaWxkcmVuQ291bnQ7XG4gICAgICAgIGlmIChjaGlsZHJlbkNvdW50ID09PSAwKSByZXR1cm4gb3V0O1xuXG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5yZXF1aXJlVGVtcE1lbShjaGlsZHJlbkNvdW50ICogMik7XG5cbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9nZXRfY2hpbGRyZW4oXG4gICAgICAgICAgICB0aGlzLl9pZCxcbiAgICAgICAgICAgIHdhc20uX3RlbXBNZW0sXG4gICAgICAgICAgICB3YXNtLl90ZW1wTWVtU2l6ZSA+PiAxXG4gICAgICAgICk7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbkNvdW50OyArK2kpIHtcbiAgICAgICAgICAgIG91dFtpXSA9IHRoaXMuX3NjZW5lLndyYXAod2FzbS5fdGVtcE1lbVVpbnQxNltpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNldCBsb2NhbCB0cmFuc2Zvcm1hdGlvbiAodHJhbnNsYXRpb24sIHJvdGF0aW9uIGFuZCBzY2FsaW5nKSB0byBpZGVudGl0eS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICByZXNldFRyYW5zZm9ybSgpOiB0aGlzIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9yZXNldF90cmFuc2xhdGlvbl9yb3RhdGlvbih0aGlzLl9pZCk7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfcmVzZXRfc2NhbGluZyh0aGlzLl9pZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlc2V0IGxvY2FsIHBvc2l0aW9uIGFuZCByb3RhdGlvbiB0byBpZGVudGl0eS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICByZXNldFBvc2l0aW9uUm90YXRpb24oKTogdGhpcyB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfcmVzZXRfdHJhbnNsYXRpb25fcm90YXRpb24odGhpcy5faWQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKiogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0QucmVzZXRQb3NpdGlvblJvdGF0aW9ufSBpbnN0ZWFkLiAqL1xuICAgIHJlc2V0VHJhbnNsYXRpb25Sb3RhdGlvbigpOiB0aGlzIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzZXRQb3NpdGlvblJvdGF0aW9uKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzZXQgbG9jYWwgcm90YXRpb24sIGtlZXAgdHJhbnNsYXRpb24uXG4gICAgICpcbiAgICAgKiBAbm90ZSBUbyByZXNldCBib3RoIHJvdGF0aW9uIGFuZCB0cmFuc2xhdGlvbiwgcHJlZmVyXG4gICAgICogICAgICAge0BsaW5rIHJlc2V0VHJhbnNsYXRpb25Sb3RhdGlvbn0uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgcmVzZXRSb3RhdGlvbigpOiB0aGlzIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9yZXNldF9yb3RhdGlvbih0aGlzLl9pZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlc2V0IGxvY2FsIHRyYW5zbGF0aW9uLCBrZWVwIHJvdGF0aW9uLlxuICAgICAqXG4gICAgICogQG5vdGUgVG8gcmVzZXQgYm90aCByb3RhdGlvbiBhbmQgdHJhbnNsYXRpb24sIHByZWZlclxuICAgICAqICAgICAgIHtAbGluayByZXNldFRyYW5zbGF0aW9uUm90YXRpb259LlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHJlc2V0UG9zaXRpb24oKTogdGhpcyB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfcmVzZXRfdHJhbnNsYXRpb24odGhpcy5faWQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKiogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0QucmVzZXRQb3NpdGlvbn0gaW5zdGVhZC4gKi9cbiAgICByZXNldFRyYW5zbGF0aW9uKCk6IHRoaXMge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXNldFBvc2l0aW9uKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzZXQgbG9jYWwgc2NhbGluZyB0byBpZGVudGl0eSAoYGBbMS4wLCAxLjAsIDEuMF1gYCkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgcmVzZXRTY2FsaW5nKCk6IHRoaXMge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3Jlc2V0X3NjYWxpbmcodGhpcy5faWQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKiogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0QudHJhbnNsYXRlTG9jYWx9IGluc3RlYWQuICovXG4gICAgdHJhbnNsYXRlKHY6IFJlYWRvbmx5PE51bWJlckFycmF5Pik6IHRoaXMge1xuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2xhdGVMb2NhbCh2KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2xhdGUgb2JqZWN0IGJ5IGEgdmVjdG9yIGluIHRoZSBwYXJlbnQncyBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2IFZlY3RvciB0byB0cmFuc2xhdGUgYnkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgdHJhbnNsYXRlTG9jYWwodjogUmVhZG9ubHk8TnVtYmVyQXJyYXk+KTogdGhpcyB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfdHJhbnNsYXRlKHRoaXMuX2lkLCB2WzBdLCB2WzFdLCB2WzJdKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJhbnNsYXRlIG9iamVjdCBieSBhIHZlY3RvciBpbiBvYmplY3Qgc3BhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBWZWN0b3IgdG8gdHJhbnNsYXRlIGJ5LlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHRyYW5zbGF0ZU9iamVjdCh2OiBSZWFkb25seTxOdW1iZXJBcnJheT4pOiB0aGlzIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF90cmFuc2xhdGVfb2JqKHRoaXMuX2lkLCB2WzBdLCB2WzFdLCB2WzJdKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJhbnNsYXRlIG9iamVjdCBieSBhIHZlY3RvciBpbiB3b3JsZCBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2IFZlY3RvciB0byB0cmFuc2xhdGUgYnkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgdHJhbnNsYXRlV29ybGQodjogUmVhZG9ubHk8TnVtYmVyQXJyYXk+KTogdGhpcyB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfdHJhbnNsYXRlX3dvcmxkKHRoaXMuX2lkLCB2WzBdLCB2WzFdLCB2WzJdKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnJvdGF0ZUF4aXNBbmdsZURlZ0xvY2FsfSBpbnN0ZWFkLiAqL1xuICAgIHJvdGF0ZUF4aXNBbmdsZURlZyhhOiBSZWFkb25seTxOdW1iZXJBcnJheT4sIGQ6IG51bWJlcik6IHRoaXMge1xuICAgICAgICB0aGlzLnJvdGF0ZUF4aXNBbmdsZURlZ0xvY2FsKGEsIGQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSb3RhdGUgYXJvdW5kIGdpdmVuIGF4aXMgYnkgZ2l2ZW4gYW5nbGUgKGRlZ3JlZXMpIGluIGxvY2FsIHNwYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGEgVmVjdG9yIHJlcHJlc2VudGluZyB0aGUgcm90YXRpb24gYXhpcy5cbiAgICAgKiBAcGFyYW0gZCBBbmdsZSBpbiBkZWdyZWVzLlxuICAgICAqXG4gICAgICogQG5vdGUgSWYgdGhlIG9iamVjdCBpcyB0cmFuc2xhdGVkIHRoZSByb3RhdGlvbiB3aWxsIGJlIGFyb3VuZFxuICAgICAqICAgICB0aGUgcGFyZW50LiBUbyByb3RhdGUgYXJvdW5kIHRoZSBvYmplY3Qgb3JpZ2luLCB1c2VcbiAgICAgKiAgICAge0BsaW5rIHJvdGF0ZUF4aXNBbmdsZURlZ09iamVjdH1cbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIHJvdGF0ZUF4aXNBbmdsZVJhZH1cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICByb3RhdGVBeGlzQW5nbGVEZWdMb2NhbChhOiBSZWFkb25seTxOdW1iZXJBcnJheT4sIGQ6IG51bWJlcik6IHRoaXMge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3JvdGF0ZV9heGlzX2FuZ2xlKHRoaXMuX2lkLCBhWzBdLCBhWzFdLCBhWzJdLCBkKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnJvdGF0ZUF4aXNBbmdsZVJhZExvY2FsfSBpbnN0ZWFkLiAqL1xuICAgIHJvdGF0ZUF4aXNBbmdsZVJhZChhOiBSZWFkb25seTxOdW1iZXJBcnJheT4sIGQ6IG51bWJlcik6IHRoaXMge1xuICAgICAgICByZXR1cm4gdGhpcy5yb3RhdGVBeGlzQW5nbGVSYWRMb2NhbChhLCBkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSb3RhdGUgYXJvdW5kIGdpdmVuIGF4aXMgYnkgZ2l2ZW4gYW5nbGUgKHJhZGlhbnMpIGluIGxvY2FsIHNwYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGEgVmVjdG9yIHJlcHJlc2VudGluZyB0aGUgcm90YXRpb24gYXhpcy5cbiAgICAgKiBAcGFyYW0gZCBBbmdsZSBpbiByYWRpYW5zLlxuICAgICAqXG4gICAgICogQG5vdGUgSWYgdGhlIG9iamVjdCBpcyB0cmFuc2xhdGVkIHRoZSByb3RhdGlvbiB3aWxsIGJlIGFyb3VuZFxuICAgICAqICAgICB0aGUgcGFyZW50LiBUbyByb3RhdGUgYXJvdW5kIHRoZSBvYmplY3Qgb3JpZ2luLCB1c2VcbiAgICAgKiAgICAge0BsaW5rIHJvdGF0ZUF4aXNBbmdsZURlZ09iamVjdH1cbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIHJvdGF0ZUF4aXNBbmdsZURlZ31cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICByb3RhdGVBeGlzQW5nbGVSYWRMb2NhbChhOiBSZWFkb25seTxOdW1iZXJBcnJheT4sIGQ6IG51bWJlcik6IHRoaXMge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3JvdGF0ZV9heGlzX2FuZ2xlX3JhZCh0aGlzLl9pZCwgYVswXSwgYVsxXSwgYVsyXSwgZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJvdGF0ZSBhcm91bmQgZ2l2ZW4gYXhpcyBieSBnaXZlbiBhbmdsZSAoZGVncmVlcykgaW4gb2JqZWN0IHNwYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGEgVmVjdG9yIHJlcHJlc2VudGluZyB0aGUgcm90YXRpb24gYXhpcy5cbiAgICAgKiBAcGFyYW0gZCBBbmdsZSBpbiBkZWdyZWVzLlxuICAgICAqXG4gICAgICogRXF1aXZhbGVudCB0byBwcmVwZW5kaW5nIGEgcm90YXRpb24gcXVhdGVybmlvbiB0byB0aGUgb2JqZWN0J3NcbiAgICAgKiBsb2NhbCB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIHJvdGF0ZUF4aXNBbmdsZVJhZE9iamVjdH1cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICByb3RhdGVBeGlzQW5nbGVEZWdPYmplY3QoYTogUmVhZG9ubHk8TnVtYmVyQXJyYXk+LCBkOiBudW1iZXIpOiB0aGlzIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9yb3RhdGVfYXhpc19hbmdsZV9vYmoodGhpcy5faWQsIGFbMF0sIGFbMV0sIGFbMl0sIGQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSb3RhdGUgYXJvdW5kIGdpdmVuIGF4aXMgYnkgZ2l2ZW4gYW5nbGUgKHJhZGlhbnMpIGluIG9iamVjdCBzcGFjZVxuICAgICAqIEVxdWl2YWxlbnQgdG8gcHJlcGVuZGluZyBhIHJvdGF0aW9uIHF1YXRlcm5pb24gdG8gdGhlIG9iamVjdCdzXG4gICAgICogbG9jYWwgdHJhbnNmb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYSBWZWN0b3IgcmVwcmVzZW50aW5nIHRoZSByb3RhdGlvbiBheGlzXG4gICAgICogQHBhcmFtIGQgQW5nbGUgaW4gZGVncmVlc1xuICAgICAqXG4gICAgICogQHNlZSB7QGxpbmsgcm90YXRlQXhpc0FuZ2xlRGVnT2JqZWN0fVxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHJvdGF0ZUF4aXNBbmdsZVJhZE9iamVjdChhOiBSZWFkb25seTxOdW1iZXJBcnJheT4sIGQ6IG51bWJlcik6IHRoaXMge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3JvdGF0ZV9heGlzX2FuZ2xlX3JhZF9vYmooXG4gICAgICAgICAgICB0aGlzLl9pZCxcbiAgICAgICAgICAgIGFbMF0sXG4gICAgICAgICAgICBhWzFdLFxuICAgICAgICAgICAgYVsyXSxcbiAgICAgICAgICAgIGRcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnJvdGF0ZUxvY2FsfSBpbnN0ZWFkLiAqL1xuICAgIHJvdGF0ZShxOiBSZWFkb25seTxOdW1iZXJBcnJheT4pOiB0aGlzIHtcbiAgICAgICAgdGhpcy5yb3RhdGVMb2NhbChxKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUm90YXRlIGJ5IGEgcXVhdGVybmlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBxIHRoZSBRdWF0ZXJuaW9uIHRvIHJvdGF0ZSBieS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICByb3RhdGVMb2NhbChxOiBSZWFkb25seTxOdW1iZXJBcnJheT4pOiB0aGlzIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9yb3RhdGVfcXVhdCh0aGlzLl9pZCwgcVswXSwgcVsxXSwgcVsyXSwgcVszXSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJvdGF0ZSBieSBhIHF1YXRlcm5pb24gaW4gb2JqZWN0IHNwYWNlLlxuICAgICAqXG4gICAgICogRXF1aXZhbGVudCB0byBwcmVwZW5kaW5nIGEgcm90YXRpb24gcXVhdGVybmlvbiB0byB0aGUgb2JqZWN0J3NcbiAgICAgKiBsb2NhbCB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBxIHRoZSBRdWF0ZXJuaW9uIHRvIHJvdGF0ZSBieS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICByb3RhdGVPYmplY3QocTogUmVhZG9ubHk8TnVtYmVyQXJyYXk+KTogdGhpcyB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3Rfcm90YXRlX3F1YXRfb2JqKHRoaXMuX2lkLCBxWzBdLCBxWzFdLCBxWzJdLCBxWzNdKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnNjYWxlTG9jYWx9IGluc3RlYWQuICovXG4gICAgc2NhbGUodjogUmVhZG9ubHk8TnVtYmVyQXJyYXk+KTogdGhpcyB7XG4gICAgICAgIHRoaXMuc2NhbGVMb2NhbCh2KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2NhbGUgb2JqZWN0IGJ5IGEgdmVjdG9yIGluIG9iamVjdCBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2IFZlY3RvciB0byBzY2FsZSBieS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICBzY2FsZUxvY2FsKHY6IFJlYWRvbmx5PE51bWJlckFycmF5Pik6IHRoaXMge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3NjYWxlKHRoaXMuX2lkLCB2WzBdLCB2WzFdLCB2WzJdKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldFBvc2l0aW9uTG9jYWwoKTogRmxvYXQzMkFycmF5O1xuICAgIC8qKlxuICAgICAqIENvbXB1dGUgbG9jYWwgLyBvYmplY3Qgc3BhY2UgcG9zaXRpb24gZnJvbSB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgRGVzdGluYXRpb24gYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDMgZWxlbWVudHMuXG4gICAgICogQHJldHVybnMgVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBnZXRQb3NpdGlvbkxvY2FsPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBUKTogVDtcbiAgICBnZXRQb3NpdGlvbkxvY2FsKG91dDogTnVtYmVyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KDMpKTogTnVtYmVyQXJyYXkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIC8qIFRyYW5zbGF0aW9uIGlzIGRpZmZlcmVudCB0aGFuIHJvdGF0aW9uICYgc2NhbGluZy5cbiAgICAgICAgICogV2UgY2FuJ3Qgc2ltcGx5IHJlYWQgdGhlIG1lbW9yeS4gKi9cbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X2dldF90cmFuc2xhdGlvbl9sb2NhbCh0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuXG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldFRyYW5zbGF0aW9uTG9jYWwoKTogRmxvYXQzMkFycmF5O1xuICAgIC8qKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5nZXRQb3NpdGlvbkxvY2FsfSBpbnN0ZWFkLiAqL1xuICAgIGdldFRyYW5zbGF0aW9uTG9jYWw8VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQpOiBUO1xuICAgIGdldFRyYW5zbGF0aW9uTG9jYWwob3V0OiBOdW1iZXJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoMykpOiBOdW1iZXJBcnJheSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFBvc2l0aW9uTG9jYWwob3V0KTtcbiAgICB9XG5cbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0UG9zaXRpb25Xb3JsZCgpOiBGbG9hdDMyQXJyYXk7XG4gICAgLyoqXG4gICAgICogQ29tcHV0ZSB3b3JsZCBzcGFjZSBwb3NpdGlvbiBmcm9tIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogTWF5IHJlY29tcHV0ZSB0cmFuc2Zvcm1hdGlvbnMgb2YgdGhlIGhpZXJhcmNoeSBvZiB0aGlzIG9iamVjdCxcbiAgICAgKiBpZiB0aGV5IHdlcmUgY2hhbmdlZCBieSBKYXZhU2NyaXB0IGNvbXBvbmVudHMgdGhpcyBmcmFtZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgRGVzdGluYXRpb24gYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDMgZWxlbWVudHMuXG4gICAgICogQHJldHVybiBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqL1xuICAgIGdldFBvc2l0aW9uV29ybGQ8VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQpOiBUO1xuICAgIGdldFBvc2l0aW9uV29ybGQob3V0OiBOdW1iZXJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoMykpOiBOdW1iZXJBcnJheSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgLyogVHJhbnNsYXRpb24gaXMgZGlmZmVyZW50IHRoYW4gcm90YXRpb24gJiBzY2FsaW5nLlxuICAgICAgICAgKiBXZSBjYW4ndCBzaW1wbHkgcmVhZCB0aGUgbWVtb3J5LiAqL1xuICAgICAgICB3YXNtLl93bF9vYmplY3RfZ2V0X3RyYW5zbGF0aW9uX3dvcmxkKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsyXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0VHJhbnNsYXRpb25Xb3JsZCgpOiBGbG9hdDMyQXJyYXk7XG4gICAgLyoqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELmdldFBvc2l0aW9uV29ybGR9IGluc3RlYWQuICovXG4gICAgZ2V0VHJhbnNsYXRpb25Xb3JsZDxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCk6IFQ7XG4gICAgZ2V0VHJhbnNsYXRpb25Xb3JsZChvdXQ6IE51bWJlckFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSgzKSk6IE51bWJlckFycmF5IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UG9zaXRpb25Xb3JsZChvdXQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBsb2NhbCAvIG9iamVjdCBzcGFjZSBwb3NpdGlvbi5cbiAgICAgKlxuICAgICAqIENvbmNhdGVuYXRlcyBhIG5ldyB0cmFuc2xhdGlvbiBkdWFsIHF1YXRlcm5pb24gb250byB0aGUgZXhpc3Rpbmcgcm90YXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBOZXcgbG9jYWwgcG9zaXRpb24gYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDMgZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgc2V0UG9zaXRpb25Mb2NhbCh2OiBSZWFkb25seTxOdW1iZXJBcnJheT4pOiB0aGlzIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9zZXRfdHJhbnNsYXRpb25fbG9jYWwodGhpcy5faWQsIHZbMF0sIHZbMV0sIHZbMl0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKiogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0Quc2V0UG9zaXRpb25Mb2NhbH0gaW5zdGVhZC4gKi9cbiAgICBzZXRUcmFuc2xhdGlvbkxvY2FsKHY6IFJlYWRvbmx5PE51bWJlckFycmF5Pik6IHRoaXMge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRQb3NpdGlvbkxvY2FsKHYpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB3b3JsZCBzcGFjZSBwb3NpdGlvbi5cbiAgICAgKlxuICAgICAqIEFwcGxpZXMgdGhlIGludmVyc2UgcGFyZW50IHRyYW5zZm9ybSB3aXRoIGEgbmV3IHRyYW5zbGF0aW9uIGR1YWwgcXVhdGVybmlvblxuICAgICAqIHdoaWNoIGlzIGNvbmNhdGVuYXRlZCBvbnRvIHRoZSBleGlzdGluZyByb3RhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2IE5ldyB3b3JsZCBwb3NpdGlvbiBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgMyBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICBzZXRQb3NpdGlvbldvcmxkKHY6IFJlYWRvbmx5PE51bWJlckFycmF5Pik6IHRoaXMge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3NldF90cmFuc2xhdGlvbl93b3JsZCh0aGlzLl9pZCwgdlswXSwgdlsxXSwgdlsyXSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5zZXRQb3NpdGlvbldvcmxkfSBpbnN0ZWFkLiAqL1xuICAgIHNldFRyYW5zbGF0aW9uV29ybGQodjogUmVhZG9ubHk8TnVtYmVyQXJyYXk+KTogdGhpcyB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldFBvc2l0aW9uV29ybGQodik7XG4gICAgfVxuXG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldFNjYWxpbmdMb2NhbCgpOiBGbG9hdDMyQXJyYXk7XG4gICAgLyoqXG4gICAgICogTG9jYWwgLyBvYmplY3Qgc3BhY2Ugc2NhbGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgRGVzdGluYXRpb24gYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDMgZWxlbWVudHMuXG4gICAgICogQHJldHVybiBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgZ2V0U2NhbGluZ0xvY2FsPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBUKTogVDtcbiAgICBnZXRTY2FsaW5nTG9jYWwob3V0OiBOdW1iZXJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoMykpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9vYmplY3Rfc2NhbGluZ19sb2NhbCh0aGlzLl9pZCkgLyA0OyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgb3V0WzBdID0gd2FzbS5IRUFQRjMyW3B0cl07XG4gICAgICAgIG91dFsxXSA9IHdhc20uSEVBUEYzMltwdHIgKyAxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5IRUFQRjMyW3B0ciArIDJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBsb2NhbCAvIG9iamVjdCBzcGFjZSBzY2FsaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHYgTmV3IGxvY2FsIHNjYWxpbmcgYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDMgZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgc2V0U2NhbGluZ0xvY2FsKHY6IFJlYWRvbmx5PE51bWJlckFycmF5Pik6IHRoaXMge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3NldF9zY2FsaW5nX2xvY2FsKHRoaXMuX2lkLCB2WzBdLCB2WzFdLCB2WzJdKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldFNjYWxpbmdXb3JsZCgpOiBGbG9hdDMyQXJyYXk7XG4gICAgLyoqXG4gICAgICogV29ybGQgc3BhY2Ugc2NhbGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgRGVzdGluYXRpb24gYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDMgZWxlbWVudHMuXG4gICAgICogQHJldHVybiBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgZ2V0U2NhbGluZ1dvcmxkPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBUKTogVDtcbiAgICBnZXRTY2FsaW5nV29ybGQob3V0OiBOdW1iZXJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoMykpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9vYmplY3Rfc2NhbGluZ193b3JsZCh0aGlzLl9pZCkgLyA0OyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgb3V0WzBdID0gd2FzbS5IRUFQRjMyW3B0cl07XG4gICAgICAgIG91dFsxXSA9IHdhc20uSEVBUEYzMltwdHIgKyAxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5IRUFQRjMyW3B0ciArIDJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBXb3JsZCBzcGFjZSBzY2FsaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHYgTmV3IHdvcmxkIHNjYWxpbmcgYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDMgZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgc2V0U2NhbGluZ1dvcmxkKHY6IFJlYWRvbmx5PE51bWJlckFycmF5Pik6IHRoaXMge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3NldF9zY2FsaW5nX3dvcmxkKHRoaXMuX2lkLCB2WzBdLCB2WzFdLCB2WzJdKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldFJvdGF0aW9uTG9jYWwoKTogRmxvYXQzMkFycmF5O1xuICAgIC8qKlxuICAgICAqIExvY2FsIHNwYWNlIHJvdGF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBEZXN0aW5hdGlvbiBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgNCBlbGVtZW50cy5cbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBnZXRSb3RhdGlvbkxvY2FsPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBUKTogVDtcbiAgICBnZXRSb3RhdGlvbkxvY2FsKG91dDogTnVtYmVyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KDQpKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfb2JqZWN0X3RyYW5zX2xvY2FsKHRoaXMuX2lkKSAvIDQ7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICAvKiBUaGUgZmlyc3QgNCBmbG9hdHMgcmVwcmVzZW50IHRoZSByb3RhdGlvbiBxdWF0ZXJuaW9uLiAqL1xuICAgICAgICBvdXRbMF0gPSB3YXNtLkhFQVBGMzJbcHRyXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5IRUFQRjMyW3B0ciArIDFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMl07XG4gICAgICAgIG91dFszXSA9IHdhc20uSEVBUEYzMltwdHIgKyAzXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgbG9jYWwgc3BhY2Ugcm90YXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBOZXcgd29ybGQgcm90YXRpb24gYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDQgZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgc2V0Um90YXRpb25Mb2NhbCh2OiBSZWFkb25seTxOdW1iZXJBcnJheT4pOiB0aGlzIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9zZXRfcm90YXRpb25fbG9jYWwodGhpcy5faWQsIHZbMF0sIHZbMV0sIHZbMl0sIHZbM10pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0Um90YXRpb25Xb3JsZCgpOiBGbG9hdDMyQXJyYXk7XG4gICAgLyoqXG4gICAgICogV29ybGQgc3BhY2Ugcm90YXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IERlc3RpbmF0aW9uIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCA0IGVsZW1lbnRzLlxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIGdldFJvdGF0aW9uV29ybGQ8VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQpOiBUO1xuICAgIGdldFJvdGF0aW9uV29ybGQob3V0OiBOdW1iZXJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoNCkpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9vYmplY3RfdHJhbnNfd29ybGQodGhpcy5faWQpIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIC8qIFRoZSBmaXJzdCA0IGZsb2F0cyByZXByZXNlbnQgdGhlIHJvdGF0aW9uIHF1YXRlcm5pb24uICovXG4gICAgICAgIG91dFswXSA9IHdhc20uSEVBUEYzMltwdHJdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uSEVBUEYzMltwdHIgKyAyXTtcbiAgICAgICAgb3V0WzNdID0gd2FzbS5IRUFQRjMyW3B0ciArIDNdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBsb2NhbCBzcGFjZSByb3RhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2IE5ldyB3b3JsZCByb3RhdGlvbiBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgNCBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICBzZXRSb3RhdGlvbldvcmxkKHY6IFJlYWRvbmx5PE51bWJlckFycmF5Pik6IHRoaXMge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3NldF9yb3RhdGlvbl93b3JsZCh0aGlzLl9pZCwgdlswXSwgdlsxXSwgdlsyXSwgdlszXSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRUcmFuc2Zvcm1Mb2NhbCgpOiBGbG9hdDMyQXJyYXk7XG4gICAgLyoqXG4gICAgICogTG9jYWwgc3BhY2UgdHJhbnNmb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IERlc3RpbmF0aW9uIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCA4IGVsZW1lbnRzLlxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBnZXRUcmFuc2Zvcm1Mb2NhbDxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCk6IFQ7XG4gICAgZ2V0VHJhbnNmb3JtTG9jYWwob3V0OiBOdW1iZXJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoOCkpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9vYmplY3RfdHJhbnNfbG9jYWwodGhpcy5faWQpIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIG91dFswXSA9IHdhc20uSEVBUEYzMltwdHJdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uSEVBUEYzMltwdHIgKyAyXTtcbiAgICAgICAgb3V0WzNdID0gd2FzbS5IRUFQRjMyW3B0ciArIDNdO1xuICAgICAgICBvdXRbNF0gPSB3YXNtLkhFQVBGMzJbcHRyICsgNF07XG4gICAgICAgIG91dFs1XSA9IHdhc20uSEVBUEYzMltwdHIgKyA1XTtcbiAgICAgICAgb3V0WzZdID0gd2FzbS5IRUFQRjMyW3B0ciArIDZdO1xuICAgICAgICBvdXRbN10gPSB3YXNtLkhFQVBGMzJbcHRyICsgN107XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGxvY2FsIHNwYWNlIHJvdGF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHYgTmV3IGxvY2FsIHRyYW5zZm9ybSBhcnJheSwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCA4IGVsZW1lbnRzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHNldFRyYW5zZm9ybUxvY2FsKHY6IFJlYWRvbmx5PE51bWJlckFycmF5Pik6IHRoaXMge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX29iamVjdF90cmFuc19sb2NhbCh0aGlzLl9pZCkgLyA0OyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0cl0gPSB2WzBdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgMV0gPSB2WzFdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgMl0gPSB2WzJdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgM10gPSB2WzNdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgNF0gPSB2WzRdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgNV0gPSB2WzVdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgNl0gPSB2WzZdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgN10gPSB2WzddO1xuICAgICAgICB0aGlzLnNldERpcnR5KCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRUcmFuc2Zvcm1Xb3JsZCgpOiBGbG9hdDMyQXJyYXk7XG4gICAgLyoqXG4gICAgICogV29ybGQgc3BhY2UgdHJhbnNmb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IERlc3RpbmF0aW9uIGFycmF5LCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDggZWxlbWVudHMuXG4gICAgICogQHJldHVybiBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqL1xuICAgIGdldFRyYW5zZm9ybVdvcmxkPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBUKTogVDtcbiAgICBnZXRUcmFuc2Zvcm1Xb3JsZChvdXQ6IE51bWJlckFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSg4KSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX29iamVjdF90cmFuc193b3JsZCh0aGlzLl9pZCkgLyA0OyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgb3V0WzBdID0gd2FzbS5IRUFQRjMyW3B0cl07XG4gICAgICAgIG91dFsxXSA9IHdhc20uSEVBUEYzMltwdHIgKyAxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5IRUFQRjMyW3B0ciArIDJdO1xuICAgICAgICBvdXRbM10gPSB3YXNtLkhFQVBGMzJbcHRyICsgM107XG4gICAgICAgIG91dFs0XSA9IHdhc20uSEVBUEYzMltwdHIgKyA0XTtcbiAgICAgICAgb3V0WzVdID0gd2FzbS5IRUFQRjMyW3B0ciArIDVdO1xuICAgICAgICBvdXRbNl0gPSB3YXNtLkhFQVBGMzJbcHRyICsgNl07XG4gICAgICAgIG91dFs3XSA9IHdhc20uSEVBUEYzMltwdHIgKyA3XTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgd29ybGQgc3BhY2Ugcm90YXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBOZXcgd29ybGQgdHJhbnNmb3JtIGFycmF5LCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDggZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgc2V0VHJhbnNmb3JtV29ybGQodjogUmVhZG9ubHk8TnVtYmVyQXJyYXk+KTogdGhpcyB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfb2JqZWN0X3RyYW5zX3dvcmxkKHRoaXMuX2lkKSAvIDQ7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyXSA9IHZbMF07XG4gICAgICAgIHdhc20uSEVBUEYzMltwdHIgKyAxXSA9IHZbMV07XG4gICAgICAgIHdhc20uSEVBUEYzMltwdHIgKyAyXSA9IHZbMl07XG4gICAgICAgIHdhc20uSEVBUEYzMltwdHIgKyAzXSA9IHZbM107XG4gICAgICAgIHdhc20uSEVBUEYzMltwdHIgKyA0XSA9IHZbNF07XG4gICAgICAgIHdhc20uSEVBUEYzMltwdHIgKyA1XSA9IHZbNV07XG4gICAgICAgIHdhc20uSEVBUEYzMltwdHIgKyA2XSA9IHZbNl07XG4gICAgICAgIHdhc20uSEVBUEYzMltwdHIgKyA3XSA9IHZbN107XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfdHJhbnNfd29ybGRfdG9fbG9jYWwodGhpcy5faWQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2NhbCBzcGFjZSB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnNldFRyYW5zZm9ybUxvY2FsfSBhbmRcbiAgICAgKiB7QGxpbmsgT2JqZWN0M0QuZ2V0VHJhbnNmb3JtTG9jYWx9IGluc3RlYWQuXG4gICAgICovXG4gICAgZ2V0IHRyYW5zZm9ybUxvY2FsKCk6IEZsb2F0MzJBcnJheSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkoXG4gICAgICAgICAgICB3YXNtLkhFQVBGMzIuYnVmZmVyLFxuICAgICAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3RyYW5zX2xvY2FsKHRoaXMuX2lkKSxcbiAgICAgICAgICAgIDhcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgbG9jYWwgdHJhbnNmb3JtLlxuICAgICAqXG4gICAgICogQHBhcmFtIHQgTG9jYWwgc3BhY2UgdHJhbnNmb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjVcbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnNldFRyYW5zZm9ybUxvY2FsfSBhbmRcbiAgICAgKiB7QGxpbmsgT2JqZWN0M0QuZ2V0VHJhbnNmb3JtTG9jYWx9IGluc3RlYWQuXG4gICAgICovXG4gICAgc2V0IHRyYW5zZm9ybUxvY2FsKHQ6IFJlYWRvbmx5PE51bWJlckFycmF5Pikge1xuICAgICAgICB0aGlzLnRyYW5zZm9ybUxvY2FsLnNldCh0KTtcbiAgICAgICAgdGhpcy5zZXREaXJ0eSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdsb2JhbCAvIHdvcmxkIHNwYWNlIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogTWF5IHJlY29tcHV0ZSB0cmFuc2Zvcm1hdGlvbnMgb2YgdGhlIGhpZXJhcmNoeSBvZiB0aGlzIG9iamVjdCxcbiAgICAgKiBpZiB0aGV5IHdlcmUgY2hhbmdlZCBieSBKYXZhU2NyaXB0IGNvbXBvbmVudHMgdGhpcyBmcmFtZS5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnNldFRyYW5zZm9ybVdvcmxkfSBhbmRcbiAgICAgKiB7QGxpbmsgT2JqZWN0M0QuZ2V0VHJhbnNmb3JtV29ybGR9IGluc3RlYWQuXG4gICAgICovXG4gICAgZ2V0IHRyYW5zZm9ybVdvcmxkKCk6IEZsb2F0MzJBcnJheSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkoXG4gICAgICAgICAgICB3YXNtLkhFQVBGMzIuYnVmZmVyLFxuICAgICAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3RyYW5zX3dvcmxkKHRoaXMuX2lkKSxcbiAgICAgICAgICAgIDhcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgd29ybGQgdHJhbnNmb3JtLlxuICAgICAqXG4gICAgICogQHBhcmFtIHQgR2xvYmFsIC8gd29ybGQgc3BhY2UgdHJhbnNmb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjVcbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnNldFRyYW5zZm9ybVdvcmxkfSBhbmRcbiAgICAgKiB7QGxpbmsgT2JqZWN0M0QuZ2V0VHJhbnNmb3JtV29ybGR9IGluc3RlYWQuXG4gICAgICovXG4gICAgc2V0IHRyYW5zZm9ybVdvcmxkKHQ6IFJlYWRvbmx5PE51bWJlckFycmF5Pikge1xuICAgICAgICB0aGlzLnRyYW5zZm9ybVdvcmxkLnNldCh0KTtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF90cmFuc193b3JsZF90b19sb2NhbCh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9jYWwgLyBvYmplY3Qgc3BhY2Ugc2NhbGluZy5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnNldFNjYWxpbmdMb2NhbH0gYW5kXG4gICAgICoge0BsaW5rIE9iamVjdDNELmdldFNjYWxpbmdMb2NhbH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBnZXQgc2NhbGluZ0xvY2FsKCk6IEZsb2F0MzJBcnJheSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkoXG4gICAgICAgICAgICB3YXNtLkhFQVBGMzIuYnVmZmVyLFxuICAgICAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3NjYWxpbmdfbG9jYWwodGhpcy5faWQpLFxuICAgICAgICAgICAgM1xuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBsb2NhbCBzcGFjZSBzY2FsaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHMgTG9jYWwgc3BhY2Ugc2NhbGluZy5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0Quc2V0U2NhbGluZ0xvY2FsfSBhbmRcbiAgICAgKiB7QGxpbmsgT2JqZWN0M0QuZ2V0U2NhbGluZ0xvY2FsfSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIHNldCBzY2FsaW5nTG9jYWwoczogUmVhZG9ubHk8TnVtYmVyQXJyYXk+KSB7XG4gICAgICAgIHRoaXMuc2NhbGluZ0xvY2FsLnNldChzKTtcbiAgICAgICAgdGhpcy5zZXREaXJ0eSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdsb2JhbCAvIHdvcmxkIHNwYWNlIHNjYWxpbmcuXG4gICAgICpcbiAgICAgKiBNYXkgcmVjb21wdXRlIHRyYW5zZm9ybWF0aW9ucyBvZiB0aGUgaGllcmFyY2h5IG9mIHRoaXMgb2JqZWN0LFxuICAgICAqIGlmIHRoZXkgd2VyZSBjaGFuZ2VkIGJ5IEphdmFTY3JpcHQgY29tcG9uZW50cyB0aGlzIGZyYW1lLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0Quc2V0U2NhbGluZ1dvcmxkfSBhbmRcbiAgICAgKiB7QGxpbmsgT2JqZWN0M0QuZ2V0U2NhbGluZ1dvcmxkfSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIGdldCBzY2FsaW5nV29ybGQoKTogRmxvYXQzMkFycmF5IHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShcbiAgICAgICAgICAgIHdhc20uSEVBUEYzMi5idWZmZXIsXG4gICAgICAgICAgICB3YXNtLl93bF9vYmplY3Rfc2NhbGluZ193b3JsZCh0aGlzLl9pZCksXG4gICAgICAgICAgICAzXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHdvcmxkIHNwYWNlIHNjYWxpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdCBXb3JsZCBzcGFjZSBzY2FsaW5nLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5zZXRTY2FsaW5nV29ybGR9IGFuZFxuICAgICAqIHtAbGluayBPYmplY3QzRC5nZXRTY2FsaW5nV29ybGR9IGluc3RlYWQuXG4gICAgICovXG4gICAgc2V0IHNjYWxpbmdXb3JsZChzOiBSZWFkb25seTxOdW1iZXJBcnJheT4pIHtcbiAgICAgICAgdGhpcy5zY2FsaW5nV29ybGQuc2V0KHMpO1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3NjYWxpbmdfd29ybGRfdG9fbG9jYWwodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvY2FsIHNwYWNlIHJvdGF0aW9uLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5nZXRSb3RhdGlvbkxvY2FsfSBhbmRcbiAgICAgKiB7QGxpbmsgT2JqZWN0M0Quc2V0Um90YXRpb25Mb2NhbH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBnZXQgcm90YXRpb25Mb2NhbCgpOiBGbG9hdDMyQXJyYXkge1xuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1Mb2NhbC5zdWJhcnJheSgwLCA0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHbG9iYWwgLyB3b3JsZCBzcGFjZSByb3RhdGlvblxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5nZXRSb3RhdGlvbldvcmxkfSBhbmRcbiAgICAgKiB7QGxpbmsgT2JqZWN0M0Quc2V0Um90YXRpb25Xb3JsZH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBnZXQgcm90YXRpb25Xb3JsZCgpOiBGbG9hdDMyQXJyYXkge1xuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1Xb3JsZC5zdWJhcnJheSgwLCA0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgbG9jYWwgc3BhY2Ugcm90YXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gciBMb2NhbCBzcGFjZSByb3RhdGlvblxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5nZXRSb3RhdGlvbkxvY2FsfSBhbmRcbiAgICAgKiB7QGxpbmsgT2JqZWN0M0Quc2V0Um90YXRpb25Mb2NhbH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBzZXQgcm90YXRpb25Mb2NhbChyOiBSZWFkb25seTxOdW1iZXJBcnJheT4pIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9zZXRfcm90YXRpb25fbG9jYWwodGhpcy5faWQsIHJbMF0sIHJbMV0sIHJbMl0sIHJbM10pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB3b3JsZCBzcGFjZSByb3RhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByIEdsb2JhbCAvIHdvcmxkIHNwYWNlIHJvdGF0aW9uLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5nZXRSb3RhdGlvbldvcmxkfSBhbmRcbiAgICAgKiB7QGxpbmsgT2JqZWN0M0Quc2V0Um90YXRpb25Xb3JsZH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBzZXQgcm90YXRpb25Xb3JsZChyOiBSZWFkb25seTxOdW1iZXJBcnJheT4pIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9zZXRfcm90YXRpb25fd29ybGQodGhpcy5faWQsIHJbMF0sIHJbMV0sIHJbMl0sIHJbM10pO1xuICAgIH1cblxuICAgIC8qKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5nZXRGb3J3YXJkV29ybGR9IGluc3RlYWQuICovXG4gICAgZ2V0Rm9yd2FyZDxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCk6IFQge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRGb3J3YXJkV29ybGQob3V0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb21wdXRlIHRoZSBvYmplY3QncyBmb3J3YXJkIGZhY2luZyB3b3JsZCBzcGFjZSB2ZWN0b3IuXG4gICAgICpcbiAgICAgKiBUaGUgZm9yd2FyZCB2ZWN0b3IgaW4gb2JqZWN0IHNwYWNlIGlzIGFsb25nIHRoZSBuZWdhdGl2ZSB6LWF4aXMsIGkuZS4sXG4gICAgICogYFswLCAwLCAtMV1gLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBEZXN0aW5hdGlvbiBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgMyBlbGVtZW50cy5cbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICovXG4gICAgZ2V0Rm9yd2FyZFdvcmxkPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBUKTogVCB7XG4gICAgICAgIG91dFswXSA9IDA7XG4gICAgICAgIG91dFsxXSA9IDA7XG4gICAgICAgIG91dFsyXSA9IC0xO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybVZlY3RvcldvcmxkKG91dCk7XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuXG4gICAgLyoqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELmdldFVwV29ybGR9IGluc3RlYWQuICovXG4gICAgZ2V0VXA8VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQpOiBUIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VXBXb3JsZChvdXQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbXB1dGUgdGhlIG9iamVjdCdzIHVwIGZhY2luZyB3b3JsZCBzcGFjZSB2ZWN0b3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IERlc3RpbmF0aW9uIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCAzIGVsZW1lbnRzLlxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBnZXRVcFdvcmxkPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBUKTogVCB7XG4gICAgICAgIG91dFswXSA9IDA7XG4gICAgICAgIG91dFsxXSA9IDE7XG4gICAgICAgIG91dFsyXSA9IDA7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtVmVjdG9yV29ybGQob3V0KTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKiogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0QuZ2V0UmlnaHRXb3JsZH0gaW5zdGVhZC4gKi9cbiAgICBnZXRSaWdodDxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCk6IFQge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRSaWdodFdvcmxkKG91dCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29tcHV0ZSB0aGUgb2JqZWN0J3MgcmlnaHQgZmFjaW5nIHdvcmxkIHNwYWNlIHZlY3Rvci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgRGVzdGluYXRpb24gYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDMgZWxlbWVudHMuXG4gICAgICogQHJldHVybiBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqL1xuICAgIGdldFJpZ2h0V29ybGQ8VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQpOiBUIHtcbiAgICAgICAgb3V0WzBdID0gMTtcbiAgICAgICAgb3V0WzFdID0gMDtcbiAgICAgICAgb3V0WzJdID0gMDtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1WZWN0b3JXb3JsZChvdXQpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBhIHZlY3RvciBieSB0aGlzIG9iamVjdCdzIHdvcmxkIHRyYW5zZm9ybS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgT3V0IHZlY3RvclxuICAgICAqIEBwYXJhbSB2IFZlY3RvciB0byB0cmFuc2Zvcm0sIGRlZmF1bHQgYG91dGBcbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjdcbiAgICAgKi9cbiAgICB0cmFuc2Zvcm1WZWN0b3JXb3JsZDxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCwgdjogTnVtYmVyQXJyYXkgPSBvdXQpOiBUIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMF0gPSB2WzBdO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMV0gPSB2WzFdO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMl0gPSB2WzJdO1xuICAgICAgICB3YXNtLl93bF9vYmplY3RfdHJhbnNmb3JtVmVjdG9yV29ybGQodGhpcy5faWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBvdXRbMF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBhIHZlY3RvciBieSB0aGlzIG9iamVjdCdzIGxvY2FsIHRyYW5zZm9ybS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgT3V0IHZlY3RvclxuICAgICAqIEBwYXJhbSB2IFZlY3RvciB0byB0cmFuc2Zvcm0sIGRlZmF1bHQgYG91dGBcbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjdcbiAgICAgKi9cbiAgICB0cmFuc2Zvcm1WZWN0b3JMb2NhbDxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCwgdjogTnVtYmVyQXJyYXkgPSBvdXQpOiBUIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMF0gPSB2WzBdO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMV0gPSB2WzFdO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMl0gPSB2WzJdO1xuICAgICAgICB3YXNtLl93bF9vYmplY3RfdHJhbnNmb3JtVmVjdG9yTG9jYWwodGhpcy5faWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBvdXRbMF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBhIHBvaW50IGJ5IHRoaXMgb2JqZWN0J3Mgd29ybGQgdHJhbnNmb3JtLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBPdXQgcG9pbnQuXG4gICAgICogQHBhcmFtIHAgUG9pbnQgdG8gdHJhbnNmb3JtLCBkZWZhdWx0IGBvdXRgLlxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqL1xuICAgIHRyYW5zZm9ybVBvaW50V29ybGQ8VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQsIHA6IE51bWJlckFycmF5ID0gb3V0KTogVCB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzBdID0gcFswXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzFdID0gcFsxXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzJdID0gcFsyXTtcbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3RyYW5zZm9ybVBvaW50V29ybGQodGhpcy5faWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBvdXRbMF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzJdO1xuXG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIGEgcG9pbnQgYnkgdGhpcyBvYmplY3QncyBsb2NhbCB0cmFuc2Zvcm0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IE91dCBwb2ludC5cbiAgICAgKiBAcGFyYW0gcCBQb2ludCB0byB0cmFuc2Zvcm0sIGRlZmF1bHQgYG91dGAuXG4gICAgICogQHJldHVybiBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICovXG4gICAgdHJhbnNmb3JtUG9pbnRMb2NhbDxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCwgcDogTnVtYmVyQXJyYXkgPSBvdXQpOiBUIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMF0gPSBwWzBdO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMV0gPSBwWzFdO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMl0gPSBwWzJdO1xuICAgICAgICB3YXNtLl93bF9vYmplY3RfdHJhbnNmb3JtUG9pbnRMb2NhbCh0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG5cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gYSB2ZWN0b3IgYnkgdGhpcyBvYmplY3QncyBpbnZlcnNlIHdvcmxkIHRyYW5zZm9ybS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgT3V0IHZlY3Rvci5cbiAgICAgKiBAcGFyYW0gdiBWZWN0b3IgdG8gdHJhbnNmb3JtLCBkZWZhdWx0IGBvdXRgLlxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqL1xuICAgIHRyYW5zZm9ybVZlY3RvckludmVyc2VXb3JsZDxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCwgdjogTnVtYmVyQXJyYXkgPSBvdXQpOiBUIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMF0gPSB2WzBdO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMV0gPSB2WzFdO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMl0gPSB2WzJdO1xuICAgICAgICB3YXNtLl93bF9vYmplY3RfdHJhbnNmb3JtVmVjdG9ySW52ZXJzZVdvcmxkKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsyXTtcblxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBhIHZlY3RvciBieSB0aGlzIG9iamVjdCdzIGludmVyc2UgbG9jYWwgdHJhbnNmb3JtLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBPdXQgdmVjdG9yXG4gICAgICogQHBhcmFtIHYgVmVjdG9yIHRvIHRyYW5zZm9ybSwgZGVmYXVsdCBgb3V0YFxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqL1xuICAgIHRyYW5zZm9ybVZlY3RvckludmVyc2VMb2NhbDxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCwgdjogTnVtYmVyQXJyYXkgPSBvdXQpOiBUIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMF0gPSB2WzBdO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMV0gPSB2WzFdO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXRbMl0gPSB2WzJdO1xuICAgICAgICB3YXNtLl93bF9vYmplY3RfdHJhbnNmb3JtVmVjdG9ySW52ZXJzZUxvY2FsKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsyXTtcblxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBhIHBvaW50IGJ5IHRoaXMgb2JqZWN0J3MgaW52ZXJzZSB3b3JsZCB0cmFuc2Zvcm0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IE91dCBwb2ludC5cbiAgICAgKiBAcGFyYW0gcCBQb2ludCB0byB0cmFuc2Zvcm0sIGRlZmF1bHQgYG91dGAuXG4gICAgICogQHJldHVybiBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICovXG4gICAgdHJhbnNmb3JtUG9pbnRJbnZlcnNlV29ybGQ8VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQsIHA6IE51bWJlckFycmF5ID0gb3V0KTogVCB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzBdID0gcFswXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzFdID0gcFsxXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzJdID0gcFsyXTtcbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3RyYW5zZm9ybVBvaW50SW52ZXJzZVdvcmxkKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsyXTtcblxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBhIHBvaW50IGJ5IHRoaXMgb2JqZWN0J3MgaW52ZXJzZSBsb2NhbCB0cmFuc2Zvcm0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IE91dCBwb2ludC5cbiAgICAgKiBAcGFyYW0gcCBQb2ludCB0byB0cmFuc2Zvcm0sIGRlZmF1bHQgYG91dGAuXG4gICAgICogQHJldHVybiBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICovXG4gICAgdHJhbnNmb3JtUG9pbnRJbnZlcnNlTG9jYWw8VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQsIHA6IE51bWJlckFycmF5ID0gb3V0KTogVCB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0LnNldChwKTtcbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3RyYW5zZm9ybVBvaW50SW52ZXJzZUxvY2FsKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsyXTtcblxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBhbiBvYmplY3Qgc3BhY2UgZHVhbCBxdWF0ZXJuaW9uIGludG8gd29ybGQgc3BhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IE91dCB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKiBAcGFyYW0gcSBMb2NhbCBzcGFjZSB0cmFuc2Zvcm1hdGlvbiwgZGVmYXVsdCBgb3V0YC5cbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjdcbiAgICAgKi9cbiAgICB0b1dvcmxkU3BhY2VUcmFuc2Zvcm08VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQsIHE6IE51bWJlckFycmF5ID0gb3V0KTogVCB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0LnNldChxKTtcbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3RvV29ybGRTcGFjZVRyYW5zZm9ybSh0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG4gICAgICAgIG91dFszXSA9IHdhc20uX3RlbXBNZW1GbG9hdFszXTtcblxuICAgICAgICBvdXRbNF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbNF07XG4gICAgICAgIG91dFs1XSA9IHdhc20uX3RlbXBNZW1GbG9hdFs1XTtcbiAgICAgICAgb3V0WzZdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzZdO1xuICAgICAgICBvdXRbN10gPSB3YXNtLl90ZW1wTWVtRmxvYXRbN107XG5cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gYSB3b3JsZCBzcGFjZSBkdWFsIHF1YXRlcm5pb24gaW50byBsb2NhbCBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgT3V0IHRyYW5zZm9ybWF0aW9uXG4gICAgICogQHBhcmFtIHEgV29ybGQgc3BhY2UgdHJhbnNmb3JtYXRpb24sIGRlZmF1bHQgYG91dGBcbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjdcbiAgICAgKi9cbiAgICB0b0xvY2FsU3BhY2VUcmFuc2Zvcm08VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQsIHE6IE51bWJlckFycmF5ID0gb3V0KTogVCB7XG4gICAgICAgIGNvbnN0IHAgPSB0aGlzLnBhcmVudDtcbiAgICAgICAgaWYgKHApIHtcbiAgICAgICAgICAgIHAudG9PYmplY3RTcGFjZVRyYW5zZm9ybShvdXQsIHEpO1xuICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3V0ICE9PSBxKSB7XG4gICAgICAgICAgICBvdXRbMF0gPSBxWzBdO1xuICAgICAgICAgICAgb3V0WzFdID0gcVsxXTtcbiAgICAgICAgICAgIG91dFsyXSA9IHFbMl07XG4gICAgICAgICAgICBvdXRbM10gPSBxWzNdO1xuICAgICAgICAgICAgb3V0WzRdID0gcVs0XTtcbiAgICAgICAgICAgIG91dFs1XSA9IHFbNV07XG4gICAgICAgICAgICBvdXRbNl0gPSBxWzZdO1xuICAgICAgICAgICAgb3V0WzddID0gcVs3XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBhIHdvcmxkIHNwYWNlIGR1YWwgcXVhdGVybmlvbiBpbnRvIG9iamVjdCBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgT3V0IHRyYW5zZm9ybWF0aW9uLlxuICAgICAqIEBwYXJhbSBxIFdvcmxkIHNwYWNlIHRyYW5zZm9ybWF0aW9uLCBkZWZhdWx0IGBvdXRgXG4gICAgICogQHJldHVybiBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICovXG4gICAgdG9PYmplY3RTcGFjZVRyYW5zZm9ybTxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCwgcTogTnVtYmVyQXJyYXkgPSBvdXQpOiBUIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl90ZW1wTWVtRmxvYXQuc2V0KHEpO1xuICAgICAgICB3YXNtLl93bF9vYmplY3RfdG9PYmplY3RTcGFjZVRyYW5zZm9ybSh0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG4gICAgICAgIG91dFszXSA9IHdhc20uX3RlbXBNZW1GbG9hdFszXTtcblxuICAgICAgICBvdXRbNF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbNF07XG4gICAgICAgIG91dFs1XSA9IHdhc20uX3RlbXBNZW1GbG9hdFs1XTtcbiAgICAgICAgb3V0WzZdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzZdO1xuICAgICAgICBvdXRbN10gPSB3YXNtLl90ZW1wTWVtRmxvYXRbN107XG5cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUdXJuIHRvd2FyZHMgLyBsb29rIGF0IHRhcmdldC5cbiAgICAgKlxuICAgICAqIFJvdGF0ZXMgdGhlIG9iamVjdCBzbyB0aGF0IGl0cyBmb3J3YXJkIHZlY3RvciBmYWNlcyB0b3dhcmRzIHRoZSB0YXJnZXRcbiAgICAgKiBwb3NpdGlvbi4gVGhlIGB1cGAgdmVjdG9yIGFjdHMgYXMgYSBoaW50IHRvIHVuaXF1ZWx5IG9yaWVudCB0aGUgb2JqZWN0J3NcbiAgICAgKiB1cCBkaXJlY3Rpb24uIFdoZW4gb3JpZW50aW5nIGEgdmlldyBjb21wb25lbnQsIHRoZSBwcm9qZWN0ZWQgYHVwYCB2ZWN0b3JcbiAgICAgKiBmYWNlcyB1cHdhcmRzIG9uIHRoZSB2aWV3aW5nIHBsYW5lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHAgVGFyZ2V0IHBvc2l0aW9uIHRvIHR1cm4gdG93YXJkcywgaW4gd29ybGQgc3BhY2UuXG4gICAgICogQHBhcmFtIHVwIFVwIHZlY3RvciB0byBhbGlnbiBvYmplY3Qgd2l0aCwgaW4gd29ybGQgc3BhY2UuIERlZmF1bHQgaXMgYFswLCAxLCAwXWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgbG9va0F0KHA6IE51bWJlckFycmF5LCB1cDogTnVtYmVyQXJyYXkgPSBVUF9WRUNUT1IpOiB0aGlzIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9sb29rQXQoXG4gICAgICAgICAgICB0aGlzLl9pZCxcbiAgICAgICAgICAgIHBbMF0sXG4gICAgICAgICAgICBwWzFdLFxuICAgICAgICAgICAgcFsyXSxcbiAgICAgICAgICAgIHVwWzBdLFxuICAgICAgICAgICAgdXBbMV0sXG4gICAgICAgICAgICB1cFsyXVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKiogRGVzdHJveSB0aGUgb2JqZWN0IHdpdGggYWxsIG9mIGl0cyBjb21wb25lbnRzIGFuZCByZW1vdmUgaXQgZnJvbSB0aGUgc2NlbmUgKi9cbiAgICBkZXN0cm95KCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5faWQgPCAwKSByZXR1cm47XG4gICAgICAgIC8qIFRoaXMgd2lsbCBhdXRvbWF0aWNhbGx5IGNhbGwgYHNjZW5lLl9kZXN0cm95T2JqZWN0YCAqL1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9vYmplY3RfcmVtb3ZlKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYXJrIHRyYW5zZm9ybWF0aW9uIGRpcnR5LlxuICAgICAqXG4gICAgICogQ2F1c2VzIGFuIGV2ZW50dWFsIHJlY2FsY3VsYXRpb24gb2Yge0BsaW5rIHRyYW5zZm9ybVdvcmxkfSwgZWl0aGVyXG4gICAgICogb24gbmV4dCB7QGxpbmsgZ2V0VHJhbnNsYXRpb25Xb3JsZH0sIHtAbGluayB0cmFuc2Zvcm1Xb3JsZH0gb3JcbiAgICAgKiB7QGxpbmsgc2NhbGluZ1dvcmxkfSBvciB0aGUgYmVnaW5uaW5nIG9mIG5leHQgZnJhbWUsIHdoaWNoZXZlclxuICAgICAqIGhhcHBlbnMgZmlyc3QuXG4gICAgICovXG4gICAgc2V0RGlydHkoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3Rfc2V0X2RpcnR5KHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEaXNhYmxlL2VuYWJsZSBhbGwgY29tcG9uZW50cyBvZiB0aGlzIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiIE5ldyBzdGF0ZSBmb3IgdGhlIGNvbXBvbmVudHMuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjVcbiAgICAgKi9cbiAgICBzZXQgYWN0aXZlKGI6IGJvb2xlYW4pIHtcbiAgICAgICAgY29uc3QgY29tcHMgPSB0aGlzLmdldENvbXBvbmVudHMoKTtcbiAgICAgICAgZm9yIChsZXQgYyBvZiBjb21wcykge1xuICAgICAgICAgICAgYy5hY3RpdmUgPSBiO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyogYGdldENvbXBvbmVudGAgb3ZlcmxvYWRzIGZvciBuYXRpdmUgY29tcG9uZW50cy4gKi9cblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRDb21wb25lbnQodHlwZTogJ2NvbGxpc2lvbicsIGluZGV4PzogbnVtYmVyKTogQ29sbGlzaW9uQ29tcG9uZW50IHwgbnVsbDtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0Q29tcG9uZW50KHR5cGU6ICd0ZXh0JywgaW5kZXg/OiBudW1iZXIpOiBUZXh0Q29tcG9uZW50IHwgbnVsbDtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0Q29tcG9uZW50KHR5cGU6ICd2aWV3JywgaW5kZXg/OiBudW1iZXIpOiBWaWV3Q29tcG9uZW50IHwgbnVsbDtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0Q29tcG9uZW50KHR5cGU6ICdtZXNoJywgaW5kZXg/OiBudW1iZXIpOiBNZXNoQ29tcG9uZW50IHwgbnVsbDtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0Q29tcG9uZW50KHR5cGU6ICdpbnB1dCcsIGluZGV4PzogbnVtYmVyKTogSW5wdXRDb21wb25lbnQgfCBudWxsO1xuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRDb21wb25lbnQodHlwZTogJ2xpZ2h0JywgaW5kZXg/OiBudW1iZXIpOiBMaWdodENvbXBvbmVudCB8IG51bGw7XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldENvbXBvbmVudCh0eXBlOiAnYW5pbWF0aW9uJywgaW5kZXg/OiBudW1iZXIpOiBBbmltYXRpb25Db21wb25lbnQgfCBudWxsO1xuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRDb21wb25lbnQodHlwZTogJ3BoeXN4JywgaW5kZXg/OiBudW1iZXIpOiBQaHlzWENvbXBvbmVudCB8IG51bGw7XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldENvbXBvbmVudCh0eXBlT3JDbGFzczogc3RyaW5nLCBpbmRleD86IG51bWJlcik6IENvbXBvbmVudCB8IG51bGw7XG4gICAgLyoqXG4gICAgICogR2V0IGEgY29tcG9uZW50IGF0dGFjaGVkIHRvIHRoaXMgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHR5cGVPckNsYXNzIFR5cGUgbmFtZS4gSXQncyBhbHNvIHBvc3NpYmxlIHRvIGdpdmUgYSBjbGFzcyBkZWZpbml0aW9uLlxuICAgICAqICAgICBJbiB0aGlzIGNhc2UsIHRoZSBtZXRob2Qgd2lsbCB1c2UgdGhlIGBjbGFzcy5UeXBlTmFtZWAgZmllbGQgdG8gZmluZCB0aGUgY29tcG9uZW50LlxuICAgICAqIEBwYXJhbSBpbmRleD0wIEluZGV4IGZvciBjb21wb25lbnQgb2YgZ2l2ZW4gdHlwZS4gVGhpcyBjYW4gYmUgdXNlZCB0byBhY2Nlc3Mgc3BlY2lmaWNcbiAgICAgKiAgICAgIGNvbXBvbmVudHMgaWYgdGhlIG9iamVjdCBoYXMgbXVsdGlwbGUgY29tcG9uZW50cyBvZiB0aGUgc2FtZSB0eXBlLlxuICAgICAqIEByZXR1cm5zIFRoZSBjb21wb25lbnQgb3IgYG51bGxgIGlmIHRoZXJlIGlzIG5vIHN1Y2ggY29tcG9uZW50IG9uIHRoaXMgb2JqZWN0XG4gICAgICovXG4gICAgZ2V0Q29tcG9uZW50PFQgZXh0ZW5kcyBDb21wb25lbnQ+KFxuICAgICAgICB0eXBlT3JDbGFzczogQ29tcG9uZW50Q29uc3RydWN0b3I8VD4sXG4gICAgICAgIGluZGV4PzogbnVtYmVyXG4gICAgKTogVCB8IG51bGw7XG4gICAgZ2V0Q29tcG9uZW50KFxuICAgICAgICB0eXBlT3JDbGFzczogc3RyaW5nIHwgQ29tcG9uZW50Q29uc3RydWN0b3IsXG4gICAgICAgIGluZGV4OiBudW1iZXIgPSAwXG4gICAgKTogQ29tcG9uZW50IHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgdHlwZSA9IGlzU3RyaW5nKHR5cGVPckNsYXNzKSA/IHR5cGVPckNsYXNzIDogdHlwZU9yQ2xhc3MuVHlwZU5hbWU7XG5cbiAgICAgICAgY29uc3Qgc2NlbmUgPSB0aGlzLl9zY2VuZTtcbiAgICAgICAgY29uc3QgY29tcG9uZW50VHlwZSA9IHdhc20uX3dsX3NjZW5lX2dldF9jb21wb25lbnRfbWFuYWdlcl9pbmRleChcbiAgICAgICAgICAgIHNjZW5lLl9pbmRleCxcbiAgICAgICAgICAgIHdhc20udGVtcFVURjgodHlwZSlcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoY29tcG9uZW50VHlwZSA8IDApIHtcbiAgICAgICAgICAgIC8qIE5vdCBhIG5hdGl2ZSBjb21wb25lbnQsIHRyeSBqczogKi9cbiAgICAgICAgICAgIGNvbnN0IHR5cGVJbmRleCA9IHdhc20uX2NvbXBvbmVudFR5cGVJbmRpY2VzW3R5cGVdO1xuICAgICAgICAgICAgaWYgKHR5cGVJbmRleCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IGpzSW5kZXggPSB3YXNtLl93bF9nZXRfanNfY29tcG9uZW50X2luZGV4KHRoaXMuX2lkLCB0eXBlSW5kZXgsIGluZGV4KTtcbiAgICAgICAgICAgIGlmIChqc0luZGV4IDwgMCkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXMuX3NjZW5lLl9qc0NvbXBvbmVudHNbanNJbmRleF07XG4gICAgICAgICAgICByZXR1cm4gY29tcG9uZW50LmNvbnN0cnVjdG9yICE9PSBCcm9rZW5Db21wb25lbnQgPyBjb21wb25lbnQgOiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29tcG9uZW50SWQgPSB3YXNtLl93bF9nZXRfY29tcG9uZW50X2lkKHRoaXMuX2lkLCBjb21wb25lbnRUeXBlLCBpbmRleCk7XG4gICAgICAgIHJldHVybiBzY2VuZS5fY29tcG9uZW50cy53cmFwTmF0aXZlKGNvbXBvbmVudFR5cGUsIGNvbXBvbmVudElkKTtcbiAgICB9XG5cbiAgICAvKiBgZ2V0Q29tcG9uZW50c2Agb3ZlcmxvYWRzIGZvciBuYXRpdmUgY29tcG9uZW50cy4gKi9cblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRDb21wb25lbnRzKHR5cGU6ICdjb2xsaXNpb24nKTogQ29sbGlzaW9uQ29tcG9uZW50W107XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldENvbXBvbmVudHModHlwZTogJ3RleHQnKTogVGV4dENvbXBvbmVudFtdO1xuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRDb21wb25lbnRzKHR5cGU6ICd2aWV3Jyk6IFZpZXdDb21wb25lbnRbXTtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0Q29tcG9uZW50cyh0eXBlOiAnbWVzaCcpOiBNZXNoQ29tcG9uZW50W107XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldENvbXBvbmVudHModHlwZTogJ2lucHV0Jyk6IElucHV0Q29tcG9uZW50W107XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldENvbXBvbmVudHModHlwZTogJ2xpZ2h0Jyk6IExpZ2h0Q29tcG9uZW50W107XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldENvbXBvbmVudHModHlwZTogJ2FuaW1hdGlvbicpOiBBbmltYXRpb25Db21wb25lbnRbXTtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0Q29tcG9uZW50cyh0eXBlOiAncGh5c3gnKTogUGh5c1hDb21wb25lbnRbXTtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0Q29tcG9uZW50cyh0eXBlPzogc3RyaW5nIHwgbnVsbCk6IENvbXBvbmVudFtdO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB0eXBlT3JDbGFzcyBUeXBlIG5hbWUsIHBhc3MgYSBmYWxzZXkgdmFsdWUgKGB1bmRlZmluZWRgIG9yIGBudWxsYCkgdG8gcmV0cmlldmUgYWxsLlxuICAgICAqICAgICBJdCdzIGFsc28gcG9zc2libGUgdG8gZ2l2ZSBhIGNsYXNzIGRlZmluaXRpb24uIEluIHRoaXMgY2FzZSwgdGhlIG1ldGhvZCB3aWxsIHVzZSB0aGUgYGNsYXNzLlR5cGVOYW1lYCBmaWVsZCB0b1xuICAgICAqICAgICBmaW5kIHRoZSBjb21wb25lbnRzLlxuICAgICAqIEByZXR1cm5zIEFsbCBjb21wb25lbnRzIG9mIGdpdmVuIHR5cGUgYXR0YWNoZWQgdG8gdGhpcyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAbm90ZSBBcyB0aGlzIGZ1bmN0aW9uIGlzIG5vbi10cml2aWFsLCBhdm9pZCB1c2luZyBpdCBpbiBgdXBkYXRlKClgIHJlcGVhdGVkbHksXG4gICAgICogICAgICBidXQgcmF0aGVyIHN0b3JlIGl0cyByZXN1bHQgaW4gYGluaXQoKWAgb3IgYHN0YXJ0KClgXG4gICAgICogQHdhcm5pbmcgVGhpcyBtZXRob2Qgd2lsbCBjdXJyZW50bHkgcmV0dXJuIGF0IG1vc3QgMzQxIGNvbXBvbmVudHMuXG4gICAgICovXG4gICAgZ2V0Q29tcG9uZW50czxUIGV4dGVuZHMgQ29tcG9uZW50Pih0eXBlT3JDbGFzczogQ29tcG9uZW50Q29uc3RydWN0b3I8VD4pOiBUW107XG4gICAgZ2V0Q29tcG9uZW50czxUIGV4dGVuZHMgQ29tcG9uZW50PihcbiAgICAgICAgdHlwZU9yQ2xhc3M/OiBzdHJpbmcgfCBDb21wb25lbnRDb25zdHJ1Y3RvcjxUPiB8IG51bGxcbiAgICApOiBUW10ge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHNjZW5lID0gdGhpcy5fc2NlbmU7XG5cbiAgICAgICAgbGV0IG1hbmFnZXIgPSBudWxsO1xuICAgICAgICBsZXQgdHlwZSA9IG51bGw7XG4gICAgICAgIGlmICh0eXBlT3JDbGFzcykge1xuICAgICAgICAgICAgdHlwZSA9IGlzU3RyaW5nKHR5cGVPckNsYXNzKSA/IHR5cGVPckNsYXNzIDogdHlwZU9yQ2xhc3MuVHlwZU5hbWU7XG4gICAgICAgICAgICBjb25zdCBuYXRpdmVNYW5hZ2VyID0gc2NlbmUuX2NvbXBvbmVudHMuZ2V0TmF0aXZlTWFuYWdlcih0eXBlKTtcbiAgICAgICAgICAgIG1hbmFnZXIgPSBuYXRpdmVNYW5hZ2VyICE9PSBudWxsID8gbmF0aXZlTWFuYWdlciA6IHNjZW5lLl9jb21wb25lbnRzLmpzO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29tcG9uZW50czogQ29tcG9uZW50W10gPSBbXTtcbiAgICAgICAgY29uc3QgbWF4Q29tcHMgPSBNYXRoLmZsb29yKCh3YXNtLl90ZW1wTWVtU2l6ZSAvIDMpICogMik7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudHNDb3VudCA9IHdhc20uX3dsX29iamVjdF9nZXRfY29tcG9uZW50cyhcbiAgICAgICAgICAgIHRoaXMuX2lkLFxuICAgICAgICAgICAgd2FzbS5fdGVtcE1lbSxcbiAgICAgICAgICAgIG1heENvbXBzXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IDIgKiBjb21wb25lbnRzQ291bnQ7XG4gICAgICAgIHdhc20uX3dsX29iamVjdF9nZXRfY29tcG9uZW50X3R5cGVzKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtICsgb2Zmc2V0LCBtYXhDb21wcyk7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb21wb25lbnRzQ291bnQ7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHdhc20uX3RlbXBNZW1VaW50OFtpICsgb2Zmc2V0XTtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudElkID0gd2FzbS5fdGVtcE1lbVVpbnQxNltpXTtcbiAgICAgICAgICAgIGlmIChtYW5hZ2VyICE9PSBudWxsICYmIHQgIT09IG1hbmFnZXIpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBjb25zdCBjb21wID0gdGhpcy5fc2NlbmUuX2NvbXBvbmVudHMud3JhcEFueSh0LCBjb21wb25lbnRJZCk7XG4gICAgICAgICAgICBpZiAoIWNvbXApIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKHR5cGUgJiYgdHlwZSAhPT0gKGNvbXAuY29uc3RydWN0b3IgYXMgQ29tcG9uZW50Q29uc3RydWN0b3IpLlR5cGVOYW1lKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29tcG9uZW50cy5wdXNoKGNvbXApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb21wb25lbnRzIGFzIFRbXTtcbiAgICB9XG5cbiAgICAvKiBgYWRkQ29tcG9uZW50YCBvdmVybG9hZHMgZm9yIG5hdGl2ZSBjb21wb25lbnRzLiAqL1xuXG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGFkZENvbXBvbmVudCh0eXBlOiAnY29sbGlzaW9uJywgcGFyYW1zPzogUmVjb3JkPHN0cmluZywgYW55Pik6IENvbGxpc2lvbkNvbXBvbmVudDtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgYWRkQ29tcG9uZW50KHR5cGU6ICd0ZXh0JywgcGFyYW1zPzogUmVjb3JkPHN0cmluZywgYW55Pik6IFRleHRDb21wb25lbnQ7XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGFkZENvbXBvbmVudCh0eXBlOiAndmlldycsIHBhcmFtcz86IFJlY29yZDxzdHJpbmcsIGFueT4pOiBWaWV3Q29tcG9uZW50O1xuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBhZGRDb21wb25lbnQodHlwZTogJ21lc2gnLCBwYXJhbXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogTWVzaENvbXBvbmVudDtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgYWRkQ29tcG9uZW50KHR5cGU6ICdpbnB1dCcsIHBhcmFtcz86IFJlY29yZDxzdHJpbmcsIGFueT4pOiBJbnB1dENvbXBvbmVudDtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgYWRkQ29tcG9uZW50KHR5cGU6ICdsaWdodCcsIHBhcmFtcz86IFJlY29yZDxzdHJpbmcsIGFueT4pOiBMaWdodENvbXBvbmVudDtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgYWRkQ29tcG9uZW50KHR5cGU6ICdhbmltYXRpb24nLCBwYXJhbXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogQW5pbWF0aW9uQ29tcG9uZW50O1xuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBhZGRDb21wb25lbnQodHlwZTogJ3BoeXN4JywgcGFyYW1zPzogUmVjb3JkPHN0cmluZywgYW55Pik6IFBoeXNYQ29tcG9uZW50O1xuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBhZGRDb21wb25lbnQodHlwZTogc3RyaW5nLCBwYXJhbXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogQ29tcG9uZW50O1xuICAgIC8qKlxuICAgICAqIEFkZCBjb21wb25lbnQgb2YgZ2l2ZW4gdHlwZSB0byB0aGUgb2JqZWN0LlxuICAgICAqXG4gICAgICogWW91IGNhbiB1c2UgdGhpcyBmdW5jdGlvbiB0byBjbG9uZSBjb21wb25lbnRzLCBzZWUgdGhlIGV4YW1wbGUgYmVsb3cuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqICAvLyBDbG9uZSBleGlzdGluZyBjb21wb25lbnQgKHNpbmNlIDAuOC4xMClcbiAgICAgKiAgbGV0IG9yaWdpbmFsID0gdGhpcy5vYmplY3QuZ2V0Q29tcG9uZW50KCdtZXNoJyk7XG4gICAgICogIG90aGVyT2JqZWN0LmFkZENvbXBvbmVudCgnbWVzaCcsIG9yaWdpbmFsKTtcbiAgICAgKiAgLy8gQ3JlYXRlIGNvbXBvbmVudCBmcm9tIHBhcmFtZXRlcnNcbiAgICAgKiAgdGhpcy5vYmplY3QuYWRkQ29tcG9uZW50KCdtZXNoJywge1xuICAgICAqICAgICAgbWVzaDogc29tZU1lc2gsXG4gICAgICogICAgICBtYXRlcmlhbDogc29tZU1hdGVyaWFsLFxuICAgICAqICB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSB0eXBlT3JDbGFzcyBUeXBlbmFtZSB0byBjcmVhdGUgYSBjb21wb25lbnQgb2YuIENhbiBiZSBuYXRpdmUgb3JcbiAgICAgKiAgICAgY3VzdG9tIEphdmFTY3JpcHQgY29tcG9uZW50IHR5cGUuIEl0J3MgYWxzbyBwb3NzaWJsZSB0byBnaXZlIGEgY2xhc3MgZGVmaW5pdGlvbi5cbiAgICAgKiAgICAgSW4gdGhpcyBjYXNlLCB0aGUgbWV0aG9kIHdpbGwgdXNlIHRoZSBgY2xhc3MuVHlwZU5hbWVgIGZpZWxkLlxuICAgICAqIEBwYXJhbSBwYXJhbXMgUGFyYW1ldGVycyB0byBpbml0aWFsaXplIHByb3BlcnRpZXMgb2YgdGhlIG5ldyBjb21wb25lbnQsXG4gICAgICogICAgICBjYW4gYmUgYW5vdGhlciBjb21wb25lbnQgdG8gY29weSBwcm9wZXJ0aWVzIGZyb20uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgY29tcG9uZW50IG9yIGBudWxsYCBpZiB0aGUgdHlwZSB3YXMgbm90IGZvdW5kXG4gICAgICovXG4gICAgYWRkQ29tcG9uZW50PFQgZXh0ZW5kcyBDb21wb25lbnQ+KFxuICAgICAgICB0eXBlQ2xhc3M6IENvbXBvbmVudENvbnN0cnVjdG9yPFQ+LFxuICAgICAgICBwYXJhbXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG4gICAgKTogVDtcbiAgICBhZGRDb21wb25lbnQoXG4gICAgICAgIHR5cGVPckNsYXNzOiBDb21wb25lbnRDb25zdHJ1Y3RvciB8IHN0cmluZyxcbiAgICAgICAgcGFyYW1zPzogUmVjb3JkPHN0cmluZywgYW55PlxuICAgICk6IENvbXBvbmVudCB7XG4gICAgICAgIGlmICh0aGlzLm1hcmtlZERlc3Ryb3llZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gYWRkIGNvbXBvbmVudC4gJHt0aGlzfSBpcyBtYXJrZWQgYXMgZGVzdHJveWVkLmApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuXG4gICAgICAgIGNvbnN0IHR5cGUgPSBpc1N0cmluZyh0eXBlT3JDbGFzcykgPyB0eXBlT3JDbGFzcyA6IHR5cGVPckNsYXNzLlR5cGVOYW1lO1xuICAgICAgICBjb25zdCBuYXRpdmVNYW5hZ2VyID0gdGhpcy5fc2NlbmUuX2NvbXBvbmVudHMuZ2V0TmF0aXZlTWFuYWdlcih0eXBlKTtcbiAgICAgICAgY29uc3QgaXNOYXRpdmUgPSBuYXRpdmVNYW5hZ2VyICE9PSBudWxsO1xuICAgICAgICBjb25zdCBtYW5hZ2VyID0gaXNOYXRpdmUgPyBuYXRpdmVNYW5hZ2VyIDogdGhpcy5fc2NlbmUuX2NvbXBvbmVudHMuanM7XG5cbiAgICAgICAgbGV0IGNvbXBvbmVudElkID0gLTE7XG4gICAgICAgIGlmICghaXNOYXRpdmUpIHtcbiAgICAgICAgICAgIC8qIEphdmFTY3JpcHQgY29tcG9uZW50ICovXG4gICAgICAgICAgICBpZiAoISh0eXBlIGluIHdhc20uX2NvbXBvbmVudFR5cGVJbmRpY2VzKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmtub3duIGNvbXBvbmVudCB0eXBlICdcIiArIHR5cGUgKyBcIidcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb21wb25lbnRJZCA9IHdhc20uX3dsX29iamVjdF9hZGRfanNfY29tcG9uZW50KFxuICAgICAgICAgICAgICAgIHRoaXMuX2lkLFxuICAgICAgICAgICAgICAgIHdhc20uX2NvbXBvbmVudFR5cGVJbmRpY2VzW3R5cGVdXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLyogbmF0aXZlIGNvbXBvbmVudCAqL1xuICAgICAgICAgICAgY29tcG9uZW50SWQgPSB3YXNtLl93bF9vYmplY3RfYWRkX2NvbXBvbmVudCh0aGlzLl9pZCwgbWFuYWdlcik7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjb21wb25lbnQgPSB0aGlzLl9zY2VuZS5fY29tcG9uZW50cy53cmFwQW55KG1hbmFnZXIsIGNvbXBvbmVudElkKSE7XG5cbiAgICAgICAgaWYgKHBhcmFtcyAhPT0gdW5kZWZpbmVkKSBjb21wb25lbnQuY29weShwYXJhbXMgYXMgQ29tcG9uZW50KTtcblxuICAgICAgICAvKiBFeHBsaWNpdGx5IGluaXRpYWxpemUganMgY29tcG9uZW50cyAqL1xuICAgICAgICBpZiAoIWlzTmF0aXZlKSB7XG4gICAgICAgICAgICBjb21wb25lbnQuX3RyaWdnZXJJbml0KCk7XG4gICAgICAgICAgICAvKiBzdGFydCgpIGlzIGNhbGxlZCB0aHJvdWdoIG9uQWN0aXZhdGUoKSAqL1xuICAgICAgICB9XG5cbiAgICAgICAgLyogSWYgaXQgd2FzIG5vdCBleHBsaWNpdGx5IHJlcXVlc3RlZCBieSB0aGUgdXNlciB0byBsZWF2ZSB0aGUgY29tcG9uZW50IGluYWN0aXZlLFxuICAgICAgICAgKiB3ZSBhY3RpdmF0ZSBpdCBhcyBhIGZpbmFsIHN0ZXAuIFRoaXMgaW52YWxpZGF0ZXMgY29tcG9uZW50SW5kZXghICovXG4gICAgICAgIGlmICghcGFyYW1zIHx8ICEoJ2FjdGl2ZScgaW4gcGFyYW1zICYmICFwYXJhbXMuYWN0aXZlKSkge1xuICAgICAgICAgICAgY29tcG9uZW50LmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY29tcG9uZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlYXJjaCBmb3IgZGVzY2VuZGFudHMgbWF0Y2hpbmcgdGhlIG5hbWUuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBhIHdyYXBwZXIgYXJvdW5kIHtAbGluayBPYmplY3QzRC5maW5kQnlOYW1lRGlyZWN0fSBhbmRcbiAgICAgKiB7QGxpbmsgT2JqZWN0M0QuZmluZEJ5TmFtZVJlY3Vyc2l2ZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSB0byBzZWFyY2ggZm9yLlxuICAgICAqIEBwYXJhbSByZWN1cnNpdmUgSWYgYHRydWVgLCB0aGUgbWV0aG9kIHdpbGwgbG9vayBhdCBhbGwgdGhlIGRlc2NlbmRhbnRzIG9mIHRoaXMgb2JqZWN0LlxuICAgICAqICAgICBJZiBgZmFsc2VgLCB0aGlzIG1ldGhvZCB3aWxsIG9ubHkgcGVyZm9ybSB0aGUgc2VhcmNoIGluIGRpcmVjdCBjaGlsZHJlbi5cbiAgICAgKiBAcmV0dXJucyBBbiBhcnJheSBvZiB7QGxpbmsgT2JqZWN0M0R9IG1hdGNoaW5nIHRoZSBuYW1lLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMS4wXG4gICAgICovXG4gICAgZmluZEJ5TmFtZShuYW1lOiBzdHJpbmcsIHJlY3Vyc2l2ZSA9IGZhbHNlKTogT2JqZWN0M0RbXSB7XG4gICAgICAgIHJldHVybiByZWN1cnNpdmUgPyB0aGlzLmZpbmRCeU5hbWVSZWN1cnNpdmUobmFtZSkgOiB0aGlzLmZpbmRCeU5hbWVEaXJlY3QobmFtZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VhcmNoIGZvciBhbGwgKipkaXJlY3QqKiBjaGlsZHJlbiBtYXRjaGluZyB0aGUgbmFtZS5cbiAgICAgKlxuICAgICAqIEBub3RlIEV2ZW4gdGhvdWdoIHRoaXMgbWV0aG9kIGlzIGhlYXZpbHkgb3B0aW1pemVkLCBpdCBkb2VzIHBlcmZvcm1cbiAgICAgKiBhIGxpbmVhciBzZWFyY2ggdG8gZmluZCB0aGUgb2JqZWN0cy4gRG8gbm90IHVzZSBpbiBhIGhvdCBwYXRoLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgdG8gc2VhcmNoIGZvci5cbiAgICAgKiBAcmV0dXJucyBBbiBhcnJheSBvZiB7QGxpbmsgT2JqZWN0M0R9IG1hdGNoaW5nIHRoZSBuYW1lLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMS4wXG4gICAgICovXG4gICAgZmluZEJ5TmFtZURpcmVjdChuYW1lOiBzdHJpbmcpOiBPYmplY3QzRFtdIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBpZCA9IHRoaXMuX2lkO1xuXG4gICAgICAgIC8qIERpdmlkZSBieSA0IHRvIGdldCBoYWxmIGFzIG1hbnkgdXNob3J0IGFzIHBvc3NpYmxlICovXG4gICAgICAgIGNvbnN0IHRlbXBTaXplVTE2ID0gd2FzbS5fdGVtcE1lbVNpemUgPj4gMjtcbiAgICAgICAgY29uc3QgbWF4Q291bnQgPSB0ZW1wU2l6ZVUxNiAtIDI7IC8qIFJlc2VydmUgdHdvIHVzaG9ydCAqL1xuXG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IHdhc20uX3RlbXBNZW1VaW50MTY7XG4gICAgICAgIGJ1ZmZlclttYXhDb3VudF0gPSAwOyAvKiBJbmRleCBvZmZzZXQgKi9cbiAgICAgICAgYnVmZmVyW21heENvdW50ICsgMV0gPSAwOyAvKiBjaGlsZCBjb3VudCAqL1xuXG4gICAgICAgIGNvbnN0IGJ1ZmZlclB0ciA9IHdhc20uX3RlbXBNZW07XG4gICAgICAgIGNvbnN0IGluZGV4UHRyID0gYnVmZmVyUHRyICsgbWF4Q291bnQgKiAyO1xuICAgICAgICBjb25zdCBjaGlsZENvdW50UHRyID0gYnVmZmVyUHRyICsgbWF4Q291bnQgKiAyICsgMjtcbiAgICAgICAgY29uc3QgbmFtZVB0ciA9IHdhc20udGVtcFVURjgobmFtZSwgKG1heENvdW50ICsgMikgKiAyKTtcblxuICAgICAgICBjb25zdCByZXN1bHQ6IE9iamVjdDNEW10gPSBbXTtcbiAgICAgICAgbGV0IHJlYWQgPSAwO1xuICAgICAgICB3aGlsZSAoXG4gICAgICAgICAgICAocmVhZCA9IHdhc20uX3dsX29iamVjdF9maW5kQnlOYW1lKFxuICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgIG5hbWVQdHIsXG4gICAgICAgICAgICAgICAgaW5kZXhQdHIsXG4gICAgICAgICAgICAgICAgY2hpbGRDb3VudFB0cixcbiAgICAgICAgICAgICAgICBidWZmZXJQdHIsXG4gICAgICAgICAgICAgICAgbWF4Q291bnRcbiAgICAgICAgICAgICkpXG4gICAgICAgICkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWFkOyArK2kpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh0aGlzLl9zY2VuZS53cmFwKGJ1ZmZlcltpXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZWFyY2ggZm9yICoqYWxsIGRlc2NlbmRhbnRzKiogbWF0Y2hpbmcgdGhlIG5hbWUuXG4gICAgICpcbiAgICAgKiBAbm90ZSBFdmVuIHRob3VnaCB0aGlzIG1ldGhvZCBpcyBoZWF2aWx5IG9wdGltaXplZCwgaXQgZG9lcyBwZXJmb3JtXG4gICAgICogYSBsaW5lYXIgc2VhcmNoIHRvIGZpbmQgdGhlIG9iamVjdHMuIERvIG5vdCB1c2UgaW4gYSBob3QgcGF0aC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIHRvIHNlYXJjaCBmb3IuXG4gICAgICogQHJldHVybnMgQW4gYXJyYXkgb2Yge0BsaW5rIE9iamVjdDNEfSBtYXRjaGluZyB0aGUgbmFtZS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjEuMFxuICAgICAqL1xuICAgIGZpbmRCeU5hbWVSZWN1cnNpdmUobmFtZTogc3RyaW5nKTogT2JqZWN0M0RbXSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgaWQgPSB0aGlzLl9pZDtcblxuICAgICAgICAvKiBEaXZpZGUgYnkgNCB0byBnZXQgaGFsZiBhcyBtYW55IHVzaG9ydCBhcyBwb3NzaWJsZSAqL1xuICAgICAgICBjb25zdCB0ZW1wU2l6ZVUxNiA9IHdhc20uX3RlbXBNZW1TaXplID4+IDI7XG4gICAgICAgIGNvbnN0IG1heENvdW50ID0gdGVtcFNpemVVMTYgLSAxOyAvKiBSZXNlcnZlIG9uZSB1c2hvcnQgKi9cblxuICAgICAgICBjb25zdCBidWZmZXIgPSB3YXNtLl90ZW1wTWVtVWludDE2O1xuICAgICAgICBidWZmZXJbbWF4Q291bnRdID0gMDsgLyogSW5kZXggb2Zmc2V0ICovXG5cbiAgICAgICAgY29uc3QgYnVmZmVyUHRyID0gd2FzbS5fdGVtcE1lbTtcbiAgICAgICAgY29uc3QgaW5kZXhQdHIgPSBidWZmZXJQdHIgKyBtYXhDb3VudCAqIDI7XG4gICAgICAgIGNvbnN0IG5hbWVQdHIgPSB3YXNtLnRlbXBVVEY4KG5hbWUsIChtYXhDb3VudCArIDEpICogMik7XG5cbiAgICAgICAgbGV0IHJlYWQgPSAwO1xuICAgICAgICBjb25zdCByZXN1bHQ6IE9iamVjdDNEW10gPSBbXTtcbiAgICAgICAgd2hpbGUgKFxuICAgICAgICAgICAgKHJlYWQgPSB3YXNtLl93bF9vYmplY3RfZmluZEJ5TmFtZVJlY3Vyc2l2ZShcbiAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICBuYW1lUHRyLFxuICAgICAgICAgICAgICAgIGluZGV4UHRyLFxuICAgICAgICAgICAgICAgIGJ1ZmZlclB0cixcbiAgICAgICAgICAgICAgICBtYXhDb3VudFxuICAgICAgICAgICAgKSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlYWQ7ICsraSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHRoaXMuX3NjZW5lLndyYXAoYnVmZmVyW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgZ2l2ZW4gb2JqZWN0J3MgdHJhbnNmb3JtYXRpb24gaGFzIGNoYW5nZWQuXG4gICAgICovXG4gICAgZ2V0IGNoYW5nZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfaXNfY2hhbmdlZCh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogYHRydWVgIGlmIHRoZSBvYmplY3QgaXMgZGVzdHJveWVkLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIElmIHtAbGluayBXb25kZXJsYW5kRW5naW5lLmVyYXNlUHJvdG90eXBlT25EZXN0cm95fSBpcyBgdHJ1ZWAsXG4gICAgICogcmVhZGluZyBhIGN1c3RvbSBwcm9wZXJ0eSB3aWxsIG5vdCB3b3JrOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBlbmdpbmUuZXJhc2VQcm90b3R5cGVPbkRlc3Ryb3kgPSB0cnVlO1xuICAgICAqXG4gICAgICogY29uc3Qgb2JqID0gc2NlbmUuYWRkT2JqZWN0KCk7XG4gICAgICogb2JqLmN1c3RvbVBhcmFtID0gJ0hlbGxvIFdvcmxkISc7XG4gICAgICpcbiAgICAgKiBjb25zb2xlLmxvZyhvYmouaXNEZXN0cm95ZWQpOyAvLyBQcmludHMgYGZhbHNlYFxuICAgICAqIG9iai5kZXN0cm95KCk7XG4gICAgICogY29uc29sZS5sb2cob2JqLmlzRGVzdHJveWVkKTsgLy8gUHJpbnRzIGB0cnVlYFxuICAgICAqIGNvbnNvbGUubG9nKG9iai5jdXN0b21QYXJhbSk7IC8vIFRocm93cyBhbiBlcnJvclxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMS4xXG4gICAgICovXG4gICAgZ2V0IGlzRGVzdHJveWVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faWQgPCAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGB0cnVlYCBpZiB0aGUgb2JqZWN0IGlzIG1hcmtlZCBhcyBkZXN0cm95ZWQuXG4gICAgICpcbiAgICAgKiBUaGlzIGJvb2xlYW4gd2lsbCBvbmx5IGV2ZXIgYmUgYHRydWVgIHdoZW4gcmVhZGluZyBvYmplY3RzIHN0YXRlXG4gICAgICogZnJvbSB0aGUge0BsaW5rIENvbXBvbmVudC5vbkRlc3Ryb3l9IGNhbGxiYWNrLCBpLmUuLFxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBpbXBvcnQge0NvbXBvbmVudH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbiAgICAgKiBjbGFzcyBDbGVhbnVwQ29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAgKiAgICAgb25EZXN0cm95KCkge1xuICAgICAqICAgICAgICAgaWYgKHRoaXMub2JqZWN0Lm1hcmtlZERlc3Ryb3llZCkge1xuICAgICAqICAgICAgICAgICAgIC8vIHRoaXMgb2JqZWN0IGlzIGdldHRpbmcgcmVtb3ZlZFxuICAgICAqICAgICAgICAgfSBlbHNlIHtcbiAgICAgKiAgICAgICAgICAgICAvLyBUaGUgY29tcG9uZW50IGlzIGdldHRpbmcgZGVzdHJveWVkLCB0aGUgb2JqZWN0IHdpbGxcbiAgICAgKiAgICAgICAgICAgICAvLyBzdGlsbCBleGlzdCBhZnRlciB0aGUgZGVzdHJ1Y3Rpb24gY2FsbFxuICAgICAqICAgICAgICAgfVxuICAgICAqICAgICB9XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQ2VydGFpbiBvcGVyYXRpb25zIGFyZSBmb3JiaWRkZW4gd2hlbiBhbiBvYmplY3QgaXMgcGVuZGluZyBkZXN0cnVjdGlvbjpcbiAgICAgKiAtIFJlcGFyZW50aW5nIHRoZSBvYmplY3QgdmlhIHtAbGluayBwYXJlbnR9XG4gICAgICogLSB7QGxpbmsgYWRkQ29tcG9uZW50fVxuICAgICAqIC0ge0BsaW5rIFNjZW5lLmFkZE9iamVjdH1cbiAgICAgKiAtIHtAbGluayBTY2VuZS5kZXN0cm95fVxuICAgICAqL1xuICAgIGdldCBtYXJrZWREZXN0cm95ZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBpZiAoIXdhc20uX3dsX29iamVjdF9tYXJrZWREZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIC8qKiBAdG9kbygxLjMuMCk6IFJlbW92ZSBjaGVjayBmb3IgcnVudGltZSA8IDEuMi4yICovXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEhd2FzbS5fd2xfb2JqZWN0X21hcmtlZERlc3Ryb3llZCh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGVxdWFsaXR5IGJ5IGNvbXBhcmluZyBpZHMgYW5kICoqbm90KiogdGhlIEphdmFTY3JpcHQgcmVmZXJlbmNlLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZSBVc2UgSmF2YVNjcmlwdCByZWZlcmVuY2UgY29tcGFyaXNvbiBpbnN0ZWFkOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBvYmplY3RBID0gc2NlbmUuYWRkT2JqZWN0KCk7XG4gICAgICogY29uc3Qgb2JqZWN0QiA9IHNjZW5lLmFkZE9iamVjdCgpO1xuICAgICAqIGNvbnN0IG9iamVjdEMgPSBvYmplY3RCO1xuICAgICAqIGNvbnNvbGUubG9nKG9iamVjdEEgPT09IG9iamVjdEIpOyAvLyBmYWxzZVxuICAgICAqIGNvbnNvbGUubG9nKG9iamVjdEEgPT09IG9iamVjdEEpOyAvLyB0cnVlXG4gICAgICogY29uc29sZS5sb2cob2JqZWN0QiA9PT0gb2JqZWN0Qyk7IC8vIHRydWVcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBlcXVhbHMob3RoZXJPYmplY3Q6IE9iamVjdDNEIHwgdW5kZWZpbmVkIHwgbnVsbCk6IGJvb2xlYW4ge1xuICAgICAgICAvKiogQHRvZG8oMi4wLjApOiBSZW1vdmUgdGhpcyBtZXRob2QuICovXG4gICAgICAgIGlmICghb3RoZXJPYmplY3QpIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lkID09IG90aGVyT2JqZWN0Ll9pZDtcbiAgICB9XG5cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAnT2JqZWN0M0QoZGVzdHJveWVkKSc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGBPYmplY3QzRCgnJHt0aGlzLm5hbWV9JywgJHt0aGlzLl9sb2NhbElkfSlgO1xuICAgIH1cbn1cblxuLyoqXG4gKiBXcmFwcGVyIGFyb3VuZCBhIG5hdGl2ZSBza2luIGRhdGEuXG4gKi9cbmV4cG9ydCBjbGFzcyBTa2luIGV4dGVuZHMgU2NlbmVSZXNvdXJjZSB7XG4gICAgLyoqIEFtb3VudCBvZiBqb2ludHMgaW4gdGhpcyBza2luLiAqL1xuICAgIGdldCBqb2ludENvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfc2tpbl9nZXRfam9pbnRfY291bnQodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKiBKb2ludHMgb2JqZWN0IGlkcyBmb3IgdGhpcyBza2luICovXG4gICAgZ2V0IGpvaW50SWRzKCk6IFVpbnQxNkFycmF5IHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHJldHVybiBuZXcgVWludDE2QXJyYXkoXG4gICAgICAgICAgICB3YXNtLkhFQVBVMTYuYnVmZmVyLFxuICAgICAgICAgICAgd2FzbS5fd2xfc2tpbl9qb2ludF9pZHModGhpcy5faWQpLFxuICAgICAgICAgICAgdGhpcy5qb2ludENvdW50XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRHVhbCBxdWF0ZXJuaW9ucyBpbiBhIGZsYXQgYXJyYXkgb2Ygc2l6ZSA4IHRpbWVzIHtAbGluayBqb2ludENvdW50fS5cbiAgICAgKlxuICAgICAqIEludmVyc2UgYmluZCB0cmFuc2Zvcm1zIG9mIHRoZSBza2luLlxuICAgICAqL1xuICAgIGdldCBpbnZlcnNlQmluZFRyYW5zZm9ybXMoKTogRmxvYXQzMkFycmF5IHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KFxuICAgICAgICAgICAgd2FzbS5IRUFQRjMyLmJ1ZmZlcixcbiAgICAgICAgICAgIHdhc20uX3dsX3NraW5faW52ZXJzZV9iaW5kX3RyYW5zZm9ybXModGhpcy5faWQpLFxuICAgICAgICAgICAgOCAqIHRoaXMuam9pbnRDb3VudFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZlY3RvcnMgaW4gYSBmbGF0IGFycmF5IG9mIHNpemUgMyB0aW1lcyB7QGxpbmsgam9pbnRDb3VudH0uXG4gICAgICpcbiAgICAgKiBJbnZlcnNlIGJpbmQgc2NhbGluZ3Mgb2YgdGhlIHNraW4uXG4gICAgICovXG4gICAgZ2V0IGludmVyc2VCaW5kU2NhbGluZ3MoKTogRmxvYXQzMkFycmF5IHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KFxuICAgICAgICAgICAgd2FzbS5IRUFQRjMyLmJ1ZmZlcixcbiAgICAgICAgICAgIHdhc20uX3dsX3NraW5faW52ZXJzZV9iaW5kX3NjYWxpbmdzKHRoaXMuX2lkKSxcbiAgICAgICAgICAgIDMgKiB0aGlzLmpvaW50Q291bnRcbiAgICAgICAgKTtcbiAgICB9XG59XG5cbi8qKlxuICogV3JhcHBlciBhcm91bmQgYSBuYXRpdmUgc2V0IG9mIG1vcnBoIHRhcmdldHMuXG4gKlxuICogIyMgVXNhZ2VcbiAqXG4gKiBgYGBqc1xuICogY29uc3QgbWVzaCA9IG9iamVjdC5nZXRDb21wb25lbnQoJ21lc2gnKTtcbiAqIGNvbnN0IG1vdXRoVGFyZ2V0ID0gbWVzaC5tb3JwaFRhcmdldHMuZ2V0VGFyZ2V0SW5kZXgoJ21vdXRoJyk7XG4gKiBtZXNoLnNldE1vcnBoVGFyZ2V0V2VpZ2h0KG1vdXRoVGFyZ2V0LCAwLjUpO1xuICogYGBgXG4gKlxuICogQHNpbmNlIDEuMi4wXG4gKi9cbmV4cG9ydCBjbGFzcyBNb3JwaFRhcmdldHMgZXh0ZW5kcyBSZXNvdXJjZSB7XG4gICAgLyoqIEFtb3VudCBvZiB0YXJnZXRzIGluIHRoaXMgbW9ycGggdGFyZ2V0IHNldC4gKi9cbiAgICBnZXQgY291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9tb3JwaF90YXJnZXRzX2dldF90YXJnZXRfY291bnQodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKiBSZXR1cm5zIHRoZSBuYW1lIG9mIGEgZ2l2ZW4gdGFyZ2V0ICovXG4gICAgZ2V0VGFyZ2V0TmFtZSh0YXJnZXQ6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGlmICh0YXJnZXQgPj0gdGhpcy5jb3VudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbmRleCAke3RhcmdldH0gaXMgb3V0IG9mIGJvdW5kcyBmb3IgJHt0aGlzLmNvdW50fSB0YXJnZXRzYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHJldHVybiB3YXNtLlVURjhUb1N0cmluZyh3YXNtLl93bF9tb3JwaF90YXJnZXRzX2dldF90YXJnZXRfbmFtZSh0aGlzLl9pZCwgdGFyZ2V0KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBpbmRleCBmb3IgYSBnaXZlbiB0YXJnZXQgbmFtZS5cbiAgICAgKlxuICAgICAqIFRocm93cyBpZiBubyB0YXJnZXQgd2l0aCB0aGF0IG5hbWUgZXhpc3RzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWUgTmFtZSBvZiB0aGUgdGFyZ2V0LlxuICAgICAqL1xuICAgIGdldFRhcmdldEluZGV4KG5hbWU6IHN0cmluZyk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBpbmRleCA9IHdhc20uX3dsX21vcnBoX3RhcmdldHNfZ2V0X3RhcmdldF9pbmRleChcbiAgICAgICAgICAgIHRoaXMuX2lkLFxuICAgICAgICAgICAgd2FzbS50ZW1wVVRGOChuYW1lKVxuICAgICAgICApO1xuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgTWlzc2luZyB0YXJnZXQgJyR7bmFtZX0nYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH1cbn1cblxuLyogRm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgd2l0aCA8IDEuMC4wLiAqL1xuZXhwb3J0IHtPYmplY3QzRCBhcyBPYmplY3R9O1xuXG4vKipcbiAqIFJheSBoaXQuXG4gKlxuICogUmVzdWx0IG9mIGEge0BsaW5rIFNjZW5lLnJheUNhc3R9IG9yIHtAbGluayBQaHlzaWNzLnJheUNhc3R9LlxuICpcbiAqIEBub3RlIHRoaXMgY2xhc3Mgd3JhcHMgaW50ZXJuYWwgZW5naW5lIGRhdGEgYW5kIHNob3VsZCBvbmx5IGJlIGNyZWF0ZWQgaW50ZXJuYWxseS5cbiAqL1xuZXhwb3J0IGNsYXNzIFJheUhpdCB7XG4gICAgLyoqIFNjZW5lIGluc3RhbmNlLiBAaGlkZGVuICovXG4gICAgcmVhZG9ubHkgX3NjZW5lOiBTY2VuZTtcblxuICAgIC8qKiBQb2ludGVyIHRvIHRoZSBtZW1vcnkgaGVhcC4gKi9cbiAgICBwcml2YXRlIF9wdHI6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBwdHIgUG9pbnRlciB0byB0aGUgcmF5IGhpdHMgbWVtb3J5LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNjZW5lOiBTY2VuZSwgcHRyOiBudW1iZXIpIHtcbiAgICAgICAgaWYgKChwdHIgJiAzKSAhPT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNhbGlnbmVkIHBvaW50ZXI6IHBsZWFzZSByZXBvcnQgYSBidWcnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zY2VuZSA9IHNjZW5lO1xuICAgICAgICB0aGlzLl9wdHIgPSBwdHI7XG4gICAgfVxuXG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldExvY2F0aW9ucygpOiBGbG9hdDMyQXJyYXlbXTtcbiAgICAvKipcbiAgICAgKiBBcnJheSBvZiByYXkgaGl0IGxvY2F0aW9ucy5cbiAgICAgKlxuICAgICAqICMjIyMgVXNhZ2VcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgaGl0ID0gZW5naW5lLnBoeXNpY3MucmF5Q2FzdCgpO1xuICAgICAqIGlmIChoaXQuaGl0Q291bnQgPiAwKSB7XG4gICAgICogICAgIGNvbnN0IGxvY2F0aW9ucyA9IGhpdC5nZXRMb2NhdGlvbnMoKTtcbiAgICAgKiAgICAgY29uc29sZS5sb2coYE9iamVjdCBoaXQgYXQ6ICR7bG9jYXRpb25zWzBdWzBdfSwgJHtsb2NhdGlvbnNbMF1bMV19LCAke2xvY2F0aW9uc1swXVsyXX1gKTtcbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IERlc3RpbmF0aW9uIGFycmF5IG9mIGFycmF5cy92ZWN0b3JzLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0XG4gICAgICogICAgIGB0aGlzLmhpdENvdW50YCBlbGVtZW50cy4gRWFjaCBhcnJheSBpcyBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDMgZWxlbWVudHMuXG4gICAgICogQHJldHVybnMgVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBnZXRMb2NhdGlvbnM8VCBleHRlbmRzIE51bWJlckFycmF5W10+KG91dDogVCk6IFQ7XG4gICAgZ2V0TG9jYXRpb25zKG91dD86IE51bWJlckFycmF5W10pOiBOdW1iZXJBcnJheVtdIHtcbiAgICAgICAgb3V0ID0gb3V0ID8/IEFycmF5LmZyb20oe2xlbmd0aDogdGhpcy5oaXRDb3VudH0sICgpID0+IG5ldyBGbG9hdDMyQXJyYXkoMykpO1xuXG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBhbGlnbmVkUHRyID0gdGhpcy5fcHRyIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5oaXRDb3VudDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBsb2NhdGlvblB0ciA9IGFsaWduZWRQdHIgKyAzICogaTtcbiAgICAgICAgICAgIG91dFtpXVswXSA9IHdhc20uSEVBUEYzMltsb2NhdGlvblB0cl07XG4gICAgICAgICAgICBvdXRbaV1bMV0gPSB3YXNtLkhFQVBGMzJbbG9jYXRpb25QdHIgKyAxXTtcbiAgICAgICAgICAgIG91dFtpXVsyXSA9IHdhc20uSEVBUEYzMltsb2NhdGlvblB0ciArIDJdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuXG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldE5vcm1hbHMoKTogRmxvYXQzMkFycmF5W107XG4gICAgLyoqXG4gICAgICogQXJyYXkgb2YgcmF5IGhpdCBub3JtYWxzIChvbmx5IHdoZW4gdXNpbmcge0BsaW5rIFBoeXNpY3MjcmF5Q2FzdH0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IERlc3RpbmF0aW9uIGFycmF5IG9mIGFycmF5cy92ZWN0b3JzLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0XG4gICAgICogICAgIGB0aGlzLmhpdENvdW50YCBlbGVtZW50cy4gRWFjaCBhcnJheSBpcyBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDMgZWxlbWVudHMuXG4gICAgICogQHJldHVybnMgVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBnZXROb3JtYWxzPFQgZXh0ZW5kcyBOdW1iZXJBcnJheVtdPihvdXQ6IFQpOiBUO1xuICAgIGdldE5vcm1hbHMob3V0PzogTnVtYmVyQXJyYXlbXSk6IE51bWJlckFycmF5W10ge1xuICAgICAgICBvdXQgPSBvdXQgPz8gQXJyYXkuZnJvbSh7bGVuZ3RoOiB0aGlzLmhpdENvdW50fSwgKCkgPT4gbmV3IEZsb2F0MzJBcnJheSgzKSk7XG5cbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGFsaWduZWRQdHIgPSAodGhpcy5fcHRyICsgNDgpIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5oaXRDb3VudDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBub3JtYWxQdHIgPSBhbGlnbmVkUHRyICsgMyAqIGk7XG4gICAgICAgICAgICBvdXRbaV1bMF0gPSB3YXNtLkhFQVBGMzJbbm9ybWFsUHRyXTtcbiAgICAgICAgICAgIG91dFtpXVsxXSA9IHdhc20uSEVBUEYzMltub3JtYWxQdHIgKyAxXTtcbiAgICAgICAgICAgIG91dFtpXVsyXSA9IHdhc20uSEVBUEYzMltub3JtYWxQdHIgKyAyXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXREaXN0YW5jZXMoKTogRmxvYXQzMkFycmF5O1xuICAgIC8qKlxuICAgICAqIFByZWZlciB0aGVzZSB0byByZWNhbGN1bGF0aW5nIHRoZSBkaXN0YW5jZSBmcm9tIGxvY2F0aW9ucy5cbiAgICAgKlxuICAgICAqIERpc3RhbmNlcyBvZiBhcnJheSBoaXRzIHRvIHJheSBvcmlnaW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IERlc3RpbmF0aW9uIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCB0aGlzLmhpdENvdW50IGVsZW1lbnRzLlxuICAgICAqIEByZXR1cm5zIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICovXG4gICAgZ2V0RGlzdGFuY2VzPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBUKTogVDtcbiAgICBnZXREaXN0YW5jZXMob3V0OiBOdW1iZXJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5oaXRDb3VudCkpOiBOdW1iZXJBcnJheSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBhbGlnbmVkUHRyID0gKHRoaXMuX3B0ciArIDQ4ICogMikgLyA0OyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmhpdENvdW50OyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlUHRyID0gYWxpZ25lZFB0ciArIGk7XG4gICAgICAgICAgICBvdXRbaV0gPSB3YXNtLkhFQVBGMzJbZGlzdGFuY2VQdHJdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXJyYXkgb2YgaGl0IG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IERlc3RpbmF0aW9uIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCBgdGhpcy5oaXRDb3VudGAgZWxlbWVudHMuXG4gICAgICogQHJldHVybnMgVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBnZXRPYmplY3RzKG91dDogT2JqZWN0M0RbXSA9IG5ldyBBcnJheSh0aGlzLmhpdENvdW50KSk6IE9iamVjdDNEW10ge1xuICAgICAgICBjb25zdCBIRUFQVTE2ID0gdGhpcy5lbmdpbmUud2FzbS5IRUFQVTE2O1xuICAgICAgICBjb25zdCBhbGlnbmVkUHRyID0gKHRoaXMuX3B0ciArICg0OCAqIDIgKyAxNikpID4+IDE7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5oaXRDb3VudDsgKytpKSB7XG4gICAgICAgICAgICBvdXRbaV0gPSB0aGlzLl9zY2VuZS53cmFwKEhFQVBVMTZbYWxpZ25lZFB0ciArIGldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKiBIb3N0aW5nIGVuZ2luZSBpbnN0YW5jZS4gKi9cbiAgICBnZXQgZW5naW5lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2NlbmUuZW5naW5lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8ge0BsaW5rIFJheUhpdC5nZXRMb2NhdGlvbnN9LlxuICAgICAqXG4gICAgICogQG5vdGUgUHJlZmVyIHRvIHVzZSB7QGxpbmsgUmF5SGl0LmdldExvY2F0aW9uc30gZm9yIHBlcmZvcm1hbmNlLlxuICAgICAqL1xuICAgIGdldCBsb2NhdGlvbnMoKTogRmxvYXQzMkFycmF5W10ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRMb2NhdGlvbnMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBSYXlIaXQuZ2V0Tm9ybWFsc30uXG4gICAgICpcbiAgICAgKiBAbm90ZSBQcmVmZXIgdG8gdXNlIHtAbGluayBSYXlIaXQuZ2V0Tm9ybWFsc30gZm9yIHBlcmZvcm1hbmNlLlxuICAgICAqL1xuICAgIGdldCBub3JtYWxzKCk6IEZsb2F0MzJBcnJheVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Tm9ybWFscygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8ge0BsaW5rIFJheUhpdC5nZXREaXN0YW5jZXN9LlxuICAgICAqXG4gICAgICogQG5vdGUgUHJlZmVyIHRvIHVzZSB7QGxpbmsgUmF5SGl0LmdldERpc3RhbmNlc30gZm9yIHBlcmZvcm1hbmNlLlxuICAgICAqL1xuICAgIGdldCBkaXN0YW5jZXMoKTogRmxvYXQzMkFycmF5IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RGlzdGFuY2VzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byB7QGxpbmsgUmF5SGl0LmdldE9iamVjdHN9LlxuICAgICAqXG4gICAgICogQG5vdGUgUHJlZmVyIHRvIHVzZSB7QGxpbmsgUmF5SGl0LmdldE9iamVjdHN9IGZvciBwZXJmb3JtYW5jZS5cbiAgICAgKi9cbiAgICBnZXQgb2JqZWN0cygpOiAoT2JqZWN0M0QgfCBudWxsKVtdIHtcbiAgICAgICAgLyoqIEB0b2RvOiBSZW1vdmUgYXQgMi4wLjAsIHRoaXMgaXMga2VwdCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eS4gKi9cbiAgICAgICAgY29uc3Qgb2JqZWN0czogKE9iamVjdDNEIHwgbnVsbClbXSA9IFtudWxsLCBudWxsLCBudWxsLCBudWxsXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T2JqZWN0cyhvYmplY3RzIGFzIE9iamVjdDNEW10pO1xuICAgIH1cblxuICAgIC8qKiBOdW1iZXIgb2YgaGl0cyAobWF4IDQpICovXG4gICAgZ2V0IGhpdENvdW50KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBNYXRoLm1pbih0aGlzLmVuZ2luZS53YXNtLkhFQVBVMzJbdGhpcy5fcHRyIC8gNCArIDMwXSwgNCk7XG4gICAgfVxufVxuXG5jbGFzcyBtYXRoIHtcbiAgICAvKiogKEV4cGVyaW1lbnRhbCEpIEN1YmljIEhlcm1pdGUgc3BsaW5lIGludGVycG9sYXRpb24gZm9yIHZlY3RvcjMgYW5kIHF1YXRlcm5pb25zLlxuICAgICAqXG4gICAgICogV2l0aCBgZiA9PSAwYCwgYG91dGAgd2lsbCBiZSBgYmAsIGlmIGBmID09IDFgLCBgb3V0YCB3aWxsIGJlIGMuXG4gICAgICpcbiAgICAgKiBXaGV0aGVyIGEgcXVhdGVybmlvbiBvciB2ZWN0b3IzIGludGVycG9sYXRpb24gaXMgaW50ZW5kZWQgaXMgZGV0ZXJtaW5lZCBieVxuICAgICAqIGxlbmd0aCBvZiBgYWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IEFycmF5IHRvIHdyaXRlIHJlc3VsdCB0by5cbiAgICAgKiBAcGFyYW0gYSBGaXJzdCB0YW5nZW50L2hhbmRsZS5cbiAgICAgKiBAcGFyYW0gYiBGaXJzdCBwb2ludCBvciBxdWF0ZXJuaW9uLlxuICAgICAqIEBwYXJhbSBjIFNlY29uZCBwb2ludCBvciBxdWF0ZXJuaW9uLlxuICAgICAqIEBwYXJhbSBkIFNlY29uZCBoYW5kbGUuXG4gICAgICogQHBhcmFtIGYgSW50ZXJwb2xhdGlvbiBmYWN0b3IgaW4gWzA7IDFdLlxuICAgICAqIEByZXR1cm5zIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjZcbiAgICAgKi9cbiAgICBzdGF0aWMgY3ViaWNIZXJtaXRlPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4oXG4gICAgICAgIG91dDogVCxcbiAgICAgICAgYTogUmVhZG9ubHk8TnVtYmVyQXJyYXk+LFxuICAgICAgICBiOiBSZWFkb25seTxOdW1iZXJBcnJheT4sXG4gICAgICAgIGM6IFJlYWRvbmx5PE51bWJlckFycmF5PixcbiAgICAgICAgZDogUmVhZG9ubHk8TnVtYmVyQXJyYXk+LFxuICAgICAgICBmOiBudW1iZXIsXG4gICAgICAgIGVuZ2luZTogV29uZGVybGFuZEVuZ2luZSA9IFdMXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSBlbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0LnN1YmFycmF5KDApLnNldChhKTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0LnN1YmFycmF5KDQpLnNldChiKTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0LnN1YmFycmF5KDgpLnNldChjKTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0LnN1YmFycmF5KDEyKS5zZXQoZCk7XG5cbiAgICAgICAgY29uc3QgaXNRdWF0ID0gYS5sZW5ndGggPT0gNDtcblxuICAgICAgICB3YXNtLl93bF9tYXRoX2N1YmljSGVybWl0ZShcbiAgICAgICAgICAgIHdhc20uX3RlbXBNZW0gKyA0ICogMTYsXG4gICAgICAgICAgICB3YXNtLl90ZW1wTWVtICsgNCAqIDAsXG4gICAgICAgICAgICB3YXNtLl90ZW1wTWVtICsgNCAqIDQsXG4gICAgICAgICAgICB3YXNtLl90ZW1wTWVtICsgNCAqIDgsXG4gICAgICAgICAgICB3YXNtLl90ZW1wTWVtICsgNCAqIDEyLFxuICAgICAgICAgICAgZixcbiAgICAgICAgICAgIGlzUXVhdFxuICAgICAgICApO1xuICAgICAgICBvdXRbMF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMTZdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMTddO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMThdO1xuICAgICAgICBpZiAoaXNRdWF0KSBvdXRbM10gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMTldO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbn1cblxuZXhwb3J0IHttYXRofTtcblxuLyoqXG4gKiBDbGFzcyBmb3IgYWNjZXNzaW5nIGludGVybmF0aW9uYWxpemF0aW9uIChpMThuKSBmZWF0dXJlcy5cbiAqXG4gKiBBbGxvd3Mge0BsaW5rIEkxOE4ub25MYW5ndWFnZUNoYW5nZWQgXCJkZXRlY3RpbmcgbGFuZ3VhZ2UgY2hhbmdlXCJ9LFxuICoge0BsaW5rIEkxOE4ubGFuZ3VhZ2UgXCJzZXR0aW5nIHRoZSBjdXJyZW50IGxhbmd1YWdlXCJ9IG9yIHRyYW5zbGF0aW5nXG4gKiB7QGxpbmsgSTE4Ti50cmFuc2xhdGUgXCJpbmRpdmlkdWFsIHRlcm1zXCJ9LlxuICpcbiAqIEludGVybmF0aW9uYWxpemF0aW9uIHdvcmtzIHdpdGggdGVybXMsXG4gKiBhIHN0cmluZyB0eXBlIGtleXdvcmQgdGhhdCBpcyBsaW5rZWQgdG8gYSBkaWZmZXJlbnQgdGV4dCBmb3IgZWFjaCBsYW5ndWFnZS5cbiAqXG4gKiBJbnRlcm5hbGx5LCBzdHJpbmcgcGFyYW1ldGVycyBmb3IgdGV4dCBhbmQganMgY29tcG9uZW50cyBhcmVcbiAqIGF1dG9tYXRpY2FsbHkgc3dhcHBlZCBkdXJpbmcgbGFuZ3VhZ2UgY2hhbmdlLCBnaXZlbiB0aGV5IGFyZSBsaW5rZWQgdG8gYSB0ZXJtLlxuICogSWYgbWFudWFsIHRleHQgc3dhcHBpbmcgaXMgZGVzaXJlZCwge0BsaW5rIEkxOE4udHJhbnNsYXRlfVxuICogY2FuIGJlIHVzZWQgdG8gcmV0cmlldmUgdGhlIGN1cnJlbnQgdHJhbnNsYXRpb24gZm9yIGFueSB0ZXJtLlxuICpcbiAqIFlvdSBjYW4gYWxzbyB1c2UgdGhlIHtAbGluayBJMThOLm9uTGFuZ3VhZ2VDaGFuZ2VkfSB0byBtYW51YWxseSB1cGRhdGUgdGV4dFxuICogd2hlbiBhIGxhbmd1YWdlIGlzIGNoYW5nZWQgdG8gZm9yIGV4YW1wbGUgdXBkYXRlIGEgbnVtYmVyIGluIGEgc3RyaW5nLlxuICpcbiAqIEBzaW5jZSAxLjAuMFxuICovXG5leHBvcnQgY2xhc3MgSTE4TiB7XG4gICAgLyoqXG4gICAgICoge0BsaW5rIEVtaXR0ZXJ9IGZvciBsYW5ndWFnZSBjaGFuZ2UgZXZlbnRzLlxuICAgICAqXG4gICAgICogRmlyc3QgcGFyYW1ldGVyIHRvIGEgbGlzdGVuZXIgaXMgdGhlIG9sZCBsYW5ndWFnZSBpbmRleCxcbiAgICAgKiBzZWNvbmQgcGFyYW1ldGVyIGlzIHRoZSBuZXcgbGFuZ3VhZ2UgaW5kZXguXG4gICAgICpcbiAgICAgKiBVc2FnZSBmcm9tIGEgd2l0aGluIGEgY29tcG9uZW50OlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiB0aGlzLmVuZ2luZS5pMThuLm9uTGFuZ3VhZ2VDaGFuZ2VkLmFkZCgob2xkTGFuZ3VhZ2VJbmRleCwgbmV3TGFuZ3VhZ2VJbmRleCkgPT4ge1xuICAgICAqICAgICBjb25zdCBvbGRMYW5ndWFnZSA9IHRoaXMuZW5naW5lLmkxOG4ubGFuZ3VhZ2VOYW1lKG9sZExhbmd1YWdlSW5kZXgpO1xuICAgICAqICAgICBjb25zdCBuZXdMYW5ndWFnZSA9IHRoaXMuZW5naW5lLmkxOG4ubGFuZ3VhZ2VOYW1lKG5ld0xhbmd1YWdlSW5kZXgpO1xuICAgICAqICAgICBjb25zb2xlLmxvZyhcIlN3aXRjaGVkIGZyb21cIiwgb2xkTGFuZ3VhZ2UsIFwidG9cIiwgbmV3TGFuZ3VhZ2UpO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHJlYWRvbmx5IG9uTGFuZ3VhZ2VDaGFuZ2VkID0gbmV3IEVtaXR0ZXI8W251bWJlciwgbnVtYmVyXT4oKTtcblxuICAgIC8qKiBXb25kZXJsYW5kIEVuZ2luZSBpbnN0YW5jZS4gQGhpZGRlbiAqL1xuICAgIHByb3RlY3RlZCByZWFkb25seSBfZW5naW5lOiBXb25kZXJsYW5kRW5naW5lO1xuXG4gICAgLyoqIFByZXZpb3VzbHkgc2V0IGxhbmd1YWdlIGluZGV4LiBAaGlkZGVuICovXG4gICAgcHJpdmF0ZSBfcHJldkxhbmd1YWdlSW5kZXg6IG51bWJlciA9IC0xO1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbmdpbmU6IFdvbmRlcmxhbmRFbmdpbmUpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lID0gZW5naW5lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBjdXJyZW50IGxhbmd1YWdlIGFuZCBhcHBseSB0cmFuc2xhdGlvbnMgdG8gbGlua2VkIHRleHQgcGFyYW1ldGVycy5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgaXMgZXF1aXZhbGVudCB0byB7QGxpbmsgSTE4Ti5zZXRMYW5ndWFnZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29kZSBMYW5ndWFnZSBjb2RlIHRvIHN3aXRjaCB0b1xuICAgICAqL1xuICAgIHNldCBsYW5ndWFnZShjb2RlOiBzdHJpbmcgfCBudWxsKSB7XG4gICAgICAgIHRoaXMuc2V0TGFuZ3VhZ2UoY29kZSk7XG4gICAgfVxuXG4gICAgLyoqIEdldCBjdXJyZW50IGxhbmd1YWdlIGNvZGUuICovXG4gICAgZ2V0IGxhbmd1YWdlKCk6IHN0cmluZyB8IG51bGwge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGNvZGUgPSB3YXNtLl93bF9pMThuX2N1cnJlbnRMYW5ndWFnZSgpO1xuICAgICAgICBpZiAoY29kZSA9PT0gMCkgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiB3YXNtLlVURjhUb1N0cmluZyhjb2RlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgbGFuZ3VhZ2UgaW5kZXguXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBtb3JlIGVmZmljaWVudCB0aGFuIGl0cyBlcXVpdmFsZW50OlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBpbmRleCA9IGkxOG4ubGFuZ3VhZ2VJbmRleChpMThuLmxhbmd1YWdlKTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBnZXQgY3VycmVudEluZGV4KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmdpbmUud2FzbS5fd2xfaTE4bl9jdXJyZW50TGFuZ3VhZ2VJbmRleCgpO1xuICAgIH1cblxuICAgIC8qKiBQcmV2aW91cyBsYW5ndWFnZSBpbmRleC4gKi9cbiAgICBnZXQgcHJldmlvdXNJbmRleCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fcHJldkxhbmd1YWdlSW5kZXg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGN1cnJlbnQgbGFuZ3VhZ2UgYW5kIGFwcGx5IHRyYW5zbGF0aW9ucyB0byBsaW5rZWQgdGV4dCBwYXJhbWV0ZXJzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvZGUgVGhlIGxhbmd1YWdlIGNvZGUuXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgY3VycmVudCBpbmRleCBjb2RlIHdoZW4gdGhlXG4gICAgICogICAgIGxhbmd1YWdlIGlzIGxvYWRlZC5cbiAgICAgKi9cbiAgICBhc3luYyBzZXRMYW5ndWFnZShjb2RlOiBzdHJpbmcgfCBudWxsKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICAgICAgaWYgKGNvZGUgPT0gbnVsbCkgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLmN1cnJlbnRJbmRleCk7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgdGhpcy5fcHJldkxhbmd1YWdlSW5kZXggPSB0aGlzLmN1cnJlbnRJbmRleDtcbiAgICAgICAgd2FzbS5fd2xfaTE4bl9zZXRMYW5ndWFnZSh3YXNtLnRlbXBVVEY4KGNvZGUpKTtcblxuICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMuZW5naW5lLnNjZW5lO1xuXG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gd2FzbS5VVEY4VG9TdHJpbmcod2FzbS5fd2xfaTE4bl9sYW5ndWFnZUZpbGUodGhpcy5jdXJyZW50SW5kZXgpKTtcbiAgICAgICAgY29uc3QgdXJsID0gYCR7c2NlbmUuYmFzZVVSTH0vbG9jYWxlLyR7ZmlsZW5hbWV9YDtcblxuICAgICAgICBhd2FpdCBzY2VuZS5fZG93bmxvYWREZXBlbmRlbmN5KHVybCk7XG5cbiAgICAgICAgdGhpcy5vbkxhbmd1YWdlQ2hhbmdlZC5ub3RpZnkodGhpcy5fcHJldkxhbmd1YWdlSW5kZXgsIHRoaXMuY3VycmVudEluZGV4KTtcblxuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50SW5kZXg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRyYW5zbGF0ZWQgc3RyaW5nIGZvciBhIHRlcm0gZm9yIHRoZSBjdXJyZW50bHkgbG9hZGVkIGxhbmd1YWdlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRlcm0gVGVybSB0byB0cmFuc2xhdGVcbiAgICAgKi9cbiAgICB0cmFuc2xhdGUodGVybTogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgdHJhbnNsYXRpb24gPSB3YXNtLl93bF9pMThuX3RyYW5zbGF0ZSh3YXNtLnRlbXBVVEY4KHRlcm0pKTtcbiAgICAgICAgaWYgKHRyYW5zbGF0aW9uID09PSAwKSByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHdhc20uVVRGOFRvU3RyaW5nKHRyYW5zbGF0aW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG51bWJlciBvZiBsYW5ndWFnZXMgaW4gdGhlIHByb2plY3QuXG4gICAgICpcbiAgICAgKi9cbiAgICBsYW5ndWFnZUNvdW50KCk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgcmV0dXJuIHdhc20uX3dsX2kxOG5fbGFuZ3VhZ2VDb3VudCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhIGxhbmd1YWdlIGNvZGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW5kZXggSW5kZXggb2YgdGhlIGxhbmd1YWdlIHRvIGdldCB0aGUgY29kZSBmcm9tXG4gICAgICovXG4gICAgbGFuZ3VhZ2VJbmRleChjb2RlOiBzdHJpbmcpOiBudW1iZXIge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHJldHVybiB3YXNtLl93bF9pMThuX2xhbmd1YWdlSW5kZXgod2FzbS50ZW1wVVRGOChjb2RlKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGEgbGFuZ3VhZ2UgY29kZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbmRleCBJbmRleCBvZiB0aGUgbGFuZ3VhZ2UgdG8gZ2V0IHRoZSBjb2RlIGZyb21cbiAgICAgKi9cbiAgICBsYW5ndWFnZUNvZGUoaW5kZXg6IG51bWJlcik6IHN0cmluZyB8IG51bGwge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGNvZGUgPSB3YXNtLl93bF9pMThuX2xhbmd1YWdlQ29kZShpbmRleCk7XG4gICAgICAgIGlmIChjb2RlID09PSAwKSByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHdhc20uVVRGOFRvU3RyaW5nKGNvZGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhIGxhbmd1YWdlIG5hbWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW5kZXggSW5kZXggb2YgdGhlIGxhbmd1YWdlIHRvIGdldCB0aGUgbmFtZSBmcm9tXG4gICAgICovXG4gICAgbGFuZ3VhZ2VOYW1lKGluZGV4OiBudW1iZXIpOiBzdHJpbmcgfCBudWxsIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBuYW1lID0gd2FzbS5fd2xfaTE4bl9sYW5ndWFnZU5hbWUoaW5kZXgpO1xuICAgICAgICBpZiAobmFtZSA9PT0gMCkgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiB3YXNtLlVURjhUb1N0cmluZyhuYW1lKTtcbiAgICB9XG5cbiAgICAvKiogSG9zdGluZyBlbmdpbmUgaW5zdGFuY2UuICovXG4gICAgZ2V0IGVuZ2luZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZTtcbiAgICB9XG59XG5cbi8qKiBQcm9wZXJ0aWVzIG9mIGEgV2ViWFIgc2Vzc2lvbiAqL1xuZXhwb3J0IGNsYXNzIFhSIHtcbiAgICAvKiogV29uZGVybGFuZCBXQVNNIGJyaWRnZS4gQGhpZGRlbiAqL1xuICAgIHJlYWRvbmx5ICN3YXNtOiBXQVNNO1xuICAgIHJlYWRvbmx5ICNtb2RlOiBYUlNlc3Npb25Nb2RlO1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0b3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gd2FzbSBXYXNtIGJyaWRnZSBpbnN0YW5jZVxuICAgICAqIEBwYXJhbSBtb2RlIEN1cnJlbnQgWFIgc2Vzc2lvbiBtb2RlXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgY29uc3RydWN0b3Iod2FzbTogV0FTTSwgbW9kZTogWFJTZXNzaW9uTW9kZSkge1xuICAgICAgICB0aGlzLiN3YXNtID0gd2FzbTtcbiAgICAgICAgdGhpcy4jbW9kZSA9IG1vZGU7XG4gICAgfVxuXG4gICAgLyoqIEN1cnJlbnQgV2ViWFIgc2Vzc2lvbiBtb2RlICovXG4gICAgZ2V0IHNlc3Npb25Nb2RlKCk6IFhSU2Vzc2lvbk1vZGUge1xuICAgICAgICByZXR1cm4gdGhpcy4jbW9kZTtcbiAgICB9XG5cbiAgICAvKiogQ3VycmVudCBXZWJYUiBzZXNzaW9uICovXG4gICAgZ2V0IHNlc3Npb24oKTogWFJTZXNzaW9uIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3dhc20ud2VieHJfc2Vzc2lvbiE7XG4gICAgfVxuXG4gICAgLyoqIEN1cnJlbnQgV2ViWFIgZnJhbWUgKi9cbiAgICBnZXQgZnJhbWUoKTogWFJGcmFtZSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN3YXNtLndlYnhyX2ZyYW1lITtcbiAgICB9XG5cbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgcmVmZXJlbmNlU3BhY2VGb3JUeXBlKHR5cGU6ICd2aWV3ZXInKTogWFJSZWZlcmVuY2VTcGFjZTtcbiAgICAvKipcbiAgICAgKiBHZXQgYSBXZWJYUiByZWZlcmVuY2Ugc3BhY2Ugb2YgYSBnaXZlbiByZWZlcmVuY2Ugc3BhY2UgdHlwZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0eXBlIFR5cGUgb2YgcmVmZXJlbmNlIHNwYWNlIHRvIGdldFxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSBzcGFjZSwgb3IgYG51bGxgIGlmIHRoZXJlJ3Mgbm8gcmVmZXJlbmNlIHNwYWNlXG4gICAgICogICAgIG9mIHRoZSByZXF1ZXN0ZWQgdHlwZSBhdmFpbGFibGVcbiAgICAgKi9cbiAgICByZWZlcmVuY2VTcGFjZUZvclR5cGUodHlwZTogWFJSZWZlcmVuY2VTcGFjZVR5cGUpOiBYUlJlZmVyZW5jZVNwYWNlIHwgbnVsbDtcbiAgICByZWZlcmVuY2VTcGFjZUZvclR5cGUodHlwZTogWFJSZWZlcmVuY2VTcGFjZVR5cGUpOiBYUlJlZmVyZW5jZVNwYWNlIHwgbnVsbCB7XG4gICAgICAgIHJldHVybiB0aGlzLiN3YXNtLndlYnhyX3JlZlNwYWNlcyFbdHlwZV0gPz8gbnVsbDtcbiAgICB9XG5cbiAgICAvKiogU2V0IGN1cnJlbnQgcmVmZXJlbmNlIHNwYWNlIHR5cGUgdXNlZCBmb3IgcmV0cmlldmluZyBleWUsIGhlYWQsIGhhbmQgYW5kIGpvaW50IHBvc2VzICovXG4gICAgc2V0IGN1cnJlbnRSZWZlcmVuY2VTcGFjZShyZWZTcGFjZTogWFJSZWZlcmVuY2VTcGFjZSkge1xuICAgICAgICB0aGlzLiN3YXNtLndlYnhyX3JlZlNwYWNlISA9IHJlZlNwYWNlO1xuXG4gICAgICAgIHRoaXMuI3dhc20ud2VieHJfcmVmU3BhY2VUeXBlID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCB0eXBlIG9mIE9iamVjdC5rZXlzKHRoaXMuI3dhc20ud2VieHJfcmVmU3BhY2VzISkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiN3YXNtLndlYnhyX3JlZlNwYWNlcyFbdHlwZSBhcyBYUlJlZmVyZW5jZVNwYWNlVHlwZV0gPT09IHJlZlNwYWNlKSB7XG4gICAgICAgICAgICAgICAgLyogS2VlcCB0cmFjayBvZiByZWZlcmVuY2Ugc3BhY2UgdHlwZSAqL1xuICAgICAgICAgICAgICAgIHRoaXMuI3dhc20ud2VieHJfcmVmU3BhY2VUeXBlID0gdHlwZSBhcyBYUlJlZmVyZW5jZVNwYWNlVHlwZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKiBDdXJyZW50IHJlZmVyZW5jZSBzcGFjZSB0eXBlIHVzZWQgZm9yIHJldHJpZXZpbmcgZXllLCBoZWFkLCBoYW5kIGFuZCBqb2ludCBwb3NlcyAqL1xuICAgIGdldCBjdXJyZW50UmVmZXJlbmNlU3BhY2UoKTogWFJSZWZlcmVuY2VTcGFjZSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN3YXNtLndlYnhyX3JlZlNwYWNlITtcbiAgICB9XG5cbiAgICAvKiogQ3VycmVudCBXZWJYUiByZWZlcmVuY2Ugc3BhY2UgdHlwZSBvciBgbnVsbGAgaWYgbm90IGEgZGVmYXVsdCByZWZlcmVuY2Ugc3BhY2UgKi9cbiAgICBnZXQgY3VycmVudFJlZmVyZW5jZVNwYWNlVHlwZSgpOiBYUlJlZmVyZW5jZVNwYWNlVHlwZSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN3YXNtLndlYnhyX3JlZlNwYWNlVHlwZSE7XG4gICAgfVxuXG4gICAgLyoqIEN1cnJlbnQgV2ViWFIgYmFzZSBsYXllciAgKi9cbiAgICBnZXQgYmFzZUxheWVyKCk6IFhSUHJvamVjdGlvbkxheWVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3dhc20ud2VieHJfYmFzZUxheWVyITtcbiAgICB9XG5cbiAgICAvKiogQ3VycmVudCBXZWJYUiBmcmFtZWJ1ZmZlciAqL1xuICAgIGdldCBmcmFtZWJ1ZmZlcnMoKTogV2ViR0xGcmFtZWJ1ZmZlcltdIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHRoaXMuI3dhc20ud2VieHJfZmJvKSkge1xuICAgICAgICAgICAgcmV0dXJuIFt0aGlzLiN3YXNtLkdMLmZyYW1lYnVmZmVyc1t0aGlzLiN3YXNtLndlYnhyX2Zib11dO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLiN3YXNtLndlYnhyX2Ziby5tYXAoKGlkKSA9PiB0aGlzLiN3YXNtLkdMLmZyYW1lYnVmZmVyc1tpZF0pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBFbnZpcm9ubWVudCBsaWdodGluZyBwcm9wZXJ0aWVzXG4gKlxuICogQHNpbmNlIDEuMi4zXG4gKi9cbmV4cG9ydCBjbGFzcyBFbnZpcm9ubWVudCB7XG4gICAgLyoqIFNjZW5lIGluc3RhbmNlLiBAaGlkZGVuICovXG4gICAgcHJpdmF0ZSByZWFkb25seSBfc2NlbmU6IFNjZW5lO1xuXG4gICAgLyoqIENvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3Ioc2NlbmU6IFNjZW5lKSB7XG4gICAgICAgIHRoaXMuX3NjZW5lID0gc2NlbmU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGludGVuc2l0eSBvZiBlbnZpcm9ubWVudCBsaWdodGluZy5cbiAgICAgKlxuICAgICAqIEluY29taW5nIGVudmlyb25tZW50IGxpZ2h0aW5nIGlzIG11bHRpcGxpZWQgYnkgdGhpcyBmYWN0b3IuXG4gICAgICovXG4gICAgZ2V0IGludGVuc2l0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjZW5lLmVuZ2luZS53YXNtLl93bF9zY2VuZV9lbnZpcm9ubWVudF9nZXRfaW50ZW5zaXR5KFxuICAgICAgICAgICAgdGhpcy5fc2NlbmUuX2luZGV4XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGludGVuc2l0eSBvZiBlbnZpcm9ubWVudCBsaWdodGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbnRlbnNpdHkgTmV3IGludGVuc2l0eS5cbiAgICAgKi9cbiAgICBzZXQgaW50ZW5zaXR5KGludGVuc2l0eTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX3NjZW5lLmVuZ2luZS53YXNtLl93bF9zY2VuZV9lbnZpcm9ubWVudF9zZXRfaW50ZW5zaXR5KFxuICAgICAgICAgICAgdGhpcy5fc2NlbmUuX2luZGV4LFxuICAgICAgICAgICAgaW50ZW5zaXR5XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldFRpbnQoKTogRmxvYXQzMkFycmF5O1xuICAgIC8qKlxuICAgICAqIEdldCB0aW50IGZvciBlbnZpcm9ubWVudCBsaWdodGluZy5cbiAgICAgKlxuICAgICAqIEluY29taW5nIGVudmlyb25tZW50IGxpZ2h0aW5nIGNvbG9yIGNoYW5uZWxzIGFyZSBtdWx0aXBsaWVkIGJ5IHRoZXNlXG4gICAgICogdmFsdWVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBQcmVhbGxvY2F0ZWQgYXJyYXkgdG8gd3JpdGUgaW50bywgdG8gYXZvaWQgZ2FyYmFnZSxcbiAgICAgKiAgICAgb3RoZXJ3aXNlIHdpbGwgYWxsb2NhdGUgYSBuZXcgRmxvYXQzMkFycmF5LlxuICAgICAqIEByZXR1cm5zIFRpbnQgdmFsdWVzIC0gcmVkLCBncmVlbiwgYmx1ZS5cbiAgICAgKi9cbiAgICBnZXRUaW50PFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBUKTogVDtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0VGludDxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KFxuICAgICAgICBvdXQ6IFQgfCBGbG9hdDMyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KDMpXG4gICAgKTogVCB8IEZsb2F0MzJBcnJheSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9zY2VuZS5lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfc2NlbmVfZW52aXJvbm1lbnRfZ2V0X3RpbnQodGhpcy5fc2NlbmUuX2luZGV4LCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsyXTtcbiAgICAgICAgcmV0dXJuIG91dCBhcyBUO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8ge0BsaW5rIGdldFRpbnR9LlxuICAgICAqXG4gICAgICogQG5vdGUgUHJlZmVyIHRvIHVzZSB7QGxpbmsgZ2V0VGludH0gZm9yIHBlcmZvcm1hbmNlLlxuICAgICAqL1xuICAgIGdldCB0aW50KCk6IEZsb2F0MzJBcnJheSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFRpbnQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGludCBmb3IgZW52aXJvbm1lbnQgbGlnaHRpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBOZXcgdGludCB2YWx1ZS4gRXhwZWN0cyBhIDMgY29tcG9uZW50IGFycmF5LlxuICAgICAqL1xuICAgIHNldFRpbnQodjogUmVhZG9ubHk8TnVtYmVyQXJyYXk+KSB7XG4gICAgICAgIHRoaXMuX3NjZW5lLmVuZ2luZS53YXNtLl93bF9zY2VuZV9lbnZpcm9ubWVudF9zZXRfdGludChcbiAgICAgICAgICAgIHRoaXMuX3NjZW5lLl9pbmRleCxcbiAgICAgICAgICAgIHZbMF0sXG4gICAgICAgICAgICB2WzFdLFxuICAgICAgICAgICAgdlsyXVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKiBFcXVpdmFsZW50IHRvIHtAbGluayBzZXRUaW50fS4gKi9cbiAgICBzZXQgdGludCh2OiBSZWFkb25seTxOdW1iZXJBcnJheT4pIHtcbiAgICAgICAgdGhpcy5zZXRUaW50KHYpO1xuICAgIH1cblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRDb2VmZmljaWVudHMoKTogRmxvYXQzMkFycmF5O1xuICAgIC8qKlxuICAgICAqIEdldCBzcGhlcmljYWwgaGFybW9uaWNzIGNvZWZmaWNpZW50cyBmb3IgaW5kaXJlY3QgbGlnaHRpbmcuXG4gICAgICpcbiAgICAgKiBUaGVzZSBhcmUgOSBzcGhlcmljYWwgaGFybW9uaWNzIGNvZWZmaWNpZW50cyBmb3IgaW5kaXJlY3QgZGlmZnVzZVxuICAgICAqIGxpZ2h0aW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBQcmVhbGxvY2F0ZWQgYXJyYXkgdG8gd3JpdGUgaW50bywgdG8gYXZvaWQgZ2FyYmFnZSxcbiAgICAgKiAgICAgb3RoZXJ3aXNlIHdpbGwgYWxsb2NhdGUgYSBuZXcgRmxvYXQzMkFycmF5LlxuICAgICAqIEByZXR1cm5zIFNwaGVyaWNhbCBoYXJtb25pY3MgY29lZmZpY2llbnRzLiBBbHdheXMgMjcgZWxlbWVudHMsIGV2ZXJ5XG4gICAgICogICAgIGNvbnNlY3V0aXZlIDMgdmFsdWVzIHJlcHJlc2VudGluZyB0aGUgcmVkLCBncmVlbiwgYmx1ZSBjb21wb25lbnRzIG9mXG4gICAgICogICAgIGEgc2luZ2xlIGNvZWZmaWNpZW50LiBVbnVzZWQvZW1wdHkgY29lZmZpY2llbnRzIGF0IHRoZSBlbmQgY2FuIGJlIDAuXG4gICAgICovXG4gICAgZ2V0Q29lZmZpY2llbnRzPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBUKTogVDtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0Q29lZmZpY2llbnRzPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4oXG4gICAgICAgIG91dDogVCB8IEZsb2F0MzJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoMyAqIDkpXG4gICAgKTogVCB8IEZsb2F0MzJBcnJheSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9zY2VuZS5lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5yZXF1aXJlVGVtcE1lbSgzICogOSAqIDQpO1xuICAgICAgICB3YXNtLl93bF9zY2VuZV9lbnZpcm9ubWVudF9nZXRfY29lZmZpY2llbnRzKHRoaXMuX3NjZW5lLl9pbmRleCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMyAqIDk7ICsraSkge1xuICAgICAgICAgICAgb3V0W2ldID0gd2FzbS5fdGVtcE1lbUZsb2F0W2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQgYXMgVDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBnZXRDb2VmZmljaWVudHN9LlxuICAgICAqXG4gICAgICogQG5vdGUgUHJlZmVyIHRvIHVzZSB7QGxpbmsgZ2V0Q29lZmZpY2llbnRzfSBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICovXG4gICAgZ2V0IGNvZWZmaWNpZW50cygpOiBGbG9hdDMyQXJyYXkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudHMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgc3BoZXJpY2FsIGhhcm1vbmljcyBjb2VmZmljaWVudHMgZm9yIGluZGlyZWN0IGxpZ2h0aW5nLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhlIHNjZW5lIG11c3QgaGF2ZSBiZWVuIHBhY2thZ2VkIHdpdGggZW52aXJvbm1lbnQgbGlnaHRpbmcgb24gZm9yXG4gICAgICogdGhpcyB0byB0YWtlIGVmZmVjdC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBDb2VmZmljaWVudHMgZnJvbSBbV2ViWFIgTGlnaHRpbmcgRXN0aW1hdGlvbl0oaHR0cHM6Ly93d3cudzMub3JnL1RSL3dlYnhyLWxpZ2h0aW5nLWVzdGltYXRpb24tMSlcbiAgICAgKiBjYW4gYmUgcGFzc2VkIGFzIGZvbGxvd3M6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IHByb2JlID0gYXdhaXQgZW5naW5lLnhyLnNlc3Npb24ucmVxdWVzdExpZ2h0UHJvYmUoKTtcbiAgICAgKiBjb25zdCBlc3RpbWF0ZSA9IGVuZ2luZS54ci5mcmFtZS5nZXRMaWdodEVzdGltYXRlKHByb2JlKTtcbiAgICAgKiBzY2VuZS5lbnZpcm9ubWVudC5jb2VmZmljaWVudHMgPSBlc3RpbWF0ZS5zcGhlcmljYWxIYXJtb25pY3NDb2VmZmljaWVudHM7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBBIHNldCBvZiBzcGhlcmljYWwgaGFybW9uaWNzIGNvZWZmaWNpZW50cywgZXZlcnkgMyBlbGVtZW50c1xuICAgICAqICAgICBjb25zdGl0dXRpbmcgdGhlIHJlZC9ncmVlbi9ibHVlIGNvbXBvbmVudHMgb2YgYSBzaW5nbGUgY29lZmZpY2llbnQuXG4gICAgICogICAgIFNob3VsZCBiZSAwLCAzLCAxMiBvciAyNyAqKmFycmF5IGVsZW1lbnRzKiouIFBhc3NpbmcgYW4gZW1wdHkgYXJyYXlcbiAgICAgKiAgICAgZGlzYWJsZXMgaW5kaXJlY3QgbGlnaHRpbmcuXG4gICAgICovXG4gICAgc2V0Q29lZmZpY2llbnRzKHY6IFJlYWRvbmx5PE51bWJlckFycmF5Pikge1xuICAgICAgICBsZXQgY291bnQgPSB2Lmxlbmd0aCAvIDM7XG4gICAgICAgIGlmIChjb3VudCA+IDkpIGNvdW50ID0gOTtcbiAgICAgICAgZWxzZSBpZiAoY291bnQgPiA0ICYmIGNvdW50IDwgOSkgY291bnQgPSA0O1xuICAgICAgICBlbHNlIGlmIChjb3VudCA+IDEgJiYgY291bnQgPCA0KSBjb3VudCA9IDE7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9zY2VuZS5lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0LnNldCh2KTtcbiAgICAgICAgd2FzbS5fd2xfc2NlbmVfZW52aXJvbm1lbnRfc2V0X2NvZWZmaWNpZW50cyhcbiAgICAgICAgICAgIHRoaXMuX3NjZW5lLl9pbmRleCxcbiAgICAgICAgICAgIHdhc20uX3RlbXBNZW0sXG4gICAgICAgICAgICBjb3VudFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKiBFcXVpdmFsZW50IHRvIHtAbGluayBzZXRDb2VmZmljaWVudHN9LiAqL1xuICAgIHNldCBjb2VmZmljaWVudHModjogUmVhZG9ubHk8TnVtYmVyQXJyYXk+KSB7XG4gICAgICAgIHRoaXMuc2V0Q29lZmZpY2llbnRzKHYpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQge1dvbmRlcmxhbmRFbmdpbmV9IGZyb20gJy4uL2VuZ2luZS5qcyc7XG5pbXBvcnQge051bWJlckFycmF5fSBmcm9tICcuLi90eXBlcy5qcyc7XG5pbXBvcnQge2NhcGl0YWxpemVGaXJzdFVURjgsIGNyZWF0ZURlc3Ryb3llZFByb3h5fSBmcm9tICcuLi91dGlscy9taXNjLmpzJztcbmltcG9ydCB7Rm9udCwgVGV4dHVyZX0gZnJvbSAnLi4vd29uZGVybGFuZC5qcyc7XG5cbmltcG9ydCB7UmVzb3VyY2UsIFJlc291cmNlTWFuYWdlciwgU2NlbmVSZXNvdXJjZX0gZnJvbSAnLi9yZXNvdXJjZS5qcyc7XG5cbi8qKlxuICogTWF0ZXJpYWwgcGFyYW1ldGVyIHR5cGUuXG4gKi9cbmV4cG9ydCBlbnVtIE1hdGVyaWFsUGFyYW1UeXBlIHtcbiAgICAvKiogVW5zaWduZWQgaW50ZWdlciBwYXJhbWV0ZXIgdHlwZS4gKi9cbiAgICBVbnNpZ25lZEludCA9IDAsXG4gICAgLyoqIEludGVnZXIgcGFyYW1ldGVyIHR5cGUuICovXG4gICAgSW50ID0gMSxcbiAgICAvKiogMTYtYml0IGZsb2F0IHBhcmFtZXRlciB0eXBlLiAqL1xuICAgIEhhbGZGbG9hdCA9IDIsXG4gICAgLyoqIEZsb2F0IHBhcmFtZXRlciB0eXBlLiAqL1xuICAgIEZsb2F0ID0gMyxcbiAgICAvKiogU2FtcGxlciByZXNvdXJjZSBwYXJhbWV0ZXIgdHlwZSwgaS5lLiwgYSB7QGxpbmsgVGV4dHVyZX0uICovXG4gICAgU2FtcGxlciA9IDQsXG4gICAgLyoqXG4gICAgICogRm9udCByZXNvdXJjZSBwYXJhbWV0ZXIgdHlwZS5cbiAgICAgKlxuICAgICAqICoqTm90ZSoqOiBDaGFuZ2luZyBmb250IGlzbid0IGV4cG9zZWQgeWV0IGFuZCB3aWxsIHJhaXNlIGFuIGVycm9yLlxuICAgICAqL1xuICAgIEZvbnQgPSA1LFxufVxuXG4vKipcbiAqIENvbnN0cnVjdG9yIHBhcmFtZXRlcnMgb2JqZWN0IGZvciBhIHtAbGluayBNYXRlcmlhbH0gaW5zdGFuY2UuXG4gKlxuICogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayBNYXRlcmlhbE1hbmFnZXIjZ2V0VGVtcGxhdGV9IGluc3RlYWQ6XG4gKlxuICogYGBganNcbiAqIGNvbnN0IFBob25nTWF0ZXJpYWwgPSBlbmdpbmUubWF0ZXJpYWxzLmdldFRlbXBsYXRlKCdQaG9uZyBPcGFxdWUnKTtcbiAqIGNvbnN0IG1hdGVyaWFsID0gbmV3IFBob25nTWF0ZXJpYWwoKTtcbiAqIG1hdGVyaWFsLnNldERpZmZ1c2VDb2xvcihbMSwgMCwgMF0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTWF0ZXJpYWxQYXJhbWV0ZXJzIHtcbiAgICAvKiogVGhlIG5hbWUgb2YgdGhlIHBpcGVsaW5lLiAqL1xuICAgIHBpcGVsaW5lOiBzdHJpbmc7XG59XG5cbi8qKlxuICogTWF0ZXJpYWwgY29uc3RydWN0b3IuXG4gKlxuICogTWF0ZXJpYWwgY2xhc3NlcyBhcmUgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYnkgdGhlIHJ1bnRpbWUgYmFzZWQgb24gdGhlXG4gKiBsb2FkZWQgc2NlbmUgc2hhZGVycy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBNYXRlcmlhbENvbnN0cnVjdG9yPFQgZXh0ZW5kcyBNYXRlcmlhbCA9IE1hdGVyaWFsPiB7XG4gICAgLyoqXG4gICAgICogU2V0IG9mIHRoZSBkeW5hbWljIHBhcmFtZXRlcnMgdGhhdCBleGlzdCBvbiB0aGUgZGVmaW5pdGlvbi5cbiAgICAgKlxuICAgICAqIEZvciBpbnN0YW5jZSwgdGhlIHNldCB3b3VsZCBjb250YWluIGVsZW1lbnRzIHN1Y2ggYXMgYGFtYmllbnRDb2xvcmAsIGBkaWZmdXNlQ29sb3JgXG4gICAgICogZm9yIGEgUGhvbmcgbWF0ZXJpYWwuXG4gICAgICovXG4gICAgcmVhZG9ubHkgUGFyYW1ldGVyczogU2V0PHN0cmluZz47XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IE1hdGVyaWFsLlxuICAgICAqXG4gICAgICogVGhlIG1hdGVyaWFsIGlzIGNyZWF0ZWQgZnJvbSB0aGUgcGlwZWxpbmUgYXNzb2NpYXRlZCB0byB0aGUgbWF0ZXJpYWwgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAbm90ZSBDcmVhdGluZyBtYXRlcmlhbCBpcyBleHBlbnNpdmUuIFBsZWFzZSB1c2Uge0BsaW5rIE1hdGVyaWFsI2Nsb25lfSB0byBjbG9uZSBhIG1hdGVyaWFsLlxuICAgICAqIEBub3RlIERvIG5vdCB1c2UgdGhpcyBjb25zdHJ1Y3RvciBkaXJlY3RseSB3aXRoIGFuIGluZGV4LCB0aGlzIGlzIHJlc2VydmVkIGZvciBpbnRlcm5hbCBwdXJwb3Nlcy5cbiAgICAgKi9cbiAgICBuZXcgKGluZGV4PzogbnVtYmVyKTogVDtcbn1cblxuLyoqXG4gKiBXcmFwcGVyIGFyb3VuZCBhIG5hdGl2ZSBtYXRlcmlhbC5cbiAqXG4gKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBob3cgdG8gY3JlYXRlIG1hdGVyaWFscywgaGF2ZSBhIGxvb2sgYXQgdGhlXG4gKiB7QGxpbmsgTWF0ZXJpYWxNYW5hZ2VyfSBjbGFzcy5cbiAqXG4gKiAjIyMjIFByb3BlcnRpZXNcbiAqXG4gKiBUaGUgbWF0ZXJpYWwgcHJvcGVydGllcyBhcmUgYXV0b21hdGljYWxseSBjb252ZXJ0ZWQgaW50byBnZXR0ZXJzL3NldHRlcnM6XG4gKlxuICogYGBganNcbiAqIGNvbnN0IG1hdGVyaWFsID0gbmV3IFBob25nTWF0ZXJpYWwoKTtcbiAqXG4gKiAvLyBTZXQgdGhlIGBkaWZmdXNlQ29sb3JgIHByb3BlcnR5XG4gKiBtYXRlcmlhbC5zZXREaWZmdXNlQ29sb3IoWzEuMCwgMC4wLCAwLjAsIDEuMF0pO1xuICogY29uc29sZS5sb2cobWF0ZXJpYWwuZ2V0RGlmZnVzZUNvbG9yKCkpO1xuICogYGBgXG4gKlxuICogR2V0dGVycyBmb3Igbm9uLXNjYWxhciB0eXBlcyBoYXZlIGFuIG9wdGlvbmFsIGFyZ3VtZW50IHRvIHNraXAgYW4gYXJyYXlcbiAqIGFsbG9jYXRpb246XG4gKlxuICogYGBganNcbiAqIGNvbnN0IG1hdGVyaWFsID0gbmV3IFBob25nTWF0ZXJpYWwoKTtcbiAqIGNvbnN0IGRpZmZ1c2UgPSBbMCwgMCwgMCwgMF07XG4gKiBtYXRlcmlhbC5nZXREaWZmdXNlQ29sb3IoZGlmZnVzZSk7XG4gKiBjb25zb2xlLmxvZyhkaWZmdXNlKSAvLyBQcmludHMgJ1sxLjAsIDEuMCwgMS4wLCAxLjBdJ1xuICogYGBgXG4gKlxuICogQG5vdGUgTWF0ZXJpYWxzIGFyZSAqKnBlci1lbmdpbmUqKiwgdGhleSBjYW4gdGh1cyBiZSBzaGFyZWQgYnkgbXVsdGlwbGUgc2NlbmVzLlxuICpcbiAqICMjIyMgVHlwZVNjcmlwdFxuICpcbiAqIFRoZSBXb25kZXJsYW5kIEVkaXRvciBjYW4gYXV0b21hdGljYWxseSBnZW5lcmF0ZSBtYXRlcmlhbCBkZWZpbml0aW9ucyAoLmQudHMpXG4gKiBmcm9tIHRoZSBwcm9qZWN0IHBpcGVsaW5lcy5cbiAqXG4gKiBUbyBlbmFibGUgdGhlIGdlbmVyYXRpb24sIGdvIHRvIHRoZSBgUHJvamVjdCBTZXR0aW5ncyA+IEphdmFTY3JpcHRgIHBhbmVsIGFuZFxuICogc2V0IGBtYXRlcmlhbERlZmluaXRpb25zYCB0byBhIHBhdGgsIGUuZy4sIGBtYXRlcmlhbHMuZC50c2AuXG4gKlxuICogSXQncyB0aGVuIHBvc3NpYmxlIHRvIGNhc3QgdGhlIG1hdGVyaWFsIHR5cGUgdXNpbmc6XG4gKlxuICogYGBgdHNcbiAqIC8vIE5vdGUgdGhlIGAuanNgIGluc3RlYWQgb2YgYC5kLnRzYFxuICogaW1wb3J0IHtQaG9uZ09wYXF1ZX0gZnJvbSAnLi9tYXRlcmlhbHMuanMnO1xuICpcbiAqIGNvbnN0IG1lc2ggPSBvYmplY3QuZ2V0Q29tcG9uZW50KCdtZXNoJyk7XG4gKiBjb25zdCBtYXRlcmlhbCA9IG1lc2gubWF0ZXJpYWwgYXMgUGhvbmdPcGFxdWU7XG4gKiBtYXRlcmlhbC5zZXREaWZmdXNlQ29sb3IoWzEsIDAsIDAsIDFdKTsgLy8gU2V0IGEgcmVkIGRpZmZ1c2VcbiAqIGBgYFxuICpcbiAqIEBzaW5jZSAxLjIuMFxuICovXG5leHBvcnQgY2xhc3MgTWF0ZXJpYWwgZXh0ZW5kcyBSZXNvdXJjZSB7XG4gICAgLyoqIFByb3h5IHVzZWQgdG8gb3ZlcnJpZGUgcHJvdG90eXBlcyBvZiBkZXN0cm95ZWQgbWF0ZXJpYWxzLiAqL1xuICAgIHN0YXRpYyByZWFkb25seSBfZGVzdHJveWVkUHJvdG90eXBlID0gY3JlYXRlRGVzdHJveWVkUHJveHkoJ21hdGVyaWFsJyk7XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIE1hdGVyaWFsTWFuYWdlciNnZXRUZW1wbGF0ZX0gdmlhIHtAbGluayBXb25kZXJsYW5kRW5naW5lLm1hdGVyaWFsc31cbiAgICAgKiB0byBjcmVhdGUgYSBuZXcgbWF0ZXJpYWwgd2l0aCBhIGdpdmVuIHBpcGVsaW5lOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBQaG9uZ01hdGVyaWFsID0gZW5naW5lLm1hdGVyaWFscy5nZXRUZW1wbGF0ZSgnUGhvbmcgT3BhcXVlJyk7XG4gICAgICogY29uc3QgbWF0ZXJpYWwgPSBuZXcgUGhvbmdNYXRlcmlhbCgpO1xuICAgICAqIG1hdGVyaWFsLnNldERpZmZ1c2VDb2xvcihbMSwgMCwgMF0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGVuZ2luZTogV29uZGVybGFuZEVuZ2luZSwgcGFyYW1zOiBudW1iZXIgfCBNYXRlcmlhbFBhcmFtZXRlcnMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwYXJhbXMgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBpZiAoIXBhcmFtcz8ucGlwZWxpbmUpIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgcGFyYW1ldGVyICdwaXBlbGluZSdcIik7XG4gICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IGVuZ2luZS5tYXRlcmlhbHMuZ2V0VGVtcGxhdGUocGFyYW1zLnBpcGVsaW5lKTtcbiAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsID0gbmV3IHRlbXBsYXRlKCk7XG4gICAgICAgICAgICBzdXBlcihlbmdpbmUsIG1hdGVyaWFsLl9pbmRleCk7XG4gICAgICAgICAgICByZXR1cm4gbWF0ZXJpYWw7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZW5naW5lLCBwYXJhbXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrIHdoZXRoZXIgYSBwYXJhbWV0ZXIgZXhpc3RzIG9uIHRoaXMgbWF0ZXJpYWwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHBhcmFtZXRlciB3aXRoIG5hbWUgYG5hbWVgIGV4aXN0cyBvbiB0aGlzIG1hdGVyaWFsLFxuICAgICAqICAgICBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBoYXNQYXJhbWV0ZXIobmFtZTogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSAodGhpcy5jb25zdHJ1Y3RvciBhcyBNYXRlcmlhbENvbnN0cnVjdG9yKS5QYXJhbWV0ZXJzO1xuICAgICAgICByZXR1cm4gcGFyYW1ldGVycyAmJiBwYXJhbWV0ZXJzLmhhcyhuYW1lKTtcbiAgICB9XG5cbiAgICAvKiogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayBwaXBlbGluZX0gaW5zdGVhZC4gKi9cbiAgICBnZXQgc2hhZGVyKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLnBpcGVsaW5lO1xuICAgIH1cblxuICAgIC8qKiBOYW1lIG9mIHRoZSBwaXBlbGluZSB1c2VkIGJ5IHRoaXMgbWF0ZXJpYWwuICovXG4gICAgZ2V0IHBpcGVsaW5lKCk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICByZXR1cm4gd2FzbS5VVEY4VG9TdHJpbmcod2FzbS5fd2xfbWF0ZXJpYWxfZ2V0X3BpcGVsaW5lKHRoaXMuX2lkKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgY29weSBvZiB0aGUgdW5kZXJseWluZyBuYXRpdmUgbWF0ZXJpYWwuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBNYXRlcmlhbCBjbG9uZS5cbiAgICAgKi9cbiAgICBjbG9uZSgpOiBNYXRlcmlhbCB8IG51bGwge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZW5naW5lLndhc20uX3dsX21hdGVyaWFsX2Nsb25lKHRoaXMuX2lkKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLm1hdGVyaWFscy53cmFwKGluZGV4KTtcbiAgICB9XG5cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAnTWF0ZXJpYWwoZGVzdHJveWVkKSc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGBNYXRlcmlhbCgnJHt0aGlzLnBpcGVsaW5lfScsICR7dGhpcy5faW5kZXh9KWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV3JhcCBhIG5hdGl2ZSBtYXRlcmlhbCBpbmRleC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlbmdpbmUgRW5naW5lIGluc3RhbmNlLlxuICAgICAqIEBwYXJhbSBpbmRleCBUaGUgaW5kZXguXG4gICAgICogQHJldHVybnMgTWF0ZXJpYWwgaW5zdGFuY2Ugb3IgYG51bGxgIGlmIGluZGV4IDw9IDAuXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIHtAbGluayBXb25kZXJsYW5kRW5naW5lLm1hdGVyaWFsc30gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgd3JhcChlbmdpbmU6IFdvbmRlcmxhbmRFbmdpbmUsIGluZGV4OiBudW1iZXIpOiBNYXRlcmlhbCB8IG51bGwge1xuICAgICAgICByZXR1cm4gZW5naW5lLm1hdGVyaWFscy53cmFwKGluZGV4KTtcbiAgICB9XG59XG5cbi8qKlxuICogTWFuYWdlIG1hdGVyaWFscy5cbiAqXG4gKiAjIyMjIENyZWF0aW9uXG4gKlxuICogVG8gY3JlYXRlIGEgbWF0ZXJpYWwsIGZpcnN0IHJldHJpZXZlIHRoZSBjbGFzcyBhc3NvY2lhdGVkIHRvXG4gKiB0aGUgcGlwZWxpbmUgdXNpbmcge0BsaW5rIE1hdGVyaWFsTWFuYWdlci5nZXRUZW1wbGF0ZX06XG4gKlxuICogYGBganNcbiAqIGNvbnN0IFBob25nTWF0ZXJpYWwgPSBlbmdpbmUubWF0ZXJpYWxzLmdldFRlbXBsYXRlKCdQaG9uZyBPcGFxdWUnKTtcbiAqIGBgYFxuICpcbiAqIENyZWF0aW5nIGEgbWF0ZXJpYWwgaXMgdGhlbiBkb25lIHVzaW5nIHRoZSBjb25zdHJ1Y3RvcjpcbiAqXG4gKiBgYGBqc1xuICogY29uc3QgbWF0ZXJpYWwgPSBuZXcgUGhvbmdNYXRlcmlhbCgpO1xuICogbWF0ZXJpYWwuc2V0RGlmZnVzZUNvbG9yKFsxLjAsIDAuMCwgMC4wLCAxLjBdKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgTWF0ZXJpYWxNYW5hZ2VyIGV4dGVuZHMgUmVzb3VyY2VNYW5hZ2VyPE1hdGVyaWFsPiB7XG4gICAgLyoqIE1hdGVyaWFsIGNsYXNzZXMuIEBoaWRkZW4uICovXG4gICAgcHJpdmF0ZSByZWFkb25seSBfbWF0ZXJpYWxUZW1wbGF0ZXM6IE1hdGVyaWFsQ29uc3RydWN0b3JbXSA9IFtdO1xuXG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBjb25zdHJ1Y3RvcihlbmdpbmU6IFdvbmRlcmxhbmRFbmdpbmUpIHtcbiAgICAgICAgc3VwZXIoZW5naW5lLCBNYXRlcmlhbCk7XG4gICAgICAgIHRoaXMuX2NhY2hlRGVmaW5pdGlvbnMoKTtcbiAgICB9XG5cbiAgICAvKiogQG92ZXJyaWRlICovXG4gICAgd3JhcChpbmRleDogbnVtYmVyKSB7XG4gICAgICAgIGlmIChpbmRleCA8PSAwKSByZXR1cm4gbnVsbDtcblxuICAgICAgICBjb25zdCBjYWNoZWQgPSB0aGlzLl9jYWNoZVtpbmRleF07XG4gICAgICAgIGlmIChjYWNoZWQpIHJldHVybiBjYWNoZWQ7XG5cbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGRlZmluaXRpb24gPSB3YXNtLl93bF9tYXRlcmlhbF9nZXRfZGVmaW5pdGlvbihpbmRleCk7XG5cbiAgICAgICAgY29uc3QgVGVtcGxhdGUgPSB0aGlzLl9tYXRlcmlhbFRlbXBsYXRlc1tkZWZpbml0aW9uXTtcbiAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSBuZXcgVGVtcGxhdGUoaW5kZXgpO1xuICAgICAgICByZXR1cm4gdGhpcy5fd3JhcEluc3RhbmNlKG1hdGVyaWFsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1hdGVyaWFsIGNsYXNzIHdpdGggdGhlIGdpdmVuIHBpcGVsaW5lIG5hbWUuXG4gICAgICpcbiAgICAgKiAjIyMjIFVzYWdlXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IFBob25nTWF0ZXJpYWwgPSBlbmdpbmUubWF0ZXJpYWxzLmdldFRlbXBsYXRlKCdQaG9uZyBPcGFxdWUnKTtcbiAgICAgKiBjb25zdCBtYXRlcmlhbCA9IG5ldyBQaG9uZ01hdGVyaWFsKCk7XG4gICAgICogbWF0ZXJpYWwuc2V0RGlmZnVzZUNvbG9yKFsxLjAsIDAuMCwgMC4wLCAxLjBdKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqICMjIyMgVHlwZVNjcmlwdFxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgcHJvdmlkZSBhIHNpbXBsZSB3YXkgdG8gY2FzdCB0aGUgY29uc3RydWN0b3IgcmV0dXJuZWQgYnkgYGdldFRlbXBsYXRlYDpcbiAgICAgKlxuICAgICAqIGBgYHRzXG4gICAgICogaW50ZXJmYWNlIFBob25nIHtcbiAgICAgKiAgICAgZ2V0QW1iaWVudENvbG9yKG91dD86IEZsb2F0MzJBcnJheSk6IEZsb2F0MzJBcnJheTtcbiAgICAgKiAgICAgc2V0QW1iaWVudENvbG9yKHZhbHVlOiBOdW1iZXJBcnJheSk6IHZvaWQ7XG4gICAgICogfVxuICAgICAqIGNvbnN0IFBob25nTWF0ZXJpYWwgPSBlbmdpbmUubWF0ZXJpYWxzLmdldFRlbXBsYXRlPFBob25nPignUGhvbmcgT3BhcXVlJyk7XG4gICAgICogY29uc3QgbWF0ID0gbmV3IFBob25nTWF0ZXJpYWwoKTsgLy8gYG1hdGAgaXMgb2YgdHlwZSBgUGhvbmdgXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBIb3dldmVyLCB0aGlzIG1lYW5zIG1hbnVhbGx5IHdyaXRpbmcgdHlwZXMgZm9yIGVhY2ggcGlwZWxpbmUuXG4gICAgICpcbiAgICAgKiBGb3J0dW5hdGVseSwgVGhlIFdvbmRlcmxhbmQgRWRpdG9yIGNhbiBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlIG1hdGVyaWFsIGRlZmluaXRpb25zICguZC50cylcbiAgICAgKiBmcm9tIHRoZSBwcm9qZWN0IHBpcGVsaW5lcy5cbiAgICAgKlxuICAgICAqIFRvIGVuYWJsZSB0aGUgZ2VuZXJhdGlvbiwgZ28gdG8gdGhlIGBQcm9qZWN0IFNldHRpbmdzID4gSmF2YVNjcmlwdGAgcGFuZWwgYW5kXG4gICAgICogc2V0IGBtYXRlcmlhbERlZmluaXRpb25zYCB0byBhIHBhdGgsIGUuZy4sIGBtYXRlcmlhbHMuZC50c2AuXG4gICAgICpcbiAgICAgKiBNYXRlcmlhbCBjb25zdHJ1Y3RvcnMgd2lsbCB0aGVuIGJlIHR5cGVkIGF1dG9tYXRpY2FsbHkgd2hlbiB1c2luZyBhIHN0cmluZyBsaXRlcmFsIHBpcGVsaW5lIG5hbWU6XG4gICAgICpcbiAgICAgKiBgYGB0c1xuICAgICAqIC8vIE5vdGUgdGhlIGAuanNgIGluc3RlYWQgb2YgYC5kLnRzYFxuICAgICAqIGltcG9ydCB7UGhvbmdPcGFxdWV9IGZyb20gJy4vbWF0ZXJpYWxzLmpzJztcbiAgICAgKlxuICAgICAqIGNvbnN0IFBob25nTWF0ZXJpYWwgPSBlbmdpbmUubWF0ZXJpYWxzLmdldFRlbXBsYXRlKCdQaG9uZyBPcGFxdWUnKTtcbiAgICAgKiBjb25zdCBtYXQgPSBuZXcgUGhvbmdNYXRlcmlhbCgpOyAvLyBgbWF0YCBpcyBvZiB0eXBlIGBQaG9uZ09wYXF1ZWBcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBwaXBlbGluZSBUaGUgcGlwZWxpbmUgbmFtZSB0byBzZWFyY2ggZm9yLlxuICAgICAqIEByZXR1cm5zIFRoZSBtYXRlcmlhbCBjbGFzcy5cbiAgICAgKlxuICAgICAqIEB0aHJvd3MgYEVycm9yYCBpZiB0aGUgbWF0ZXJpYWwgY2xhc3MgZG9lc24ndCBleGlzdC5cbiAgICAgKi9cbiAgICBnZXRUZW1wbGF0ZTxUIGV4dGVuZHMgTWF0ZXJpYWwgPSBNYXRlcmlhbD4ocGlwZWxpbmU6IHN0cmluZyk6IE1hdGVyaWFsQ29uc3RydWN0b3I8VD4ge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgaW5kZXggPSB3YXNtLl93bF9nZXRfbWF0ZXJpYWxfZGVmaW5pdGlvbl9pbmRleCh3YXNtLnRlbXBVVEY4KHBpcGVsaW5lKSk7XG4gICAgICAgIGlmICghaW5kZXgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUGlwZWxpbmUgJyR7cGlwZWxpbmV9JyBkb2Vzbid0IGV4aXN0IGluIHRoZSBzY2VuZWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXRlcmlhbFRlbXBsYXRlc1tpbmRleF0gYXMgTWF0ZXJpYWxDb25zdHJ1Y3RvcjxUPjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXcmFwIGEgbWF0ZXJpYWwgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAdG9kbzogUmVtb3ZlIGF0IDIuMC4wLlxuICAgICAqXG4gICAgICogQG5vdGUgV3JhcHBpbmcgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIG9uY2UgcGVyIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGluc3RhbmNlIFRoZSBtYXRlcmlhbCBpbnN0YW5jZS5cbiAgICAgKiBAcmV0dXJucyBUaGUgbmV3IG1hdGVyaWFsLCB3cmFwcGVkIGluIGEgcHJveHkuXG4gICAgICovXG4gICAgX3dyYXBJbnN0YW5jZShpbnN0YW5jZTogTWF0ZXJpYWwpOiBNYXRlcmlhbCB7XG4gICAgICAgIHRoaXMuX2NhY2hlW2luc3RhbmNlLmluZGV4XSA9IGluc3RhbmNlO1xuICAgICAgICBpZiAoIXRoaXMuZW5naW5lLmxlZ2FjeU1hdGVyaWFsU3VwcG9ydCkgcmV0dXJuIGluc3RhbmNlO1xuXG4gICAgICAgIC8qKiBAdG9kbzogUmVtb3ZlIGF0IDIuMC4wLiBUaGlzIGlzIGtlcHQgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkuICovXG4gICAgICAgIGNvbnN0IHByb3h5ID0gbmV3IFByb3h5KGluc3RhbmNlLCB7XG4gICAgICAgICAgICBnZXQodGFyZ2V0OiBNYXRlcmlhbCwgcHJvcDogc3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0YXJnZXQuaGFzUGFyYW1ldGVyKHByb3ApKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAodGFyZ2V0IGFzIFJlY29yZDxzdHJpbmcsIGFueT4pW3Byb3BdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvKiogVGhpcyBpcyBzbG93LCBidXQgdXNlcnMgc2hvdWxkIG1pZ3JhdGUgdG8gYGdldFBhcmFtYCAqL1xuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgZ2V0JHtjYXBpdGFsaXplRmlyc3RVVEY4KHByb3ApfWA7XG4gICAgICAgICAgICAgICAgcmV0dXJuICh0YXJnZXQgYXMgUmVjb3JkPHN0cmluZywgYW55PilbbmFtZV0oKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQodGFyZ2V0LCBwcm9wOiBzdHJpbmcsIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0YXJnZXQuaGFzUGFyYW1ldGVyKHByb3ApKSB7XG4gICAgICAgICAgICAgICAgICAgICh0YXJnZXQgYXMgUmVjb3JkPHN0cmluZyB8IHN5bWJvbCwgYW55PilbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8qKiBUaGlzIGlzIHNsb3csIGJ1dCB1c2VycyBzaG91bGQgbWlncmF0ZSB0byBgZ2V0UGFyYW1gICovXG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGBzZXQke2NhcGl0YWxpemVGaXJzdFVURjgocHJvcCl9YDtcbiAgICAgICAgICAgICAgICAodGFyZ2V0IGFzIFJlY29yZDxzdHJpbmcsIGFueT4pW25hbWVdKHZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9jYWNoZVtpbnN0YW5jZS5pbmRleF0gPSBwcm94eTtcbiAgICAgICAgcmV0dXJuIHByb3h5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhY2hlIGFsbCBwaXBlbGluZSBkZWZpbml0aW9ucy5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBwcml2YXRlIF9jYWNoZURlZmluaXRpb25zKCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgY291bnQgPSB3YXNtLl93bF9nZXRfbWF0ZXJpYWxfZGVmaW5pdGlvbl9jb3VudCgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyArK2kpIHtcbiAgICAgICAgICAgIHRoaXMuX21hdGVyaWFsVGVtcGxhdGVzW2ldID0gdGhpcy5fY3JlYXRlTWF0ZXJpYWxUZW1wbGF0ZShpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG1hdGVyaWFsIGNsYXNzIGZyb20gYSBkZWZpbml0aW9uIGluZGV4LlxuICAgICAqXG4gICAgICogQHBhcmFtIHdhc20gVGhlIFdBU00gaW5zdGFuY2UuXG4gICAgICogQHBhcmFtIGRlZmluaXRpb25JbmRleCBUaGUgZGVmaW5pdGlvbiBpbmRleCB0byB3cmFwLlxuICAgICAqIEByZXR1cm5zIFRoZSBtYXRlcmlhbCBjbGFzcy5cbiAgICAgKi9cbiAgICBwcml2YXRlIF9jcmVhdGVNYXRlcmlhbFRlbXBsYXRlKGRlZmluaXRpb25JbmRleDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IGVuZ2luZSA9IHRoaXMuZW5naW5lO1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IGNsYXNzIEN1c3RvbU1hdGVyaWFsIGV4dGVuZHMgTWF0ZXJpYWwge1xuICAgICAgICAgICAgc3RhdGljIFBhcmFtZXRlcnM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuXG4gICAgICAgICAgICBjb25zdHJ1Y3RvcihpbmRleD86IG51bWJlcikge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gaW5kZXggPz8gZW5naW5lLndhc20uX3dsX21hdGVyaWFsX2NyZWF0ZShkZWZpbml0aW9uSW5kZXgpO1xuICAgICAgICAgICAgICAgIHN1cGVyKGVuZ2luZSwgaW5kZXgpO1xuICAgICAgICAgICAgICAgIC8qKiBAdG9kbygyLjAuMCk6IFVuaWZ5IHdpdGggTWF0ZXJpYWwuIFdlIG5lZWQgdG8gd3JhcCBpbiBib3RoIHNpbmNlIG1hdGVyaWFsc1xuICAgICAgICAgICAgICAgICAqIGNhbiBiZSBjcmVhdGVkIHZpYSB0aGUgcGFyZW50IGNsYXNzLCBvciB2aWEgY2hpbGQgY2xhc3Nlcy5cbiAgICAgICAgICAgICAgICAgKiBJbiBhZGRpdGlvbiwgd3JhcHBpbmcgcmV0dXJucyBhIHByb3h5LCB3ZSB3YW50IHRvIHN1cHBvcnQgUHJveHk8TWF0ZXJpYWw+XG4gICAgICAgICAgICAgICAgICogYXMgd2VsbCBhcyBQcm94eTxDdXN0b21NYXRlcmlhbD4uICovXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVuZ2luZS5tYXRlcmlhbHMuX3dyYXBJbnN0YW5jZSh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgbmJQYXJhbXMgPSB3YXNtLl93bF9tYXRlcmlhbF9kZWZpbml0aW9uX2dldF9wYXJhbV9jb3VudChkZWZpbml0aW9uSW5kZXgpO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgbmJQYXJhbXM7ICsraW5kZXgpIHtcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSB3YXNtLlVURjhUb1N0cmluZyhcbiAgICAgICAgICAgICAgICB3YXNtLl93bF9tYXRlcmlhbF9kZWZpbml0aW9uX2dldF9wYXJhbV9uYW1lKGRlZmluaXRpb25JbmRleCwgaW5kZXgpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGVtcGxhdGUuUGFyYW1ldGVycy5hZGQobmFtZSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHQgPSB3YXNtLl93bF9tYXRlcmlhbF9kZWZpbml0aW9uX2dldF9wYXJhbV90eXBlKGRlZmluaXRpb25JbmRleCwgaW5kZXgpO1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHQgJiAweGZmO1xuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50Q291bnQgPSAodCA+PiA4KSAmIDB4ZmY7XG4gICAgICAgICAgICAvKiBtZXRhVHlwZSBjb3VsZCBhbHNvIGJlIGV4dHJhY3RlZCB1c2luZzogKHQgPj4gMTYpICYgMHhmZiAqL1xuXG4gICAgICAgICAgICBjb25zdCBjYXBpdGFsaXplZCA9IGNhcGl0YWxpemVGaXJzdFVURjgobmFtZSk7XG4gICAgICAgICAgICBjb25zdCBnZXR0ZXJJZCA9IGBnZXQke2NhcGl0YWxpemVkfWA7XG4gICAgICAgICAgICBjb25zdCBzZXR0ZXJJZCA9IGBzZXQke2NhcGl0YWxpemVkfWA7XG5cbiAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlUHJvdG8gPSB0ZW1wbGF0ZS5wcm90b3R5cGUgYXMgUmVjb3JkPHN0cmluZywgYW55PjtcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgTWF0ZXJpYWxQYXJhbVR5cGUuVW5zaWduZWRJbnQ6XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUHJvdG9bZ2V0dGVySWRdID0gdWludDMyR2V0dGVyKGluZGV4LCBjb21wb25lbnRDb3VudCk7XG4gICAgICAgICAgICAgICAgICAgIC8qIEZvciBub3csIGl0J3Mgb25seSBwb3NzaWJsZSB0byBzZXQgc2NhbGFyIHVpbnQgdmFsdWVzICovXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUHJvdG9bc2V0dGVySWRdID0gdWludDMyU2V0dGVyKGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBNYXRlcmlhbFBhcmFtVHlwZS5JbnQ6XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUHJvdG9bZ2V0dGVySWRdID0gaW50MzJHZXR0ZXIoaW5kZXgsIGNvbXBvbmVudENvdW50KTtcbiAgICAgICAgICAgICAgICAgICAgLyogRm9yIG5vdywgaXQncyBvbmx5IHBvc3NpYmxlIHRvIHNldCBzY2FsYXIgaW50IHZhbHVlcy4gSW50ZWdlciB2YWx1ZXMgc2V0dGVyXG4gICAgICAgICAgICAgICAgICAgICAqIGlzIHB1cnBvc2VseSBzaGFyZWQgd2l0aCB1aW50LiAqL1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVByb3RvW3NldHRlcklkXSA9IHVpbnQzMlNldHRlcihpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgTWF0ZXJpYWxQYXJhbVR5cGUuSGFsZkZsb2F0OlxuICAgICAgICAgICAgICAgIGNhc2UgTWF0ZXJpYWxQYXJhbVR5cGUuRmxvYXQ6XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUHJvdG9bZ2V0dGVySWRdID0gZmxvYXQzMkdldHRlcihpbmRleCwgY29tcG9uZW50Q291bnQpO1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVByb3RvW3NldHRlcklkXSA9IGZsb2F0MzJTZXR0ZXIoaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIE1hdGVyaWFsUGFyYW1UeXBlLlNhbXBsZXI6XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUHJvdG9bZ2V0dGVySWRdID0gc2FtcGxlckdldHRlcihpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUHJvdG9bc2V0dGVySWRdID0gc2FtcGxlclNldHRlcihpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgTWF0ZXJpYWxQYXJhbVR5cGUuRm9udDpcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVQcm90b1tnZXR0ZXJJZF0gPSBmb250R2V0dGVyKGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgLyogRm9yIG5vdywgc2V0dGluZyBmb250cyBpcyBub3Qgc3VwcG9ydGVkICovXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRlbXBsYXRlIGFzIE1hdGVyaWFsQ29uc3RydWN0b3I7XG4gICAgfVxufVxuXG4vKiogQHRvZG86IFdpdGggdGhpcyBpbXBsZW1lbnRhdGlvbiwgYF93bF9tYXRlcmlhbF9nZXRfcGFyYW1fdmFsdWVgXG4gKiBkbyBub3QgbmVlZCB0byBjaGVjayBmb3IgdGhlIHBhcmFtZXRlciB0eXBlIGFueW1vcmUsIHdlIGNvdWxkIHVzZVxuICogZXhwbGljaXQgY2FsbHMuICovXG5cbmZ1bmN0aW9uIHVpbnQzMkdldHRlcihpbmRleDogbnVtYmVyLCBjb3VudDogbnVtYmVyKSB7XG4gICAgaWYgKGNvdW50ID09PSAxKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGhpczogTWF0ZXJpYWwpIHtcbiAgICAgICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICAgICAgd2FzbS5fd2xfbWF0ZXJpYWxfZ2V0X3BhcmFtX3ZhbHVlKHRoaXMuX2lkLCBpbmRleCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgICAgICByZXR1cm4gd2FzbS5fdGVtcE1lbVVpbnQzMlswXTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0aGlzOiBNYXRlcmlhbCwgb3V0OiBOdW1iZXJBcnJheSA9IG5ldyBVaW50MzJBcnJheShjb3VudCkpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX21hdGVyaWFsX2dldF9wYXJhbV92YWx1ZSh0aGlzLl9pZCwgaW5kZXgsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG91dC5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgb3V0W2ldID0gd2FzbS5fdGVtcE1lbVVpbnQzMltpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIHVpbnQzMlNldHRlcihpbmRleDogbnVtYmVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0aGlzOiBNYXRlcmlhbCwgdmFsdWU6IG51bWJlcikge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfbWF0ZXJpYWxfc2V0X3BhcmFtX3ZhbHVlX3VpbnQodGhpcy5faWQsIGluZGV4LCB2YWx1ZSk7XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gaW50MzJHZXR0ZXIoaW5kZXg6IG51bWJlciwgY291bnQ6IG51bWJlcikge1xuICAgIGlmIChjb3VudCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRoaXM6IE1hdGVyaWFsKSB7XG4gICAgICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgICAgIHdhc20uX3dsX21hdGVyaWFsX2dldF9wYXJhbV92YWx1ZSh0aGlzLl9pZCwgaW5kZXgsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICAgICAgcmV0dXJuIHdhc20uX3RlbXBNZW1JbnRbMF07XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAodGhpczogTWF0ZXJpYWwsIG91dDogTnVtYmVyQXJyYXkgPSBuZXcgSW50MzJBcnJheShjb3VudCkpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX21hdGVyaWFsX2dldF9wYXJhbV92YWx1ZSh0aGlzLl9pZCwgaW5kZXgsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG91dC5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgb3V0W2ldID0gd2FzbS5fdGVtcE1lbUludFtpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIGZsb2F0MzJHZXR0ZXIoaW5kZXg6IG51bWJlciwgY291bnQ6IG51bWJlcikge1xuICAgIGlmIChjb3VudCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRoaXM6IE1hdGVyaWFsKSB7XG4gICAgICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgICAgIHdhc20uX3dsX21hdGVyaWFsX2dldF9wYXJhbV92YWx1ZSh0aGlzLl9pZCwgaW5kZXgsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICAgICAgcmV0dXJuIHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0aGlzOiBNYXRlcmlhbCwgb3V0OiBOdW1iZXJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoY291bnQpKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl93bF9tYXRlcmlhbF9nZXRfcGFyYW1fdmFsdWUodGhpcy5faWQsIGluZGV4LCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvdXQubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIG91dFtpXSA9IHdhc20uX3RlbXBNZW1GbG9hdFtpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIGZsb2F0MzJTZXR0ZXIoaW5kZXg6IG51bWJlcikge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGhpczogTWF0ZXJpYWwsIHZhbHVlOiBudW1iZXIgfCBOdW1iZXJBcnJheSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcblxuICAgICAgICBsZXQgY291bnQgPSAxO1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzBdID0gdmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb3VudCA9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7ICsraSkgd2FzbS5fdGVtcE1lbUZsb2F0W2ldID0gdmFsdWVbaV07XG4gICAgICAgIH1cbiAgICAgICAgd2FzbS5fd2xfbWF0ZXJpYWxfc2V0X3BhcmFtX3ZhbHVlX2Zsb2F0KHRoaXMuX2lkLCBpbmRleCwgd2FzbS5fdGVtcE1lbSwgY291bnQpO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIHNhbXBsZXJHZXR0ZXIoaW5kZXg6IG51bWJlcikge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGhpczogTWF0ZXJpYWwpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX21hdGVyaWFsX2dldF9wYXJhbV92YWx1ZSh0aGlzLl9pZCwgaW5kZXgsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUudGV4dHVyZXMud3JhcCh3YXNtLl90ZW1wTWVtSW50WzBdKTtcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBzYW1wbGVyU2V0dGVyKGluZGV4OiBudW1iZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRoaXM6IE1hdGVyaWFsLCB2YWx1ZTogVGV4dHVyZSB8IG51bGwgfCB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX21hdGVyaWFsX3NldF9wYXJhbV92YWx1ZV91aW50KHRoaXMuX2lkLCBpbmRleCwgdmFsdWU/Ll9pZCA/PyAwKTtcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBmb250R2V0dGVyKGluZGV4OiBudW1iZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRoaXM6IE1hdGVyaWFsKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl93bF9tYXRlcmlhbF9nZXRfcGFyYW1fdmFsdWUodGhpcy5faWQsIGluZGV4LCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLmZvbnRzLndyYXAod2FzbS5fdGVtcE1lbUludFswXSk7XG4gICAgfTtcbn1cbiIsICJpbXBvcnQge1dvbmRlcmxhbmRFbmdpbmV9IGZyb20gJy4uL2luZGV4LmpzJztcbmltcG9ydCB7TWVzaCwgTWVzaEluZGV4VHlwZSwgTWVzaFBhcmFtZXRlcnMsIE1lc2hTa2lubmluZ1R5cGV9IGZyb20gJy4uL3dvbmRlcmxhbmQuanMnO1xuXG5pbXBvcnQge1Jlc291cmNlTWFuYWdlcn0gZnJvbSAnLi9yZXNvdXJjZS5qcyc7XG5cbi8qKlxuICogTWFuYWdlIG1lc2hlcy5cbiAqXG4gKiAjIyMjIENyZWF0aW9uXG4gKlxuICogQ3JlYXRpbmcgYSBtZXNoIGlzIGRvbmUgdXNpbmcge0BsaW5rIE1lc2hNYW5hZ2VyLmNyZWF0ZX06XG4gKlxuICogYGBganNcbiAqIGNvbnN0IG1lc2ggPSBlbmdpbmUubWVzaGVzLmNyZWF0ZSh7dmVydGV4Q291bnQ6IDMsIGluZGV4RGF0YTogWzAsIDEsIDJdfSk7XG4gKiBgYGBcbiAqXG4gKiBAc2luY2UgMS4yLjBcbiAqL1xuZXhwb3J0IGNsYXNzIE1lc2hNYW5hZ2VyIGV4dGVuZHMgUmVzb3VyY2VNYW5hZ2VyPE1lc2g+IHtcbiAgICBjb25zdHJ1Y3RvcihlbmdpbmU6IFdvbmRlcmxhbmRFbmdpbmUpIHtcbiAgICAgICAgc3VwZXIoZW5naW5lLCBNZXNoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgbWVzaC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXJhbXMgVmVydGV4IGFuZCBpbmRleCBkYXRhLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgaGF2ZSBhIGxvb2tcbiAgICAgKiAgICAgYXQgdGhlIHtAbGluayBNZXNoUGFyYW1ldGVyc30gb2JqZWN0LlxuICAgICAqL1xuICAgIGNyZWF0ZShwYXJhbXM6IFBhcnRpYWw8TWVzaFBhcmFtZXRlcnM+KSB7XG4gICAgICAgIGlmICghcGFyYW1zLnZlcnRleENvdW50KSB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIHBhcmFtZXRlciAndmVydGV4Q291bnQnXCIpO1xuXG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuXG4gICAgICAgIGxldCBpbmRleERhdGEgPSAwO1xuICAgICAgICBsZXQgaW5kZXhUeXBlID0gMDtcbiAgICAgICAgbGV0IGluZGV4RGF0YVNpemUgPSAwO1xuICAgICAgICBpZiAocGFyYW1zLmluZGV4RGF0YSkge1xuICAgICAgICAgICAgaW5kZXhUeXBlID0gcGFyYW1zLmluZGV4VHlwZSB8fCBNZXNoSW5kZXhUeXBlLlVuc2lnbmVkU2hvcnQ7XG4gICAgICAgICAgICBpbmRleERhdGFTaXplID0gcGFyYW1zLmluZGV4RGF0YS5sZW5ndGggKiBpbmRleFR5cGU7XG4gICAgICAgICAgICBpbmRleERhdGEgPSB3YXNtLl9tYWxsb2MoaW5kZXhEYXRhU2l6ZSk7XG4gICAgICAgICAgICAvKiBDb3B5IHRoZSBpbmRleCBkYXRhIGludG8gd2FzbSBtZW1vcnkgKi9cbiAgICAgICAgICAgIHN3aXRjaCAoaW5kZXhUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBNZXNoSW5kZXhUeXBlLlVuc2lnbmVkQnl0ZTpcbiAgICAgICAgICAgICAgICAgICAgd2FzbS5IRUFQVTguc2V0KHBhcmFtcy5pbmRleERhdGEsIGluZGV4RGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgTWVzaEluZGV4VHlwZS5VbnNpZ25lZFNob3J0OlxuICAgICAgICAgICAgICAgICAgICB3YXNtLkhFQVBVMTYuc2V0KHBhcmFtcy5pbmRleERhdGEsIGluZGV4RGF0YSA+PiAxKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBNZXNoSW5kZXhUeXBlLlVuc2lnbmVkSW50OlxuICAgICAgICAgICAgICAgICAgICB3YXNtLkhFQVBVMzIuc2V0KHBhcmFtcy5pbmRleERhdGEsIGluZGV4RGF0YSA+PiAyKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7c2tpbm5pbmdUeXBlID0gTWVzaFNraW5uaW5nVHlwZS5Ob25lfSA9IHBhcmFtcztcblxuICAgICAgICBjb25zdCBpbmRleCA9IHdhc20uX3dsX21lc2hfY3JlYXRlKFxuICAgICAgICAgICAgaW5kZXhEYXRhLFxuICAgICAgICAgICAgaW5kZXhEYXRhU2l6ZSxcbiAgICAgICAgICAgIGluZGV4VHlwZSxcbiAgICAgICAgICAgIHBhcmFtcy52ZXJ0ZXhDb3VudCxcbiAgICAgICAgICAgIHNraW5uaW5nVHlwZVxuICAgICAgICApO1xuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IG5ldyBNZXNoKHRoaXMuX2hvc3QsIGluZGV4KTtcbiAgICAgICAgdGhpcy5fY2FjaGVbaW5zdGFuY2UuaW5kZXhdID0gaW5zdGFuY2U7XG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHtXb25kZXJsYW5kRW5naW5lfSBmcm9tICcuLi9pbmRleC5qcyc7XG5pbXBvcnQge0ltYWdlTGlrZX0gZnJvbSAnLi4vdHlwZXMuanMnO1xuaW1wb3J0IHtUZXh0dXJlfSBmcm9tICcuLi93b25kZXJsYW5kLmpzJztcblxuaW1wb3J0IHtSZXNvdXJjZU1hbmFnZXIsIFNjZW5lUmVzb3VyY2V9IGZyb20gJy4vcmVzb3VyY2UuanMnO1xuXG4vKipcbiAqIE1hbmFnZSB0ZXh0dXJlcy5cbiAqXG4gKiAjIyMjIENyZWF0aW9uXG4gKlxuICogQ3JlYXRpbmcgYSB0ZXh0dXJlIGlzIGRvbmUgdXNpbmcge0BsaW5rIFRleHR1cmVNYW5hZ2VyLmxvYWR9OlxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCB0ZXh0dXJlID0gYXdhaXQgZW5naW5lLnRleHR1cmVzLmxvYWQoJ215LWltYWdlLnBuZycpO1xuICogYGBgXG4gKlxuICogQWx0ZXJuYXRpdmVseSwgdGV4dHVyZXMgY2FuIGJlIGNyZWF0ZWQgZGlyZWN0bHkgdmlhIGEgbG9hZGVkIGltYWdlIHVzaW5nXG4gKiB7QGxpbmsgVGV4dHVyZU1hbmFnZXIuY3JlYXRlfS5cbiAqXG4gKiBAc2luY2UgMS4yLjBcbiAqL1xuZXhwb3J0IGNsYXNzIFRleHR1cmVNYW5hZ2VyIGV4dGVuZHMgUmVzb3VyY2VNYW5hZ2VyPFRleHR1cmU+IHtcbiAgICBjb25zdHJ1Y3RvcihlbmdpbmU6IFdvbmRlcmxhbmRFbmdpbmUpIHtcbiAgICAgICAgc3VwZXIoZW5naW5lLCBUZXh0dXJlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgdGV4dHVyZSBmcm9tIGFuIGltYWdlIG9yIHZpZGVvLlxuICAgICAqXG4gICAgICogIyMjIyBVc2FnZVxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgKiBpbWcubG9hZCA9IGZ1bmN0aW9uKGltZykge1xuICAgICAqICAgICBjb25zdCB0ZXh0dXJlID0gZW5naW5lLnRleHR1cmVzLmNyZWF0ZShpbWcpO1xuICAgICAqIH07XG4gICAgICogaW1nLnNyYyA9ICdteS1pbWFnZS5wbmcnO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQG5vdGUgVGhlIG1lZGlhIG11c3QgYWxyZWFkeSBiZSBsb2FkZWQuIFRvIGF1dG9tYXRpY2FsbHlcbiAgICAgKiBsb2FkIHRoZSBtZWRpYSBhbmQgY3JlYXRlIGEgdGV4dHVyZSwgdXNlIHtAbGluayBUZXh0dXJlTWFuYWdlci5sb2FkfSBpbnN0ZWFkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGltYWdlIE1lZGlhIGVsZW1lbnQgdG8gY3JlYXRlIHRoZSB0ZXh0dXJlIGZyb20uXG4gICAgICogQHJldFxcdXJucyBUaGUgbmV3IHRleHR1cmUgd2l0aCB0aGUgbWVkaWEgY29udGVudC5cbiAgICAgKi9cbiAgICBjcmVhdGUoaW1hZ2U6IEltYWdlTGlrZSk6IFRleHR1cmUge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcblxuICAgICAgICBjb25zdCBqc0ltYWdlSW5kZXggPSB3YXNtLl9pbWFnZXMubGVuZ3RoO1xuICAgICAgICB3YXNtLl9pbWFnZXMucHVzaChpbWFnZSk7XG5cbiAgICAgICAgaWYgKGltYWdlIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudCAmJiAhaW1hZ2UuY29tcGxldGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaW1hZ2UgbXVzdCBiZSByZWFkeSB0byBjcmVhdGUgYSB0ZXh0dXJlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB3aWR0aCA9IChpbWFnZSBhcyBIVE1MVmlkZW9FbGVtZW50KS52aWRlb1dpZHRoID8/IGltYWdlLndpZHRoO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSAoaW1hZ2UgYXMgSFRNTFZpZGVvRWxlbWVudCkudmlkZW9IZWlnaHQgPz8gaW1hZ2UuaGVpZ2h0O1xuXG4gICAgICAgIGNvbnN0IGltYWdlSW5kZXggPSB3YXNtLl93bF9pbWFnZV9jcmVhdGUoanNJbWFnZUluZGV4LCB3aWR0aCwgaGVpZ2h0KTtcblxuICAgICAgICAvKiBSZXF1aXJlZCBiZWNhdXNlIHRoZSBpbWFnZSBpc24ndCBhIHJlc291cmNlIGJ5IGl0c2VsZiwgYnV0IHdpbGwgZXZlbnR1YWxseSBiZSBvbmUuICovXG4gICAgICAgIGNvbnN0IGluZGV4ID0gd2FzbS5fd2xfdGV4dHVyZV9jcmVhdGUoaW1hZ2VJbmRleCk7XG5cbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSBuZXcgVGV4dHVyZSh0aGlzLmVuZ2luZSwgaW5kZXgpO1xuICAgICAgICB0aGlzLl9jYWNoZVtpbnN0YW5jZS5pbmRleF0gPSBpbnN0YW5jZTtcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvYWQgYW4gaW1hZ2UgZnJvbSBVUkwgYXMge0BsaW5rIFRleHR1cmV9LlxuICAgICAqXG4gICAgICogIyMjIyBVc2FnZVxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCB0ZXh0dXJlID0gYXdhaXQgZW5naW5lLnRleHR1cmVzLmxvYWQoJ215LWltYWdlLnBuZycpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIGZpbGVuYW1lIFVSTCB0byBsb2FkIGZyb20uXG4gICAgICogQHBhcmFtIGNyb3NzT3JpZ2luIENyb3NzIG9yaWdpbiBmbGFnIGZvciB0aGUgaW1hZ2Ugb2JqZWN0LlxuICAgICAqIEByZXR1cm5zIExvYWRlZCB0ZXh0dXJlLlxuICAgICAqL1xuICAgIGxvYWQoZmlsZW5hbWU6IHN0cmluZywgY3Jvc3NPcmlnaW4/OiBzdHJpbmcpOiBQcm9taXNlPFRleHR1cmU+IHtcbiAgICAgICAgbGV0IGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltYWdlLmNyb3NzT3JpZ2luID0gY3Jvc3NPcmlnaW4gPz8gaW1hZ2UuY3Jvc3NPcmlnaW47XG4gICAgICAgIGltYWdlLnNyYyA9IGZpbGVuYW1lO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgaW1hZ2Uub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcy5jcmVhdGUoaW1hZ2UpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpbWFnZS5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJlamVjdCgnRmFpbGVkIHRvIGxvYWQgaW1hZ2UuIE5vdCBmb3VuZCBvciBubyByZWFkIGFjY2VzcycpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwgImltcG9ydCB7V29uZGVybGFuZEVuZ2luZX0gZnJvbSAnLi9pbmRleC5qcyc7XG5pbXBvcnQge0luc3RhbnRpYXRlR2x0ZlJlc3VsdCwgU2NlbmV9IGZyb20gJy4vc2NlbmUuanMnO1xuaW1wb3J0IHtQcmVmYWJ9IGZyb20gJy4vcHJlZmFiLmpzJztcbmltcG9ydCB7T2JqZWN0M0R9IGZyb20gJy4vd29uZGVybGFuZC5qcyc7XG5cbi8qKiBHTFRGLXNwZWNpZmljIGxvYWRpbmcgb3B0aW9ucy4gKi9cbmV4cG9ydCB0eXBlIEdMVEZPcHRpb25zID0ge1xuICAgIC8qKiBJZiBgdHJ1ZWAsIGV4dGVuc2lvbnMgd2lsbCBiZSBwYXJzZWQuICovXG4gICAgZXh0ZW5zaW9ucz86IGJvb2xlYW47XG59O1xuXG4vKipcbiAqIEV4dGVuc2lvbiBkYXRhIG9idGFpbmVkIGZyb20gZ2xURiBmaWxlcy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBHTFRGRXh0ZW5zaW9uc0luc3RhbmNlIHtcbiAgICAvKipcbiAgICAgKiBNZXNoIGV4dGVuc2lvbiBvYmplY3RzLiBLZXkgaXMge0BsaW5rIE9iamVjdDNELm9iamVjdElkfSwgdmFsdWUgaXMgSlNPTlxuICAgICAqIGRhdGEgaW5kZXhlZCBieSBleHRlbnNpb24gbmFtZS5cbiAgICAgKi9cbiAgICBtZXNoOiBSZWNvcmQ8bnVtYmVyLCBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCBhbnk+Pj47XG4gICAgLyoqXG4gICAgICogTm9kZSBleHRlbnNpb24gb2JqZWN0cy4gS2V5IGlzIHtAbGluayBPYmplY3QzRC5vYmplY3RJZH0sIHZhbHVlIGlzIEpTT05cbiAgICAgKiBkYXRhIGluZGV4ZWQgYnkgZXh0ZW5zaW9uIG5hbWUuXG4gICAgICovXG4gICAgbm9kZTogUmVjb3JkPG51bWJlciwgUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgYW55Pj4+O1xuICAgIC8qKiBSZW1hcHBpbmcgZnJvbSBnbFRGIG5vZGUgaW5kZXggdG8ge0BsaW5rIE9iamVjdDNELm9iamVjdElkfS4gKi9cbiAgICBpZE1hcHBpbmc6IG51bWJlcltdO1xufVxuXG5leHBvcnQgY2xhc3MgR0xURkV4dGVuc2lvbnMge1xuICAgIG9iamVjdENvdW50OiBudW1iZXI7XG4gICAgLyoqIGdsVEYgcm9vdCBleHRlbnNpb25zIG9iamVjdC4gSlNPTiBkYXRhIGluZGV4ZWQgYnkgZXh0ZW5zaW9uIG5hbWUuICovXG4gICAgcm9vdDogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuICAgIC8qKlxuICAgICAqIE1lc2ggZXh0ZW5zaW9uIG9iamVjdHMuIEtleSBpcyB0aGUgZ2x0ZiBpbmRleCwgdmFsdWUgaXMgSlNPTlxuICAgICAqIGRhdGEgaW5kZXhlZCBieSBleHRlbnNpb24gbmFtZS5cbiAgICAgKi9cbiAgICBtZXNoOiBSZWNvcmQ8bnVtYmVyLCBSZWNvcmQ8c3RyaW5nLCBhbnk+PiA9IHt9O1xuICAgIC8qKlxuICAgICAqIE5vZGUgZXh0ZW5zaW9uIG9iamVjdHMuIEtleSBpcyBhIGdsVEYgaW5kZXgsIHZhbHVlIGlzIEpTT05cbiAgICAgKiBkYXRhIGluZGV4ZWQgYnkgZXh0ZW5zaW9uIG5hbWUuXG4gICAgICovXG4gICAgbm9kZTogUmVjb3JkPG51bWJlciwgUmVjb3JkPHN0cmluZywgYW55Pj4gPSB7fTtcblxuICAgIGNvbnN0cnVjdG9yKGNvdW50OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5vYmplY3RDb3VudCA9IGNvdW50O1xuICAgIH1cbn1cblxuLyoqXG4gKiBnbFRGIHNjZW5lLlxuICpcbiAqIEF0IHRoZSBvcHBvc2l0ZSBvZiB7QGxpbmsgU2NlbmV9LCBnbFRGIHNjZW5lcyBjYW4gYmUgaW5zdGFudGlhdGVkXG4gKiBpbiBvdGhlciBzY2VuZXMgYnV0IGNhbid0OlxuICogLSBCZSBhY3RpdmF0ZWRcbiAqIC0gQmUgdGhlIGRlc3RpbmF0aW9uIG9mIGFuIGluc3RhbnRpYXRpb25cbiAqXG4gKiAjIyMjIFVzYWdlXG4gKlxuICogYGBganNcbiAqIGNvbnN0IHByZWZhYiA9IGF3YWl0IGVuZ2luZS5sb2FkR0xURignWm9tYmllLmdsYicpO1xuICpcbiAqIGNvbnN0IHNjZW5lID0gZW5naW5lLnNjZW5lO1xuICogZm9yIChsZXQgaSA9IDA7IGkgPCAxMDA7ICsraSkge1xuICogICAgIHNjZW5lLmluc3RhbnRpYXRlKHByZWZhYik7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBTaW5jZSB0aGlzIGNsYXNzIGluaGVyaXRzIGZyb20ge0BsaW5rIFByZWZhYn0sIHlvdSBjYW4gdXNlIHRoZSBzaGFyZWRcbiAqIEFQSSB0byBtb2RpZnkgdGhlIGdsVEYgYmVmb3JlIGFuIGluc3RhbnRpYXRpb246XG4gKlxuICogYGBganNcbiAqIGNvbnN0IHByZWZhYiA9IGF3YWl0IGVuZ2luZS5sb2FkR0xURignWm9tYmllLmdsYicpO1xuICogY29uc3Qgem9tYmllID0gcHJlZmFiLmZpbmRCeU5hbWUoJ1pvbWJpZScpWzBdO1xuICpcbiAqIC8vIFRoZSBtZXNoIGlzIHRvbyBzbWFsbCwgd2Ugc2NhbGUgdGhlIHJvb3RcbiAqIHpvbWJpZS5zZXRTY2FsaW5nV29ybGQoWzIsIDIsIDJdKTtcbiAqIC8vIEFkZCBhIGN1c3RvbSBqcyAnaGVhbHRoJyBjb21wb25lbnQgdG8gdGhlIHJvb3RcbiAqIHpvbWJpZS5hZGRDb21wb25lbnQoJ2hlYWx0aCcsIHt2YWx1ZTogMTAwfSk7XG4gKlxuICogLy8gJ1pvbWJpZScgaXMgd3JhcHBlZCBpbiBhIG5ldyByb290IGFkZGVkIGR1cmluZyBpbnN0YW50aWF0aW9uXG4gKiBjb25zdCB7cm9vdH0gPSBlbmdpbmUuc2NlbmUuaW5zdGFudGlhdGUocHJlZmFiKTtcbiAqIGNvbnN0IGluc3RhbmNlWm9tYmllID0gcm9vdC5jaGlsZHJlblswXTtcbiAqIGNvbnNvbGUubG9nKGluc3RhbmNlWm9tYmllLmdldFNjYWxpbmdXb3JsZCgpKTsgLy8gUHJpbnRzICdbMiwgMiwgMl0nXG4gKiBgYGBcbiAqXG4gKiBAY2F0ZWdvcnkgc2NlbmVcbiAqIEBzaW5jZSAxLjIuMFxuICovXG5leHBvcnQgY2xhc3MgUHJlZmFiR0xURiBleHRlbmRzIFByZWZhYiB7XG4gICAgLyoqXG4gICAgICogUmF3IGV4dGVuc2lvbnMgcmVhZCBmcm9tIHRoZSBnbFRGIGZpbGUuXG4gICAgICpcbiAgICAgKiBUaGUgZXh0ZW5zaW9ucyB3aWxsIGJlIG1hcHBlZCB0byB0aGUgaGllcmFyY2h5IHVwb24gaW5zdGFudGlhdGlvbi5cbiAgICAgKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgaGF2ZSBhIGxvb2sgYXQgdGhlIHtAbGluayBJbnN0YW50aWF0ZUdsdGZSZXN1bHR9IHR5cGUuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGUgZ2xURiBtdXN0IGJlIGxvYWRlZCB3aXRoIGBleHRlbnNpb25zYCBlbmFibGVkLiBJZiBub3QsIHRoaXNcbiAgICAgKiBmaWVsZCB3aWxsIGJlIHNldCB0byBgbnVsbGAuIEZvciBtb3JlIGluZm9ybWF0aW9uLCBoYXZlIGEgbG9vayBhdCB0aGVcbiAgICAgKiB7QGxpbmsgR0xURk9wdGlvbnN9IHR5cGUuXG4gICAgICovXG4gICAgZXh0ZW5zaW9uczogR0xURkV4dGVuc2lvbnMgfCBudWxsID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbmdpbmU6IFdvbmRlcmxhbmRFbmdpbmUsIGluZGV4OiBudW1iZXIpIHtcbiAgICAgICAgc3VwZXIoZW5naW5lLCBpbmRleCk7XG4gICAgICAgIHRoaXMuZXh0ZW5zaW9ucyA9IHRoaXMuX3JlYWRFeHRlbnNpb25zKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5zdGFudGlhdGUgdGhlIGdsVEYgZXh0ZW5zaW9ucyBvbiBhbiBhY3RpdmUgc3ViIHNjZW5lIGdyYXBoLlxuICAgICAqXG4gICAgICogQHBhcmFtIGlkIFRoZSByb290IG9iamVjdCBpZC5cbiAgICAgKiBAcGFyYW0gcmVzdWx0IFRoZSBpbnN0YW50aWF0aW9uIG9iamVjdCByZXN1bHQuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX3Byb2Nlc3NJbnN0YW50aWF0b24oZGVzdDogUHJlZmFiLCByb290OiBPYmplY3QzRCwgcmVzdWx0OiBJbnN0YW50aWF0ZUdsdGZSZXN1bHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmV4dGVuc2lvbnMpIHJldHVybiBudWxsO1xuXG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuXG4gICAgICAgIGNvbnN0IGNvdW50ID0gdGhpcy5leHRlbnNpb25zLm9iamVjdENvdW50O1xuICAgICAgICBjb25zdCBpZE1hcHBpbmc6IG51bWJlcltdID0gbmV3IEFycmF5KGNvdW50KTtcblxuICAgICAgICAvKiogQHRvZG86IFdlIG5lZWQgc29tZSBjaGVjayB0byBlbnN1cmUgdGhhdCB0aGUgZ2x0ZiBsYXlvdXQgZGlkbid0IGNoYW5nZSB0byByZXRhcmdldCBleHRlbnNpb25zLlxuICAgICAgICAgKiBBdCBsZWFzdCBhIHNpbXBsZSBzY2VuZSBncmFwaCBzaXplIGNoZWNrIHNob3VsZCBiZSByZXF1aXJlZCB0byBhdm9pZCBhIHNlZ2ZhdWx0LiAqL1xuXG4gICAgICAgIGNvbnN0IGFjdGl2ZVJvb3RJbmRleCA9IHdhc20uX3dsX29iamVjdF9pbmRleChyb290Ll9pZCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgbWFwcGVkSWQgPSB3YXNtLl93bF9nbFRGX3NjZW5lX2V4dGVuc2lvbnNfZ2x0ZkluZGV4X3RvX2lkKFxuICAgICAgICAgICAgICAgIHRoaXMuX2luZGV4LFxuICAgICAgICAgICAgICAgIGRlc3QuX2luZGV4LFxuICAgICAgICAgICAgICAgIGFjdGl2ZVJvb3RJbmRleCxcbiAgICAgICAgICAgICAgICBpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWRNYXBwaW5nW2ldID0gbWFwcGVkSWQ7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZW1hcHBlZDogR0xURkV4dGVuc2lvbnNJbnN0YW5jZSA9IHtcbiAgICAgICAgICAgIG1lc2g6IHt9LFxuICAgICAgICAgICAgbm9kZToge30sXG4gICAgICAgICAgICBpZE1hcHBpbmcsXG4gICAgICAgIH07XG5cbiAgICAgICAgZm9yIChjb25zdCBnbHRmSW5kZXggaW4gdGhpcy5leHRlbnNpb25zLm1lc2gpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gaWRNYXBwaW5nW2dsdGZJbmRleF07XG4gICAgICAgICAgICByZW1hcHBlZC5tZXNoW2lkXSA9IHRoaXMuZXh0ZW5zaW9ucy5tZXNoW2dsdGZJbmRleF07XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBnbHRmSW5kZXggaW4gdGhpcy5leHRlbnNpb25zLm5vZGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gaWRNYXBwaW5nW2dsdGZJbmRleF07XG4gICAgICAgICAgICByZW1hcHBlZC5ub2RlW2lkXSA9IHRoaXMuZXh0ZW5zaW9ucy5ub2RlW2dsdGZJbmRleF07XG4gICAgICAgIH1cblxuICAgICAgICByZXN1bHQuZXh0ZW5zaW9ucyA9IHJlbWFwcGVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVubWFyc2hhbGxzIGdsdGYgZXh0ZW5zaW9ucy5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBwcml2YXRlIF9yZWFkRXh0ZW5zaW9ucygpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG5cbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfZ2xURl9zY2VuZV9nZXRfZXh0ZW5zaW9ucyh0aGlzLl9pbmRleCk7XG4gICAgICAgIGlmICghcHRyKSByZXR1cm4gbnVsbDtcblxuICAgICAgICBsZXQgaW5kZXggPSBwdHIgLyA0O1xuICAgICAgICBjb25zdCBkYXRhID0gd2FzbS5IRUFQVTMyO1xuICAgICAgICBjb25zdCByZWFkU3RyaW5nID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3RyUHRyID0gZGF0YVtpbmRleCsrXTtcbiAgICAgICAgICAgIGNvbnN0IHN0ckxlbiA9IGRhdGFbaW5kZXgrK107XG4gICAgICAgICAgICByZXR1cm4gd2FzbS5VVEY4Vmlld1RvU3RyaW5nKHN0clB0ciwgc3RyUHRyICsgc3RyTGVuKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBvYmplY3RDb3VudCA9IGRhdGFbaW5kZXgrK107XG4gICAgICAgIGNvbnN0IGV4dGVuc2lvbnMgPSBuZXcgR0xURkV4dGVuc2lvbnMob2JqZWN0Q291bnQpO1xuXG4gICAgICAgIGNvbnN0IG1lc2hFeHRlbnNpb25zU2l6ZSA9IGRhdGFbaW5kZXgrK107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzaEV4dGVuc2lvbnNTaXplOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IG9iamVjdElkID0gZGF0YVtpbmRleCsrXTtcbiAgICAgICAgICAgIGV4dGVuc2lvbnMubWVzaFtvYmplY3RJZF0gPSBKU09OLnBhcnNlKHJlYWRTdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgbm9kZUV4dGVuc2lvbnNTaXplID0gZGF0YVtpbmRleCsrXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2RlRXh0ZW5zaW9uc1NpemU7ICsraSkge1xuICAgICAgICAgICAgY29uc3Qgb2JqZWN0SWQgPSBkYXRhW2luZGV4KytdO1xuICAgICAgICAgICAgZXh0ZW5zaW9ucy5ub2RlW29iamVjdElkXSA9IEpTT04ucGFyc2UocmVhZFN0cmluZygpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByb290RXh0ZW5zaW9uc1N0ciA9IHJlYWRTdHJpbmcoKTtcbiAgICAgICAgaWYgKHJvb3RFeHRlbnNpb25zU3RyKSB7XG4gICAgICAgICAgICBleHRlbnNpb25zLnJvb3QgPSBKU09OLnBhcnNlKHJvb3RFeHRlbnNpb25zU3RyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBleHRlbnNpb25zO1xuICAgIH1cbn1cbiIsICJpbXBvcnQge1dvbmRlcmxhbmRFbmdpbmV9IGZyb20gJy4vZW5naW5lLmpzJztcbmltcG9ydCB7TG9nVGFnLCBXQVNNfSBmcm9tICcuL2luZGV4LmpzJztcbmltcG9ydCB7RW1pdHRlcn0gZnJvbSAnLi91dGlscy9ldmVudC5qcyc7XG5pbXBvcnQge2ZldGNoU3RyZWFtV2l0aFByb2dyZXNzLCBmZXRjaFdpdGhQcm9ncmVzcywgZ2V0QmFzZVVybH0gZnJvbSAnLi91dGlscy9mZXRjaC5qcyc7XG5pbXBvcnQge2lzU3RyaW5nfSBmcm9tICcuL3V0aWxzL29iamVjdC5qcyc7XG5pbXBvcnQge1ZpZXdDb21wb25lbnQsIE9iamVjdDNELCBSYXlIaXQsIEVudmlyb25tZW50fSBmcm9tICcuL3dvbmRlcmxhbmQuanMnO1xuaW1wb3J0IHtOdW1iZXJBcnJheX0gZnJvbSAnLi90eXBlcy5qcyc7XG5pbXBvcnQge01hdGVyaWFsfSBmcm9tICcuL3Jlc291cmNlcy9tYXRlcmlhbC1tYW5hZ2VyLmpzJztcbmltcG9ydCB7SW5NZW1vcnlMb2FkT3B0aW9ucywgUHJlZmFiLCBTY2VuZUxvYWRPcHRpb25zfSBmcm9tICcuL3ByZWZhYi5qcyc7XG5pbXBvcnQge0dMVEZFeHRlbnNpb25zSW5zdGFuY2UsIFByZWZhYkdMVEZ9IGZyb20gJy4vc2NlbmUtZ2x0Zi5qcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5zdGFudGlhdGVSZXN1bHQge1xuICAgIHJvb3Q6IE9iamVjdDNEO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEluc3RhbnRpYXRlR2x0ZlJlc3VsdCBleHRlbmRzIEluc3RhbnRpYXRlUmVzdWx0IHtcbiAgICBleHRlbnNpb25zOiBHTFRGRXh0ZW5zaW9uc0luc3RhbmNlIHwgbnVsbDtcbn1cblxuLyoqIE9wdGlvbnMgZm9yIHNjZW5lIGFjdGl2YXRpb24uICovXG5leHBvcnQgaW50ZXJmYWNlIEFjdGl2YXRlT3B0aW9ucyB7XG4gICAgLyoqIElmIGB0cnVlYCwgZGlzcGF0Y2hlcyBhIHJlYWR5IGV2ZW50IGluIHRoZSBkb2N1bWVudC4gKi9cbiAgICBkaXNwYXRjaFJlYWR5RXZlbnQ/OiBib29sZWFuO1xuICAgIC8qKlxuICAgICAqIElmIGB0cnVlYCwgdGhlIHByb21pc2Ugd2lsbCByZXNvbHZlIG9ubHkgb25jZSBhbGwgZGVwZW5kZW5jaWVzIGFyZSBkb3dubG9hZGVkLlxuICAgICAqXG4gICAgICogSWYgYGZhbHNlYCwgcmVzb2x2ZXMgYXMgc29vbiBhcyBwb3NzaWJsZSwgZS5nLiwgd2hlbiB0aGUgbG93ZXN0XG4gICAgICogcmVzb2x1dGlvbiB0ZXh0dXJlcyBhcmUgYXZhaWxhYmxlLlxuICAgICAqL1xuICAgIHdhaXRGb3JEZXBlbmRlbmNpZXM/OiBib29sZWFuO1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgbGVnYWN5TG9hZGVkPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBMZWdhY3kgZ2x0ZiBleHRlbnNpb24gdHlwZS5cbiAqXG4gKiBAZGVwcmVjYXRlZCBVc2UgdGhlIG5ldyB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5sb2FkR0xURn0gQVBJLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEdMVEZFeHRlbnNpb25zTGVnYWN5IHtcbiAgICAvKiogZ2xURiByb290IGV4dGVuc2lvbnMgb2JqZWN0LiBKU09OIGRhdGEgaW5kZXhlZCBieSBleHRlbnNpb24gbmFtZS4gKi9cbiAgICByb290OiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCBhbnk+PjtcbiAgICAvKipcbiAgICAgKiBNZXNoIGV4dGVuc2lvbiBvYmplY3RzLiBLZXkgaXMge0BsaW5rIE9iamVjdDNELm9iamVjdElkfSwgdmFsdWUgaXMgSlNPTlxuICAgICAqIGRhdGEgaW5kZXhlZCBieSBleHRlbnNpb24gbmFtZS5cbiAgICAgKi9cbiAgICBtZXNoOiBSZWNvcmQ8bnVtYmVyLCBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCBhbnk+Pj47XG4gICAgLyoqXG4gICAgICogTm9kZSBleHRlbnNpb24gb2JqZWN0cy4gS2V5IGlzIHtAbGluayBPYmplY3QzRC5vYmplY3RJZH0sIHZhbHVlIGlzIEpTT05cbiAgICAgKiBkYXRhIGluZGV4ZWQgYnkgZXh0ZW5zaW9uIG5hbWUuXG4gICAgICovXG4gICAgbm9kZTogUmVjb3JkPG51bWJlciwgUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgYW55Pj4+O1xuICAgIC8qKiBSZW1hcHBpbmcgZnJvbSBnbFRGIG5vZGUgaW5kZXggdG8ge0BsaW5rIE9iamVjdDNELm9iamVjdElkfS4gKi9cbiAgICBpZE1hcHBpbmc6IG51bWJlcltdO1xufVxuXG4vKiogT3B0aW9ucyBmb3Ige0BsaW5rIFNjZW5lLmFwcGVuZH0uICovXG5leHBvcnQgaW50ZXJmYWNlIFNjZW5lQXBwZW5kUGFyYW1ldGVycyB7XG4gICAgLyoqIFdoZXRoZXIgdG8gbG9hZCBnbFRGIGV4dGVuc2lvbiBkYXRhICovXG4gICAgbG9hZEdsdGZFeHRlbnNpb25zOiBib29sZWFuO1xuICAgIGJhc2VVUkw6IHN0cmluZyB8IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBSZXN1bHQgb2J0YWluZWQgd2hlbiBhcHBlbmRpbmcgYSBzY2VuZSB3aXRoIHtAbGluayBTY2VuZS5hcHBlbmR9IHdpdGggZ2x0ZiBleHRlbnNpb25zLlxuICovXG5leHBvcnQgdHlwZSBTY2VuZUFwcGVuZFJlc3VsdFdpdGhFeHRlbnNpb25zID0ge1xuICAgIHJvb3Q6IE9iamVjdDNEIHwgbnVsbDtcbiAgICBleHRlbnNpb25zOiBHTFRGRXh0ZW5zaW9uc0xlZ2FjeTtcbn07XG5cbi8qKlxuICogUmVzdWx0IG9idGFpbmVkIHdoZW4gYXBwZW5kaW5nIGEgc2NlbmUgd2l0aCB7QGxpbmsgU2NlbmUuYXBwZW5kfS5cbiAqL1xuZXhwb3J0IHR5cGUgU2NlbmVBcHBlbmRSZXN1bHQgPSAoT2JqZWN0M0QgfCBudWxsKSB8IFNjZW5lQXBwZW5kUmVzdWx0V2l0aEV4dGVuc2lvbnM7XG5cbi8qKlxuICogQ29uc3RhbnRzXG4gKi9cblxuLyoqIE1hZ2ljIG51bWJlciBmb3IgLmJpbiAqL1xuY29uc3QgTUFHSUNfQklOID0gJ1dMRVYnO1xuXG4vKipcbiAqIFNjZW5lIHR5cGUgdG8gbG9hZCB3aXRoIHtAbGluayBDaHVua2VkU2NlbmVMb2FkU2lua30uXG4gKlxuICogQHNpbmNlIDEuMi4xXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBlbnVtIFNjZW5lVHlwZSB7XG4gICAgUHJlZmFiLFxuICAgIE1haW4sXG4gICAgRGVwZW5kZW5jeSxcbn1cblxuLyoqXG4gKiBTaW5rIGZvciBgV3JpdGFibGVTdHJlYW1gIHRoYXQgbG9hZHMgdGhlIGRhdGEgYXMgYSAuYmluIGZpbGUuXG4gKlxuICogRGF0YSBpcyBsb2FkZWQgY2h1bmsgYnkgY2h1bmsgdG8gbWluaW1pemUgdGhlIHRvdGFsIFdBU00gYWxsb2NhdGlvbiBzaXplLlxuICpcbiAqIEBzaW5jZSAxLjIuMVxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgQ2h1bmtlZFNjZW5lTG9hZFNpbmsgaW1wbGVtZW50cyBVbmRlcmx5aW5nU2luazxVaW50OEFycmF5PiB7XG4gICAgcmVhZG9ubHkgI3dhc206IFdBU007XG4gICAgcmVhZG9ubHkgI3R5cGU6IFNjZW5lVHlwZTtcbiAgICByZWFkb25seSAjY2xvc2VQYXJhbWV0ZXJzOiBhbnlbXTtcbiAgICAjb2Zmc2V0ID0gMDtcbiAgICAjcmVxdWVzdGVkID0gMDtcbiAgICAjZmlyc3RDaHVuayA9IHRydWU7XG5cbiAgICBfbG9hZEluZGV4ID0gLTE7XG4gICAgc2NlbmVJbmRleCA9IC0xO1xuXG4gICAgLyoqIFBvaW50ZXIgdG8gdGhlIHN0YWdpbmcgYnVmZmVyLiAqL1xuICAgICNwdHI6IG51bWJlciA9IDA7XG4gICAgLyoqIFN0YWdpbmcgYnVmZmVyIHNpemUsIGluICoqYnl0ZXMqKi4gKi9cbiAgICAjYnVmZmVyU2l6ZTogbnVtYmVyID0gMDtcblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBjb25zdHJ1Y3RvcihlbmdpbmU6IFdvbmRlcmxhbmRFbmdpbmUsIHR5cGU6IFNjZW5lVHlwZS5QcmVmYWIsIHVybDogc3RyaW5nKTtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgY29uc3RydWN0b3IoZW5naW5lOiBXb25kZXJsYW5kRW5naW5lLCB0eXBlOiBTY2VuZVR5cGUuTWFpbiwgdXJsOiBzdHJpbmcpO1xuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgZW5naW5lOiBXb25kZXJsYW5kRW5naW5lLFxuICAgICAgICB0eXBlOiBTY2VuZVR5cGUuRGVwZW5kZW5jeSxcbiAgICAgICAgdXJsOiBzdHJpbmcsXG4gICAgICAgIGRlcGVuZGVudFNjZW5lSW5kZXg6IG51bWJlclxuICAgICk7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0gZW5naW5lIEVuZ2luZSBpbnN0YW5jZVxuICAgICAqIEBwYXJhbSB0eXBlIFR5cGUgb2Ygc2NlbmUgdG8gbG9hZFxuICAgICAqIEBwYXJhbSB1cmwgVVJMIGZvciB0aGUgc2NlbmUgY3JlYXRpb24uIENhbiBiZSBlbXB0eS5cbiAgICAgKiBAcGFyYW0gY2xvc2VQYXJhbWV0ZXJzIFBhcmFtZXRlcnMgZm9yIHRoZSBmaW5hbCBmdW5jdGlvbiB0byBiZSBjYWxsZWRcbiAgICAgKiAgICAgZHVyaW5nIGEgc3VjY2Vzc2Z1bCB7QGxpbmsgQ2h1bmtlZFNjZW5lTG9hZFNpbmsuY2xvc2V9LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBlbmdpbmU6IFdvbmRlcmxhbmRFbmdpbmUsXG4gICAgICAgIHR5cGU6IFNjZW5lVHlwZSxcbiAgICAgICAgdXJsOiBzdHJpbmcsXG4gICAgICAgIC4uLmNsb3NlUGFyYW1ldGVyczogYW55W11cbiAgICApIHtcbiAgICAgICAgdGhpcy4jd2FzbSA9IGVuZ2luZS53YXNtO1xuICAgICAgICB0aGlzLiN0eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy4jY2xvc2VQYXJhbWV0ZXJzID0gY2xvc2VQYXJhbWV0ZXJzO1xuICAgICAgICB0aGlzLl9sb2FkSW5kZXggPSB0aGlzLiN3YXNtLl93bF9zY2VuZV9jcmVhdGVfY2h1bmtlZF9zdGFydChcbiAgICAgICAgICAgIHRoaXMuI3dhc20udGVtcFVURjgodXJsKVxuICAgICAgICApO1xuICAgICAgICAvKiBJbml0aWFsIGJ1ZmZlciBmb3IgdGhlIGhlYWRlciBjaHVuayAqL1xuICAgICAgICB0aGlzLiNyZXF1ZXN0ZWQgPSB0aGlzLiN3YXNtLl93bF9zY2VuZV9jcmVhdGVfY2h1bmtlZF9idWZmZXJfc2l6ZSh0aGlzLl9sb2FkSW5kZXgpO1xuICAgICAgICB0aGlzLl9yZXNpemVCdWZmZXIodGhpcy4jcmVxdWVzdGVkKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9yZXNpemVCdWZmZXIoc2l6ZTogbnVtYmVyKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXJTaXplID4gMCkge1xuICAgICAgICAgICAgdGhpcy4jd2FzbS5fZnJlZSh0aGlzLiNwdHIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2J1ZmZlclNpemUgPSBzaXplO1xuICAgICAgICB0aGlzLiNwdHIgPSBzaXplID8gdGhpcy4jd2FzbS5fbWFsbG9jKHNpemUpIDogMDtcbiAgICB9XG5cbiAgICBwcml2YXRlIF90aHJvd0Vycm9yKHJlYXNvbjogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuYWJvcnQoKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlYXNvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV3JpdGUgYSBzaW5nbGUgYmxvYiBvZiBkYXRhLlxuICAgICAqXG4gICAgICogQHBhcmFtIGJsb2IgRGF0YSB0byBwYXJzZVxuICAgICAqL1xuICAgIHdyaXRlKGJsb2I6IFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgbGV0IHJlYWQgPSAwO1xuICAgICAgICB3aGlsZSAocmVhZCA8IGJsb2IubGVuZ3RoKSB7XG4gICAgICAgICAgICAvKiBGaWxsIHRoZSBzdGFnaW5nIGJ1ZmZlciAqL1xuICAgICAgICAgICAgY29uc3QgdG9SZWFkID0gTWF0aC5taW4oYmxvYi5sZW5ndGggLSByZWFkLCB0aGlzLiNidWZmZXJTaXplIC0gdGhpcy4jb2Zmc2V0KTtcbiAgICAgICAgICAgIC8qICoqRG8gbm90KiogYXR0ZW1wdCB0byBjcmVhdGUgYSBIRUFQOCB2aWV3IGhlcmUsIHNpbmNlIHRoZSBuZXh0IHdhc20gY2FsbCBtaWdodFxuICAgICAgICAgICAgICogcmUtYWxsb2NhdGUgdGhlIGhlYXAsIG1ha2luZyB0aGlzIHZpZXcgZGFuZ2xpbmcuICovXG4gICAgICAgICAgICB0aGlzLiN3YXNtLkhFQVBVOC5zZXQoXG4gICAgICAgICAgICAgICAgYmxvYi5zdWJhcnJheShyZWFkLCByZWFkICsgdG9SZWFkKSxcbiAgICAgICAgICAgICAgICB0aGlzLiNwdHIgKyB0aGlzLiNvZmZzZXRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLiNvZmZzZXQgKz0gdG9SZWFkO1xuICAgICAgICAgICAgcmVhZCArPSB0b1JlYWQ7XG5cbiAgICAgICAgICAgIC8qIE5vdCBlbm91Z2ggZGF0YSwgd2FpdCBmb3IgbW9yZSAqL1xuICAgICAgICAgICAgaWYgKHRoaXMuI3JlcXVlc3RlZCA+IHRoaXMuI29mZnNldCkgY29udGludWU7XG5cbiAgICAgICAgICAgIC8qIFNlbmQgZGF0YS4gVGhpcyBsb2FkcyBhcyBtYW55IGNodW5rcyBhcyBwb3NzaWJsZSBhbmQgdGhlbiB0ZWxsc1xuICAgICAgICAgICAgICogdXMgaG93IG11Y2ggZGF0YSBpdCdzIG1pc3NpbmcsIGFuZCBob3cgbXVjaCBpdCBoYXMgcmVhZC4gVGhlXG4gICAgICAgICAgICAgKiByZWFkIGNvdW50IGFsbG93cyB1cyB0byBtb3ZlIGluY29tcGxldGUgY2h1bmsgZGF0YSB0byB0aGUgc3RhcnRcbiAgICAgICAgICAgICAqIG9mIHRoZSBidWZmZXIuIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgdGhlIGJ1ZmZlciBpcyBhbGxvY2F0ZWRcbiAgICAgICAgICAgICAqIHdpdGgganVzdCBlbm91Z2ggZGF0YSB0byBob2xkIHRoZSBsYXJnZXN0IGNodW5rLiAqL1xuICAgICAgICAgICAgY29uc3QgcmVhZFNpemVQdHIgPSB0aGlzLiN3YXNtLl90ZW1wTWVtO1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdGVkUHRyID0gdGhpcy4jd2FzbS5fdGVtcE1lbSArIDQ7XG4gICAgICAgICAgICBsZXQgc3VjY2VzczogYm9vbGVhbjtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgc3VjY2VzcyA9IHRoaXMuI3dhc20uX3dsX3NjZW5lX2NyZWF0ZV9jaHVua2VkX25leHQoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jcHRyLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLiNvZmZzZXQsXG4gICAgICAgICAgICAgICAgICAgIHJlYWRTaXplUHRyLFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ZWRQdHJcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICAgICAgLyogQ2F0Y2ggY2FsbHMgdG8gYWJvcnQoKSwgZS5nLiB2aWEgYXNzZXJ0cyAqL1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFzdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdGhyb3dFcnJvcignQ2h1bmsgcGFyc2luZyBmYWlsZWQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgc2VudFNpemUgPSB0aGlzLiNvZmZzZXQ7XG4gICAgICAgICAgICBjb25zdCByZWFkU2l6ZSA9IHRoaXMuI3dhc20uX3RlbXBNZW1VaW50MzJbMF07XG4gICAgICAgICAgICB0aGlzLiNyZXF1ZXN0ZWQgPSB0aGlzLiN3YXNtLl90ZW1wTWVtVWludDMyWzFdO1xuICAgICAgICAgICAgY29uc3QgZXh0cmFTaXplID0gc2VudFNpemUgLSByZWFkU2l6ZTtcblxuICAgICAgICAgICAgLyogI3JlcXVlc3RlZCA9PSAwIHNpZ25hbHMgZW5kIG9mIC5iaW4gZmlsZSAqL1xuICAgICAgICAgICAgaWYgKGV4dHJhU2l6ZSA+IHRoaXMuI3JlcXVlc3RlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3Rocm93RXJyb3IoJ1VuZXhwZWN0ZWQgZXh0cmEgZGF0YScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiBOb3QgZW5vdWdoIGRhdGEgZm9yIGEgY2h1bmssIHdhaXQgZm9yIG1vcmUgKi9cbiAgICAgICAgICAgIGlmICghcmVhZFNpemUpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBpZiAoZXh0cmFTaXplID4gMCkge1xuICAgICAgICAgICAgICAgIC8qIFdlIHBhc3NlZCBvbmUgb3IgbW9yZSBjb21wbGV0ZSBjaHVua3MgcGx1cyBpbmNvbXBsZXRlIGV4dHJhXG4gICAgICAgICAgICAgICAgICogZGF0YSBmb3IgdGhlIG5leHQgY2h1bmsuIE1vdmUgaXQgdG8gdGhlIGJ1ZmZlciBzdGFydC4gKi9cbiAgICAgICAgICAgICAgICB0aGlzLiN3YXNtLkhFQVBVOC5jb3B5V2l0aGluKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLiNwdHIsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI3B0ciArIHJlYWRTaXplLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLiNwdHIgKyBzZW50U2l6ZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuI29mZnNldCA9IGV4dHJhU2l6ZTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuI2ZpcnN0Q2h1bmspIHtcbiAgICAgICAgICAgICAgICAvKiBGaXJzdCBjaHVuayBpcyB0aGUgaGVhZGVyLiBBdCB0aGlzIHBvaW50IHdlIGNhbiBxdWVyeSBmb3JcbiAgICAgICAgICAgICAgICAgKiB0aGUgcmVxdWlyZWQgYnVmZmVyIHNpemUgZm9yIHBhcnNpbmcgdGhlIHJlc3Qgb2YgdGhlIC5iaW4uXG4gICAgICAgICAgICAgICAgICogVGhlIGluaXRpYWwgYnVmZmVyIGlzIGV4YWN0bHkgdGhlIHNpemUgb2YgdGhlIGhlYWRlciBjaHVua1xuICAgICAgICAgICAgICAgICAqIHNvICNvZmZzZXQgc2hvdWxkIGJlIDAgaGVyZSBzaW5jZSB3ZSBzZW50IGEgY29tcGxldGUgY2h1bmsuICovXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVzaXplQnVmZmVyKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLiN3YXNtLl93bF9zY2VuZV9jcmVhdGVfY2h1bmtlZF9idWZmZXJfc2l6ZSh0aGlzLl9sb2FkSW5kZXgpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNmaXJzdENodW5rID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogQ2FsbGVkIHdoZW4gYWxsIGJsb2JzIG9mIGRhdGEgaGF2ZSBiZWVuIHdyaXR0ZW4gKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuI3JlcXVlc3RlZCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuX3Rocm93RXJyb3IoJ1VuZXhwZWN0ZWQgZW5kIG9mIGRhdGEnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3Jlc2l6ZUJ1ZmZlcigwKTtcbiAgICAgICAgc3dpdGNoICh0aGlzLiN0eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFNjZW5lVHlwZS5QcmVmYWI6XG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZUluZGV4ID0gdGhpcy4jd2FzbS5fd2xfc2NlbmVfY3JlYXRlX2NodW5rZWRfZW5kX3ByZWZhYihcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbG9hZEluZGV4XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU2NlbmVUeXBlLk1haW46XG4gICAgICAgICAgICAgICAgdGhpcy4jd2FzbS5fd2xfc2NlbmVfY3JlYXRlX2NodW5rZWRfZW5kX21haW4odGhpcy5fbG9hZEluZGV4KTtcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lSW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTY2VuZVR5cGUuRGVwZW5kZW5jeTpcbiAgICAgICAgICAgICAgICBbdGhpcy5zY2VuZUluZGV4XSA9IHRoaXMuI2Nsb3NlUGFyYW1ldGVycztcbiAgICAgICAgICAgICAgICB0aGlzLiN3YXNtLl93bF9zY2VuZV9jcmVhdGVfY2h1bmtlZF9lbmRfcXVldWVkKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb2FkSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmVJbmRleFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRoaXMuI3dhc20uX3dsX3NjZW5lX2NyZWF0ZV9jaHVua2VkX2Fib3J0KHRoaXMuX2xvYWRJbmRleCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbG9hZEluZGV4ID0gLTE7XG4gICAgfVxuXG4gICAgLyoqIENhbGxlZCB3aGVuIHRoZSBzdHJlYW0gaXMgYWJvcnRlZCAqL1xuICAgIGFib3J0KCkge1xuICAgICAgICBpZiAodGhpcy5fbG9hZEluZGV4ID09PSAtMSkgcmV0dXJuO1xuICAgICAgICB0aGlzLiN3YXNtLl93bF9zY2VuZV9jcmVhdGVfY2h1bmtlZF9hYm9ydCh0aGlzLl9sb2FkSW5kZXgpO1xuICAgICAgICB0aGlzLl9sb2FkSW5kZXggPSAtMTtcbiAgICAgICAgdGhpcy5fcmVzaXplQnVmZmVyKDApO1xuICAgIH1cblxuICAgIC8qKiBTdGFnaW5nIGJ1ZmZlciBzaXplICovXG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNidWZmZXJTaXplO1xuICAgIH1cbn1cblxuLyoqXG4gKiBXb25kZXJsYW5kIEVuZ2luZSAoLmJpbikgc2NlbmUuXG4gKlxuICogV29uZGVybGFuZCBFbmdpbmUgcGFja2FnZXMgdHdvIHR5cGVzIG9mIHNjZW5lOlxuICogLSBBY3RpdmF0YWJsZSBzY2VuZTogQ29udGFpbnMgb2JqZWN0cywgY29tcG9uZW50cywgdmlld3MsIHJlc291cmNlcywgYW5kIHJlbmRlcmluZyBkYXRhXG4gKiAtIFN0cmVhbWFibGUgc2NlbmU6IENvbnRhaW5zIG9iamVjdHMsIGNvbXBvbmVudHMsIGFuZCByZXNvdXJjZXNcbiAqXG4gKiAjIyMjIEFjdGl2YXRpb25cbiAqXG4gKiBTb21lIHNjZW5lcyBhcmUgKiphY3RpdmF0YWJsZSoqLCB0aGV5IGNhbiB0aHVzIGJlIGF0dGFjaGVkIHRvIHRoZSByZW5kZXJlclxuICogdG8gYmUgdXBkYXRlZCBhbmQgcmVuZGVyZWQgb24gdGhlIGNhbnZhcy5cbiAqXG4gKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgaGF2ZSBhIGxvb2sgYXQgdGhlIHtAbGluayBXb25kZXJsYW5kRW5naW5lLnN3aXRjaFRvfSBtZXRob2QuXG4gKlxuICogIyMjIyBJbnN0YW50aWF0aW9uXG4gKlxuICogQmVzaWRlcyBhY3RpdmF0aW9uLCBhIHNjZW5lIGNhbiBpbnN0YW50aWF0ZSB0aGUgY29udGVudCBvZiBhbm90aGVyIHNjZW5lLlxuICpcbiAqIEZvciBtb3JlIGluZm9ybWF0aW9uLCBoYXZlIGEgbG9vayBhdCB0aGUge0BsaW5rIFNjZW5lI2luc3RhbnRpYXRlfSBtZXRob2QuXG4gKlxuICogQGNhdGVnb3J5IHNjZW5lXG4gKi9cbmV4cG9ydCBjbGFzcyBTY2VuZSBleHRlbmRzIFByZWZhYiB7XG4gICAgLyoqIENhbGxlZCBiZWZvcmUgcmVuZGVyaW5nIHRoZSBzY2VuZSAqL1xuICAgIHJlYWRvbmx5IG9uUHJlUmVuZGVyID0gbmV3IEVtaXR0ZXIoKTtcbiAgICAvKiogQ2FsbGVkIGFmdGVyIHRoZSBzY2VuZSBoYXMgYmVlbiByZW5kZXJlZCAqL1xuICAgIHJlYWRvbmx5IG9uUG9zdFJlbmRlciA9IG5ldyBFbWl0dGVyKCk7XG5cbiAgICAvKiogUmF5IGhpdCBwb2ludGVyIGluIFdBU00gaGVhcC4gQGhpZGRlbiAqL1xuICAgIHByaXZhdGUgX3JheUhpdDogbnVtYmVyO1xuICAgIC8qKiBSYXkgaGl0LiBAaGlkZGVuICovXG4gICAgcHJpdmF0ZSBfaGl0OiBSYXlIaXQ7XG5cbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIHByaXZhdGUgX2Vudmlyb25tZW50OiBFbnZpcm9ubWVudDtcblxuICAgIGNvbnN0cnVjdG9yKGVuZ2luZTogV29uZGVybGFuZEVuZ2luZSwgaW5kZXg6IG51bWJlcikge1xuICAgICAgICBzdXBlcihlbmdpbmUsIGluZGV4KTtcbiAgICAgICAgLyoqIGB0aGlzLmVuZ2luZT9gIGlzIHVzZWQgZm9yIHRlc3RpbmcuICovXG4gICAgICAgIHRoaXMuX3JheUhpdCA9IHRoaXMuZW5naW5lPy53YXNtLl9tYWxsb2MoNCAqICgzICogNCArIDMgKiA0ICsgNCArIDIpICsgNCk7XG4gICAgICAgIHRoaXMuX2hpdCA9IG5ldyBSYXlIaXQodGhpcywgdGhpcy5fcmF5SGl0KTtcbiAgICAgICAgdGhpcy5fZW52aXJvbm1lbnQgPSBuZXcgRW52aXJvbm1lbnQodGhpcyk7XG4gICAgfVxuXG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGluc3RhbnRpYXRlKHNjZW5lOiBQcmVmYWJHTFRGKTogSW5zdGFudGlhdGVHbHRmUmVzdWx0O1xuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBpbnN0YW50aWF0ZShzY2VuZTogUHJlZmFiKTogSW5zdGFudGlhdGVSZXN1bHQ7XG4gICAgLyoqXG4gICAgICogSW5zdGFudGlhdGUgYHNjZW5lYCBpbnRvIHRoaXMgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBBbnkgc2NlbmUgY2FuIGJlIGluc3RhbnRpYXRlZCBpbnRvIG9uZSBhbm90aGVyLiBJdCdzIHRodXMgcG9zc2libGVcbiAgICAgKiB0byBpbnN0YW50aWF0ZSBhIHtAbGluayBQcmVmYWJHTFRGfSBpbnRvIHRoaXMgaW5zdGFuY2UsIG9yIGFub3RoZXJcbiAgICAgKiB7QGxpbmsgU2NlbmV9IGluc3RhbmNlLlxuICAgICAqXG4gICAgICogIyMjIyBVc2FnZVxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBwcmVmYWJTY2VuZSA9IGF3YWl0IGVuZ2luZS5sb2FkU2NlbmUoJ1ByZWZhYi5iaW4nKTtcbiAgICAgKiAvLyBJbnN0YW50aWF0ZSBgcHJlZmFiU2NlbmVgIGludG8gYHNjZW5lYFxuICAgICAqIGVuZ2luZS5zY2VuZS5pbnN0YW50aWF0ZShwcmVmYWJTY2VuZSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAjIyMjIFNoYXJlZCBSZXNvdXJjZXNcbiAgICAgKlxuICAgICAqIEluc3RhbnRpYXRpbmcgKipkb2VzIG5vdCoqIGR1cGxpY2F0ZSByZXNvdXJjZXMuIEVhY2ggaW5zdGFuY2Ugd2lsbFxuICAgICAqIHJlZmVyZW5jZSB0aGUgc2FtZSBhc3NldHMgc3RvcmVkIGluIHRoZSB7QGxpbmsgU2NlbmV9LCBlLmcuLFxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAvLyBgem9tYmllYCBoYXMgb25lIG1lc2ggYW5kIG9uZSBtYXRlcmlhbFxuICAgICAqIGNvbnN0IHpvbWJpZSA9IGF3YWl0IGVuZ2luZS5sb2FkU2NlbmUoJ1pvbWJpZS5iaW4nKTtcbiAgICAgKlxuICAgICAqIGZvciAobGV0IGkgPSAwOyBpIDwgMTAwOyArK2kpIHtcbiAgICAgKiAgICAgZW5naW5lLnNjZW5lLmluc3RhbnRpYXRlKHpvbWJpZSk7XG4gICAgICogfVxuICAgICAqXG4gICAgICogY29uc29sZS5sb2coZW5naW5lLm1lc2hlcy5jb3VudCkgLy8gUHJpbnRzICcxJ1xuICAgICAqIGNvbnNvbGUubG9nKGVuZ2luZS5tYXRlcmlhbHMuY291bnQpIC8vIFByaW50cyAnMSdcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzY2VuZSBUaGUgc2NlbmUgdG8gaW5zdGFudGlhdGUuXG4gICAgICogQHJldHVybnMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGluc3RhbnRpYXRlZCByb290IHtAbGluayBPYmplY3QzRH0uXG4gICAgICogICAgIFdoZW4gYSBnbFRGIGlzIGluc3RhbnRpYXRlZCwgdGhlIHJlc3VsdCBjYW4gY29udGFpbiBleHRyYSBtZXRhZGF0YS5cbiAgICAgKiAgICAgRm9yIG1vcmUgaW5mb3JtYXRpb24sIGhhdmUgYSBsb29rIGF0IHRoZSB7QGxpbmsgSW5zdGFudGlhdGVSZXN1bHR9IHR5cGUuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4yLjBcbiAgICAgKi9cbiAgICBpbnN0YW50aWF0ZShwcmVmYWI6IFByZWZhYik6IEluc3RhbnRpYXRlUmVzdWx0O1xuICAgIGluc3RhbnRpYXRlKHByZWZhYjogUHJlZmFiKTogSW5zdGFudGlhdGVSZXN1bHQge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgaWQgPSB3YXNtLl93bF9zY2VuZV9pbnN0YW50aWF0ZShwcmVmYWIuX2luZGV4LCB0aGlzLl9pbmRleCk7XG5cbiAgICAgICAgY29uc3QgcmVzdWx0OiBJbnN0YW50aWF0ZVJlc3VsdCA9IHtyb290OiB0aGlzLndyYXAoaWQpfTtcbiAgICAgICAgaWYgKHByZWZhYiBpbnN0YW5jZW9mIFByZWZhYkdMVEYpIHtcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IHRoaXMud3JhcChpZCk7XG4gICAgICAgICAgICBwcmVmYWIuX3Byb2Nlc3NJbnN0YW50aWF0b24odGhpcywgb2JqLCByZXN1bHQgYXMgSW5zdGFudGlhdGVHbHRmUmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKiBAdG9kbzogQWRkIGBpbnN0YW50aWF0ZUJhdGNoYCB0byBpbnN0YW50aWF0ZSBtdWx0aXBsZSBjaHVua3MgaW4gYSByb3cuICovXG5cbiAgICAvKipcbiAgICAgKiBAdG9kbyBQcm92aWRlIGFuIEFQSSB0byBkZWxldGUgYWxsIHJlc291cmNlcyBsaW5rZWQgdG8gYSBzY2VuZS5cbiAgICAgKlxuICAgICAqIEV4YW1wbGU6XG4gICAgICpcbiAgICAgKiBgYGB0c1xuICAgICAqIGNvbnN0IHNjZW5lID0gYXdhaXQgZW5naW5lLmxvYWRTY2VuZSgnU2NlbmUuYmluJyk7XG4gICAgICogLi4uXG4gICAgICogc2NlbmUuZGVzdHJveSh7cmVtb3ZlUmVzb3VyY2VzOiB0cnVlfSk7XG4gICAgICogYGBgXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBEZXN0cm95IHRoaXMgc2NlbmUgYW5kIHJlbW92ZSBpdCBmcm9tIHRoZSBlbmdpbmUuXG4gICAgICpcbiAgICAgKiBAbm90ZSBEZXN0cm95aW5nIGEgc2NlbmUgKipkb2Vzbid0KiogcmVtb3ZlIHRoZSBtYXRlcmlhbHMsIG1lc2hlcyxcbiAgICAgKiBhbmQgdGV4dHVyZXMgaXQgcmVmZXJlbmNlcyBpbiB0aGUgZW5naW5lLiBUaG9zZSBzaG91bGQgYmUgY2xlYW5lZCB1cCBlaXRoZXIgYnkgbG9hZGluZ1xuICAgICAqIGFub3RoZXIgbWFpbiBzY2VuZSB2aWEge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUubG9hZE1haW5TY2VuZX0sIG9yIG1hbnVhbGx5IHVzaW5nIHtAbGluayBNZXNoLmRlc3Ryb3l9LlxuICAgICAqXG4gICAgICogQHRocm93cyBJZiB0aGUgc2NlbmUgaXMgY3VycmVudGx5IGFjdGl2ZS5cbiAgICAgKiAqL1xuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQWN0aXZlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgYEF0dGVtcHQgdG8gZGVzdHJveSAke3RoaXN9LCBidXQgZGVzdHJveWluZyB0aGUgYWN0aXZlIHNjZW5lIGlzIG5vdCBzdXBwb3J0ZWRgXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogU3RvcmUgYmVmb3JlIGNhbGxpbmcgYHN1cGVyLmRlc3Ryb3koKWAgc2luY2UgdGhlIGNhbGxcbiAgICAgICAgICogbWlnaHQgZGVzdHJveSBlbnRpcmVseSB0aGUgcHJvdG90eXBlLiAqL1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcmF5UHRyID0gdGhpcy5fcmF5SGl0O1xuXG4gICAgICAgIHN1cGVyLmRlc3Ryb3koKTtcblxuICAgICAgICB3YXNtLl9mcmVlKHJheVB0cik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3VycmVudGx5IGFjdGl2ZSB2aWV3IGNvbXBvbmVudHMuXG4gICAgICovXG4gICAgZ2V0IGFjdGl2ZVZpZXdzKCk6IFZpZXdDb21wb25lbnRbXSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBjb3VudCA9IHdhc20uX3dsX3NjZW5lX2dldF9hY3RpdmVfdmlld3ModGhpcy5faW5kZXgsIHdhc20uX3RlbXBNZW0sIDE2KTtcbiAgICAgICAgY29uc3Qgdmlld3M6IFZpZXdDb21wb25lbnRbXSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gd2FzbS5fdGVtcE1lbUludFtpXTtcbiAgICAgICAgICAgIHZpZXdzLnB1c2godGhpcy5fY29tcG9uZW50cy53cmFwVmlldyhpZCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZpZXdzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhc3QgYSByYXkgdGhyb3VnaCB0aGUgc2NlbmUgYW5kIGZpbmQgaW50ZXJzZWN0aW5nIGNvbGxpc2lvbiBjb21wb25lbnRzLlxuICAgICAqXG4gICAgICogVGhlIHJlc3VsdGluZyByYXkgaGl0IHdpbGwgY29udGFpbiAqKnVwIHRvIDQqKiBjbG9zZXN0IHJheSBoaXRzLFxuICAgICAqIHNvcnRlZCBieSBpbmNyZWFzaW5nIGRpc3RhbmNlLlxuICAgICAqXG4gICAgICogRXhhbXBsZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgaGl0ID0gZW5naW5lLnNjZW5lLnJheUNhc3QoXG4gICAgICogICAgIFswLCAwLCAwXSxcbiAgICAgKiAgICAgWzAsIDAsIDFdLFxuICAgICAqICAgICAxIDw8IDAgfCAxIDw8IDQsIC8vIE9ubHkgY2hlY2sgYWdhaW5zdCBjb21wb25lbnRzIGluIGdyb3VwcyAwIGFuZCA0XG4gICAgICogICAgIDI1XG4gICAgICogKTtcbiAgICAgKiBpZiAoaGl0LmhpdENvdW50ID4gMCkge1xuICAgICAqICAgICBjb25zdCBsb2NhdGlvbnMgPSBoaXQuZ2V0TG9jYXRpb25zKCk7XG4gICAgICogICAgIGNvbnNvbGUubG9nKGBPYmplY3QgaGl0IGF0OiAke2xvY2F0aW9uc1swXVswXX0sICR7bG9jYXRpb25zWzBdWzFdfSwgJHtsb2NhdGlvbnNbMF1bMl19YCk7XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIG8gUmF5IG9yaWdpbi5cbiAgICAgKiBAcGFyYW0gZCBSYXkgZGlyZWN0aW9uLlxuICAgICAqIEBwYXJhbSBncm91cE1hc2sgQml0bWFzayBvZiBjb2xsaXNpb24gZ3JvdXBzIHRvIGZpbHRlciBieTogb25seSBvYmplY3RzXG4gICAgICogICAgICAgIHRoYXQgYXJlIHBhcnQgb2YgZ2l2ZW4gZ3JvdXBzIGFyZSBjb25zaWRlcmVkIGZvciB0aGUgcmF5Y2FzdC5cbiAgICAgKiBAcGFyYW0gbWF4RGlzdGFuY2UgTWF4aW11bSAqKmluY2x1c2l2ZSoqIGhpdCBkaXN0YW5jZS4gRGVmYXVsdHMgdG8gYDEwMGAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUge0BsaW5rIFJheUhpdH0gaW5zdGFuY2UsIGNhY2hlZCBieSB0aGlzIGNsYXNzLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhlIHJldHVybmVkIHtAbGluayBSYXlIaXR9IG9iamVjdCBpcyBvd25lZCBieSB0aGUge0BsaW5rIFNjZW5lfVxuICAgICAqICAgICAgIGluc3RhbmNlIGFuZCB3aWxsIGJlIHJldXNlZCB3aXRoIHRoZSBuZXh0IHtAbGluayBTY2VuZSNyYXlDYXN0fSBjYWxsLlxuICAgICAqL1xuICAgIHJheUNhc3QoXG4gICAgICAgIG86IFJlYWRvbmx5PE51bWJlckFycmF5PixcbiAgICAgICAgZDogUmVhZG9ubHk8TnVtYmVyQXJyYXk+LFxuICAgICAgICBncm91cE1hc2s6IG51bWJlcixcbiAgICAgICAgbWF4RGlzdGFuY2UgPSAxMDAuMFxuICAgICk6IFJheUhpdCB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3NjZW5lX3JheV9jYXN0KFxuICAgICAgICAgICAgdGhpcy5faW5kZXgsXG4gICAgICAgICAgICBvWzBdLFxuICAgICAgICAgICAgb1sxXSxcbiAgICAgICAgICAgIG9bMl0sXG4gICAgICAgICAgICBkWzBdLFxuICAgICAgICAgICAgZFsxXSxcbiAgICAgICAgICAgIGRbMl0sXG4gICAgICAgICAgICBncm91cE1hc2ssXG4gICAgICAgICAgICB0aGlzLl9yYXlIaXQsXG4gICAgICAgICAgICBtYXhEaXN0YW5jZVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gdGhpcy5faGl0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgYmFja2dyb3VuZCBjbGVhciBjb2xvci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb2xvciBuZXcgY2xlYXIgY29sb3IgKFJHQkEpLlxuICAgICAqIEBzaW5jZSAwLjguNVxuICAgICAqL1xuICAgIHNldCBjbGVhckNvbG9yKGNvbG9yOiBudW1iZXJbXSkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9zY2VuZV9zZXRfY2xlYXJDb2xvcihjb2xvclswXSwgY29sb3JbMV0sIGNvbG9yWzJdLCBjb2xvclszXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHdoZXRoZXIgdG8gY2xlYXIgdGhlIGNvbG9yIGZyYW1lYnVmZmVyIGJlZm9yZSBkcmF3aW5nLlxuICAgICAqXG4gICAgICogVGhpcyBmdW5jdGlvbiBpcyB1c2VmdWwgaWYgYW4gZXh0ZXJuYWwgZnJhbWV3b3JrIChlLmcuIGFuIEFSIHRyYWNraW5nXG4gICAgICogZnJhbWV3b3JrKSBpcyByZXNwb25zaWJsZSBmb3IgZHJhd2luZyBhIGNhbWVyYSBmcmFtZSBiZWZvcmUgV29uZGVybGFuZFxuICAgICAqIEVuZ2luZSBkcmF3cyB0aGUgc2NlbmUgb24gdG9wIG9mIGl0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGIgV2hldGhlciB0byBlbmFibGUgY29sb3IgY2xlYXIuXG4gICAgICogQHNpbmNlIDAuOS40XG4gICAgICovXG4gICAgc2V0IGNvbG9yQ2xlYXJFbmFibGVkKGI6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfc2NlbmVfZW5hYmxlQ29sb3JDbGVhcihiKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2FkIGEgc2NlbmUgZmlsZSAoLmJpbikuXG4gICAgICpcbiAgICAgKiBXaWxsIHJlcGxhY2UgdGhlIGN1cnJlbnRseSBhY3RpdmUgc2NlbmUgd2l0aCB0aGUgb25lIGxvYWRlZFxuICAgICAqIGZyb20gZ2l2ZW4gZmlsZS4gSXQgaXMgYXNzdW1lZCB0aGF0IEphdmFTY3JpcHQgY29tcG9uZW50cyByZXF1aXJlZCBieVxuICAgICAqIHRoZSBuZXcgc2NlbmUgd2VyZSByZWdpc3RlcmVkIGluIGFkdmFuY2UuXG4gICAgICpcbiAgICAgKiBPbmNlIHRoZSBzY2VuZSBpcyBsb2FkZWQgc3VjY2Vzc2Z1bGx5IGFuZCBpbml0aWFsaXplZCxcbiAgICAgKiB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5vblNjZW5lTG9hZGVkfSBpcyBub3RpZmllZC5cbiAgICAgKlxuICAgICAqICMjIyMgQXJyYXlCdWZmZXJcbiAgICAgKlxuICAgICAqIFRoZSBgbG9hZCgpYCBtZXRob2QgYWNjZXB0cyBhbiBpbi1tZW1vcnkgYnVmZmVyOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBzY2VuZS5sb2FkKHtcbiAgICAgKiAgICAgYnVmZmVyOiBuZXcgQXJyYXlCdWZmZXIoLi4uKSxcbiAgICAgKiAgICAgYmFzZVVSTDogJ2h0dHBzOi8vbXktd2Vic2l0ZS9hc3NldHMnXG4gICAgICogfSlcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBub3RlIFRoZSBgYmFzZVVSTGAgaXMgbWFuZGF0b3J5LiBJdCdzIHVzZWQgdG8gZmV0Y2ggaW1hZ2VzIGFuZCBsYW5ndWFnZXMuXG4gICAgICpcbiAgICAgKiBVc2Uge0BsaW5rIFNjZW5lLnNldExvYWRpbmdQcm9ncmVzc30gdG8gdXBkYXRlIHRoZSBsb2FkaW5nIHByb2dyZXNzIGJhclxuICAgICAqIHdoZW4gdXNpbmcgYW4gQXJyYXlCdWZmZXIuXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIG5ldyB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5sb2FkTWFpblNjZW5lfSBBUEkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBQYXRoIHRvIHRoZSBmaWxlIHRvIGxvYWQsIG9yIGFuIG9wdGlvbiBvYmplY3QuXG4gICAgICogICAgIEZvciBtb3JlIGluZm9ybWF0aW9uIGFib3V0IHRoZSBvcHRpb25zLCBzZWUgdGhlIHtAbGluayBTY2VuZUxvYWRPcHRpb25zfSBkb2N1bWVudGF0aW9uLlxuICAgICAqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBzY2VuZSB3YXMgbG9hZGVkLlxuICAgICAqL1xuICAgIGFzeW5jIGxvYWQob3B0aW9uczogc3RyaW5nIHwgU2NlbmVMb2FkT3B0aW9ucyk6IFByb21pc2U8U2NlbmU+IHtcbiAgICAgICAgY29uc3QgZW5naW5lID0gdGhpcy5lbmdpbmU7XG5cbiAgICAgICAgLyoqIEB0b2RvKDIuMC4wKTogUmVtb3ZlIHRoaXMgbWV0aG9kLiAqL1xuICAgICAgICBsZXQgZGlzcGF0Y2hSZWFkeUV2ZW50ID0gZmFsc2U7XG4gICAgICAgIGxldCBvcHRzOiBJbk1lbW9yeUxvYWRPcHRpb25zO1xuICAgICAgICBpZiAoaXNTdHJpbmcob3B0aW9ucykpIHtcbiAgICAgICAgICAgIG9wdHMgPSBhd2FpdCBTY2VuZS5sb2FkQnVmZmVyKG9wdGlvbnMsIChieXRlczogbnVtYmVyLCBzaXplOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZ2luZS5sb2cuaW5mbyhMb2dUYWcuU2NlbmUsIGBTY2VuZSBkb3dubG9hZGluZzogJHtieXRlc30gLyAke3NpemV9YCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmdpbmUuc2V0TG9hZGluZ1Byb2dyZXNzKGJ5dGVzIC8gc2l6ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9wdHMgPSBvcHRpb25zO1xuICAgICAgICAgICAgZGlzcGF0Y2hSZWFkeUV2ZW50ID0gb3B0aW9ucy5kaXNwYXRjaFJlYWR5RXZlbnQgPz8gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzY2VuZSA9IGF3YWl0IGVuZ2luZS5sb2FkTWFpblNjZW5lRnJvbUJ1ZmZlcih7XG4gICAgICAgICAgICAuLi5vcHRzLFxuICAgICAgICAgICAgZGlzcGF0Y2hSZWFkeUV2ZW50LFxuICAgICAgICB9KTtcbiAgICAgICAgLyogRG8gbm90IHVzZSBgdGhpc2AsIHNpbmNlIGBsb2FkTWFpblNjZW5lYCB3aWxsIGRlc3Ryb3kgaXQuXG4gICAgICAgICAqIGBlcmFzZVByb3RvdHlwZU9uRGVzdHJveWAgd291bGQgbWFrZSB0aGlzIGluc3RhbmNlIHVudXNhYmxlLiAqL1xuICAgICAgICBlbmdpbmUub25TY2VuZUxvYWRlZC5ub3RpZnkoKTtcbiAgICAgICAgcmV0dXJuIHNjZW5lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFwcGVuZCBhIHNjZW5lIGZpbGUuXG4gICAgICpcbiAgICAgKiBMb2FkcyBhbmQgcGFyc2VzIHRoZSBmaWxlIGFuZCBpdHMgaW1hZ2VzIGFuZCBhcHBlbmRzIHRoZSByZXN1bHRcbiAgICAgKiB0byB0aGUgY3VycmVudGx5IGFjdGl2ZSBzY2VuZS5cbiAgICAgKlxuICAgICAqIFN1cHBvcnRlZCBmb3JtYXRzIGFyZSBzdHJlYW1hYmxlIFdvbmRlcmxhbmQgc2NlbmUgZmlsZXMgKC5iaW4pIGFuZCBnbFRGXG4gICAgICogM0Qgc2NlbmVzICguZ2x0ZiwgLmdsYikuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIFdMLnNjZW5lLmFwcGVuZChmaWxlbmFtZSkudGhlbihyb290ID0+IHtcbiAgICAgKiAgICAgLy8gcm9vdCBjb250YWlucyB0aGUgbG9hZGVkIHNjZW5lXG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBJbiBjYXNlIHRoZSBgbG9hZEdsdGZFeHRlbnNpb25zYCBvcHRpb24gaXMgc2V0IHRvIHRydWUsIHRoZSByZXNwb25zZVxuICAgICAqIHdpbGwgYmUgYW4gb2JqZWN0IGNvbnRhaW5pbmcgYm90aCB0aGUgcm9vdCBvZiB0aGUgbG9hZGVkIHNjZW5lIGFuZFxuICAgICAqIGFueSBnbFRGIGV4dGVuc2lvbnMgZm91bmQgb24gbm9kZXMsIG1lc2hlcyBhbmQgdGhlIHJvb3Qgb2YgdGhlIGZpbGUuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIFdMLnNjZW5lLmFwcGVuZChmaWxlbmFtZSwgeyBsb2FkR2x0ZkV4dGVuc2lvbnM6IHRydWUgfSkudGhlbigoe3Jvb3QsIGV4dGVuc2lvbnN9KSA9PiB7XG4gICAgICogICAgIC8vIHJvb3QgY29udGFpbnMgdGhlIGxvYWRlZCBzY2VuZVxuICAgICAqICAgICAvLyBleHRlbnNpb25zLnJvb3QgY29udGFpbnMgYW55IGV4dGVuc2lvbnMgYXQgdGhlIHJvb3Qgb2YgZ2xURiBkb2N1bWVudFxuICAgICAqICAgICBjb25zdCByb290RXh0ZW5zaW9ucyA9IGV4dGVuc2lvbnMucm9vdDtcbiAgICAgKiAgICAgLy8gZXh0ZW5zaW9ucy5tZXNoIGFuZCBleHRlbnNpb25zLm5vZGUgY29udGFpbiBleHRlbnNpb25zIGluZGV4ZWQgYnkgT2JqZWN0IGlkXG4gICAgICogICAgIGNvbnN0IGNoaWxkT2JqZWN0ID0gcm9vdC5jaGlsZHJlblswXTtcbiAgICAgKiAgICAgY29uc3QgbWVzaEV4dGVuc2lvbnMgPSByb290Lm1lc2hFeHRlbnNpb25zW2NoaWxkT2JqZWN0Lm9iamVjdElkXTtcbiAgICAgKiAgICAgY29uc3Qgbm9kZUV4dGVuc2lvbnMgPSByb290Lm5vZGVFeHRlbnNpb25zW2NoaWxkT2JqZWN0Lm9iamVjdElkXTtcbiAgICAgKiAgICAgLy8gZXh0ZW5zaW9ucy5pZE1hcHBpbmcgY29udGFpbnMgYSBtYXBwaW5nIGZyb20gZ2xURiBub2RlIGluZGV4IHRvIE9iamVjdCBpZFxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogSWYgdGhlIGZpbGUgdG8gYmUgbG9hZGVkIGlzIGxvY2F0ZWQgaW4gYSBzdWJmb2xkZXIsIGl0IG1pZ2h0IGJlIHVzZWZ1bFxuICAgICAqIHRvIGRlZmluZSB0aGUgYGJhc2VVUkxgIG9wdGlvbi4gVGhpcyB3aWxsIGVuc3VyZSBhbnkgYmluIGZpbGVzXG4gICAgICogcmVmZXJlbmNlZCBieSB0aGUgbG9hZGVkIGJpbiBmaWxlIGFyZSBsb2FkZWQgYXQgdGhlIGNvcnJlY3QgcGF0aC5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogV0wuc2NlbmUuYXBwZW5kKGZpbGVuYW1lLCB7IGJhc2VVUkw6ICdzY2VuZXMnIH0pLnRoZW4oKHtyb290LCBleHRlbnNpb25zfSkgPT4ge1xuICAgICAqICAgICAvLyBkbyBzdHVmZlxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHRoZSBuZXcge0BsaW5rIFByZWZhYn0gYW5kIHtAbGluayBTY2VuZX0gQVBJLlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpbGUgVGhlIC5iaW4sIC5nbHRmIG9yIC5nbGIgZmlsZSB0byBhcHBlbmQuIFNob3VsZCBiZSBhIFVSTCBvclxuICAgICAqICAgYW4gYEFycmF5QnVmZmVyYCB3aXRoIHRoZSBmaWxlIGNvbnRlbnQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgQWRkaXRpb25hbCBvcHRpb25zIGZvciBsb2FkaW5nLlxuICAgICAqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBzY2VuZSB3YXMgYXBwZW5kZWQuXG4gICAgICovXG4gICAgYXN5bmMgYXBwZW5kKFxuICAgICAgICBmaWxlOiBzdHJpbmcgfCBBcnJheUJ1ZmZlcixcbiAgICAgICAgb3B0aW9uczogUGFydGlhbDxTY2VuZUFwcGVuZFBhcmFtZXRlcnM+ID0ge31cbiAgICApOiBQcm9taXNlPFNjZW5lQXBwZW5kUmVzdWx0PiB7XG4gICAgICAgIC8qKiBAdG9kbygyLjAuMCk6IFJlbW92ZSB0aGlzIG1ldGhvZC4gKi9cblxuICAgICAgICBjb25zdCB7YmFzZVVSTCA9IGlzU3RyaW5nKGZpbGUpID8gZ2V0QmFzZVVybChmaWxlKSA6IHRoaXMuYmFzZVVSTH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IGlzU3RyaW5nKGZpbGUpID8gYXdhaXQgZmV0Y2hXaXRoUHJvZ3Jlc3MoZmlsZSkgOiBmaWxlO1xuICAgICAgICBjb25zdCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcbiAgICAgICAgY29uc3QgaXNCaW5GaWxlID1cbiAgICAgICAgICAgIGRhdGEuYnl0ZUxlbmd0aCA+IE1BR0lDX0JJTi5sZW5ndGggJiZcbiAgICAgICAgICAgIGRhdGFcbiAgICAgICAgICAgICAgICAuc3ViYXJyYXkoMCwgTUFHSUNfQklOLmxlbmd0aClcbiAgICAgICAgICAgICAgICAuZXZlcnkoKHZhbHVlLCBpKSA9PiB2YWx1ZSA9PT0gTUFHSUNfQklOLmNoYXJDb2RlQXQoaSkpO1xuXG4gICAgICAgIGNvbnN0IHNjZW5lID0gaXNCaW5GaWxlXG4gICAgICAgICAgICA/IHRoaXMuZW5naW5lLmxvYWRQcmVmYWJGcm9tQnVmZmVyKHtidWZmZXIsIGJhc2VVUkx9KVxuICAgICAgICAgICAgOiB0aGlzLmVuZ2luZS5sb2FkR0xURkZyb21CdWZmZXIoe1xuICAgICAgICAgICAgICAgICAgYnVmZmVyLFxuICAgICAgICAgICAgICAgICAgYmFzZVVSTCxcbiAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbnM6IG9wdGlvbnMubG9hZEdsdGZFeHRlbnNpb25zLFxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmluc3RhbnRpYXRlKHNjZW5lKSE7XG4gICAgICAgIGlmIChzY2VuZSBpbnN0YW5jZW9mIFByZWZhYkdMVEYpIHtcbiAgICAgICAgICAgIGlmICghc2NlbmUuZXh0ZW5zaW9ucykgcmV0dXJuIHJlc3VsdC5yb290O1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByb290OiByZXN1bHQucm9vdCxcbiAgICAgICAgICAgICAgICBleHRlbnNpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLihyZXN1bHQgYXMgSW5zdGFudGlhdGVHbHRmUmVzdWx0KS5leHRlbnNpb25zLFxuICAgICAgICAgICAgICAgICAgICByb290OiBzY2VuZS5leHRlbnNpb25zLnJvb3QsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0gYXMgU2NlbmVBcHBlbmRSZXN1bHRXaXRoRXh0ZW5zaW9ucztcbiAgICAgICAgfVxuXG4gICAgICAgIHNjZW5lLmRlc3Ryb3koKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5yb290O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgbG9hZGluZyBzY3JlZW4gcHJvZ3Jlc3MgYmFyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlIEN1cnJlbnQgbG9hZGluZyBwZXJjZW50YWdlLCBpbiB0aGUgcmFuZ2UgWzA7IDFdLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayBXb25kZXJsYW5kRW5naW5lLnNldExvYWRpbmdQcm9ncmVzc30uXG4gICAgICovXG4gICAgc2V0TG9hZGluZ1Byb2dyZXNzKHBlcmNlbnRhZ2U6IG51bWJlcikge1xuICAgICAgICB0aGlzLmVuZ2luZS5zZXRMb2FkaW5nUHJvZ3Jlc3MocGVyY2VudGFnZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzcGF0Y2ggYW4gZXZlbnQgJ3dsZS1zY2VuZS1yZWFkeScgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBpcyB1c2VkIGZvciBhdXRvbWF0aWMgdGVzdGluZy5cbiAgICAgKi9cbiAgICBkaXNwYXRjaFJlYWR5RXZlbnQoKSB7XG4gICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoXG4gICAgICAgICAgICBuZXcgQ3VzdG9tRXZlbnQoJ3dsZS1zY2VuZS1yZWFkeScsIHtcbiAgICAgICAgICAgICAgICBkZXRhaWw6IHtmaWxlbmFtZTogdGhpcy5maWxlbmFtZX0sXG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY3VycmVudCBtYXRlcmlhbCB0byByZW5kZXIgdGhlIHNreS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoZSBza3kgbmVlZHMgdG8gYmUgZW5hYmxlZCBpbiB0aGUgZWRpdG9yIHdoZW4gY3JlYXRpbmcgdGhlIHNjZW5lLlxuICAgICAqIEZvciBtb3JlIGluZm9ybWF0aW9uLCBwbGVhc2UgcmVmZXIgdG8gdGhlIGJhY2tncm91bmQgW3R1dG9yaWFsXShodHRwczovL3dvbmRlcmxhbmRlbmdpbmUuY29tL3R1dG9yaWFscy9iYWNrZ3JvdW5kLWVmZmVjdC8pLlxuICAgICAqL1xuICAgIHNldCBza3lNYXRlcmlhbChtYXRlcmlhbDogTWF0ZXJpYWwgfCBudWxsKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3NjZW5lX3NldF9za3lfbWF0ZXJpYWwodGhpcy5faW5kZXgsIG1hdGVyaWFsPy5faWQgPz8gMCk7XG4gICAgfVxuXG4gICAgLyoqIEN1cnJlbnQgc2t5IG1hdGVyaWFsLCBvciBgbnVsbGAgaWYgbm8gc2t5IGlzIHNldC4gKi9cbiAgICBnZXQgc2t5TWF0ZXJpYWwoKTogTWF0ZXJpYWwgfCBudWxsIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmVuZ2luZS53YXNtLl93bF9zY2VuZV9nZXRfc2t5X21hdGVyaWFsKHRoaXMuX2luZGV4KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLm1hdGVyaWFscy53cmFwKGluZGV4KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbnZpcm9ubWVudCBsaWdodGluZyBwcm9wZXJ0aWVzLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMi4zXG4gICAgICovXG4gICAgZ2V0IGVudmlyb25tZW50KCk6IEVudmlyb25tZW50IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Vudmlyb25tZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlc2V0IHRoZSBzY2VuZS5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGRlbGV0ZXMgYWxsIHVzZWQgYW5kIGFsbG9jYXRlZCBvYmplY3RzLCBhbmQgY29tcG9uZW50cy5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIExvYWQgYSBuZXcgc2NlbmUgYW5kIGFjdGl2YXRlIGl0IGluc3RlYWQuXG4gICAgICovXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIC8qKiBAdG9kbygyLjAuMCk6IFJlbW92ZSB0aGlzIG1ldGhvZC4gKi9cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEb3dubG9hZCBhbmQgYXBwbHkgcXVldWVkIGRlcGVuZGVuY3kgZmlsZXMgKC5iaW4pLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGFzeW5jIF9kb3dubG9hZERlcGVuZGVuY3kodXJsOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKHRoaXMuZW5naW5lLl9jYW5Vc2VDaHVua0xvYWRpbmcoKSkge1xuICAgICAgICAgICAgY29uc3Qgc2luayA9IG5ldyBDaHVua2VkU2NlbmVMb2FkU2luayhcbiAgICAgICAgICAgICAgICB0aGlzLmVuZ2luZSxcbiAgICAgICAgICAgICAgICBTY2VuZVR5cGUuRGVwZW5kZW5jeSxcbiAgICAgICAgICAgICAgICB1cmwsXG4gICAgICAgICAgICAgICAgdGhpcy5faW5kZXhcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCBmZXRjaFN0cmVhbVdpdGhQcm9ncmVzcyh1cmwpO1xuICAgICAgICAgICAgYXdhaXQgc3RyZWFtLnBpcGVUbyhuZXcgV3JpdGFibGVTdHJlYW0oc2luaykpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgICAgICBjb25zdCBidWZmZXIgPSBhd2FpdCBmZXRjaFdpdGhQcm9ncmVzcyh1cmwpO1xuICAgICAgICAgICAgY29uc3QgcHRyID0gd2FzbS5jb3B5QnVmZmVyVG9IZWFwKGJ1ZmZlcik7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHdhc20uX3dsX3NjZW5lX2xvYWRfcXVldWVkX2Jpbih0aGlzLl9pbmRleCwgcHRyLCBidWZmZXIuYnl0ZUxlbmd0aCk7XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIC8qIENhdGNoIGNhbGxzIHRvIGFib3J0KCksIGUuZy4gdmlhIGFzc2VydHMgKi9cbiAgICAgICAgICAgICAgICB3YXNtLl9mcmVlKHB0cik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEb3dubG9hZCBhbmQgYXBwbHkgcXVldWVkIGRlcGVuZGVuY3kgZmlsZXMgKC5iaW4pLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGFzeW5jIF9kb3dubG9hZERlcGVuZGVuY2llcygpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG5cbiAgICAgICAgY29uc3QgY291bnQgPSB3YXNtLl93bF9zY2VuZV9xdWV1ZWRfYmluX2NvdW50KHRoaXMuX2luZGV4KTtcbiAgICAgICAgaWYgKCFjb3VudCkgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuXG4gICAgICAgIGNvbnN0IHVybHMgPSBuZXcgQXJyYXkoY291bnQpLmZpbGwoMCkubWFwKChfLCBpOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX3NjZW5lX3F1ZXVlZF9iaW5fcGF0aCh0aGlzLl9pbmRleCwgaSk7XG4gICAgICAgICAgICBjb25zdCB1cmwgPSB3YXNtLlVURjhUb1N0cmluZyhwdHIpO1xuICAgICAgICAgICAgcmV0dXJuIHVybDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgd2FzbS5fd2xfc2NlbmVfY2xlYXJfcXVldWVkX2Jpbl9saXN0KHRoaXMuX2luZGV4KTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwodXJscy5tYXAoKHVybDogc3RyaW5nKSA9PiB0aGlzLl9kb3dubG9hZERlcGVuZGVuY3kodXJsKSkpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQge1xuICAgIENvbXBvbmVudCxcbiAgICBDb21wb25lbnRDb25zdHJ1Y3RvcixcbiAgICBQaHlzWENvbXBvbmVudCxcbiAgICBPYmplY3QgYXMgT2JqZWN0M0QsXG4gICAgUGh5c2ljcyxcbiAgICBJMThOLFxuICAgIFhSLFxuICAgIE1vcnBoVGFyZ2V0cyxcbiAgICBUZXh0dXJlLFxuICAgIEZvbnQsXG4gICAgRGVzdHJveWVkUHJlZmFiSW5zdGFuY2UsXG59IGZyb20gJy4vd29uZGVybGFuZC5qcyc7XG5cbmltcG9ydCB7RW1pdHRlciwgUmV0YWluRW1pdHRlcn0gZnJvbSAnLi91dGlscy9ldmVudC5qcyc7XG5pbXBvcnQge2lzU3RyaW5nfSBmcm9tICcuL3V0aWxzL29iamVjdC5qcyc7XG5pbXBvcnQge1ZlcnNpb259IGZyb20gJy4vdmVyc2lvbi5qcyc7XG5pbXBvcnQge1dBU019IGZyb20gJy4vd2FzbS5qcyc7XG5pbXBvcnQge0xvZ2dlcn0gZnJvbSAnLi91dGlscy9sb2dnZXIuanMnO1xuaW1wb3J0IHtjbGFtcH0gZnJvbSAnLi91dGlscy9taXNjLmpzJztcbmltcG9ydCB7TWF0ZXJpYWxNYW5hZ2VyfSBmcm9tICcuL3Jlc291cmNlcy9tYXRlcmlhbC1tYW5hZ2VyLmpzJztcbmltcG9ydCB7TWVzaE1hbmFnZXJ9IGZyb20gJy4vcmVzb3VyY2VzL21lc2gtbWFuYWdlci5qcyc7XG5pbXBvcnQge1Jlc291cmNlTWFuYWdlcn0gZnJvbSAnLi9yZXNvdXJjZXMvcmVzb3VyY2UuanMnO1xuaW1wb3J0IHtUZXh0dXJlTWFuYWdlcn0gZnJvbSAnLi9yZXNvdXJjZXMvdGV4dHVyZS1tYW5hZ2VyLmpzJztcbmltcG9ydCB7TG9nVGFnfSBmcm9tICcuL2luZGV4LmpzJztcbmltcG9ydCB7Q29uc3RydWN0b3IsIEltYWdlTGlrZSwgUHJvZ3Jlc3NDYWxsYmFja30gZnJvbSAnLi90eXBlcy5qcyc7XG5pbXBvcnQge1ByZWZhYiwgSW5NZW1vcnlMb2FkT3B0aW9ucywgTG9hZE9wdGlvbnMsIFN0cmVhbUxvYWRPcHRpb25zfSBmcm9tICcuL3ByZWZhYi5qcyc7XG5pbXBvcnQge1NjZW5lLCBBY3RpdmF0ZU9wdGlvbnMsIENodW5rZWRTY2VuZUxvYWRTaW5rLCBTY2VuZVR5cGV9IGZyb20gJy4vc2NlbmUuanMnO1xuaW1wb3J0IHtQcmVmYWJHTFRGLCBHTFRGT3B0aW9uc30gZnJvbSAnLi9zY2VuZS1nbHRmLmpzJztcbmltcG9ydCB7QXJyYXlCdWZmZXJTaW5rLCBBcnJheUJ1ZmZlclNvdXJjZSwgb25JbWFnZVJlYWR5fSBmcm9tICcuL3V0aWxzL2ZldGNoLmpzJztcblxuZnVuY3Rpb24gY2hlY2tYUlN1cHBvcnQoKSB7XG4gICAgaWYgKCFuYXZpZ2F0b3IueHIpIHtcbiAgICAgICAgY29uc3QgaXNMb2NhbGhvc3QgPVxuICAgICAgICAgICAgbG9jYXRpb24uaG9zdG5hbWUgPT09ICdsb2NhbGhvc3QnIHx8IGxvY2F0aW9uLmhvc3RuYW1lID09PSAnMTI3LjAuMC4xJztcbiAgICAgICAgY29uc3QgbWlzc2luZ0hUVFBTID0gbG9jYXRpb24ucHJvdG9jb2wgIT09ICdodHRwczonICYmICFpc0xvY2FsaG9zdDtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFxuICAgICAgICAgICAgbWlzc2luZ0hUVFBTXG4gICAgICAgICAgICAgICAgPyAnV2ViWFIgaXMgb25seSBzdXBwb3J0ZWQgd2l0aCBIVFRQUyBvciBvbiBsb2NhbGhvc3QhJ1xuICAgICAgICAgICAgICAgIDogJ1dlYlhSIHVuc3VwcG9ydGVkIGluIHRoaXMgYnJvd3Nlci4nXG4gICAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbn1cblxuLyoqXG4gKiBNYWluIFdvbmRlcmxhbmQgRW5naW5lIGluc3RhbmNlLlxuICpcbiAqIENvbnRyb2xzIHRoZSBjYW52YXMsIHJlbmRlcmluZywgYW5kIEpTIDwtPiBXQVNNIGNvbW11bmljYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBXb25kZXJsYW5kRW5naW5lIHtcbiAgICAvKipcbiAgICAgKiB7QGxpbmsgRW1pdHRlcn0gZm9yIFdlYlhSIHNlc3Npb24gZW5kIGV2ZW50cy5cbiAgICAgKlxuICAgICAqIFVzYWdlIGZyb20gd2l0aGluIGEgY29tcG9uZW50OlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvbkVuZC5hZGQoKCkgPT4gY29uc29sZS5sb2coXCJYUiBzZXNzaW9uIGVuZGVkLlwiKSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgcmVhZG9ubHkgb25YUlNlc3Npb25FbmQgPSBuZXcgRW1pdHRlcigpO1xuXG4gICAgLyoqXG4gICAgICoge0BsaW5rIFJldGFpbkVtaXR0ZXJ9IGZvciBXZWJYUiBzZXNzaW9uIHN0YXJ0IGV2ZW50cy5cbiAgICAgKlxuICAgICAqIFVzYWdlIGZyb20gd2l0aGluIGEgY29tcG9uZW50OlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvblN0YXJ0LmFkZCgoc2Vzc2lvbiwgbW9kZSkgPT4gY29uc29sZS5sb2coc2Vzc2lvbiwgbW9kZSkpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCwgdGhpcyBlbWl0dGVyIGlzIHJldGFpbmVkIGFuZCB3aWxsIGF1dG9tYXRpY2FsbHkgY2FsbCBhbnkgY2FsbGJhY2sgYWRkZWRcbiAgICAgKiB3aGlsZSBhIHNlc3Npb24gaXMgYWxyZWFkeSBzdGFydGVkOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAvLyBYUiBzZXNzaW9uIGlzIGFscmVhZHkgYWN0aXZlLlxuICAgICAqIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQuYWRkKChzZXNzaW9uLCBtb2RlKSA9PiB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKHNlc3Npb24sIG1vZGUpOyAvLyBUcmlnZ2VyZWQgaW1tZWRpYXRlbHkuXG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgcmVhZG9ubHkgb25YUlNlc3Npb25TdGFydDogRW1pdHRlcjxbWFJTZXNzaW9uLCBYUlNlc3Npb25Nb2RlXT4gPSBuZXcgUmV0YWluRW1pdHRlcjxcbiAgICAgICAgW1hSU2Vzc2lvbiwgWFJTZXNzaW9uTW9kZV1cbiAgICA+KCk7XG5cbiAgICAvKipcbiAgICAgKiB7QGxpbmsgRW1pdHRlcn0gZm9yIGNhbnZhcyAvIG1haW4gZnJhbWVidWZmZXIgcmVzaXplIGV2ZW50cy5cbiAgICAgKlxuICAgICAqIFVzYWdlIGZyb20gd2l0aGluIGEgY29tcG9uZW50OlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiB0aGlzLmVuZ2luZS5vblJlc2l6ZS5hZGQoKCkgPT4ge1xuICAgICAqICAgICBjb25zdCBjYW52YXMgPSB0aGlzLmVuZ2luZS5jYW52YXM7XG4gICAgICogICAgIGNvbnNvbGUubG9nKGBOZXcgU2l6ZTogJHtjYW52YXMud2lkdGh9LCAke2NhbnZhcy5oZWlnaHR9YCk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGUgc2l6ZSBvZiB0aGUgY2FudmFzIGlzIGluIHBoeXNpY2FsIHBpeGVscywgYW5kIGlzIHNldCB2aWEge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUucmVzaXplfS5cbiAgICAgKi9cbiAgICByZWFkb25seSBvblJlc2l6ZTogRW1pdHRlciA9IG5ldyBFbWl0dGVyKCk7XG5cbiAgICAvKiogV2hldGhlciBBUiBpcyBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIuICovXG4gICAgcmVhZG9ubHkgYXJTdXBwb3J0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIC8qKiBXaGV0aGVyIFZSIGlzIHN1cHBvcnRlZCBieSB0aGUgYnJvd3Nlci4gKi9cbiAgICByZWFkb25seSB2clN1cHBvcnRlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICoge0BsaW5rIFJldGFpbkVtaXR0ZXJ9IHNpZ25hbGxpbmcgdGhlIGVuZCBvZiB0aGUgbG9hZGluZyBzY3JlZW4uXG4gICAgICpcbiAgICAgKiBMaXN0ZW5lcnMgZ2V0IG5vdGlmaWVkIHdoZW4gdGhlIGZpcnN0IGNhbGwgdG8ge0BsaW5rIFNjZW5lI2xvYWQoKX0gaXNcbiAgICAgKiBpbnZva2VkLiBBdCB0aGlzIHBvaW50IHRoZSBuZXcgc2NlbmUgaGFzIG5vdCBiZWNvbWUgYWN0aXZlLCBhbmQgbm9uZSBvZlxuICAgICAqIGl0cyByZXNvdXJjZXMgb3IgY29tcG9uZW50cyBhcmUgaW5pdGlhbGl6ZWQuXG4gICAgICpcbiAgICAgKiBDb21wYXJlZCB0byB7QGxpbmsgb25TY2VuZUxvYWRlZH0sIHRoaXMgZG9lcyBub3Qgd2FpdCBmb3IgYWxsIGNvbXBvbmVudHNcbiAgICAgKiB0byBiZSBmdWxseSBpbml0aWFsaXplZCBhbmQgYWN0aXZhdGVkLiBBbnkgaGFuZGxlciBhZGRlZCBpbnNpZGVcbiAgICAgKiB7QGxpbmsgQ29tcG9uZW50I2luaXQoKX0sIHtAbGluayBDb21wb25lbnQjc3RhcnQoKX0gb3JcbiAgICAgKiB7QGxpbmsgQ29tcG9uZW50I29uQWN0aXZhdGUoKX0gd2lsbCBiZSBjYWxsZWQgaW1tZWRpYXRlbHkuXG4gICAgICpcbiAgICAgKiBVc2FnZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogdGhpcy5lbmdpbmUub25Mb2FkaW5nU2NyZWVuRW5kLmFkZCgoKSA9PiBjb25zb2xlLmxvZyhcIldhaXQgaXMgb3ZlciFcIikpO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHJlYWRvbmx5IG9uTG9hZGluZ1NjcmVlbkVuZCA9IG5ldyBSZXRhaW5FbWl0dGVyKCk7XG5cbiAgICAvKipcbiAgICAgKiB7QGxpbmsgRW1pdHRlcn0gZm9yIHNjZW5lIGxvYWRlZCBldmVudHMuXG4gICAgICpcbiAgICAgKiBMaXN0ZW5lcnMgZ2V0IG5vdGlmaWVkIHdoZW4gYSBjYWxsIHRvIHtAbGluayBTY2VuZSNsb2FkKCl9IGZpbmlzaGVzLiBBdFxuICAgICAqIHRoaXMgcG9pbnQgYWxsIHJlc291cmNlcyBhcmUgbG9hZGVkIGFuZCBhbGwgY29tcG9uZW50cyBoYWQgdGhlaXJcbiAgICAgKiB7QGxpbmsgQ29tcG9uZW50I2luaXQoKX0gYXMgd2VsbCBhcyAoaWYgYWN0aXZlKVxuICAgICAqIHtAbGluayBDb21wb25lbnQjc3RhcnQoKX0gYW5kIHtAbGluayBDb21wb25lbnQjb25BY3RpdmF0ZSgpfSBtZXRob2RzXG4gICAgICogY2FsbGVkLlxuICAgICAqXG4gICAgICogVXNhZ2UgZnJvbSB3aXRoaW4gYSBjb21wb25lbnQ6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIHRoaXMuZW5naW5lLm9uU2NlbmVMb2FkZWQuYWRkKCgpID0+IGNvbnNvbGUubG9nKFwiU2NlbmUgc3dpdGNoZWQhXCIpKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgb25TY2VuZUFjdGl2YXRlZH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICByZWFkb25seSBvblNjZW5lTG9hZGVkID0gbmV3IEVtaXR0ZXIoKTtcblxuICAgIC8qKlxuICAgICAqIHtAbGluayBFbWl0dGVyfSBmb3Igc2NlbmUgYWN0aXZhdGVkIGV2ZW50cy5cbiAgICAgKlxuICAgICAqIFRoaXMgbGlzdGVuZXIgaXMgbm90aWZpZWQgd2l0aCB0aGUgb2xkIHNjZW5lIGFzIGZpcnN0IHBhcmFtZXRlciwgYW5kXG4gICAgICogdGhlIG5ldyBzY2VuZSBhcyBzZWNvbmQuXG4gICAgICpcbiAgICAgKiBUaGlzIGxpc3RlbmVyIGlzIG5vdGlmaWVkIGFmdGVyIGFsbCByZXNvdXJjZXMgYXJlIGxvYWRlZCBhbmQgYWxsIGNvbXBvbmVudHMgaGFkIHRoZWlyXG4gICAgICoge0BsaW5rIENvbXBvbmVudCNpbml0KCl9IGFzIHdlbGwgYXMgKGlmIGFjdGl2ZSlcbiAgICAgKiB7QGxpbmsgQ29tcG9uZW50I3N0YXJ0KCl9IGFuZCB7QGxpbmsgQ29tcG9uZW50I29uQWN0aXZhdGUoKX0gbWV0aG9kc1xuICAgICAqIGNhbGxlZC5cbiAgICAgKlxuICAgICAqIFVzYWdlIGZyb20gd2l0aGluIGEgY29tcG9uZW50OlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiB0aGlzLmVuZ2luZS5vblNjZW5lQWN0aXZhdGVkLmFkZCgob2xkU2NlbmUsIG5ld1NjZW5lKSA9PiB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKGBTY2VuZSBzd2l0Y2ggZnJvbSAke29sZFNjZW5lLmZpbGVuYW1lfSB0byAke25ld1NjZW5lLmZpbGVuYW1lfWApO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHJlYWRvbmx5IG9uU2NlbmVBY3RpdmF0ZWQgPSBuZXcgRW1pdHRlcjxbU2NlbmUsIFNjZW5lXT4oKTtcblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIGEgaG90IHJlbG9hZCBpcyByZXF1ZXN0ZWQuXG4gICAgICpcbiAgICAgKiBXaGVuIHVzaW5nIHRoZSBXb25kZXJsYW5kIEVkaXRvciwgdGhpcyB3aWxsIGJlIHRyaWdnZXJlZCB3aGVuIHBhY2thZ2luZ1xuICAgICAqIHRoZSBwcm9qZWN0LlxuICAgICAqXG4gICAgICogVGhlIGhvdCByZWxvYWQgZW1pdHRlciBjYW4gYmUgdXNlZCB0byBkb3dubG9hZCB0aGUgc2NlbmUgY29tcG9uZW50cyBtb2R1bGUsXG4gICAgICogYW5kIHJlLWxvYWQgdGhlIGN1cnJlbnQgc2NlbmU6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIHRoaXMuZW5naW5lLm9uSG90UmVsb2FkUmVxdWVzdC5hZGQoYXN5bmMgKGZpbGVuYW1lOiBzdHJpbmcpID0+IHtcbiAgICAgKiAgICAgY29uc3QgcmVnaXN0ZXIgPSAoYXdhaXQgaW1wb3J0KHpNeVByb2plY3QtYnVuZGxlLmpzJykpLmRlZmF1bHQ7XG4gICAgICogICAgIHJlZ2lzdGVyKHRoaXMuZW5naW5lKTtcbiAgICAgKiAgICAgdGhpcy5lbmdpbmUubG9hZE1haW5TY2VuZSgnTXlQcm9qZWN0LmJpbicpO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHJlYWRvbmx5IG9uSG90UmVsb2FkUmVxdWVzdDogRW1pdHRlcjxbc3RyaW5nXT4gPSBuZXcgRW1pdHRlcigpO1xuXG4gICAgLyoqXG4gICAgICogQWNjZXNzIHRvIGludGVybmF0aW9uYWxpemF0aW9uLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGkxOG46IEkxOE4gPSBuZXcgSTE4Tih0aGlzKTtcblxuICAgIC8qKlxuICAgICAqIFdlYlhSIHJlbGF0ZWQgc3RhdGUsIGBudWxsYCBpZiBubyBYUiBzZXNzaW9uIGlzIGFjdGl2ZS5cbiAgICAgKi9cbiAgICByZWFkb25seSB4cjogWFIgfCBudWxsID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIElmIGB0cnVlYCwge0BsaW5rIFRleHR1cmV9LCB7QGxpbmsgT2JqZWN0M0R9LCBhbmQge0BsaW5rIENvbXBvbmVudH1cbiAgICAgKiBpbnN0YW5jZXMgaGF2ZSB0aGVpciBwcm90b3R5cGUgZXJhc2VkIHVwb24gZGVzdHJ1Y3Rpb24uXG4gICAgICpcbiAgICAgKiAjIyMjIE9iamVjdFxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBlbmdpbmUuZXJhc2VQcm90b3R5cGVPbkRlc3Ryb3kgPSB0cnVlO1xuICAgICAqXG4gICAgICogY29uc3Qgb2JqID0gZW5naW5lLnNjZW5lLmFkZE9iamVjdCgpO1xuICAgICAqIG9iai5uYW1lID0gJ2lhbWFsaXZlJztcbiAgICAgKiBjb25zb2xlLmxvZyhvYmoubmFtZSk7IC8vIFByaW50cyAnaWFtYWxpdmUnXG4gICAgICpcbiAgICAgKiBvYmouZGVzdHJveSgpO1xuICAgICAqIGNvbnNvbGUubG9nKG9iai5uYW1lKTsgLy8gVGhyb3dzIGFuIGVycm9yXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAjIyMjIENvbXBvbmVudFxuICAgICAqXG4gICAgICogQ29tcG9uZW50cyB3aWxsIGFsc28gYmUgYWZmZWN0ZWQ6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNsYXNzIE15Q29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAgKiAgICAgc3RhdGljIFR5cGVOYW1lID0gJ215LWNvbXBvbmVudCc7XG4gICAgICogICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge1xuICAgICAqICAgICAgICAgYWxpdmU6IFByb3BlcnR5LmJvb2wodHJ1ZSlcbiAgICAgKiAgICAgfTtcbiAgICAgKlxuICAgICAqICAgICBzdGFydCgpIHtcbiAgICAgKiAgICAgICAgIHRoaXMuZGVzdHJveSgpO1xuICAgICAqICAgICAgICAgY29uc29sZS5sb2codGhpcy5hbGl2ZSkgLy8gVGhyb3dzIGFuIGVycm9yXG4gICAgICogICAgIH1cbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBBIGNvbXBvbmVudCBpcyBhbHNvIGRlc3Ryb3llZCBpZiBpdHMgYW5jZXN0b3IgZ2V0cyBkZXN0cm95ZWQ6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNsYXNzIE15Q29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAgKiAgICAgLi4uXG4gICAgICogICAgIHN0YXJ0KCkge1xuICAgICAqICAgICAgICAgdGhpcy5vYmplY3QucGFyZW50LmRlc3Ryb3koKTtcbiAgICAgKiAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuYWxpdmUpIC8vIFRocm93cyBhbiBlcnJvclxuICAgICAqICAgICB9XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQG5vdGUgTmF0aXZlIGNvbXBvbmVudHMgd2lsbCBub3QgYmUgZXJhc2VkIGlmIGRlc3Ryb3llZCB2aWEgb2JqZWN0IGRlc3RydWN0aW9uOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBtZXNoID0gb2JqLmFkZENvbXBvbmVudCgnbWVzaCcpO1xuICAgICAqIG9iai5kZXN0cm95KCk7XG4gICAgICogY29uc29sZS5sb2cobWVzaC5hY3RpdmUpIC8vIERvZXNuJ3QgdGhyb3cgZXZlbiBpZiB0aGUgbWVzaCBpcyBkZXN0cm95ZWRcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjEuMVxuICAgICAqL1xuICAgIGVyYXNlUHJvdG90eXBlT25EZXN0cm95ID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBJZiBgdHJ1ZWAsIHRoZSBtYXRlcmlhbHMgd2lsbCBiZSB3cmFwcGVkIGluIGEgcHJveHkgdG8gc3VwcG9ydCBwcmUtMS4yLjBcbiAgICAgKiBtYXRlcmlhbCBhY2Nlc3MsIGkuZS4sXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IG1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKGVuZ2luZSwgJ1Bob25nIE9wYXF1ZScpO1xuICAgICAqIG1hdGVyaWFsLmRpZmZ1c2VDb2xvciA9IFsxLjAsIDAuMCwgMC4wLCAxLjBdO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogSWYgYGZhbHNlYCwgcHJvcGVydHkgYWNjZXNzb3JzIHdpbGwgbm90IGJlIGF2YWlsYWJsZSBhbmQgbWF0ZXJpYWxcbiAgICAgKiBwcm9wZXJ0aWVzIHNob3VsZCBiZSBhY2Nlc3NlZCB2aWEgbWV0aG9kcywgaS5lLixcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgUGhvbmdPcGFxdWUgPSBlbmdpbmUubWF0ZXJpYWxzLmdldFRlbXBsYXRlKCdQaG9uZyBPcGFxdWUnKTtcbiAgICAgKiBjb25zdCBtYXRlcmlhbCA9IG5ldyBQaG9uZ09wYXF1ZSgpO1xuICAgICAqIG1hdGVyaWFsLnNldERpZmZ1c2VDb2xvcihbMS4wLCAwLjAsIDAuMCwgMS4wXSk7XG4gICAgICogLi4uXG4gICAgICogY29uc3QgZGlmZnVzZSA9IG1hdGVyaWFsLmdldERpZmZ1c2VDb2xvcigpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogV2hlbiBkaXNhYmxlZCwgcmVhZGluZy93cml0aW5nIHRvIG1hdGVyaWFscyBpcyBzbGlnaHRseSBtb3JlIGVmZmljaWVudCBvbiB0aGUgQ1BVLlxuICAgICAqL1xuICAgIGxlZ2FjeU1hdGVyaWFsU3VwcG9ydCA9IHRydWU7XG5cbiAgICAvKipcbiAgICAgKiBJZiBgdHJ1ZWAsIHNjZW5lIHdpbGwgYmUgbG9hZGVkIGNodW5rIGJ5IGNodW5rLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHJlYWRvbmx5IF91c2VDaHVua0xvYWRpbmcgPSB0cnVlO1xuXG4gICAgLyoqXG4gICAgICogU2NlbmUgY2FjaGUgaW4gc2NlbmUgbWFuYWdlci5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfc2NlbmVzOiAoUHJlZmFiIHwgbnVsbClbXSA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQ3VycmVudGx5IGFjdGl2ZSBzY2VuZS5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfc2NlbmU6IFNjZW5lID0gbnVsbCE7XG5cbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIHByaXZhdGUgX3RleHR1cmVzOiBUZXh0dXJlTWFuYWdlciA9IG51bGwhO1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgcHJpdmF0ZSBfbWF0ZXJpYWxzOiBNYXRlcmlhbE1hbmFnZXIgPSBudWxsITtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIHByaXZhdGUgX21lc2hlczogTWVzaE1hbmFnZXIgPSBudWxsITtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIHByaXZhdGUgX21vcnBoVGFyZ2V0czogUmVzb3VyY2VNYW5hZ2VyPE1vcnBoVGFyZ2V0cz4gPSBudWxsITtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIHByaXZhdGUgX2ZvbnRzOiBSZXNvdXJjZU1hbmFnZXI8Rm9udD4gPSBudWxsITtcblxuICAgIC8qKlxuICAgICAqIFdlYkFzc2VtYmx5IGJyaWRnZS5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICAjd2FzbTogV0FTTTtcblxuICAgIC8qKlxuICAgICAqIFBoeXNpY3MgbWFuYWdlciwgb25seSBhdmFpbGFibGUgd2hlbiBwaHlzeCBpcyBlbmFibGVkIGluIHRoZSBydW50aW1lLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgICNwaHlzaWNzOiBQaHlzaWNzIHwgbnVsbCA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBSZXNpemUgb2JzZXJ2ZXIgdG8gdHJhY2sgZm9yIGNhbnZhcyBzaXplIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgI3Jlc2l6ZU9ic2VydmVyOiBSZXNpemVPYnNlcnZlciB8IG51bGwgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbCByZWZlcmVuY2Ugc3BhY2UgdHlwZSBzZXQgYnkgd2VieHJfaW5pdC4gU2VlIHtAbGluayBfaW5pdH0gZm9yXG4gICAgICogbW9yZSBpbmZvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICAjaW5pdGlhbFJlZmVyZW5jZVNwYWNlVHlwZTogWFJSZWZlcmVuY2VTcGFjZVR5cGUgfCBudWxsID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBlbmdpbmUgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gd2FzbSBXYXNtIGJyaWRnZSBpbnN0YW5jZVxuICAgICAqIEBwYXJhbSBsb2FkaW5nU2NyZWVuIExvYWRpbmcgc2NyZWVuIC5iaW4gZmlsZSBkYXRhXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgY29uc3RydWN0b3Iod2FzbTogV0FTTSwgbG9hZGluZ1NjcmVlbjogQXJyYXlCdWZmZXIgfCBudWxsKSB7XG4gICAgICAgIHRoaXMuI3dhc20gPSB3YXNtO1xuICAgICAgICB0aGlzLiN3YXNtWydfc2V0RW5naW5lJ10odGhpcyk7IC8qIFN0cmluZyBsb29rdXAgdG8gYnlwYXNzIHByaXZhdGUuICovXG4gICAgICAgIHRoaXMuI3dhc20uX2xvYWRpbmdTY3JlZW4gPSBsb2FkaW5nU2NyZWVuO1xuXG4gICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAnd2ViZ2xjb250ZXh0bG9zdCcsXG4gICAgICAgICAgICAoZSkgPT4gdGhpcy5sb2cuZXJyb3IoTG9nVGFnLkVuZ2luZSwgJ0NvbnRleHQgbG9zdDonLCBlKSxcbiAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3RhcnQgdGhlIGVuZ2luZSBpZiBpdCdzIG5vdCBhbHJlYWR5IHJ1bm5pbmcuXG4gICAgICpcbiAgICAgKiBXaGVuIHVzaW5nIHRoZSB7QGxpbmsgbG9hZFJ1bnRpbWV9IGZ1bmN0aW9uLCB0aGlzIG1ldGhvZCBpcyBjYWxsZWRcbiAgICAgKiBhdXRvbWF0aWNhbGx5LlxuICAgICAqL1xuICAgIHN0YXJ0KCk6IHZvaWQge1xuICAgICAgICB0aGlzLndhc20uX3dsX2FwcGxpY2F0aW9uX3N0YXJ0KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXIgYSBjdXN0b20gSmF2YVNjcmlwdCBjb21wb25lbnQgdHlwZS5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gcmVnaXN0ZXIgYSBjb21wb25lbnQgZGlyZWN0bHkgdXNpbmcgYSBjbGFzcyBpbmhlcml0aW5nIGZyb20ge0BsaW5rIENvbXBvbmVudH06XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGltcG9ydCB7IENvbXBvbmVudCwgVHlwZSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4gICAgICpcbiAgICAgKiBleHBvcnQgY2xhc3MgTXlDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgICAqICAgICBzdGF0aWMgVHlwZU5hbWUgPSAnbXktY29tcG9uZW50JztcbiAgICAgKiAgICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gICAgICogICAgICAgICBteVBhcmFtOiB7dHlwZTogVHlwZS5GbG9hdCwgZGVmYXVsdDogNDIuMH0sXG4gICAgICogICAgIH07XG4gICAgICogICAgIGluaXQoKSB7fVxuICAgICAqICAgICBzdGFydCgpIHt9XG4gICAgICogICAgIHVwZGF0ZShkdCkge31cbiAgICAgKiAgICAgb25BY3RpdmF0ZSgpIHt9XG4gICAgICogICAgIG9uRGVhY3RpdmF0ZSgpIHt9XG4gICAgICogICAgIG9uRGVzdHJveSgpIHt9XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiAvLyBIZXJlLCB3ZSBhc3N1bWUgd2UgaGF2ZSBhbiBlbmdpbmUgYWxyZWFkeSBpbnN0YW50aWF0ZWQuXG4gICAgICogLy8gSW4gZ2VuZXJhbCwgdGhlIHJlZ2lzdHJhdGlvbiBvY2N1cnMgaW4gdGhlIGBpbmRleC5qc2AgZmlsZSBpbiB5b3VyXG4gICAgICogLy8gZmluYWwgYXBwbGljYXRpb24uXG4gICAgICogZW5naW5lLnJlZ2lzdGVyQ29tcG9uZW50KE15Q29tcG9uZW50KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIHtAbGFiZWwgQ0xBU1NFU31cbiAgICAgKiBAcGFyYW0gY2xhc3NlcyBDdXN0b20gY29tcG9uZW50KHMpIGV4dGVuZGluZyB7QGxpbmsgQ29tcG9uZW50fS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIHJlZ2lzdGVyQ29tcG9uZW50KC4uLmNsYXNzZXM6IENvbXBvbmVudENvbnN0cnVjdG9yW10pIHtcbiAgICAgICAgZm9yIChjb25zdCBhcmcgb2YgY2xhc3Nlcykge1xuICAgICAgICAgICAgdGhpcy53YXNtLl9yZWdpc3RlckNvbXBvbmVudChhcmcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBsb2FkaW5nIHNjcmVlbiBwcm9ncmVzcyBiYXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmFsdWUgQ3VycmVudCBsb2FkaW5nIHBlcmNlbnRhZ2UsIGluIHRoZSByYW5nZSBbMDsgMV0uXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4yLjFcbiAgICAgKi9cbiAgICBzZXRMb2FkaW5nUHJvZ3Jlc3MocGVyY2VudGFnZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMud2FzbS5fd2xfc2V0X2xvYWRpbmdfc2NyZWVuX3Byb2dyZXNzKGNsYW1wKHBlcmNlbnRhZ2UsIDAsIDEpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTd2l0Y2ggdGhlIGN1cnJlbnQgYWN0aXZlIHNjZW5lLlxuICAgICAqXG4gICAgICogT25jZSBhY3RpdmUsIHRoZSBzY2VuZSB3aWxsIGJlIHVwZGF0ZWQgYW5kIHJlbmRlcmVkIG9uIHRoZSBjYW52YXMuXG4gICAgICpcbiAgICAgKiBUaGUgY3VycmVudGx5IGFjdGl2ZSBzY2VuZSBpcyBhY2Nlc3NlZCB2aWEge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUuc2NlbmV9OlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBpbXBvcnQge0NvbXBvbmVudH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbiAgICAgKlxuICAgICAqIGNsYXNzIE15Q29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50e1xuICAgICAqICAgICBzdGFydCgpIHtcbiAgICAgKiAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2NlbmUgPT09IHRoaXMuZW5naW5lLnNjZW5lKTsgLy8gUHJpbnRzIGB0cnVlYFxuICAgICAqICAgICB9XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBtZXRob2Qgd2lsbCB0aHJvdyBpZiB0aGUgc2NlbmUgaXNuJ3QgYWN0aXZhdGFibGUuXG4gICAgICpcbiAgICAgKiAjIyMjIENvbXBvbmVudCBMaWZlY3ljbGVcbiAgICAgKlxuICAgICAqIE1hcmtpbmcgYSBzY2VuZSBhcyBhY3RpdmUgd2lsbDpcbiAgICAgKiAqIENhbGwge0BsaW5rIENvbXBvbmVudCNvbkRlYWN0aXZhdGV9IGZvciBhbGwgYWN0aXZlIGNvbXBvbmVudHMgb2YgdGhlIHByZXZpb3VzIHNjZW5lXG4gICAgICogKiBDYWxsIHtAbGluayBDb21wb25lbnQjb25BY3RpdmF0ZX0gZm9yIGFsbCBhY3RpdmUgY29tcG9uZW50cyBvZiB0aGUgbmV3IHNjZW5lXG4gICAgICpcbiAgICAgKiAjIyMjIFVzYWdlXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IHNjZW5lID0gYXdhaXQgZW5naW5lLmxvYWRTY2VuZSgnU2NlbmUuYmluJyk7XG4gICAgICogZW5naW5lLnN3aXRjaFRvKHNjZW5lKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIG9uY2UgdGhlIHNjZW5lIGlzIHJlYWR5LlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMi4wXG4gICAgICovXG4gICAgYXN5bmMgc3dpdGNoVG8oc2NlbmU6IFNjZW5lLCBvcHRzOiBBY3RpdmF0ZU9wdGlvbnMgPSB7fSkge1xuICAgICAgICB0aGlzLndhc20uX3dsX2RlYWN0aXZhdGVfYWN0aXZlU2NlbmUoKTtcblxuICAgICAgICAvKiBTd2l0Y2ggcmVmZXJlbmNlIG9uIGVuZ2luZSAqKmp1c3QqKiBiZWZvcmUgYWN0aXZhdGluZywgdG8gYWxsb3dcbiAgICAgICAgICogY29tcG9uZW50IHRvIHVzZSBgdGhpcy5lbmdpbmUuc2NlbmVgIGluIGBvbkFjdGl2YXRlKClgL2BzdGFydCgpYC4gKi9cbiAgICAgICAgY29uc3QgcHJldmlvdXMgPSB0aGlzLnNjZW5lO1xuICAgICAgICB0aGlzLl9wcmVhY3RpdmF0ZShzY2VuZSk7XG5cbiAgICAgICAgdGhpcy53YXNtLl93bF9zY2VuZV9hY3RpdmF0ZShzY2VuZS5faW5kZXgpO1xuXG4gICAgICAgIGlmICghdGhpcy5vbkxvYWRpbmdTY3JlZW5FbmQuaXNEYXRhUmV0YWluZWQpIHtcbiAgICAgICAgICAgIHRoaXMub25Mb2FkaW5nU2NyZWVuRW5kLm5vdGlmeSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogRm9yIG5vdywgd2UgYWx3YXlzIGF1dG9tYXRpY2FsbHkgZG93bmxvYWQgZGVwZW5kZW5jaWVzIGZvclxuICAgICAgICAgKiB0aGUgdXNlciwgaS5lLiwgc2VwYXJhdGUgdGV4dHVyZXMuYmluIGFuZCBsYW5ndWFnZXMuYmluLlxuICAgICAgICAgKlxuICAgICAgICAgKiBJbiB0aGUgZnV0dXJlLCB3ZSBjYW4gZXZlbnR1YWxseSBleHBvc2UgdGhpcyBpbiB0aGUgY2h1bmsgQVBJXG4gICAgICAgICAqIHRvIGdpdmUgbW9yZSBjb250cm9sIHRvIHRoZSB1c2VyIGlmIG5lZWRlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogV2UgZG8gbm90IG1ha2UgdGhlIHVzZXIgd2FpdCB1bnRpbCB0aGUgdGV4dHVyZXMgZG93bmxvYWQgaXMgY29tcGxldGUuICovXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSBzY2VuZS5fZG93bmxvYWREZXBlbmRlbmNpZXMoKTtcblxuICAgICAgICBhd2FpdCB0aGlzLmkxOG4uc2V0TGFuZ3VhZ2UodGhpcy5pMThuLmxhbmd1YWdlQ29kZSgwKSk7XG5cbiAgICAgICAgY29uc3Qge2Rpc3BhdGNoUmVhZHlFdmVudCA9IGZhbHNlLCB3YWl0Rm9yRGVwZW5kZW5jaWVzID0gZmFsc2V9ID0gb3B0cztcblxuICAgICAgICBpZiAod2FpdEZvckRlcGVuZGVuY2llcykgYXdhaXQgcHJvbWlzZTtcblxuICAgICAgICB0aGlzLm9uU2NlbmVBY3RpdmF0ZWQubm90aWZ5KHByZXZpb3VzLCBzY2VuZSk7XG5cbiAgICAgICAgaWYgKGRpc3BhdGNoUmVhZHlFdmVudCkgc2NlbmUuZGlzcGF0Y2hSZWFkeUV2ZW50KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZCB0aGUgc2NlbmUgZnJvbSBhIFVSTCwgYXMgdGhlIG1haW4gc2NlbmUgb2YgYSBuZXcge0BsaW5rIFNjZW5lfS5cbiAgICAgKlxuICAgICAqICMjIyMgVXNhZ2VcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogLy8gVGhlIG1ldGhvZCByZXR1cm5zIHRoZSBtYWluIHNjZW5lXG4gICAgICogY29uc3Qgc2NlbmUgPSBhd2FpdCBlbmdpbmUubG9hZE1haW5TY2VuZSgpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogIyMjIyBEZXN0cnVjdGlvblxuICAgICAqXG4gICAgICogTG9hZGluZyBhIG5ldyBtYWluIHNjZW5lIGVudGlyZWx5IHJlc2V0cyB0aGUgc3RhdGUgb2YgdGhlIGVuZ2luZSwgYW5kIGRlc3Ryb3lzOlxuICAgICAqIC0gQWxsIGxvYWRlZCBzY2VuZXMsIHByZWZhYnMsIGFuZCBnbHRmIGZpbGVzXG4gICAgICogLSBNZXNoZXNcbiAgICAgKiAtIFRleHR1cmVzXG4gICAgICogLSBNYXRlcmlhbHNcbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgbWV0aG9kIGNhbiBvbmx5IGxvYWQgV29uZGVybGFuZCBFbmdpbmUgYC5iaW5gIGZpbGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIFVSTCBwb2ludGluZyB0byB0aGUgc2NlbmUgdG8gbG9hZCBvciBhbiBvYmplY3RcbiAgICAgKiAgICAgaG9sZGluZyBhZGRpdGlvbmFsIGxvYWRpbmcgb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0gcHJvZ3Jlc3MgT3B0aW9uYWwgcHJvZ3Jlc3MgY2FsbGJhY2suIFdoZW4gc2V0dGluZyBhIGN1c3RvbVxuICAgICAqICAgICBjYWxsYmFjaywgeW91IG5lZWQgdG8gbWFudWFsbHkgY2FsbCB7QGxpbmsgc2V0TG9hZGluZ1Byb2dyZXNzfSB0b1xuICAgICAqICAgICBnZXQgcHJvZ3Jlc3MgdXBkYXRlcyBpbiB0aGUgbG9hZGluZyBzY3JlZW4uXG4gICAgICogQHJldHVybnMgVGhlIG1haW4gc2NlbmUgb2YgdGhlIG5ldyB7QGxpbmsgU2NlbmV9LlxuICAgICAqL1xuICAgIGFzeW5jIGxvYWRNYWluU2NlbmUoXG4gICAgICAgIG9wdGlvbnM6IExvYWRPcHRpb25zICYgQWN0aXZhdGVPcHRpb25zLFxuICAgICAgICBwcm9ncmVzcz86IFByb2dyZXNzQ2FsbGJhY2tcbiAgICApIHtcbiAgICAgICAgcHJvZ3Jlc3MgPz89IChieXRlczogbnVtYmVyLCBzaXplOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgIHRoaXMubG9nLmluZm8oTG9nVGFnLlNjZW5lLCBgU2NlbmUgZG93bmxvYWRpbmc6ICR7Ynl0ZXN9IC8gJHtzaXplfWApO1xuICAgICAgICAgICAgdGhpcy5zZXRMb2FkaW5nUHJvZ3Jlc3MoYnl0ZXMgLyBzaXplKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBvcHRzID0gUHJlZmFiLm1ha2VVcmxMb2FkT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgY29uc3Qge3N0cmVhbWVkID0gdHJ1ZX0gPSBvcHRzO1xuICAgICAgICBpZiAodGhpcy5fY2FuVXNlQ2h1bmtMb2FkaW5nKCkgJiYgc3RyZWFtZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBhd2FpdCBTY2VuZS5sb2FkU3RyZWFtKG9wdHMsIHByb2dyZXNzKTtcbiAgICAgICAgICAgIGNvbnN0IHtzdHJlYW0sIHVybH0gPSBQcmVmYWIudmFsaWRhdGVTdHJlYW1PcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvYWRNYWluU2NlbmUoc3RyZWFtLCB1cmwsIG9wdGlvbnMgYXMgQWN0aXZhdGVPcHRpb25zKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBhd2FpdCBTY2VuZS5sb2FkQnVmZmVyKG9wdHMsIHByb2dyZXNzKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRNYWluU2NlbmVGcm9tQnVmZmVyKG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2ltaWxhciB0byB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5sb2FkTWFpblNjZW5lfSwgYnV0IGxvYWRpbmcgaXMgZG9uZVxuICAgICAqIGZyb20gYW4gYEFycmF5QnVmZmVyYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBidWZmZXIgYW5kIGV4dHJhIG1ldGFkYXRhLlxuICAgICAqIEByZXR1cm5zIFRoZSBtYWluIHNjZW5lIG9mIHRoZSBuZXcge0BsaW5rIFNjZW5lfS5cbiAgICAgKi9cbiAgICBhc3luYyBsb2FkTWFpblNjZW5lRnJvbUJ1ZmZlcihvcHRpb25zOiBJbk1lbW9yeUxvYWRPcHRpb25zICYgQWN0aXZhdGVPcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHtidWZmZXIsIHVybH0gPSBQcmVmYWIudmFsaWRhdGVCdWZmZXJPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gdGhpcy5fbG9hZE1haW5TY2VuZShidWZmZXIsIHVybCwgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZCBhIHtAbGluayBQcmVmYWJ9IGZyb20gYSBVUkwuXG4gICAgICpcbiAgICAgKiAjIyMjIFVzYWdlXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IHByZWZhYiA9IGF3YWl0IGVuZ2luZS5sb2FkUHJlZmFiKCdQcmVmYWIuYmluJyk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIG1ldGhvZCBjYW4gb25seSBsb2FkIFdvbmRlcmxhbmQgRW5naW5lIGAuYmluYCBmaWxlcy5cbiAgICAgKiBAbm90ZSBUaGlzIG1ldGhvZCBpcyBhIHdyYXBwZXIgYXJvdW5kIHtAbGluayBXb25kZXJsYW5kRW5naW5lLmxvYWRQcmVmYWJGcm9tQnVmZmVyfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB1cmwgVGhlIFVSTCBwb2ludGluZyB0byB0aGUgcHJlZmFiIHRvIGxvYWQuXG4gICAgICogQHBhcmFtIHByb2dyZXNzIE9wdGlvbmFsIHByb2dyZXNzIGNhbGxiYWNrLlxuICAgICAqIEByZXR1cm5zIFRoZSBsb2FkZWQge0BsaW5rIFByZWZhYn0uXG4gICAgICovXG4gICAgYXN5bmMgbG9hZFByZWZhYihvcHRpb25zOiBMb2FkT3B0aW9ucywgcHJvZ3Jlc3M/OiBQcm9ncmVzc0NhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IG9wdHMgPSBQcmVmYWIubWFrZVVybExvYWRPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCB7c3RyZWFtZWQgPSB0cnVlfSA9IG9wdHM7XG4gICAgICAgIGlmICh0aGlzLl9jYW5Vc2VDaHVua0xvYWRpbmcoKSAmJiBzdHJlYW1lZCkge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IGF3YWl0IFNjZW5lLmxvYWRTdHJlYW0ob3B0cywgcHJvZ3Jlc3MpO1xuICAgICAgICAgICAgY29uc3Qgc2NlbmUgPSBhd2FpdCB0aGlzLl9sb2FkU2NlbmVGcm9tU3RyZWFtKFByZWZhYiwgb3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLl92YWxpZGF0ZUxvYWRlZFByZWZhYihzY2VuZSk7XG4gICAgICAgICAgICBzY2VuZS5faW5pdGlhbGl6ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHNjZW5lO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IGF3YWl0IFNjZW5lLmxvYWRCdWZmZXIob3B0cywgcHJvZ3Jlc3MpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9hZFByZWZhYkZyb21CdWZmZXIob3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaW1pbGFyIHRvIHtAbGluayBXb25kZXJsYW5kRW5naW5lLmxvYWRQcmVmYWJ9LCBidXQgbG9hZGluZyBpcyBkb25lIGZyb21cbiAgICAgKiBhbiBgQXJyYXlCdWZmZXJgLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGJ1ZmZlciBhbmQgZXh0cmEgbWV0YWRhdGEuXG4gICAgICogQHJldHVybnMgQSBuZXcgbG9hZGVkIHtAbGluayBQcmVmYWJ9LlxuICAgICAqL1xuICAgIGxvYWRQcmVmYWJGcm9tQnVmZmVyKG9wdGlvbnM6IEluTWVtb3J5TG9hZE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSB0aGlzLl9sb2FkU2NlbmVGcm9tQnVmZmVyKFByZWZhYiwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMuX3ZhbGlkYXRlTG9hZGVkUHJlZmFiKHNjZW5lKTtcbiAgICAgICAgc2NlbmUuX2luaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHNjZW5lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvYWQgYSBzY2VuZSBmcm9tIGEgVVJMLlxuICAgICAqXG4gICAgICogQXQgdGhlIG9wcG9zaXRlIG9mIHtAbGluayBXb25kZXJsYW5kRW5naW5lLmxvYWRNYWluU2NlbmV9LCB0aGUgc2NlbmUgbG9hZGVkXG4gICAgICogd2lsbCBiZSBhZGRlZCB0byB0aGUgbGlzdCBvZiBleGlzdGluZyBzY2VuZXMsIGFuZCBpdHMgcmVzb3VyY2VzIHdpbGwgYmUgbWFkZVxuICAgICAqIGF2YWlsYWJsZSBmb3Igb3RoZXIgc2NlbmVzL3ByZWZhYnMvZ2x0ZiB0byB1c2UuXG4gICAgICpcbiAgICAgKiAjIyMjIFJlc291cmNlcyBTaGFyaW5nXG4gICAgICpcbiAgICAgKiBVcG9uIGxvYWRpbmcsIHRoZSBzY2VuZSByZXNvdXJjZXMgYXJlIGFkZGVkIGluIHRoZSBlbmdpbmUsIGFuZCByZWZlcmVuY2VzXG4gICAgICogdG8gdGhvc2UgcmVzb3VyY2VzIGFyZSB1cGRhdGVkLlxuICAgICAqXG4gICAgICogSXQncyBpbXBvc3NpYmxlIGZvciBhIHNjZW5lIGxvYWRlZCB3aXRoIHRoaXMgbWV0aG9kIHRvIGltcG9ydCBwaXBlbGluZXMuXG4gICAgICogVGh1cywgdGhlIGxvYWRlZCBzY2VuZSB3aWxsIHJlZmVyZW5jZSBleGlzdGluZyBwaXBlbGluZXMgaW4gdGhlIG1haW4gc2NlbmUsXG4gICAgICogYmFzZWQgb24gdGhlaXIgbmFtZXMuXG4gICAgICpcbiAgICAgKiAjIyMjIFVzYWdlXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IHNjZW5lID0gYXdhaXQgZW5naW5lLmxvYWRTY2VuZSgnU2NlbmUuYmluJyk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIG1ldGhvZCBjYW4gb25seSBsb2FkIFdvbmRlcmxhbmQgRW5naW5lIGAuYmluYCBmaWxlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBVUkwgcG9pbnRpbmcgdG8gdGhlIHNjZW5lIHRvIGxvYWQgb3IgYW4gb2JqZWN0XG4gICAgICogICAgIGhvbGRpbmcgYWRkaXRpb25hbCBsb2FkaW5nIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIHByb2dyZXNzIE9wdGlvbmFsIHByb2dyZXNzIGNhbGxiYWNrLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IGxvYWRlZCB7QGxpbmsgU2NlbmV9LlxuICAgICAqL1xuICAgIGFzeW5jIGxvYWRTY2VuZShvcHRpb25zOiBMb2FkT3B0aW9ucywgcHJvZ3Jlc3M/OiBQcm9ncmVzc0NhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IG9wdHMgPSBQcmVmYWIubWFrZVVybExvYWRPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCB7c3RyZWFtZWQgPSB0cnVlfSA9IG9wdHM7XG4gICAgICAgIGlmICh0aGlzLl9jYW5Vc2VDaHVua0xvYWRpbmcoKSAmJiBzdHJlYW1lZCkge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IGF3YWl0IFNjZW5lLmxvYWRTdHJlYW0ob3B0cywgcHJvZ3Jlc3MpO1xuICAgICAgICAgICAgY29uc3Qgc2NlbmUgPSBhd2FpdCB0aGlzLl9sb2FkU2NlbmVGcm9tU3RyZWFtKFNjZW5lLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuX3ZhbGlkYXRlTG9hZGVkU2NlbmUoc2NlbmUpO1xuICAgICAgICAgICAgc2NlbmUuX2luaXRpYWxpemUoKTtcbiAgICAgICAgICAgIHJldHVybiBzY2VuZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBhd2FpdCBTY2VuZS5sb2FkQnVmZmVyKG9wdHMsIHByb2dyZXNzKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRTY2VuZUZyb21CdWZmZXIob3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBnbFRGIHNjZW5lIGZyb20gYSBVUkwuXG4gICAgICpcbiAgICAgKiBAbm90ZSBMb2FkaW5nIGdsVEYgZmlsZXMgcmVxdWlyZXMgYGVuYWJsZVJ1bnRpbWVHbHRmYCB0byBiZSBjaGVja2VkIGluXG4gICAgICogICAgIHRoZSBlZGl0b3IgUHJvamVjdCBTZXR0aW5ncy5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgbWV0aG9kIGlzIGEgd3JhcHBlciBhcm91bmQge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUubG9hZEdMVEZGcm9tQnVmZmVyfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBVUkwgcG9pbnRpbmcgdG8gdGhlIHNjZW5lIHRvIGxvYWQgb3IgYW4gb2JqZWN0XG4gICAgICogICAgIGhvbGRpbmcgYWRkaXRpb25hbCBsb2FkaW5nIG9wdGlvbnMsIG9wdGlvbmFsbHkgaW5jbHVkaW5nXG4gICAgICogICAgIHtAbGluayBHTFRGT3B0aW9uc30uIHtAbGluayBMb2FkT3B0aW9ucy5zdHJlYW1lZH0gaXMgaWdub3JlZCBhc1xuICAgICAqICAgICBzdHJlYW1lZCBnbFRGIHBhcnNpbmcgaXNuJ3Qgc3VwcG9ydGVkLlxuICAgICAqIEBwYXJhbSBwcm9ncmVzcyBPcHRpb25hbCBwcm9ncmVzcyBjYWxsYmFjay5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBsb2FkZWQge0BsaW5rIFByZWZhYkdMVEZ9LlxuICAgICAqL1xuICAgIGFzeW5jIGxvYWRHTFRGKG9wdHM6IExvYWRPcHRpb25zICYgR0xURk9wdGlvbnMsIHByb2dyZXNzPzogUHJvZ3Jlc3NDYWxsYmFjaykge1xuICAgICAgICBjb25zdCBtZW1PcHRpb25zID0gYXdhaXQgU2NlbmUubG9hZEJ1ZmZlcihvcHRzLCBwcm9ncmVzcyk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSBpc1N0cmluZyhvcHRzKSA/IG1lbU9wdGlvbnMgOiB7Li4ub3B0cywgLi4ubWVtT3B0aW9uc307XG4gICAgICAgIHJldHVybiB0aGlzLmxvYWRHTFRGRnJvbUJ1ZmZlcihvcHRpb25zKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaW1pbGFyIHRvIHtAbGluayBXb25kZXJsYW5kRW5naW5lLmxvYWRTY2VuZX0sIGJ1dCBsb2FkaW5nIGlzIGRvbmUgZnJvbVxuICAgICAqIGFuIGBBcnJheUJ1ZmZlcmAuXG4gICAgICpcbiAgICAgKiBAdGhyb3dzIElmIHRoZSBzY2VuZSBpcyBzdHJlYW1hYmxlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGJ1ZmZlciBhbmQgZXh0cmEgbWV0YWRhdGEuXG4gICAgICogQHJldHVybnMgQSBuZXcgbG9hZGVkIHtAbGluayBTY2VuZX0uXG4gICAgICovXG4gICAgbG9hZFNjZW5lRnJvbUJ1ZmZlcihvcHRpb25zOiBJbk1lbW9yeUxvYWRPcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gdGhpcy5fbG9hZFNjZW5lRnJvbUJ1ZmZlcihTY2VuZSwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMuX3ZhbGlkYXRlTG9hZGVkU2NlbmUoc2NlbmUpO1xuICAgICAgICBzY2VuZS5faW5pdGlhbGl6ZSgpO1xuICAgICAgICByZXR1cm4gc2NlbmU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2ltaWxhciB0byB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5sb2FkR0xURn0sIGJ1dCBsb2FkaW5nIGlzIGRvbmUgZnJvbVxuICAgICAqIGFuIGBBcnJheUJ1ZmZlcmAuXG4gICAgICpcbiAgICAgKiBAbm90ZSBMb2FkaW5nIGdsVEYgZmlsZXMgcmVxdWlyZXMgYGVuYWJsZVJ1bnRpbWVHbHRmYCB0byBiZSBjaGVja2VkIGluXG4gICAgICogICAgIHRoZSBlZGl0b3IgUHJvamVjdCBTZXR0aW5ncy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBidWZmZXIgYW5kIGV4dHJhIGdsVEYgbWV0YWRhdGEuXG4gICAgICogQHJldHVybnMgQSBuZXcgbG9hZGVkIHtAbGluayBQcmVmYWJHTFRGfS5cbiAgICAgKi9cbiAgICBsb2FkR0xURkZyb21CdWZmZXIob3B0aW9uczogSW5NZW1vcnlMb2FkT3B0aW9ucyAmIEdMVEZPcHRpb25zKSB7XG4gICAgICAgIFNjZW5lLnZhbGlkYXRlQnVmZmVyT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgY29uc3Qge2J1ZmZlciwgZXh0ZW5zaW9ucyA9IGZhbHNlfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMud2FzbTtcblxuICAgICAgICBpZiAoIXdhc20uX3dsX2dsVEZfc2NlbmVfY3JlYXRlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgJ0xvYWRpbmcgLmdsdGYgZmlsZXMgcmVxdWlyZXMgYGVuYWJsZVJ1bnRpbWVHbHRmYCB0byBiZSBjaGVja2VkIGluIHRoZSBlZGl0b3IgUHJvamVjdCBTZXR0aW5ncy4nXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5jb3B5QnVmZmVyVG9IZWFwKGJ1ZmZlcik7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gd2FzbS5fd2xfZ2xURl9zY2VuZV9jcmVhdGUoZXh0ZW5zaW9ucywgcHRyLCBidWZmZXIuYnl0ZUxlbmd0aCk7XG4gICAgICAgICAgICBjb25zdCBzY2VuZSA9IG5ldyBQcmVmYWJHTFRGKHRoaXMsIGluZGV4KTtcbiAgICAgICAgICAgIHRoaXMuX3NjZW5lc1tzY2VuZS5faW5kZXhdID0gc2NlbmU7XG4gICAgICAgICAgICByZXR1cm4gc2NlbmU7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAvKiBDYXRjaCBjYWxscyB0byBhYm9ydCgpLCBlLmcuIHZpYSBhc3NlcnRzICovXG4gICAgICAgICAgICB3YXNtLl9mcmVlKHB0cik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3Mgd2hldGhlciB0aGUgZ2l2ZW4gY29tcG9uZW50IGlzIHJlZ2lzdGVyZWQgb3Igbm90LlxuICAgICAqXG4gICAgICogQHBhcmFtIHR5cGVPckNsYXNzIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgY29tcG9uZW50IHR5cGVuYW1lIChlLmcuLCBgJ2N1cnNvci1jb21wb25lbnQnYCksXG4gICAgICogICAgIG9yIGEgY29tcG9uZW50IGNsYXNzIChlLmcuLCBgQ3Vyc29yQ29tcG9uZW50YCkuXG4gICAgICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBjb21wb25lbnQgaXMgcmVnaXN0ZXJlZCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICovXG4gICAgaXNSZWdpc3RlcmVkKHR5cGVPckNsYXNzOiBzdHJpbmcgfCBDb21wb25lbnRDb25zdHJ1Y3Rvcikge1xuICAgICAgICByZXR1cm4gdGhpcy4jd2FzbS5pc1JlZ2lzdGVyZWQoXG4gICAgICAgICAgICBpc1N0cmluZyh0eXBlT3JDbGFzcykgPyB0eXBlT3JDbGFzcyA6IHR5cGVPckNsYXNzLlR5cGVOYW1lXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzaXplIHRoZSBjYW52YXMgYW5kIHRoZSByZW5kZXJpbmcgY29udGV4dC5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoZSBgd2lkdGhgIGFuZCBgaGVpZ2h0YCBwYXJhbWV0ZXJzIHdpbGwgYmUgc2NhbGVkIGJ5IHRoZVxuICAgICAqIGBkZXZpY2VQaXhlbFJhdGlvYCB2YWx1ZS4gQnkgZGVmYXVsdCwgdGhlIHBpeGVsIHJhdGlvIHVzZWQgaXNcbiAgICAgKiBbd2luZG93LmRldmljZVBpeGVsUmF0aW9dKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XaW5kb3cvZGV2aWNlUGl4ZWxSYXRpbykuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoLCBpbiBDU1MgcGl4ZWxzLlxuICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCwgaW4gQ1NTIHBpeGVscy5cbiAgICAgKiBAcGFyYW0gZGV2aWNlUGl4ZWxSYXRpbyBUaGUgcGl4ZWwgcmF0aW8gZmFjdG9yLlxuICAgICAqL1xuICAgIHJlc2l6ZSh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgZGV2aWNlUGl4ZWxSYXRpbyA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSB7XG4gICAgICAgIHdpZHRoID0gd2lkdGggKiBkZXZpY2VQaXhlbFJhdGlvO1xuICAgICAgICBoZWlnaHQgPSBoZWlnaHQgKiBkZXZpY2VQaXhlbFJhdGlvO1xuICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIHRoaXMud2FzbS5fd2xfYXBwbGljYXRpb25fcmVzaXplKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICB0aGlzLm9uUmVzaXplLm5vdGlmeSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJ1biB0aGUgbmV4dCBmcmFtZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaXhlZERlbHRhIFRoZSBlbGFwc2VkIHRpbWUgYmV0d2VlbiB0aGlzIGZyYW1lIGFuZCB0aGUgcHJldmlvdXMgb25lLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhlIGVuZ2luZSBhdXRvbWF0aWNhbGx5IHNjaGVkdWxlcyBuZXh0IGZyYW1lcy4gWW91IHNob3VsZCBvbmx5XG4gICAgICogdXNlIHRoaXMgbWV0aG9kIGZvciB0ZXN0aW5nLlxuICAgICAqL1xuICAgIG5leHRGcmFtZShmaXhlZERlbHRhOiBudW1iZXIgPSAwKSB7XG4gICAgICAgIHRoaXMuI3dhc20uX3dsX25leHRGcmFtZShmaXhlZERlbHRhKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXF1ZXN0IGFuIFhSIHNlc3Npb24uXG4gICAgICpcbiAgICAgKiBAbm90ZSBQbGVhc2UgdXNlIHRoaXMgY2FsbCBpbnN0ZWFkIG9mIGRpcmVjdGx5IGNhbGxpbmcgYG5hdmlnYXRvci54ci5yZXF1ZXN0U2Vzc2lvbigpYC5cbiAgICAgKiBXb25kZXJsYW5kIEVuZ2luZSByZXF1aXJlcyB0byBiZSBhd2FyZSB0aGF0IGEgc2Vzc2lvbiBpcyBzdGFydGVkLCBhbmQgdGhpc1xuICAgICAqIGlzIGRvbmUgdGhyb3VnaCB0aGlzIGNhbGwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbW9kZSBUaGUgWFIgbW9kZS5cbiAgICAgKiBAcGFyYW0gZmVhdHVyZXMgQW4gYXJyYXkgb2YgcmVxdWlyZWQgZmVhdHVyZXMsIGUuZy4sIGBbJ2xvY2FsLWZsb29yJywgJ2hpdC10ZXN0J11gLlxuICAgICAqIEBwYXJhbSBvcHRpb25hbEZlYXR1cmVzIEFuIGFycmF5IG9mIG9wdGlvbmFsIGZlYXR1cmVzLCBlLmcuLCBgWydib3VuZGVkLWZsb29yJywgJ2RlcHRoLXNlbnNpbmcnXWAuXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHJlc29sdmluZyB3aXRoIHRoZSBgWFJTZXNzaW9uYCwgYSBzdHJpbmcgZXJyb3IgbWVzc2FnZSBvdGhlcndpc2UuXG4gICAgICovXG4gICAgcmVxdWVzdFhSU2Vzc2lvbihcbiAgICAgICAgbW9kZTogWFJTZXNzaW9uTW9kZSxcbiAgICAgICAgZmVhdHVyZXM6IHN0cmluZ1tdLFxuICAgICAgICBvcHRpb25hbEZlYXR1cmVzOiBzdHJpbmdbXSA9IFtdXG4gICAgKTogUHJvbWlzZTxYUlNlc3Npb24+IHtcbiAgICAgICAgcmV0dXJuIGNoZWNrWFJTdXBwb3J0KCkudGhlbigoKSA9PlxuICAgICAgICAgICAgdGhpcy4jd2FzbS53ZWJ4cl9yZXF1ZXN0U2Vzc2lvbihtb2RlLCBmZWF0dXJlcywgb3B0aW9uYWxGZWF0dXJlcylcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPZmZlciBhbiBYUiBzZXNzaW9uLlxuICAgICAqXG4gICAgICogQWRkcyBhbiBpbnRlcmFjdGl2ZSBVSSBlbGVtZW50IHRvIHRoZSBicm93c2VyIGludGVyZmFjZSB0byBzdGFydCBhbiBYUlxuICAgICAqIHNlc3Npb24uIEJyb3dzZXIgc3VwcG9ydCBpcyBvcHRpb25hbCwgc28gaXQncyBhZHZpc2VkIHRvIHN0aWxsIGFsbG93XG4gICAgICogcmVxdWVzdGluZyBhIHNlc3Npb24gd2l0aCBhIFVJIGVsZW1lbnQgb24gdGhlIHdlYnNpdGUgaXRzZWxmLlxuICAgICAqXG4gICAgICogQG5vdGUgUGxlYXNlIHVzZSB0aGlzIGNhbGwgaW5zdGVhZCBvZiBkaXJlY3RseSBjYWxsaW5nIGBuYXZpZ2F0b3IueHIub2ZmZXJTZXNzaW9uKClgLlxuICAgICAqIFdvbmRlcmxhbmQgRW5naW5lIHJlcXVpcmVzIHRvIGJlIGF3YXJlIHRoYXQgYSBzZXNzaW9uIGlzIHN0YXJ0ZWQsIGFuZCB0aGlzXG4gICAgICogaXMgZG9uZSB0aHJvdWdoIHRoaXMgY2FsbC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtb2RlIFRoZSBYUiBtb2RlLlxuICAgICAqIEBwYXJhbSBmZWF0dXJlcyBBbiBhcnJheSBvZiByZXF1aXJlZCBmZWF0dXJlcywgZS5nLiwgYFsnbG9jYWwtZmxvb3InLCAnaGl0LXRlc3QnXWAuXG4gICAgICogQHBhcmFtIG9wdGlvbmFsRmVhdHVyZXMgQW4gYXJyYXkgb2Ygb3B0aW9uYWwgZmVhdHVyZXMsIGUuZy4sIGBbJ2JvdW5kZWQtZmxvb3InLCAnZGVwdGgtc2Vuc2luZyddYC5cbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgcmVzb2x2aW5nIHdpdGggdGhlIGBYUlNlc3Npb25gLCBhIHN0cmluZyBlcnJvciBtZXNzYWdlIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjEuNVxuICAgICAqL1xuICAgIG9mZmVyWFJTZXNzaW9uKFxuICAgICAgICBtb2RlOiBYUlNlc3Npb25Nb2RlLFxuICAgICAgICBmZWF0dXJlczogc3RyaW5nW10sXG4gICAgICAgIG9wdGlvbmFsRmVhdHVyZXM6IHN0cmluZ1tdID0gW11cbiAgICApOiBQcm9taXNlPFhSU2Vzc2lvbj4ge1xuICAgICAgICByZXR1cm4gY2hlY2tYUlN1cHBvcnQoKS50aGVuKCgpID0+XG4gICAgICAgICAgICB0aGlzLiN3YXNtLndlYnhyX29mZmVyU2Vzc2lvbihtb2RlLCBmZWF0dXJlcywgb3B0aW9uYWxGZWF0dXJlcylcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXcmFwIGFuIG9iamVjdCBJRCB1c2luZyB7QGxpbmsgT2JqZWN0fS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgbWV0aG9kIHBlcmZvcm1zIGNhY2hpbmcgYW5kIHdpbGwgcmV0dXJuIHRoZSBzYW1lXG4gICAgICogaW5zdGFuY2Ugb24gc3Vic2VxdWVudCBjYWxscy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvYmplY3RJZCBJRCBvZiB0aGUgb2JqZWN0IHRvIGNyZWF0ZS5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgU2NlbmUjd3JhcH0gaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBvYmplY3RcbiAgICAgKi9cbiAgICB3cmFwT2JqZWN0KG9iamVjdElkOiBudW1iZXIpOiBPYmplY3QzRCB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjZW5lLndyYXAob2JqZWN0SWQpO1xuICAgIH1cblxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gJ2VuZ2luZSc7XG4gICAgfVxuXG4gICAgLyogUHVibGljIEdldHRlcnMgJiBTZXR0ZXIgKi9cblxuICAgIC8qKiBDdXJyZW50bHkgYWN0aXZlIHNjZW5lLiAqL1xuICAgIGdldCBzY2VuZSgpOiBTY2VuZSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zY2VuZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXZWJBc3NlbWJseSBicmlkZ2UuXG4gICAgICpcbiAgICAgKiBAbm90ZSBVc2Ugd2l0aCBjYXJlLiBUaGlzIG9iamVjdCBpcyB1c2VkIHRvIGNvbW11bmljYXRlXG4gICAgICogd2l0aCB0aGUgV2ViQXNzZW1ibHkgY29kZSB0aHJvdWdob3V0IHRoZSBhcGkuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZ2V0IHdhc20oKTogV0FTTSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN3YXNtO1xuICAgIH1cblxuICAgIC8qKiBDYW52YXMgZWxlbWVudCB0aGF0IFdvbmRlcmxhbmQgRW5naW5lIHJlbmRlcnMgdG8uICovXG4gICAgZ2V0IGNhbnZhcygpOiBIVE1MQ2FudmFzRWxlbWVudCB7XG4gICAgICAgIHJldHVybiB0aGlzLiN3YXNtLmNhbnZhcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDdXJyZW50IFdlYlhSIHNlc3Npb24gb3IgYG51bGxgIGlmIG5vIHNlc3Npb24gYWN0aXZlLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayBYUi5zZXNzaW9ufSBvbiB0aGUge0BsaW5rIHhyfVxuICAgICAqIG9iamVjdCBpbnN0ZWFkLlxuICAgICAqL1xuICAgIGdldCB4clNlc3Npb24oKTogWFJTZXNzaW9uIHwgbnVsbCB7XG4gICAgICAgIHJldHVybiB0aGlzLnhyPy5zZXNzaW9uID8/IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3VycmVudCBXZWJYUiBmcmFtZSBvciBgbnVsbGAgaWYgbm8gc2Vzc2lvbiBhY3RpdmUuXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIFhSLmZyYW1lfSBvbiB0aGUge0BsaW5rIHhyfVxuICAgICAqIG9iamVjdCBpbnN0ZWFkLlxuICAgICAqL1xuICAgIGdldCB4ckZyYW1lKCk6IFhSRnJhbWUgfCBudWxsIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueHI/LmZyYW1lID8/IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3VycmVudCBXZWJYUiBiYXNlIGxheWVyIG9yIGBudWxsYCBpZiBubyBzZXNzaW9uIGFjdGl2ZS5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgWFIuYmFzZUxheWVyfSBvbiB0aGUge0BsaW5rIHhyfVxuICAgICAqIG9iamVjdCBpbnN0ZWFkLlxuICAgICAqL1xuICAgIGdldCB4ckJhc2VMYXllcigpOiBYUlByb2plY3Rpb25MYXllciB8IG51bGwge1xuICAgICAgICByZXR1cm4gdGhpcy54cj8uYmFzZUxheWVyID8/IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3VycmVudCBXZWJYUiBmcmFtZWJ1ZmZlciBvciBgbnVsbGAgaWYgbm8gc2Vzc2lvbiBhY3RpdmUuXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIFhSLmZyYW1lYnVmZmVyc30gb24gdGhlXG4gICAgICoge0BsaW5rIHhyfSBvYmplY3QgaW5zdGVhZC5cbiAgICAgKi9cbiAgICBnZXQgeHJGcmFtZWJ1ZmZlcigpOiBXZWJHTEZyYW1lYnVmZmVyIHwgbnVsbCB7XG4gICAgICAgIHJldHVybiB0aGlzLnhyPy5mcmFtZWJ1ZmZlcnNbMF0gPz8gbnVsbDtcbiAgICB9XG5cbiAgICAvKiogRnJhbWVidWZmZXIgc2NhbGUgZmFjdG9yLiAqL1xuICAgIGdldCB4ckZyYW1lYnVmZmVyU2NhbGVGYWN0b3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN3YXNtLndlYnhyX2ZyYW1lYnVmZmVyU2NhbGVGYWN0b3I7XG4gICAgfVxuXG4gICAgc2V0IHhyRnJhbWVidWZmZXJTY2FsZUZhY3Rvcih2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgICh0aGlzLiN3YXNtLndlYnhyX2ZyYW1lYnVmZmVyU2NhbGVGYWN0b3IgYXMgbnVtYmVyKSA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKiBQaHlzaWNzIG1hbmFnZXIsIG9ubHkgYXZhaWxhYmxlIHdoZW4gcGh5c3ggaXMgZW5hYmxlZCBpbiB0aGUgcnVudGltZS4gKi9cbiAgICBnZXQgcGh5c2ljcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3BoeXNpY3M7XG4gICAgfVxuXG4gICAgLyoqIFRleHR1cmUgcmVzb3VyY2VzICovXG4gICAgZ2V0IHRleHR1cmVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGV4dHVyZXM7XG4gICAgfVxuXG4gICAgLyoqIE1hdGVyaWFsIHJlc291cmNlcyAqL1xuICAgIGdldCBtYXRlcmlhbHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXRlcmlhbHM7XG4gICAgfVxuXG4gICAgLyoqIE1lc2ggcmVzb3VyY2VzICovXG4gICAgZ2V0IG1lc2hlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21lc2hlcztcbiAgICB9XG5cbiAgICAvKiogTW9ycGggdGFyZ2V0IHNldCByZXNvdXJjZXMgKi9cbiAgICBnZXQgbW9ycGhUYXJnZXRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbW9ycGhUYXJnZXRzO1xuICAgIH1cblxuICAgIC8qKiBGb250IHJlc291cmNlcyAqL1xuICAgIGdldCBmb250cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZvbnRzO1xuICAgIH1cblxuICAgIC8qKiBHZXQgYWxsIHVuY29tcHJlc3NlZCBpbWFnZXMuICovXG4gICAgZ2V0IGltYWdlcygpOiBJbWFnZUxpa2VbXSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLndhc207XG4gICAgICAgIGNvbnN0IG1heCA9IHdhc20uX3RlbXBNZW1TaXplID4+IDE7XG4gICAgICAgIGNvbnN0IGNvdW50ID0gd2FzbS5fd2xfZ2V0X2ltYWdlcyh3YXNtLl90ZW1wTWVtLCBtYXgpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgQXJyYXkoY291bnQpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gd2FzbS5fdGVtcE1lbVVpbnQxNltpXTtcbiAgICAgICAgICAgIHJlc3VsdFtpXSA9IHdhc20uX2ltYWdlc1tpbmRleF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm9taXNlIHRoYXQgcmVzb2x2ZSBvbmNlIGFsbCB1bmNvbXByZXNzZWQgaW1hZ2VzIGFyZSBsb2FkZWQuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gY2FsbGluZyB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5pbWFnZXN9LCBhbmQgd3JhcHBpbmcgZWFjaFxuICAgICAqIGBsb2FkYCBsaXN0ZW5lciBpbnRvIGEgcHJvbWlzZS5cbiAgICAgKi9cbiAgICBnZXQgaW1hZ2VzUHJvbWlzZSgpOiBQcm9taXNlPEltYWdlTGlrZVtdPiB7XG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gdGhpcy5pbWFnZXMubWFwKChpKSA9PiBvbkltYWdlUmVhZHkoaSkpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGB0cnVlYCBpZiB0aGUgdGV4dHVyZSBzdHJlYW1pbmcgaXMgY3VycmVudGx5IGlkbGUsIGkuZS4sXG4gICAgICogbm90IGF0dGVtcHRpbmcgdG8gdXBsb2FkIGFueSB0ZXh0dXJlcy5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBnZXQgaXNUZXh0dXJlU3RyZWFtaW5nSWRsZSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy53YXNtLl93bF9yZW5kZXJlcl9zdHJlYW1pbmdfaWRsZSgpO1xuICAgIH1cblxuICAgIC8qXG4gICAgICogRW5hYmxlIG9yIGRpc2FibGUgdGhlIG1lY2hhbmlzbSB0byBhdXRvbWF0aWNhbGx5IHJlc2l6ZSB0aGUgY2FudmFzLlxuICAgICAqXG4gICAgICogSW50ZXJuYWxseSwgdGhlIGVuZ2luZSB1c2VzIGEgW1Jlc2l6ZU9ic2VydmVyXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvUmVzaXplT2JzZXJ2ZXIpLlxuICAgICAqIENoYW5naW5nIHRoZSBjYW52YXMgY3NzIHdpbGwgdGh1cyBhdXRvbWF0aWNhbGx5IGJlIHRyYWNrZWQgYnkgdGhlIGVuZ2luZS5cbiAgICAgKi9cbiAgICBzZXQgYXV0b1Jlc2l6ZUNhbnZhcyhmbGFnOiBib29sZWFuKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gISF0aGlzLiNyZXNpemVPYnNlcnZlcjtcbiAgICAgICAgaWYgKHN0YXRlID09PSBmbGFnKSByZXR1cm47XG5cbiAgICAgICAgaWYgKCFmbGFnKSB7XG4gICAgICAgICAgICB0aGlzLiNyZXNpemVPYnNlcnZlcj8udW5vYnNlcnZlKHRoaXMuY2FudmFzKTtcbiAgICAgICAgICAgIHRoaXMuI3Jlc2l6ZU9ic2VydmVyID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNyZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcigoZW50cmllcykgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5LnRhcmdldCA9PT0gdGhpcy5jYW52YXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNpemUoZW50cnkuY29udGVudFJlY3Qud2lkdGgsIGVudHJ5LmNvbnRlbnRSZWN0LmhlaWdodCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jcmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLmNhbnZhcyk7XG4gICAgfVxuXG4gICAgLyoqIGB0cnVlYCBpZiB0aGUgY2FudmFzIGlzIGF1dG9tYXRpY2FsbHkgcmVzaXplZCBieSB0aGUgZW5naW5lLiAqL1xuICAgIGdldCBhdXRvUmVzaXplQ2FudmFzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jcmVzaXplT2JzZXJ2ZXIgIT09IG51bGw7XG4gICAgfVxuXG4gICAgLyoqIFJldHJpZXZlcyB0aGUgcnVudGltZSB2ZXJzaW9uLiAqL1xuICAgIGdldCBydW50aW1lVmVyc2lvbigpOiBWZXJzaW9uIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuI3dhc207XG4gICAgICAgIHdhc20uX3dsX2FwcGxpY2F0aW9uX3ZlcnNpb24od2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtYWpvcjogd2FzbS5fdGVtcE1lbVVpbnQxNlswXSxcbiAgICAgICAgICAgIG1pbm9yOiB3YXNtLl90ZW1wTWVtVWludDE2WzFdLFxuICAgICAgICAgICAgcGF0Y2g6IHdhc20uX3RlbXBNZW1VaW50MTZbMl0sXG4gICAgICAgICAgICByYzogd2FzbS5fdGVtcE1lbVVpbnQxNlszXSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKiogRW5naW5lIHtAbGluayBMb2dnZXJ9LiBVc2UgaXQgdG8gdHVybiBvbiAvIG9mZiBsb2dnaW5nLiAqL1xuICAgIGdldCBsb2coKTogTG9nZ2VyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3dhc20uX2xvZztcbiAgICB9XG5cbiAgICAvKiBJbnRlcm5hbC1Pbmx5IE1ldGhvZHMgKi9cblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgdGhlIGVuZ2luZS5cbiAgICAgKlxuICAgICAqIEBub3RlIFNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgdGhlIFdlYkFzc2VtYmx5IGlzIGZ1bGx5IGxvYWRlZC5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfaW5pdCgpIHtcbiAgICAgICAgLyogRm9yY2UgdGhlIHJlZmVyZW5jZSBzcGFjZSB0byAnbG9jYWwnLyd2aWV3ZXInIGZvciB0aGUgbG9hZGluZyBzY3JlZW5cbiAgICAgICAgICogdG8gbWFrZSBzdXJlIHRoZSBoZWFkIGlucHV0IGlzIGF0IHRoZSBvcmlnaW4uIERvaW5nIGl0IHRoaXMgd2F5IHRvXG4gICAgICAgICAqIGF2b2lkIGFkZGluZyBKUyBjb21wb25lbnRzIHRvIHRoZSBsb2FkaW5nIHNjcmVlbi4gKi9cbiAgICAgICAgY29uc3Qgb25YUlN0YXJ0ID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy4jaW5pdGlhbFJlZmVyZW5jZVNwYWNlVHlwZSA9IHRoaXMueHIhLmN1cnJlbnRSZWZlcmVuY2VTcGFjZVR5cGU7XG4gICAgICAgICAgICBjb25zdCBuZXdTcGFjZSA9XG4gICAgICAgICAgICAgICAgdGhpcy54ciEucmVmZXJlbmNlU3BhY2VGb3JUeXBlKCdsb2NhbCcpID8/XG4gICAgICAgICAgICAgICAgdGhpcy54ciEucmVmZXJlbmNlU3BhY2VGb3JUeXBlKCd2aWV3ZXInKTtcbiAgICAgICAgICAgIHRoaXMueHIhLmN1cnJlbnRSZWZlcmVuY2VTcGFjZSA9IG5ld1NwYWNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qIE5vdCBvbmNlKCkgYmVjYXVzZSB0aGUgdXNlciBjYW4gZW50ZXIgYW5kIGV4aXQgWFIgc2V2ZXJhbCB0aW1lc1xuICAgICAgICAgKiBkdXJpbmcgYSBsb25nIGxvYWRpbmcgc2NyZWVuICovXG4gICAgICAgIHRoaXMub25YUlNlc3Npb25TdGFydC5hZGQob25YUlN0YXJ0KTtcblxuICAgICAgICAvKiBUaGlzIGlzIGNhbGxlZCBiZWZvcmUgYWxsIGluaXQoKS9zdGFydCgpL29uQWN0aXZhdGUoKSBzbyB3ZSBhdm9pZFxuICAgICAgICAgKiBvdmVyd3JpdGluZyBhIHVzZXItc2V0IHJlZmVyZW5jZSBzcGFjZSAqL1xuICAgICAgICB0aGlzLm9uTG9hZGluZ1NjcmVlbkVuZC5vbmNlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25YUlNlc3Npb25TdGFydC5yZW1vdmUob25YUlN0YXJ0KTtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLnhyIHx8ICF0aGlzLiNpbml0aWFsUmVmZXJlbmNlU3BhY2VUeXBlKSByZXR1cm47XG5cbiAgICAgICAgICAgIHRoaXMueHIuY3VycmVudFJlZmVyZW5jZVNwYWNlID1cbiAgICAgICAgICAgICAgICB0aGlzLnhyLnJlZmVyZW5jZVNwYWNlRm9yVHlwZSh0aGlzLiNpbml0aWFsUmVmZXJlbmNlU3BhY2VUeXBlKSA/P1xuICAgICAgICAgICAgICAgIHRoaXMueHIucmVmZXJlbmNlU3BhY2VGb3JUeXBlKCd2aWV3ZXInKTtcbiAgICAgICAgICAgIHRoaXMuI2luaXRpYWxSZWZlcmVuY2VTcGFjZVR5cGUgPSBudWxsO1xuICAgICAgICB9KTtcblxuICAgICAgICAvKiBTZXR1cCB0aGUgZXJyb3IgaGFuZGxlci4gVGhpcyBpcyB1c2VkIHRvIHRvIG1hbmFnZSBuYXRpdmUgZXJyb3JzLiAqL1xuICAgICAgICB0aGlzLiN3YXNtLl93bF9zZXRfZXJyb3JfY2FsbGJhY2soXG4gICAgICAgICAgICB0aGlzLiN3YXNtLmFkZEZ1bmN0aW9uKChtZXNzYWdlUHRyOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IodGhpcy4jd2FzbS5VVEY4VG9TdHJpbmcobWVzc2FnZVB0cikpO1xuICAgICAgICAgICAgfSwgJ3ZpJylcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLiNwaHlzaWNzID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuI3dhc20ud2l0aFBoeXNYKSB7XG4gICAgICAgICAgICAvKiBTZXR1cCB0aGUgcGh5c2ljcyBjYWxsYmFjay4gKi9cbiAgICAgICAgICAgIGNvbnN0IHBoeXNpY3MgPSBuZXcgUGh5c2ljcyh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuI3dhc20uX3dsX3BoeXN4X3NldF9jb2xsaXNpb25fY2FsbGJhY2soXG4gICAgICAgICAgICAgICAgdGhpcy4jd2FzbS5hZGRGdW5jdGlvbihcbiAgICAgICAgICAgICAgICAgICAgKGE6IG51bWJlciwgaW5kZXg6IG51bWJlciwgdHlwZTogbnVtYmVyLCBiOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBoeXN4QSA9IHRoaXMuc2NlbmUuX2NvbXBvbmVudHMud3JhcFBoeXN4KGEpITtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBoeXN4QiA9IHRoaXMuc2NlbmUuX2NvbXBvbmVudHMud3JhcFBoeXN4KGIpITtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFdlIGFzc3VtZSB0aGF0IHRoZSBtYXAgcmV0dXJucyBhbiBhcnJheS4gSWYgbm90LFxuICAgICAgICAgICAgICAgICAgICAgICAgICogdGhpcyBpcyBhbiBpbnRlcm5hbCBlbmdpbmUgZXJyb3IuICovXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWxsYmFja3MgPSB0aGlzLnNjZW5lLl9weENhbGxiYWNrcy5nZXQocGh5c3hBLl9pZCkhO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FsbGJhY2sgPSBjYWxsYmFja3NbaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sodHlwZSwgcGh5c3hCIGFzIFBoeXNYQ29tcG9uZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ3ZpaWlpJ1xuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLiNwaHlzaWNzID0gcGh5c2ljcztcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVzaXplKHRoaXMuY2FudmFzLmNsaWVudFdpZHRoLCB0aGlzLmNhbnZhcy5jbGllbnRIZWlnaHQpO1xuICAgICAgICB0aGlzLl9zY2VuZSA9IHRoaXMuX3JlbG9hZCgwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNldCB0aGUgcnVudGltZSBzdGF0ZSwgaW5jbHVkaW5nOlxuICAgICAqICAgICAtIENvbXBvbmVudCBjYWNoZVxuICAgICAqICAgICAtIEltYWdlc1xuICAgICAqICAgICAtIENhbGxiYWNrc1xuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9yZXNldCgpIHtcbiAgICAgICAgdGhpcy53YXNtLnJlc2V0KCk7XG4gICAgICAgIHRoaXMuX3NjZW5lcy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLl9zY2VuZSA9IHRoaXMuX3JlbG9hZCgwKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3dpdGNoVG8odGhpcy5fc2NlbmUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhbiBlbXB0eSBzY2VuZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBuZXdseSBjcmVhdGVkIHNjZW5lXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX2NyZWF0ZUVtcHR5KCk6IFNjZW5lIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMud2FzbTtcbiAgICAgICAgY29uc3QgaW5kZXggPSB3YXNtLl93bF9zY2VuZV9jcmVhdGVfZW1wdHkoKTtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBuZXcgU2NlbmUodGhpcywgaW5kZXgpO1xuICAgICAgICB0aGlzLl9zY2VuZXNbaW5kZXhdID0gc2NlbmU7XG4gICAgICAgIHJldHVybiBzY2VuZTtcbiAgICB9XG5cbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIF9kZXN0cm95U2NlbmUoaW5zdGFuY2U6IFByZWZhYikge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy53YXNtO1xuICAgICAgICB3YXNtLl93bF9zY2VuZV9kZXN0cm95KGluc3RhbmNlLl9pbmRleCk7XG5cbiAgICAgICAgY29uc3QgaW5kZXggPSBpbnN0YW5jZS5faW5kZXg7XG4gICAgICAgIChpbnN0YW5jZS5faW5kZXggYXMgbnVtYmVyKSA9IC0xO1xuICAgICAgICBpZiAodGhpcy5lcmFzZVByb3RvdHlwZU9uRGVzdHJveSkge1xuICAgICAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGluc3RhbmNlLCBEZXN0cm95ZWRQcmVmYWJJbnN0YW5jZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9zY2VuZXNbaW5kZXhdID0gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWxvYWQgdGhlIHN0YXRlIG9mIHRoZSBlbmdpbmUgd2l0aCBhIG5ldyBtYWluIHNjZW5lLlxuICAgICAqXG4gICAgICogQHBhcmFtIGluZGV4IFNjZW5lIGluZGV4LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHByaXZhdGUgX3JlbG9hZChpbmRleDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gbmV3IFNjZW5lKHRoaXMsIGluZGV4KTtcbiAgICAgICAgdGhpcy5fc2NlbmVzW2luZGV4XSA9IHNjZW5lO1xuXG4gICAgICAgIHRoaXMuX3RleHR1cmVzID0gbmV3IFRleHR1cmVNYW5hZ2VyKHRoaXMpO1xuICAgICAgICB0aGlzLl9tYXRlcmlhbHMgPSBuZXcgTWF0ZXJpYWxNYW5hZ2VyKHRoaXMpO1xuICAgICAgICB0aGlzLl9tZXNoZXMgPSBuZXcgTWVzaE1hbmFnZXIodGhpcyk7XG4gICAgICAgIHRoaXMuX21vcnBoVGFyZ2V0cyA9IG5ldyBSZXNvdXJjZU1hbmFnZXIodGhpcywgTW9ycGhUYXJnZXRzKTtcbiAgICAgICAgdGhpcy5fZm9udHMgPSBuZXcgUmVzb3VyY2VNYW5hZ2VyKHRoaXMsIEZvbnQpO1xuXG4gICAgICAgIHJldHVybiBzY2VuZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgdG8gbG9hZCBhIG1haW4gc2NlbmUgZnJvbSBhbiBgQXJyYXlCdWZmZXJgIG9yIGBSZWFkYWJsZVN0cmVhbWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0YSBCdWZmZXIgb3Igc3RyZWFtLlxuICAgICAqIEBwYXJhbSB1cmwgQmFzZSBVUkwuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgQWN0aXZhdGlvbiBvcHRpb25zLlxuICAgICAqIEByZXR1cm5zIFRoZSBsb2FkZWQgbWFpbiBzY2VuZS5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIF9sb2FkTWFpblNjZW5lKFxuICAgICAgICBkYXRhOiBBcnJheUJ1ZmZlciB8IFJlYWRhYmxlU3RyZWFtPFVpbnQ4QXJyYXk+LFxuICAgICAgICB1cmw6IHN0cmluZyxcbiAgICAgICAgb3B0aW9uczogQWN0aXZhdGVPcHRpb25zXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLiN3YXNtO1xuXG4gICAgICAgIC8qXG4gICAgICAgICAqIC0gRGVhY3RpdmF0ZSBjdXJyZW50bHkgYWN0aXZlIHNjZW5lXG4gICAgICAgICAqIC0gRGVzdHJveSBhbGwgc2NlbmVzXG4gICAgICAgICAqIC0gTWFyayBhbGwgcmVzb3VyY2VzIGFzIGRlc3Ryb3llZFxuICAgICAgICAgKiAtIEFjdGl2YXRpb24gb2YgbWFpbiBzY2VuZSB0byBwcmV2ZW50IHRoZSBydW50aW1lIHRvIGJlIGluIGxpbWJvXG4gICAgICAgICAqL1xuXG4gICAgICAgIHdhc20uX3dsX2RlYWN0aXZhdGVfYWN0aXZlU2NlbmUoKTtcblxuICAgICAgICAvKiBPbmx5IGRlc3Ryb3kgYWxsIHNjZW5lIG9uY2UgdGhlIGN1cnJlbnQgYWN0aXZlIG9uZSBpcyBkaXNhYmxlZCAqL1xuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5fc2NlbmVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMuX3NjZW5lc1tpXTtcbiAgICAgICAgICAgIGlmIChzY2VuZSkgc2NlbmUuZGVzdHJveSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogTWFyayBhbGwgcmVzb3VyY2VzIGFzIGRlc3Ryb3llZCAqL1xuICAgICAgICB0aGlzLl90ZXh0dXJlcy5fY2xlYXIoKTtcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWxzLl9jbGVhcigpO1xuICAgICAgICB0aGlzLl9tZXNoZXMuX2NsZWFyKCk7XG4gICAgICAgIHRoaXMuX21vcnBoVGFyZ2V0cy5fY2xlYXIoKTtcblxuICAgICAgICBsZXQgaW5kZXggPSAtMTtcbiAgICAgICAgaWYgKHRoaXMuX2NhblVzZUNodW5rTG9hZGluZygpKSB7XG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPVxuICAgICAgICAgICAgICAgIGRhdGEgaW5zdGFuY2VvZiBSZWFkYWJsZVN0cmVhbVxuICAgICAgICAgICAgICAgICAgICA/IGRhdGFcbiAgICAgICAgICAgICAgICAgICAgOiBuZXcgUmVhZGFibGVTdHJlYW0obmV3IEFycmF5QnVmZmVyU291cmNlKGRhdGEpKTtcbiAgICAgICAgICAgIGNvbnN0IHNpbmsgPSBuZXcgQ2h1bmtlZFNjZW5lTG9hZFNpbmsodGhpcywgU2NlbmVUeXBlLk1haW4sIHVybCk7XG4gICAgICAgICAgICBhd2FpdCBzdHJlYW0ucGlwZVRvKG5ldyBXcml0YWJsZVN0cmVhbShzaW5rKSk7XG4gICAgICAgICAgICBpbmRleCA9IHNpbmsuc2NlbmVJbmRleDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBidWZmZXI6IEFycmF5QnVmZmVyO1xuICAgICAgICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBSZWFkYWJsZVN0cmVhbSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNpbmsgPSBuZXcgQXJyYXlCdWZmZXJTaW5rKCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgZGF0YS5waXBlVG8obmV3IFdyaXRhYmxlU3RyZWFtKHNpbmspKTtcbiAgICAgICAgICAgICAgICBidWZmZXIgPSBzaW5rLmFycmF5QnVmZmVyO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBidWZmZXIgPSBkYXRhO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBwdHIgPSB3YXNtLmNvcHlCdWZmZXJUb0hlYXAoYnVmZmVyKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSB3YXNtLl93bF9sb2FkX21haW5fc2NlbmUoXG4gICAgICAgICAgICAgICAgICAgIHB0cixcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyLmJ5dGVMZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgIHdhc20udGVtcFVURjgodXJsKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIC8qIENhdGNoIGNhbGxzIHRvIGFib3J0KCksIGUuZy4gdmlhIGFzc2VydHMgKi9cbiAgICAgICAgICAgICAgICB3YXNtLl9mcmVlKHB0cik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGxvYWQgbWFpbiBzY2VuZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWFpblNjZW5lID0gdGhpcy5fcmVsb2FkKGluZGV4KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0b2RvKDIuMC4wKVxuICAgICAgICAgKlxuICAgICAgICAgKiBCYWNrd2FyZCBjb21wYXRpYmlsaXR5OiBXZSBuZWVkIHRvIHNldCB0aGlzIGluc3RhbmNlIHJlZmVyZW5jZSBvbiB0aGVcbiAgICAgICAgICogZW5naW5lICoqYmVmb3JlKiogY29tcG9uZW50IGNyZWF0aW9uIG9jY3Vycywgc2luY2UgdXNlcnMgaGF2ZSBiZWVuIGFjY2Vzc2luZ1xuICAgICAgICAgKiB0aGUgc2NlbmUgd2l0aCBgdGhpcy5lbmdpbmUuc2NlbmVgIGluIGBpbml0KClgLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fcHJlYWN0aXZhdGUobWFpblNjZW5lKTtcbiAgICAgICAgbWFpblNjZW5lLl9pbml0aWFsaXplKCk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5zd2l0Y2hUbyhtYWluU2NlbmUsIG9wdGlvbnMpO1xuXG4gICAgICAgIHJldHVybiBtYWluU2NlbmU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGVscGVyIHRvIGxvYWQgcHJlZmFiIGFuZCBhY3RpdmF0YWJsZSBzY2VuZSBmcm9tIGFuIGBBcnJheUJ1ZmZlcmAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gUHJlZmFiQ2xhc3MgU2NlbmUgY29uc3RydWN0b3IuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgTG9hZGluZyBvcHRpb25zLlxuICAgICAqIEByZXR1cm5zIFRoZSBsb2FkZWQgcHJlZmFiLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHByaXZhdGUgX2xvYWRTY2VuZUZyb21CdWZmZXI8VCBleHRlbmRzIFByZWZhYj4oXG4gICAgICAgIFByZWZhYkNsYXNzOiBDb25zdHJ1Y3RvcjxUPixcbiAgICAgICAgb3B0aW9uczogSW5NZW1vcnlMb2FkT3B0aW9uc1xuICAgICkge1xuICAgICAgICBjb25zdCB7YnVmZmVyLCB1cmx9ID0gU2NlbmUudmFsaWRhdGVCdWZmZXJPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICBsZXQgaW5kZXggPSAtMTtcblxuICAgICAgICBpZiAodGhpcy5fY2FuVXNlQ2h1bmtMb2FkaW5nKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNpbmsgPSBuZXcgQ2h1bmtlZFNjZW5lTG9hZFNpbmsodGhpcywgU2NlbmVUeXBlLlByZWZhYiwgdXJsKTtcbiAgICAgICAgICAgIHNpbmsud3JpdGUobmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSk7XG4gICAgICAgICAgICBzaW5rLmNsb3NlKCk7XG4gICAgICAgICAgICBpbmRleCA9IHNpbmsuc2NlbmVJbmRleDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLndhc207XG4gICAgICAgICAgICBjb25zdCBwdHIgPSB3YXNtLmNvcHlCdWZmZXJUb0hlYXAoYnVmZmVyKTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IHdhc20uX3dsX3NjZW5lX2NyZWF0ZShwdHIsIGJ1ZmZlci5ieXRlTGVuZ3RoLCB3YXNtLnRlbXBVVEY4KHVybCkpO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAvKiBDYXRjaCBjYWxscyB0byBhYm9ydCgpLCBlLmcuIHZpYSBhc3NlcnRzICovXG4gICAgICAgICAgICAgICAgd2FzbS5fZnJlZShwdHIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWluZGV4KSB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSBzY2VuZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogVGhlIHNjZW5lIHdhcyBzdWNjZXNzZnVsbHkgbG9hZGVkIG9uIHRoZSB3YXNtIHNpZGUsIHdlIG5lZWQgdG9cbiAgICAgICAgICogYWRkIGl0IHRvIHRoZSBzY2VuZSBjYWNoZSwgc2luY2UgdGhlIHdhc20gbWlnaHQgcmVhZCBpdC4gKi9cbiAgICAgICAgY29uc3Qgc2NlbmUgPSBuZXcgUHJlZmFiQ2xhc3ModGhpcywgaW5kZXgpO1xuICAgICAgICB0aGlzLl9zY2VuZXNbaW5kZXhdID0gc2NlbmU7XG4gICAgICAgIHJldHVybiBzY2VuZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgdG8gbG9hZCBwcmVmYWIgYW5kIGFjdGl2YXRhYmxlIHNjZW5lIGZyb20gYSBgUmVhZGFibGVTdHJlYW1gLlxuICAgICAqXG4gICAgICogQHBhcmFtIFByZWZhYkNsYXNzIFNjZW5lIGNvbnN0cnVjdG9yLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIExvYWRpbmcgb3B0aW9ucy5cbiAgICAgKiBAcmV0dXJucyBUaGUgbG9hZGVkIHByZWZhYi5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIF9sb2FkU2NlbmVGcm9tU3RyZWFtPFQgZXh0ZW5kcyBQcmVmYWI+KFxuICAgICAgICBQcmVmYWJDbGFzczogQ29uc3RydWN0b3I8VD4sXG4gICAgICAgIG9wdGlvbnM6IFN0cmVhbUxvYWRPcHRpb25zXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IHtzdHJlYW0sIHVybH0gPSBTY2VuZS52YWxpZGF0ZVN0cmVhbU9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIGxldCBpbmRleCA9IC0xO1xuXG4gICAgICAgIGlmICh0aGlzLl9jYW5Vc2VDaHVua0xvYWRpbmcoKSkge1xuICAgICAgICAgICAgY29uc3Qgc2luayA9IG5ldyBDaHVua2VkU2NlbmVMb2FkU2luayh0aGlzLCBTY2VuZVR5cGUuUHJlZmFiLCB1cmwpO1xuICAgICAgICAgICAgYXdhaXQgc3RyZWFtLnBpcGVUbyhuZXcgV3JpdGFibGVTdHJlYW0oc2luaykpO1xuICAgICAgICAgICAgaW5kZXggPSBzaW5rLnNjZW5lSW5kZXg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBzaW5rID0gbmV3IEFycmF5QnVmZmVyU2luaygpO1xuICAgICAgICAgICAgYXdhaXQgc3RyZWFtLnBpcGVUbyhuZXcgV3JpdGFibGVTdHJlYW0oc2luaykpO1xuICAgICAgICAgICAgY29uc3QgYnVmZmVyID0gc2luay5hcnJheUJ1ZmZlcjtcblxuICAgICAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMud2FzbTtcbiAgICAgICAgICAgIGNvbnN0IHB0ciA9IHdhc20uY29weUJ1ZmZlclRvSGVhcChidWZmZXIpO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gd2FzbS5fd2xfc2NlbmVfY3JlYXRlKHB0ciwgYnVmZmVyLmJ5dGVMZW5ndGgsIHdhc20udGVtcFVURjgodXJsKSk7XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIC8qIENhdGNoIGNhbGxzIHRvIGFib3J0KCksIGUuZy4gdmlhIGFzc2VydHMgKi9cbiAgICAgICAgICAgICAgICB3YXNtLl9mcmVlKHB0cik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghaW5kZXgpIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHBhcnNlIHNjZW5lJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBUaGUgc2NlbmUgd2FzIHN1Y2Nlc3NmdWxseSBsb2FkZWQgb24gdGhlIHdhc20gc2lkZSwgd2UgbmVlZCB0b1xuICAgICAgICAgKiBhZGQgaXQgdG8gdGhlIHNjZW5lIGNhY2hlLCBzaW5jZSB0aGUgd2FzbSBtaWdodCByZWFkIGl0LiAqL1xuICAgICAgICBjb25zdCBzY2VuZSA9IG5ldyBQcmVmYWJDbGFzcyh0aGlzLCBpbmRleCk7XG4gICAgICAgIHRoaXMuX3NjZW5lc1tpbmRleF0gPSBzY2VuZTtcbiAgICAgICAgcmV0dXJuIHNjZW5lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGUgbG9hZGVkIHNjZW5lIGlzIGEgcHJlZmFiIGFuZCB0aHJvd3MgYW4gZXJyb3IgaWYgbm90LlxuICAgICAqXG4gICAgICogQHBhcmFtIHNjZW5lIFRoZSBsb2FkZWQgc2NlbmVcbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBwcml2YXRlIF92YWxpZGF0ZUxvYWRlZFByZWZhYihzY2VuZTogUHJlZmFiKSB7XG4gICAgICAgIGlmICh0aGlzLndhc20uX3dsX3NjZW5lX2FjdGl2YXRhYmxlKHNjZW5lLl9pbmRleCkpIHtcbiAgICAgICAgICAgIHRoaXMud2FzbS5fd2xfc2NlbmVfZGVzdHJveShzY2VuZS5faW5kZXgpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgICdGaWxlIGlzIG5vdCBhIHByZWZhYi4gVG8gbG9hZCBhIHNjZW5lLCB1c2UgbG9hZFNjZW5lKCkgaW5zdGVhZCdcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIGxvYWRlZCBzY2VuZSBpcyBhIHNjZW5lIChhbmQgbm90IGEgcHJlZmFiKSBhbmQgdGhyb3dzIGFuXG4gICAgICogZXJyb3IgaWYgbm90LlxuICAgICAqXG4gICAgICogQHBhcmFtIHNjZW5lIFRoZSBsb2FkZWQgc2NlbmVcbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBwcml2YXRlIF92YWxpZGF0ZUxvYWRlZFNjZW5lKHNjZW5lOiBTY2VuZSkge1xuICAgICAgICBpZiAoIXRoaXMud2FzbS5fd2xfc2NlbmVfYWN0aXZhdGFibGUoc2NlbmUuX2luZGV4KSkge1xuICAgICAgICAgICAgdGhpcy53YXNtLl93bF9zY2VuZV9kZXN0cm95KHNjZW5lLl9pbmRleCk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgJ0ZpbGUgaXMgbm90IGEgc2NlbmUuIFRvIGxvYWQgYSBwcmVmYWIsIHVzZSBsb2FkUHJlZmFiKCkgaW5zdGVhZCdcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHNjZW5lIGxvYWRpbmcgY2FuIGFuZCBzaG91bGQgZ28gdGhyb3VnaFxuICAgICAqIHtAbGluayBDaHVua2VkU2NlbmVMb2FkU2lua30uXG4gICAgICpcbiAgICAgKiBEZXBlbmRzIG9uIHRoZSBydW50aW1lIHZlcnNpb24gYW5kIHtAbGluayBfdXNlQ2h1bmtMb2FkaW5nfSBvdmVycmlkZS5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfY2FuVXNlQ2h1bmtMb2FkaW5nKCkge1xuICAgICAgICAvKiogQHRvZG8gUmVtb3ZlIG5vbi1jaHVuayBBUEkgaW4gMS4zLjAgZW50aXJlbHkgKi9cbiAgICAgICAgLyogQ2h1bmsgQVBJIGdvdCBhZGRlZCBpbiBydW50aW1lIDEuMi4xICovXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICB0aGlzLl91c2VDaHVua0xvYWRpbmcgJiZcbiAgICAgICAgICAgICh0aGlzLnJ1bnRpbWVWZXJzaW9uLm1pbm9yID4gMiB8fCB0aGlzLnJ1bnRpbWVWZXJzaW9uLnBhdGNoID49IDEpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBzY2VuZSBkYXRhIG9uIHRoZSBlbmdpbmUsIGJlZm9yZSB0aGUgYWN0aXZhdGlvbiBvY2N1cnMuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcHJpdmF0ZSBfcHJlYWN0aXZhdGUoc2NlbmU6IFNjZW5lKSB7XG4gICAgICAgIHRoaXMuX3NjZW5lID0gc2NlbmU7XG4gICAgICAgIC8qIFVwZGF0ZSB0aGUgY3VycmVudCBhY3RpdmUgc2NlbmUgaW4gdGhlIHBoeXN4IG1hbmFnZXIgKi9cbiAgICAgICAgaWYgKHRoaXMucGh5c2ljcykgKHRoaXMucGh5c2ljcy5faGl0Ll9zY2VuZSBhcyBTY2VuZSkgPSBzY2VuZTtcbiAgICB9XG59XG4iLCAiLyoqXG4gKiBBc3NlcnQgdGhhdCB0aGUgZ2l2ZW4gYml0IGluZGV4IGlzIGxlc3MgdGhhbiAzMi5cbiAqXG4gKiBAcGFyYW0gYml0IFRoZSBiaXQgdG8gdGVzdC5cbiAqL1xuZnVuY3Rpb24gYXNzZXJ0KGJpdDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKGJpdCA+PSAzMikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEJpdFNldC5lbmFibGUoKTogVmFsdWUgJHtiaXR9IGlzIG92ZXIgMzFgKTtcbiAgICB9XG59XG5cbi8qKlxuICogU3RvcmVzIGEgYml0IHBhdHRlcm4gdG8gcXVpY2tseSB0ZXN0IGlmIGFuIGluZGV4IGlzIGVuYWJsZWQgLyBkaXNhYmxlZC5cbiAqXG4gKiBUaGlzIGNsYXNzIGNhbiBzdG9yZSB1cCB0byAqKjMyKiogZGlmZmVyZW50IHZhbHVlcyBpbiB0aGUgcmFuZ2UgWzA7IDMxXS5cbiAqXG4gKiAjIyMjIFVzYWdlXG4gKlxuICogYGBganNcbiAqIGNvbnN0IGJpdHNldCA9IG5ldyBCaXRTZXQoKTtcbiAqIGJpdHNldC5lbmFibGUoMTApOyAvLyBFbmFibGUgYml0IGF0IGluZGV4IGAxMGAuXG4gKiBjb25zb2xlLmxvZyhiaXRzZXQuZW5hYmxlZCgxMCkpOyAvLyBQcmludHMgJ3RydWUnLlxuICogYGBgXG4gKlxuICogIyMjIyBUeXBlU2NyaXB0XG4gKlxuICogVGhlIHNldCBjYW4gYmUgdHlwZWQgb3ZlciBhbiBlbnVtOlxuICpcbiAqIGBgYHRzXG4gKiBlbnVtIFRhZyB7XG4gKiAgICAgRmlyc3QgPSAwLFxuICogICAgIFNlY29uZCA9IDEsXG4gKiB9XG4gKlxuICogY29uc3QgYml0c2V0ID0gbmV3IEJpdFNldDxUYWc+KCk7XG4gKiBiaXRzZXQuZW5hYmxlKFRhZy5GaXJzdCk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIEJpdFNldDxUIGV4dGVuZHMgbnVtYmVyID0gbnVtYmVyPiB7XG4gICAgLyoqIEVuYWJsZWQgYml0cy4gQGhpZGRlbiAqL1xuICAgIHByaXZhdGUgX2JpdHM6IG51bWJlciA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBFbmFibGUgdGhlIGJpdCBhdCB0aGUgZ2l2ZW4gaW5kZXguXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYml0cyBBIHNwcmVhZCBvZiBhbGwgdGhlIGJpdHMgdG8gZW5hYmxlLlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICBlbmFibGUoLi4uYml0czogVFtdKSB7XG4gICAgICAgIGZvciAoY29uc3QgYml0IG9mIGJpdHMpIHtcbiAgICAgICAgICAgIGFzc2VydChiaXQpO1xuICAgICAgICAgICAgLyogQ2FzdHMgdGhlIHJlc3VsdCB0byBhbiB1bnNpZ25lZCBpbnRlZ2VyICovXG4gICAgICAgICAgICB0aGlzLl9iaXRzIHw9ICgxIDw8IGJpdCkgPj4+IDA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5hYmxlIGFsbCBiaXRzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIGVuYWJsZUFsbCgpIHtcbiAgICAgICAgdGhpcy5fYml0cyA9IH4wO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEaXNhYmxlIHRoZSBiaXQgYXQgdGhlIGdpdmVuIGluZGV4LlxuICAgICAqXG4gICAgICogQHBhcmFtIGJpdHMgQSBzcHJlYWQgb2YgYWxsIHRoZSBiaXRzIHRvIGRpc2FibGUuXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIGRpc2FibGUoLi4uYml0czogVFtdKSB7XG4gICAgICAgIGZvciAoY29uc3QgYml0IG9mIGJpdHMpIHtcbiAgICAgICAgICAgIGFzc2VydChiaXQpO1xuICAgICAgICAgICAgLyogQ2FzdHMgdGhlIHJlc3VsdCB0byBhbiB1bnNpZ25lZCBpbnRlZ2VyICovXG4gICAgICAgICAgICB0aGlzLl9iaXRzICY9IH4oKDEgPDwgYml0KSA+Pj4gMCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzYWJsZSBhbGwgYml0cy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICBkaXNhYmxlQWxsKCkge1xuICAgICAgICB0aGlzLl9iaXRzID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tlciB3aGV0aGVyIHRoZSBiaXQgaXMgc2V0IG9yIG5vdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiaXQgVGhlIGJpdCB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgaXQncyBlbmFibGVkLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBlbmFibGVkKGJpdDogVCkge1xuICAgICAgICByZXR1cm4gISEodGhpcy5fYml0cyAmICgoMSA8PCBiaXQpID4+PiAwKSk7XG4gICAgfVxufVxuIiwgImltcG9ydCB7Qml0U2V0fSBmcm9tICcuL2JpdHNldC5qcyc7XG5cbi8qKlxuICogTG9nZ2luZyBsZXZlbHMgc3VwcG9ydGVkIGJ5IHtAbGluayBMb2dnZXJ9LlxuICovXG5leHBvcnQgZW51bSBMb2dMZXZlbCB7XG4gICAgSW5mbyA9IDAsXG4gICAgV2FybiA9IDEsXG4gICAgRXJyb3IgPSAyLFxufVxuXG4vKipcbiAqIExvZ2dpbmcgd3JhcHBlci5cbiAqXG4gKiBUaGlzIGlzIHVzZWQgdG8gYWxsb3cgdHVybmluZyBvbi9vZmY6XG4gKiAgICAgLSBgY29uc29sZS5sb2dgXG4gKiAgICAgLSBgY29uc29sZS53YXJuYFxuICogICAgIC0gYGNvbnNvbGUuZXJyb3JgXG4gKlxuICogIyMjIyBVc2FnZVxuICpcbiAqIGBgYGpzXG4gKiBpbXBvcnQge0xvZ2dlciwgTG9nTGV2ZWwsIExvZ1RhZ30gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbiAqXG4gKiAvLyBDcmVhdGUgYSBsb2dnZXIgd2l0aCBvbmx5IHRoZSBcImVycm9yXCIgYW5kIFwid2FyblwiIGxldmVscyBhY3RpdmF0ZWRcbiAqIGNvbnN0IGxvZ2dlciA9IG5ldyBMb2dnZXIoTG9nTGV2ZWwuV2FybiwgTG9nTGV2ZWwuRXJyb3IpO1xuICpcbiAqIC8vIE9ubHkgdGhlIFwiZXJyb3JcIiBhbmQgXCJ3YXJuXCIgbGV2ZWxzIGFyZSBhY3RpdmF0ZWQsXG4gKiAvLyB0aGlzIG1lc3NhZ2UgaXNuJ3QgbG9nZ2VkLlxuICogbG9nZ2VyLmluZm8oTG9nVGFnLkNvbXBvbmVudCwgJ1RoaXMgbWVzc2FnZSBpcyBzaHVzaGVkJylcbiAqXG4gKiAvLyBQcmludHMgJ0hlbGxvIEVycm9yISdcbiAqIGxvZ2dlci5lcnJvcihMb2dUYWcuQ29tcG9uZW50LCAnSGVsbG8gRXJyb3IhJyk7XG4gKlxuICogLy8gUHJpbnRzICdIZWxsbyBXYXJuaW5nISdcbiAqIGxvZ2dlci53YXJuKExvZ1RhZy5Db21wb25lbnQsICdIZWxsbyBXYXJuaW5nIScpO1xuICogYGBgXG4gKlxuICogVGhlIGxvZyBsZXZlbHMgY2FuIGJlIGNoYW5nZWQgYXQgYW55dGltZSB1c2luZyB0aGUge0BsaW5rIEJpdFNldH0gYXBpOlxuICpcbiAqIGBgYGpzXG4gKiAvLyBFbmFibGUgdGhlIFwiaW5mb1wiIGxldmVsXG4gKiBsb2dnZXIubGV2ZWxzLmVuYWJsZShMb2dMZXZlbC5JbmZvKTtcbiAqICogLy8gRGlzYWJsZSB0aGUgXCJ3YXJuXCIgbGV2ZWxcbiAqIGxvZ2dlci5sZXZlbHMuZGlzYWJsZShMb2dMZXZlbC5XYXJuKTtcbiAqIGBgYFxuICpcbiAqICMjIyMgVGFnc1xuICpcbiAqIEluIGFkZGl0aW9uLCB0aGUgbG9nZ2VyIHN1cHBvcnRzIHRhZ2dpbmcgbWVzc2FnZXM6XG4gKlxuICogYGBganNcbiAqIGltcG9ydCB7TG9nZ2VyLCBMb2dMZXZlbCwgTG9nVGFnfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuICpcbiAqIGNvbnN0IGxvZ2dlciA9IG5ldyBMb2dnZXIoTG9nTGV2ZWwuSW5mbyk7XG4gKlxuICogbG9nZ2VyLnRhZ3MuZGlzYWJsZUFsbCgpO1xuICpcbiAqIC8vIEFsbCB0YWdzIGFyZSBvZmYsIHRoaXMgbWVzc2FnZSBpc24ndCBsb2dnZWRcbiAqIGxvZ2dlci5pbmZvKExvZ1RhZy5Db21wb25lbnQsICdUaGlzIG1lc3NhZ2UgaXMgc2h1c2hlZCcpO1xuICpcbiAqIGxvZ2dlci50YWdzLmVuYWJsZShMb2dUYWcuQ29tcG9uZW50KTtcbiAqIGxvZ2dlci5pbmZvKExvZ1RhZy5Db21wb25lbnQsICdIZWxsbyBXb3JsZCEnKSAvLyBQcmludHMgJ0hlbGxvIFdvcmxkISdcbiAqIGBgYFxuICpcbiAqIFRoZSB0YWdnaW5nIHN5c3RlbSBnaXZlcyBhbm90aGVyIGxheWVyIG9mIGNvbnRyb2wgdG8gZW5hYmxlIC8gZGlzYWJsZVxuICogc29tZSBzcGVjaWZpYyBsb2dzLlxuICovXG5leHBvcnQgY2xhc3MgTG9nZ2VyIHtcbiAgICAvKipcbiAgICAgKiBCaXRzZXQgb2YgZW5hYmxlZCBsZXZlbHMuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgbGV2ZWxzOiBCaXRTZXQ8TG9nTGV2ZWw+ID0gbmV3IEJpdFNldCgpO1xuXG4gICAgLyoqXG4gICAgICogQml0c2V0IG9mIGVuYWJsZWQgdGFncy5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICB0YWdzOiBCaXRTZXQgPSBuZXcgQml0U2V0KCkuZW5hYmxlQWxsKCk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgbG9nZ2VyIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGxldmVscyBEZWZhdWx0IHNldCBvZiBsZXZlbHMgdG8gZW5hYmxlLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKC4uLmxldmVsczogTG9nTGV2ZWxbXSkge1xuICAgICAgICB0aGlzLmxldmVscy5lbmFibGUoLi4ubGV2ZWxzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2cgdGhlIG1lc3NhZ2UocykgdXNpbmcgYGNvbnNvbGUubG9nYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0YWcgVGFnIHJlcHJlc2VudGVkIGJ5IGEgcG9zaXRpdmUgaW50ZWdlci5cbiAgICAgKiBAcGFyYW0gbXNnIEEgc3ByZWFkIG9mIG1lc3NhZ2UgdG8gbG9nLlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICBpbmZvKHRhZzogbnVtYmVyLCAuLi5tc2c6IHVua25vd25bXSk6IHRoaXMge1xuICAgICAgICBpZiAodGhpcy5sZXZlbHMuZW5hYmxlZChMb2dMZXZlbC5JbmZvKSAmJiB0aGlzLnRhZ3MuZW5hYmxlZCh0YWcpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyguLi5tc2cpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvZyB0aGUgbWVzc2FnZShzKSB1c2luZyBgY29uc29sZS53YXJuYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0YWcgVGFnIHJlcHJlc2VudGVkIGJ5IGEgcG9zaXRpdmUgaW50ZWdlci5cbiAgICAgKiBAcGFyYW0gbXNnIEEgc3ByZWFkIG9mIG1lc3NhZ2UgdG8gbG9nLlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICB3YXJuKHRhZzogbnVtYmVyLCAuLi5tc2c6IHVua25vd25bXSk6IHRoaXMge1xuICAgICAgICBpZiAodGhpcy5sZXZlbHMuZW5hYmxlZChMb2dMZXZlbC5XYXJuKSAmJiB0aGlzLnRhZ3MuZW5hYmxlZCh0YWcpKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oLi4ubXNnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2cgdGhlIG1lc3NhZ2UocykgdXNpbmcgYGNvbnNvbGUuZXJyb3JgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRhZyBUYWcgcmVwcmVzZW50ZWQgYnkgYSBwb3NpdGl2ZSBpbnRlZ2VyLlxuICAgICAqIEBwYXJhbSBtc2cgQSBzcHJlYWQgb2YgbWVzc2FnZSB0byBsb2cuXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIGVycm9yKHRhZzogbnVtYmVyLCAuLi5tc2c6IHVua25vd25bXSk6IHRoaXMge1xuICAgICAgICBpZiAodGhpcy5sZXZlbHMuZW5hYmxlZChMb2dMZXZlbC5FcnJvcikgJiYgdGhpcy50YWdzLmVuYWJsZWQodGFnKSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvciguLi5tc2cpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cbiIsICIvKlxuICogVGhlIE1JVCBMaWNlbnNlIChNSVQpXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LTIwMTYgUGF0cmljayBHYW5zdGVyZXIgPHBhcm9nYUBwYXJvZ2EuY29tPlxuICogQ29weXJpZ2h0IChjKSAyMDIwLTIwMjMgQWFyb24gSHVnZ2lucyA8YWh1Z2dpbnNAYWFyb25odWdnaW5zLmNvbT5cbiAqIENvcHlyaWdodCAoYykgMjAyNCBXb25kZXJsYW5kIEdtYkggPGNvbnRhY3RAd29uZGVybGFuZGVuZ2luZS5jb20+XG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZlxuICogdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpblxuICogdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0b1xuICogdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2ZcbiAqIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbyxcbiAqIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbFxuICogY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTU1xuICogRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SXG4gKiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVJcbiAqIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOXG4gKiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG5cbmNvbnN0IGtDYm9yVGFnQmlnbnVtID0gMjtcbmNvbnN0IGtDYm9yVGFnTmVnYXRpdmVCaWdudW0gPSAzO1xuLyogUkZDIDg3NDYgVGFnIHZhbHVlcyBmb3IgdHlwZWQgbGl0dGxlLWVuZGlhbiBhcnJheXMgKi9cbmNvbnN0IGtDYm9yVGFnVWludDggPSA2NDtcbmNvbnN0IGtDYm9yVGFnVWludDE2ID0gNjk7XG5jb25zdCBrQ2JvclRhZ1VpbnQzMiA9IDcwO1xuY29uc3Qga0Nib3JUYWdVaW50NjQgPSA3MTtcbmNvbnN0IGtDYm9yVGFnSW50OCA9IDcyO1xuY29uc3Qga0Nib3JUYWdJbnQxNiA9IDc3O1xuY29uc3Qga0Nib3JUYWdJbnQzMiA9IDc4O1xuY29uc3Qga0Nib3JUYWdJbnQ2NCA9IDc5O1xuY29uc3Qga0Nib3JUYWdGbG9hdDMyID0gODU7XG5jb25zdCBrQ2JvclRhZ0Zsb2F0NjQgPSA4NjtcblxuLyoqXG4gKiBXaGV0aGVyIGtleS92YWx1ZSBkaWN0aW9uYXJpZXMgc2hvdWxkIGJlIGRlY29kZWQgYXMgb2JqZWN0cyBvciBhc1xuICogYE1hcDxLLCBWPmAuIFRoZSBsYXR0ZXIgaXMgdXNlZnVsIGlmIG5vbi1zdHJpbmcga2V5cyBvciBpdGVyYXRpbmcgaW5cbiAqIGluc2VydGlvbiBvcmRlciBhcmUgcmVxdWlyZWQuXG4gKi9cbmV4cG9ydCB0eXBlIERpY3Rpb25hcnlPcHRpb24gPSAnb2JqZWN0JyB8ICdtYXAnO1xuXG4vKiogT3B0aW9ucyBmb3IgdGhlIGRlY29kZXIuICovXG5leHBvcnQgaW50ZXJmYWNlIE9wdGlvbnMge1xuICAgIC8qKiBUaGUgZGljdGlvbmFyeSB0eXBlIHRvIHVzZS4gRGVmYXVsdHMgdG8gYG9iamVjdGAuICovXG4gICAgZGljdGlvbmFyeT86IERpY3Rpb25hcnlPcHRpb247XG59XG5cbi8qKiBBIGZ1bmN0aW9uIHRvIG1vZGlmeSB0YWdnZWQgdmFsdWVzIHdoaWNoIGFyZSBlbmNvdW50ZXJlZCBkdXJpbmcgZGVjb2RpbmcuICovXG5leHBvcnQgdHlwZSBUYWdnZXIgPSAodGFnOiBudW1iZXIgfCBiaWdpbnQsIHZhbHVlOiBhbnkpID0+IGFueTtcblxuLyoqXG4gKiBDb252ZXJ0cyBhIENvbmNpc2UgQmluYXJ5IE9iamVjdCBSZXByZXNlbnRhdGlvbiAoQ0JPUikgYnVmZmVyIGludG8gYW4gb2JqZWN0LlxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCBidWZmZXIgPSBuZXcgVWludDhBcnJheShbMHhhMiwgMHgwMSwgMHgwMiwgMHgwMywgMHgwNF0pLmJ1ZmZlcjtcbiAqIGNvbnN0IGRlY29kZWQgPSBkZWNvZGUoYnVmZmVyKTtcbiAqIGNvbnNvbGUubG9nKGRlY29kZWQpOyAvLyB7IFwiMVwiOiAyLCBcIjNcIjogNCB9XG4gKiBgYGBcbiAqXG4gKiBDQk9SIHZhbHVlcyBjYW4gYmUgd3JhcHBlZCBpbiBhIG51bWVyaWMgdGFnLiBUbyBoYW5kbGUgYW5kIHBvc3NpYmx5XG4gKiB0cmFuc2Zvcm0gdGFnZ2VkIHZhbHVlcywgcGFzcyBhIHRhZ2dlciBmdW5jdGlvbjpcbiAqXG4gKiBgYGBqc1xuICogY29uc3QgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoW1xuICogICAweGExLCAweDYzLCAweDc1LCAweDcyLCAweDZjLCAweGQ4LCAweDIwLCAweDcwLFxuICogICAweDY4LCAweDc0LCAweDc0LCAweDcwLCAweDNhLCAweDJmLCAweDJmLCAweDczLFxuICogICAweDY5LCAweDc0LCAweDY1LCAweDJlLCAweDYzLCAweDZmLCAweDZkLCAweDJmXG4gKiBdKTtcbiAqIGNvbnN0IGRlY29kZWQgPSBkZWNvZGUoYnVmZmVyLCAodGFnLCB2YWx1ZSkgPT4ge1xuICogICAgIGlmICh0YWcgPT09IDMyKSByZXR1cm4gbmV3IFVSTCh2YWx1ZSk7XG4gKiAgICAgcmV0dXJuIHZhbHVlO1xuICogfSk7XG4gKiBjb25zb2xlLmxvZyhkZWNvZGVkKTsgLy8geyB1cmw6IFVSTCB7IGhyZWY6IFwiaHR0cDovL3NpdGUuY29tL1wiIH0gfVxuICogYGBgXG4gKlxuICogRGVjb2RlZCBiYXNpYyB0eXBlcyBnZW5lcmFsbHkgbWF0Y2ggdGhlIGVxdWl2YWxlbnQgSmF2YVNjcmlwdCB0eXBlcy4gQnl0ZVxuICogc3RyaW5ncyBhcmUgZGVjb2RlZCB0byBVaW50OEFycmF5LlxuICpcbiAqIFRhZ2dlZCB2YWx1ZXMgYXJlIGxlZnQgYXMtaXMsIHdpdGggdGhlIGZvbGxvd2luZyBleGNlcHRpb25zOlxuICogLSBCaWdudW0gdmFsdWVzIChieXRlIHN0cmluZ3Mgd2l0aCB0YWcgMiBvciAzKSBhcmUgZGVjb2RlZCB0byBCaWdJbnRcbiAqIC0gTGl0dGxlLWVuZGlhbiB2ZXJzaW9ucyBvZiB0eXBlZCBhcnJheXMgYXMgZGVmaW5lZCBpbiBSRkMgODc0NiBhcmUgZGVjb2RlZFxuICogICB0byBKYXZhU2NyaXB0IHR5cGVkIGFycmF5c1xuICpcbiAqIEBwYXJhbSBkYXRhIEEgdmFsaWQgQ0JPUiBidWZmZXIuXG4gKiBAcGFyYW0gdGFnZ2VyIE9wdGlvbmFsIGNhbGxiYWNrIGZvciB0cmFuc2Zvcm1hdGlvbiBvZiB0YWdnZWQgdmFsdWVzLlxuICogQHBhcmFtIG9wdGlvbnMgT3B0aW9ucyBmb3IgZGVjb2RpbmcgYmVoYXZpb3IuXG4gKiBAcmV0dXJucyBUaGUgQ0JPUiBidWZmZXIgY29udmVydGVkIHRvIGEgSmF2YVNjcmlwdCB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gZGVjb2RlPFQgPSBhbnk+KFxuICAgIGRhdGE6IFVpbnQ4QXJyYXksXG4gICAgdGFnZ2VyOiBUYWdnZXIgPSAoXywgdmFsdWUpID0+IHZhbHVlLFxuICAgIG9wdGlvbnM6IE9wdGlvbnMgPSB7fVxuKTogVCB7XG4gICAgY29uc3Qge2RpY3Rpb25hcnkgPSAnb2JqZWN0J30gPSBvcHRpb25zO1xuICAgIGNvbnN0IGRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KGRhdGEuYnVmZmVyLCBkYXRhLmJ5dGVPZmZzZXQsIGRhdGEuYnl0ZUxlbmd0aCk7XG4gICAgbGV0IG9mZnNldCA9IDA7XG5cbiAgICBmdW5jdGlvbiBjb21taXRSZWFkPFQ+KGxlbmd0aDogbnVtYmVyLCB2YWx1ZTogVCk6IFQge1xuICAgICAgICBvZmZzZXQgKz0gbGVuZ3RoO1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlYWRBcnJheUJ1ZmZlcihsZW5ndGg6IG51bWJlcikge1xuICAgICAgICByZXR1cm4gY29tbWl0UmVhZChsZW5ndGgsIGRhdGEuc3ViYXJyYXkob2Zmc2V0LCBvZmZzZXQgKyBsZW5ndGgpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVhZEZsb2F0MTYoKSB7XG4gICAgICAgIGNvbnN0IFBPV18yXzI0ID0gNS45NjA0NjQ0Nzc1MzkwNjNlLTg7XG5cbiAgICAgICAgY29uc3QgdGVtcEFycmF5QnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKDQpO1xuICAgICAgICBjb25zdCB0ZW1wRGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcodGVtcEFycmF5QnVmZmVyKTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSByZWFkVWludDE2KCk7XG5cbiAgICAgICAgY29uc3Qgc2lnbiA9IHZhbHVlICYgMHg4MDAwO1xuICAgICAgICBsZXQgZXhwb25lbnQgPSB2YWx1ZSAmIDB4N2MwMDtcbiAgICAgICAgY29uc3QgZnJhY3Rpb24gPSB2YWx1ZSAmIDB4MDNmZjtcblxuICAgICAgICBpZiAoZXhwb25lbnQgPT09IDB4N2MwMCkgZXhwb25lbnQgPSAweGZmIDw8IDEwO1xuICAgICAgICBlbHNlIGlmIChleHBvbmVudCAhPT0gMCkgZXhwb25lbnQgKz0gKDEyNyAtIDE1KSA8PCAxMDtcbiAgICAgICAgZWxzZSBpZiAoZnJhY3Rpb24gIT09IDApIHJldHVybiAoc2lnbiA/IC0xIDogMSkgKiBmcmFjdGlvbiAqIFBPV18yXzI0O1xuXG4gICAgICAgIHRlbXBEYXRhVmlldy5zZXRVaW50MzIoMCwgKHNpZ24gPDwgMTYpIHwgKGV4cG9uZW50IDw8IDEzKSB8IChmcmFjdGlvbiA8PCAxMykpO1xuICAgICAgICByZXR1cm4gdGVtcERhdGFWaWV3LmdldEZsb2F0MzIoMCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlYWRGbG9hdDMyKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBjb21taXRSZWFkKDQsIGRhdGFWaWV3LmdldEZsb2F0MzIob2Zmc2V0KSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlYWRGbG9hdDY0KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBjb21taXRSZWFkKDgsIGRhdGFWaWV3LmdldEZsb2F0NjQob2Zmc2V0KSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlYWRVaW50OCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gY29tbWl0UmVhZCgxLCBkYXRhW29mZnNldF0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZWFkVWludDE2KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBjb21taXRSZWFkKDIsIGRhdGFWaWV3LmdldFVpbnQxNihvZmZzZXQpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVhZFVpbnQzMigpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gY29tbWl0UmVhZCg0LCBkYXRhVmlldy5nZXRVaW50MzIob2Zmc2V0KSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlYWRVaW50NjQoKTogYmlnaW50IHtcbiAgICAgICAgcmV0dXJuIGNvbW1pdFJlYWQoOCwgZGF0YVZpZXcuZ2V0QmlnVWludDY0KG9mZnNldCkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZWFkQnJlYWsoKTogYm9vbGVhbiB7XG4gICAgICAgIGlmIChkYXRhW29mZnNldF0gIT09IDB4ZmYpIHJldHVybiBmYWxzZTtcbiAgICAgICAgb2Zmc2V0ICs9IDE7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZWFkTGVuZ3RoKGFkZGl0aW9uYWxJbmZvcm1hdGlvbjogbnVtYmVyKTogbnVtYmVyIHwgYmlnaW50IHtcbiAgICAgICAgaWYgKGFkZGl0aW9uYWxJbmZvcm1hdGlvbiA8IDI0KSByZXR1cm4gYWRkaXRpb25hbEluZm9ybWF0aW9uO1xuICAgICAgICBpZiAoYWRkaXRpb25hbEluZm9ybWF0aW9uID09PSAyNCkgcmV0dXJuIHJlYWRVaW50OCgpO1xuICAgICAgICBpZiAoYWRkaXRpb25hbEluZm9ybWF0aW9uID09PSAyNSkgcmV0dXJuIHJlYWRVaW50MTYoKTtcbiAgICAgICAgaWYgKGFkZGl0aW9uYWxJbmZvcm1hdGlvbiA9PT0gMjYpIHJldHVybiByZWFkVWludDMyKCk7XG4gICAgICAgIGlmIChhZGRpdGlvbmFsSW5mb3JtYXRpb24gPT09IDI3KSB7XG4gICAgICAgICAgICBjb25zdCBpbnRlZ2VyID0gcmVhZFVpbnQ2NCgpO1xuICAgICAgICAgICAgaWYgKGludGVnZXIgPD0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpIHJldHVybiBOdW1iZXIoaW50ZWdlcik7XG4gICAgICAgICAgICByZXR1cm4gaW50ZWdlcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWRkaXRpb25hbEluZm9ybWF0aW9uID09PSAzMSkgcmV0dXJuIC0xO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NCT1JFcnJvcjogSW52YWxpZCBsZW5ndGggZW5jb2RpbmcnKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVhZEluZGVmaW5pdGVTdHJpbmdMZW5ndGgobWFqb3JUeXBlOiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBpbml0aWFsQnl0ZSA9IHJlYWRVaW50OCgpO1xuICAgICAgICBpZiAoaW5pdGlhbEJ5dGUgPT09IDB4ZmYpIHJldHVybiAtMTtcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gcmVhZExlbmd0aChpbml0aWFsQnl0ZSAmIDB4MWYpO1xuICAgICAgICBpZiAobGVuZ3RoIDwgMCB8fCBpbml0aWFsQnl0ZSA+PiA1ICE9PSBtYWpvclR5cGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ0JPUkVycm9yOiBJbnZhbGlkIGluZGVmaW5pdGUgbGVuZ3RoIGVsZW1lbnQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTnVtYmVyKGxlbmd0aCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFwcGVuZFV0ZjE2RGF0YSh1dGYxNmRhdGE6IG51bWJlcltdLCBsZW5ndGg6IG51bWJlcikge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBsZXQgdmFsdWUgPSByZWFkVWludDgoKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAmIDB4ODApIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPCAweGUwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gKCh2YWx1ZSAmIDB4MWYpIDw8IDYpIHwgKHJlYWRVaW50OCgpICYgMHgzZik7XG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aCAtPSAxO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPCAweGYwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID1cbiAgICAgICAgICAgICAgICAgICAgICAgICgodmFsdWUgJiAweDBmKSA8PCAxMikgfFxuICAgICAgICAgICAgICAgICAgICAgICAgKChyZWFkVWludDgoKSAmIDB4M2YpIDw8IDYpIHxcbiAgICAgICAgICAgICAgICAgICAgICAgIChyZWFkVWludDgoKSAmIDB4M2YpO1xuICAgICAgICAgICAgICAgICAgICBsZW5ndGggLT0gMjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAoKHZhbHVlICYgMHgwNykgPDwgMTgpIHxcbiAgICAgICAgICAgICAgICAgICAgICAgICgocmVhZFVpbnQ4KCkgJiAweDNmKSA8PCAxMikgfFxuICAgICAgICAgICAgICAgICAgICAgICAgKChyZWFkVWludDgoKSAmIDB4M2YpIDw8IDYpIHxcbiAgICAgICAgICAgICAgICAgICAgICAgIChyZWFkVWludDgoKSAmIDB4M2YpO1xuICAgICAgICAgICAgICAgICAgICBsZW5ndGggLT0gMztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4MTAwMDApIHtcbiAgICAgICAgICAgICAgICB1dGYxNmRhdGEucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhbHVlIC09IDB4MTAwMDA7XG4gICAgICAgICAgICAgICAgdXRmMTZkYXRhLnB1c2goMHhkODAwIHwgKHZhbHVlID4+IDEwKSk7XG4gICAgICAgICAgICAgICAgdXRmMTZkYXRhLnB1c2goMHhkYzAwIHwgKHZhbHVlICYgMHgzZmYpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlY29kZUl0ZW0oKTogYW55IHtcbiAgICAgICAgY29uc3QgaW5pdGlhbEJ5dGUgPSByZWFkVWludDgoKTtcbiAgICAgICAgY29uc3QgbWFqb3JUeXBlID0gaW5pdGlhbEJ5dGUgPj4gNTtcbiAgICAgICAgY29uc3QgYWRkaXRpb25hbEluZm9ybWF0aW9uID0gaW5pdGlhbEJ5dGUgJiAweDFmO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgbGV0IGxlbmd0aDtcblxuICAgICAgICBpZiAobWFqb3JUeXBlID09PSA3KSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGFkZGl0aW9uYWxJbmZvcm1hdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgMjU6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWFkRmxvYXQxNigpO1xuICAgICAgICAgICAgICAgIGNhc2UgMjY6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWFkRmxvYXQzMigpO1xuICAgICAgICAgICAgICAgIGNhc2UgMjc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWFkRmxvYXQ2NCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGVuZ3RoID0gcmVhZExlbmd0aChhZGRpdGlvbmFsSW5mb3JtYXRpb24pO1xuICAgICAgICBpZiAobGVuZ3RoIDwgMCAmJiAobWFqb3JUeXBlIDwgMiB8fCA2IDwgbWFqb3JUeXBlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDQk9SRXJyb3I6IEludmFsaWQgbGVuZ3RoJyk7XG4gICAgICAgIH1cblxuICAgICAgICBzd2l0Y2ggKG1ham9yVHlwZSkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIHJldHVybiBsZW5ndGg7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBsZW5ndGggPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMSAtIGxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xbiAtIGxlbmd0aDtcbiAgICAgICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgICAgICAgIGlmIChsZW5ndGggPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGxldCBmdWxsQXJyYXlMZW5ndGggPSAwO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoKGxlbmd0aCA9IHJlYWRJbmRlZmluaXRlU3RyaW5nTGVuZ3RoKG1ham9yVHlwZSkpID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGxBcnJheUxlbmd0aCArPSBsZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50cy5wdXNoKHJlYWRBcnJheUJ1ZmZlcihsZW5ndGgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmdWxsQXJyYXkgPSBuZXcgVWludDhBcnJheShmdWxsQXJyYXlMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZnVsbEFycmF5T2Zmc2V0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmdWxsQXJyYXkuc2V0KGVsZW1lbnRzW2ldLCBmdWxsQXJyYXlPZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVsbEFycmF5T2Zmc2V0ICs9IGVsZW1lbnRzW2ldLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVsbEFycmF5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVhZEFycmF5QnVmZmVyKGxlbmd0aCBhcyBudW1iZXIpLnNsaWNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIDM6IHtcbiAgICAgICAgICAgICAgICAvKiBDYW4ndCB1c2UgVGV4dERlY29kZXIuZGVjb2RlKCkgYmVjYXVzZSBub3QgYWxsIGJyb3dzZXJzXG4gICAgICAgICAgICAgICAgICogc3VwcG9ydCBjYWxsaW5nIGl0IHdpdGggYW4gdW5kZXJseWluZyBTaGFyZWRBcnJheUJ1ZmZlciB5ZXQuXG4gICAgICAgICAgICAgICAgICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93aGF0d2cvZW5jb2RpbmcvaXNzdWVzLzE3MiAqL1xuICAgICAgICAgICAgICAgIC8qKiBAdG9kbyBSZS1ldmFsdWF0ZSBicm93c2VyIHN1cHBvcnQgKi9cbiAgICAgICAgICAgICAgICBjb25zdCB1dGYxNmRhdGE6IG51bWJlcltdID0gW107XG4gICAgICAgICAgICAgICAgaWYgKGxlbmd0aCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKChsZW5ndGggPSByZWFkSW5kZWZpbml0ZVN0cmluZ0xlbmd0aChtYWpvclR5cGUpKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmRVdGYxNkRhdGEodXRmMTZkYXRhLCBsZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kVXRmMTZEYXRhKHV0ZjE2ZGF0YSwgbGVuZ3RoIGFzIG51bWJlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBzdHJpbmcgPSAnJztcbiAgICAgICAgICAgICAgICBjb25zdCBERUNPREVfQ0hVTktfU0laRSA9IDgxOTI7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHV0ZjE2ZGF0YS5sZW5ndGg7IGkgKz0gREVDT0RFX0NIVU5LX1NJWkUpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nICs9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXRmMTZkYXRhLnNsaWNlKGksIGkgKyBERUNPREVfQ0hVTktfU0laRSlcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgNDoge1xuICAgICAgICAgICAgICAgIGxldCByZXRBcnJheTtcbiAgICAgICAgICAgICAgICBpZiAobGVuZ3RoIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICByZXRBcnJheSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIXJlYWRCcmVhaygpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXRBcnJheS5wdXNoKGRlY29kZUl0ZW0oKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXRBcnJheSA9IG5ldyBBcnJheShsZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldEFycmF5W2ldID0gZGVjb2RlSXRlbSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXRBcnJheTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgNToge1xuICAgICAgICAgICAgICAgIGlmIChkaWN0aW9uYXJ5ID09PSAnbWFwJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXRNYXAgPSBuZXcgTWFwPGFueSwgYW55PigpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoIHx8IChsZW5ndGggPCAwICYmICFyZWFkQnJlYWsoKSk7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gZGVjb2RlSXRlbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJldE1hcC5oYXMoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ0JPUkVycm9yOiBEdXBsaWNhdGUga2V5IGVuY291bnRlcmVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXRNYXAuc2V0KGtleSwgZGVjb2RlSXRlbSgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0TWFwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByZXRPYmplY3Q6IGFueSA9IHt9O1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGggfHwgKGxlbmd0aCA8IDAgJiYgIXJlYWRCcmVhaygpKTsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGRlY29kZUl0ZW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyZXRPYmplY3QsIGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ0JPUkVycm9yOiBEdXBsaWNhdGUga2V5IGVuY291bnRlcmVkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0T2JqZWN0W2tleV0gPSBkZWNvZGVJdGVtKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXRPYmplY3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIDY6IHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGRlY29kZUl0ZW0oKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YWcgPSBsZW5ndGg7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBrQ2JvclRhZ0JpZ251bTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2Uga0Nib3JUYWdOZWdhdGl2ZUJpZ251bTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbnVtID0gdmFsdWUucmVkdWNlKChhY2MsIG4pID0+IChhY2MgPDwgOG4pICsgQmlnSW50KG4pLCAwbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhZyA9PSBrQ2JvclRhZ05lZ2F0aXZlQmlnbnVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bSA9IC0xbiAtIG51bTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIExpdHRsZS1lbmRpYW4gdHlwZWQgYXJyYXlzIChSRkMgODc0NikgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2Uga0Nib3JUYWdVaW50ODpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGtDYm9yVGFnSW50ODpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEludDhBcnJheSh2YWx1ZS5idWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBrQ2JvclRhZ1VpbnQxNjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQxNkFycmF5KHZhbHVlLmJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGtDYm9yVGFnSW50MTY6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnQxNkFycmF5KHZhbHVlLmJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGtDYm9yVGFnVWludDMyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVWludDMyQXJyYXkodmFsdWUuYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2Uga0Nib3JUYWdJbnQzMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEludDMyQXJyYXkodmFsdWUuYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2Uga0Nib3JUYWdVaW50NjQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBCaWdVaW50NjRBcnJheSh2YWx1ZS5idWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBrQ2JvclRhZ0ludDY0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQmlnSW50NjRBcnJheSh2YWx1ZS5idWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBrQ2JvclRhZ0Zsb2F0MzI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkodmFsdWUuYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2Uga0Nib3JUYWdGbG9hdDY0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRmxvYXQ2NEFycmF5KHZhbHVlLmJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhZ2dlcih0YWcsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDIwOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDIxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGVuZ3RoIGFzIG51bWJlcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCByZXQgPSBkZWNvZGVJdGVtKCk7XG4gICAgaWYgKG9mZnNldCAhPT0gZGF0YS5ieXRlTGVuZ3RoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ0JPUkVycm9yOiBSZW1haW5pbmcgYnl0ZXMnKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cblxuZXhwb3J0IGNvbnN0IENCT1IgPSB7XG4gICAgZGVjb2RlLFxufTtcbiIsICJpbXBvcnQge0xvZ1RhZywgUHJlZmFifSBmcm9tICcuL2luZGV4LmpzJztcbmltcG9ydCB7V29uZGVybGFuZEVuZ2luZX0gZnJvbSAnLi9lbmdpbmUuanMnO1xuaW1wb3J0IHtDb21wb25lbnRQcm9wZXJ0eSwgVHlwZSwgZGVmYXVsdFByb3BlcnR5Q2xvbmVyfSBmcm9tICcuL3Byb3BlcnR5LmpzJztcbmltcG9ydCB7UmV0YWluRW1pdHRlcn0gZnJvbSAnLi91dGlscy9ldmVudC5qcyc7XG5pbXBvcnQge0NCT1J9IGZyb20gJy4vdXRpbHMvY2Jvci5qcyc7XG5pbXBvcnQge0xvZ2dlcn0gZnJvbSAnLi91dGlscy9sb2dnZXIuanMnO1xuaW1wb3J0IHtcbiAgICBpbmhlcml0UHJvcGVydGllcyxcbiAgICBDb21wb25lbnQsXG4gICAgQ29tcG9uZW50Q29uc3RydWN0b3IsXG4gICAgQ29tcG9uZW50UHJvdG8sXG4gICAgQnJva2VuQ29tcG9uZW50LFxuICAgIFhSLFxuICAgIEFuaW1hdGlvbkNvbXBvbmVudCxcbn0gZnJvbSAnLi93b25kZXJsYW5kLmpzJztcbmltcG9ydCB7SW1hZ2VMaWtlfSBmcm9tICcuL3R5cGVzLmpzJztcbmltcG9ydCB7U2NlbmV9IGZyb20gJy4vc2NlbmUuanMnO1xuXG50eXBlIFhSUmVxdWVzdFNlc3Npb25GdW5jdGlvbiA9IChcbiAgICBtb2RlOiBYUlNlc3Npb25Nb2RlLFxuICAgIGZlYXR1cmVzOiBzdHJpbmdbXSxcbiAgICBvcHRpb25hbEZlYXR1cmVzOiBzdHJpbmdbXVxuKSA9PiBQcm9taXNlPFhSU2Vzc2lvbj47XG5cbi8qKlxuICogRGVmYXVsdCBjb21wb25lbnQgcGFyYW1ldGVyIHZhbHVlIHBlciB0eXBlLlxuICovXG5jb25zdCBfY29tcG9uZW50RGVmYXVsdHMgPSBuZXcgTWFwPFR5cGUsIGFueT4oW1xuICAgIFtUeXBlLkJvb2wsIGZhbHNlXSxcbiAgICBbVHlwZS5JbnQsIDBdLFxuICAgIFtUeXBlLkZsb2F0LCAwLjBdLFxuICAgIFtUeXBlLlN0cmluZywgJyddLFxuICAgIFtUeXBlLkVudW0sIHVuZGVmaW5lZF0sXG4gICAgW1R5cGUuT2JqZWN0LCBudWxsXSxcbiAgICBbVHlwZS5NZXNoLCBudWxsXSxcbiAgICBbVHlwZS5UZXh0dXJlLCBudWxsXSxcbiAgICBbVHlwZS5NYXRlcmlhbCwgbnVsbF0sXG4gICAgW1R5cGUuQW5pbWF0aW9uLCBudWxsXSxcbiAgICBbVHlwZS5Ta2luLCBudWxsXSxcbiAgICBbVHlwZS5Db2xvciwgRmxvYXQzMkFycmF5LmZyb20oWzAuMCwgMC4wLCAwLjAsIDEuMF0pXSxcbiAgICBbVHlwZS5WZWN0b3IyLCBGbG9hdDMyQXJyYXkuZnJvbShbMC4wLCAwLjBdKV0sXG4gICAgW1R5cGUuVmVjdG9yMywgRmxvYXQzMkFycmF5LmZyb20oWzAuMCwgMC4wLCAwLjBdKV0sXG4gICAgW1R5cGUuVmVjdG9yNCwgRmxvYXQzMkFycmF5LmZyb20oWzAuMCwgMC4wLCAwLjAsIDAuMF0pXSxcbl0pO1xuXG4vKipcbiAqIFNldHVwIHRoZSBkZWZhdWx0cyB2YWx1ZSBvZiB0aGUgcHJvcGVydGllcyBvbiBhIGdpdmVuXG4gKiBjb21wb25lbnQgY2xhc3MuXG4gKlxuICogQHBhcmFtIGN0b3IgVGhlIGNvbXBvbmVudCBjbGFzc1xuICovXG5mdW5jdGlvbiBfc2V0dXBEZWZhdWx0cyhjdG9yOiBDb21wb25lbnRDb25zdHJ1Y3Rvcikge1xuICAgIGZvciAoY29uc3QgbmFtZSBpbiBjdG9yLlByb3BlcnRpZXMpIHtcbiAgICAgICAgY29uc3QgcCA9IGN0b3IuUHJvcGVydGllc1tuYW1lXTtcblxuICAgICAgICBpZiAocC50eXBlID09PSBUeXBlLkVudW0pIHtcbiAgICAgICAgICAgIC8qIEVudW0gZGVmYXVsdCBjYW4gYmUgYSBzdHJpbmcgb3IgYW4gaW5kZXguIENvbnZlcnQgdG8gYW5kL29yXG4gICAgICAgICAgICAgKiBzYW5pdHktY2hlY2sgdGhlIGluZGV4LiAqL1xuICAgICAgICAgICAgaWYgKHAudmFsdWVzPy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAvKiBEb24ndCB0cnkgdG8gbG9vayB1cCB0aGUgZGVmYXVsdCBpZiB0aGUgdXNlciBzcGVjaWZpZWQgYVxuICAgICAgICAgICAgICAgICAqIG51bWJlciBvciB3ZSBhbHJlYWR5IGNvbnZlcnRlZCB0byBvbmUuICovXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwLmRlZmF1bHQgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIC8qIElmIHVuZGVmaW5lZCwgbWlzc2luZyBlbGVtZW50IG9yIHdyb25nIHR5cGUgdGhpcyByZXR1cm5zXG4gICAgICAgICAgICAgICAgICAgICAqIC0xIHdoaWNoIGJlY29tZXMgMCBiZWxvdy4gVGhpcyBtYXRjaGVzIGVkaXRvciBiZWhhdmlvci4gKi9cbiAgICAgICAgICAgICAgICAgICAgcC5kZWZhdWx0ID0gcC52YWx1ZXMuaW5kZXhPZihwLmRlZmF1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocC5kZWZhdWx0IDwgMCB8fCBwLmRlZmF1bHQgPj0gcC52YWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHAuZGVmYXVsdCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvKiBUaGVyZSdzIG5vIGluZGV4IHZhbHVlIHRoYXQgbWFrZXMgc2Vuc2UgKi9cbiAgICAgICAgICAgICAgICBwLmRlZmF1bHQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAocC50eXBlID09PSBUeXBlLkNvbG9yIHx8XG4gICAgICAgICAgICAgICAgcC50eXBlID09PSBUeXBlLlZlY3RvcjIgfHxcbiAgICAgICAgICAgICAgICBwLnR5cGUgPT09IFR5cGUuVmVjdG9yMyB8fFxuICAgICAgICAgICAgICAgIHAudHlwZSA9PT0gVHlwZS5WZWN0b3I0KSAmJlxuICAgICAgICAgICAgQXJyYXkuaXNBcnJheShwLmRlZmF1bHQpXG4gICAgICAgICkge1xuICAgICAgICAgICAgLyogRGVmYXVsdHMgcHJvdmlkZWQgYnkgdXNlciBjb2RlIGFyZSBjdXJyZW50bHkgYWx3YXlzIGEgc3RhbmRhcmRcbiAgICAgICAgICAgICAqIGFycmF5LCBidXQgYmVjb21lIGEgdHlwZWQgYXJyYXkgb24gdGhlIHByb3BlcnR5ICovXG4gICAgICAgICAgICBwLmRlZmF1bHQgPSBGbG9hdDMyQXJyYXkuZnJvbShwLmRlZmF1bHQpO1xuICAgICAgICB9IGVsc2UgaWYgKHAuZGVmYXVsdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBjbG9uZXIgPSBwLmNsb25lciA/PyBkZWZhdWx0UHJvcGVydHlDbG9uZXI7XG4gICAgICAgICAgICBwLmRlZmF1bHQgPSBjbG9uZXIuY2xvbmUocC50eXBlLCBfY29tcG9uZW50RGVmYXVsdHMuZ2V0KHAudHlwZSkpO1xuICAgICAgICB9XG4gICAgICAgIGN0b3IucHJvdG90eXBlW25hbWVdID0gcC5kZWZhdWx0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGEgZml4ZWQgb3JkZXIgZm9yIHByb3BlcnR5IGF0dHJpYnV0ZXMgdXNlZCBmb3IgZGVzZXJpYWxpemF0aW9uLlxuICpcbiAqIEBwYXJhbSBjdG9yIFRoZSBjb21wb25lbnQgY2xhc3NcbiAqL1xuZnVuY3Rpb24gX3NldFByb3BlcnR5T3JkZXIoY3RvcjogQ29tcG9uZW50Q29uc3RydWN0b3IpIHtcbiAgICBjdG9yLl9wcm9wZXJ0eU9yZGVyID0gY3Rvci5oYXNPd25Qcm9wZXJ0eSgnUHJvcGVydGllcycpXG4gICAgICAgID8gT2JqZWN0LmtleXMoY3Rvci5Qcm9wZXJ0aWVzKS5zb3J0KClcbiAgICAgICAgOiBbXTtcbn1cblxuLyoqXG4gKiBMb3ctbGV2ZWwgd3JhcHBlciB0byBpbnRlcmFjdCB3aXRoIHRoZSBXZWJBc3NlbWJseSBjb2RlLlxuICpcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGNsYXNzIFdBU00ge1xuICAgIC8qKlxuICAgICAqIEVtc2NyaXB0ZW4gd29ya2VyIGZpZWxkLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHdvcmtlcjogc3RyaW5nID0gJyc7XG5cbiAgICAvKipcbiAgICAgKiBFbXNjcmlwdGVuIHdhc20gZmllbGQuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICovXG4gICAgcmVhZG9ubHkgd2FzbTogQXJyYXlCdWZmZXIgPSBudWxsITtcblxuICAgIC8qKlxuICAgICAqIEVtc2NyaXB0ZW4gY2FudmFzLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQgPSBudWxsITtcblxuICAgIC8qKlxuICAgICAqIFdlYkdQVSBkZXZpY2UuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICovXG4gICAgcmVhZG9ubHkgcHJlaW5pdGlhbGl6ZWRXZWJHUFVEZXZpY2U6IGFueSA9IG51bGw7XG5cbiAgICAvKiogQ3VycmVudCBXZWJYUiAgKi9cblxuICAgIC8qKlxuICAgICAqIEVtc2NyaXB0ZW4gV2ViWFIgc2Vzc2lvbi5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICByZWFkb25seSB3ZWJ4cl9zZXNzaW9uOiBYUlNlc3Npb24gfCBudWxsID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEVtc2NyaXB0ZW4gV2ViWFIgcmVxdWVzdCBzZXNzaW9uIGNhbGxiYWNrLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHdlYnhyX3JlcXVlc3RTZXNzaW9uOiBYUlJlcXVlc3RTZXNzaW9uRnVuY3Rpb24gPSBudWxsITtcblxuICAgIC8qKlxuICAgICAqIEVtc2NyaXB0ZW4gV2ViWFIgb2ZmZXIgc2Vzc2lvbiBjYWxsYmFjay5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICByZWFkb25seSB3ZWJ4cl9vZmZlclNlc3Npb246IFhSUmVxdWVzdFNlc3Npb25GdW5jdGlvbiA9IG51bGwhO1xuXG4gICAgLyoqXG4gICAgICogRW1zY3JpcHRlbiBXZWJYUiBmcmFtZS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICByZWFkb25seSB3ZWJ4cl9mcmFtZTogWFJGcmFtZSB8IG51bGwgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogRW1zY3JpcHRlbiBjdXJyZW50IFdlYlhSIHJlZmVyZW5jZSBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICB3ZWJ4cl9yZWZTcGFjZTogWFJSZWZlcmVuY2VTcGFjZSB8IG51bGwgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogRW1zY3JpcHRlbiBXZWJYUiByZWZlcmVuY2Ugc3BhY2VzLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHdlYnhyX3JlZlNwYWNlczogUmVjb3JkPFxuICAgICAgICBYUlJlZmVyZW5jZVNwYWNlVHlwZSxcbiAgICAgICAgWFJSZWZlcmVuY2VTcGFjZSB8IHVuZGVmaW5lZFxuICAgID4gfCBudWxsID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEVtc2NyaXB0ZW4gV2ViWFIgY3VycmVudCByZWZlcmVuY2Ugc3BhY2UgdHlwZS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICB3ZWJ4cl9yZWZTcGFjZVR5cGU6IFhSUmVmZXJlbmNlU3BhY2VUeXBlIHwgbnVsbCA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBFbXNjcmlwdGVuIFdlYlhSIEdMIHByb2plY3Rpb24gbGF5ZXIuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICovXG4gICAgcmVhZG9ubHkgd2VieHJfYmFzZUxheWVyOiBYUlByb2plY3Rpb25MYXllciB8IG51bGwgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogRW1zY3JpcHRlbiBXZWJYUiBmcmFtZWJ1ZmZlciBzY2FsZSBmYWN0b3IuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICovXG4gICAgd2VieHJfZnJhbWVidWZmZXJTY2FsZUZhY3RvcjogbnVtYmVyID0gMS4wO1xuXG4gICAgLyoqXG4gICAgICogRW1zY3JpcHRlbiBXZWJYUiBmcmFtZWJ1ZmZlcihzKS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICAvKiB3ZWJ4cl9mYm8gd2lsbCBub3QgZ2V0IG92ZXJ3cml0dGVuIGlmIHdlIGFyZSByZW5kZXJpbmcgdG8gdGhlXG4gICAgICogZGVmYXVsdCBmcmFtZWJ1ZmZlciwgZS5nLiwgd2hlbiB1c2luZyBXZWJYUiBlbXVsYXRvci4gKi9cbiAgICByZWFkb25seSB3ZWJ4cl9mYm86IG51bWJlciB8IG51bWJlcltdID0gMDtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnQgYSBXQVNNIG1lbW9yeSB2aWV3IHRvIGEgSmF2YVNjcmlwdCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHRyIFBvaW50ZXIgc3RhcnRcbiAgICAgKiBAcGFyYW0gcHRyRW5kIFBvaW50ZXIgZW5kXG4gICAgICogQHJldHVybnMgSmF2YVNjcmlwdCBzdHJpbmdcbiAgICAgKi9cbiAgICBVVEY4Vmlld1RvU3RyaW5nOiAocHRyOiBudW1iZXIsIHB0ckVuZDogbnVtYmVyKSA9PiBzdHJpbmc7XG5cbiAgICAvKiogTG9nZ2VyIGluc3RhbmNlLiAqL1xuICAgIHJlYWRvbmx5IF9sb2c6IExvZ2dlciA9IG5ldyBMb2dnZXIoKTtcblxuICAgIC8qKiBJZiBgdHJ1ZWAsIGxvZ3Mgd2lsbCBub3Qgc3BhbSB0aGUgY29uc29sZSBvbiBlcnJvci4gKi9cbiAgICBfZGVhY3RpdmF0ZV9jb21wb25lbnRfb25fZXJyb3I6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIC8qKiBUZW1wb3JhcnkgbWVtb3J5IHBvaW50ZXIuICovXG4gICAgX3RlbXBNZW06IG51bWJlciA9IG51bGwhO1xuICAgIC8qKiBUZW1wb3JhcnkgbWVtb3J5IHNpemUuICovXG4gICAgX3RlbXBNZW1TaXplOiBudW1iZXIgPSAwO1xuICAgIC8qKiBUZW1wb3JhcnkgZmxvYXQgbWVtb3J5IHZpZXcuICovXG4gICAgX3RlbXBNZW1GbG9hdDogRmxvYXQzMkFycmF5ID0gbnVsbCE7XG4gICAgLyoqIFRlbXBvcmFyeSBpbnQgbWVtb3J5IHZpZXcuICovXG4gICAgX3RlbXBNZW1JbnQ6IEludDMyQXJyYXkgPSBudWxsITtcbiAgICAvKiogVGVtcG9yYXJ5IHVpbnQ4IG1lbW9yeSB2aWV3LiAqL1xuICAgIF90ZW1wTWVtVWludDg6IFVpbnQ4QXJyYXkgPSBudWxsITtcbiAgICAvKiogVGVtcG9yYXJ5IHVpbnQzMiBtZW1vcnkgdmlldy4gKi9cbiAgICBfdGVtcE1lbVVpbnQzMjogVWludDMyQXJyYXkgPSBudWxsITtcbiAgICAvKiogVGVtcG9yYXJ5IHVpbnQxNiBtZW1vcnkgdmlldy4gKi9cbiAgICBfdGVtcE1lbVVpbnQxNjogVWludDE2QXJyYXkgPSBudWxsITtcblxuICAgIC8qKiBMb2FkaW5nIHNjcmVlbiAuYmluIGZpbGUgZGF0YSAqL1xuICAgIF9sb2FkaW5nU2NyZWVuOiBBcnJheUJ1ZmZlciB8IG51bGwgPSBudWxsO1xuXG4gICAgLyoqIExpc3Qgb2YgY2FsbGJhY2tzIHRyaWdnZXJlZCB3aGVuIHRoZSBzY2VuZSBpcyBsb2FkZWQuICovXG4gICAgcmVhZG9ubHkgX3NjZW5lTG9hZGVkQ2FsbGJhY2s6IGFueVtdID0gW107XG5cbiAgICAvKiogSW1hZ2UgY2FjaGUuICovXG4gICAgX2ltYWdlczogKEltYWdlTGlrZSB8IG51bGwpW10gPSBbbnVsbF07XG5cbiAgICAvKiogQ29tcG9uZW50IGluc3RhbmNlcy4gKi9cbiAgICBwcml2YXRlIF9jb21wb25lbnRzOiBDb21wb25lbnRbXSA9IG51bGwhO1xuXG4gICAgLyoqIENvbXBvbmVudCBUeXBlIGluZm8uICovXG4gICAgX2NvbXBvbmVudFR5cGVzOiBDb21wb25lbnRDb25zdHJ1Y3RvcltdID0gW107XG5cbiAgICAvKiogSW5kZXggcGVyIGNvbXBvbmVudCB0eXBlIG5hbWUuICovXG4gICAgX2NvbXBvbmVudFR5cGVJbmRpY2VzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG5cbiAgICAvKiogV29uZGVybGFuZCBlbmdpbmUgaW5zdGFuY2UuICovXG4gICAgcHJpdmF0ZSBfZW5naW5lOiBXb25kZXJsYW5kRW5naW5lID0gbnVsbCE7XG5cbiAgICAvKipcbiAgICAgKiBgdHJ1ZWAgaWYgdGhpcyBydW50aW1lIGlzIHVzaW5nIHBoeXN4LlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqL1xuICAgIHByaXZhdGUgX3dpdGhQaHlzWDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgLyoqIERlY29kZXIgZm9yIFVURjggYEFycmF5QnVmZmVyYCB0byBKYXZhU2NyaXB0IHN0cmluZy4gKi9cbiAgICBwcml2YXRlIHJlYWRvbmx5IF91dGY4RGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigndXRmOCcpO1xuXG4gICAgLyoqXG4gICAgICogUmVnaXN0cmF0aW9uIGluZGV4IG9mIHtAbGluayBCcm9rZW5Db21wb25lbnR9LlxuICAgICAqXG4gICAgICogVGhpcyBpcyB1c2VkIHRvIHJldHVybiBkdW1teSBpbnN0YW5jZXMgd2hlbiBhIGNvbXBvbmVudFxuICAgICAqIGlzbid0IHJlZ2lzdGVyZWQuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcHJpdmF0ZSByZWFkb25seSBfYnJva2VuQ29tcG9uZW50SW5kZXggPSAwO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBXZWJBc3NlbWJseSA8PiBBUEkgYnJpZGdlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRocmVhZHMgYHRydWVgIGlmIHRoZSBydW50aW1lIHVzZWQgaGFzIHRocmVhZHMgc3VwcG9ydFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHRocmVhZHM6IGJvb2xlYW4pIHtcbiAgICAgICAgaWYgKHRocmVhZHMpIHtcbiAgICAgICAgICAgIHRoaXMuVVRGOFZpZXdUb1N0cmluZyA9IChzOiBudW1iZXIsIGU6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghcykgcmV0dXJuICcnO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl91dGY4RGVjb2Rlci5kZWNvZGUodGhpcy5IRUFQVTguc2xpY2UocywgZSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuVVRGOFZpZXdUb1N0cmluZyA9IChzOiBudW1iZXIsIGU6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghcykgcmV0dXJuICcnO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl91dGY4RGVjb2Rlci5kZWNvZGUodGhpcy5IRUFQVTguc3ViYXJyYXkocywgZSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgICh0aGlzLl9icm9rZW5Db21wb25lbnRJbmRleCBhcyBudW1iZXIpID0gdGhpcy5fcmVnaXN0ZXJDb21wb25lbnQoQnJva2VuQ29tcG9uZW50KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNldCB0aGUgY2FjaGUgb2YgdGhlIGxpYnJhcnkuXG4gICAgICpcbiAgICAgKiBAbm90ZSBTaG91bGQgb25seSBiZSBjYWxsZWQgd2hlbiB0ZWFyaW5nIGRvd24gdGhlIHJ1bnRpbWUuXG4gICAgICovXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIC8qIENhbGxlZCBmaXJzdCB0byBwZXJmb3JtIGNsZWFudXAuICovXG4gICAgICAgIHRoaXMuX3dsX3Jlc2V0KCk7XG5cbiAgICAgICAgdGhpcy5fY29tcG9uZW50cyA9IG51bGwhO1xuICAgICAgICB0aGlzLl9pbWFnZXMubGVuZ3RoID0gMTtcbiAgICAgICAgdGhpcy5hbGxvY2F0ZVRlbXBNZW1vcnkoMTAyNCk7XG5cbiAgICAgICAgdGhpcy5fY29tcG9uZW50VHlwZXMgPSBbXTtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50VHlwZUluZGljZXMgPSB7fTtcbiAgICAgICAgKHRoaXMuX2Jyb2tlbkNvbXBvbmVudEluZGV4IGFzIG51bWJlcikgPSB0aGlzLl9yZWdpc3RlckNvbXBvbmVudChCcm9rZW5Db21wb25lbnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyB3aGV0aGVyIHRoZSBnaXZlbiBjb21wb25lbnQgaXMgcmVnaXN0ZXJlZCBvciBub3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY3RvciAgQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBjb21wb25lbnQgdHlwZW5hbWUgKGUuZy4sIGAnY3Vyc29yLWNvbXBvbmVudCdgKS5cbiAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGNvbXBvbmVudCBpcyByZWdpc3RlcmVkLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBpc1JlZ2lzdGVyZWQodHlwZTogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiB0eXBlIGluIHRoaXMuX2NvbXBvbmVudFR5cGVJbmRpY2VzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVyIGEgbGVnYWN5IGNvbXBvbmVudCBpbiB0aGlzIEVtc2NyaXB0ZW4gaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHlwZU5hbWUgVGhlIG5hbWUgb2YgdGhlIGNvbXBvbmVudC5cbiAgICAgKiBAcGFyYW0gcGFyYW1zIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBwYXJhbWV0ZXJzIChwcm9wZXJ0aWVzKS5cbiAgICAgKiBAcGFyYW0gb2JqZWN0IFRoZSBvYmplY3QncyBwcm90b3R5cGUuXG4gICAgICogQHJldHVybnMgVGhlIHJlZ2lzdHJhdGlvbiBpbmRleFxuICAgICAqL1xuICAgIF9yZWdpc3RlckNvbXBvbmVudExlZ2FjeShcbiAgICAgICAgdHlwZU5hbWU6IHN0cmluZyxcbiAgICAgICAgcGFyYW1zOiBSZWNvcmQ8c3RyaW5nLCBDb21wb25lbnRQcm9wZXJ0eT4sXG4gICAgICAgIG9iamVjdDogQ29tcG9uZW50UHJvdG9cbiAgICApIHtcbiAgICAgICAgY29uc3QgY3RvciA9IGNsYXNzIEN1c3RvbUNvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7fTtcbiAgICAgICAgY3Rvci5UeXBlTmFtZSA9IHR5cGVOYW1lO1xuICAgICAgICBjdG9yLlByb3BlcnRpZXMgPSBwYXJhbXM7XG4gICAgICAgIE9iamVjdC5hc3NpZ24oY3Rvci5wcm90b3R5cGUsIG9iamVjdCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWdpc3RlckNvbXBvbmVudChjdG9yKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlciBhIGNsYXNzIGNvbXBvbmVudCBpbiB0aGlzIEVtc2NyaXB0ZW4gaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY3RvciBUaGUgY2xhc3MgdG8gcmVnaXN0ZXIuXG4gICAgICogQHJldHVybnMgVGhlIHJlZ2lzdHJhdGlvbiBpbmRleC5cbiAgICAgKi9cbiAgICBfcmVnaXN0ZXJDb21wb25lbnQoY3RvcjogQ29tcG9uZW50Q29uc3RydWN0b3IpIHtcbiAgICAgICAgaWYgKCFjdG9yLlR5cGVOYW1lKSB0aHJvdyBuZXcgRXJyb3IoJ25vIG5hbWUgcHJvdmlkZWQgZm9yIGNvbXBvbmVudC4nKTtcbiAgICAgICAgaWYgKCFjdG9yLnByb3RvdHlwZS5fdHJpZ2dlckluaXQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICBgcmVnaXN0ZXJDb21wb25lbnQoKTogQ29tcG9uZW50ICR7Y3Rvci5UeXBlTmFtZX0gbXVzdCBleHRlbmQgQ29tcG9uZW50YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGluaGVyaXRQcm9wZXJ0aWVzKGN0b3IpO1xuICAgICAgICBfc2V0dXBEZWZhdWx0cyhjdG9yKTtcbiAgICAgICAgX3NldFByb3BlcnR5T3JkZXIoY3Rvcik7XG5cbiAgICAgICAgY29uc3QgdHlwZUluZGV4ID1cbiAgICAgICAgICAgIGN0b3IuVHlwZU5hbWUgaW4gdGhpcy5fY29tcG9uZW50VHlwZUluZGljZXNcbiAgICAgICAgICAgICAgICA/IHRoaXMuX2NvbXBvbmVudFR5cGVJbmRpY2VzW2N0b3IuVHlwZU5hbWVdXG4gICAgICAgICAgICAgICAgOiB0aGlzLl9jb21wb25lbnRUeXBlcy5sZW5ndGg7XG4gICAgICAgIHRoaXMuX2NvbXBvbmVudFR5cGVzW3R5cGVJbmRleF0gPSBjdG9yO1xuICAgICAgICB0aGlzLl9jb21wb25lbnRUeXBlSW5kaWNlc1tjdG9yLlR5cGVOYW1lXSA9IHR5cGVJbmRleDtcblxuICAgICAgICBpZiAoY3RvciA9PT0gQnJva2VuQ29tcG9uZW50KSByZXR1cm4gdHlwZUluZGV4O1xuXG4gICAgICAgIHRoaXMuX2xvZy5pbmZvKFxuICAgICAgICAgICAgTG9nVGFnLkVuZ2luZSxcbiAgICAgICAgICAgICdSZWdpc3RlcmVkIGNvbXBvbmVudCcsXG4gICAgICAgICAgICBjdG9yLlR5cGVOYW1lLFxuICAgICAgICAgICAgYChjbGFzcyAke2N0b3IubmFtZX0pYCxcbiAgICAgICAgICAgICd3aXRoIGluZGV4JyxcbiAgICAgICAgICAgIHR5cGVJbmRleFxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChjdG9yLm9uUmVnaXN0ZXIpIGN0b3Iub25SZWdpc3Rlcih0aGlzLl9lbmdpbmUpO1xuXG4gICAgICAgIHJldHVybiB0eXBlSW5kZXg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWxsb2NhdGUgdGhlIHJlcXVlc3RlZCBhbW91bnQgb2YgdGVtcG9yYXJ5IG1lbW9yeVxuICAgICAqIGluIHRoaXMgV0FTTSBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzaXplIFRoZSBudW1iZXIgb2YgYnl0ZXMgdG8gYWxsb2NhdGVcbiAgICAgKi9cbiAgICBhbGxvY2F0ZVRlbXBNZW1vcnkoc2l6ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX2xvZy5pbmZvKExvZ1RhZy5FbmdpbmUsICdBbGxvY2F0aW5nIHRlbXAgbWVtOicsIHNpemUpO1xuICAgICAgICB0aGlzLl90ZW1wTWVtU2l6ZSA9IHNpemU7XG4gICAgICAgIGlmICh0aGlzLl90ZW1wTWVtKSB0aGlzLl9mcmVlKHRoaXMuX3RlbXBNZW0pO1xuICAgICAgICB0aGlzLl90ZW1wTWVtID0gdGhpcy5fbWFsbG9jKHRoaXMuX3RlbXBNZW1TaXplKTtcbiAgICAgICAgdGhpcy51cGRhdGVUZW1wTWVtb3J5KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHRvZG86IERlbGV0ZSB0aGlzIGFuZCBvbmx5IGtlZXAgYGFsbG9jYXRlVGVtcE1lbW9yeWBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzaXplIE51bWJlciBvZiBieXRlcyB0byBhbGxvY2F0ZVxuICAgICAqL1xuICAgIHJlcXVpcmVUZW1wTWVtKHNpemU6IG51bWJlcikge1xuICAgICAgICBpZiAodGhpcy5fdGVtcE1lbVNpemUgPj0gc2l6ZSkgcmV0dXJuO1xuICAgICAgICAvKiBHcm93IGluIDFrYiBpbmNyZW1lbnRzICovXG4gICAgICAgIHRoaXMuYWxsb2NhdGVUZW1wTWVtb3J5KE1hdGguY2VpbChzaXplIC8gMTAyNCkgKiAxMDI0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIHRlbXBvcmFyeSBtZW1vcnkgdmlld3MuIFRoaXMgbXVzdCBiZSBjYWxsZWQgd2hlbmV2ZXIgdGhlXG4gICAgICogdGVtcG9yYXJ5IG1lbW9yeSBhZGRyZXNzIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICovXG4gICAgdXBkYXRlVGVtcE1lbW9yeSgpIHtcbiAgICAgICAgdGhpcy5fdGVtcE1lbUZsb2F0ID0gbmV3IEZsb2F0MzJBcnJheShcbiAgICAgICAgICAgIHRoaXMuSEVBUDguYnVmZmVyLFxuICAgICAgICAgICAgdGhpcy5fdGVtcE1lbSxcbiAgICAgICAgICAgIHRoaXMuX3RlbXBNZW1TaXplID4+IDJcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5fdGVtcE1lbUludCA9IG5ldyBJbnQzMkFycmF5KFxuICAgICAgICAgICAgdGhpcy5IRUFQOC5idWZmZXIsXG4gICAgICAgICAgICB0aGlzLl90ZW1wTWVtLFxuICAgICAgICAgICAgdGhpcy5fdGVtcE1lbVNpemUgPj4gMlxuICAgICAgICApO1xuICAgICAgICB0aGlzLl90ZW1wTWVtVWludDMyID0gbmV3IFVpbnQzMkFycmF5KFxuICAgICAgICAgICAgdGhpcy5IRUFQOC5idWZmZXIsXG4gICAgICAgICAgICB0aGlzLl90ZW1wTWVtLFxuICAgICAgICAgICAgdGhpcy5fdGVtcE1lbVNpemUgPj4gMlxuICAgICAgICApO1xuICAgICAgICB0aGlzLl90ZW1wTWVtVWludDE2ID0gbmV3IFVpbnQxNkFycmF5KFxuICAgICAgICAgICAgdGhpcy5IRUFQOC5idWZmZXIsXG4gICAgICAgICAgICB0aGlzLl90ZW1wTWVtLFxuICAgICAgICAgICAgdGhpcy5fdGVtcE1lbVNpemUgPj4gMVxuICAgICAgICApO1xuICAgICAgICB0aGlzLl90ZW1wTWVtVWludDggPSBuZXcgVWludDhBcnJheShcbiAgICAgICAgICAgIHRoaXMuSEVBUDguYnVmZmVyLFxuICAgICAgICAgICAgdGhpcy5fdGVtcE1lbSxcbiAgICAgICAgICAgIHRoaXMuX3RlbXBNZW1TaXplXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHVpbnQ4IGJ1ZmZlciB2aWV3IG9uIHRlbXBvcmFyeSBXQVNNIG1lbW9yeS5cbiAgICAgKlxuICAgICAqICoqTm90ZSoqOiB0aGlzIG1ldGhvZCBtaWdodCBhbGxvY2F0ZSBpZiB0aGUgcmVxdWVzdGVkIG1lbW9yeSBpcyBiaWdnZXJcbiAgICAgKiB0aGFuIHRoZSBjdXJyZW50IHRlbXBvcmFyeSBtZW1vcnkgYWxsb2NhdGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvdW50IFRoZSBudW1iZXIgb2YgKiplbGVtZW50cyoqIHJlcXVpcmVkXG4gICAgICogQHJldHVybnMgQSB7QGxpbmsgVHlwZWRBcnJheX0gb3ZlciB0aGUgV0FTTSBtZW1vcnlcbiAgICAgKi9cbiAgICBnZXRUZW1wQnVmZmVyVTgoY291bnQ6IG51bWJlcik6IFVpbnQ4QXJyYXkge1xuICAgICAgICB0aGlzLnJlcXVpcmVUZW1wTWVtKGNvdW50KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RlbXBNZW1VaW50ODtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgdWludDE2IGJ1ZmZlciB2aWV3IG9uIHRlbXBvcmFyeSBXQVNNIG1lbW9yeS5cbiAgICAgKlxuICAgICAqICoqTm90ZSoqOiB0aGlzIG1ldGhvZCBtaWdodCBhbGxvY2F0ZSBpZiB0aGUgcmVxdWVzdGVkIG1lbW9yeSBpcyBiaWdnZXJcbiAgICAgKiB0aGFuIHRoZSBjdXJyZW50IHRlbXBvcmFyeSBtZW1vcnkgYWxsb2NhdGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvdW50IFRoZSBudW1iZXIgb2YgKiplbGVtZW50cyoqIHJlcXVpcmVkXG4gICAgICogQHJldHVybnMgQSB7QGxpbmsgVHlwZWRBcnJheX0gb3ZlciB0aGUgV0FTTSBtZW1vcnlcbiAgICAgKi9cbiAgICBnZXRUZW1wQnVmZmVyVTE2KGNvdW50OiBudW1iZXIpOiBVaW50MTZBcnJheSB7XG4gICAgICAgIHRoaXMucmVxdWlyZVRlbXBNZW0oY291bnQgKiAyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RlbXBNZW1VaW50MTY7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHVpbnQzMiBidWZmZXIgdmlldyBvbiB0ZW1wb3JhcnkgV0FTTSBtZW1vcnkuXG4gICAgICpcbiAgICAgKiAqKk5vdGUqKjogdGhpcyBtZXRob2QgbWlnaHQgYWxsb2NhdGUgaWYgdGhlIHJlcXVlc3RlZCBtZW1vcnkgaXMgYmlnZ2VyXG4gICAgICogdGhhbiB0aGUgY3VycmVudCB0ZW1wb3JhcnkgbWVtb3J5IGFsbG9jYXRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb3VudCBUaGUgbnVtYmVyIG9mICoqZWxlbWVudHMqKiByZXF1aXJlZC5cbiAgICAgKiBAcmV0dXJucyBBIHtAbGluayBUeXBlZEFycmF5fSBvdmVyIHRoZSBXQVNNIG1lbW9yeS5cbiAgICAgKi9cbiAgICBnZXRUZW1wQnVmZmVyVTMyKGNvdW50OiBudW1iZXIpOiBVaW50MzJBcnJheSB7XG4gICAgICAgIHRoaXMucmVxdWlyZVRlbXBNZW0oY291bnQgKiA0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RlbXBNZW1VaW50MzI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGludDMyIGJ1ZmZlciB2aWV3IG9uIHRlbXBvcmFyeSBXQVNNIG1lbW9yeS5cbiAgICAgKlxuICAgICAqICoqTm90ZSoqOiB0aGlzIG1ldGhvZCBtaWdodCBhbGxvY2F0ZSBpZiB0aGUgcmVxdWVzdGVkIG1lbW9yeSBpcyBiaWdnZXJcbiAgICAgKiB0aGFuIHRoZSBjdXJyZW50IHRlbXBvcmFyeSBtZW1vcnkgYWxsb2NhdGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvdW50IFRoZSBudW1iZXIgb2YgKiplbGVtZW50cyoqIHJlcXVpcmVkLlxuICAgICAqIEByZXR1cm5zIEEge0BsaW5rIFR5cGVkQXJyYXl9IG92ZXIgdGhlIFdBU00gbWVtb3J5LlxuICAgICAqL1xuICAgIGdldFRlbXBCdWZmZXJJMzIoY291bnQ6IG51bWJlcik6IEludDMyQXJyYXkge1xuICAgICAgICB0aGlzLnJlcXVpcmVUZW1wTWVtKGNvdW50ICogNCk7XG4gICAgICAgIHJldHVybiB0aGlzLl90ZW1wTWVtSW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBmbG9hdDMyIGJ1ZmZlciB2aWV3IG9uIHRlbXBvcmFyeSBXQVNNIG1lbW9yeS5cbiAgICAgKlxuICAgICAqICoqTm90ZSoqOiB0aGlzIG1ldGhvZCBtaWdodCBhbGxvY2F0ZSBpZiB0aGUgcmVxdWVzdGVkIG1lbW9yeSBpcyBiaWdnZXJcbiAgICAgKiB0aGFuIHRoZSBjdXJyZW50IHRlbXBvcmFyeSBtZW1vcnkgYWxsb2NhdGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvdW50IFRoZSBudW1iZXIgb2YgKiplbGVtZW50cyoqIHJlcXVpcmVkLlxuICAgICAqIEByZXR1cm5zIEEge0BsaW5rIFR5cGVkQXJyYXl9IG92ZXIgdGhlIFdBU00gbWVtb3J5LlxuICAgICAqL1xuICAgIGdldFRlbXBCdWZmZXJGMzIoY291bnQ6IG51bWJlcik6IEZsb2F0MzJBcnJheSB7XG4gICAgICAgIHRoaXMucmVxdWlyZVRlbXBNZW0oY291bnQgKiA0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RlbXBNZW1GbG9hdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb3B5IHRoZSBzdHJpbmcgaW50byB0ZW1wb3JhcnkgV0FTTSBtZW1vcnkgYW5kIHJldHJpZXZlIHRoZSBwb2ludGVyLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBtZXRob2Qgd2lsbCBjb21wdXRlIHRoZSBzdHJsZW4gYW5kIGFwcGVuZCBhIGBcXDBgLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhlIHJlc3VsdCBzaG91bGQgYmUgdXNlZCAqKmRpcmVjdGx5Kiogb3RoZXJ3aXNlIGl0IG1pZ2h0IGdldFxuICAgICAqIG92ZXJyaWRkZW4gYnkgYW55IG5leHQgY2FsbCBtb2RpZnlpbmcgdGhlIHRlbXBvcmFyeSBtZW1vcnkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3RyIFRoZSBzdHJpbmcgdG8gd3JpdGUgdG8gdGVtcG9yYXJ5IG1lbW9yeVxuICAgICAqIEBwYXJhbSBieXRlT2Zmc2V0IFRoZSBzdGFydGluZyBieXRlIG9mZnNldCBpbiB0aGUgdGVtcG9yYXJ5IG1lbW9yeSBhdCB3aGljaFxuICAgICAqICAgICB0aGUgc3RyaW5nIHNob3VsZCBiZSB3cml0dGVuLiBUaGlzIGlzIHVzZWZ1bCB3aGVuIHVzaW5nIG11bHRpcGxlIHRlbXBvcmFyaWVzLlxuICAgICAqIEByZXR1cm4gVGhlIHRlbXBvcmFyeSBwb2ludGVyIG9udG8gdGhlIFdBU00gbWVtb3J5XG4gICAgICovXG4gICAgdGVtcFVURjgoc3RyOiBzdHJpbmcsIGJ5dGVPZmZzZXQgPSAwKTogbnVtYmVyIHtcbiAgICAgICAgY29uc3Qgc3RyTGVuID0gdGhpcy5sZW5ndGhCeXRlc1VURjgoc3RyKSArIDE7XG4gICAgICAgIHRoaXMucmVxdWlyZVRlbXBNZW0oc3RyTGVuICsgYnl0ZU9mZnNldCk7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMuX3RlbXBNZW0gKyBieXRlT2Zmc2V0O1xuICAgICAgICB0aGlzLnN0cmluZ1RvVVRGOChzdHIsIHB0ciwgc3RyTGVuKTtcbiAgICAgICAgcmV0dXJuIHB0cjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb3B5IHRoZSBidWZmZXIgaW50byB0aGUgV0FTTSBoZWFwLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhlIHJldHVybmVkIHBvaW50ZXIgbXVzdCBiZSBmcmVlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBidWZmZXIgVGhlIGJ1ZmZlciB0byBjb3B5IGludG8gdGhlIGhlYXAuXG4gICAgICogQHJldHVybnMgQW4gYWxsb2NhdGVkIHBvaW50ZXIsIHRoYXQgbXVzdCBiZSBmcmVlIGFmdGVyIHVzZS5cbiAgICAgKi9cbiAgICBjb3B5QnVmZmVyVG9IZWFwKGJ1ZmZlcjogQXJyYXlCdWZmZXIpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBzaXplID0gYnVmZmVyLmJ5dGVMZW5ndGg7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMuX21hbGxvYyhzaXplKTtcbiAgICAgICAgdGhpcy5IRUFQVTguc2V0KG5ldyBVaW50OEFycmF5KGJ1ZmZlciksIHB0cik7XG4gICAgICAgIHJldHVybiBwdHI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHJ1bnRpbWUgc3VwcG9ydHMgcGh5c3ggb3Igbm90LlxuICAgICAqL1xuICAgIGdldCB3aXRoUGh5c1goKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl93aXRoUGh5c1g7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBlbmdpbmUgaW5zdGFuY2UgaG9sZGluZyB0aGlzIGJyaWRnZS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlbmdpbmUgVGhlIGVuZ2luZSBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgX3NldEVuZ2luZShlbmdpbmU6IFdvbmRlcmxhbmRFbmdpbmUpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fZW5naW5lID0gZW5naW5lO1xuICAgIH1cblxuICAgIC8qIFdlYkFzc2VtYmx5IHRvIEpTIGNhbGwgYnJpZGdlLiAqL1xuXG4gICAgcHJvdGVjdGVkIF93bGpzX3hyX3Nlc3Npb25fc3RhcnQobW9kZTogWFJTZXNzaW9uTW9kZSkge1xuICAgICAgICBpZiAodGhpcy5fZW5naW5lLnhyID09PSBudWxsKSB7XG4gICAgICAgICAgICAodGhpcy5fZW5naW5lLnhyIGFzIFhSIHwgbnVsbCkgPSBuZXcgWFIodGhpcywgbW9kZSk7XG4gICAgICAgICAgICB0aGlzLl9lbmdpbmUub25YUlNlc3Npb25TdGFydC5ub3RpZnkodGhpcy53ZWJ4cl9zZXNzaW9uISwgbW9kZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJvdGVjdGVkIF93bGpzX3hyX3Nlc3Npb25fZW5kKCkge1xuICAgICAgICBjb25zdCBzdGFydEVtaXR0ZXIgPSB0aGlzLl9lbmdpbmUub25YUlNlc3Npb25TdGFydDtcbiAgICAgICAgaWYgKHN0YXJ0RW1pdHRlciBpbnN0YW5jZW9mIFJldGFpbkVtaXR0ZXIpIHN0YXJ0RW1pdHRlci5yZXNldCgpO1xuICAgICAgICB0aGlzLl9lbmdpbmUub25YUlNlc3Npb25FbmQubm90aWZ5KCk7XG4gICAgICAgICh0aGlzLl9lbmdpbmUueHIgYXMgbnVsbCkgPSBudWxsO1xuICAgIH1cbiAgICBwcm90ZWN0ZWQgX3dsanNfeHJfZGlzYWJsZSgpIHtcbiAgICAgICAgLyogQHRvZG8gVGhpcyBjb3VsZCBkaXJlY3RseSBiZSBmdWxseSBoYW5kbGVkIGluIEpTLiAqL1xuICAgICAgICAodGhpcy5fZW5naW5lLmFyU3VwcG9ydGVkIGFzIGJvb2xlYW4pID0gZmFsc2U7XG4gICAgICAgICh0aGlzLl9lbmdpbmUudnJTdXBwb3J0ZWQgYXMgYm9vbGVhbikgPSBmYWxzZTtcbiAgICB9XG4gICAgcHJvdGVjdGVkIF93bGpzX2luaXQod2l0aFBoeXNYOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX3dpdGhQaHlzWCA9IHdpdGhQaHlzWDtcblxuICAgICAgICAvKiBUYXJnZXQgbWVtb3J5IGZvciBKUyBBUEkgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIGFycmF5cyAqL1xuICAgICAgICB0aGlzLmFsbG9jYXRlVGVtcE1lbW9yeSgxMDI0KTtcbiAgICB9XG4gICAgcHJvdGVjdGVkIF93bGpzX3NjZW5lX3N3aXRjaChpbmRleDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gdGhpcy5fZW5naW5lLl9zY2VuZXNbaW5kZXhdIGFzIFNjZW5lIHwgbnVsbDtcbiAgICAgICAgLyogU2NlbmUgY2FuIGJlIG51bGwgZHVyaW5nIHRlc3Rpbmcgd2l0aCBgZW5naW5lLnJlc2V0KClgICovXG4gICAgICAgIHRoaXMuX2NvbXBvbmVudHMgPSBzY2VuZT8uX2pzQ29tcG9uZW50cyA/PyBudWxsITtcbiAgICB9XG4gICAgcHJvdGVjdGVkIF93bGpzX2Rlc3Ryb3lfaW1hZ2UoaW5kZXg6IG51bWJlcikge1xuICAgICAgICBjb25zdCBpbWcgPSB0aGlzLl9pbWFnZXNbaW5kZXhdO1xuICAgICAgICBpZiAoIWltZykgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMuX2ltYWdlc1tpbmRleF0gPSBudWxsO1xuXG4gICAgICAgIGlmICgoaW1nIGFzIEhUTUxJbWFnZUVsZW1lbnQpLnNyYyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAoaW1nIGFzIEhUTUxJbWFnZUVsZW1lbnQpLnNyYyA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoaW1nIGFzIEhUTUxJbWFnZUVsZW1lbnQpLm9ubG9hZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbWcub25sb2FkID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKGltZyBhcyBIVE1MSW1hZ2VFbGVtZW50KS5vbmVycm9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGltZy5vbmVycm9yID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcm90ZWN0ZWQgX3dsanNfb2JqZWN0c19tYXJrRGVzdHJveWVkKFxuICAgICAgICBzY2VuZUluZGV4OiBudW1iZXIsXG4gICAgICAgIGlkc1B0cjogbnVtYmVyLFxuICAgICAgICBjb3VudDogbnVtYmVyXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gdGhpcy5fZW5naW5lLl9zY2VuZXNbc2NlbmVJbmRleF0gYXMgU2NlbmU7XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gaWRzUHRyID4+PiAxO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gdGhpcy5IRUFQVTE2W3N0YXJ0ICsgaV07XG4gICAgICAgICAgICBzY2VuZS5fZGVzdHJveU9iamVjdChpZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJvdGVjdGVkIF93bGpzX3NjZW5lX2luaXRpYWxpemUoXG4gICAgICAgIHNjZW5lSW5kZXg6IG51bWJlcixcbiAgICAgICAgaWRzUHRyOiBudW1iZXIsXG4gICAgICAgIGlkc0VuZDogbnVtYmVyLFxuICAgICAgICBwYXJhbURhdGFQdHI6IG51bWJlcixcbiAgICAgICAgcGFyYW1EYXRhRW5kUHRyOiBudW1iZXIsXG4gICAgICAgIG9mZnNldHNQdHI6IG51bWJlcixcbiAgICAgICAgb2Zmc2V0c0VuZFB0cjogbnVtYmVyXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IGNib3IgPSB0aGlzLkhFQVBVOC5zdWJhcnJheShwYXJhbURhdGFQdHIsIHBhcmFtRGF0YUVuZFB0cik7XG4gICAgICAgIGNvbnN0IG9mZnNldHMgPSB0aGlzLkhFQVBVMzIuc3ViYXJyYXkob2Zmc2V0c1B0ciA+Pj4gMiwgb2Zmc2V0c0VuZFB0ciA+Pj4gMik7XG4gICAgICAgIGNvbnN0IGlkcyA9IHRoaXMuSEVBUFUxNi5zdWJhcnJheShpZHNQdHIgPj4+IDEsIGlkc0VuZCA+Pj4gMSk7XG5cbiAgICAgICAgY29uc3QgZW5naW5lID0gdGhpcy5fZW5naW5lO1xuICAgICAgICBjb25zdCBzY2VuZSA9IGVuZ2luZS5fc2NlbmVzW3NjZW5lSW5kZXhdIGFzIFNjZW5lO1xuICAgICAgICBjb25zdCBjb21wb25lbnRzID0gc2NlbmUuX2pzQ29tcG9uZW50cztcblxuICAgICAgICBsZXQgZGVjb2RlZDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGRlY29kZWQgPSBDQk9SLmRlY29kZShjYm9yKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5fbG9nLmVycm9yKExvZ1RhZy5FbmdpbmUsICdFeGNlcHRpb24gZHVyaW5nIGNvbXBvbmVudCBwYXJhbWV0ZXIgZGVjb2RpbmcnKTtcbiAgICAgICAgICAgIHRoaXMuX2xvZy5lcnJvcihMb2dUYWcuQ29tcG9uZW50LCBlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShkZWNvZGVkKSkge1xuICAgICAgICAgICAgdGhpcy5fbG9nLmVycm9yKExvZ1RhZy5FbmdpbmUsICdQYXJhbWV0ZXIgZGF0YSBtdXN0IGJlIGFuIGFycmF5Jyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlY29kZWQubGVuZ3RoICE9PSBpZHMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLl9sb2cuZXJyb3IoXG4gICAgICAgICAgICAgICAgTG9nVGFnLkVuZ2luZSxcbiAgICAgICAgICAgICAgICBgUGFyYW1ldGVyIGRhdGEgaGFzIHNpemUgJHtkZWNvZGVkLmxlbmd0aH0gYnV0IGV4cGVjdGVkICR7aWRzLmxlbmd0aH1gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZWNvZGVkLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IENvbXBvbmVudC5fcGFjayhzY2VuZUluZGV4LCBpZHNbaV0pO1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLl93bF9nZXRfanNfY29tcG9uZW50X2luZGV4X2Zvcl9pZChpZCk7XG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnQgPSBjb21wb25lbnRzW2luZGV4XTtcbiAgICAgICAgICAgIGNvbnN0IGN0b3IgPSBjb21wb25lbnQuY29uc3RydWN0b3IgYXMgQ29tcG9uZW50Q29uc3RydWN0b3I7XG4gICAgICAgICAgICBpZiAoY3RvciA9PSBCcm9rZW5Db21wb25lbnQpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBjb25zdCBwYXJhbU5hbWVzID0gY3Rvci5fcHJvcGVydHlPcmRlcjtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtVmFsdWVzID0gZGVjb2RlZFtpXTtcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShwYXJhbVZhbHVlcykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9sb2cuZXJyb3IoTG9nVGFnLkVuZ2luZSwgJ0NvbXBvbmVudCBwYXJhbWV0ZXIgZGF0YSBtdXN0IGJlIGFuIGFycmF5Jyk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyYW1WYWx1ZXMubGVuZ3RoICE9PSBwYXJhbU5hbWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2xvZy5lcnJvcihcbiAgICAgICAgICAgICAgICAgICAgTG9nVGFnLkVuZ2luZSxcbiAgICAgICAgICAgICAgICAgICAgYENvbXBvbmVudCBwYXJhbWV0ZXIgZGF0YSBoYXMgc2l6ZSAke3BhcmFtVmFsdWVzLmxlbmd0aH0gYnV0IGV4cGVjdGVkICR7cGFyYW1OYW1lcy5sZW5ndGh9YFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcGFyYW1WYWx1ZXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gcGFyYW1OYW1lc1tqXTtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IGN0b3IuUHJvcGVydGllc1tuYW1lXTtcbiAgICAgICAgICAgICAgICBjb25zdCB0eXBlID0gcHJvcGVydHkudHlwZTtcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBwYXJhbVZhbHVlc1tqXTtcblxuICAgICAgICAgICAgICAgIC8qIERlZmF1bHQgdmFsdWVzIGFyZSBzZW50IGFzIHVuZGVmaW5lZCB0byBhdm9pZCB3YXN0aW5nIHNwYWNlICovXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xvbmVyID0gcHJvcGVydHkuY2xvbmVyID8/IGRlZmF1bHRQcm9wZXJ0eUNsb25lcjtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBjbG9uZXIuY2xvbmUodHlwZSwgcHJvcGVydHkuZGVmYXVsdCk7XG4gICAgICAgICAgICAgICAgICAgIChjb21wb25lbnQgYXMgUmVjb3JkPHN0cmluZywgYW55PilbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyogVGhpcyBza2lwcyB1bnNldCByZXNvdXJjZSBwYXJhbWV0ZXJzIGFzIHRob3NlIGFyZSBzZW50XG4gICAgICAgICAgICAgICAgICogZGlyZWN0bHkgd2l0aCB0eXBlIG51bGwuIE9mZnNldHMgZm9yIEludCBhbmQgRmxvYXQgdHlwZXNcbiAgICAgICAgICAgICAgICAgKiBzaG91bGQgYWx3YXlzIGJlIDAuICovXG4gICAgICAgICAgICAgICAgLyoqIEB0b2RvIENCT1IgdGFnIHRvIG1hcmsgcmVzb3VyY2VzPyBXYXN0ZXMgYSBieXRlIHRob3VnaC4gKi9cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSArPSBvZmZzZXRzW3R5cGVdO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGUuQm9vbDpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlLkludDpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlLkZsb2F0OlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGUuU3RyaW5nOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGUuRW51bTpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlLlZlY3RvcjI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZS5WZWN0b3IzOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGUuVmVjdG9yNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIE5vdGhpbmcgdG8gZG8gKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGUuT2JqZWN0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc2NlbmUud3JhcCh0aGlzLl93bF9vYmplY3RfaWQoc2NlbmUuX2luZGV4LCB2YWx1ZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZS5NZXNoOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBlbmdpbmUubWVzaGVzLndyYXAodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZS5UZXh0dXJlOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBlbmdpbmUudGV4dHVyZXMud3JhcCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlLk1hdGVyaWFsOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBlbmdpbmUubWF0ZXJpYWxzLndyYXAodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZS5BbmltYXRpb246XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHNjZW5lLmFuaW1hdGlvbnMud3JhcCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlLlNraW46XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHNjZW5lLnNraW5zLndyYXAodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZS5Db2xvcjpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIENvbG9ycyBhcmUgc2VudCBhcyBVaW50OEFycmF5LiBOb3JtYWxpemUgcG9zaXRpdmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIGludGVnZXIgdmFsdWVzIHRvIDAtMS4gRG9uJ3QgYXNzdW1lIGFueSBiaXQgc2l6ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICogaGVyZSwgY291bGQgYmVjb21lIFVpbnQxNkFycmF5IGFzIHdlbGwuICovXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXggPSAoMSA8PCAodmFsdWUuQllURVNfUEVSX0VMRU1FTlQgKiA4KSkgLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBGbG9hdDMyQXJyYXkuZnJvbSh2YWx1ZSwgKGY6IG51bWJlciwgXykgPT4gZiAvIG1heCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAoY29tcG9uZW50IGFzIFJlY29yZDxzdHJpbmcsIGFueT4pW25hbWVdID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgX3dsanNfc2V0X2NvbXBvbmVudF9wYXJhbV90cmFuc2xhdGlvbihcbiAgICAgICAgc2NlbmU6IG51bWJlcixcbiAgICAgICAgY29tcG9uZW50OiBudW1iZXIsXG4gICAgICAgIHBhcmFtOiBudW1iZXIsXG4gICAgICAgIHZhbHVlUHRyOiBudW1iZXIsXG4gICAgICAgIHZhbHVlRW5kUHRyOiBudW1iZXJcbiAgICApIHtcbiAgICAgICAgY29uc3QgY29tcG9uZW50cyA9ICh0aGlzLl9lbmdpbmUuX3NjZW5lc1tzY2VuZV0gYXMgU2NlbmUpLl9qc0NvbXBvbmVudHM7XG4gICAgICAgIGNvbnN0IGNvbXAgPSBjb21wb25lbnRzW2NvbXBvbmVudF07XG5cbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLlVURjhWaWV3VG9TdHJpbmcodmFsdWVQdHIsIHZhbHVlRW5kUHRyKTtcbiAgICAgICAgY29uc3QgY3RvciA9IGNvbXAuY29uc3RydWN0b3IgYXMgQ29tcG9uZW50Q29uc3RydWN0b3I7XG4gICAgICAgIGNvbnN0IHBhcmFtTmFtZSA9IGN0b3IuX3Byb3BlcnR5T3JkZXJbcGFyYW1dO1xuICAgICAgICAoY29tcCBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+KVtwYXJhbU5hbWVdID0gdmFsdWU7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIF93bGpzX2dldF9jb21wb25lbnRfdHlwZV9pbmRleChuYW1lUHRyOiBudW1iZXIsIG5hbWVFbmRQdHI6IG51bWJlcikge1xuICAgICAgICBjb25zdCB0eXBlbmFtZSA9IHRoaXMuVVRGOFZpZXdUb1N0cmluZyhuYW1lUHRyLCBuYW1lRW5kUHRyKTtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLl9jb21wb25lbnRUeXBlSW5kaWNlc1t0eXBlbmFtZV07XG4gICAgICAgIGlmIChpbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYnJva2VuQ29tcG9uZW50SW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH1cbiAgICBwcm90ZWN0ZWQgX3dsanNfY29tcG9uZW50X2NyZWF0ZShcbiAgICAgICAgc2NlbmVJbmRleDogbnVtYmVyLFxuICAgICAgICBpbmRleDogbnVtYmVyLFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICB0eXBlOiBudW1iZXIsXG4gICAgICAgIG9iamVjdDogbnVtYmVyXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gdGhpcy5fZW5naW5lLl9zY2VuZXNbc2NlbmVJbmRleF0gYXMgU2NlbmU7XG4gICAgICAgIHNjZW5lLl9jb21wb25lbnRzLmNyZWF0ZUpzKGluZGV4LCBpZCwgdHlwZSwgb2JqZWN0KTtcbiAgICB9XG4gICAgcHJvdGVjdGVkIF93bGpzX2NvbXBvbmVudF9pbml0KHNjZW5lOiBudW1iZXIsIGNvbXBvbmVudDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudHMgPSAodGhpcy5fZW5naW5lLl9zY2VuZXNbc2NlbmVdIGFzIFNjZW5lKS5fanNDb21wb25lbnRzO1xuICAgICAgICBjb25zdCBjID0gY29tcG9uZW50c1tjb21wb25lbnRdO1xuICAgICAgICBjLl90cmlnZ2VySW5pdCgpO1xuICAgIH1cbiAgICBwcm90ZWN0ZWQgX3dsanNfY29tcG9uZW50X3VwZGF0ZShjb21wb25lbnQ6IG51bWJlciwgZHQ6IG51bWJlcikge1xuICAgICAgICBjb25zdCBjID0gdGhpcy5fY29tcG9uZW50c1tjb21wb25lbnRdO1xuICAgICAgICBjLl90cmlnZ2VyVXBkYXRlKGR0KTtcbiAgICB9XG4gICAgcHJvdGVjdGVkIF93bGpzX2NvbXBvbmVudF9vbkFjdGl2YXRlKGNvbXBvbmVudDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IGMgPSB0aGlzLl9jb21wb25lbnRzW2NvbXBvbmVudF07XG4gICAgICAgIGMuX3RyaWdnZXJPbkFjdGl2YXRlKCk7XG4gICAgfVxuICAgIHByb3RlY3RlZCBfd2xqc19jb21wb25lbnRfb25EZWFjdGl2YXRlKGNvbXBvbmVudDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IGMgPSB0aGlzLl9jb21wb25lbnRzW2NvbXBvbmVudF07XG4gICAgICAgIGMuX3RyaWdnZXJPbkRlYWN0aXZhdGUoKTtcbiAgICB9XG4gICAgcHJvdGVjdGVkIF93bGpzX2NvbXBvbmVudF9tYXJrRGVzdHJveWVkKFxuICAgICAgICBzY2VuZUluZGV4OiBudW1iZXIsXG4gICAgICAgIG1hbmFnZXI6IG51bWJlcixcbiAgICAgICAgY29tcG9uZW50SWQ6IG51bWJlclxuICAgICkge1xuICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMuX2VuZ2luZS5fc2NlbmVzW3NjZW5lSW5kZXhdIGFzIFByZWZhYjtcbiAgICAgICAgc2NlbmUuX2Rlc3Ryb3lDb21wb25lbnQobWFuYWdlciwgY29tcG9uZW50SWQpO1xuICAgIH1cbiAgICBwcm90ZWN0ZWQgX3dsanNfc3dhcChzY2VuZTogbnVtYmVyLCBhOiBudW1iZXIsIGI6IG51bWJlcikge1xuICAgICAgICBjb25zdCBjb21wb25lbnRzID0gKHRoaXMuX2VuZ2luZS5fc2NlbmVzW3NjZW5lXSBhcyBTY2VuZSkuX2pzQ29tcG9uZW50cztcbiAgICAgICAgY29uc3QgY29tcG9uZW50QSA9IGNvbXBvbmVudHNbYV07XG4gICAgICAgIGNvbXBvbmVudHNbYV0gPSBjb21wb25lbnRzW2JdO1xuICAgICAgICBjb21wb25lbnRzW2JdID0gY29tcG9uZW50QTtcbiAgICB9XG4gICAgcHJvdGVjdGVkIF93bGpzX2NvcHkoXG4gICAgICAgIHNyY1NjZW5lSW5kZXg6IG51bWJlcixcbiAgICAgICAgc3JjSW5kZXg6IG51bWJlcixcbiAgICAgICAgZHN0U2NlbmVJbmRleDogbnVtYmVyLFxuICAgICAgICBkc3RJbmRleDogbnVtYmVyLFxuICAgICAgICBvZmZzZXRzUHRyOiBudW1iZXJcbiAgICApIHtcbiAgICAgICAgY29uc3Qgc3JjU2NlbmUgPSB0aGlzLl9lbmdpbmUuX3NjZW5lc1tzcmNTY2VuZUluZGV4XSBhcyBTY2VuZTtcbiAgICAgICAgY29uc3QgZHN0U2NlbmUgPSB0aGlzLl9lbmdpbmUuX3NjZW5lc1tkc3RTY2VuZUluZGV4XSBhcyBTY2VuZTtcbiAgICAgICAgY29uc3QgZGVzdENvbXAgPSBkc3RTY2VuZS5fanNDb21wb25lbnRzW2RzdEluZGV4XTtcbiAgICAgICAgY29uc3Qgc3JjQ29tcCA9IHNyY1NjZW5lLl9qc0NvbXBvbmVudHNbc3JjSW5kZXhdO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZGVzdENvbXAuX2NvcHkoc3JjQ29tcCwgb2Zmc2V0c1B0cik7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2xvZy5lcnJvcihcbiAgICAgICAgICAgICAgICBMb2dUYWcuQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgIGBFeGNlcHRpb24gZHVyaW5nICR7ZGVzdENvbXAudHlwZX0gY29weSgpIG9uIG9iamVjdCAke2Rlc3RDb21wLm9iamVjdC5uYW1lfWBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLl9sb2cuZXJyb3IoTG9nVGFnLkNvbXBvbmVudCwgZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9yd2FyZCBhbiBhbmltYXRpb24gZXZlbnQgdG8gYSBjb3JyZXNwb25kaW5nXG4gICAgICoge0BsaW5rIEFuaW1hdGlvbkNvbXBvbmVudH1cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS4gUGxlYXNlIGhhdmUgYSBsb29rIGF0XG4gICAgICoge0BsaW5rIEFuaW1hdGlvbkNvbXBvbmVudC5vbkV2ZW50fSBpbnN0ZWFkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbXBvbmVudElkIENvbXBvbmVudCBpZCBpbiB0aGUgbWFuYWdlclxuICAgICAqIEBwYXJhbSBuYW1lUHRyIFBvaW50ZXIgdG8gVVRGOCBldmVudCBuYW1lXG4gICAgICogQHBhcmFtIG5hbWVFbmRQdHIgUG9pbnRlciB0byBlbmQgb2YgVVRGOCBldmVudCBuYW1lXG4gICAgICovXG4gICAgcHJvdGVjdGVkIF93bGpzX3RyaWdnZXJfYW5pbWF0aW9uRXZlbnQoXG4gICAgICAgIGNvbXBvbmVudElkOiBudW1iZXIsXG4gICAgICAgIG5hbWVQdHI6IG51bWJlcixcbiAgICAgICAgbmFtZUVuZFB0cjogbnVtYmVyXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gdGhpcy5fZW5naW5lLnNjZW5lO1xuICAgICAgICBjb25zdCBjb21wID0gc2NlbmUuX2NvbXBvbmVudHMud3JhcEFuaW1hdGlvbihjb21wb25lbnRJZCk7XG4gICAgICAgIGNvbnN0IG5hbWVTdHIgPSB0aGlzLlVURjhWaWV3VG9TdHJpbmcobmFtZVB0ciwgbmFtZUVuZFB0cik7XG4gICAgICAgIGNvbXAub25FdmVudC5ub3RpZnkobmFtZVN0cik7XG4gICAgfVxufVxuXG4vKiBFeHRlbmRzIHRoZSBXQVNNIGNsYXNzIHdpdGggdGhlIFdlYkFzc2VtYmx5IHR5cGluZ3MgKi9cblxuZXhwb3J0IGludGVyZmFjZSBXQVNNIHtcbiAgICBIRUFQODogSW50OEFycmF5O1xuICAgIEhFQVBVODogVWludDhBcnJheTtcbiAgICBIRUFQVTE2OiBVaW50MTZBcnJheTtcbiAgICBIRUFQMTY6IEludDE2QXJyYXk7XG4gICAgSEVBUFUzMjogVWludDMyQXJyYXk7XG4gICAgSEVBUDMyOiBJbnQzMkFycmF5O1xuICAgIEhFQVBGMzI6IEZsb2F0MzJBcnJheTtcbiAgICBIRUFQRjY0OiBGbG9hdDY0QXJyYXk7XG5cbiAgICBHTDoge1xuICAgICAgICBmcmFtZWJ1ZmZlcnM6IFdlYkdMRnJhbWVidWZmZXJbXTtcbiAgICB9O1xuXG4gICAgYXNzZXJ0OiAoY29uZGl0aW9uOiBib29sZWFuLCBtc2c/OiBzdHJpbmcpID0+IHZvaWQ7XG4gICAgX2ZyZWU6IChwdHI6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfbWFsbG9jOiAoc2l6ZTogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgbGVuZ3RoQnl0ZXNVVEY4OiAoc3RyOiBzdHJpbmcpID0+IG51bWJlcjtcbiAgICBzdHJpbmdUb1VURjg6IChzdHI6IHN0cmluZywgb3V0UHRyOiBudW1iZXIsIGxlbjogbnVtYmVyKSA9PiB2b2lkO1xuICAgIFVURjhUb1N0cmluZzogKHB0cjogbnVtYmVyKSA9PiBzdHJpbmc7XG4gICAgYWRkRnVuY3Rpb246IChmdW5jOiBGdW5jdGlvbiwgc2lnOiBzdHJpbmcpID0+IG51bWJlcjtcbiAgICByZW1vdmVGdW5jdGlvbjogKHB0cjogbnVtYmVyKSA9PiB2b2lkO1xuXG4gICAgX3dsX3NldF9lcnJvcl9jYWxsYmFjazogKGNiUHRyOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX2FwcGxpY2F0aW9uX3ZlcnNpb246IChvdXQ6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfYXBwbGljYXRpb25fc3RhcnQ6ICgpID0+IHZvaWQ7XG4gICAgX3dsX2FwcGxpY2F0aW9uX3Jlc2l6ZTogKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSA9PiB2b2lkO1xuXG4gICAgX3dsX25leHRVcGRhdGU6IChkZWx0YTogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9uZXh0RnJhbWU6IChkZWx0YTogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9yZXNldDogKCkgPT4gdm9pZDtcbiAgICBfd2xfZGVhY3RpdmF0ZV9hY3RpdmVTY2VuZTogKCkgPT4gdm9pZDtcblxuICAgIF93bF9yZW5kZXJlcl9zZXRfbWVzaF9sYXlvdXQ6IChsYXlvdXQ6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfcmVuZGVyZXJfc3RyZWFtaW5nX2lkbGU6ICgpID0+IG51bWJlcjtcblxuICAgIF93bF9sb2FkX21haW5fc2NlbmU6IChwdHI6IG51bWJlciwgc2l6ZTogbnVtYmVyLCB1cmw6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9nZXRfaW1hZ2VzOiAob3V0OiBudW1iZXIsIG1heDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX2dldF9tYXRlcmlhbF9kZWZpbml0aW9uX2NvdW50OiAoKSA9PiBudW1iZXI7XG4gICAgX3dsX2dldF9tYXRlcmlhbF9kZWZpbml0aW9uX2luZGV4OiAocHRyOiBudW1iZXIpID0+IG51bWJlcjtcblxuICAgIF93bF9zY2VuZV9nZXRfYWN0aXZlOiAocm9vdDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3NjZW5lX2NyZWF0ZTogKHB0cjogbnVtYmVyLCBzaXplOiBudW1iZXIsIHVybDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3NjZW5lX2NyZWF0ZV9jaHVua2VkX3N0YXJ0OiAodXJsOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfc2NlbmVfY3JlYXRlX2NodW5rZWRfYnVmZmVyX3NpemU6IChpbmRleDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3NjZW5lX2NyZWF0ZV9jaHVua2VkX25leHQ6IChcbiAgICAgICAgaW5kZXg6IG51bWJlcixcbiAgICAgICAgcHRyOiBudW1iZXIsXG4gICAgICAgIHNpemU6IG51bWJlcixcbiAgICAgICAgcmVhZFNpemVQdHI6IG51bWJlcixcbiAgICAgICAgcmVxdWlyZWRTaXplUHRyOiBudW1iZXJcbiAgICApID0+IGJvb2xlYW47XG4gICAgX3dsX3NjZW5lX2NyZWF0ZV9jaHVua2VkX2Fib3J0OiAoaW5kZXg6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfc2NlbmVfY3JlYXRlX2NodW5rZWRfZW5kX3ByZWZhYjogKGluZGV4OiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfc2NlbmVfY3JlYXRlX2NodW5rZWRfZW5kX21haW46IChpbmRleDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9zY2VuZV9jcmVhdGVfY2h1bmtlZF9lbmRfcXVldWVkOiAoXG4gICAgICAgIGluZGV4OiBudW1iZXIsXG4gICAgICAgIGRlcGVuZGVudFNjZW5lSW5kZXg6IG51bWJlclxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfc2NlbmVfY3JlYXRlX2VtcHR5OiAoKSA9PiBudW1iZXI7XG4gICAgX3dsX3NjZW5lX2luaXRpYWxpemU6IChpbmRleDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3NjZW5lX2Rlc3Ryb3k6IChpbmRleDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9zY2VuZV9pbnN0YW50aWF0ZTogKHNyYzogbnVtYmVyLCBkc3Q6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9zY2VuZV9hY3RpdmF0ZTogKGluZGV4OiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX3NjZW5lX3F1ZXVlZF9iaW5fY291bnQ6IChpbmRleDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3NjZW5lX3F1ZXVlZF9iaW5fcGF0aDogKHNjZW5lSW5kZXg6IG51bWJlciwgaW5kZXg6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9zY2VuZV9jbGVhcl9xdWV1ZWRfYmluX2xpc3Q6IChzY2VuZUluZGV4OiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX3NjZW5lX2xvYWRfcXVldWVkX2JpbjogKGluZGV4OiBudW1iZXIsIHB0cjogbnVtYmVyLCBzaXplOiBudW1iZXIpID0+IGJvb2xlYW47XG4gICAgX3dsX3NjZW5lX2FjdGl2YXRhYmxlOiAoaW5kZXg6IG51bWJlcikgPT4gYm9vbGVhbjtcbiAgICBfd2xfc2NlbmVfYWN0aXZlOiAoaW5kZXg6IG51bWJlcikgPT4gYm9vbGVhbjtcbiAgICBfd2xfc2NlbmVfZ2V0X2Jhc2VVUkw6IChpbmRleDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3NjZW5lX2dldF9maWxlbmFtZTogKGluZGV4OiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfc2NlbmVfZ2V0X2NvbXBvbmVudF9tYW5hZ2VyX2luZGV4OiAoc2NlbmU6IG51bWJlciwgcHRyOiBudW1iZXIpID0+IG51bWJlcjtcblxuICAgIF93bF9nbFRGX3NjZW5lX2NyZWF0ZTogKGV4dGVuc2lvbnM6IGJvb2xlYW4sIHB0cjogbnVtYmVyLCBwdHJFbmQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9nbFRGX3NjZW5lX2dldF9leHRlbnNpb25zOiAoaW5kZXg6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9nbFRGX3NjZW5lX2V4dGVuc2lvbnNfZ2x0ZkluZGV4X3RvX2lkOiAoXG4gICAgICAgIGdsdGZTY2VuZTogbnVtYmVyLFxuICAgICAgICBkZXN0U2NlbmU6IG51bWJlcixcbiAgICAgICAgb2JqZWN0SW5kZXg6IG51bWJlcixcbiAgICAgICAgZ2x0ZkluZGV4OiBudW1iZXJcbiAgICApID0+IG51bWJlcjtcblxuICAgIF93bF9zY2VuZV9nZXRfYWN0aXZlX3ZpZXdzOiAoc2NlbmU6IG51bWJlciwgcHRyOiBudW1iZXIsIGNvdW50OiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfc2NlbmVfcmF5X2Nhc3Q6IChcbiAgICAgICAgc2NlbmU6IG51bWJlcixcbiAgICAgICAgeDogbnVtYmVyLFxuICAgICAgICB5OiBudW1iZXIsXG4gICAgICAgIHo6IG51bWJlcixcbiAgICAgICAgZHg6IG51bWJlcixcbiAgICAgICAgZHk6IG51bWJlcixcbiAgICAgICAgZHo6IG51bWJlcixcbiAgICAgICAgZ3JvdXBNYXNrOiBudW1iZXIsXG4gICAgICAgIG1heERpc3RhbmNlOiBudW1iZXIsXG4gICAgICAgIG91dFB0cjogbnVtYmVyXG4gICAgKSA9PiB2b2lkO1xuICAgIF93bF9zY2VuZV9hZGRfb2JqZWN0OiAoc2NlbmU6IG51bWJlciwgcGFyZW50SWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9zY2VuZV9hZGRfb2JqZWN0czogKFxuICAgICAgICBzY2VuZTogbnVtYmVyLFxuICAgICAgICBwYXJlbnRJZDogbnVtYmVyLFxuICAgICAgICBjb3VudDogbnVtYmVyLFxuICAgICAgICBjb21wb25lbnRDb3VudEhpbnQ6IG51bWJlcixcbiAgICAgICAgcHRyOiBudW1iZXIsXG4gICAgICAgIHNpemU6IG51bWJlclxuICAgICkgPT4gbnVtYmVyO1xuICAgIF93bF9zY2VuZV9yZXNlcnZlX29iamVjdHM6IChcbiAgICAgICAgc2NlbmU6IG51bWJlcixcbiAgICAgICAgb2JqZWN0Q291bnQ6IG51bWJlcixcbiAgICAgICAgX3RlbXBNZW06IG51bWJlclxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfc2NlbmVfc2V0X3NreV9tYXRlcmlhbDogKGluZGV4OiBudW1iZXIsIGlkOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX3NjZW5lX2dldF9za3lfbWF0ZXJpYWw6IChpbmRleDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3NjZW5lX2Vudmlyb25tZW50X3NldF9pbnRlbnNpdHk6IChpbmRleDogbnVtYmVyLCBpbnRlbnNpdHk6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfc2NlbmVfZW52aXJvbm1lbnRfZ2V0X2ludGVuc2l0eTogKGluZGV4OiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfc2NlbmVfZW52aXJvbm1lbnRfc2V0X3RpbnQ6IChcbiAgICAgICAgaW5kZXg6IG51bWJlcixcbiAgICAgICAgcjogbnVtYmVyLFxuICAgICAgICBnOiBudW1iZXIsXG4gICAgICAgIGI6IG51bWJlclxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfc2NlbmVfZW52aXJvbm1lbnRfZ2V0X3RpbnQ6IChpbmRleDogbnVtYmVyLCBwdHI6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfc2NlbmVfZW52aXJvbm1lbnRfc2V0X2NvZWZmaWNpZW50czogKFxuICAgICAgICBpbmRleDogbnVtYmVyLFxuICAgICAgICBwdHI6IG51bWJlcixcbiAgICAgICAgY291bnQ6IG51bWJlclxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfc2NlbmVfZW52aXJvbm1lbnRfZ2V0X2NvZWZmaWNpZW50czogKGluZGV4OiBudW1iZXIsIHB0cjogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9zY2VuZV9zZXRfY2xlYXJDb2xvcjogKHI6IG51bWJlciwgZzogbnVtYmVyLCBiOiBudW1iZXIsIGE6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfc2NlbmVfZW5hYmxlQ29sb3JDbGVhcjogKGI6IGJvb2xlYW4pID0+IHZvaWQ7XG4gICAgX3dsX3NldF9sb2FkaW5nX3NjcmVlbl9wcm9ncmVzczogKHJhdGlvOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX2NvbXBvbmVudF9nZXRfb2JqZWN0OiAobWFuYWdlcjogbnVtYmVyLCBpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX2NvbXBvbmVudF9zZXRBY3RpdmU6IChtYW5hZ2VyOiBudW1iZXIsIGlkOiBudW1iZXIsIGFjdGl2ZTogYm9vbGVhbikgPT4gdm9pZDtcbiAgICBfd2xfY29tcG9uZW50X2lzQWN0aXZlOiAobWFuYWdlcjogbnVtYmVyLCBpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX2NvbXBvbmVudF9yZW1vdmU6IChtYW5hZ2VyOiBudW1iZXIsIGlkOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX2NvbGxpc2lvbl9jb21wb25lbnRfZ2V0X2NvbGxpZGVyOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9jb2xsaXNpb25fY29tcG9uZW50X3NldF9jb2xsaWRlcjogKGlkOiBudW1iZXIsIGNvbGxpZGVyOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX2NvbGxpc2lvbl9jb21wb25lbnRfZ2V0X2V4dGVudHM6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX2NvbGxpc2lvbl9jb21wb25lbnRfZ2V0X2dyb3VwOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9jb2xsaXNpb25fY29tcG9uZW50X3NldF9ncm91cDogKGlkOiBudW1iZXIsIGdyb3VwOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX2NvbGxpc2lvbl9jb21wb25lbnRfcXVlcnlfb3ZlcmxhcHM6IChcbiAgICAgICAgaWQ6IG51bWJlcixcbiAgICAgICAgb3V0UHRyOiBudW1iZXIsXG4gICAgICAgIG91dENvdW50OiBudW1iZXJcbiAgICApID0+IG51bWJlcjtcbiAgICBfd2xfdGV4dF9jb21wb25lbnRfZ2V0X2hvcml6b250YWxfYWxpZ25tZW50OiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF90ZXh0X2NvbXBvbmVudF9zZXRfaG9yaXpvbnRhbF9hbGlnbm1lbnQ6IChpZDogbnVtYmVyLCBhbGlnbm1lbnQ6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfdGV4dF9jb21wb25lbnRfZ2V0X3ZlcnRpY2FsX2FsaWdubWVudDogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfdGV4dF9jb21wb25lbnRfc2V0X3ZlcnRpY2FsX2FsaWdubWVudDogKFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICB2ZXJ0aWNhbEFsaWdubWVudDogbnVtYmVyXG4gICAgKSA9PiB2b2lkO1xuICAgIF93bF90ZXh0X2NvbXBvbmVudF9nZXRfY2hhcmFjdGVyX3NwYWNpbmc6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3RleHRfY29tcG9uZW50X3NldF9jaGFyYWN0ZXJfc3BhY2luZzogKGlkOiBudW1iZXIsIHNwYWNpbmc6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfdGV4dF9jb21wb25lbnRfZ2V0X2xpbmVfc3BhY2luZzogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfdGV4dF9jb21wb25lbnRfc2V0X2xpbmVfc3BhY2luZzogKGlkOiBudW1iZXIsIHNwYWNpbmc6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfdGV4dF9jb21wb25lbnRfZ2V0X2VmZmVjdDogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfdGV4dF9jb21wb25lbnRfc2V0X2VmZmVjdDogKGlkOiBudW1iZXIsIGVmZmVjdDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF90ZXh0X2NvbXBvbmVudF9nZXRfd3JhcE1vZGU6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3RleHRfY29tcG9uZW50X3NldF93cmFwTW9kZTogKGlkOiBudW1iZXIsIG1vZGU6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfdGV4dF9jb21wb25lbnRfZ2V0X3dyYXBXaWR0aDogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfdGV4dF9jb21wb25lbnRfc2V0X3dyYXBXaWR0aDogKGlkOiBudW1iZXIsIHdpZHRoOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX3RleHRfY29tcG9uZW50X2dldF90ZXh0OiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF90ZXh0X2NvbXBvbmVudF9zZXRfdGV4dDogKGlkOiBudW1iZXIsIHB0cjogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF90ZXh0X2NvbXBvbmVudF9zZXRfbWF0ZXJpYWw6IChpZDogbnVtYmVyLCBtYXRlcmlhbElkOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX3RleHRfY29tcG9uZW50X2dldF9tYXRlcmlhbDogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfdGV4dF9jb21wb25lbnRfZ2V0X2JvdW5kaW5nQm94OiAoXG4gICAgICAgIGlkOiBudW1iZXIsXG4gICAgICAgIHRleHRQdHI6IG51bWJlcixcbiAgICAgICAgcmVzdWx0UHRyOiBudW1iZXJcbiAgICApID0+IG51bWJlcjtcbiAgICBfd2xfdmlld19jb21wb25lbnRfZ2V0X3Byb2plY3Rpb25UeXBlOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF92aWV3X2NvbXBvbmVudF9zZXRfcHJvamVjdGlvblR5cGU6IChpZDogbnVtYmVyLCB0eXBlOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX3ZpZXdfY29tcG9uZW50X2dldF9wcm9qZWN0aW9uX21hdHJpeDogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfdmlld19jb21wb25lbnRfZ2V0X25lYXI6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3ZpZXdfY29tcG9uZW50X3NldF9uZWFyOiAoaWQ6IG51bWJlciwgbmVhcjogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF92aWV3X2NvbXBvbmVudF9nZXRfZmFyOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF92aWV3X2NvbXBvbmVudF9zZXRfZmFyOiAoaWQ6IG51bWJlciwgZmFyOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX3ZpZXdfY29tcG9uZW50X2dldF9mb3Y6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3ZpZXdfY29tcG9uZW50X3NldF9mb3Y6IChpZDogbnVtYmVyLCBmb3Y6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfdmlld19jb21wb25lbnRfZ2V0X2V4dGVudDogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfdmlld19jb21wb25lbnRfc2V0X2V4dGVudDogKGlkOiBudW1iZXIsIGZvdjogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9pbnB1dF9jb21wb25lbnRfZ2V0X3R5cGU6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX2lucHV0X2NvbXBvbmVudF9zZXRfdHlwZTogKGlkOiBudW1iZXIsIHR5cGU6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfbGlnaHRfY29tcG9uZW50X2dldF9jb2xvcjogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfbGlnaHRfY29tcG9uZW50X2dldF90eXBlOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9saWdodF9jb21wb25lbnRfc2V0X3R5cGU6IChpZDogbnVtYmVyLCB0eXBlOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfaW50ZW5zaXR5OiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9saWdodF9jb21wb25lbnRfc2V0X2ludGVuc2l0eTogKGlkOiBudW1iZXIsIGludGVuc2l0eTogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9saWdodF9jb21wb25lbnRfZ2V0X291dGVyQW5nbGU6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX2xpZ2h0X2NvbXBvbmVudF9zZXRfb3V0ZXJBbmdsZTogKGlkOiBudW1iZXIsIGFuZ2xlOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfaW5uZXJBbmdsZTogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfbGlnaHRfY29tcG9uZW50X3NldF9pbm5lckFuZ2xlOiAoaWQ6IG51bWJlciwgYW5nbGU6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfbGlnaHRfY29tcG9uZW50X2dldF9zaGFkb3dzOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9saWdodF9jb21wb25lbnRfc2V0X3NoYWRvd3M6IChpZDogbnVtYmVyLCBzaGFkb3dzOiBib29sZWFuKSA9PiB2b2lkO1xuICAgIF93bF9saWdodF9jb21wb25lbnRfZ2V0X3NoYWRvd1JhbmdlOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9saWdodF9jb21wb25lbnRfc2V0X3NoYWRvd1JhbmdlOiAoaWQ6IG51bWJlciwgcmFuZ2U6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfbGlnaHRfY29tcG9uZW50X2dldF9zaGFkb3dCaWFzOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9saWdodF9jb21wb25lbnRfc2V0X3NoYWRvd0JpYXM6IChpZDogbnVtYmVyLCBiaWFzOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfc2hhZG93Tm9ybWFsQmlhczogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfbGlnaHRfY29tcG9uZW50X3NldF9zaGFkb3dOb3JtYWxCaWFzOiAoaWQ6IG51bWJlciwgYmlhczogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9saWdodF9jb21wb25lbnRfZ2V0X3NoYWRvd1RleGVsU2l6ZTogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfbGlnaHRfY29tcG9uZW50X3NldF9zaGFkb3dUZXhlbFNpemU6IChpZDogbnVtYmVyLCBzaXplOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfY2FzY2FkZUNvdW50OiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9saWdodF9jb21wb25lbnRfc2V0X2Nhc2NhZGVDb3VudDogKGlkOiBudW1iZXIsIGNvdW50OiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfZ2V0X2FuaW1hdGlvbjogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9zZXRfYW5pbWF0aW9uOiAoaWQ6IG51bWJlciwgYW5pbUlkOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfZ2V0X3BsYXlDb3VudDogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9zZXRfcGxheUNvdW50OiAoaWQ6IG51bWJlciwgY291bnQ6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9nZXRfc3BlZWQ6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfc2V0X3NwZWVkOiAoaWQ6IG51bWJlciwgc3BlZWQ6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9wbGF5OiAoaWQ6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9zdG9wOiAoaWQ6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9wYXVzZTogKGlkOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfc3RhdGU6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfZ2V0R3JhcGhQYXJhbVZhbHVlOiAoXG4gICAgICAgIGlkOiBudW1iZXIsXG4gICAgICAgIHBhcmFtSW5kZXg6IG51bWJlcixcbiAgICAgICAgb3V0UHRyOiBudW1iZXJcbiAgICApID0+IG51bWJlcjtcbiAgICBfd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9zZXRHcmFwaFBhcmFtVmFsdWU6IChcbiAgICAgICAgaWQ6IG51bWJlcixcbiAgICAgICAgcGFyYW1JbmRleDogbnVtYmVyLFxuICAgICAgICB2YWx1ZVB0cjogbnVtYmVyXG4gICAgKSA9PiB2b2lkO1xuICAgIF93bF9hbmltYXRpb25fY29tcG9uZW50X2dldF9yb290TW90aW9uTW9kZTogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9zZXRfcm9vdE1vdGlvbk1vZGU6IChpZDogbnVtYmVyLCB2YWx1ZTogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9hbmltYXRpb25fY29tcG9uZW50X2dldF9yb290TW90aW9uX3RyYW5zbGF0aW9uOiAoXG4gICAgICAgIGlkOiBudW1iZXIsXG4gICAgICAgIG91dFB0cjogbnVtYmVyXG4gICAgKSA9PiBudW1iZXI7XG4gICAgX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfZ2V0X3Jvb3RNb3Rpb25fcm90YXRpb246IChpZDogbnVtYmVyLCBvdXRQdHI6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9hbmltYXRpb25fY29tcG9uZW50X2dldEdyYXBoUGFyYW1JbmRleDogKGlkOiBudW1iZXIsIHBhcmFtTmFtZTogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfZ2V0X2l0ZXJhdGlvbjogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9nZXRfcG9zaXRpb246IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfZ2V0X2R1cmF0aW9uOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9tZXNoX2NvbXBvbmVudF9nZXRfbWF0ZXJpYWw6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX21lc2hfY29tcG9uZW50X3NldF9tYXRlcmlhbDogKGlkOiBudW1iZXIsIG1hdGVyaWFsSWQ6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfbWVzaF9jb21wb25lbnRfZ2V0X21lc2g6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX21lc2hfY29tcG9uZW50X3NldF9tZXNoOiAoaWQ6IG51bWJlciwgbWVzaElkOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX21lc2hfY29tcG9uZW50X2dldF9za2luOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9tZXNoX2NvbXBvbmVudF9zZXRfc2tpbjogKGlkOiBudW1iZXIsIHNraW5JZDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9tZXNoX2NvbXBvbmVudF9nZXRfbW9ycGhfdGFyZ2V0czogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfbWVzaF9jb21wb25lbnRfc2V0X21vcnBoX3RhcmdldHM6IChpZDogbnVtYmVyLCBtb3JwaFRhcmdldFNldElkOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX21lc2hfY29tcG9uZW50X2dldF9tb3JwaF90YXJnZXRfd2VpZ2h0OiAoaWQ6IG51bWJlciwgaW5kZXg6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9tZXNoX2NvbXBvbmVudF9nZXRfbW9ycGhfdGFyZ2V0X3dlaWdodHM6IChpZDogbnVtYmVyLCBwdHI6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9tZXNoX2NvbXBvbmVudF9zZXRfbW9ycGhfdGFyZ2V0X3dlaWdodDogKFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICBpbmRleDogbnVtYmVyLFxuICAgICAgICB3ZWlnaHQ6IG51bWJlclxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfbWVzaF9jb21wb25lbnRfc2V0X21vcnBoX3RhcmdldF93ZWlnaHRzOiAoXG4gICAgICAgIGlkOiBudW1iZXIsXG4gICAgICAgIHB0cjogbnVtYmVyLFxuICAgICAgICBjb3VudDogbnVtYmVyXG4gICAgKSA9PiB2b2lkO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfZ2V0X3N0YXRpYzogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X3NldF9zdGF0aWM6IChpZDogbnVtYmVyLCBmbGFnOiBib29sZWFuKSA9PiB2b2lkO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfZ2V0X2tpbmVtYXRpYzogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X3NldF9raW5lbWF0aWM6IChpZDogbnVtYmVyLCBraW5lbWF0aWM6IGJvb2xlYW4pID0+IHZvaWQ7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfZ3Jhdml0eTogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X3NldF9ncmF2aXR5OiAoaWQ6IG51bWJlciwgZ3Jhdml0eTogYm9vbGVhbikgPT4gdm9pZDtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X2dldF9zaW11bGF0ZTogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X3NldF9zaW11bGF0ZTogKGlkOiBudW1iZXIsIHNpbXVsYXRpb246IGJvb2xlYW4pID0+IHZvaWQ7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfYWxsb3dTaW11bGF0aW9uOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfc2V0X2FsbG93U2ltdWxhdGlvbjogKGlkOiBudW1iZXIsIGFsbG93U2ltdWxhdGlvbjogYm9vbGVhbikgPT4gdm9pZDtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X2dldF9hbGxvd1F1ZXJ5OiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfc2V0X2FsbG93UXVlcnk6IChpZDogbnVtYmVyLCBhbGxvd1F1ZXJ5OiBib29sZWFuKSA9PiB2b2lkO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfZ2V0X3RyaWdnZXI6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfdHJpZ2dlcjogKGlkOiBudW1iZXIsIHRyaWdnZXI6IGJvb2xlYW4pID0+IHZvaWQ7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfc2hhcGU6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfc2hhcGU6IChpZDogbnVtYmVyLCBzaGFwZTogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfZ2V0X3NoYXBlX2RhdGE6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfc2hhcGVfZGF0YTogKGlkOiBudW1iZXIsIHNoYXBlSW5kZXg6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X2dldF9leHRlbnRzOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfZ2V0X3N0YXRpY0ZyaWN0aW9uOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfc2V0X3N0YXRpY0ZyaWN0aW9uOiAoaWQ6IG51bWJlciwgdmFsdWU6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X2dldF9keW5hbWljRnJpY3Rpb246IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfZHluYW1pY0ZyaWN0aW9uOiAoaWQ6IG51bWJlciwgdmFsdWU6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X2dldF9ib3VuY2luZXNzOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfc2V0X2JvdW5jaW5lc3M6IChpZDogbnVtYmVyLCB2YWx1ZTogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfZ2V0X2xpbmVhckRhbXBpbmc6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfbGluZWFyRGFtcGluZzogKGlkOiBudW1iZXIsIHZhbHVlOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfYW5ndWxhckRhbXBpbmc6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfYW5ndWxhckRhbXBpbmc6IChpZDogbnVtYmVyLCB2YWx1ZTogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfZ2V0X2xpbmVhclZlbG9jaXR5OiAoaWQ6IG51bWJlciwgcHRyOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X3NldF9saW5lYXJWZWxvY2l0eTogKFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICB4OiBudW1iZXIsXG4gICAgICAgIHk6IG51bWJlcixcbiAgICAgICAgejogbnVtYmVyXG4gICAgKSA9PiB2b2lkO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfZ2V0X2FuZ3VsYXJWZWxvY2l0eTogKGlkOiBudW1iZXIsIHB0cjogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfYW5ndWxhclZlbG9jaXR5OiAoXG4gICAgICAgIGlkOiBudW1iZXIsXG4gICAgICAgIHg6IG51bWJlcixcbiAgICAgICAgeTogbnVtYmVyLFxuICAgICAgICB6OiBudW1iZXJcbiAgICApID0+IHZvaWQ7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfZ3JvdXBzTWFzazogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X3NldF9ncm91cHNNYXNrOiAoaWQ6IG51bWJlciwgZmxhZ3M6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X2dldF9ibG9ja3NNYXNrOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfc2V0X2Jsb2Nrc01hc2s6IChpZDogbnVtYmVyLCBmbGFnczogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfZ2V0X2xpbmVhckxvY2tBeGlzOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfc2V0X2xpbmVhckxvY2tBeGlzOiAoaWQ6IG51bWJlciwgbG9jazogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfZ2V0X2FuZ3VsYXJMb2NrQXhpczogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X3NldF9hbmd1bGFyTG9ja0F4aXM6IChpZDogbnVtYmVyLCBsb2NrOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfbWFzczogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X3NldF9tYXNzOiAoaWQ6IG51bWJlciwgdmFsdWU6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X2dldF9vZmZzZXRUcmFuc2xhdGlvbjogKGlkOiBudW1iZXIsIG91dDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfZ2V0X29mZnNldFRyYW5zZm9ybTogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X3NldF9vZmZzZXRUcmFuc2xhdGlvbjogKFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICB4OiBudW1iZXIsXG4gICAgICAgIHk6IG51bWJlcixcbiAgICAgICAgejogbnVtYmVyXG4gICAgKSA9PiB2b2lkO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfc2V0X29mZnNldFJvdGF0aW9uOiAoXG4gICAgICAgIGlkOiBudW1iZXIsXG4gICAgICAgIHg6IG51bWJlcixcbiAgICAgICAgeTogbnVtYmVyLFxuICAgICAgICB6OiBudW1iZXIsXG4gICAgICAgIHc6IG51bWJlclxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X3NldF9zbGVlcE9uQWN0aXZhdGU6IChpZDogbnVtYmVyLCBmbGFnOiBib29sZWFuKSA9PiB2b2lkO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfZ2V0X3NsZWVwT25BY3RpdmF0ZTogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X3NldF9tYXNzU3BhY2VJbmVydGlhVGVuc29yOiAoXG4gICAgICAgIGlkOiBudW1iZXIsXG4gICAgICAgIHg6IG51bWJlcixcbiAgICAgICAgeTogbnVtYmVyLFxuICAgICAgICB6OiBudW1iZXJcbiAgICApID0+IHZvaWQ7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9hZGRGb3JjZTogKFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICB4OiBudW1iZXIsXG4gICAgICAgIHk6IG51bWJlcixcbiAgICAgICAgejogbnVtYmVyLFxuICAgICAgICBtb2RlOiBudW1iZXIsXG4gICAgICAgIGxvY2FsRm9yY2U6IGJvb2xlYW5cbiAgICApID0+IHZvaWQ7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9hZGRGb3JjZUF0OiAoXG4gICAgICAgIGlkOiBudW1iZXIsXG4gICAgICAgIHg6IG51bWJlcixcbiAgICAgICAgeTogbnVtYmVyLFxuICAgICAgICB6OiBudW1iZXIsXG4gICAgICAgIG1vZGU6IG51bWJlcixcbiAgICAgICAgbG9jYWxGb3JjZTogYm9vbGVhbixcbiAgICAgICAgcG9zWDogbnVtYmVyLFxuICAgICAgICBwb3NZOiBudW1iZXIsXG4gICAgICAgIHBvc1o6IG51bWJlcixcbiAgICAgICAgbG9jYWw6IGJvb2xlYW5cbiAgICApID0+IHZvaWQ7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9hZGRUb3JxdWU6IChcbiAgICAgICAgaWQ6IG51bWJlcixcbiAgICAgICAgeDogbnVtYmVyLFxuICAgICAgICB5OiBudW1iZXIsXG4gICAgICAgIHo6IG51bWJlcixcbiAgICAgICAgbW9kZTogbnVtYmVyXG4gICAgKSA9PiB2b2lkO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfYWRkQ2FsbGJhY2s6IChpZDogbnVtYmVyLCBvdGhlcklkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X3JlbW92ZUNhbGxiYWNrOiAoaWQ6IG51bWJlciwgY2FsbGJhY2tJZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3BoeXN4X3VwZGF0ZV9nbG9iYWxfcG9zZTogKG9iamVjdDogbnVtYmVyLCBjb21wb25lbnQ6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfcGh5c3hfcmF5X2Nhc3Q6IChcbiAgICAgICAgc2NlbmU6IG51bWJlcixcbiAgICAgICAgeDogbnVtYmVyLFxuICAgICAgICB5OiBudW1iZXIsXG4gICAgICAgIHo6IG51bWJlcixcbiAgICAgICAgZHg6IG51bWJlcixcbiAgICAgICAgZHk6IG51bWJlcixcbiAgICAgICAgZHo6IG51bWJlcixcbiAgICAgICAgZ3JvdXBNYXNrOiBudW1iZXIsXG4gICAgICAgIG91dFB0cjogbnVtYmVyLFxuICAgICAgICBtYXhEaXN0YW5jZTogbnVtYmVyXG4gICAgKSA9PiB2b2lkO1xuICAgIF93bF9waHlzeF9zZXRfY29sbGlzaW9uX2NhbGxiYWNrOiAoY2FsbGJhY2s6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfbWVzaF9jcmVhdGU6IChcbiAgICAgICAgaW5kaWNlc1B0cjogbnVtYmVyLFxuICAgICAgICBpbmRpY2VzU2l6ZTogbnVtYmVyLFxuICAgICAgICBpbmRleFR5cGU6IG51bWJlcixcbiAgICAgICAgdmVydGV4Q291bnQ6IG51bWJlcixcbiAgICAgICAgc2tpbm5pbmdUeXBlOiBudW1iZXJcbiAgICApID0+IG51bWJlcjtcbiAgICBfd2xfbWVzaF9nZXRfdmVydGV4Q291bnQ6IChpbmRleDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX21lc2hfZ2V0X2luZGV4RGF0YTogKGluZGV4OiBudW1iZXIsIG91dFB0cjogbnVtYmVyLCBjb3VudDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX21lc2hfdXBkYXRlOiAoaW5kZXg6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfbWVzaF9nZXRfYm91bmRpbmdTcGhlcmU6IChpbmRleDogbnVtYmVyLCBvdXRQdHI6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfbWVzaF9nZXRfYXR0cmlidXRlOiAoaW5kZXg6IG51bWJlciwgYXR0cmlidXRlOiBudW1iZXIsIG91dFB0cjogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9tZXNoX2Rlc3Ryb3k6IChpbmRleDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9tZXNoX2dldF9hdHRyaWJ1dGVfdmFsdWVzOiAoXG4gICAgICAgIGF0dHJpYnV0ZTogbnVtYmVyLFxuICAgICAgICBzcmNGb3JtYXRTaXplOiBudW1iZXIsXG4gICAgICAgIHNyY1B0cjogbnVtYmVyLFxuICAgICAgICBzcmNTdHJpZGU6IG51bWJlcixcbiAgICAgICAgZHN0Rm9ybWF0U2l6ZTogbnVtYmVyLFxuICAgICAgICBkZXN0UHRyOiBudW1iZXIsXG4gICAgICAgIGRzdFNpemU6IG51bWJlclxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfbWVzaF9zZXRfYXR0cmlidXRlX3ZhbHVlczogKFxuICAgICAgICBhdHRyaWJ1dGU6IG51bWJlcixcbiAgICAgICAgc3JjRm9ybWF0U2l6ZTogbnVtYmVyLFxuICAgICAgICBzcmNQdHI6IG51bWJlcixcbiAgICAgICAgc3JjU2l6ZTogbnVtYmVyLFxuICAgICAgICBkc3RGb3JtYXRTaXplOiBudW1iZXIsXG4gICAgICAgIGRlc3RQdHI6IG51bWJlcixcbiAgICAgICAgZGVzdFN0cmlkZTogbnVtYmVyXG4gICAgKSA9PiB2b2lkO1xuICAgIF93bF9mb250X2dldF9lbUhlaWdodDogKGluZGV4OiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfZm9udF9nZXRfY2FwSGVpZ2h0OiAoaW5kZXg6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9mb250X2dldF94SGVpZ2h0OiAoaW5kZXg6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9mb250X2dldF9vdXRsaW5lU2l6ZTogKGluZGV4OiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfbWF0ZXJpYWxfY3JlYXRlOiAoZGVmaW5pdGlvbkluZGV4OiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfbWF0ZXJpYWxfZ2V0X2RlZmluaXRpb246IChpbmRleDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX21hdGVyaWFsX2RlZmluaXRpb25fZ2V0X3BhcmFtX2NvdW50OiAoaW5kZXg6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9tYXRlcmlhbF9kZWZpbml0aW9uX2dldF9wYXJhbV9uYW1lOiAoaW5kZXg6IG51bWJlciwgcGFyYW1JbmRleDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX21hdGVyaWFsX2RlZmluaXRpb25fZ2V0X3BhcmFtX3R5cGU6IChpbmRleDogbnVtYmVyLCBwYXJhbUluZGV4OiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfbWF0ZXJpYWxfZ2V0X3BpcGVsaW5lOiAoaW5kZXg6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9tYXRlcmlhbF9jbG9uZTogKGluZGV4OiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfbWF0ZXJpYWxfZ2V0X3BhcmFtX2luZGV4OiAoaW5kZXg6IG51bWJlciwgbmFtZVB0cjogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX21hdGVyaWFsX2dldF9wYXJhbV90eXBlOiAoaW5kZXg6IG51bWJlciwgcGFyYW1JbmRleDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX21hdGVyaWFsX2dldF9wYXJhbV92YWx1ZTogKFxuICAgICAgICBpbmRleDogbnVtYmVyLFxuICAgICAgICBwYXJhbUluZGV4OiBudW1iZXIsXG4gICAgICAgIG91dFB0cjogbnVtYmVyXG4gICAgKSA9PiBudW1iZXI7XG4gICAgX3dsX21hdGVyaWFsX3NldF9wYXJhbV92YWx1ZV91aW50OiAoXG4gICAgICAgIGluZGV4OiBudW1iZXIsXG4gICAgICAgIHBhcmFtSWQ6IG51bWJlcixcbiAgICAgICAgdmFsdWVJZDogbnVtYmVyXG4gICAgKSA9PiB2b2lkO1xuICAgIF93bF9tYXRlcmlhbF9zZXRfcGFyYW1fdmFsdWVfZmxvYXQ6IChcbiAgICAgICAgaW5kZXg6IG51bWJlcixcbiAgICAgICAgcGFyYW1JZDogbnVtYmVyLFxuICAgICAgICBwdHI6IG51bWJlcixcbiAgICAgICAgY291bnQ6IG51bWJlclxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfaW1hZ2VfY3JlYXRlOiAoanNJbWFnZTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF90ZXh0dXJlX2NyZWF0ZTogKGltYWdlOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfaW1hZ2Vfc2l6ZTogKGluZGV4OiBudW1iZXIsIG91dDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX2ltYWdlX2dldF9qc0ltYWdlX2luZGV4OiAoaW5kZXg6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF90ZXh0dXJlX2dldF9pbWFnZV9pbmRleDogKGluZGV4OiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfcmVuZGVyZXJfdXBkYXRlSW1hZ2U6IChcbiAgICAgICAgaW1hZ2VJbmRleDogbnVtYmVyLFxuICAgICAgICB4T2Zmc2V0PzogbnVtYmVyLFxuICAgICAgICB5T2Zmc2V0PzogbnVtYmVyXG4gICAgKSA9PiBudW1iZXI7XG4gICAgX3dsX3RleHR1cmVfZGVzdHJveTogKGlkOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX2FuaW1hdGlvbl9nZXRfZHVyYXRpb246IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX2FuaW1hdGlvbl9nZXRfdHJhY2tDb3VudDogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfYW5pbWF0aW9uX3JldGFyZ2V0VG9Ta2luOiAoaWQ6IG51bWJlciwgdGFyZ2V0SWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9hbmltYXRpb25fcmV0YXJnZXQ6IChpZDogbnVtYmVyLCBwdHI6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9vYmplY3RfaWQ6IChzY2VuZTogbnVtYmVyLCBpbmRleDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX29iamVjdF9pbmRleDogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfb2JqZWN0X25hbWU6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX29iamVjdF9zZXRfbmFtZTogKGlkOiBudW1iZXIsIHB0cjogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9vYmplY3RfcmVtb3ZlOiAoaWQ6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfb2JqZWN0X21hcmtlZERlc3Ryb3llZDogKGlkOiBudW1iZXIpID0+IGJvb2xlYW47XG4gICAgX3dsX29iamVjdF9wYXJlbnQ6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX29iamVjdF9nZXRfY2hpbGRyZW5fY291bnQ6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX29iamVjdF9nZXRfY2hpbGRyZW46IChpZDogbnVtYmVyLCBvdXRQdHI6IG51bWJlciwgY291bnQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9vYmplY3Rfc2V0X3BhcmVudDogKGlkOiBudW1iZXIsIHBhcmVudElkOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX29iamVjdF9jbG9uZTogKGlkOiBudW1iZXIsIHBhcmVudElkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfb2JqZWN0X3Jlc2V0X3NjYWxpbmc6IChpZDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9vYmplY3RfcmVzZXRfdHJhbnNsYXRpb25fcm90YXRpb246IChpZDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9vYmplY3RfcmVzZXRfcm90YXRpb246IChpZDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9vYmplY3RfcmVzZXRfdHJhbnNsYXRpb246IChpZDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9vYmplY3RfdHJhbnNsYXRlOiAoaWQ6IG51bWJlciwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfb2JqZWN0X3RyYW5zbGF0ZV9vYmo6IChpZDogbnVtYmVyLCB4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9vYmplY3RfdHJhbnNsYXRlX3dvcmxkOiAoaWQ6IG51bWJlciwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfb2JqZWN0X3JvdGF0ZV9heGlzX2FuZ2xlOiAoXG4gICAgICAgIGlkOiBudW1iZXIsXG4gICAgICAgIHg6IG51bWJlcixcbiAgICAgICAgeTogbnVtYmVyLFxuICAgICAgICB6OiBudW1iZXIsXG4gICAgICAgIGRlZzogbnVtYmVyXG4gICAgKSA9PiB2b2lkO1xuICAgIF93bF9vYmplY3Rfcm90YXRlX2F4aXNfYW5nbGVfcmFkOiAoXG4gICAgICAgIGlkOiBudW1iZXIsXG4gICAgICAgIHg6IG51bWJlcixcbiAgICAgICAgeTogbnVtYmVyLFxuICAgICAgICB6OiBudW1iZXIsXG4gICAgICAgIHJhZDogbnVtYmVyXG4gICAgKSA9PiB2b2lkO1xuICAgIF93bF9vYmplY3Rfcm90YXRlX2F4aXNfYW5nbGVfb2JqOiAoXG4gICAgICAgIGlkOiBudW1iZXIsXG4gICAgICAgIHg6IG51bWJlcixcbiAgICAgICAgeTogbnVtYmVyLFxuICAgICAgICB6OiBudW1iZXIsXG4gICAgICAgIGRlZzogbnVtYmVyXG4gICAgKSA9PiB2b2lkO1xuICAgIF93bF9vYmplY3Rfcm90YXRlX2F4aXNfYW5nbGVfcmFkX29iajogKFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICB4OiBudW1iZXIsXG4gICAgICAgIHk6IG51bWJlcixcbiAgICAgICAgejogbnVtYmVyLFxuICAgICAgICByYWQ6IG51bWJlclxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfb2JqZWN0X3JvdGF0ZV9xdWF0OiAoXG4gICAgICAgIGlkOiBudW1iZXIsXG4gICAgICAgIHg6IG51bWJlcixcbiAgICAgICAgeTogbnVtYmVyLFxuICAgICAgICB6OiBudW1iZXIsXG4gICAgICAgIHc6IG51bWJlclxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfb2JqZWN0X3JvdGF0ZV9xdWF0X29iajogKFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICB4OiBudW1iZXIsXG4gICAgICAgIHk6IG51bWJlcixcbiAgICAgICAgejogbnVtYmVyLFxuICAgICAgICB3OiBudW1iZXJcbiAgICApID0+IHZvaWQ7XG4gICAgX3dsX29iamVjdF9zY2FsZTogKGlkOiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX29iamVjdF90cmFuc19sb2NhbDogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfb2JqZWN0X2dldF90cmFuc2xhdGlvbl9sb2NhbDogKGlkOiBudW1iZXIsIG91dFB0cjogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9vYmplY3Rfc2V0X3RyYW5zbGF0aW9uX2xvY2FsOiAoaWQ6IG51bWJlciwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfb2JqZWN0X2dldF90cmFuc2xhdGlvbl93b3JsZDogKGlkOiBudW1iZXIsIG91dFB0cjogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9vYmplY3Rfc2V0X3RyYW5zbGF0aW9uX3dvcmxkOiAoaWQ6IG51bWJlciwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfb2JqZWN0X3RyYW5zX3dvcmxkOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9vYmplY3RfdHJhbnNfd29ybGRfdG9fbG9jYWw6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX29iamVjdF9zY2FsaW5nX2xvY2FsOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9vYmplY3Rfc2NhbGluZ193b3JsZDogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfb2JqZWN0X3NldF9zY2FsaW5nX2xvY2FsOiAoaWQ6IG51bWJlciwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfb2JqZWN0X3NldF9zY2FsaW5nX3dvcmxkOiAoaWQ6IG51bWJlciwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfb2JqZWN0X3NjYWxpbmdfd29ybGRfdG9fbG9jYWw6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX29iamVjdF9zZXRfcm90YXRpb25fbG9jYWw6IChcbiAgICAgICAgaWQ6IG51bWJlcixcbiAgICAgICAgeDogbnVtYmVyLFxuICAgICAgICB5OiBudW1iZXIsXG4gICAgICAgIHo6IG51bWJlcixcbiAgICAgICAgdzogbnVtYmVyXG4gICAgKSA9PiB2b2lkO1xuICAgIF93bF9vYmplY3Rfc2V0X3JvdGF0aW9uX3dvcmxkOiAoXG4gICAgICAgIGlkOiBudW1iZXIsXG4gICAgICAgIHg6IG51bWJlcixcbiAgICAgICAgeTogbnVtYmVyLFxuICAgICAgICB6OiBudW1iZXIsXG4gICAgICAgIHc6IG51bWJlclxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfb2JqZWN0X3RyYW5zZm9ybVZlY3RvcldvcmxkOiAoaWQ6IG51bWJlciwgcHRyOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfb2JqZWN0X3RyYW5zZm9ybVZlY3RvckxvY2FsOiAoaWQ6IG51bWJlciwgcHRyOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfb2JqZWN0X3RyYW5zZm9ybVBvaW50V29ybGQ6IChpZDogbnVtYmVyLCBwdHI6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9vYmplY3RfdHJhbnNmb3JtUG9pbnRMb2NhbDogKGlkOiBudW1iZXIsIHB0cjogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX29iamVjdF90cmFuc2Zvcm1WZWN0b3JJbnZlcnNlV29ybGQ6IChpZDogbnVtYmVyLCBwdHI6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9vYmplY3RfdHJhbnNmb3JtVmVjdG9ySW52ZXJzZUxvY2FsOiAoaWQ6IG51bWJlciwgcHRyOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfb2JqZWN0X3RyYW5zZm9ybVBvaW50SW52ZXJzZVdvcmxkOiAoaWQ6IG51bWJlciwgcHRyOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfb2JqZWN0X3RyYW5zZm9ybVBvaW50SW52ZXJzZUxvY2FsOiAoaWQ6IG51bWJlciwgcHRyOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfb2JqZWN0X3RvV29ybGRTcGFjZVRyYW5zZm9ybTogKGlkOiBudW1iZXIsIHB0cjogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX29iamVjdF90b09iamVjdFNwYWNlVHJhbnNmb3JtOiAoaWQ6IG51bWJlciwgcHRyOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfb2JqZWN0X2xvb2tBdDogKFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICB4OiBudW1iZXIsXG4gICAgICAgIHk6IG51bWJlcixcbiAgICAgICAgejogbnVtYmVyLFxuICAgICAgICB1cFg6IG51bWJlcixcbiAgICAgICAgdXBZOiBudW1iZXIsXG4gICAgICAgIHVwWjogbnVtYmVyXG4gICAgKSA9PiB2b2lkO1xuICAgIF93bF9vYmplY3Rfc2V0X2RpcnR5OiAoaWQ6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfZ2V0X2pzX2NvbXBvbmVudF9pbmRleDogKGlkOiBudW1iZXIsIG91dFB0cjogbnVtYmVyLCBjb3VudDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX2dldF9qc19jb21wb25lbnRfaW5kZXhfZm9yX2lkOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9nZXRfY29tcG9uZW50X2lkOiAoaWQ6IG51bWJlciwgbWFuYWdlcklkOiBudW1iZXIsIGluZGV4OiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfb2JqZWN0X2dldF9jb21wb25lbnRzOiAoaWQ6IG51bWJlciwgb3V0UHRyOiBudW1iZXIsIGNvdW50OiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfb2JqZWN0X2dldF9jb21wb25lbnRfdHlwZXM6IChpZDogbnVtYmVyLCBvdXRQdHI6IG51bWJlciwgY291bnQ6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfb2JqZWN0X2FkZF9qc19jb21wb25lbnQ6IChpZDogbnVtYmVyLCB0eXBlSWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9vYmplY3RfYWRkX2NvbXBvbmVudDogKGlkOiBudW1iZXIsIHR5cGVJZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX29iamVjdF9pc19jaGFuZ2VkOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9vYmplY3RfZmluZEJ5TmFtZTogKFxuICAgICAgICBvYmo6IG51bWJlcixcbiAgICAgICAgbmFtZTogbnVtYmVyLFxuICAgICAgICBpbmRleFB0cjogbnVtYmVyLFxuICAgICAgICBjaGlsZFB0cjogbnVtYmVyLFxuICAgICAgICBvdXRQdHI6IG51bWJlcixcbiAgICAgICAgY291bnQ6IG51bWJlclxuICAgICkgPT4gbnVtYmVyO1xuICAgIF93bF9vYmplY3RfZmluZEJ5TmFtZVJlY3Vyc2l2ZTogKFxuICAgICAgICBvYmo6IG51bWJlcixcbiAgICAgICAgbmFtZTogbnVtYmVyLFxuICAgICAgICBpbmRleFB0cjogbnVtYmVyLFxuICAgICAgICBvdXRQdHI6IG51bWJlcixcbiAgICAgICAgY291bnQ6IG51bWJlclxuICAgICkgPT4gbnVtYmVyO1xuICAgIF93bF9jb21wb25lbnRfbWFuYWdlcl9uYW1lOiAoc2NlbmU6IG51bWJlciwgaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9za2luX2dldF9qb2ludF9jb3VudDogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfc2tpbl9qb2ludF9pZHM6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3NraW5faW52ZXJzZV9iaW5kX3RyYW5zZm9ybXM6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3NraW5faW52ZXJzZV9iaW5kX3NjYWxpbmdzOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9tb3JwaF90YXJnZXRzX2dldF90YXJnZXRfY291bnQ6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX21vcnBoX3RhcmdldHNfZ2V0X3RhcmdldF9uYW1lOiAoaWQ6IG51bWJlciwgdGFyZ2V0OiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfbW9ycGhfdGFyZ2V0c19nZXRfdGFyZ2V0X2luZGV4OiAoaWQ6IG51bWJlciwgbmFtZVB0cjogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX21vcnBoX3RhcmdldF93ZWlnaHRzX2dldF93ZWlnaHQ6IChpZDogbnVtYmVyLCB0YXJnZXQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9tb3JwaF90YXJnZXRfd2VpZ2h0c19zZXRfd2VpZ2h0OiAoXG4gICAgICAgIGlkOiBudW1iZXIsXG4gICAgICAgIHRhcmdldDogbnVtYmVyLFxuICAgICAgICB3ZWlnaHQ6IG51bWJlclxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfbWF0aF9jdWJpY0hlcm1pdGU6IChcbiAgICAgICAgYTogbnVtYmVyLFxuICAgICAgICBiOiBudW1iZXIsXG4gICAgICAgIGM6IG51bWJlcixcbiAgICAgICAgZDogbnVtYmVyLFxuICAgICAgICBmOiBudW1iZXIsXG4gICAgICAgIGU6IG51bWJlcixcbiAgICAgICAgaXNRdWF0OiBib29sZWFuXG4gICAgKSA9PiB2b2lkO1xuICAgIF93bF9pMThuX3NldExhbmd1YWdlOiAocHRyOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX2kxOG5fY3VycmVudExhbmd1YWdlOiAoKSA9PiBudW1iZXI7XG4gICAgX3dsX2kxOG5fY3VycmVudExhbmd1YWdlSW5kZXg6ICgpID0+IG51bWJlcjtcbiAgICBfd2xfaTE4bl90cmFuc2xhdGU6IChwdHI6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9pMThuX2xhbmd1YWdlQ291bnQ6ICgpID0+IG51bWJlcjtcbiAgICBfd2xfaTE4bl9sYW5ndWFnZUluZGV4OiAocHRyOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfaTE4bl9sYW5ndWFnZUNvZGU6IChpbmRleDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX2kxOG5fbGFuZ3VhZ2VOYW1lOiAoaW5kZXg6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9pMThuX2xhbmd1YWdlRmlsZTogKGluZGV4OiBudW1iZXIpID0+IG51bWJlcjtcbn1cblxuLypcbiAqIEFwaSA8PiBSdW50aW1lIGNvbXBhdGliaWxpdHkuXG4gKlxuICogU29tZSBmZWF0dXJlcyBleHBvc2VkIGluIHRoZSBBUEkgYXJlIG9ubHkgYXZhaWxhYmxlIGZyb20gYSBzcGVjaWZpY1xuICogcnVudGltZSB2ZXJzaW9uLlxuICpcbiAqIEV2ZXJ5IGFkZGVkIGZlYXR1cmUgbXVzdCB0aHJvdyBieSBkZWZhdWx0LiBJZiB0aGUgcnVudGltZSBsb2FkZWRcbiAqIGhhcyB0aGUgc3BlY2lmaWMgZmVhdHVyZSwgdGhlIG1ldGhvZCB3aWxsIGJlIG92ZXJ3cml0dGVuIGJ5IEVtc2NyaXB0ZW5cbiAqIHVwb24gbG9hZGluZy5cbiAqL1xuXG4vKipcbiAqIFRocm93aW5nIGZ1bmN0aW9uIHVzZWQgZm9yIGZlYXR1cmVzIGFkZGVkIGluIGEgcGF0Y2ggdmVyc2lvbi5cbiAqXG4gKiAjIyMjIFVzYWdlXG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IHJlcXVpcmVSdW50aW1lMV8xXzEgPSB0aHJvd0ludmFsaWRSdW50aW1lKCcxLjEuMScpO1xuICogV0FTTS5wcm90b3R5cGUuX3dsX25ld19mdW5jdGlvbiA9IHJlcXVpcmVSdW50aW1lMV8xXzE7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gdmVyc2lvbiBUaGUgdmVyc2lvbiBpbiB3aGljaCB0aGUgZmVhdHVyZSB3YXMgYWRkZWQuXG4gKiBAcmV0dXJucyBBIGZ1bmN0aW9uIHRoYXQgd2lsbCB0aHJvdyB3aGVuIGNhbGxlZC5cbiAqL1xuZnVuY3Rpb24gdGhyb3dJbnZhbGlkUnVudGltZSh2ZXJzaW9uOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgRmVhdHVyZSBhZGRlZCBpbiB2ZXJzaW9uICR7dmVyc2lvbn0uYCArXG4gICAgICAgICAgICAgICAgYFxcblxcdFx1MjE5MiBQbGVhc2UgdXNlIGEgV29uZGVybGFuZCBFbmdpbmUgZWRpdG9yIHZlcnNpb24gPj0gJHt2ZXJzaW9ufWBcbiAgICAgICAgKTtcbiAgICB9O1xufVxuXG4vKiogQHRvZG8gUmVtb3ZlIGF0IDEuMy4wICovXG5jb25zdCByZXF1aXJlUnVudGltZTFfMl8xID0gdGhyb3dJbnZhbGlkUnVudGltZSgnMS4yLjEnKTtcbldBU00ucHJvdG90eXBlLl93bF90ZXh0X2NvbXBvbmVudF9nZXRfd3JhcE1vZGUgPSByZXF1aXJlUnVudGltZTFfMl8xO1xuV0FTTS5wcm90b3R5cGUuX3dsX3RleHRfY29tcG9uZW50X3NldF93cmFwTW9kZSA9IHJlcXVpcmVSdW50aW1lMV8yXzE7XG5XQVNNLnByb3RvdHlwZS5fd2xfdGV4dF9jb21wb25lbnRfZ2V0X3dyYXBXaWR0aCA9IHJlcXVpcmVSdW50aW1lMV8yXzE7XG5XQVNNLnByb3RvdHlwZS5fd2xfdGV4dF9jb21wb25lbnRfc2V0X3dyYXBXaWR0aCA9IHJlcXVpcmVSdW50aW1lMV8yXzE7XG5XQVNNLnByb3RvdHlwZS5fd2xfZm9udF9nZXRfb3V0bGluZVNpemUgPSByZXF1aXJlUnVudGltZTFfMl8xO1xuV0FTTS5wcm90b3R5cGUuX3dsX3NjZW5lX2NyZWF0ZV9jaHVua2VkX3N0YXJ0ID0gcmVxdWlyZVJ1bnRpbWUxXzJfMTtcbldBU00ucHJvdG90eXBlLl93bF9zY2VuZV9jcmVhdGVfY2h1bmtlZF9idWZmZXJfc2l6ZSA9IHJlcXVpcmVSdW50aW1lMV8yXzE7XG5XQVNNLnByb3RvdHlwZS5fd2xfc2NlbmVfY3JlYXRlX2NodW5rZWRfbmV4dCA9IHJlcXVpcmVSdW50aW1lMV8yXzE7XG5XQVNNLnByb3RvdHlwZS5fd2xfc2NlbmVfY3JlYXRlX2NodW5rZWRfYWJvcnQgPSByZXF1aXJlUnVudGltZTFfMl8xO1xuV0FTTS5wcm90b3R5cGUuX3dsX3NjZW5lX2NyZWF0ZV9jaHVua2VkX2VuZF9wcmVmYWIgPSByZXF1aXJlUnVudGltZTFfMl8xO1xuV0FTTS5wcm90b3R5cGUuX3dsX3NjZW5lX2NyZWF0ZV9jaHVua2VkX2VuZF9tYWluID0gcmVxdWlyZVJ1bnRpbWUxXzJfMTtcbldBU00ucHJvdG90eXBlLl93bF9zY2VuZV9jcmVhdGVfY2h1bmtlZF9lbmRfcXVldWVkID0gcmVxdWlyZVJ1bnRpbWUxXzJfMTtcbmNvbnN0IHJlcXVpcmVSdW50aW1lMV8yXzIgPSB0aHJvd0ludmFsaWRSdW50aW1lKCcxLjIuMicpO1xuV0FTTS5wcm90b3R5cGUuX3dsX3ZpZXdfY29tcG9uZW50X2dldF9wcm9qZWN0aW9uVHlwZSA9IHJlcXVpcmVSdW50aW1lMV8yXzI7XG5XQVNNLnByb3RvdHlwZS5fd2xfdmlld19jb21wb25lbnRfc2V0X3Byb2plY3Rpb25UeXBlID0gcmVxdWlyZVJ1bnRpbWUxXzJfMjtcbldBU00ucHJvdG90eXBlLl93bF92aWV3X2NvbXBvbmVudF9nZXRfZXh0ZW50ID0gcmVxdWlyZVJ1bnRpbWUxXzJfMjtcbldBU00ucHJvdG90eXBlLl93bF92aWV3X2NvbXBvbmVudF9zZXRfZXh0ZW50ID0gcmVxdWlyZVJ1bnRpbWUxXzJfMjtcbldBU00ucHJvdG90eXBlLl93bF9hbmltYXRpb25fY29tcG9uZW50X2dldF9yb290TW90aW9uTW9kZSA9IHJlcXVpcmVSdW50aW1lMV8yXzI7XG5XQVNNLnByb3RvdHlwZS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9zZXRfcm9vdE1vdGlvbk1vZGUgPSByZXF1aXJlUnVudGltZTFfMl8yO1xuV0FTTS5wcm90b3R5cGUuX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfZ2V0X3Jvb3RNb3Rpb25fdHJhbnNsYXRpb24gPSByZXF1aXJlUnVudGltZTFfMl8yO1xuV0FTTS5wcm90b3R5cGUuX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfZ2V0X3Jvb3RNb3Rpb25fcm90YXRpb24gPSByZXF1aXJlUnVudGltZTFfMl8yO1xuY29uc3QgcmVxdWlyZVJ1bnRpbWUxXzJfMyA9IHRocm93SW52YWxpZFJ1bnRpbWUoJzEuMi4zJyk7XG5XQVNNLnByb3RvdHlwZS5fd2xfc2NlbmVfZW52aXJvbm1lbnRfc2V0X2ludGVuc2l0eSA9IHJlcXVpcmVSdW50aW1lMV8yXzM7XG5XQVNNLnByb3RvdHlwZS5fd2xfc2NlbmVfZW52aXJvbm1lbnRfZ2V0X2ludGVuc2l0eSA9IHJlcXVpcmVSdW50aW1lMV8yXzM7XG5XQVNNLnByb3RvdHlwZS5fd2xfc2NlbmVfZW52aXJvbm1lbnRfc2V0X3RpbnQgPSByZXF1aXJlUnVudGltZTFfMl8zO1xuV0FTTS5wcm90b3R5cGUuX3dsX3NjZW5lX2Vudmlyb25tZW50X2dldF90aW50ID0gcmVxdWlyZVJ1bnRpbWUxXzJfMztcbldBU00ucHJvdG90eXBlLl93bF9zY2VuZV9lbnZpcm9ubWVudF9zZXRfY29lZmZpY2llbnRzID0gcmVxdWlyZVJ1bnRpbWUxXzJfMztcbldBU00ucHJvdG90eXBlLl93bF9zY2VuZV9lbnZpcm9ubWVudF9nZXRfY29lZmZpY2llbnRzID0gcmVxdWlyZVJ1bnRpbWUxXzJfMztcbldBU00ucHJvdG90eXBlLl93bF9hbmltYXRpb25fY29tcG9uZW50X2dldF9pdGVyYXRpb24gPSByZXF1aXJlUnVudGltZTFfMl8zO1xuV0FTTS5wcm90b3R5cGUuX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfZ2V0X3Bvc2l0aW9uID0gcmVxdWlyZVJ1bnRpbWUxXzJfMztcbldBU00ucHJvdG90eXBlLl93bF9hbmltYXRpb25fY29tcG9uZW50X2dldF9kdXJhdGlvbiA9IHJlcXVpcmVSdW50aW1lMV8yXzM7XG5XQVNNLnByb3RvdHlwZS5fd2xfcmVuZGVyZXJfc3RyZWFtaW5nX2lkbGUgPSByZXF1aXJlUnVudGltZTFfMl8zO1xuIiwgIi8qKlxuICogVGhpcyBmaWxlIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkLlxuICpcbiAqICoqRG8gbm90KiogbW9kaWZ5IHRoaXMgZmlsZSBkaXJlY3RseSwgYnV0IGluc3RlYWQgdXBkYXRlXG4gKiB0aGUgJ3dyaXRlLXZlcnNpb24ubWpzJyBzY3JpcHQuXG4gKi9cblxuLyoqXG4gKiBWZXJzaW9uIHR5cGUgZm9sbG93aW5nIGEgc3Vic2V0IG9mIHRoZSBTZW1hbnRpYyBWZXJzaW9uaW5nIHNwZWNpZmljYXRpb24uXG4gKi9cbmV4cG9ydCB0eXBlIFZlcnNpb24gPSB7bWFqb3I6IG51bWJlciwgbWlub3I6IG51bWJlciwgcGF0Y2g6IG51bWJlciwgcmM6IG51bWJlcn07XG5cbi8qKiBWZXJzaW9uIG9mIHRoaXMgQVBJLiAqL1xuZXhwb3J0IGNvbnN0IEFQSVZlcnNpb246IFZlcnNpb24gPSB7XG4gICAgbWFqb3I6IDEsXG4gICAgbWlub3I6IDIsXG4gICAgcGF0Y2g6IDQsXG4gICAgcmM6IDBcbn07XG4iLCAiaW1wb3J0IHtzaW1kLCB0aHJlYWRzfSBmcm9tICd3YXNtLWZlYXR1cmUtZGV0ZWN0JztcbmltcG9ydCB7V29uZGVybGFuZEVuZ2luZX0gZnJvbSAnLi9lbmdpbmUuanMnO1xuaW1wb3J0IHtMb2dMZXZlbH0gZnJvbSAnLi91dGlscy9sb2dnZXIuanMnO1xuaW1wb3J0IHtXQVNNfSBmcm9tICcuL3dhc20uanMnO1xuXG5pbXBvcnQge0FQSVZlcnNpb24sIFZlcnNpb259IGZyb20gJy4vdmVyc2lvbi5qcyc7XG5pbXBvcnQge2dldEJhc2VVcmx9IGZyb20gJy4vdXRpbHMvZmV0Y2guanMnO1xuXG5leHBvcnQgKiBmcm9tICcuL3V0aWxzL2luZGV4LmpzJztcbmV4cG9ydCAqIGZyb20gJy4vZGVjb3JhdG9ycy5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3dvbmRlcmxhbmQuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9lbmdpbmUuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9wcm9wZXJ0eS5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3ByZWZhYi5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3NjZW5lLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vc2NlbmUtZ2x0Zi5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3Jlc291cmNlcy9yZXNvdXJjZS5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3Jlc291cmNlcy9tYXRlcmlhbC1tYW5hZ2VyLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vcmVzb3VyY2VzL21lc2gtbWFuYWdlci5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3Jlc291cmNlcy90ZXh0dXJlLW1hbmFnZXIuanMnO1xuZXhwb3J0ICogZnJvbSAnLi90eXBlcy5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3ZlcnNpb24uanMnO1xuZXhwb3J0ICogZnJvbSAnLi93YXNtLmpzJztcblxuLyoqIFJlbGF0aXZlIGRlZmF1bHQgcGF0aCBmb3IgdGhlIGxvYWRpbmcgc2NyZWVuLiAqL1xuY29uc3QgTE9BRElOR19TQ1JFRU5fUEFUSCA9ICdXb25kZXJsYW5kUnVudGltZS1Mb2FkaW5nU2NyZWVuLmJpbic7XG5cbmZ1bmN0aW9uIGxvYWRTY3JpcHQoc2NyaXB0VVJMOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlczogKCkgPT4gdm9pZCwgcmVqKSA9PiB7XG4gICAgICAgIGNvbnN0IHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgICAgY29uc3Qgbm9kZSA9IGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocyk7XG4gICAgICAgIHMub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChub2RlKTtcbiAgICAgICAgICAgIHJlcygpO1xuICAgICAgICB9O1xuICAgICAgICBzLm9uZXJyb3IgPSAoZSkgPT4ge1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChub2RlKTtcbiAgICAgICAgICAgIHJlaihlKTtcbiAgICAgICAgfTtcbiAgICAgICAgcy5zcmMgPSBzY3JpcHRVUkw7XG4gICAgfSk7XG59XG5cbi8qKlxuICogRmluZHMgd2hldGhlciBzaW1kICYgdGhyZWFkaW5nIGFyZSBzdXBwb3J0ZWQgb3Igbm90LlxuICpcbiAqIEByZXR1cm5zIEFuIG9iamVjdCBjb250YWluaW5nIGJvb2xlYW4gZm9yIHNpbWQgYW5kIHRocmVhZC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZGV0ZWN0RmVhdHVyZXMoKTogUHJvbWlzZTx7XG4gICAgc2ltZFN1cHBvcnRlZDogYm9vbGVhbjtcbiAgICB0aHJlYWRzU3VwcG9ydGVkOiBib29sZWFuO1xufT4ge1xuICAgIGxldCBbc2ltZFN1cHBvcnRlZCwgdGhyZWFkc1N1cHBvcnRlZF0gPSBhd2FpdCBQcm9taXNlLmFsbChbc2ltZCgpLCB0aHJlYWRzKCldKTtcbiAgICBpZiAoc2ltZFN1cHBvcnRlZCkge1xuICAgICAgICBjb25zb2xlLmxvZygnV0FTTSBTSU1EIGlzIHN1cHBvcnRlZCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUud2FybignV0FTTSBTSU1EIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbiAgICB9XG4gICAgaWYgKHRocmVhZHNTdXBwb3J0ZWQpIHtcbiAgICAgICAgaWYgKHNlbGYuY3Jvc3NPcmlnaW5Jc29sYXRlZCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1dBU00gVGhyZWFkcyBpcyBzdXBwb3J0ZWQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgICAnV0FTTSBUaHJlYWRzIGlzIHN1cHBvcnRlZCwgYnV0IHRoZSBwYWdlIGlzIG5vdCBjcm9zc09yaWdpbklzb2xhdGVkLCB0aGVyZWZvcmUgdGhyZWFkIHN1cHBvcnQgaXMgZGlzYWJsZWQuJ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUud2FybignV0FTTSBUaHJlYWRzIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbiAgICB9XG5cbiAgICB0aHJlYWRzU3VwcG9ydGVkID0gdGhyZWFkc1N1cHBvcnRlZCAmJiBzZWxmLmNyb3NzT3JpZ2luSXNvbGF0ZWQ7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2ltZFN1cHBvcnRlZCxcbiAgICAgICAgdGhyZWFkc1N1cHBvcnRlZCxcbiAgICB9O1xufVxuXG4vKipcbiAqIE9wdGlvbnMgZm9yIHtAbGluayBMb2FkUnVudGltZU9wdGlvbnMueHJPZmZlclNlc3Npb259XG4gKlxuICogQHNpbmNlIDEuMS41XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgWFJPZmZlclNlc3Npb25PcHRpb25zIHtcbiAgICAvKipcbiAgICAgKiBNb2RlIHRvIG9mZmVyIFhSIHNlc3Npb24gd2l0aC4gSWYgc2V0IHRvIGAnYXV0bydgLCBvZmZlcnMgYSBzZXNzaW9uXG4gICAgICogd2l0aCB0aGUgZmlyc3Qgc3VwcG9ydGVkIG1vZGUgaW4gdGhlIGZvbGxvd2luZyBvcmRlcjpcbiAgICAgKiAtIFZSXG4gICAgICogLSBBUlxuICAgICAqIC0gaW5saW5lXG4gICAgICovXG4gICAgbW9kZTogWFJTZXNzaW9uTW9kZSB8ICdhdXRvJztcbiAgICAvKiogUmVxdWlyZWQgZmVhdHVyZXMgZm9yIHRoZSBvZmZlcmVkIFhSIHNlc3Npb24gKi9cbiAgICBmZWF0dXJlczogc3RyaW5nW107XG4gICAgLyoqIE9wdGlvbmFsIGZlYXR1cmVzIGZvciB0aGUgb2ZmZXJlZCBYUiBzZXNzaW9uICovXG4gICAgb3B0aW9uYWxGZWF0dXJlczogc3RyaW5nW107XG59XG5cbi8qKlxuICogT3B0aW9ucyB0byBmb3J3YXJkIHRvIHtAbGluayBsb2FkUnVudGltZX1cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBMb2FkUnVudGltZU9wdGlvbnMge1xuICAgIC8qKlxuICAgICAqIElmIGB0cnVlYCwgZm9yY2VzIHRoZSBydW50aW1lIHRvIGxvYWQgdGhlIFNJTUQtY29tcGF0aWJsZSB2ZXJzaW9uLlxuICAgICAqIElmIGB1bmRlZmluZWRgLCBwZXJmb3JtcyBicm93c2VyIGZlYXR1cmUgZGV0ZWN0aW9uIHRvIGNoZWNrIHdoZXRoZXIgU0lNRCBpcyBzdXBwb3J0ZWQgb3Igbm90LlxuICAgICAqL1xuICAgIHNpbWQ6IGJvb2xlYW47XG4gICAgLyoqXG4gICAgICogSWYgYHRydWVgLCBmb3JjZXMgdGhlIHJ1bnRpbWUgdG8gbG9hZCB0aGUgdGhyZWFkcy1jb21wYXRpYmxlIHZlcnNpb24uXG4gICAgICogSWYgYHVuZGVmaW5lZGAsIHBlcmZvcm1zIGJyb3dzZXIgZmVhdHVyZSBkZXRlY3Rpb24gdG8gY2hlY2sgd2hldGhlciB0aHJlYWRzIGFyZSBzdXBwb3J0ZWQgb3Igbm90LlxuICAgICAqL1xuICAgIHRocmVhZHM6IGJvb2xlYW47XG4gICAgLyoqXG4gICAgICogSWYgYHRydWVgLCBmb3JjZXMgdGhlIHJ1bnRpbWUgdG8gbG9hZCB0aGUgd2ViZ3B1LWNvbXBhdGlibGUgdmVyc2lvbi5cbiAgICAgKi9cbiAgICB3ZWJncHU6IGJvb2xlYW47XG4gICAgLyoqXG4gICAgICogSWYgYHRydWVgLCBmb3JjZXMgdGhlIHJ1bnRpbWUgdG8gbG9hZCBhIHBoeXN4LWNvbXBhdGlibGUgdmVyc2lvbi5cbiAgICAgKlxuICAgICAqICoqTm90ZSoqOiBJZiB5b3VyIHNjZW5lIHVzZXMgcGh5c3gsIHlvdSAqKm11c3QqKiBlbmFibGUgdGhpcyBvcHRpb24uXG4gICAgICovXG4gICAgcGh5c3g6IGJvb2xlYW47XG4gICAgLyoqXG4gICAgICogSWYgYHRydWVgLCBmb3JjZXMgdGhlIHJ1bnRpbWUgdG8gbG9hZCBhIGxvYWRlci1jb21wYXRpYmxlIHZlcnNpb24uXG4gICAgICpcbiAgICAgKiBUaGlzIG9wdGlvbiBhbGxvd3MgdG8gbG9hZCBnbHRmIGRhdGEgYXQgcnVudGltZS5cbiAgICAgKi9cbiAgICBsb2FkZXI6IGJvb2xlYW47XG4gICAgLyoqXG4gICAgICogUGF0aCB0byB0aGUgbG9hZGluZyBzY3JlZW4uIElmIGB1bmRlZmluZWRgLCBkZWZhdWx0cyB0byAnV29uZGVybGFuZFJ1bnRpbWUtTG9hZGluZ1NjcmVlbi5iaW4nLlxuICAgICAqIEJld2FyZSB0aGF0IHRoZXNlIGFyZSBzcGVjaWFsIC5iaW4gZmlsZXMgc2lnbmVkIGJ5IFdvbmRlcmxhbmQuIEN1c3RvbWl6aW5nXG4gICAgICogcmVxdWlyZXMgYW4gZW50ZXJwcmlzZSBsaWNlbnNlLCBwbGVhc2UgcmVhY2ggb3V0IGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgICAqL1xuICAgIGxvYWRpbmdTY3JlZW46IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIERlZmF1bHQgZnJhbWVidWZmZXIgc2NhbGUgZmFjdG9yLiBUaGlzIGNhbiBsYXRlciBiZSBjaGFuZ2VkIHVzaW5nXG4gICAgICoge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUueHJGcmFtZWJ1ZmZlclNjYWxlRmFjdG9yfVxuICAgICAqL1xuICAgIHhyRnJhbWVidWZmZXJTY2FsZUZhY3RvcjogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogV2hldGhlciB0byBhZHZlcnRpc2UgQVIvVlIgc2Vzc2lvbiBzdXBwb3J0IHRvIHRoZSBicm93c2VyLlxuICAgICAqXG4gICAgICogQWRkcyBhbiBpbnRlcmFjdGl2ZSBVSSBlbGVtZW50IHRvIHRoZSBicm93c2VyIGludGVyZmFjZSB0byBzdGFydCBhbiBYUlxuICAgICAqIHNlc3Npb24uIEJyb3dzZXIgc3VwcG9ydCBpcyBvcHRpb25hbCwgc28gaXQncyBhZHZpc2VkIHRvIHN0aWxsIGFsbG93XG4gICAgICogcmVxdWVzdGluZyBhIHNlc3Npb24gd2l0aCBhIFVJIGVsZW1lbnQgb24gdGhlIHdlYnNpdGUgaXRzZWxmLlxuICAgICAqXG4gICAgICogSWYgYHVuZGVmaW5lZGAsIG5vIFhSIHNlc3Npb24gaXMgYXV0b21hdGljYWxseSBvZmZlcmVkIHRvIHRoZSBicm93c2VyLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMS41XG4gICAgICovXG4gICAgeHJPZmZlclNlc3Npb246IFhST2ZmZXJTZXNzaW9uT3B0aW9ucztcblxuICAgIC8qKlxuICAgICAqIENhbnZhcyBpZCBvciBlbGVtZW50LiBJZiB0aGlzIGlzIGB1bmRlZmluZWRgLCBsb29rcyBmb3IgYSBjYW52YXMgd2l0aCBpZCAnY2FudmFzJy5cbiAgICAgKi9cbiAgICBjYW52YXM6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIExvZ2dpbmcgbGV2ZWwocykgdG8gZW5hYmxlLlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCwgYWxsIGxldmVscyBhcmUgZW5hYmxlZC5cbiAgICAgKi9cbiAgICBsb2dzOiBMb2dMZXZlbFtdO1xufVxuXG4vKiBHbG9iYWwgYm9vbGVhbiB0byBjaGVjayBpZiBBUi9WUiBpcyBzdXBwb3J0ZWQuICovXG5jb25zdCB4clN1cHBvcnRlZDoge2FyOiBib29sZWFuOyB2cjogYm9vbGVhbn0gPSB7XG4gICAgYXI6IG51bGwhLFxuICAgIHZyOiBudWxsISxcbn07XG5cbi8qKlxuICogQ2hlY2sgd2hldGhlciBYUiBpcyBzdXBwb3J0ZWQgYW5kIHN0b3JlIHRoZSByZXN1bHQgaW4gdGhlIGdsb2JhbCBzcGFjZS5cbiAqL1xuZnVuY3Rpb24gY2hlY2tYUlN1cHBvcnQoKTogUHJvbWlzZTx7YXI6IGJvb2xlYW47IHZyOiBib29sZWFufT4ge1xuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yID09PSAndW5kZWZpbmVkJyB8fCAhbmF2aWdhdG9yLnhyKSB7XG4gICAgICAgIHhyU3VwcG9ydGVkLnZyID0gZmFsc2U7XG4gICAgICAgIHhyU3VwcG9ydGVkLmFyID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoeHJTdXBwb3J0ZWQpO1xuICAgIH1cbiAgICBjb25zdCB2clByb21pc2UgPVxuICAgICAgICB4clN1cHBvcnRlZC52ciAhPT0gbnVsbFxuICAgICAgICAgICAgPyBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgICAgICAgOiBuYXZpZ2F0b3IueHJcbiAgICAgICAgICAgICAgICAgIC5pc1Nlc3Npb25TdXBwb3J0ZWQoJ2ltbWVyc2l2ZS12cicpXG4gICAgICAgICAgICAgICAgICAudGhlbigoc3VwcG9ydGVkKSA9PiAoeHJTdXBwb3J0ZWQudnIgPSBzdXBwb3J0ZWQpKVxuICAgICAgICAgICAgICAgICAgLyogVGhpcyBjYW4gaGFwcGVuIGlmIHRoZSBhcHBsaWNhdGlvbiBpcyBlbWJlZGRlZCBpbiBhbiBpZnJhbWUgd2l0aG91dFxuICAgICAgICAgICAgICAgICAgICogeHItc3BhdGlhbC10cmFja2luZyBwZXJtaXNzaW9uLiBuYXZpZ2F0b3IueHIgd2lsbCBiZSBhdmFpbGFibGUsIGJ1dFxuICAgICAgICAgICAgICAgICAgICogYW55IGFjY2VzcyBvZiBpdCB3aWxsIHRocm93LiAqL1xuICAgICAgICAgICAgICAgICAgLmNhdGNoKCgpID0+ICh4clN1cHBvcnRlZC52ciA9IGZhbHNlKSk7XG4gICAgY29uc3QgYXJQcm9taXNlID1cbiAgICAgICAgeHJTdXBwb3J0ZWQuYXIgIT09IG51bGxcbiAgICAgICAgICAgID8gUHJvbWlzZS5yZXNvbHZlKClcbiAgICAgICAgICAgIDogbmF2aWdhdG9yLnhyXG4gICAgICAgICAgICAgICAgICAuaXNTZXNzaW9uU3VwcG9ydGVkKCdpbW1lcnNpdmUtYXInKVxuICAgICAgICAgICAgICAgICAgLnRoZW4oKHN1cHBvcnRlZCkgPT4gKHhyU3VwcG9ydGVkLmFyID0gc3VwcG9ydGVkKSlcbiAgICAgICAgICAgICAgICAgIC8qIFRoaXMgY2FuIGhhcHBlbiBpZiB0aGUgYXBwbGljYXRpb24gaXMgZW1iZWRkZWQgaW4gYW4gaWZyYW1lIHdpdGhvdXRcbiAgICAgICAgICAgICAgICAgICAqIHhyLXNwYXRpYWwtdHJhY2tpbmcgcGVybWlzc2lvbi4gbmF2aWdhdG9yLnhyIHdpbGwgYmUgYXZhaWxhYmxlLCBidXRcbiAgICAgICAgICAgICAgICAgICAqIGFueSBhY2Nlc3Mgb2YgaXQgd2lsbCB0aHJvdy4gKi9cbiAgICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiAoeHJTdXBwb3J0ZWQuYXIgPSBmYWxzZSkpO1xuXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt2clByb21pc2UsIGFyUHJvbWlzZV0pLnRoZW4oKCkgPT4geHJTdXBwb3J0ZWQpO1xufVxuXG4vKipcbiAqIEVuc3VyZXMgdGhhdCB0aGlzIEFQSSBpcyBjb21wYXRpYmxlIHdpdGggdGhlIGdpdmVuXG4gKiBydW50aW1lIHZlcnNpb24uXG4gKlxuICogV2Ugb25seSBlbmZvcmNlIGNvbXBhdGliaWxpdHkgZm9yIG1ham9yIGFuZCBtaW5vciBjb21wb25lbnRzLCBpLmUuLFxuICogdGhlIHJ1bnRpbWUgYW5kIHRoZSBBUEkgbXVzdCBib3RoIGJlIG9mIHRoZSBmb3JtIGB4LnkuKmAuXG4gKlxuICogQHRocm93cyBJZiB0aGUgbWFqb3Igb3IgdGhlIG1pbm9yIGNvbXBvbmVudHMgYXJlIGRpZmZlcmVudC5cbiAqXG4gKiBAcGFyYW0gdmVyc2lvbiBUaGUgdGFyZ2V0IHZlcnNpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrUnVudGltZUNvbXBhdGliaWxpdHkodmVyc2lvbjogVmVyc2lvbikge1xuICAgIGNvbnN0IHttYWpvciwgbWlub3J9ID0gdmVyc2lvbjtcblxuICAgIGxldCBtYWpvckRpZmYgPSBtYWpvciAtIEFQSVZlcnNpb24ubWFqb3I7XG4gICAgbGV0IG1pbm9yRGlmZiA9IG1pbm9yIC0gQVBJVmVyc2lvbi5taW5vcjtcbiAgICAvKiBTYW1lIHZlcnNpb24sIHNvIHBlcmZlY3RseSBjb21wYXRpYmxlLiAqL1xuICAgIGlmICghbWFqb3JEaWZmICYmICFtaW5vckRpZmYpIHJldHVybjtcblxuICAgIGNvbnN0IGVycm9yID1cbiAgICAgICAgJ2NoZWNrUnVudGltZUNvbXBhdGliaWxpdHkoKTogVmVyc2lvbiBjb21wYXRpYmlsaXR5IG1pc21hdGNoOlxcbicgK1xuICAgICAgICAnXFx0XHUyMTkyIEFQSSBhbmQgcnVudGltZSBjb21wYXRpYmlsaXR5IGlzIGVuZm9yY2VkIG9uIGEgcGF0Y2ggbGV2ZWwgKHZlcnNpb25zIHgueS4qKVxcbic7XG5cbiAgICBjb25zdCBpc1J1bnRpbWVPbGRlciA9IG1ham9yRGlmZiA8IDAgfHwgKCFtYWpvckRpZmYgJiYgbWlub3JEaWZmIDwgMCk7XG4gICAgaWYgKGlzUnVudGltZU9sZGVyKSB7XG4gICAgICAgIC8qIFJ1bnRpbWUgaXMgb3V0IG9mIGRhdGUuICovXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGAke2Vycm9yfVxcdFx1MjE5MiBQbGVhc2UgdXNlIGEgV29uZGVybGFuZCBFbmdpbmUgZWRpdG9yIHZlcnNpb24gPj0gJHtBUElWZXJzaW9uLm1ham9yfS4ke0FQSVZlcnNpb24ubWlub3J9LipgXG4gICAgICAgICk7XG4gICAgfVxuICAgIC8qIEFQSSBpcyBvdXQgb2YgZGF0ZS4gKi9cbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGAke2Vycm9yfVxcdFx1MjE5MiBQbGVhc2UgdXNlIGEgbmV3IEFQSSB2ZXJzaW9uID49ICR7dmVyc2lvbi5tYWpvcn0uJHt2ZXJzaW9uLm1pbm9yfS4qYFxuICAgICk7XG59XG5cbi8qKlxuICogTG9hZCB0aGUgcnVudGltZSB1c2luZyB0aGUgV0FTTSBhbmQgSlMgZmlsZXMuXG4gKlxuICogQHBhcmFtIHJ1bnRpbWUgVGhlIHJ1bnRpbWUgYmFzZSBzdHJpbmcsIGUuZyw6IGBXb25kZXJsYW5kUnVudGltZS1sb2FkZXItcGh5c3hgLlxuICogQHBhcmFtIG9wdGlvbnMgT3B0aW9ucyB0byBtb2RpZnkgdGhlIGxvYWRpbmcgYmVoYXZpb3VyLlxuICpcbiAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGVuZ2luZSBpcyByZWFkeSB0byBiZSB1c2VkLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZFJ1bnRpbWUoXG4gICAgcnVudGltZTogc3RyaW5nLFxuICAgIG9wdGlvbnM6IFBhcnRpYWw8TG9hZFJ1bnRpbWVPcHRpb25zPiA9IHt9XG4pOiBQcm9taXNlPFdvbmRlcmxhbmRFbmdpbmU+IHtcbiAgICBjb25zdCB4clByb21pc2UgPSBjaGVja1hSU3VwcG9ydCgpO1xuXG4gICAgY29uc3QgYmFzZVVSTCA9IGdldEJhc2VVcmwocnVudGltZSk7XG5cbiAgICBjb25zdCB7c2ltZFN1cHBvcnRlZCwgdGhyZWFkc1N1cHBvcnRlZH0gPSBhd2FpdCBkZXRlY3RGZWF0dXJlcygpO1xuICAgIGNvbnN0IHtcbiAgICAgICAgc2ltZCA9IHNpbWRTdXBwb3J0ZWQsXG4gICAgICAgIHRocmVhZHMgPSB0aHJlYWRzU3VwcG9ydGVkLFxuICAgICAgICB3ZWJncHUgPSBmYWxzZSxcbiAgICAgICAgcGh5c3ggPSBmYWxzZSxcbiAgICAgICAgbG9hZGVyID0gZmFsc2UsXG4gICAgICAgIHhyRnJhbWVidWZmZXJTY2FsZUZhY3RvciA9IDEuMCxcbiAgICAgICAgeHJPZmZlclNlc3Npb24gPSBudWxsLFxuICAgICAgICBsb2FkaW5nU2NyZWVuID0gYmFzZVVSTCA/IGAke2Jhc2VVUkx9LyR7TE9BRElOR19TQ1JFRU5fUEFUSH1gIDogTE9BRElOR19TQ1JFRU5fUEFUSCxcbiAgICAgICAgY2FudmFzID0gJ2NhbnZhcycsXG4gICAgICAgIGxvZ3MgPSBbTG9nTGV2ZWwuSW5mbywgTG9nTGV2ZWwuV2FybiwgTG9nTGV2ZWwuRXJyb3JdLFxuICAgIH0gPSBvcHRpb25zO1xuXG4gICAgY29uc3QgdmFyaWFudCA9IFtdO1xuICAgIGlmICh3ZWJncHUpIHZhcmlhbnQucHVzaCgnd2ViZ3B1Jyk7XG4gICAgaWYgKGxvYWRlcikgdmFyaWFudC5wdXNoKCdsb2FkZXInKTtcbiAgICBpZiAocGh5c3gpIHZhcmlhbnQucHVzaCgncGh5c3gnKTtcbiAgICBpZiAoc2ltZCkgdmFyaWFudC5wdXNoKCdzaW1kJyk7XG4gICAgaWYgKHRocmVhZHMpIHZhcmlhbnQucHVzaCgndGhyZWFkcycpO1xuXG4gICAgY29uc3QgdmFyaWFudFN0ciA9IHZhcmlhbnQuam9pbignLScpO1xuXG4gICAgbGV0IGZpbGVuYW1lID0gcnVudGltZTtcbiAgICBpZiAodmFyaWFudFN0cikgZmlsZW5hbWUgPSBgJHtmaWxlbmFtZX0tJHt2YXJpYW50U3RyfWA7XG5cbiAgICBjb25zdCBkb3dubG9hZCA9IGZ1bmN0aW9uIChcbiAgICAgICAgZmlsZW5hbWU6IHN0cmluZyxcbiAgICAgICAgZXJyb3JNZXNzYWdlOiBzdHJpbmdcbiAgICApOiBQcm9taXNlPEFycmF5QnVmZmVyPiB7XG4gICAgICAgIHJldHVybiBmZXRjaChmaWxlbmFtZSlcbiAgICAgICAgICAgIC50aGVuKChyKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFyLm9rKSByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gci5hcnJheUJ1ZmZlcigpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoXykgPT4gUHJvbWlzZS5yZWplY3QoZXJyb3JNZXNzYWdlKSk7XG4gICAgfTtcblxuICAgIGNvbnN0IFt3YXNtRGF0YSwgbG9hZGluZ1NjcmVlbkRhdGFdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBkb3dubG9hZChgJHtmaWxlbmFtZX0ud2FzbWAsIGBGYWlsZWQgdG8gZmV0Y2ggcnVudGltZSAud2FzbSBmaWxlOiAke2ZpbGVuYW1lfWApLFxuICAgICAgICBkb3dubG9hZChsb2FkaW5nU2NyZWVuLCAnRmFpbGVkIHRvIGZldGNoIGxvYWRpbmcgc2NyZWVuIGZpbGUnKSxcbiAgICBdKTtcblxuICAgIGNvbnN0IGNhbnZhc0VsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjYW52YXMpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xuICAgIGlmICghY2FudmFzRWxlbWVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGxvYWRSdW50aW1lKCk6IEZhaWxlZCB0byBmaW5kIGNhbnZhcyB3aXRoIGlkICcke2NhbnZhc30nYCk7XG4gICAgfVxuICAgIGlmICghKGNhbnZhc0VsZW1lbnQgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBsb2FkUnVudGltZSgpOiBIVE1MIGVsZW1lbnQgJyR7Y2FudmFzfScgbXVzdCBiZSBhIGNhbnZhc2ApO1xuICAgIH1cblxuICAgIGNvbnN0IHdhc20gPSBuZXcgV0FTTSh0aHJlYWRzKTtcbiAgICAod2FzbS53b3JrZXIgYXMgc3RyaW5nKSA9IGAke2ZpbGVuYW1lfS53b3JrZXIuanNgO1xuICAgICh3YXNtLndhc20gYXMgQXJyYXlCdWZmZXIpID0gd2FzbURhdGE7XG4gICAgKHdhc20uY2FudmFzIGFzIEhUTUxDYW52YXNFbGVtZW50KSA9IGNhbnZhc0VsZW1lbnQ7XG4gICAgd2FzbS5fbG9nLmxldmVscy5lbmFibGUoLi4ubG9ncyk7XG5cbiAgICBpZiAod2ViZ3B1KSB7XG4gICAgICAgIGNvbnN0IGFkYXB0ZXIgPSBhd2FpdCAobmF2aWdhdG9yIGFzIGFueSkuZ3B1LnJlcXVlc3RBZGFwdGVyKCk7XG4gICAgICAgIGNvbnN0IGRlc2MgPSB7XG4gICAgICAgICAgICByZXF1aXJlZEZlYXR1cmVzOiBbJ3RleHR1cmUtY29tcHJlc3Npb24tYmMnXSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZGV2aWNlID0gYXdhaXQgYWRhcHRlci5yZXF1ZXN0RGV2aWNlKGRlc2MpO1xuICAgICAgICAod2FzbS5wcmVpbml0aWFsaXplZFdlYkdQVURldmljZSBhcyBhbnkpID0gZGV2aWNlO1xuICAgIH1cblxuICAgIGNvbnN0IGVuZ2luZSA9IG5ldyBXb25kZXJsYW5kRW5naW5lKHdhc20sIGxvYWRpbmdTY3JlZW5EYXRhKTtcblxuICAgIGlmICghd2luZG93Ll9XTCkge1xuICAgICAgICB3aW5kb3cuX1dMID0ge3J1bnRpbWVzOiB7fX07XG4gICAgfVxuICAgIGNvbnN0IHJ1bnRpbWVzID0gd2luZG93Ll9XTC5ydW50aW1lcztcblxuICAgIC8qIEdsb2JhbCBpZGVudGlmaWVyIG9mIHRoaXMgcnVudGltZSBpbiBgd2luZG93YC4gKi9cbiAgICBjb25zdCBydW50aW1lR2xvYmFsSWQgPSB2YXJpYW50U3RyID8gdmFyaWFudFN0ciA6ICdkZWZhdWx0JztcbiAgICAvKiBPbmx5IGxvYWQgdGhlIHJ1bnRpbWUgaWYgbm90IHByZXZpb3VzbHkgbG9hZGVkIGluIHRoZSBwYWdlICovXG4gICAgaWYgKCFydW50aW1lc1tydW50aW1lR2xvYmFsSWRdKSB7XG4gICAgICAgIGF3YWl0IGxvYWRTY3JpcHQoYCR7ZmlsZW5hbWV9LmpzYCk7XG4gICAgICAgIHJ1bnRpbWVzW3J1bnRpbWVHbG9iYWxJZF0gPSB3aW5kb3cuaW5zdGFudGlhdGVXb25kZXJsYW5kUnVudGltZSE7XG4gICAgICAgIHdpbmRvdy5pbnN0YW50aWF0ZVdvbmRlcmxhbmRSdW50aW1lID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBhd2FpdCBydW50aW1lc1tydW50aW1lR2xvYmFsSWRdKHdhc20pO1xuICAgIGVuZ2luZS5faW5pdCgpO1xuXG4gICAgLyogVGhyb3dzIGlmIHRoZSBydW50aW1lIGlzbid0IGNvbXBhdGlibGUgd2l0aCB0aGUgQVBJLiAqL1xuICAgIGNoZWNrUnVudGltZUNvbXBhdGliaWxpdHkoZW5naW5lLnJ1bnRpbWVWZXJzaW9uKTtcblxuICAgIGNvbnN0IHhyID0gYXdhaXQgeHJQcm9taXNlO1xuICAgIChlbmdpbmUuYXJTdXBwb3J0ZWQgYXMgYm9vbGVhbikgPSB4ci5hcjtcbiAgICAoZW5naW5lLnZyU3VwcG9ydGVkIGFzIGJvb2xlYW4pID0geHIudnI7XG4gICAgZW5naW5lLnhyRnJhbWVidWZmZXJTY2FsZUZhY3RvciA9IHhyRnJhbWVidWZmZXJTY2FsZUZhY3RvcjtcblxuICAgIGVuZ2luZS5hdXRvUmVzaXplQ2FudmFzID0gdHJ1ZTtcbiAgICBlbmdpbmUuc3RhcnQoKTtcblxuICAgIGlmICh4ck9mZmVyU2Vzc2lvbiAhPT0gbnVsbCkge1xuICAgICAgICBsZXQgbW9kZSA9IHhyT2ZmZXJTZXNzaW9uLm1vZGU7XG4gICAgICAgIGlmIChtb2RlID09ICdhdXRvJykge1xuICAgICAgICAgICAgaWYgKGVuZ2luZS52clN1cHBvcnRlZCkge1xuICAgICAgICAgICAgICAgIG1vZGUgPSAnaW1tZXJzaXZlLXZyJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZW5naW5lLmFyU3VwcG9ydGVkKSB7XG4gICAgICAgICAgICAgICAgbW9kZSA9ICdpbW1lcnNpdmUtYXInO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBtb2RlID0gJ2lubGluZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBvZmZlclNlc3Npb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlbmdpbmVcbiAgICAgICAgICAgICAgICAub2ZmZXJYUlNlc3Npb24oXG4gICAgICAgICAgICAgICAgICAgIG1vZGUgYXMgWFJTZXNzaW9uTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgeHJPZmZlclNlc3Npb24uZmVhdHVyZXMsXG4gICAgICAgICAgICAgICAgICAgIHhyT2ZmZXJTZXNzaW9uLm9wdGlvbmFsRmVhdHVyZXNcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgLnRoZW4oXG4gICAgICAgICAgICAgICAgICAgIC8qIFdoZW4gdGhlIHNlc3Npb24gZW5kcywgb2ZmZXIgdG8gc3RhcnQgYSBuZXcgb25lIGFnYWluICovXG4gICAgICAgICAgICAgICAgICAgIChzKSA9PiBzLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZCcsIG9mZmVyU2Vzc2lvbilcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgLyogVGhlIGJyb3dzZXIgbWF5IG5vdCBzdXBwb2VyIG9mZmVyIHNlc3Npb24sIG9yIGEgcHJldmlvdXMgcmVxdWVzdFxuICAgICAgICAgICAgICAgICAqIHdhcyByZXBsYWNlZCBieSBhIG5ldyBvbmUuIE5vdCBjcnVjaWFsLCBidXQgaW5mb3JtIHRoZSB1c2VyLiAqL1xuICAgICAgICAgICAgICAgIC5jYXRjaChjb25zb2xlLndhcm4pO1xuICAgICAgICB9O1xuXG4gICAgICAgIG9mZmVyU2Vzc2lvbigpO1xuICAgIH1cblxuICAgIHJldHVybiBlbmdpbmU7XG59XG4iLCAiaW1wb3J0IHsgQ29tcG9uZW50LCBUeXBlIH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbi8qKlxuICogOHRod2FsbCBjYW1lcmEgY29tcG9uZW50LlxuICpcbiAqIFNldHMgdXAgdGhlIDh0aHdhbGwgcGlwZWxpbmUgYW5kIHJldHJpZXZlcyB0cmFja2luZyBldmVudHMgdG8gcGxhY2UgYW5cbiAqIG9iamVjdCBhdCB0aGUgbG9jYXRpb24gb2YgdGhlIHRyYWNrZWQgQVIgY2FtZXJhIC8gbW9iaWxlIGRldmljZS5cbiAqXG4gKiBVc2UgdGhpcyBmb3IgU0xBTSB0cmFja2luZyBiYXNlZCBvbiA4dGh3YWxsLlxuICpcbiAqIE1ha2Ugc3VyZSB0byBlbmFibGUgOHRod2FsbCBpbiBcIlByb2plY3QgU2V0dGluZ3NcIiA+IFwiQVJcIi4gU2VlIGFsc28gdGhlXG4gKiBbQVIgR2V0dGluZyBTdGFydGVkIEd1aWRlXSgvZ2V0dGluZy1zdGFydGVkL3F1aWNrLXN0YXJ0LWFyKVxuICpcbiAqXG4gKiBDdXJyZW50bHkgb25seSBzdXBwb3J0cyB3b3JsZC10cmFja2luZyAoU0xBTSkgdXNpbmcgQkFDSyBjYW1lcmEuXG4gKlxuICogLSByZW1vdmUgYW55IG9jY3VycmVuY2VzIG9mIHRoZSBvbGQgOHRod2FsbC1jYW1lcmEgY29tcG9uZW50IGluIHRoZSBlZGl0b3JcbiAqIC0gQWRkIHRoaXMgY29tcG9uZW50IHRvIE5vblZyQ2FtZXJhXG4gKlxuICogSU1QT1JUQU5UIVxuICogLSB1bnRpbCBpdCBnZXQncyBmaXhlZCwgc2VsZWN0ICdjdXN0b21JbmRleEh0bWwnIGluIHRoZSBwcm9qZWN0IHNldHRpbmdzXG4gKiAtIG9wZW4gYSBnZW5lcmF0ZWQgaW5kZXguaHRtbCBhbmQgY3Jvc3NvcmlnaW49XCJhbm9ueW1vdXNcIiBhdHRyaWJ1dGUgdG8gdGhlIDxzY3JpcHQ+IHRhZyB3aGVyZSAvL2FwcHMuOHRod2FsbC5jb20veHJ3ZWIgaXMgbG9hZGVkXG4gKlxuICpcbiAqICMjIyMjIyMjIyBVc2luZyBVSSBvdmVybGF5cyAjIyMjIyMjIyMjIyMjXG4gKiBCeSBkZWZhdWx0LCB0aGlzIGNvbXBvbmVudCByZW5kZXJzIG93biBVSSB0byBnaXZlIHRoZSB1c2VyIGZlZWRiYWNrIGFib3V0IHJlamVjdGVkIHBlcm1pc3Npb25zIG9yIHRyYWNraW5nIGVycm9ycy5cbiAqIEl0IGNhbiBiZSBjaGFuZ2VkIGJ5IGVuYWJsaW5nIHVzZUN1c3RvbVVJT3ZlcmxheXMgZmxhZy5cbiAqXG4gKiBJZiB1c2VDdXN0b21VSU92ZXJsYXlzIGlzIGVuYWJsZWQsIHlvdSBhcmUgZXhwZWN0ZWQgaGFuZGxlIHRoZSBmb2xsb3dpbmcgZXZlbnRzIGRpc3BhdGNoZWQgYnkgdGhlIHdpbmRvdyBvYmplY3Q6XG4gKiAtIFwiOHRod2FsbC1yZXF1ZXN0LXVzZXItaW50ZXJhY3Rpb25cIiAtIHVzZWQgb25seSBvbiBpT1Mgc2FmYXJpLiBSZXF1ZXN0IGEgdXNlciB0byBwZXJmb3JtIGFuZCBpbnRlcmFjdGlvbiB3aXRoIHRoZSBwYWdlIHNvIHRoYXQgamF2YXNjcmlwdCBpcyBhbGxvd2VkIHRvIGFsbG93ZWQgdG8gcmVxdWVzdCBhIG1vdGlvbi9jYW1lcmEvbWljIHBlcm1pc3Npb25zLlxuICogIE1ha2Ugc3VyZSB0aGUgd2luZG93IG9iamVjdCBpcyBkaXNwYXRjaGluZyBhbiAnOHRod2FsbC1zYWZlLXRvLXJlcXVlc3QtcGVybWlzc2lvbnMnIGV2ZW50IGFmdGVyIGludGVyYWN0aW9uIGhhcyBoYXBwZW5lZC5cbiAqIGBgYFxuICogPGJ1dHRvbiBvbmNsaWNrPVwid2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCc4dGh3YWxsLXNhZmUtdG8tcmVxdWVzdC1wZXJtaXNzaW9ucycpKVwiPkFsbG93IFNlbnNvcnM8L2J1dHRvbj5cbiAqIGBgYFxuICpcbiAqIC0gXCI4dGh3YWxsLXBlcm1pc3Npb24tZmFpbFwiIC0gdXNlciByZWplY3RlZCBhbnkgb2YgdGhlIHBlcm1pc3Npb25zXG4gKlxuICogLSBcIjh0aHdhbGwtZXJyb3JcIiAtIHJ1bnRpbWUgOHRod2FsbCBlcnJvciBvY2N1cnJlZFxuICovXG5jbGFzcyBBUkNhbWVyYTh0aHdhbGwgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICc4dGh3YWxsLWNhbWVyYSc7XG4gICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gICAgICAgIC8qKiBPdmVycmlkZSB0aGUgV0wgaHRtbCBvdmVybGF5cyBmb3IgaGFuZGxpbmcgY2FtZXJhL21vdGlvbiBwZXJtaXNzaW9ucyBhbmQgZXJyb3IgaGFuZGxpbmcgKi9cbiAgICAgICAgdXNlQ3VzdG9tVUlPdmVybGF5czogeyB0eXBlOiBUeXBlLkJvb2wsIGRlZmF1bHQ6IGZhbHNlIH0sXG4gICAgfTtcbiAgICAvKiA4dGh3YWxsIGNhbWVyYSBwaXBlbGluZSBtb2R1bGUgbmFtZSAqL1xuICAgIG5hbWUgPSAnd29uZGVybGFuZC1lbmdpbmUtOHRod2FsbC1jYW1lcmEnO1xuICAgIHN0YXJ0ZWQgPSBmYWxzZTtcbiAgICB2aWV3ID0gbnVsbDsgLy8gY2FjaGUgY2FtZXJhXG4gICAgcG9zaXRpb24gPSBbMCwgMCwgMF07IC8vIGNhY2hlIDh0aHdhbGwgY2FtIHBvc2l0aW9uXG4gICAgcm90YXRpb24gPSBbMCwgMCwgMCwgLTFdOyAvLyBjYWNoZSA4dGh3YWxsIGNhbSByb3RhdGlvblxuICAgIGdsVGV4dHVyZVJlbmRlcmVyID0gbnVsbDsgLy8gY2FjaGUgWFI4LkdsVGV4dHVyZVJlbmRlcmVyLnBpcGVsaW5lTW9kdWxlXG4gICAgcHJvbXB0Rm9yRGV2aWNlTW90aW9uKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgLy8gVGVsbCBhbnlvbmUgd2hvJ3MgaW50ZXJlc3RlZCB0aGF0IHdlIHdhbnQgdG8gZ2V0IHNvbWUgdXNlciBpbnRlcmFjdGlvblxuICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCc4dGh3YWxsLXJlcXVlc3QtdXNlci1pbnRlcmFjdGlvbicpKTtcbiAgICAgICAgICAgIC8vIFdhaXQgdW50aWwgc29tZW9uZSByZXNwb25zZSB0aGF0IHVzZXIgaW50ZXJhY3Rpb24gaGFwcGVuZWRcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCc4dGh3YWxsLXNhZmUtdG8tcmVxdWVzdC1wZXJtaXNzaW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtb3Rpb25FdmVudCA9IGF3YWl0IERldmljZU1vdGlvbkV2ZW50LnJlcXVlc3RQZXJtaXNzaW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUobW90aW9uRXZlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXhjZXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChleGNlcHRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0UGVybWlzc2lvbnMoKSB7XG4gICAgICAgIC8vIGlPUyBcImZlYXR1cmVcIi4gSWYgd2Ugd2FudCB0byByZXF1ZXN0IHRoZSBEZXZpY2VNb3Rpb24gcGVybWlzc2lvbiwgdXNlciBoYXMgdG8gaW50ZXJhY3Qgd2l0aCB0aGUgcGFnZSBhdCBmaXJzdCAodG91Y2ggaXQpLlxuICAgICAgICAvLyBJZiB0aGVyZSB3YXMgbm8gaW50ZXJhY3Rpb24gZG9uZSBzbyBmYXIsIHdlIHdpbGwgcmVuZGVyIGEgSFRNTCBvdmVybGF5IHdpdGggd291bGQgZ2V0IHRoZSB1c2VyIHRvIGludGVyYWN0IHdpdGggdGhlIHNjcmVlblxuICAgICAgICBpZiAoRGV2aWNlTW90aW9uRXZlbnQgJiYgRGV2aWNlTW90aW9uRXZlbnQucmVxdWVzdFBlcm1pc3Npb24pIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgRGV2aWNlTW90aW9uRXZlbnQucmVxdWVzdFBlcm1pc3Npb24oKTtcbiAgICAgICAgICAgICAgICAvLyBUaGUgdXNlciBtdXN0IGhhdmUgcmVqZWN0ZWQgdGhlIG1vdGlvbiBldmVudCBvbiBwcmV2aW91cyBwYWdlIGxvYWQuIChzYWZhcmkgcmVtZW1iZXJzIHRoaXMgY2hvaWNlKS5cbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9PSAnZ3JhbnRlZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNb3Rpb25FdmVudCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChleGNlcHRpb24pIHtcbiAgICAgICAgICAgICAgICAvLyBVc2VyIGhhZCBubyBpbnRlcmFjdGlvbiB3aXRoIHRoZSBwYWdlIHNvIGZhclxuICAgICAgICAgICAgICAgIGlmIChleGNlcHRpb24ubmFtZSA9PT0gJ05vdEFsbG93ZWRFcnJvcicpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW90aW9uRXZlbnQgPSBhd2FpdCB0aGlzLnByb21wdEZvckRldmljZU1vdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobW90aW9uRXZlbnQgIT09ICdncmFudGVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNb3Rpb25FdmVudCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01vdGlvbkV2ZW50Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBtYWtlIHN1cmUgd2UgZ2V0IHRoZSBjYW1lcmEgc3RyZWFtXG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7XG4gICAgICAgICAgICAgICAgdmlkZW86IHRydWUsXG4gICAgICAgICAgICAgICAgYXVkaW86IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIElmIHdlIHN1Y2Nlc3NmdWxseSBhY3F1aXJlZCB0aGUgY2FtZXJhIHN0cmVhbSAtIHdlIGNhbiBzdG9wIGl0IGFuZCB3YWl0IHVudGlsIDh0aHdhbGwgcmVxdWVzdHMgaXQgYWdhaW5cbiAgICAgICAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKCh0cmFjaykgPT4ge1xuICAgICAgICAgICAgICAgIHRyYWNrLnN0b3AoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChleGNlcHRpb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2FtZXJhJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdGhpcy5vYmplY3QuZ2V0Q29tcG9uZW50KCd2aWV3Jyk7XG4gICAgICAgIHRoaXMub25VcGRhdGUgPSB0aGlzLm9uVXBkYXRlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25BdHRhY2ggPSB0aGlzLm9uQXR0YWNoLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25FeGNlcHRpb24gPSB0aGlzLm9uRXhjZXB0aW9uLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25DYW1lcmFTdGF0dXNDaGFuZ2UgPSB0aGlzLm9uQ2FtZXJhU3RhdHVzQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLnZpZXcgPSB0aGlzLm9iamVjdC5nZXRDb21wb25lbnQoJ3ZpZXcnKTtcbiAgICAgICAgaWYgKCF0aGlzLnVzZUN1c3RvbVVJT3ZlcmxheXMpIHtcbiAgICAgICAgICAgIE92ZXJsYXlzSGFuZGxlci5pbml0KCk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0UGVybWlzc2lvbnMoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIFVzZXIgZGlkIG5vdCBncmFudCB0aGUgY2FtZXJhIG9yIG1vdGlvbkV2ZW50IHBlcm1pc3Npb25zXG4gICAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJzh0aHdhbGwtcGVybWlzc2lvbi1mYWlsJywgeyBkZXRhaWw6IGVycm9yIH0pKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLndhaXRGb3JYUjgoKTtcbiAgICAgICAgWFI4LlhyQ29udHJvbGxlci5jb25maWd1cmUoe1xuICAgICAgICAgICAgZGlzYWJsZVdvcmxkVHJhY2tpbmc6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5nbFRleHR1cmVSZW5kZXJlciA9IFhSOC5HbFRleHR1cmVSZW5kZXJlci5waXBlbGluZU1vZHVsZSgpO1xuICAgICAgICBYUjguYWRkQ2FtZXJhUGlwZWxpbmVNb2R1bGVzKFtcbiAgICAgICAgICAgIHRoaXMuZ2xUZXh0dXJlUmVuZGVyZXIsXG4gICAgICAgICAgICBYUjguWHJDb250cm9sbGVyLnBpcGVsaW5lTW9kdWxlKCksXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICBdKTtcbiAgICAgICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgICAgICAgY2FtZXJhQ29uZmlnOiB7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiBYUjguWHJDb25maWcuY2FtZXJhKCkuQkFDSyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYW52YXM6IE1vZHVsZS5jYW52YXMsXG4gICAgICAgICAgICBhbGxvd2VkRGV2aWNlczogWFI4LlhyQ29uZmlnLmRldmljZSgpLkFOWSxcbiAgICAgICAgICAgIG93blJ1bkxvb3A6IGZhbHNlLFxuICAgICAgICB9O1xuICAgICAgICBYUjgucnVuKGNvbmZpZyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogOHRod2FsbCBwaXBlbGluZSBmdW5jdGlvblxuICAgICAqL1xuICAgIG9uQXR0YWNoKHBhcmFtcykge1xuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmVuZ2luZS5zY2VuZS5jb2xvckNsZWFyRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICBjb25zdCBnbCA9IE1vZHVsZS5jdHg7XG4gICAgICAgIGNvbnN0IHJvdCA9IHRoaXMub2JqZWN0LnJvdGF0aW9uV29ybGQ7XG4gICAgICAgIGNvbnN0IHBvcyA9IHRoaXMub2JqZWN0LmdldFRyYW5zbGF0aW9uV29ybGQoW10pO1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gQXJyYXkuZnJvbShwb3MpO1xuICAgICAgICB0aGlzLnJvdGF0aW9uID0gQXJyYXkuZnJvbShyb3QpO1xuICAgICAgICBYUjguWHJDb250cm9sbGVyLnVwZGF0ZUNhbWVyYVByb2plY3Rpb25NYXRyaXgoe1xuICAgICAgICAgICAgb3JpZ2luOiB7IHg6IHBvc1swXSwgeTogcG9zWzFdLCB6OiBwb3NbMl0gfSxcbiAgICAgICAgICAgIGZhY2luZzogeyB4OiByb3RbMF0sIHk6IHJvdFsxXSwgejogcm90WzJdLCB3OiByb3RbM10gfSxcbiAgICAgICAgICAgIGNhbToge1xuICAgICAgICAgICAgICAgIHBpeGVsUmVjdFdpZHRoOiBNb2R1bGUuY2FudmFzLndpZHRoLFxuICAgICAgICAgICAgICAgIHBpeGVsUmVjdEhlaWdodDogTW9kdWxlLmNhbnZhcy5oZWlnaHQsXG4gICAgICAgICAgICAgICAgbmVhckNsaXBQbGFuZTogdGhpcy52aWV3Lm5lYXIsXG4gICAgICAgICAgICAgICAgZmFyQ2xpcFBsYW5lOiB0aGlzLnZpZXcuZmFyLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZW5naW5lLnNjZW5lLm9uUHJlUmVuZGVyLnB1c2goKCkgPT4ge1xuICAgICAgICAgICAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkRSQVdfRlJBTUVCVUZGRVIsIG51bGwpO1xuICAgICAgICAgICAgWFI4LnJ1blByZVJlbmRlcihEYXRlLm5vdygpKTtcbiAgICAgICAgICAgIFhSOC5ydW5SZW5kZXIoKTsgLy8gPC0tLSB0ZWxsIDh0aHdhbGwgdG8gZG8gaXQncyB0aGluZyAoYWx0ZXJuYXRpdmVseSBjYWxsIHRoaXMuZ2xUZXh0dXJlUmVuZGVyZXIub25SZW5kZXIoKSBpZiB5b3Ugb25seSBjYXJlIGFib3V0IGNhbWVyYSBmZWVkIClcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZW5naW5lLnNjZW5lLm9uUG9zdFJlbmRlci5wdXNoKCgpID0+IHtcbiAgICAgICAgICAgIFhSOC5ydW5Qb3N0UmVuZGVyKERhdGUubm93KCkpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiA4dGh3YWxsIHBpcGVsaW5lIGZ1bmN0aW9uXG4gICAgICovXG4gICAgb25DYW1lcmFTdGF0dXNDaGFuZ2UoZSkge1xuICAgICAgICBpZiAoZSAmJiBlLnN0YXR1cyA9PT0gJ2ZhaWxlZCcpIHtcbiAgICAgICAgICAgIHRoaXMub25FeGNlcHRpb24obmV3IEVycm9yKGBDYW1lcmEgZmFpbGVkIHdpdGggc3RhdHVzOiAke2Uuc3RhdHVzfWApKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIDh0aHdhbGwgcGlwZWxpbmUgZnVuY3Rpb25cbiAgICAgKi9cbiAgICBvblVwZGF0ZShlKSB7XG4gICAgICAgIGlmICghZS5wcm9jZXNzQ3B1UmVzdWx0LnJlYWxpdHkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHsgcm90YXRpb24sIHBvc2l0aW9uLCBpbnRyaW5zaWNzIH0gPSBlLnByb2Nlc3NDcHVSZXN1bHQucmVhbGl0eTtcbiAgICAgICAgdGhpcy5yb3RhdGlvblswXSA9IHJvdGF0aW9uLng7XG4gICAgICAgIHRoaXMucm90YXRpb25bMV0gPSByb3RhdGlvbi55O1xuICAgICAgICB0aGlzLnJvdGF0aW9uWzJdID0gcm90YXRpb24uejtcbiAgICAgICAgdGhpcy5yb3RhdGlvblszXSA9IHJvdGF0aW9uLnc7XG4gICAgICAgIHRoaXMucG9zaXRpb25bMF0gPSBwb3NpdGlvbi54O1xuICAgICAgICB0aGlzLnBvc2l0aW9uWzFdID0gcG9zaXRpb24ueTtcbiAgICAgICAgdGhpcy5wb3NpdGlvblsyXSA9IHBvc2l0aW9uLno7XG4gICAgICAgIGlmIChpbnRyaW5zaWNzKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0aW9uTWF0cml4ID0gdGhpcy52aWV3LnByb2plY3Rpb25NYXRyaXg7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHtcbiAgICAgICAgICAgICAgICAvKiBTb21lIHByb2Nlc3NDcHVSZXN1bHQucmVhbGl0eS5pbnRyaW5zaWNzIGFyZSBzZXQgdG8gSW5maW5pdHksXG4gICAgICAgICAgICAgICAgICogd2hpY2ggYnJha2VzIG91ciBwcm9qZWN0aW9uTWF0cml4LiBTbyB3ZSBqdXN0IGZpbHRlciB0aG9zZSBlbGVtZW50cyBvdXQuICovXG4gICAgICAgICAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShpbnRyaW5zaWNzW2ldKSkge1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0aW9uTWF0cml4W2ldID0gaW50cmluc2ljc1tpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvc2l0aW9uICYmIHJvdGF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5yb3RhdGlvbldvcmxkID0gdGhpcy5yb3RhdGlvbjtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnNldFRyYW5zbGF0aW9uV29ybGQodGhpcy5wb3NpdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiA4dGh3YWxsIHBpcGVsaW5lIGZ1bmN0aW9uXG4gICAgICovXG4gICAgb25FeGNlcHRpb24oZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignOHRod2FsbCBleGNlcHRpb246JywgZXJyb3IpO1xuICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJzh0aHdhbGwtZXJyb3InLCB7IGRldGFpbDogZXJyb3IgfSkpO1xuICAgIH1cbiAgICB3YWl0Rm9yWFI4KCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIF9yZWopID0+IHtcbiAgICAgICAgICAgIGlmICh3aW5kb3cuWFI4KSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3hybG9hZGVkJywgKCkgPT4gcmVzb2x2ZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IHsgQVJDYW1lcmE4dGh3YWxsIH07XG5jb25zdCBPdmVybGF5c0hhbmRsZXIgPSB7XG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmhhbmRsZVJlcXVlc3RVc2VySW50ZXJhY3Rpb24gPSB0aGlzLmhhbmRsZVJlcXVlc3RVc2VySW50ZXJhY3Rpb24uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVQZXJtaXNzaW9uRmFpbCA9IHRoaXMuaGFuZGxlUGVybWlzc2lvbkZhaWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVFcnJvciA9IHRoaXMuaGFuZGxlRXJyb3IuYmluZCh0aGlzKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJzh0aHdhbGwtcmVxdWVzdC11c2VyLWludGVyYWN0aW9uJywgdGhpcy5oYW5kbGVSZXF1ZXN0VXNlckludGVyYWN0aW9uKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJzh0aHdhbGwtcGVybWlzc2lvbi1mYWlsJywgdGhpcy5oYW5kbGVQZXJtaXNzaW9uRmFpbCk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCc4dGh3YWxsLWVycm9yJywgdGhpcy5oYW5kbGVFcnJvcik7XG4gICAgfSxcbiAgICBoYW5kbGVSZXF1ZXN0VXNlckludGVyYWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IG92ZXJsYXkgPSB0aGlzLnNob3dPdmVybGF5KHJlcXVlc3RQZXJtaXNzaW9uT3ZlcmxheSk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCc4dGh3YWxsLXNhZmUtdG8tcmVxdWVzdC1wZXJtaXNzaW9ucycsICgpID0+IHtcbiAgICAgICAgICAgIG92ZXJsYXkucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgaGFuZGxlUGVybWlzc2lvbkZhaWw6IGZ1bmN0aW9uIChfcmVhc29uKSB7XG4gICAgICAgIHRoaXMuc2hvd092ZXJsYXkoZmFpbGVkUGVybWlzc2lvbk92ZXJsYXkpO1xuICAgIH0sXG4gICAgaGFuZGxlRXJyb3I6IGZ1bmN0aW9uIChfZXJyb3IpIHtcbiAgICAgICAgdGhpcy5zaG93T3ZlcmxheShydW50aW1lRXJyb3JPdmVybGF5KTtcbiAgICB9LFxuICAgIHNob3dPdmVybGF5OiBmdW5jdGlvbiAoaHRtbENvbnRlbnQpIHtcbiAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBvdmVybGF5LmlubmVySFRNTCA9IGh0bWxDb250ZW50O1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG92ZXJsYXkpO1xuICAgICAgICByZXR1cm4gb3ZlcmxheTtcbiAgICB9LFxufTtcbmNvbnN0IHJlcXVlc3RQZXJtaXNzaW9uT3ZlcmxheSA9IGBcbjxzdHlsZT5cbiAgI3JlcXVlc3QtcGVybWlzc2lvbi1vdmVybGF5IHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIHotaW5kZXg6IDk5OTtcbiAgICBjb2xvcjogI2ZmZjtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNSk7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmO1xuICB9XG5cbiAgLnJlcXVlc3QtcGVybWlzc2lvbi1vdmVybGF5X3RpdGxlIHtcbiAgICBtYXJnaW46IDMwcHg7XG4gICAgZm9udC1zaXplOiAzMnB4O1xuICB9XG5cbiAgLnJlcXVlc3QtcGVybWlzc2lvbi1vdmVybGF5X2J1dHRvbiB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2U4MDA4NjtcbiAgICBmb250LXNpemU6IDIycHg7XG4gICAgcGFkZGluZzogMTBweCAzMHB4O1xuICAgIGNvbG9yOiAjZmZmO1xuICAgIGJvcmRlci1yYWRpdXM6IDE1cHg7XG4gICAgYm9yZGVyOiBub25lO1xuICB9XG48L3N0eWxlPlxuXG48ZGl2IGlkPVwicmVxdWVzdC1wZXJtaXNzaW9uLW92ZXJsYXlcIj5cbiAgPGRpdiBjbGFzcz1cInJlcXVlc3QtcGVybWlzc2lvbi1vdmVybGF5X3RpdGxlXCI+VGhpcyBhcHAgcmVxdWlyZXMgdG8gdXNlIHlvdXIgY2FtZXJhIGFuZCBtb3Rpb24gc2Vuc29yczwvZGl2PlxuXG4gIDxidXR0b24gY2xhc3M9XCJyZXF1ZXN0LXBlcm1pc3Npb24tb3ZlcmxheV9idXR0b25cIiBvbmNsaWNrPVwid2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCc4dGh3YWxsLXNhZmUtdG8tcmVxdWVzdC1wZXJtaXNzaW9ucycpKVwiPk9LPC9idXR0b24+XG48L2Rpdj5gO1xuY29uc3QgZmFpbGVkUGVybWlzc2lvbk92ZXJsYXkgPSBgXG48c3R5bGU+XG4gICNmYWlsZWQtcGVybWlzc2lvbi1vdmVybGF5IHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIHotaW5kZXg6IDk5OTtcbiAgICBjb2xvcjogI2ZmZjtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNSk7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmO1xuICB9XG5cbiAgLmZhaWxlZC1wZXJtaXNzaW9uLW92ZXJsYXlfdGl0bGUge1xuICAgIG1hcmdpbjogMzBweDtcbiAgICBmb250LXNpemU6IDMycHg7XG4gIH1cblxuICAuZmFpbGVkLXBlcm1pc3Npb24tb3ZlcmxheV9idXR0b24ge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNlODAwODY7XG4gICAgZm9udC1zaXplOiAyMnB4O1xuICAgIHBhZGRpbmc6IDEwcHggMzBweDtcbiAgICBjb2xvcjogI2ZmZjtcbiAgICBib3JkZXItcmFkaXVzOiAxNXB4O1xuICAgIGJvcmRlcjogbm9uZTtcbiAgfVxuPC9zdHlsZT5cblxuPGRpdiBpZD1cImZhaWxlZC1wZXJtaXNzaW9uLW92ZXJsYXlcIj5cbiAgPGRpdiBjbGFzcz1cImZhaWxlZC1wZXJtaXNzaW9uLW92ZXJsYXlfdGl0bGVcIj5GYWlsZWQgdG8gZ3JhbnQgcGVybWlzc2lvbnMuIFJlc2V0IHRoZSB0aGUgcGVybWlzc2lvbnMgYW5kIHJlZnJlc2ggdGhlIHBhZ2UuPC9kaXY+XG5cbiAgPGJ1dHRvbiBjbGFzcz1cImZhaWxlZC1wZXJtaXNzaW9uLW92ZXJsYXlfYnV0dG9uXCIgb25jbGljaz1cIndpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVwiPlJlZnJlc2ggdGhlIHBhZ2U8L2J1dHRvbj5cbjwvZGl2PmA7XG5jb25zdCBydW50aW1lRXJyb3JPdmVybGF5ID0gYFxuPHN0eWxlPlxuICAjd2FsbC1lcnJvci1vdmVybGF5IHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIHotaW5kZXg6IDk5OTtcbiAgICBjb2xvcjogI2ZmZjtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNSk7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmO1xuICB9XG5cbiAgLndhbGwtZXJyb3Itb3ZlcmxheV90aXRsZSB7XG4gICAgbWFyZ2luOiAzMHB4O1xuICAgIGZvbnQtc2l6ZTogMzJweDtcbiAgfVxuXG4gIC53YWxsLWVycm9yLW92ZXJsYXlfYnV0dG9uIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTgwMDg2O1xuICAgIGZvbnQtc2l6ZTogMjJweDtcbiAgICBwYWRkaW5nOiAxMHB4IDMwcHg7XG4gICAgY29sb3I6ICNmZmY7XG4gICAgYm9yZGVyLXJhZGl1czogMTVweDtcbiAgICBib3JkZXI6IG5vbmU7XG4gIH1cbjwvc3R5bGU+XG5cbjxkaXYgaWQ9XCJ3YWxsLWVycm9yLW92ZXJsYXlcIj5cbiAgPGRpdiBjbGFzcz1cIndhbGwtZXJyb3Itb3ZlcmxheV90aXRsZVwiPkVycm9yIGhhcyBvY2N1cnJlZC4gUGxlYXNlIHJlbG9hZCB0aGUgcGFnZTwvZGl2PlxuXG4gIDxidXR0b24gY2xhc3M9XCJ3YWxsLWVycm9yLW92ZXJsYXlfYnV0dG9uXCIgb25jbGljaz1cIndpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVwiPlJlbG9hZDwvYnV0dG9uPlxuPC9kaXY+YDtcbiIsICJjb25zdCB0ZW1wVmVjID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbmNvbnN0IHRlbXBRdWF0ID0gbmV3IEZsb2F0MzJBcnJheSg0KTtcbmV4cG9ydCBmdW5jdGlvbiBzZXRYUlJpZ2lkVHJhbnNmb3JtTG9jYWwobywgdHJhbnNmb3JtKSB7XG4gICAgY29uc3QgciA9IHRyYW5zZm9ybS5vcmllbnRhdGlvbjtcbiAgICB0ZW1wUXVhdFswXSA9IHIueDtcbiAgICB0ZW1wUXVhdFsxXSA9IHIueTtcbiAgICB0ZW1wUXVhdFsyXSA9IHIuejtcbiAgICB0ZW1wUXVhdFszXSA9IHIudztcbiAgICBjb25zdCB0ID0gdHJhbnNmb3JtLnBvc2l0aW9uO1xuICAgIHRlbXBWZWNbMF0gPSB0Lng7XG4gICAgdGVtcFZlY1sxXSA9IHQueTtcbiAgICB0ZW1wVmVjWzJdID0gdC56O1xuICAgIG8ucmVzZXRQb3NpdGlvblJvdGF0aW9uKCk7XG4gICAgby5zZXRSb3RhdGlvbkxvY2FsKHRlbXBRdWF0KTtcbiAgICBvLnRyYW5zbGF0ZUxvY2FsKHRlbXBWZWMpO1xufVxuIiwgInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IENvbXBvbmVudCwgRW1pdHRlciB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaS9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IHNldFhSUmlnaWRUcmFuc2Zvcm1Mb2NhbCB9IGZyb20gJy4vdXRpbHMvd2VieHIuanMnO1xudmFyIHRlbXBWZWMzID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbnZhciB0ZW1wUXVhdCA9IG5ldyBGbG9hdDMyQXJyYXkoNCk7XG4vKipcbiAqIFNldHMgdGhlIGxvY2F0aW9uIG9mIHRoZSBvYmplY3QgdG8gdGhlIGxvY2F0aW9uIG9mIGFuIFhSQW5jaG9yXG4gKlxuICogQ3JlYXRlIGFuY2hvcnMgdXNpbmcgdGhlIGBBbmNob3IuY3JlYXRlKClgIHN0YXRpYyBmdW5jdGlvbi5cbiAqXG4gKiBFeGFtcGxlIGZvciB1c2Ugd2l0aCBjdXJzb3I6XG4gKiBgYGBqc1xuICogY3Vyc29yVGFyZ2V0Lm9uQ2xpY2suYWRkKChvYmplY3QsIGN1cnNvciwgb3JpZ2luYWxFdmVudCkgPT4ge1xuICogICAgIC8qIE9ubHkgZXZlbnRzIGluIFhSIHdpbGwgaGF2ZSBhIGZyYW1lIGF0dGFjaGVkICpcXC9cbiAqICAgICBpZighb3JpZ2luYWxFdmVudC5mcmFtZSkgcmV0dXJuO1xuICogICAgIEFuY2hvci5jcmVhdGUoYW5jaG9yT2JqZWN0LCB7dXVpZDogaWQsIHBlcnNpc3Q6IHRydWV9LCBvcmlnaW5hbEV2ZW50LmZyYW1lKTtcbiAqIH0pO1xuICogYGBgXG4gKi9cbmNsYXNzIEFuY2hvciBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ2FuY2hvcic7XG4gICAgLyogU3RhdGljIG1hbmFnZW1lbnQgb2YgYWxsIGFuY2hvcnMgKi9cbiAgICBzdGF0aWMgI2FuY2hvcnMgPSBbXTtcbiAgICBwZXJzaXN0ID0gZmFsc2U7XG4gICAgLyoqIFVuaXF1ZSBpZGVudGlmaWVyIHRvIGxvYWQgYSBwZXJzaXN0ZW50IGFuY2hvciBmcm9tLCBvciBlbXB0eS9udWxsIGlmIHVua25vd24gKi9cbiAgICB1dWlkID0gbnVsbDtcbiAgICAvKiogVGhlIHhyQW5jaG9yLCBpZiBjcmVhdGVkICovXG4gICAgeHJBbmNob3IgPSBudWxsO1xuICAgIC8qKiBFbWl0cyBldmVudHMgd2hlbiB0aGUgYW5jaG9yIGlzIGNyZWF0ZWQgZWl0aGVyIGJ5IGJlaW5nIHJlc3RvcmVkIG9yIG5ld2x5IGNyZWF0ZWQgKi9cbiAgICBvbkNyZWF0ZSA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqIFdoZXRoZXIgdGhlIGFuY2hvciBpcyBjdXJyZW50bHkgYmVpbmcgdHJhY2tlZCAqL1xuICAgIHZpc2libGUgPSBmYWxzZTtcbiAgICAvKiogRW1pdHMgYW4gZXZlbnQgd2hlbiB0aGlzIGFuY2hvciBzdGFydHMgdHJhY2tpbmcgKi9cbiAgICBvblRyYWNraW5nRm91bmQgPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKiBFbWl0cyBhbiBldmVudCB3aGVuIHRoaXMgYW5jaG9yIHN0b3BzIHRyYWNraW5nICovXG4gICAgb25UcmFja2luZ0xvc3QgPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKiBYUkZyYW1lIHRvIHVzZSBmb3IgY3JlYXRpbmcgdGhlIGFuY2hvciAqL1xuICAgIHhyRnJhbWUgPSBudWxsO1xuICAgIC8qKiBYUkhpdFRlc3RSZXN1bHQgdG8gdXNlIGZvciBjcmVhdGluZyB0aGUgYW5jaG9yICovXG4gICAgeHJIaXRSZXN1bHQgPSBudWxsO1xuICAgIC8qKiBSZXRyaWV2ZSBhbGwgYW5jaG9ycyBvZiB0aGUgY3VycmVudCBzY2VuZSAqL1xuICAgIHN0YXRpYyBnZXRBbGxBbmNob3JzKCkge1xuICAgICAgICByZXR1cm4gQW5jaG9yLiNhbmNob3JzO1xuICAgIH1cbiAgICBzdGF0aWMgI2FkZEFuY2hvcihhbmNob3IpIHtcbiAgICAgICAgQW5jaG9yLiNhbmNob3JzLnB1c2goYW5jaG9yKTtcbiAgICB9XG4gICAgc3RhdGljICNyZW1vdmVBbmNob3IoYW5jaG9yKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gQW5jaG9yLiNhbmNob3JzLmluZGV4T2YoYW5jaG9yKTtcbiAgICAgICAgaWYgKGluZGV4IDwgMClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgQW5jaG9yLiNhbmNob3JzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBhbmNob3JcbiAgICAgKlxuICAgICAqIEBwYXJhbSBvIE9iamVjdCB0byBhdHRhY2ggdGhlIGNvbXBvbmVudCB0b1xuICAgICAqIEBwYXJhbSBwYXJhbXMgUGFyYW1ldGVycyBmb3IgdGhlIGFuY2hvciBjb21wb25lbnRcbiAgICAgKiBAcGFyYW0gZnJhbWUgWFJGcmFtZSB0byB1c2UgZm9yIGFuY2hvciBjcmF0aW9uLCBpZiBudWxsLCB3aWxsIHVzZSB0aGUgY3VycmVudCBmcmFtZSBpZiBhdmFpbGFibGVcbiAgICAgKiBAcGFyYW0gaGl0UmVzdWx0IE9wdGlvbmFsIGhpdC10ZXN0IHJlc3VsdCB0byBjcmVhdGUgdGhlIGFuY2hvciB3aXRoXG4gICAgICogQHJldHVybnMgUHJvbWlzZSBmb3IgdGhlIG5ld2x5IGNyZWF0ZWQgYW5jaG9yIGNvbXBvbmVudFxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUobywgcGFyYW1zLCBmcmFtZSwgaGl0UmVzdWx0KSB7XG4gICAgICAgIGNvbnN0IGEgPSBvLmFkZENvbXBvbmVudChBbmNob3IsIHsgLi4ucGFyYW1zLCBhY3RpdmU6IGZhbHNlIH0pO1xuICAgICAgICBpZiAoYSA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBhLnhySGl0UmVzdWx0ID0gaGl0UmVzdWx0ID8/IG51bGw7XG4gICAgICAgIGEueHJGcmFtZSA9IGZyYW1lID8/IG51bGw7XG4gICAgICAgIGEub25DcmVhdGUub25jZSgoKSA9PiAoKGEueHJGcmFtZSA9IG51bGwpLCAoYS54ckhpdFJlc3VsdCA9IG51bGwpKSk7XG4gICAgICAgIGEuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGEub25DcmVhdGUucHJvbWlzZSgpO1xuICAgIH1cbiAgICAjZ2V0RnJhbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnhyRnJhbWUgfHwgdGhpcy5lbmdpbmUueHIuZnJhbWU7XG4gICAgfVxuICAgIGFzeW5jICNjcmVhdGVBbmNob3IoKSB7XG4gICAgICAgIGlmICghdGhpcy4jZ2V0RnJhbWUoKS5jcmVhdGVBbmNob3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBjcmVhdGUgYW5jaG9yIC0gYW5jaG9ycyBub3Qgc3VwcG9ydGVkLCBkaWQgeW91IGVuYWJsZSB0aGUgJ2FuY2hvcnMnIFdlYlhSIGZlYXR1cmU/XCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnhySGl0UmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy54ckhpdFJlc3VsdC5jcmVhdGVBbmNob3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWVzdGVkIGFuY2hvciBvbiBYUkhpdFRlc3RSZXN1bHQsIGJ1dCBXZWJYUiBoaXQtdGVzdCBmZWF0dXJlIGlzIG5vdCBhdmFpbGFibGUuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy54ckhpdFJlc3VsdC5jcmVhdGVBbmNob3IoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LmdldFRyYW5zbGF0aW9uV29ybGQodGVtcFZlYzMpO1xuICAgICAgICAgICAgdGVtcFF1YXQuc2V0KHRoaXMub2JqZWN0LnJvdGF0aW9uV29ybGQpO1xuICAgICAgICAgICAgY29uc3Qgcm90YXRpb24gPSB0ZW1wUXVhdDtcbiAgICAgICAgICAgIGNvbnN0IGFuY2hvclBvc2UgPSBuZXcgWFJSaWdpZFRyYW5zZm9ybSh7IHg6IHRlbXBWZWMzWzBdLCB5OiB0ZW1wVmVjM1sxXSwgejogdGVtcFZlYzNbMl0gfSwgeyB4OiByb3RhdGlvblswXSwgeTogcm90YXRpb25bMV0sIHo6IHJvdGF0aW9uWzJdLCB3OiByb3RhdGlvblszXSB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiNnZXRGcmFtZSgpPy5jcmVhdGVBbmNob3IoYW5jaG9yUG9zZSwgdGhpcy5lbmdpbmUueHIuY3VycmVudFJlZmVyZW5jZVNwYWNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAjb25BZGRBbmNob3IoYW5jaG9yKSB7XG4gICAgICAgIGlmICghYW5jaG9yKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAodGhpcy5wZXJzaXN0KSB7XG4gICAgICAgICAgICBpZiAoYW5jaG9yLnJlcXVlc3RQZXJzaXN0ZW50SGFuZGxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBhbmNob3IucmVxdWVzdFBlcnNpc3RlbnRIYW5kbGUoKS50aGVuKCh1dWlkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXVpZCA9IHV1aWQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI29uQ3JlYXRlKGFuY2hvcik7XG4gICAgICAgICAgICAgICAgICAgIEFuY2hvci4jYWRkQW5jaG9yKHRoaXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignYW5jaG9yOiBQZXJzaXN0ZW50IGFuY2hvcnMgYXJlIG5vdCBzdXBwb3J0ZWQgYnkgeW91ciBjbGllbnQuIElnbm9yaW5nIHBlcnNpc3QgcHJvcGVydHkuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jb25DcmVhdGUoYW5jaG9yKTtcbiAgICB9XG4gICAgI29uUmVzdG9yZUFuY2hvcihhbmNob3IpIHtcbiAgICAgICAgdGhpcy4jb25DcmVhdGUoYW5jaG9yKTtcbiAgICB9XG4gICAgI29uQ3JlYXRlKGFuY2hvcikge1xuICAgICAgICB0aGlzLnhyQW5jaG9yID0gYW5jaG9yO1xuICAgICAgICB0aGlzLm9uQ3JlYXRlLm5vdGlmeSh0aGlzKTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnV1aWQgJiYgdGhpcy5lbmdpbmUueHIpIHtcbiAgICAgICAgICAgIHRoaXMucGVyc2lzdCA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmdpbmUueHIuc2Vzc2lvbi5yZXN0b3JlUGVyc2lzdGVudEFuY2hvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdhbmNob3I6IFBlcnNpc3RlbnQgYW5jaG9ycyBhcmUgbm90IHN1cHBvcnRlZCBieSB5b3VyIGNsaWVudC4gSWdub3JpbmcgcGVyc2lzdCBwcm9wZXJ0eS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZW5naW5lLnhyLnNlc3Npb24ucmVzdG9yZVBlcnNpc3RlbnRBbmNob3IodGhpcy51dWlkKS50aGVuKHRoaXMuI29uUmVzdG9yZUFuY2hvci5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLiNnZXRGcmFtZSgpKSB7XG4gICAgICAgICAgICB0aGlzLiNjcmVhdGVBbmNob3IoKS50aGVuKHRoaXMuI29uQWRkQW5jaG9yLmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBbmNob3JzIGNhbiBvbmx5IGJlIGNyZWF0ZWQgZHVyaW5nIHRoZSBYUiBmcmFtZSBpbiBhbiBhY3RpdmUgWFIgc2Vzc2lvbicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnhyQW5jaG9yIHx8ICF0aGlzLmVuZ2luZS54cilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgLyogV2UgbmVlZCB0byB1c2UgdGhlIGFjdHVhbCBmcmFtZSBmcm9tIHRoZSBkcmF3IGNhbGxiYWNrIGhlcmUgKi9cbiAgICAgICAgY29uc3QgcG9zZSA9IHRoaXMuZW5naW5lLnhyLmZyYW1lLmdldFBvc2UodGhpcy54ckFuY2hvci5hbmNob3JTcGFjZSwgdGhpcy5lbmdpbmUueHIuY3VycmVudFJlZmVyZW5jZVNwYWNlKTtcbiAgICAgICAgY29uc3QgdmlzaWJsZSA9ICEhcG9zZTtcbiAgICAgICAgaWYgKHZpc2libGUgIT0gdGhpcy52aXNpYmxlKSB7XG4gICAgICAgICAgICB0aGlzLnZpc2libGUgPSB2aXNpYmxlO1xuICAgICAgICAgICAgKHZpc2libGUgPyB0aGlzLm9uVHJhY2tpbmdGb3VuZCA6IHRoaXMub25UcmFja2luZ0xvc3QpLm5vdGlmeSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocG9zZSkge1xuICAgICAgICAgICAgc2V0WFJSaWdpZFRyYW5zZm9ybUxvY2FsKHRoaXMub2JqZWN0LCBwb3NlLnRyYW5zZm9ybSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25EZXN0cm95KCkge1xuICAgICAgICBBbmNob3IuI3JlbW92ZUFuY2hvcih0aGlzKTtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5ib29sKGZhbHNlKVxuXSwgQW5jaG9yLnByb3RvdHlwZSwgXCJwZXJzaXN0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5zdHJpbmcoKVxuXSwgQW5jaG9yLnByb3RvdHlwZSwgXCJ1dWlkXCIsIHZvaWQgMCk7XG5leHBvcnQgeyBBbmNob3IgfTtcbiIsICJpbXBvcnQgeyBDb21wb25lbnQsIEVtaXR0ZXIgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuLyoqXG4gKiBDbGljay9ob3Zlci9tb3ZlL2J1dHRvbiB0YXJnZXQgZm9yIFtjdXJzb3JdKCNjdXJzb3IpLlxuICpcbiAqIFRvIHRyaWdnZXIgY29kZSB3aGVuIGNsaWNraW5nLCBob3ZlcmluZywgdW5ob3ZlcmluZywgbW92aW5nIGN1cnNvciwgcHJlc3NpbmdcbiAqIGN1cnNvciBidXR0b24gb3IgcmVsZWFzaW5nIGN1cnNvciBidXR0b24sIHVzZSBgLmFkZENsaWNrRnVuY3Rpb24oZilgLFxuICogYC5hZGRIb3ZlckZ1bmN0aW9uKGYpYCwgYC5hZGRVbkhvdmVyRnVuY3Rpb24oZilgLFxuICogYC5hZGRNb3ZlRnVuY3Rpb24oZilgLCBgLmFkZERvd25GdW5jdGlvbihmKWAgYW5kXG4gKiBgLmFkZFVwRnVuY3Rpb24oZilgIHJlc3BlY3RpdmVseSB3aXRoIGFueSBgZnVuY3Rpb24gZigpIHt9YC5cbiAqXG4gKiBUbyBjYWxsIG1lbWJlcnMgb24gYSBkaWZmZXJlbnQgY29tcG9uZW50LCB5b3UgY2FuIHNldCB1cCBhIGN1cnNvciB0YXJnZXQgbGlrZVxuICogc286XG4gKlxuICogYGBganNcbiAqIHN0YXJ0OiBmdW5jdGlvbigpIHtcbiAqICAgbGV0IHRhcmdldCA9IHRoaXMub2JqZWN0LmFkZENvbXBvbmVudCgnY3Vyc29yLXRhcmdldCcpO1xuICogICB0YXJnZXQub25DbGljay5hZGQodGhpcy5vbkNsaWNrLmJpbmQodGhpcykpO1xuICogfSxcbiAqIG9uQ2xpY2s6IGZ1bmN0aW9uKCkge1xuICogICBjb25zb2xlLmxvZyh0aGlzLm9iamVjdC5uYW1lLCBcIndhcyBjbGlja2VkIVwiKTtcbiAqIH1cbiAqIGBgYFxuICogKipGdW5jdGlvbnM6KipcbiAqXG4gKiBgYGBqc1xuICogY29uc3QgdGFyZ2V0ID0gdGhpcy5vYmplY3QuZ2V0Q29tcG9uZW50KEN1cnNvclRhcmdldCk7XG4gKiBjb25zdCBjYWxsYmFjayA9IGZ1bmN0aW9uKG9iamVjdCwgY3Vyc29yQ29tcG9uZW50KSB7fTtcbiAqXG4gKiB0YXJnZXQub25Ib3Zlci5hZGQoY2FsbGJhY2spO1xuICogdGFyZ2V0Lm9uSG92ZXIucmVtb3ZlKGNhbGxiYWNrKTtcbiAqXG4gKiB0YXJnZXQub25VbkhvdmVyLmFkZChjYWxsYmFjayk7XG4gKiB0YXJnZXQub25VbkhvdmVyLnJlbW92ZShjYWxsYmFjayk7XG4gKlxuICogdGFyZ2V0Lm9uQ2xpY2suYWRkKGNhbGxiYWNrKTtcbiAqIHRhcmdldC5vbkNsaWNrLnJlbW92ZShjYWxsYmFjayk7XG4gKlxuICogdGFyZ2V0Lm9uTW92ZS5hZGQoY2FsbGJhY2spO1xuICogdGFyZ2V0Lm9uTW92ZS5yZW1vdmUoY2FsbGJhY2spO1xuICpcbiAqIHRhcmdldC5vbkRvd24uYWRkKGNhbGxiYWNrKTtcbiAqIHRhcmdldC5vbkRvd24ucmVtb3ZlKGNhbGxiYWNrKTtcbiAqXG4gKiB0YXJnZXQub25VcC5hZGQoY2FsbGJhY2spO1xuICogdGFyZ2V0Lm9uVXAucmVtb3ZlKGNhbGxiYWNrKTtcbiAqIGBgYFxuICpcbiAqICoqUmVxdWlyZW1lbnRzOioqXG4gKiAtIGEgYGNvbGxpc2lvbmAgY29tcG9uZW50IHRvIGJlIGF0dGFjaGVkIHRvIHRoZSBzYW1lIG9iamVjdC5cbiAqXG4gKiBTZWUgW0FuaW1hdGlvbiBFeGFtcGxlXSgvc2hvd2Nhc2UvYW5pbWF0aW9uKS5cbiAqL1xuY2xhc3MgQ3Vyc29yVGFyZ2V0IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnY3Vyc29yLXRhcmdldCc7XG4gICAgc3RhdGljIFByb3BlcnRpZXMgPSB7fTtcbiAgICAvKiogRW1pdHRlciBmb3IgZXZlbnRzIHdoZW4gdGhlIHRhcmdldCBpcyBob3ZlcmVkICovXG4gICAgb25Ib3ZlciA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqIEVtaXR0ZXIgZm9yIGV2ZW50cyB3aGVuIHRoZSB0YXJnZXQgaXMgdW5ob3ZlcmVkICovXG4gICAgb25VbmhvdmVyID0gbmV3IEVtaXR0ZXIoKTtcbiAgICAvKiogRW1pdHRlciBmb3IgZXZlbnRzIHdoZW4gdGhlIHRhcmdldCBpcyBjbGlja2VkICovXG4gICAgb25DbGljayA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqIEVtaXR0ZXIgZm9yIGV2ZW50cyB3aGVuIHRoZSBjdXJzb3IgbW92ZXMgb24gdGhlIHRhcmdldCAqL1xuICAgIG9uTW92ZSA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqIEVtaXR0ZXIgZm9yIGV2ZW50cyB3aGVuIHRoZSB1c2VyIHByZXNzZWQgdGhlIHNlbGVjdCBidXR0b24gb24gdGhlIHRhcmdldCAqL1xuICAgIG9uRG93biA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqIEVtaXR0ZXIgZm9yIGV2ZW50cyB3aGVuIHRoZSB1c2VyIHVucHJlc3NlZCB0aGUgc2VsZWN0IGJ1dHRvbiBvbiB0aGUgdGFyZ2V0ICovXG4gICAgb25VcCA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHRoZSBlbWl0dGVyIGluc3RlYWQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqICAgIHRoaXMub25Ib3Zlci5hZGQoZik7XG4gICAgICovXG4gICAgYWRkSG92ZXJGdW5jdGlvbihmKSB7XG4gICAgICAgIHRoaXMub25Ib3Zlci5hZGQoZik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSB0aGUgZW1pdHRlciBpbnN0ZWFkLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAgICB0aGlzLm9uSG92ZXIucmVtb3ZlKGYpO1xuICAgICAqL1xuICAgIHJlbW92ZUhvdmVyRnVuY3Rpb24oZikge1xuICAgICAgICB0aGlzLm9uSG92ZXIucmVtb3ZlKGYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGVtaXR0ZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgdGhpcy5vblVuaG92ZXIuYWRkKGYpO1xuICAgICAqL1xuICAgIGFkZFVuSG92ZXJGdW5jdGlvbihmKSB7XG4gICAgICAgIHRoaXMub25VbmhvdmVyLmFkZChmKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHRoZSBlbWl0dGVyIGluc3RlYWQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqICAgIHRoaXMub25VbmhvdmVyLnJlbW92ZShmKTtcbiAgICAgKi9cbiAgICByZW1vdmVVbkhvdmVyRnVuY3Rpb24oZikge1xuICAgICAgICB0aGlzLm9uVW5ob3Zlci5yZW1vdmUoZik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSB0aGUgZW1pdHRlciBpbnN0ZWFkLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAgICB0aGlzLm9uQ2xpY2suYWRkKGYpO1xuICAgICAqL1xuICAgIGFkZENsaWNrRnVuY3Rpb24oZikge1xuICAgICAgICB0aGlzLm9uQ2xpY2suYWRkKGYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGVtaXR0ZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgY29tcG9uZW50Lm9uQ2xpY2sucmVtb3ZlKGYpO1xuICAgICAqL1xuICAgIHJlbW92ZUNsaWNrRnVuY3Rpb24oZikge1xuICAgICAgICB0aGlzLm9uQ2xpY2sucmVtb3ZlKGYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGVtaXR0ZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgY29tcG9uZW50Lm9uTW92ZS5hZGQoZik7XG4gICAgICovXG4gICAgYWRkTW92ZUZ1bmN0aW9uKGYpIHtcbiAgICAgICAgdGhpcy5vbk1vdmUuYWRkKGYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGVtaXR0ZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgY29tcG9uZW50Lm9uTW92ZS5yZW1vdmUoZik7XG4gICAgICovXG4gICAgcmVtb3ZlTW92ZUZ1bmN0aW9uKGYpIHtcbiAgICAgICAgdGhpcy5vbk1vdmUucmVtb3ZlKGYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGVtaXR0ZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgY29tcG9uZW50Lm9uRG93bi5hZGQoZik7XG4gICAgICovXG4gICAgYWRkRG93bkZ1bmN0aW9uKGYpIHtcbiAgICAgICAgdGhpcy5vbkRvd24uYWRkKGYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGVtaXR0ZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgY29tcG9uZW50Lm9uRG93bi5yZW1vdmUoZik7XG4gICAgICovXG4gICAgcmVtb3ZlRG93bkZ1bmN0aW9uKGYpIHtcbiAgICAgICAgdGhpcy5vbkRvd24ucmVtb3ZlKGYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGVtaXR0ZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgY29tcG9uZW50Lm9uVXAuYWRkKGYpO1xuICAgICAqL1xuICAgIGFkZFVwRnVuY3Rpb24oZikge1xuICAgICAgICB0aGlzLm9uVXAuYWRkKGYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGVtaXR0ZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgY29tcG9uZW50Lm9uVXAucmVtb3ZlKGYpO1xuICAgICAqL1xuICAgIHJlbW92ZVVwRnVuY3Rpb24oZikge1xuICAgICAgICB0aGlzLm9uVXAucmVtb3ZlKGYpO1xuICAgIH1cbn1cbmV4cG9ydCB7IEN1cnNvclRhcmdldCB9O1xuIiwgIi8qKlxuICogQ29tbW9uIHV0aWxpdGllc1xuICogQG1vZHVsZSBnbE1hdHJpeFxuICovXG4vLyBDb25maWd1cmF0aW9uIENvbnN0YW50c1xuZXhwb3J0IHZhciBFUFNJTE9OID0gMC4wMDAwMDE7XG5leHBvcnQgdmFyIEFSUkFZX1RZUEUgPSB0eXBlb2YgRmxvYXQzMkFycmF5ICE9PSAndW5kZWZpbmVkJyA/IEZsb2F0MzJBcnJheSA6IEFycmF5O1xuZXhwb3J0IHZhciBSQU5ET00gPSBNYXRoLnJhbmRvbTtcbi8qKlxuICogU2V0cyB0aGUgdHlwZSBvZiBhcnJheSB1c2VkIHdoZW4gY3JlYXRpbmcgbmV3IHZlY3RvcnMgYW5kIG1hdHJpY2VzXG4gKlxuICogQHBhcmFtIHtGbG9hdDMyQXJyYXlDb25zdHJ1Y3RvciB8IEFycmF5Q29uc3RydWN0b3J9IHR5cGUgQXJyYXkgdHlwZSwgc3VjaCBhcyBGbG9hdDMyQXJyYXkgb3IgQXJyYXlcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0TWF0cml4QXJyYXlUeXBlKHR5cGUpIHtcbiAgQVJSQVlfVFlQRSA9IHR5cGU7XG59XG52YXIgZGVncmVlID0gTWF0aC5QSSAvIDE4MDtcbi8qKlxuICogQ29udmVydCBEZWdyZWUgVG8gUmFkaWFuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGEgQW5nbGUgaW4gRGVncmVlc1xuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0b1JhZGlhbihhKSB7XG4gIHJldHVybiBhICogZGVncmVlO1xufVxuLyoqXG4gKiBUZXN0cyB3aGV0aGVyIG9yIG5vdCB0aGUgYXJndW1lbnRzIGhhdmUgYXBwcm94aW1hdGVseSB0aGUgc2FtZSB2YWx1ZSwgd2l0aGluIGFuIGFic29sdXRlXG4gKiBvciByZWxhdGl2ZSB0b2xlcmFuY2Ugb2YgZ2xNYXRyaXguRVBTSUxPTiAoYW4gYWJzb2x1dGUgdG9sZXJhbmNlIGlzIHVzZWQgZm9yIHZhbHVlcyBsZXNzXG4gKiB0aGFuIG9yIGVxdWFsIHRvIDEuMCwgYW5kIGEgcmVsYXRpdmUgdG9sZXJhbmNlIGlzIHVzZWQgZm9yIGxhcmdlciB2YWx1ZXMpXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGEgVGhlIGZpcnN0IG51bWJlciB0byB0ZXN0LlxuICogQHBhcmFtIHtOdW1iZXJ9IGIgVGhlIHNlY29uZCBudW1iZXIgdG8gdGVzdC5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSBudW1iZXJzIGFyZSBhcHByb3hpbWF0ZWx5IGVxdWFsLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGVxdWFscyhhLCBiKSB7XG4gIHJldHVybiBNYXRoLmFicyhhIC0gYikgPD0gRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYSksIE1hdGguYWJzKGIpKTtcbn1cbmlmICghTWF0aC5oeXBvdCkgTWF0aC5oeXBvdCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHkgPSAwLFxuICAgICAgaSA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cbiAgd2hpbGUgKGktLSkge1xuICAgIHkgKz0gYXJndW1lbnRzW2ldICogYXJndW1lbnRzW2ldO1xuICB9XG5cbiAgcmV0dXJuIE1hdGguc3FydCh5KTtcbn07IiwgImltcG9ydCAqIGFzIGdsTWF0cml4IGZyb20gXCIuL2NvbW1vbi5qc1wiO1xuLyoqXG4gKiAzeDMgTWF0cml4XG4gKiBAbW9kdWxlIG1hdDNcbiAqL1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgaWRlbnRpdHkgbWF0M1xuICpcbiAqIEByZXR1cm5zIHttYXQzfSBhIG5ldyAzeDMgbWF0cml4XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDkpO1xuXG4gIGlmIChnbE1hdHJpeC5BUlJBWV9UWVBFICE9IEZsb2F0MzJBcnJheSkge1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gMDtcbiAgICBvdXRbM10gPSAwO1xuICAgIG91dFs1XSA9IDA7XG4gICAgb3V0WzZdID0gMDtcbiAgICBvdXRbN10gPSAwO1xuICB9XG5cbiAgb3V0WzBdID0gMTtcbiAgb3V0WzRdID0gMTtcbiAgb3V0WzhdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ29waWVzIHRoZSB1cHBlci1sZWZ0IDN4MyB2YWx1ZXMgaW50byB0aGUgZ2l2ZW4gbWF0My5cbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIDN4MyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhICAgdGhlIHNvdXJjZSA0eDQgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21NYXQ0KG91dCwgYSkge1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICBvdXRbMl0gPSBhWzJdO1xuICBvdXRbM10gPSBhWzRdO1xuICBvdXRbNF0gPSBhWzVdO1xuICBvdXRbNV0gPSBhWzZdO1xuICBvdXRbNl0gPSBhWzhdO1xuICBvdXRbN10gPSBhWzldO1xuICBvdXRbOF0gPSBhWzEwXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBtYXQzIGluaXRpYWxpemVkIHdpdGggdmFsdWVzIGZyb20gYW4gZXhpc3RpbmcgbWF0cml4XG4gKlxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgbWF0cml4IHRvIGNsb25lXG4gKiBAcmV0dXJucyB7bWF0M30gYSBuZXcgM3gzIG1hdHJpeFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZShhKSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSg5KTtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgb3V0WzNdID0gYVszXTtcbiAgb3V0WzRdID0gYVs0XTtcbiAgb3V0WzVdID0gYVs1XTtcbiAgb3V0WzZdID0gYVs2XTtcbiAgb3V0WzddID0gYVs3XTtcbiAgb3V0WzhdID0gYVs4XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ29weSB0aGUgdmFsdWVzIGZyb20gb25lIG1hdDMgdG8gYW5vdGhlclxuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjb3B5KG91dCwgYSkge1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICBvdXRbMl0gPSBhWzJdO1xuICBvdXRbM10gPSBhWzNdO1xuICBvdXRbNF0gPSBhWzRdO1xuICBvdXRbNV0gPSBhWzVdO1xuICBvdXRbNl0gPSBhWzZdO1xuICBvdXRbN10gPSBhWzddO1xuICBvdXRbOF0gPSBhWzhdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgbWF0MyB3aXRoIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbTAwIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDAgcG9zaXRpb24gKGluZGV4IDApXG4gKiBAcGFyYW0ge051bWJlcn0gbTAxIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDEgcG9zaXRpb24gKGluZGV4IDEpXG4gKiBAcGFyYW0ge051bWJlcn0gbTAyIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDIgcG9zaXRpb24gKGluZGV4IDIpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEwIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDAgcG9zaXRpb24gKGluZGV4IDMpXG4gKiBAcGFyYW0ge051bWJlcn0gbTExIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDEgcG9zaXRpb24gKGluZGV4IDQpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEyIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDIgcG9zaXRpb24gKGluZGV4IDUpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIwIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDAgcG9zaXRpb24gKGluZGV4IDYpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIxIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDEgcG9zaXRpb24gKGluZGV4IDcpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIyIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDIgcG9zaXRpb24gKGluZGV4IDgpXG4gKiBAcmV0dXJucyB7bWF0M30gQSBuZXcgbWF0M1xuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVmFsdWVzKG0wMCwgbTAxLCBtMDIsIG0xMCwgbTExLCBtMTIsIG0yMCwgbTIxLCBtMjIpIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDkpO1xuICBvdXRbMF0gPSBtMDA7XG4gIG91dFsxXSA9IG0wMTtcbiAgb3V0WzJdID0gbTAyO1xuICBvdXRbM10gPSBtMTA7XG4gIG91dFs0XSA9IG0xMTtcbiAgb3V0WzVdID0gbTEyO1xuICBvdXRbNl0gPSBtMjA7XG4gIG91dFs3XSA9IG0yMTtcbiAgb3V0WzhdID0gbTIyO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTZXQgdGhlIGNvbXBvbmVudHMgb2YgYSBtYXQzIHRvIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtOdW1iZXJ9IG0wMCBDb21wb25lbnQgaW4gY29sdW1uIDAsIHJvdyAwIHBvc2l0aW9uIChpbmRleCAwKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0wMSBDb21wb25lbnQgaW4gY29sdW1uIDAsIHJvdyAxIHBvc2l0aW9uIChpbmRleCAxKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0wMiBDb21wb25lbnQgaW4gY29sdW1uIDAsIHJvdyAyIHBvc2l0aW9uIChpbmRleCAyKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0xMCBDb21wb25lbnQgaW4gY29sdW1uIDEsIHJvdyAwIHBvc2l0aW9uIChpbmRleCAzKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0xMSBDb21wb25lbnQgaW4gY29sdW1uIDEsIHJvdyAxIHBvc2l0aW9uIChpbmRleCA0KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0xMiBDb21wb25lbnQgaW4gY29sdW1uIDEsIHJvdyAyIHBvc2l0aW9uIChpbmRleCA1KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMCBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAwIHBvc2l0aW9uIChpbmRleCA2KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMSBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAxIHBvc2l0aW9uIChpbmRleCA3KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMiBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAyIHBvc2l0aW9uIChpbmRleCA4KVxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXQob3V0LCBtMDAsIG0wMSwgbTAyLCBtMTAsIG0xMSwgbTEyLCBtMjAsIG0yMSwgbTIyKSB7XG4gIG91dFswXSA9IG0wMDtcbiAgb3V0WzFdID0gbTAxO1xuICBvdXRbMl0gPSBtMDI7XG4gIG91dFszXSA9IG0xMDtcbiAgb3V0WzRdID0gbTExO1xuICBvdXRbNV0gPSBtMTI7XG4gIG91dFs2XSA9IG0yMDtcbiAgb3V0WzddID0gbTIxO1xuICBvdXRbOF0gPSBtMjI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFNldCBhIG1hdDMgdG8gdGhlIGlkZW50aXR5IG1hdHJpeFxuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGlkZW50aXR5KG91dCkge1xuICBvdXRbMF0gPSAxO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAxO1xuICBvdXRbNV0gPSAwO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBUcmFuc3Bvc2UgdGhlIHZhbHVlcyBvZiBhIG1hdDNcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNwb3NlKG91dCwgYSkge1xuICAvLyBJZiB3ZSBhcmUgdHJhbnNwb3Npbmcgb3Vyc2VsdmVzIHdlIGNhbiBza2lwIGEgZmV3IHN0ZXBzIGJ1dCBoYXZlIHRvIGNhY2hlIHNvbWUgdmFsdWVzXG4gIGlmIChvdXQgPT09IGEpIHtcbiAgICB2YXIgYTAxID0gYVsxXSxcbiAgICAgICAgYTAyID0gYVsyXSxcbiAgICAgICAgYTEyID0gYVs1XTtcbiAgICBvdXRbMV0gPSBhWzNdO1xuICAgIG91dFsyXSA9IGFbNl07XG4gICAgb3V0WzNdID0gYTAxO1xuICAgIG91dFs1XSA9IGFbN107XG4gICAgb3V0WzZdID0gYTAyO1xuICAgIG91dFs3XSA9IGExMjtcbiAgfSBlbHNlIHtcbiAgICBvdXRbMF0gPSBhWzBdO1xuICAgIG91dFsxXSA9IGFbM107XG4gICAgb3V0WzJdID0gYVs2XTtcbiAgICBvdXRbM10gPSBhWzFdO1xuICAgIG91dFs0XSA9IGFbNF07XG4gICAgb3V0WzVdID0gYVs3XTtcbiAgICBvdXRbNl0gPSBhWzJdO1xuICAgIG91dFs3XSA9IGFbNV07XG4gICAgb3V0WzhdID0gYVs4XTtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEludmVydHMgYSBtYXQzXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGludmVydChvdXQsIGEpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXTtcbiAgdmFyIGExMCA9IGFbM10sXG4gICAgICBhMTEgPSBhWzRdLFxuICAgICAgYTEyID0gYVs1XTtcbiAgdmFyIGEyMCA9IGFbNl0sXG4gICAgICBhMjEgPSBhWzddLFxuICAgICAgYTIyID0gYVs4XTtcbiAgdmFyIGIwMSA9IGEyMiAqIGExMSAtIGExMiAqIGEyMTtcbiAgdmFyIGIxMSA9IC1hMjIgKiBhMTAgKyBhMTIgKiBhMjA7XG4gIHZhciBiMjEgPSBhMjEgKiBhMTAgLSBhMTEgKiBhMjA7IC8vIENhbGN1bGF0ZSB0aGUgZGV0ZXJtaW5hbnRcblxuICB2YXIgZGV0ID0gYTAwICogYjAxICsgYTAxICogYjExICsgYTAyICogYjIxO1xuXG4gIGlmICghZGV0KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBkZXQgPSAxLjAgLyBkZXQ7XG4gIG91dFswXSA9IGIwMSAqIGRldDtcbiAgb3V0WzFdID0gKC1hMjIgKiBhMDEgKyBhMDIgKiBhMjEpICogZGV0O1xuICBvdXRbMl0gPSAoYTEyICogYTAxIC0gYTAyICogYTExKSAqIGRldDtcbiAgb3V0WzNdID0gYjExICogZGV0O1xuICBvdXRbNF0gPSAoYTIyICogYTAwIC0gYTAyICogYTIwKSAqIGRldDtcbiAgb3V0WzVdID0gKC1hMTIgKiBhMDAgKyBhMDIgKiBhMTApICogZGV0O1xuICBvdXRbNl0gPSBiMjEgKiBkZXQ7XG4gIG91dFs3XSA9ICgtYTIxICogYTAwICsgYTAxICogYTIwKSAqIGRldDtcbiAgb3V0WzhdID0gKGExMSAqIGEwMCAtIGEwMSAqIGExMCkgKiBkZXQ7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGFkanVnYXRlIG9mIGEgbWF0M1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGpvaW50KG91dCwgYSkge1xuICB2YXIgYTAwID0gYVswXSxcbiAgICAgIGEwMSA9IGFbMV0sXG4gICAgICBhMDIgPSBhWzJdO1xuICB2YXIgYTEwID0gYVszXSxcbiAgICAgIGExMSA9IGFbNF0sXG4gICAgICBhMTIgPSBhWzVdO1xuICB2YXIgYTIwID0gYVs2XSxcbiAgICAgIGEyMSA9IGFbN10sXG4gICAgICBhMjIgPSBhWzhdO1xuICBvdXRbMF0gPSBhMTEgKiBhMjIgLSBhMTIgKiBhMjE7XG4gIG91dFsxXSA9IGEwMiAqIGEyMSAtIGEwMSAqIGEyMjtcbiAgb3V0WzJdID0gYTAxICogYTEyIC0gYTAyICogYTExO1xuICBvdXRbM10gPSBhMTIgKiBhMjAgLSBhMTAgKiBhMjI7XG4gIG91dFs0XSA9IGEwMCAqIGEyMiAtIGEwMiAqIGEyMDtcbiAgb3V0WzVdID0gYTAyICogYTEwIC0gYTAwICogYTEyO1xuICBvdXRbNl0gPSBhMTAgKiBhMjEgLSBhMTEgKiBhMjA7XG4gIG91dFs3XSA9IGEwMSAqIGEyMCAtIGEwMCAqIGEyMTtcbiAgb3V0WzhdID0gYTAwICogYTExIC0gYTAxICogYTEwO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBkZXRlcm1pbmFudCBvZiBhIG1hdDNcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge051bWJlcn0gZGV0ZXJtaW5hbnQgb2YgYVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBkZXRlcm1pbmFudChhKSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl07XG4gIHZhciBhMTAgPSBhWzNdLFxuICAgICAgYTExID0gYVs0XSxcbiAgICAgIGExMiA9IGFbNV07XG4gIHZhciBhMjAgPSBhWzZdLFxuICAgICAgYTIxID0gYVs3XSxcbiAgICAgIGEyMiA9IGFbOF07XG4gIHJldHVybiBhMDAgKiAoYTIyICogYTExIC0gYTEyICogYTIxKSArIGEwMSAqICgtYTIyICogYTEwICsgYTEyICogYTIwKSArIGEwMiAqIChhMjEgKiBhMTAgLSBhMTEgKiBhMjApO1xufVxuLyoqXG4gKiBNdWx0aXBsaWVzIHR3byBtYXQzJ3NcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aXBseShvdXQsIGEsIGIpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXTtcbiAgdmFyIGExMCA9IGFbM10sXG4gICAgICBhMTEgPSBhWzRdLFxuICAgICAgYTEyID0gYVs1XTtcbiAgdmFyIGEyMCA9IGFbNl0sXG4gICAgICBhMjEgPSBhWzddLFxuICAgICAgYTIyID0gYVs4XTtcbiAgdmFyIGIwMCA9IGJbMF0sXG4gICAgICBiMDEgPSBiWzFdLFxuICAgICAgYjAyID0gYlsyXTtcbiAgdmFyIGIxMCA9IGJbM10sXG4gICAgICBiMTEgPSBiWzRdLFxuICAgICAgYjEyID0gYls1XTtcbiAgdmFyIGIyMCA9IGJbNl0sXG4gICAgICBiMjEgPSBiWzddLFxuICAgICAgYjIyID0gYls4XTtcbiAgb3V0WzBdID0gYjAwICogYTAwICsgYjAxICogYTEwICsgYjAyICogYTIwO1xuICBvdXRbMV0gPSBiMDAgKiBhMDEgKyBiMDEgKiBhMTEgKyBiMDIgKiBhMjE7XG4gIG91dFsyXSA9IGIwMCAqIGEwMiArIGIwMSAqIGExMiArIGIwMiAqIGEyMjtcbiAgb3V0WzNdID0gYjEwICogYTAwICsgYjExICogYTEwICsgYjEyICogYTIwO1xuICBvdXRbNF0gPSBiMTAgKiBhMDEgKyBiMTEgKiBhMTEgKyBiMTIgKiBhMjE7XG4gIG91dFs1XSA9IGIxMCAqIGEwMiArIGIxMSAqIGExMiArIGIxMiAqIGEyMjtcbiAgb3V0WzZdID0gYjIwICogYTAwICsgYjIxICogYTEwICsgYjIyICogYTIwO1xuICBvdXRbN10gPSBiMjAgKiBhMDEgKyBiMjEgKiBhMTEgKyBiMjIgKiBhMjE7XG4gIG91dFs4XSA9IGIyMCAqIGEwMiArIGIyMSAqIGExMiArIGIyMiAqIGEyMjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogVHJhbnNsYXRlIGEgbWF0MyBieSB0aGUgZ2l2ZW4gdmVjdG9yXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBtYXRyaXggdG8gdHJhbnNsYXRlXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gdiB2ZWN0b3IgdG8gdHJhbnNsYXRlIGJ5XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zbGF0ZShvdXQsIGEsIHYpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXSxcbiAgICAgIGExMCA9IGFbM10sXG4gICAgICBhMTEgPSBhWzRdLFxuICAgICAgYTEyID0gYVs1XSxcbiAgICAgIGEyMCA9IGFbNl0sXG4gICAgICBhMjEgPSBhWzddLFxuICAgICAgYTIyID0gYVs4XSxcbiAgICAgIHggPSB2WzBdLFxuICAgICAgeSA9IHZbMV07XG4gIG91dFswXSA9IGEwMDtcbiAgb3V0WzFdID0gYTAxO1xuICBvdXRbMl0gPSBhMDI7XG4gIG91dFszXSA9IGExMDtcbiAgb3V0WzRdID0gYTExO1xuICBvdXRbNV0gPSBhMTI7XG4gIG91dFs2XSA9IHggKiBhMDAgKyB5ICogYTEwICsgYTIwO1xuICBvdXRbN10gPSB4ICogYTAxICsgeSAqIGExMSArIGEyMTtcbiAgb3V0WzhdID0geCAqIGEwMiArIHkgKiBhMTIgKyBhMjI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZXMgYSBtYXQzIGJ5IHRoZSBnaXZlbiBhbmdsZVxuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgbWF0cml4IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCB0aGUgYW5nbGUgdG8gcm90YXRlIHRoZSBtYXRyaXggYnlcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlKG91dCwgYSwgcmFkKSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl0sXG4gICAgICBhMTAgPSBhWzNdLFxuICAgICAgYTExID0gYVs0XSxcbiAgICAgIGExMiA9IGFbNV0sXG4gICAgICBhMjAgPSBhWzZdLFxuICAgICAgYTIxID0gYVs3XSxcbiAgICAgIGEyMiA9IGFbOF0sXG4gICAgICBzID0gTWF0aC5zaW4ocmFkKSxcbiAgICAgIGMgPSBNYXRoLmNvcyhyYWQpO1xuICBvdXRbMF0gPSBjICogYTAwICsgcyAqIGExMDtcbiAgb3V0WzFdID0gYyAqIGEwMSArIHMgKiBhMTE7XG4gIG91dFsyXSA9IGMgKiBhMDIgKyBzICogYTEyO1xuICBvdXRbM10gPSBjICogYTEwIC0gcyAqIGEwMDtcbiAgb3V0WzRdID0gYyAqIGExMSAtIHMgKiBhMDE7XG4gIG91dFs1XSA9IGMgKiBhMTIgLSBzICogYTAyO1xuICBvdXRbNl0gPSBhMjA7XG4gIG91dFs3XSA9IGEyMTtcbiAgb3V0WzhdID0gYTIyO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTY2FsZXMgdGhlIG1hdDMgYnkgdGhlIGRpbWVuc2lvbnMgaW4gdGhlIGdpdmVuIHZlYzJcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIG1hdHJpeCB0byByb3RhdGVcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSB2IHRoZSB2ZWMyIHRvIHNjYWxlIHRoZSBtYXRyaXggYnlcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKG91dCwgYSwgdikge1xuICB2YXIgeCA9IHZbMF0sXG4gICAgICB5ID0gdlsxXTtcbiAgb3V0WzBdID0geCAqIGFbMF07XG4gIG91dFsxXSA9IHggKiBhWzFdO1xuICBvdXRbMl0gPSB4ICogYVsyXTtcbiAgb3V0WzNdID0geSAqIGFbM107XG4gIG91dFs0XSA9IHkgKiBhWzRdO1xuICBvdXRbNV0gPSB5ICogYVs1XTtcbiAgb3V0WzZdID0gYVs2XTtcbiAgb3V0WzddID0gYVs3XTtcbiAgb3V0WzhdID0gYVs4XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIGEgdmVjdG9yIHRyYW5zbGF0aW9uXG4gKiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gKGJ1dCBtdWNoIGZhc3RlciB0aGFuKTpcbiAqXG4gKiAgICAgbWF0My5pZGVudGl0eShkZXN0KTtcbiAqICAgICBtYXQzLnRyYW5zbGF0ZShkZXN0LCBkZXN0LCB2ZWMpO1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IG1hdDMgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSB2IFRyYW5zbGF0aW9uIHZlY3RvclxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVHJhbnNsYXRpb24ob3V0LCB2KSB7XG4gIG91dFswXSA9IDE7XG4gIG91dFsxXSA9IDA7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IDE7XG4gIG91dFs1XSA9IDA7XG4gIG91dFs2XSA9IHZbMF07XG4gIG91dFs3XSA9IHZbMV07XG4gIG91dFs4XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBtYXRyaXggZnJvbSBhIGdpdmVuIGFuZ2xlXG4gKiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gKGJ1dCBtdWNoIGZhc3RlciB0aGFuKTpcbiAqXG4gKiAgICAgbWF0My5pZGVudGl0eShkZXN0KTtcbiAqICAgICBtYXQzLnJvdGF0ZShkZXN0LCBkZXN0LCByYWQpO1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IG1hdDMgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21Sb3RhdGlvbihvdXQsIHJhZCkge1xuICB2YXIgcyA9IE1hdGguc2luKHJhZCksXG4gICAgICBjID0gTWF0aC5jb3MocmFkKTtcbiAgb3V0WzBdID0gYztcbiAgb3V0WzFdID0gcztcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gLXM7XG4gIG91dFs0XSA9IGM7XG4gIG91dFs1XSA9IDA7XG4gIG91dFs2XSA9IDA7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBtYXRyaXggZnJvbSBhIHZlY3RvciBzY2FsaW5nXG4gKiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gKGJ1dCBtdWNoIGZhc3RlciB0aGFuKTpcbiAqXG4gKiAgICAgbWF0My5pZGVudGl0eShkZXN0KTtcbiAqICAgICBtYXQzLnNjYWxlKGRlc3QsIGRlc3QsIHZlYyk7XG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgbWF0MyByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IHYgU2NhbGluZyB2ZWN0b3JcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVNjYWxpbmcob3V0LCB2KSB7XG4gIG91dFswXSA9IHZbMF07XG4gIG91dFsxXSA9IDA7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IHZbMV07XG4gIG91dFs1XSA9IDA7XG4gIG91dFs2XSA9IDA7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENvcGllcyB0aGUgdmFsdWVzIGZyb20gYSBtYXQyZCBpbnRvIGEgbWF0M1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0MmR9IGEgdGhlIG1hdHJpeCB0byBjb3B5XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKiovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tTWF0MmQob3V0LCBhKSB7XG4gIG91dFswXSA9IGFbMF07XG4gIG91dFsxXSA9IGFbMV07XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IGFbMl07XG4gIG91dFs0XSA9IGFbM107XG4gIG91dFs1XSA9IDA7XG4gIG91dFs2XSA9IGFbNF07XG4gIG91dFs3XSA9IGFbNV07XG4gIG91dFs4XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgYSAzeDMgbWF0cml4IGZyb20gdGhlIGdpdmVuIHF1YXRlcm5pb25cbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCBtYXQzIHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gcSBRdWF0ZXJuaW9uIHRvIGNyZWF0ZSBtYXRyaXggZnJvbVxuICpcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVF1YXQob3V0LCBxKSB7XG4gIHZhciB4ID0gcVswXSxcbiAgICAgIHkgPSBxWzFdLFxuICAgICAgeiA9IHFbMl0sXG4gICAgICB3ID0gcVszXTtcbiAgdmFyIHgyID0geCArIHg7XG4gIHZhciB5MiA9IHkgKyB5O1xuICB2YXIgejIgPSB6ICsgejtcbiAgdmFyIHh4ID0geCAqIHgyO1xuICB2YXIgeXggPSB5ICogeDI7XG4gIHZhciB5eSA9IHkgKiB5MjtcbiAgdmFyIHp4ID0geiAqIHgyO1xuICB2YXIgenkgPSB6ICogeTI7XG4gIHZhciB6eiA9IHogKiB6MjtcbiAgdmFyIHd4ID0gdyAqIHgyO1xuICB2YXIgd3kgPSB3ICogeTI7XG4gIHZhciB3eiA9IHcgKiB6MjtcbiAgb3V0WzBdID0gMSAtIHl5IC0geno7XG4gIG91dFszXSA9IHl4IC0gd3o7XG4gIG91dFs2XSA9IHp4ICsgd3k7XG4gIG91dFsxXSA9IHl4ICsgd3o7XG4gIG91dFs0XSA9IDEgLSB4eCAtIHp6O1xuICBvdXRbN10gPSB6eSAtIHd4O1xuICBvdXRbMl0gPSB6eCAtIHd5O1xuICBvdXRbNV0gPSB6eSArIHd4O1xuICBvdXRbOF0gPSAxIC0geHggLSB5eTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyBhIDN4MyBub3JtYWwgbWF0cml4ICh0cmFuc3Bvc2UgaW52ZXJzZSkgZnJvbSB0aGUgNHg0IG1hdHJpeFxuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IG1hdDMgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIE1hdDQgdG8gZGVyaXZlIHRoZSBub3JtYWwgbWF0cml4IGZyb21cbiAqXG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbEZyb21NYXQ0KG91dCwgYSkge1xuICB2YXIgYTAwID0gYVswXSxcbiAgICAgIGEwMSA9IGFbMV0sXG4gICAgICBhMDIgPSBhWzJdLFxuICAgICAgYTAzID0gYVszXTtcbiAgdmFyIGExMCA9IGFbNF0sXG4gICAgICBhMTEgPSBhWzVdLFxuICAgICAgYTEyID0gYVs2XSxcbiAgICAgIGExMyA9IGFbN107XG4gIHZhciBhMjAgPSBhWzhdLFxuICAgICAgYTIxID0gYVs5XSxcbiAgICAgIGEyMiA9IGFbMTBdLFxuICAgICAgYTIzID0gYVsxMV07XG4gIHZhciBhMzAgPSBhWzEyXSxcbiAgICAgIGEzMSA9IGFbMTNdLFxuICAgICAgYTMyID0gYVsxNF0sXG4gICAgICBhMzMgPSBhWzE1XTtcbiAgdmFyIGIwMCA9IGEwMCAqIGExMSAtIGEwMSAqIGExMDtcbiAgdmFyIGIwMSA9IGEwMCAqIGExMiAtIGEwMiAqIGExMDtcbiAgdmFyIGIwMiA9IGEwMCAqIGExMyAtIGEwMyAqIGExMDtcbiAgdmFyIGIwMyA9IGEwMSAqIGExMiAtIGEwMiAqIGExMTtcbiAgdmFyIGIwNCA9IGEwMSAqIGExMyAtIGEwMyAqIGExMTtcbiAgdmFyIGIwNSA9IGEwMiAqIGExMyAtIGEwMyAqIGExMjtcbiAgdmFyIGIwNiA9IGEyMCAqIGEzMSAtIGEyMSAqIGEzMDtcbiAgdmFyIGIwNyA9IGEyMCAqIGEzMiAtIGEyMiAqIGEzMDtcbiAgdmFyIGIwOCA9IGEyMCAqIGEzMyAtIGEyMyAqIGEzMDtcbiAgdmFyIGIwOSA9IGEyMSAqIGEzMiAtIGEyMiAqIGEzMTtcbiAgdmFyIGIxMCA9IGEyMSAqIGEzMyAtIGEyMyAqIGEzMTtcbiAgdmFyIGIxMSA9IGEyMiAqIGEzMyAtIGEyMyAqIGEzMjsgLy8gQ2FsY3VsYXRlIHRoZSBkZXRlcm1pbmFudFxuXG4gIHZhciBkZXQgPSBiMDAgKiBiMTEgLSBiMDEgKiBiMTAgKyBiMDIgKiBiMDkgKyBiMDMgKiBiMDggLSBiMDQgKiBiMDcgKyBiMDUgKiBiMDY7XG5cbiAgaWYgKCFkZXQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGRldCA9IDEuMCAvIGRldDtcbiAgb3V0WzBdID0gKGExMSAqIGIxMSAtIGExMiAqIGIxMCArIGExMyAqIGIwOSkgKiBkZXQ7XG4gIG91dFsxXSA9IChhMTIgKiBiMDggLSBhMTAgKiBiMTEgLSBhMTMgKiBiMDcpICogZGV0O1xuICBvdXRbMl0gPSAoYTEwICogYjEwIC0gYTExICogYjA4ICsgYTEzICogYjA2KSAqIGRldDtcbiAgb3V0WzNdID0gKGEwMiAqIGIxMCAtIGEwMSAqIGIxMSAtIGEwMyAqIGIwOSkgKiBkZXQ7XG4gIG91dFs0XSA9IChhMDAgKiBiMTEgLSBhMDIgKiBiMDggKyBhMDMgKiBiMDcpICogZGV0O1xuICBvdXRbNV0gPSAoYTAxICogYjA4IC0gYTAwICogYjEwIC0gYTAzICogYjA2KSAqIGRldDtcbiAgb3V0WzZdID0gKGEzMSAqIGIwNSAtIGEzMiAqIGIwNCArIGEzMyAqIGIwMykgKiBkZXQ7XG4gIG91dFs3XSA9IChhMzIgKiBiMDIgLSBhMzAgKiBiMDUgLSBhMzMgKiBiMDEpICogZGV0O1xuICBvdXRbOF0gPSAoYTMwICogYjA0IC0gYTMxICogYjAyICsgYTMzICogYjAwKSAqIGRldDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgMkQgcHJvamVjdGlvbiBtYXRyaXggd2l0aCB0aGUgZ2l2ZW4gYm91bmRzXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgbWF0MyBmcnVzdHVtIG1hdHJpeCB3aWxsIGJlIHdyaXR0ZW4gaW50b1xuICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIFdpZHRoIG9mIHlvdXIgZ2wgY29udGV4dFxuICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCBIZWlnaHQgb2YgZ2wgY29udGV4dFxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9qZWN0aW9uKG91dCwgd2lkdGgsIGhlaWdodCkge1xuICBvdXRbMF0gPSAyIC8gd2lkdGg7XG4gIG91dFsxXSA9IDA7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IC0yIC8gaGVpZ2h0O1xuICBvdXRbNV0gPSAwO1xuICBvdXRbNl0gPSAtMTtcbiAgb3V0WzddID0gMTtcbiAgb3V0WzhdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIG1hdDNcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSBtYXRyaXggdG8gcmVwcmVzZW50IGFzIGEgc3RyaW5nXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIG1hdHJpeFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzdHIoYSkge1xuICByZXR1cm4gXCJtYXQzKFwiICsgYVswXSArIFwiLCBcIiArIGFbMV0gKyBcIiwgXCIgKyBhWzJdICsgXCIsIFwiICsgYVszXSArIFwiLCBcIiArIGFbNF0gKyBcIiwgXCIgKyBhWzVdICsgXCIsIFwiICsgYVs2XSArIFwiLCBcIiArIGFbN10gKyBcIiwgXCIgKyBhWzhdICsgXCIpXCI7XG59XG4vKipcbiAqIFJldHVybnMgRnJvYmVuaXVzIG5vcm0gb2YgYSBtYXQzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIG1hdHJpeCB0byBjYWxjdWxhdGUgRnJvYmVuaXVzIG5vcm0gb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IEZyb2Jlbml1cyBub3JtXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb2IoYSkge1xuICByZXR1cm4gTWF0aC5oeXBvdChhWzBdLCBhWzFdLCBhWzJdLCBhWzNdLCBhWzRdLCBhWzVdLCBhWzZdLCBhWzddLCBhWzhdKTtcbn1cbi8qKlxuICogQWRkcyB0d28gbWF0MydzXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICsgYlswXTtcbiAgb3V0WzFdID0gYVsxXSArIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gKyBiWzJdO1xuICBvdXRbM10gPSBhWzNdICsgYlszXTtcbiAgb3V0WzRdID0gYVs0XSArIGJbNF07XG4gIG91dFs1XSA9IGFbNV0gKyBiWzVdO1xuICBvdXRbNl0gPSBhWzZdICsgYls2XTtcbiAgb3V0WzddID0gYVs3XSArIGJbN107XG4gIG91dFs4XSA9IGFbOF0gKyBiWzhdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTdWJ0cmFjdHMgbWF0cml4IGIgZnJvbSBtYXRyaXggYVxuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN1YnRyYWN0KG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdIC0gYlswXTtcbiAgb3V0WzFdID0gYVsxXSAtIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gLSBiWzJdO1xuICBvdXRbM10gPSBhWzNdIC0gYlszXTtcbiAgb3V0WzRdID0gYVs0XSAtIGJbNF07XG4gIG91dFs1XSA9IGFbNV0gLSBiWzVdO1xuICBvdXRbNl0gPSBhWzZdIC0gYls2XTtcbiAgb3V0WzddID0gYVs3XSAtIGJbN107XG4gIG91dFs4XSA9IGFbOF0gLSBiWzhdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBNdWx0aXBseSBlYWNoIGVsZW1lbnQgb2YgdGhlIG1hdHJpeCBieSBhIHNjYWxhci5cbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIG1hdHJpeCB0byBzY2FsZVxuICogQHBhcmFtIHtOdW1iZXJ9IGIgYW1vdW50IHRvIHNjYWxlIHRoZSBtYXRyaXgncyBlbGVtZW50cyBieVxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aXBseVNjYWxhcihvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAqIGI7XG4gIG91dFsxXSA9IGFbMV0gKiBiO1xuICBvdXRbMl0gPSBhWzJdICogYjtcbiAgb3V0WzNdID0gYVszXSAqIGI7XG4gIG91dFs0XSA9IGFbNF0gKiBiO1xuICBvdXRbNV0gPSBhWzVdICogYjtcbiAgb3V0WzZdID0gYVs2XSAqIGI7XG4gIG91dFs3XSA9IGFbN10gKiBiO1xuICBvdXRbOF0gPSBhWzhdICogYjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQWRkcyB0d28gbWF0MydzIGFmdGVyIG11bHRpcGx5aW5nIGVhY2ggZWxlbWVudCBvZiB0aGUgc2Vjb25kIG9wZXJhbmQgYnkgYSBzY2FsYXIgdmFsdWUuXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSBzY2FsZSB0aGUgYW1vdW50IHRvIHNjYWxlIGIncyBlbGVtZW50cyBieSBiZWZvcmUgYWRkaW5nXG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5U2NhbGFyQW5kQWRkKG91dCwgYSwgYiwgc2NhbGUpIHtcbiAgb3V0WzBdID0gYVswXSArIGJbMF0gKiBzY2FsZTtcbiAgb3V0WzFdID0gYVsxXSArIGJbMV0gKiBzY2FsZTtcbiAgb3V0WzJdID0gYVsyXSArIGJbMl0gKiBzY2FsZTtcbiAgb3V0WzNdID0gYVszXSArIGJbM10gKiBzY2FsZTtcbiAgb3V0WzRdID0gYVs0XSArIGJbNF0gKiBzY2FsZTtcbiAgb3V0WzVdID0gYVs1XSArIGJbNV0gKiBzY2FsZTtcbiAgb3V0WzZdID0gYVs2XSArIGJbNl0gKiBzY2FsZTtcbiAgb3V0WzddID0gYVs3XSArIGJbN10gKiBzY2FsZTtcbiAgb3V0WzhdID0gYVs4XSArIGJbOF0gKiBzY2FsZTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgbWF0cmljZXMgaGF2ZSBleGFjdGx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uICh3aGVuIGNvbXBhcmVkIHdpdGggPT09KVxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIFRoZSBmaXJzdCBtYXRyaXguXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYiBUaGUgc2Vjb25kIG1hdHJpeC5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSBtYXRyaWNlcyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXhhY3RFcXVhbHMoYSwgYikge1xuICByZXR1cm4gYVswXSA9PT0gYlswXSAmJiBhWzFdID09PSBiWzFdICYmIGFbMl0gPT09IGJbMl0gJiYgYVszXSA9PT0gYlszXSAmJiBhWzRdID09PSBiWzRdICYmIGFbNV0gPT09IGJbNV0gJiYgYVs2XSA9PT0gYls2XSAmJiBhWzddID09PSBiWzddICYmIGFbOF0gPT09IGJbOF07XG59XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIG1hdHJpY2VzIGhhdmUgYXBwcm94aW1hdGVseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSBUaGUgZmlyc3QgbWF0cml4LlxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGIgVGhlIHNlY29uZCBtYXRyaXguXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgbWF0cmljZXMgYXJlIGVxdWFsLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGVxdWFscyhhLCBiKSB7XG4gIHZhciBhMCA9IGFbMF0sXG4gICAgICBhMSA9IGFbMV0sXG4gICAgICBhMiA9IGFbMl0sXG4gICAgICBhMyA9IGFbM10sXG4gICAgICBhNCA9IGFbNF0sXG4gICAgICBhNSA9IGFbNV0sXG4gICAgICBhNiA9IGFbNl0sXG4gICAgICBhNyA9IGFbN10sXG4gICAgICBhOCA9IGFbOF07XG4gIHZhciBiMCA9IGJbMF0sXG4gICAgICBiMSA9IGJbMV0sXG4gICAgICBiMiA9IGJbMl0sXG4gICAgICBiMyA9IGJbM10sXG4gICAgICBiNCA9IGJbNF0sXG4gICAgICBiNSA9IGJbNV0sXG4gICAgICBiNiA9IGJbNl0sXG4gICAgICBiNyA9IGJbN10sXG4gICAgICBiOCA9IGJbOF07XG4gIHJldHVybiBNYXRoLmFicyhhMCAtIGIwKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMCksIE1hdGguYWJzKGIwKSkgJiYgTWF0aC5hYnMoYTEgLSBiMSkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTEpLCBNYXRoLmFicyhiMSkpICYmIE1hdGguYWJzKGEyIC0gYjIpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEyKSwgTWF0aC5hYnMoYjIpKSAmJiBNYXRoLmFicyhhMyAtIGIzKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMyksIE1hdGguYWJzKGIzKSkgJiYgTWF0aC5hYnMoYTQgLSBiNCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTQpLCBNYXRoLmFicyhiNCkpICYmIE1hdGguYWJzKGE1IC0gYjUpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE1KSwgTWF0aC5hYnMoYjUpKSAmJiBNYXRoLmFicyhhNiAtIGI2KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhNiksIE1hdGguYWJzKGI2KSkgJiYgTWF0aC5hYnMoYTcgLSBiNykgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTcpLCBNYXRoLmFicyhiNykpICYmIE1hdGguYWJzKGE4IC0gYjgpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE4KSwgTWF0aC5hYnMoYjgpKTtcbn1cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBtYXQzLm11bHRpcGx5fVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBtdWwgPSBtdWx0aXBseTtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBtYXQzLnN1YnRyYWN0fVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzdWIgPSBzdWJ0cmFjdDsiLCAiaW1wb3J0ICogYXMgZ2xNYXRyaXggZnJvbSBcIi4vY29tbW9uLmpzXCI7XG4vKipcbiAqIDR4NCBNYXRyaXg8YnI+Rm9ybWF0OiBjb2x1bW4tbWFqb3IsIHdoZW4gdHlwZWQgb3V0IGl0IGxvb2tzIGxpa2Ugcm93LW1ham9yPGJyPlRoZSBtYXRyaWNlcyBhcmUgYmVpbmcgcG9zdCBtdWx0aXBsaWVkLlxuICogQG1vZHVsZSBtYXQ0XG4gKi9cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGlkZW50aXR5IG1hdDRcbiAqXG4gKiBAcmV0dXJucyB7bWF0NH0gYSBuZXcgNHg0IG1hdHJpeFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSgxNik7XG5cbiAgaWYgKGdsTWF0cml4LkFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICAgIG91dFszXSA9IDA7XG4gICAgb3V0WzRdID0gMDtcbiAgICBvdXRbNl0gPSAwO1xuICAgIG91dFs3XSA9IDA7XG4gICAgb3V0WzhdID0gMDtcbiAgICBvdXRbOV0gPSAwO1xuICAgIG91dFsxMV0gPSAwO1xuICAgIG91dFsxMl0gPSAwO1xuICAgIG91dFsxM10gPSAwO1xuICAgIG91dFsxNF0gPSAwO1xuICB9XG5cbiAgb3V0WzBdID0gMTtcbiAgb3V0WzVdID0gMTtcbiAgb3V0WzEwXSA9IDE7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IG1hdDQgaW5pdGlhbGl6ZWQgd2l0aCB2YWx1ZXMgZnJvbSBhbiBleGlzdGluZyBtYXRyaXhcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSBtYXRyaXggdG8gY2xvbmVcbiAqIEByZXR1cm5zIHttYXQ0fSBhIG5ldyA0eDQgbWF0cml4XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lKGEpIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDE2KTtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgb3V0WzNdID0gYVszXTtcbiAgb3V0WzRdID0gYVs0XTtcbiAgb3V0WzVdID0gYVs1XTtcbiAgb3V0WzZdID0gYVs2XTtcbiAgb3V0WzddID0gYVs3XTtcbiAgb3V0WzhdID0gYVs4XTtcbiAgb3V0WzldID0gYVs5XTtcbiAgb3V0WzEwXSA9IGFbMTBdO1xuICBvdXRbMTFdID0gYVsxMV07XG4gIG91dFsxMl0gPSBhWzEyXTtcbiAgb3V0WzEzXSA9IGFbMTNdO1xuICBvdXRbMTRdID0gYVsxNF07XG4gIG91dFsxNV0gPSBhWzE1XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ29weSB0aGUgdmFsdWVzIGZyb20gb25lIG1hdDQgdG8gYW5vdGhlclxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjb3B5KG91dCwgYSkge1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICBvdXRbMl0gPSBhWzJdO1xuICBvdXRbM10gPSBhWzNdO1xuICBvdXRbNF0gPSBhWzRdO1xuICBvdXRbNV0gPSBhWzVdO1xuICBvdXRbNl0gPSBhWzZdO1xuICBvdXRbN10gPSBhWzddO1xuICBvdXRbOF0gPSBhWzhdO1xuICBvdXRbOV0gPSBhWzldO1xuICBvdXRbMTBdID0gYVsxMF07XG4gIG91dFsxMV0gPSBhWzExXTtcbiAgb3V0WzEyXSA9IGFbMTJdO1xuICBvdXRbMTNdID0gYVsxM107XG4gIG91dFsxNF0gPSBhWzE0XTtcbiAgb3V0WzE1XSA9IGFbMTVdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgbWF0NCB3aXRoIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbTAwIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDAgcG9zaXRpb24gKGluZGV4IDApXG4gKiBAcGFyYW0ge051bWJlcn0gbTAxIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDEgcG9zaXRpb24gKGluZGV4IDEpXG4gKiBAcGFyYW0ge051bWJlcn0gbTAyIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDIgcG9zaXRpb24gKGluZGV4IDIpXG4gKiBAcGFyYW0ge051bWJlcn0gbTAzIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDMgcG9zaXRpb24gKGluZGV4IDMpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEwIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDAgcG9zaXRpb24gKGluZGV4IDQpXG4gKiBAcGFyYW0ge051bWJlcn0gbTExIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDEgcG9zaXRpb24gKGluZGV4IDUpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEyIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDIgcG9zaXRpb24gKGluZGV4IDYpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEzIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDMgcG9zaXRpb24gKGluZGV4IDcpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIwIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDAgcG9zaXRpb24gKGluZGV4IDgpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIxIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDEgcG9zaXRpb24gKGluZGV4IDkpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIyIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDIgcG9zaXRpb24gKGluZGV4IDEwKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMyBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAzIHBvc2l0aW9uIChpbmRleCAxMSlcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzAgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggMTIpXG4gKiBAcGFyYW0ge051bWJlcn0gbTMxIENvbXBvbmVudCBpbiBjb2x1bW4gMywgcm93IDEgcG9zaXRpb24gKGluZGV4IDEzKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0zMiBDb21wb25lbnQgaW4gY29sdW1uIDMsIHJvdyAyIHBvc2l0aW9uIChpbmRleCAxNClcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzMgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMyBwb3NpdGlvbiAoaW5kZXggMTUpXG4gKiBAcmV0dXJucyB7bWF0NH0gQSBuZXcgbWF0NFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVmFsdWVzKG0wMCwgbTAxLCBtMDIsIG0wMywgbTEwLCBtMTEsIG0xMiwgbTEzLCBtMjAsIG0yMSwgbTIyLCBtMjMsIG0zMCwgbTMxLCBtMzIsIG0zMykge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMTYpO1xuICBvdXRbMF0gPSBtMDA7XG4gIG91dFsxXSA9IG0wMTtcbiAgb3V0WzJdID0gbTAyO1xuICBvdXRbM10gPSBtMDM7XG4gIG91dFs0XSA9IG0xMDtcbiAgb3V0WzVdID0gbTExO1xuICBvdXRbNl0gPSBtMTI7XG4gIG91dFs3XSA9IG0xMztcbiAgb3V0WzhdID0gbTIwO1xuICBvdXRbOV0gPSBtMjE7XG4gIG91dFsxMF0gPSBtMjI7XG4gIG91dFsxMV0gPSBtMjM7XG4gIG91dFsxMl0gPSBtMzA7XG4gIG91dFsxM10gPSBtMzE7XG4gIG91dFsxNF0gPSBtMzI7XG4gIG91dFsxNV0gPSBtMzM7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFNldCB0aGUgY29tcG9uZW50cyBvZiBhIG1hdDQgdG8gdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge051bWJlcn0gbTAwIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDAgcG9zaXRpb24gKGluZGV4IDApXG4gKiBAcGFyYW0ge051bWJlcn0gbTAxIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDEgcG9zaXRpb24gKGluZGV4IDEpXG4gKiBAcGFyYW0ge051bWJlcn0gbTAyIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDIgcG9zaXRpb24gKGluZGV4IDIpXG4gKiBAcGFyYW0ge051bWJlcn0gbTAzIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDMgcG9zaXRpb24gKGluZGV4IDMpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEwIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDAgcG9zaXRpb24gKGluZGV4IDQpXG4gKiBAcGFyYW0ge051bWJlcn0gbTExIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDEgcG9zaXRpb24gKGluZGV4IDUpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEyIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDIgcG9zaXRpb24gKGluZGV4IDYpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEzIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDMgcG9zaXRpb24gKGluZGV4IDcpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIwIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDAgcG9zaXRpb24gKGluZGV4IDgpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIxIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDEgcG9zaXRpb24gKGluZGV4IDkpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIyIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDIgcG9zaXRpb24gKGluZGV4IDEwKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMyBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAzIHBvc2l0aW9uIChpbmRleCAxMSlcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzAgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggMTIpXG4gKiBAcGFyYW0ge051bWJlcn0gbTMxIENvbXBvbmVudCBpbiBjb2x1bW4gMywgcm93IDEgcG9zaXRpb24gKGluZGV4IDEzKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0zMiBDb21wb25lbnQgaW4gY29sdW1uIDMsIHJvdyAyIHBvc2l0aW9uIChpbmRleCAxNClcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzMgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMyBwb3NpdGlvbiAoaW5kZXggMTUpXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNldChvdXQsIG0wMCwgbTAxLCBtMDIsIG0wMywgbTEwLCBtMTEsIG0xMiwgbTEzLCBtMjAsIG0yMSwgbTIyLCBtMjMsIG0zMCwgbTMxLCBtMzIsIG0zMykge1xuICBvdXRbMF0gPSBtMDA7XG4gIG91dFsxXSA9IG0wMTtcbiAgb3V0WzJdID0gbTAyO1xuICBvdXRbM10gPSBtMDM7XG4gIG91dFs0XSA9IG0xMDtcbiAgb3V0WzVdID0gbTExO1xuICBvdXRbNl0gPSBtMTI7XG4gIG91dFs3XSA9IG0xMztcbiAgb3V0WzhdID0gbTIwO1xuICBvdXRbOV0gPSBtMjE7XG4gIG91dFsxMF0gPSBtMjI7XG4gIG91dFsxMV0gPSBtMjM7XG4gIG91dFsxMl0gPSBtMzA7XG4gIG91dFsxM10gPSBtMzE7XG4gIG91dFsxNF0gPSBtMzI7XG4gIG91dFsxNV0gPSBtMzM7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFNldCBhIG1hdDQgdG8gdGhlIGlkZW50aXR5IG1hdHJpeFxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGlkZW50aXR5KG91dCkge1xuICBvdXRbMF0gPSAxO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAwO1xuICBvdXRbNV0gPSAxO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAwO1xuICBvdXRbOV0gPSAwO1xuICBvdXRbMTBdID0gMTtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSAwO1xuICBvdXRbMTNdID0gMDtcbiAgb3V0WzE0XSA9IDA7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBUcmFuc3Bvc2UgdGhlIHZhbHVlcyBvZiBhIG1hdDRcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNwb3NlKG91dCwgYSkge1xuICAvLyBJZiB3ZSBhcmUgdHJhbnNwb3Npbmcgb3Vyc2VsdmVzIHdlIGNhbiBza2lwIGEgZmV3IHN0ZXBzIGJ1dCBoYXZlIHRvIGNhY2hlIHNvbWUgdmFsdWVzXG4gIGlmIChvdXQgPT09IGEpIHtcbiAgICB2YXIgYTAxID0gYVsxXSxcbiAgICAgICAgYTAyID0gYVsyXSxcbiAgICAgICAgYTAzID0gYVszXTtcbiAgICB2YXIgYTEyID0gYVs2XSxcbiAgICAgICAgYTEzID0gYVs3XTtcbiAgICB2YXIgYTIzID0gYVsxMV07XG4gICAgb3V0WzFdID0gYVs0XTtcbiAgICBvdXRbMl0gPSBhWzhdO1xuICAgIG91dFszXSA9IGFbMTJdO1xuICAgIG91dFs0XSA9IGEwMTtcbiAgICBvdXRbNl0gPSBhWzldO1xuICAgIG91dFs3XSA9IGFbMTNdO1xuICAgIG91dFs4XSA9IGEwMjtcbiAgICBvdXRbOV0gPSBhMTI7XG4gICAgb3V0WzExXSA9IGFbMTRdO1xuICAgIG91dFsxMl0gPSBhMDM7XG4gICAgb3V0WzEzXSA9IGExMztcbiAgICBvdXRbMTRdID0gYTIzO1xuICB9IGVsc2Uge1xuICAgIG91dFswXSA9IGFbMF07XG4gICAgb3V0WzFdID0gYVs0XTtcbiAgICBvdXRbMl0gPSBhWzhdO1xuICAgIG91dFszXSA9IGFbMTJdO1xuICAgIG91dFs0XSA9IGFbMV07XG4gICAgb3V0WzVdID0gYVs1XTtcbiAgICBvdXRbNl0gPSBhWzldO1xuICAgIG91dFs3XSA9IGFbMTNdO1xuICAgIG91dFs4XSA9IGFbMl07XG4gICAgb3V0WzldID0gYVs2XTtcbiAgICBvdXRbMTBdID0gYVsxMF07XG4gICAgb3V0WzExXSA9IGFbMTRdO1xuICAgIG91dFsxMl0gPSBhWzNdO1xuICAgIG91dFsxM10gPSBhWzddO1xuICAgIG91dFsxNF0gPSBhWzExXTtcbiAgICBvdXRbMTVdID0gYVsxNV07XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBJbnZlcnRzIGEgbWF0NFxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpbnZlcnQob3V0LCBhKSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl0sXG4gICAgICBhMDMgPSBhWzNdO1xuICB2YXIgYTEwID0gYVs0XSxcbiAgICAgIGExMSA9IGFbNV0sXG4gICAgICBhMTIgPSBhWzZdLFxuICAgICAgYTEzID0gYVs3XTtcbiAgdmFyIGEyMCA9IGFbOF0sXG4gICAgICBhMjEgPSBhWzldLFxuICAgICAgYTIyID0gYVsxMF0sXG4gICAgICBhMjMgPSBhWzExXTtcbiAgdmFyIGEzMCA9IGFbMTJdLFxuICAgICAgYTMxID0gYVsxM10sXG4gICAgICBhMzIgPSBhWzE0XSxcbiAgICAgIGEzMyA9IGFbMTVdO1xuICB2YXIgYjAwID0gYTAwICogYTExIC0gYTAxICogYTEwO1xuICB2YXIgYjAxID0gYTAwICogYTEyIC0gYTAyICogYTEwO1xuICB2YXIgYjAyID0gYTAwICogYTEzIC0gYTAzICogYTEwO1xuICB2YXIgYjAzID0gYTAxICogYTEyIC0gYTAyICogYTExO1xuICB2YXIgYjA0ID0gYTAxICogYTEzIC0gYTAzICogYTExO1xuICB2YXIgYjA1ID0gYTAyICogYTEzIC0gYTAzICogYTEyO1xuICB2YXIgYjA2ID0gYTIwICogYTMxIC0gYTIxICogYTMwO1xuICB2YXIgYjA3ID0gYTIwICogYTMyIC0gYTIyICogYTMwO1xuICB2YXIgYjA4ID0gYTIwICogYTMzIC0gYTIzICogYTMwO1xuICB2YXIgYjA5ID0gYTIxICogYTMyIC0gYTIyICogYTMxO1xuICB2YXIgYjEwID0gYTIxICogYTMzIC0gYTIzICogYTMxO1xuICB2YXIgYjExID0gYTIyICogYTMzIC0gYTIzICogYTMyOyAvLyBDYWxjdWxhdGUgdGhlIGRldGVybWluYW50XG5cbiAgdmFyIGRldCA9IGIwMCAqIGIxMSAtIGIwMSAqIGIxMCArIGIwMiAqIGIwOSArIGIwMyAqIGIwOCAtIGIwNCAqIGIwNyArIGIwNSAqIGIwNjtcblxuICBpZiAoIWRldCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZGV0ID0gMS4wIC8gZGV0O1xuICBvdXRbMF0gPSAoYTExICogYjExIC0gYTEyICogYjEwICsgYTEzICogYjA5KSAqIGRldDtcbiAgb3V0WzFdID0gKGEwMiAqIGIxMCAtIGEwMSAqIGIxMSAtIGEwMyAqIGIwOSkgKiBkZXQ7XG4gIG91dFsyXSA9IChhMzEgKiBiMDUgLSBhMzIgKiBiMDQgKyBhMzMgKiBiMDMpICogZGV0O1xuICBvdXRbM10gPSAoYTIyICogYjA0IC0gYTIxICogYjA1IC0gYTIzICogYjAzKSAqIGRldDtcbiAgb3V0WzRdID0gKGExMiAqIGIwOCAtIGExMCAqIGIxMSAtIGExMyAqIGIwNykgKiBkZXQ7XG4gIG91dFs1XSA9IChhMDAgKiBiMTEgLSBhMDIgKiBiMDggKyBhMDMgKiBiMDcpICogZGV0O1xuICBvdXRbNl0gPSAoYTMyICogYjAyIC0gYTMwICogYjA1IC0gYTMzICogYjAxKSAqIGRldDtcbiAgb3V0WzddID0gKGEyMCAqIGIwNSAtIGEyMiAqIGIwMiArIGEyMyAqIGIwMSkgKiBkZXQ7XG4gIG91dFs4XSA9IChhMTAgKiBiMTAgLSBhMTEgKiBiMDggKyBhMTMgKiBiMDYpICogZGV0O1xuICBvdXRbOV0gPSAoYTAxICogYjA4IC0gYTAwICogYjEwIC0gYTAzICogYjA2KSAqIGRldDtcbiAgb3V0WzEwXSA9IChhMzAgKiBiMDQgLSBhMzEgKiBiMDIgKyBhMzMgKiBiMDApICogZGV0O1xuICBvdXRbMTFdID0gKGEyMSAqIGIwMiAtIGEyMCAqIGIwNCAtIGEyMyAqIGIwMCkgKiBkZXQ7XG4gIG91dFsxMl0gPSAoYTExICogYjA3IC0gYTEwICogYjA5IC0gYTEyICogYjA2KSAqIGRldDtcbiAgb3V0WzEzXSA9IChhMDAgKiBiMDkgLSBhMDEgKiBiMDcgKyBhMDIgKiBiMDYpICogZGV0O1xuICBvdXRbMTRdID0gKGEzMSAqIGIwMSAtIGEzMCAqIGIwMyAtIGEzMiAqIGIwMCkgKiBkZXQ7XG4gIG91dFsxNV0gPSAoYTIwICogYjAzIC0gYTIxICogYjAxICsgYTIyICogYjAwKSAqIGRldDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgYWRqdWdhdGUgb2YgYSBtYXQ0XG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGFkam9pbnQob3V0LCBhKSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl0sXG4gICAgICBhMDMgPSBhWzNdO1xuICB2YXIgYTEwID0gYVs0XSxcbiAgICAgIGExMSA9IGFbNV0sXG4gICAgICBhMTIgPSBhWzZdLFxuICAgICAgYTEzID0gYVs3XTtcbiAgdmFyIGEyMCA9IGFbOF0sXG4gICAgICBhMjEgPSBhWzldLFxuICAgICAgYTIyID0gYVsxMF0sXG4gICAgICBhMjMgPSBhWzExXTtcbiAgdmFyIGEzMCA9IGFbMTJdLFxuICAgICAgYTMxID0gYVsxM10sXG4gICAgICBhMzIgPSBhWzE0XSxcbiAgICAgIGEzMyA9IGFbMTVdO1xuICBvdXRbMF0gPSBhMTEgKiAoYTIyICogYTMzIC0gYTIzICogYTMyKSAtIGEyMSAqIChhMTIgKiBhMzMgLSBhMTMgKiBhMzIpICsgYTMxICogKGExMiAqIGEyMyAtIGExMyAqIGEyMik7XG4gIG91dFsxXSA9IC0oYTAxICogKGEyMiAqIGEzMyAtIGEyMyAqIGEzMikgLSBhMjEgKiAoYTAyICogYTMzIC0gYTAzICogYTMyKSArIGEzMSAqIChhMDIgKiBhMjMgLSBhMDMgKiBhMjIpKTtcbiAgb3V0WzJdID0gYTAxICogKGExMiAqIGEzMyAtIGExMyAqIGEzMikgLSBhMTEgKiAoYTAyICogYTMzIC0gYTAzICogYTMyKSArIGEzMSAqIChhMDIgKiBhMTMgLSBhMDMgKiBhMTIpO1xuICBvdXRbM10gPSAtKGEwMSAqIChhMTIgKiBhMjMgLSBhMTMgKiBhMjIpIC0gYTExICogKGEwMiAqIGEyMyAtIGEwMyAqIGEyMikgKyBhMjEgKiAoYTAyICogYTEzIC0gYTAzICogYTEyKSk7XG4gIG91dFs0XSA9IC0oYTEwICogKGEyMiAqIGEzMyAtIGEyMyAqIGEzMikgLSBhMjAgKiAoYTEyICogYTMzIC0gYTEzICogYTMyKSArIGEzMCAqIChhMTIgKiBhMjMgLSBhMTMgKiBhMjIpKTtcbiAgb3V0WzVdID0gYTAwICogKGEyMiAqIGEzMyAtIGEyMyAqIGEzMikgLSBhMjAgKiAoYTAyICogYTMzIC0gYTAzICogYTMyKSArIGEzMCAqIChhMDIgKiBhMjMgLSBhMDMgKiBhMjIpO1xuICBvdXRbNl0gPSAtKGEwMCAqIChhMTIgKiBhMzMgLSBhMTMgKiBhMzIpIC0gYTEwICogKGEwMiAqIGEzMyAtIGEwMyAqIGEzMikgKyBhMzAgKiAoYTAyICogYTEzIC0gYTAzICogYTEyKSk7XG4gIG91dFs3XSA9IGEwMCAqIChhMTIgKiBhMjMgLSBhMTMgKiBhMjIpIC0gYTEwICogKGEwMiAqIGEyMyAtIGEwMyAqIGEyMikgKyBhMjAgKiAoYTAyICogYTEzIC0gYTAzICogYTEyKTtcbiAgb3V0WzhdID0gYTEwICogKGEyMSAqIGEzMyAtIGEyMyAqIGEzMSkgLSBhMjAgKiAoYTExICogYTMzIC0gYTEzICogYTMxKSArIGEzMCAqIChhMTEgKiBhMjMgLSBhMTMgKiBhMjEpO1xuICBvdXRbOV0gPSAtKGEwMCAqIChhMjEgKiBhMzMgLSBhMjMgKiBhMzEpIC0gYTIwICogKGEwMSAqIGEzMyAtIGEwMyAqIGEzMSkgKyBhMzAgKiAoYTAxICogYTIzIC0gYTAzICogYTIxKSk7XG4gIG91dFsxMF0gPSBhMDAgKiAoYTExICogYTMzIC0gYTEzICogYTMxKSAtIGExMCAqIChhMDEgKiBhMzMgLSBhMDMgKiBhMzEpICsgYTMwICogKGEwMSAqIGExMyAtIGEwMyAqIGExMSk7XG4gIG91dFsxMV0gPSAtKGEwMCAqIChhMTEgKiBhMjMgLSBhMTMgKiBhMjEpIC0gYTEwICogKGEwMSAqIGEyMyAtIGEwMyAqIGEyMSkgKyBhMjAgKiAoYTAxICogYTEzIC0gYTAzICogYTExKSk7XG4gIG91dFsxMl0gPSAtKGExMCAqIChhMjEgKiBhMzIgLSBhMjIgKiBhMzEpIC0gYTIwICogKGExMSAqIGEzMiAtIGExMiAqIGEzMSkgKyBhMzAgKiAoYTExICogYTIyIC0gYTEyICogYTIxKSk7XG4gIG91dFsxM10gPSBhMDAgKiAoYTIxICogYTMyIC0gYTIyICogYTMxKSAtIGEyMCAqIChhMDEgKiBhMzIgLSBhMDIgKiBhMzEpICsgYTMwICogKGEwMSAqIGEyMiAtIGEwMiAqIGEyMSk7XG4gIG91dFsxNF0gPSAtKGEwMCAqIChhMTEgKiBhMzIgLSBhMTIgKiBhMzEpIC0gYTEwICogKGEwMSAqIGEzMiAtIGEwMiAqIGEzMSkgKyBhMzAgKiAoYTAxICogYTEyIC0gYTAyICogYTExKSk7XG4gIG91dFsxNV0gPSBhMDAgKiAoYTExICogYTIyIC0gYTEyICogYTIxKSAtIGExMCAqIChhMDEgKiBhMjIgLSBhMDIgKiBhMjEpICsgYTIwICogKGEwMSAqIGExMiAtIGEwMiAqIGExMSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGRldGVybWluYW50IG9mIGEgbWF0NFxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkZXRlcm1pbmFudCBvZiBhXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRldGVybWluYW50KGEpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXSxcbiAgICAgIGEwMyA9IGFbM107XG4gIHZhciBhMTAgPSBhWzRdLFxuICAgICAgYTExID0gYVs1XSxcbiAgICAgIGExMiA9IGFbNl0sXG4gICAgICBhMTMgPSBhWzddO1xuICB2YXIgYTIwID0gYVs4XSxcbiAgICAgIGEyMSA9IGFbOV0sXG4gICAgICBhMjIgPSBhWzEwXSxcbiAgICAgIGEyMyA9IGFbMTFdO1xuICB2YXIgYTMwID0gYVsxMl0sXG4gICAgICBhMzEgPSBhWzEzXSxcbiAgICAgIGEzMiA9IGFbMTRdLFxuICAgICAgYTMzID0gYVsxNV07XG4gIHZhciBiMDAgPSBhMDAgKiBhMTEgLSBhMDEgKiBhMTA7XG4gIHZhciBiMDEgPSBhMDAgKiBhMTIgLSBhMDIgKiBhMTA7XG4gIHZhciBiMDIgPSBhMDAgKiBhMTMgLSBhMDMgKiBhMTA7XG4gIHZhciBiMDMgPSBhMDEgKiBhMTIgLSBhMDIgKiBhMTE7XG4gIHZhciBiMDQgPSBhMDEgKiBhMTMgLSBhMDMgKiBhMTE7XG4gIHZhciBiMDUgPSBhMDIgKiBhMTMgLSBhMDMgKiBhMTI7XG4gIHZhciBiMDYgPSBhMjAgKiBhMzEgLSBhMjEgKiBhMzA7XG4gIHZhciBiMDcgPSBhMjAgKiBhMzIgLSBhMjIgKiBhMzA7XG4gIHZhciBiMDggPSBhMjAgKiBhMzMgLSBhMjMgKiBhMzA7XG4gIHZhciBiMDkgPSBhMjEgKiBhMzIgLSBhMjIgKiBhMzE7XG4gIHZhciBiMTAgPSBhMjEgKiBhMzMgLSBhMjMgKiBhMzE7XG4gIHZhciBiMTEgPSBhMjIgKiBhMzMgLSBhMjMgKiBhMzI7IC8vIENhbGN1bGF0ZSB0aGUgZGV0ZXJtaW5hbnRcblxuICByZXR1cm4gYjAwICogYjExIC0gYjAxICogYjEwICsgYjAyICogYjA5ICsgYjAzICogYjA4IC0gYjA0ICogYjA3ICsgYjA1ICogYjA2O1xufVxuLyoqXG4gKiBNdWx0aXBsaWVzIHR3byBtYXQ0c1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5KG91dCwgYSwgYikge1xuICB2YXIgYTAwID0gYVswXSxcbiAgICAgIGEwMSA9IGFbMV0sXG4gICAgICBhMDIgPSBhWzJdLFxuICAgICAgYTAzID0gYVszXTtcbiAgdmFyIGExMCA9IGFbNF0sXG4gICAgICBhMTEgPSBhWzVdLFxuICAgICAgYTEyID0gYVs2XSxcbiAgICAgIGExMyA9IGFbN107XG4gIHZhciBhMjAgPSBhWzhdLFxuICAgICAgYTIxID0gYVs5XSxcbiAgICAgIGEyMiA9IGFbMTBdLFxuICAgICAgYTIzID0gYVsxMV07XG4gIHZhciBhMzAgPSBhWzEyXSxcbiAgICAgIGEzMSA9IGFbMTNdLFxuICAgICAgYTMyID0gYVsxNF0sXG4gICAgICBhMzMgPSBhWzE1XTsgLy8gQ2FjaGUgb25seSB0aGUgY3VycmVudCBsaW5lIG9mIHRoZSBzZWNvbmQgbWF0cml4XG5cbiAgdmFyIGIwID0gYlswXSxcbiAgICAgIGIxID0gYlsxXSxcbiAgICAgIGIyID0gYlsyXSxcbiAgICAgIGIzID0gYlszXTtcbiAgb3V0WzBdID0gYjAgKiBhMDAgKyBiMSAqIGExMCArIGIyICogYTIwICsgYjMgKiBhMzA7XG4gIG91dFsxXSA9IGIwICogYTAxICsgYjEgKiBhMTEgKyBiMiAqIGEyMSArIGIzICogYTMxO1xuICBvdXRbMl0gPSBiMCAqIGEwMiArIGIxICogYTEyICsgYjIgKiBhMjIgKyBiMyAqIGEzMjtcbiAgb3V0WzNdID0gYjAgKiBhMDMgKyBiMSAqIGExMyArIGIyICogYTIzICsgYjMgKiBhMzM7XG4gIGIwID0gYls0XTtcbiAgYjEgPSBiWzVdO1xuICBiMiA9IGJbNl07XG4gIGIzID0gYls3XTtcbiAgb3V0WzRdID0gYjAgKiBhMDAgKyBiMSAqIGExMCArIGIyICogYTIwICsgYjMgKiBhMzA7XG4gIG91dFs1XSA9IGIwICogYTAxICsgYjEgKiBhMTEgKyBiMiAqIGEyMSArIGIzICogYTMxO1xuICBvdXRbNl0gPSBiMCAqIGEwMiArIGIxICogYTEyICsgYjIgKiBhMjIgKyBiMyAqIGEzMjtcbiAgb3V0WzddID0gYjAgKiBhMDMgKyBiMSAqIGExMyArIGIyICogYTIzICsgYjMgKiBhMzM7XG4gIGIwID0gYls4XTtcbiAgYjEgPSBiWzldO1xuICBiMiA9IGJbMTBdO1xuICBiMyA9IGJbMTFdO1xuICBvdXRbOF0gPSBiMCAqIGEwMCArIGIxICogYTEwICsgYjIgKiBhMjAgKyBiMyAqIGEzMDtcbiAgb3V0WzldID0gYjAgKiBhMDEgKyBiMSAqIGExMSArIGIyICogYTIxICsgYjMgKiBhMzE7XG4gIG91dFsxMF0gPSBiMCAqIGEwMiArIGIxICogYTEyICsgYjIgKiBhMjIgKyBiMyAqIGEzMjtcbiAgb3V0WzExXSA9IGIwICogYTAzICsgYjEgKiBhMTMgKyBiMiAqIGEyMyArIGIzICogYTMzO1xuICBiMCA9IGJbMTJdO1xuICBiMSA9IGJbMTNdO1xuICBiMiA9IGJbMTRdO1xuICBiMyA9IGJbMTVdO1xuICBvdXRbMTJdID0gYjAgKiBhMDAgKyBiMSAqIGExMCArIGIyICogYTIwICsgYjMgKiBhMzA7XG4gIG91dFsxM10gPSBiMCAqIGEwMSArIGIxICogYTExICsgYjIgKiBhMjEgKyBiMyAqIGEzMTtcbiAgb3V0WzE0XSA9IGIwICogYTAyICsgYjEgKiBhMTIgKyBiMiAqIGEyMiArIGIzICogYTMyO1xuICBvdXRbMTVdID0gYjAgKiBhMDMgKyBiMSAqIGExMyArIGIyICogYTIzICsgYjMgKiBhMzM7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFRyYW5zbGF0ZSBhIG1hdDQgYnkgdGhlIGdpdmVuIHZlY3RvclxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgbWF0cml4IHRvIHRyYW5zbGF0ZVxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHYgdmVjdG9yIHRvIHRyYW5zbGF0ZSBieVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2xhdGUob3V0LCBhLCB2KSB7XG4gIHZhciB4ID0gdlswXSxcbiAgICAgIHkgPSB2WzFdLFxuICAgICAgeiA9IHZbMl07XG4gIHZhciBhMDAsIGEwMSwgYTAyLCBhMDM7XG4gIHZhciBhMTAsIGExMSwgYTEyLCBhMTM7XG4gIHZhciBhMjAsIGEyMSwgYTIyLCBhMjM7XG5cbiAgaWYgKGEgPT09IG91dCkge1xuICAgIG91dFsxMl0gPSBhWzBdICogeCArIGFbNF0gKiB5ICsgYVs4XSAqIHogKyBhWzEyXTtcbiAgICBvdXRbMTNdID0gYVsxXSAqIHggKyBhWzVdICogeSArIGFbOV0gKiB6ICsgYVsxM107XG4gICAgb3V0WzE0XSA9IGFbMl0gKiB4ICsgYVs2XSAqIHkgKyBhWzEwXSAqIHogKyBhWzE0XTtcbiAgICBvdXRbMTVdID0gYVszXSAqIHggKyBhWzddICogeSArIGFbMTFdICogeiArIGFbMTVdO1xuICB9IGVsc2Uge1xuICAgIGEwMCA9IGFbMF07XG4gICAgYTAxID0gYVsxXTtcbiAgICBhMDIgPSBhWzJdO1xuICAgIGEwMyA9IGFbM107XG4gICAgYTEwID0gYVs0XTtcbiAgICBhMTEgPSBhWzVdO1xuICAgIGExMiA9IGFbNl07XG4gICAgYTEzID0gYVs3XTtcbiAgICBhMjAgPSBhWzhdO1xuICAgIGEyMSA9IGFbOV07XG4gICAgYTIyID0gYVsxMF07XG4gICAgYTIzID0gYVsxMV07XG4gICAgb3V0WzBdID0gYTAwO1xuICAgIG91dFsxXSA9IGEwMTtcbiAgICBvdXRbMl0gPSBhMDI7XG4gICAgb3V0WzNdID0gYTAzO1xuICAgIG91dFs0XSA9IGExMDtcbiAgICBvdXRbNV0gPSBhMTE7XG4gICAgb3V0WzZdID0gYTEyO1xuICAgIG91dFs3XSA9IGExMztcbiAgICBvdXRbOF0gPSBhMjA7XG4gICAgb3V0WzldID0gYTIxO1xuICAgIG91dFsxMF0gPSBhMjI7XG4gICAgb3V0WzExXSA9IGEyMztcbiAgICBvdXRbMTJdID0gYTAwICogeCArIGExMCAqIHkgKyBhMjAgKiB6ICsgYVsxMl07XG4gICAgb3V0WzEzXSA9IGEwMSAqIHggKyBhMTEgKiB5ICsgYTIxICogeiArIGFbMTNdO1xuICAgIG91dFsxNF0gPSBhMDIgKiB4ICsgYTEyICogeSArIGEyMiAqIHogKyBhWzE0XTtcbiAgICBvdXRbMTVdID0gYTAzICogeCArIGExMyAqIHkgKyBhMjMgKiB6ICsgYVsxNV07XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTY2FsZXMgdGhlIG1hdDQgYnkgdGhlIGRpbWVuc2lvbnMgaW4gdGhlIGdpdmVuIHZlYzMgbm90IHVzaW5nIHZlY3Rvcml6YXRpb25cbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIG1hdHJpeCB0byBzY2FsZVxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHYgdGhlIHZlYzMgdG8gc2NhbGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDR9IG91dFxuICoqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUob3V0LCBhLCB2KSB7XG4gIHZhciB4ID0gdlswXSxcbiAgICAgIHkgPSB2WzFdLFxuICAgICAgeiA9IHZbMl07XG4gIG91dFswXSA9IGFbMF0gKiB4O1xuICBvdXRbMV0gPSBhWzFdICogeDtcbiAgb3V0WzJdID0gYVsyXSAqIHg7XG4gIG91dFszXSA9IGFbM10gKiB4O1xuICBvdXRbNF0gPSBhWzRdICogeTtcbiAgb3V0WzVdID0gYVs1XSAqIHk7XG4gIG91dFs2XSA9IGFbNl0gKiB5O1xuICBvdXRbN10gPSBhWzddICogeTtcbiAgb3V0WzhdID0gYVs4XSAqIHo7XG4gIG91dFs5XSA9IGFbOV0gKiB6O1xuICBvdXRbMTBdID0gYVsxMF0gKiB6O1xuICBvdXRbMTFdID0gYVsxMV0gKiB6O1xuICBvdXRbMTJdID0gYVsxMl07XG4gIG91dFsxM10gPSBhWzEzXTtcbiAgb3V0WzE0XSA9IGFbMTRdO1xuICBvdXRbMTVdID0gYVsxNV07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZXMgYSBtYXQ0IGJ5IHRoZSBnaXZlbiBhbmdsZSBhcm91bmQgdGhlIGdpdmVuIGF4aXNcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIG1hdHJpeCB0byByb3RhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYXhpcyB0aGUgYXhpcyB0byByb3RhdGUgYXJvdW5kXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZShvdXQsIGEsIHJhZCwgYXhpcykge1xuICB2YXIgeCA9IGF4aXNbMF0sXG4gICAgICB5ID0gYXhpc1sxXSxcbiAgICAgIHogPSBheGlzWzJdO1xuICB2YXIgbGVuID0gTWF0aC5oeXBvdCh4LCB5LCB6KTtcbiAgdmFyIHMsIGMsIHQ7XG4gIHZhciBhMDAsIGEwMSwgYTAyLCBhMDM7XG4gIHZhciBhMTAsIGExMSwgYTEyLCBhMTM7XG4gIHZhciBhMjAsIGEyMSwgYTIyLCBhMjM7XG4gIHZhciBiMDAsIGIwMSwgYjAyO1xuICB2YXIgYjEwLCBiMTEsIGIxMjtcbiAgdmFyIGIyMCwgYjIxLCBiMjI7XG5cbiAgaWYgKGxlbiA8IGdsTWF0cml4LkVQU0lMT04pIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGxlbiA9IDEgLyBsZW47XG4gIHggKj0gbGVuO1xuICB5ICo9IGxlbjtcbiAgeiAqPSBsZW47XG4gIHMgPSBNYXRoLnNpbihyYWQpO1xuICBjID0gTWF0aC5jb3MocmFkKTtcbiAgdCA9IDEgLSBjO1xuICBhMDAgPSBhWzBdO1xuICBhMDEgPSBhWzFdO1xuICBhMDIgPSBhWzJdO1xuICBhMDMgPSBhWzNdO1xuICBhMTAgPSBhWzRdO1xuICBhMTEgPSBhWzVdO1xuICBhMTIgPSBhWzZdO1xuICBhMTMgPSBhWzddO1xuICBhMjAgPSBhWzhdO1xuICBhMjEgPSBhWzldO1xuICBhMjIgPSBhWzEwXTtcbiAgYTIzID0gYVsxMV07IC8vIENvbnN0cnVjdCB0aGUgZWxlbWVudHMgb2YgdGhlIHJvdGF0aW9uIG1hdHJpeFxuXG4gIGIwMCA9IHggKiB4ICogdCArIGM7XG4gIGIwMSA9IHkgKiB4ICogdCArIHogKiBzO1xuICBiMDIgPSB6ICogeCAqIHQgLSB5ICogcztcbiAgYjEwID0geCAqIHkgKiB0IC0geiAqIHM7XG4gIGIxMSA9IHkgKiB5ICogdCArIGM7XG4gIGIxMiA9IHogKiB5ICogdCArIHggKiBzO1xuICBiMjAgPSB4ICogeiAqIHQgKyB5ICogcztcbiAgYjIxID0geSAqIHogKiB0IC0geCAqIHM7XG4gIGIyMiA9IHogKiB6ICogdCArIGM7IC8vIFBlcmZvcm0gcm90YXRpb24tc3BlY2lmaWMgbWF0cml4IG11bHRpcGxpY2F0aW9uXG5cbiAgb3V0WzBdID0gYTAwICogYjAwICsgYTEwICogYjAxICsgYTIwICogYjAyO1xuICBvdXRbMV0gPSBhMDEgKiBiMDAgKyBhMTEgKiBiMDEgKyBhMjEgKiBiMDI7XG4gIG91dFsyXSA9IGEwMiAqIGIwMCArIGExMiAqIGIwMSArIGEyMiAqIGIwMjtcbiAgb3V0WzNdID0gYTAzICogYjAwICsgYTEzICogYjAxICsgYTIzICogYjAyO1xuICBvdXRbNF0gPSBhMDAgKiBiMTAgKyBhMTAgKiBiMTEgKyBhMjAgKiBiMTI7XG4gIG91dFs1XSA9IGEwMSAqIGIxMCArIGExMSAqIGIxMSArIGEyMSAqIGIxMjtcbiAgb3V0WzZdID0gYTAyICogYjEwICsgYTEyICogYjExICsgYTIyICogYjEyO1xuICBvdXRbN10gPSBhMDMgKiBiMTAgKyBhMTMgKiBiMTEgKyBhMjMgKiBiMTI7XG4gIG91dFs4XSA9IGEwMCAqIGIyMCArIGExMCAqIGIyMSArIGEyMCAqIGIyMjtcbiAgb3V0WzldID0gYTAxICogYjIwICsgYTExICogYjIxICsgYTIxICogYjIyO1xuICBvdXRbMTBdID0gYTAyICogYjIwICsgYTEyICogYjIxICsgYTIyICogYjIyO1xuICBvdXRbMTFdID0gYTAzICogYjIwICsgYTEzICogYjIxICsgYTIzICogYjIyO1xuXG4gIGlmIChhICE9PSBvdXQpIHtcbiAgICAvLyBJZiB0aGUgc291cmNlIGFuZCBkZXN0aW5hdGlvbiBkaWZmZXIsIGNvcHkgdGhlIHVuY2hhbmdlZCBsYXN0IHJvd1xuICAgIG91dFsxMl0gPSBhWzEyXTtcbiAgICBvdXRbMTNdID0gYVsxM107XG4gICAgb3V0WzE0XSA9IGFbMTRdO1xuICAgIG91dFsxNV0gPSBhWzE1XTtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZXMgYSBtYXRyaXggYnkgdGhlIGdpdmVuIGFuZ2xlIGFyb3VuZCB0aGUgWCBheGlzXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBtYXRyaXggdG8gcm90YXRlXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVYKG91dCwgYSwgcmFkKSB7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkKTtcbiAgdmFyIGMgPSBNYXRoLmNvcyhyYWQpO1xuICB2YXIgYTEwID0gYVs0XTtcbiAgdmFyIGExMSA9IGFbNV07XG4gIHZhciBhMTIgPSBhWzZdO1xuICB2YXIgYTEzID0gYVs3XTtcbiAgdmFyIGEyMCA9IGFbOF07XG4gIHZhciBhMjEgPSBhWzldO1xuICB2YXIgYTIyID0gYVsxMF07XG4gIHZhciBhMjMgPSBhWzExXTtcblxuICBpZiAoYSAhPT0gb3V0KSB7XG4gICAgLy8gSWYgdGhlIHNvdXJjZSBhbmQgZGVzdGluYXRpb24gZGlmZmVyLCBjb3B5IHRoZSB1bmNoYW5nZWQgcm93c1xuICAgIG91dFswXSA9IGFbMF07XG4gICAgb3V0WzFdID0gYVsxXTtcbiAgICBvdXRbMl0gPSBhWzJdO1xuICAgIG91dFszXSA9IGFbM107XG4gICAgb3V0WzEyXSA9IGFbMTJdO1xuICAgIG91dFsxM10gPSBhWzEzXTtcbiAgICBvdXRbMTRdID0gYVsxNF07XG4gICAgb3V0WzE1XSA9IGFbMTVdO1xuICB9IC8vIFBlcmZvcm0gYXhpcy1zcGVjaWZpYyBtYXRyaXggbXVsdGlwbGljYXRpb25cblxuXG4gIG91dFs0XSA9IGExMCAqIGMgKyBhMjAgKiBzO1xuICBvdXRbNV0gPSBhMTEgKiBjICsgYTIxICogcztcbiAgb3V0WzZdID0gYTEyICogYyArIGEyMiAqIHM7XG4gIG91dFs3XSA9IGExMyAqIGMgKyBhMjMgKiBzO1xuICBvdXRbOF0gPSBhMjAgKiBjIC0gYTEwICogcztcbiAgb3V0WzldID0gYTIxICogYyAtIGExMSAqIHM7XG4gIG91dFsxMF0gPSBhMjIgKiBjIC0gYTEyICogcztcbiAgb3V0WzExXSA9IGEyMyAqIGMgLSBhMTMgKiBzO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGVzIGEgbWF0cml4IGJ5IHRoZSBnaXZlbiBhbmdsZSBhcm91bmQgdGhlIFkgYXhpc1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgbWF0cml4IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCB0aGUgYW5nbGUgdG8gcm90YXRlIHRoZSBtYXRyaXggYnlcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlWShvdXQsIGEsIHJhZCkge1xuICB2YXIgcyA9IE1hdGguc2luKHJhZCk7XG4gIHZhciBjID0gTWF0aC5jb3MocmFkKTtcbiAgdmFyIGEwMCA9IGFbMF07XG4gIHZhciBhMDEgPSBhWzFdO1xuICB2YXIgYTAyID0gYVsyXTtcbiAgdmFyIGEwMyA9IGFbM107XG4gIHZhciBhMjAgPSBhWzhdO1xuICB2YXIgYTIxID0gYVs5XTtcbiAgdmFyIGEyMiA9IGFbMTBdO1xuICB2YXIgYTIzID0gYVsxMV07XG5cbiAgaWYgKGEgIT09IG91dCkge1xuICAgIC8vIElmIHRoZSBzb3VyY2UgYW5kIGRlc3RpbmF0aW9uIGRpZmZlciwgY29weSB0aGUgdW5jaGFuZ2VkIHJvd3NcbiAgICBvdXRbNF0gPSBhWzRdO1xuICAgIG91dFs1XSA9IGFbNV07XG4gICAgb3V0WzZdID0gYVs2XTtcbiAgICBvdXRbN10gPSBhWzddO1xuICAgIG91dFsxMl0gPSBhWzEyXTtcbiAgICBvdXRbMTNdID0gYVsxM107XG4gICAgb3V0WzE0XSA9IGFbMTRdO1xuICAgIG91dFsxNV0gPSBhWzE1XTtcbiAgfSAvLyBQZXJmb3JtIGF4aXMtc3BlY2lmaWMgbWF0cml4IG11bHRpcGxpY2F0aW9uXG5cblxuICBvdXRbMF0gPSBhMDAgKiBjIC0gYTIwICogcztcbiAgb3V0WzFdID0gYTAxICogYyAtIGEyMSAqIHM7XG4gIG91dFsyXSA9IGEwMiAqIGMgLSBhMjIgKiBzO1xuICBvdXRbM10gPSBhMDMgKiBjIC0gYTIzICogcztcbiAgb3V0WzhdID0gYTAwICogcyArIGEyMCAqIGM7XG4gIG91dFs5XSA9IGEwMSAqIHMgKyBhMjEgKiBjO1xuICBvdXRbMTBdID0gYTAyICogcyArIGEyMiAqIGM7XG4gIG91dFsxMV0gPSBhMDMgKiBzICsgYTIzICogYztcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlcyBhIG1hdHJpeCBieSB0aGUgZ2l2ZW4gYW5nbGUgYXJvdW5kIHRoZSBaIGF4aXNcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIG1hdHJpeCB0byByb3RhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVoob3V0LCBhLCByYWQpIHtcbiAgdmFyIHMgPSBNYXRoLnNpbihyYWQpO1xuICB2YXIgYyA9IE1hdGguY29zKHJhZCk7XG4gIHZhciBhMDAgPSBhWzBdO1xuICB2YXIgYTAxID0gYVsxXTtcbiAgdmFyIGEwMiA9IGFbMl07XG4gIHZhciBhMDMgPSBhWzNdO1xuICB2YXIgYTEwID0gYVs0XTtcbiAgdmFyIGExMSA9IGFbNV07XG4gIHZhciBhMTIgPSBhWzZdO1xuICB2YXIgYTEzID0gYVs3XTtcblxuICBpZiAoYSAhPT0gb3V0KSB7XG4gICAgLy8gSWYgdGhlIHNvdXJjZSBhbmQgZGVzdGluYXRpb24gZGlmZmVyLCBjb3B5IHRoZSB1bmNoYW5nZWQgbGFzdCByb3dcbiAgICBvdXRbOF0gPSBhWzhdO1xuICAgIG91dFs5XSA9IGFbOV07XG4gICAgb3V0WzEwXSA9IGFbMTBdO1xuICAgIG91dFsxMV0gPSBhWzExXTtcbiAgICBvdXRbMTJdID0gYVsxMl07XG4gICAgb3V0WzEzXSA9IGFbMTNdO1xuICAgIG91dFsxNF0gPSBhWzE0XTtcbiAgICBvdXRbMTVdID0gYVsxNV07XG4gIH0gLy8gUGVyZm9ybSBheGlzLXNwZWNpZmljIG1hdHJpeCBtdWx0aXBsaWNhdGlvblxuXG5cbiAgb3V0WzBdID0gYTAwICogYyArIGExMCAqIHM7XG4gIG91dFsxXSA9IGEwMSAqIGMgKyBhMTEgKiBzO1xuICBvdXRbMl0gPSBhMDIgKiBjICsgYTEyICogcztcbiAgb3V0WzNdID0gYTAzICogYyArIGExMyAqIHM7XG4gIG91dFs0XSA9IGExMCAqIGMgLSBhMDAgKiBzO1xuICBvdXRbNV0gPSBhMTEgKiBjIC0gYTAxICogcztcbiAgb3V0WzZdID0gYTEyICogYyAtIGEwMiAqIHM7XG4gIG91dFs3XSA9IGExMyAqIGMgLSBhMDMgKiBzO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gYSB2ZWN0b3IgdHJhbnNsYXRpb25cbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDQudHJhbnNsYXRlKGRlc3QsIGRlc3QsIHZlYyk7XG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHYgVHJhbnNsYXRpb24gdmVjdG9yXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21UcmFuc2xhdGlvbihvdXQsIHYpIHtcbiAgb3V0WzBdID0gMTtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gMTtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMDtcbiAgb3V0WzldID0gMDtcbiAgb3V0WzEwXSA9IDE7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gdlswXTtcbiAgb3V0WzEzXSA9IHZbMV07XG4gIG91dFsxNF0gPSB2WzJdO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIGEgdmVjdG9yIHNjYWxpbmdcbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDQuc2NhbGUoZGVzdCwgZGVzdCwgdmVjKTtcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdiBTY2FsaW5nIHZlY3RvclxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tU2NhbGluZyhvdXQsIHYpIHtcbiAgb3V0WzBdID0gdlswXTtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gdlsxXTtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMDtcbiAgb3V0WzldID0gMDtcbiAgb3V0WzEwXSA9IHZbMl07XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNF0gPSAwO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIGEgZ2l2ZW4gYW5nbGUgYXJvdW5kIGEgZ2l2ZW4gYXhpc1xuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XG4gKlxuICogICAgIG1hdDQuaWRlbnRpdHkoZGVzdCk7XG4gKiAgICAgbWF0NC5yb3RhdGUoZGVzdCwgZGVzdCwgcmFkLCBheGlzKTtcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGF4aXMgdGhlIGF4aXMgdG8gcm90YXRlIGFyb3VuZFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUm90YXRpb24ob3V0LCByYWQsIGF4aXMpIHtcbiAgdmFyIHggPSBheGlzWzBdLFxuICAgICAgeSA9IGF4aXNbMV0sXG4gICAgICB6ID0gYXhpc1syXTtcbiAgdmFyIGxlbiA9IE1hdGguaHlwb3QoeCwgeSwgeik7XG4gIHZhciBzLCBjLCB0O1xuXG4gIGlmIChsZW4gPCBnbE1hdHJpeC5FUFNJTE9OKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBsZW4gPSAxIC8gbGVuO1xuICB4ICo9IGxlbjtcbiAgeSAqPSBsZW47XG4gIHogKj0gbGVuO1xuICBzID0gTWF0aC5zaW4ocmFkKTtcbiAgYyA9IE1hdGguY29zKHJhZCk7XG4gIHQgPSAxIC0gYzsgLy8gUGVyZm9ybSByb3RhdGlvbi1zcGVjaWZpYyBtYXRyaXggbXVsdGlwbGljYXRpb25cblxuICBvdXRbMF0gPSB4ICogeCAqIHQgKyBjO1xuICBvdXRbMV0gPSB5ICogeCAqIHQgKyB6ICogcztcbiAgb3V0WzJdID0geiAqIHggKiB0IC0geSAqIHM7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IHggKiB5ICogdCAtIHogKiBzO1xuICBvdXRbNV0gPSB5ICogeSAqIHQgKyBjO1xuICBvdXRbNl0gPSB6ICogeSAqIHQgKyB4ICogcztcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0geCAqIHogKiB0ICsgeSAqIHM7XG4gIG91dFs5XSA9IHkgKiB6ICogdCAtIHggKiBzO1xuICBvdXRbMTBdID0geiAqIHogKiB0ICsgYztcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSAwO1xuICBvdXRbMTNdID0gMDtcbiAgb3V0WzE0XSA9IDA7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gdGhlIGdpdmVuIGFuZ2xlIGFyb3VuZCB0aGUgWCBheGlzXG4gKiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gKGJ1dCBtdWNoIGZhc3RlciB0aGFuKTpcbiAqXG4gKiAgICAgbWF0NC5pZGVudGl0eShkZXN0KTtcbiAqICAgICBtYXQ0LnJvdGF0ZVgoZGVzdCwgZGVzdCwgcmFkKTtcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tWFJvdGF0aW9uKG91dCwgcmFkKSB7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkKTtcbiAgdmFyIGMgPSBNYXRoLmNvcyhyYWQpOyAvLyBQZXJmb3JtIGF4aXMtc3BlY2lmaWMgbWF0cml4IG11bHRpcGxpY2F0aW9uXG5cbiAgb3V0WzBdID0gMTtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gYztcbiAgb3V0WzZdID0gcztcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMDtcbiAgb3V0WzldID0gLXM7XG4gIG91dFsxMF0gPSBjO1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IDA7XG4gIG91dFsxM10gPSAwO1xuICBvdXRbMTRdID0gMDtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBtYXRyaXggZnJvbSB0aGUgZ2l2ZW4gYW5nbGUgYXJvdW5kIHRoZSBZIGF4aXNcbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDQucm90YXRlWShkZXN0LCBkZXN0LCByYWQpO1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21ZUm90YXRpb24ob3V0LCByYWQpIHtcbiAgdmFyIHMgPSBNYXRoLnNpbihyYWQpO1xuICB2YXIgYyA9IE1hdGguY29zKHJhZCk7IC8vIFBlcmZvcm0gYXhpcy1zcGVjaWZpYyBtYXRyaXggbXVsdGlwbGljYXRpb25cblxuICBvdXRbMF0gPSBjO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAtcztcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gMTtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gcztcbiAgb3V0WzldID0gMDtcbiAgb3V0WzEwXSA9IGM7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNF0gPSAwO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIHRoZSBnaXZlbiBhbmdsZSBhcm91bmQgdGhlIFogYXhpc1xuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XG4gKlxuICogICAgIG1hdDQuaWRlbnRpdHkoZGVzdCk7XG4gKiAgICAgbWF0NC5yb3RhdGVaKGRlc3QsIGRlc3QsIHJhZCk7XG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCB0aGUgYW5nbGUgdG8gcm90YXRlIHRoZSBtYXRyaXggYnlcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVpSb3RhdGlvbihvdXQsIHJhZCkge1xuICB2YXIgcyA9IE1hdGguc2luKHJhZCk7XG4gIHZhciBjID0gTWF0aC5jb3MocmFkKTsgLy8gUGVyZm9ybSBheGlzLXNwZWNpZmljIG1hdHJpeCBtdWx0aXBsaWNhdGlvblxuXG4gIG91dFswXSA9IGM7XG4gIG91dFsxXSA9IHM7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IC1zO1xuICBvdXRbNV0gPSBjO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAwO1xuICBvdXRbOV0gPSAwO1xuICBvdXRbMTBdID0gMTtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSAwO1xuICBvdXRbMTNdID0gMDtcbiAgb3V0WzE0XSA9IDA7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gYSBxdWF0ZXJuaW9uIHJvdGF0aW9uIGFuZCB2ZWN0b3IgdHJhbnNsYXRpb25cbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDQudHJhbnNsYXRlKGRlc3QsIHZlYyk7XG4gKiAgICAgbGV0IHF1YXRNYXQgPSBtYXQ0LmNyZWF0ZSgpO1xuICogICAgIHF1YXQ0LnRvTWF0NChxdWF0LCBxdWF0TWF0KTtcbiAqICAgICBtYXQ0Lm11bHRpcGx5KGRlc3QsIHF1YXRNYXQpO1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7cXVhdDR9IHEgUm90YXRpb24gcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHYgVHJhbnNsYXRpb24gdmVjdG9yXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21Sb3RhdGlvblRyYW5zbGF0aW9uKG91dCwgcSwgdikge1xuICAvLyBRdWF0ZXJuaW9uIG1hdGhcbiAgdmFyIHggPSBxWzBdLFxuICAgICAgeSA9IHFbMV0sXG4gICAgICB6ID0gcVsyXSxcbiAgICAgIHcgPSBxWzNdO1xuICB2YXIgeDIgPSB4ICsgeDtcbiAgdmFyIHkyID0geSArIHk7XG4gIHZhciB6MiA9IHogKyB6O1xuICB2YXIgeHggPSB4ICogeDI7XG4gIHZhciB4eSA9IHggKiB5MjtcbiAgdmFyIHh6ID0geCAqIHoyO1xuICB2YXIgeXkgPSB5ICogeTI7XG4gIHZhciB5eiA9IHkgKiB6MjtcbiAgdmFyIHp6ID0geiAqIHoyO1xuICB2YXIgd3ggPSB3ICogeDI7XG4gIHZhciB3eSA9IHcgKiB5MjtcbiAgdmFyIHd6ID0gdyAqIHoyO1xuICBvdXRbMF0gPSAxIC0gKHl5ICsgenopO1xuICBvdXRbMV0gPSB4eSArIHd6O1xuICBvdXRbMl0gPSB4eiAtIHd5O1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSB4eSAtIHd6O1xuICBvdXRbNV0gPSAxIC0gKHh4ICsgenopO1xuICBvdXRbNl0gPSB5eiArIHd4O1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSB4eiArIHd5O1xuICBvdXRbOV0gPSB5eiAtIHd4O1xuICBvdXRbMTBdID0gMSAtICh4eCArIHl5KTtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSB2WzBdO1xuICBvdXRbMTNdID0gdlsxXTtcbiAgb3V0WzE0XSA9IHZbMl07XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IG1hdDQgZnJvbSBhIGR1YWwgcXVhdC5cbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBNYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSBEdWFsIFF1YXRlcm5pb25cbiAqIEByZXR1cm5zIHttYXQ0fSBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21RdWF0MihvdXQsIGEpIHtcbiAgdmFyIHRyYW5zbGF0aW9uID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMyk7XG4gIHZhciBieCA9IC1hWzBdLFxuICAgICAgYnkgPSAtYVsxXSxcbiAgICAgIGJ6ID0gLWFbMl0sXG4gICAgICBidyA9IGFbM10sXG4gICAgICBheCA9IGFbNF0sXG4gICAgICBheSA9IGFbNV0sXG4gICAgICBheiA9IGFbNl0sXG4gICAgICBhdyA9IGFbN107XG4gIHZhciBtYWduaXR1ZGUgPSBieCAqIGJ4ICsgYnkgKiBieSArIGJ6ICogYnogKyBidyAqIGJ3OyAvL09ubHkgc2NhbGUgaWYgaXQgbWFrZXMgc2Vuc2VcblxuICBpZiAobWFnbml0dWRlID4gMCkge1xuICAgIHRyYW5zbGF0aW9uWzBdID0gKGF4ICogYncgKyBhdyAqIGJ4ICsgYXkgKiBieiAtIGF6ICogYnkpICogMiAvIG1hZ25pdHVkZTtcbiAgICB0cmFuc2xhdGlvblsxXSA9IChheSAqIGJ3ICsgYXcgKiBieSArIGF6ICogYnggLSBheCAqIGJ6KSAqIDIgLyBtYWduaXR1ZGU7XG4gICAgdHJhbnNsYXRpb25bMl0gPSAoYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieCkgKiAyIC8gbWFnbml0dWRlO1xuICB9IGVsc2Uge1xuICAgIHRyYW5zbGF0aW9uWzBdID0gKGF4ICogYncgKyBhdyAqIGJ4ICsgYXkgKiBieiAtIGF6ICogYnkpICogMjtcbiAgICB0cmFuc2xhdGlvblsxXSA9IChheSAqIGJ3ICsgYXcgKiBieSArIGF6ICogYnggLSBheCAqIGJ6KSAqIDI7XG4gICAgdHJhbnNsYXRpb25bMl0gPSAoYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieCkgKiAyO1xuICB9XG5cbiAgZnJvbVJvdGF0aW9uVHJhbnNsYXRpb24ob3V0LCBhLCB0cmFuc2xhdGlvbik7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIHRyYW5zbGF0aW9uIHZlY3RvciBjb21wb25lbnQgb2YgYSB0cmFuc2Zvcm1hdGlvblxuICogIG1hdHJpeC4gSWYgYSBtYXRyaXggaXMgYnVpbHQgd2l0aCBmcm9tUm90YXRpb25UcmFuc2xhdGlvbixcbiAqICB0aGUgcmV0dXJuZWQgdmVjdG9yIHdpbGwgYmUgdGhlIHNhbWUgYXMgdGhlIHRyYW5zbGF0aW9uIHZlY3RvclxuICogIG9yaWdpbmFsbHkgc3VwcGxpZWQuXG4gKiBAcGFyYW0gIHt2ZWMzfSBvdXQgVmVjdG9yIHRvIHJlY2VpdmUgdHJhbnNsYXRpb24gY29tcG9uZW50XG4gKiBAcGFyYW0gIHtSZWFkb25seU1hdDR9IG1hdCBNYXRyaXggdG8gYmUgZGVjb21wb3NlZCAoaW5wdXQpXG4gKiBAcmV0dXJuIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNsYXRpb24ob3V0LCBtYXQpIHtcbiAgb3V0WzBdID0gbWF0WzEyXTtcbiAgb3V0WzFdID0gbWF0WzEzXTtcbiAgb3V0WzJdID0gbWF0WzE0XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgc2NhbGluZyBmYWN0b3IgY29tcG9uZW50IG9mIGEgdHJhbnNmb3JtYXRpb25cbiAqICBtYXRyaXguIElmIGEgbWF0cml4IGlzIGJ1aWx0IHdpdGggZnJvbVJvdGF0aW9uVHJhbnNsYXRpb25TY2FsZVxuICogIHdpdGggYSBub3JtYWxpemVkIFF1YXRlcm5pb24gcGFyYW10ZXIsIHRoZSByZXR1cm5lZCB2ZWN0b3Igd2lsbCBiZVxuICogIHRoZSBzYW1lIGFzIHRoZSBzY2FsaW5nIHZlY3RvclxuICogIG9yaWdpbmFsbHkgc3VwcGxpZWQuXG4gKiBAcGFyYW0gIHt2ZWMzfSBvdXQgVmVjdG9yIHRvIHJlY2VpdmUgc2NhbGluZyBmYWN0b3IgY29tcG9uZW50XG4gKiBAcGFyYW0gIHtSZWFkb25seU1hdDR9IG1hdCBNYXRyaXggdG8gYmUgZGVjb21wb3NlZCAoaW5wdXQpXG4gKiBAcmV0dXJuIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2NhbGluZyhvdXQsIG1hdCkge1xuICB2YXIgbTExID0gbWF0WzBdO1xuICB2YXIgbTEyID0gbWF0WzFdO1xuICB2YXIgbTEzID0gbWF0WzJdO1xuICB2YXIgbTIxID0gbWF0WzRdO1xuICB2YXIgbTIyID0gbWF0WzVdO1xuICB2YXIgbTIzID0gbWF0WzZdO1xuICB2YXIgbTMxID0gbWF0WzhdO1xuICB2YXIgbTMyID0gbWF0WzldO1xuICB2YXIgbTMzID0gbWF0WzEwXTtcbiAgb3V0WzBdID0gTWF0aC5oeXBvdChtMTEsIG0xMiwgbTEzKTtcbiAgb3V0WzFdID0gTWF0aC5oeXBvdChtMjEsIG0yMiwgbTIzKTtcbiAgb3V0WzJdID0gTWF0aC5oeXBvdChtMzEsIG0zMiwgbTMzKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyBhIHF1YXRlcm5pb24gcmVwcmVzZW50aW5nIHRoZSByb3RhdGlvbmFsIGNvbXBvbmVudFxuICogIG9mIGEgdHJhbnNmb3JtYXRpb24gbWF0cml4LiBJZiBhIG1hdHJpeCBpcyBidWlsdCB3aXRoXG4gKiAgZnJvbVJvdGF0aW9uVHJhbnNsYXRpb24sIHRoZSByZXR1cm5lZCBxdWF0ZXJuaW9uIHdpbGwgYmUgdGhlXG4gKiAgc2FtZSBhcyB0aGUgcXVhdGVybmlvbiBvcmlnaW5hbGx5IHN1cHBsaWVkLlxuICogQHBhcmFtIHtxdWF0fSBvdXQgUXVhdGVybmlvbiB0byByZWNlaXZlIHRoZSByb3RhdGlvbiBjb21wb25lbnRcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBtYXQgTWF0cml4IHRvIGJlIGRlY29tcG9zZWQgKGlucHV0KVxuICogQHJldHVybiB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJvdGF0aW9uKG91dCwgbWF0KSB7XG4gIHZhciBzY2FsaW5nID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMyk7XG4gIGdldFNjYWxpbmcoc2NhbGluZywgbWF0KTtcbiAgdmFyIGlzMSA9IDEgLyBzY2FsaW5nWzBdO1xuICB2YXIgaXMyID0gMSAvIHNjYWxpbmdbMV07XG4gIHZhciBpczMgPSAxIC8gc2NhbGluZ1syXTtcbiAgdmFyIHNtMTEgPSBtYXRbMF0gKiBpczE7XG4gIHZhciBzbTEyID0gbWF0WzFdICogaXMyO1xuICB2YXIgc20xMyA9IG1hdFsyXSAqIGlzMztcbiAgdmFyIHNtMjEgPSBtYXRbNF0gKiBpczE7XG4gIHZhciBzbTIyID0gbWF0WzVdICogaXMyO1xuICB2YXIgc20yMyA9IG1hdFs2XSAqIGlzMztcbiAgdmFyIHNtMzEgPSBtYXRbOF0gKiBpczE7XG4gIHZhciBzbTMyID0gbWF0WzldICogaXMyO1xuICB2YXIgc20zMyA9IG1hdFsxMF0gKiBpczM7XG4gIHZhciB0cmFjZSA9IHNtMTEgKyBzbTIyICsgc20zMztcbiAgdmFyIFMgPSAwO1xuXG4gIGlmICh0cmFjZSA+IDApIHtcbiAgICBTID0gTWF0aC5zcXJ0KHRyYWNlICsgMS4wKSAqIDI7XG4gICAgb3V0WzNdID0gMC4yNSAqIFM7XG4gICAgb3V0WzBdID0gKHNtMjMgLSBzbTMyKSAvIFM7XG4gICAgb3V0WzFdID0gKHNtMzEgLSBzbTEzKSAvIFM7XG4gICAgb3V0WzJdID0gKHNtMTIgLSBzbTIxKSAvIFM7XG4gIH0gZWxzZSBpZiAoc20xMSA+IHNtMjIgJiYgc20xMSA+IHNtMzMpIHtcbiAgICBTID0gTWF0aC5zcXJ0KDEuMCArIHNtMTEgLSBzbTIyIC0gc20zMykgKiAyO1xuICAgIG91dFszXSA9IChzbTIzIC0gc20zMikgLyBTO1xuICAgIG91dFswXSA9IDAuMjUgKiBTO1xuICAgIG91dFsxXSA9IChzbTEyICsgc20yMSkgLyBTO1xuICAgIG91dFsyXSA9IChzbTMxICsgc20xMykgLyBTO1xuICB9IGVsc2UgaWYgKHNtMjIgPiBzbTMzKSB7XG4gICAgUyA9IE1hdGguc3FydCgxLjAgKyBzbTIyIC0gc20xMSAtIHNtMzMpICogMjtcbiAgICBvdXRbM10gPSAoc20zMSAtIHNtMTMpIC8gUztcbiAgICBvdXRbMF0gPSAoc20xMiArIHNtMjEpIC8gUztcbiAgICBvdXRbMV0gPSAwLjI1ICogUztcbiAgICBvdXRbMl0gPSAoc20yMyArIHNtMzIpIC8gUztcbiAgfSBlbHNlIHtcbiAgICBTID0gTWF0aC5zcXJ0KDEuMCArIHNtMzMgLSBzbTExIC0gc20yMikgKiAyO1xuICAgIG91dFszXSA9IChzbTEyIC0gc20yMSkgLyBTO1xuICAgIG91dFswXSA9IChzbTMxICsgc20xMykgLyBTO1xuICAgIG91dFsxXSA9IChzbTIzICsgc20zMikgLyBTO1xuICAgIG91dFsyXSA9IDAuMjUgKiBTO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIGEgcXVhdGVybmlvbiByb3RhdGlvbiwgdmVjdG9yIHRyYW5zbGF0aW9uIGFuZCB2ZWN0b3Igc2NhbGVcbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDQudHJhbnNsYXRlKGRlc3QsIHZlYyk7XG4gKiAgICAgbGV0IHF1YXRNYXQgPSBtYXQ0LmNyZWF0ZSgpO1xuICogICAgIHF1YXQ0LnRvTWF0NChxdWF0LCBxdWF0TWF0KTtcbiAqICAgICBtYXQ0Lm11bHRpcGx5KGRlc3QsIHF1YXRNYXQpO1xuICogICAgIG1hdDQuc2NhbGUoZGVzdCwgc2NhbGUpXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtxdWF0NH0gcSBSb3RhdGlvbiBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdiBUcmFuc2xhdGlvbiB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBzIFNjYWxpbmcgdmVjdG9yXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21Sb3RhdGlvblRyYW5zbGF0aW9uU2NhbGUob3V0LCBxLCB2LCBzKSB7XG4gIC8vIFF1YXRlcm5pb24gbWF0aFxuICB2YXIgeCA9IHFbMF0sXG4gICAgICB5ID0gcVsxXSxcbiAgICAgIHogPSBxWzJdLFxuICAgICAgdyA9IHFbM107XG4gIHZhciB4MiA9IHggKyB4O1xuICB2YXIgeTIgPSB5ICsgeTtcbiAgdmFyIHoyID0geiArIHo7XG4gIHZhciB4eCA9IHggKiB4MjtcbiAgdmFyIHh5ID0geCAqIHkyO1xuICB2YXIgeHogPSB4ICogejI7XG4gIHZhciB5eSA9IHkgKiB5MjtcbiAgdmFyIHl6ID0geSAqIHoyO1xuICB2YXIgenogPSB6ICogejI7XG4gIHZhciB3eCA9IHcgKiB4MjtcbiAgdmFyIHd5ID0gdyAqIHkyO1xuICB2YXIgd3ogPSB3ICogejI7XG4gIHZhciBzeCA9IHNbMF07XG4gIHZhciBzeSA9IHNbMV07XG4gIHZhciBzeiA9IHNbMl07XG4gIG91dFswXSA9ICgxIC0gKHl5ICsgenopKSAqIHN4O1xuICBvdXRbMV0gPSAoeHkgKyB3eikgKiBzeDtcbiAgb3V0WzJdID0gKHh6IC0gd3kpICogc3g7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9ICh4eSAtIHd6KSAqIHN5O1xuICBvdXRbNV0gPSAoMSAtICh4eCArIHp6KSkgKiBzeTtcbiAgb3V0WzZdID0gKHl6ICsgd3gpICogc3k7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9ICh4eiArIHd5KSAqIHN6O1xuICBvdXRbOV0gPSAoeXogLSB3eCkgKiBzejtcbiAgb3V0WzEwXSA9ICgxIC0gKHh4ICsgeXkpKSAqIHN6O1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IHZbMF07XG4gIG91dFsxM10gPSB2WzFdO1xuICBvdXRbMTRdID0gdlsyXTtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBtYXRyaXggZnJvbSBhIHF1YXRlcm5pb24gcm90YXRpb24sIHZlY3RvciB0cmFuc2xhdGlvbiBhbmQgdmVjdG9yIHNjYWxlLCByb3RhdGluZyBhbmQgc2NhbGluZyBhcm91bmQgdGhlIGdpdmVuIG9yaWdpblxuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XG4gKlxuICogICAgIG1hdDQuaWRlbnRpdHkoZGVzdCk7XG4gKiAgICAgbWF0NC50cmFuc2xhdGUoZGVzdCwgdmVjKTtcbiAqICAgICBtYXQ0LnRyYW5zbGF0ZShkZXN0LCBvcmlnaW4pO1xuICogICAgIGxldCBxdWF0TWF0ID0gbWF0NC5jcmVhdGUoKTtcbiAqICAgICBxdWF0NC50b01hdDQocXVhdCwgcXVhdE1hdCk7XG4gKiAgICAgbWF0NC5tdWx0aXBseShkZXN0LCBxdWF0TWF0KTtcbiAqICAgICBtYXQ0LnNjYWxlKGRlc3QsIHNjYWxlKVxuICogICAgIG1hdDQudHJhbnNsYXRlKGRlc3QsIG5lZ2F0aXZlT3JpZ2luKTtcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge3F1YXQ0fSBxIFJvdGF0aW9uIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSB2IFRyYW5zbGF0aW9uIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHMgU2NhbGluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBvIFRoZSBvcmlnaW4gdmVjdG9yIGFyb3VuZCB3aGljaCB0byBzY2FsZSBhbmQgcm90YXRlXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21Sb3RhdGlvblRyYW5zbGF0aW9uU2NhbGVPcmlnaW4ob3V0LCBxLCB2LCBzLCBvKSB7XG4gIC8vIFF1YXRlcm5pb24gbWF0aFxuICB2YXIgeCA9IHFbMF0sXG4gICAgICB5ID0gcVsxXSxcbiAgICAgIHogPSBxWzJdLFxuICAgICAgdyA9IHFbM107XG4gIHZhciB4MiA9IHggKyB4O1xuICB2YXIgeTIgPSB5ICsgeTtcbiAgdmFyIHoyID0geiArIHo7XG4gIHZhciB4eCA9IHggKiB4MjtcbiAgdmFyIHh5ID0geCAqIHkyO1xuICB2YXIgeHogPSB4ICogejI7XG4gIHZhciB5eSA9IHkgKiB5MjtcbiAgdmFyIHl6ID0geSAqIHoyO1xuICB2YXIgenogPSB6ICogejI7XG4gIHZhciB3eCA9IHcgKiB4MjtcbiAgdmFyIHd5ID0gdyAqIHkyO1xuICB2YXIgd3ogPSB3ICogejI7XG4gIHZhciBzeCA9IHNbMF07XG4gIHZhciBzeSA9IHNbMV07XG4gIHZhciBzeiA9IHNbMl07XG4gIHZhciBveCA9IG9bMF07XG4gIHZhciBveSA9IG9bMV07XG4gIHZhciBveiA9IG9bMl07XG4gIHZhciBvdXQwID0gKDEgLSAoeXkgKyB6eikpICogc3g7XG4gIHZhciBvdXQxID0gKHh5ICsgd3opICogc3g7XG4gIHZhciBvdXQyID0gKHh6IC0gd3kpICogc3g7XG4gIHZhciBvdXQ0ID0gKHh5IC0gd3opICogc3k7XG4gIHZhciBvdXQ1ID0gKDEgLSAoeHggKyB6eikpICogc3k7XG4gIHZhciBvdXQ2ID0gKHl6ICsgd3gpICogc3k7XG4gIHZhciBvdXQ4ID0gKHh6ICsgd3kpICogc3o7XG4gIHZhciBvdXQ5ID0gKHl6IC0gd3gpICogc3o7XG4gIHZhciBvdXQxMCA9ICgxIC0gKHh4ICsgeXkpKSAqIHN6O1xuICBvdXRbMF0gPSBvdXQwO1xuICBvdXRbMV0gPSBvdXQxO1xuICBvdXRbMl0gPSBvdXQyO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSBvdXQ0O1xuICBvdXRbNV0gPSBvdXQ1O1xuICBvdXRbNl0gPSBvdXQ2O1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSBvdXQ4O1xuICBvdXRbOV0gPSBvdXQ5O1xuICBvdXRbMTBdID0gb3V0MTA7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gdlswXSArIG94IC0gKG91dDAgKiBveCArIG91dDQgKiBveSArIG91dDggKiBveik7XG4gIG91dFsxM10gPSB2WzFdICsgb3kgLSAob3V0MSAqIG94ICsgb3V0NSAqIG95ICsgb3V0OSAqIG96KTtcbiAgb3V0WzE0XSA9IHZbMl0gKyBveiAtIChvdXQyICogb3ggKyBvdXQ2ICogb3kgKyBvdXQxMCAqIG96KTtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgYSA0eDQgbWF0cml4IGZyb20gdGhlIGdpdmVuIHF1YXRlcm5pb25cbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gcSBRdWF0ZXJuaW9uIHRvIGNyZWF0ZSBtYXRyaXggZnJvbVxuICpcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVF1YXQob3V0LCBxKSB7XG4gIHZhciB4ID0gcVswXSxcbiAgICAgIHkgPSBxWzFdLFxuICAgICAgeiA9IHFbMl0sXG4gICAgICB3ID0gcVszXTtcbiAgdmFyIHgyID0geCArIHg7XG4gIHZhciB5MiA9IHkgKyB5O1xuICB2YXIgejIgPSB6ICsgejtcbiAgdmFyIHh4ID0geCAqIHgyO1xuICB2YXIgeXggPSB5ICogeDI7XG4gIHZhciB5eSA9IHkgKiB5MjtcbiAgdmFyIHp4ID0geiAqIHgyO1xuICB2YXIgenkgPSB6ICogeTI7XG4gIHZhciB6eiA9IHogKiB6MjtcbiAgdmFyIHd4ID0gdyAqIHgyO1xuICB2YXIgd3kgPSB3ICogeTI7XG4gIHZhciB3eiA9IHcgKiB6MjtcbiAgb3V0WzBdID0gMSAtIHl5IC0geno7XG4gIG91dFsxXSA9IHl4ICsgd3o7XG4gIG91dFsyXSA9IHp4IC0gd3k7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IHl4IC0gd3o7XG4gIG91dFs1XSA9IDEgLSB4eCAtIHp6O1xuICBvdXRbNl0gPSB6eSArIHd4O1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSB6eCArIHd5O1xuICBvdXRbOV0gPSB6eSAtIHd4O1xuICBvdXRbMTBdID0gMSAtIHh4IC0geXk7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNF0gPSAwO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgZnJ1c3R1bSBtYXRyaXggd2l0aCB0aGUgZ2l2ZW4gYm91bmRzXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCBmcnVzdHVtIG1hdHJpeCB3aWxsIGJlIHdyaXR0ZW4gaW50b1xuICogQHBhcmFtIHtOdW1iZXJ9IGxlZnQgTGVmdCBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtOdW1iZXJ9IHJpZ2h0IFJpZ2h0IGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge051bWJlcn0gYm90dG9tIEJvdHRvbSBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtOdW1iZXJ9IHRvcCBUb3AgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7TnVtYmVyfSBuZWFyIE5lYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7TnVtYmVyfSBmYXIgRmFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZydXN0dW0ob3V0LCBsZWZ0LCByaWdodCwgYm90dG9tLCB0b3AsIG5lYXIsIGZhcikge1xuICB2YXIgcmwgPSAxIC8gKHJpZ2h0IC0gbGVmdCk7XG4gIHZhciB0YiA9IDEgLyAodG9wIC0gYm90dG9tKTtcbiAgdmFyIG5mID0gMSAvIChuZWFyIC0gZmFyKTtcbiAgb3V0WzBdID0gbmVhciAqIDIgKiBybDtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gbmVhciAqIDIgKiB0YjtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gKHJpZ2h0ICsgbGVmdCkgKiBybDtcbiAgb3V0WzldID0gKHRvcCArIGJvdHRvbSkgKiB0YjtcbiAgb3V0WzEwXSA9IChmYXIgKyBuZWFyKSAqIG5mO1xuICBvdXRbMTFdID0gLTE7XG4gIG91dFsxMl0gPSAwO1xuICBvdXRbMTNdID0gMDtcbiAgb3V0WzE0XSA9IGZhciAqIG5lYXIgKiAyICogbmY7XG4gIG91dFsxNV0gPSAwO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBwZXJzcGVjdGl2ZSBwcm9qZWN0aW9uIG1hdHJpeCB3aXRoIHRoZSBnaXZlbiBib3VuZHMuXG4gKiBUaGUgbmVhci9mYXIgY2xpcCBwbGFuZXMgY29ycmVzcG9uZCB0byBhIG5vcm1hbGl6ZWQgZGV2aWNlIGNvb3JkaW5hdGUgWiByYW5nZSBvZiBbLTEsIDFdLFxuICogd2hpY2ggbWF0Y2hlcyBXZWJHTC9PcGVuR0wncyBjbGlwIHZvbHVtZS5cbiAqIFBhc3NpbmcgbnVsbC91bmRlZmluZWQvbm8gdmFsdWUgZm9yIGZhciB3aWxsIGdlbmVyYXRlIGluZmluaXRlIHByb2plY3Rpb24gbWF0cml4LlxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cbiAqIEBwYXJhbSB7bnVtYmVyfSBmb3Z5IFZlcnRpY2FsIGZpZWxkIG9mIHZpZXcgaW4gcmFkaWFuc1xuICogQHBhcmFtIHtudW1iZXJ9IGFzcGVjdCBBc3BlY3QgcmF0aW8uIHR5cGljYWxseSB2aWV3cG9ydCB3aWR0aC9oZWlnaHRcbiAqIEBwYXJhbSB7bnVtYmVyfSBuZWFyIE5lYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSBmYXIgRmFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtLCBjYW4gYmUgbnVsbCBvciBJbmZpbml0eVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBwZXJzcGVjdGl2ZU5PKG91dCwgZm92eSwgYXNwZWN0LCBuZWFyLCBmYXIpIHtcbiAgdmFyIGYgPSAxLjAgLyBNYXRoLnRhbihmb3Z5IC8gMiksXG4gICAgICBuZjtcbiAgb3V0WzBdID0gZiAvIGFzcGVjdDtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gZjtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMDtcbiAgb3V0WzldID0gMDtcbiAgb3V0WzExXSA9IC0xO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNV0gPSAwO1xuXG4gIGlmIChmYXIgIT0gbnVsbCAmJiBmYXIgIT09IEluZmluaXR5KSB7XG4gICAgbmYgPSAxIC8gKG5lYXIgLSBmYXIpO1xuICAgIG91dFsxMF0gPSAoZmFyICsgbmVhcikgKiBuZjtcbiAgICBvdXRbMTRdID0gMiAqIGZhciAqIG5lYXIgKiBuZjtcbiAgfSBlbHNlIHtcbiAgICBvdXRbMTBdID0gLTE7XG4gICAgb3V0WzE0XSA9IC0yICogbmVhcjtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgbWF0NC5wZXJzcGVjdGl2ZU5PfVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBwZXJzcGVjdGl2ZSA9IHBlcnNwZWN0aXZlTk87XG4vKipcbiAqIEdlbmVyYXRlcyBhIHBlcnNwZWN0aXZlIHByb2plY3Rpb24gbWF0cml4IHN1aXRhYmxlIGZvciBXZWJHUFUgd2l0aCB0aGUgZ2l2ZW4gYm91bmRzLlxuICogVGhlIG5lYXIvZmFyIGNsaXAgcGxhbmVzIGNvcnJlc3BvbmQgdG8gYSBub3JtYWxpemVkIGRldmljZSBjb29yZGluYXRlIFogcmFuZ2Ugb2YgWzAsIDFdLFxuICogd2hpY2ggbWF0Y2hlcyBXZWJHUFUvVnVsa2FuL0RpcmVjdFgvTWV0YWwncyBjbGlwIHZvbHVtZS5cbiAqIFBhc3NpbmcgbnVsbC91bmRlZmluZWQvbm8gdmFsdWUgZm9yIGZhciB3aWxsIGdlbmVyYXRlIGluZmluaXRlIHByb2plY3Rpb24gbWF0cml4LlxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cbiAqIEBwYXJhbSB7bnVtYmVyfSBmb3Z5IFZlcnRpY2FsIGZpZWxkIG9mIHZpZXcgaW4gcmFkaWFuc1xuICogQHBhcmFtIHtudW1iZXJ9IGFzcGVjdCBBc3BlY3QgcmF0aW8uIHR5cGljYWxseSB2aWV3cG9ydCB3aWR0aC9oZWlnaHRcbiAqIEBwYXJhbSB7bnVtYmVyfSBuZWFyIE5lYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSBmYXIgRmFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtLCBjYW4gYmUgbnVsbCBvciBJbmZpbml0eVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBwZXJzcGVjdGl2ZVpPKG91dCwgZm92eSwgYXNwZWN0LCBuZWFyLCBmYXIpIHtcbiAgdmFyIGYgPSAxLjAgLyBNYXRoLnRhbihmb3Z5IC8gMiksXG4gICAgICBuZjtcbiAgb3V0WzBdID0gZiAvIGFzcGVjdDtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gZjtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMDtcbiAgb3V0WzldID0gMDtcbiAgb3V0WzExXSA9IC0xO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNV0gPSAwO1xuXG4gIGlmIChmYXIgIT0gbnVsbCAmJiBmYXIgIT09IEluZmluaXR5KSB7XG4gICAgbmYgPSAxIC8gKG5lYXIgLSBmYXIpO1xuICAgIG91dFsxMF0gPSBmYXIgKiBuZjtcbiAgICBvdXRbMTRdID0gZmFyICogbmVhciAqIG5mO1xuICB9IGVsc2Uge1xuICAgIG91dFsxMF0gPSAtMTtcbiAgICBvdXRbMTRdID0gLW5lYXI7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBwZXJzcGVjdGl2ZSBwcm9qZWN0aW9uIG1hdHJpeCB3aXRoIHRoZSBnaXZlbiBmaWVsZCBvZiB2aWV3LlxuICogVGhpcyBpcyBwcmltYXJpbHkgdXNlZnVsIGZvciBnZW5lcmF0aW5nIHByb2plY3Rpb24gbWF0cmljZXMgdG8gYmUgdXNlZFxuICogd2l0aCB0aGUgc3RpbGwgZXhwZXJpZW1lbnRhbCBXZWJWUiBBUEkuXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCBmcnVzdHVtIG1hdHJpeCB3aWxsIGJlIHdyaXR0ZW4gaW50b1xuICogQHBhcmFtIHtPYmplY3R9IGZvdiBPYmplY3QgY29udGFpbmluZyB0aGUgZm9sbG93aW5nIHZhbHVlczogdXBEZWdyZWVzLCBkb3duRGVncmVlcywgbGVmdERlZ3JlZXMsIHJpZ2h0RGVncmVlc1xuICogQHBhcmFtIHtudW1iZXJ9IG5lYXIgTmVhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IGZhciBGYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcGVyc3BlY3RpdmVGcm9tRmllbGRPZlZpZXcob3V0LCBmb3YsIG5lYXIsIGZhcikge1xuICB2YXIgdXBUYW4gPSBNYXRoLnRhbihmb3YudXBEZWdyZWVzICogTWF0aC5QSSAvIDE4MC4wKTtcbiAgdmFyIGRvd25UYW4gPSBNYXRoLnRhbihmb3YuZG93bkRlZ3JlZXMgKiBNYXRoLlBJIC8gMTgwLjApO1xuICB2YXIgbGVmdFRhbiA9IE1hdGgudGFuKGZvdi5sZWZ0RGVncmVlcyAqIE1hdGguUEkgLyAxODAuMCk7XG4gIHZhciByaWdodFRhbiA9IE1hdGgudGFuKGZvdi5yaWdodERlZ3JlZXMgKiBNYXRoLlBJIC8gMTgwLjApO1xuICB2YXIgeFNjYWxlID0gMi4wIC8gKGxlZnRUYW4gKyByaWdodFRhbik7XG4gIHZhciB5U2NhbGUgPSAyLjAgLyAodXBUYW4gKyBkb3duVGFuKTtcbiAgb3V0WzBdID0geFNjYWxlO1xuICBvdXRbMV0gPSAwLjA7XG4gIG91dFsyXSA9IDAuMDtcbiAgb3V0WzNdID0gMC4wO1xuICBvdXRbNF0gPSAwLjA7XG4gIG91dFs1XSA9IHlTY2FsZTtcbiAgb3V0WzZdID0gMC4wO1xuICBvdXRbN10gPSAwLjA7XG4gIG91dFs4XSA9IC0oKGxlZnRUYW4gLSByaWdodFRhbikgKiB4U2NhbGUgKiAwLjUpO1xuICBvdXRbOV0gPSAodXBUYW4gLSBkb3duVGFuKSAqIHlTY2FsZSAqIDAuNTtcbiAgb3V0WzEwXSA9IGZhciAvIChuZWFyIC0gZmFyKTtcbiAgb3V0WzExXSA9IC0xLjA7XG4gIG91dFsxMl0gPSAwLjA7XG4gIG91dFsxM10gPSAwLjA7XG4gIG91dFsxNF0gPSBmYXIgKiBuZWFyIC8gKG5lYXIgLSBmYXIpO1xuICBvdXRbMTVdID0gMC4wO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBvcnRob2dvbmFsIHByb2plY3Rpb24gbWF0cml4IHdpdGggdGhlIGdpdmVuIGJvdW5kcy5cbiAqIFRoZSBuZWFyL2ZhciBjbGlwIHBsYW5lcyBjb3JyZXNwb25kIHRvIGEgbm9ybWFsaXplZCBkZXZpY2UgY29vcmRpbmF0ZSBaIHJhbmdlIG9mIFstMSwgMV0sXG4gKiB3aGljaCBtYXRjaGVzIFdlYkdML09wZW5HTCdzIGNsaXAgdm9sdW1lLlxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cbiAqIEBwYXJhbSB7bnVtYmVyfSBsZWZ0IExlZnQgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSByaWdodCBSaWdodCBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IGJvdHRvbSBCb3R0b20gYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b3AgVG9wIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gbmVhciBOZWFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gZmFyIEZhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBvcnRob05PKG91dCwgbGVmdCwgcmlnaHQsIGJvdHRvbSwgdG9wLCBuZWFyLCBmYXIpIHtcbiAgdmFyIGxyID0gMSAvIChsZWZ0IC0gcmlnaHQpO1xuICB2YXIgYnQgPSAxIC8gKGJvdHRvbSAtIHRvcCk7XG4gIHZhciBuZiA9IDEgLyAobmVhciAtIGZhcik7XG4gIG91dFswXSA9IC0yICogbHI7XG4gIG91dFsxXSA9IDA7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IDA7XG4gIG91dFs1XSA9IC0yICogYnQ7XG4gIG91dFs2XSA9IDA7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IDA7XG4gIG91dFs5XSA9IDA7XG4gIG91dFsxMF0gPSAyICogbmY7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gKGxlZnQgKyByaWdodCkgKiBscjtcbiAgb3V0WzEzXSA9ICh0b3AgKyBib3R0b20pICogYnQ7XG4gIG91dFsxNF0gPSAoZmFyICsgbmVhcikgKiBuZjtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgbWF0NC5vcnRob05PfVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBvcnRobyA9IG9ydGhvTk87XG4vKipcbiAqIEdlbmVyYXRlcyBhIG9ydGhvZ29uYWwgcHJvamVjdGlvbiBtYXRyaXggd2l0aCB0aGUgZ2l2ZW4gYm91bmRzLlxuICogVGhlIG5lYXIvZmFyIGNsaXAgcGxhbmVzIGNvcnJlc3BvbmQgdG8gYSBub3JtYWxpemVkIGRldmljZSBjb29yZGluYXRlIFogcmFuZ2Ugb2YgWzAsIDFdLFxuICogd2hpY2ggbWF0Y2hlcyBXZWJHUFUvVnVsa2FuL0RpcmVjdFgvTWV0YWwncyBjbGlwIHZvbHVtZS5cbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IGZydXN0dW0gbWF0cml4IHdpbGwgYmUgd3JpdHRlbiBpbnRvXG4gKiBAcGFyYW0ge251bWJlcn0gbGVmdCBMZWZ0IGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gcmlnaHQgUmlnaHQgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSBib3R0b20gQm90dG9tIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gdG9wIFRvcCBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IG5lYXIgTmVhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IGZhciBGYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gb3J0aG9aTyhvdXQsIGxlZnQsIHJpZ2h0LCBib3R0b20sIHRvcCwgbmVhciwgZmFyKSB7XG4gIHZhciBsciA9IDEgLyAobGVmdCAtIHJpZ2h0KTtcbiAgdmFyIGJ0ID0gMSAvIChib3R0b20gLSB0b3ApO1xuICB2YXIgbmYgPSAxIC8gKG5lYXIgLSBmYXIpO1xuICBvdXRbMF0gPSAtMiAqIGxyO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAwO1xuICBvdXRbNV0gPSAtMiAqIGJ0O1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAwO1xuICBvdXRbOV0gPSAwO1xuICBvdXRbMTBdID0gbmY7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gKGxlZnQgKyByaWdodCkgKiBscjtcbiAgb3V0WzEzXSA9ICh0b3AgKyBib3R0b20pICogYnQ7XG4gIG91dFsxNF0gPSBuZWFyICogbmY7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBsb29rLWF0IG1hdHJpeCB3aXRoIHRoZSBnaXZlbiBleWUgcG9zaXRpb24sIGZvY2FsIHBvaW50LCBhbmQgdXAgYXhpcy5cbiAqIElmIHlvdSB3YW50IGEgbWF0cml4IHRoYXQgYWN0dWFsbHkgbWFrZXMgYW4gb2JqZWN0IGxvb2sgYXQgYW5vdGhlciBvYmplY3QsIHlvdSBzaG91bGQgdXNlIHRhcmdldFRvIGluc3RlYWQuXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCBmcnVzdHVtIG1hdHJpeCB3aWxsIGJlIHdyaXR0ZW4gaW50b1xuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGV5ZSBQb3NpdGlvbiBvZiB0aGUgdmlld2VyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gY2VudGVyIFBvaW50IHRoZSB2aWV3ZXIgaXMgbG9va2luZyBhdFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHVwIHZlYzMgcG9pbnRpbmcgdXBcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbG9va0F0KG91dCwgZXllLCBjZW50ZXIsIHVwKSB7XG4gIHZhciB4MCwgeDEsIHgyLCB5MCwgeTEsIHkyLCB6MCwgejEsIHoyLCBsZW47XG4gIHZhciBleWV4ID0gZXllWzBdO1xuICB2YXIgZXlleSA9IGV5ZVsxXTtcbiAgdmFyIGV5ZXogPSBleWVbMl07XG4gIHZhciB1cHggPSB1cFswXTtcbiAgdmFyIHVweSA9IHVwWzFdO1xuICB2YXIgdXB6ID0gdXBbMl07XG4gIHZhciBjZW50ZXJ4ID0gY2VudGVyWzBdO1xuICB2YXIgY2VudGVyeSA9IGNlbnRlclsxXTtcbiAgdmFyIGNlbnRlcnogPSBjZW50ZXJbMl07XG5cbiAgaWYgKE1hdGguYWJzKGV5ZXggLSBjZW50ZXJ4KSA8IGdsTWF0cml4LkVQU0lMT04gJiYgTWF0aC5hYnMoZXlleSAtIGNlbnRlcnkpIDwgZ2xNYXRyaXguRVBTSUxPTiAmJiBNYXRoLmFicyhleWV6IC0gY2VudGVyeikgPCBnbE1hdHJpeC5FUFNJTE9OKSB7XG4gICAgcmV0dXJuIGlkZW50aXR5KG91dCk7XG4gIH1cblxuICB6MCA9IGV5ZXggLSBjZW50ZXJ4O1xuICB6MSA9IGV5ZXkgLSBjZW50ZXJ5O1xuICB6MiA9IGV5ZXogLSBjZW50ZXJ6O1xuICBsZW4gPSAxIC8gTWF0aC5oeXBvdCh6MCwgejEsIHoyKTtcbiAgejAgKj0gbGVuO1xuICB6MSAqPSBsZW47XG4gIHoyICo9IGxlbjtcbiAgeDAgPSB1cHkgKiB6MiAtIHVweiAqIHoxO1xuICB4MSA9IHVweiAqIHowIC0gdXB4ICogejI7XG4gIHgyID0gdXB4ICogejEgLSB1cHkgKiB6MDtcbiAgbGVuID0gTWF0aC5oeXBvdCh4MCwgeDEsIHgyKTtcblxuICBpZiAoIWxlbikge1xuICAgIHgwID0gMDtcbiAgICB4MSA9IDA7XG4gICAgeDIgPSAwO1xuICB9IGVsc2Uge1xuICAgIGxlbiA9IDEgLyBsZW47XG4gICAgeDAgKj0gbGVuO1xuICAgIHgxICo9IGxlbjtcbiAgICB4MiAqPSBsZW47XG4gIH1cblxuICB5MCA9IHoxICogeDIgLSB6MiAqIHgxO1xuICB5MSA9IHoyICogeDAgLSB6MCAqIHgyO1xuICB5MiA9IHowICogeDEgLSB6MSAqIHgwO1xuICBsZW4gPSBNYXRoLmh5cG90KHkwLCB5MSwgeTIpO1xuXG4gIGlmICghbGVuKSB7XG4gICAgeTAgPSAwO1xuICAgIHkxID0gMDtcbiAgICB5MiA9IDA7XG4gIH0gZWxzZSB7XG4gICAgbGVuID0gMSAvIGxlbjtcbiAgICB5MCAqPSBsZW47XG4gICAgeTEgKj0gbGVuO1xuICAgIHkyICo9IGxlbjtcbiAgfVxuXG4gIG91dFswXSA9IHgwO1xuICBvdXRbMV0gPSB5MDtcbiAgb3V0WzJdID0gejA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IHgxO1xuICBvdXRbNV0gPSB5MTtcbiAgb3V0WzZdID0gejE7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IHgyO1xuICBvdXRbOV0gPSB5MjtcbiAgb3V0WzEwXSA9IHoyO1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IC0oeDAgKiBleWV4ICsgeDEgKiBleWV5ICsgeDIgKiBleWV6KTtcbiAgb3V0WzEzXSA9IC0oeTAgKiBleWV4ICsgeTEgKiBleWV5ICsgeTIgKiBleWV6KTtcbiAgb3V0WzE0XSA9IC0oejAgKiBleWV4ICsgejEgKiBleWV5ICsgejIgKiBleWV6KTtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdlbmVyYXRlcyBhIG1hdHJpeCB0aGF0IG1ha2VzIHNvbWV0aGluZyBsb29rIGF0IHNvbWV0aGluZyBlbHNlLlxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBleWUgUG9zaXRpb24gb2YgdGhlIHZpZXdlclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGNlbnRlciBQb2ludCB0aGUgdmlld2VyIGlzIGxvb2tpbmcgYXRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSB1cCB2ZWMzIHBvaW50aW5nIHVwXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRhcmdldFRvKG91dCwgZXllLCB0YXJnZXQsIHVwKSB7XG4gIHZhciBleWV4ID0gZXllWzBdLFxuICAgICAgZXlleSA9IGV5ZVsxXSxcbiAgICAgIGV5ZXogPSBleWVbMl0sXG4gICAgICB1cHggPSB1cFswXSxcbiAgICAgIHVweSA9IHVwWzFdLFxuICAgICAgdXB6ID0gdXBbMl07XG4gIHZhciB6MCA9IGV5ZXggLSB0YXJnZXRbMF0sXG4gICAgICB6MSA9IGV5ZXkgLSB0YXJnZXRbMV0sXG4gICAgICB6MiA9IGV5ZXogLSB0YXJnZXRbMl07XG4gIHZhciBsZW4gPSB6MCAqIHowICsgejEgKiB6MSArIHoyICogejI7XG5cbiAgaWYgKGxlbiA+IDApIHtcbiAgICBsZW4gPSAxIC8gTWF0aC5zcXJ0KGxlbik7XG4gICAgejAgKj0gbGVuO1xuICAgIHoxICo9IGxlbjtcbiAgICB6MiAqPSBsZW47XG4gIH1cblxuICB2YXIgeDAgPSB1cHkgKiB6MiAtIHVweiAqIHoxLFxuICAgICAgeDEgPSB1cHogKiB6MCAtIHVweCAqIHoyLFxuICAgICAgeDIgPSB1cHggKiB6MSAtIHVweSAqIHowO1xuICBsZW4gPSB4MCAqIHgwICsgeDEgKiB4MSArIHgyICogeDI7XG5cbiAgaWYgKGxlbiA+IDApIHtcbiAgICBsZW4gPSAxIC8gTWF0aC5zcXJ0KGxlbik7XG4gICAgeDAgKj0gbGVuO1xuICAgIHgxICo9IGxlbjtcbiAgICB4MiAqPSBsZW47XG4gIH1cblxuICBvdXRbMF0gPSB4MDtcbiAgb3V0WzFdID0geDE7XG4gIG91dFsyXSA9IHgyO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSB6MSAqIHgyIC0gejIgKiB4MTtcbiAgb3V0WzVdID0gejIgKiB4MCAtIHowICogeDI7XG4gIG91dFs2XSA9IHowICogeDEgLSB6MSAqIHgwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSB6MDtcbiAgb3V0WzldID0gejE7XG4gIG91dFsxMF0gPSB6MjtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSBleWV4O1xuICBvdXRbMTNdID0gZXlleTtcbiAgb3V0WzE0XSA9IGV5ZXo7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgbWF0NFxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIG1hdHJpeCB0byByZXByZXNlbnQgYXMgYSBzdHJpbmdcbiAqIEByZXR1cm5zIHtTdHJpbmd9IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgbWF0cml4XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN0cihhKSB7XG4gIHJldHVybiBcIm1hdDQoXCIgKyBhWzBdICsgXCIsIFwiICsgYVsxXSArIFwiLCBcIiArIGFbMl0gKyBcIiwgXCIgKyBhWzNdICsgXCIsIFwiICsgYVs0XSArIFwiLCBcIiArIGFbNV0gKyBcIiwgXCIgKyBhWzZdICsgXCIsIFwiICsgYVs3XSArIFwiLCBcIiArIGFbOF0gKyBcIiwgXCIgKyBhWzldICsgXCIsIFwiICsgYVsxMF0gKyBcIiwgXCIgKyBhWzExXSArIFwiLCBcIiArIGFbMTJdICsgXCIsIFwiICsgYVsxM10gKyBcIiwgXCIgKyBhWzE0XSArIFwiLCBcIiArIGFbMTVdICsgXCIpXCI7XG59XG4vKipcbiAqIFJldHVybnMgRnJvYmVuaXVzIG5vcm0gb2YgYSBtYXQ0XG4gKlxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIG1hdHJpeCB0byBjYWxjdWxhdGUgRnJvYmVuaXVzIG5vcm0gb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IEZyb2Jlbml1cyBub3JtXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb2IoYSkge1xuICByZXR1cm4gTWF0aC5oeXBvdChhWzBdLCBhWzFdLCBhWzJdLCBhWzNdLCBhWzRdLCBhWzVdLCBhWzZdLCBhWzddLCBhWzhdLCBhWzldLCBhWzEwXSwgYVsxMV0sIGFbMTJdLCBhWzEzXSwgYVsxNF0sIGFbMTVdKTtcbn1cbi8qKlxuICogQWRkcyB0d28gbWF0NCdzXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICsgYlswXTtcbiAgb3V0WzFdID0gYVsxXSArIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gKyBiWzJdO1xuICBvdXRbM10gPSBhWzNdICsgYlszXTtcbiAgb3V0WzRdID0gYVs0XSArIGJbNF07XG4gIG91dFs1XSA9IGFbNV0gKyBiWzVdO1xuICBvdXRbNl0gPSBhWzZdICsgYls2XTtcbiAgb3V0WzddID0gYVs3XSArIGJbN107XG4gIG91dFs4XSA9IGFbOF0gKyBiWzhdO1xuICBvdXRbOV0gPSBhWzldICsgYls5XTtcbiAgb3V0WzEwXSA9IGFbMTBdICsgYlsxMF07XG4gIG91dFsxMV0gPSBhWzExXSArIGJbMTFdO1xuICBvdXRbMTJdID0gYVsxMl0gKyBiWzEyXTtcbiAgb3V0WzEzXSA9IGFbMTNdICsgYlsxM107XG4gIG91dFsxNF0gPSBhWzE0XSArIGJbMTRdO1xuICBvdXRbMTVdID0gYVsxNV0gKyBiWzE1XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU3VidHJhY3RzIG1hdHJpeCBiIGZyb20gbWF0cml4IGFcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzdWJ0cmFjdChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAtIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gLSBiWzFdO1xuICBvdXRbMl0gPSBhWzJdIC0gYlsyXTtcbiAgb3V0WzNdID0gYVszXSAtIGJbM107XG4gIG91dFs0XSA9IGFbNF0gLSBiWzRdO1xuICBvdXRbNV0gPSBhWzVdIC0gYls1XTtcbiAgb3V0WzZdID0gYVs2XSAtIGJbNl07XG4gIG91dFs3XSA9IGFbN10gLSBiWzddO1xuICBvdXRbOF0gPSBhWzhdIC0gYls4XTtcbiAgb3V0WzldID0gYVs5XSAtIGJbOV07XG4gIG91dFsxMF0gPSBhWzEwXSAtIGJbMTBdO1xuICBvdXRbMTFdID0gYVsxMV0gLSBiWzExXTtcbiAgb3V0WzEyXSA9IGFbMTJdIC0gYlsxMl07XG4gIG91dFsxM10gPSBhWzEzXSAtIGJbMTNdO1xuICBvdXRbMTRdID0gYVsxNF0gLSBiWzE0XTtcbiAgb3V0WzE1XSA9IGFbMTVdIC0gYlsxNV07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE11bHRpcGx5IGVhY2ggZWxlbWVudCBvZiB0aGUgbWF0cml4IGJ5IGEgc2NhbGFyLlxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgbWF0cml4IHRvIHNjYWxlXG4gKiBAcGFyYW0ge051bWJlcn0gYiBhbW91bnQgdG8gc2NhbGUgdGhlIG1hdHJpeCdzIGVsZW1lbnRzIGJ5XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5U2NhbGFyKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICogYjtcbiAgb3V0WzFdID0gYVsxXSAqIGI7XG4gIG91dFsyXSA9IGFbMl0gKiBiO1xuICBvdXRbM10gPSBhWzNdICogYjtcbiAgb3V0WzRdID0gYVs0XSAqIGI7XG4gIG91dFs1XSA9IGFbNV0gKiBiO1xuICBvdXRbNl0gPSBhWzZdICogYjtcbiAgb3V0WzddID0gYVs3XSAqIGI7XG4gIG91dFs4XSA9IGFbOF0gKiBiO1xuICBvdXRbOV0gPSBhWzldICogYjtcbiAgb3V0WzEwXSA9IGFbMTBdICogYjtcbiAgb3V0WzExXSA9IGFbMTFdICogYjtcbiAgb3V0WzEyXSA9IGFbMTJdICogYjtcbiAgb3V0WzEzXSA9IGFbMTNdICogYjtcbiAgb3V0WzE0XSA9IGFbMTRdICogYjtcbiAgb3V0WzE1XSA9IGFbMTVdICogYjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQWRkcyB0d28gbWF0NCdzIGFmdGVyIG11bHRpcGx5aW5nIGVhY2ggZWxlbWVudCBvZiB0aGUgc2Vjb25kIG9wZXJhbmQgYnkgYSBzY2FsYXIgdmFsdWUuXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSBzY2FsZSB0aGUgYW1vdW50IHRvIHNjYWxlIGIncyBlbGVtZW50cyBieSBiZWZvcmUgYWRkaW5nXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5U2NhbGFyQW5kQWRkKG91dCwgYSwgYiwgc2NhbGUpIHtcbiAgb3V0WzBdID0gYVswXSArIGJbMF0gKiBzY2FsZTtcbiAgb3V0WzFdID0gYVsxXSArIGJbMV0gKiBzY2FsZTtcbiAgb3V0WzJdID0gYVsyXSArIGJbMl0gKiBzY2FsZTtcbiAgb3V0WzNdID0gYVszXSArIGJbM10gKiBzY2FsZTtcbiAgb3V0WzRdID0gYVs0XSArIGJbNF0gKiBzY2FsZTtcbiAgb3V0WzVdID0gYVs1XSArIGJbNV0gKiBzY2FsZTtcbiAgb3V0WzZdID0gYVs2XSArIGJbNl0gKiBzY2FsZTtcbiAgb3V0WzddID0gYVs3XSArIGJbN10gKiBzY2FsZTtcbiAgb3V0WzhdID0gYVs4XSArIGJbOF0gKiBzY2FsZTtcbiAgb3V0WzldID0gYVs5XSArIGJbOV0gKiBzY2FsZTtcbiAgb3V0WzEwXSA9IGFbMTBdICsgYlsxMF0gKiBzY2FsZTtcbiAgb3V0WzExXSA9IGFbMTFdICsgYlsxMV0gKiBzY2FsZTtcbiAgb3V0WzEyXSA9IGFbMTJdICsgYlsxMl0gKiBzY2FsZTtcbiAgb3V0WzEzXSA9IGFbMTNdICsgYlsxM10gKiBzY2FsZTtcbiAgb3V0WzE0XSA9IGFbMTRdICsgYlsxNF0gKiBzY2FsZTtcbiAgb3V0WzE1XSA9IGFbMTVdICsgYlsxNV0gKiBzY2FsZTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgbWF0cmljZXMgaGF2ZSBleGFjdGx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uICh3aGVuIGNvbXBhcmVkIHdpdGggPT09KVxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIFRoZSBmaXJzdCBtYXRyaXguXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYiBUaGUgc2Vjb25kIG1hdHJpeC5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSBtYXRyaWNlcyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXhhY3RFcXVhbHMoYSwgYikge1xuICByZXR1cm4gYVswXSA9PT0gYlswXSAmJiBhWzFdID09PSBiWzFdICYmIGFbMl0gPT09IGJbMl0gJiYgYVszXSA9PT0gYlszXSAmJiBhWzRdID09PSBiWzRdICYmIGFbNV0gPT09IGJbNV0gJiYgYVs2XSA9PT0gYls2XSAmJiBhWzddID09PSBiWzddICYmIGFbOF0gPT09IGJbOF0gJiYgYVs5XSA9PT0gYls5XSAmJiBhWzEwXSA9PT0gYlsxMF0gJiYgYVsxMV0gPT09IGJbMTFdICYmIGFbMTJdID09PSBiWzEyXSAmJiBhWzEzXSA9PT0gYlsxM10gJiYgYVsxNF0gPT09IGJbMTRdICYmIGFbMTVdID09PSBiWzE1XTtcbn1cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgbWF0cmljZXMgaGF2ZSBhcHByb3hpbWF0ZWx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIFRoZSBmaXJzdCBtYXRyaXguXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYiBUaGUgc2Vjb25kIG1hdHJpeC5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSBtYXRyaWNlcyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGEsIGIpIHtcbiAgdmFyIGEwID0gYVswXSxcbiAgICAgIGExID0gYVsxXSxcbiAgICAgIGEyID0gYVsyXSxcbiAgICAgIGEzID0gYVszXTtcbiAgdmFyIGE0ID0gYVs0XSxcbiAgICAgIGE1ID0gYVs1XSxcbiAgICAgIGE2ID0gYVs2XSxcbiAgICAgIGE3ID0gYVs3XTtcbiAgdmFyIGE4ID0gYVs4XSxcbiAgICAgIGE5ID0gYVs5XSxcbiAgICAgIGExMCA9IGFbMTBdLFxuICAgICAgYTExID0gYVsxMV07XG4gIHZhciBhMTIgPSBhWzEyXSxcbiAgICAgIGExMyA9IGFbMTNdLFxuICAgICAgYTE0ID0gYVsxNF0sXG4gICAgICBhMTUgPSBhWzE1XTtcbiAgdmFyIGIwID0gYlswXSxcbiAgICAgIGIxID0gYlsxXSxcbiAgICAgIGIyID0gYlsyXSxcbiAgICAgIGIzID0gYlszXTtcbiAgdmFyIGI0ID0gYls0XSxcbiAgICAgIGI1ID0gYls1XSxcbiAgICAgIGI2ID0gYls2XSxcbiAgICAgIGI3ID0gYls3XTtcbiAgdmFyIGI4ID0gYls4XSxcbiAgICAgIGI5ID0gYls5XSxcbiAgICAgIGIxMCA9IGJbMTBdLFxuICAgICAgYjExID0gYlsxMV07XG4gIHZhciBiMTIgPSBiWzEyXSxcbiAgICAgIGIxMyA9IGJbMTNdLFxuICAgICAgYjE0ID0gYlsxNF0sXG4gICAgICBiMTUgPSBiWzE1XTtcbiAgcmV0dXJuIE1hdGguYWJzKGEwIC0gYjApIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEwKSwgTWF0aC5hYnMoYjApKSAmJiBNYXRoLmFicyhhMSAtIGIxKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMSksIE1hdGguYWJzKGIxKSkgJiYgTWF0aC5hYnMoYTIgLSBiMikgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTIpLCBNYXRoLmFicyhiMikpICYmIE1hdGguYWJzKGEzIC0gYjMpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEzKSwgTWF0aC5hYnMoYjMpKSAmJiBNYXRoLmFicyhhNCAtIGI0KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhNCksIE1hdGguYWJzKGI0KSkgJiYgTWF0aC5hYnMoYTUgLSBiNSkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTUpLCBNYXRoLmFicyhiNSkpICYmIE1hdGguYWJzKGE2IC0gYjYpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE2KSwgTWF0aC5hYnMoYjYpKSAmJiBNYXRoLmFicyhhNyAtIGI3KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhNyksIE1hdGguYWJzKGI3KSkgJiYgTWF0aC5hYnMoYTggLSBiOCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTgpLCBNYXRoLmFicyhiOCkpICYmIE1hdGguYWJzKGE5IC0gYjkpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE5KSwgTWF0aC5hYnMoYjkpKSAmJiBNYXRoLmFicyhhMTAgLSBiMTApIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExMCksIE1hdGguYWJzKGIxMCkpICYmIE1hdGguYWJzKGExMSAtIGIxMSkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTExKSwgTWF0aC5hYnMoYjExKSkgJiYgTWF0aC5hYnMoYTEyIC0gYjEyKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMTIpLCBNYXRoLmFicyhiMTIpKSAmJiBNYXRoLmFicyhhMTMgLSBiMTMpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExMyksIE1hdGguYWJzKGIxMykpICYmIE1hdGguYWJzKGExNCAtIGIxNCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTE0KSwgTWF0aC5hYnMoYjE0KSkgJiYgTWF0aC5hYnMoYTE1IC0gYjE1KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMTUpLCBNYXRoLmFicyhiMTUpKTtcbn1cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBtYXQ0Lm11bHRpcGx5fVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBtdWwgPSBtdWx0aXBseTtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBtYXQ0LnN1YnRyYWN0fVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzdWIgPSBzdWJ0cmFjdDsiLCAiaW1wb3J0ICogYXMgZ2xNYXRyaXggZnJvbSBcIi4vY29tbW9uLmpzXCI7XG5pbXBvcnQgKiBhcyBtYXQzIGZyb20gXCIuL21hdDMuanNcIjtcbmltcG9ydCAqIGFzIHZlYzMgZnJvbSBcIi4vdmVjMy5qc1wiO1xuaW1wb3J0ICogYXMgdmVjNCBmcm9tIFwiLi92ZWM0LmpzXCI7XG4vKipcbiAqIFF1YXRlcm5pb25cbiAqIEBtb2R1bGUgcXVhdFxuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBpZGVudGl0eSBxdWF0XG4gKlxuICogQHJldHVybnMge3F1YXR9IGEgbmV3IHF1YXRlcm5pb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKCkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoNCk7XG5cbiAgaWYgKGdsTWF0cml4LkFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgb3V0WzBdID0gMDtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gIH1cblxuICBvdXRbM10gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTZXQgYSBxdWF0IHRvIHRoZSBpZGVudGl0eSBxdWF0ZXJuaW9uXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGlkZW50aXR5KG91dCkge1xuICBvdXRbMF0gPSAwO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTZXRzIGEgcXVhdCBmcm9tIHRoZSBnaXZlbiBhbmdsZSBhbmQgcm90YXRpb24gYXhpcyxcbiAqIHRoZW4gcmV0dXJucyBpdC5cbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBheGlzIHRoZSBheGlzIGFyb3VuZCB3aGljaCB0byByb3RhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIGluIHJhZGlhbnNcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEF4aXNBbmdsZShvdXQsIGF4aXMsIHJhZCkge1xuICByYWQgPSByYWQgKiAwLjU7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkKTtcbiAgb3V0WzBdID0gcyAqIGF4aXNbMF07XG4gIG91dFsxXSA9IHMgKiBheGlzWzFdO1xuICBvdXRbMl0gPSBzICogYXhpc1syXTtcbiAgb3V0WzNdID0gTWF0aC5jb3MocmFkKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogR2V0cyB0aGUgcm90YXRpb24gYXhpcyBhbmQgYW5nbGUgZm9yIGEgZ2l2ZW5cbiAqICBxdWF0ZXJuaW9uLiBJZiBhIHF1YXRlcm5pb24gaXMgY3JlYXRlZCB3aXRoXG4gKiAgc2V0QXhpc0FuZ2xlLCB0aGlzIG1ldGhvZCB3aWxsIHJldHVybiB0aGUgc2FtZVxuICogIHZhbHVlcyBhcyBwcm92aWRpZWQgaW4gdGhlIG9yaWdpbmFsIHBhcmFtZXRlciBsaXN0XG4gKiAgT1IgZnVuY3Rpb25hbGx5IGVxdWl2YWxlbnQgdmFsdWVzLlxuICogRXhhbXBsZTogVGhlIHF1YXRlcm5pb24gZm9ybWVkIGJ5IGF4aXMgWzAsIDAsIDFdIGFuZFxuICogIGFuZ2xlIC05MCBpcyB0aGUgc2FtZSBhcyB0aGUgcXVhdGVybmlvbiBmb3JtZWQgYnlcbiAqICBbMCwgMCwgMV0gYW5kIDI3MC4gVGhpcyBtZXRob2QgZmF2b3JzIHRoZSBsYXR0ZXIuXG4gKiBAcGFyYW0gIHt2ZWMzfSBvdXRfYXhpcyAgVmVjdG9yIHJlY2VpdmluZyB0aGUgYXhpcyBvZiByb3RhdGlvblxuICogQHBhcmFtICB7UmVhZG9ubHlRdWF0fSBxICAgICBRdWF0ZXJuaW9uIHRvIGJlIGRlY29tcG9zZWRcbiAqIEByZXR1cm4ge051bWJlcn0gICAgIEFuZ2xlLCBpbiByYWRpYW5zLCBvZiB0aGUgcm90YXRpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXhpc0FuZ2xlKG91dF9heGlzLCBxKSB7XG4gIHZhciByYWQgPSBNYXRoLmFjb3MocVszXSkgKiAyLjA7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkIC8gMi4wKTtcblxuICBpZiAocyA+IGdsTWF0cml4LkVQU0lMT04pIHtcbiAgICBvdXRfYXhpc1swXSA9IHFbMF0gLyBzO1xuICAgIG91dF9heGlzWzFdID0gcVsxXSAvIHM7XG4gICAgb3V0X2F4aXNbMl0gPSBxWzJdIC8gcztcbiAgfSBlbHNlIHtcbiAgICAvLyBJZiBzIGlzIHplcm8sIHJldHVybiBhbnkgYXhpcyAobm8gcm90YXRpb24gLSBheGlzIGRvZXMgbm90IG1hdHRlcilcbiAgICBvdXRfYXhpc1swXSA9IDE7XG4gICAgb3V0X2F4aXNbMV0gPSAwO1xuICAgIG91dF9heGlzWzJdID0gMDtcbiAgfVxuXG4gIHJldHVybiByYWQ7XG59XG4vKipcbiAqIEdldHMgdGhlIGFuZ3VsYXIgZGlzdGFuY2UgYmV0d2VlbiB0d28gdW5pdCBxdWF0ZXJuaW9uc1xuICpcbiAqIEBwYXJhbSAge1JlYWRvbmx5UXVhdH0gYSAgICAgT3JpZ2luIHVuaXQgcXVhdGVybmlvblxuICogQHBhcmFtICB7UmVhZG9ubHlRdWF0fSBiICAgICBEZXN0aW5hdGlvbiB1bml0IHF1YXRlcm5pb25cbiAqIEByZXR1cm4ge051bWJlcn0gICAgIEFuZ2xlLCBpbiByYWRpYW5zLCBiZXR3ZWVuIHRoZSB0d28gcXVhdGVybmlvbnNcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QW5nbGUoYSwgYikge1xuICB2YXIgZG90cHJvZHVjdCA9IGRvdChhLCBiKTtcbiAgcmV0dXJuIE1hdGguYWNvcygyICogZG90cHJvZHVjdCAqIGRvdHByb2R1Y3QgLSAxKTtcbn1cbi8qKlxuICogTXVsdGlwbGllcyB0d28gcXVhdCdzXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5KG91dCwgYSwgYikge1xuICB2YXIgYXggPSBhWzBdLFxuICAgICAgYXkgPSBhWzFdLFxuICAgICAgYXogPSBhWzJdLFxuICAgICAgYXcgPSBhWzNdO1xuICB2YXIgYnggPSBiWzBdLFxuICAgICAgYnkgPSBiWzFdLFxuICAgICAgYnogPSBiWzJdLFxuICAgICAgYncgPSBiWzNdO1xuICBvdXRbMF0gPSBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5O1xuICBvdXRbMV0gPSBheSAqIGJ3ICsgYXcgKiBieSArIGF6ICogYnggLSBheCAqIGJ6O1xuICBvdXRbMl0gPSBheiAqIGJ3ICsgYXcgKiBieiArIGF4ICogYnkgLSBheSAqIGJ4O1xuICBvdXRbM10gPSBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGVzIGEgcXVhdGVybmlvbiBieSB0aGUgZ2l2ZW4gYW5nbGUgYWJvdXQgdGhlIFggYXhpc1xuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHF1YXQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXQgdG8gcm90YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkIGFuZ2xlIChpbiByYWRpYW5zKSB0byByb3RhdGVcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlWChvdXQsIGEsIHJhZCkge1xuICByYWQgKj0gMC41O1xuICB2YXIgYXggPSBhWzBdLFxuICAgICAgYXkgPSBhWzFdLFxuICAgICAgYXogPSBhWzJdLFxuICAgICAgYXcgPSBhWzNdO1xuICB2YXIgYnggPSBNYXRoLnNpbihyYWQpLFxuICAgICAgYncgPSBNYXRoLmNvcyhyYWQpO1xuICBvdXRbMF0gPSBheCAqIGJ3ICsgYXcgKiBieDtcbiAgb3V0WzFdID0gYXkgKiBidyArIGF6ICogYng7XG4gIG91dFsyXSA9IGF6ICogYncgLSBheSAqIGJ4O1xuICBvdXRbM10gPSBhdyAqIGJ3IC0gYXggKiBieDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlcyBhIHF1YXRlcm5pb24gYnkgdGhlIGdpdmVuIGFuZ2xlIGFib3V0IHRoZSBZIGF4aXNcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCBxdWF0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBxdWF0IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IHJhZCBhbmdsZSAoaW4gcmFkaWFucykgdG8gcm90YXRlXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVkob3V0LCBhLCByYWQpIHtcbiAgcmFkICo9IDAuNTtcbiAgdmFyIGF4ID0gYVswXSxcbiAgICAgIGF5ID0gYVsxXSxcbiAgICAgIGF6ID0gYVsyXSxcbiAgICAgIGF3ID0gYVszXTtcbiAgdmFyIGJ5ID0gTWF0aC5zaW4ocmFkKSxcbiAgICAgIGJ3ID0gTWF0aC5jb3MocmFkKTtcbiAgb3V0WzBdID0gYXggKiBidyAtIGF6ICogYnk7XG4gIG91dFsxXSA9IGF5ICogYncgKyBhdyAqIGJ5O1xuICBvdXRbMl0gPSBheiAqIGJ3ICsgYXggKiBieTtcbiAgb3V0WzNdID0gYXcgKiBidyAtIGF5ICogYnk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZXMgYSBxdWF0ZXJuaW9uIGJ5IHRoZSBnaXZlbiBhbmdsZSBhYm91dCB0aGUgWiBheGlzXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgcXVhdCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdCB0byByb3RhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWQgYW5nbGUgKGluIHJhZGlhbnMpIHRvIHJvdGF0ZVxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVaKG91dCwgYSwgcmFkKSB7XG4gIHJhZCAqPSAwLjU7XG4gIHZhciBheCA9IGFbMF0sXG4gICAgICBheSA9IGFbMV0sXG4gICAgICBheiA9IGFbMl0sXG4gICAgICBhdyA9IGFbM107XG4gIHZhciBieiA9IE1hdGguc2luKHJhZCksXG4gICAgICBidyA9IE1hdGguY29zKHJhZCk7XG4gIG91dFswXSA9IGF4ICogYncgKyBheSAqIGJ6O1xuICBvdXRbMV0gPSBheSAqIGJ3IC0gYXggKiBiejtcbiAgb3V0WzJdID0gYXogKiBidyArIGF3ICogYno7XG4gIG91dFszXSA9IGF3ICogYncgLSBheiAqIGJ6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBXIGNvbXBvbmVudCBvZiBhIHF1YXQgZnJvbSB0aGUgWCwgWSwgYW5kIFogY29tcG9uZW50cy5cbiAqIEFzc3VtZXMgdGhhdCBxdWF0ZXJuaW9uIGlzIDEgdW5pdCBpbiBsZW5ndGguXG4gKiBBbnkgZXhpc3RpbmcgVyBjb21wb25lbnQgd2lsbCBiZSBpZ25vcmVkLlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdCB0byBjYWxjdWxhdGUgVyBjb21wb25lbnQgb2ZcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlVyhvdXQsIGEpIHtcbiAgdmFyIHggPSBhWzBdLFxuICAgICAgeSA9IGFbMV0sXG4gICAgICB6ID0gYVsyXTtcbiAgb3V0WzBdID0geDtcbiAgb3V0WzFdID0geTtcbiAgb3V0WzJdID0gejtcbiAgb3V0WzNdID0gTWF0aC5zcXJ0KE1hdGguYWJzKDEuMCAtIHggKiB4IC0geSAqIHkgLSB6ICogeikpO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGUgdGhlIGV4cG9uZW50aWFsIG9mIGEgdW5pdCBxdWF0ZXJuaW9uLlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdCB0byBjYWxjdWxhdGUgdGhlIGV4cG9uZW50aWFsIG9mXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGV4cChvdXQsIGEpIHtcbiAgdmFyIHggPSBhWzBdLFxuICAgICAgeSA9IGFbMV0sXG4gICAgICB6ID0gYVsyXSxcbiAgICAgIHcgPSBhWzNdO1xuICB2YXIgciA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5ICsgeiAqIHopO1xuICB2YXIgZXQgPSBNYXRoLmV4cCh3KTtcbiAgdmFyIHMgPSByID4gMCA/IGV0ICogTWF0aC5zaW4ocikgLyByIDogMDtcbiAgb3V0WzBdID0geCAqIHM7XG4gIG91dFsxXSA9IHkgKiBzO1xuICBvdXRbMl0gPSB6ICogcztcbiAgb3V0WzNdID0gZXQgKiBNYXRoLmNvcyhyKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlIHRoZSBuYXR1cmFsIGxvZ2FyaXRobSBvZiBhIHVuaXQgcXVhdGVybmlvbi5cbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXQgdG8gY2FsY3VsYXRlIHRoZSBleHBvbmVudGlhbCBvZlxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsbihvdXQsIGEpIHtcbiAgdmFyIHggPSBhWzBdLFxuICAgICAgeSA9IGFbMV0sXG4gICAgICB6ID0gYVsyXSxcbiAgICAgIHcgPSBhWzNdO1xuICB2YXIgciA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5ICsgeiAqIHopO1xuICB2YXIgdCA9IHIgPiAwID8gTWF0aC5hdGFuMihyLCB3KSAvIHIgOiAwO1xuICBvdXRbMF0gPSB4ICogdDtcbiAgb3V0WzFdID0geSAqIHQ7XG4gIG91dFsyXSA9IHogKiB0O1xuICBvdXRbM10gPSAwLjUgKiBNYXRoLmxvZyh4ICogeCArIHkgKiB5ICsgeiAqIHogKyB3ICogdyk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZSB0aGUgc2NhbGFyIHBvd2VyIG9mIGEgdW5pdCBxdWF0ZXJuaW9uLlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdCB0byBjYWxjdWxhdGUgdGhlIGV4cG9uZW50aWFsIG9mXG4gKiBAcGFyYW0ge051bWJlcn0gYiBhbW91bnQgdG8gc2NhbGUgdGhlIHF1YXRlcm5pb24gYnlcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcG93KG91dCwgYSwgYikge1xuICBsbihvdXQsIGEpO1xuICBzY2FsZShvdXQsIG91dCwgYik7XG4gIGV4cChvdXQsIG91dCk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFBlcmZvcm1zIGEgc3BoZXJpY2FsIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHF1YXRcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50LCBpbiB0aGUgcmFuZ2UgWzAtMV0sIGJldHdlZW4gdGhlIHR3byBpbnB1dHNcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2xlcnAob3V0LCBhLCBiLCB0KSB7XG4gIC8vIGJlbmNobWFya3M6XG4gIC8vICAgIGh0dHA6Ly9qc3BlcmYuY29tL3F1YXRlcm5pb24tc2xlcnAtaW1wbGVtZW50YXRpb25zXG4gIHZhciBheCA9IGFbMF0sXG4gICAgICBheSA9IGFbMV0sXG4gICAgICBheiA9IGFbMl0sXG4gICAgICBhdyA9IGFbM107XG4gIHZhciBieCA9IGJbMF0sXG4gICAgICBieSA9IGJbMV0sXG4gICAgICBieiA9IGJbMl0sXG4gICAgICBidyA9IGJbM107XG4gIHZhciBvbWVnYSwgY29zb20sIHNpbm9tLCBzY2FsZTAsIHNjYWxlMTsgLy8gY2FsYyBjb3NpbmVcblxuICBjb3NvbSA9IGF4ICogYnggKyBheSAqIGJ5ICsgYXogKiBieiArIGF3ICogYnc7IC8vIGFkanVzdCBzaWducyAoaWYgbmVjZXNzYXJ5KVxuXG4gIGlmIChjb3NvbSA8IDAuMCkge1xuICAgIGNvc29tID0gLWNvc29tO1xuICAgIGJ4ID0gLWJ4O1xuICAgIGJ5ID0gLWJ5O1xuICAgIGJ6ID0gLWJ6O1xuICAgIGJ3ID0gLWJ3O1xuICB9IC8vIGNhbGN1bGF0ZSBjb2VmZmljaWVudHNcblxuXG4gIGlmICgxLjAgLSBjb3NvbSA+IGdsTWF0cml4LkVQU0lMT04pIHtcbiAgICAvLyBzdGFuZGFyZCBjYXNlIChzbGVycClcbiAgICBvbWVnYSA9IE1hdGguYWNvcyhjb3NvbSk7XG4gICAgc2lub20gPSBNYXRoLnNpbihvbWVnYSk7XG4gICAgc2NhbGUwID0gTWF0aC5zaW4oKDEuMCAtIHQpICogb21lZ2EpIC8gc2lub207XG4gICAgc2NhbGUxID0gTWF0aC5zaW4odCAqIG9tZWdhKSAvIHNpbm9tO1xuICB9IGVsc2Uge1xuICAgIC8vIFwiZnJvbVwiIGFuZCBcInRvXCIgcXVhdGVybmlvbnMgYXJlIHZlcnkgY2xvc2VcbiAgICAvLyAgLi4uIHNvIHdlIGNhbiBkbyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uXG4gICAgc2NhbGUwID0gMS4wIC0gdDtcbiAgICBzY2FsZTEgPSB0O1xuICB9IC8vIGNhbGN1bGF0ZSBmaW5hbCB2YWx1ZXNcblxuXG4gIG91dFswXSA9IHNjYWxlMCAqIGF4ICsgc2NhbGUxICogYng7XG4gIG91dFsxXSA9IHNjYWxlMCAqIGF5ICsgc2NhbGUxICogYnk7XG4gIG91dFsyXSA9IHNjYWxlMCAqIGF6ICsgc2NhbGUxICogYno7XG4gIG91dFszXSA9IHNjYWxlMCAqIGF3ICsgc2NhbGUxICogYnc7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdlbmVyYXRlcyBhIHJhbmRvbSB1bml0IHF1YXRlcm5pb25cbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tKG91dCkge1xuICAvLyBJbXBsZW1lbnRhdGlvbiBvZiBodHRwOi8vcGxhbm5pbmcuY3MudWl1Yy5lZHUvbm9kZTE5OC5odG1sXG4gIC8vIFRPRE86IENhbGxpbmcgcmFuZG9tIDMgdGltZXMgaXMgcHJvYmFibHkgbm90IHRoZSBmYXN0ZXN0IHNvbHV0aW9uXG4gIHZhciB1MSA9IGdsTWF0cml4LlJBTkRPTSgpO1xuICB2YXIgdTIgPSBnbE1hdHJpeC5SQU5ET00oKTtcbiAgdmFyIHUzID0gZ2xNYXRyaXguUkFORE9NKCk7XG4gIHZhciBzcXJ0MU1pbnVzVTEgPSBNYXRoLnNxcnQoMSAtIHUxKTtcbiAgdmFyIHNxcnRVMSA9IE1hdGguc3FydCh1MSk7XG4gIG91dFswXSA9IHNxcnQxTWludXNVMSAqIE1hdGguc2luKDIuMCAqIE1hdGguUEkgKiB1Mik7XG4gIG91dFsxXSA9IHNxcnQxTWludXNVMSAqIE1hdGguY29zKDIuMCAqIE1hdGguUEkgKiB1Mik7XG4gIG91dFsyXSA9IHNxcnRVMSAqIE1hdGguc2luKDIuMCAqIE1hdGguUEkgKiB1Myk7XG4gIG91dFszXSA9IHNxcnRVMSAqIE1hdGguY29zKDIuMCAqIE1hdGguUEkgKiB1Myk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGludmVyc2Ugb2YgYSBxdWF0XG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBxdWF0IHRvIGNhbGN1bGF0ZSBpbnZlcnNlIG9mXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGludmVydChvdXQsIGEpIHtcbiAgdmFyIGEwID0gYVswXSxcbiAgICAgIGExID0gYVsxXSxcbiAgICAgIGEyID0gYVsyXSxcbiAgICAgIGEzID0gYVszXTtcbiAgdmFyIGRvdCA9IGEwICogYTAgKyBhMSAqIGExICsgYTIgKiBhMiArIGEzICogYTM7XG4gIHZhciBpbnZEb3QgPSBkb3QgPyAxLjAgLyBkb3QgOiAwOyAvLyBUT0RPOiBXb3VsZCBiZSBmYXN0ZXIgdG8gcmV0dXJuIFswLDAsMCwwXSBpbW1lZGlhdGVseSBpZiBkb3QgPT0gMFxuXG4gIG91dFswXSA9IC1hMCAqIGludkRvdDtcbiAgb3V0WzFdID0gLWExICogaW52RG90O1xuICBvdXRbMl0gPSAtYTIgKiBpbnZEb3Q7XG4gIG91dFszXSA9IGEzICogaW52RG90O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBjb25qdWdhdGUgb2YgYSBxdWF0XG4gKiBJZiB0aGUgcXVhdGVybmlvbiBpcyBub3JtYWxpemVkLCB0aGlzIGZ1bmN0aW9uIGlzIGZhc3RlciB0aGFuIHF1YXQuaW52ZXJzZSBhbmQgcHJvZHVjZXMgdGhlIHNhbWUgcmVzdWx0LlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdCB0byBjYWxjdWxhdGUgY29uanVnYXRlIG9mXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbmp1Z2F0ZShvdXQsIGEpIHtcbiAgb3V0WzBdID0gLWFbMF07XG4gIG91dFsxXSA9IC1hWzFdO1xuICBvdXRbMl0gPSAtYVsyXTtcbiAgb3V0WzNdID0gYVszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIHF1YXRlcm5pb24gZnJvbSB0aGUgZ2l2ZW4gM3gzIHJvdGF0aW9uIG1hdHJpeC5cbiAqXG4gKiBOT1RFOiBUaGUgcmVzdWx0YW50IHF1YXRlcm5pb24gaXMgbm90IG5vcm1hbGl6ZWQsIHNvIHlvdSBzaG91bGQgYmUgc3VyZVxuICogdG8gcmVub3JtYWxpemUgdGhlIHF1YXRlcm5pb24geW91cnNlbGYgd2hlcmUgbmVjZXNzYXJ5LlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IG0gcm90YXRpb24gbWF0cml4XG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbU1hdDMob3V0LCBtKSB7XG4gIC8vIEFsZ29yaXRobSBpbiBLZW4gU2hvZW1ha2UncyBhcnRpY2xlIGluIDE5ODcgU0lHR1JBUEggY291cnNlIG5vdGVzXG4gIC8vIGFydGljbGUgXCJRdWF0ZXJuaW9uIENhbGN1bHVzIGFuZCBGYXN0IEFuaW1hdGlvblwiLlxuICB2YXIgZlRyYWNlID0gbVswXSArIG1bNF0gKyBtWzhdO1xuICB2YXIgZlJvb3Q7XG5cbiAgaWYgKGZUcmFjZSA+IDAuMCkge1xuICAgIC8vIHx3fCA+IDEvMiwgbWF5IGFzIHdlbGwgY2hvb3NlIHcgPiAxLzJcbiAgICBmUm9vdCA9IE1hdGguc3FydChmVHJhY2UgKyAxLjApOyAvLyAyd1xuXG4gICAgb3V0WzNdID0gMC41ICogZlJvb3Q7XG4gICAgZlJvb3QgPSAwLjUgLyBmUm9vdDsgLy8gMS8oNHcpXG5cbiAgICBvdXRbMF0gPSAobVs1XSAtIG1bN10pICogZlJvb3Q7XG4gICAgb3V0WzFdID0gKG1bNl0gLSBtWzJdKSAqIGZSb290O1xuICAgIG91dFsyXSA9IChtWzFdIC0gbVszXSkgKiBmUm9vdDtcbiAgfSBlbHNlIHtcbiAgICAvLyB8d3wgPD0gMS8yXG4gICAgdmFyIGkgPSAwO1xuICAgIGlmIChtWzRdID4gbVswXSkgaSA9IDE7XG4gICAgaWYgKG1bOF0gPiBtW2kgKiAzICsgaV0pIGkgPSAyO1xuICAgIHZhciBqID0gKGkgKyAxKSAlIDM7XG4gICAgdmFyIGsgPSAoaSArIDIpICUgMztcbiAgICBmUm9vdCA9IE1hdGguc3FydChtW2kgKiAzICsgaV0gLSBtW2ogKiAzICsgal0gLSBtW2sgKiAzICsga10gKyAxLjApO1xuICAgIG91dFtpXSA9IDAuNSAqIGZSb290O1xuICAgIGZSb290ID0gMC41IC8gZlJvb3Q7XG4gICAgb3V0WzNdID0gKG1baiAqIDMgKyBrXSAtIG1bayAqIDMgKyBqXSkgKiBmUm9vdDtcbiAgICBvdXRbal0gPSAobVtqICogMyArIGldICsgbVtpICogMyArIGpdKSAqIGZSb290O1xuICAgIG91dFtrXSA9IChtW2sgKiAzICsgaV0gKyBtW2kgKiAzICsga10pICogZlJvb3Q7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgcXVhdGVybmlvbiBmcm9tIHRoZSBnaXZlbiBldWxlciBhbmdsZSB4LCB5LCB6LlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHt4fSBBbmdsZSB0byByb3RhdGUgYXJvdW5kIFggYXhpcyBpbiBkZWdyZWVzLlxuICogQHBhcmFtIHt5fSBBbmdsZSB0byByb3RhdGUgYXJvdW5kIFkgYXhpcyBpbiBkZWdyZWVzLlxuICogQHBhcmFtIHt6fSBBbmdsZSB0byByb3RhdGUgYXJvdW5kIFogYXhpcyBpbiBkZWdyZWVzLlxuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21FdWxlcihvdXQsIHgsIHksIHopIHtcbiAgdmFyIGhhbGZUb1JhZCA9IDAuNSAqIE1hdGguUEkgLyAxODAuMDtcbiAgeCAqPSBoYWxmVG9SYWQ7XG4gIHkgKj0gaGFsZlRvUmFkO1xuICB6ICo9IGhhbGZUb1JhZDtcbiAgdmFyIHN4ID0gTWF0aC5zaW4oeCk7XG4gIHZhciBjeCA9IE1hdGguY29zKHgpO1xuICB2YXIgc3kgPSBNYXRoLnNpbih5KTtcbiAgdmFyIGN5ID0gTWF0aC5jb3MoeSk7XG4gIHZhciBzeiA9IE1hdGguc2luKHopO1xuICB2YXIgY3ogPSBNYXRoLmNvcyh6KTtcbiAgb3V0WzBdID0gc3ggKiBjeSAqIGN6IC0gY3ggKiBzeSAqIHN6O1xuICBvdXRbMV0gPSBjeCAqIHN5ICogY3ogKyBzeCAqIGN5ICogc3o7XG4gIG91dFsyXSA9IGN4ICogY3kgKiBzeiAtIHN4ICogc3kgKiBjejtcbiAgb3V0WzNdID0gY3ggKiBjeSAqIGN6ICsgc3ggKiBzeSAqIHN6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgcXVhdGVuaW9uXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgdmVjdG9yIHRvIHJlcHJlc2VudCBhcyBhIHN0cmluZ1xuICogQHJldHVybnMge1N0cmluZ30gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB2ZWN0b3JcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3RyKGEpIHtcbiAgcmV0dXJuIFwicXVhdChcIiArIGFbMF0gKyBcIiwgXCIgKyBhWzFdICsgXCIsIFwiICsgYVsyXSArIFwiLCBcIiArIGFbM10gKyBcIilcIjtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBxdWF0IGluaXRpYWxpemVkIHdpdGggdmFsdWVzIGZyb20gYW4gZXhpc3RpbmcgcXVhdGVybmlvblxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXRlcm5pb24gdG8gY2xvbmVcbiAqIEByZXR1cm5zIHtxdWF0fSBhIG5ldyBxdWF0ZXJuaW9uXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGNsb25lID0gdmVjNC5jbG9uZTtcbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBxdWF0IGluaXRpYWxpemVkIHdpdGggdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHogWiBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB3IFcgY29tcG9uZW50XG4gKiBAcmV0dXJucyB7cXVhdH0gYSBuZXcgcXVhdGVybmlvblxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBmcm9tVmFsdWVzID0gdmVjNC5mcm9tVmFsdWVzO1xuLyoqXG4gKiBDb3B5IHRoZSB2YWx1ZXMgZnJvbSBvbmUgcXVhdCB0byBhbm90aGVyXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB0aGUgc291cmNlIHF1YXRlcm5pb25cbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgY29weSA9IHZlYzQuY29weTtcbi8qKlxuICogU2V0IHRoZSBjb21wb25lbnRzIG9mIGEgcXVhdCB0byB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge051bWJlcn0geCBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkgWSBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB6IFogY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0gdyBXIGNvbXBvbmVudFxuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzZXQgPSB2ZWM0LnNldDtcbi8qKlxuICogQWRkcyB0d28gcXVhdCdzXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGFkZCA9IHZlYzQuYWRkO1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHF1YXQubXVsdGlwbHl9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIG11bCA9IG11bHRpcGx5O1xuLyoqXG4gKiBTY2FsZXMgYSBxdWF0IGJ5IGEgc2NhbGFyIG51bWJlclxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB0aGUgdmVjdG9yIHRvIHNjYWxlXG4gKiBAcGFyYW0ge051bWJlcn0gYiBhbW91bnQgdG8gc2NhbGUgdGhlIHZlY3RvciBieVxuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzY2FsZSA9IHZlYzQuc2NhbGU7XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGRvdCBwcm9kdWN0IG9mIHR3byBxdWF0J3NcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkb3QgcHJvZHVjdCBvZiBhIGFuZCBiXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGRvdCA9IHZlYzQuZG90O1xuLyoqXG4gKiBQZXJmb3JtcyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHF1YXQnc1xuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHQgaW50ZXJwb2xhdGlvbiBhbW91bnQsIGluIHRoZSByYW5nZSBbMC0xXSwgYmV0d2VlbiB0aGUgdHdvIGlucHV0c1xuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBsZXJwID0gdmVjNC5sZXJwO1xuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBsZW5ndGggb2YgYSBxdWF0XG4gKlxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgdmVjdG9yIHRvIGNhbGN1bGF0ZSBsZW5ndGggb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGxlbmd0aCBvZiBhXG4gKi9cblxuZXhwb3J0IHZhciBsZW5ndGggPSB2ZWM0Lmxlbmd0aDtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBxdWF0Lmxlbmd0aH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgbGVuID0gbGVuZ3RoO1xuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBzcXVhcmVkIGxlbmd0aCBvZiBhIHF1YXRcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB2ZWN0b3IgdG8gY2FsY3VsYXRlIHNxdWFyZWQgbGVuZ3RoIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBzcXVhcmVkIGxlbmd0aCBvZiBhXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHNxdWFyZWRMZW5ndGggPSB2ZWM0LnNxdWFyZWRMZW5ndGg7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgcXVhdC5zcXVhcmVkTGVuZ3RofVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzcXJMZW4gPSBzcXVhcmVkTGVuZ3RoO1xuLyoqXG4gKiBOb3JtYWxpemUgYSBxdWF0XG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBxdWF0ZXJuaW9uIHRvIG5vcm1hbGl6ZVxuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBub3JtYWxpemUgPSB2ZWM0Lm5vcm1hbGl6ZTtcbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgcXVhdGVybmlvbnMgaGF2ZSBleGFjdGx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uICh3aGVuIGNvbXBhcmVkIHdpdGggPT09KVxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIFRoZSBmaXJzdCBxdWF0ZXJuaW9uLlxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgVGhlIHNlY29uZCBxdWF0ZXJuaW9uLlxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhlIHZlY3RvcnMgYXJlIGVxdWFsLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cblxuZXhwb3J0IHZhciBleGFjdEVxdWFscyA9IHZlYzQuZXhhY3RFcXVhbHM7XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIHF1YXRlcm5pb25zIGhhdmUgYXBwcm94aW1hdGVseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBUaGUgZmlyc3QgdmVjdG9yLlxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgVGhlIHNlY29uZCB2ZWN0b3IuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmVjdG9ycyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgdmFyIGVxdWFscyA9IHZlYzQuZXF1YWxzO1xuLyoqXG4gKiBTZXRzIGEgcXVhdGVybmlvbiB0byByZXByZXNlbnQgdGhlIHNob3J0ZXN0IHJvdGF0aW9uIGZyb20gb25lXG4gKiB2ZWN0b3IgdG8gYW5vdGhlci5cbiAqXG4gKiBCb3RoIHZlY3RvcnMgYXJlIGFzc3VtZWQgdG8gYmUgdW5pdCBsZW5ndGguXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uLlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGluaXRpYWwgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgZGVzdGluYXRpb24gdmVjdG9yXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IHZhciByb3RhdGlvblRvID0gZnVuY3Rpb24gKCkge1xuICB2YXIgdG1wdmVjMyA9IHZlYzMuY3JlYXRlKCk7XG4gIHZhciB4VW5pdFZlYzMgPSB2ZWMzLmZyb21WYWx1ZXMoMSwgMCwgMCk7XG4gIHZhciB5VW5pdFZlYzMgPSB2ZWMzLmZyb21WYWx1ZXMoMCwgMSwgMCk7XG4gIHJldHVybiBmdW5jdGlvbiAob3V0LCBhLCBiKSB7XG4gICAgdmFyIGRvdCA9IHZlYzMuZG90KGEsIGIpO1xuXG4gICAgaWYgKGRvdCA8IC0wLjk5OTk5OSkge1xuICAgICAgdmVjMy5jcm9zcyh0bXB2ZWMzLCB4VW5pdFZlYzMsIGEpO1xuICAgICAgaWYgKHZlYzMubGVuKHRtcHZlYzMpIDwgMC4wMDAwMDEpIHZlYzMuY3Jvc3ModG1wdmVjMywgeVVuaXRWZWMzLCBhKTtcbiAgICAgIHZlYzMubm9ybWFsaXplKHRtcHZlYzMsIHRtcHZlYzMpO1xuICAgICAgc2V0QXhpc0FuZ2xlKG91dCwgdG1wdmVjMywgTWF0aC5QSSk7XG4gICAgICByZXR1cm4gb3V0O1xuICAgIH0gZWxzZSBpZiAoZG90ID4gMC45OTk5OTkpIHtcbiAgICAgIG91dFswXSA9IDA7XG4gICAgICBvdXRbMV0gPSAwO1xuICAgICAgb3V0WzJdID0gMDtcbiAgICAgIG91dFszXSA9IDE7XG4gICAgICByZXR1cm4gb3V0O1xuICAgIH0gZWxzZSB7XG4gICAgICB2ZWMzLmNyb3NzKHRtcHZlYzMsIGEsIGIpO1xuICAgICAgb3V0WzBdID0gdG1wdmVjM1swXTtcbiAgICAgIG91dFsxXSA9IHRtcHZlYzNbMV07XG4gICAgICBvdXRbMl0gPSB0bXB2ZWMzWzJdO1xuICAgICAgb3V0WzNdID0gMSArIGRvdDtcbiAgICAgIHJldHVybiBub3JtYWxpemUob3V0LCBvdXQpO1xuICAgIH1cbiAgfTtcbn0oKTtcbi8qKlxuICogUGVyZm9ybXMgYSBzcGhlcmljYWwgbGluZWFyIGludGVycG9sYXRpb24gd2l0aCB0d28gY29udHJvbCBwb2ludHNcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBjIHRoZSB0aGlyZCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gZCB0aGUgZm91cnRoIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50LCBpbiB0aGUgcmFuZ2UgWzAtMV0sIGJldHdlZW4gdGhlIHR3byBpbnB1dHNcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgdmFyIHNxbGVycCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHRlbXAxID0gY3JlYXRlKCk7XG4gIHZhciB0ZW1wMiA9IGNyZWF0ZSgpO1xuICByZXR1cm4gZnVuY3Rpb24gKG91dCwgYSwgYiwgYywgZCwgdCkge1xuICAgIHNsZXJwKHRlbXAxLCBhLCBkLCB0KTtcbiAgICBzbGVycCh0ZW1wMiwgYiwgYywgdCk7XG4gICAgc2xlcnAob3V0LCB0ZW1wMSwgdGVtcDIsIDIgKiB0ICogKDEgLSB0KSk7XG4gICAgcmV0dXJuIG91dDtcbiAgfTtcbn0oKTtcbi8qKlxuICogU2V0cyB0aGUgc3BlY2lmaWVkIHF1YXRlcm5pb24gd2l0aCB2YWx1ZXMgY29ycmVzcG9uZGluZyB0byB0aGUgZ2l2ZW5cbiAqIGF4ZXMuIEVhY2ggYXhpcyBpcyBhIHZlYzMgYW5kIGlzIGV4cGVjdGVkIHRvIGJlIHVuaXQgbGVuZ3RoIGFuZFxuICogcGVycGVuZGljdWxhciB0byBhbGwgb3RoZXIgc3BlY2lmaWVkIGF4ZXMuXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHZpZXcgIHRoZSB2ZWN0b3IgcmVwcmVzZW50aW5nIHRoZSB2aWV3aW5nIGRpcmVjdGlvblxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHJpZ2h0IHRoZSB2ZWN0b3IgcmVwcmVzZW50aW5nIHRoZSBsb2NhbCBcInJpZ2h0XCIgZGlyZWN0aW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdXAgICAgdGhlIHZlY3RvciByZXByZXNlbnRpbmcgdGhlIGxvY2FsIFwidXBcIiBkaXJlY3Rpb25cbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgdmFyIHNldEF4ZXMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBtYXRyID0gbWF0My5jcmVhdGUoKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChvdXQsIHZpZXcsIHJpZ2h0LCB1cCkge1xuICAgIG1hdHJbMF0gPSByaWdodFswXTtcbiAgICBtYXRyWzNdID0gcmlnaHRbMV07XG4gICAgbWF0cls2XSA9IHJpZ2h0WzJdO1xuICAgIG1hdHJbMV0gPSB1cFswXTtcbiAgICBtYXRyWzRdID0gdXBbMV07XG4gICAgbWF0cls3XSA9IHVwWzJdO1xuICAgIG1hdHJbMl0gPSAtdmlld1swXTtcbiAgICBtYXRyWzVdID0gLXZpZXdbMV07XG4gICAgbWF0cls4XSA9IC12aWV3WzJdO1xuICAgIHJldHVybiBub3JtYWxpemUob3V0LCBmcm9tTWF0MyhvdXQsIG1hdHIpKTtcbiAgfTtcbn0oKTsiLCAiaW1wb3J0ICogYXMgZ2xNYXRyaXggZnJvbSBcIi4vY29tbW9uLmpzXCI7XG4vKipcbiAqIDMgRGltZW5zaW9uYWwgVmVjdG9yXG4gKiBAbW9kdWxlIHZlYzNcbiAqL1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcsIGVtcHR5IHZlYzNcbiAqXG4gKiBAcmV0dXJucyB7dmVjM30gYSBuZXcgM0QgdmVjdG9yXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDMpO1xuXG4gIGlmIChnbE1hdHJpeC5BUlJBWV9UWVBFICE9IEZsb2F0MzJBcnJheSkge1xuICAgIG91dFswXSA9IDA7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB2ZWMzIGluaXRpYWxpemVkIHdpdGggdmFsdWVzIGZyb20gYW4gZXhpc3RpbmcgdmVjdG9yXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIGNsb25lXG4gKiBAcmV0dXJucyB7dmVjM30gYSBuZXcgM0QgdmVjdG9yXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lKGEpIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDMpO1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICBvdXRbMl0gPSBhWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBsZW5ndGggb2YgYSB2ZWMzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIGNhbGN1bGF0ZSBsZW5ndGggb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGxlbmd0aCBvZiBhXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxlbmd0aChhKSB7XG4gIHZhciB4ID0gYVswXTtcbiAgdmFyIHkgPSBhWzFdO1xuICB2YXIgeiA9IGFbMl07XG4gIHJldHVybiBNYXRoLmh5cG90KHgsIHksIHopO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHZlYzMgaW5pdGlhbGl6ZWQgd2l0aCB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHggWCBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFkgY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geiBaIGNvbXBvbmVudFxuICogQHJldHVybnMge3ZlYzN9IGEgbmV3IDNEIHZlY3RvclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVmFsdWVzKHgsIHksIHopIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDMpO1xuICBvdXRbMF0gPSB4O1xuICBvdXRbMV0gPSB5O1xuICBvdXRbMl0gPSB6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDb3B5IHRoZSB2YWx1ZXMgZnJvbSBvbmUgdmVjMyB0byBhbm90aGVyXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBzb3VyY2UgdmVjdG9yXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNvcHkob3V0LCBhKSB7XG4gIG91dFswXSA9IGFbMF07XG4gIG91dFsxXSA9IGFbMV07XG4gIG91dFsyXSA9IGFbMl07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFNldCB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzMgdG8gdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge051bWJlcn0geCBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkgWSBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB6IFogY29tcG9uZW50XG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNldChvdXQsIHgsIHksIHopIHtcbiAgb3V0WzBdID0geDtcbiAgb3V0WzFdID0geTtcbiAgb3V0WzJdID0gejtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQWRkcyB0d28gdmVjMydzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICsgYlswXTtcbiAgb3V0WzFdID0gYVsxXSArIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gKyBiWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTdWJ0cmFjdHMgdmVjdG9yIGIgZnJvbSB2ZWN0b3IgYVxuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN1YnRyYWN0KG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdIC0gYlswXTtcbiAgb3V0WzFdID0gYVsxXSAtIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gLSBiWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBNdWx0aXBsaWVzIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aXBseShvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAqIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gKiBiWzFdO1xuICBvdXRbMl0gPSBhWzJdICogYlsyXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogRGl2aWRlcyB0d28gdmVjMydzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZGl2aWRlKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdIC8gYlswXTtcbiAgb3V0WzFdID0gYVsxXSAvIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gLyBiWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBNYXRoLmNlaWwgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWMzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHZlY3RvciB0byBjZWlsXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNlaWwob3V0LCBhKSB7XG4gIG91dFswXSA9IE1hdGguY2VpbChhWzBdKTtcbiAgb3V0WzFdID0gTWF0aC5jZWlsKGFbMV0pO1xuICBvdXRbMl0gPSBNYXRoLmNlaWwoYVsyXSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE1hdGguZmxvb3IgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWMzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHZlY3RvciB0byBmbG9vclxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmbG9vcihvdXQsIGEpIHtcbiAgb3V0WzBdID0gTWF0aC5mbG9vcihhWzBdKTtcbiAgb3V0WzFdID0gTWF0aC5mbG9vcihhWzFdKTtcbiAgb3V0WzJdID0gTWF0aC5mbG9vcihhWzJdKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgbWluaW11bSBvZiB0d28gdmVjMydzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbWluKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBNYXRoLm1pbihhWzBdLCBiWzBdKTtcbiAgb3V0WzFdID0gTWF0aC5taW4oYVsxXSwgYlsxXSk7XG4gIG91dFsyXSA9IE1hdGgubWluKGFbMl0sIGJbMl0pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtYXhpbXVtIG9mIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtYXgob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IE1hdGgubWF4KGFbMF0sIGJbMF0pO1xuICBvdXRbMV0gPSBNYXRoLm1heChhWzFdLCBiWzFdKTtcbiAgb3V0WzJdID0gTWF0aC5tYXgoYVsyXSwgYlsyXSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE1hdGgucm91bmQgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWMzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHZlY3RvciB0byByb3VuZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3VuZChvdXQsIGEpIHtcbiAgb3V0WzBdID0gTWF0aC5yb3VuZChhWzBdKTtcbiAgb3V0WzFdID0gTWF0aC5yb3VuZChhWzFdKTtcbiAgb3V0WzJdID0gTWF0aC5yb3VuZChhWzJdKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2NhbGVzIGEgdmVjMyBieSBhIHNjYWxhciBudW1iZXJcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIHZlY3RvciB0byBzY2FsZVxuICogQHBhcmFtIHtOdW1iZXJ9IGIgYW1vdW50IHRvIHNjYWxlIHRoZSB2ZWN0b3IgYnlcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gKiBiO1xuICBvdXRbMV0gPSBhWzFdICogYjtcbiAgb3V0WzJdID0gYVsyXSAqIGI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEFkZHMgdHdvIHZlYzMncyBhZnRlciBzY2FsaW5nIHRoZSBzZWNvbmQgb3BlcmFuZCBieSBhIHNjYWxhciB2YWx1ZVxuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gc2NhbGUgdGhlIGFtb3VudCB0byBzY2FsZSBiIGJ5IGJlZm9yZSBhZGRpbmdcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2NhbGVBbmRBZGQob3V0LCBhLCBiLCBzY2FsZSkge1xuICBvdXRbMF0gPSBhWzBdICsgYlswXSAqIHNjYWxlO1xuICBvdXRbMV0gPSBhWzFdICsgYlsxXSAqIHNjYWxlO1xuICBvdXRbMl0gPSBhWzJdICsgYlsyXSAqIHNjYWxlO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBldWNsaWRpYW4gZGlzdGFuY2UgYmV0d2VlbiB0d28gdmVjMydzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gZGlzdGFuY2UgYmV0d2VlbiBhIGFuZCBiXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3RhbmNlKGEsIGIpIHtcbiAgdmFyIHggPSBiWzBdIC0gYVswXTtcbiAgdmFyIHkgPSBiWzFdIC0gYVsxXTtcbiAgdmFyIHogPSBiWzJdIC0gYVsyXTtcbiAgcmV0dXJuIE1hdGguaHlwb3QoeCwgeSwgeik7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHNxdWFyZWQgZXVjbGlkaWFuIGRpc3RhbmNlIGJldHdlZW4gdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IHNxdWFyZWQgZGlzdGFuY2UgYmV0d2VlbiBhIGFuZCBiXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWREaXN0YW5jZShhLCBiKSB7XG4gIHZhciB4ID0gYlswXSAtIGFbMF07XG4gIHZhciB5ID0gYlsxXSAtIGFbMV07XG4gIHZhciB6ID0gYlsyXSAtIGFbMl07XG4gIHJldHVybiB4ICogeCArIHkgKiB5ICsgeiAqIHo7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHNxdWFyZWQgbGVuZ3RoIG9mIGEgdmVjM1xuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHZlY3RvciB0byBjYWxjdWxhdGUgc3F1YXJlZCBsZW5ndGggb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IHNxdWFyZWQgbGVuZ3RoIG9mIGFcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3F1YXJlZExlbmd0aChhKSB7XG4gIHZhciB4ID0gYVswXTtcbiAgdmFyIHkgPSBhWzFdO1xuICB2YXIgeiA9IGFbMl07XG4gIHJldHVybiB4ICogeCArIHkgKiB5ICsgeiAqIHo7XG59XG4vKipcbiAqIE5lZ2F0ZXMgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWMzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHZlY3RvciB0byBuZWdhdGVcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbmVnYXRlKG91dCwgYSkge1xuICBvdXRbMF0gPSAtYVswXTtcbiAgb3V0WzFdID0gLWFbMV07XG4gIG91dFsyXSA9IC1hWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbnZlcnNlIG9mIHRoZSBjb21wb25lbnRzIG9mIGEgdmVjM1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB2ZWN0b3IgdG8gaW52ZXJ0XG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGludmVyc2Uob3V0LCBhKSB7XG4gIG91dFswXSA9IDEuMCAvIGFbMF07XG4gIG91dFsxXSA9IDEuMCAvIGFbMV07XG4gIG91dFsyXSA9IDEuMCAvIGFbMl07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE5vcm1hbGl6ZSBhIHZlYzNcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIG5vcm1hbGl6ZVxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemUob3V0LCBhKSB7XG4gIHZhciB4ID0gYVswXTtcbiAgdmFyIHkgPSBhWzFdO1xuICB2YXIgeiA9IGFbMl07XG4gIHZhciBsZW4gPSB4ICogeCArIHkgKiB5ICsgeiAqIHo7XG5cbiAgaWYgKGxlbiA+IDApIHtcbiAgICAvL1RPRE86IGV2YWx1YXRlIHVzZSBvZiBnbG1faW52c3FydCBoZXJlP1xuICAgIGxlbiA9IDEgLyBNYXRoLnNxcnQobGVuKTtcbiAgfVxuXG4gIG91dFswXSA9IGFbMF0gKiBsZW47XG4gIG91dFsxXSA9IGFbMV0gKiBsZW47XG4gIG91dFsyXSA9IGFbMl0gKiBsZW47XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGRvdCBwcm9kdWN0IG9mIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkb3QgcHJvZHVjdCBvZiBhIGFuZCBiXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRvdChhLCBiKSB7XG4gIHJldHVybiBhWzBdICogYlswXSArIGFbMV0gKiBiWzFdICsgYVsyXSAqIGJbMl07XG59XG4vKipcbiAqIENvbXB1dGVzIHRoZSBjcm9zcyBwcm9kdWN0IG9mIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjcm9zcyhvdXQsIGEsIGIpIHtcbiAgdmFyIGF4ID0gYVswXSxcbiAgICAgIGF5ID0gYVsxXSxcbiAgICAgIGF6ID0gYVsyXTtcbiAgdmFyIGJ4ID0gYlswXSxcbiAgICAgIGJ5ID0gYlsxXSxcbiAgICAgIGJ6ID0gYlsyXTtcbiAgb3V0WzBdID0gYXkgKiBieiAtIGF6ICogYnk7XG4gIG91dFsxXSA9IGF6ICogYnggLSBheCAqIGJ6O1xuICBvdXRbMl0gPSBheCAqIGJ5IC0gYXkgKiBieDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUGVyZm9ybXMgYSBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHQgaW50ZXJwb2xhdGlvbiBhbW91bnQsIGluIHRoZSByYW5nZSBbMC0xXSwgYmV0d2VlbiB0aGUgdHdvIGlucHV0c1xuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsZXJwKG91dCwgYSwgYiwgdCkge1xuICB2YXIgYXggPSBhWzBdO1xuICB2YXIgYXkgPSBhWzFdO1xuICB2YXIgYXogPSBhWzJdO1xuICBvdXRbMF0gPSBheCArIHQgKiAoYlswXSAtIGF4KTtcbiAgb3V0WzFdID0gYXkgKyB0ICogKGJbMV0gLSBheSk7XG4gIG91dFsyXSA9IGF6ICsgdCAqIChiWzJdIC0gYXopO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBQZXJmb3JtcyBhIGhlcm1pdGUgaW50ZXJwb2xhdGlvbiB3aXRoIHR3byBjb250cm9sIHBvaW50c1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYyB0aGUgdGhpcmQgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGQgdGhlIGZvdXJ0aCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gdCBpbnRlcnBvbGF0aW9uIGFtb3VudCwgaW4gdGhlIHJhbmdlIFswLTFdLCBiZXR3ZWVuIHRoZSB0d28gaW5wdXRzXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGhlcm1pdGUob3V0LCBhLCBiLCBjLCBkLCB0KSB7XG4gIHZhciBmYWN0b3JUaW1lczIgPSB0ICogdDtcbiAgdmFyIGZhY3RvcjEgPSBmYWN0b3JUaW1lczIgKiAoMiAqIHQgLSAzKSArIDE7XG4gIHZhciBmYWN0b3IyID0gZmFjdG9yVGltZXMyICogKHQgLSAyKSArIHQ7XG4gIHZhciBmYWN0b3IzID0gZmFjdG9yVGltZXMyICogKHQgLSAxKTtcbiAgdmFyIGZhY3RvcjQgPSBmYWN0b3JUaW1lczIgKiAoMyAtIDIgKiB0KTtcbiAgb3V0WzBdID0gYVswXSAqIGZhY3RvcjEgKyBiWzBdICogZmFjdG9yMiArIGNbMF0gKiBmYWN0b3IzICsgZFswXSAqIGZhY3RvcjQ7XG4gIG91dFsxXSA9IGFbMV0gKiBmYWN0b3IxICsgYlsxXSAqIGZhY3RvcjIgKyBjWzFdICogZmFjdG9yMyArIGRbMV0gKiBmYWN0b3I0O1xuICBvdXRbMl0gPSBhWzJdICogZmFjdG9yMSArIGJbMl0gKiBmYWN0b3IyICsgY1syXSAqIGZhY3RvcjMgKyBkWzJdICogZmFjdG9yNDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUGVyZm9ybXMgYSBiZXppZXIgaW50ZXJwb2xhdGlvbiB3aXRoIHR3byBjb250cm9sIHBvaW50c1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYyB0aGUgdGhpcmQgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGQgdGhlIGZvdXJ0aCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gdCBpbnRlcnBvbGF0aW9uIGFtb3VudCwgaW4gdGhlIHJhbmdlIFswLTFdLCBiZXR3ZWVuIHRoZSB0d28gaW5wdXRzXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGJlemllcihvdXQsIGEsIGIsIGMsIGQsIHQpIHtcbiAgdmFyIGludmVyc2VGYWN0b3IgPSAxIC0gdDtcbiAgdmFyIGludmVyc2VGYWN0b3JUaW1lc1R3byA9IGludmVyc2VGYWN0b3IgKiBpbnZlcnNlRmFjdG9yO1xuICB2YXIgZmFjdG9yVGltZXMyID0gdCAqIHQ7XG4gIHZhciBmYWN0b3IxID0gaW52ZXJzZUZhY3RvclRpbWVzVHdvICogaW52ZXJzZUZhY3RvcjtcbiAgdmFyIGZhY3RvcjIgPSAzICogdCAqIGludmVyc2VGYWN0b3JUaW1lc1R3bztcbiAgdmFyIGZhY3RvcjMgPSAzICogZmFjdG9yVGltZXMyICogaW52ZXJzZUZhY3RvcjtcbiAgdmFyIGZhY3RvcjQgPSBmYWN0b3JUaW1lczIgKiB0O1xuICBvdXRbMF0gPSBhWzBdICogZmFjdG9yMSArIGJbMF0gKiBmYWN0b3IyICsgY1swXSAqIGZhY3RvcjMgKyBkWzBdICogZmFjdG9yNDtcbiAgb3V0WzFdID0gYVsxXSAqIGZhY3RvcjEgKyBiWzFdICogZmFjdG9yMiArIGNbMV0gKiBmYWN0b3IzICsgZFsxXSAqIGZhY3RvcjQ7XG4gIG91dFsyXSA9IGFbMl0gKiBmYWN0b3IxICsgYlsyXSAqIGZhY3RvcjIgKyBjWzJdICogZmFjdG9yMyArIGRbMl0gKiBmYWN0b3I0O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSByYW5kb20gdmVjdG9yIHdpdGggdGhlIGdpdmVuIHNjYWxlXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7TnVtYmVyfSBbc2NhbGVdIExlbmd0aCBvZiB0aGUgcmVzdWx0aW5nIHZlY3Rvci4gSWYgb21taXR0ZWQsIGEgdW5pdCB2ZWN0b3Igd2lsbCBiZSByZXR1cm5lZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByYW5kb20ob3V0LCBzY2FsZSkge1xuICBzY2FsZSA9IHNjYWxlIHx8IDEuMDtcbiAgdmFyIHIgPSBnbE1hdHJpeC5SQU5ET00oKSAqIDIuMCAqIE1hdGguUEk7XG4gIHZhciB6ID0gZ2xNYXRyaXguUkFORE9NKCkgKiAyLjAgLSAxLjA7XG4gIHZhciB6U2NhbGUgPSBNYXRoLnNxcnQoMS4wIC0geiAqIHopICogc2NhbGU7XG4gIG91dFswXSA9IE1hdGguY29zKHIpICogelNjYWxlO1xuICBvdXRbMV0gPSBNYXRoLnNpbihyKSAqIHpTY2FsZTtcbiAgb3V0WzJdID0geiAqIHNjYWxlO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSB2ZWMzIHdpdGggYSBtYXQ0LlxuICogNHRoIHZlY3RvciBjb21wb25lbnQgaXMgaW1wbGljaXRseSAnMSdcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIHZlY3RvciB0byB0cmFuc2Zvcm1cbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBtIG1hdHJpeCB0byB0cmFuc2Zvcm0gd2l0aFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1NYXQ0KG91dCwgYSwgbSkge1xuICB2YXIgeCA9IGFbMF0sXG4gICAgICB5ID0gYVsxXSxcbiAgICAgIHogPSBhWzJdO1xuICB2YXIgdyA9IG1bM10gKiB4ICsgbVs3XSAqIHkgKyBtWzExXSAqIHogKyBtWzE1XTtcbiAgdyA9IHcgfHwgMS4wO1xuICBvdXRbMF0gPSAobVswXSAqIHggKyBtWzRdICogeSArIG1bOF0gKiB6ICsgbVsxMl0pIC8gdztcbiAgb3V0WzFdID0gKG1bMV0gKiB4ICsgbVs1XSAqIHkgKyBtWzldICogeiArIG1bMTNdKSAvIHc7XG4gIG91dFsyXSA9IChtWzJdICogeCArIG1bNl0gKiB5ICsgbVsxMF0gKiB6ICsgbVsxNF0pIC8gdztcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgdmVjMyB3aXRoIGEgbWF0My5cbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIHZlY3RvciB0byB0cmFuc2Zvcm1cbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBtIHRoZSAzeDMgbWF0cml4IHRvIHRyYW5zZm9ybSB3aXRoXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybU1hdDMob3V0LCBhLCBtKSB7XG4gIHZhciB4ID0gYVswXSxcbiAgICAgIHkgPSBhWzFdLFxuICAgICAgeiA9IGFbMl07XG4gIG91dFswXSA9IHggKiBtWzBdICsgeSAqIG1bM10gKyB6ICogbVs2XTtcbiAgb3V0WzFdID0geCAqIG1bMV0gKyB5ICogbVs0XSArIHogKiBtWzddO1xuICBvdXRbMl0gPSB4ICogbVsyXSArIHkgKiBtWzVdICsgeiAqIG1bOF07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIHZlYzMgd2l0aCBhIHF1YXRcbiAqIENhbiBhbHNvIGJlIHVzZWQgZm9yIGR1YWwgcXVhdGVybmlvbnMuIChNdWx0aXBseSBpdCB3aXRoIHRoZSByZWFsIHBhcnQpXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSB2ZWN0b3IgdG8gdHJhbnNmb3JtXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gcSBxdWF0ZXJuaW9uIHRvIHRyYW5zZm9ybSB3aXRoXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybVF1YXQob3V0LCBhLCBxKSB7XG4gIC8vIGJlbmNobWFya3M6IGh0dHBzOi8vanNwZXJmLmNvbS9xdWF0ZXJuaW9uLXRyYW5zZm9ybS12ZWMzLWltcGxlbWVudGF0aW9ucy1maXhlZFxuICB2YXIgcXggPSBxWzBdLFxuICAgICAgcXkgPSBxWzFdLFxuICAgICAgcXogPSBxWzJdLFxuICAgICAgcXcgPSBxWzNdO1xuICB2YXIgeCA9IGFbMF0sXG4gICAgICB5ID0gYVsxXSxcbiAgICAgIHogPSBhWzJdOyAvLyB2YXIgcXZlYyA9IFtxeCwgcXksIHF6XTtcbiAgLy8gdmFyIHV2ID0gdmVjMy5jcm9zcyhbXSwgcXZlYywgYSk7XG5cbiAgdmFyIHV2eCA9IHF5ICogeiAtIHF6ICogeSxcbiAgICAgIHV2eSA9IHF6ICogeCAtIHF4ICogeixcbiAgICAgIHV2eiA9IHF4ICogeSAtIHF5ICogeDsgLy8gdmFyIHV1diA9IHZlYzMuY3Jvc3MoW10sIHF2ZWMsIHV2KTtcblxuICB2YXIgdXV2eCA9IHF5ICogdXZ6IC0gcXogKiB1dnksXG4gICAgICB1dXZ5ID0gcXogKiB1dnggLSBxeCAqIHV2eixcbiAgICAgIHV1dnogPSBxeCAqIHV2eSAtIHF5ICogdXZ4OyAvLyB2ZWMzLnNjYWxlKHV2LCB1diwgMiAqIHcpO1xuXG4gIHZhciB3MiA9IHF3ICogMjtcbiAgdXZ4ICo9IHcyO1xuICB1dnkgKj0gdzI7XG4gIHV2eiAqPSB3MjsgLy8gdmVjMy5zY2FsZSh1dXYsIHV1diwgMik7XG5cbiAgdXV2eCAqPSAyO1xuICB1dXZ5ICo9IDI7XG4gIHV1dnogKj0gMjsgLy8gcmV0dXJuIHZlYzMuYWRkKG91dCwgYSwgdmVjMy5hZGQob3V0LCB1diwgdXV2KSk7XG5cbiAgb3V0WzBdID0geCArIHV2eCArIHV1dng7XG4gIG91dFsxXSA9IHkgKyB1dnkgKyB1dXZ5O1xuICBvdXRbMl0gPSB6ICsgdXZ6ICsgdXV2ejtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlIGEgM0QgdmVjdG9yIGFyb3VuZCB0aGUgeC1heGlzXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCBUaGUgcmVjZWl2aW5nIHZlYzNcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIFRoZSB2ZWMzIHBvaW50IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgVGhlIG9yaWdpbiBvZiB0aGUgcm90YXRpb25cbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgVGhlIGFuZ2xlIG9mIHJvdGF0aW9uIGluIHJhZGlhbnNcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlWChvdXQsIGEsIGIsIHJhZCkge1xuICB2YXIgcCA9IFtdLFxuICAgICAgciA9IFtdOyAvL1RyYW5zbGF0ZSBwb2ludCB0byB0aGUgb3JpZ2luXG5cbiAgcFswXSA9IGFbMF0gLSBiWzBdO1xuICBwWzFdID0gYVsxXSAtIGJbMV07XG4gIHBbMl0gPSBhWzJdIC0gYlsyXTsgLy9wZXJmb3JtIHJvdGF0aW9uXG5cbiAgclswXSA9IHBbMF07XG4gIHJbMV0gPSBwWzFdICogTWF0aC5jb3MocmFkKSAtIHBbMl0gKiBNYXRoLnNpbihyYWQpO1xuICByWzJdID0gcFsxXSAqIE1hdGguc2luKHJhZCkgKyBwWzJdICogTWF0aC5jb3MocmFkKTsgLy90cmFuc2xhdGUgdG8gY29ycmVjdCBwb3NpdGlvblxuXG4gIG91dFswXSA9IHJbMF0gKyBiWzBdO1xuICBvdXRbMV0gPSByWzFdICsgYlsxXTtcbiAgb3V0WzJdID0gclsyXSArIGJbMl07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZSBhIDNEIHZlY3RvciBhcm91bmQgdGhlIHktYXhpc1xuICogQHBhcmFtIHt2ZWMzfSBvdXQgVGhlIHJlY2VpdmluZyB2ZWMzXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSBUaGUgdmVjMyBwb2ludCB0byByb3RhdGVcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIFRoZSBvcmlnaW4gb2YgdGhlIHJvdGF0aW9uXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIFRoZSBhbmdsZSBvZiByb3RhdGlvbiBpbiByYWRpYW5zXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVkob3V0LCBhLCBiLCByYWQpIHtcbiAgdmFyIHAgPSBbXSxcbiAgICAgIHIgPSBbXTsgLy9UcmFuc2xhdGUgcG9pbnQgdG8gdGhlIG9yaWdpblxuXG4gIHBbMF0gPSBhWzBdIC0gYlswXTtcbiAgcFsxXSA9IGFbMV0gLSBiWzFdO1xuICBwWzJdID0gYVsyXSAtIGJbMl07IC8vcGVyZm9ybSByb3RhdGlvblxuXG4gIHJbMF0gPSBwWzJdICogTWF0aC5zaW4ocmFkKSArIHBbMF0gKiBNYXRoLmNvcyhyYWQpO1xuICByWzFdID0gcFsxXTtcbiAgclsyXSA9IHBbMl0gKiBNYXRoLmNvcyhyYWQpIC0gcFswXSAqIE1hdGguc2luKHJhZCk7IC8vdHJhbnNsYXRlIHRvIGNvcnJlY3QgcG9zaXRpb25cblxuICBvdXRbMF0gPSByWzBdICsgYlswXTtcbiAgb3V0WzFdID0gclsxXSArIGJbMV07XG4gIG91dFsyXSA9IHJbMl0gKyBiWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGUgYSAzRCB2ZWN0b3IgYXJvdW5kIHRoZSB6LWF4aXNcbiAqIEBwYXJhbSB7dmVjM30gb3V0IFRoZSByZWNlaXZpbmcgdmVjM1xuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgVGhlIHZlYzMgcG9pbnQgdG8gcm90YXRlXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiBUaGUgb3JpZ2luIG9mIHRoZSByb3RhdGlvblxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCBUaGUgYW5nbGUgb2Ygcm90YXRpb24gaW4gcmFkaWFuc1xuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVaKG91dCwgYSwgYiwgcmFkKSB7XG4gIHZhciBwID0gW10sXG4gICAgICByID0gW107IC8vVHJhbnNsYXRlIHBvaW50IHRvIHRoZSBvcmlnaW5cblxuICBwWzBdID0gYVswXSAtIGJbMF07XG4gIHBbMV0gPSBhWzFdIC0gYlsxXTtcbiAgcFsyXSA9IGFbMl0gLSBiWzJdOyAvL3BlcmZvcm0gcm90YXRpb25cblxuICByWzBdID0gcFswXSAqIE1hdGguY29zKHJhZCkgLSBwWzFdICogTWF0aC5zaW4ocmFkKTtcbiAgclsxXSA9IHBbMF0gKiBNYXRoLnNpbihyYWQpICsgcFsxXSAqIE1hdGguY29zKHJhZCk7XG4gIHJbMl0gPSBwWzJdOyAvL3RyYW5zbGF0ZSB0byBjb3JyZWN0IHBvc2l0aW9uXG5cbiAgb3V0WzBdID0gclswXSArIGJbMF07XG4gIG91dFsxXSA9IHJbMV0gKyBiWzFdO1xuICBvdXRbMl0gPSByWzJdICsgYlsyXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogR2V0IHRoZSBhbmdsZSBiZXR3ZWVuIHR3byAzRCB2ZWN0b3JzXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSBUaGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgVGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgYW5nbGUgaW4gcmFkaWFuc1xuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBhbmdsZShhLCBiKSB7XG4gIHZhciBheCA9IGFbMF0sXG4gICAgICBheSA9IGFbMV0sXG4gICAgICBheiA9IGFbMl0sXG4gICAgICBieCA9IGJbMF0sXG4gICAgICBieSA9IGJbMV0sXG4gICAgICBieiA9IGJbMl0sXG4gICAgICBtYWcxID0gTWF0aC5zcXJ0KGF4ICogYXggKyBheSAqIGF5ICsgYXogKiBheiksXG4gICAgICBtYWcyID0gTWF0aC5zcXJ0KGJ4ICogYnggKyBieSAqIGJ5ICsgYnogKiBieiksXG4gICAgICBtYWcgPSBtYWcxICogbWFnMixcbiAgICAgIGNvc2luZSA9IG1hZyAmJiBkb3QoYSwgYikgLyBtYWc7XG4gIHJldHVybiBNYXRoLmFjb3MoTWF0aC5taW4oTWF0aC5tYXgoY29zaW5lLCAtMSksIDEpKTtcbn1cbi8qKlxuICogU2V0IHRoZSBjb21wb25lbnRzIG9mIGEgdmVjMyB0byB6ZXJvXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gemVybyhvdXQpIHtcbiAgb3V0WzBdID0gMC4wO1xuICBvdXRbMV0gPSAwLjA7XG4gIG91dFsyXSA9IDAuMDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIHZlY3RvclxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHZlY3RvciB0byByZXByZXNlbnQgYXMgYSBzdHJpbmdcbiAqIEByZXR1cm5zIHtTdHJpbmd9IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgdmVjdG9yXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN0cihhKSB7XG4gIHJldHVybiBcInZlYzMoXCIgKyBhWzBdICsgXCIsIFwiICsgYVsxXSArIFwiLCBcIiArIGFbMl0gKyBcIilcIjtcbn1cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgdmVjdG9ycyBoYXZlIGV4YWN0bHkgdGhlIHNhbWUgZWxlbWVudHMgaW4gdGhlIHNhbWUgcG9zaXRpb24gKHdoZW4gY29tcGFyZWQgd2l0aCA9PT0pXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgVGhlIGZpcnN0IHZlY3Rvci5cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIFRoZSBzZWNvbmQgdmVjdG9yLlxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhlIHZlY3RvcnMgYXJlIGVxdWFsLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGV4YWN0RXF1YWxzKGEsIGIpIHtcbiAgcmV0dXJuIGFbMF0gPT09IGJbMF0gJiYgYVsxXSA9PT0gYlsxXSAmJiBhWzJdID09PSBiWzJdO1xufVxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSB2ZWN0b3JzIGhhdmUgYXBwcm94aW1hdGVseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSBUaGUgZmlyc3QgdmVjdG9yLlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgVGhlIHNlY29uZCB2ZWN0b3IuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmVjdG9ycyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGEsIGIpIHtcbiAgdmFyIGEwID0gYVswXSxcbiAgICAgIGExID0gYVsxXSxcbiAgICAgIGEyID0gYVsyXTtcbiAgdmFyIGIwID0gYlswXSxcbiAgICAgIGIxID0gYlsxXSxcbiAgICAgIGIyID0gYlsyXTtcbiAgcmV0dXJuIE1hdGguYWJzKGEwIC0gYjApIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEwKSwgTWF0aC5hYnMoYjApKSAmJiBNYXRoLmFicyhhMSAtIGIxKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMSksIE1hdGguYWJzKGIxKSkgJiYgTWF0aC5hYnMoYTIgLSBiMikgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTIpLCBNYXRoLmFicyhiMikpO1xufVxuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzMuc3VidHJhY3R9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHN1YiA9IHN1YnRyYWN0O1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzMubXVsdGlwbHl9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIG11bCA9IG11bHRpcGx5O1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzMuZGl2aWRlfVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBkaXYgPSBkaXZpZGU7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMy5kaXN0YW5jZX1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgZGlzdCA9IGRpc3RhbmNlO1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzMuc3F1YXJlZERpc3RhbmNlfVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzcXJEaXN0ID0gc3F1YXJlZERpc3RhbmNlO1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzMubGVuZ3RofVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBsZW4gPSBsZW5ndGg7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMy5zcXVhcmVkTGVuZ3RofVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzcXJMZW4gPSBzcXVhcmVkTGVuZ3RoO1xuLyoqXG4gKiBQZXJmb3JtIHNvbWUgb3BlcmF0aW9uIG92ZXIgYW4gYXJyYXkgb2YgdmVjM3MuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYSB0aGUgYXJyYXkgb2YgdmVjdG9ycyB0byBpdGVyYXRlIG92ZXJcbiAqIEBwYXJhbSB7TnVtYmVyfSBzdHJpZGUgTnVtYmVyIG9mIGVsZW1lbnRzIGJldHdlZW4gdGhlIHN0YXJ0IG9mIGVhY2ggdmVjMy4gSWYgMCBhc3N1bWVzIHRpZ2h0bHkgcGFja2VkXG4gKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0IE51bWJlciBvZiBlbGVtZW50cyB0byBza2lwIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFycmF5XG4gKiBAcGFyYW0ge051bWJlcn0gY291bnQgTnVtYmVyIG9mIHZlYzNzIHRvIGl0ZXJhdGUgb3Zlci4gSWYgMCBpdGVyYXRlcyBvdmVyIGVudGlyZSBhcnJheVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gRnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaCB2ZWN0b3IgaW4gdGhlIGFycmF5XG4gKiBAcGFyYW0ge09iamVjdH0gW2FyZ10gYWRkaXRpb25hbCBhcmd1bWVudCB0byBwYXNzIHRvIGZuXG4gKiBAcmV0dXJucyB7QXJyYXl9IGFcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgZm9yRWFjaCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHZlYyA9IGNyZWF0ZSgpO1xuICByZXR1cm4gZnVuY3Rpb24gKGEsIHN0cmlkZSwgb2Zmc2V0LCBjb3VudCwgZm4sIGFyZykge1xuICAgIHZhciBpLCBsO1xuXG4gICAgaWYgKCFzdHJpZGUpIHtcbiAgICAgIHN0cmlkZSA9IDM7XG4gICAgfVxuXG4gICAgaWYgKCFvZmZzZXQpIHtcbiAgICAgIG9mZnNldCA9IDA7XG4gICAgfVxuXG4gICAgaWYgKGNvdW50KSB7XG4gICAgICBsID0gTWF0aC5taW4oY291bnQgKiBzdHJpZGUgKyBvZmZzZXQsIGEubGVuZ3RoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbCA9IGEubGVuZ3RoO1xuICAgIH1cblxuICAgIGZvciAoaSA9IG9mZnNldDsgaSA8IGw7IGkgKz0gc3RyaWRlKSB7XG4gICAgICB2ZWNbMF0gPSBhW2ldO1xuICAgICAgdmVjWzFdID0gYVtpICsgMV07XG4gICAgICB2ZWNbMl0gPSBhW2kgKyAyXTtcbiAgICAgIGZuKHZlYywgdmVjLCBhcmcpO1xuICAgICAgYVtpXSA9IHZlY1swXTtcbiAgICAgIGFbaSArIDFdID0gdmVjWzFdO1xuICAgICAgYVtpICsgMl0gPSB2ZWNbMl07XG4gICAgfVxuXG4gICAgcmV0dXJuIGE7XG4gIH07XG59KCk7IiwgImltcG9ydCAqIGFzIGdsTWF0cml4IGZyb20gXCIuL2NvbW1vbi5qc1wiO1xuLyoqXG4gKiA0IERpbWVuc2lvbmFsIFZlY3RvclxuICogQG1vZHVsZSB2ZWM0XG4gKi9cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3LCBlbXB0eSB2ZWM0XG4gKlxuICogQHJldHVybnMge3ZlYzR9IGEgbmV3IDREIHZlY3RvclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSg0KTtcblxuICBpZiAoZ2xNYXRyaXguQVJSQVlfVFlQRSAhPSBGbG9hdDMyQXJyYXkpIHtcbiAgICBvdXRbMF0gPSAwO1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gMDtcbiAgICBvdXRbM10gPSAwO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB2ZWM0IGluaXRpYWxpemVkIHdpdGggdmFsdWVzIGZyb20gYW4gZXhpc3RpbmcgdmVjdG9yXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdmVjdG9yIHRvIGNsb25lXG4gKiBAcmV0dXJucyB7dmVjNH0gYSBuZXcgNEQgdmVjdG9yXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lKGEpIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDQpO1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICBvdXRbMl0gPSBhWzJdO1xuICBvdXRbM10gPSBhWzNdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHZlYzQgaW5pdGlhbGl6ZWQgd2l0aCB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHggWCBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFkgY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geiBaIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHcgVyBjb21wb25lbnRcbiAqIEByZXR1cm5zIHt2ZWM0fSBhIG5ldyA0RCB2ZWN0b3JcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVZhbHVlcyh4LCB5LCB6LCB3KSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSg0KTtcbiAgb3V0WzBdID0geDtcbiAgb3V0WzFdID0geTtcbiAgb3V0WzJdID0gejtcbiAgb3V0WzNdID0gdztcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ29weSB0aGUgdmFsdWVzIGZyb20gb25lIHZlYzQgdG8gYW5vdGhlclxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgc291cmNlIHZlY3RvclxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjb3B5KG91dCwgYSkge1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICBvdXRbMl0gPSBhWzJdO1xuICBvdXRbM10gPSBhWzNdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTZXQgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWM0IHRvIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtOdW1iZXJ9IHggWCBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFkgY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geiBaIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHcgVyBjb21wb25lbnRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0KG91dCwgeCwgeSwgeiwgdykge1xuICBvdXRbMF0gPSB4O1xuICBvdXRbMV0gPSB5O1xuICBvdXRbMl0gPSB6O1xuICBvdXRbM10gPSB3O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBBZGRzIHR3byB2ZWM0J3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGQob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gKyBiWzBdO1xuICBvdXRbMV0gPSBhWzFdICsgYlsxXTtcbiAgb3V0WzJdID0gYVsyXSArIGJbMl07XG4gIG91dFszXSA9IGFbM10gKyBiWzNdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTdWJ0cmFjdHMgdmVjdG9yIGIgZnJvbSB2ZWN0b3IgYVxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN1YnRyYWN0KG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdIC0gYlswXTtcbiAgb3V0WzFdID0gYVsxXSAtIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gLSBiWzJdO1xuICBvdXRbM10gPSBhWzNdIC0gYlszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTXVsdGlwbGllcyB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlwbHkob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gKiBiWzBdO1xuICBvdXRbMV0gPSBhWzFdICogYlsxXTtcbiAgb3V0WzJdID0gYVsyXSAqIGJbMl07XG4gIG91dFszXSA9IGFbM10gKiBiWzNdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBEaXZpZGVzIHR3byB2ZWM0J3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBkaXZpZGUob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gLyBiWzBdO1xuICBvdXRbMV0gPSBhWzFdIC8gYlsxXTtcbiAgb3V0WzJdID0gYVsyXSAvIGJbMl07XG4gIG91dFszXSA9IGFbM10gLyBiWzNdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBNYXRoLmNlaWwgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWM0XG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHZlY3RvciB0byBjZWlsXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNlaWwob3V0LCBhKSB7XG4gIG91dFswXSA9IE1hdGguY2VpbChhWzBdKTtcbiAgb3V0WzFdID0gTWF0aC5jZWlsKGFbMV0pO1xuICBvdXRbMl0gPSBNYXRoLmNlaWwoYVsyXSk7XG4gIG91dFszXSA9IE1hdGguY2VpbChhWzNdKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTWF0aC5mbG9vciB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzRcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdmVjdG9yIHRvIGZsb29yXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZsb29yKG91dCwgYSkge1xuICBvdXRbMF0gPSBNYXRoLmZsb29yKGFbMF0pO1xuICBvdXRbMV0gPSBNYXRoLmZsb29yKGFbMV0pO1xuICBvdXRbMl0gPSBNYXRoLmZsb29yKGFbMl0pO1xuICBvdXRbM10gPSBNYXRoLmZsb29yKGFbM10pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtaW5pbXVtIG9mIHR3byB2ZWM0J3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtaW4ob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IE1hdGgubWluKGFbMF0sIGJbMF0pO1xuICBvdXRbMV0gPSBNYXRoLm1pbihhWzFdLCBiWzFdKTtcbiAgb3V0WzJdID0gTWF0aC5taW4oYVsyXSwgYlsyXSk7XG4gIG91dFszXSA9IE1hdGgubWluKGFbM10sIGJbM10pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtYXhpbXVtIG9mIHR3byB2ZWM0J3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtYXgob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IE1hdGgubWF4KGFbMF0sIGJbMF0pO1xuICBvdXRbMV0gPSBNYXRoLm1heChhWzFdLCBiWzFdKTtcbiAgb3V0WzJdID0gTWF0aC5tYXgoYVsyXSwgYlsyXSk7XG4gIG91dFszXSA9IE1hdGgubWF4KGFbM10sIGJbM10pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBNYXRoLnJvdW5kIHRoZSBjb21wb25lbnRzIG9mIGEgdmVjNFxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB2ZWN0b3IgdG8gcm91bmRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm91bmQob3V0LCBhKSB7XG4gIG91dFswXSA9IE1hdGgucm91bmQoYVswXSk7XG4gIG91dFsxXSA9IE1hdGgucm91bmQoYVsxXSk7XG4gIG91dFsyXSA9IE1hdGgucm91bmQoYVsyXSk7XG4gIG91dFszXSA9IE1hdGgucm91bmQoYVszXSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFNjYWxlcyBhIHZlYzQgYnkgYSBzY2FsYXIgbnVtYmVyXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSB2ZWN0b3IgdG8gc2NhbGVcbiAqIEBwYXJhbSB7TnVtYmVyfSBiIGFtb3VudCB0byBzY2FsZSB0aGUgdmVjdG9yIGJ5XG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICogYjtcbiAgb3V0WzFdID0gYVsxXSAqIGI7XG4gIG91dFsyXSA9IGFbMl0gKiBiO1xuICBvdXRbM10gPSBhWzNdICogYjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQWRkcyB0d28gdmVjNCdzIGFmdGVyIHNjYWxpbmcgdGhlIHNlY29uZCBvcGVyYW5kIGJ5IGEgc2NhbGFyIHZhbHVlXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSBzY2FsZSB0aGUgYW1vdW50IHRvIHNjYWxlIGIgYnkgYmVmb3JlIGFkZGluZ1xuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZUFuZEFkZChvdXQsIGEsIGIsIHNjYWxlKSB7XG4gIG91dFswXSA9IGFbMF0gKyBiWzBdICogc2NhbGU7XG4gIG91dFsxXSA9IGFbMV0gKyBiWzFdICogc2NhbGU7XG4gIG91dFsyXSA9IGFbMl0gKyBiWzJdICogc2NhbGU7XG4gIG91dFszXSA9IGFbM10gKyBiWzNdICogc2NhbGU7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGV1Y2xpZGlhbiBkaXN0YW5jZSBiZXR3ZWVuIHR3byB2ZWM0J3NcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIGJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZGlzdGFuY2UoYSwgYikge1xuICB2YXIgeCA9IGJbMF0gLSBhWzBdO1xuICB2YXIgeSA9IGJbMV0gLSBhWzFdO1xuICB2YXIgeiA9IGJbMl0gLSBhWzJdO1xuICB2YXIgdyA9IGJbM10gLSBhWzNdO1xuICByZXR1cm4gTWF0aC5oeXBvdCh4LCB5LCB6LCB3KTtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgc3F1YXJlZCBldWNsaWRpYW4gZGlzdGFuY2UgYmV0d2VlbiB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gc3F1YXJlZCBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIGJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3F1YXJlZERpc3RhbmNlKGEsIGIpIHtcbiAgdmFyIHggPSBiWzBdIC0gYVswXTtcbiAgdmFyIHkgPSBiWzFdIC0gYVsxXTtcbiAgdmFyIHogPSBiWzJdIC0gYVsyXTtcbiAgdmFyIHcgPSBiWzNdIC0gYVszXTtcbiAgcmV0dXJuIHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHcgKiB3O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBsZW5ndGggb2YgYSB2ZWM0XG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdmVjdG9yIHRvIGNhbGN1bGF0ZSBsZW5ndGggb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGxlbmd0aCBvZiBhXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxlbmd0aChhKSB7XG4gIHZhciB4ID0gYVswXTtcbiAgdmFyIHkgPSBhWzFdO1xuICB2YXIgeiA9IGFbMl07XG4gIHZhciB3ID0gYVszXTtcbiAgcmV0dXJuIE1hdGguaHlwb3QoeCwgeSwgeiwgdyk7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHNxdWFyZWQgbGVuZ3RoIG9mIGEgdmVjNFxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHZlY3RvciB0byBjYWxjdWxhdGUgc3F1YXJlZCBsZW5ndGggb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IHNxdWFyZWQgbGVuZ3RoIG9mIGFcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3F1YXJlZExlbmd0aChhKSB7XG4gIHZhciB4ID0gYVswXTtcbiAgdmFyIHkgPSBhWzFdO1xuICB2YXIgeiA9IGFbMl07XG4gIHZhciB3ID0gYVszXTtcbiAgcmV0dXJuIHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHcgKiB3O1xufVxuLyoqXG4gKiBOZWdhdGVzIHRoZSBjb21wb25lbnRzIG9mIGEgdmVjNFxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB2ZWN0b3IgdG8gbmVnYXRlXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG5lZ2F0ZShvdXQsIGEpIHtcbiAgb3V0WzBdID0gLWFbMF07XG4gIG91dFsxXSA9IC1hWzFdO1xuICBvdXRbMl0gPSAtYVsyXTtcbiAgb3V0WzNdID0gLWFbM107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGludmVyc2Ugb2YgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWM0XG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHZlY3RvciB0byBpbnZlcnRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaW52ZXJzZShvdXQsIGEpIHtcbiAgb3V0WzBdID0gMS4wIC8gYVswXTtcbiAgb3V0WzFdID0gMS4wIC8gYVsxXTtcbiAgb3V0WzJdID0gMS4wIC8gYVsyXTtcbiAgb3V0WzNdID0gMS4wIC8gYVszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTm9ybWFsaXplIGEgdmVjNFxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB2ZWN0b3IgdG8gbm9ybWFsaXplXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZShvdXQsIGEpIHtcbiAgdmFyIHggPSBhWzBdO1xuICB2YXIgeSA9IGFbMV07XG4gIHZhciB6ID0gYVsyXTtcbiAgdmFyIHcgPSBhWzNdO1xuICB2YXIgbGVuID0geCAqIHggKyB5ICogeSArIHogKiB6ICsgdyAqIHc7XG5cbiAgaWYgKGxlbiA+IDApIHtcbiAgICBsZW4gPSAxIC8gTWF0aC5zcXJ0KGxlbik7XG4gIH1cblxuICBvdXRbMF0gPSB4ICogbGVuO1xuICBvdXRbMV0gPSB5ICogbGVuO1xuICBvdXRbMl0gPSB6ICogbGVuO1xuICBvdXRbM10gPSB3ICogbGVuO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBkb3QgcHJvZHVjdCBvZiB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gZG90IHByb2R1Y3Qgb2YgYSBhbmQgYlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBkb3QoYSwgYikge1xuICByZXR1cm4gYVswXSAqIGJbMF0gKyBhWzFdICogYlsxXSArIGFbMl0gKiBiWzJdICsgYVszXSAqIGJbM107XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGNyb3NzLXByb2R1Y3Qgb2YgdGhyZWUgdmVjdG9ycyBpbiBhIDQtZGltZW5zaW9uYWwgc3BhY2VcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gcmVzdWx0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gVSB0aGUgZmlyc3QgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gViB0aGUgc2Vjb25kIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IFcgdGhlIHRoaXJkIHZlY3RvclxuICogQHJldHVybnMge3ZlYzR9IHJlc3VsdFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjcm9zcyhvdXQsIHUsIHYsIHcpIHtcbiAgdmFyIEEgPSB2WzBdICogd1sxXSAtIHZbMV0gKiB3WzBdLFxuICAgICAgQiA9IHZbMF0gKiB3WzJdIC0gdlsyXSAqIHdbMF0sXG4gICAgICBDID0gdlswXSAqIHdbM10gLSB2WzNdICogd1swXSxcbiAgICAgIEQgPSB2WzFdICogd1syXSAtIHZbMl0gKiB3WzFdLFxuICAgICAgRSA9IHZbMV0gKiB3WzNdIC0gdlszXSAqIHdbMV0sXG4gICAgICBGID0gdlsyXSAqIHdbM10gLSB2WzNdICogd1syXTtcbiAgdmFyIEcgPSB1WzBdO1xuICB2YXIgSCA9IHVbMV07XG4gIHZhciBJID0gdVsyXTtcbiAgdmFyIEogPSB1WzNdO1xuICBvdXRbMF0gPSBIICogRiAtIEkgKiBFICsgSiAqIEQ7XG4gIG91dFsxXSA9IC0oRyAqIEYpICsgSSAqIEMgLSBKICogQjtcbiAgb3V0WzJdID0gRyAqIEUgLSBIICogQyArIEogKiBBO1xuICBvdXRbM10gPSAtKEcgKiBEKSArIEggKiBCIC0gSSAqIEE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFBlcmZvcm1zIGEgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50LCBpbiB0aGUgcmFuZ2UgWzAtMV0sIGJldHdlZW4gdGhlIHR3byBpbnB1dHNcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbGVycChvdXQsIGEsIGIsIHQpIHtcbiAgdmFyIGF4ID0gYVswXTtcbiAgdmFyIGF5ID0gYVsxXTtcbiAgdmFyIGF6ID0gYVsyXTtcbiAgdmFyIGF3ID0gYVszXTtcbiAgb3V0WzBdID0gYXggKyB0ICogKGJbMF0gLSBheCk7XG4gIG91dFsxXSA9IGF5ICsgdCAqIChiWzFdIC0gYXkpO1xuICBvdXRbMl0gPSBheiArIHQgKiAoYlsyXSAtIGF6KTtcbiAgb3V0WzNdID0gYXcgKyB0ICogKGJbM10gLSBhdyk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdlbmVyYXRlcyBhIHJhbmRvbSB2ZWN0b3Igd2l0aCB0aGUgZ2l2ZW4gc2NhbGVcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtOdW1iZXJ9IFtzY2FsZV0gTGVuZ3RoIG9mIHRoZSByZXN1bHRpbmcgdmVjdG9yLiBJZiBvbW1pdHRlZCwgYSB1bml0IHZlY3RvciB3aWxsIGJlIHJldHVybmVkXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJhbmRvbShvdXQsIHNjYWxlKSB7XG4gIHNjYWxlID0gc2NhbGUgfHwgMS4wOyAvLyBNYXJzYWdsaWEsIEdlb3JnZS4gQ2hvb3NpbmcgYSBQb2ludCBmcm9tIHRoZSBTdXJmYWNlIG9mIGFcbiAgLy8gU3BoZXJlLiBBbm4uIE1hdGguIFN0YXRpc3QuIDQzICgxOTcyKSwgbm8uIDIsIDY0NS0tNjQ2LlxuICAvLyBodHRwOi8vcHJvamVjdGV1Y2xpZC5vcmcvZXVjbGlkLmFvbXMvMTE3NzY5MjY0NDtcblxuICB2YXIgdjEsIHYyLCB2MywgdjQ7XG4gIHZhciBzMSwgczI7XG5cbiAgZG8ge1xuICAgIHYxID0gZ2xNYXRyaXguUkFORE9NKCkgKiAyIC0gMTtcbiAgICB2MiA9IGdsTWF0cml4LlJBTkRPTSgpICogMiAtIDE7XG4gICAgczEgPSB2MSAqIHYxICsgdjIgKiB2MjtcbiAgfSB3aGlsZSAoczEgPj0gMSk7XG5cbiAgZG8ge1xuICAgIHYzID0gZ2xNYXRyaXguUkFORE9NKCkgKiAyIC0gMTtcbiAgICB2NCA9IGdsTWF0cml4LlJBTkRPTSgpICogMiAtIDE7XG4gICAgczIgPSB2MyAqIHYzICsgdjQgKiB2NDtcbiAgfSB3aGlsZSAoczIgPj0gMSk7XG5cbiAgdmFyIGQgPSBNYXRoLnNxcnQoKDEgLSBzMSkgLyBzMik7XG4gIG91dFswXSA9IHNjYWxlICogdjE7XG4gIG91dFsxXSA9IHNjYWxlICogdjI7XG4gIG91dFsyXSA9IHNjYWxlICogdjMgKiBkO1xuICBvdXRbM10gPSBzY2FsZSAqIHY0ICogZDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgdmVjNCB3aXRoIGEgbWF0NC5cbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIHZlY3RvciB0byB0cmFuc2Zvcm1cbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBtIG1hdHJpeCB0byB0cmFuc2Zvcm0gd2l0aFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1NYXQ0KG91dCwgYSwgbSkge1xuICB2YXIgeCA9IGFbMF0sXG4gICAgICB5ID0gYVsxXSxcbiAgICAgIHogPSBhWzJdLFxuICAgICAgdyA9IGFbM107XG4gIG91dFswXSA9IG1bMF0gKiB4ICsgbVs0XSAqIHkgKyBtWzhdICogeiArIG1bMTJdICogdztcbiAgb3V0WzFdID0gbVsxXSAqIHggKyBtWzVdICogeSArIG1bOV0gKiB6ICsgbVsxM10gKiB3O1xuICBvdXRbMl0gPSBtWzJdICogeCArIG1bNl0gKiB5ICsgbVsxMF0gKiB6ICsgbVsxNF0gKiB3O1xuICBvdXRbM10gPSBtWzNdICogeCArIG1bN10gKiB5ICsgbVsxMV0gKiB6ICsgbVsxNV0gKiB3O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSB2ZWM0IHdpdGggYSBxdWF0XG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSB2ZWN0b3IgdG8gdHJhbnNmb3JtXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gcSBxdWF0ZXJuaW9uIHRvIHRyYW5zZm9ybSB3aXRoXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybVF1YXQob3V0LCBhLCBxKSB7XG4gIHZhciB4ID0gYVswXSxcbiAgICAgIHkgPSBhWzFdLFxuICAgICAgeiA9IGFbMl07XG4gIHZhciBxeCA9IHFbMF0sXG4gICAgICBxeSA9IHFbMV0sXG4gICAgICBxeiA9IHFbMl0sXG4gICAgICBxdyA9IHFbM107IC8vIGNhbGN1bGF0ZSBxdWF0ICogdmVjXG5cbiAgdmFyIGl4ID0gcXcgKiB4ICsgcXkgKiB6IC0gcXogKiB5O1xuICB2YXIgaXkgPSBxdyAqIHkgKyBxeiAqIHggLSBxeCAqIHo7XG4gIHZhciBpeiA9IHF3ICogeiArIHF4ICogeSAtIHF5ICogeDtcbiAgdmFyIGl3ID0gLXF4ICogeCAtIHF5ICogeSAtIHF6ICogejsgLy8gY2FsY3VsYXRlIHJlc3VsdCAqIGludmVyc2UgcXVhdFxuXG4gIG91dFswXSA9IGl4ICogcXcgKyBpdyAqIC1xeCArIGl5ICogLXF6IC0gaXogKiAtcXk7XG4gIG91dFsxXSA9IGl5ICogcXcgKyBpdyAqIC1xeSArIGl6ICogLXF4IC0gaXggKiAtcXo7XG4gIG91dFsyXSA9IGl6ICogcXcgKyBpdyAqIC1xeiArIGl4ICogLXF5IC0gaXkgKiAtcXg7XG4gIG91dFszXSA9IGFbM107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFNldCB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzQgdG8gemVyb1xuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHplcm8ob3V0KSB7XG4gIG91dFswXSA9IDAuMDtcbiAgb3V0WzFdID0gMC4wO1xuICBvdXRbMl0gPSAwLjA7XG4gIG91dFszXSA9IDAuMDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIHZlY3RvclxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHZlY3RvciB0byByZXByZXNlbnQgYXMgYSBzdHJpbmdcbiAqIEByZXR1cm5zIHtTdHJpbmd9IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgdmVjdG9yXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN0cihhKSB7XG4gIHJldHVybiBcInZlYzQoXCIgKyBhWzBdICsgXCIsIFwiICsgYVsxXSArIFwiLCBcIiArIGFbMl0gKyBcIiwgXCIgKyBhWzNdICsgXCIpXCI7XG59XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIHZlY3RvcnMgaGF2ZSBleGFjdGx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uICh3aGVuIGNvbXBhcmVkIHdpdGggPT09KVxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIFRoZSBmaXJzdCB2ZWN0b3IuXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiBUaGUgc2Vjb25kIHZlY3Rvci5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSB2ZWN0b3JzIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBleGFjdEVxdWFscyhhLCBiKSB7XG4gIHJldHVybiBhWzBdID09PSBiWzBdICYmIGFbMV0gPT09IGJbMV0gJiYgYVsyXSA9PT0gYlsyXSAmJiBhWzNdID09PSBiWzNdO1xufVxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSB2ZWN0b3JzIGhhdmUgYXBwcm94aW1hdGVseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSBUaGUgZmlyc3QgdmVjdG9yLlxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgVGhlIHNlY29uZCB2ZWN0b3IuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmVjdG9ycyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGEsIGIpIHtcbiAgdmFyIGEwID0gYVswXSxcbiAgICAgIGExID0gYVsxXSxcbiAgICAgIGEyID0gYVsyXSxcbiAgICAgIGEzID0gYVszXTtcbiAgdmFyIGIwID0gYlswXSxcbiAgICAgIGIxID0gYlsxXSxcbiAgICAgIGIyID0gYlsyXSxcbiAgICAgIGIzID0gYlszXTtcbiAgcmV0dXJuIE1hdGguYWJzKGEwIC0gYjApIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEwKSwgTWF0aC5hYnMoYjApKSAmJiBNYXRoLmFicyhhMSAtIGIxKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMSksIE1hdGguYWJzKGIxKSkgJiYgTWF0aC5hYnMoYTIgLSBiMikgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTIpLCBNYXRoLmFicyhiMikpICYmIE1hdGguYWJzKGEzIC0gYjMpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEzKSwgTWF0aC5hYnMoYjMpKTtcbn1cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWM0LnN1YnRyYWN0fVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzdWIgPSBzdWJ0cmFjdDtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWM0Lm11bHRpcGx5fVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBtdWwgPSBtdWx0aXBseTtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWM0LmRpdmlkZX1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgZGl2ID0gZGl2aWRlO1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzQuZGlzdGFuY2V9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGRpc3QgPSBkaXN0YW5jZTtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWM0LnNxdWFyZWREaXN0YW5jZX1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgc3FyRGlzdCA9IHNxdWFyZWREaXN0YW5jZTtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWM0Lmxlbmd0aH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgbGVuID0gbGVuZ3RoO1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzQuc3F1YXJlZExlbmd0aH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgc3FyTGVuID0gc3F1YXJlZExlbmd0aDtcbi8qKlxuICogUGVyZm9ybSBzb21lIG9wZXJhdGlvbiBvdmVyIGFuIGFycmF5IG9mIHZlYzRzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGEgdGhlIGFycmF5IG9mIHZlY3RvcnMgdG8gaXRlcmF0ZSBvdmVyXG4gKiBAcGFyYW0ge051bWJlcn0gc3RyaWRlIE51bWJlciBvZiBlbGVtZW50cyBiZXR3ZWVuIHRoZSBzdGFydCBvZiBlYWNoIHZlYzQuIElmIDAgYXNzdW1lcyB0aWdodGx5IHBhY2tlZFxuICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCBOdW1iZXIgb2YgZWxlbWVudHMgdG8gc2tpcCBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcnJheVxuICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50IE51bWJlciBvZiB2ZWM0cyB0byBpdGVyYXRlIG92ZXIuIElmIDAgaXRlcmF0ZXMgb3ZlciBlbnRpcmUgYXJyYXlcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggdmVjdG9yIGluIHRoZSBhcnJheVxuICogQHBhcmFtIHtPYmplY3R9IFthcmddIGFkZGl0aW9uYWwgYXJndW1lbnQgdG8gcGFzcyB0byBmblxuICogQHJldHVybnMge0FycmF5fSBhXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGZvckVhY2ggPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB2ZWMgPSBjcmVhdGUoKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChhLCBzdHJpZGUsIG9mZnNldCwgY291bnQsIGZuLCBhcmcpIHtcbiAgICB2YXIgaSwgbDtcblxuICAgIGlmICghc3RyaWRlKSB7XG4gICAgICBzdHJpZGUgPSA0O1xuICAgIH1cblxuICAgIGlmICghb2Zmc2V0KSB7XG4gICAgICBvZmZzZXQgPSAwO1xuICAgIH1cblxuICAgIGlmIChjb3VudCkge1xuICAgICAgbCA9IE1hdGgubWluKGNvdW50ICogc3RyaWRlICsgb2Zmc2V0LCBhLmxlbmd0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGwgPSBhLmxlbmd0aDtcbiAgICB9XG5cbiAgICBmb3IgKGkgPSBvZmZzZXQ7IGkgPCBsOyBpICs9IHN0cmlkZSkge1xuICAgICAgdmVjWzBdID0gYVtpXTtcbiAgICAgIHZlY1sxXSA9IGFbaSArIDFdO1xuICAgICAgdmVjWzJdID0gYVtpICsgMl07XG4gICAgICB2ZWNbM10gPSBhW2kgKyAzXTtcbiAgICAgIGZuKHZlYywgdmVjLCBhcmcpO1xuICAgICAgYVtpXSA9IHZlY1swXTtcbiAgICAgIGFbaSArIDFdID0gdmVjWzFdO1xuICAgICAgYVtpICsgMl0gPSB2ZWNbMl07XG4gICAgICBhW2kgKyAzXSA9IHZlY1szXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYTtcbiAgfTtcbn0oKTsiLCAiaW1wb3J0ICogYXMgZ2xNYXRyaXggZnJvbSBcIi4vY29tbW9uLmpzXCI7XG5pbXBvcnQgKiBhcyBxdWF0IGZyb20gXCIuL3F1YXQuanNcIjtcbmltcG9ydCAqIGFzIG1hdDQgZnJvbSBcIi4vbWF0NC5qc1wiO1xuLyoqXG4gKiBEdWFsIFF1YXRlcm5pb248YnI+XG4gKiBGb3JtYXQ6IFtyZWFsLCBkdWFsXTxicj5cbiAqIFF1YXRlcm5pb24gZm9ybWF0OiBYWVpXPGJyPlxuICogTWFrZSBzdXJlIHRvIGhhdmUgbm9ybWFsaXplZCBkdWFsIHF1YXRlcm5pb25zLCBvdGhlcndpc2UgdGhlIGZ1bmN0aW9ucyBtYXkgbm90IHdvcmsgYXMgaW50ZW5kZWQuPGJyPlxuICogQG1vZHVsZSBxdWF0MlxuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBpZGVudGl0eSBkdWFsIHF1YXRcbiAqXG4gKiBAcmV0dXJucyB7cXVhdDJ9IGEgbmV3IGR1YWwgcXVhdGVybmlvbiBbcmVhbCAtPiByb3RhdGlvbiwgZHVhbCAtPiB0cmFuc2xhdGlvbl1cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKCkge1xuICB2YXIgZHEgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSg4KTtcblxuICBpZiAoZ2xNYXRyaXguQVJSQVlfVFlQRSAhPSBGbG9hdDMyQXJyYXkpIHtcbiAgICBkcVswXSA9IDA7XG4gICAgZHFbMV0gPSAwO1xuICAgIGRxWzJdID0gMDtcbiAgICBkcVs0XSA9IDA7XG4gICAgZHFbNV0gPSAwO1xuICAgIGRxWzZdID0gMDtcbiAgICBkcVs3XSA9IDA7XG4gIH1cblxuICBkcVszXSA9IDE7XG4gIHJldHVybiBkcTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBxdWF0IGluaXRpYWxpemVkIHdpdGggdmFsdWVzIGZyb20gYW4gZXhpc3RpbmcgcXVhdGVybmlvblxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSBkdWFsIHF1YXRlcm5pb24gdG8gY2xvbmVcbiAqIEByZXR1cm5zIHtxdWF0Mn0gbmV3IGR1YWwgcXVhdGVybmlvblxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lKGEpIHtcbiAgdmFyIGRxID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoOCk7XG4gIGRxWzBdID0gYVswXTtcbiAgZHFbMV0gPSBhWzFdO1xuICBkcVsyXSA9IGFbMl07XG4gIGRxWzNdID0gYVszXTtcbiAgZHFbNF0gPSBhWzRdO1xuICBkcVs1XSA9IGFbNV07XG4gIGRxWzZdID0gYVs2XTtcbiAgZHFbN10gPSBhWzddO1xuICByZXR1cm4gZHE7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgZHVhbCBxdWF0IGluaXRpYWxpemVkIHdpdGggdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB4MSBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkxIFkgY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0gejEgWiBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB3MSBXIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHgyIFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geTIgWSBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB6MiBaIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHcyIFcgY29tcG9uZW50XG4gKiBAcmV0dXJucyB7cXVhdDJ9IG5ldyBkdWFsIHF1YXRlcm5pb25cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVmFsdWVzKHgxLCB5MSwgejEsIHcxLCB4MiwgeTIsIHoyLCB3Mikge1xuICB2YXIgZHEgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSg4KTtcbiAgZHFbMF0gPSB4MTtcbiAgZHFbMV0gPSB5MTtcbiAgZHFbMl0gPSB6MTtcbiAgZHFbM10gPSB3MTtcbiAgZHFbNF0gPSB4MjtcbiAgZHFbNV0gPSB5MjtcbiAgZHFbNl0gPSB6MjtcbiAgZHFbN10gPSB3MjtcbiAgcmV0dXJuIGRxO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGR1YWwgcXVhdCBmcm9tIHRoZSBnaXZlbiB2YWx1ZXMgKHF1YXQgYW5kIHRyYW5zbGF0aW9uKVxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB4MSBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkxIFkgY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0gejEgWiBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB3MSBXIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHgyIFggY29tcG9uZW50ICh0cmFuc2xhdGlvbilcbiAqIEBwYXJhbSB7TnVtYmVyfSB5MiBZIGNvbXBvbmVudCAodHJhbnNsYXRpb24pXG4gKiBAcGFyYW0ge051bWJlcn0gejIgWiBjb21wb25lbnQgKHRyYW5zbGF0aW9uKVxuICogQHJldHVybnMge3F1YXQyfSBuZXcgZHVhbCBxdWF0ZXJuaW9uXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVJvdGF0aW9uVHJhbnNsYXRpb25WYWx1ZXMoeDEsIHkxLCB6MSwgdzEsIHgyLCB5MiwgejIpIHtcbiAgdmFyIGRxID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoOCk7XG4gIGRxWzBdID0geDE7XG4gIGRxWzFdID0geTE7XG4gIGRxWzJdID0gejE7XG4gIGRxWzNdID0gdzE7XG4gIHZhciBheCA9IHgyICogMC41LFxuICAgICAgYXkgPSB5MiAqIDAuNSxcbiAgICAgIGF6ID0gejIgKiAwLjU7XG4gIGRxWzRdID0gYXggKiB3MSArIGF5ICogejEgLSBheiAqIHkxO1xuICBkcVs1XSA9IGF5ICogdzEgKyBheiAqIHgxIC0gYXggKiB6MTtcbiAgZHFbNl0gPSBheiAqIHcxICsgYXggKiB5MSAtIGF5ICogeDE7XG4gIGRxWzddID0gLWF4ICogeDEgLSBheSAqIHkxIC0gYXogKiB6MTtcbiAgcmV0dXJuIGRxO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgZHVhbCBxdWF0IGZyb20gYSBxdWF0ZXJuaW9uIGFuZCBhIHRyYW5zbGF0aW9uXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBkdWFsIHF1YXRlcm5pb24gcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBxIGEgbm9ybWFsaXplZCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdCB0cmFubGF0aW9uIHZlY3RvclxuICogQHJldHVybnMge3F1YXQyfSBkdWFsIHF1YXRlcm5pb24gcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUm90YXRpb25UcmFuc2xhdGlvbihvdXQsIHEsIHQpIHtcbiAgdmFyIGF4ID0gdFswXSAqIDAuNSxcbiAgICAgIGF5ID0gdFsxXSAqIDAuNSxcbiAgICAgIGF6ID0gdFsyXSAqIDAuNSxcbiAgICAgIGJ4ID0gcVswXSxcbiAgICAgIGJ5ID0gcVsxXSxcbiAgICAgIGJ6ID0gcVsyXSxcbiAgICAgIGJ3ID0gcVszXTtcbiAgb3V0WzBdID0gYng7XG4gIG91dFsxXSA9IGJ5O1xuICBvdXRbMl0gPSBiejtcbiAgb3V0WzNdID0gYnc7XG4gIG91dFs0XSA9IGF4ICogYncgKyBheSAqIGJ6IC0gYXogKiBieTtcbiAgb3V0WzVdID0gYXkgKiBidyArIGF6ICogYnggLSBheCAqIGJ6O1xuICBvdXRbNl0gPSBheiAqIGJ3ICsgYXggKiBieSAtIGF5ICogYng7XG4gIG91dFs3XSA9IC1heCAqIGJ4IC0gYXkgKiBieSAtIGF6ICogYno7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBkdWFsIHF1YXQgZnJvbSBhIHRyYW5zbGF0aW9uXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBkdWFsIHF1YXRlcm5pb24gcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSB0IHRyYW5zbGF0aW9uIHZlY3RvclxuICogQHJldHVybnMge3F1YXQyfSBkdWFsIHF1YXRlcm5pb24gcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVHJhbnNsYXRpb24ob3V0LCB0KSB7XG4gIG91dFswXSA9IDA7XG4gIG91dFsxXSA9IDA7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDE7XG4gIG91dFs0XSA9IHRbMF0gKiAwLjU7XG4gIG91dFs1XSA9IHRbMV0gKiAwLjU7XG4gIG91dFs2XSA9IHRbMl0gKiAwLjU7XG4gIG91dFs3XSA9IDA7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBkdWFsIHF1YXQgZnJvbSBhIHF1YXRlcm5pb25cbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGR1YWwgcXVhdGVybmlvbiByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IHEgdGhlIHF1YXRlcm5pb25cbiAqIEByZXR1cm5zIHtxdWF0Mn0gZHVhbCBxdWF0ZXJuaW9uIHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVJvdGF0aW9uKG91dCwgcSkge1xuICBvdXRbMF0gPSBxWzBdO1xuICBvdXRbMV0gPSBxWzFdO1xuICBvdXRbMl0gPSBxWzJdO1xuICBvdXRbM10gPSBxWzNdO1xuICBvdXRbNF0gPSAwO1xuICBvdXRbNV0gPSAwO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGR1YWwgcXVhdCBmcm9tIGEgbWF0cml4ICg0eDQpXG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSBkdWFsIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBtYXRyaXhcbiAqIEByZXR1cm5zIHtxdWF0Mn0gZHVhbCBxdWF0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbU1hdDQob3V0LCBhKSB7XG4gIC8vVE9ETyBPcHRpbWl6ZSB0aGlzXG4gIHZhciBvdXRlciA9IHF1YXQuY3JlYXRlKCk7XG4gIG1hdDQuZ2V0Um90YXRpb24ob3V0ZXIsIGEpO1xuICB2YXIgdCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDMpO1xuICBtYXQ0LmdldFRyYW5zbGF0aW9uKHQsIGEpO1xuICBmcm9tUm90YXRpb25UcmFuc2xhdGlvbihvdXQsIG91dGVyLCB0KTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ29weSB0aGUgdmFsdWVzIGZyb20gb25lIGR1YWwgcXVhdCB0byBhbm90aGVyXG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgZHVhbCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgdGhlIHNvdXJjZSBkdWFsIHF1YXRlcm5pb25cbiAqIEByZXR1cm5zIHtxdWF0Mn0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY29weShvdXQsIGEpIHtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgb3V0WzNdID0gYVszXTtcbiAgb3V0WzRdID0gYVs0XTtcbiAgb3V0WzVdID0gYVs1XTtcbiAgb3V0WzZdID0gYVs2XTtcbiAgb3V0WzddID0gYVs3XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2V0IGEgZHVhbCBxdWF0IHRvIHRoZSBpZGVudGl0eSBkdWFsIHF1YXRlcm5pb25cbiAqXG4gKiBAcGFyYW0ge3F1YXQyfSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpZGVudGl0eShvdXQpIHtcbiAgb3V0WzBdID0gMDtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMTtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gMDtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2V0IHRoZSBjb21wb25lbnRzIG9mIGEgZHVhbCBxdWF0IHRvIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge3F1YXQyfSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge051bWJlcn0geDEgWCBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB5MSBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHoxIFogY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0gdzEgVyBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB4MiBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkyIFkgY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0gejIgWiBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB3MiBXIGNvbXBvbmVudFxuICogQHJldHVybnMge3F1YXQyfSBvdXRcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXQob3V0LCB4MSwgeTEsIHoxLCB3MSwgeDIsIHkyLCB6MiwgdzIpIHtcbiAgb3V0WzBdID0geDE7XG4gIG91dFsxXSA9IHkxO1xuICBvdXRbMl0gPSB6MTtcbiAgb3V0WzNdID0gdzE7XG4gIG91dFs0XSA9IHgyO1xuICBvdXRbNV0gPSB5MjtcbiAgb3V0WzZdID0gejI7XG4gIG91dFs3XSA9IHcyO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZXRzIHRoZSByZWFsIHBhcnQgb2YgYSBkdWFsIHF1YXRcbiAqIEBwYXJhbSAge3F1YXR9IG91dCByZWFsIHBhcnRcbiAqIEBwYXJhbSAge1JlYWRvbmx5UXVhdDJ9IGEgRHVhbCBRdWF0ZXJuaW9uXG4gKiBAcmV0dXJuIHtxdWF0fSByZWFsIHBhcnRcbiAqL1xuXG5leHBvcnQgdmFyIGdldFJlYWwgPSBxdWF0LmNvcHk7XG4vKipcbiAqIEdldHMgdGhlIGR1YWwgcGFydCBvZiBhIGR1YWwgcXVhdFxuICogQHBhcmFtICB7cXVhdH0gb3V0IGR1YWwgcGFydFxuICogQHBhcmFtICB7UmVhZG9ubHlRdWF0Mn0gYSBEdWFsIFF1YXRlcm5pb25cbiAqIEByZXR1cm4ge3F1YXR9IGR1YWwgcGFydFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREdWFsKG91dCwgYSkge1xuICBvdXRbMF0gPSBhWzRdO1xuICBvdXRbMV0gPSBhWzVdO1xuICBvdXRbMl0gPSBhWzZdO1xuICBvdXRbM10gPSBhWzddO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTZXQgdGhlIHJlYWwgY29tcG9uZW50IG9mIGEgZHVhbCBxdWF0IHRvIHRoZSBnaXZlbiBxdWF0ZXJuaW9uXG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IHEgYSBxdWF0ZXJuaW9uIHJlcHJlc2VudGluZyB0aGUgcmVhbCBwYXJ0XG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzZXRSZWFsID0gcXVhdC5jb3B5O1xuLyoqXG4gKiBTZXQgdGhlIGR1YWwgY29tcG9uZW50IG9mIGEgZHVhbCBxdWF0IHRvIHRoZSBnaXZlbiBxdWF0ZXJuaW9uXG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IHEgYSBxdWF0ZXJuaW9uIHJlcHJlc2VudGluZyB0aGUgZHVhbCBwYXJ0XG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNldER1YWwob3V0LCBxKSB7XG4gIG91dFs0XSA9IHFbMF07XG4gIG91dFs1XSA9IHFbMV07XG4gIG91dFs2XSA9IHFbMl07XG4gIG91dFs3XSA9IHFbM107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdldHMgdGhlIHRyYW5zbGF0aW9uIG9mIGEgbm9ybWFsaXplZCBkdWFsIHF1YXRcbiAqIEBwYXJhbSAge3ZlYzN9IG91dCB0cmFuc2xhdGlvblxuICogQHBhcmFtICB7UmVhZG9ubHlRdWF0Mn0gYSBEdWFsIFF1YXRlcm5pb24gdG8gYmUgZGVjb21wb3NlZFxuICogQHJldHVybiB7dmVjM30gdHJhbnNsYXRpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNsYXRpb24ob3V0LCBhKSB7XG4gIHZhciBheCA9IGFbNF0sXG4gICAgICBheSA9IGFbNV0sXG4gICAgICBheiA9IGFbNl0sXG4gICAgICBhdyA9IGFbN10sXG4gICAgICBieCA9IC1hWzBdLFxuICAgICAgYnkgPSAtYVsxXSxcbiAgICAgIGJ6ID0gLWFbMl0sXG4gICAgICBidyA9IGFbM107XG4gIG91dFswXSA9IChheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5KSAqIDI7XG4gIG91dFsxXSA9IChheSAqIGJ3ICsgYXcgKiBieSArIGF6ICogYnggLSBheCAqIGJ6KSAqIDI7XG4gIG91dFsyXSA9IChheiAqIGJ3ICsgYXcgKiBieiArIGF4ICogYnkgLSBheSAqIGJ4KSAqIDI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFRyYW5zbGF0ZXMgYSBkdWFsIHF1YXQgYnkgdGhlIGdpdmVuIHZlY3RvclxuICpcbiAqIEBwYXJhbSB7cXVhdDJ9IG91dCB0aGUgcmVjZWl2aW5nIGR1YWwgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIHRoZSBkdWFsIHF1YXRlcm5pb24gdG8gdHJhbnNsYXRlXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdiB2ZWN0b3IgdG8gdHJhbnNsYXRlIGJ5XG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2xhdGUob3V0LCBhLCB2KSB7XG4gIHZhciBheDEgPSBhWzBdLFxuICAgICAgYXkxID0gYVsxXSxcbiAgICAgIGF6MSA9IGFbMl0sXG4gICAgICBhdzEgPSBhWzNdLFxuICAgICAgYngxID0gdlswXSAqIDAuNSxcbiAgICAgIGJ5MSA9IHZbMV0gKiAwLjUsXG4gICAgICBiejEgPSB2WzJdICogMC41LFxuICAgICAgYXgyID0gYVs0XSxcbiAgICAgIGF5MiA9IGFbNV0sXG4gICAgICBhejIgPSBhWzZdLFxuICAgICAgYXcyID0gYVs3XTtcbiAgb3V0WzBdID0gYXgxO1xuICBvdXRbMV0gPSBheTE7XG4gIG91dFsyXSA9IGF6MTtcbiAgb3V0WzNdID0gYXcxO1xuICBvdXRbNF0gPSBhdzEgKiBieDEgKyBheTEgKiBiejEgLSBhejEgKiBieTEgKyBheDI7XG4gIG91dFs1XSA9IGF3MSAqIGJ5MSArIGF6MSAqIGJ4MSAtIGF4MSAqIGJ6MSArIGF5MjtcbiAgb3V0WzZdID0gYXcxICogYnoxICsgYXgxICogYnkxIC0gYXkxICogYngxICsgYXoyO1xuICBvdXRbN10gPSAtYXgxICogYngxIC0gYXkxICogYnkxIC0gYXoxICogYnoxICsgYXcyO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGVzIGEgZHVhbCBxdWF0IGFyb3VuZCB0aGUgWCBheGlzXG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgZHVhbCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgdGhlIGR1YWwgcXVhdGVybmlvbiB0byByb3RhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWQgaG93IGZhciBzaG91bGQgdGhlIHJvdGF0aW9uIGJlXG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVYKG91dCwgYSwgcmFkKSB7XG4gIHZhciBieCA9IC1hWzBdLFxuICAgICAgYnkgPSAtYVsxXSxcbiAgICAgIGJ6ID0gLWFbMl0sXG4gICAgICBidyA9IGFbM10sXG4gICAgICBheCA9IGFbNF0sXG4gICAgICBheSA9IGFbNV0sXG4gICAgICBheiA9IGFbNl0sXG4gICAgICBhdyA9IGFbN10sXG4gICAgICBheDEgPSBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5LFxuICAgICAgYXkxID0gYXkgKiBidyArIGF3ICogYnkgKyBheiAqIGJ4IC0gYXggKiBieixcbiAgICAgIGF6MSA9IGF6ICogYncgKyBhdyAqIGJ6ICsgYXggKiBieSAtIGF5ICogYngsXG4gICAgICBhdzEgPSBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6O1xuICBxdWF0LnJvdGF0ZVgob3V0LCBhLCByYWQpO1xuICBieCA9IG91dFswXTtcbiAgYnkgPSBvdXRbMV07XG4gIGJ6ID0gb3V0WzJdO1xuICBidyA9IG91dFszXTtcbiAgb3V0WzRdID0gYXgxICogYncgKyBhdzEgKiBieCArIGF5MSAqIGJ6IC0gYXoxICogYnk7XG4gIG91dFs1XSA9IGF5MSAqIGJ3ICsgYXcxICogYnkgKyBhejEgKiBieCAtIGF4MSAqIGJ6O1xuICBvdXRbNl0gPSBhejEgKiBidyArIGF3MSAqIGJ6ICsgYXgxICogYnkgLSBheTEgKiBieDtcbiAgb3V0WzddID0gYXcxICogYncgLSBheDEgKiBieCAtIGF5MSAqIGJ5IC0gYXoxICogYno7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZXMgYSBkdWFsIHF1YXQgYXJvdW5kIHRoZSBZIGF4aXNcbiAqXG4gKiBAcGFyYW0ge3F1YXQyfSBvdXQgdGhlIHJlY2VpdmluZyBkdWFsIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSB0aGUgZHVhbCBxdWF0ZXJuaW9uIHRvIHJvdGF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IHJhZCBob3cgZmFyIHNob3VsZCB0aGUgcm90YXRpb24gYmVcbiAqIEByZXR1cm5zIHtxdWF0Mn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVkob3V0LCBhLCByYWQpIHtcbiAgdmFyIGJ4ID0gLWFbMF0sXG4gICAgICBieSA9IC1hWzFdLFxuICAgICAgYnogPSAtYVsyXSxcbiAgICAgIGJ3ID0gYVszXSxcbiAgICAgIGF4ID0gYVs0XSxcbiAgICAgIGF5ID0gYVs1XSxcbiAgICAgIGF6ID0gYVs2XSxcbiAgICAgIGF3ID0gYVs3XSxcbiAgICAgIGF4MSA9IGF4ICogYncgKyBhdyAqIGJ4ICsgYXkgKiBieiAtIGF6ICogYnksXG4gICAgICBheTEgPSBheSAqIGJ3ICsgYXcgKiBieSArIGF6ICogYnggLSBheCAqIGJ6LFxuICAgICAgYXoxID0gYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieCxcbiAgICAgIGF3MSA9IGF3ICogYncgLSBheCAqIGJ4IC0gYXkgKiBieSAtIGF6ICogYno7XG4gIHF1YXQucm90YXRlWShvdXQsIGEsIHJhZCk7XG4gIGJ4ID0gb3V0WzBdO1xuICBieSA9IG91dFsxXTtcbiAgYnogPSBvdXRbMl07XG4gIGJ3ID0gb3V0WzNdO1xuICBvdXRbNF0gPSBheDEgKiBidyArIGF3MSAqIGJ4ICsgYXkxICogYnogLSBhejEgKiBieTtcbiAgb3V0WzVdID0gYXkxICogYncgKyBhdzEgKiBieSArIGF6MSAqIGJ4IC0gYXgxICogYno7XG4gIG91dFs2XSA9IGF6MSAqIGJ3ICsgYXcxICogYnogKyBheDEgKiBieSAtIGF5MSAqIGJ4O1xuICBvdXRbN10gPSBhdzEgKiBidyAtIGF4MSAqIGJ4IC0gYXkxICogYnkgLSBhejEgKiBiejtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlcyBhIGR1YWwgcXVhdCBhcm91bmQgdGhlIFogYXhpc1xuICpcbiAqIEBwYXJhbSB7cXVhdDJ9IG91dCB0aGUgcmVjZWl2aW5nIGR1YWwgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIHRoZSBkdWFsIHF1YXRlcm5pb24gdG8gcm90YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkIGhvdyBmYXIgc2hvdWxkIHRoZSByb3RhdGlvbiBiZVxuICogQHJldHVybnMge3F1YXQyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlWihvdXQsIGEsIHJhZCkge1xuICB2YXIgYnggPSAtYVswXSxcbiAgICAgIGJ5ID0gLWFbMV0sXG4gICAgICBieiA9IC1hWzJdLFxuICAgICAgYncgPSBhWzNdLFxuICAgICAgYXggPSBhWzRdLFxuICAgICAgYXkgPSBhWzVdLFxuICAgICAgYXogPSBhWzZdLFxuICAgICAgYXcgPSBhWzddLFxuICAgICAgYXgxID0gYXggKiBidyArIGF3ICogYnggKyBheSAqIGJ6IC0gYXogKiBieSxcbiAgICAgIGF5MSA9IGF5ICogYncgKyBhdyAqIGJ5ICsgYXogKiBieCAtIGF4ICogYnosXG4gICAgICBhejEgPSBheiAqIGJ3ICsgYXcgKiBieiArIGF4ICogYnkgLSBheSAqIGJ4LFxuICAgICAgYXcxID0gYXcgKiBidyAtIGF4ICogYnggLSBheSAqIGJ5IC0gYXogKiBiejtcbiAgcXVhdC5yb3RhdGVaKG91dCwgYSwgcmFkKTtcbiAgYnggPSBvdXRbMF07XG4gIGJ5ID0gb3V0WzFdO1xuICBieiA9IG91dFsyXTtcbiAgYncgPSBvdXRbM107XG4gIG91dFs0XSA9IGF4MSAqIGJ3ICsgYXcxICogYnggKyBheTEgKiBieiAtIGF6MSAqIGJ5O1xuICBvdXRbNV0gPSBheTEgKiBidyArIGF3MSAqIGJ5ICsgYXoxICogYnggLSBheDEgKiBiejtcbiAgb3V0WzZdID0gYXoxICogYncgKyBhdzEgKiBieiArIGF4MSAqIGJ5IC0gYXkxICogYng7XG4gIG91dFs3XSA9IGF3MSAqIGJ3IC0gYXgxICogYnggLSBheTEgKiBieSAtIGF6MSAqIGJ6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGVzIGEgZHVhbCBxdWF0IGJ5IGEgZ2l2ZW4gcXVhdGVybmlvbiAoYSAqIHEpXG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgZHVhbCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgdGhlIGR1YWwgcXVhdGVybmlvbiB0byByb3RhdGVcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBxIHF1YXRlcm5pb24gdG8gcm90YXRlIGJ5XG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVCeVF1YXRBcHBlbmQob3V0LCBhLCBxKSB7XG4gIHZhciBxeCA9IHFbMF0sXG4gICAgICBxeSA9IHFbMV0sXG4gICAgICBxeiA9IHFbMl0sXG4gICAgICBxdyA9IHFbM10sXG4gICAgICBheCA9IGFbMF0sXG4gICAgICBheSA9IGFbMV0sXG4gICAgICBheiA9IGFbMl0sXG4gICAgICBhdyA9IGFbM107XG4gIG91dFswXSA9IGF4ICogcXcgKyBhdyAqIHF4ICsgYXkgKiBxeiAtIGF6ICogcXk7XG4gIG91dFsxXSA9IGF5ICogcXcgKyBhdyAqIHF5ICsgYXogKiBxeCAtIGF4ICogcXo7XG4gIG91dFsyXSA9IGF6ICogcXcgKyBhdyAqIHF6ICsgYXggKiBxeSAtIGF5ICogcXg7XG4gIG91dFszXSA9IGF3ICogcXcgLSBheCAqIHF4IC0gYXkgKiBxeSAtIGF6ICogcXo7XG4gIGF4ID0gYVs0XTtcbiAgYXkgPSBhWzVdO1xuICBheiA9IGFbNl07XG4gIGF3ID0gYVs3XTtcbiAgb3V0WzRdID0gYXggKiBxdyArIGF3ICogcXggKyBheSAqIHF6IC0gYXogKiBxeTtcbiAgb3V0WzVdID0gYXkgKiBxdyArIGF3ICogcXkgKyBheiAqIHF4IC0gYXggKiBxejtcbiAgb3V0WzZdID0gYXogKiBxdyArIGF3ICogcXogKyBheCAqIHF5IC0gYXkgKiBxeDtcbiAgb3V0WzddID0gYXcgKiBxdyAtIGF4ICogcXggLSBheSAqIHF5IC0gYXogKiBxejtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlcyBhIGR1YWwgcXVhdCBieSBhIGdpdmVuIHF1YXRlcm5pb24gKHEgKiBhKVxuICpcbiAqIEBwYXJhbSB7cXVhdDJ9IG91dCB0aGUgcmVjZWl2aW5nIGR1YWwgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IHEgcXVhdGVybmlvbiB0byByb3RhdGUgYnlcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSB0aGUgZHVhbCBxdWF0ZXJuaW9uIHRvIHJvdGF0ZVxuICogQHJldHVybnMge3F1YXQyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlQnlRdWF0UHJlcGVuZChvdXQsIHEsIGEpIHtcbiAgdmFyIHF4ID0gcVswXSxcbiAgICAgIHF5ID0gcVsxXSxcbiAgICAgIHF6ID0gcVsyXSxcbiAgICAgIHF3ID0gcVszXSxcbiAgICAgIGJ4ID0gYVswXSxcbiAgICAgIGJ5ID0gYVsxXSxcbiAgICAgIGJ6ID0gYVsyXSxcbiAgICAgIGJ3ID0gYVszXTtcbiAgb3V0WzBdID0gcXggKiBidyArIHF3ICogYnggKyBxeSAqIGJ6IC0gcXogKiBieTtcbiAgb3V0WzFdID0gcXkgKiBidyArIHF3ICogYnkgKyBxeiAqIGJ4IC0gcXggKiBiejtcbiAgb3V0WzJdID0gcXogKiBidyArIHF3ICogYnogKyBxeCAqIGJ5IC0gcXkgKiBieDtcbiAgb3V0WzNdID0gcXcgKiBidyAtIHF4ICogYnggLSBxeSAqIGJ5IC0gcXogKiBiejtcbiAgYnggPSBhWzRdO1xuICBieSA9IGFbNV07XG4gIGJ6ID0gYVs2XTtcbiAgYncgPSBhWzddO1xuICBvdXRbNF0gPSBxeCAqIGJ3ICsgcXcgKiBieCArIHF5ICogYnogLSBxeiAqIGJ5O1xuICBvdXRbNV0gPSBxeSAqIGJ3ICsgcXcgKiBieSArIHF6ICogYnggLSBxeCAqIGJ6O1xuICBvdXRbNl0gPSBxeiAqIGJ3ICsgcXcgKiBieiArIHF4ICogYnkgLSBxeSAqIGJ4O1xuICBvdXRbN10gPSBxdyAqIGJ3IC0gcXggKiBieCAtIHF5ICogYnkgLSBxeiAqIGJ6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGVzIGEgZHVhbCBxdWF0IGFyb3VuZCBhIGdpdmVuIGF4aXMuIERvZXMgdGhlIG5vcm1hbGlzYXRpb24gYXV0b21hdGljYWxseVxuICpcbiAqIEBwYXJhbSB7cXVhdDJ9IG91dCB0aGUgcmVjZWl2aW5nIGR1YWwgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIHRoZSBkdWFsIHF1YXRlcm5pb24gdG8gcm90YXRlXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYXhpcyB0aGUgYXhpcyB0byByb3RhdGUgYXJvdW5kXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIGhvdyBmYXIgdGhlIHJvdGF0aW9uIHNob3VsZCBiZVxuICogQHJldHVybnMge3F1YXQyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlQXJvdW5kQXhpcyhvdXQsIGEsIGF4aXMsIHJhZCkge1xuICAvL1NwZWNpYWwgY2FzZSBmb3IgcmFkID0gMFxuICBpZiAoTWF0aC5hYnMocmFkKSA8IGdsTWF0cml4LkVQU0lMT04pIHtcbiAgICByZXR1cm4gY29weShvdXQsIGEpO1xuICB9XG5cbiAgdmFyIGF4aXNMZW5ndGggPSBNYXRoLmh5cG90KGF4aXNbMF0sIGF4aXNbMV0sIGF4aXNbMl0pO1xuICByYWQgPSByYWQgKiAwLjU7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkKTtcbiAgdmFyIGJ4ID0gcyAqIGF4aXNbMF0gLyBheGlzTGVuZ3RoO1xuICB2YXIgYnkgPSBzICogYXhpc1sxXSAvIGF4aXNMZW5ndGg7XG4gIHZhciBieiA9IHMgKiBheGlzWzJdIC8gYXhpc0xlbmd0aDtcbiAgdmFyIGJ3ID0gTWF0aC5jb3MocmFkKTtcbiAgdmFyIGF4MSA9IGFbMF0sXG4gICAgICBheTEgPSBhWzFdLFxuICAgICAgYXoxID0gYVsyXSxcbiAgICAgIGF3MSA9IGFbM107XG4gIG91dFswXSA9IGF4MSAqIGJ3ICsgYXcxICogYnggKyBheTEgKiBieiAtIGF6MSAqIGJ5O1xuICBvdXRbMV0gPSBheTEgKiBidyArIGF3MSAqIGJ5ICsgYXoxICogYnggLSBheDEgKiBiejtcbiAgb3V0WzJdID0gYXoxICogYncgKyBhdzEgKiBieiArIGF4MSAqIGJ5IC0gYXkxICogYng7XG4gIG91dFszXSA9IGF3MSAqIGJ3IC0gYXgxICogYnggLSBheTEgKiBieSAtIGF6MSAqIGJ6O1xuICB2YXIgYXggPSBhWzRdLFxuICAgICAgYXkgPSBhWzVdLFxuICAgICAgYXogPSBhWzZdLFxuICAgICAgYXcgPSBhWzddO1xuICBvdXRbNF0gPSBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5O1xuICBvdXRbNV0gPSBheSAqIGJ3ICsgYXcgKiBieSArIGF6ICogYnggLSBheCAqIGJ6O1xuICBvdXRbNl0gPSBheiAqIGJ3ICsgYXcgKiBieiArIGF4ICogYnkgLSBheSAqIGJ4O1xuICBvdXRbN10gPSBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBBZGRzIHR3byBkdWFsIHF1YXQnc1xuICpcbiAqIEBwYXJhbSB7cXVhdDJ9IG91dCB0aGUgcmVjZWl2aW5nIGR1YWwgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSArIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gKyBiWzFdO1xuICBvdXRbMl0gPSBhWzJdICsgYlsyXTtcbiAgb3V0WzNdID0gYVszXSArIGJbM107XG4gIG91dFs0XSA9IGFbNF0gKyBiWzRdO1xuICBvdXRbNV0gPSBhWzVdICsgYls1XTtcbiAgb3V0WzZdID0gYVs2XSArIGJbNl07XG4gIG91dFs3XSA9IGFbN10gKyBiWzddO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBNdWx0aXBsaWVzIHR3byBkdWFsIHF1YXQnc1xuICpcbiAqIEBwYXJhbSB7cXVhdDJ9IG91dCB0aGUgcmVjZWl2aW5nIGR1YWwgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aXBseShvdXQsIGEsIGIpIHtcbiAgdmFyIGF4MCA9IGFbMF0sXG4gICAgICBheTAgPSBhWzFdLFxuICAgICAgYXowID0gYVsyXSxcbiAgICAgIGF3MCA9IGFbM10sXG4gICAgICBieDEgPSBiWzRdLFxuICAgICAgYnkxID0gYls1XSxcbiAgICAgIGJ6MSA9IGJbNl0sXG4gICAgICBidzEgPSBiWzddLFxuICAgICAgYXgxID0gYVs0XSxcbiAgICAgIGF5MSA9IGFbNV0sXG4gICAgICBhejEgPSBhWzZdLFxuICAgICAgYXcxID0gYVs3XSxcbiAgICAgIGJ4MCA9IGJbMF0sXG4gICAgICBieTAgPSBiWzFdLFxuICAgICAgYnowID0gYlsyXSxcbiAgICAgIGJ3MCA9IGJbM107XG4gIG91dFswXSA9IGF4MCAqIGJ3MCArIGF3MCAqIGJ4MCArIGF5MCAqIGJ6MCAtIGF6MCAqIGJ5MDtcbiAgb3V0WzFdID0gYXkwICogYncwICsgYXcwICogYnkwICsgYXowICogYngwIC0gYXgwICogYnowO1xuICBvdXRbMl0gPSBhejAgKiBidzAgKyBhdzAgKiBiejAgKyBheDAgKiBieTAgLSBheTAgKiBieDA7XG4gIG91dFszXSA9IGF3MCAqIGJ3MCAtIGF4MCAqIGJ4MCAtIGF5MCAqIGJ5MCAtIGF6MCAqIGJ6MDtcbiAgb3V0WzRdID0gYXgwICogYncxICsgYXcwICogYngxICsgYXkwICogYnoxIC0gYXowICogYnkxICsgYXgxICogYncwICsgYXcxICogYngwICsgYXkxICogYnowIC0gYXoxICogYnkwO1xuICBvdXRbNV0gPSBheTAgKiBidzEgKyBhdzAgKiBieTEgKyBhejAgKiBieDEgLSBheDAgKiBiejEgKyBheTEgKiBidzAgKyBhdzEgKiBieTAgKyBhejEgKiBieDAgLSBheDEgKiBiejA7XG4gIG91dFs2XSA9IGF6MCAqIGJ3MSArIGF3MCAqIGJ6MSArIGF4MCAqIGJ5MSAtIGF5MCAqIGJ4MSArIGF6MSAqIGJ3MCArIGF3MSAqIGJ6MCArIGF4MSAqIGJ5MCAtIGF5MSAqIGJ4MDtcbiAgb3V0WzddID0gYXcwICogYncxIC0gYXgwICogYngxIC0gYXkwICogYnkxIC0gYXowICogYnoxICsgYXcxICogYncwIC0gYXgxICogYngwIC0gYXkxICogYnkwIC0gYXoxICogYnowO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHF1YXQyLm11bHRpcGx5fVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBtdWwgPSBtdWx0aXBseTtcbi8qKlxuICogU2NhbGVzIGEgZHVhbCBxdWF0IGJ5IGEgc2NhbGFyIG51bWJlclxuICpcbiAqIEBwYXJhbSB7cXVhdDJ9IG91dCB0aGUgcmVjZWl2aW5nIGR1YWwgcXVhdFxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIHRoZSBkdWFsIHF1YXQgdG8gc2NhbGVcbiAqIEBwYXJhbSB7TnVtYmVyfSBiIGFtb3VudCB0byBzY2FsZSB0aGUgZHVhbCBxdWF0IGJ5XG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICogYjtcbiAgb3V0WzFdID0gYVsxXSAqIGI7XG4gIG91dFsyXSA9IGFbMl0gKiBiO1xuICBvdXRbM10gPSBhWzNdICogYjtcbiAgb3V0WzRdID0gYVs0XSAqIGI7XG4gIG91dFs1XSA9IGFbNV0gKiBiO1xuICBvdXRbNl0gPSBhWzZdICogYjtcbiAgb3V0WzddID0gYVs3XSAqIGI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGRvdCBwcm9kdWN0IG9mIHR3byBkdWFsIHF1YXQncyAoVGhlIGRvdCBwcm9kdWN0IG9mIHRoZSByZWFsIHBhcnRzKVxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gZG90IHByb2R1Y3Qgb2YgYSBhbmQgYlxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBkb3QgPSBxdWF0LmRvdDtcbi8qKlxuICogUGVyZm9ybXMgYSBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHR3byBkdWFsIHF1YXRzJ3NcbiAqIE5PVEU6IFRoZSByZXN1bHRpbmcgZHVhbCBxdWF0ZXJuaW9ucyB3b24ndCBhbHdheXMgYmUgbm9ybWFsaXplZCAoVGhlIGVycm9yIGlzIG1vc3Qgbm90aWNlYWJsZSB3aGVuIHQgPSAwLjUpXG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgZHVhbCBxdWF0XG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50LCBpbiB0aGUgcmFuZ2UgWzAtMV0sIGJldHdlZW4gdGhlIHR3byBpbnB1dHNcbiAqIEByZXR1cm5zIHtxdWF0Mn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxlcnAob3V0LCBhLCBiLCB0KSB7XG4gIHZhciBtdCA9IDEgLSB0O1xuICBpZiAoZG90KGEsIGIpIDwgMCkgdCA9IC10O1xuICBvdXRbMF0gPSBhWzBdICogbXQgKyBiWzBdICogdDtcbiAgb3V0WzFdID0gYVsxXSAqIG10ICsgYlsxXSAqIHQ7XG4gIG91dFsyXSA9IGFbMl0gKiBtdCArIGJbMl0gKiB0O1xuICBvdXRbM10gPSBhWzNdICogbXQgKyBiWzNdICogdDtcbiAgb3V0WzRdID0gYVs0XSAqIG10ICsgYls0XSAqIHQ7XG4gIG91dFs1XSA9IGFbNV0gKiBtdCArIGJbNV0gKiB0O1xuICBvdXRbNl0gPSBhWzZdICogbXQgKyBiWzZdICogdDtcbiAgb3V0WzddID0gYVs3XSAqIG10ICsgYls3XSAqIHQ7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGludmVyc2Ugb2YgYSBkdWFsIHF1YXQuIElmIHRoZXkgYXJlIG5vcm1hbGl6ZWQsIGNvbmp1Z2F0ZSBpcyBjaGVhcGVyXG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgZHVhbCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgZHVhbCBxdWF0IHRvIGNhbGN1bGF0ZSBpbnZlcnNlIG9mXG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpbnZlcnQob3V0LCBhKSB7XG4gIHZhciBzcWxlbiA9IHNxdWFyZWRMZW5ndGgoYSk7XG4gIG91dFswXSA9IC1hWzBdIC8gc3FsZW47XG4gIG91dFsxXSA9IC1hWzFdIC8gc3FsZW47XG4gIG91dFsyXSA9IC1hWzJdIC8gc3FsZW47XG4gIG91dFszXSA9IGFbM10gLyBzcWxlbjtcbiAgb3V0WzRdID0gLWFbNF0gLyBzcWxlbjtcbiAgb3V0WzVdID0gLWFbNV0gLyBzcWxlbjtcbiAgb3V0WzZdID0gLWFbNl0gLyBzcWxlbjtcbiAgb3V0WzddID0gYVs3XSAvIHNxbGVuO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBjb25qdWdhdGUgb2YgYSBkdWFsIHF1YXRcbiAqIElmIHRoZSBkdWFsIHF1YXRlcm5pb24gaXMgbm9ybWFsaXplZCwgdGhpcyBmdW5jdGlvbiBpcyBmYXN0ZXIgdGhhbiBxdWF0Mi5pbnZlcnNlIGFuZCBwcm9kdWNlcyB0aGUgc2FtZSByZXN1bHQuXG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIHF1YXQgdG8gY2FsY3VsYXRlIGNvbmp1Z2F0ZSBvZlxuICogQHJldHVybnMge3F1YXQyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY29uanVnYXRlKG91dCwgYSkge1xuICBvdXRbMF0gPSAtYVswXTtcbiAgb3V0WzFdID0gLWFbMV07XG4gIG91dFsyXSA9IC1hWzJdO1xuICBvdXRbM10gPSBhWzNdO1xuICBvdXRbNF0gPSAtYVs0XTtcbiAgb3V0WzVdID0gLWFbNV07XG4gIG91dFs2XSA9IC1hWzZdO1xuICBvdXRbN10gPSBhWzddO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBsZW5ndGggb2YgYSBkdWFsIHF1YXRcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgZHVhbCBxdWF0IHRvIGNhbGN1bGF0ZSBsZW5ndGggb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGxlbmd0aCBvZiBhXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGxlbmd0aCA9IHF1YXQubGVuZ3RoO1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHF1YXQyLmxlbmd0aH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgbGVuID0gbGVuZ3RoO1xuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBzcXVhcmVkIGxlbmd0aCBvZiBhIGR1YWwgcXVhdFxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSBkdWFsIHF1YXQgdG8gY2FsY3VsYXRlIHNxdWFyZWQgbGVuZ3RoIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBzcXVhcmVkIGxlbmd0aCBvZiBhXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHNxdWFyZWRMZW5ndGggPSBxdWF0LnNxdWFyZWRMZW5ndGg7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgcXVhdDIuc3F1YXJlZExlbmd0aH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgc3FyTGVuID0gc3F1YXJlZExlbmd0aDtcbi8qKlxuICogTm9ybWFsaXplIGEgZHVhbCBxdWF0XG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgZHVhbCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgZHVhbCBxdWF0ZXJuaW9uIHRvIG5vcm1hbGl6ZVxuICogQHJldHVybnMge3F1YXQyfSBvdXRcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemUob3V0LCBhKSB7XG4gIHZhciBtYWduaXR1ZGUgPSBzcXVhcmVkTGVuZ3RoKGEpO1xuXG4gIGlmIChtYWduaXR1ZGUgPiAwKSB7XG4gICAgbWFnbml0dWRlID0gTWF0aC5zcXJ0KG1hZ25pdHVkZSk7XG4gICAgdmFyIGEwID0gYVswXSAvIG1hZ25pdHVkZTtcbiAgICB2YXIgYTEgPSBhWzFdIC8gbWFnbml0dWRlO1xuICAgIHZhciBhMiA9IGFbMl0gLyBtYWduaXR1ZGU7XG4gICAgdmFyIGEzID0gYVszXSAvIG1hZ25pdHVkZTtcbiAgICB2YXIgYjAgPSBhWzRdO1xuICAgIHZhciBiMSA9IGFbNV07XG4gICAgdmFyIGIyID0gYVs2XTtcbiAgICB2YXIgYjMgPSBhWzddO1xuICAgIHZhciBhX2RvdF9iID0gYTAgKiBiMCArIGExICogYjEgKyBhMiAqIGIyICsgYTMgKiBiMztcbiAgICBvdXRbMF0gPSBhMDtcbiAgICBvdXRbMV0gPSBhMTtcbiAgICBvdXRbMl0gPSBhMjtcbiAgICBvdXRbM10gPSBhMztcbiAgICBvdXRbNF0gPSAoYjAgLSBhMCAqIGFfZG90X2IpIC8gbWFnbml0dWRlO1xuICAgIG91dFs1XSA9IChiMSAtIGExICogYV9kb3RfYikgLyBtYWduaXR1ZGU7XG4gICAgb3V0WzZdID0gKGIyIC0gYTIgKiBhX2RvdF9iKSAvIG1hZ25pdHVkZTtcbiAgICBvdXRbN10gPSAoYjMgLSBhMyAqIGFfZG90X2IpIC8gbWFnbml0dWRlO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIGR1YWwgcXVhdGVuaW9uXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIGR1YWwgcXVhdGVybmlvbiB0byByZXByZXNlbnQgYXMgYSBzdHJpbmdcbiAqIEByZXR1cm5zIHtTdHJpbmd9IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgZHVhbCBxdWF0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN0cihhKSB7XG4gIHJldHVybiBcInF1YXQyKFwiICsgYVswXSArIFwiLCBcIiArIGFbMV0gKyBcIiwgXCIgKyBhWzJdICsgXCIsIFwiICsgYVszXSArIFwiLCBcIiArIGFbNF0gKyBcIiwgXCIgKyBhWzVdICsgXCIsIFwiICsgYVs2XSArIFwiLCBcIiArIGFbN10gKyBcIilcIjtcbn1cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgZHVhbCBxdWF0ZXJuaW9ucyBoYXZlIGV4YWN0bHkgdGhlIHNhbWUgZWxlbWVudHMgaW4gdGhlIHNhbWUgcG9zaXRpb24gKHdoZW4gY29tcGFyZWQgd2l0aCA9PT0pXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIHRoZSBmaXJzdCBkdWFsIHF1YXRlcm5pb24uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGIgdGhlIHNlY29uZCBkdWFsIHF1YXRlcm5pb24uXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdHJ1ZSBpZiB0aGUgZHVhbCBxdWF0ZXJuaW9ucyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXhhY3RFcXVhbHMoYSwgYikge1xuICByZXR1cm4gYVswXSA9PT0gYlswXSAmJiBhWzFdID09PSBiWzFdICYmIGFbMl0gPT09IGJbMl0gJiYgYVszXSA9PT0gYlszXSAmJiBhWzRdID09PSBiWzRdICYmIGFbNV0gPT09IGJbNV0gJiYgYVs2XSA9PT0gYls2XSAmJiBhWzddID09PSBiWzddO1xufVxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBkdWFsIHF1YXRlcm5pb25zIGhhdmUgYXBwcm94aW1hdGVseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgdGhlIGZpcnN0IGR1YWwgcXVhdC5cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYiB0aGUgc2Vjb25kIGR1YWwgcXVhdC5cbiAqIEByZXR1cm5zIHtCb29sZWFufSB0cnVlIGlmIHRoZSBkdWFsIHF1YXRzIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHMoYSwgYikge1xuICB2YXIgYTAgPSBhWzBdLFxuICAgICAgYTEgPSBhWzFdLFxuICAgICAgYTIgPSBhWzJdLFxuICAgICAgYTMgPSBhWzNdLFxuICAgICAgYTQgPSBhWzRdLFxuICAgICAgYTUgPSBhWzVdLFxuICAgICAgYTYgPSBhWzZdLFxuICAgICAgYTcgPSBhWzddO1xuICB2YXIgYjAgPSBiWzBdLFxuICAgICAgYjEgPSBiWzFdLFxuICAgICAgYjIgPSBiWzJdLFxuICAgICAgYjMgPSBiWzNdLFxuICAgICAgYjQgPSBiWzRdLFxuICAgICAgYjUgPSBiWzVdLFxuICAgICAgYjYgPSBiWzZdLFxuICAgICAgYjcgPSBiWzddO1xuICByZXR1cm4gTWF0aC5hYnMoYTAgLSBiMCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTApLCBNYXRoLmFicyhiMCkpICYmIE1hdGguYWJzKGExIC0gYjEpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExKSwgTWF0aC5hYnMoYjEpKSAmJiBNYXRoLmFicyhhMiAtIGIyKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMiksIE1hdGguYWJzKGIyKSkgJiYgTWF0aC5hYnMoYTMgLSBiMykgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTMpLCBNYXRoLmFicyhiMykpICYmIE1hdGguYWJzKGE0IC0gYjQpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE0KSwgTWF0aC5hYnMoYjQpKSAmJiBNYXRoLmFicyhhNSAtIGI1KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhNSksIE1hdGguYWJzKGI1KSkgJiYgTWF0aC5hYnMoYTYgLSBiNikgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTYpLCBNYXRoLmFicyhiNikpICYmIE1hdGguYWJzKGE3IC0gYjcpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE3KSwgTWF0aC5hYnMoYjcpKTtcbn0iLCAidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuaW1wb3J0IHsgQ29tcG9uZW50LCBFbWl0dGVyIH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbmltcG9ydCB7IHByb3BlcnR5IH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpL2RlY29yYXRvcnMuanMnO1xuaW1wb3J0IHsgc2V0WFJSaWdpZFRyYW5zZm9ybUxvY2FsIH0gZnJvbSAnLi91dGlscy93ZWJ4ci5qcyc7XG4vKipcbiAqIFNldHMgdXAgYSBbV2ViWFIgRGV2aWNlIEFQSSBcIkhpdCBUZXN0XCJdKGh0dHBzOi8vaW1tZXJzaXZlLXdlYi5naXRodWIuaW8vaGl0LXRlc3QvKVxuICogYW5kIHBsYWNlcyB0aGUgb2JqZWN0IHRvIHRoZSBoaXQgbG9jYXRpb24uXG4gKlxuICogKipSZXF1aXJlbWVudHM6KipcbiAqICAtIFNwZWNpZnkgYCdoaXQtdGVzdCdgIGluIHRoZSByZXF1aXJlZCBvciBvcHRpb25hbCBmZWF0dXJlcyBvbiB0aGUgQVIgYnV0dG9uIGluIHlvdXIgaHRtbCBmaWxlLlxuICogICAgU2VlIFtXYXN0ZXBhcGVyYmluIEFSXSgvc2hvd2Nhc2Uvd3BiLWFyKSBhcyBhbiBleGFtcGxlLlxuICovXG5jbGFzcyBIaXRUZXN0TG9jYXRpb24gZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdoaXQtdGVzdC1sb2NhdGlvbic7XG4gICAgdGVtcFNjYWxpbmcgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgIHZpc2libGUgPSBmYWxzZTtcbiAgICB4ckhpdFRlc3RTb3VyY2UgPSBudWxsO1xuICAgIC8qKiBSZWZlcmVuY2Ugc3BhY2UgZm9yIGNyZWF0aW5nIHRoZSBoaXQgdGVzdCB3aGVuIHRoZSBzZXNzaW9uIHN0YXJ0cyAqL1xuICAgIHhyUmVmZXJlbmNlU3BhY2UgPSBudWxsO1xuICAgIC8qKlxuICAgICAqIEZvciBtYWludGFpbmluZyBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eTogV2hldGhlciB0byBzY2FsZSB0aGUgb2JqZWN0IHRvIDAgYW5kIGJhY2suXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIG9uSGl0TG9zdCBhbmQgb25IaXRGb3VuZCBpbnN0ZWFkLlxuICAgICAqL1xuICAgIHNjYWxlT2JqZWN0ID0gdHJ1ZTtcbiAgICAvKiogRW1pdHMgYW4gZXZlbnQgd2hlbiB0aGUgaGl0IHRlc3Qgc3dpdGNoZXMgZnJvbSB2aXNpYmxlIHRvIGludmlzaWJsZSAqL1xuICAgIG9uSGl0TG9zdCA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqIEVtaXRzIGFuIGV2ZW50IHdoZW4gdGhlIGhpdCB0ZXN0IHN3aXRjaGVzIGZyb20gaW52aXNpYmxlIHRvIHZpc2libGUgKi9cbiAgICBvbkhpdEZvdW5kID0gbmV3IEVtaXR0ZXIoKTtcbiAgICBvblNlc3Npb25TdGFydENhbGxiYWNrID0gbnVsbDtcbiAgICBvblNlc3Npb25FbmRDYWxsYmFjayA9IG51bGw7XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMub25TZXNzaW9uU3RhcnRDYWxsYmFjayA9IHRoaXMub25YUlNlc3Npb25TdGFydC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uU2Vzc2lvbkVuZENhbGxiYWNrID0gdGhpcy5vblhSU2Vzc2lvbkVuZC5iaW5kKHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5zY2FsZU9iamVjdCkge1xuICAgICAgICAgICAgdGhpcy50ZW1wU2NhbGluZy5zZXQodGhpcy5vYmplY3Quc2NhbGluZ0xvY2FsKTtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnNjYWxlKFswLCAwLCAwXSk7XG4gICAgICAgICAgICB0aGlzLm9uSGl0TG9zdC5hZGQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudGVtcFNjYWxpbmcuc2V0KHRoaXMub2JqZWN0LnNjYWxpbmdMb2NhbCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmplY3Quc2NhbGUoWzAsIDAsIDBdKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5vbkhpdEZvdW5kLmFkZCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmplY3Quc2NhbGluZ0xvY2FsLnNldCh0aGlzLnRlbXBTY2FsaW5nKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9iamVjdC5zZXREaXJ0eSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25BY3RpdmF0ZSgpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUub25YUlNlc3Npb25TdGFydC5hZGQodGhpcy5vblNlc3Npb25TdGFydENhbGxiYWNrKTtcbiAgICAgICAgdGhpcy5lbmdpbmUub25YUlNlc3Npb25FbmQuYWRkKHRoaXMub25TZXNzaW9uRW5kQ2FsbGJhY2spO1xuICAgIH1cbiAgICBvbkRlYWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQucmVtb3ZlKHRoaXMub25TZXNzaW9uU3RhcnRDYWxsYmFjayk7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uRW5kLnJlbW92ZSh0aGlzLm9uU2Vzc2lvbkVuZENhbGxiYWNrKTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICBjb25zdCB3YXNWaXNpYmxlID0gdGhpcy52aXNpYmxlO1xuICAgICAgICBpZiAodGhpcy54ckhpdFRlc3RTb3VyY2UpIHtcbiAgICAgICAgICAgIGNvbnN0IGZyYW1lID0gdGhpcy5lbmdpbmUueHJGcmFtZTtcbiAgICAgICAgICAgIGlmICghZnJhbWUpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgbGV0IGhpdFRlc3RSZXN1bHRzID0gZnJhbWUuZ2V0SGl0VGVzdFJlc3VsdHModGhpcy54ckhpdFRlc3RTb3VyY2UpO1xuICAgICAgICAgICAgaWYgKGhpdFRlc3RSZXN1bHRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBsZXQgcG9zZSA9IGhpdFRlc3RSZXN1bHRzWzBdLmdldFBvc2UodGhpcy5lbmdpbmUueHIuY3VycmVudFJlZmVyZW5jZVNwYWNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnZpc2libGUgPSAhIXBvc2U7XG4gICAgICAgICAgICAgICAgaWYgKHBvc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0WFJSaWdpZFRyYW5zZm9ybUxvY2FsKHRoaXMub2JqZWN0LCBwb3NlLnRyYW5zZm9ybSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyogRW1pdCBldmVudHMgZm9yIHZpc2libGUgc3RhdGUgY2hhbmdlICovXG4gICAgICAgIGlmICh0aGlzLnZpc2libGUgIT0gd2FzVmlzaWJsZSkge1xuICAgICAgICAgICAgKHRoaXMudmlzaWJsZSA/IHRoaXMub25IaXRGb3VuZCA6IHRoaXMub25IaXRMb3N0KS5ub3RpZnkodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0SGl0VGVzdFJlc3VsdHMoZnJhbWUgPSB0aGlzLmVuZ2luZS54cj8uZnJhbWUgPz8gbnVsbCkge1xuICAgICAgICBpZiAoIWZyYW1lKVxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAvKiBNYXkgaGFwcGVuIGlmIHRoZSBoaXQgdGVzdCBzb3VyY2UgY291bGRuJ3QgYmUgY3JlYXRlZCAqL1xuICAgICAgICBpZiAoIXRoaXMueHJIaXRUZXN0U291cmNlKVxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICByZXR1cm4gZnJhbWUuZ2V0SGl0VGVzdFJlc3VsdHModGhpcy54ckhpdFRlc3RTb3VyY2UpO1xuICAgIH1cbiAgICBvblhSU2Vzc2lvblN0YXJ0KHNlc3Npb24pIHtcbiAgICAgICAgaWYgKHNlc3Npb24ucmVxdWVzdEhpdFRlc3RTb3VyY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignaGl0LXRlc3QtbG9jYXRpb246IGhpdCB0ZXN0IGZlYXR1cmUgbm90IGF2YWlsYWJsZS4gRGVhY3RpdmF0aW5nIGNvbXBvbmVudC4nKTtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2Vzc2lvblxuICAgICAgICAgICAgLnJlcXVlc3RIaXRUZXN0U291cmNlKHtcbiAgICAgICAgICAgIHNwYWNlOiB0aGlzLnhyUmVmZXJlbmNlU3BhY2UgPz9cbiAgICAgICAgICAgICAgICB0aGlzLmVuZ2luZS54ci5yZWZlcmVuY2VTcGFjZUZvclR5cGUoJ3ZpZXdlcicpLFxuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oKGhpdFRlc3RTb3VyY2UpID0+IHtcbiAgICAgICAgICAgIHRoaXMueHJIaXRUZXN0U291cmNlID0gaGl0VGVzdFNvdXJjZTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICB9XG4gICAgb25YUlNlc3Npb25FbmQoKSB7XG4gICAgICAgIGlmICghdGhpcy54ckhpdFRlc3RTb3VyY2UpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMueHJIaXRUZXN0U291cmNlLmNhbmNlbCgpO1xuICAgICAgICB0aGlzLnhySGl0VGVzdFNvdXJjZSA9IG51bGw7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuYm9vbCh0cnVlKVxuXSwgSGl0VGVzdExvY2F0aW9uLnByb3RvdHlwZSwgXCJzY2FsZU9iamVjdFwiLCB2b2lkIDApO1xuZXhwb3J0IHsgSGl0VGVzdExvY2F0aW9uIH07XG4iLCAidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuaW1wb3J0IHsgQ29tcG9uZW50LCBWaWV3Q29tcG9uZW50LCBFbWl0dGVyLCB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaS9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IHZlYzMsIG1hdDQgfSBmcm9tICdnbC1tYXRyaXgnO1xuaW1wb3J0IHsgQ3Vyc29yVGFyZ2V0IH0gZnJvbSAnLi9jdXJzb3ItdGFyZ2V0LmpzJztcbmltcG9ydCB7IEhpdFRlc3RMb2NhdGlvbiB9IGZyb20gJy4vaGl0LXRlc3QtbG9jYXRpb24uanMnO1xuY29uc3QgdGVtcFZlYyA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG5jb25zdCBaRVJPID0gWzAsIDAsIDBdO1xuLyoqIEdsb2JhbCB0YXJnZXQgZm9yIHtAbGluayBDdXJzb3J9ICovXG5jbGFzcyBDdXJzb3JUYXJnZXRFbWl0dGVycyB7XG4gICAgLyoqIEVtaXR0ZXIgZm9yIGV2ZW50cyB3aGVuIHRoZSB0YXJnZXQgaXMgaG92ZXJlZCAqL1xuICAgIG9uSG92ZXIgPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKiBFbWl0dGVyIGZvciBldmVudHMgd2hlbiB0aGUgdGFyZ2V0IGlzIHVuaG92ZXJlZCAqL1xuICAgIG9uVW5ob3ZlciA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqIEVtaXR0ZXIgZm9yIGV2ZW50cyB3aGVuIHRoZSB0YXJnZXQgaXMgY2xpY2tlZCAqL1xuICAgIG9uQ2xpY2sgPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKiBFbWl0dGVyIGZvciBldmVudHMgd2hlbiB0aGUgY3Vyc29yIG1vdmVzIG9uIHRoZSB0YXJnZXQgKi9cbiAgICBvbk1vdmUgPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKiBFbWl0dGVyIGZvciBldmVudHMgd2hlbiB0aGUgdXNlciBwcmVzc2VkIHRoZSBzZWxlY3QgYnV0dG9uIG9uIHRoZSB0YXJnZXQgKi9cbiAgICBvbkRvd24gPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKiBFbWl0dGVyIGZvciBldmVudHMgd2hlbiB0aGUgdXNlciB1bnByZXNzZWQgdGhlIHNlbGVjdCBidXR0b24gb24gdGhlIHRhcmdldCAqL1xuICAgIG9uVXAgPSBuZXcgRW1pdHRlcigpO1xufVxuLyoqXG4gKiAzRCBjdXJzb3IgZm9yIGRlc2t0b3AvbW9iaWxlL1ZSLlxuICpcbiAqIEltcGxlbWVudHMgYSByYXktY2FzdGluZyBjdXJzb3IgaW50byB0aGUgc2NlbmUuIFRvIHJlYWN0IHRvXG4gKiBjbGlja2luZy9ob3Zlci91bmhvdmVyL2N1cnNvciBkb3duL2N1cnNvciB1cC9tb3ZlIHVzZSBhXG4gKiBbY3Vyc29yLXRhcmdldF0oI2N1cnNvci10YXJnZXQpLlxuICpcbiAqIEZvciBWUiwgdGhlIHJheSBpcyBjYXN0IGluIGRpcmVjdGlvbiBvZlxuICogW3RoaXMub2JqZWN0LmdldEZvcndhcmQoKV0oL2pzYXBpL29iamVjdC8jZ2V0Zm9yd2FyZCkuIEZvciBkZXNrdG9wIGFuZCBtb2JpbGUsIHRoZVxuICogZm9yd2FyZCB2ZWN0b3IgaXMgaW52ZXJzZS1wcm9qZWN0ZWQgdG8gYWNjb3VudCBmb3Igd2hlcmUgb24gc2NyZWVuIHRoZSB1c2VyIGNsaWNrZWQuXG4gKlxuICogYC5nbG9iYWxUYXJnZXRgIGNhbiBiZSB1c2VkIHRvIGNhbGwgY2FsbGJhY2tzIGZvciBhbGwgb2JqZWN0cywgZXZlbiB0aG9zZSB0aGF0XG4gKiBkbyBub3QgaGF2ZSBhIGN1cnNvciB0YXJnZXQgYXR0YWNoZWQsIGJ1dCBtYXRjaCB0aGUgY29sbGlzaW9uIGdyb3VwLlxuICpcbiAqIGAuaGl0VGVzdFRhcmdldGAgY2FuIGJlIHVzZWQgdG8gY2FsbCBjYWxsYmFja3MgV2ViWFIgaGl0IHRlc3QgcmVzdWx0cyxcbiAqXG4gKiBTZWUgW0FuaW1hdGlvbiBFeGFtcGxlXSgvc2hvd2Nhc2UvYW5pbWF0aW9uKS5cbiAqL1xuY2xhc3MgQ3Vyc29yIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnY3Vyc29yJztcbiAgICAvKiBEZXBlbmRlbmNpZXMgaXMgZGVwcmVjYXRlZCwgYnV0IHdlIGtlZXAgaXQgaGVyZSBmb3IgY29tcGF0aWJpbGl0eVxuICAgICAqIHdpdGggMS4wLjAtcmMyIHVudGlsIDEuMC4wIGlzIHJlbGVhc2VkICovXG4gICAgc3RhdGljIERlcGVuZGVuY2llcyA9IFtIaXRUZXN0TG9jYXRpb25dO1xuICAgIHN0YXRpYyBvblJlZ2lzdGVyKGVuZ2luZSkge1xuICAgICAgICBlbmdpbmUucmVnaXN0ZXJDb21wb25lbnQoSGl0VGVzdExvY2F0aW9uKTtcbiAgICB9XG4gICAgX2NvbGxpc2lvbk1hc2sgPSAwO1xuICAgIF9vbkRlYWN0aXZhdGVDYWxsYmFja3MgPSBbXTtcbiAgICBfaW5wdXQgPSBudWxsO1xuICAgIF9vcmlnaW4gPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgIF9jdXJzb3JPYmpTY2FsZSA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgX2RpcmVjdGlvbiA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgX3Byb2plY3Rpb25NYXRyaXggPSBuZXcgRmxvYXQzMkFycmF5KDE2KTtcbiAgICBfdmlld0NvbXBvbmVudCA9IG51bGw7XG4gICAgX2lzRG93biA9IGZhbHNlO1xuICAgIF9sYXN0SXNEb3duID0gZmFsc2U7XG4gICAgX2FyVG91Y2hEb3duID0gZmFsc2U7XG4gICAgX2xhc3RQb2ludGVyUG9zID0gbmV3IEZsb2F0MzJBcnJheSgyKTtcbiAgICBfbGFzdEN1cnNvclBvc09uVGFyZ2V0ID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICBfaGl0VGVzdExvY2F0aW9uID0gbnVsbDtcbiAgICBfaGl0VGVzdE9iamVjdCA9IG51bGw7XG4gICAgX29uU2Vzc2lvblN0YXJ0Q2FsbGJhY2sgPSBudWxsO1xuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIGN1cnNvciAoYW5kIGN1cnNvck9iamVjdCkgaXMgdmlzaWJsZSwgaS5lLiBwb2ludGluZyBhdCBhbiBvYmplY3RcbiAgICAgKiB0aGF0IG1hdGNoZXMgdGhlIGNvbGxpc2lvbiBncm91cFxuICAgICAqL1xuICAgIHZpc2libGUgPSB0cnVlO1xuICAgIC8qKiBDdXJyZW50bHkgaG92ZXJlZCBvYmplY3QgKi9cbiAgICBob3ZlcmluZ09iamVjdCA9IG51bGw7XG4gICAgLyoqIEN1cnNvclRhcmdldCBjb21wb25lbnQgb2YgdGhlIGN1cnJlbnRseSBob3ZlcmVkIG9iamVjdCAqL1xuICAgIGhvdmVyaW5nT2JqZWN0VGFyZ2V0ID0gbnVsbDtcbiAgICAvKiogV2hldGhlciB0aGUgY3Vyc29yIGlzIGhvdmVyaW5nIHJlYWxpdHkgdmlhIGhpdC10ZXN0ICovXG4gICAgaG92ZXJpbmdSZWFsaXR5ID0gZmFsc2U7XG4gICAgLyoqXG4gICAgICogR2xvYmFsIHRhcmdldCBsZXRzIHlvdSByZWNlaXZlIGdsb2JhbCBjdXJzb3IgZXZlbnRzIG9uIGFueSBvYmplY3QuXG4gICAgICovXG4gICAgZ2xvYmFsVGFyZ2V0ID0gbmV3IEN1cnNvclRhcmdldEVtaXR0ZXJzKCk7XG4gICAgLyoqXG4gICAgICogSGl0IHRlc3QgdGFyZ2V0IGxldHMgeW91IHJlY2VpdmUgY3Vyc29yIGV2ZW50cyBmb3IgXCJyZWFsaXR5XCIsIGlmXG4gICAgICogYHVzZVdlYlhSSGl0VGVzdGAgaXMgc2V0IHRvIGB0cnVlYC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBganNcbiAgICAgKiBjdXJzb3IuaGl0VGVzdFRhcmdldC5vbkNsaWNrLmFkZCgoaGl0LCBjdXJzb3IpID0+IHtcbiAgICAgKiAgICAgLy8gVXNlciBjbGlja2VkIG9uIHJlYWxpdHlcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBoaXRUZXN0VGFyZ2V0ID0gbmV3IEN1cnNvclRhcmdldEVtaXR0ZXJzKCk7XG4gICAgLyoqIFdvcmxkIHBvc2l0aW9uIG9mIHRoZSBjdXJzb3IgKi9cbiAgICBjdXJzb3JQb3MgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgIC8qKiBDb2xsaXNpb24gZ3JvdXAgZm9yIHRoZSByYXkgY2FzdC4gT25seSBvYmplY3RzIGluIHRoaXMgZ3JvdXAgd2lsbCBiZSBhZmZlY3RlZCBieSB0aGlzIGN1cnNvci4gKi9cbiAgICBjb2xsaXNpb25Hcm91cCA9IDE7XG4gICAgLyoqIChvcHRpb25hbCkgT2JqZWN0IHRoYXQgdmlzdWFsaXplcyB0aGUgY3Vyc29yJ3MgcmF5LiAqL1xuICAgIGN1cnNvclJheU9iamVjdCA9IG51bGw7XG4gICAgLyoqIEF4aXMgYWxvbmcgd2hpY2ggdG8gc2NhbGUgdGhlIGBjdXJzb3JSYXlPYmplY3RgLiAqL1xuICAgIGN1cnNvclJheVNjYWxpbmdBeGlzID0gMjtcbiAgICAvKiogKG9wdGlvbmFsKSBPYmplY3QgdGhhdCB2aXN1YWxpemVzIHRoZSBjdXJzb3IncyBoaXQgbG9jYXRpb24uICovXG4gICAgY3Vyc29yT2JqZWN0ID0gbnVsbDtcbiAgICAvKiogSGFuZGVkbmVzcyBmb3IgVlIgY3Vyc29ycyB0byBhY2NlcHQgdHJpZ2dlciBldmVudHMgb25seSBmcm9tIHJlc3BlY3RpdmUgY29udHJvbGxlci4gKi9cbiAgICBoYW5kZWRuZXNzID0gMDtcbiAgICAvKiogTW9kZSBmb3IgcmF5Y2FzdGluZywgd2hldGhlciB0byB1c2UgUGh5c1ggb3Igc2ltcGxlIGNvbGxpc2lvbiBjb21wb25lbnRzICovXG4gICAgcmF5Q2FzdE1vZGUgPSAwO1xuICAgIC8qKiBNYXhpbXVtIGRpc3RhbmNlIGZvciB0aGUgY3Vyc29yJ3MgcmF5IGNhc3QuICovXG4gICAgbWF4RGlzdGFuY2UgPSAxMDA7XG4gICAgLyoqIFdoZXRoZXIgdG8gc2V0IHRoZSBDU1Mgc3R5bGUgb2YgdGhlIG1vdXNlIGN1cnNvciBvbiBkZXNrdG9wICovXG4gICAgc3R5bGVDdXJzb3IgPSB0cnVlO1xuICAgIC8qKlxuICAgICAqIFVzZSBXZWJYUiBoaXQtdGVzdCBpZiBhdmFpbGFibGUuXG4gICAgICpcbiAgICAgKiBBdHRhY2hlcyBhIGhpdC10ZXN0LWxvY2F0aW9uIGNvbXBvbmVudCB0byB0aGUgY3Vyc29yT2JqZWN0LCB3aGljaCB3aWxsIGJlIHVzZWRcbiAgICAgKiBieSB0aGUgY3Vyc29yIHRvIHNlbmQgZXZlbnRzIHRvIHRoZSBoaXRUZXN0VGFyZ2V0IHdpdGggSGl0VGVzdFJlc3VsdC5cbiAgICAgKi9cbiAgICB1c2VXZWJYUkhpdFRlc3QgPSBmYWxzZTtcbiAgICBfb25WaWV3cG9ydFJlc2l6ZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLl92aWV3Q29tcG9uZW50KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAvKiBQcm9qZWN0aW9uIG1hdHJpeCB3aWxsIGNoYW5nZSBpZiB0aGUgdmlld3BvcnQgaXMgcmVzaXplZCwgd2hpY2ggd2lsbCBhZmZlY3QgdGhlXG4gICAgICAgICAqIHByb2plY3Rpb24gbWF0cml4IGJlY2F1c2Ugb2YgdGhlIGFzcGVjdCByYXRpby4gKi9cbiAgICAgICAgbWF0NC5pbnZlcnQodGhpcy5fcHJvamVjdGlvbk1hdHJpeCwgdGhpcy5fdmlld0NvbXBvbmVudC5wcm9qZWN0aW9uTWF0cml4KTtcbiAgICB9O1xuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLl9jb2xsaXNpb25NYXNrID0gMSA8PCB0aGlzLmNvbGxpc2lvbkdyb3VwO1xuICAgICAgICBpZiAodGhpcy5oYW5kZWRuZXNzID09IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0Q29tcCA9IHRoaXMub2JqZWN0LmdldENvbXBvbmVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgIGlmICghaW5wdXRDb21wKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdjdXJzb3IgY29tcG9uZW50IG9uIG9iamVjdCcsIHRoaXMub2JqZWN0Lm5hbWUsICd3YXMgY29uZmlndXJlZCB3aXRoIGhhbmRlZG5lc3MgXCJpbnB1dCBjb21wb25lbnRcIiwgJyArXG4gICAgICAgICAgICAgICAgICAgICdidXQgb2JqZWN0IGhhcyBubyBpbnB1dCBjb21wb25lbnQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRlZG5lc3MgPSBpbnB1dENvbXAuaGFuZGVkbmVzcyB8fCAnbm9uZSc7XG4gICAgICAgICAgICAgICAgdGhpcy5faW5wdXQgPSBpbnB1dENvbXA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRlZG5lc3MgPSBbJ2xlZnQnLCAncmlnaHQnLCAnbm9uZSddW3RoaXMuaGFuZGVkbmVzcyAtIDFdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3ZpZXdDb21wb25lbnQgPSB0aGlzLm9iamVjdC5nZXRDb21wb25lbnQoVmlld0NvbXBvbmVudCk7XG4gICAgICAgIGlmICh0aGlzLnVzZVdlYlhSSGl0VGVzdCkge1xuICAgICAgICAgICAgdGhpcy5faGl0VGVzdE9iamVjdCA9IHRoaXMuZW5naW5lLnNjZW5lLmFkZE9iamVjdCh0aGlzLm9iamVjdCk7XG4gICAgICAgICAgICB0aGlzLl9oaXRUZXN0TG9jYXRpb24gPVxuICAgICAgICAgICAgICAgIHRoaXMuX2hpdFRlc3RPYmplY3QuYWRkQ29tcG9uZW50KEhpdFRlc3RMb2NhdGlvbiwge1xuICAgICAgICAgICAgICAgICAgICBzY2FsZU9iamVjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSkgPz8gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9vblNlc3Npb25TdGFydENhbGxiYWNrID0gdGhpcy5zZXR1cFZSRXZlbnRzLmJpbmQodGhpcyk7XG4gICAgfVxuICAgIG9uQWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQuYWRkKHRoaXMuX29uU2Vzc2lvblN0YXJ0Q2FsbGJhY2spO1xuICAgICAgICB0aGlzLmVuZ2luZS5vblJlc2l6ZS5hZGQodGhpcy5fb25WaWV3cG9ydFJlc2l6ZSk7XG4gICAgICAgIHRoaXMuX3NldEN1cnNvclZpc2liaWxpdHkodHJ1ZSk7XG4gICAgICAgIC8qIElmIHRoaXMgb2JqZWN0IGFsc28gaGFzIGEgdmlldyBjb21wb25lbnQsIHdlIHdpbGwgZW5hYmxlIGludmVyc2UtcHJvamVjdGVkIG1vdXNlIGNsaWNrcyxcbiAgICAgICAgICogb3RoZXJ3aXNlIGp1c3QgdXNlIHRoZSBvYmplY3RzIHRyYW5zZm9ybWF0aW9uICovXG4gICAgICAgIGlmICh0aGlzLl92aWV3Q29tcG9uZW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuZW5naW5lLmNhbnZhcztcbiAgICAgICAgICAgIGNvbnN0IG9uQ2xpY2sgPSB0aGlzLm9uQ2xpY2suYmluZCh0aGlzKTtcbiAgICAgICAgICAgIGNvbnN0IG9uUG9pbnRlck1vdmUgPSB0aGlzLm9uUG9pbnRlck1vdmUuYmluZCh0aGlzKTtcbiAgICAgICAgICAgIGNvbnN0IG9uUG9pbnRlckRvd24gPSB0aGlzLm9uUG9pbnRlckRvd24uYmluZCh0aGlzKTtcbiAgICAgICAgICAgIGNvbnN0IG9uUG9pbnRlclVwID0gdGhpcy5vblBvaW50ZXJVcC5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGljayk7XG4gICAgICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCBvblBvaW50ZXJNb3ZlKTtcbiAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZG93bicsIG9uUG9pbnRlckRvd24pO1xuICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIG9uUG9pbnRlclVwKTtcbiAgICAgICAgICAgIHRoaXMuX29uRGVhY3RpdmF0ZUNhbGxiYWNrcy5wdXNoKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrKTtcbiAgICAgICAgICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCBvblBvaW50ZXJNb3ZlKTtcbiAgICAgICAgICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCBvblBvaW50ZXJEb3duKTtcbiAgICAgICAgICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcnVwJywgb25Qb2ludGVyVXApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fb25WaWV3cG9ydFJlc2l6ZSgpO1xuICAgIH1cbiAgICBfc2V0Q3Vyc29yUmF5VHJhbnNmb3JtKGhpdFBvc2l0aW9uKSB7XG4gICAgICAgIGlmICghdGhpcy5jdXJzb3JSYXlPYmplY3QpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGRpc3QgPSB2ZWMzLmRpc3QodGhpcy5fb3JpZ2luLCBoaXRQb3NpdGlvbik7XG4gICAgICAgIHRoaXMuY3Vyc29yUmF5T2JqZWN0LnNldFBvc2l0aW9uTG9jYWwoWzAuMCwgMC4wLCAtZGlzdCAvIDJdKTtcbiAgICAgICAgaWYgKHRoaXMuY3Vyc29yUmF5U2NhbGluZ0F4aXMgIT0gNCkge1xuICAgICAgICAgICAgLyogU2NhbGUgb25seSB0aGUgcmVxdWVzdGVkIGF4aXMsIHJlbGF0aXZlIHRvIHRoZSBvcmlnaW5hbCBzY2FsaW5nICovXG4gICAgICAgICAgICB0ZW1wVmVjLmZpbGwoMSk7XG4gICAgICAgICAgICB0ZW1wVmVjW3RoaXMuY3Vyc29yUmF5U2NhbGluZ0F4aXNdID0gZGlzdCAvIDI7XG4gICAgICAgICAgICB0aGlzLmN1cnNvclJheU9iamVjdC5zZXRTY2FsaW5nTG9jYWwodGVtcFZlYyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3NldEN1cnNvclZpc2liaWxpdHkodmlzaWJsZSkge1xuICAgICAgICBpZiAodGhpcy52aXNpYmxlID09IHZpc2libGUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMudmlzaWJsZSA9IHZpc2libGU7XG4gICAgICAgIGlmICghdGhpcy5jdXJzb3JPYmplY3QpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh2aXNpYmxlKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnNvck9iamVjdC5zZXRTY2FsaW5nV29ybGQodGhpcy5fY3Vyc29yT2JqU2NhbGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jdXJzb3JPYmplY3QuZ2V0U2NhbGluZ1dvcmxkKHRoaXMuX2N1cnNvck9ialNjYWxlKTtcbiAgICAgICAgICAgIHRoaXMuY3Vyc29yT2JqZWN0LnNjYWxlTG9jYWwoWzAsIDAsIDBdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIC8qIElmIGluIFZSLCBzZXQgdGhlIGN1cnNvciByYXkgYmFzZWQgb24gb2JqZWN0IHRyYW5zZm9ybSAqL1xuICAgICAgICAvKiBTaW5jZSBHb29nbGUgQ2FyZGJvYXJkIHRhcCBpcyByZWdpc3RlcmVkIGFzIGFyVG91Y2hEb3duIHdpdGhvdXQgYSBnYW1lcGFkLCB3ZSBuZWVkIHRvIGNoZWNrIGZvciBnYW1lcGFkIHByZXNlbmNlICovXG4gICAgICAgIGlmICh0aGlzLmVuZ2luZS54ciAmJlxuICAgICAgICAgICAgdGhpcy5fYXJUb3VjaERvd24gJiZcbiAgICAgICAgICAgIHRoaXMuX2lucHV0ICYmXG4gICAgICAgICAgICB0aGlzLmVuZ2luZS54ci5zZXNzaW9uLmlucHV0U291cmNlc1swXS5oYW5kZWRuZXNzID09PSAnbm9uZScgJiZcbiAgICAgICAgICAgIHRoaXMuZW5naW5lLnhyLnNlc3Npb24uaW5wdXRTb3VyY2VzWzBdLmdhbWVwYWQpIHtcbiAgICAgICAgICAgIC8qIFdlYlhSIEFSIGlucHV0ICovXG4gICAgICAgICAgICBjb25zdCBwID0gdGhpcy5lbmdpbmUueHIuc2Vzc2lvbi5pbnB1dFNvdXJjZXNbMF0uZ2FtZXBhZC5heGVzO1xuICAgICAgICAgICAgLyogU2NyZWVuc3BhY2UgWSBpcyBpbnZlcnRlZCAqL1xuICAgICAgICAgICAgdGhpcy5fZGlyZWN0aW9uWzBdID0gcFswXTtcbiAgICAgICAgICAgIHRoaXMuX2RpcmVjdGlvblsxXSA9IC1wWzFdO1xuICAgICAgICAgICAgdGhpcy5fZGlyZWN0aW9uWzJdID0gLTEuMDtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlUcmFuc2Zvcm1BbmRQcm9qZWN0RGlyZWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5lbmdpbmUueHIgJiYgdGhpcy5faW5wdXQgJiYgdGhpcy5faW5wdXQueHJJbnB1dFNvdXJjZSkge1xuICAgICAgICAgICAgLyogV2ViWFIgVlIgaW5wdXQgKi9cbiAgICAgICAgICAgIHRoaXMuX2RpcmVjdGlvblswXSA9IDA7XG4gICAgICAgICAgICB0aGlzLl9kaXJlY3Rpb25bMV0gPSAwO1xuICAgICAgICAgICAgdGhpcy5fZGlyZWN0aW9uWzJdID0gLTEuMDtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlUcmFuc2Zvcm1Ub0RpcmVjdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX3ZpZXdDb21wb25lbnQpIHtcbiAgICAgICAgICAgIC8qIEFwcGx5IHBvdGVudGlhbGx5IGNoYW5nZWQgdHJhbnNmb3JtIHRvIGxhc3Qgc3RvcmVkIHBvaW50ZXJcbiAgICAgICAgICAgICAqIHBvc2l0aW9uICovXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZURpcmVjdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmF5Q2FzdChudWxsLCB0aGlzLmVuZ2luZS54cj8uZnJhbWUpO1xuICAgICAgICBpZiAodGhpcy5jdXJzb3JPYmplY3QpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmhvdmVyaW5nT2JqZWN0ICYmXG4gICAgICAgICAgICAgICAgKHRoaXMuY3Vyc29yUG9zWzBdICE9IDAgfHwgdGhpcy5jdXJzb3JQb3NbMV0gIT0gMCB8fCB0aGlzLmN1cnNvclBvc1syXSAhPSAwKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3NldEN1cnNvclZpc2liaWxpdHkodHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJzb3JPYmplY3Quc2V0UG9zaXRpb25Xb3JsZCh0aGlzLmN1cnNvclBvcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0Q3Vyc29yUmF5VHJhbnNmb3JtKHRoaXMuY3Vyc29yUG9zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX3NldEN1cnNvclZpc2liaWxpdHkoZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qIFJldHVybnMgdGhlIGhvdmVyZWQgY3Vyc29yIHRhcmdldCwgaWYgYXZhaWxhYmxlICovXG4gICAgbm90aWZ5KGV2ZW50LCBvcmlnaW5hbEV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXMuaG92ZXJpbmdPYmplY3Q7XG4gICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnNvclRhcmdldCA9IHRoaXMuaG92ZXJpbmdPYmplY3RUYXJnZXQ7XG4gICAgICAgICAgICBpZiAoY3Vyc29yVGFyZ2V0KVxuICAgICAgICAgICAgICAgIGN1cnNvclRhcmdldFtldmVudF0ubm90aWZ5KHRhcmdldCwgdGhpcywgb3JpZ2luYWxFdmVudCA/PyB1bmRlZmluZWQpO1xuICAgICAgICAgICAgdGhpcy5nbG9iYWxUYXJnZXRbZXZlbnRdLm5vdGlmeSh0YXJnZXQsIHRoaXMsIG9yaWdpbmFsRXZlbnQgPz8gdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBob3ZlckJlaGF2aW91cihyYXlIaXQsIGhpdFRlc3RSZXN1bHQsIGRvQ2xpY2ssIG9yaWdpbmFsRXZlbnQpIHtcbiAgICAgICAgLyogT2xkIEFQSSB2ZXJzaW9uIGRvZXMgbm90IHJldHVybiBudWxsIGZvciBvYmplY3RzWzBdIGlmIG5vIGhpdCAqL1xuICAgICAgICBjb25zdCBoaXQgPSAhdGhpcy5ob3ZlcmluZ1JlYWxpdHkgJiYgcmF5SGl0LmhpdENvdW50ID4gMCA/IHJheUhpdC5vYmplY3RzWzBdIDogbnVsbDtcbiAgICAgICAgaWYgKGhpdCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmhvdmVyaW5nT2JqZWN0IHx8ICF0aGlzLmhvdmVyaW5nT2JqZWN0LmVxdWFscyhoaXQpKSB7XG4gICAgICAgICAgICAgICAgLyogVW5ob3ZlciBwcmV2aW91cywgaWYgZXhpc3RzICovXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaG92ZXJpbmdPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoJ29uVW5ob3ZlcicsIG9yaWdpbmFsRXZlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvKiBIb3ZlciBuZXcgb2JqZWN0ICovXG4gICAgICAgICAgICAgICAgdGhpcy5ob3ZlcmluZ09iamVjdCA9IGhpdDtcbiAgICAgICAgICAgICAgICB0aGlzLmhvdmVyaW5nT2JqZWN0VGFyZ2V0ID0gdGhpcy5ob3ZlcmluZ09iamVjdC5nZXRDb21wb25lbnQoQ3Vyc29yVGFyZ2V0KTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdHlsZUN1cnNvcilcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmdpbmUuY2FudmFzLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeSgnb25Ib3ZlcicsIG9yaWdpbmFsRXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaG92ZXJpbmdPYmplY3QpIHtcbiAgICAgICAgICAgIC8qIFByZXZpb3VzbHkgaG92ZXJpbmcgb2JqZWN0LCBub3cgaG92ZXJpbmcgbm90aGluZyAqL1xuICAgICAgICAgICAgdGhpcy5ub3RpZnkoJ29uVW5ob3ZlcicsIG9yaWdpbmFsRXZlbnQpO1xuICAgICAgICAgICAgdGhpcy5ob3ZlcmluZ09iamVjdCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmhvdmVyaW5nT2JqZWN0VGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0eWxlQ3Vyc29yKVxuICAgICAgICAgICAgICAgIHRoaXMuZW5naW5lLmNhbnZhcy5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaG92ZXJpbmdPYmplY3QpIHtcbiAgICAgICAgICAgIC8qIG9uRG93bi9vblVwIGZvciBvYmplY3QgKi9cbiAgICAgICAgICAgIGlmICh0aGlzLl9pc0Rvd24gIT09IHRoaXMuX2xhc3RJc0Rvd24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeSh0aGlzLl9pc0Rvd24gPyAnb25Eb3duJyA6ICdvblVwJywgb3JpZ2luYWxFdmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKiBvbkNsaWNrIGZvciBvYmplY3QgKi9cbiAgICAgICAgICAgIGlmIChkb0NsaWNrKVxuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KCdvbkNsaWNrJywgb3JpZ2luYWxFdmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5ob3ZlcmluZ1JlYWxpdHkpIHtcbiAgICAgICAgICAgIC8qIG9uRG93bi9vblVwIGZvciBoaXQgdGVzdCAqL1xuICAgICAgICAgICAgaWYgKHRoaXMuX2lzRG93biAhPT0gdGhpcy5fbGFzdElzRG93bikge1xuICAgICAgICAgICAgICAgICh0aGlzLl9pc0Rvd24gPyB0aGlzLmhpdFRlc3RUYXJnZXQub25Eb3duIDogdGhpcy5oaXRUZXN0VGFyZ2V0Lm9uVXApLm5vdGlmeShoaXRUZXN0UmVzdWx0LCB0aGlzLCBvcmlnaW5hbEV2ZW50ID8/IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKiBvbkNsaWNrIGZvciBoaXQgdGVzdCAqL1xuICAgICAgICAgICAgaWYgKGRvQ2xpY2spXG4gICAgICAgICAgICAgICAgdGhpcy5oaXRUZXN0VGFyZ2V0Lm9uQ2xpY2subm90aWZ5KGhpdFRlc3RSZXN1bHQsIHRoaXMsIG9yaWdpbmFsRXZlbnQgPz8gdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICAvKiBvbk1vdmUgKi9cbiAgICAgICAgaWYgKGhpdCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaG92ZXJpbmdPYmplY3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhvdmVyaW5nT2JqZWN0LnRyYW5zZm9ybVBvaW50SW52ZXJzZVdvcmxkKHRlbXBWZWMsIHRoaXMuY3Vyc29yUG9zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRlbXBWZWMuc2V0KHRoaXMuY3Vyc29yUG9zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdmVjMy5lcXVhbHModGhpcy5fbGFzdEN1cnNvclBvc09uVGFyZ2V0LCB0ZW1wVmVjKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KCdvbk1vdmUnLCBvcmlnaW5hbEV2ZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLl9sYXN0Q3Vyc29yUG9zT25UYXJnZXQuc2V0KHRlbXBWZWMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaG92ZXJpbmdSZWFsaXR5KSB7XG4gICAgICAgICAgICBpZiAoIXZlYzMuZXF1YWxzKHRoaXMuX2xhc3RDdXJzb3JQb3NPblRhcmdldCwgdGhpcy5jdXJzb3JQb3MpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaXRUZXN0VGFyZ2V0Lm9uTW92ZS5ub3RpZnkoaGl0VGVzdFJlc3VsdCwgdGhpcywgb3JpZ2luYWxFdmVudCA/PyB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2xhc3RDdXJzb3JQb3NPblRhcmdldC5zZXQodGhpcy5jdXJzb3JQb3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fbGFzdEN1cnNvclBvc09uVGFyZ2V0LnNldCh0aGlzLmN1cnNvclBvcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbGFzdElzRG93biA9IHRoaXMuX2lzRG93bjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0dXAgZXZlbnQgbGlzdGVuZXJzIG9uIHNlc3Npb24gb2JqZWN0XG4gICAgICogQHBhcmFtIHMgV2ViWFIgc2Vzc2lvblxuICAgICAqXG4gICAgICogU2V0cyB1cCAnc2VsZWN0JyBhbmQgJ2VuZCcgZXZlbnRzLlxuICAgICAqL1xuICAgIHNldHVwVlJFdmVudHMocykge1xuICAgICAgICBpZiAoIXMpXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdzZXR1cFZSRXZlbnRzIGNhbGxlZCB3aXRob3V0IGEgdmFsaWQgc2Vzc2lvbicpO1xuICAgICAgICAvKiBCZWNhdXNlIHdlIHJlbW92ZSB0aGUgY2FsbGJhY2sgaW4gLmFjdGl2ZSBhbmQgYW5vdGhlciBjb21wb25lbnQgbWlnaHRcbiAgICAgICAgICogZGVhY3RpdmF0ZSB0aGUgY3Vyc29yIGR1cmluZyBvblhSU2Vzc2lvblN0YXJ0LCB3ZSBtYWtlIHN1cmUgdGhlIGN1cnNvclxuICAgICAgICAgKiByZWFsbHkgaXMgYWN0aXZlIHdoZW4gd2UgcnVuIHRoaXMgKi9cbiAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgLyogSWYgaW4gVlIsIG9uZS10aW1lIGJpbmQgdGhlIGxpc3RlbmVyICovXG4gICAgICAgIGNvbnN0IG9uU2VsZWN0ID0gdGhpcy5vblNlbGVjdC5iaW5kKHRoaXMpO1xuICAgICAgICBzLmFkZEV2ZW50TGlzdGVuZXIoJ3NlbGVjdCcsIG9uU2VsZWN0KTtcbiAgICAgICAgY29uc3Qgb25TZWxlY3RTdGFydCA9IHRoaXMub25TZWxlY3RTdGFydC5iaW5kKHRoaXMpO1xuICAgICAgICBzLmFkZEV2ZW50TGlzdGVuZXIoJ3NlbGVjdHN0YXJ0Jywgb25TZWxlY3RTdGFydCk7XG4gICAgICAgIGNvbnN0IG9uU2VsZWN0RW5kID0gdGhpcy5vblNlbGVjdEVuZC5iaW5kKHRoaXMpO1xuICAgICAgICBzLmFkZEV2ZW50TGlzdGVuZXIoJ3NlbGVjdGVuZCcsIG9uU2VsZWN0RW5kKTtcbiAgICAgICAgdGhpcy5fb25EZWFjdGl2YXRlQ2FsbGJhY2tzLnB1c2goKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmVuZ2luZS54cilcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3NlbGVjdCcsIG9uU2VsZWN0KTtcbiAgICAgICAgICAgIHMucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2VsZWN0c3RhcnQnLCBvblNlbGVjdFN0YXJ0KTtcbiAgICAgICAgICAgIHMucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2VsZWN0ZW5kJywgb25TZWxlY3RFbmQpO1xuICAgICAgICB9KTtcbiAgICAgICAgLyogQWZ0ZXIgQVIgc2Vzc2lvbiB3YXMgZW50ZXJlZCwgdGhlIHByb2plY3Rpb24gbWF0cml4IGNoYW5nZWQgKi9cbiAgICAgICAgdGhpcy5fb25WaWV3cG9ydFJlc2l6ZSgpO1xuICAgIH1cbiAgICBvbkRlYWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQucmVtb3ZlKHRoaXMuX29uU2Vzc2lvblN0YXJ0Q2FsbGJhY2spO1xuICAgICAgICB0aGlzLmVuZ2luZS5vblJlc2l6ZS5yZW1vdmUodGhpcy5fb25WaWV3cG9ydFJlc2l6ZSk7XG4gICAgICAgIHRoaXMuX3NldEN1cnNvclZpc2liaWxpdHkoZmFsc2UpO1xuICAgICAgICBpZiAodGhpcy5ob3ZlcmluZ09iamVjdClcbiAgICAgICAgICAgIHRoaXMubm90aWZ5KCdvblVuaG92ZXInLCBudWxsKTtcbiAgICAgICAgaWYgKHRoaXMuY3Vyc29yUmF5T2JqZWN0KVxuICAgICAgICAgICAgdGhpcy5jdXJzb3JSYXlPYmplY3Quc2V0U2NhbGluZ0xvY2FsKFpFUk8pO1xuICAgICAgICAvKiBFbnN1cmUgYWxsIGV2ZW50IGxpc3RlbmVycyBhcmUgcmVtb3ZlZCAqL1xuICAgICAgICBmb3IgKGNvbnN0IGYgb2YgdGhpcy5fb25EZWFjdGl2YXRlQ2FsbGJhY2tzKVxuICAgICAgICAgICAgZigpO1xuICAgICAgICB0aGlzLl9vbkRlYWN0aXZhdGVDYWxsYmFja3MubGVuZ3RoID0gMDtcbiAgICB9XG4gICAgb25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLl9oaXRUZXN0T2JqZWN0Py5kZXN0cm95KCk7XG4gICAgfVxuICAgIC8qKiAnc2VsZWN0JyBldmVudCBsaXN0ZW5lciAqL1xuICAgIG9uU2VsZWN0KGUpIHtcbiAgICAgICAgaWYgKGUuaW5wdXRTb3VyY2UuaGFuZGVkbmVzcyAhPSB0aGlzLmhhbmRlZG5lc3MpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMucmF5Q2FzdChlLCBlLmZyYW1lLCB0cnVlKTtcbiAgICB9XG4gICAgLyoqICdzZWxlY3RzdGFydCcgZXZlbnQgbGlzdGVuZXIgKi9cbiAgICBvblNlbGVjdFN0YXJ0KGUpIHtcbiAgICAgICAgdGhpcy5fYXJUb3VjaERvd24gPSB0cnVlO1xuICAgICAgICBpZiAoZS5pbnB1dFNvdXJjZS5oYW5kZWRuZXNzID09IHRoaXMuaGFuZGVkbmVzcykge1xuICAgICAgICAgICAgdGhpcy5faXNEb3duID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucmF5Q2FzdChlLCBlLmZyYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogJ3NlbGVjdGVuZCcgZXZlbnQgbGlzdGVuZXIgKi9cbiAgICBvblNlbGVjdEVuZChlKSB7XG4gICAgICAgIHRoaXMuX2FyVG91Y2hEb3duID0gZmFsc2U7XG4gICAgICAgIGlmIChlLmlucHV0U291cmNlLmhhbmRlZG5lc3MgPT0gdGhpcy5oYW5kZWRuZXNzKSB7XG4gICAgICAgICAgICB0aGlzLl9pc0Rvd24gPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucmF5Q2FzdChlLCBlLmZyYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogJ3BvaW50ZXJtb3ZlJyBldmVudCBsaXN0ZW5lciAqL1xuICAgIG9uUG9pbnRlck1vdmUoZSkge1xuICAgICAgICAvKiBEb24ndCBjYXJlIGFib3V0IHNlY29uZGFyeSBwb2ludGVycyAqL1xuICAgICAgICBpZiAoIWUuaXNQcmltYXJ5KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLnVwZGF0ZU1vdXNlUG9zKGUpO1xuICAgICAgICB0aGlzLnJheUNhc3QoZSwgbnVsbCk7XG4gICAgfVxuICAgIC8qKiAnY2xpY2snIGV2ZW50IGxpc3RlbmVyICovXG4gICAgb25DbGljayhlKSB7XG4gICAgICAgIHRoaXMudXBkYXRlTW91c2VQb3MoZSk7XG4gICAgICAgIHRoaXMucmF5Q2FzdChlLCBudWxsLCB0cnVlKTtcbiAgICB9XG4gICAgLyoqICdwb2ludGVyZG93bicgZXZlbnQgbGlzdGVuZXIgKi9cbiAgICBvblBvaW50ZXJEb3duKGUpIHtcbiAgICAgICAgLyogRG9uJ3QgY2FyZSBhYm91dCBzZWNvbmRhcnkgcG9pbnRlcnMgb3Igbm9uLWxlZnQgY2xpY2tzICovXG4gICAgICAgIGlmICghZS5pc1ByaW1hcnkgfHwgZS5idXR0b24gIT09IDApXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMudXBkYXRlTW91c2VQb3MoZSk7XG4gICAgICAgIHRoaXMuX2lzRG93biA9IHRydWU7XG4gICAgICAgIHRoaXMucmF5Q2FzdChlKTtcbiAgICB9XG4gICAgLyoqICdwb2ludGVydXAnIGV2ZW50IGxpc3RlbmVyICovXG4gICAgb25Qb2ludGVyVXAoZSkge1xuICAgICAgICAvKiBEb24ndCBjYXJlIGFib3V0IHNlY29uZGFyeSBwb2ludGVycyBvciBub24tbGVmdCBjbGlja3MgKi9cbiAgICAgICAgaWYgKCFlLmlzUHJpbWFyeSB8fCBlLmJ1dHRvbiAhPT0gMClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy51cGRhdGVNb3VzZVBvcyhlKTtcbiAgICAgICAgdGhpcy5faXNEb3duID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmF5Q2FzdChlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIG1vdXNlIHBvc2l0aW9uIGluIG5vbi1WUiBtb2RlIGFuZCByYXljYXN0IGZvciBuZXcgcG9zaXRpb25cbiAgICAgKiBAcmV0dXJucyBAcmVmIFJheUhpdCBmb3IgbmV3IHBvc2l0aW9uLlxuICAgICAqL1xuICAgIHVwZGF0ZU1vdXNlUG9zKGUpIHtcbiAgICAgICAgdGhpcy5fbGFzdFBvaW50ZXJQb3NbMF0gPSBlLmNsaWVudFg7XG4gICAgICAgIHRoaXMuX2xhc3RQb2ludGVyUG9zWzFdID0gZS5jbGllbnRZO1xuICAgICAgICB0aGlzLnVwZGF0ZURpcmVjdGlvbigpO1xuICAgIH1cbiAgICB1cGRhdGVEaXJlY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuZW5naW5lLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgLyogR2V0IGRpcmVjdGlvbiBpbiBub3JtYWxpemVkIGRldmljZSBjb29yZGluYXRlIHNwYWNlIGZyb20gbW91c2UgcG9zaXRpb24gKi9cbiAgICAgICAgY29uc3QgbGVmdCA9IHRoaXMuX2xhc3RQb2ludGVyUG9zWzBdIC8gYm91bmRzLndpZHRoO1xuICAgICAgICBjb25zdCB0b3AgPSB0aGlzLl9sYXN0UG9pbnRlclBvc1sxXSAvIGJvdW5kcy5oZWlnaHQ7XG4gICAgICAgIHRoaXMuX2RpcmVjdGlvblswXSA9IGxlZnQgKiAyIC0gMTtcbiAgICAgICAgdGhpcy5fZGlyZWN0aW9uWzFdID0gLXRvcCAqIDIgKyAxO1xuICAgICAgICB0aGlzLl9kaXJlY3Rpb25bMl0gPSAtMS4wO1xuICAgICAgICB0aGlzLmFwcGx5VHJhbnNmb3JtQW5kUHJvamVjdERpcmVjdGlvbigpO1xuICAgIH1cbiAgICBhcHBseVRyYW5zZm9ybUFuZFByb2plY3REaXJlY3Rpb24oKSB7XG4gICAgICAgIC8qIFJldmVyc2UtcHJvamVjdCB0aGUgZGlyZWN0aW9uIGludG8gdmlldyBzcGFjZSAqL1xuICAgICAgICB2ZWMzLnRyYW5zZm9ybU1hdDQodGhpcy5fZGlyZWN0aW9uLCB0aGlzLl9kaXJlY3Rpb24sIHRoaXMuX3Byb2plY3Rpb25NYXRyaXgpO1xuICAgICAgICB2ZWMzLm5vcm1hbGl6ZSh0aGlzLl9kaXJlY3Rpb24sIHRoaXMuX2RpcmVjdGlvbik7XG4gICAgICAgIHRoaXMuYXBwbHlUcmFuc2Zvcm1Ub0RpcmVjdGlvbigpO1xuICAgIH1cbiAgICBhcHBseVRyYW5zZm9ybVRvRGlyZWN0aW9uKCkge1xuICAgICAgICB0aGlzLm9iamVjdC50cmFuc2Zvcm1WZWN0b3JXb3JsZCh0aGlzLl9kaXJlY3Rpb24sIHRoaXMuX2RpcmVjdGlvbik7XG4gICAgICAgIHRoaXMub2JqZWN0LmdldFBvc2l0aW9uV29ybGQodGhpcy5fb3JpZ2luKTtcbiAgICB9XG4gICAgcmF5Q2FzdChvcmlnaW5hbEV2ZW50LCBmcmFtZSA9IG51bGwsIGRvQ2xpY2sgPSBmYWxzZSkge1xuICAgICAgICBjb25zdCByYXlIaXQgPSB0aGlzLnJheUNhc3RNb2RlID09IDBcbiAgICAgICAgICAgID8gdGhpcy5lbmdpbmUuc2NlbmUucmF5Q2FzdCh0aGlzLl9vcmlnaW4sIHRoaXMuX2RpcmVjdGlvbiwgdGhpcy5fY29sbGlzaW9uTWFzaylcbiAgICAgICAgICAgIDogdGhpcy5lbmdpbmUucGh5c2ljcy5yYXlDYXN0KHRoaXMuX29yaWdpbiwgdGhpcy5fZGlyZWN0aW9uLCB0aGlzLl9jb2xsaXNpb25NYXNrLCB0aGlzLm1heERpc3RhbmNlKTtcbiAgICAgICAgbGV0IGhpdFJlc3VsdERpc3RhbmNlID0gSW5maW5pdHk7XG4gICAgICAgIGxldCBoaXRUZXN0UmVzdWx0ID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuX2hpdFRlc3RMb2NhdGlvbj8udmlzaWJsZSkge1xuICAgICAgICAgICAgdGhpcy5faGl0VGVzdE9iamVjdC5nZXRQb3NpdGlvbldvcmxkKHRoaXMuY3Vyc29yUG9zKTtcbiAgICAgICAgICAgIGhpdFJlc3VsdERpc3RhbmNlID0gdmVjMy5kaXN0YW5jZSh0aGlzLm9iamVjdC5nZXRQb3NpdGlvbldvcmxkKHRlbXBWZWMpLCB0aGlzLmN1cnNvclBvcyk7XG4gICAgICAgICAgICBoaXRUZXN0UmVzdWx0ID0gdGhpcy5faGl0VGVzdExvY2F0aW9uPy5nZXRIaXRUZXN0UmVzdWx0cyhmcmFtZSlbMF07XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGhvdmVyaW5nUmVhbGl0eSA9IGZhbHNlO1xuICAgICAgICBpZiAocmF5SGl0LmhpdENvdW50ID4gMCkge1xuICAgICAgICAgICAgY29uc3QgZCA9IHJheUhpdC5kaXN0YW5jZXNbMF07XG4gICAgICAgICAgICBpZiAoaGl0UmVzdWx0RGlzdGFuY2UgPj0gZCkge1xuICAgICAgICAgICAgICAgIC8qIE92ZXJyaWRlIGN1cnNvclBvcyBzZXQgYnkgaGl0IHRlc3QgbG9jYXRpb24gKi9cbiAgICAgICAgICAgICAgICB0aGlzLmN1cnNvclBvcy5zZXQocmF5SGl0LmxvY2F0aW9uc1swXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBob3ZlcmluZ1JlYWxpdHkgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGhpdFJlc3VsdERpc3RhbmNlIDwgSW5maW5pdHkpIHtcbiAgICAgICAgICAgIC8qIGN1cnNvclBvcyBhbHJlYWR5IHNldCAqL1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jdXJzb3JQb3MuZmlsbCgwKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaG92ZXJpbmdSZWFsaXR5ICYmICF0aGlzLmhvdmVyaW5nUmVhbGl0eSkge1xuICAgICAgICAgICAgdGhpcy5oaXRUZXN0VGFyZ2V0Lm9uSG92ZXIubm90aWZ5KGhpdFRlc3RSZXN1bHQsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFob3ZlcmluZ1JlYWxpdHkgJiYgdGhpcy5ob3ZlcmluZ1JlYWxpdHkpIHtcbiAgICAgICAgICAgIHRoaXMuaGl0VGVzdFRhcmdldC5vblVuaG92ZXIubm90aWZ5KGhpdFRlc3RSZXN1bHQsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaG92ZXJpbmdSZWFsaXR5ID0gaG92ZXJpbmdSZWFsaXR5O1xuICAgICAgICB0aGlzLmhvdmVyQmVoYXZpb3VyKHJheUhpdCwgaGl0VGVzdFJlc3VsdCwgZG9DbGljaywgb3JpZ2luYWxFdmVudCk7XG4gICAgICAgIHJldHVybiByYXlIaXQ7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuaW50KDEpXG5dLCBDdXJzb3IucHJvdG90eXBlLCBcImNvbGxpc2lvbkdyb3VwXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5vYmplY3QoKVxuXSwgQ3Vyc29yLnByb3RvdHlwZSwgXCJjdXJzb3JSYXlPYmplY3RcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmVudW0oWyd4JywgJ3knLCAneicsICdub25lJ10sICd6Jylcbl0sIEN1cnNvci5wcm90b3R5cGUsIFwiY3Vyc29yUmF5U2NhbGluZ0F4aXNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5Lm9iamVjdCgpXG5dLCBDdXJzb3IucHJvdG90eXBlLCBcImN1cnNvck9iamVjdFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZW51bShbJ2lucHV0IGNvbXBvbmVudCcsICdsZWZ0JywgJ3JpZ2h0JywgJ25vbmUnXSwgJ2lucHV0IGNvbXBvbmVudCcpXG5dLCBDdXJzb3IucHJvdG90eXBlLCBcImhhbmRlZG5lc3NcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmVudW0oWydjb2xsaXNpb24nLCAncGh5c3gnXSwgJ2NvbGxpc2lvbicpXG5dLCBDdXJzb3IucHJvdG90eXBlLCBcInJheUNhc3RNb2RlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5mbG9hdCgxMDApXG5dLCBDdXJzb3IucHJvdG90eXBlLCBcIm1heERpc3RhbmNlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5ib29sKHRydWUpXG5dLCBDdXJzb3IucHJvdG90eXBlLCBcInN0eWxlQ3Vyc29yXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5ib29sKGZhbHNlKVxuXSwgQ3Vyc29yLnByb3RvdHlwZSwgXCJ1c2VXZWJYUkhpdFRlc3RcIiwgdm9pZCAwKTtcbmV4cG9ydCB7IEN1cnNvciB9O1xuIiwgInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaS9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IHF1YXQyIH0gZnJvbSAnZ2wtbWF0cml4Jztcbi8qKlxuICogUHJpbnRzIHNvbWUgbGltaXRlZCBkZWJ1ZyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgb2JqZWN0LlxuICpcbiAqIEluZm9ybWF0aW9uIGNvbnNpc3RzIG9mOiBUaGlzIG9iamVjdCdzIG5hbWUsIGFuIG9iamVjdCBwYXJhbWV0ZXIncyBuYW1lLFxuICogdGhlIG9iamVjdCdzIHdvcmxkIHRyYW5zbGF0aW9uLCB3b3JsZCB0cmFuc2Zvcm0gYW5kIGxvY2FsIHRyYW5zZm9ybS5cbiAqXG4gKiBNYWlubHkgdXNlZCBieSBlbmdpbmUgZGV2ZWxvcGVycyBmb3IgZGVidWcgcHVycG9zZXMgb3IgYXMgZXhhbXBsZSBjb2RlLlxuICovXG5jbGFzcyBEZWJ1Z09iamVjdCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ2RlYnVnLW9iamVjdCc7XG4gICAgLyoqIEEgc2Vjb25kIG9iamVjdCB0byBwcmludCB0aGUgbmFtZSBvZiAqL1xuICAgIG9iaiA9IG51bGw7XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGxldCBvcmlnaW4gPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgICAgICBxdWF0Mi5nZXRUcmFuc2xhdGlvbihvcmlnaW4sIHRoaXMub2JqZWN0LnRyYW5zZm9ybVdvcmxkKTtcbiAgICAgICAgY29uc29sZS5sb2coJ0RlYnVnIG9iamVjdDonLCB0aGlzLm9iamVjdC5uYW1lKTtcbiAgICAgICAgY29uc29sZS5sb2coJ090aGVyIG9iamVjdDonLCB0aGlzLm9iaj8ubmFtZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdcXHR0cmFuc2xhdGlvbicsIG9yaWdpbik7XG4gICAgICAgIGNvbnNvbGUubG9nKCdcXHR0cmFuc2Zvcm1Xb3JsZCcsIHRoaXMub2JqZWN0LnRyYW5zZm9ybVdvcmxkKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1xcdHRyYW5zZm9ybUxvY2FsJywgdGhpcy5vYmplY3QudHJhbnNmb3JtTG9jYWwpO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5Lm9iamVjdCgpXG5dLCBEZWJ1Z09iamVjdC5wcm90b3R5cGUsIFwib2JqXCIsIHZvaWQgMCk7XG5leHBvcnQgeyBEZWJ1Z09iamVjdCB9O1xuIiwgImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4vKipcbiAqIEZ1bmN0aW9uIHRvIGNvbnZlcnQgYSBFdWxlciBpbiBZWFogb3JkZXIgdG8gYSBxdWF0ZXJuaW9uXG4gKi9cbmZ1bmN0aW9uIHF1YXRGcm9tRXVsZXJZWFoob3V0LCB4LCB5LCB6KSB7XG4gICAgY29uc3QgYzEgPSBNYXRoLmNvcyh4IC8gMik7XG4gICAgY29uc3QgYzIgPSBNYXRoLmNvcyh5IC8gMik7XG4gICAgY29uc3QgYzMgPSBNYXRoLmNvcyh6IC8gMik7XG4gICAgY29uc3QgczEgPSBNYXRoLnNpbih4IC8gMik7XG4gICAgY29uc3QgczIgPSBNYXRoLnNpbih5IC8gMik7XG4gICAgY29uc3QgczMgPSBNYXRoLnNpbih6IC8gMik7XG4gICAgb3V0WzBdID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzO1xuICAgIG91dFsxXSA9IGMxICogczIgKiBjMyAtIHMxICogYzIgKiBzMztcbiAgICBvdXRbMl0gPSBjMSAqIGMyICogczMgLSBzMSAqIHMyICogYzM7XG4gICAgb3V0WzNdID0gYzEgKiBjMiAqIGMzICsgczEgKiBzMiAqIHMzO1xufVxuLyoqXG4gKiBSZXRyaWV2ZSBkZXZpY2Ugb3JpZW50YXRpb24gZnJvbSBhIG1vYmlsZSBkZXZpY2UgYW5kIHNldCB0aGUgb2JqZWN0J3NcbiAqIG9yaWVudGF0aW9uIGFjY29yZGluZ2x5LlxuICpcbiAqIFVzZWZ1bCBmb3IgbWFnaWMgd2luZG93IGV4cGVyaWVuY2VzLlxuICovXG5jbGFzcyBEZXZpY2VPcmllbnRhdGlvbkxvb2sgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdkZXZpY2Utb3JpZW50YXRpb24tbG9vayc7XG4gICAgc3RhdGljIFByb3BlcnRpZXMgPSB7fTtcbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5yb3RhdGlvblggPSAwO1xuICAgICAgICB0aGlzLnJvdGF0aW9uWSA9IDA7XG4gICAgICAgIHRoaXMubGFzdENsaWVudFggPSAtMTtcbiAgICAgICAgdGhpcy5sYXN0Q2xpZW50WSA9IC0xO1xuICAgIH1cbiAgICBpbml0KCkge1xuICAgICAgICAvKiBJbml0aWFsaXplIGRldmljZSBvcmllbnRhdGlvbiB3aXRoIElkZW50aXR5IFF1YXRlcm5pb24gKi9cbiAgICAgICAgdGhpcy5kZXZpY2VPcmllbnRhdGlvbiA9IFswLCAwLCAwLCAxXTtcbiAgICAgICAgdGhpcy5zY3JlZW5PcmllbnRhdGlvbiA9IHdpbmRvdy5pbm5lckhlaWdodCA+IHdpbmRvdy5pbm5lcldpZHRoID8gMCA6IDkwO1xuICAgICAgICB0aGlzLl9vcmlnaW4gPSBbMCwgMCwgMF07XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdkZXZpY2VvcmllbnRhdGlvbicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBsZXQgYWxwaGEgPSBlLmFscGhhIHx8IDA7XG4gICAgICAgICAgICBsZXQgYmV0YSA9IGUuYmV0YSB8fCAwO1xuICAgICAgICAgICAgbGV0IGdhbW1hID0gZS5nYW1tYSB8fCAwO1xuICAgICAgICAgICAgY29uc3QgdG9SYWQgPSBNYXRoLlBJIC8gMTgwO1xuICAgICAgICAgICAgcXVhdEZyb21FdWxlcllYWih0aGlzLmRldmljZU9yaWVudGF0aW9uLCBiZXRhICogdG9SYWQsIGFscGhhICogdG9SYWQsIC1nYW1tYSAqIHRvUmFkKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29yaWVudGF0aW9uY2hhbmdlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2NyZWVuT3JpZW50YXRpb24gPSB3aW5kb3cub3JpZW50YXRpb24gfHwgMDtcbiAgICAgICAgfS5iaW5kKHRoaXMpLCBmYWxzZSk7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgLyogRG9uJ3QgdXNlIGRldmljZSBvcmllbnRhdGlvbiBpbiBWUiAqL1xuICAgICAgICBpZiAodGhpcy5lbmdpbmUueHIpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMub2JqZWN0LmdldFRyYW5zbGF0aW9uTG9jYWwodGhpcy5fb3JpZ2luKTtcbiAgICAgICAgdGhpcy5vYmplY3QucmVzZXRUcmFuc2Zvcm0oKTtcbiAgICAgICAgaWYgKHRoaXMuc2NyZWVuT3JpZW50YXRpb24gIT0gMCkge1xuICAgICAgICAgICAgdGhpcy5vYmplY3Qucm90YXRlQXhpc0FuZ2xlRGVnKFswLCAwLCAtMV0sIHRoaXMuc2NyZWVuT3JpZW50YXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2JqZWN0LnJvdGF0ZShbLU1hdGguc3FydCgwLjUpLCAwLCAwLCBNYXRoLnNxcnQoMC41KV0pO1xuICAgICAgICB0aGlzLm9iamVjdC5yb3RhdGUodGhpcy5kZXZpY2VPcmllbnRhdGlvbik7XG4gICAgICAgIHRoaXMub2JqZWN0LnRyYW5zbGF0ZSh0aGlzLl9vcmlnaW4pO1xuICAgIH1cbn1cbmV4cG9ydCB7IERldmljZU9yaWVudGF0aW9uTG9vayB9O1xuIiwgImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4vKipcbiAqIEVuYWJsZXMgaW50ZXJhY3Rpb24gd2l0aCBjdXJzb3ItdGFyZ2V0cyB0aHJvdWdoIGNvbGxpc2lvbiBvdmVybGFwcyxcbiAqIGUuZy4gb24gdGhlIHRpcCBvZiBhIGZpbmdlciBvbiBhIHRyYWNrZWQgaGFuZC5cbiAqXG4gKiAqKlJlcXVpcmVtZW50czoqKlxuICogIC0gQSBjb2xsaXNpb24gY29tcG9uZW50ICh1c3VhbGx5IGEgc3BoZXJlIHdpdGggYDAuMDVgIHJhZGl1cykgb24gdGhlIHNhbWUgb2JqZWN0XG4gKlxuICogQHNpbmNlIDAuOC41XG4gKi9cbmNsYXNzIEZpbmdlckN1cnNvciBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ2Zpbmdlci1jdXJzb3InO1xuICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge307XG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5sYXN0VGFyZ2V0ID0gbnVsbDtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMudGlwID0gdGhpcy5vYmplY3QuZ2V0Q29tcG9uZW50KCdjb2xsaXNpb24nKTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICBjb25zdCBvdmVybGFwcyA9IHRoaXMudGlwLnF1ZXJ5T3ZlcmxhcHMoKTtcbiAgICAgICAgbGV0IG92ZXJsYXBGb3VuZCA9IG51bGw7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3ZlcmxhcHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBvdmVybGFwc1tpXS5vYmplY3Q7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBvLmdldENvbXBvbmVudCgnY3Vyc29yLXRhcmdldCcpO1xuICAgICAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0LmVxdWFscyh0aGlzLmxhc3RUYXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC5vbkhvdmVyKG8sIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQub25DbGljayhvLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb3ZlcmxhcEZvdW5kID0gdGFyZ2V0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghb3ZlcmxhcEZvdW5kKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5sYXN0VGFyZ2V0KVxuICAgICAgICAgICAgICAgIHRoaXMubGFzdFRhcmdldC5vblVuaG92ZXIodGhpcy5sYXN0VGFyZ2V0Lm9iamVjdCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLmxhc3RUYXJnZXQgPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sYXN0VGFyZ2V0ID0gb3ZlcmxhcEZvdW5kO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IHsgRmluZ2VyQ3Vyc29yIH07XG4iLCAiaW1wb3J0IHsgQ29tcG9uZW50LCBUeXBlIH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbi8qKlxuICogQXBwbGllcyBbZml4ZWQgZm92ZWF0aW9uXShodHRwczovL3d3dy53My5vcmcvVFIvd2VieHJsYXllcnMtMS8jZG9tLXhyY29tcG9zaXRpb25sYXllci1maXhlZGZvdmVhdGlvbilcbiAqIG9uY2UgYSBXZWJYUiBzZXNzaW9uIGlzIHN0YXJ0ZWRcbiAqXG4gKiBGaXhlZCBmb3ZlYXRpb24gcmVkdWNlcyBzaGFkaW5nIGNvc3QgYXQgdGhlIHBlcmlwaGVyeSBieSByZW5kZXJpbmcgYXQgbG93ZXIgcmVzb2x1dGlvbnMgYXQgdGhlXG4gKiBlZGdlcyBvZiB0aGUgdXNlcnMgdmlzaW9uLlxuICovXG5jbGFzcyBGaXhlZEZvdmVhdGlvbiBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ2ZpeGVkLWZvdmVhdGlvbic7XG4gICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gICAgICAgIC8qKiBBbW91bnQgdG8gYXBwbHkgZnJvbSAwIChub25lKSB0byAxIChmdWxsKSAqL1xuICAgICAgICBmaXhlZEZvdmVhdGlvbjogeyB0eXBlOiBUeXBlLkZsb2F0LCBkZWZhdWx0OiAwLjUgfSxcbiAgICB9O1xuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLm9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2sgPSB0aGlzLnNldEZpeGVkRm92ZWF0aW9uLmJpbmQodGhpcyk7XG4gICAgfVxuICAgIG9uQWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQuYWRkKHRoaXMub25TZXNzaW9uU3RhcnRDYWxsYmFjayk7XG4gICAgfVxuICAgIG9uRGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUub25YUlNlc3Npb25TdGFydC5yZW1vdmUodGhpcy5vblNlc3Npb25TdGFydENhbGxiYWNrKTtcbiAgICB9XG4gICAgc2V0Rml4ZWRGb3ZlYXRpb24oKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLnhyLmJhc2VMYXllci5maXhlZEZvdmVhdGlvbiA9IHRoaXMuZml4ZWRGb3ZlYXRpb247XG4gICAgfVxufVxuZXhwb3J0IHsgRml4ZWRGb3ZlYXRpb24gfTtcbiIsICJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBDb21wb25lbnQsIE1lc2hDb21wb25lbnQsIH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbmltcG9ydCB7IHByb3BlcnR5IH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpL2RlY29yYXRvcnMuanMnO1xuaW1wb3J0IHsgdmVjMywgcXVhdCB9IGZyb20gJ2dsLW1hdHJpeCc7XG5pbXBvcnQgeyBzZXRYUlJpZ2lkVHJhbnNmb3JtTG9jYWwgfSBmcm9tICcuL3V0aWxzL3dlYnhyLmpzJztcbmNvbnN0IE9SREVSRURfSk9JTlRTID0gW1xuICAgICd3cmlzdCcsXG4gICAgJ3RodW1iLW1ldGFjYXJwYWwnLFxuICAgICd0aHVtYi1waGFsYW54LXByb3hpbWFsJyxcbiAgICAndGh1bWItcGhhbGFueC1kaXN0YWwnLFxuICAgICd0aHVtYi10aXAnLFxuICAgICdpbmRleC1maW5nZXItbWV0YWNhcnBhbCcsXG4gICAgJ2luZGV4LWZpbmdlci1waGFsYW54LXByb3hpbWFsJyxcbiAgICAnaW5kZXgtZmluZ2VyLXBoYWxhbngtaW50ZXJtZWRpYXRlJyxcbiAgICAnaW5kZXgtZmluZ2VyLXBoYWxhbngtZGlzdGFsJyxcbiAgICAnaW5kZXgtZmluZ2VyLXRpcCcsXG4gICAgJ21pZGRsZS1maW5nZXItbWV0YWNhcnBhbCcsXG4gICAgJ21pZGRsZS1maW5nZXItcGhhbGFueC1wcm94aW1hbCcsXG4gICAgJ21pZGRsZS1maW5nZXItcGhhbGFueC1pbnRlcm1lZGlhdGUnLFxuICAgICdtaWRkbGUtZmluZ2VyLXBoYWxhbngtZGlzdGFsJyxcbiAgICAnbWlkZGxlLWZpbmdlci10aXAnLFxuICAgICdyaW5nLWZpbmdlci1tZXRhY2FycGFsJyxcbiAgICAncmluZy1maW5nZXItcGhhbGFueC1wcm94aW1hbCcsXG4gICAgJ3JpbmctZmluZ2VyLXBoYWxhbngtaW50ZXJtZWRpYXRlJyxcbiAgICAncmluZy1maW5nZXItcGhhbGFueC1kaXN0YWwnLFxuICAgICdyaW5nLWZpbmdlci10aXAnLFxuICAgICdwaW5reS1maW5nZXItbWV0YWNhcnBhbCcsXG4gICAgJ3Bpbmt5LWZpbmdlci1waGFsYW54LXByb3hpbWFsJyxcbiAgICAncGlua3ktZmluZ2VyLXBoYWxhbngtaW50ZXJtZWRpYXRlJyxcbiAgICAncGlua3ktZmluZ2VyLXBoYWxhbngtZGlzdGFsJyxcbiAgICAncGlua3ktZmluZ2VyLXRpcCcsXG5dO1xuY29uc3QgaW52VHJhbnNsYXRpb24gPSB2ZWMzLmNyZWF0ZSgpO1xuY29uc3QgaW52Um90YXRpb24gPSBxdWF0LmNyZWF0ZSgpO1xuY29uc3QgdGVtcFZlYzAgPSB2ZWMzLmNyZWF0ZSgpO1xuY29uc3QgdGVtcFZlYzEgPSB2ZWMzLmNyZWF0ZSgpO1xuLyoqXG4gKiBFYXN5IGhhbmQgdHJhY2tpbmcgdGhyb3VnaCB0aGUgV2ViWFIgRGV2aWNlIEFQSVxuICogW1wiSGFuZCBJbnB1dFwiIEFQSV0oaHR0cHM6Ly9pbW1lcnNpdmUtd2ViLmdpdGh1Yi5pby93ZWJ4ci1oYW5kLWlucHV0LykuXG4gKlxuICogQWxsb3dzIGRpc3BsYXlpbmcgaGFuZHMgZWl0aGVyIGFzIHNwaGVyZS1qb2ludHMgb3Igc2tpbm5lZCBtZXNoLlxuICpcbiAqIFRvIHJlYWN0IHRvIGdyYWJiaW5nLCB1c2UgYHRoaXMuaXNHcmFiYmluZygpYC4gRm9yIG90aGVyIGdlc3R1cmVzLCByZWZlclxuICogdG8gYHRoaXMuam9pbnRzYCAtIGFuIGFycmF5IG9mIFtPYmplY3QzRF0oL2pzYXBpL29iamVjdDNkKSBhbmQgdXNlIHRoZSBqb2ludFxuICogaW5kaWNlcyBsaXN0ZWQgW2luIHRoZSBXZWJYUiBIYW5kIElucHV0IHNwZWNpZmljYXRpb25dKGh0dHBzOi8vaW1tZXJzaXZlLXdlYi5naXRodWIuaW8vd2VieHItaGFuZC1pbnB1dC8jc2tlbGV0b24tam9pbnRzLXNlY3Rpb24pLlxuICpcbiAqIEl0IGlzIG9mdGVuIGRlc2lyZWQgdG8gdXNlIGVpdGhlciBoYW5kIHRyYWNraW5nIG9yIGNvbnRyb2xsZXJzLCBub3QgYm90aC5cbiAqIFRoaXMgY29tcG9uZW50IHByb3ZpZGVzIGBkZWFjdGl2YXRlQ2hpbGRyZW5XaXRob3V0UG9zZWAgdG8gaGlkZSB0aGUgaGFuZFxuICogdHJhY2tpbmcgdmlzdWFsaXphdGlvbiBpZiBubyBwb3NlIGlzIGF2YWlsYWJsZSBhbmQgYGNvbnRyb2xsZXJUb0RlYWN0aXZhdGVgXG4gKiBmb3IgZGlzYWJsaW5nIGFub3RoZXIgb2JqZWN0IG9uY2UgYSBoYW5kIHRyYWNraW5nIHBvc2UgKmlzKiBhdmFpbGFibGUuXG4gKiBPdXRzaWRlIG9mIFhSIHNlc3Npb25zLCB0cmFja2luZyBvciBjb250cm9sbGVycyBhcmUgbmVpdGhlciBlbmFibGVkIG5vciBkaXNhYmxlZFxuICogdG8gcGxheSB3ZWxsIHdpdGggdGhlIFt2ci1tb2RlLWFjdGl2ZS1zd2l0Y2hdKCN2ci1tb2RlLWFjdGl2ZS1zd2l0Y2gpIGNvbXBvbmVudC5cbiAqXG4gKiAqKlJlcXVpcmVtZW50czoqKlxuICogIC0gVG8gdXNlIGhhbmQtdHJhY2tpbmcsIGVuYWJsZSBcImpvaW50IHRyYWNraW5nXCIgaW4gYGNocm9tZTovL2ZsYWdzYCBvblxuICogICAgT2N1bHVzIEJyb3dzZXIgZm9yIE9jdWx1cyBRdWVzdC9PY3VsdXMgUXVlc3QgMi5cbiAqXG4gKiBTZWUgW0hhbmQgVHJhY2tpbmcgRXhhbXBsZV0oL3Nob3djYXNlL2hhbmQtdHJhY2tpbmcpLlxuICovXG5jbGFzcyBIYW5kVHJhY2tpbmcgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdoYW5kLXRyYWNraW5nJztcbiAgICAvKiogSGFuZGVkbmVzcyBkZXRlcm1pbmluZyB3aGV0aGVyIHRvIHJlY2VpdmUgdHJhY2tpbmcgaW5wdXQgZnJvbSByaWdodCBvciBsZWZ0IGhhbmQgKi9cbiAgICBoYW5kZWRuZXNzID0gMDtcbiAgICAvKiogKG9wdGlvbmFsKSBNZXNoIHRvIHVzZSB0byB2aXN1YWxpemUgam9pbnRzICovXG4gICAgam9pbnRNZXNoID0gbnVsbDtcbiAgICAvKiogTWF0ZXJpYWwgdG8gdXNlIGZvciBkaXNwbGF5LiBBcHBsaWVkIHRvIGVpdGhlciB0aGUgc3Bhd25lZCBza2lubmVkIG1lc2ggb3IgdGhlIGpvaW50IHNwaGVyZXMuICovXG4gICAgam9pbnRNYXRlcmlhbCA9IG51bGw7XG4gICAgLyoqIChvcHRpb25hbCkgU2tpbiB0byBhcHBseSB0cmFja2VkIGpvaW50IHBvc2VzIHRvLiBJZiBub3QgcHJlc2VudCxcbiAgICAgKiBqb2ludCBzcGhlcmVzIHdpbGwgYmUgdXNlZCBmb3IgZGlzcGxheSBpbnN0ZWFkLiAqL1xuICAgIGhhbmRTa2luID0gbnVsbDtcbiAgICAvKiogRGVhY3RpdmF0ZSBjaGlsZHJlbiBpZiBubyBwb3NlIHdhcyB0cmFja2VkICovXG4gICAgZGVhY3RpdmF0ZUNoaWxkcmVuV2l0aG91dFBvc2UgPSB0cnVlO1xuICAgIC8qKiBDb250cm9sbGVyIG9iamVjdHMgdG8gYWN0aXZhdGUgaW5jbHVkaW5nIGNoaWxkcmVuIGlmIG5vIHBvc2UgaXMgYXZhaWxhYmxlICovXG4gICAgY29udHJvbGxlclRvRGVhY3RpdmF0ZSA9IG51bGw7XG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5oYW5kZWRuZXNzID0gWydsZWZ0JywgJ3JpZ2h0J11bdGhpcy5oYW5kZWRuZXNzXTtcbiAgICB9XG4gICAgam9pbnRzID0ge307XG4gICAgc2Vzc2lvbiA9IG51bGw7XG4gICAgLyogV2hldGhlciBsYXN0IHVwZGF0ZSBoYWQgYSBoYW5kIHBvc2UgKi9cbiAgICBoYXNQb3NlID0gZmFsc2U7XG4gICAgX2NoaWxkcmVuQWN0aXZlID0gdHJ1ZTtcbiAgICBzdGFydCgpIHtcbiAgICAgICAgaWYgKCEoJ1hSSGFuZCcgaW4gd2luZG93KSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdXZWJYUiBIYW5kIFRyYWNraW5nIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBicm93c2VyLicpO1xuICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5oYW5kU2tpbikge1xuICAgICAgICAgICAgY29uc3Qgc2tpbiA9IHRoaXMuaGFuZFNraW47XG4gICAgICAgICAgICBjb25zdCBqb2ludElkcyA9IHNraW4uam9pbnRJZHM7XG4gICAgICAgICAgICAvKiBNYXAgdGhlIHdyaXN0ICovXG4gICAgICAgICAgICB0aGlzLmpvaW50c1tPUkRFUkVEX0pPSU5UU1swXV0gPSB0aGlzLmVuZ2luZS53cmFwT2JqZWN0KGpvaW50SWRzWzBdKTtcbiAgICAgICAgICAgIC8qIEluZGV4IGluIE9SREVSRURfSk9JTlRTIHRoYXQgd2UgYXJlIG1hcHBpbmcgdG8gb3VyIGpvaW50cyAqL1xuICAgICAgICAgICAgLyogU2tpcCB0aHVtYjAgam9pbnQsIHN0YXJ0IGF0IHRodW1iMSAqL1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBqb2ludElkcy5sZW5ndGg7ICsraikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGpvaW50ID0gdGhpcy5lbmdpbmUud3JhcE9iamVjdChqb2ludElkc1tqXSk7XG4gICAgICAgICAgICAgICAgLyogdGlwIGpvaW50cyBhcmUgb25seSBuZWVkZWQgZm9yIGpvaW50IHJlbmRlcmluZywgc28gd2Ugc2tpcCB0aG9zZSB3aGlsZSBtYXBwaW5nICovXG4gICAgICAgICAgICAgICAgdGhpcy5qb2ludHNbam9pbnQubmFtZV0gPSBqb2ludDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qIElmIHdlIGhhdmUgYSBoYW5kIHNraW4sIG5vIG5lZWQgdG8gc3Bhd24gdGhlIGpvaW50cy1iYXNlZCBvbmUgKi9cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvKiBTcGF3biBqb2ludHMgKi9cbiAgICAgICAgY29uc3Qgam9pbnRPYmplY3RzID0gdGhpcy5lbmdpbmUuc2NlbmUuYWRkT2JqZWN0cyhPUkRFUkVEX0pPSU5UUy5sZW5ndGgsIHRoaXMub2JqZWN0LCBPUkRFUkVEX0pPSU5UUy5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IE9SREVSRURfSk9JTlRTLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgICBjb25zdCBqb2ludCA9IGpvaW50T2JqZWN0c1tqXTtcbiAgICAgICAgICAgIGpvaW50LmFkZENvbXBvbmVudChNZXNoQ29tcG9uZW50LCB7XG4gICAgICAgICAgICAgICAgbWVzaDogdGhpcy5qb2ludE1lc2gsXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWw6IHRoaXMuam9pbnRNYXRlcmlhbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5qb2ludHNbT1JERVJFRF9KT0lOVFNbal1dID0gam9pbnQ7XG4gICAgICAgICAgICBqb2ludC5uYW1lID0gT1JERVJFRF9KT0lOVFNbal07XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKGR0KSB7XG4gICAgICAgIGlmICghdGhpcy5lbmdpbmUueHIpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuaGFzUG9zZSA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5lbmdpbmUueHIuc2Vzc2lvbi5pbnB1dFNvdXJjZXMpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5lbmdpbmUueHIuc2Vzc2lvbi5pbnB1dFNvdXJjZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dFNvdXJjZSA9IHRoaXMuZW5naW5lLnhyLnNlc3Npb24uaW5wdXRTb3VyY2VzW2ldO1xuICAgICAgICAgICAgICAgIGlmICghaW5wdXRTb3VyY2U/LmhhbmQgfHwgaW5wdXRTb3VyY2U/LmhhbmRlZG5lc3MgIT0gdGhpcy5oYW5kZWRuZXNzKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjb25zdCB3cmlzdFNwYWNlID0gaW5wdXRTb3VyY2UuaGFuZC5nZXQoJ3dyaXN0Jyk7XG4gICAgICAgICAgICAgICAgaWYgKHdyaXN0U3BhY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcCA9IHRoaXMuZW5naW5lLnhyLmZyYW1lLmdldEpvaW50UG9zZSh3cmlzdFNwYWNlLCB0aGlzLmVuZ2luZS54ci5jdXJyZW50UmVmZXJlbmNlU3BhY2UpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0WFJSaWdpZFRyYW5zZm9ybUxvY2FsKHRoaXMub2JqZWN0LCBwLnRyYW5zZm9ybSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5vYmplY3QuZ2V0Um90YXRpb25Mb2NhbChpbnZSb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgcXVhdC5jb25qdWdhdGUoaW52Um90YXRpb24sIGludlJvdGF0aW9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9iamVjdC5nZXRQb3NpdGlvbkxvY2FsKGludlRyYW5zbGF0aW9uKTtcbiAgICAgICAgICAgICAgICAvKiBUaGVyZSBpcyBhIGJvbmUgJ3dyaXN0JywgYnV0IGl0IGp1c3Qgc2l0cyBvbiB0aGUgcm9vdFxuICAgICAgICAgICAgICAgICAqIG9iamVjdC4gSXQgY291bGQgaGF2ZSBhbiBpbml0aWFsIHRyYW5zZm9ybSB3ZSB3YW50IHRvXG4gICAgICAgICAgICAgICAgICogY2xlYXIgZm9yIHNraW5uaW5nLCB0aG91Z2guICovXG4gICAgICAgICAgICAgICAgdGhpcy5qb2ludHNbJ3dyaXN0J10ucmVzZXRUcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgICAgICAvKiBXcmlzdCBpcyBhbHJlYWR5IGhhbmRsZWQsIHNvIHN0YXJ0IGF0IDEgKi9cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IE9SREVSRURfSk9JTlRTLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGpvaW50TmFtZSA9IE9SREVSRURfSk9JTlRTW2pdO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBqb2ludCA9IHRoaXMuam9pbnRzW2pvaW50TmFtZV07XG4gICAgICAgICAgICAgICAgICAgIGlmICgham9pbnQpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGpvaW50UG9zZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGpvaW50U3BhY2UgPSBpbnB1dFNvdXJjZS5oYW5kLmdldChqb2ludE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoam9pbnRTcGFjZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgam9pbnRQb3NlID0gdGhpcy5lbmdpbmUueHIuZnJhbWUuZ2V0Sm9pbnRQb3NlKGpvaW50U3BhY2UsIHRoaXMuZW5naW5lLnhyLmN1cnJlbnRSZWZlcmVuY2VTcGFjZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGpvaW50UG9zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYXNQb3NlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpvaW50LnJlc2V0UG9zaXRpb25Sb3RhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgam9pbnQudHJhbnNsYXRlTG9jYWwoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpvaW50UG9zZS50cmFuc2Zvcm0ucG9zaXRpb24ueCAtIGludlRyYW5zbGF0aW9uWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpvaW50UG9zZS50cmFuc2Zvcm0ucG9zaXRpb24ueSAtIGludlRyYW5zbGF0aW9uWzFdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpvaW50UG9zZS50cmFuc2Zvcm0ucG9zaXRpb24ueiAtIGludlRyYW5zbGF0aW9uWzJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBqb2ludC5yb3RhdGVMb2NhbChpbnZSb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBqb2ludC5yb3RhdGVPYmplY3QoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpvaW50UG9zZS50cmFuc2Zvcm0ub3JpZW50YXRpb24ueCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqb2ludFBvc2UudHJhbnNmb3JtLm9yaWVudGF0aW9uLnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgam9pbnRQb3NlLnRyYW5zZm9ybS5vcmllbnRhdGlvbi56LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpvaW50UG9zZS50cmFuc2Zvcm0ub3JpZW50YXRpb24udyxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmhhbmRTa2luKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogTGFzdCBqb2ludCByYWRpdXMgb2YgZWFjaCBmaW5nZXIgaXMgbnVsbCAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBqb2ludFBvc2UucmFkaXVzIHx8IDAuMDA3O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpvaW50LnNldFNjYWxpbmdMb2NhbChbciwgciwgcl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5oYXNQb3NlICYmIHRoaXMuX2NoaWxkcmVuQWN0aXZlKSB7XG4gICAgICAgICAgICB0aGlzLl9jaGlsZHJlbkFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGVhY3RpdmF0ZUNoaWxkcmVuV2l0aG91dFBvc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENoaWxkcmVuQWN0aXZlKGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRyb2xsZXJUb0RlYWN0aXZhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXJUb0RlYWN0aXZhdGUuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENoaWxkcmVuQWN0aXZlKHRydWUsIHRoaXMuY29udHJvbGxlclRvRGVhY3RpdmF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5oYXNQb3NlICYmICF0aGlzLl9jaGlsZHJlbkFjdGl2ZSkge1xuICAgICAgICAgICAgdGhpcy5fY2hpbGRyZW5BY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGVhY3RpdmF0ZUNoaWxkcmVuV2l0aG91dFBvc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENoaWxkcmVuQWN0aXZlKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29udHJvbGxlclRvRGVhY3RpdmF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbGxlclRvRGVhY3RpdmF0ZS5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENoaWxkcmVuQWN0aXZlKGZhbHNlLCB0aGlzLmNvbnRyb2xsZXJUb0RlYWN0aXZhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHNldENoaWxkcmVuQWN0aXZlKGFjdGl2ZSwgb2JqZWN0KSB7XG4gICAgICAgIG9iamVjdCA9IG9iamVjdCB8fCB0aGlzLm9iamVjdDtcbiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBvYmplY3QuY2hpbGRyZW47XG4gICAgICAgIGZvciAoY29uc3QgbyBvZiBjaGlsZHJlbikge1xuICAgICAgICAgICAgby5hY3RpdmUgPSBhY3RpdmU7XG4gICAgICAgICAgICB0aGlzLnNldENoaWxkcmVuQWN0aXZlKGFjdGl2ZSwgbyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXNHcmFiYmluZygpIHtcbiAgICAgICAgdGhpcy5qb2ludHNbJ2luZGV4LWZpbmdlci10aXAnXS5nZXRQb3NpdGlvbkxvY2FsKHRlbXBWZWMwKTtcbiAgICAgICAgdGhpcy5qb2ludHNbJ3RodW1iLXRpcCddLmdldFBvc2l0aW9uTG9jYWwodGVtcFZlYzEpO1xuICAgICAgICByZXR1cm4gdmVjMy5zcXJEaXN0KHRlbXBWZWMwLCB0ZW1wVmVjMSkgPCAwLjAwMTtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5lbnVtKFsnbGVmdCcsICdyaWdodCddKVxuXSwgSGFuZFRyYWNraW5nLnByb3RvdHlwZSwgXCJoYW5kZWRuZXNzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5tZXNoKClcbl0sIEhhbmRUcmFja2luZy5wcm90b3R5cGUsIFwiam9pbnRNZXNoXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5tYXRlcmlhbCgpXG5dLCBIYW5kVHJhY2tpbmcucHJvdG90eXBlLCBcImpvaW50TWF0ZXJpYWxcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LnNraW4oKVxuXSwgSGFuZFRyYWNraW5nLnByb3RvdHlwZSwgXCJoYW5kU2tpblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuYm9vbCh0cnVlKVxuXSwgSGFuZFRyYWNraW5nLnByb3RvdHlwZSwgXCJkZWFjdGl2YXRlQ2hpbGRyZW5XaXRob3V0UG9zZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkub2JqZWN0KClcbl0sIEhhbmRUcmFja2luZy5wcm90b3R5cGUsIFwiY29udHJvbGxlclRvRGVhY3RpdmF0ZVwiLCB2b2lkIDApO1xuZXhwb3J0IHsgSGFuZFRyYWNraW5nIH07XG4iLCAiaW1wb3J0IHsgQ29tcG9uZW50LCBUeXBlIH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbmltcG9ydCAnaG93bGVyJztcbi8qKlxuICogKFNwYXRpYWwpIGF1ZGlvIGxpc3RlbmVyIGJhc2VkIG9uIFtIb3dsZXIuanNdKGh0dHBzOi8vaG93bGVyanMuY29tLykuXG4gKlxuICogUmV0cmlldmVzIHRoZSBsb2NhdGlvbiBhbmQgb3JpZW50YXRpb24gb2YgdGhlIG9iamVjdCBhbmQgcGFzc2VzIGl0XG4gKiB0byBbSG93bGVyLnBvcygpXShodHRwczovL2dpdGh1Yi5jb20vZ29sZGZpcmUvaG93bGVyLmpzI3Bvc3gteS16LWlkKVxuICogYW5kIFtIb3dsZXIub3JpZW50YXRpb24oKV0oaHR0cHM6Ly9naXRodWIuY29tL2dvbGRmaXJlL2hvd2xlci5qcyNvcmllbnRhdGlvbngteS16LWlkKS5cbiAqL1xuY2xhc3MgSG93bGVyQXVkaW9MaXN0ZW5lciBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ2hvd2xlci1hdWRpby1saXN0ZW5lcic7XG4gICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gICAgICAgIC8qKiBXaGV0aGVyIGF1ZGlvIHNob3VsZCBiZSBzcGF0aWFsaXplZC9wb3NpdGlvbmFsLiAqL1xuICAgICAgICBzcGF0aWFsOiB7IHR5cGU6IFR5cGUuQm9vbCwgZGVmYXVsdDogdHJ1ZSB9LFxuICAgIH07XG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5vcmlnaW4gPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgICAgICB0aGlzLmZ3ZCA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgICAgIHRoaXMudXAgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5zcGF0aWFsKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLm9iamVjdC5nZXRUcmFuc2xhdGlvbldvcmxkKHRoaXMub3JpZ2luKTtcbiAgICAgICAgdGhpcy5vYmplY3QuZ2V0Rm9yd2FyZCh0aGlzLmZ3ZCk7XG4gICAgICAgIHRoaXMub2JqZWN0LmdldFVwKHRoaXMudXApO1xuICAgICAgICBIb3dsZXIucG9zKHRoaXMub3JpZ2luWzBdLCB0aGlzLm9yaWdpblsxXSwgdGhpcy5vcmlnaW5bMl0pO1xuICAgICAgICBIb3dsZXIub3JpZW50YXRpb24odGhpcy5md2RbMF0sIHRoaXMuZndkWzFdLCB0aGlzLmZ3ZFsyXSwgdGhpcy51cFswXSwgdGhpcy51cFsxXSwgdGhpcy51cFsyXSk7XG4gICAgfVxufVxuZXhwb3J0IHsgSG93bGVyQXVkaW9MaXN0ZW5lciB9O1xuIiwgImltcG9ydCB7IENvbXBvbmVudCwgVHlwZSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgJ2hvd2xlcic7XG4vKipcbiAqIChTcGF0aWFsKSBhdWRpbyBzb3VyY2UgYmFzZWQgb24gW0hvd2xlci5qc10oaHR0cHM6Ly9ob3dsZXJqcy5jb20vKS5cbiAqXG4gKiBDcmVhdGVzIGEgSG93bGVyIGF1ZGlvIHNvdXJjZSwgcGxheXMgYW4gYXVkaW8gZmlsZSBvbiBpdCBhbmQgdXBkYXRlc1xuICogaXRzIHBvc2l0aW9uLlxuICpcbiAqIE9wdGltaXplcyB0aGUgcG9zaXRpb24gdXBkYXRlIHRvIG9ubHkgdXBkYXRlIGlmIHRoZSBkaWZmZXJlbmNlIHRvIGxhc3RcbiAqIHBvc2l0aW9uIGlzIGxhcmdlciB0aGFuIGhhbGYgYSBjZW50aW1ldGVyLiBUbyBmb3JjZSB1cGRhdGVzIChlLmcuIGlmXG4gKiB0aGUgc291bmQgc291cmNlIGlzIF92ZXJ5XyBjbG9zZSB0byB0aGUgbGlzdGVuZXIpLFxuICogdXNlIGAudXBkYXRlUG9zaXRpb24oKWAuXG4gKi9cbmNsYXNzIEhvd2xlckF1ZGlvU291cmNlIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnaG93bGVyLWF1ZGlvLXNvdXJjZSc7XG4gICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gICAgICAgIC8qKiBWb2x1bWUgKi9cbiAgICAgICAgdm9sdW1lOiB7IHR5cGU6IFR5cGUuRmxvYXQsIGRlZmF1bHQ6IDEuMCB9LFxuICAgICAgICAvKiogV2hldGhlciBhdWRpbyBzaG91bGQgYmUgc3BhdGlhbGl6ZWQvcG9zaXRpb25hbCAqL1xuICAgICAgICBzcGF0aWFsOiB7IHR5cGU6IFR5cGUuQm9vbCwgZGVmYXVsdDogdHJ1ZSB9LFxuICAgICAgICAvKiogV2hldGhlciB0byBsb29wIHRoZSBzb3VuZCAqL1xuICAgICAgICBsb29wOiB7IHR5cGU6IFR5cGUuQm9vbCwgZGVmYXVsdDogZmFsc2UgfSxcbiAgICAgICAgLyoqIFdoZXRoZXIgdG8gc3RhcnQgcGxheWluZyBhdXRvbWF0aWNhbGx5ICovXG4gICAgICAgIGF1dG9wbGF5OiB7IHR5cGU6IFR5cGUuQm9vbCwgZGVmYXVsdDogZmFsc2UgfSxcbiAgICAgICAgLyoqIFVSTCB0byBhIHNvdW5kIGZpbGUgdG8gcGxheSAqL1xuICAgICAgICBzcmM6IHsgdHlwZTogVHlwZS5TdHJpbmcsIGRlZmF1bHQ6ICcnIH0sXG4gICAgfTtcbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5hdWRpbyA9IG5ldyBIb3dsKHtcbiAgICAgICAgICAgIHNyYzogW3RoaXMuc3JjXSxcbiAgICAgICAgICAgIGxvb3A6IHRoaXMubG9vcCxcbiAgICAgICAgICAgIHZvbHVtZTogdGhpcy52b2x1bWUsXG4gICAgICAgICAgICBhdXRvcGxheTogdGhpcy5hdXRvcGxheSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubGFzdFBsYXllZEF1ZGlvSWQgPSBudWxsO1xuICAgICAgICB0aGlzLm9yaWdpbiA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgICAgIHRoaXMubGFzdE9yaWdpbiA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgICAgIGlmICh0aGlzLnNwYXRpYWwgJiYgdGhpcy5hdXRvcGxheSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVQb3NpdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5wbGF5KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICBpZiAoIXRoaXMuc3BhdGlhbCB8fCAhdGhpcy5sYXN0UGxheWVkQXVkaW9JZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5vYmplY3QuZ2V0VHJhbnNsYXRpb25Xb3JsZCh0aGlzLm9yaWdpbik7XG4gICAgICAgIC8qIE9ubHkgY2FsbCBwb3MoKSBpZiB0aGUgcG9zaXRpb24gbW92ZWQgbW9yZSB0aGFuIGhhbGYgYSBjZW50aW1ldGVyXG4gICAgICAgICAqIG90aGVyd2lzZSB0aGlzIGdldHMgdmVyeSBwZXJmb3JtYW5jZSBoZWF2eS5cbiAgICAgICAgICogU21hbGxlciBtb3ZlbWVudCBzaG91bGQgb25seSBiZSBwZXJjZWl2YWJsZSBpZiBjbG9zZSB0byB0aGVcbiAgICAgICAgICogZWFyIGFueXdheS4gKi9cbiAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMubGFzdE9yaWdpblswXSAtIHRoaXMub3JpZ2luWzBdKSA+IDAuMDA1IHx8XG4gICAgICAgICAgICBNYXRoLmFicyh0aGlzLmxhc3RPcmlnaW5bMV0gLSB0aGlzLm9yaWdpblsxXSkgPiAwLjAwNSB8fFxuICAgICAgICAgICAgTWF0aC5hYnModGhpcy5sYXN0T3JpZ2luWzJdIC0gdGhpcy5vcmlnaW5bMl0pID4gMC4wMDUpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUG9zaXRpb24oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVQb3NpdGlvbigpIHtcbiAgICAgICAgdGhpcy5hdWRpby5wb3ModGhpcy5vcmlnaW5bMF0sIHRoaXMub3JpZ2luWzFdLCB0aGlzLm9yaWdpblsyXSwgdGhpcy5sYXN0UGxheWVkQXVkaW9JZCk7XG4gICAgICAgIHRoaXMubGFzdE9yaWdpbi5zZXQodGhpcy5vcmlnaW4pO1xuICAgIH1cbiAgICBwbGF5KCkge1xuICAgICAgICBpZiAodGhpcy5sYXN0UGxheWVkQXVkaW9JZClcbiAgICAgICAgICAgIHRoaXMuYXVkaW8uc3RvcCh0aGlzLmxhc3RQbGF5ZWRBdWRpb0lkKTtcbiAgICAgICAgdGhpcy5sYXN0UGxheWVkQXVkaW9JZCA9IHRoaXMuYXVkaW8ucGxheSgpO1xuICAgICAgICBpZiAodGhpcy5zcGF0aWFsKVxuICAgICAgICAgICAgdGhpcy51cGRhdGVQb3NpdGlvbigpO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICBpZiAoIXRoaXMubGFzdFBsYXllZEF1ZGlvSWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuYXVkaW8uc3RvcCh0aGlzLmxhc3RQbGF5ZWRBdWRpb0lkKTtcbiAgICAgICAgdGhpcy5sYXN0UGxheWVkQXVkaW9JZCA9IG51bGw7XG4gICAgfVxuICAgIG9uRGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgLyogU3RvcCBzb3VuZCB3aGVuIGNvbXBvbmVudCBpcyBkZWFjdGl2YXRlZCBvciBkZXN0cm95ZWQsIGUuZy5cbiAgICAgICAgICogd2hlbiBzd2l0Y2hpbmcgc2NlbmVzICovXG4gICAgICAgIHRoaXMuc3RvcCgpO1xuICAgIH1cbn1cbmV4cG9ydCB7IEhvd2xlckF1ZGlvU291cmNlIH07XG4iLCAiLyoqXG4gKiBTZXQgdGhlIGRpZmZ1c2UvZmxhdCB0ZXh0dXJlIG9mIGtub3duIHBpcGVsaW5lcy5cbiAqXG4gKiBAcGFyYW0gbWF0IE1hdGVyaWFsIHRvIHNldCB0aGUgdGV4dHVyZSBvblxuICogQHBhcmFtIHRleHR1cmUgVGV4dHVyZSB0byBzZXRcbiAqIEBwYXJhbSBjdXN0b21UZXh0dXJlUHJvcGVydHkgVGV4dHVyZSBwcm9wZXJ0eSB0byBzZXQgb3IgYCdhdXRvJ2AgdG8gYXV0b21hdGljYWxseVxuICogICAgICBkZXRlY3QgdGhlIHJpZ2h0IHRleHR1cmUgcHJvcGVydHkgYmFzZWQgb24ga25vd24gcGlwZWxpbmUuXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHByb3BlcnR5IHdhcyBzZXQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0Rmlyc3RNYXRlcmlhbFRleHR1cmUobWF0LCB0ZXh0dXJlLCBjdXN0b21UZXh0dXJlUHJvcGVydHkpIHtcbiAgICBpZiAoY3VzdG9tVGV4dHVyZVByb3BlcnR5ICE9PSAnYXV0bycpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBtYXRbY3VzdG9tVGV4dHVyZVByb3BlcnR5XSA9IHRleHR1cmU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjb25zdCBzaGFkZXIgPSBtYXQuc2hhZGVyO1xuICAgIGlmIChzaGFkZXIgPT09ICdGbGF0IE9wYXF1ZSBUZXh0dXJlZCcpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBtYXQuZmxhdFRleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2hhZGVyID09PSAnUGhvbmcgT3BhcXVlIFRleHR1cmVkJyB8fFxuICAgICAgICBzaGFkZXIgPT09ICdGb2xpYWdlJyB8fFxuICAgICAgICBzaGFkZXIgPT09ICdQaG9uZyBOb3JtYWxtYXBwZWQnIHx8XG4gICAgICAgIHNoYWRlciA9PT0gJ1Bob25nIExpZ2h0bWFwcGVkJykge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIG1hdC5kaWZmdXNlVGV4dHVyZSA9IHRleHR1cmU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlbHNlIGlmIChzaGFkZXIgPT09ICdQYXJ0aWNsZScpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBtYXQubWFpblRleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2hhZGVyID09PSAnRGlzdGFuY2VGaWVsZFZlY3RvcicpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBtYXQudmVjdG9yVGV4dHVyZSA9IHRleHR1cmU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlbHNlIGlmIChzaGFkZXIgPT09ICdCYWNrZ3JvdW5kJyB8fCBzaGFkZXIgPT09ICdTa3knKSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgbWF0LnRleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2hhZGVyID09PSAnUGh5c2ljYWwgT3BhcXVlIFRleHR1cmVkJykge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIG1hdC5hbGJlZG9UZXh0dXJlID0gdGV4dHVyZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWcycmFkKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICogTWF0aC5QSSAvIDE4MC4wO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJhZDJkZWcodmFsdWUpIHtcbiAgICByZXR1cm4gKHZhbHVlICogMTgwLjApIC8gTWF0aC5QSTtcbn1cbiIsICJpbXBvcnQgeyBDb21wb25lbnQsIFByb3BlcnR5IH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbmltcG9ydCB7IHNldEZpcnN0TWF0ZXJpYWxUZXh0dXJlIH0gZnJvbSAnLi91dGlscy91dGlscy5qcyc7XG4vKipcbiAqIERvd25sb2FkcyBhbiBpbWFnZSBmcm9tIFVSTCBhbmQgYXBwbGllcyBpdCBhcyBgZGlmZnVzZVRleHR1cmVgIG9yIGBmbGF0VGV4dHVyZWBcbiAqIHRvIGFuIGF0dGFjaGVkIG1lc2ggY29tcG9uZW50LlxuICpcbiAqIE1hdGVyaWFscyBmcm9tIHRoZSBmb2xsb3dpbmcgc2hhZGVycyBhcmUgc3VwcG9ydGVkOlxuICogIC0gXCJQaG9uZyBPcGFxdWUgVGV4dHVyZWRcIlxuICogIC0gXCJGbGF0IE9wYXF1ZSBUZXh0dXJlZFwiXG4gKiAgLSBcIkJhY2tncm91bmRcIlxuICogIC0gXCJQaHlzaWNhbCBPcGFxdWUgVGV4dHVyZWRcIlxuICogIC0gXCJGb2xpYWdlXCJcbiAqL1xuY2xhc3MgSW1hZ2VUZXh0dXJlIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnaW1hZ2UtdGV4dHVyZSc7XG4gICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gICAgICAgIC8qKiBVUkwgdG8gZG93bmxvYWQgdGhlIGltYWdlIGZyb20gKi9cbiAgICAgICAgdXJsOiBQcm9wZXJ0eS5zdHJpbmcoKSxcbiAgICAgICAgLyoqIE1hdGVyaWFsIHRvIGFwcGx5IHRoZSB2aWRlbyB0ZXh0dXJlIHRvICovXG4gICAgICAgIG1hdGVyaWFsOiBQcm9wZXJ0eS5tYXRlcmlhbCgpLFxuICAgICAgICAvKiogTmFtZSBvZiB0aGUgdGV4dHVyZSBwcm9wZXJ0eSB0byBzZXQgKi9cbiAgICAgICAgdGV4dHVyZVByb3BlcnR5OiBQcm9wZXJ0eS5zdHJpbmcoJ2F1dG8nKSxcbiAgICB9O1xuICAgIHN0YXJ0KCkge1xuICAgICAgICBpZiAoIXRoaXMubWF0ZXJpYWwpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdpbWFnZS10ZXh0dXJlOiBtYXRlcmlhbCBwcm9wZXJ0eSBub3Qgc2V0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbmdpbmUudGV4dHVyZXNcbiAgICAgICAgICAgIC5sb2FkKHRoaXMudXJsLCAnYW5vbnltb3VzJylcbiAgICAgICAgICAgIC50aGVuKCh0ZXh0dXJlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtYXQgPSB0aGlzLm1hdGVyaWFsO1xuICAgICAgICAgICAgaWYgKCFzZXRGaXJzdE1hdGVyaWFsVGV4dHVyZShtYXQsIHRleHR1cmUsIHRoaXMudGV4dHVyZVByb3BlcnR5KSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NoYWRlcicsIG1hdC5zaGFkZXIsICdub3Qgc3VwcG9ydGVkIGJ5IGltYWdlLXRleHR1cmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChjb25zb2xlLmVycik7XG4gICAgfVxufVxuZXhwb3J0IHsgSW1hZ2VUZXh0dXJlIH07XG4iLCAidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbmltcG9ydCB7IHByb3BlcnR5IH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpL2RlY29yYXRvcnMuanMnO1xuaW1wb3J0IHsgdmVjMyB9IGZyb20gJ2dsLW1hdHJpeCc7XG5jb25zdCBwcmV2ZW50RGVmYXVsdCA9IChlKSA9PiB7IGUucHJldmVudERlZmF1bHQoKTsgfTtcbi8qKlxuICogQ29udHJvbHMgdGhlIGNhbWVyYSBvcmllbnRhdGlvbiB0aHJvdWdoIG1vdXNlIG1vdmVtZW50LlxuICpcbiAqIEVmZmljaWVudGx5IGltcGxlbWVudGVkIHRvIGFmZmVjdCBvYmplY3Qgb3JpZW50YXRpb24gb25seVxuICogd2hlbiB0aGUgbW91c2UgbW92ZXMuXG4gKi9cbmNsYXNzIE1vdXNlTG9va0NvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ21vdXNlLWxvb2snO1xuICAgIC8qKiBNb3VzZSBsb29rIHNlbnNpdGl2aXR5ICovXG4gICAgc2Vuc2l0aXR5ID0gMC4yNTtcbiAgICAvKiogUmVxdWlyZSBhIG1vdXNlIGJ1dHRvbiB0byBiZSBwcmVzc2VkIHRvIGNvbnRyb2wgdmlldy5cbiAgICAgKiBPdGhlcndpc2UgdmlldyB3aWxsIGFsbHdheXMgZm9sbG93IG1vdXNlIG1vdmVtZW50ICovXG4gICAgcmVxdWlyZU1vdXNlRG93biA9IHRydWU7XG4gICAgLyoqIElmIFwibW92ZU9uQ2xpY2tcIiBpcyBlbmFibGVkLCBtb3VzZSBidXR0b24gd2hpY2ggc2hvdWxkXG4gICAgICogYmUgaGVsZCBkb3duIHRvIGNvbnRyb2wgdmlldyAqL1xuICAgIG1vdXNlQnV0dG9uSW5kZXggPSAwO1xuICAgIC8qKiBFbmFibGVzIHBvaW50ZXIgbG9jayBvbiBcIm1vdXNlZG93blwiIGV2ZW50IG9uIGNhbnZhcyAqL1xuICAgIHBvaW50ZXJMb2NrT25DbGljayA9IGZhbHNlO1xuICAgIGN1cnJlbnRSb3RhdGlvblkgPSAwO1xuICAgIGN1cnJlbnRSb3RhdGlvblggPSAwO1xuICAgIG9yaWdpbiA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgcGFyZW50T3JpZ2luID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICByb3RhdGlvblggPSAwO1xuICAgIHJvdGF0aW9uWSA9IDA7XG4gICAgbW91c2VEb3duID0gZmFsc2U7XG4gICAgb25BY3RpdmF0ZSgpIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbk1vdXNlTW92ZSk7XG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuZW5naW5lLmNhbnZhcztcbiAgICAgICAgaWYgKHRoaXMucG9pbnRlckxvY2tPbkNsaWNrKSB7XG4gICAgICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5yZXF1ZXN0UG9pbnRlckxvY2spO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnJlcXVpcmVNb3VzZURvd24pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm1vdXNlQnV0dG9uSW5kZXggPT09IDIpIHtcbiAgICAgICAgICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBwcmV2ZW50RGVmYXVsdCwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25Nb3VzZURvd24pO1xuICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm9uTW91c2VVcCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25EZWFjdGl2YXRlKCkge1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uTW91c2VNb3ZlKTtcbiAgICAgICAgY29uc3QgY2FudmFzID0gdGhpcy5lbmdpbmUuY2FudmFzO1xuICAgICAgICBpZiAodGhpcy5wb2ludGVyTG9ja09uQ2xpY2spIHtcbiAgICAgICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLnJlcXVlc3RQb2ludGVyTG9jayk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucmVxdWlyZU1vdXNlRG93bikge1xuICAgICAgICAgICAgaWYgKHRoaXMubW91c2VCdXR0b25JbmRleCA9PT0gMikge1xuICAgICAgICAgICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIHByZXZlbnREZWZhdWx0LCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93bik7XG4gICAgICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZVVwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXF1ZXN0UG9pbnRlckxvY2sgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuZW5naW5lLmNhbnZhcztcbiAgICAgICAgY2FudmFzLnJlcXVlc3RQb2ludGVyTG9jayA9XG4gICAgICAgICAgICBjYW52YXMucmVxdWVzdFBvaW50ZXJMb2NrIHx8XG4gICAgICAgICAgICAgICAgY2FudmFzLm1velJlcXVlc3RQb2ludGVyTG9jayB8fFxuICAgICAgICAgICAgICAgIGNhbnZhcy53ZWJraXRSZXF1ZXN0UG9pbnRlckxvY2s7XG4gICAgICAgIGNhbnZhcy5yZXF1ZXN0UG9pbnRlckxvY2soKTtcbiAgICB9O1xuICAgIG9uTW91c2VEb3duID0gKGUpID0+IHtcbiAgICAgICAgaWYgKGUuYnV0dG9uID09PSB0aGlzLm1vdXNlQnV0dG9uSW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMubW91c2VEb3duID0gdHJ1ZTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gJ2dyYWJiaW5nJztcbiAgICAgICAgICAgIGlmIChlLmJ1dHRvbiA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAvKiBQcmV2ZW50IHNjcm9sbGluZyAqL1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgb25Nb3VzZVVwID0gKGUpID0+IHtcbiAgICAgICAgaWYgKGUuYnV0dG9uID09PSB0aGlzLm1vdXNlQnV0dG9uSW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMubW91c2VEb3duID0gZmFsc2U7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICdpbml0aWFsJztcbiAgICAgICAgfVxuICAgIH07XG4gICAgb25Nb3VzZU1vdmUgPSAoZSkgPT4ge1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUgJiYgKHRoaXMubW91c2VEb3duIHx8ICF0aGlzLnJlcXVpcmVNb3VzZURvd24pKSB7XG4gICAgICAgICAgICB0aGlzLnJvdGF0aW9uWSA9ICgtdGhpcy5zZW5zaXRpdHkgKiBlLm1vdmVtZW50WCkgLyAxMDA7XG4gICAgICAgICAgICB0aGlzLnJvdGF0aW9uWCA9ICgtdGhpcy5zZW5zaXRpdHkgKiBlLm1vdmVtZW50WSkgLyAxMDA7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRSb3RhdGlvblggKz0gdGhpcy5yb3RhdGlvblg7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRSb3RhdGlvblkgKz0gdGhpcy5yb3RhdGlvblk7XG4gICAgICAgICAgICAvKiAxLjUwNyA9IFBJLzIgPSA5MFx1MDBCMCAqL1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50Um90YXRpb25YID0gTWF0aC5taW4oMS41MDcsIHRoaXMuY3VycmVudFJvdGF0aW9uWCk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRSb3RhdGlvblggPSBNYXRoLm1heCgtMS41MDcsIHRoaXMuY3VycmVudFJvdGF0aW9uWCk7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5nZXRQb3NpdGlvbldvcmxkKHRoaXMub3JpZ2luKTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMub2JqZWN0LnBhcmVudDtcbiAgICAgICAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnQuZ2V0UG9zaXRpb25Xb3JsZCh0aGlzLnBhcmVudE9yaWdpbik7XG4gICAgICAgICAgICAgICAgdmVjMy5zdWIodGhpcy5vcmlnaW4sIHRoaXMub3JpZ2luLCB0aGlzLnBhcmVudE9yaWdpbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5yZXNldFBvc2l0aW9uUm90YXRpb24oKTtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnJvdGF0ZUF4aXNBbmdsZVJhZExvY2FsKFsxLCAwLCAwXSwgdGhpcy5jdXJyZW50Um90YXRpb25YKTtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnJvdGF0ZUF4aXNBbmdsZVJhZExvY2FsKFswLCAxLCAwXSwgdGhpcy5jdXJyZW50Um90YXRpb25ZKTtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnRyYW5zbGF0ZUxvY2FsKHRoaXMub3JpZ2luKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5mbG9hdCgwLjI1KVxuXSwgTW91c2VMb29rQ29tcG9uZW50LnByb3RvdHlwZSwgXCJzZW5zaXRpdHlcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmJvb2wodHJ1ZSlcbl0sIE1vdXNlTG9va0NvbXBvbmVudC5wcm90b3R5cGUsIFwicmVxdWlyZU1vdXNlRG93blwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuaW50KClcbl0sIE1vdXNlTG9va0NvbXBvbmVudC5wcm90b3R5cGUsIFwibW91c2VCdXR0b25JbmRleFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuYm9vbChmYWxzZSlcbl0sIE1vdXNlTG9va0NvbXBvbmVudC5wcm90b3R5cGUsIFwicG9pbnRlckxvY2tPbkNsaWNrXCIsIHZvaWQgMCk7XG5leHBvcnQgeyBNb3VzZUxvb2tDb21wb25lbnQgfTtcbiIsICJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuaW1wb3J0IHsgcHJvcGVydHkgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGkvZGVjb3JhdG9ycy5qcyc7XG4vKipcbiAqIFNldCBwbGF5ZXIgaGVpZ2h0IGZvciBhIFktb2Zmc2V0IGFib3ZlIHRoZSBncm91bmQgZm9yXG4gKiAnbG9jYWwnIGFuZCAndmlld2VyJyByZWZlcmVuY2Ugc3BhY2VzLlxuICovXG5jbGFzcyBQbGF5ZXJIZWlnaHQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdwbGF5ZXItaGVpZ2h0JztcbiAgICBoZWlnaHQgPSAxLjc1O1xuICAgIG9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2s7XG4gICAgb25TZXNzaW9uRW5kQ2FsbGJhY2s7XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnJlc2V0UG9zaXRpb25Sb3RhdGlvbigpO1xuICAgICAgICB0aGlzLm9iamVjdC50cmFuc2xhdGVMb2NhbChbMC4wLCB0aGlzLmhlaWdodCwgMC4wXSk7XG4gICAgICAgIHRoaXMub25TZXNzaW9uU3RhcnRDYWxsYmFjayA9IHRoaXMub25YUlNlc3Npb25TdGFydC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uU2Vzc2lvbkVuZENhbGxiYWNrID0gdGhpcy5vblhSU2Vzc2lvbkVuZC5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICBvbkFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvblN0YXJ0LmFkZCh0aGlzLm9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2spO1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvbkVuZC5hZGQodGhpcy5vblNlc3Npb25FbmRDYWxsYmFjayk7XG4gICAgfVxuICAgIG9uRGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUub25YUlNlc3Npb25TdGFydC5yZW1vdmUodGhpcy5vblNlc3Npb25TdGFydENhbGxiYWNrKTtcbiAgICAgICAgdGhpcy5lbmdpbmUub25YUlNlc3Npb25FbmQucmVtb3ZlKHRoaXMub25TZXNzaW9uRW5kQ2FsbGJhY2spO1xuICAgIH1cbiAgICBvblhSU2Vzc2lvblN0YXJ0KCkge1xuICAgICAgICBjb25zdCB0eXBlID0gdGhpcy5lbmdpbmUueHI/LmN1cnJlbnRSZWZlcmVuY2VTcGFjZVR5cGU7XG4gICAgICAgIGlmICh0eXBlICE9PSAnbG9jYWwnICYmIHR5cGUgIT09ICd2aWV3ZXInKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5yZXNldFBvc2l0aW9uUm90YXRpb24oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvblhSU2Vzc2lvbkVuZCgpIHtcbiAgICAgICAgY29uc3QgdHlwZSA9IHRoaXMuZW5naW5lLnhyPy5jdXJyZW50UmVmZXJlbmNlU3BhY2VUeXBlO1xuICAgICAgICBpZiAodHlwZSAhPT0gJ2xvY2FsJyAmJiB0eXBlICE9PSAndmlld2VyJykge1xuICAgICAgICAgICAgdGhpcy5vYmplY3QucmVzZXRQb3NpdGlvblJvdGF0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC50cmFuc2xhdGVMb2NhbChbMC4wLCB0aGlzLmhlaWdodCwgMC4wXSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5mbG9hdCgxLjc1KVxuXSwgUGxheWVySGVpZ2h0LnByb3RvdHlwZSwgXCJoZWlnaHRcIiwgdm9pZCAwKTtcbmV4cG9ydCB7IFBsYXllckhlaWdodCB9O1xuIiwgImltcG9ydCB7IENvbXBvbmVudCwgVHlwZSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4vKipcbiAqIFNldHMgdGhlIHRhcmdldCBmcmFtZXJhdGVcbiAqXG4gKiBbVXBkYXRlcyB0aGUgdGFyZ2V0IGZyYW1lcmF0ZV0oaHR0cHM6Ly9pbW1lcnNpdmUtd2ViLmdpdGh1Yi5pby93ZWJ4ci8jZG9tLXhyc2Vzc2lvbi11cGRhdGV0YXJnZXRmcmFtZXJhdGUpXG4gKiB0byB0aGUgY2xvc2VzdCBbc3VwcG9ydGVkIHRhcmdldCBmcmFtZXJhdGVdKGh0dHBzOi8vaW1tZXJzaXZlLXdlYi5naXRodWIuaW8vd2VieHIvI2RvbS14cnNlc3Npb24tc3VwcG9ydGVkRnJhbWVSYXRlcylcbiAqIHRvIHRoZSBnaXZlbiBgZnJhbWVyYXRlYC5cbiAqXG4gKiBUaGUgdGFyZ2V0IGZyYW1lcmF0ZSBpcyB1c2VkIGZvciB0aGUgZGV2aWNlJ3MgVlIgY29tcG9zaXRvciBhcyBhbiBpbmRpY2F0aW9uIG9mIGhvdyBvZnRlbiB0byByZWZyZXNoIHRoZVxuICogc2NyZWVuIHdpdGggbmV3IGltYWdlcy4gVGhpcyBtZWFucyB0aGUgYXBwIHdpbGwgYmUgYXNrZWQgdG8gcHJvZHVjZSBmcmFtZXMgaW4gbW9yZSByZWd1bGFyIGludGVydmFscyxcbiAqIHBvdGVudGlhbGx5IHNwZW5kaW5nIGxlc3MgdGltZSBvbiBmcmFtZXMgdGhhdCBhcmUgbGlrZWx5IHRvIGJlIGRyb3BwZWQuXG4gKlxuICogRm9yIGFwcHMgd2l0aCBoZWF2eSBsb2FkLCBzZXR0aW5nIGEgd2VsbCBtYXRjaGluZyB0YXJnZXQgZnJhbWVyYXRlIGNhbiBpbXByb3ZlIHRoZSBhcHBzIHJlbmRlcmluZyBzdGFiaWxpdHlcbiAqIGFuZCByZWR1Y2Ugc3R1dHRlci5cbiAqXG4gKiBMaWtld2lzZSwgdGhlIHRhcmdldCBmcmFtZXJhdGUgY2FuIGJlIHVzZWQgdG8gZW5hYmxlIDEyMEh6IHJlZnJlc2ggcmF0ZXMgb24gT2N1bHVzIFF1ZXN0IDIgb24gc2ltcGxlciBhcHBzLlxuICovXG5jbGFzcyBUYXJnZXRGcmFtZXJhdGUgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICd0YXJnZXQtZnJhbWVyYXRlJztcbiAgICBzdGF0aWMgUHJvcGVydGllcyA9IHtcbiAgICAgICAgZnJhbWVyYXRlOiB7IHR5cGU6IFR5cGUuRmxvYXQsIGRlZmF1bHQ6IDkwLjAgfSxcbiAgICB9O1xuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLm9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2sgPSB0aGlzLnNldFRhcmdldEZyYW1lcmF0ZS5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICBvbkFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvblN0YXJ0LmFkZCh0aGlzLm9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2spO1xuICAgIH1cbiAgICBvbkRlYWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQucmVtb3ZlKHRoaXMub25TZXNzaW9uU3RhcnRDYWxsYmFjayk7XG4gICAgfVxuICAgIHNldFRhcmdldEZyYW1lcmF0ZShzKSB7XG4gICAgICAgIGlmIChzLnN1cHBvcnRlZEZyYW1lUmF0ZXMgJiYgcy51cGRhdGVUYXJnZXRGcmFtZVJhdGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGEgPSB0aGlzLmVuZ2luZS54ci5zZXNzaW9uLnN1cHBvcnRlZEZyYW1lUmF0ZXM7XG4gICAgICAgICAgICBhLnNvcnQoKGEsIGIpID0+IE1hdGguYWJzKGEgLSB0aGlzLmZyYW1lcmF0ZSkgLSBNYXRoLmFicyhiIC0gdGhpcy5mcmFtZXJhdGUpKTtcbiAgICAgICAgICAgIHRoaXMuZW5naW5lLnhyLnNlc3Npb24udXBkYXRlVGFyZ2V0RnJhbWVSYXRlKGFbMF0pO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IHsgVGFyZ2V0RnJhbWVyYXRlIH07XG4iLCAiaW1wb3J0IHsgdmVjMywgcXVhdDIgfSBmcm9tICdnbC1tYXRyaXgnO1xuaW1wb3J0IHsgQ29tcG9uZW50LCBUeXBlIH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbi8qKlxuICogVGVsZXBvcnQgVlIgbG9jb21vdGlvbi5cbiAqXG4gKiBTZWUgW1RlbGVwb3J0IEV4YW1wbGVdKC9zaG93Y2FzZS90ZWxlcG9ydCkuXG4gKi9cbmNsYXNzIFRlbGVwb3J0Q29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAndGVsZXBvcnQnO1xuICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge1xuICAgICAgICAvKiogT2JqZWN0IHRoYXQgd2lsbCBiZSBwbGFjZWQgYXMgaW5kaWNpYXRpb24gZm9yd2hlcmUgdGhlIHBsYXllciB3aWxsIHRlbGVwb3J0IHRvLiAqL1xuICAgICAgICB0ZWxlcG9ydEluZGljYXRvck1lc2hPYmplY3Q6IHsgdHlwZTogVHlwZS5PYmplY3QgfSxcbiAgICAgICAgLyoqIFJvb3Qgb2YgdGhlIHBsYXllciwgdGhlIG9iamVjdCB0aGF0IHdpbGwgYmUgcG9zaXRpb25lZCBvbiB0ZWxlcG9ydGF0aW9uLiAqL1xuICAgICAgICBjYW1Sb290OiB7IHR5cGU6IFR5cGUuT2JqZWN0IH0sXG4gICAgICAgIC8qKiBOb24tdnIgY2FtZXJhIGZvciB1c2Ugb3V0c2lkZSBvZiBWUiAqL1xuICAgICAgICBjYW06IHsgdHlwZTogVHlwZS5PYmplY3QgfSxcbiAgICAgICAgLyoqIExlZnQgZXllIGZvciB1c2UgaW4gVlIqL1xuICAgICAgICBleWVMZWZ0OiB7IHR5cGU6IFR5cGUuT2JqZWN0IH0sXG4gICAgICAgIC8qKiBSaWdodCBleWUgZm9yIHVzZSBpbiBWUiovXG4gICAgICAgIGV5ZVJpZ2h0OiB7IHR5cGU6IFR5cGUuT2JqZWN0IH0sXG4gICAgICAgIC8qKiBIYW5kZWRuZXNzIGZvciBWUiBjdXJzb3JzIHRvIGFjY2VwdCB0cmlnZ2VyIGV2ZW50cyBvbmx5IGZyb20gcmVzcGVjdGl2ZSBjb250cm9sbGVyLiAqL1xuICAgICAgICBoYW5kZWRuZXNzOiB7XG4gICAgICAgICAgICB0eXBlOiBUeXBlLkVudW0sXG4gICAgICAgICAgICB2YWx1ZXM6IFsnaW5wdXQgY29tcG9uZW50JywgJ2xlZnQnLCAncmlnaHQnLCAnbm9uZSddLFxuICAgICAgICAgICAgZGVmYXVsdDogJ2lucHV0IGNvbXBvbmVudCcsXG4gICAgICAgIH0sXG4gICAgICAgIC8qKiBDb2xsaXNpb24gZ3JvdXAgb2YgdmFsaWQgXCJmbG9vclwiIG9iamVjdHMgdGhhdCBjYW4gYmUgdGVsZXBvcnRlZCBvbiAqL1xuICAgICAgICBmbG9vckdyb3VwOiB7IHR5cGU6IFR5cGUuSW50LCBkZWZhdWx0OiAxIH0sXG4gICAgICAgIC8qKiBIb3cgZmFyIHRoZSB0aHVtYnN0aWNrIG5lZWRzIHRvIGJlIHB1c2hlZCB0byBoYXZlIHRoZSB0ZWxlcG9ydCB0YXJnZXQgaW5kaWNhdG9yIHNob3cgdXAgKi9cbiAgICAgICAgdGh1bWJzdGlja0FjdGl2YXRpb25UaHJlc2hob2xkOiB7IHR5cGU6IFR5cGUuRmxvYXQsIGRlZmF1bHQ6IC0wLjcgfSxcbiAgICAgICAgLyoqIEhvdyBmYXIgdGhlIHRodW1ic3RpY2sgbmVlZHMgdG8gYmUgcmVsZWFzZWQgdG8gZXhlY3V0ZSB0aGUgdGVsZXBvcnQgKi9cbiAgICAgICAgdGh1bWJzdGlja0RlYWN0aXZhdGlvblRocmVzaGhvbGQ6IHsgdHlwZTogVHlwZS5GbG9hdCwgZGVmYXVsdDogMC4zIH0sXG4gICAgICAgIC8qKiBPZmZzZXQgdG8gYXBwbHkgdG8gdGhlIGluZGljYXRvciBvYmplY3QsIGUuZy4gdG8gYXZvaWQgaXQgZnJvbSBaLWZpZ2h0aW5nIHdpdGggdGhlIGZsb29yICovXG4gICAgICAgIGluZGljYXRvcllPZmZzZXQ6IHsgdHlwZTogVHlwZS5GbG9hdCwgZGVmYXVsdDogMC4wMSB9LFxuICAgICAgICAvKiogTW9kZSBmb3IgcmF5Y2FzdGluZywgd2hldGhlciB0byB1c2UgUGh5c1ggb3Igc2ltcGxlIGNvbGxpc2lvbiBjb21wb25lbnRzICovXG4gICAgICAgIHJheUNhc3RNb2RlOiB7XG4gICAgICAgICAgICB0eXBlOiBUeXBlLkVudW0sXG4gICAgICAgICAgICB2YWx1ZXM6IFsnY29sbGlzaW9uJywgJ3BoeXN4J10sXG4gICAgICAgICAgICBkZWZhdWx0OiAnY29sbGlzaW9uJyxcbiAgICAgICAgfSxcbiAgICAgICAgLyoqIE1heCBkaXN0YW5jZSBmb3IgUGh5c1ggcmF5Y2FzdCAqL1xuICAgICAgICBtYXhEaXN0YW5jZTogeyB0eXBlOiBUeXBlLkZsb2F0LCBkZWZhdWx0OiAxMDAuMCB9LFxuICAgIH07XG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5fcHJldlRodW1ic3RpY2tBeGlzID0gbmV3IEZsb2F0MzJBcnJheSgyKTtcbiAgICAgICAgdGhpcy5fdGVtcFZlYyA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgICAgIHRoaXMuX3RlbXBWZWMwID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICAgICAgdGhpcy5fY3VycmVudEluZGljYXRvclJvdGF0aW9uID0gMDtcbiAgICAgICAgdGhpcy5pbnB1dCA9IHRoaXMub2JqZWN0LmdldENvbXBvbmVudCgnaW5wdXQnKTtcbiAgICAgICAgaWYgKCF0aGlzLmlucHV0KSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMub2JqZWN0Lm5hbWUsICdnZW5lcmljLXRlbGVwb3J0LWNvbXBvbmVudC5qczogaW5wdXQgY29tcG9uZW50IGlzIHJlcXVpcmVkIG9uIHRoZSBvYmplY3QnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMub2JqZWN0Lm5hbWUsICdnZW5lcmljLXRlbGVwb3J0LWNvbXBvbmVudC5qczogVGVsZXBvcnQgaW5kaWNhdG9yIG1lc2ggaXMgbWlzc2luZycpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5jYW1Sb290KSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMub2JqZWN0Lm5hbWUsICdnZW5lcmljLXRlbGVwb3J0LWNvbXBvbmVudC5qczogY2FtUm9vdCBub3Qgc2V0Jyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0luZGljYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pbmRpY2F0b3JIaWRkZW4gPSB0cnVlO1xuICAgICAgICB0aGlzLmhpdFNwb3QgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgICAgICB0aGlzLl9oYXNIaXQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZXh0cmFSb3RhdGlvbiA9IDA7XG4gICAgICAgIHRoaXMuX2N1cnJlbnRTdGlja0F4ZXMgPSBuZXcgRmxvYXQzMkFycmF5KDIpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2FtKSB7XG4gICAgICAgICAgICB0aGlzLmlzTW91c2VJbmRpY2F0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93bi5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5vbk1vdXNlVXAuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaGFuZGVkbmVzcyA9PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dENvbXAgPSB0aGlzLm9iamVjdC5nZXRDb21wb25lbnQoJ2lucHV0Jyk7XG4gICAgICAgICAgICBpZiAoIWlucHV0Q29tcCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybigndGVsZXBvcnQgY29tcG9uZW50IG9uIG9iamVjdCcsIHRoaXMub2JqZWN0Lm5hbWUsICd3YXMgY29uZmlndXJlZCB3aXRoIGhhbmRlZG5lc3MgXCJpbnB1dCBjb21wb25lbnRcIiwgJyArXG4gICAgICAgICAgICAgICAgICAgICdidXQgb2JqZWN0IGhhcyBubyBpbnB1dCBjb21wb25lbnQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRlZG5lc3MgPSBpbnB1dENvbXAuaGFuZGVkbmVzcztcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0ID0gaW5wdXRDb21wO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5oYW5kZWRuZXNzID0gWydsZWZ0JywgJ3JpZ2h0J11bdGhpcy5oYW5kZWRuZXNzIC0gMV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vblNlc3Npb25TdGFydENhbGxiYWNrID0gdGhpcy5zZXR1cFZSRXZlbnRzLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0LmFjdGl2ZSA9IGZhbHNlO1xuICAgIH1cbiAgICBvbkFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvblN0YXJ0LmFkZCh0aGlzLm9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2spO1xuICAgIH1cbiAgICBvbkRlYWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQucmVtb3ZlKHRoaXMub25TZXNzaW9uU3RhcnRDYWxsYmFjayk7XG4gICAgfVxuICAgIC8qIEdldCBjdXJyZW50IGNhbWVyYSBZIHJvdGF0aW9uICovXG4gICAgX2dldENhbVJvdGF0aW9uKCkge1xuICAgICAgICB0aGlzLmV5ZUxlZnQuZ2V0Rm9yd2FyZCh0aGlzLl90ZW1wVmVjKTtcbiAgICAgICAgdGhpcy5fdGVtcFZlY1sxXSA9IDA7XG4gICAgICAgIHZlYzMubm9ybWFsaXplKHRoaXMuX3RlbXBWZWMsIHRoaXMuX3RlbXBWZWMpO1xuICAgICAgICByZXR1cm4gTWF0aC5hdGFuMih0aGlzLl90ZW1wVmVjWzBdLCB0aGlzLl90ZW1wVmVjWzJdKTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICBsZXQgaW5wdXRMZW5ndGggPSAwO1xuICAgICAgICBpZiAodGhpcy5nYW1lcGFkICYmIHRoaXMuZ2FtZXBhZC5heGVzKSB7XG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50U3RpY2tBeGVzWzBdID0gdGhpcy5nYW1lcGFkLmF4ZXNbMl07XG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50U3RpY2tBeGVzWzFdID0gdGhpcy5nYW1lcGFkLmF4ZXNbM107XG4gICAgICAgICAgICBpbnB1dExlbmd0aCA9XG4gICAgICAgICAgICAgICAgTWF0aC5hYnModGhpcy5fY3VycmVudFN0aWNrQXhlc1swXSkgKyBNYXRoLmFicyh0aGlzLl9jdXJyZW50U3RpY2tBeGVzWzFdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaXNJbmRpY2F0aW5nICYmXG4gICAgICAgICAgICB0aGlzLl9wcmV2VGh1bWJzdGlja0F4aXNbMV0gPj0gdGhpcy50aHVtYnN0aWNrQWN0aXZhdGlvblRocmVzaGhvbGQgJiZcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRTdGlja0F4ZXNbMV0gPCB0aGlzLnRodW1ic3RpY2tBY3RpdmF0aW9uVGhyZXNoaG9sZCkge1xuICAgICAgICAgICAgdGhpcy5pc0luZGljYXRpbmcgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaXNJbmRpY2F0aW5nICYmXG4gICAgICAgICAgICBpbnB1dExlbmd0aCA8IHRoaXMudGh1bWJzdGlja0RlYWN0aXZhdGlvblRocmVzaGhvbGQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNJbmRpY2F0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnRlbGVwb3J0SW5kaWNhdG9yTWVzaE9iamVjdC5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9oYXNIaXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90ZWxlcG9ydFBsYXllcih0aGlzLmhpdFNwb3QsIHRoaXMuX2V4dHJhUm90YXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzSW5kaWNhdGluZyAmJiB0aGlzLnRlbGVwb3J0SW5kaWNhdG9yTWVzaE9iamVjdCAmJiB0aGlzLmlucHV0KSB7XG4gICAgICAgICAgICBjb25zdCBvcmlnaW4gPSB0aGlzLl90ZW1wVmVjMDtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LmdldFBvc2l0aW9uV29ybGQob3JpZ2luKTtcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMub2JqZWN0LmdldEZvcndhcmRXb3JsZCh0aGlzLl90ZW1wVmVjKTtcbiAgICAgICAgICAgIGxldCByYXlIaXQgPSAodGhpcy5yYXlIaXQgPVxuICAgICAgICAgICAgICAgIHRoaXMucmF5Q2FzdE1vZGUgPT0gMFxuICAgICAgICAgICAgICAgICAgICA/IHRoaXMuZW5naW5lLnNjZW5lLnJheUNhc3Qob3JpZ2luLCBkaXJlY3Rpb24sIDEgPDwgdGhpcy5mbG9vckdyb3VwKVxuICAgICAgICAgICAgICAgICAgICA6IHRoaXMuZW5naW5lLnBoeXNpY3MucmF5Q2FzdChvcmlnaW4sIGRpcmVjdGlvbiwgMSA8PCB0aGlzLmZsb29yR3JvdXAsIHRoaXMubWF4RGlzdGFuY2UpKTtcbiAgICAgICAgICAgIGlmIChyYXlIaXQuaGl0Q291bnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbmRpY2F0b3JIaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLl9leHRyYVJvdGF0aW9uID1cbiAgICAgICAgICAgICAgICAgICAgTWF0aC5QSSArXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmF0YW4yKHRoaXMuX2N1cnJlbnRTdGlja0F4ZXNbMF0sIHRoaXMuX2N1cnJlbnRTdGlja0F4ZXNbMV0pO1xuICAgICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRJbmRpY2F0b3JSb3RhdGlvbiA9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2dldENhbVJvdGF0aW9uKCkgKyAodGhpcy5fZXh0cmFSb3RhdGlvbiAtIE1hdGguUEkpO1xuICAgICAgICAgICAgICAgIHRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0LnJlc2V0UG9zaXRpb25Sb3RhdGlvbigpO1xuICAgICAgICAgICAgICAgIHRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0LnJvdGF0ZUF4aXNBbmdsZVJhZChbMCwgMSwgMF0sIHRoaXMuX2N1cnJlbnRJbmRpY2F0b3JSb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgdGhpcy50ZWxlcG9ydEluZGljYXRvck1lc2hPYmplY3QudHJhbnNsYXRlKHJheUhpdC5sb2NhdGlvbnNbMF0pO1xuICAgICAgICAgICAgICAgIHRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0LnRyYW5zbGF0ZShbXG4gICAgICAgICAgICAgICAgICAgIDAuMCxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRpY2F0b3JZT2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICAwLjAsXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgdGhpcy50ZWxlcG9ydEluZGljYXRvck1lc2hPYmplY3QuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmhpdFNwb3Quc2V0KHJheUhpdC5sb2NhdGlvbnNbMF0pO1xuICAgICAgICAgICAgICAgIHRoaXMuX2hhc0hpdCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaW5kaWNhdG9ySGlkZGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0LmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGljYXRvckhpZGRlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuX2hhc0hpdCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0ICYmIHRoaXMuaXNNb3VzZUluZGljYXRpbmcpIHtcbiAgICAgICAgICAgIHRoaXMub25Nb3VzZVByZXNzZWQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9wcmV2VGh1bWJzdGlja0F4aXMuc2V0KHRoaXMuX2N1cnJlbnRTdGlja0F4ZXMpO1xuICAgIH1cbiAgICBzZXR1cFZSRXZlbnRzKHMpIHtcbiAgICAgICAgLyogSWYgaW4gVlIsIG9uZS10aW1lIGJpbmQgdGhlIGxpc3RlbmVyICovXG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IHM7XG4gICAgICAgIHMuYWRkRXZlbnRMaXN0ZW5lcignZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLyogUmVzZXQgY2FjaGUgb25jZSB0aGUgc2Vzc2lvbiBlbmRzIHRvIHJlYmluZCBzZWxlY3QgZXRjLCBpbiBjYXNlXG4gICAgICAgICAgICAgKiBpdCBzdGFydHMgYWdhaW4gKi9cbiAgICAgICAgICAgIHRoaXMuZ2FtZXBhZCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb24gPSBudWxsO1xuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICBpZiAocy5pbnB1dFNvdXJjZXMgJiYgcy5pbnB1dFNvdXJjZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHMuaW5wdXRTb3VyY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGlucHV0U291cmNlID0gcy5pbnB1dFNvdXJjZXNbaV07XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0U291cmNlLmhhbmRlZG5lc3MgPT0gdGhpcy5oYW5kZWRuZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZXBhZCA9IGlucHV0U291cmNlLmdhbWVwYWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHMuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXRzb3VyY2VzY2hhbmdlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmFkZGVkICYmIGUuYWRkZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlLmFkZGVkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnB1dFNvdXJjZSA9IGUuYWRkZWRbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dFNvdXJjZS5oYW5kZWRuZXNzID09IHRoaXMuaGFuZGVkbmVzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lcGFkID0gaW5wdXRTb3VyY2UuZ2FtZXBhZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICB9XG4gICAgb25Nb3VzZURvd24oKSB7XG4gICAgICAgIHRoaXMuaXNNb3VzZUluZGljYXRpbmcgPSB0cnVlO1xuICAgIH1cbiAgICBvbk1vdXNlVXAoKSB7XG4gICAgICAgIHRoaXMuaXNNb3VzZUluZGljYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50ZWxlcG9ydEluZGljYXRvck1lc2hPYmplY3QuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLl9oYXNIaXQpIHtcbiAgICAgICAgICAgIHRoaXMuX3RlbGVwb3J0UGxheWVyKHRoaXMuaGl0U3BvdCwgMC4wKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvbk1vdXNlUHJlc3NlZCgpIHtcbiAgICAgICAgbGV0IG9yaWdpbiA9IFswLCAwLCAwXTtcbiAgICAgICAgdGhpcy5jYW0uZ2V0UG9zaXRpb25Xb3JsZChvcmlnaW4pO1xuICAgICAgICBjb25zdCBkaXJlY3Rpb24gPSB0aGlzLmNhbS5nZXRGb3J3YXJkKHRoaXMuX3RlbXBWZWMpO1xuICAgICAgICBsZXQgcmF5SGl0ID0gKHRoaXMucmF5SGl0ID1cbiAgICAgICAgICAgIHRoaXMucmF5Q2FzdE1vZGUgPT0gMFxuICAgICAgICAgICAgICAgID8gdGhpcy5lbmdpbmUuc2NlbmUucmF5Q2FzdChvcmlnaW4sIGRpcmVjdGlvbiwgMSA8PCB0aGlzLmZsb29yR3JvdXApXG4gICAgICAgICAgICAgICAgOiB0aGlzLmVuZ2luZS5waHlzaWNzLnJheUNhc3Qob3JpZ2luLCBkaXJlY3Rpb24sIDEgPDwgdGhpcy5mbG9vckdyb3VwLCB0aGlzLm1heERpc3RhbmNlKSk7XG4gICAgICAgIGlmIChyYXlIaXQuaGl0Q291bnQgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLmluZGljYXRvckhpZGRlbiA9IGZhbHNlO1xuICAgICAgICAgICAgZGlyZWN0aW9uWzFdID0gMDtcbiAgICAgICAgICAgIHZlYzMubm9ybWFsaXplKGRpcmVjdGlvbiwgZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRJbmRpY2F0b3JSb3RhdGlvbiA9XG4gICAgICAgICAgICAgICAgLU1hdGguc2lnbihkaXJlY3Rpb25bMl0pICogTWF0aC5hY29zKGRpcmVjdGlvblswXSkgLSBNYXRoLlBJICogMC41O1xuICAgICAgICAgICAgdGhpcy50ZWxlcG9ydEluZGljYXRvck1lc2hPYmplY3QucmVzZXRQb3NpdGlvblJvdGF0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLnRlbGVwb3J0SW5kaWNhdG9yTWVzaE9iamVjdC5yb3RhdGVBeGlzQW5nbGVSYWQoWzAsIDEsIDBdLCB0aGlzLl9jdXJyZW50SW5kaWNhdG9yUm90YXRpb24pO1xuICAgICAgICAgICAgdGhpcy50ZWxlcG9ydEluZGljYXRvck1lc2hPYmplY3QudHJhbnNsYXRlKHJheUhpdC5sb2NhdGlvbnNbMF0pO1xuICAgICAgICAgICAgdGhpcy50ZWxlcG9ydEluZGljYXRvck1lc2hPYmplY3QuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaGl0U3BvdCA9IHJheUhpdC5sb2NhdGlvbnNbMF07XG4gICAgICAgICAgICB0aGlzLl9oYXNIaXQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmluZGljYXRvckhpZGRlbikge1xuICAgICAgICAgICAgICAgIHRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0LmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5kaWNhdG9ySGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2hhc0hpdCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIF90ZWxlcG9ydFBsYXllcihuZXdQb3NpdGlvbiwgcm90YXRpb25Ub0FkZCkge1xuICAgICAgICB0aGlzLmNhbVJvb3Qucm90YXRlQXhpc0FuZ2xlUmFkKFswLCAxLCAwXSwgcm90YXRpb25Ub0FkZCk7XG4gICAgICAgIGNvbnN0IHAgPSB0aGlzLl90ZW1wVmVjO1xuICAgICAgICBjb25zdCBwMSA9IHRoaXMuX3RlbXBWZWMwO1xuICAgICAgICBpZiAodGhpcy5zZXNzaW9uKSB7XG4gICAgICAgICAgICB0aGlzLmV5ZUxlZnQuZ2V0UG9zaXRpb25Xb3JsZChwKTtcbiAgICAgICAgICAgIHRoaXMuZXllUmlnaHQuZ2V0UG9zaXRpb25Xb3JsZChwMSk7XG4gICAgICAgICAgICB2ZWMzLmFkZChwLCBwLCBwMSk7XG4gICAgICAgICAgICB2ZWMzLnNjYWxlKHAsIHAsIDAuNSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNhbS5nZXRQb3NpdGlvbldvcmxkKHApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2FtUm9vdC5nZXRQb3NpdGlvbldvcmxkKHAxKTtcbiAgICAgICAgdmVjMy5zdWIocCwgcDEsIHApO1xuICAgICAgICBwWzBdICs9IG5ld1Bvc2l0aW9uWzBdO1xuICAgICAgICBwWzFdID0gbmV3UG9zaXRpb25bMV07XG4gICAgICAgIHBbMl0gKz0gbmV3UG9zaXRpb25bMl07XG4gICAgICAgIHRoaXMuY2FtUm9vdC5zZXRQb3NpdGlvbldvcmxkKHApO1xuICAgIH1cbn1cbmV4cG9ydCB7IFRlbGVwb3J0Q29tcG9uZW50IH07XG4iLCAidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuaW1wb3J0IHsgQ29tcG9uZW50LCBNZXNoLCBNZXNoSW5kZXhUeXBlLCBNZXNoQXR0cmlidXRlLCB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaS9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IHZlYzMgfSBmcm9tICdnbC1tYXRyaXgnO1xuY29uc3QgZGlyZWN0aW9uID0gdmVjMy5jcmVhdGUoKTtcbmNvbnN0IG9mZnNldCA9IHZlYzMuY3JlYXRlKCk7XG5jb25zdCBub3JtYWwgPSB2ZWMzLmNyZWF0ZSgpO1xuY29uc3QgVVAgPSB2ZWMzLmZyb21WYWx1ZXMoMCwgMSwgMCk7XG4vKipcbiAqIER5bmFtaWMgbWVzaC1iYXNlZCB0cmFpbFxuICpcbiAqIFRoaXMgY29tcG9uZW50IGtlZXBzIHRyYWNrIG9mIHRoZSB3b3JsZCBwb3NpdGlvbiBvZiB0aGUgb2JqZWN0IGl0J3MgYWRkZWQgdG8uXG4gKiBBdCBhIGZpeGVkIGludGVydmFsIHRoZSB3b3JsZCBwb3NpdGlvbiBpcyBzdG9yZWQgYXMgc3RhcnQgYW5kIGVuZCBwb2ludHMgb2YgdGhlIHRyYWlsIHNlZ21lbnRzLlxuICpcbiAqIFRoZSB0cmFpbCB0YXBlcnMgb2ZmIGFsb25nIGl0cyBsZW5ndGguIFVWIHRleHR1cmUgY29vcmRpbmF0ZXMgYXJlIHNldHVwIHN1Y2ggdGhhdCB0aGVcbiAqIFUtYXhpcyBjb3ZlcnMgdGhlIHdpZHRoIG9mIHRoZSB0cmFpbCBhbmQgdGhlIFYtYXhpcyBjb3ZlcnMgdGhlIGxlbmd0aCBvZiB0aGUgdHJhaWwuXG4gKiBUaGlzIGFsbG93cyB0aGUgdHJhaWwncyBhcHBlYXJhbmNlIHRvIGJlIGRlZmluZWQgdXNpbmcgYSB0ZXh0dXJlLlxuICovXG5jbGFzcyBUcmFpbCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ3RyYWlsJztcbiAgICAvKiogVGhlIG1hdGVyaWFsIHRvIGFwcGx5IHRvIHRoZSB0cmFpbCBtZXNoICovXG4gICAgbWF0ZXJpYWwgPSBudWxsO1xuICAgIC8qKiBUaGUgbnVtYmVyIG9mIHNlZ21lbnRzIGluIHRoZSB0cmFpbCBtZXNoICovXG4gICAgc2VnbWVudHMgPSA1MDtcbiAgICAvKiogVGhlIHRpbWUgaW50ZXJ2YWwgYmVmb3JlIHJlY29yZGluZyBhIG5ldyBwb2ludCAqL1xuICAgIGludGVydmFsID0gMC4xO1xuICAgIC8qKiBUaGUgd2lkdGggb2YgdGhlIHRyYWlsIChpbiB3b3JsZCBzcGFjZSkgKi9cbiAgICB3aWR0aCA9IDEuMDtcbiAgICAvKiogV2hldGhlciBvciBub3QgdGhlIHRyYWlsIHNob3VsZCB0YXBlciBvZmYgKi9cbiAgICB0YXBlciA9IHRydWU7XG4gICAgLyoqXG4gICAgICogVGhlIG1heGltdW0gZGVsdGEgdGltZSBpbiBzZWNvbmRzLCBhYm92ZSB3aGljaCB0aGUgdHJhaWwgcmVzZXRzLlxuICAgICAqIFRoaXMgcHJldmVudHMgdGhlIHRyYWlsIGZyb20ganVtcGluZyBhcm91bmQgd2hlbiB1cGRhdGVzIGhhcHBlblxuICAgICAqIGluZnJlcXVlbnRseSAoZS5nLiB3aGVuIHRoZSB0YWIgZG9lc24ndCBoYXZlIGZvY3VzKS5cbiAgICAgKi9cbiAgICByZXNldFRocmVzaG9sZCA9IDAuNTtcbiAgICBfY3VycmVudFBvaW50SW5kZXggPSAwO1xuICAgIF90aW1lVGlsbE5leHQgPSAwO1xuICAgIF9wb2ludHMgPSBbXTtcbiAgICBfdHJhaWxDb250YWluZXIgPSBudWxsO1xuICAgIF9tZXNoQ29tcCA9IG51bGw7XG4gICAgX21lc2ggPSBudWxsO1xuICAgIF9pbmRleERhdGEgPSBudWxsO1xuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLl9wb2ludHMgPSBuZXcgQXJyYXkodGhpcy5zZWdtZW50cyArIDEpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3BvaW50cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5fcG9pbnRzW2ldID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICAvKiBUaGUgcG9pbnRzIGFycmF5IGlzIGNpcmN1bGFyLCBzbyBrZWVwIHRyYWNrIG9mIGl0cyBoZWFkICovXG4gICAgICAgIHRoaXMuX3RpbWVUaWxsTmV4dCA9IHRoaXMuaW50ZXJ2YWw7XG4gICAgICAgIHRoaXMuX3RyYWlsQ29udGFpbmVyID0gdGhpcy5lbmdpbmUuc2NlbmUuYWRkT2JqZWN0KCk7XG4gICAgICAgIHRoaXMuX21lc2hDb21wID0gdGhpcy5fdHJhaWxDb250YWluZXIuYWRkQ29tcG9uZW50KCdtZXNoJyk7XG4gICAgICAgIHRoaXMuX21lc2hDb21wLm1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbDtcbiAgICAgICAgLyogRWFjaCBwb2ludCB3aWxsIGhhdmUgdHdvIHZlcnRpY2VzOyBvbmUgb24gZWl0aGVyIHNpZGUgKi9cbiAgICAgICAgY29uc3QgdmVydGV4Q291bnQgPSAyICogdGhpcy5fcG9pbnRzLmxlbmd0aDtcbiAgICAgICAgLyogRWFjaCBzZWdtZW50IGNvbnNpc3RzIG9mIHR3byB0cmlhbmdsZXMgKi9cbiAgICAgICAgdGhpcy5faW5kZXhEYXRhID0gbmV3IFVpbnQzMkFycmF5KDYgKiB0aGlzLnNlZ21lbnRzKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIHYgPSAwOyBpIDwgdmVydGV4Q291bnQgLSAyOyBpICs9IDIsIHYgKz0gNikge1xuICAgICAgICAgICAgdGhpcy5faW5kZXhEYXRhXG4gICAgICAgICAgICAgICAgLnN1YmFycmF5KHYsIHYgKyA2KVxuICAgICAgICAgICAgICAgIC5zZXQoW2kgKyAxLCBpICsgMCwgaSArIDIsIGkgKyAyLCBpICsgMywgaSArIDFdKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9tZXNoID0gbmV3IE1lc2godGhpcy5lbmdpbmUsIHtcbiAgICAgICAgICAgIHZlcnRleENvdW50OiB2ZXJ0ZXhDb3VudCxcbiAgICAgICAgICAgIGluZGV4RGF0YTogdGhpcy5faW5kZXhEYXRhLFxuICAgICAgICAgICAgaW5kZXhUeXBlOiBNZXNoSW5kZXhUeXBlLlVuc2lnbmVkSW50LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fbWVzaENvbXAubWVzaCA9IHRoaXMuX21lc2g7XG4gICAgfVxuICAgIHVwZGF0ZVZlcnRpY2VzKCkge1xuICAgICAgICBpZiAoIXRoaXMuX21lc2gpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHBvc2l0aW9ucyA9IHRoaXMuX21lc2guYXR0cmlidXRlKE1lc2hBdHRyaWJ1dGUuUG9zaXRpb24pO1xuICAgICAgICBjb25zdCB0ZXhDb29yZHMgPSB0aGlzLl9tZXNoLmF0dHJpYnV0ZShNZXNoQXR0cmlidXRlLlRleHR1cmVDb29yZGluYXRlKTtcbiAgICAgICAgY29uc3Qgbm9ybWFscyA9IHRoaXMuX21lc2guYXR0cmlidXRlKE1lc2hBdHRyaWJ1dGUuTm9ybWFsKTtcbiAgICAgICAgdmVjMy5zZXQoZGlyZWN0aW9uLCAwLCAwLCAwKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9wb2ludHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnIgPSB0aGlzLl9wb2ludHNbKHRoaXMuX2N1cnJlbnRQb2ludEluZGV4ICsgaSArIDEpICUgdGhpcy5fcG9pbnRzLmxlbmd0aF07XG4gICAgICAgICAgICBjb25zdCBuZXh0ID0gdGhpcy5fcG9pbnRzWyh0aGlzLl9jdXJyZW50UG9pbnRJbmRleCArIGkgKyAyKSAlIHRoaXMuX3BvaW50cy5sZW5ndGhdO1xuICAgICAgICAgICAgLyogVGhlIGxhc3QgcG9pbnQgaGFzIG5vIG5leHQsIHNvIHJlLXVzZSB0aGUgZGlyZWN0aW9uIG9mIHRoZSBwcmV2aW91cyBzZWdtZW50ICovXG4gICAgICAgICAgICBpZiAoaSAhPT0gdGhpcy5fcG9pbnRzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICB2ZWMzLnN1YihkaXJlY3Rpb24sIG5leHQsIGN1cnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmVjMy5jcm9zcyhvZmZzZXQsIFVQLCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUob2Zmc2V0LCBvZmZzZXQpO1xuICAgICAgICAgICAgY29uc3QgdGltZUZyYWN0aW9uID0gMS4wIC0gdGhpcy5fdGltZVRpbGxOZXh0IC8gdGhpcy5pbnRlcnZhbDtcbiAgICAgICAgICAgIGNvbnN0IGZyYWN0aW9uID0gKGkgLSB0aW1lRnJhY3Rpb24pIC8gdGhpcy5zZWdtZW50cztcbiAgICAgICAgICAgIHZlYzMuc2NhbGUob2Zmc2V0LCBvZmZzZXQsICgodGhpcy50YXBlciA/IGZyYWN0aW9uIDogMS4wKSAqIHRoaXMud2lkdGgpIC8gMi4wKTtcbiAgICAgICAgICAgIHBvc2l0aW9ucy5zZXQoaSAqIDIsIFtcbiAgICAgICAgICAgICAgICBjdXJyWzBdIC0gb2Zmc2V0WzBdLFxuICAgICAgICAgICAgICAgIGN1cnJbMV0gLSBvZmZzZXRbMV0sXG4gICAgICAgICAgICAgICAgY3VyclsyXSAtIG9mZnNldFsyXSxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgcG9zaXRpb25zLnNldChpICogMiArIDEsIFtcbiAgICAgICAgICAgICAgICBjdXJyWzBdICsgb2Zmc2V0WzBdLFxuICAgICAgICAgICAgICAgIGN1cnJbMV0gKyBvZmZzZXRbMV0sXG4gICAgICAgICAgICAgICAgY3VyclsyXSArIG9mZnNldFsyXSxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgaWYgKG5vcm1hbHMpIHtcbiAgICAgICAgICAgICAgICB2ZWMzLmNyb3NzKG5vcm1hbCwgZGlyZWN0aW9uLCBvZmZzZXQpO1xuICAgICAgICAgICAgICAgIHZlYzMubm9ybWFsaXplKG5vcm1hbCwgbm9ybWFsKTtcbiAgICAgICAgICAgICAgICBub3JtYWxzLnNldChpICogMiwgbm9ybWFsKTtcbiAgICAgICAgICAgICAgICBub3JtYWxzLnNldChpICogMiArIDEsIG5vcm1hbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGV4Q29vcmRzKSB7XG4gICAgICAgICAgICAgICAgdGV4Q29vcmRzLnNldChpICogMiwgWzAsIGZyYWN0aW9uXSk7XG4gICAgICAgICAgICAgICAgdGV4Q29vcmRzLnNldChpICogMiArIDEsIFsxLCBmcmFjdGlvbl0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qIE5vdGlmeSBXTEUgdGhhdCB0aGUgbWVzaCBoYXMgY2hhbmdlZCAqL1xuICAgICAgICB0aGlzLl9tZXNoLnVwZGF0ZSgpO1xuICAgIH1cbiAgICByZXNldFRyYWlsKCkge1xuICAgICAgICB0aGlzLm9iamVjdC5nZXRQb3NpdGlvbldvcmxkKHRoaXMuX3BvaW50c1swXSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5fcG9pbnRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2ZWMzLmNvcHkodGhpcy5fcG9pbnRzW2ldLCB0aGlzLl9wb2ludHNbMF0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2N1cnJlbnRQb2ludEluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5fdGltZVRpbGxOZXh0ID0gdGhpcy5pbnRlcnZhbDtcbiAgICB9XG4gICAgdXBkYXRlKGR0KSB7XG4gICAgICAgIHRoaXMuX3RpbWVUaWxsTmV4dCAtPSBkdDtcbiAgICAgICAgaWYgKGR0ID4gdGhpcy5yZXNldFRocmVzaG9sZCkge1xuICAgICAgICAgICAgdGhpcy5yZXNldFRyYWlsKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX3RpbWVUaWxsTmV4dCA8IDApIHtcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRQb2ludEluZGV4ID0gKHRoaXMuX2N1cnJlbnRQb2ludEluZGV4ICsgMSkgJSB0aGlzLl9wb2ludHMubGVuZ3RoO1xuICAgICAgICAgICAgdGhpcy5fdGltZVRpbGxOZXh0ID0gKHRoaXMuX3RpbWVUaWxsTmV4dCAlIHRoaXMuaW50ZXJ2YWwpICsgdGhpcy5pbnRlcnZhbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9iamVjdC5nZXRQb3NpdGlvbldvcmxkKHRoaXMuX3BvaW50c1t0aGlzLl9jdXJyZW50UG9pbnRJbmRleF0pO1xuICAgICAgICB0aGlzLnVwZGF0ZVZlcnRpY2VzKCk7XG4gICAgfVxuICAgIG9uQWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMucmVzZXRUcmFpbCgpO1xuICAgICAgICBpZiAodGhpcy5fbWVzaENvbXApXG4gICAgICAgICAgICB0aGlzLl9tZXNoQ29tcC5hY3RpdmUgPSB0cnVlO1xuICAgIH1cbiAgICBvbkRlYWN0aXZhdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLl9tZXNoQ29tcClcbiAgICAgICAgICAgIHRoaXMuX21lc2hDb21wLmFjdGl2ZSA9IGZhbHNlO1xuICAgIH1cbiAgICBvbkRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLl90cmFpbENvbnRhaW5lcilcbiAgICAgICAgICAgIHRoaXMuX3RyYWlsQ29udGFpbmVyLmRlc3Ryb3koKTtcbiAgICAgICAgaWYgKHRoaXMuX21lc2gpXG4gICAgICAgICAgICB0aGlzLl9tZXNoLmRlc3Ryb3koKTtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5tYXRlcmlhbCgpXG5dLCBUcmFpbC5wcm90b3R5cGUsIFwibWF0ZXJpYWxcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmludCg1MClcbl0sIFRyYWlsLnByb3RvdHlwZSwgXCJzZWdtZW50c1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoNTApXG5dLCBUcmFpbC5wcm90b3R5cGUsIFwiaW50ZXJ2YWxcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmZsb2F0KDEuMClcbl0sIFRyYWlsLnByb3RvdHlwZSwgXCJ3aWR0aFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuYm9vbCh0cnVlKVxuXSwgVHJhaWwucHJvdG90eXBlLCBcInRhcGVyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5mbG9hdCgxLjApXG5dLCBUcmFpbC5wcm90b3R5cGUsIFwicmVzZXRUaHJlc2hvbGRcIiwgdm9pZCAwKTtcbmV4cG9ydCB7IFRyYWlsIH07XG4iLCAiaW1wb3J0IHsgQ29tcG9uZW50LCBQcm9wZXJ0eSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgeyB2ZWMzIH0gZnJvbSAnZ2wtbWF0cml4JztcbmZ1bmN0aW9uIGNsYW1wKHYsIGEsIGIpIHtcbiAgICByZXR1cm4gTWF0aC5tYXgoYSwgTWF0aC5taW4odiwgYikpO1xufVxuY29uc3Qgcm9vdFNjYWxpbmcgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuY29uc3QgdGVtcFF1YXQgPSBuZXcgRmxvYXQzMkFycmF5KDQpO1xuY29uc3QgbWlkZGxlUG9zID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbmNvbnN0IGVuZFBvcyA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG5jb25zdCB0YXJnZXRQb3MgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuY29uc3QgaGVscGVyUG9zID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbmNvbnN0IHJvb3RUcmFuc2Zvcm0gPSBuZXcgRmxvYXQzMkFycmF5KDgpO1xuY29uc3QgbWlkZGxlVHJhbnNmb3JtID0gbmV3IEZsb2F0MzJBcnJheSg4KTtcbmNvbnN0IGVuZFRyYW5zZm9ybSA9IG5ldyBGbG9hdDMyQXJyYXkoOCk7XG4vKipcbiAqIFNvbHZlIGludmVyc2Uga2luZW1hdGljcyBmb3IgYSB0d28gam9pbnQgY2hhaW5zXG4gKlxuICogSW5zcGlyZWQgYnkgaHR0cDovL3RoZW9yYW5nZWR1Y2suY29tL3BhZ2Uvc2ltcGxlLXR3by1qb2ludFxuICovXG5jb25zdCB0d29Kb2ludElLID0gKGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCB0YSA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgY29uc3QgY2EgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgIGNvbnN0IGJhID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICBjb25zdCBhYiA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgY29uc3QgY2IgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgIGNvbnN0IGF4aXMwID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICBjb25zdCBheGlzMSA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgY29uc3QgdGVtcCA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyb290LCBtaWRkbGUsIGIsIGMsIHRhcmdldFBvcywgZXBzLCBoZWxwZXIpIHtcbiAgICAgICAgLyogYSA9IFswLCAwLCAwXSwgc2luY2UgZXZlcnl0aGluZyBpcyBjb21wdXRlZCBpbiByb290LXNwYWNlICovXG4gICAgICAgIGJhLnNldChiKTtcbiAgICAgICAgY29uc3QgbGFiID0gdmVjMy5sZW5ndGgoYmEpO1xuICAgICAgICB2ZWMzLnN1Yih0YSwgYiwgYyk7XG4gICAgICAgIGNvbnN0IGxjYiA9IHZlYzMubGVuZ3RoKHRhKTtcbiAgICAgICAgdGEuc2V0KHRhcmdldFBvcyk7XG4gICAgICAgIGNvbnN0IGxhdCA9IGNsYW1wKHZlYzMubGVuZ3RoKHRhKSwgZXBzLCBsYWIgKyBsY2IgLSBlcHMpO1xuICAgICAgICBjYS5zZXQoYyk7XG4gICAgICAgIHZlYzMuc2NhbGUoYWIsIGIsIC0xKTtcbiAgICAgICAgdmVjMy5zdWIoY2IsIGMsIGIpO1xuICAgICAgICB2ZWMzLm5vcm1hbGl6ZShjYSwgY2EpO1xuICAgICAgICB2ZWMzLm5vcm1hbGl6ZShiYSwgYmEpO1xuICAgICAgICB2ZWMzLm5vcm1hbGl6ZShhYiwgYWIpO1xuICAgICAgICB2ZWMzLm5vcm1hbGl6ZShjYiwgY2IpO1xuICAgICAgICB2ZWMzLm5vcm1hbGl6ZSh0YSwgdGEpO1xuICAgICAgICAvKiBTdXBwb3NlZGx5IG51bWVyaWNhbCBlcnJvcnMgY2FuIGNhdXNlIHRoZSBkb3QgdG8gZ28gb3V0IG9mIC0xLCAxIHJhbmdlICovXG4gICAgICAgIGNvbnN0IGFjX2FiXzAgPSBNYXRoLmFjb3MoY2xhbXAodmVjMy5kb3QoY2EsIGJhKSwgLTEsIDEpKTtcbiAgICAgICAgY29uc3QgYmFfYmNfMCA9IE1hdGguYWNvcyhjbGFtcCh2ZWMzLmRvdChhYiwgY2IpLCAtMSwgMSkpO1xuICAgICAgICBjb25zdCBhY19hdF8wID0gTWF0aC5hY29zKGNsYW1wKHZlYzMuZG90KGNhLCB0YSksIC0xLCAxKSk7XG4gICAgICAgIGNvbnN0IGFjX2FiXzEgPSBNYXRoLmFjb3MoY2xhbXAoKGxjYiAqIGxjYiAtIGxhYiAqIGxhYiAtIGxhdCAqIGxhdCkgLyAoLTIgKiBsYWIgKiBsYXQpLCAtMSwgMSkpO1xuICAgICAgICBjb25zdCBiYV9iY18xID0gTWF0aC5hY29zKGNsYW1wKChsYXQgKiBsYXQgLSBsYWIgKiBsYWIgLSBsY2IgKiBsY2IpIC8gKC0yICogbGFiICogbGNiKSwgLTEsIDEpKTtcbiAgICAgICAgaWYgKGhlbHBlcikge1xuICAgICAgICAgICAgdmVjMy5zdWIoYmEsIGhlbHBlciwgYik7XG4gICAgICAgICAgICB2ZWMzLm5vcm1hbGl6ZShiYSwgYmEpO1xuICAgICAgICB9XG4gICAgICAgIHZlYzMuY3Jvc3MoYXhpczAsIGNhLCBiYSk7XG4gICAgICAgIHZlYzMubm9ybWFsaXplKGF4aXMwLCBheGlzMCk7XG4gICAgICAgIHZlYzMuY3Jvc3MoYXhpczEsIGMsIHRhcmdldFBvcyk7XG4gICAgICAgIHZlYzMubm9ybWFsaXplKGF4aXMxLCBheGlzMSk7XG4gICAgICAgIG1pZGRsZS50cmFuc2Zvcm1WZWN0b3JJbnZlcnNlTG9jYWwodGVtcCwgYXhpczApO1xuICAgICAgICByb290LnJvdGF0ZUF4aXNBbmdsZVJhZE9iamVjdChheGlzMSwgYWNfYXRfMCk7XG4gICAgICAgIHJvb3Qucm90YXRlQXhpc0FuZ2xlUmFkT2JqZWN0KGF4aXMwLCBhY19hYl8xIC0gYWNfYWJfMCk7XG4gICAgICAgIG1pZGRsZS5yb3RhdGVBeGlzQW5nbGVSYWRPYmplY3QoYXhpczAsIGJhX2JjXzEgLSBiYV9iY18wKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogSW52ZXJzZSBraW5lbWF0aWNzIGZvciB0d28tam9pbnQgY2hhaW5zIChlLmcuIGtuZWVzIG9yIGVsYm93cylcbiAqL1xuY2xhc3MgVHdvSm9pbnRJa1NvbHZlciBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ3R3by1qb2ludC1pay1zb2x2ZXInO1xuICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge1xuICAgICAgICAvKiogUm9vdCBib25lLCBuZXZlciBtb3ZlcyAqL1xuICAgICAgICByb290OiBQcm9wZXJ0eS5vYmplY3QoKSxcbiAgICAgICAgLyoqIEJvbmUgYXR0YWNoZWQgdG8gdGhlIHJvb3QgKi9cbiAgICAgICAgbWlkZGxlOiBQcm9wZXJ0eS5vYmplY3QoKSxcbiAgICAgICAgLyoqIEJvbmUgYXR0YWNoZWQgdG8gdGhlIG1pZGRsZSAqL1xuICAgICAgICBlbmQ6IFByb3BlcnR5Lm9iamVjdCgpLFxuICAgICAgICAvKiogVGFyZ2V0IHRoZSBqb2lucyBzaG91bGQgcmVhY2ggZm9yICovXG4gICAgICAgIHRhcmdldDogUHJvcGVydHkub2JqZWN0KCksXG4gICAgICAgIC8qKiBGbGFnIGZvciBjb3B5aW5nIHJvdGF0aW9uIGZyb20gdGFyZ2V0IHRvIGVuZCAqL1xuICAgICAgICBjb3B5VGFyZ2V0Um90YXRpb246IFByb3BlcnR5LmJvb2wodHJ1ZSksXG4gICAgICAgIC8qKiBIZWxwZXIgb2JqZWN0IHRvIHVzZSB0byBkZXRlcm1pbmUgam9pbnQgcm90YXRpb24gYXhpcyAqL1xuICAgICAgICBoZWxwZXI6IFByb3BlcnR5Lm9iamVjdCgpLFxuICAgIH07XG4gICAgdGltZSA9IDA7XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMucm9vdC5nZXRUcmFuc2Zvcm1Mb2NhbChyb290VHJhbnNmb3JtKTtcbiAgICAgICAgdGhpcy5taWRkbGUuZ2V0VHJhbnNmb3JtTG9jYWwobWlkZGxlVHJhbnNmb3JtKTtcbiAgICAgICAgdGhpcy5lbmQuZ2V0VHJhbnNmb3JtTG9jYWwoZW5kVHJhbnNmb3JtKTtcbiAgICB9XG4gICAgdXBkYXRlKGR0KSB7XG4gICAgICAgIHRoaXMudGltZSArPSBkdDtcbiAgICAgICAgLyogUmVzZXQgdG8gb3JpZ2luYWwgcG9zZSBmb3Igc3RhYmlsaXR5ICovXG4gICAgICAgIHRoaXMucm9vdC5zZXRUcmFuc2Zvcm1Mb2NhbChyb290VHJhbnNmb3JtKTtcbiAgICAgICAgdGhpcy5taWRkbGUuc2V0VHJhbnNmb3JtTG9jYWwobWlkZGxlVHJhbnNmb3JtKTtcbiAgICAgICAgdGhpcy5lbmQuc2V0VHJhbnNmb3JtTG9jYWwoZW5kVHJhbnNmb3JtKTtcbiAgICAgICAgdGhpcy5yb290LmdldFNjYWxpbmdXb3JsZChyb290U2NhbGluZyk7XG4gICAgICAgIC8qIEdldCBqb2ludCBwb3NpdGlvbnMgaW4gcm9vdC1zcGFjZSAqL1xuICAgICAgICB0aGlzLm1pZGRsZS5nZXRQb3NpdGlvbkxvY2FsKG1pZGRsZVBvcyk7XG4gICAgICAgIHRoaXMuZW5kLmdldFBvc2l0aW9uTG9jYWwoZW5kUG9zKTtcbiAgICAgICAgdGhpcy5taWRkbGUudHJhbnNmb3JtUG9pbnRMb2NhbChlbmRQb3MsIGVuZFBvcyk7XG4gICAgICAgIGlmICh0aGlzLmhlbHBlcikge1xuICAgICAgICAgICAgLyogR2V0IGhlbHBlciBwb3NpdGlvbiBpbiByb290IHNwYWNlICovXG4gICAgICAgICAgICB0aGlzLmhlbHBlci5nZXRQb3NpdGlvbldvcmxkKGhlbHBlclBvcyk7XG4gICAgICAgICAgICB0aGlzLnJvb3QudHJhbnNmb3JtUG9pbnRJbnZlcnNlV29ybGQoaGVscGVyUG9zLCBoZWxwZXJQb3MpO1xuICAgICAgICAgICAgdmVjMy5kaXYoaGVscGVyUG9zLCBoZWxwZXJQb3MsIHJvb3RTY2FsaW5nKTtcbiAgICAgICAgfVxuICAgICAgICAvKiBHZXQgdGFyZ2V0IHBvc2l0aW9uIGluIHJvb3Qgc3BhY2UgKi9cbiAgICAgICAgdGhpcy50YXJnZXQuZ2V0UG9zaXRpb25Xb3JsZCh0YXJnZXRQb3MpO1xuICAgICAgICB0aGlzLnJvb3QudHJhbnNmb3JtUG9pbnRJbnZlcnNlV29ybGQodGFyZ2V0UG9zLCB0YXJnZXRQb3MpO1xuICAgICAgICB2ZWMzLmRpdih0YXJnZXRQb3MsIHRhcmdldFBvcywgcm9vdFNjYWxpbmcpO1xuICAgICAgICB0d29Kb2ludElLKHRoaXMucm9vdCwgdGhpcy5taWRkbGUsIG1pZGRsZVBvcywgZW5kUG9zLCB0YXJnZXRQb3MsIDAuMDEsIHRoaXMuaGVscGVyID8gaGVscGVyUG9zIDogbnVsbCwgdGhpcy50aW1lKTtcbiAgICAgICAgaWYgKHRoaXMuY29weVRhcmdldFJvdGF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmVuZC5zZXRSb3RhdGlvbldvcmxkKHRoaXMudGFyZ2V0LmdldFJvdGF0aW9uV29ybGQodGVtcFF1YXQpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCB7IFR3b0pvaW50SWtTb2x2ZXIgfTtcbiIsICJpbXBvcnQgeyBDb21wb25lbnQsIFRleHR1cmUsIFByb3BlcnR5IH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbmltcG9ydCB7IHNldEZpcnN0TWF0ZXJpYWxUZXh0dXJlIH0gZnJvbSAnLi91dGlscy91dGlscy5qcyc7XG4vKipcbiAqIERvd25sb2FkcyBhIHZpZGVvIGZyb20gVVJMIGFuZCBhcHBsaWVzIGl0IGFzIGBkaWZmdXNlVGV4dHVyZWAgb3IgYGZsYXRUZXh0dXJlYFxuICogb24gZ2l2ZW4gbWF0ZXJpYWwuXG4gKlxuICogVmlkZW8gdGV4dHVyZXMgbmVlZCB0byBiZSB1cGRhdGVkIHJlZ3VsYXJseSB3aGVuZXZlclxuICogYSBuZXcgZnJhbWUgaXMgYXZhaWxhYmxlLiBUaGlzIGNvbXBvbmVudCBoYW5kbGVzIHRoZVxuICogZGV0ZWN0aW9uIG9mIGEgbmV3IGZyYW1lIGFuZCB1cGRhdGVzIHRoZSB0ZXh0dXJlIHRvXG4gKiByZWZsZWN0IHRoZSB2aWRlbydzIGN1cnJlbnQgZnJhbWUuXG4gKlxuICogTWF0ZXJpYWxzIGZyb20gdGhlIGZvbGxvd2luZyBzaGFkZXJzIGFyZSBzdXBwb3J0ZWQ6XG4gKiAgLSBcIlBob25nIE9wYXF1ZSBUZXh0dXJlZFwiXG4gKiAgLSBcIkZsYXQgT3BhcXVlIFRleHR1cmVkXCJcbiAqICAtIFwiQmFja2dyb3VuZFwiXG4gKiAgLSBcIlBoeXNpY2FsIE9wYXF1ZSBUZXh0dXJlZFwiXG4gKiAgLSBcIkZvbGlhZ2VcIlxuICpcbiAqIFRoZSB2aWRlbyBjYW4gYmUgYWNjZXNzZWQgdGhyb3VnaCBgdGhpcy52aWRlb2A6XG4gKlxuICogYGBganNcbiAqICAgbGV0IHZpZGVvVGV4dHVyZSA9IHRoaXMub2JqZWN0LmdldENvbXBvbmVudCgndmlkZW8tdGV4dHVyZScpO1xuICogICB2aWRlb1RleHR1cmUudmlkZW8ucGxheSgpO1xuICogICB2aWRlb1RleHR1cmUudmlkZW8ucGF1c2UoKTtcbiAqIGBgYFxuICpcbiAqIFNlZSBbVmlkZW8gRXhhbXBsZV0oL3Nob3djYXNlL3ZpZGVvKS5cbiAqL1xuY2xhc3MgVmlkZW9UZXh0dXJlIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAndmlkZW8tdGV4dHVyZSc7XG4gICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gICAgICAgIC8qKiBVUkwgdG8gZG93bmxvYWQgdmlkZW8gZnJvbSAqL1xuICAgICAgICB1cmw6IFByb3BlcnR5LnN0cmluZygpLFxuICAgICAgICAvKiogTWF0ZXJpYWwgdG8gYXBwbHkgdGhlIHZpZGVvIHRleHR1cmUgdG8gKi9cbiAgICAgICAgbWF0ZXJpYWw6IFByb3BlcnR5Lm1hdGVyaWFsKCksXG4gICAgICAgIC8qKiBXaGV0aGVyIHRvIGxvb3AgdGhlIHZpZGVvICovXG4gICAgICAgIGxvb3A6IFByb3BlcnR5LmJvb2wodHJ1ZSksXG4gICAgICAgIC8qKiBXaGV0aGVyIHRvIGF1dG9tYXRpY2FsbHkgc3RhcnQgcGxheWluZyB0aGUgdmlkZW8gKi9cbiAgICAgICAgYXV0b3BsYXk6IFByb3BlcnR5LmJvb2wodHJ1ZSksXG4gICAgICAgIC8qKiBXaGV0aGVyIHRvIG11dGUgc291bmQgKi9cbiAgICAgICAgbXV0ZWQ6IFByb3BlcnR5LmJvb2wodHJ1ZSksXG4gICAgICAgIC8qKiBOYW1lIG9mIHRoZSB0ZXh0dXJlIHByb3BlcnR5IHRvIHNldCAqL1xuICAgICAgICB0ZXh0dXJlUHJvcGVydHk6IFByb3BlcnR5LnN0cmluZygnYXV0bycpLFxuICAgIH07XG4gICAgaW5pdCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLm1hdGVyaWFsKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcigndmlkZW8tdGV4dHVyZTogbWF0ZXJpYWwgcHJvcGVydHkgbm90IHNldCcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubG9hZGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZnJhbWVVcGRhdGVSZXF1ZXN0ZWQgPSB0cnVlO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy52aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG4gICAgICAgIHRoaXMudmlkZW8uc3JjID0gdGhpcy51cmw7XG4gICAgICAgIHRoaXMudmlkZW8uY3Jvc3NPcmlnaW4gPSAnYW5vbnltb3VzJztcbiAgICAgICAgdGhpcy52aWRlby5wbGF5c0lubGluZSA9IHRydWU7XG4gICAgICAgIHRoaXMudmlkZW8ubG9vcCA9IHRoaXMubG9vcDtcbiAgICAgICAgdGhpcy52aWRlby5tdXRlZCA9IHRoaXMubXV0ZWQ7XG4gICAgICAgIHRoaXMudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcigncGxheWluZycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0aGlzLmF1dG9wbGF5KSB7XG4gICAgICAgICAgICBjb25zdCBwbGF5QWZ0ZXJVc2VyR2VzdHVyZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnZpZGVvLnBsYXkoKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBwbGF5QWZ0ZXJVc2VyR2VzdHVyZSk7XG4gICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBwbGF5QWZ0ZXJVc2VyR2VzdHVyZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcGxheUFmdGVyVXNlckdlc3R1cmUpO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBwbGF5QWZ0ZXJVc2VyR2VzdHVyZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXBwbHlUZXh0dXJlKCkge1xuICAgICAgICBjb25zdCBtYXQgPSB0aGlzLm1hdGVyaWFsO1xuICAgICAgICBjb25zdCBzaGFkZXIgPSBtYXQuc2hhZGVyO1xuICAgICAgICBjb25zdCB0ZXh0dXJlID0gKHRoaXMudGV4dHVyZSA9IG5ldyBUZXh0dXJlKHRoaXMuZW5naW5lLCB0aGlzLnZpZGVvKSk7XG4gICAgICAgIGlmICghc2V0Rmlyc3RNYXRlcmlhbFRleHR1cmUobWF0LCB0ZXh0dXJlLCB0aGlzLnRleHR1cmVQcm9wZXJ0eSkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NoYWRlcicsIHNoYWRlciwgJ25vdCBzdXBwb3J0ZWQgYnkgdmlkZW8tdGV4dHVyZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgncmVxdWVzdFZpZGVvRnJhbWVDYWxsYmFjaycgaW4gdGhpcy52aWRlbykge1xuICAgICAgICAgICAgdGhpcy52aWRlby5yZXF1ZXN0VmlkZW9GcmFtZUNhbGxiYWNrKHRoaXMudXBkYXRlVmlkZW8uYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ3RpbWV1cGRhdGUnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5mcmFtZVVwZGF0ZVJlcXVlc3RlZCA9IHRydWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGUoZHQpIHtcbiAgICAgICAgaWYgKHRoaXMubG9hZGVkICYmIHRoaXMuZnJhbWVVcGRhdGVSZXF1ZXN0ZWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRleHR1cmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRleHR1cmUudXBkYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvKiBBcHBseSB0ZXh0dXJlIG9uIGZpcnN0IGZyYW1lIHVwZGF0ZSByZXF1ZXN0ICovXG4gICAgICAgICAgICAgICAgdGhpcy5hcHBseVRleHR1cmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZnJhbWVVcGRhdGVSZXF1ZXN0ZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVWaWRlbygpIHtcbiAgICAgICAgdGhpcy5mcmFtZVVwZGF0ZVJlcXVlc3RlZCA9IHRydWU7XG4gICAgICAgIHRoaXMudmlkZW8ucmVxdWVzdFZpZGVvRnJhbWVDYWxsYmFjayh0aGlzLnVwZGF0ZVZpZGVvLmJpbmQodGhpcykpO1xuICAgIH1cbn1cbmV4cG9ydCB7IFZpZGVvVGV4dHVyZSB9O1xuIiwgImltcG9ydCB7IENvbXBvbmVudCwgVHlwZSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4vKipcbiAqIEFsbG93cyBzd2l0Y2hpbmcgYWxsIG90aGVyIGNvbXBvbmVudHMgb24gYW4gb2JqZWN0IHRvIGFjdGl2ZS9pbmFjdGl2ZVxuICogZGVwZW5kaW5nIG9uIHdoZXRoZXIgYSBWUi9BUiBzZXNzaW9uIGlzIGFjdGl2ZS5cbiAqXG4gKiBVc2VmdWwgZm9yIGhpZGluZyBjb250cm9sbGVycyB1bnRpbCB0aGUgdXNlciBlbnRlcnMgVlIgZm9yIGV4YW1wbGUuXG4gKi9cbmNsYXNzIFZyTW9kZUFjdGl2ZVN3aXRjaCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ3ZyLW1vZGUtYWN0aXZlLXN3aXRjaCc7XG4gICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gICAgICAgIC8qKiBXaGVuIGNvbXBvbmVudHMgc2hvdWxkIGJlIGFjdGl2ZTogSW4gVlIgb3Igd2hlbiBub3QgaW4gVlIgKi9cbiAgICAgICAgYWN0aXZhdGVDb21wb25lbnRzOiB7XG4gICAgICAgICAgICB0eXBlOiBUeXBlLkVudW0sXG4gICAgICAgICAgICB2YWx1ZXM6IFsnaW4gVlInLCAnaW4gbm9uLVZSJ10sXG4gICAgICAgICAgICBkZWZhdWx0OiAnaW4gVlInLFxuICAgICAgICB9LFxuICAgICAgICAvKiogV2hldGhlciBjaGlsZCBvYmplY3QncyBjb21wb25lbnRzIHNob3VsZCBiZSBhZmZlY3RlZCAqL1xuICAgICAgICBhZmZlY3RDaGlsZHJlbjogeyB0eXBlOiBUeXBlLkJvb2wsIGRlZmF1bHQ6IHRydWUgfSxcbiAgICB9O1xuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLmNvbXBvbmVudHMgPSBbXTtcbiAgICAgICAgdGhpcy5nZXRDb21wb25lbnRzKHRoaXMub2JqZWN0KTtcbiAgICAgICAgLyogSW5pdGlhbCBhY3RpdmF0aW9uL2RlYWN0aXZhdGlvbiAqL1xuICAgICAgICB0aGlzLm9uWFJTZXNzaW9uRW5kKCk7XG4gICAgICAgIHRoaXMub25TZXNzaW9uU3RhcnRDYWxsYmFjayA9IHRoaXMub25YUlNlc3Npb25TdGFydC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uU2Vzc2lvbkVuZENhbGxiYWNrID0gdGhpcy5vblhSU2Vzc2lvbkVuZC5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICBvbkFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvblN0YXJ0LmFkZCh0aGlzLm9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2spO1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvbkVuZC5hZGQodGhpcy5vblNlc3Npb25FbmRDYWxsYmFjayk7XG4gICAgfVxuICAgIG9uRGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUub25YUlNlc3Npb25TdGFydC5yZW1vdmUodGhpcy5vblNlc3Npb25TdGFydENhbGxiYWNrKTtcbiAgICAgICAgdGhpcy5lbmdpbmUub25YUlNlc3Npb25FbmQucmVtb3ZlKHRoaXMub25TZXNzaW9uRW5kQ2FsbGJhY2spO1xuICAgIH1cbiAgICBnZXRDb21wb25lbnRzKG9iaikge1xuICAgICAgICBjb25zdCBjb21wcyA9IG9iai5nZXRDb21wb25lbnRzKCkuZmlsdGVyKChjKSA9PiBjLnR5cGUgIT09ICd2ci1tb2RlLWFjdGl2ZS1zd2l0Y2gnKTtcbiAgICAgICAgdGhpcy5jb21wb25lbnRzID0gdGhpcy5jb21wb25lbnRzLmNvbmNhdChjb21wcyk7XG4gICAgICAgIGlmICh0aGlzLmFmZmVjdENoaWxkcmVuKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGRyZW4gPSBvYmouY2hpbGRyZW47XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRDb21wb25lbnRzKGNoaWxkcmVuW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRDb21wb25lbnRzQWN0aXZlKGFjdGl2ZSkge1xuICAgICAgICBjb25zdCBjb21wcyA9IHRoaXMuY29tcG9uZW50cztcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb21wcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgY29tcHNbaV0uYWN0aXZlID0gYWN0aXZlO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uWFJTZXNzaW9uU3RhcnQoKSB7XG4gICAgICAgIHRoaXMuc2V0Q29tcG9uZW50c0FjdGl2ZSh0aGlzLmFjdGl2YXRlQ29tcG9uZW50cyA9PSAwKTtcbiAgICB9XG4gICAgb25YUlNlc3Npb25FbmQoKSB7XG4gICAgICAgIHRoaXMuc2V0Q29tcG9uZW50c0FjdGl2ZSh0aGlzLmFjdGl2YXRlQ29tcG9uZW50cyAhPSAwKTtcbiAgICB9XG59XG5leHBvcnQgeyBWck1vZGVBY3RpdmVTd2l0Y2ggfTtcbiIsICJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBDb2xsaWRlciwgQ29sbGlzaW9uQ29tcG9uZW50LCBDb21wb25lbnQsIEVtaXR0ZXIsIE1lc2gsIE1lc2hBdHRyaWJ1dGUsIE1lc2hDb21wb25lbnQsIE1lc2hJbmRleFR5cGUsIH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbmltcG9ydCB7IHByb3BlcnR5IH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpL2RlY29yYXRvcnMuanMnO1xuaW1wb3J0IHsgc2V0WFJSaWdpZFRyYW5zZm9ybUxvY2FsIH0gZnJvbSAnLi91dGlscy93ZWJ4ci5qcyc7XG4vLyBGSVhNRTogZWFyY3V0IG92ZXJyaWRlcyBkZWZhdWx0IGV4cG9ydCwgYnJlYWtpbmcgb3VyIHRlc3RzXG5pbXBvcnQgZWFyY3V0IGZyb20gJ2VhcmN1dCc7XG5jb25zdCB0ZW1wVmVjMyA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4vKiogQ29tcHV0ZSBtaW5pbXVtIGFuZCBtYXhpdW0gZXh0ZW50cyBvZiBnaXZlbiBsaXN0IG9mIGNvbnRvdXIgcG9pbnRzICovXG5mdW5jdGlvbiBleHRlbnRzRnJvbUNvbnRvdXIob3V0LCBwb2ludHMpIHtcbiAgICBpZiAocG9pbnRzLmxlbmd0aCA9PSAwKVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIGxldCBhYnNNYXhYID0gTWF0aC5hYnMocG9pbnRzWzBdLngpO1xuICAgIGxldCBhYnNNYXhaID0gTWF0aC5hYnMocG9pbnRzWzBdLnopO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcG9pbnRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGFic01heFggPSBNYXRoLm1heChhYnNNYXhYLCBNYXRoLmFicyhwb2ludHNbaV0ueCkpO1xuICAgICAgICBhYnNNYXhaID0gTWF0aC5tYXgoYWJzTWF4WiwgTWF0aC5hYnMocG9pbnRzW2ldLnopKTtcbiAgICB9XG4gICAgb3V0WzBdID0gYWJzTWF4WDtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IGFic01heFo7XG59XG4vKiogQ2hlY2sgd2hldGhlciB4IGxpZXMgYmV0d2VlbiBhIGFuZCBiICovXG5mdW5jdGlvbiB3aXRoaW4oeCwgYSwgYikge1xuICAgIGlmIChhID4gYilcbiAgICAgICAgcmV0dXJuIHggPCBhICYmIHggPiBiO1xuICAgIHJldHVybiB4ID4gYSAmJiB4IDwgYjtcbn1cbi8qKlxuICogQ2hlY2sgd2hldGhlciBnaXZlbiBwb2ludCBvbiBwbGFuZSdzIGJvdW5kaW5nIGJveCBpcyBpbnNpZGUgcGxhbmUncyBwb2x5Z29uXG4gKlxuICogQHBhcmFtIHAgM0QgcG9pbnQgaW4gcGxhbmUncyBsb2NhbCBzcGFjZSwgWSB2YWx1ZSBpcyBpZ25vcmVkLCBzaW5jZSBpdCBpcyBhc3N1bWVkXG4gKiAgICAgdGhhdCB0aGUgcG9pbnQgd2FzIGNoZWNrZWQgYWdhaW5zdCB0aGUgcGxhbmUncyBib3VuZGluZyBib3guXG4gKiBAcGFyYW0gcGxhbmUgWFJQbGFuZSB0aGF0IGhhcyBgWFJQbGFuZS5wb2x5Z29uYFxuICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBwb2ludCBsaWVzIG9uIHRoZSBwbGFuZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNQb2ludExvY2FsT25YUlBsYW5lUG9seWdvbihwLCBwbGFuZSkge1xuICAgIGNvbnN0IHBvaW50cyA9IHBsYW5lLnBvbHlnb247XG4gICAgaWYgKHBvaW50cy5sZW5ndGggPCAzKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgLyogQ291bnQgcmF5IGludGVyc2VjdGlvbnM6IGV2ZW4gPT0gaW5zaWRlLCBvZGQgPT0gb3V0c2lkZSAqL1xuICAgIGNvbnN0IHBYID0gcFswXTtcbiAgICBjb25zdCBwWiA9IHBbMl07XG4gICAgbGV0IGludGVyc2VjdGlvbnMgPSAwO1xuICAgIGZvciAobGV0IG4gPSAwLCBsID0gcG9pbnRzLmxlbmd0aCAtIDE7IG4gPCBwb2ludHMubGVuZ3RoOyArK24pIHtcbiAgICAgICAgY29uc3QgYVggPSBwb2ludHNbbF0ueDtcbiAgICAgICAgY29uc3QgYVogPSBwb2ludHNbbF0uejtcbiAgICAgICAgY29uc3QgcyA9IChwb2ludHNbbl0ueiAtIGFaKSAvIChwb2ludHNbbl0ueCAtIGFYKTtcbiAgICAgICAgY29uc3QgeCA9IE1hdGguYWJzKChwWiAtIGFaKSAvIHMpO1xuICAgICAgICBpZiAoeCA+PSAwLjAgJiYgeCA8PSAxLjAgJiYgd2l0aGluKHggKyBwWCwgYVgsIHBvaW50c1tuXS54KSlcbiAgICAgICAgICAgICsraW50ZXJzZWN0aW9ucztcbiAgICAgICAgbCA9IG47XG4gICAgfVxuICAgIHJldHVybiAoaW50ZXJzZWN0aW9ucyAmIDEpID09IDA7XG59XG4vKipcbiAqIENoZWNrIHdoZXRoZXIgZ2l2ZW4gcG9pbnQgb24gcGxhbmUncyBib3VuZGluZyBib3ggaXMgaW5zaWRlIHBsYW5lJ3MgcG9seWdvblxuICpcbiAqIEBwYXJhbSBwIDNEIHBvaW50IHRvIHRlc3QuIEl0IGlzIGFzc3VtZWQgdGhhdCB0aGUgcG9pbnQgd2FzIGNoZWNrZWQgYWdhaW5zdFxuICogICAgIHRoZSBwbGFuZSdzIGJvdW5kaW5nIGJveCBiZWZvcmVoYW5kLlxuICogQHBhcmFtIHBsYW5lIFhSUGxhbmUgdGhhdCBoYXMgYFhSUGxhbmUucG9seWdvbmBcbiAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgcG9pbnQgbGllcyBvbiB0aGUgcGxhbmVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzUG9pbnRXb3JsZE9uWFJQbGFuZVBvbHlnb24ob2JqZWN0LCBwLCBwbGFuZSkge1xuICAgIGlmIChwbGFuZS5wb2x5Z29uLmxlbmd0aCA8IDMpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBpc1BvaW50TG9jYWxPblhSUGxhbmVQb2x5Z29uKG9iamVjdC50cmFuc2Zvcm1Qb2ludEludmVyc2VXb3JsZCh0ZW1wVmVjMywgcCksIHBsYW5lKTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgcGxhbmUgbWVzaCBmcm9tIGEgbGlzdCBvZiBjb250b3VyIHBvaW50c1xuICpcbiAqIEBwYXJhbSBlbmdpbmUgRW5naW5lIHRvIGNyZWF0ZSB0aGUgbWVzaCB3aXRoXG4gKiBAcGFyYW0gcG9pbnRzIENvbnRvdXIgcG9pbnRzXG4gKiBAcGFyYW0gbWVzaFRvVXBkYXRlIE9wdGlvbmFsIG1lc2ggdG8gdXBkYXRlIGluc3RlYWQgb2YgY3JlYXRpbmcgYSBuZXcgb25lLlxuICovXG5mdW5jdGlvbiBwbGFuZU1lc2hGcm9tQ29udG91cihlbmdpbmUsIHBvaW50cywgbWVzaFRvVXBkYXRlID0gbnVsbCkge1xuICAgIGNvbnN0IHZlcnRleENvdW50ID0gcG9pbnRzLmxlbmd0aDtcbiAgICBjb25zdCB2ZXJ0aWNlcyA9IG5ldyBGbG9hdDMyQXJyYXkodmVydGV4Q291bnQgKiAyKTtcbiAgICBmb3IgKGxldCBpID0gMCwgZCA9IDA7IGkgPCB2ZXJ0ZXhDb3VudDsgKytpLCBkICs9IDIpIHtcbiAgICAgICAgdmVydGljZXNbZF0gPSBwb2ludHNbaV0ueDtcbiAgICAgICAgdmVydGljZXNbZCArIDFdID0gcG9pbnRzW2ldLno7XG4gICAgfVxuICAgIGNvbnN0IHRyaWFuZ2xlcyA9IGVhcmN1dCh2ZXJ0aWNlcyk7XG4gICAgY29uc3QgbWVzaCA9IG1lc2hUb1VwZGF0ZSB8fFxuICAgICAgICBuZXcgTWVzaChlbmdpbmUsIHtcbiAgICAgICAgICAgIHZlcnRleENvdW50LFxuICAgICAgICAgICAgLyogQXNzdW1wdGlvbiBoZXJlIHRoYXQgd2Ugd2lsbCBuZXZlciBoYXZlIG1vcmUgdGhhbiAyNTYgcG9pbnRzXG4gICAgICAgICAgICAgKiBpbiB0aGUgZGV0ZWN0ZWQgcGxhbmUgbWVzaGVzISAqL1xuICAgICAgICAgICAgaW5kZXhUeXBlOiBNZXNoSW5kZXhUeXBlLlVuc2lnbmVkQnl0ZSxcbiAgICAgICAgICAgIGluZGV4RGF0YTogdHJpYW5nbGVzLFxuICAgICAgICB9KTtcbiAgICBpZiAobWVzaC52ZXJ0ZXhDb3VudCAhPT0gdmVydGV4Q291bnQpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCd2ZXJ0ZXhDb3VudCBvZiBtZXNoVG9VcGRhdGUgZGlkIG5vdCBtYXRjaCByZXF1aXJlZCB2ZXJ0ZXhDb3VudCcpO1xuICAgICAgICByZXR1cm4gbWVzaDtcbiAgICB9XG4gICAgY29uc3QgcG9zaXRpb25zID0gbWVzaC5hdHRyaWJ1dGUoTWVzaEF0dHJpYnV0ZS5Qb3NpdGlvbik7XG4gICAgY29uc3QgdGV4dHVyZUNvb3JkcyA9IG1lc2guYXR0cmlidXRlKE1lc2hBdHRyaWJ1dGUuVGV4dHVyZUNvb3JkaW5hdGUpO1xuICAgIGNvbnN0IG5vcm1hbHMgPSBtZXNoLmF0dHJpYnV0ZShNZXNoQXR0cmlidXRlLk5vcm1hbCk7XG4gICAgdGVtcFZlYzNbMV0gPSAwO1xuICAgIGZvciAobGV0IGkgPSAwLCBzID0gMDsgaSA8IHZlcnRleENvdW50OyArK2ksIHMgKz0gMikge1xuICAgICAgICB0ZW1wVmVjM1swXSA9IHZlcnRpY2VzW3NdO1xuICAgICAgICB0ZW1wVmVjM1syXSA9IHZlcnRpY2VzW3MgKyAxXTtcbiAgICAgICAgcG9zaXRpb25zLnNldChpLCB0ZW1wVmVjMyk7XG4gICAgfVxuICAgIHRleHR1cmVDb29yZHM/LnNldCgwLCB2ZXJ0aWNlcyk7XG4gICAgaWYgKG5vcm1hbHMpIHtcbiAgICAgICAgdGVtcFZlYzNbMF0gPSAwO1xuICAgICAgICB0ZW1wVmVjM1sxXSA9IDE7XG4gICAgICAgIHRlbXBWZWMzWzJdID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2ZXJ0ZXhDb3VudDsgKytpKSB7XG4gICAgICAgICAgICBub3JtYWxzLnNldChpLCB0ZW1wVmVjMyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKG1lc2hUb1VwZGF0ZSlcbiAgICAgICAgbWVzaC51cGRhdGUoKTtcbiAgICByZXR1cm4gbWVzaDtcbn1cbi8qKlxuICogR2VuZXJhdGUgbWVzaGVzIGFuZCBjb2xsaXNpb25zIGZvciBYUlBsYW5lcyB1c2luZyBbV2ViWFIgRGV2aWNlIEFQSSAtIFBsYW5lIERldGVjdGlvbl0oaHR0cHM6Ly9pbW1lcnNpdmUtd2ViLmdpdGh1Yi5pby9yZWFsLXdvcmxkLWdlb21ldHJ5L3BsYW5lLWRldGVjdGlvbi5odG1sKS5cbiAqL1xuY2xhc3MgUGxhbmVEZXRlY3Rpb24gZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdwbGFuZS1kZXRlY3Rpb24nO1xuICAgIC8qKlxuICAgICAqIE1hdGVyaWFsIHRvIGFzc2lnbiB0byBjcmVhdGVkIHBsYW5lIG1lc2hlcyBvciBgbnVsbGAgaWYgbWVzaGVzIHNob3VsZCBub3QgYmUgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBwbGFuZU1hdGVyaWFsID0gbnVsbDtcbiAgICAvKipcbiAgICAgKiBDb2xsaXNpb24gbWFzayB0byBhc3NpZ24gdG8gbmV3bHkgY3JlYXRlZCBjb2xsaXNpb24gY29tcG9uZW50cyBvciBhIG5lZ2F0aXZlIHZhbHVlIGlmXG4gICAgICogY29sbGlzaW9uIGNvbXBvbmVudHMgc2hvdWxkIG5vdCBiZSBjcmVhdGVkLlxuICAgICAqL1xuICAgIGNvbGxpc2lvbk1hc2sgPSAtMTtcbiAgICAvKiogTWFwIG9mIGFsbCBwbGFuZXMgYW5kIHRoZWlyIGxhc3QgdXBkYXRlZCB0aW1lc3RhbXBzICovXG4gICAgcGxhbmVzID0gbmV3IE1hcCgpO1xuICAgIC8qKiBPYmplY3RzIGdlbmVyYXRlZCBmb3IgZWFjaCBYUlBsYW5lICovXG4gICAgcGxhbmVPYmplY3RzID0gbmV3IE1hcCgpO1xuICAgIC8qKiBDYWxsZWQgd2hlbiBhIHBsYW5lIHN0YXJ0cyB0cmFja2luZyAqL1xuICAgIG9uUGxhbmVGb3VuZCA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqIENhbGxlZCB3aGVuIGEgcGxhbmUgc3RvcHMgdHJhY2tpbmcgKi9cbiAgICBvblBsYW5lTG9zdCA9IG5ldyBFbWl0dGVyKCk7XG4gICAgdXBkYXRlKCkge1xuICAgICAgICBpZiAoIXRoaXMuZW5naW5lLnhyPy5mcmFtZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBpZiAodGhpcy5lbmdpbmUueHIuZnJhbWUuZGV0ZWN0ZWRQbGFuZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcigncGxhbmUtZGV0ZWN0aW9uOiBXZWJYUiBmZWF0dXJlIG5vdCBhdmFpbGFibGUuJyk7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgY29uc3QgZGV0ZWN0ZWRQbGFuZXMgPSB0aGlzLmVuZ2luZS54ci5mcmFtZS5kZXRlY3RlZFBsYW5lcztcbiAgICAgICAgZm9yIChjb25zdCBbcGxhbmUsIF9dIG9mIHRoaXMucGxhbmVzKSB7XG4gICAgICAgICAgICBpZiAoIWRldGVjdGVkUGxhbmVzLmhhcyhwbGFuZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNwbGFuZUxvc3QocGxhbmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRldGVjdGVkUGxhbmVzLmZvckVhY2goKHBsYW5lKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5wbGFuZXMuaGFzKHBsYW5lKSkge1xuICAgICAgICAgICAgICAgIGlmIChwbGFuZS5sYXN0Q2hhbmdlZFRpbWUgPiB0aGlzLnBsYW5lcy5nZXQocGxhbmUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI3BsYW5lVXBkYXRlKHBsYW5lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNwbGFuZUZvdW5kKHBsYW5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuI3BsYW5lVXBkYXRlUG9zZShwbGFuZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAjcGxhbmVMb3N0KHBsYW5lKSB7XG4gICAgICAgIHRoaXMucGxhbmVzLmRlbGV0ZShwbGFuZSk7XG4gICAgICAgIGNvbnN0IG8gPSB0aGlzLnBsYW5lT2JqZWN0cy5nZXQocGxhbmUpO1xuICAgICAgICB0aGlzLm9uUGxhbmVMb3N0Lm5vdGlmeShwbGFuZSwgbyk7XG4gICAgICAgIC8qIFVzZXIgbWlnaHQgZGVzdHJveSB0aGUgb2JqZWN0ICovXG4gICAgICAgIGlmIChvLm9iamVjdElkID4gMClcbiAgICAgICAgICAgIG8uZGVzdHJveSgpO1xuICAgIH1cbiAgICAjcGxhbmVGb3VuZChwbGFuZSkge1xuICAgICAgICB0aGlzLnBsYW5lcy5zZXQocGxhbmUsIHBsYW5lLmxhc3RDaGFuZ2VkVGltZSk7XG4gICAgICAgIGNvbnN0IG8gPSB0aGlzLmVuZ2luZS5zY2VuZS5hZGRPYmplY3QodGhpcy5vYmplY3QpO1xuICAgICAgICB0aGlzLnBsYW5lT2JqZWN0cy5zZXQocGxhbmUsIG8pO1xuICAgICAgICBpZiAodGhpcy5wbGFuZU1hdGVyaWFsKSB7XG4gICAgICAgICAgICBvLmFkZENvbXBvbmVudChNZXNoQ29tcG9uZW50LCB7XG4gICAgICAgICAgICAgICAgbWVzaDogcGxhbmVNZXNoRnJvbUNvbnRvdXIodGhpcy5lbmdpbmUsIHBsYW5lLnBvbHlnb24pLFxuICAgICAgICAgICAgICAgIG1hdGVyaWFsOiB0aGlzLnBsYW5lTWF0ZXJpYWwsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jb2xsaXNpb25NYXNrID49IDApIHtcbiAgICAgICAgICAgIGV4dGVudHNGcm9tQ29udG91cih0ZW1wVmVjMywgcGxhbmUucG9seWdvbik7XG4gICAgICAgICAgICB0ZW1wVmVjM1sxXSA9IDAuMDI1O1xuICAgICAgICAgICAgby5hZGRDb21wb25lbnQoQ29sbGlzaW9uQ29tcG9uZW50LCB7XG4gICAgICAgICAgICAgICAgZ3JvdXA6IHRoaXMuY29sbGlzaW9uTWFzayxcbiAgICAgICAgICAgICAgICBjb2xsaWRlcjogQ29sbGlkZXIuQm94LFxuICAgICAgICAgICAgICAgIGV4dGVudHM6IHRlbXBWZWMzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vblBsYW5lRm91bmQubm90aWZ5KHBsYW5lLCBvKTtcbiAgICB9XG4gICAgI3BsYW5lVXBkYXRlKHBsYW5lKSB7XG4gICAgICAgIHRoaXMucGxhbmVzLnNldChwbGFuZSwgcGxhbmUubGFzdENoYW5nZWRUaW1lKTtcbiAgICAgICAgY29uc3QgcGxhbmVNZXNoID0gdGhpcy5wbGFuZU9iamVjdHMuZ2V0KHBsYW5lKS5nZXRDb21wb25lbnQoTWVzaENvbXBvbmVudCk7XG4gICAgICAgIGlmICghcGxhbmVNZXNoKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBwbGFuZU1lc2hGcm9tQ29udG91cih0aGlzLmVuZ2luZSwgcGxhbmUucG9seWdvbiwgcGxhbmVNZXNoLm1lc2gpO1xuICAgIH1cbiAgICAjcGxhbmVVcGRhdGVQb3NlKHBsYW5lKSB7XG4gICAgICAgIGNvbnN0IG8gPSB0aGlzLnBsYW5lT2JqZWN0cy5nZXQocGxhbmUpO1xuICAgICAgICBjb25zdCBwb3NlID0gdGhpcy5lbmdpbmUueHIuZnJhbWUuZ2V0UG9zZShwbGFuZS5wbGFuZVNwYWNlLCB0aGlzLmVuZ2luZS54ci5jdXJyZW50UmVmZXJlbmNlU3BhY2UpO1xuICAgICAgICBpZiAoIXBvc2UpIHtcbiAgICAgICAgICAgIG8uYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2V0WFJSaWdpZFRyYW5zZm9ybUxvY2FsKG8sIHBvc2UudHJhbnNmb3JtKTtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5tYXRlcmlhbCgpXG5dLCBQbGFuZURldGVjdGlvbi5wcm90b3R5cGUsIFwicGxhbmVNYXRlcmlhbFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuaW50KClcbl0sIFBsYW5lRGV0ZWN0aW9uLnByb3RvdHlwZSwgXCJjb2xsaXNpb25NYXNrXCIsIHZvaWQgMCk7XG5leHBvcnQgeyBQbGFuZURldGVjdGlvbiB9O1xuIiwgImltcG9ydCB7IENvbXBvbmVudCwgVHlwZSwgR0xURkV4dGVuc2lvbnMgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuaW1wb3J0IHsgdmVjMywgbWF0NCwgcXVhdCwgcXVhdDIgfSBmcm9tICdnbC1tYXRyaXgnO1xuY29uc3QgVlJNX1JPTExfQVhFUyA9IHtcbiAgICBYOiBbMS4wLCAwLjAsIDAuMF0sXG4gICAgWTogWzAuMCwgMS4wLCAwLjBdLFxuICAgIFo6IFswLjAsIDAuMCwgMS4wXSxcbn07XG5jb25zdCBWUk1fQUlNX0FYRVMgPSB7XG4gICAgUG9zaXRpdmVYOiBbMS4wLCAwLjAsIDAuMF0sXG4gICAgTmVnYXRpdmVYOiBbLTEuMCwgMC4wLCAwLjBdLFxuICAgIFBvc2l0aXZlWTogWzAuMCwgMS4wLCAwLjBdLFxuICAgIE5lZ2F0aXZlWTogWzAuMCwgLTEuMCwgMC4wXSxcbiAgICBQb3NpdGl2ZVo6IFswLjAsIDAuMCwgMS4wXSxcbiAgICBOZWdhdGl2ZVo6IFswLjAsIDAuMCwgLTEuMF0sXG59O1xuLyoqXG4gKiBDb21wb25lbnQgZm9yIGxvYWRpbmcgYW5kIGhhbmRsaW5nIFZSTSAxLjAgbW9kZWxzLlxuICpcbiAqIFBvc2luZyBvZiB0aGUgbW9kZWwgc2hvdWxkIGJlIGRvbmUgZXhjbHVzaXZlbHkgYnkgcm90YXRpbmcgdGhlIGJvbmVzLiBUaGVzZSBjYW4gYmVcbiAqIGFjY2Vzc2VkIHVzaW5nIHRoZSBgLmJvbmVzYCBwcm9wZXJ0eSBhbmQgZm9sbG93IHRoZSBWUk0gYm9uZSBuYW1pbmcuIE5vdGUgdGhhdCBub3RcbiAqIGFsbCBWUk0gbW9kZWxzIHdpbGwgaGF2ZSBhbGwgcG9zc2libGUgYm9uZXMuIFRoZSByZXN0IHBvc2UgKFQtcG9zZSkgaXMgY2FwdHVyZWQgaW5cbiAqIHRoZSBgLnJlc3RQb3NlYCBwcm9wZXJ0eS4gUmVzZXR0aW5nIGEgYm9uZSB0byBpdHMgcmVzdCBwb3NlIGNhbiBiZSBkb25lIGFzIGZvbGxvd3M6XG4gKiBgYGBqc1xuICogdnJtQ29tcG9uZW50LmJvbmVzW3ZybUJvbmVOYW1lXS5yb3RhdGlvbkxvY2FsID0gdnJtQ29tcG9uZW50LnJlc3RQb3NlW3ZybUJvbmVOYW1lXTtcbiAqIGBgYFxuICpcbiAqIE1vdmluZyB0aGUgbW9kZWwgdGhyb3VnaCB0aGUgd29ybGQgc2hvdWxkIGJlIGRvbmUgYnkgbW92aW5nIHRoZSBvYmplY3QgdGhpcyBjb21wb25lbnRcbiAqIGlzIGF0dGFjaGVkIHRvLiBJbiBvdGhlciB3b3JkcywgYnkgbW92aW5nIHRoZSByb290IG9mIHRoZSBWUk0gbW9kZWwuIFRoZSBib25lcyBhbmQgYW55XG4gKiBkZXNjZW5kYW50IG9iamVjdHMgc2hvdWxkICpub3QqIGJlIHVzZWQgdG8gbW92ZSB0aGUgVlJNIG1vZGVsLlxuICpcbiAqIFRoZSBjb3JlIGV4dGVuc2lvbiBgVlJNQ192cm1gIGFzIHdlbGwgYXMgdGhlYFZSTUNfc3ByaW5nQm9uZWAgYW5kIGBWUk1DX25vZGVfY29uc3RyYWludGBcbiAqIGV4dGVuc2lvbnMgYXJlIHN1cHBvcnRlZC5cbiAqXG4gKiAqKkxpbWl0YXRpb25zOioqXG4gKiAtIE5vIHN1cHBvcnQgZm9yIGBWUk1DX21hdGVyaWFsX210b29uYFxuICogLSBFeHByZXNzaW9ucyBhcmVuJ3Qgc3VwcG9ydGVkXG4gKiAtIEV4cHJlc3Npb24gYmFzZWQgbG9va0F0IGlzbid0IHN1cHBvcnRlZFxuICogLSBNZXNoIGFubm90YXRpb24gbW9kZSBgYXV0b2AgaXMgbm90IHN1cHBvcnRlZCAoZmlyc3QgcGVyc29uIG1vZGUpXG4gKi9cbmNsYXNzIFZybSBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ3ZybSc7XG4gICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gICAgICAgIC8qKiBVUkwgdG8gYSBWUk0gZmlsZSB0byBsb2FkICovXG4gICAgICAgIHNyYzogeyB0eXBlOiBUeXBlLlN0cmluZyB9LFxuICAgICAgICAvKiogT2JqZWN0IHRoZSBWUk0gaXMgbG9va2luZyBhdCAqL1xuICAgICAgICBsb29rQXRUYXJnZXQ6IHsgdHlwZTogVHlwZS5PYmplY3QgfSxcbiAgICB9O1xuICAgIC8qKiBNZXRhIGluZm9ybWF0aW9uIGFib3V0IHRoZSBWUk0gbW9kZWwgKi9cbiAgICBtZXRhID0gbnVsbDtcbiAgICAvKiogVGhlIGh1bWFub2lkIGJvbmVzIG9mIHRoZSBWUk0gbW9kZWwgKi9cbiAgICBib25lcyA9IHtcbiAgICAgICAgLyogVG9yc28gKi9cbiAgICAgICAgaGlwczogbnVsbCxcbiAgICAgICAgc3BpbmU6IG51bGwsXG4gICAgICAgIGNoZXN0OiBudWxsLFxuICAgICAgICB1cHBlckNoZXN0OiBudWxsLFxuICAgICAgICBuZWNrOiBudWxsLFxuICAgICAgICAvKiBIZWFkICovXG4gICAgICAgIGhlYWQ6IG51bGwsXG4gICAgICAgIGxlZnRFeWU6IG51bGwsXG4gICAgICAgIHJpZ2h0RXllOiBudWxsLFxuICAgICAgICBqYXc6IG51bGwsXG4gICAgICAgIC8qIExlZ3MgKi9cbiAgICAgICAgbGVmdFVwcGVyTGVnOiBudWxsLFxuICAgICAgICBsZWZ0TG93ZXJMZWc6IG51bGwsXG4gICAgICAgIGxlZnRGb290OiBudWxsLFxuICAgICAgICBsZWZ0VG9lczogbnVsbCxcbiAgICAgICAgcmlnaHRVcHBlckxlZzogbnVsbCxcbiAgICAgICAgcmlnaHRMb3dlckxlZzogbnVsbCxcbiAgICAgICAgcmlnaHRGb290OiBudWxsLFxuICAgICAgICByaWdodFRvZXM6IG51bGwsXG4gICAgICAgIC8qIEFybXMgKi9cbiAgICAgICAgbGVmdFNob3VsZGVyOiBudWxsLFxuICAgICAgICBsZWZ0VXBwZXJBcm06IG51bGwsXG4gICAgICAgIGxlZnRMb3dlckFybTogbnVsbCxcbiAgICAgICAgbGVmdEhhbmQ6IG51bGwsXG4gICAgICAgIHJpZ2h0U2hvdWxkZXI6IG51bGwsXG4gICAgICAgIHJpZ2h0VXBwZXJBcm06IG51bGwsXG4gICAgICAgIHJpZ2h0TG93ZXJBcm06IG51bGwsXG4gICAgICAgIHJpZ2h0SGFuZDogbnVsbCxcbiAgICAgICAgLyogRmluZ2VycyAqL1xuICAgICAgICBsZWZ0VGh1bWJNZXRhY2FycGFsOiBudWxsLFxuICAgICAgICBsZWZ0VGh1bWJQcm94aW1hbDogbnVsbCxcbiAgICAgICAgbGVmdFRodW1iRGlzdGFsOiBudWxsLFxuICAgICAgICBsZWZ0SW5kZXhQcm94aW1hbDogbnVsbCxcbiAgICAgICAgbGVmdEluZGV4SW50ZXJtZWRpYXRlOiBudWxsLFxuICAgICAgICBsZWZ0SW5kZXhEaXN0YWw6IG51bGwsXG4gICAgICAgIGxlZnRNaWRkbGVQcm94aW1hbDogbnVsbCxcbiAgICAgICAgbGVmdE1pZGRsZUludGVybWVkaWF0ZTogbnVsbCxcbiAgICAgICAgbGVmdE1pZGRsZURpc3RhbDogbnVsbCxcbiAgICAgICAgbGVmdFJpbmdQcm94aW1hbDogbnVsbCxcbiAgICAgICAgbGVmdFJpbmdJbnRlcm1lZGlhdGU6IG51bGwsXG4gICAgICAgIGxlZnRSaW5nRGlzdGFsOiBudWxsLFxuICAgICAgICBsZWZ0TGl0dGxlUHJveGltYWw6IG51bGwsXG4gICAgICAgIGxlZnRMaXR0bGVJbnRlcm1lZGlhdGU6IG51bGwsXG4gICAgICAgIGxlZnRMaXR0bGVEaXN0YWw6IG51bGwsXG4gICAgICAgIHJpZ2h0VGh1bWJNZXRhY2FycGFsOiBudWxsLFxuICAgICAgICByaWdodFRodW1iUHJveGltYWw6IG51bGwsXG4gICAgICAgIHJpZ2h0VGh1bWJEaXN0YWw6IG51bGwsXG4gICAgICAgIHJpZ2h0SW5kZXhQcm94aW1hbDogbnVsbCxcbiAgICAgICAgcmlnaHRJbmRleEludGVybWVkaWF0ZTogbnVsbCxcbiAgICAgICAgcmlnaHRJbmRleERpc3RhbDogbnVsbCxcbiAgICAgICAgcmlnaHRNaWRkbGVQcm94aW1hbDogbnVsbCxcbiAgICAgICAgcmlnaHRNaWRkbGVJbnRlcm1lZGlhdGU6IG51bGwsXG4gICAgICAgIHJpZ2h0TWlkZGxlRGlzdGFsOiBudWxsLFxuICAgICAgICByaWdodFJpbmdQcm94aW1hbDogbnVsbCxcbiAgICAgICAgcmlnaHRSaW5nSW50ZXJtZWRpYXRlOiBudWxsLFxuICAgICAgICByaWdodFJpbmdEaXN0YWw6IG51bGwsXG4gICAgICAgIHJpZ2h0TGl0dGxlUHJveGltYWw6IG51bGwsXG4gICAgICAgIHJpZ2h0TGl0dGxlSW50ZXJtZWRpYXRlOiBudWxsLFxuICAgICAgICByaWdodExpdHRsZURpc3RhbDogbnVsbCxcbiAgICB9O1xuICAgIC8qKiBSb3RhdGlvbnMgb2YgdGhlIGJvbmVzIGluIHRoZSByZXN0IHBvc2UgKFQtcG9zZSkgKi9cbiAgICByZXN0UG9zZSA9IHt9O1xuICAgIC8qIEFsbCBub2RlIGNvbnN0cmFpbnRzLCBvcmRlcmVkIHRvIGRlYWwgd2l0aCBkZXBlbmRlbmNpZXMgKi9cbiAgICBfbm9kZUNvbnN0cmFpbnRzID0gW107XG4gICAgLyogVlJNQ19zcHJpbmdCb25lIGNoYWlucyAqL1xuICAgIF9zcHJpbmdDaGFpbnMgPSBbXTtcbiAgICAvKiBTcGhlcmljYWwgY29sbGlkZXJzIGZvciBzcHJpbmcgYm9uZXMgKi9cbiAgICBfc3BoZXJlQ29sbGlkZXJzID0gW107XG4gICAgLyogQ2Fwc3VsZSBzaGFwZWQgY29sbGlkZXJzIGZvciBzcHJpbmcgYm9uZXMgKi9cbiAgICBfY2Fwc3VsZUNvbGxpZGVycyA9IFtdO1xuICAgIC8qIEluZGljYXRlcyB3aGljaCBtZXNoZXMgYXJlIHJlbmRlcmVkIGluIGZpcnN0L3RoaXJkIHBlcnNvbiB2aWV3cyAqL1xuICAgIF9maXJzdFBlcnNvbkFubm90YXRpb25zID0gW107XG4gICAgLyogQ29udGFpbnMgZGV0YWlscyBmb3IgKGJvbmUgdHlwZSkgbG9va0F0IGJlaGF2aW91ciAqL1xuICAgIF9sb29rQXQgPSBudWxsO1xuICAgIC8qIFdoZXRoZXIgb3Igbm90IHRoZSBWUk0gY29tcG9uZW50IGhhcyBiZWVuIGluaXRpYWxpemVkIHdpdGggYGluaXRpYWxpemVWcm1gICovXG4gICAgX2luaXRpYWxpemVkID0gZmFsc2U7XG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5fdGVtcFYzID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgdGhpcy5fdGVtcFYzQSA9IHZlYzMuY3JlYXRlKCk7XG4gICAgICAgIHRoaXMuX3RlbXBWM0IgPSB2ZWMzLmNyZWF0ZSgpO1xuICAgICAgICB0aGlzLl90ZW1wUXVhdCA9IHF1YXQuY3JlYXRlKCk7XG4gICAgICAgIHRoaXMuX3RlbXBRdWF0QSA9IHF1YXQuY3JlYXRlKCk7XG4gICAgICAgIHRoaXMuX3RlbXBRdWF0QiA9IHF1YXQuY3JlYXRlKCk7XG4gICAgICAgIHRoaXMuX3RlbXBNYXQ0QSA9IG1hdDQuY3JlYXRlKCk7XG4gICAgICAgIHRoaXMuX3RlbXBRdWF0MiA9IHF1YXQyLmNyZWF0ZSgpO1xuICAgICAgICB0aGlzLl90YWlsVG9TaGFwZSA9IHZlYzMuY3JlYXRlKCk7XG4gICAgICAgIHRoaXMuX2hlYWRUb1RhaWwgPSB2ZWMzLmNyZWF0ZSgpO1xuICAgICAgICB0aGlzLl9pbmVydGlhID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgdGhpcy5fc3RpZmZuZXNzID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgdGhpcy5fZXh0ZXJuYWwgPSB2ZWMzLmNyZWF0ZSgpO1xuICAgICAgICB0aGlzLl9yaWdodFZlY3RvciA9IHZlYzMuc2V0KHZlYzMuY3JlYXRlKCksIDEsIDAsIDApO1xuICAgICAgICB0aGlzLl91cFZlY3RvciA9IHZlYzMuc2V0KHZlYzMuY3JlYXRlKCksIDAsIDEsIDApO1xuICAgICAgICB0aGlzLl9mb3J3YXJkVmVjdG9yID0gdmVjMy5zZXQodmVjMy5jcmVhdGUoKSwgMCwgMCwgMSk7XG4gICAgICAgIHRoaXMuX2lkZW50aXR5UXVhdCA9IHF1YXQuaWRlbnRpdHkocXVhdC5jcmVhdGUoKSk7XG4gICAgICAgIHRoaXMuX3JhZDJkZWcgPSAxODAuMCAvIE1hdGguUEk7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICBpZiAoIXRoaXMuc3JjKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCd2cm06IHNyYyBwcm9wZXJ0eSBub3Qgc2V0Jyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbmdpbmUuc2NlbmVcbiAgICAgICAgICAgIC5hcHBlbmQodGhpcy5zcmMsIHsgbG9hZEdsdGZFeHRlbnNpb25zOiB0cnVlIH0pXG4gICAgICAgICAgICAudGhlbigoeyByb290LCBleHRlbnNpb25zIH0pID0+IHtcbiAgICAgICAgICAgIHJvb3QuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IChjaGlsZC5wYXJlbnQgPSB0aGlzLm9iamVjdCkpO1xuICAgICAgICAgICAgdGhpcy5faW5pdGlhbGl6ZVZybShleHRlbnNpb25zKTtcbiAgICAgICAgICAgIHJvb3QuZGVzdHJveSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIHRoZSBWUk0gZ2xURiBleHRlbnNpb25zIGFuZCBpbml0aWFsaXplcyB0aGUgdnJtIGNvbXBvbmVudC5cbiAgICAgKiBAcGFyYW0ge0dMVEZFeHRlbnNpb25zfSBleHRlbnNpb25zIFRoZSBnbFRGIGV4dGVuc2lvbnMgZm9yIHRoZSBWUk0gbW9kZWxcbiAgICAgKi9cbiAgICBfaW5pdGlhbGl6ZVZybShleHRlbnNpb25zKSB7XG4gICAgICAgIGlmICh0aGlzLl9pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ1ZSTSBjb21wb25lbnQgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IFZSTUNfdnJtID0gZXh0ZW5zaW9ucy5yb290WydWUk1DX3ZybSddO1xuICAgICAgICBpZiAoIVZSTUNfdnJtKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcignTWlzc2luZyBWUk0gZXh0ZW5zaW9ucycpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChWUk1DX3ZybS5zcGVjVmVyc2lvbiAhPT0gJzEuMCcpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBVbnN1cHBvcnRlZCBWUk0gdmVyc2lvbiwgb25seSAxLjAgaXMgc3VwcG9ydGVkLCBidXQgZW5jb3VudGVyZWQgJyR7VlJNQ192cm0uc3BlY1ZlcnNpb259J2ApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWV0YSA9IFZSTUNfdnJtLm1ldGE7XG4gICAgICAgIHRoaXMuX3BhcnNlSHVtYW5vaWQoVlJNQ192cm0uaHVtYW5vaWQsIGV4dGVuc2lvbnMpO1xuICAgICAgICBpZiAoVlJNQ192cm0uZmlyc3RQZXJzb24pIHtcbiAgICAgICAgICAgIHRoaXMuX3BhcnNlRmlyc3RQZXJzb24oVlJNQ192cm0uZmlyc3RQZXJzb24sIGV4dGVuc2lvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChWUk1DX3ZybS5sb29rQXQpIHtcbiAgICAgICAgICAgIHRoaXMuX3BhcnNlTG9va0F0KFZSTUNfdnJtLmxvb2tBdCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZmluZEFuZFBhcnNlTm9kZUNvbnN0cmFpbnRzKGV4dGVuc2lvbnMpO1xuICAgICAgICBjb25zdCBzcHJpbmdCb25lID0gZXh0ZW5zaW9ucy5yb290WydWUk1DX3NwcmluZ0JvbmUnXTtcbiAgICAgICAgaWYgKHNwcmluZ0JvbmUpIHtcbiAgICAgICAgICAgIHRoaXMuX3BhcnNlQW5kSW5pdGlhbGl6ZVNwcmluZ0JvbmVzKHNwcmluZ0JvbmUsIGV4dGVuc2lvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICB9XG4gICAgX3BhcnNlSHVtYW5vaWQoaHVtYW5vaWQsIGV4dGVuc2lvbnMpIHtcbiAgICAgICAgZm9yIChjb25zdCBib25lTmFtZSBpbiBodW1hbm9pZC5odW1hbkJvbmVzKSB7XG4gICAgICAgICAgICBpZiAoIShib25lTmFtZSBpbiB0aGlzLmJvbmVzKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgVW5yZWNvZ25pemVkIGJvbmUgJyR7Ym9uZU5hbWV9J2ApO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IGh1bWFub2lkLmh1bWFuQm9uZXNbYm9uZU5hbWVdLm5vZGU7XG4gICAgICAgICAgICBjb25zdCBvYmplY3RJZCA9IGV4dGVuc2lvbnMuaWRNYXBwaW5nW25vZGVdO1xuICAgICAgICAgICAgdGhpcy5ib25lc1tib25lTmFtZV0gPSB0aGlzLmVuZ2luZS53cmFwT2JqZWN0KG9iamVjdElkKTtcbiAgICAgICAgICAgIHRoaXMucmVzdFBvc2VbYm9uZU5hbWVdID0gcXVhdC5jb3B5KHF1YXQuY3JlYXRlKCksIHRoaXMuYm9uZXNbYm9uZU5hbWVdLnJvdGF0aW9uTG9jYWwpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9wYXJzZUZpcnN0UGVyc29uKGZpcnN0UGVyc29uLCBleHRlbnNpb25zKSB7XG4gICAgICAgIGZvciAoY29uc3QgbWVzaEFubm90YXRpb24gb2YgZmlyc3RQZXJzb24ubWVzaEFubm90YXRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBhbm5vdGF0aW9uID0ge1xuICAgICAgICAgICAgICAgIG5vZGU6IHRoaXMuZW5naW5lLndyYXBPYmplY3QoZXh0ZW5zaW9ucy5pZE1hcHBpbmdbbWVzaEFubm90YXRpb24ubm9kZV0pLFxuICAgICAgICAgICAgICAgIGZpcnN0UGVyc29uOiB0cnVlLFxuICAgICAgICAgICAgICAgIHRoaXJkUGVyc29uOiB0cnVlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHN3aXRjaCAobWVzaEFubm90YXRpb24udHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2ZpcnN0UGVyc29uT25seSc6XG4gICAgICAgICAgICAgICAgICAgIGFubm90YXRpb24udGhpcmRQZXJzb24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndGhpcmRQZXJzb25Pbmx5JzpcbiAgICAgICAgICAgICAgICAgICAgYW5ub3RhdGlvbi5maXJzdFBlcnNvbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdib3RoJzpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYXV0byc6XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkZpcnN0IHBlcnNvbiBtZXNoIGFubm90YXRpb24gdHlwZSAnYXV0bycgaXMgbm90IHN1cHBvcnRlZCwgdHJlYXRpbmcgYXMgJ2JvdGgnIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgSW52YWxpZCBtZXNoIGFubm90YXRpb24gdHlwZSAnJHttZXNoQW5ub3RhdGlvbi50eXBlfSdgKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9maXJzdFBlcnNvbkFubm90YXRpb25zLnB1c2goYW5ub3RhdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3BhcnNlTG9va0F0KGxvb2tBdCkge1xuICAgICAgICBpZiAobG9va0F0LnR5cGUgIT09ICdib25lJykge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbnN1cHBvcnRlZCBsb29rQXQgdHlwZSAnJHtsb29rQXQudHlwZX0nLCBvbmx5ICdib25lJyBpcyBzdXBwb3J0ZWRgKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZVJhbmdlTWFwID0gKHJhbmdlTWFwKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlucHV0TWF4VmFsdWU6IHJhbmdlTWFwLmlucHV0TWF4VmFsdWUsXG4gICAgICAgICAgICAgICAgb3V0cHV0U2NhbGU6IHJhbmdlTWFwLm91dHB1dFNjYWxlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fbG9va0F0ID0ge1xuICAgICAgICAgICAgb2Zmc2V0RnJvbUhlYWRCb25lOiBsb29rQXQub2Zmc2V0RnJvbUhlYWRCb25lIHx8IFswLCAwLCAwXSxcbiAgICAgICAgICAgIGhvcml6b250YWxJbm5lcjogcGFyc2VSYW5nZU1hcChsb29rQXQucmFuZ2VNYXBIb3Jpem9udGFsSW5uZXIpLFxuICAgICAgICAgICAgaG9yaXpvbnRhbE91dGVyOiBwYXJzZVJhbmdlTWFwKGxvb2tBdC5yYW5nZU1hcEhvcml6b250YWxPdXRlciksXG4gICAgICAgICAgICB2ZXJ0aWNhbERvd246IHBhcnNlUmFuZ2VNYXAobG9va0F0LnJhbmdlTWFwVmVydGljYWxEb3duKSxcbiAgICAgICAgICAgIHZlcnRpY2FsVXA6IHBhcnNlUmFuZ2VNYXAobG9va0F0LnJhbmdlTWFwVmVydGljYWxVcCksXG4gICAgICAgIH07XG4gICAgfVxuICAgIF9maW5kQW5kUGFyc2VOb2RlQ29uc3RyYWludHMoZXh0ZW5zaW9ucykge1xuICAgICAgICBjb25zdCB0cmF2ZXJzZSA9IChvYmplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGVFeHRlbnNpb25zID0gZXh0ZW5zaW9ucy5ub2RlW29iamVjdC5vYmplY3RJZF07XG4gICAgICAgICAgICBpZiAobm9kZUV4dGVuc2lvbnMgJiYgJ1ZSTUNfbm9kZV9jb25zdHJhaW50JyBpbiBub2RlRXh0ZW5zaW9ucykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vZGVDb25zdHJhaW50RXh0ZW5zaW9uID0gbm9kZUV4dGVuc2lvbnNbJ1ZSTUNfbm9kZV9jb25zdHJhaW50J107XG4gICAgICAgICAgICAgICAgY29uc3QgY29uc3RyYWludCA9IG5vZGVDb25zdHJhaW50RXh0ZW5zaW9uLmNvbnN0cmFpbnQ7XG4gICAgICAgICAgICAgICAgbGV0IHR5cGUsIGF4aXM7XG4gICAgICAgICAgICAgICAgaWYgKCdyb2xsJyBpbiBjb25zdHJhaW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSAncm9sbCc7XG4gICAgICAgICAgICAgICAgICAgIGF4aXMgPSBWUk1fUk9MTF9BWEVTW2NvbnN0cmFpbnQucm9sbC5yb2xsQXhpc107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCdhaW0nIGluIGNvbnN0cmFpbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9ICdhaW0nO1xuICAgICAgICAgICAgICAgICAgICBheGlzID0gVlJNX0FJTV9BWEVTW2NvbnN0cmFpbnQuYWltLmFpbUF4aXNdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgncm90YXRpb24nIGluIGNvbnN0cmFpbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9ICdyb3RhdGlvbic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZSA9IHRoaXMuZW5naW5lLndyYXBPYmplY3QoZXh0ZW5zaW9ucy5pZE1hcHBpbmdbY29uc3RyYWludFt0eXBlXS5zb3VyY2VdKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbm9kZUNvbnN0cmFpbnRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uOiBvYmplY3QsXG4gICAgICAgICAgICAgICAgICAgICAgICBheGlzOiBheGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiBjb25zdHJhaW50W3R5cGVdLndlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJlc3QgcG9zZSAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb25SZXN0TG9jYWxSb3RhdGlvbjogcXVhdC5jb3B5KHF1YXQuY3JlYXRlKCksIG9iamVjdC5yb3RhdGlvbkxvY2FsKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZVJlc3RMb2NhbFJvdGF0aW9uOiBxdWF0LmNvcHkocXVhdC5jcmVhdGUoKSwgc291cmNlLnJvdGF0aW9uTG9jYWwpLFxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlUmVzdExvY2FsUm90YXRpb25JbnY6IHF1YXQuaW52ZXJ0KHF1YXQuY3JlYXRlKCksIHNvdXJjZS5yb3RhdGlvbkxvY2FsKSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1VucmVjb2duaXplZCBvciBpbnZhbGlkIFZSTUNfbm9kZV9jb25zdHJhaW50LCBpZ25vcmluZyBpdCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgY2hpbGQgb2Ygb2JqZWN0LmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgdHJhdmVyc2UoY2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0cmF2ZXJzZSh0aGlzLm9iamVjdCk7XG4gICAgfVxuICAgIF9wYXJzZUFuZEluaXRpYWxpemVTcHJpbmdCb25lcyhzcHJpbmdCb25lLCBleHRlbnNpb25zKSB7XG4gICAgICAgIGNvbnN0IGNvbGxpZGVycyA9IChzcHJpbmdCb25lLmNvbGxpZGVycyB8fCBbXSkubWFwKChjb2xsaWRlciwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2hhcGVUeXBlID0gJ2NhcHN1bGUnIGluIGNvbGxpZGVyLnNoYXBlID8gJ2NhcHN1bGUnIDogJ3NwaGVyZSc7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlkOiBpLFxuICAgICAgICAgICAgICAgIG9iamVjdDogdGhpcy5lbmdpbmUud3JhcE9iamVjdChleHRlbnNpb25zLmlkTWFwcGluZ1tjb2xsaWRlci5ub2RlXSksXG4gICAgICAgICAgICAgICAgc2hhcGU6IHtcbiAgICAgICAgICAgICAgICAgICAgaXNDYXBzdWxlOiBzaGFwZVR5cGUgPT09ICdjYXBzdWxlJyxcbiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiBjb2xsaWRlci5zaGFwZVtzaGFwZVR5cGVdLnJhZGl1cyxcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiBjb2xsaWRlci5zaGFwZVtzaGFwZVR5cGVdLm9mZnNldCxcbiAgICAgICAgICAgICAgICAgICAgdGFpbDogY29sbGlkZXIuc2hhcGVbc2hhcGVUeXBlXS50YWlsLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2FjaGU6IHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZDogdmVjMy5jcmVhdGUoKSxcbiAgICAgICAgICAgICAgICAgICAgdGFpbDogdmVjMy5jcmVhdGUoKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3NwaGVyZUNvbGxpZGVycyA9IGNvbGxpZGVycy5maWx0ZXIoKGMpID0+ICFjLnNoYXBlLmlzQ2Fwc3VsZSk7XG4gICAgICAgIHRoaXMuX2NhcHN1bGVDb2xsaWRlcnMgPSBjb2xsaWRlcnMuZmlsdGVyKChjKSA9PiBjLnNoYXBlLmlzQ2Fwc3VsZSk7XG4gICAgICAgIGNvbnN0IGNvbGxpZGVyR3JvdXBzID0gKHNwcmluZ0JvbmUuY29sbGlkZXJHcm91cHMgfHwgW10pLm1hcCgoZ3JvdXApID0+ICh7XG4gICAgICAgICAgICBuYW1lOiBncm91cC5uYW1lLFxuICAgICAgICAgICAgY29sbGlkZXJzOiBncm91cC5jb2xsaWRlcnMubWFwKChjKSA9PiBjb2xsaWRlcnNbY10pLFxuICAgICAgICB9KSk7XG4gICAgICAgIGZvciAoY29uc3Qgc3ByaW5nIG9mIHNwcmluZ0JvbmUuc3ByaW5ncykge1xuICAgICAgICAgICAgY29uc3Qgam9pbnRzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGpvaW50IG9mIHNwcmluZy5qb2ludHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzcHJpbmdKb2ludCA9IHtcbiAgICAgICAgICAgICAgICAgICAgaGl0UmFkaXVzOiAwLjAsXG4gICAgICAgICAgICAgICAgICAgIHN0aWZmbmVzczogMS4wLFxuICAgICAgICAgICAgICAgICAgICBncmF2aXR5UG93ZXI6IDAuMCxcbiAgICAgICAgICAgICAgICAgICAgZ3Jhdml0eURpcjogWzAuMCwgLTEuMCwgMC4wXSxcbiAgICAgICAgICAgICAgICAgICAgZHJhZ0ZvcmNlOiAwLjUsXG4gICAgICAgICAgICAgICAgICAgIG5vZGU6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlOiBudWxsLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihzcHJpbmdKb2ludCwgam9pbnQpO1xuICAgICAgICAgICAgICAgIHNwcmluZ0pvaW50Lm5vZGUgPSB0aGlzLmVuZ2luZS53cmFwT2JqZWN0KGV4dGVuc2lvbnMuaWRNYXBwaW5nW3NwcmluZ0pvaW50Lm5vZGVdKTtcbiAgICAgICAgICAgICAgICBqb2ludHMucHVzaChzcHJpbmdKb2ludCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzcHJpbmdDaGFpbkNvbGxpZGVycyA9IChzcHJpbmcuY29sbGlkZXJHcm91cHMgfHwgW10pLmZsYXRNYXAoKGNnKSA9PiBjb2xsaWRlckdyb3Vwc1tjZ10uY29sbGlkZXJzKTtcbiAgICAgICAgICAgIHRoaXMuX3NwcmluZ0NoYWlucy5wdXNoKHtcbiAgICAgICAgICAgICAgICBuYW1lOiBzcHJpbmcubmFtZSxcbiAgICAgICAgICAgICAgICBjZW50ZXI6IHNwcmluZy5jZW50ZXJcbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmVuZ2luZS53cmFwT2JqZWN0KGV4dGVuc2lvbnMuaWRNYXBwaW5nW3NwcmluZy5jZW50ZXJdKVxuICAgICAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgICAgICAgam9pbnRzLFxuICAgICAgICAgICAgICAgIHNwaGVyZUNvbGxpZGVyczogc3ByaW5nQ2hhaW5Db2xsaWRlcnMuZmlsdGVyKChjKSA9PiAhYy5zaGFwZS5pc0NhcHN1bGUpLFxuICAgICAgICAgICAgICAgIGNhcHN1bGVDb2xsaWRlcnM6IHNwcmluZ0NoYWluQ29sbGlkZXJzLmZpbHRlcigoYykgPT4gYy5zaGFwZS5pc0NhcHN1bGUpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLyogSW5pdGlhbGl6ZSBzcHJpbmcgYm9uZSBqb2ludCBzdGF0ZSAqL1xuICAgICAgICBmb3IgKGNvbnN0IHNwcmluZ0NoYWluIG9mIHRoaXMuX3NwcmluZ0NoYWlucykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcHJpbmdDaGFpbi5qb2ludHMubGVuZ3RoIC0gMTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3ByaW5nQm9uZUpvaW50ID0gc3ByaW5nQ2hhaW4uam9pbnRzW2ldO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkU3ByaW5nQm9uZUpvaW50ID0gc3ByaW5nQ2hhaW4uam9pbnRzW2kgKyAxXTtcbiAgICAgICAgICAgICAgICBjb25zdCBzcHJpbmdCb25lUG9zaXRpb24gPSBzcHJpbmdCb25lSm9pbnQubm9kZS5nZXRUcmFuc2xhdGlvbldvcmxkKHZlYzMuY3JlYXRlKCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkU3ByaW5nQm9uZVBvc2l0aW9uID0gY2hpbGRTcHJpbmdCb25lSm9pbnQubm9kZS5nZXRUcmFuc2xhdGlvbldvcmxkKHZlYzMuY3JlYXRlKCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJvbmVEaXJlY3Rpb24gPSB2ZWMzLnN1YnRyYWN0KHRoaXMuX3RlbXBWM0EsIHNwcmluZ0JvbmVQb3NpdGlvbiwgY2hpbGRTcHJpbmdCb25lUG9zaXRpb24pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRlID0ge1xuICAgICAgICAgICAgICAgICAgICBwcmV2VGFpbDogY2hpbGRTcHJpbmdCb25lUG9zaXRpb24sXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUYWlsOiB2ZWMzLmNvcHkodmVjMy5jcmVhdGUoKSwgY2hpbGRTcHJpbmdCb25lUG9zaXRpb24pLFxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsTG9jYWxSb3RhdGlvbjogcXVhdC5jb3B5KHF1YXQuY3JlYXRlKCksIHNwcmluZ0JvbmVKb2ludC5ub2RlLnJvdGF0aW9uTG9jYWwpLFxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsTG9jYWxUcmFuc2Zvcm1JbnZlcnQ6IHF1YXQyLmludmVydChxdWF0Mi5jcmVhdGUoKSwgc3ByaW5nQm9uZUpvaW50Lm5vZGUudHJhbnNmb3JtTG9jYWwpLFxuICAgICAgICAgICAgICAgICAgICBib25lQXhpczogdmVjMy5ub3JtYWxpemUodmVjMy5jcmVhdGUoKSwgY2hpbGRTcHJpbmdCb25lSm9pbnQubm9kZS5nZXRUcmFuc2xhdGlvbkxvY2FsKHRoaXMuX3RlbXBWMykpLFxuICAgICAgICAgICAgICAgICAgICAvKiBFbnN1cmUgYm9uZSBsZW5ndGggaXMgYXQgbGVhc3QgMWNtIHRvIGF2b2lkIGppdHRlcnkgYmVoYXZpb3VyIGZyb20gemVyby1sZW5ndGggYm9uZXMgKi9cbiAgICAgICAgICAgICAgICAgICAgYm9uZUxlbmd0aDogTWF0aC5tYXgoMC4wMSwgdmVjMy5sZW5ndGgoYm9uZURpcmVjdGlvbikpLFxuICAgICAgICAgICAgICAgICAgICAvKiBUYWlsIHBvc2l0aW9ucyBpbiBjZW50ZXIgc3BhY2UsIGlmIG5lZWRlZCAqL1xuICAgICAgICAgICAgICAgICAgICBwcmV2VGFpbENlbnRlcjogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFRhaWxDZW50ZXI6IG51bGwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoc3ByaW5nQ2hhaW4uY2VudGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLnByZXZUYWlsQ2VudGVyID0gc3ByaW5nQ2hhaW4uY2VudGVyLnRyYW5zZm9ybVBvaW50SW52ZXJzZVdvcmxkKHZlYzMuY3JlYXRlKCksIGNoaWxkU3ByaW5nQm9uZVBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuY3VycmVudFRhaWxDZW50ZXIgPSB2ZWMzLmNvcHkodmVjMy5jcmVhdGUoKSwgY2hpbGRTcHJpbmdCb25lUG9zaXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzcHJpbmdCb25lSm9pbnQuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGUoZHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8qIDEuIFJlc29sdmUgaHVtYW5vaWQgYm9uZXMgKHBlcmZvcm1lZCBieSB1c2VyKSAqL1xuICAgICAgICAvKiAyLiBSZXNvbHZlIExvb2tBdCAoYm9uZSB0eXBlKSBhcyB0aGUgcG9zaXRpb24gb2YgdGhlIGhlYWQgaXMgZGV0ZXJtaW5lZCAqL1xuICAgICAgICB0aGlzLl9yZXNvbHZlTG9va0F0KCk7XG4gICAgICAgIC8qIDMuIEV4cHJlc3Npb24gdXBkYXRlIChUT0RPKSAqL1xuICAgICAgICAvKiA0LiBBcHBseSBFeHByZXNzaW9uIChUT0RPKSAqL1xuICAgICAgICAvKiA1LiBSZXNvbHZlIGNvbnN0cmFpbnRzICovXG4gICAgICAgIHRoaXMuX3Jlc29sdmVDb25zdHJhaW50cygpO1xuICAgICAgICAvKiA2LiBSZXNvbHZlIFNwcmluZyBCb25lICovXG4gICAgICAgIHRoaXMuX3VwZGF0ZVNwcmluZ0JvbmVzKGR0KTtcbiAgICB9XG4gICAgX3JhbmdlTWFwKHJhbmdlTWFwLCBpbnB1dCkge1xuICAgICAgICBjb25zdCBtYXhWYWx1ZSA9IHJhbmdlTWFwLmlucHV0TWF4VmFsdWU7XG4gICAgICAgIGNvbnN0IG91dHB1dFNjYWxlID0gcmFuZ2VNYXAub3V0cHV0U2NhbGU7XG4gICAgICAgIHJldHVybiAoTWF0aC5taW4oaW5wdXQsIG1heFZhbHVlKSAvIG1heFZhbHVlKSAqIG91dHB1dFNjYWxlO1xuICAgIH1cbiAgICBfcmVzb2x2ZUxvb2tBdCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9sb29rQXQgfHwgIXRoaXMubG9va0F0VGFyZ2V0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9va0F0U291cmNlID0gdGhpcy5ib25lcy5oZWFkLnRyYW5zZm9ybVBvaW50V29ybGQodGhpcy5fdGVtcFYzQSwgdGhpcy5fbG9va0F0Lm9mZnNldEZyb21IZWFkQm9uZSk7XG4gICAgICAgIGNvbnN0IGxvb2tBdFRhcmdldCA9IHRoaXMubG9va0F0VGFyZ2V0LmdldFRyYW5zbGF0aW9uV29ybGQodGhpcy5fdGVtcFYzQik7XG4gICAgICAgIGNvbnN0IGxvb2tBdERpcmVjdGlvbiA9IHZlYzMuc3ViKHRoaXMuX3RlbXBWM0EsIGxvb2tBdFRhcmdldCwgbG9va0F0U291cmNlKTtcbiAgICAgICAgdmVjMy5ub3JtYWxpemUobG9va0F0RGlyZWN0aW9uLCBsb29rQXREaXJlY3Rpb24pO1xuICAgICAgICAvKiBDb252ZXJ0IHRoZSBkaXJlY3Rpb24gaW50byBMb29rQXQgc3BhY2UgKi9cbiAgICAgICAgdGhpcy5ib25lcy5oZWFkLnBhcmVudC50cmFuc2Zvcm1WZWN0b3JJbnZlcnNlV29ybGQobG9va0F0RGlyZWN0aW9uKTtcbiAgICAgICAgY29uc3QgeiA9IHZlYzMuZG90KGxvb2tBdERpcmVjdGlvbiwgdGhpcy5fZm9yd2FyZFZlY3Rvcik7XG4gICAgICAgIGNvbnN0IHggPSB2ZWMzLmRvdChsb29rQXREaXJlY3Rpb24sIHRoaXMuX3JpZ2h0VmVjdG9yKTtcbiAgICAgICAgY29uc3QgeWF3ID0gTWF0aC5hdGFuMih4LCB6KSAqIHRoaXMuX3JhZDJkZWc7XG4gICAgICAgIGNvbnN0IHh6ID0gTWF0aC5zcXJ0KHggKiB4ICsgeiAqIHopO1xuICAgICAgICBjb25zdCB5ID0gdmVjMy5kb3QobG9va0F0RGlyZWN0aW9uLCB0aGlzLl91cFZlY3Rvcik7XG4gICAgICAgIGxldCBwaXRjaCA9IE1hdGguYXRhbjIoLXksIHh6KSAqIHRoaXMuX3JhZDJkZWc7XG4gICAgICAgIC8qIExpbWl0IHBpdGNoICovXG4gICAgICAgIGlmIChwaXRjaCA+IDApIHtcbiAgICAgICAgICAgIHBpdGNoID0gdGhpcy5fcmFuZ2VNYXAodGhpcy5fbG9va0F0LnZlcnRpY2FsRG93biwgcGl0Y2gpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGl0Y2ggPSAtdGhpcy5fcmFuZ2VNYXAodGhpcy5fbG9va0F0LnZlcnRpY2FsVXAsIC1waXRjaCk7XG4gICAgICAgIH1cbiAgICAgICAgLyogTGVmdCBleWUgKGxpbWl0IHlhdykgKi9cbiAgICAgICAgaWYgKHRoaXMuYm9uZXMubGVmdEV5ZSkge1xuICAgICAgICAgICAgbGV0IHlhd0xlZnQgPSB5YXc7XG4gICAgICAgICAgICBpZiAoeWF3TGVmdCA+IDApIHtcbiAgICAgICAgICAgICAgICB5YXdMZWZ0ID0gdGhpcy5fcmFuZ2VNYXAodGhpcy5fbG9va0F0Lmhvcml6b250YWxJbm5lciwgeWF3TGVmdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB5YXdMZWZ0ID0gLXRoaXMuX3JhbmdlTWFwKHRoaXMuX2xvb2tBdC5ob3Jpem9udGFsT3V0ZXIsIC15YXdMZWZ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGV5ZVJvdGF0aW9uID0gcXVhdC5mcm9tRXVsZXIodGhpcy5fdGVtcFF1YXRBLCBwaXRjaCwgeWF3TGVmdCwgMCk7XG4gICAgICAgICAgICB0aGlzLmJvbmVzLmxlZnRFeWUucm90YXRpb25Mb2NhbCA9IHF1YXQubXVsdGlwbHkoZXllUm90YXRpb24sIHRoaXMucmVzdFBvc2UubGVmdEV5ZSwgZXllUm90YXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIC8qIFJpZ2h0IGV5ZSAobGltaXQgeWF3KSAqL1xuICAgICAgICBpZiAodGhpcy5ib25lcy5yaWdodEV5ZSkge1xuICAgICAgICAgICAgbGV0IHlhd1JpZ2h0ID0geWF3O1xuICAgICAgICAgICAgaWYgKHlhd1JpZ2h0ID4gMCkge1xuICAgICAgICAgICAgICAgIHlhd1JpZ2h0ID0gdGhpcy5fcmFuZ2VNYXAodGhpcy5fbG9va0F0Lmhvcml6b250YWxPdXRlciwgeWF3UmlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgeWF3UmlnaHQgPSAtdGhpcy5fcmFuZ2VNYXAodGhpcy5fbG9va0F0Lmhvcml6b250YWxJbm5lciwgLXlhd1JpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGV5ZVJvdGF0aW9uID0gcXVhdC5mcm9tRXVsZXIodGhpcy5fdGVtcFF1YXRBLCBwaXRjaCwgeWF3UmlnaHQsIDApO1xuICAgICAgICAgICAgdGhpcy5ib25lcy5yaWdodEV5ZS5yb3RhdGlvbkxvY2FsID0gcXVhdC5tdWx0aXBseShleWVSb3RhdGlvbiwgdGhpcy5yZXN0UG9zZS5yaWdodEV5ZSwgZXllUm90YXRpb24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9yZXNvbHZlQ29uc3RyYWludHMoKSB7XG4gICAgICAgIGZvciAoY29uc3Qgbm9kZUNvbnN0cmFpbnQgb2YgdGhpcy5fbm9kZUNvbnN0cmFpbnRzKSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlQ29uc3RyYWludChub2RlQ29uc3RyYWludCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3Jlc29sdmVDb25zdHJhaW50KG5vZGVDb25zdHJhaW50KSB7XG4gICAgICAgIGNvbnN0IGRzdFJlc3RRdWF0ID0gbm9kZUNvbnN0cmFpbnQuZGVzdGluYXRpb25SZXN0TG9jYWxSb3RhdGlvbjtcbiAgICAgICAgY29uc3Qgc3JjUmVzdFF1YXRJbnYgPSBub2RlQ29uc3RyYWludC5zb3VyY2VSZXN0TG9jYWxSb3RhdGlvbkludjtcbiAgICAgICAgY29uc3QgdGFyZ2V0UXVhdCA9IHF1YXQuaWRlbnRpdHkodGhpcy5fdGVtcFF1YXRBKTtcbiAgICAgICAgc3dpdGNoIChub2RlQ29uc3RyYWludC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdyb2xsJzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlbHRhU3JjUXVhdCA9IHF1YXQubXVsdGlwbHkodGhpcy5fdGVtcFF1YXRBLCBzcmNSZXN0UXVhdEludiwgbm9kZUNvbnN0cmFpbnQuc291cmNlLnJvdGF0aW9uTG9jYWwpO1xuICAgICAgICAgICAgICAgICAgICAvKiBzb3VyY2UgdG8gcGFyZW50ICovXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlbHRhU3JjUXVhdEluUGFyZW50ID0gcXVhdC5tdWx0aXBseSh0aGlzLl90ZW1wUXVhdEEsIG5vZGVDb25zdHJhaW50LnNvdXJjZVJlc3RMb2NhbFJvdGF0aW9uLCBkZWx0YVNyY1F1YXQpO1xuICAgICAgICAgICAgICAgICAgICBxdWF0Lm11bChkZWx0YVNyY1F1YXRJblBhcmVudCwgZGVsdGFTcmNRdWF0SW5QYXJlbnQsIHNyY1Jlc3RRdWF0SW52KTtcbiAgICAgICAgICAgICAgICAgICAgLyogcGFyZW50IHRvIGRlc3RpbmF0aW9uICovXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRzdFJlc3RRdWF0SW52ID0gcXVhdC5pbnZlcnQodGhpcy5fdGVtcFF1YXRCLCBkc3RSZXN0UXVhdCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlbHRhU3JjUXVhdEluRHN0ID0gcXVhdC5tdWx0aXBseSh0aGlzLl90ZW1wUXVhdEIsIGRzdFJlc3RRdWF0SW52LCBkZWx0YVNyY1F1YXRJblBhcmVudCk7XG4gICAgICAgICAgICAgICAgICAgIHF1YXQubXVsdGlwbHkoZGVsdGFTcmNRdWF0SW5Ec3QsIGRlbHRhU3JjUXVhdEluRHN0LCBkc3RSZXN0UXVhdCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvVmVjID0gdmVjMy50cmFuc2Zvcm1RdWF0KHRoaXMuX3RlbXBWM0EsIG5vZGVDb25zdHJhaW50LmF4aXMsIGRlbHRhU3JjUXVhdEluRHN0KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJvbVRvUXVhdCA9IHF1YXQucm90YXRpb25Ubyh0aGlzLl90ZW1wUXVhdEEsIG5vZGVDb25zdHJhaW50LmF4aXMsIHRvVmVjKTtcbiAgICAgICAgICAgICAgICAgICAgcXVhdC5tdWwodGFyZ2V0UXVhdCwgZHN0UmVzdFF1YXQsIHF1YXQuaW52ZXJ0KHRoaXMuX3RlbXBRdWF0LCBmcm9tVG9RdWF0KSk7XG4gICAgICAgICAgICAgICAgICAgIHF1YXQubXVsKHRhcmdldFF1YXQsIHRhcmdldFF1YXQsIGRlbHRhU3JjUXVhdEluRHN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdhaW0nOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZHN0UGFyZW50V29ybGRRdWF0ID0gbm9kZUNvbnN0cmFpbnQuZGVzdGluYXRpb24ucGFyZW50LnJvdGF0aW9uV29ybGQ7XG4gICAgICAgICAgICAgICAgICAgIC8qIGZyb21WZWMgPSBhaW1BeGlzLmFwcGx5UXVhdGVybmlvbiggZHN0UGFyZW50V29ybGRRdWF0ICogZHN0UmVzdFF1YXQgKSAqL1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmcm9tVmVjID0gdmVjMy50cmFuc2Zvcm1RdWF0KHRoaXMuX3RlbXBWM0EsIG5vZGVDb25zdHJhaW50LmF4aXMsIGRzdFJlc3RRdWF0KTtcbiAgICAgICAgICAgICAgICAgICAgdmVjMy50cmFuc2Zvcm1RdWF0KGZyb21WZWMsIGZyb21WZWMsIGRzdFBhcmVudFdvcmxkUXVhdCk7XG4gICAgICAgICAgICAgICAgICAgIC8qIHRvVmVjID0gKCBzcmNXb3JsZFBvcyAtIGRzdFdvcmxkUG9zICkubm9ybWFsaXplZCAqL1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b1ZlYyA9IG5vZGVDb25zdHJhaW50LnNvdXJjZS5nZXRUcmFuc2xhdGlvbldvcmxkKHRoaXMuX3RlbXBWM0IpO1xuICAgICAgICAgICAgICAgICAgICB2ZWMzLnN1Yih0b1ZlYywgdG9WZWMsIG5vZGVDb25zdHJhaW50LmRlc3RpbmF0aW9uLmdldFRyYW5zbGF0aW9uV29ybGQodGhpcy5fdGVtcFYzKSk7XG4gICAgICAgICAgICAgICAgICAgIHZlYzMubm9ybWFsaXplKHRvVmVjLCB0b1ZlYyk7XG4gICAgICAgICAgICAgICAgICAgIC8qIGZyb21Ub1F1YXQgPSBRdWF0ZXJuaW9uLmZyb21Ub1JvdGF0aW9uKCBmcm9tVmVjLCB0b1ZlYyApICovXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyb21Ub1F1YXQgPSBxdWF0LnJvdGF0aW9uVG8odGhpcy5fdGVtcFF1YXRBLCBmcm9tVmVjLCB0b1ZlYyk7XG4gICAgICAgICAgICAgICAgICAgIHF1YXQubXVsKHRhcmdldFF1YXQsIHF1YXQuaW52ZXJ0KHRoaXMuX3RlbXBRdWF0LCBkc3RQYXJlbnRXb3JsZFF1YXQpLCBmcm9tVG9RdWF0KTtcbiAgICAgICAgICAgICAgICAgICAgcXVhdC5tdWwodGFyZ2V0UXVhdCwgdGFyZ2V0UXVhdCwgZHN0UGFyZW50V29ybGRRdWF0KTtcbiAgICAgICAgICAgICAgICAgICAgcXVhdC5tdWwodGFyZ2V0UXVhdCwgdGFyZ2V0UXVhdCwgZHN0UmVzdFF1YXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3JvdGF0aW9uJzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNyY0RlbHRhUXVhdCA9IHF1YXQubXVsKHRhcmdldFF1YXQsIHNyY1Jlc3RRdWF0SW52LCBub2RlQ29uc3RyYWludC5zb3VyY2Uucm90YXRpb25Mb2NhbCk7XG4gICAgICAgICAgICAgICAgICAgIHF1YXQubXVsKHRhcmdldFF1YXQsIGRzdFJlc3RRdWF0LCBzcmNEZWx0YVF1YXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvKiBBcHBseSBjb25zdHJhaW50ICovXG4gICAgICAgIHF1YXQuc2xlcnAodGFyZ2V0UXVhdCwgZHN0UmVzdFF1YXQsIHRhcmdldFF1YXQsIG5vZGVDb25zdHJhaW50LndlaWdodCk7XG4gICAgICAgIG5vZGVDb25zdHJhaW50LmRlc3RpbmF0aW9uLnJvdGF0aW9uTG9jYWwgPSB0YXJnZXRRdWF0O1xuICAgIH1cbiAgICBfdXBkYXRlU3ByaW5nQm9uZXMoZHQpIHtcbiAgICAgICAgLyogUHJlLWNvbXB1dGUgY29sbGlkZXIgcG9zaXRpb25zICovXG4gICAgICAgIHRoaXMuX3NwaGVyZUNvbGxpZGVycy5mb3JFYWNoKCh7IG9iamVjdCwgc2hhcGUsIGNhY2hlIH0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IHZlYzMuY29weShjYWNoZS5oZWFkLCBzaGFwZS5vZmZzZXQpO1xuICAgICAgICAgICAgb2JqZWN0LnRyYW5zZm9ybVZlY3RvcldvcmxkKG9mZnNldCk7XG4gICAgICAgICAgICB2ZWMzLmFkZChjYWNoZS5oZWFkLCBvYmplY3QuZ2V0VHJhbnNsYXRpb25Xb3JsZCh0aGlzLl90ZW1wVjMpLCBvZmZzZXQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fY2Fwc3VsZUNvbGxpZGVycy5mb3JFYWNoKCh7IG9iamVjdCwgc2hhcGUsIGNhY2hlIH0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNoYXBlQ2VudGVyID0gb2JqZWN0LmdldFRyYW5zbGF0aW9uV29ybGQodGhpcy5fdGVtcFYzQSk7XG4gICAgICAgICAgICBjb25zdCBoZWFkT2Zmc2V0ID0gdmVjMy5jb3B5KGNhY2hlLmhlYWQsIHNoYXBlLm9mZnNldCk7XG4gICAgICAgICAgICBvYmplY3QudHJhbnNmb3JtVmVjdG9yV29ybGQoaGVhZE9mZnNldCk7XG4gICAgICAgICAgICB2ZWMzLmFkZChjYWNoZS5oZWFkLCBzaGFwZUNlbnRlciwgaGVhZE9mZnNldCk7XG4gICAgICAgICAgICBjb25zdCB0YWlsT2Zmc2V0ID0gdmVjMy5jb3B5KGNhY2hlLnRhaWwsIHNoYXBlLnRhaWwpO1xuICAgICAgICAgICAgb2JqZWN0LnRyYW5zZm9ybVZlY3RvcldvcmxkKHRhaWxPZmZzZXQpO1xuICAgICAgICAgICAgdmVjMy5hZGQoY2FjaGUudGFpbCwgc2hhcGVDZW50ZXIsIHRhaWxPZmZzZXQpO1xuICAgICAgICB9KTtcbiAgICAgICAgLyogVXBkYXRlIHNwcmluZyBjaGFpbnMgKi9cbiAgICAgICAgdGhpcy5fc3ByaW5nQ2hhaW5zLmZvckVhY2goKHNwcmluZ0NoYWluKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwcmluZ0NoYWluLmpvaW50cy5sZW5ndGggLSAxOyArK2kpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBqb2ludCA9IHNwcmluZ0NoYWluLmpvaW50c1tpXTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRXb3JsZFJvdGF0aW9uID0gam9pbnQubm9kZS5wYXJlbnRcbiAgICAgICAgICAgICAgICAgICAgPyBqb2ludC5ub2RlLnBhcmVudC5yb3RhdGlvbldvcmxkXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5faWRlbnRpdHlRdWF0O1xuICAgICAgICAgICAgICAgIC8qIDEuIEZvcmNlcyAqL1xuICAgICAgICAgICAgICAgIC8qIGluZXJ0aWEgPSAoY3VycmVudFRhaWwgLSBwcmV2VGFpbCkgKiAoMS4wZiAtIGRyYWdGb3JjZSk7ICovXG4gICAgICAgICAgICAgICAgY29uc3QgaW5lcnRpYSA9IHRoaXMuX2luZXJ0aWE7XG4gICAgICAgICAgICAgICAgaWYgKHNwcmluZ0NoYWluLmNlbnRlcikge1xuICAgICAgICAgICAgICAgICAgICB2ZWMzLnN1YihpbmVydGlhLCBqb2ludC5zdGF0ZS5jdXJyZW50VGFpbENlbnRlciwgam9pbnQuc3RhdGUucHJldlRhaWxDZW50ZXIpO1xuICAgICAgICAgICAgICAgICAgICBzcHJpbmdDaGFpbi5jZW50ZXIudHJhbnNmb3JtVmVjdG9yV29ybGQoaW5lcnRpYSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2ZWMzLnN1YihpbmVydGlhLCBqb2ludC5zdGF0ZS5jdXJyZW50VGFpbCwgam9pbnQuc3RhdGUucHJldlRhaWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2ZWMzLnNjYWxlKGluZXJ0aWEsIGluZXJ0aWEsIDEuMCAtIGpvaW50LmRyYWdGb3JjZSk7XG4gICAgICAgICAgICAgICAgLyogc3RpZmZuZXNzID0gZGVsdGFUaW1lICogcGFyZW50V29ybGRSb3RhdGlvbiAqIGxvY2FsUm90YXRpb24gKiBib25lQXhpcyAqIHN0aWZmbmVzc0ZvcmNlOyAqL1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0aWZmbmVzcyA9IHZlYzMuY29weSh0aGlzLl9zdGlmZm5lc3MsIGpvaW50LnN0YXRlLmJvbmVBeGlzKTtcbiAgICAgICAgICAgICAgICB2ZWMzLnRyYW5zZm9ybVF1YXQoc3RpZmZuZXNzLCBzdGlmZm5lc3MsIGpvaW50LnN0YXRlLmluaXRpYWxMb2NhbFJvdGF0aW9uKTtcbiAgICAgICAgICAgICAgICB2ZWMzLnRyYW5zZm9ybVF1YXQoc3RpZmZuZXNzLCBzdGlmZm5lc3MsIHBhcmVudFdvcmxkUm90YXRpb24pO1xuICAgICAgICAgICAgICAgIHZlYzMuc2NhbGUoc3RpZmZuZXNzLCBzdGlmZm5lc3MsIGR0ICogam9pbnQuc3RpZmZuZXNzKTtcbiAgICAgICAgICAgICAgICAvKiBleHRlcm5hbCA9IGRlbHRhVGltZSAqIGdyYXZpdHlEaXIgKiBncmF2aXR5UG93ZXI7ICovXG4gICAgICAgICAgICAgICAgY29uc3QgZXh0ZXJuYWwgPSB2ZWMzLnNjYWxlKHRoaXMuX2V4dGVybmFsLCBqb2ludC5ncmF2aXR5RGlyLCBkdCAqIGpvaW50LmdyYXZpdHlQb3dlcik7XG4gICAgICAgICAgICAgICAgLyogbmV4dFRhaWwgPSBjdXJyZW50VGFpbCArIGluZXJ0aWEgKyBzdGlmZm5lc3MgKyBleHRlcm5hbDsgKi9cbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0VGFpbCA9IHZlYzMuY29weSh0aGlzLl90ZW1wVjNBLCBqb2ludC5zdGF0ZS5jdXJyZW50VGFpbCk7XG4gICAgICAgICAgICAgICAgdmVjMy5hZGQobmV4dFRhaWwsIG5leHRUYWlsLCBpbmVydGlhKTtcbiAgICAgICAgICAgICAgICB2ZWMzLmFkZChuZXh0VGFpbCwgbmV4dFRhaWwsIHN0aWZmbmVzcyk7XG4gICAgICAgICAgICAgICAgdmVjMy5hZGQobmV4dFRhaWwsIG5leHRUYWlsLCBleHRlcm5hbCk7XG4gICAgICAgICAgICAgICAgLyogY29uc3RyYWluIHRoZSBsZW5ndGggKi9cbiAgICAgICAgICAgICAgICAvKiBuZXh0VGFpbCA9IHdvcmxkUG9zaXRpb24gKyAobmV4dFRhaWwgLSB3b3JsZFBvc2l0aW9uKS5ub3JtYWxpemVkICogYm9uZUxlbmd0aDsgKi9cbiAgICAgICAgICAgICAgICBjb25zdCB3b3JsZFBvc2l0aW9uID0gam9pbnQubm9kZS5nZXRUcmFuc2xhdGlvbldvcmxkKHRoaXMuX3RlbXBWM0IpO1xuICAgICAgICAgICAgICAgIHZlYzMuc3ViKG5leHRUYWlsLCBuZXh0VGFpbCwgd29ybGRQb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUobmV4dFRhaWwsIG5leHRUYWlsKTtcbiAgICAgICAgICAgICAgICB2ZWMzLnNjYWxlQW5kQWRkKG5leHRUYWlsLCB3b3JsZFBvc2l0aW9uLCBuZXh0VGFpbCwgam9pbnQuc3RhdGUuYm9uZUxlbmd0aCk7XG4gICAgICAgICAgICAgICAgLyogMi4gQ29sbGlzaW9uIHdpdGggY29sbGlkZXJzICovXG4gICAgICAgICAgICAgICAgLyogU3BoZXJlIGNvbGxpZGVycyAqL1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgeyBzaGFwZSwgY2FjaGUgfSBvZiBzcHJpbmdDaGFpbi5zcGhlcmVDb2xsaWRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhaWxUb1NoYXBlID0gdGhpcy5fdGFpbFRvU2hhcGU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwaGVyZUNlbnRlciA9IGNhY2hlLmhlYWQ7XG4gICAgICAgICAgICAgICAgICAgIHRhaWxUb1NoYXBlID0gdmVjMy5zdWIodGFpbFRvU2hhcGUsIG5leHRUYWlsLCBzcGhlcmVDZW50ZXIpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByYWRpdXMgPSBzaGFwZS5yYWRpdXMgKyBqb2ludC5oaXRSYWRpdXM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3QgPSB2ZWMzLmxlbmd0aCh0YWlsVG9TaGFwZSkgLSByYWRpdXM7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkaXN0IDwgMC4wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWMzLm5vcm1hbGl6ZSh0YWlsVG9TaGFwZSwgdGFpbFRvU2hhcGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMy5zY2FsZUFuZEFkZChuZXh0VGFpbCwgbmV4dFRhaWwsIHRhaWxUb1NoYXBlLCAtZGlzdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBjb25zdHJhaW50IHRoZSBsZW5ndGggKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMuc3ViKG5leHRUYWlsLCBuZXh0VGFpbCwgd29ybGRQb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWMzLm5vcm1hbGl6ZShuZXh0VGFpbCwgbmV4dFRhaWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMy5zY2FsZUFuZEFkZChuZXh0VGFpbCwgd29ybGRQb3NpdGlvbiwgbmV4dFRhaWwsIGpvaW50LnN0YXRlLmJvbmVMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8qIENhcHN1bGUgY29sbGlkZXJzICovXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB7IHNoYXBlLCBjYWNoZSB9IG9mIHNwcmluZ0NoYWluLmNhcHN1bGVDb2xsaWRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhaWxUb1NoYXBlID0gdGhpcy5fdGFpbFRvU2hhcGU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWQgPSBjYWNoZS5oZWFkO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWlsID0gY2FjaGUudGFpbDtcbiAgICAgICAgICAgICAgICAgICAgLyogTmFpdmVseSBzdGFydCB3aXRoIGRpc3RhbmNlIHRvIHRoZSBoZWFkICovXG4gICAgICAgICAgICAgICAgICAgIHRhaWxUb1NoYXBlID0gdmVjMy5zdWIodGFpbFRvU2hhcGUsIG5leHRUYWlsLCBoZWFkKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZFRvVGFpbCA9IHZlYzMuc3ViKHRoaXMuX2hlYWRUb1RhaWwsIHRhaWwsIGhlYWQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkb3QgPSB2ZWMzLmRvdChoZWFkVG9UYWlsLCB0YWlsVG9TaGFwZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2ZWMzLnNxdWFyZWRMZW5ndGgoaGVhZFRvVGFpbCkgPD0gZG90KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBDbG9zZXN0IHRvIHRhaWwgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMuc3ViKHRhaWxUb1NoYXBlLCBuZXh0VGFpbCwgdGFpbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZG90ID4gMC4wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBDbG9zZXN0IHRvIG1pZGRsZSAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMy5zY2FsZShoZWFkVG9UYWlsLCBoZWFkVG9UYWlsLCBkb3QgLyB2ZWMzLnNxdWFyZWRMZW5ndGgoaGVhZFRvVGFpbCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMy5zdWIodGFpbFRvU2hhcGUsIHRhaWxUb1NoYXBlLCBoZWFkVG9UYWlsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCByYWRpdXMgPSBzaGFwZS5yYWRpdXMgKyBqb2ludC5oaXRSYWRpdXM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3QgPSB2ZWMzLmxlbmd0aCh0YWlsVG9TaGFwZSkgLSByYWRpdXM7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkaXN0IDwgMC4wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWMzLm5vcm1hbGl6ZSh0YWlsVG9TaGFwZSwgdGFpbFRvU2hhcGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMy5zY2FsZUFuZEFkZChuZXh0VGFpbCwgbmV4dFRhaWwsIHRhaWxUb1NoYXBlLCAtZGlzdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBjb25zdHJhaW50IHRoZSBsZW5ndGggKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMuc3ViKG5leHRUYWlsLCBuZXh0VGFpbCwgd29ybGRQb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWMzLm5vcm1hbGl6ZShuZXh0VGFpbCwgbmV4dFRhaWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMy5zY2FsZUFuZEFkZChuZXh0VGFpbCwgd29ybGRQb3NpdGlvbiwgbmV4dFRhaWwsIGpvaW50LnN0YXRlLmJvbmVMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8qIDMuIEFwcGx5aW5nIHJvdGF0aW9uICovXG4gICAgICAgICAgICAgICAgdmVjMy5jb3B5KGpvaW50LnN0YXRlLnByZXZUYWlsLCBqb2ludC5zdGF0ZS5jdXJyZW50VGFpbCk7XG4gICAgICAgICAgICAgICAgdmVjMy5jb3B5KGpvaW50LnN0YXRlLmN1cnJlbnRUYWlsLCBuZXh0VGFpbCk7XG4gICAgICAgICAgICAgICAgaWYgKHNwcmluZ0NoYWluLmNlbnRlcikge1xuICAgICAgICAgICAgICAgICAgICB2ZWMzLmNvcHkoam9pbnQuc3RhdGUucHJldlRhaWxDZW50ZXIsIGpvaW50LnN0YXRlLmN1cnJlbnRUYWlsQ2VudGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmVjMy5jb3B5KGpvaW50LnN0YXRlLmN1cnJlbnRUYWlsQ2VudGVyLCBuZXh0VGFpbCk7XG4gICAgICAgICAgICAgICAgICAgIHNwcmluZ0NoYWluLmNlbnRlci50cmFuc2Zvcm1Qb2ludEludmVyc2VXb3JsZChqb2ludC5zdGF0ZS5jdXJyZW50VGFpbENlbnRlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8qIHRvID0gKG5leHRUYWlsICogKG5vZGUucGFyZW50LndvcmxkTWF0cml4ICogaW5pdGlhbExvY2FsTWF0cml4KS5pbnZlcnNlKS5ub3JtYWxpemVkICovXG4gICAgICAgICAgICAgICAgam9pbnQubm9kZS5wYXJlbnQudHJhbnNmb3JtUG9pbnRJbnZlcnNlV29ybGQobmV4dFRhaWwpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRUYWlsRHVhbFF1YXQgPSBxdWF0Mi5mcm9tVHJhbnNsYXRpb24odGhpcy5fdGVtcFF1YXQyLCBuZXh0VGFpbCk7XG4gICAgICAgICAgICAgICAgcXVhdDIubXVsdGlwbHkobmV4dFRhaWxEdWFsUXVhdCwgam9pbnQuc3RhdGUuaW5pdGlhbExvY2FsVHJhbnNmb3JtSW52ZXJ0LCBuZXh0VGFpbER1YWxRdWF0KTtcbiAgICAgICAgICAgICAgICBxdWF0Mi5nZXRUcmFuc2xhdGlvbihuZXh0VGFpbCwgbmV4dFRhaWxEdWFsUXVhdCk7XG4gICAgICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUobmV4dFRhaWwsIG5leHRUYWlsKTtcbiAgICAgICAgICAgICAgICAvKiBub2RlLnJvdGF0aW9uID0gaW5pdGlhbExvY2FsUm90YXRpb24gKiBRdWF0ZXJuaW9uLmZyb21Ub1F1YXRlcm5pb24oYm9uZUF4aXMsIHRvKTsgKi9cbiAgICAgICAgICAgICAgICBjb25zdCBqb2ludFJvdGF0aW9uID0gcXVhdC5yb3RhdGlvblRvKHRoaXMuX3RlbXBRdWF0QSwgam9pbnQuc3RhdGUuYm9uZUF4aXMsIG5leHRUYWlsKTtcbiAgICAgICAgICAgICAgICBqb2ludC5ub2RlLnJvdGF0aW9uTG9jYWwgPSBxdWF0Lm11bCh0aGlzLl90ZW1wUXVhdEEsIGpvaW50LnN0YXRlLmluaXRpYWxMb2NhbFJvdGF0aW9uLCBqb2ludFJvdGF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZmlyc3RQZXJzb24gV2hldGhlciB0aGUgbW9kZWwgc2hvdWxkIHJlbmRlciBmb3IgZmlyc3QgcGVyc29uIG9yIHRoaXJkIHBlcnNvbiB2aWV3c1xuICAgICAqL1xuICAgIHNldCBmaXJzdFBlcnNvbihmaXJzdFBlcnNvbikge1xuICAgICAgICB0aGlzLl9maXJzdFBlcnNvbkFubm90YXRpb25zLmZvckVhY2goKGFubm90YXRpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZpc2libGUgPSBmaXJzdFBlcnNvbiA9PSBhbm5vdGF0aW9uLmZpcnN0UGVyc29uIHx8XG4gICAgICAgICAgICAgICAgZmlyc3RQZXJzb24gIT0gYW5ub3RhdGlvbi50aGlyZFBlcnNvbjtcbiAgICAgICAgICAgIGFubm90YXRpb24ubm9kZS5nZXRDb21wb25lbnRzKCdtZXNoJykuZm9yRWFjaCgobWVzaCkgPT4ge1xuICAgICAgICAgICAgICAgIG1lc2guYWN0aXZlID0gdmlzaWJsZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgeyBWcm0gfTtcbiIsICJpbXBvcnQgeyB2ZWMzIH0gZnJvbSAnZ2wtbWF0cml4JztcbmltcG9ydCB7IENvbXBvbmVudCwgVHlwZSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5jb25zdCBfZGlyZWN0aW9uID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbi8qKlxuICogQmFzaWMgbW92ZW1lbnQgd2l0aCBXL0EvUy9EIGtleXMuXG4gKi9cbmNsYXNzIFdhc2RDb250cm9sc0NvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ3dhc2QtY29udHJvbHMnO1xuICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge1xuICAgICAgICAvKiogTW92ZW1lbnQgc3BlZWQgaW4gbS9zLiAqL1xuICAgICAgICBzcGVlZDogeyB0eXBlOiBUeXBlLkZsb2F0LCBkZWZhdWx0OiAwLjEgfSxcbiAgICAgICAgLyoqIEZsYWcgZm9yIG9ubHkgbW92aW5nIHRoZSBvYmplY3Qgb24gdGhlIGdsb2JhbCB4ICYgeiBwbGFuZXMgKi9cbiAgICAgICAgbG9ja1k6IHsgdHlwZTogVHlwZS5Cb29sLCBkZWZhdWx0OiBmYWxzZSB9LFxuICAgICAgICAvKiogT2JqZWN0IG9mIHdoaWNoIHRoZSBvcmllbnRhdGlvbiBpcyB1c2VkIHRvIGRldGVybWluZSBmb3J3YXJkIGRpcmVjdGlvbiAqL1xuICAgICAgICBoZWFkT2JqZWN0OiB7IHR5cGU6IFR5cGUuT2JqZWN0IH0sXG4gICAgfTtcbiAgICBpbml0KCkge1xuICAgICAgICB0aGlzLnVwID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmlnaHQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kb3duID0gZmFsc2U7XG4gICAgICAgIHRoaXMubGVmdCA9IGZhbHNlO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMucHJlc3MuYmluZCh0aGlzKSk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMucmVsZWFzZS5iaW5kKHRoaXMpKTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuaGVhZE9iamVjdCA9IHRoaXMuaGVhZE9iamVjdCB8fCB0aGlzLm9iamVjdDtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICB2ZWMzLnplcm8oX2RpcmVjdGlvbik7XG4gICAgICAgIGlmICh0aGlzLnVwKVxuICAgICAgICAgICAgX2RpcmVjdGlvblsyXSAtPSAxLjA7XG4gICAgICAgIGlmICh0aGlzLmRvd24pXG4gICAgICAgICAgICBfZGlyZWN0aW9uWzJdICs9IDEuMDtcbiAgICAgICAgaWYgKHRoaXMubGVmdClcbiAgICAgICAgICAgIF9kaXJlY3Rpb25bMF0gLT0gMS4wO1xuICAgICAgICBpZiAodGhpcy5yaWdodClcbiAgICAgICAgICAgIF9kaXJlY3Rpb25bMF0gKz0gMS4wO1xuICAgICAgICB2ZWMzLm5vcm1hbGl6ZShfZGlyZWN0aW9uLCBfZGlyZWN0aW9uKTtcbiAgICAgICAgX2RpcmVjdGlvblswXSAqPSB0aGlzLnNwZWVkO1xuICAgICAgICBfZGlyZWN0aW9uWzJdICo9IHRoaXMuc3BlZWQ7XG4gICAgICAgIHZlYzMudHJhbnNmb3JtUXVhdChfZGlyZWN0aW9uLCBfZGlyZWN0aW9uLCB0aGlzLmhlYWRPYmplY3QudHJhbnNmb3JtV29ybGQpO1xuICAgICAgICBpZiAodGhpcy5sb2NrWSkge1xuICAgICAgICAgICAgX2RpcmVjdGlvblsxXSA9IDA7XG4gICAgICAgICAgICB2ZWMzLm5vcm1hbGl6ZShfZGlyZWN0aW9uLCBfZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIHZlYzMuc2NhbGUoX2RpcmVjdGlvbiwgX2RpcmVjdGlvbiwgdGhpcy5zcGVlZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vYmplY3QudHJhbnNsYXRlTG9jYWwoX2RpcmVjdGlvbik7XG4gICAgfVxuICAgIHByZXNzKGUpIHtcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMzggLyogdXAgKi8gfHxcbiAgICAgICAgICAgIGUua2V5Q29kZSA9PT0gODcgLyogdyAqLyB8fFxuICAgICAgICAgICAgZS5rZXlDb2RlID09PSA5MCAvKiB6ICovKSB7XG4gICAgICAgICAgICB0aGlzLnVwID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlLmtleUNvZGUgPT09IDM5IC8qIHJpZ2h0ICovIHx8IGUua2V5Q29kZSA9PT0gNjggLyogZCAqLykge1xuICAgICAgICAgICAgdGhpcy5yaWdodCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZS5rZXlDb2RlID09PSA0MCAvKiBkb3duICovIHx8IGUua2V5Q29kZSA9PT0gODMgLyogcyAqLykge1xuICAgICAgICAgICAgdGhpcy5kb3duID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlLmtleUNvZGUgPT09IDM3IC8qIGxlZnQgKi8gfHxcbiAgICAgICAgICAgIGUua2V5Q29kZSA9PT0gNjUgLyogYSAqLyB8fFxuICAgICAgICAgICAgZS5rZXlDb2RlID09PSA4MSAvKiBxICovKSB7XG4gICAgICAgICAgICB0aGlzLmxlZnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbGVhc2UoZSkge1xuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAzOCAvKiB1cCAqLyB8fFxuICAgICAgICAgICAgZS5rZXlDb2RlID09PSA4NyAvKiB3ICovIHx8XG4gICAgICAgICAgICBlLmtleUNvZGUgPT09IDkwIC8qIHogKi8pIHtcbiAgICAgICAgICAgIHRoaXMudXAgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlLmtleUNvZGUgPT09IDM5IC8qIHJpZ2h0ICovIHx8IGUua2V5Q29kZSA9PT0gNjggLyogZCAqLykge1xuICAgICAgICAgICAgdGhpcy5yaWdodCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gNDAgLyogZG93biAqLyB8fCBlLmtleUNvZGUgPT09IDgzIC8qIHMgKi8pIHtcbiAgICAgICAgICAgIHRoaXMuZG93biA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gMzcgLyogbGVmdCAqLyB8fFxuICAgICAgICAgICAgZS5rZXlDb2RlID09PSA2NSAvKiBhICovIHx8XG4gICAgICAgICAgICBlLmtleUNvZGUgPT09IDgxIC8qIHEgKi8pIHtcbiAgICAgICAgICAgIHRoaXMubGVmdCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IHsgV2FzZENvbnRyb2xzQ29tcG9uZW50IH07XG4iLCAidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuaW1wb3J0IHsgQ29tcG9uZW50LCBFbWl0dGVyIH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbmltcG9ydCB7IEhhbmRUcmFja2luZyB9IGZyb20gJy4vaGFuZC10cmFja2luZy5qcyc7XG5pbXBvcnQgeyB2ZWMzLCBxdWF0IH0gZnJvbSAnZ2wtbWF0cml4JztcbmltcG9ydCB7IHByb3BlcnR5IH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpL2RlY29yYXRvcnMuanMnO1xuaW1wb3J0IHsgVnJNb2RlQWN0aXZlU3dpdGNoIH0gZnJvbSAnLi92ci1tb2RlLWFjdGl2ZS1zd2l0Y2guanMnO1xuY29uc3QgX3RlbXBWZWMgPSB2ZWMzLmNyZWF0ZSgpO1xuY29uc3QgX3RlbXBRdWF0ID0gcXVhdC5jcmVhdGUoKTtcbmNvbnN0IF90ZW1wUm90YXRpb24xID0gbmV3IEZsb2F0MzJBcnJheSg0KTtcbmNvbnN0IF90ZW1wUm90YXRpb24yID0gbmV3IEZsb2F0MzJBcnJheSg0KTtcbmNvbnN0IG1pblRlbXAgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuY29uc3QgbWF4VGVtcCA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG5jb25zdCBoYW5kcyA9IFsnbGVmdCcsICdyaWdodCddO1xuLyoqXG4gKiBEeW5hbWljYWxseSBsb2FkIGFuZCBtYXAgaW5wdXQgcHJvZmlsZXMgZm9yIFhSIGNvbnRyb2xsZXJzLlxuICovXG5jbGFzcyBJbnB1dFByb2ZpbGUgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdpbnB1dC1wcm9maWxlJztcbiAgICAvKipcbiAgICAgKiBBIGNhY2hlIHRvIHN0b3JlIGxvYWRlZCBwcm9maWxlcyBmb3IgcmV1c2UuXG4gICAgICovXG4gICAgc3RhdGljIENhY2hlID0gbmV3IE1hcCgpO1xuICAgIF9nYW1lcGFkT2JqZWN0cyA9IHt9O1xuICAgIF9jb250cm9sbGVyTW9kZWwgPSBudWxsO1xuICAgIF9kZWZhdWx0Q29udHJvbGxlckNvbXBvbmVudHM7XG4gICAgX2hhbmRlZG5lc3M7XG4gICAgX3Byb2ZpbGVKU09OID0gbnVsbDtcbiAgICBfYnV0dG9ucyA9IFtdO1xuICAgIF9heGVzID0gW107XG4gICAgLyoqXG4gICAgICogVGhlIFhSIGdhbWVwYWQgYXNzb2NpYXRlZCB3aXRoIHRoZSBjdXJyZW50IGlucHV0IHNvdXJjZS5cbiAgICAgKi9cbiAgICBnYW1lcGFkO1xuICAgIC8qKlxuICAgICAqIEEgcmVmZXJlbmNlIHRvIHRoZSBlbWl0dGVyIHdoaWNoIHRyaWdnZXJlZCBvbiBtb2RlbCBsb2RhZWQgZXZlbnQuXG4gICAgICovXG4gICAgb25Nb2RlbExvYWRlZCA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB1cmwgb2YgaW5wdXQgcHJvZmlsZSBqc29uIGZpbGVcbiAgICAgKi9cbiAgICB1cmw7XG4gICAgLyoqXG4gICAgICogQSBzZXQgb2YgY29tcG9uZW50cyB0byBmaWx0ZXIgZHVyaW5nIGNvbXBvbmVudCByZXRyaWV2YWwuXG4gICAgICovXG4gICAgdG9GaWx0ZXIgPSBuZXcgU2V0KFsndnItbW9kZS1hY3RpdmUtbW9kZS1zd2l0Y2gnXSk7XG4gICAgLyoqXG4gICAgICogVGhlIGluZGV4IHJlcHJlc2VudGluZyB0aGUgaGFuZGVkbmVzcyBvZiB0aGUgY29udHJvbGxlciAoMCBmb3IgbGVmdCwgMSBmb3IgcmlnaHQpLlxuICAgICAqL1xuICAgIGhhbmRlZG5lc3MgPSAwO1xuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIHBhdGggd2hlcmUgWFIgaW5wdXQgcHJvZmlsZXMgYXJlIHN0b3JlZC5cbiAgICAgKi9cbiAgICBkZWZhdWx0QmFzZVBhdGg7XG4gICAgLyoqXG4gICAgICogQW4gb3B0aW9uYWwgZm9sZGVyIHBhdGggZm9yIGxvYWRpbmcgY3VzdG9tIFhSIGlucHV0IHByb2ZpbGVzLlxuICAgICAqL1xuICAgIGN1c3RvbUJhc2VQYXRoO1xuICAgIC8qKlxuICAgICAqIFRoZSBkZWZhdWx0IDNEIGNvbnRyb2xsZXIgbW9kZWwgdXNlZCB3aGVuIGEgY3VzdG9tIG1vZGVsIGZhaWxzIHRvIGxvYWQuXG4gICAgICovXG4gICAgZGVmYXVsdENvbnRyb2xsZXI7XG4gICAgLyoqXG4gICAgICogVGhlIG9iamVjdCB3aGljaCBoYXMgSGFuZFRyYWNraW5nIGNvbXBvbmVudCBhZGRlZCB0byBpdC5cbiAgICAgKi9cbiAgICB0cmFja2VkSGFuZDtcbiAgICAvKipcbiAgICAgKiBJZiB0cnVlLCB0aGUgaW5wdXQgcHJvZmlsZSB3aWxsIGJlIG1hcHBlZCB0byB0aGUgZGVmYXVsdCBjb250cm9sbGVyLCBhbmQgbm8gZHluYW1pYyAzRCBtb2RlbCBvZiBjb250cm9sbGVyIHdpbGwgYmUgbG9hZGVkLlxuICAgICAqL1xuICAgIG1hcFRvRGVmYXVsdENvbnRyb2xsZXI7XG4gICAgLyoqXG4gICAgICogSWYgdHJ1ZSwgYWRkcyBhIFZSIG1vZGUgc3dpdGNoIGNvbXBvbmVudCB0byB0aGUgbG9hZGVkIGNvbnRyb2xsZXIgbW9kZWwuXG4gICAgICovXG4gICAgYWRkVnJNb2RlU3dpdGNoO1xuICAgIG9uQWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMuX2hhbmRlZG5lc3MgPSBoYW5kc1t0aGlzLmhhbmRlZG5lc3NdO1xuICAgICAgICBjb25zdCBkZWZhdWx0SGFuZE5hbWUgPSAnSGFuZCcgKyB0aGlzLl9oYW5kZWRuZXNzLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdGhpcy5faGFuZGVkbmVzcy5zbGljZSgxKTtcbiAgICAgICAgdGhpcy50cmFja2VkSGFuZCA9XG4gICAgICAgICAgICB0aGlzLnRyYWNrZWRIYW5kID8/IHRoaXMub2JqZWN0LnBhcmVudD8uZmluZEJ5TmFtZVJlY3Vyc2l2ZShkZWZhdWx0SGFuZE5hbWUpWzBdO1xuICAgICAgICB0aGlzLmRlZmF1bHRDb250cm9sbGVyID0gdGhpcy5kZWZhdWx0Q29udHJvbGxlciB8fCB0aGlzLm9iamVjdC5jaGlsZHJlblswXTtcbiAgICAgICAgdGhpcy5fZGVmYXVsdENvbnRyb2xsZXJDb21wb25lbnRzID0gdGhpcy5fZ2V0Q29tcG9uZW50cyh0aGlzLmRlZmF1bHRDb250cm9sbGVyKTtcbiAgICAgICAgdGhpcy5lbmdpbmUub25YUlNlc3Npb25TdGFydC5hZGQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbmdpbmUueHI/LnNlc3Npb24uYWRkRXZlbnRMaXN0ZW5lcignaW5wdXRzb3VyY2VzY2hhbmdlJywgdGhpcy5fb25JbnB1dFNvdXJjZXNDaGFuZ2UuYmluZCh0aGlzKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBvbkRlYWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLnhyPy5zZXNzaW9uPy5yZW1vdmVFdmVudExpc3RlbmVyKCdpbnB1dHNvdXJjZXNjaGFuZ2UnLCB0aGlzLl9vbklucHV0U291cmNlc0NoYW5nZS5iaW5kKHRoaXMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyBuZXdseSBsb2FkZWQgY29udHJvbGxlcnMgZm9yIHRoZSBIYW5kVHJhY2tpbmcgY29tcG9uZW50IHRvIHByb3BlciBzd2l0Y2hpbmcuXG4gICAgICogQHBhcmFtIGNvbnRyb2xsZXJPYmplY3QgVGhlIGNvbnRyb2xsZXIgb2JqZWN0LlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfc2V0SGFuZFRyYWNraW5nQ29udHJvbGxlcnMoY29udHJvbGxlck9iamVjdCkge1xuICAgICAgICBjb25zdCBoYW5kdHJhY2tpbmdDb21wb25lbnQgPSB0aGlzLnRyYWNrZWRIYW5kLmdldENvbXBvbmVudChIYW5kVHJhY2tpbmcpO1xuICAgICAgICBpZiAoIWhhbmR0cmFja2luZ0NvbXBvbmVudClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaGFuZHRyYWNraW5nQ29tcG9uZW50LmNvbnRyb2xsZXJUb0RlYWN0aXZhdGUgPSBjb250cm9sbGVyT2JqZWN0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGNvbXBvbmVudHMgZnJvbSB0aGUgc3BlY2lmaWVkIG9iamVjdCBhbmQgaXRzIGNoaWxkcmVuLlxuICAgICAqIEBwYXJhbSBvYmogVGhlIG9iamVjdCB0byByZXRyaWV2ZSBjb21wb25lbnRzIGZyb20uXG4gICAgICogQHJldHVybiBBbiBhcnJheSBvZiBjb21wb25lbnRzLlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfZ2V0Q29tcG9uZW50cyhvYmopIHtcbiAgICAgICAgY29uc3QgY29tcG9uZW50cyA9IFtdO1xuICAgICAgICBpZiAob2JqID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gY29tcG9uZW50cztcbiAgICAgICAgY29uc3Qgc3RhY2sgPSBbb2JqXTtcbiAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRPYmogPSBzdGFjay5wb3AoKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBzID0gY3VycmVudE9ialxuICAgICAgICAgICAgICAgIC5nZXRDb21wb25lbnRzKClcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChjKSA9PiAhdGhpcy50b0ZpbHRlci5oYXMoYy50eXBlKSk7XG4gICAgICAgICAgICBjb21wb25lbnRzLnB1c2goLi4uY29tcHMpO1xuICAgICAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBjdXJyZW50T2JqLmNoaWxkcmVuO1xuICAgICAgICAgICAgLy8gUHVzaCBjaGlsZHJlbiBvbnRvIHRoZSBzdGFjayBpbiByZXZlcnNlIG9yZGVyIHRvIG1haW50YWluIHRoZSBjb3JyZWN0IG9yZGVyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKGNoaWxkcmVuW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29tcG9uZW50cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWN0aXZhdGVzIG9yIGRlYWN0aXZhdGVzIGNvbXBvbmVudHMgYmFzZWQgb24gdGhlIHNwZWNpZmllZCBib29sZWFuIHZhbHVlLlxuICAgICAqIEBwYXJhbSBhY3RpdmUgSWYgdHJ1ZSwgY29tcG9uZW50cyBhcmUgc2V0IHRvIGFjdGl2ZTsgb3RoZXJ3aXNlLCB0aGV5IGFyZSBzZXQgdG8gaW5hY3RpdmUuXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9zZXRDb21wb25lbnRzQWN0aXZlKGFjdGl2ZSkge1xuICAgICAgICBjb25zdCBjb21wcyA9IHRoaXMuX2RlZmF1bHRDb250cm9sbGVyQ29tcG9uZW50cztcbiAgICAgICAgaWYgKGNvbXBzID09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb21wcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgY29tcHNbaV0uYWN0aXZlID0gYWN0aXZlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV2ZW50IGhhbmRsZXIgdHJpZ2dlcmVkIHdoZW4gWFIgaW5wdXQgc291cmNlcyBjaGFuZ2UuXG4gICAgICogRGV0ZWN0cyBuZXcgWFIgaW5wdXQgc291cmNlcyBhbmQgaW5pdGlhdGVzIHRoZSBsb2FkaW5nIG9mIGlucHV0IHByb2ZpbGVzLlxuICAgICAqIEBwYXJhbSBldmVudCBUaGUgWFIgaW5wdXQgc291cmNlIGNoYW5nZSBldmVudC5cbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX29uSW5wdXRTb3VyY2VzQ2hhbmdlKGV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLl9pc01vZGVsTG9hZGVkKCkgJiYgIXRoaXMubWFwVG9EZWZhdWx0Q29udHJvbGxlcikge1xuICAgICAgICAgICAgdGhpcy5fc2V0Q29tcG9uZW50c0FjdGl2ZShmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgZXZlbnQuYWRkZWQuZm9yRWFjaCgoeHJJbnB1dFNvdXJjZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHhySW5wdXRTb3VyY2UuaGFuZCAhPSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmICh0aGlzLl9oYW5kZWRuZXNzICE9IHhySW5wdXRTb3VyY2UuaGFuZGVkbmVzcylcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB0aGlzLmdhbWVwYWQgPSB4cklucHV0U291cmNlLmdhbWVwYWQ7XG4gICAgICAgICAgICBjb25zdCBwcm9maWxlID0gdGhpcy5jdXN0b21CYXNlUGF0aCAhPT0gJydcbiAgICAgICAgICAgICAgICA/IHRoaXMuY3VzdG9tQmFzZVBhdGhcbiAgICAgICAgICAgICAgICA6IHRoaXMuZGVmYXVsdEJhc2VQYXRoICsgeHJJbnB1dFNvdXJjZS5wcm9maWxlc1swXTtcbiAgICAgICAgICAgIHRoaXMudXJsID0gcHJvZmlsZSArICcvcHJvZmlsZS5qc29uJztcbiAgICAgICAgICAgIHRoaXMuX3Byb2ZpbGVKU09OID0gSW5wdXRQcm9maWxlLkNhY2hlLmdldCh0aGlzLnVybCkgPz8gbnVsbDtcbiAgICAgICAgICAgIGlmICh0aGlzLl9wcm9maWxlSlNPTiAhPSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGZldGNoKHRoaXMudXJsKVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgLnRoZW4oKG91dCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX3Byb2ZpbGVKU09OID0gb3V0O1xuICAgICAgICAgICAgICAgIElucHV0UHJvZmlsZS5DYWNoZS5zZXQodGhpcy51cmwsIHRoaXMuX3Byb2ZpbGVKU09OKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2lzTW9kZWxMb2FkZWQoKSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbG9hZEFuZE1hcEdhbWVwYWQocHJvZmlsZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBsb2FkIHByb2ZpbGUgZnJvbSAke3RoaXMudXJsfS4gUmVhc29uOmAsIGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIDNEIGNvbnRyb2xsZXIgbW9kZWwgaXMgbG9hZGVkLlxuICAgICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgbW9kZWwgaXMgbG9hZGVkOyBvdGhlcndpc2UsIGZhbHNlLlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfaXNNb2RlbExvYWRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRyb2xsZXJNb2RlbCAhPT0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9hZHMgdGhlIDNEIGNvbnRyb2xsZXIgbW9kZWwgYW5kIGNhY2hlcyB0aGUgbWFwcGluZyB0byB0aGUgZ2FtZXBhZC5cbiAgICAgKiBAcGFyYW0gcHJvZmlsZSBUaGUgcGF0aCB0byB0aGUgaW5wdXQgcHJvZmlsZS5cbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgYXN5bmMgX2xvYWRBbmRNYXBHYW1lcGFkKHByb2ZpbGUpIHtcbiAgICAgICAgY29uc3QgYXNzZXRQYXRoID0gcHJvZmlsZSArICcvJyArIHRoaXMuX2hhbmRlZG5lc3MgKyAnLmdsYic7XG4gICAgICAgIHRoaXMuX2NvbnRyb2xsZXJNb2RlbCA9IHRoaXMuZGVmYXVsdENvbnRyb2xsZXI7XG4gICAgICAgIGlmICghdGhpcy5tYXBUb0RlZmF1bHRDb250cm9sbGVyKSB7XG4gICAgICAgICAgICAvKiogbG9hZCAzZCBtb2RlbCBpbiB0aGUgcnVudGltZSB3aXRoIHByb2ZpbGUgdXJsICovXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NvbnRyb2xsZXJNb2RlbCA9IChhd2FpdCB0aGlzLmVuZ2luZS5zY2VuZS5hcHBlbmQoYXNzZXRQYXRoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBsb2FkIGktcCBjb250cm9sbGVyIG1vZGVsLiBSZWFzb246YCwgZSwgYENvbnRpbnVpbmcgd2l0aCAke3RoaXMuX2hhbmRlZG5lc3N9IGRlZmF1bHQgY29udHJvbGxlci5gKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRDb21wb25lbnRzQWN0aXZlKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fY29udHJvbGxlck1vZGVsLnBhcmVudCA9IHRoaXMub2JqZWN0O1xuICAgICAgICAgICAgdGhpcy5fY29udHJvbGxlck1vZGVsLnNldFBvc2l0aW9uTG9jYWwoWzAsIDAsIDBdKTtcbiAgICAgICAgICAgIHRoaXMuX3NldENvbXBvbmVudHNBY3RpdmUoZmFsc2UpO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWRkVnJNb2RlU3dpdGNoKVxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbnRyb2xsZXJNb2RlbC5hZGRDb21wb25lbnQoVnJNb2RlQWN0aXZlU3dpdGNoKTtcbiAgICAgICAgICAgIHRoaXMub25Nb2RlbExvYWRlZC5ub3RpZnkoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jYWNoZUdhbWVwYWRPYmplY3RzRnJvbVByb2ZpbGUodGhpcy5fcHJvZmlsZUpTT04sIHRoaXMuX2NvbnRyb2xsZXJNb2RlbCk7XG4gICAgICAgIHRoaXMuX3NldEhhbmRUcmFja2luZ0NvbnRyb2xsZXJzKHRoaXMuX2NvbnRyb2xsZXJNb2RlbCk7XG4gICAgICAgIHRoaXMudXBkYXRlID0gKCkgPT4gdGhpcy5fbWFwR2FtZXBhZElucHV0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhY2hlcyBnYW1lcGFkIG9iamVjdHMgKGJ1dHRvbnMsIGF4ZXMpIGZyb20gdGhlIGxvYWRlZCBpbnB1dCBwcm9maWxlLlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfY2FjaGVHYW1lcGFkT2JqZWN0c0Zyb21Qcm9maWxlKHByb2ZpbGUsIG9iaikge1xuICAgICAgICBjb25zdCBjb21wb25lbnRzID0gcHJvZmlsZS5sYXlvdXRzW3RoaXMuX2hhbmRlZG5lc3NdLmNvbXBvbmVudHM7XG4gICAgICAgIGlmICghY29tcG9uZW50cylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5fYnV0dG9ucyA9IFtdO1xuICAgICAgICB0aGlzLl9heGVzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgaSBpbiBjb21wb25lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCB2aXN1YWxSZXNwb25zZXMgPSBjb21wb25lbnRzW2ldLnZpc3VhbFJlc3BvbnNlcztcbiAgICAgICAgICAgIGZvciAoY29uc3QgaiBpbiB2aXN1YWxSZXNwb25zZXMpIHtcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgYnV0dG9ucyB3aXRoIG5ldyBpbnRlcmZhY2Ugb2YgY3VycmVudCB2aXN1YWwgcmVzcG9uc2VcbiAgICAgICAgICAgICAgICBjb25zdCB2aXN1YWxSZXNwb25zZSA9IHZpc3VhbFJlc3BvbnNlc1tqXTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZU5vZGUgPSB2aXN1YWxSZXNwb25zZS52YWx1ZU5vZGVOYW1lO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1pbk5vZGUgPSB2aXN1YWxSZXNwb25zZS5taW5Ob2RlTmFtZTtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXhOb2RlID0gdmlzdWFsUmVzcG9uc2UubWF4Tm9kZU5hbWU7XG4gICAgICAgICAgICAgICAgdGhpcy5fZ2FtZXBhZE9iamVjdHNbdmFsdWVOb2RlXSA9IG9iai5maW5kQnlOYW1lUmVjdXJzaXZlKHZhbHVlTm9kZSlbMF07XG4gICAgICAgICAgICAgICAgdGhpcy5fZ2FtZXBhZE9iamVjdHNbbWluTm9kZV0gPSBvYmouZmluZEJ5TmFtZVJlY3Vyc2l2ZShtaW5Ob2RlKVswXTtcbiAgICAgICAgICAgICAgICB0aGlzLl9nYW1lcGFkT2JqZWN0c1ttYXhOb2RlXSA9IG9iai5maW5kQnlOYW1lUmVjdXJzaXZlKG1heE5vZGUpWzBdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZGljZSA9IHZpc3VhbFJlc3BvbnNlc1tqXS5jb21wb25lbnRQcm9wZXJ0eTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLl9nYW1lcGFkT2JqZWN0c1t2YWx1ZU5vZGVdLFxuICAgICAgICAgICAgICAgICAgICBtaW46IHRoaXMuX2dhbWVwYWRPYmplY3RzW21pbk5vZGVdLFxuICAgICAgICAgICAgICAgICAgICBtYXg6IHRoaXMuX2dhbWVwYWRPYmplY3RzW21heE5vZGVdLFxuICAgICAgICAgICAgICAgICAgICBpZDogY29tcG9uZW50c1tpXS5nYW1lcGFkSW5kaWNlc1tpbmRpY2VdLCAvLyBBc3NpZ24gYSB1bmlxdWUgSURcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoaW5kaWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2J1dHRvbic6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9idXR0b25zLnB1c2gocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3hBeGlzJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAneUF4aXMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXhlcy5wdXNoKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBc3NpZ25zIGEgdHJhbnNmb3JtZWQgcG9zaXRpb24gYW5kIHJvdGF0aW9uIHRvIHRoZSB0YXJnZXQgYmFzZWQgb24gbWluaW11bSBhbmQgbWF4aW11bSB2YWx1ZXMgYW5kIGEgbm9ybWFsaXplZCBpbnB1dCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSB0YXJnZXQgb2JqZWN0IHRvIGJlIHRyYW5zZm9ybWVkLlxuICAgICAqIEBwYXJhbSBtaW4gVGhlIG1pbmltdW0gb2JqZWN0IHByb3ZpZGluZyB0cmFuc2Zvcm1hdGlvbiBsaW1pdHMuXG4gICAgICogQHBhcmFtIG1heCBUaGUgbWF4aW11bSBvYmplY3QgcHJvdmlkaW5nIHRyYW5zZm9ybWF0aW9uIGxpbWl0cy5cbiAgICAgKiBAcGFyYW0gdmFsdWUgVGhlIG5vcm1hbGl6ZWQgaW5wdXQgdmFsdWUuXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9hc3NpZ25UcmFuc2Zvcm0odGFyZ2V0LCBtaW4sIG1heCwgdmFsdWUpIHtcbiAgICAgICAgdmVjMy5sZXJwKF90ZW1wVmVjLCBtaW4uZ2V0UG9zaXRpb25Xb3JsZChtaW5UZW1wKSwgbWF4LmdldFBvc2l0aW9uV29ybGQobWF4VGVtcCksIHZhbHVlKTtcbiAgICAgICAgdGFyZ2V0LnNldFBvc2l0aW9uV29ybGQoX3RlbXBWZWMpO1xuICAgICAgICBxdWF0LmxlcnAoX3RlbXBRdWF0LCBtaW4uZ2V0Um90YXRpb25Xb3JsZChfdGVtcFJvdGF0aW9uMSksIG1heC5nZXRSb3RhdGlvbldvcmxkKF90ZW1wUm90YXRpb24yKSwgdmFsdWUpO1xuICAgICAgICBxdWF0Lm5vcm1hbGl6ZShfdGVtcFF1YXQsIF90ZW1wUXVhdCk7XG4gICAgICAgIHRhcmdldC5zZXRSb3RhdGlvbldvcmxkKF90ZW1wUXVhdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hcHMgaW5wdXQgdmFsdWVzIChidXR0b25zLCBheGVzKSB0byB0aGUgM0QgY29udHJvbGxlciBtb2RlbC5cbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX21hcEdhbWVwYWRJbnB1dCgpIHtcbiAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgdGhpcy5fYnV0dG9ucykge1xuICAgICAgICAgICAgY29uc3QgYnV0dG9uVmFsdWUgPSB0aGlzLmdhbWVwYWQuYnV0dG9uc1tidXR0b24uaWRdLnZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fYXNzaWduVHJhbnNmb3JtKGJ1dHRvbi50YXJnZXQsIGJ1dHRvbi5taW4sIGJ1dHRvbi5tYXgsIGJ1dHRvblZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGF4aXMgb2YgdGhpcy5fYXhlcykge1xuICAgICAgICAgICAgY29uc3QgYXhpc1ZhbHVlID0gdGhpcy5nYW1lcGFkLmF4ZXNbYXhpcy5pZF07XG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkQXhpc1ZhbHVlID0gKGF4aXNWYWx1ZSArIDEpIC8gMjtcbiAgICAgICAgICAgIHRoaXMuX2Fzc2lnblRyYW5zZm9ybShheGlzLnRhcmdldCwgYXhpcy5taW4sIGF4aXMubWF4LCBub3JtYWxpemVkQXhpc1ZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmVudW0oaGFuZHMsIDApXG5dLCBJbnB1dFByb2ZpbGUucHJvdG90eXBlLCBcImhhbmRlZG5lc3NcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LnN0cmluZygnaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9Ad2VieHItaW5wdXQtcHJvZmlsZXMvYXNzZXRzQGxhdGVzdC9kaXN0L3Byb2ZpbGVzLycpXG5dLCBJbnB1dFByb2ZpbGUucHJvdG90eXBlLCBcImRlZmF1bHRCYXNlUGF0aFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuc3RyaW5nKClcbl0sIElucHV0UHJvZmlsZS5wcm90b3R5cGUsIFwiY3VzdG9tQmFzZVBhdGhcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5Lm9iamVjdCgpXG5dLCBJbnB1dFByb2ZpbGUucHJvdG90eXBlLCBcImRlZmF1bHRDb250cm9sbGVyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5vYmplY3QoKVxuXSwgSW5wdXRQcm9maWxlLnByb3RvdHlwZSwgXCJ0cmFja2VkSGFuZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuYm9vbChmYWxzZSlcbl0sIElucHV0UHJvZmlsZS5wcm90b3R5cGUsIFwibWFwVG9EZWZhdWx0Q29udHJvbGxlclwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuYm9vbCh0cnVlKVxuXSwgSW5wdXRQcm9maWxlLnByb3RvdHlwZSwgXCJhZGRWck1vZGVTd2l0Y2hcIiwgdm9pZCAwKTtcbmV4cG9ydCB7IElucHV0UHJvZmlsZSB9O1xuIiwgInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaS9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IGRlZzJyYWQsIHJhZDJkZWcgfSBmcm9tICcuL3V0aWxzL3V0aWxzLmpzJztcbmltcG9ydCB7IHF1YXQsIHZlYzMgfSBmcm9tICdnbC1tYXRyaXgnO1xuY29uc3QgcHJldmVudERlZmF1bHQgPSAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbn07XG5jb25zdCB0ZW1wVmVjID0gWzAsIDAsIDBdO1xuY29uc3QgdGVtcHF1YXQgPSBxdWF0LmNyZWF0ZSgpO1xuY29uc3QgdGVtcHF1YXQyID0gcXVhdC5jcmVhdGUoKTtcbmNvbnN0IHRlbXBWZWMzID0gdmVjMy5jcmVhdGUoKTtcbi8qKlxuICogT3JiaXRhbENhbWVyYSBjb21wb25lbnQgYWxsb3dzIHRoZSB1c2VyIHRvIG9yYml0IGFyb3VuZCBhIHRhcmdldCBwb2ludCwgd2hpY2hcbiAqIGlzIHRoZSBwb3NpdGlvbiBvZiB0aGUgb2JqZWN0IGl0c2VsZi4gSXQgcm90YXRlcyBhdCB0aGUgc3BlY2lmaWVkIGRpc3RhbmNlLlxuICpcbiAqIEByZW1hcmtzXG4gKiBUaGUgY29tcG9uZW50IHdvcmtzIHVzaW5nIG1vdXNlIG9yIHRvdWNoLiBUaGVyZWZvciBpdCBkb2VzIG5vdCB3b3JrIGluIFZSLlxuICovXG5jbGFzcyBPcmJpdGFsQ2FtZXJhIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnb3JiaXRhbC1jYW1lcmEnO1xuICAgIG1vdXNlQnV0dG9uSW5kZXggPSAwO1xuICAgIHJhZGlhbCA9IDU7XG4gICAgbWluRWxldmF0aW9uID0gMC4wO1xuICAgIG1heEVsZXZhdGlvbiA9IDg5Ljk5O1xuICAgIG1pblpvb20gPSAwLjAxO1xuICAgIG1heFpvb20gPSAxMC4wO1xuICAgIHhTZW5zaXRpdml0eSA9IDAuNTtcbiAgICB5U2Vuc2l0aXZpdHkgPSAwLjU7XG4gICAgem9vbVNlbnNpdGl2aXR5ID0gMC4wMjtcbiAgICBkYW1waW5nID0gMC45O1xuICAgIF9tb3VzZURvd24gPSBmYWxzZTtcbiAgICBfb3JpZ2luID0gWzAsIDAsIDBdO1xuICAgIF9hemltdXRoID0gMDtcbiAgICBfcG9sYXIgPSA0NTtcbiAgICBfaW5pdGlhbFBpbmNoRGlzdGFuY2UgPSAwO1xuICAgIF90b3VjaFN0YXJ0WCA9IDA7XG4gICAgX3RvdWNoU3RhcnRZID0gMDtcbiAgICBfYXppbXV0aFNwZWVkID0gMDtcbiAgICBfcG9sYXJTcGVlZCA9IDA7XG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5vYmplY3QuZ2V0UG9zaXRpb25Xb3JsZCh0aGlzLl9vcmlnaW4pO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlQ2FtZXJhKCk7XG4gICAgfVxuICAgIG9uQWN0aXZhdGUoKSB7XG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuZW5naW5lLmNhbnZhcztcbiAgICAgICAgaWYgKHRoaXMubW91c2VCdXR0b25JbmRleCA9PT0gMikge1xuICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgcHJldmVudERlZmF1bHQsIHsgcGFzc2l2ZTogZmFsc2UgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuX29uTW91c2VEb3duKTtcbiAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgdGhpcy5fb25Nb3VzZVNjcm9sbCwgeyBwYXNzaXZlOiBmYWxzZSB9KTtcbiAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLl9vblRvdWNoU3RhcnQsIHsgcGFzc2l2ZTogZmFsc2UgfSk7XG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLl9vblRvdWNoTW92ZSwgeyBwYXNzaXZlOiBmYWxzZSB9KTtcbiAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5fb25Ub3VjaEVuZCk7XG4gICAgfVxuICAgIG9uRGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgY29uc3QgY2FudmFzID0gdGhpcy5lbmdpbmUuY2FudmFzO1xuICAgICAgICBpZiAodGhpcy5tb3VzZUJ1dHRvbkluZGV4ID09PSAyKSB7XG4gICAgICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBwcmV2ZW50RGVmYXVsdCk7XG4gICAgICAgIH1cbiAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX29uTW91c2VNb3ZlKTtcbiAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuX29uTW91c2VEb3duKTtcbiAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3doZWVsJywgdGhpcy5fb25Nb3VzZVNjcm9sbCk7XG4gICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5fb25Ub3VjaFN0YXJ0KTtcbiAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX29uVG91Y2hNb3ZlKTtcbiAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5fb25Ub3VjaEVuZCk7XG4gICAgICAgIC8qIFJlc2V0IHN0YXRlIHRvIG1ha2Ugc3VyZSBub3RoaW5nIGdldHMgc3R1Y2sgKi9cbiAgICAgICAgdGhpcy5fbW91c2VEb3duID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2luaXRpYWxQaW5jaERpc3RhbmNlID0gMDtcbiAgICAgICAgdGhpcy5fdG91Y2hTdGFydFggPSAwO1xuICAgICAgICB0aGlzLl90b3VjaFN0YXJ0WSA9IDA7XG4gICAgICAgIHRoaXMuX2F6aW11dGhTcGVlZCA9IDA7XG4gICAgICAgIHRoaXMuX3BvbGFyU3BlZWQgPSAwO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIC8qIEFsd2F5cyBhcHBseSBkYW1waW5nLCBiZWNhdXNlIHRoZXJlJ3Mgbm8gZXZlbnQgZm9yIHN0b3AgbW92aW5nICovXG4gICAgICAgIHRoaXMuX2F6aW11dGhTcGVlZCAqPSB0aGlzLmRhbXBpbmc7XG4gICAgICAgIHRoaXMuX3BvbGFyU3BlZWQgKj0gdGhpcy5kYW1waW5nO1xuICAgICAgICAvKiBTdG9wIGNvbXBsZXRlbHkgaWYgdGhlIHNwZWVkIGlzIHZlcnkgbG93IHRvIGF2b2lkIGVuZGxlc3MgdGlueSBtb3ZlbWVudHMgKi9cbiAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMuX2F6aW11dGhTcGVlZCkgPCAwLjAxKVxuICAgICAgICAgICAgdGhpcy5fYXppbXV0aFNwZWVkID0gMDtcbiAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMuX3BvbGFyU3BlZWQpIDwgMC4wMSlcbiAgICAgICAgICAgIHRoaXMuX3BvbGFyU3BlZWQgPSAwO1xuICAgICAgICAvKiBBcHBseSB0aGUgc3BlZWQgdG8gdGhlIGNhbWVyYSBhbmdsZXMgKi9cbiAgICAgICAgdGhpcy5fYXppbXV0aCArPSB0aGlzLl9hemltdXRoU3BlZWQ7XG4gICAgICAgIHRoaXMuX3BvbGFyICs9IHRoaXMuX3BvbGFyU3BlZWQ7XG4gICAgICAgIC8qIENsYW1wIHRoZSBwb2xhciBhbmdsZSAqL1xuICAgICAgICB0aGlzLl9wb2xhciA9IE1hdGgubWluKHRoaXMubWF4RWxldmF0aW9uLCBNYXRoLm1heCh0aGlzLm1pbkVsZXZhdGlvbiwgdGhpcy5fcG9sYXIpKTtcbiAgICAgICAgLyogVXBkYXRlIHRoZSBjYW1lcmEgaWYgdGhlcmUncyBhbnkgc3BlZWQgKi9cbiAgICAgICAgaWYgKHRoaXMuX2F6aW11dGhTcGVlZCAhPT0gMCB8fCB0aGlzLl9wb2xhclNwZWVkICE9PSAwKSB7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVDYW1lcmEoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGNsb3Nlc3QgcG9zaXRpb24gdG8gdGhlIGdpdmVuIHBvc2l0aW9uIG9uIHRoZSBvcmJpdCBzcGhlcmUgb2YgdGhlIGNhbWVyYS5cbiAgICAgKiBUaGlzIGNhbiBiZSB1c2VkIHRvIGdldCBhIHBvc2l0aW9uIGFuZCByb3RhdGlvbiB0byB0cmFuc2l0aW9uIHRvLlxuICAgICAqXG4gICAgICogWW91IHBhc3MgdGhpcyBhIHBvc2l0aW9uIG9iamVjdC4gVGhlIG1ldGhvZCBjYWxjdWxhdGVzIHRoZSBjbG9zZXN0IHBvc2l0aXRpb24gYW5kIHVwZGF0ZXMgdGhlIHBvc2l0aW9uIHBhcmFtZXRlci5cbiAgICAgKiBJdCBhbHNvIHNldHMgdGhlIHJvdGF0aW9uIHBhcmFtZXRlciB0byByZWZsZWN0IHRoZSByb3RhdGUgdGhlIGNhbWVyYSB3aWxsIGhhdmUgd2hlbiBpdCBpcyBvbiB0aGUgb3JiaXQgc3BoZXJlLFxuICAgICAqIHBvaW50aW5nIHRvd2FyZHMgdGhlIGNlbnRlci5cbiAgICAgKiBAcGFyYW0gcG9zaXRpb24gdGhlIHBvc2l0aW9uIHRvIGdldCB0aGUgY2xvc2VzdCBwb3NpdGlvbiB0b1xuICAgICAqIEBwYXJhbSByb3RhdGlvbiB0aGUgcm90YXRpb24gdG8gZ2V0IHRoZSBjbG9zZXN0IHBvc2l0aW9uIHRvXG4gICAgICovXG4gICAgZ2V0Q2xvc2VzdFBvc2l0aW9uKHBvc2l0aW9uLCByb3RhdGlvbikge1xuICAgICAgICAvKiBJdCdzIGEgYml0IGhhY2t5LCBidXQgdGhlIGVhc2llc3Qgd2F5IHRvIGdldCB0aGUgcm90YXRpb24gb2YgdGhlIGNhbWVyYSBpcyBqdXN0IGJyaWVmbHlcbiAgICAgICAgIGNoYW5nZSB0aGUgcm90YXRpb24gdG8gbG9vayBhdCB0aGUgY2VudGVyIGFuZCB0aGVuIGdldCB0aGUgcm90YXRpb24uICovXG4gICAgICAgIHRoaXMub2JqZWN0LmdldFJvdGF0aW9uV29ybGQodGVtcHF1YXQpO1xuICAgICAgICB0aGlzLm9iamVjdC5sb29rQXQodGhpcy5fb3JpZ2luKTtcbiAgICAgICAgdGhpcy5vYmplY3QuZ2V0Um90YXRpb25Xb3JsZCh0ZW1wcXVhdDIpO1xuICAgICAgICBpZiAocXVhdC5kb3QodGVtcHF1YXQsIHRlbXBxdWF0MikgPCAwKSB7XG4gICAgICAgICAgICBxdWF0LnNjYWxlKHRlbXBxdWF0MiwgdGVtcHF1YXQyLCAtMSk7IC8qIE5lZ2F0ZSB0byBlbnN1cmUgc2hvcnRlc3QgcGF0aCAqL1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2JqZWN0LnNldFJvdGF0aW9uV29ybGQodGVtcHF1YXQpO1xuICAgICAgICAvKiBDYWxjdWxhdGUgdGhlIGRpcmVjdGlvbiBmcm9tIHRoZSBjZW50ZXIgb2Ygb3JiaXQgdG8gdGhlIGN1cnJlbnQgY2FtZXJhIHBvc2l0aW9uICovXG4gICAgICAgIGNvbnN0IGRpcmVjdGlvblRvQ2FtZXJhID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgdmVjMy5zdWJ0cmFjdChkaXJlY3Rpb25Ub0NhbWVyYSwgcG9zaXRpb24sIHRoaXMuX29yaWdpbik7XG4gICAgICAgIHZlYzMubm9ybWFsaXplKGRpcmVjdGlvblRvQ2FtZXJhLCBkaXJlY3Rpb25Ub0NhbWVyYSk7XG4gICAgICAgIC8qIFNjYWxlIHRoaXMgZGlyZWN0aW9uIGJ5IHRoZSByYWRpdXMgb2YgeW91ciBvcmJpdGFsIHNwaGVyZSB0byBnZXQgdGhlIG5lYXJlc3QgcG9pbnQgb24gdGhlIHNwaGVyZSAqL1xuICAgICAgICBjb25zdCBuZWFyZXN0UG9pbnRPblNwaGVyZSA9IHZlYzMuY3JlYXRlKCk7XG4gICAgICAgIHZlYzMuc2NhbGUobmVhcmVzdFBvaW50T25TcGhlcmUsIGRpcmVjdGlvblRvQ2FtZXJhLCB0aGlzLnJhZGlhbCk7XG4gICAgICAgIHZlYzMuYWRkKG5lYXJlc3RQb2ludE9uU3BoZXJlLCBuZWFyZXN0UG9pbnRPblNwaGVyZSwgdGhpcy5fb3JpZ2luKTtcbiAgICAgICAgdmVjMy5jb3B5KHBvc2l0aW9uLCBuZWFyZXN0UG9pbnRPblNwaGVyZSk7XG4gICAgICAgIHF1YXQuY29weShyb3RhdGlvbiwgdGVtcHF1YXQyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjYW1lcmEgcG9zaXRpb24gYmFzZWQgb24gdGhlIGdpdmVuIHBvc2l0aW9uIGFuZCBjYWxjdWxhdGUgdGhlIHJvdGF0aW9uLlxuICAgICAqIEBwYXJhbSBjYW1lcmFQb3NpdGlvbiB0aGUgcG9zaXRpb24gdG8gc2V0IHRoZSBjYW1lcmEgdG9cbiAgICAgKi9cbiAgICBzZXRQb3NpdGlvbihjYW1lcmFQb3NpdGlvbikge1xuICAgICAgICBjb25zdCBjZW50ZXJPZk9yYml0ID0gdGhpcy5fb3JpZ2luO1xuICAgICAgICAvKiBDb21wdXRlIHRoZSBkaXJlY3Rpb24gdmVjdG9yICovXG4gICAgICAgIHZlYzMuc3VidHJhY3QodGVtcFZlYzMsIGNhbWVyYVBvc2l0aW9uLCBjZW50ZXJPZk9yYml0KTtcbiAgICAgICAgdmVjMy5ub3JtYWxpemUodGVtcFZlYzMsIHRlbXBWZWMzKTtcbiAgICAgICAgLyogQ29tcHV0ZSB0aGUgYXppbXV0aCBhbmdsZSAoaW4gcmFkaWFucykgKi9cbiAgICAgICAgY29uc3QgYXppbXV0aCA9IE1hdGguYXRhbjIodGVtcFZlYzNbMF0sIHRlbXBWZWMzWzJdKTtcbiAgICAgICAgLyogQ29tcHV0ZSB0aGUgcG9sYXIgYW5nbGUgKGluIHJhZGlhbnMpICovXG4gICAgICAgIGNvbnN0IHBvbGFyID0gTWF0aC5hY29zKHRlbXBWZWMzWzFdKTtcbiAgICAgICAgY29uc3QgYXppbXV0aERlZyA9IHJhZDJkZWcoYXppbXV0aCk7XG4gICAgICAgIC8qIFBvbGFyIGlzIGludmVydGVkIHRvIG1hdGNoIHRoZSBvcmJpdGFsIGNhbWVyYSAqL1xuICAgICAgICBjb25zdCBwb2xhckRlZyA9IDkwIC0gcmFkMmRlZyhwb2xhcik7XG4gICAgICAgIHRoaXMuX2F6aW11dGggPSBhemltdXRoRGVnO1xuICAgICAgICB0aGlzLl9wb2xhciA9IHBvbGFyRGVnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGNhbWVyYSBwb3NpdGlvbiBiYXNlZCBvbiB0aGUgY3VycmVudCBhemltdXRoLFxuICAgICAqIHBvbGFyIGFuZCByYWRpYWwgdmFsdWVzXG4gICAgICovXG4gICAgX3VwZGF0ZUNhbWVyYSgpIHtcbiAgICAgICAgY29uc3QgYXppbXV0aEluUmFkaWFucyA9IGRlZzJyYWQodGhpcy5fYXppbXV0aCk7XG4gICAgICAgIGNvbnN0IHBvbGFySW5SYWRpYW5zID0gZGVnMnJhZCh0aGlzLl9wb2xhcik7XG4gICAgICAgIHRlbXBWZWNbMF0gPSB0aGlzLnJhZGlhbCAqIE1hdGguc2luKGF6aW11dGhJblJhZGlhbnMpICogTWF0aC5jb3MocG9sYXJJblJhZGlhbnMpO1xuICAgICAgICB0ZW1wVmVjWzFdID0gdGhpcy5yYWRpYWwgKiBNYXRoLnNpbihwb2xhckluUmFkaWFucyk7XG4gICAgICAgIHRlbXBWZWNbMl0gPSB0aGlzLnJhZGlhbCAqIE1hdGguY29zKGF6aW11dGhJblJhZGlhbnMpICogTWF0aC5jb3MocG9sYXJJblJhZGlhbnMpO1xuICAgICAgICB0aGlzLm9iamVjdC5zZXRQb3NpdGlvbldvcmxkKHRlbXBWZWMpO1xuICAgICAgICB0aGlzLm9iamVjdC50cmFuc2xhdGVXb3JsZCh0aGlzLl9vcmlnaW4pO1xuICAgICAgICB0aGlzLm9iamVjdC5sb29rQXQodGhpcy5fb3JpZ2luKTtcbiAgICB9XG4gICAgLyogTW91c2UgRXZlbnQgSGFuZGxlcnMgKi9cbiAgICBfb25Nb3VzZURvd24gPSAoZSkgPT4ge1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX29uTW91c2VVcCk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9vbk1vdXNlTW92ZSk7XG4gICAgICAgIGlmIChlLmJ1dHRvbiA9PT0gdGhpcy5tb3VzZUJ1dHRvbkluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLl9tb3VzZURvd24gPSB0cnVlO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSAnZ3JhYmJpbmcnO1xuICAgICAgICAgICAgaWYgKGUuYnV0dG9uID09PSAxKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvKiB0byBwcmV2ZW50IHNjcm9sbGluZyAqL1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgX29uTW91c2VVcCA9IChlKSA9PiB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5fb25Nb3VzZVVwKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX29uTW91c2VNb3ZlKTtcbiAgICAgICAgaWYgKGUuYnV0dG9uID09PSB0aGlzLm1vdXNlQnV0dG9uSW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMuX21vdXNlRG93biA9IGZhbHNlO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSAnaW5pdGlhbCc7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIF9vbk1vdXNlTW92ZSA9IChlKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZSAmJiB0aGlzLl9tb3VzZURvd24pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZSAmJiB0aGlzLl9tb3VzZURvd24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9hemltdXRoU3BlZWQgPSAtKGUubW92ZW1lbnRYICogdGhpcy54U2Vuc2l0aXZpdHkpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3BvbGFyU3BlZWQgPSBlLm1vdmVtZW50WSAqIHRoaXMueVNlbnNpdGl2aXR5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBfb25Nb3VzZVNjcm9sbCA9IChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgLyogdG8gcHJldmVudCBzY3JvbGxpbmcgKi9cbiAgICAgICAgdGhpcy5yYWRpYWwgKj0gMSAtIGUuZGVsdGFZICogdGhpcy56b29tU2Vuc2l0aXZpdHkgKiAtMC4wMDE7XG4gICAgICAgIHRoaXMucmFkaWFsID0gTWF0aC5taW4odGhpcy5tYXhab29tLCBNYXRoLm1heCh0aGlzLm1pblpvb20sIHRoaXMucmFkaWFsKSk7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUNhbWVyYSgpO1xuICAgIH07XG4gICAgLyogVG91Y2ggZXZlbnQgaGFuZGxlcnMgKi9cbiAgICBfb25Ub3VjaFN0YXJ0ID0gKGUpID0+IHtcbiAgICAgICAgaWYgKGUudG91Y2hlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIC8qIHRvIHByZXZlbnQgc2Nyb2xsaW5nIGFuZCBhbGxvdyB1cyB0byB0cmFjayB0b3VjaCBtb3ZlbWVudCAqL1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5fdG91Y2hTdGFydFggPSBlLnRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgICAgICAgIHRoaXMuX3RvdWNoU3RhcnRZID0gZS50b3VjaGVzWzBdLmNsaWVudFk7XG4gICAgICAgICAgICB0aGlzLl9tb3VzZURvd24gPSB0cnVlOyAvKiBUcmVhdCB0b3VjaCBsaWtlIG1vdXNlIGRvd24gKi9cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlLnRvdWNoZXMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICAvKiBDYWxjdWxhdGUgaW5pdGlhbCBwaW5jaCBkaXN0YW5jZSAqL1xuICAgICAgICAgICAgdGhpcy5faW5pdGlhbFBpbmNoRGlzdGFuY2UgPSB0aGlzLl9nZXREaXN0YW5jZUJldHdlZW5Ub3VjaGVzKGUudG91Y2hlcyk7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8qIFByZXZlbnQgZGVmYXVsdCBwaW5jaCBhY3Rpb25zICovXG4gICAgICAgIH1cbiAgICB9O1xuICAgIF9vblRvdWNoTW92ZSA9IChlKSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5hY3RpdmUgfHwgIXRoaXMuX21vdXNlRG93bikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgLyogdG8gcHJldmVudCBtb3ZpbmcgdGhlIHBhZ2UgKi9cbiAgICAgICAgaWYgKGUudG91Y2hlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlbHRhWCA9IGUudG91Y2hlc1swXS5jbGllbnRYIC0gdGhpcy5fdG91Y2hTdGFydFg7XG4gICAgICAgICAgICBjb25zdCBkZWx0YVkgPSBlLnRvdWNoZXNbMF0uY2xpZW50WSAtIHRoaXMuX3RvdWNoU3RhcnRZO1xuICAgICAgICAgICAgdGhpcy5fYXppbXV0aFNwZWVkID0gLShkZWx0YVggKiB0aGlzLnhTZW5zaXRpdml0eSk7XG4gICAgICAgICAgICB0aGlzLl9wb2xhclNwZWVkID0gZGVsdGFZICogdGhpcy55U2Vuc2l0aXZpdHk7XG4gICAgICAgICAgICB0aGlzLl90b3VjaFN0YXJ0WCA9IGUudG91Y2hlc1swXS5jbGllbnRYO1xuICAgICAgICAgICAgdGhpcy5fdG91Y2hTdGFydFkgPSBlLnRvdWNoZXNbMF0uY2xpZW50WTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlLnRvdWNoZXMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICAvKiBIYW5kbGUgcGluY2ggem9vbSAqL1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFBpbmNoRGlzdGFuY2UgPSB0aGlzLl9nZXREaXN0YW5jZUJldHdlZW5Ub3VjaGVzKGUudG91Y2hlcyk7XG4gICAgICAgICAgICBjb25zdCBwaW5jaFNjYWxlID0gdGhpcy5faW5pdGlhbFBpbmNoRGlzdGFuY2UgLyBjdXJyZW50UGluY2hEaXN0YW5jZTtcbiAgICAgICAgICAgIHRoaXMucmFkaWFsICo9IHBpbmNoU2NhbGU7XG4gICAgICAgICAgICB0aGlzLnJhZGlhbCA9IE1hdGgubWluKHRoaXMubWF4Wm9vbSwgTWF0aC5tYXgodGhpcy5taW5ab29tLCB0aGlzLnJhZGlhbCkpO1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlQ2FtZXJhKCk7XG4gICAgICAgICAgICAvKiBVcGRhdGUgaW5pdGlhbCBwaW5jaCBkaXN0YW5jZSBmb3IgbmV4dCBtb3ZlICovXG4gICAgICAgICAgICB0aGlzLl9pbml0aWFsUGluY2hEaXN0YW5jZSA9IGN1cnJlbnRQaW5jaERpc3RhbmNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBfb25Ub3VjaEVuZCA9IChlKSA9PiB7XG4gICAgICAgIGlmIChlLnRvdWNoZXMubGVuZ3RoIDwgMikge1xuICAgICAgICAgICAgdGhpcy5fbW91c2VEb3duID0gZmFsc2U7IC8qIFRyZWF0IHRvdWNoIGVuZCBsaWtlIG1vdXNlIHVwICovXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUudG91Y2hlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIC8qIFByZXBhcmUgZm9yIHBvc3NpYmxlIHNpbmdsZSB0b3VjaCBtb3ZlbWVudCAqL1xuICAgICAgICAgICAgdGhpcy5fdG91Y2hTdGFydFggPSBlLnRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgICAgICAgIHRoaXMuX3RvdWNoU3RhcnRZID0gZS50b3VjaGVzWzBdLmNsaWVudFk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhlbHBlciBmdW5jdGlvbiB0byBjYWxjdWxhdGUgdGhlIGRpc3RhbmNlIGJldHdlZW4gdHdvIHRvdWNoIHBvaW50c1xuICAgICAqIEBwYXJhbSB0b3VjaGVzIGxpc3Qgb2YgdG91Y2ggcG9pbnRzXG4gICAgICogQHJldHVybnMgZGlzdGFuY2UgYmV0d2VlbiB0aGUgdHdvIHRvdWNoIHBvaW50c1xuICAgICAqL1xuICAgIF9nZXREaXN0YW5jZUJldHdlZW5Ub3VjaGVzKHRvdWNoZXMpIHtcbiAgICAgICAgY29uc3QgZHggPSB0b3VjaGVzWzBdLmNsaWVudFggLSB0b3VjaGVzWzFdLmNsaWVudFg7XG4gICAgICAgIGNvbnN0IGR5ID0gdG91Y2hlc1swXS5jbGllbnRZIC0gdG91Y2hlc1sxXS5jbGllbnRZO1xuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5pbnQoKVxuXSwgT3JiaXRhbENhbWVyYS5wcm90b3R5cGUsIFwibW91c2VCdXR0b25JbmRleFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoNSlcbl0sIE9yYml0YWxDYW1lcmEucHJvdG90eXBlLCBcInJhZGlhbFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoKVxuXSwgT3JiaXRhbENhbWVyYS5wcm90b3R5cGUsIFwibWluRWxldmF0aW9uXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5mbG9hdCg4OS45OSlcbl0sIE9yYml0YWxDYW1lcmEucHJvdG90eXBlLCBcIm1heEVsZXZhdGlvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoKVxuXSwgT3JiaXRhbENhbWVyYS5wcm90b3R5cGUsIFwibWluWm9vbVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoMTAuMClcbl0sIE9yYml0YWxDYW1lcmEucHJvdG90eXBlLCBcIm1heFpvb21cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmZsb2F0KDAuNSlcbl0sIE9yYml0YWxDYW1lcmEucHJvdG90eXBlLCBcInhTZW5zaXRpdml0eVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoMC41KVxuXSwgT3JiaXRhbENhbWVyYS5wcm90b3R5cGUsIFwieVNlbnNpdGl2aXR5XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5mbG9hdCgwLjAyKVxuXSwgT3JiaXRhbENhbWVyYS5wcm90b3R5cGUsIFwiem9vbVNlbnNpdGl2aXR5XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5mbG9hdCgwLjkpXG5dLCBPcmJpdGFsQ2FtZXJhLnByb3RvdHlwZSwgXCJkYW1waW5nXCIsIHZvaWQgMCk7XG5leHBvcnQgeyBPcmJpdGFsQ2FtZXJhIH07XG4iLCAiaW1wb3J0IHtDb21wb25lbnQsIFByb3BlcnR5LCBNZXNoQ29tcG9uZW50fSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xyXG5cclxuLyoqXHJcbiAqIFNwYXduIGEgbWVzaCBvbiBYUlNlc3Npb24gJ3NlbGVjdCcgZXZlbnQuXHJcbiAqXHJcbiAqIEZvciBtb2JpbGUgQVIsICdzZWxlY3QnIGNvcnJlc3BvbmRzIHRvIGEgc2NyZWVuIHRhcC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTcGF3bk1lc2hPblNlbGVjdCBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnc3Bhd24tbWVzaC1vbi1zZWxlY3QnO1xyXG4gICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XHJcbiAgICAgICAgLyogVGhlIG1lc2ggdG8gc3Bhd24gKi9cclxuICAgICAgICBtZXNoOiBQcm9wZXJ0eS5tZXNoKCksXHJcbiAgICAgICAgLyogVGhlIG1hdGVyaWFsIHRvIHNwYXduIHRoZSBtZXNoIHdpdGggKi9cclxuICAgICAgICBtYXRlcmlhbDogUHJvcGVydHkubWF0ZXJpYWwoKSxcclxuICAgIH07XHJcblxyXG4gICAgc3RhcnQoKSB7XHJcbiAgICAgICAgLyogT25jZSBhIHNlc3Npb24gc3RhcnRzLCB3ZSB3YW50IHRvIGJpbmQgZXZlbnQgbGlzdGVuZXJzXHJcbiAgICAgICAgICogdG8gdGhlIHNlc3Npb24gKi9cclxuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvblN0YXJ0LmFkZCh0aGlzLm9uWFJTZXNzaW9uU3RhcnQuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25YUlNlc3Npb25TdGFydChzKSB7XHJcbiAgICAgICAgLyogV2Ugc2V0IHRoaXMgZnVuY3Rpb24gdXAgdG8gZ2V0IGNhbGxlZCB3aGVuIGEgc2Vzc2lvbiBzdGFydHMuXHJcbiAgICAgICAgICogVGhlICdzZWxlY3QnIGV2ZW50IGhhcHBlbnMgZWl0aGVyIG9uIHRvdWNoIG9yIHdoZW4gdGhlIHRyaWdnZXJcclxuICAgICAgICAgKiBidXR0b24gb2YgYSBjb250cm9sbGVyIGlzIHByZXNzZWQuXHJcbiAgICAgICAgICogT25jZSB0aGF0IGV2ZW50IGlzIHRyaWdnZXJlZCwgd2Ugd2FudCBzcGF3bk1lc2goKSB0byBiZSBjYWxsZWQuICovXHJcbiAgICAgICAgcy5hZGRFdmVudExpc3RlbmVyKCdzZWxlY3QnLCB0aGlzLnNwYXduTWVzaC5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBzcGF3bk1lc2goKSB7XHJcbiAgICAgICAgLyogQ3JlYXRlIGEgbmV3IG9iamVjdCBpbiB0aGUgc2NlbmUgKi9cclxuICAgICAgICBjb25zdCBzcGF3bmVkT2JqZWN0ID0gdGhpcy5lbmdpbmUuc2NlbmUuYWRkT2JqZWN0KCk7XHJcbiAgICAgICAgLyogUGxhY2UgbmV3IG9iamVjdCBhdCBjdXJyZW50IGN1cnNvciBsb2NhdGlvbiAqL1xyXG4gICAgICAgIHNwYXduZWRPYmplY3RcclxuICAgICAgICAgICAgLnNldFRyYW5zZm9ybUxvY2FsKHRoaXMub2JqZWN0LmdldFRyYW5zZm9ybVdvcmxkKCkpXHJcbiAgICAgICAgICAgIC5zY2FsZShbMC4yNSwgMC4yNSwgMC4yNV0pXHJcbiAgICAgICAgICAgIC8qIE1vdmUgb3V0IG9mIHRoZSBmbG9vciwgYXQgMC4yNSBzY2FsZSwgdGhlIG9yaWdpbiBvZlxyXG4gICAgICAgICAgICAgKiBvdXIgY3ViZSBpcyAwLjI1IGFib3ZlIHRoZSBmbG9vciAqL1xyXG4gICAgICAgICAgICAudHJhbnNsYXRlKFswLjAsIDAuMjUsIDAuMF0pO1xyXG5cclxuICAgICAgICAvKiBBZGQgYSBtZXNoIHRvIHJlbmRlciB0aGUgb2JqZWN0ICovXHJcbiAgICAgICAgY29uc3QgbWVzaCA9IHNwYXduZWRPYmplY3QuYWRkQ29tcG9uZW50KE1lc2hDb21wb25lbnQpO1xyXG4gICAgICAgIG1lc2gubWF0ZXJpYWwgPSB0aGlzLm1hdGVyaWFsO1xyXG4gICAgICAgIG1lc2gubWVzaCA9IHRoaXMubWVzaDtcclxuICAgICAgICBtZXNoLmFjdGl2ZSA9IHRydWU7XHJcbiAgICB9XHJcbn1cclxuIiwgImltcG9ydCAqIGFzIF9fd29uZGVybGFuZGVuZ2luZV9jb21wb25lbnRzIGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMnO1xuX3JlZ2lzdGVyRWRpdG9yKF9fd29uZGVybGFuZGVuZ2luZV9jb21wb25lbnRzKTtcbmltcG9ydCAqIGFzIF9DX19Vc2Vyc19taWtlbV9Eb2N1bWVudHNfV29uZGVybGFuZEVuZ2luZV9teV93b25kZXJsYW5kX2pzX3NwYXduX21lc2hfb25fc2VsZWN0X2pzIGZyb20gJ0M6L1VzZXJzL21pa2VtL0RvY3VtZW50cy9Xb25kZXJsYW5kRW5naW5lL215LXdvbmRlcmxhbmQvanMvc3Bhd24tbWVzaC1vbi1zZWxlY3QuanMnO1xuX3JlZ2lzdGVyRWRpdG9yKF9DX19Vc2Vyc19taWtlbV9Eb2N1bWVudHNfV29uZGVybGFuZEVuZ2luZV9teV93b25kZXJsYW5kX2pzX3NwYXduX21lc2hfb25fc2VsZWN0X2pzKTtcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFVQSxPQUFDLFdBQVc7QUFFVjtBQVNBLFlBQUlBLGdCQUFlLFdBQVc7QUFDNUIsZUFBSyxLQUFLO0FBQUEsUUFDWjtBQUNBLFFBQUFBLGNBQWEsWUFBWTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFLdkIsTUFBTSxXQUFXO0FBQ2YsZ0JBQUlDLFFBQU8sUUFBUUM7QUFHbkIsWUFBQUQsTUFBSyxXQUFXO0FBR2hCLFlBQUFBLE1BQUssa0JBQWtCLENBQUM7QUFDeEIsWUFBQUEsTUFBSyxnQkFBZ0I7QUFHckIsWUFBQUEsTUFBSyxVQUFVLENBQUM7QUFDaEIsWUFBQUEsTUFBSyxTQUFTLENBQUM7QUFDZixZQUFBQSxNQUFLLFNBQVM7QUFDZCxZQUFBQSxNQUFLLFVBQVU7QUFDZixZQUFBQSxNQUFLLGdCQUFnQjtBQUNyQixZQUFBQSxNQUFLLGFBQWMsT0FBTyxXQUFXLGVBQWUsT0FBTyxZQUFhLE9BQU8sWUFBWTtBQUczRixZQUFBQSxNQUFLLGFBQWE7QUFDbEIsWUFBQUEsTUFBSyxVQUFVO0FBQ2YsWUFBQUEsTUFBSyxnQkFBZ0I7QUFDckIsWUFBQUEsTUFBSyxjQUFjO0FBQ25CLFlBQUFBLE1BQUssTUFBTTtBQUdYLFlBQUFBLE1BQUssYUFBYTtBQUdsQixZQUFBQSxNQUFLLE9BQU87QUFFWixtQkFBT0E7QUFBQSxVQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFVBT0EsUUFBUSxTQUFTLEtBQUs7QUFDcEIsZ0JBQUlBLFFBQU8sUUFBUUM7QUFDbkIsa0JBQU0sV0FBVyxHQUFHO0FBR3BCLGdCQUFJLENBQUNELE1BQUssS0FBSztBQUNiLGdDQUFrQjtBQUFBLFlBQ3BCO0FBRUEsZ0JBQUksT0FBTyxRQUFRLGVBQWUsT0FBTyxLQUFLLE9BQU8sR0FBRztBQUN0RCxjQUFBQSxNQUFLLFVBQVU7QUFHZixrQkFBSUEsTUFBSyxRQUFRO0FBQ2YsdUJBQU9BO0FBQUEsY0FDVDtBQUdBLGtCQUFJQSxNQUFLLGVBQWU7QUFDdEIsZ0JBQUFBLE1BQUssV0FBVyxLQUFLLGVBQWUsS0FBS0MsUUFBTyxJQUFJLFdBQVc7QUFBQSxjQUNqRTtBQUdBLHVCQUFTLElBQUUsR0FBRyxJQUFFRCxNQUFLLE9BQU8sUUFBUSxLQUFLO0FBQ3ZDLG9CQUFJLENBQUNBLE1BQUssT0FBTyxDQUFDLEVBQUUsV0FBVztBQUU3QixzQkFBSSxNQUFNQSxNQUFLLE9BQU8sQ0FBQyxFQUFFLGFBQWE7QUFHdEMsMkJBQVMsSUFBRSxHQUFHLElBQUUsSUFBSSxRQUFRLEtBQUs7QUFDL0Isd0JBQUksUUFBUUEsTUFBSyxPQUFPLENBQUMsRUFBRSxXQUFXLElBQUksQ0FBQyxDQUFDO0FBRTVDLHdCQUFJLFNBQVMsTUFBTSxPQUFPO0FBQ3hCLDRCQUFNLE1BQU0sU0FBUyxNQUFNLFVBQVU7QUFBQSxvQkFDdkM7QUFBQSxrQkFDRjtBQUFBLGdCQUNGO0FBQUEsY0FDRjtBQUVBLHFCQUFPQTtBQUFBLFlBQ1Q7QUFFQSxtQkFBT0EsTUFBSztBQUFBLFVBQ2Q7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFVBTUEsTUFBTSxTQUFTLE9BQU87QUFDcEIsZ0JBQUlBLFFBQU8sUUFBUUM7QUFHbkIsZ0JBQUksQ0FBQ0QsTUFBSyxLQUFLO0FBQ2IsZ0NBQWtCO0FBQUEsWUFDcEI7QUFFQSxZQUFBQSxNQUFLLFNBQVM7QUFHZCxnQkFBSUEsTUFBSyxlQUFlO0FBQ3RCLGNBQUFBLE1BQUssV0FBVyxLQUFLLGVBQWUsUUFBUSxJQUFJQSxNQUFLLFNBQVNDLFFBQU8sSUFBSSxXQUFXO0FBQUEsWUFDdEY7QUFHQSxxQkFBUyxJQUFFLEdBQUcsSUFBRUQsTUFBSyxPQUFPLFFBQVEsS0FBSztBQUN2QyxrQkFBSSxDQUFDQSxNQUFLLE9BQU8sQ0FBQyxFQUFFLFdBQVc7QUFFN0Isb0JBQUksTUFBTUEsTUFBSyxPQUFPLENBQUMsRUFBRSxhQUFhO0FBR3RDLHlCQUFTLElBQUUsR0FBRyxJQUFFLElBQUksUUFBUSxLQUFLO0FBQy9CLHNCQUFJLFFBQVFBLE1BQUssT0FBTyxDQUFDLEVBQUUsV0FBVyxJQUFJLENBQUMsQ0FBQztBQUU1QyxzQkFBSSxTQUFTLE1BQU0sT0FBTztBQUN4QiwwQkFBTSxNQUFNLFFBQVMsUUFBUyxPQUFPLE1BQU07QUFBQSxrQkFDN0M7QUFBQSxnQkFDRjtBQUFBLGNBQ0Y7QUFBQSxZQUNGO0FBRUEsbUJBQU9BO0FBQUEsVUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBLFVBS0EsTUFBTSxXQUFXO0FBQ2YsZ0JBQUlBLFFBQU8sUUFBUUM7QUFHbkIscUJBQVMsSUFBRSxHQUFHLElBQUVELE1BQUssT0FBTyxRQUFRLEtBQUs7QUFDdkMsY0FBQUEsTUFBSyxPQUFPLENBQUMsRUFBRSxLQUFLO0FBQUEsWUFDdEI7QUFFQSxtQkFBT0E7QUFBQSxVQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxVQU1BLFFBQVEsV0FBVztBQUNqQixnQkFBSUEsUUFBTyxRQUFRQztBQUVuQixxQkFBUyxJQUFFRCxNQUFLLE9BQU8sU0FBTyxHQUFHLEtBQUcsR0FBRyxLQUFLO0FBQzFDLGNBQUFBLE1BQUssT0FBTyxDQUFDLEVBQUUsT0FBTztBQUFBLFlBQ3hCO0FBR0EsZ0JBQUlBLE1BQUssaUJBQWlCQSxNQUFLLE9BQU8sT0FBT0EsTUFBSyxJQUFJLFVBQVUsYUFBYTtBQUMzRSxjQUFBQSxNQUFLLElBQUksTUFBTTtBQUNmLGNBQUFBLE1BQUssTUFBTTtBQUNYLGdDQUFrQjtBQUFBLFlBQ3BCO0FBRUEsbUJBQU9BO0FBQUEsVUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxVQU9BLFFBQVEsU0FBUyxLQUFLO0FBQ3BCLG9CQUFRLFFBQVFDLFNBQVEsUUFBUSxJQUFJLFFBQVEsT0FBTyxFQUFFLENBQUM7QUFBQSxVQUN4RDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFNQSxRQUFRLFdBQVc7QUFDakIsZ0JBQUlELFFBQU8sUUFBUUM7QUFHbkIsWUFBQUQsTUFBSyxRQUFRQSxNQUFLLE1BQU1BLE1BQUssSUFBSSxTQUFTLGNBQWM7QUFHeEQsWUFBQUEsTUFBSyxhQUFhO0FBR2xCLGdCQUFJLENBQUNBLE1BQUssZUFBZTtBQUV2QixrQkFBSSxPQUFPLFVBQVUsYUFBYTtBQUNoQyxvQkFBSTtBQUNGLHNCQUFJLE9BQU8sSUFBSSxNQUFNO0FBR3JCLHNCQUFJLE9BQU8sS0FBSyxxQkFBcUIsYUFBYTtBQUNoRCxvQkFBQUEsTUFBSyxnQkFBZ0I7QUFBQSxrQkFDdkI7QUFBQSxnQkFDRixTQUFRLEdBQU47QUFDQSxrQkFBQUEsTUFBSyxVQUFVO0FBQUEsZ0JBQ2pCO0FBQUEsY0FDRixPQUFPO0FBQ0wsZ0JBQUFBLE1BQUssVUFBVTtBQUFBLGNBQ2pCO0FBQUEsWUFDRjtBQUdBLGdCQUFJO0FBQ0Ysa0JBQUksT0FBTyxJQUFJLE1BQU07QUFDckIsa0JBQUksS0FBSyxPQUFPO0FBQ2QsZ0JBQUFBLE1BQUssVUFBVTtBQUFBLGNBQ2pCO0FBQUEsWUFDRixTQUFTLEdBQVA7QUFBQSxZQUFXO0FBR2IsZ0JBQUksQ0FBQ0EsTUFBSyxTQUFTO0FBQ2pCLGNBQUFBLE1BQUssYUFBYTtBQUFBLFlBQ3BCO0FBRUEsbUJBQU9BO0FBQUEsVUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFNQSxjQUFjLFdBQVc7QUFDdkIsZ0JBQUlBLFFBQU8sUUFBUUM7QUFDbkIsZ0JBQUksWUFBWTtBQUdoQixnQkFBSTtBQUNGLDBCQUFhLE9BQU8sVUFBVSxjQUFlLElBQUksTUFBTSxJQUFJO0FBQUEsWUFDN0QsU0FBUyxLQUFQO0FBQ0EscUJBQU9EO0FBQUEsWUFDVDtBQUVBLGdCQUFJLENBQUMsYUFBYSxPQUFPLFVBQVUsZ0JBQWdCLFlBQVk7QUFDN0QscUJBQU9BO0FBQUEsWUFDVDtBQUVBLGdCQUFJLFdBQVcsVUFBVSxZQUFZLGFBQWEsRUFBRSxRQUFRLFFBQVEsRUFBRTtBQUd0RSxnQkFBSSxLQUFLQSxNQUFLLGFBQWFBLE1BQUssV0FBVyxZQUFZO0FBQ3ZELGdCQUFJLGFBQWEsR0FBRyxNQUFNLGFBQWE7QUFDdkMsZ0JBQUksYUFBYyxjQUFjLFNBQVMsV0FBVyxDQUFDLEVBQUUsTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsSUFBSTtBQUM1RSxnQkFBSSxjQUFjLEdBQUcsUUFBUSxRQUFRLE1BQU0sTUFBTSxHQUFHLFFBQVEsUUFBUSxNQUFNO0FBQzFFLGdCQUFJLGdCQUFnQixHQUFHLE1BQU0saUJBQWlCO0FBQzlDLGdCQUFJLGNBQWUsZUFBZSxpQkFBaUIsU0FBUyxjQUFjLENBQUMsR0FBRyxFQUFFLElBQUk7QUFFcEYsWUFBQUEsTUFBSyxVQUFVO0FBQUEsY0FDYixLQUFLLENBQUMsRUFBRSxDQUFDLGVBQWUsWUFBWSxVQUFVLFlBQVksWUFBWSxFQUFFLFFBQVEsUUFBUSxFQUFFO0FBQUEsY0FDMUYsTUFBTSxDQUFDLENBQUM7QUFBQSxjQUNSLE1BQU0sQ0FBQyxDQUFDLFVBQVUsWUFBWSwwQkFBMEIsRUFBRSxRQUFRLFFBQVEsRUFBRTtBQUFBLGNBQzVFLEtBQUssQ0FBQyxDQUFDLFVBQVUsWUFBWSw0QkFBNEIsRUFBRSxRQUFRLFFBQVEsRUFBRTtBQUFBLGNBQzdFLEtBQUssQ0FBQyxDQUFDLFVBQVUsWUFBWSw0QkFBNEIsRUFBRSxRQUFRLFFBQVEsRUFBRTtBQUFBLGNBQzdFLEtBQUssQ0FBQyxFQUFFLFVBQVUsWUFBWSx1QkFBdUIsS0FBSyxVQUFVLFlBQVksV0FBVyxHQUFHLFFBQVEsUUFBUSxFQUFFO0FBQUEsY0FDaEgsS0FBSyxDQUFDLENBQUMsVUFBVSxZQUFZLFlBQVksRUFBRSxRQUFRLFFBQVEsRUFBRTtBQUFBLGNBQzdELEtBQUssQ0FBQyxDQUFDLFVBQVUsWUFBWSxjQUFjLEVBQUUsUUFBUSxRQUFRLEVBQUU7QUFBQSxjQUMvRCxLQUFLLENBQUMsRUFBRSxVQUFVLFlBQVksY0FBYyxLQUFLLFVBQVUsWUFBWSxZQUFZLEtBQUssVUFBVSxZQUFZLFlBQVksR0FBRyxRQUFRLFFBQVEsRUFBRTtBQUFBLGNBQy9JLEtBQUssQ0FBQyxFQUFFLFVBQVUsWUFBWSxjQUFjLEtBQUssVUFBVSxZQUFZLFlBQVksS0FBSyxVQUFVLFlBQVksWUFBWSxHQUFHLFFBQVEsUUFBUSxFQUFFO0FBQUEsY0FDL0ksS0FBSyxDQUFDLEVBQUUsVUFBVSxZQUFZLGNBQWMsS0FBSyxVQUFVLFlBQVksWUFBWSxLQUFLLFVBQVUsWUFBWSxZQUFZLEdBQUcsUUFBUSxRQUFRLEVBQUU7QUFBQSxjQUMvSSxNQUFNLENBQUMsRUFBRSxDQUFDLGVBQWUsVUFBVSxZQUFZLDZCQUE2QixFQUFFLFFBQVEsUUFBUSxFQUFFO0FBQUEsY0FDaEcsTUFBTSxDQUFDLEVBQUUsQ0FBQyxlQUFlLFVBQVUsWUFBWSw2QkFBNkIsRUFBRSxRQUFRLFFBQVEsRUFBRTtBQUFBLGNBQ2hHLE9BQU8sQ0FBQyxDQUFDLFVBQVUsWUFBWSwwQkFBMEIsRUFBRSxRQUFRLFFBQVEsRUFBRTtBQUFBLGNBQzdFLE1BQU0sQ0FBQyxFQUFFLFVBQVUsWUFBWSxlQUFlLEtBQUssVUFBVSxZQUFZLGFBQWEsR0FBRyxRQUFRLFFBQVEsRUFBRTtBQUFBLFlBQzdHO0FBRUEsbUJBQU9BO0FBQUEsVUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFVBUUEsY0FBYyxXQUFXO0FBQ3ZCLGdCQUFJQSxRQUFPLFFBQVFDO0FBR25CLGdCQUFJRCxNQUFLLGtCQUFrQixDQUFDQSxNQUFLLEtBQUs7QUFDcEM7QUFBQSxZQUNGO0FBRUEsWUFBQUEsTUFBSyxpQkFBaUI7QUFDdEIsWUFBQUEsTUFBSyxhQUFhO0FBS2xCLGdCQUFJLENBQUNBLE1BQUssbUJBQW1CQSxNQUFLLElBQUksZUFBZSxPQUFPO0FBQzFELGNBQUFBLE1BQUssa0JBQWtCO0FBQ3ZCLGNBQUFBLE1BQUssT0FBTztBQUFBLFlBQ2Q7QUFJQSxZQUFBQSxNQUFLLGlCQUFpQkEsTUFBSyxJQUFJLGFBQWEsR0FBRyxHQUFHLEtBQUs7QUFLdkQsZ0JBQUksU0FBUyxTQUFTLEdBQUc7QUFPdkIscUJBQU9BLE1BQUssZ0JBQWdCLFNBQVNBLE1BQUssZUFBZTtBQUN2RCxvQkFBSTtBQUNGLHNCQUFJLFlBQVksSUFBSSxNQUFNO0FBSTFCLDRCQUFVLFlBQVk7QUFHdEIsa0JBQUFBLE1BQUssbUJBQW1CLFNBQVM7QUFBQSxnQkFDbkMsU0FBU0UsSUFBUDtBQUNBLGtCQUFBRixNQUFLLFVBQVU7QUFDZjtBQUFBLGdCQUNGO0FBQUEsY0FDRjtBQUdBLHVCQUFTLElBQUUsR0FBRyxJQUFFQSxNQUFLLE9BQU8sUUFBUSxLQUFLO0FBQ3ZDLG9CQUFJLENBQUNBLE1BQUssT0FBTyxDQUFDLEVBQUUsV0FBVztBQUU3QixzQkFBSSxNQUFNQSxNQUFLLE9BQU8sQ0FBQyxFQUFFLGFBQWE7QUFHdEMsMkJBQVMsSUFBRSxHQUFHLElBQUUsSUFBSSxRQUFRLEtBQUs7QUFDL0Isd0JBQUksUUFBUUEsTUFBSyxPQUFPLENBQUMsRUFBRSxXQUFXLElBQUksQ0FBQyxDQUFDO0FBRTVDLHdCQUFJLFNBQVMsTUFBTSxTQUFTLENBQUMsTUFBTSxNQUFNLFdBQVc7QUFDbEQsNEJBQU0sTUFBTSxZQUFZO0FBQ3hCLDRCQUFNLE1BQU0sS0FBSztBQUFBLG9CQUNuQjtBQUFBLGtCQUNGO0FBQUEsZ0JBQ0Y7QUFBQSxjQUNGO0FBR0EsY0FBQUEsTUFBSyxZQUFZO0FBR2pCLGtCQUFJLFNBQVNBLE1BQUssSUFBSSxtQkFBbUI7QUFDekMscUJBQU8sU0FBU0EsTUFBSztBQUNyQixxQkFBTyxRQUFRQSxNQUFLLElBQUksV0FBVztBQUduQyxrQkFBSSxPQUFPLE9BQU8sVUFBVSxhQUFhO0FBQ3ZDLHVCQUFPLE9BQU8sQ0FBQztBQUFBLGNBQ2pCLE9BQU87QUFDTCx1QkFBTyxNQUFNLENBQUM7QUFBQSxjQUNoQjtBQUdBLGtCQUFJLE9BQU9BLE1BQUssSUFBSSxXQUFXLFlBQVk7QUFDekMsZ0JBQUFBLE1BQUssSUFBSSxPQUFPO0FBQUEsY0FDbEI7QUFHQSxxQkFBTyxVQUFVLFdBQVc7QUFDMUIsdUJBQU8sV0FBVyxDQUFDO0FBR25CLGdCQUFBQSxNQUFLLGlCQUFpQjtBQUd0Qix5QkFBUyxvQkFBb0IsY0FBYyxRQUFRLElBQUk7QUFDdkQseUJBQVMsb0JBQW9CLFlBQVksUUFBUSxJQUFJO0FBQ3JELHlCQUFTLG9CQUFvQixTQUFTLFFBQVEsSUFBSTtBQUNsRCx5QkFBUyxvQkFBb0IsV0FBVyxRQUFRLElBQUk7QUFHcEQseUJBQVNHLEtBQUUsR0FBR0EsS0FBRUgsTUFBSyxPQUFPLFFBQVFHLE1BQUs7QUFDdkMsa0JBQUFILE1BQUssT0FBT0csRUFBQyxFQUFFLE1BQU0sUUFBUTtBQUFBLGdCQUMvQjtBQUFBLGNBQ0Y7QUFBQSxZQUNGO0FBR0EscUJBQVMsaUJBQWlCLGNBQWMsUUFBUSxJQUFJO0FBQ3BELHFCQUFTLGlCQUFpQixZQUFZLFFBQVEsSUFBSTtBQUNsRCxxQkFBUyxpQkFBaUIsU0FBUyxRQUFRLElBQUk7QUFDL0MscUJBQVMsaUJBQWlCLFdBQVcsUUFBUSxJQUFJO0FBRWpELG1CQUFPSDtBQUFBLFVBQ1Q7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFPQSxtQkFBbUIsV0FBVztBQUM1QixnQkFBSUEsUUFBTyxRQUFRQztBQUduQixnQkFBSUQsTUFBSyxnQkFBZ0IsUUFBUTtBQUMvQixxQkFBT0EsTUFBSyxnQkFBZ0IsSUFBSTtBQUFBLFlBQ2xDO0FBR0EsZ0JBQUksV0FBVyxJQUFJLE1BQU0sRUFBRSxLQUFLO0FBQ2hDLGdCQUFJLFlBQVksT0FBTyxZQUFZLGdCQUFnQixvQkFBb0IsV0FBVyxPQUFPLFNBQVMsU0FBUyxhQUFhO0FBQ3RILHVCQUFTLE1BQU0sV0FBVztBQUN4Qix3QkFBUSxLQUFLLHdFQUF3RTtBQUFBLGNBQ3ZGLENBQUM7QUFBQSxZQUNIO0FBRUEsbUJBQU8sSUFBSSxNQUFNO0FBQUEsVUFDbkI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFVBTUEsb0JBQW9CLFNBQVMsT0FBTztBQUNsQyxnQkFBSUEsUUFBTyxRQUFRQztBQUduQixnQkFBSSxNQUFNLFdBQVc7QUFDbkIsY0FBQUQsTUFBSyxnQkFBZ0IsS0FBSyxLQUFLO0FBQUEsWUFDakM7QUFFQSxtQkFBT0E7QUFBQSxVQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFVBT0EsY0FBYyxXQUFXO0FBQ3ZCLGdCQUFJQSxRQUFPO0FBRVgsZ0JBQUksQ0FBQ0EsTUFBSyxlQUFlLENBQUNBLE1BQUssT0FBTyxPQUFPQSxNQUFLLElBQUksWUFBWSxlQUFlLENBQUNDLFFBQU8sZUFBZTtBQUN0RztBQUFBLFlBQ0Y7QUFHQSxxQkFBUyxJQUFFLEdBQUcsSUFBRUQsTUFBSyxPQUFPLFFBQVEsS0FBSztBQUN2QyxrQkFBSUEsTUFBSyxPQUFPLENBQUMsRUFBRSxXQUFXO0FBQzVCLHlCQUFTLElBQUUsR0FBRyxJQUFFQSxNQUFLLE9BQU8sQ0FBQyxFQUFFLFFBQVEsUUFBUSxLQUFLO0FBQ2xELHNCQUFJLENBQUNBLE1BQUssT0FBTyxDQUFDLEVBQUUsUUFBUSxDQUFDLEVBQUUsU0FBUztBQUN0QywyQkFBT0E7QUFBQSxrQkFDVDtBQUFBLGdCQUNGO0FBQUEsY0FDRjtBQUFBLFlBQ0Y7QUFFQSxnQkFBSUEsTUFBSyxlQUFlO0FBQ3RCLDJCQUFhQSxNQUFLLGFBQWE7QUFBQSxZQUNqQztBQUdBLFlBQUFBLE1BQUssZ0JBQWdCLFdBQVcsV0FBVztBQUN6QyxrQkFBSSxDQUFDQSxNQUFLLGFBQWE7QUFDckI7QUFBQSxjQUNGO0FBRUEsY0FBQUEsTUFBSyxnQkFBZ0I7QUFDckIsY0FBQUEsTUFBSyxRQUFRO0FBR2Isa0JBQUksbUJBQW1CLFdBQVc7QUFDaEMsZ0JBQUFBLE1BQUssUUFBUTtBQUViLG9CQUFJQSxNQUFLLHFCQUFxQjtBQUM1Qix5QkFBT0EsTUFBSztBQUNaLGtCQUFBQSxNQUFLLFlBQVk7QUFBQSxnQkFDbkI7QUFBQSxjQUNGO0FBSUEsY0FBQUEsTUFBSyxJQUFJLFFBQVEsRUFBRSxLQUFLLGtCQUFrQixnQkFBZ0I7QUFBQSxZQUM1RCxHQUFHLEdBQUs7QUFFUixtQkFBT0E7QUFBQSxVQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxVQU1BLGFBQWEsV0FBVztBQUN0QixnQkFBSUEsUUFBTztBQUVYLGdCQUFJLENBQUNBLE1BQUssT0FBTyxPQUFPQSxNQUFLLElBQUksV0FBVyxlQUFlLENBQUNDLFFBQU8sZUFBZTtBQUNoRjtBQUFBLFlBQ0Y7QUFFQSxnQkFBSUQsTUFBSyxVQUFVLGFBQWFBLE1BQUssSUFBSSxVQUFVLGlCQUFpQkEsTUFBSyxlQUFlO0FBQ3RGLDJCQUFhQSxNQUFLLGFBQWE7QUFDL0IsY0FBQUEsTUFBSyxnQkFBZ0I7QUFBQSxZQUN2QixXQUFXQSxNQUFLLFVBQVUsZUFBZUEsTUFBSyxVQUFVLGFBQWFBLE1BQUssSUFBSSxVQUFVLGVBQWU7QUFDckcsY0FBQUEsTUFBSyxJQUFJLE9BQU8sRUFBRSxLQUFLLFdBQVc7QUFDaEMsZ0JBQUFBLE1BQUssUUFBUTtBQUdiLHlCQUFTLElBQUUsR0FBRyxJQUFFQSxNQUFLLE9BQU8sUUFBUSxLQUFLO0FBQ3ZDLGtCQUFBQSxNQUFLLE9BQU8sQ0FBQyxFQUFFLE1BQU0sUUFBUTtBQUFBLGdCQUMvQjtBQUFBLGNBQ0YsQ0FBQztBQUVELGtCQUFJQSxNQUFLLGVBQWU7QUFDdEIsNkJBQWFBLE1BQUssYUFBYTtBQUMvQixnQkFBQUEsTUFBSyxnQkFBZ0I7QUFBQSxjQUN2QjtBQUFBLFlBQ0YsV0FBV0EsTUFBSyxVQUFVLGNBQWM7QUFDdEMsY0FBQUEsTUFBSyxzQkFBc0I7QUFBQSxZQUM3QjtBQUVBLG1CQUFPQTtBQUFBLFVBQ1Q7QUFBQSxRQUNGO0FBR0EsWUFBSUMsVUFBUyxJQUFJRixjQUFhO0FBUzlCLFlBQUlLLFFBQU8sU0FBUyxHQUFHO0FBQ3JCLGNBQUlKLFFBQU87QUFHWCxjQUFJLENBQUMsRUFBRSxPQUFPLEVBQUUsSUFBSSxXQUFXLEdBQUc7QUFDaEMsb0JBQVEsTUFBTSw0REFBNEQ7QUFDMUU7QUFBQSxVQUNGO0FBRUEsVUFBQUEsTUFBSyxLQUFLLENBQUM7QUFBQSxRQUNiO0FBQ0EsUUFBQUksTUFBSyxZQUFZO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFVBTWYsTUFBTSxTQUFTLEdBQUc7QUFDaEIsZ0JBQUlKLFFBQU87QUFHWCxnQkFBSSxDQUFDQyxRQUFPLEtBQUs7QUFDZixnQ0FBa0I7QUFBQSxZQUNwQjtBQUdBLFlBQUFELE1BQUssWUFBWSxFQUFFLFlBQVk7QUFDL0IsWUFBQUEsTUFBSyxVQUFXLE9BQU8sRUFBRSxXQUFXLFdBQVksRUFBRSxTQUFTLENBQUMsRUFBRSxNQUFNO0FBQ3BFLFlBQUFBLE1BQUssU0FBUyxFQUFFLFNBQVM7QUFDekIsWUFBQUEsTUFBSyxTQUFTLEVBQUUsUUFBUTtBQUN4QixZQUFBQSxNQUFLLFFBQVEsRUFBRSxRQUFRO0FBQ3ZCLFlBQUFBLE1BQUssUUFBUSxFQUFFLFFBQVE7QUFDdkIsWUFBQUEsTUFBSyxXQUFZLE9BQU8sRUFBRSxZQUFZLGFBQWEsRUFBRSxZQUFZLGFBQWMsRUFBRSxVQUFVO0FBQzNGLFlBQUFBLE1BQUssUUFBUSxFQUFFLFFBQVE7QUFDdkIsWUFBQUEsTUFBSyxVQUFVLEVBQUUsVUFBVSxDQUFDO0FBQzVCLFlBQUFBLE1BQUssT0FBUSxPQUFPLEVBQUUsUUFBUSxXQUFZLEVBQUUsTUFBTSxDQUFDLEVBQUUsR0FBRztBQUN4RCxZQUFBQSxNQUFLLFVBQVUsRUFBRSxXQUFXLFNBQVksRUFBRSxTQUFTO0FBQ25ELFlBQUFBLE1BQUssT0FBTztBQUFBLGNBQ1YsUUFBUSxFQUFFLE9BQU8sRUFBRSxJQUFJLFNBQVMsRUFBRSxJQUFJLFNBQVM7QUFBQSxjQUMvQyxTQUFTLEVBQUUsT0FBTyxFQUFFLElBQUksVUFBVSxFQUFFLElBQUksVUFBVTtBQUFBLGNBQ2xELGlCQUFpQixFQUFFLE9BQU8sRUFBRSxJQUFJLGtCQUFrQixFQUFFLElBQUksa0JBQWtCO0FBQUEsWUFDNUU7QUFHQSxZQUFBQSxNQUFLLFlBQVk7QUFDakIsWUFBQUEsTUFBSyxTQUFTO0FBQ2QsWUFBQUEsTUFBSyxVQUFVLENBQUM7QUFDaEIsWUFBQUEsTUFBSyxhQUFhLENBQUM7QUFDbkIsWUFBQUEsTUFBSyxTQUFTLENBQUM7QUFDZixZQUFBQSxNQUFLLFlBQVk7QUFHakIsWUFBQUEsTUFBSyxTQUFTLEVBQUUsUUFBUSxDQUFDLEVBQUMsSUFBSSxFQUFFLE1BQUssQ0FBQyxJQUFJLENBQUM7QUFDM0MsWUFBQUEsTUFBSyxVQUFVLEVBQUUsU0FBUyxDQUFDLEVBQUMsSUFBSSxFQUFFLE9BQU0sQ0FBQyxJQUFJLENBQUM7QUFDOUMsWUFBQUEsTUFBSyxVQUFVLEVBQUUsU0FBUyxDQUFDLEVBQUMsSUFBSSxFQUFFLE9BQU0sQ0FBQyxJQUFJLENBQUM7QUFDOUMsWUFBQUEsTUFBSyxlQUFlLEVBQUUsY0FBYyxDQUFDLEVBQUMsSUFBSSxFQUFFLFlBQVcsQ0FBQyxJQUFJLENBQUM7QUFDN0QsWUFBQUEsTUFBSyxlQUFlLEVBQUUsY0FBYyxDQUFDLEVBQUMsSUFBSSxFQUFFLFlBQVcsQ0FBQyxJQUFJLENBQUM7QUFDN0QsWUFBQUEsTUFBSyxXQUFXLEVBQUUsVUFBVSxDQUFDLEVBQUMsSUFBSSxFQUFFLFFBQU8sQ0FBQyxJQUFJLENBQUM7QUFDakQsWUFBQUEsTUFBSyxVQUFVLEVBQUUsU0FBUyxDQUFDLEVBQUMsSUFBSSxFQUFFLE9BQU0sQ0FBQyxJQUFJLENBQUM7QUFDOUMsWUFBQUEsTUFBSyxVQUFVLEVBQUUsU0FBUyxDQUFDLEVBQUMsSUFBSSxFQUFFLE9BQU0sQ0FBQyxJQUFJLENBQUM7QUFDOUMsWUFBQUEsTUFBSyxVQUFVLEVBQUUsU0FBUyxDQUFDLEVBQUMsSUFBSSxFQUFFLE9BQU0sQ0FBQyxJQUFJLENBQUM7QUFDOUMsWUFBQUEsTUFBSyxZQUFZLEVBQUUsV0FBVyxDQUFDLEVBQUMsSUFBSSxFQUFFLFNBQVEsQ0FBQyxJQUFJLENBQUM7QUFDcEQsWUFBQUEsTUFBSyxVQUFVLEVBQUUsU0FBUyxDQUFDLEVBQUMsSUFBSSxFQUFFLE9BQU0sQ0FBQyxJQUFJLENBQUM7QUFDOUMsWUFBQUEsTUFBSyxVQUFVLEVBQUUsU0FBUyxDQUFDLEVBQUMsSUFBSSxFQUFFLE9BQU0sQ0FBQyxJQUFJLENBQUM7QUFDOUMsWUFBQUEsTUFBSyxZQUFZLEVBQUUsV0FBVyxDQUFDLEVBQUMsSUFBSSxFQUFFLFNBQVEsQ0FBQyxJQUFJLENBQUM7QUFDcEQsWUFBQUEsTUFBSyxZQUFZLENBQUM7QUFHbEIsWUFBQUEsTUFBSyxZQUFZQyxRQUFPLGlCQUFpQixDQUFDRCxNQUFLO0FBRy9DLGdCQUFJLE9BQU9DLFFBQU8sUUFBUSxlQUFlQSxRQUFPLE9BQU9BLFFBQU8sWUFBWTtBQUN4RSxjQUFBQSxRQUFPLGFBQWE7QUFBQSxZQUN0QjtBQUdBLFlBQUFBLFFBQU8sT0FBTyxLQUFLRCxLQUFJO0FBR3ZCLGdCQUFJQSxNQUFLLFdBQVc7QUFDbEIsY0FBQUEsTUFBSyxPQUFPLEtBQUs7QUFBQSxnQkFDZixPQUFPO0FBQUEsZ0JBQ1AsUUFBUSxXQUFXO0FBQ2pCLGtCQUFBQSxNQUFLLEtBQUs7QUFBQSxnQkFDWjtBQUFBLGNBQ0YsQ0FBQztBQUFBLFlBQ0g7QUFHQSxnQkFBSUEsTUFBSyxZQUFZQSxNQUFLLGFBQWEsUUFBUTtBQUM3QyxjQUFBQSxNQUFLLEtBQUs7QUFBQSxZQUNaO0FBRUEsbUJBQU9BO0FBQUEsVUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFNQSxNQUFNLFdBQVc7QUFDZixnQkFBSUEsUUFBTztBQUNYLGdCQUFJLE1BQU07QUFHVixnQkFBSUMsUUFBTyxTQUFTO0FBQ2xCLGNBQUFELE1BQUssTUFBTSxhQUFhLE1BQU0sbUJBQW1CO0FBQ2pEO0FBQUEsWUFDRjtBQUdBLGdCQUFJLE9BQU9BLE1BQUssU0FBUyxVQUFVO0FBQ2pDLGNBQUFBLE1BQUssT0FBTyxDQUFDQSxNQUFLLElBQUk7QUFBQSxZQUN4QjtBQUdBLHFCQUFTLElBQUUsR0FBRyxJQUFFQSxNQUFLLEtBQUssUUFBUSxLQUFLO0FBQ3JDLGtCQUFJLEtBQUtLO0FBRVQsa0JBQUlMLE1BQUssV0FBV0EsTUFBSyxRQUFRLENBQUMsR0FBRztBQUVuQyxzQkFBTUEsTUFBSyxRQUFRLENBQUM7QUFBQSxjQUN0QixPQUFPO0FBRUwsZ0JBQUFLLE9BQU1MLE1BQUssS0FBSyxDQUFDO0FBQ2pCLG9CQUFJLE9BQU9LLFNBQVEsVUFBVTtBQUMzQixrQkFBQUwsTUFBSyxNQUFNLGFBQWEsTUFBTSx3REFBd0Q7QUFDdEY7QUFBQSxnQkFDRjtBQUdBLHNCQUFNLDBCQUEwQixLQUFLSyxJQUFHO0FBQ3hDLG9CQUFJLENBQUMsS0FBSztBQUNSLHdCQUFNLGFBQWEsS0FBS0EsS0FBSSxNQUFNLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUFBLGdCQUM5QztBQUVBLG9CQUFJLEtBQUs7QUFDUCx3QkFBTSxJQUFJLENBQUMsRUFBRSxZQUFZO0FBQUEsZ0JBQzNCO0FBQUEsY0FDRjtBQUdBLGtCQUFJLENBQUMsS0FBSztBQUNSLHdCQUFRLEtBQUssNEZBQTRGO0FBQUEsY0FDM0c7QUFHQSxrQkFBSSxPQUFPSixRQUFPLE9BQU8sR0FBRyxHQUFHO0FBQzdCLHNCQUFNRCxNQUFLLEtBQUssQ0FBQztBQUNqQjtBQUFBLGNBQ0Y7QUFBQSxZQUNGO0FBRUEsZ0JBQUksQ0FBQyxLQUFLO0FBQ1IsY0FBQUEsTUFBSyxNQUFNLGFBQWEsTUFBTSw4Q0FBOEM7QUFDNUU7QUFBQSxZQUNGO0FBRUEsWUFBQUEsTUFBSyxPQUFPO0FBQ1osWUFBQUEsTUFBSyxTQUFTO0FBSWQsZ0JBQUksT0FBTyxTQUFTLGFBQWEsWUFBWSxJQUFJLE1BQU0sR0FBRyxDQUFDLE1BQU0sU0FBUztBQUN4RSxjQUFBQSxNQUFLLFNBQVM7QUFDZCxjQUFBQSxNQUFLLFlBQVk7QUFBQSxZQUNuQjtBQUdBLGdCQUFJTSxPQUFNTixLQUFJO0FBR2QsZ0JBQUlBLE1BQUssV0FBVztBQUNsQix5QkFBV0EsS0FBSTtBQUFBLFlBQ2pCO0FBRUEsbUJBQU9BO0FBQUEsVUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFVBUUEsTUFBTSxTQUFTLFFBQVEsVUFBVTtBQUMvQixnQkFBSUEsUUFBTztBQUNYLGdCQUFJLEtBQUs7QUFHVCxnQkFBSSxPQUFPLFdBQVcsVUFBVTtBQUM5QixtQkFBSztBQUNMLHVCQUFTO0FBQUEsWUFDWCxXQUFXLE9BQU8sV0FBVyxZQUFZQSxNQUFLLFdBQVcsWUFBWSxDQUFDQSxNQUFLLFFBQVEsTUFBTSxHQUFHO0FBRTFGLHFCQUFPO0FBQUEsWUFDVCxXQUFXLE9BQU8sV0FBVyxhQUFhO0FBRXhDLHVCQUFTO0FBSVQsa0JBQUksQ0FBQ0EsTUFBSyxXQUFXO0FBQ25CLG9CQUFJLE1BQU07QUFDVix5QkFBUyxJQUFFLEdBQUcsSUFBRUEsTUFBSyxRQUFRLFFBQVEsS0FBSztBQUN4QyxzQkFBSUEsTUFBSyxRQUFRLENBQUMsRUFBRSxXQUFXLENBQUNBLE1BQUssUUFBUSxDQUFDLEVBQUUsUUFBUTtBQUN0RDtBQUNBLHlCQUFLQSxNQUFLLFFBQVEsQ0FBQyxFQUFFO0FBQUEsa0JBQ3ZCO0FBQUEsZ0JBQ0Y7QUFFQSxvQkFBSSxRQUFRLEdBQUc7QUFDYiwyQkFBUztBQUFBLGdCQUNYLE9BQU87QUFDTCx1QkFBSztBQUFBLGdCQUNQO0FBQUEsY0FDRjtBQUFBLFlBQ0Y7QUFHQSxnQkFBSSxRQUFRLEtBQUtBLE1BQUssV0FBVyxFQUFFLElBQUlBLE1BQUssZUFBZTtBQUczRCxnQkFBSSxDQUFDLE9BQU87QUFDVixxQkFBTztBQUFBLFlBQ1Q7QUFHQSxnQkFBSSxNQUFNLENBQUMsUUFBUTtBQUNqQix1QkFBUyxNQUFNLFdBQVc7QUFBQSxZQUM1QjtBQUtBLGdCQUFJQSxNQUFLLFdBQVcsVUFBVTtBQUU1QixvQkFBTSxVQUFVO0FBR2hCLG9CQUFNLFNBQVM7QUFHZixrQkFBSSxVQUFVLE1BQU07QUFDcEIsY0FBQUEsTUFBSyxPQUFPLEtBQUs7QUFBQSxnQkFDZixPQUFPO0FBQUEsZ0JBQ1AsUUFBUSxXQUFXO0FBQ2pCLGtCQUFBQSxNQUFLLEtBQUssT0FBTztBQUFBLGdCQUNuQjtBQUFBLGNBQ0YsQ0FBQztBQUVELHFCQUFPO0FBQUEsWUFDVDtBQUdBLGdCQUFJLE1BQU0sQ0FBQyxNQUFNLFNBQVM7QUFFeEIsa0JBQUksQ0FBQyxVQUFVO0FBQ2IsZ0JBQUFBLE1BQUssV0FBVyxNQUFNO0FBQUEsY0FDeEI7QUFFQSxxQkFBTyxNQUFNO0FBQUEsWUFDZjtBQUdBLGdCQUFJQSxNQUFLLFdBQVc7QUFDbEIsY0FBQUMsUUFBTyxZQUFZO0FBQUEsWUFDckI7QUFHQSxnQkFBSSxPQUFPLEtBQUssSUFBSSxHQUFHLE1BQU0sUUFBUSxJQUFJLE1BQU0sUUFBUUQsTUFBSyxRQUFRLE1BQU0sRUFBRSxDQUFDLElBQUksR0FBSTtBQUNyRixnQkFBSSxXQUFXLEtBQUssSUFBSSxJQUFLQSxNQUFLLFFBQVEsTUFBTSxFQUFFLENBQUMsSUFBSUEsTUFBSyxRQUFRLE1BQU0sRUFBRSxDQUFDLEtBQUssTUFBUSxJQUFJO0FBQzlGLGdCQUFJLFVBQVcsV0FBVyxNQUFRLEtBQUssSUFBSSxNQUFNLEtBQUs7QUFDdEQsZ0JBQUksUUFBUUEsTUFBSyxRQUFRLE1BQU0sRUFBRSxDQUFDLElBQUk7QUFDdEMsZ0JBQUksUUFBUUEsTUFBSyxRQUFRLE1BQU0sRUFBRSxDQUFDLElBQUlBLE1BQUssUUFBUSxNQUFNLEVBQUUsQ0FBQyxLQUFLO0FBQ2pFLGtCQUFNLFVBQVU7QUFJaEIsa0JBQU0sU0FBUztBQUdmLGdCQUFJLFlBQVksV0FBVztBQUN6QixvQkFBTSxVQUFVO0FBQ2hCLG9CQUFNLFFBQVE7QUFDZCxvQkFBTSxTQUFTO0FBQ2Ysb0JBQU0sUUFBUTtBQUNkLG9CQUFNLFFBQVEsQ0FBQyxFQUFFLE1BQU0sU0FBU0EsTUFBSyxRQUFRLE1BQU0sRUFBRSxDQUFDO0FBQUEsWUFDeEQ7QUFHQSxnQkFBSSxRQUFRLE1BQU07QUFDaEIsY0FBQUEsTUFBSyxPQUFPLEtBQUs7QUFDakI7QUFBQSxZQUNGO0FBR0EsZ0JBQUksT0FBTyxNQUFNO0FBQ2pCLGdCQUFJQSxNQUFLLFdBQVc7QUFFbEIsa0JBQUksZUFBZSxXQUFXO0FBQzVCLGdCQUFBQSxNQUFLLFlBQVk7QUFDakIsMEJBQVU7QUFDVixnQkFBQUEsTUFBSyxlQUFlLEtBQUs7QUFHekIsb0JBQUksTUFBTyxNQUFNLFVBQVVBLE1BQUssU0FBVSxJQUFJLE1BQU07QUFDcEQscUJBQUssS0FBSyxlQUFlLEtBQUtDLFFBQU8sSUFBSSxXQUFXO0FBQ3BELHNCQUFNLGFBQWFBLFFBQU8sSUFBSTtBQUc5QixvQkFBSSxPQUFPLEtBQUssYUFBYSxVQUFVLGFBQWE7QUFDbEQsd0JBQU0sUUFBUSxLQUFLLGFBQWEsWUFBWSxHQUFHLE1BQU0sS0FBSyxJQUFJLEtBQUssYUFBYSxZQUFZLEdBQUcsTUFBTSxRQUFRO0FBQUEsZ0JBQy9HLE9BQU87QUFDTCx3QkFBTSxRQUFRLEtBQUssYUFBYSxNQUFNLEdBQUcsTUFBTSxLQUFLLElBQUksS0FBSyxhQUFhLE1BQU0sR0FBRyxNQUFNLFFBQVE7QUFBQSxnQkFDbkc7QUFHQSxvQkFBSSxZQUFZLFVBQVU7QUFDeEIsa0JBQUFELE1BQUssV0FBVyxNQUFNLEdBQUcsSUFBSSxXQUFXQSxNQUFLLE9BQU8sS0FBS0EsT0FBTSxLQUFLLEdBQUcsT0FBTztBQUFBLGdCQUNoRjtBQUVBLG9CQUFJLENBQUMsVUFBVTtBQUNiLDZCQUFXLFdBQVc7QUFDcEIsb0JBQUFBLE1BQUssTUFBTSxRQUFRLE1BQU0sR0FBRztBQUM1QixvQkFBQUEsTUFBSyxXQUFXO0FBQUEsa0JBQ2xCLEdBQUcsQ0FBQztBQUFBLGdCQUNOO0FBQUEsY0FDRjtBQUVBLGtCQUFJQyxRQUFPLFVBQVUsYUFBYUEsUUFBTyxJQUFJLFVBQVUsZUFBZTtBQUNwRSw2QkFBYTtBQUFBLGNBQ2YsT0FBTztBQUNMLGdCQUFBRCxNQUFLLFlBQVk7QUFHakIsZ0JBQUFBLE1BQUssS0FBSyxVQUFVLFlBQVk7QUFHaEMsZ0JBQUFBLE1BQUssWUFBWSxNQUFNLEdBQUc7QUFBQSxjQUM1QjtBQUFBLFlBQ0YsT0FBTztBQUVMLGtCQUFJLFlBQVksV0FBVztBQUN6QixxQkFBSyxjQUFjO0FBQ25CLHFCQUFLLFFBQVEsTUFBTSxVQUFVQSxNQUFLLFVBQVVDLFFBQU8sVUFBVSxLQUFLO0FBQ2xFLHFCQUFLLFNBQVMsTUFBTSxVQUFVQSxRQUFPLE9BQU87QUFDNUMscUJBQUssZUFBZSxNQUFNO0FBRzFCLG9CQUFJO0FBQ0Ysc0JBQUksT0FBTyxLQUFLLEtBQUs7QUFHckIsc0JBQUksUUFBUSxPQUFPLFlBQVksZ0JBQWdCLGdCQUFnQixXQUFXLE9BQU8sS0FBSyxTQUFTLGFBQWE7QUFFMUcsb0JBQUFELE1BQUssWUFBWTtBQUdqQiw4QkFBVTtBQUdWLHlCQUNHLEtBQUssV0FBVztBQUNmLHNCQUFBQSxNQUFLLFlBQVk7QUFDakIsMkJBQUssWUFBWTtBQUNqQiwwQkFBSSxDQUFDLFVBQVU7QUFDYix3QkFBQUEsTUFBSyxNQUFNLFFBQVEsTUFBTSxHQUFHO0FBQUEsc0JBQzlCLE9BQU87QUFDTCx3QkFBQUEsTUFBSyxXQUFXO0FBQUEsc0JBQ2xCO0FBQUEsb0JBQ0YsQ0FBQyxFQUNBLE1BQU0sV0FBVztBQUNoQixzQkFBQUEsTUFBSyxZQUFZO0FBQ2pCLHNCQUFBQSxNQUFLLE1BQU0sYUFBYSxNQUFNLEtBQUssNklBQytDO0FBR2xGLDRCQUFNLFNBQVM7QUFDZiw0QkFBTSxVQUFVO0FBQUEsb0JBQ2xCLENBQUM7QUFBQSxrQkFDTCxXQUFXLENBQUMsVUFBVTtBQUNwQixvQkFBQUEsTUFBSyxZQUFZO0FBQ2pCLDhCQUFVO0FBQ1Ysb0JBQUFBLE1BQUssTUFBTSxRQUFRLE1BQU0sR0FBRztBQUFBLGtCQUM5QjtBQUdBLHVCQUFLLGVBQWUsTUFBTTtBQUcxQixzQkFBSSxLQUFLLFFBQVE7QUFDZixvQkFBQUEsTUFBSyxNQUFNLGFBQWEsTUFBTSxLQUFLLDZJQUMrQztBQUNsRjtBQUFBLGtCQUNGO0FBR0Esc0JBQUksV0FBVyxlQUFlLE1BQU0sT0FBTztBQUN6QyxvQkFBQUEsTUFBSyxXQUFXLE1BQU0sR0FBRyxJQUFJLFdBQVdBLE1BQUssT0FBTyxLQUFLQSxPQUFNLEtBQUssR0FBRyxPQUFPO0FBQUEsa0JBQ2hGLE9BQU87QUFDTCxvQkFBQUEsTUFBSyxXQUFXLE1BQU0sR0FBRyxJQUFJLFdBQVc7QUFFdEMsc0JBQUFBLE1BQUssT0FBTyxLQUFLO0FBR2pCLDJCQUFLLG9CQUFvQixTQUFTQSxNQUFLLFdBQVcsTUFBTSxHQUFHLEdBQUcsS0FBSztBQUFBLG9CQUNyRTtBQUNBLHlCQUFLLGlCQUFpQixTQUFTQSxNQUFLLFdBQVcsTUFBTSxHQUFHLEdBQUcsS0FBSztBQUFBLGtCQUNsRTtBQUFBLGdCQUNGLFNBQVMsS0FBUDtBQUNBLGtCQUFBQSxNQUFLLE1BQU0sYUFBYSxNQUFNLEtBQUssR0FBRztBQUFBLGdCQUN4QztBQUFBLGNBQ0Y7QUFHQSxrQkFBSSxLQUFLLFFBQVEsMEZBQTBGO0FBQ3pHLHFCQUFLLE1BQU1BLE1BQUs7QUFDaEIscUJBQUssS0FBSztBQUFBLGNBQ1o7QUFHQSxrQkFBSSxxQkFBc0IsVUFBVSxPQUFPLFVBQVksQ0FBQyxLQUFLLGNBQWNDLFFBQU8sV0FBVztBQUM3RixrQkFBSSxLQUFLLGNBQWMsS0FBSyxvQkFBb0I7QUFDOUMsMEJBQVU7QUFBQSxjQUNaLE9BQU87QUFDTCxnQkFBQUQsTUFBSyxZQUFZO0FBQ2pCLGdCQUFBQSxNQUFLLFNBQVM7QUFFZCxvQkFBSSxXQUFXLFdBQVc7QUFDeEIsa0JBQUFBLE1BQUssU0FBUztBQUdkLDRCQUFVO0FBR1YsdUJBQUssb0JBQW9CQyxRQUFPLGVBQWUsVUFBVSxLQUFLO0FBQUEsZ0JBQ2hFO0FBQ0EscUJBQUssaUJBQWlCQSxRQUFPLGVBQWUsVUFBVSxLQUFLO0FBRzNELGdCQUFBRCxNQUFLLFlBQVksTUFBTSxHQUFHO0FBQUEsY0FDNUI7QUFBQSxZQUNGO0FBRUEsbUJBQU8sTUFBTTtBQUFBLFVBQ2Y7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFPQSxPQUFPLFNBQVMsSUFBSTtBQUNsQixnQkFBSUEsUUFBTztBQUdYLGdCQUFJQSxNQUFLLFdBQVcsWUFBWUEsTUFBSyxXQUFXO0FBQzlDLGNBQUFBLE1BQUssT0FBTyxLQUFLO0FBQUEsZ0JBQ2YsT0FBTztBQUFBLGdCQUNQLFFBQVEsV0FBVztBQUNqQixrQkFBQUEsTUFBSyxNQUFNLEVBQUU7QUFBQSxnQkFDZjtBQUFBLGNBQ0YsQ0FBQztBQUVELHFCQUFPQTtBQUFBLFlBQ1Q7QUFHQSxnQkFBSSxNQUFNQSxNQUFLLGFBQWEsRUFBRTtBQUU5QixxQkFBUyxJQUFFLEdBQUcsSUFBRSxJQUFJLFFBQVEsS0FBSztBQUUvQixjQUFBQSxNQUFLLFlBQVksSUFBSSxDQUFDLENBQUM7QUFHdkIsa0JBQUksUUFBUUEsTUFBSyxXQUFXLElBQUksQ0FBQyxDQUFDO0FBRWxDLGtCQUFJLFNBQVMsQ0FBQyxNQUFNLFNBQVM7QUFFM0Isc0JBQU0sUUFBUUEsTUFBSyxLQUFLLElBQUksQ0FBQyxDQUFDO0FBQzlCLHNCQUFNLFlBQVk7QUFDbEIsc0JBQU0sVUFBVTtBQUdoQixnQkFBQUEsTUFBSyxVQUFVLElBQUksQ0FBQyxDQUFDO0FBRXJCLG9CQUFJLE1BQU0sT0FBTztBQUNmLHNCQUFJQSxNQUFLLFdBQVc7QUFFbEIsd0JBQUksQ0FBQyxNQUFNLE1BQU0sY0FBYztBQUM3QjtBQUFBLG9CQUNGO0FBRUEsd0JBQUksT0FBTyxNQUFNLE1BQU0sYUFBYSxTQUFTLGFBQWE7QUFDeEQsNEJBQU0sTUFBTSxhQUFhLFFBQVEsQ0FBQztBQUFBLG9CQUNwQyxPQUFPO0FBQ0wsNEJBQU0sTUFBTSxhQUFhLEtBQUssQ0FBQztBQUFBLG9CQUNqQztBQUdBLG9CQUFBQSxNQUFLLGFBQWEsTUFBTSxLQUFLO0FBQUEsa0JBQy9CLFdBQVcsQ0FBQyxNQUFNLE1BQU0sTUFBTSxRQUFRLEtBQUssTUFBTSxNQUFNLGFBQWEsVUFBVTtBQUM1RSwwQkFBTSxNQUFNLE1BQU07QUFBQSxrQkFDcEI7QUFBQSxnQkFDRjtBQUFBLGNBQ0Y7QUFHQSxrQkFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHO0FBQ2pCLGdCQUFBQSxNQUFLLE1BQU0sU0FBUyxRQUFRLE1BQU0sTUFBTSxJQUFJO0FBQUEsY0FDOUM7QUFBQSxZQUNGO0FBRUEsbUJBQU9BO0FBQUEsVUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFVBUUEsTUFBTSxTQUFTLElBQUksVUFBVTtBQUMzQixnQkFBSUEsUUFBTztBQUdYLGdCQUFJQSxNQUFLLFdBQVcsWUFBWUEsTUFBSyxXQUFXO0FBQzlDLGNBQUFBLE1BQUssT0FBTyxLQUFLO0FBQUEsZ0JBQ2YsT0FBTztBQUFBLGdCQUNQLFFBQVEsV0FBVztBQUNqQixrQkFBQUEsTUFBSyxLQUFLLEVBQUU7QUFBQSxnQkFDZDtBQUFBLGNBQ0YsQ0FBQztBQUVELHFCQUFPQTtBQUFBLFlBQ1Q7QUFHQSxnQkFBSSxNQUFNQSxNQUFLLGFBQWEsRUFBRTtBQUU5QixxQkFBUyxJQUFFLEdBQUcsSUFBRSxJQUFJLFFBQVEsS0FBSztBQUUvQixjQUFBQSxNQUFLLFlBQVksSUFBSSxDQUFDLENBQUM7QUFHdkIsa0JBQUksUUFBUUEsTUFBSyxXQUFXLElBQUksQ0FBQyxDQUFDO0FBRWxDLGtCQUFJLE9BQU87QUFFVCxzQkFBTSxRQUFRLE1BQU0sVUFBVTtBQUM5QixzQkFBTSxZQUFZO0FBQ2xCLHNCQUFNLFVBQVU7QUFDaEIsc0JBQU0sU0FBUztBQUdmLGdCQUFBQSxNQUFLLFVBQVUsSUFBSSxDQUFDLENBQUM7QUFFckIsb0JBQUksTUFBTSxPQUFPO0FBQ2Ysc0JBQUlBLE1BQUssV0FBVztBQUVsQix3QkFBSSxNQUFNLE1BQU0sY0FBYztBQUM1QiwwQkFBSSxPQUFPLE1BQU0sTUFBTSxhQUFhLFNBQVMsYUFBYTtBQUN4RCw4QkFBTSxNQUFNLGFBQWEsUUFBUSxDQUFDO0FBQUEsc0JBQ3BDLE9BQU87QUFDTCw4QkFBTSxNQUFNLGFBQWEsS0FBSyxDQUFDO0FBQUEsc0JBQ2pDO0FBR0Esc0JBQUFBLE1BQUssYUFBYSxNQUFNLEtBQUs7QUFBQSxvQkFDL0I7QUFBQSxrQkFDRixXQUFXLENBQUMsTUFBTSxNQUFNLE1BQU0sUUFBUSxLQUFLLE1BQU0sTUFBTSxhQUFhLFVBQVU7QUFDNUUsMEJBQU0sTUFBTSxjQUFjLE1BQU0sVUFBVTtBQUMxQywwQkFBTSxNQUFNLE1BQU07QUFHbEIsd0JBQUksTUFBTSxNQUFNLGFBQWEsVUFBVTtBQUNyQyxzQkFBQUEsTUFBSyxZQUFZLE1BQU0sS0FBSztBQUFBLG9CQUM5QjtBQUFBLGtCQUNGO0FBQUEsZ0JBQ0Y7QUFFQSxvQkFBSSxDQUFDLFVBQVU7QUFDYixrQkFBQUEsTUFBSyxNQUFNLFFBQVEsTUFBTSxHQUFHO0FBQUEsZ0JBQzlCO0FBQUEsY0FDRjtBQUFBLFlBQ0Y7QUFFQSxtQkFBT0E7QUFBQSxVQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFRQSxNQUFNLFNBQVMsT0FBTyxJQUFJO0FBQ3hCLGdCQUFJQSxRQUFPO0FBR1gsZ0JBQUlBLE1BQUssV0FBVyxZQUFXQSxNQUFLLFdBQVc7QUFDN0MsY0FBQUEsTUFBSyxPQUFPLEtBQUs7QUFBQSxnQkFDZixPQUFPO0FBQUEsZ0JBQ1AsUUFBUSxXQUFXO0FBQ2pCLGtCQUFBQSxNQUFLLEtBQUssT0FBTyxFQUFFO0FBQUEsZ0JBQ3JCO0FBQUEsY0FDRixDQUFDO0FBRUQscUJBQU9BO0FBQUEsWUFDVDtBQUdBLGdCQUFJLE9BQU8sT0FBTyxhQUFhO0FBQzdCLGtCQUFJLE9BQU8sVUFBVSxXQUFXO0FBQzlCLGdCQUFBQSxNQUFLLFNBQVM7QUFBQSxjQUNoQixPQUFPO0FBQ0wsdUJBQU9BLE1BQUs7QUFBQSxjQUNkO0FBQUEsWUFDRjtBQUdBLGdCQUFJLE1BQU1BLE1BQUssYUFBYSxFQUFFO0FBRTlCLHFCQUFTLElBQUUsR0FBRyxJQUFFLElBQUksUUFBUSxLQUFLO0FBRS9CLGtCQUFJLFFBQVFBLE1BQUssV0FBVyxJQUFJLENBQUMsQ0FBQztBQUVsQyxrQkFBSSxPQUFPO0FBQ1Qsc0JBQU0sU0FBUztBQUdmLG9CQUFJLE1BQU0sV0FBVztBQUNuQixrQkFBQUEsTUFBSyxVQUFVLE1BQU0sR0FBRztBQUFBLGdCQUMxQjtBQUVBLG9CQUFJQSxNQUFLLGFBQWEsTUFBTSxPQUFPO0FBQ2pDLHdCQUFNLE1BQU0sS0FBSyxlQUFlLFFBQVEsSUFBSSxNQUFNLFNBQVNDLFFBQU8sSUFBSSxXQUFXO0FBQUEsZ0JBQ25GLFdBQVcsTUFBTSxPQUFPO0FBQ3RCLHdCQUFNLE1BQU0sUUFBUUEsUUFBTyxTQUFTLE9BQU87QUFBQSxnQkFDN0M7QUFFQSxnQkFBQUQsTUFBSyxNQUFNLFFBQVEsTUFBTSxHQUFHO0FBQUEsY0FDOUI7QUFBQSxZQUNGO0FBRUEsbUJBQU9BO0FBQUEsVUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxVQVVBLFFBQVEsV0FBVztBQUNqQixnQkFBSUEsUUFBTztBQUNYLGdCQUFJLE9BQU87QUFDWCxnQkFBSSxLQUFLO0FBR1QsZ0JBQUksS0FBSyxXQUFXLEdBQUc7QUFFckIscUJBQU9BLE1BQUs7QUFBQSxZQUNkLFdBQVcsS0FBSyxXQUFXLEtBQUssS0FBSyxXQUFXLEtBQUssT0FBTyxLQUFLLENBQUMsTUFBTSxhQUFhO0FBRW5GLGtCQUFJLE1BQU1BLE1BQUssYUFBYTtBQUM1QixrQkFBSSxRQUFRLElBQUksUUFBUSxLQUFLLENBQUMsQ0FBQztBQUMvQixrQkFBSSxTQUFTLEdBQUc7QUFDZCxxQkFBSyxTQUFTLEtBQUssQ0FBQyxHQUFHLEVBQUU7QUFBQSxjQUMzQixPQUFPO0FBQ0wsc0JBQU0sV0FBVyxLQUFLLENBQUMsQ0FBQztBQUFBLGNBQzFCO0FBQUEsWUFDRixXQUFXLEtBQUssVUFBVSxHQUFHO0FBQzNCLG9CQUFNLFdBQVcsS0FBSyxDQUFDLENBQUM7QUFDeEIsbUJBQUssU0FBUyxLQUFLLENBQUMsR0FBRyxFQUFFO0FBQUEsWUFDM0I7QUFHQSxnQkFBSTtBQUNKLGdCQUFJLE9BQU8sUUFBUSxlQUFlLE9BQU8sS0FBSyxPQUFPLEdBQUc7QUFFdEQsa0JBQUlBLE1BQUssV0FBVyxZQUFXQSxNQUFLLFdBQVc7QUFDN0MsZ0JBQUFBLE1BQUssT0FBTyxLQUFLO0FBQUEsa0JBQ2YsT0FBTztBQUFBLGtCQUNQLFFBQVEsV0FBVztBQUNqQixvQkFBQUEsTUFBSyxPQUFPLE1BQU1BLE9BQU0sSUFBSTtBQUFBLGtCQUM5QjtBQUFBLGdCQUNGLENBQUM7QUFFRCx1QkFBT0E7QUFBQSxjQUNUO0FBR0Esa0JBQUksT0FBTyxPQUFPLGFBQWE7QUFDN0IsZ0JBQUFBLE1BQUssVUFBVTtBQUFBLGNBQ2pCO0FBR0EsbUJBQUtBLE1BQUssYUFBYSxFQUFFO0FBQ3pCLHVCQUFTLElBQUUsR0FBRyxJQUFFLEdBQUcsUUFBUSxLQUFLO0FBRTlCLHdCQUFRQSxNQUFLLFdBQVcsR0FBRyxDQUFDLENBQUM7QUFFN0Isb0JBQUksT0FBTztBQUNULHdCQUFNLFVBQVU7QUFHaEIsc0JBQUksQ0FBQyxLQUFLLENBQUMsR0FBRztBQUNaLG9CQUFBQSxNQUFLLFVBQVUsR0FBRyxDQUFDLENBQUM7QUFBQSxrQkFDdEI7QUFFQSxzQkFBSUEsTUFBSyxhQUFhLE1BQU0sU0FBUyxDQUFDLE1BQU0sUUFBUTtBQUNsRCwwQkFBTSxNQUFNLEtBQUssZUFBZSxLQUFLQyxRQUFPLElBQUksV0FBVztBQUFBLGtCQUM3RCxXQUFXLE1BQU0sU0FBUyxDQUFDLE1BQU0sUUFBUTtBQUN2QywwQkFBTSxNQUFNLFNBQVMsTUFBTUEsUUFBTyxPQUFPO0FBQUEsa0JBQzNDO0FBRUEsa0JBQUFELE1BQUssTUFBTSxVQUFVLE1BQU0sR0FBRztBQUFBLGdCQUNoQztBQUFBLGNBQ0Y7QUFBQSxZQUNGLE9BQU87QUFDTCxzQkFBUSxLQUFLQSxNQUFLLFdBQVcsRUFBRSxJQUFJQSxNQUFLLFFBQVEsQ0FBQztBQUNqRCxxQkFBTyxRQUFRLE1BQU0sVUFBVTtBQUFBLFlBQ2pDO0FBRUEsbUJBQU9BO0FBQUEsVUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxVQVVBLE1BQU0sU0FBUyxNQUFNLElBQUlPLE1BQUssSUFBSTtBQUNoQyxnQkFBSVAsUUFBTztBQUdYLGdCQUFJQSxNQUFLLFdBQVcsWUFBWUEsTUFBSyxXQUFXO0FBQzlDLGNBQUFBLE1BQUssT0FBTyxLQUFLO0FBQUEsZ0JBQ2YsT0FBTztBQUFBLGdCQUNQLFFBQVEsV0FBVztBQUNqQixrQkFBQUEsTUFBSyxLQUFLLE1BQU0sSUFBSU8sTUFBSyxFQUFFO0FBQUEsZ0JBQzdCO0FBQUEsY0FDRixDQUFDO0FBRUQscUJBQU9QO0FBQUEsWUFDVDtBQUdBLG1CQUFPLEtBQUssSUFBSSxLQUFLLElBQUksR0FBRyxXQUFXLElBQUksQ0FBQyxHQUFHLENBQUM7QUFDaEQsaUJBQUssS0FBSyxJQUFJLEtBQUssSUFBSSxHQUFHLFdBQVcsRUFBRSxDQUFDLEdBQUcsQ0FBQztBQUM1QyxZQUFBTyxPQUFNLFdBQVdBLElBQUc7QUFHcEIsWUFBQVAsTUFBSyxPQUFPLE1BQU0sRUFBRTtBQUdwQixnQkFBSSxNQUFNQSxNQUFLLGFBQWEsRUFBRTtBQUM5QixxQkFBUyxJQUFFLEdBQUcsSUFBRSxJQUFJLFFBQVEsS0FBSztBQUUvQixrQkFBSSxRQUFRQSxNQUFLLFdBQVcsSUFBSSxDQUFDLENBQUM7QUFHbEMsa0JBQUksT0FBTztBQUVULG9CQUFJLENBQUMsSUFBSTtBQUNQLGtCQUFBQSxNQUFLLFVBQVUsSUFBSSxDQUFDLENBQUM7QUFBQSxnQkFDdkI7QUFHQSxvQkFBSUEsTUFBSyxhQUFhLENBQUMsTUFBTSxRQUFRO0FBQ25DLHNCQUFJLGNBQWNDLFFBQU8sSUFBSTtBQUM3QixzQkFBSSxNQUFNLGNBQWVNLE9BQU07QUFDL0Isd0JBQU0sVUFBVTtBQUNoQix3QkFBTSxNQUFNLEtBQUssZUFBZSxNQUFNLFdBQVc7QUFDakQsd0JBQU0sTUFBTSxLQUFLLHdCQUF3QixJQUFJLEdBQUc7QUFBQSxnQkFDbEQ7QUFFQSxnQkFBQVAsTUFBSyxtQkFBbUIsT0FBTyxNQUFNLElBQUlPLE1BQUssSUFBSSxDQUFDLEdBQUcsT0FBTyxPQUFPLFdBQVc7QUFBQSxjQUNqRjtBQUFBLFlBQ0Y7QUFFQSxtQkFBT1A7QUFBQSxVQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFXQSxvQkFBb0IsU0FBUyxPQUFPLE1BQU0sSUFBSU8sTUFBSyxJQUFJLFNBQVM7QUFDOUQsZ0JBQUlQLFFBQU87QUFDWCxnQkFBSSxNQUFNO0FBQ1YsZ0JBQUksT0FBTyxLQUFLO0FBQ2hCLGdCQUFJLFFBQVEsS0FBSyxJQUFJLE9BQU8sSUFBSTtBQUNoQyxnQkFBSSxVQUFVLEtBQUssSUFBSSxHQUFJLFFBQVEsSUFBS08sT0FBTSxRQUFRQSxJQUFHO0FBQ3pELGdCQUFJLFdBQVcsS0FBSyxJQUFJO0FBR3hCLGtCQUFNLFVBQVU7QUFHaEIsa0JBQU0sWUFBWSxZQUFZLFdBQVc7QUFFdkMsa0JBQUksUUFBUSxLQUFLLElBQUksSUFBSSxZQUFZQTtBQUNyQyx5QkFBVyxLQUFLLElBQUk7QUFDcEIscUJBQU8sT0FBTztBQUdkLG9CQUFNLEtBQUssTUFBTSxNQUFNLEdBQUcsSUFBSTtBQUc5QixrQkFBSSxPQUFPLEdBQUc7QUFDWixzQkFBTSxLQUFLLElBQUksSUFBSSxHQUFHO0FBQUEsY0FDeEIsT0FBTztBQUNMLHNCQUFNLEtBQUssSUFBSSxJQUFJLEdBQUc7QUFBQSxjQUN4QjtBQUdBLGtCQUFJUCxNQUFLLFdBQVc7QUFDbEIsc0JBQU0sVUFBVTtBQUFBLGNBQ2xCLE9BQU87QUFDTCxnQkFBQUEsTUFBSyxPQUFPLEtBQUssTUFBTSxLQUFLLElBQUk7QUFBQSxjQUNsQztBQUdBLGtCQUFJLFNBQVM7QUFDWCxnQkFBQUEsTUFBSyxVQUFVO0FBQUEsY0FDakI7QUFHQSxrQkFBSyxLQUFLLFFBQVEsT0FBTyxNQUFRLEtBQUssUUFBUSxPQUFPLElBQUs7QUFDeEQsOEJBQWMsTUFBTSxTQUFTO0FBQzdCLHNCQUFNLFlBQVk7QUFDbEIsc0JBQU0sVUFBVTtBQUNoQixnQkFBQUEsTUFBSyxPQUFPLElBQUksTUFBTSxHQUFHO0FBQ3pCLGdCQUFBQSxNQUFLLE1BQU0sUUFBUSxNQUFNLEdBQUc7QUFBQSxjQUM5QjtBQUFBLFlBQ0YsR0FBRyxPQUFPO0FBQUEsVUFDWjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFVBUUEsV0FBVyxTQUFTLElBQUk7QUFDdEIsZ0JBQUlBLFFBQU87QUFDWCxnQkFBSSxRQUFRQSxNQUFLLFdBQVcsRUFBRTtBQUU5QixnQkFBSSxTQUFTLE1BQU0sV0FBVztBQUM1QixrQkFBSUEsTUFBSyxXQUFXO0FBQ2xCLHNCQUFNLE1BQU0sS0FBSyxzQkFBc0JDLFFBQU8sSUFBSSxXQUFXO0FBQUEsY0FDL0Q7QUFFQSw0QkFBYyxNQUFNLFNBQVM7QUFDN0Isb0JBQU0sWUFBWTtBQUNsQixjQUFBRCxNQUFLLE9BQU8sTUFBTSxTQUFTLEVBQUU7QUFDN0Isb0JBQU0sVUFBVTtBQUNoQixjQUFBQSxNQUFLLE1BQU0sUUFBUSxFQUFFO0FBQUEsWUFDdkI7QUFFQSxtQkFBT0E7QUFBQSxVQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFVBVUEsTUFBTSxXQUFXO0FBQ2YsZ0JBQUlBLFFBQU87QUFDWCxnQkFBSSxPQUFPO0FBQ1gsZ0JBQUksTUFBTSxJQUFJO0FBR2QsZ0JBQUksS0FBSyxXQUFXLEdBQUc7QUFFckIscUJBQU9BLE1BQUs7QUFBQSxZQUNkLFdBQVcsS0FBSyxXQUFXLEdBQUc7QUFDNUIsa0JBQUksT0FBTyxLQUFLLENBQUMsTUFBTSxXQUFXO0FBQ2hDLHVCQUFPLEtBQUssQ0FBQztBQUNiLGdCQUFBQSxNQUFLLFFBQVE7QUFBQSxjQUNmLE9BQU87QUFFTCx3QkFBUUEsTUFBSyxXQUFXLFNBQVMsS0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQzdDLHVCQUFPLFFBQVEsTUFBTSxRQUFRO0FBQUEsY0FDL0I7QUFBQSxZQUNGLFdBQVcsS0FBSyxXQUFXLEdBQUc7QUFDNUIscUJBQU8sS0FBSyxDQUFDO0FBQ2IsbUJBQUssU0FBUyxLQUFLLENBQUMsR0FBRyxFQUFFO0FBQUEsWUFDM0I7QUFHQSxnQkFBSSxNQUFNQSxNQUFLLGFBQWEsRUFBRTtBQUM5QixxQkFBUyxJQUFFLEdBQUcsSUFBRSxJQUFJLFFBQVEsS0FBSztBQUMvQixzQkFBUUEsTUFBSyxXQUFXLElBQUksQ0FBQyxDQUFDO0FBRTlCLGtCQUFJLE9BQU87QUFDVCxzQkFBTSxRQUFRO0FBQ2Qsb0JBQUlBLE1BQUssYUFBYSxNQUFNLFNBQVMsTUFBTSxNQUFNLGNBQWM7QUFDN0Qsd0JBQU0sTUFBTSxhQUFhLE9BQU87QUFDaEMsc0JBQUksTUFBTTtBQUNSLDBCQUFNLE1BQU0sYUFBYSxZQUFZLE1BQU0sVUFBVTtBQUNyRCwwQkFBTSxNQUFNLGFBQWEsVUFBVSxNQUFNO0FBR3pDLHdCQUFJQSxNQUFLLFFBQVEsSUFBSSxDQUFDLENBQUMsR0FBRztBQUN4QixzQkFBQUEsTUFBSyxNQUFNLElBQUksQ0FBQyxHQUFHLElBQUk7QUFDdkIsc0JBQUFBLE1BQUssS0FBSyxJQUFJLENBQUMsR0FBRyxJQUFJO0FBQUEsb0JBQ3hCO0FBQUEsa0JBQ0Y7QUFBQSxnQkFDRjtBQUFBLGNBQ0Y7QUFBQSxZQUNGO0FBRUEsbUJBQU9BO0FBQUEsVUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxVQVVBLE1BQU0sV0FBVztBQUNmLGdCQUFJQSxRQUFPO0FBQ1gsZ0JBQUksT0FBTztBQUNYLGdCQUFJLE1BQU07QUFHVixnQkFBSSxLQUFLLFdBQVcsR0FBRztBQUVyQixtQkFBS0EsTUFBSyxRQUFRLENBQUMsRUFBRTtBQUFBLFlBQ3ZCLFdBQVcsS0FBSyxXQUFXLEdBQUc7QUFFNUIsa0JBQUksTUFBTUEsTUFBSyxhQUFhO0FBQzVCLGtCQUFJLFFBQVEsSUFBSSxRQUFRLEtBQUssQ0FBQyxDQUFDO0FBQy9CLGtCQUFJLFNBQVMsR0FBRztBQUNkLHFCQUFLLFNBQVMsS0FBSyxDQUFDLEdBQUcsRUFBRTtBQUFBLGNBQzNCLE9BQU87QUFDTCx1QkFBTyxXQUFXLEtBQUssQ0FBQyxDQUFDO0FBQUEsY0FDM0I7QUFBQSxZQUNGLFdBQVcsS0FBSyxXQUFXLEdBQUc7QUFDNUIscUJBQU8sV0FBVyxLQUFLLENBQUMsQ0FBQztBQUN6QixtQkFBSyxTQUFTLEtBQUssQ0FBQyxHQUFHLEVBQUU7QUFBQSxZQUMzQjtBQUdBLGdCQUFJO0FBQ0osZ0JBQUksT0FBTyxTQUFTLFVBQVU7QUFFNUIsa0JBQUlBLE1BQUssV0FBVyxZQUFZQSxNQUFLLFdBQVc7QUFDOUMsZ0JBQUFBLE1BQUssT0FBTyxLQUFLO0FBQUEsa0JBQ2YsT0FBTztBQUFBLGtCQUNQLFFBQVEsV0FBVztBQUNqQixvQkFBQUEsTUFBSyxLQUFLLE1BQU1BLE9BQU0sSUFBSTtBQUFBLGtCQUM1QjtBQUFBLGdCQUNGLENBQUM7QUFFRCx1QkFBT0E7QUFBQSxjQUNUO0FBR0Esa0JBQUksT0FBTyxPQUFPLGFBQWE7QUFDN0IsZ0JBQUFBLE1BQUssUUFBUTtBQUFBLGNBQ2Y7QUFHQSxtQkFBS0EsTUFBSyxhQUFhLEVBQUU7QUFDekIsdUJBQVMsSUFBRSxHQUFHLElBQUUsR0FBRyxRQUFRLEtBQUs7QUFFOUIsd0JBQVFBLE1BQUssV0FBVyxHQUFHLENBQUMsQ0FBQztBQUU3QixvQkFBSSxPQUFPO0FBR1Qsc0JBQUlBLE1BQUssUUFBUSxHQUFHLENBQUMsQ0FBQyxHQUFHO0FBQ3ZCLDBCQUFNLFlBQVlBLE1BQUssS0FBSyxHQUFHLENBQUMsQ0FBQztBQUNqQywwQkFBTSxhQUFhQSxNQUFLLFlBQVlDLFFBQU8sSUFBSSxjQUFjLE1BQU07QUFBQSxrQkFDckU7QUFDQSx3QkFBTSxRQUFRO0FBR2Qsc0JBQUlELE1BQUssYUFBYSxNQUFNLFNBQVMsTUFBTSxNQUFNLGNBQWM7QUFDN0QsMEJBQU0sTUFBTSxhQUFhLGFBQWEsZUFBZSxNQUFNQyxRQUFPLElBQUksV0FBVztBQUFBLGtCQUNuRixXQUFXLE1BQU0sT0FBTztBQUN0QiwwQkFBTSxNQUFNLGVBQWU7QUFBQSxrQkFDN0I7QUFHQSxzQkFBSSxPQUFPRCxNQUFLLEtBQUssR0FBRyxDQUFDLENBQUM7QUFDMUIsc0JBQUksWUFBYUEsTUFBSyxRQUFRLE1BQU0sT0FBTyxFQUFFLENBQUMsSUFBSUEsTUFBSyxRQUFRLE1BQU0sT0FBTyxFQUFFLENBQUMsS0FBSyxNQUFRO0FBQzVGLHNCQUFJLFVBQVcsV0FBVyxNQUFRLEtBQUssSUFBSSxNQUFNLEtBQUs7QUFHdEQsc0JBQUlBLE1BQUssV0FBVyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxTQUFTO0FBQzVDLG9CQUFBQSxNQUFLLFlBQVksR0FBRyxDQUFDLENBQUM7QUFDdEIsb0JBQUFBLE1BQUssV0FBVyxHQUFHLENBQUMsQ0FBQyxJQUFJLFdBQVdBLE1BQUssT0FBTyxLQUFLQSxPQUFNLEtBQUssR0FBRyxPQUFPO0FBQUEsa0JBQzVFO0FBRUEsa0JBQUFBLE1BQUssTUFBTSxRQUFRLE1BQU0sR0FBRztBQUFBLGdCQUM5QjtBQUFBLGNBQ0Y7QUFBQSxZQUNGLE9BQU87QUFDTCxzQkFBUUEsTUFBSyxXQUFXLEVBQUU7QUFDMUIscUJBQU8sUUFBUSxNQUFNLFFBQVFBLE1BQUs7QUFBQSxZQUNwQztBQUVBLG1CQUFPQTtBQUFBLFVBQ1Q7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFVQSxNQUFNLFdBQVc7QUFDZixnQkFBSUEsUUFBTztBQUNYLGdCQUFJLE9BQU87QUFDWCxnQkFBSSxNQUFNO0FBR1YsZ0JBQUksS0FBSyxXQUFXLEdBQUc7QUFFckIsa0JBQUlBLE1BQUssUUFBUSxRQUFRO0FBQ3ZCLHFCQUFLQSxNQUFLLFFBQVEsQ0FBQyxFQUFFO0FBQUEsY0FDdkI7QUFBQSxZQUNGLFdBQVcsS0FBSyxXQUFXLEdBQUc7QUFFNUIsa0JBQUksTUFBTUEsTUFBSyxhQUFhO0FBQzVCLGtCQUFJLFFBQVEsSUFBSSxRQUFRLEtBQUssQ0FBQyxDQUFDO0FBQy9CLGtCQUFJLFNBQVMsR0FBRztBQUNkLHFCQUFLLFNBQVMsS0FBSyxDQUFDLEdBQUcsRUFBRTtBQUFBLGNBQzNCLFdBQVdBLE1BQUssUUFBUSxRQUFRO0FBQzlCLHFCQUFLQSxNQUFLLFFBQVEsQ0FBQyxFQUFFO0FBQ3JCLHVCQUFPLFdBQVcsS0FBSyxDQUFDLENBQUM7QUFBQSxjQUMzQjtBQUFBLFlBQ0YsV0FBVyxLQUFLLFdBQVcsR0FBRztBQUM1QixxQkFBTyxXQUFXLEtBQUssQ0FBQyxDQUFDO0FBQ3pCLG1CQUFLLFNBQVMsS0FBSyxDQUFDLEdBQUcsRUFBRTtBQUFBLFlBQzNCO0FBR0EsZ0JBQUksT0FBTyxPQUFPLGFBQWE7QUFDN0IscUJBQU87QUFBQSxZQUNUO0FBR0EsZ0JBQUksT0FBTyxTQUFTLGFBQWFBLE1BQUssV0FBVyxZQUFZQSxNQUFLLFlBQVk7QUFDNUUsY0FBQUEsTUFBSyxPQUFPLEtBQUs7QUFBQSxnQkFDZixPQUFPO0FBQUEsZ0JBQ1AsUUFBUSxXQUFXO0FBQ2pCLGtCQUFBQSxNQUFLLEtBQUssTUFBTUEsT0FBTSxJQUFJO0FBQUEsZ0JBQzVCO0FBQUEsY0FDRixDQUFDO0FBRUQscUJBQU9BO0FBQUEsWUFDVDtBQUdBLGdCQUFJLFFBQVFBLE1BQUssV0FBVyxFQUFFO0FBRTlCLGdCQUFJLE9BQU87QUFDVCxrQkFBSSxPQUFPLFNBQVMsWUFBWSxRQUFRLEdBQUc7QUFFekMsb0JBQUksVUFBVUEsTUFBSyxRQUFRLEVBQUU7QUFDN0Isb0JBQUksU0FBUztBQUNYLGtCQUFBQSxNQUFLLE1BQU0sSUFBSSxJQUFJO0FBQUEsZ0JBQ3JCO0FBR0Esc0JBQU0sUUFBUTtBQUNkLHNCQUFNLFNBQVM7QUFDZixnQkFBQUEsTUFBSyxZQUFZLEVBQUU7QUFHbkIsb0JBQUksQ0FBQ0EsTUFBSyxhQUFhLE1BQU0sU0FBUyxDQUFDLE1BQU0sTUFBTSxNQUFNLFFBQVEsR0FBRztBQUNsRSx3QkFBTSxNQUFNLGNBQWM7QUFBQSxnQkFDNUI7QUFHQSxvQkFBSSxjQUFjLFdBQVc7QUFFM0Isc0JBQUksU0FBUztBQUNYLG9CQUFBQSxNQUFLLEtBQUssSUFBSSxJQUFJO0FBQUEsa0JBQ3BCO0FBRUEsa0JBQUFBLE1BQUssTUFBTSxRQUFRLEVBQUU7QUFBQSxnQkFDdkI7QUFHQSxvQkFBSSxXQUFXLENBQUNBLE1BQUssV0FBVztBQUM5QixzQkFBSSxXQUFXLFdBQVc7QUFDeEIsd0JBQUksQ0FBQ0EsTUFBSyxXQUFXO0FBQ25CLGtDQUFZO0FBQUEsb0JBQ2QsT0FBTztBQUNMLGlDQUFXLFVBQVUsQ0FBQztBQUFBLG9CQUN4QjtBQUFBLGtCQUNGO0FBQ0EsNkJBQVcsVUFBVSxDQUFDO0FBQUEsZ0JBQ3hCLE9BQU87QUFDTCw4QkFBWTtBQUFBLGdCQUNkO0FBQUEsY0FDRixPQUFPO0FBQ0wsb0JBQUlBLE1BQUssV0FBVztBQUNsQixzQkFBSSxXQUFXQSxNQUFLLFFBQVEsRUFBRSxJQUFJQyxRQUFPLElBQUksY0FBYyxNQUFNLGFBQWE7QUFDOUUsc0JBQUksV0FBVyxNQUFNLFlBQVksTUFBTSxZQUFZLE1BQU0sUUFBUTtBQUNqRSx5QkFBTyxNQUFNLFNBQVMsV0FBVyxXQUFXLEtBQUssSUFBSSxNQUFNLEtBQUs7QUFBQSxnQkFDbEUsT0FBTztBQUNMLHlCQUFPLE1BQU0sTUFBTTtBQUFBLGdCQUNyQjtBQUFBLGNBQ0Y7QUFBQSxZQUNGO0FBRUEsbUJBQU9EO0FBQUEsVUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxVQU9BLFNBQVMsU0FBUyxJQUFJO0FBQ3BCLGdCQUFJQSxRQUFPO0FBR1gsZ0JBQUksT0FBTyxPQUFPLFVBQVU7QUFDMUIsa0JBQUksUUFBUUEsTUFBSyxXQUFXLEVBQUU7QUFDOUIscUJBQU8sUUFBUSxDQUFDLE1BQU0sVUFBVTtBQUFBLFlBQ2xDO0FBR0EscUJBQVMsSUFBRSxHQUFHLElBQUVBLE1BQUssUUFBUSxRQUFRLEtBQUs7QUFDeEMsa0JBQUksQ0FBQ0EsTUFBSyxRQUFRLENBQUMsRUFBRSxTQUFTO0FBQzVCLHVCQUFPO0FBQUEsY0FDVDtBQUFBLFlBQ0Y7QUFFQSxtQkFBTztBQUFBLFVBQ1Q7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFPQSxVQUFVLFNBQVMsSUFBSTtBQUNyQixnQkFBSUEsUUFBTztBQUNYLGdCQUFJLFdBQVdBLE1BQUs7QUFHcEIsZ0JBQUksUUFBUUEsTUFBSyxXQUFXLEVBQUU7QUFDOUIsZ0JBQUksT0FBTztBQUNULHlCQUFXQSxNQUFLLFFBQVEsTUFBTSxPQUFPLEVBQUUsQ0FBQyxJQUFJO0FBQUEsWUFDOUM7QUFFQSxtQkFBTztBQUFBLFVBQ1Q7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFVBTUEsT0FBTyxXQUFXO0FBQ2hCLG1CQUFPLEtBQUs7QUFBQSxVQUNkO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxVQU1BLFFBQVEsV0FBVztBQUNqQixnQkFBSUEsUUFBTztBQUdYLGdCQUFJLFNBQVNBLE1BQUs7QUFDbEIscUJBQVMsSUFBRSxHQUFHLElBQUUsT0FBTyxRQUFRLEtBQUs7QUFFbEMsa0JBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxTQUFTO0FBQ3RCLGdCQUFBQSxNQUFLLEtBQUssT0FBTyxDQUFDLEVBQUUsR0FBRztBQUFBLGNBQ3pCO0FBR0Esa0JBQUksQ0FBQ0EsTUFBSyxXQUFXO0FBRW5CLGdCQUFBQSxNQUFLLFlBQVksT0FBTyxDQUFDLEVBQUUsS0FBSztBQUdoQyx1QkFBTyxDQUFDLEVBQUUsTUFBTSxvQkFBb0IsU0FBUyxPQUFPLENBQUMsRUFBRSxVQUFVLEtBQUs7QUFDdEUsdUJBQU8sQ0FBQyxFQUFFLE1BQU0sb0JBQW9CQyxRQUFPLGVBQWUsT0FBTyxDQUFDLEVBQUUsU0FBUyxLQUFLO0FBQ2xGLHVCQUFPLENBQUMsRUFBRSxNQUFNLG9CQUFvQixTQUFTLE9BQU8sQ0FBQyxFQUFFLFFBQVEsS0FBSztBQUdwRSxnQkFBQUEsUUFBTyxtQkFBbUIsT0FBTyxDQUFDLEVBQUUsS0FBSztBQUFBLGNBQzNDO0FBR0EscUJBQU8sT0FBTyxDQUFDLEVBQUU7QUFHakIsY0FBQUQsTUFBSyxZQUFZLE9BQU8sQ0FBQyxFQUFFLEdBQUc7QUFBQSxZQUNoQztBQUdBLGdCQUFJLFFBQVFDLFFBQU8sT0FBTyxRQUFRRCxLQUFJO0FBQ3RDLGdCQUFJLFNBQVMsR0FBRztBQUNkLGNBQUFDLFFBQU8sT0FBTyxPQUFPLE9BQU8sQ0FBQztBQUFBLFlBQy9CO0FBR0EsZ0JBQUksV0FBVztBQUNmLGlCQUFLLElBQUUsR0FBRyxJQUFFQSxRQUFPLE9BQU8sUUFBUSxLQUFLO0FBQ3JDLGtCQUFJQSxRQUFPLE9BQU8sQ0FBQyxFQUFFLFNBQVNELE1BQUssUUFBUUEsTUFBSyxLQUFLLFFBQVFDLFFBQU8sT0FBTyxDQUFDLEVBQUUsSUFBSSxLQUFLLEdBQUc7QUFDeEYsMkJBQVc7QUFDWDtBQUFBLGNBQ0Y7QUFBQSxZQUNGO0FBRUEsZ0JBQUksU0FBUyxVQUFVO0FBQ3JCLHFCQUFPLE1BQU1ELE1BQUssSUFBSTtBQUFBLFlBQ3hCO0FBR0EsWUFBQUMsUUFBTyxVQUFVO0FBR2pCLFlBQUFELE1BQUssU0FBUztBQUNkLFlBQUFBLE1BQUssVUFBVSxDQUFDO0FBQ2hCLFlBQUFBLFFBQU87QUFFUCxtQkFBTztBQUFBLFVBQ1Q7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFVQSxJQUFJLFNBQVMsT0FBTyxJQUFJLElBQUksTUFBTTtBQUNoQyxnQkFBSUEsUUFBTztBQUNYLGdCQUFJLFNBQVNBLE1BQUssUUFBUSxLQUFLO0FBRS9CLGdCQUFJLE9BQU8sT0FBTyxZQUFZO0FBQzVCLHFCQUFPLEtBQUssT0FBTyxFQUFDLElBQVEsSUFBUSxLQUFVLElBQUksRUFBQyxJQUFRLEdBQU0sQ0FBQztBQUFBLFlBQ3BFO0FBRUEsbUJBQU9BO0FBQUEsVUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFTQSxLQUFLLFNBQVMsT0FBTyxJQUFJLElBQUk7QUFDM0IsZ0JBQUlBLFFBQU87QUFDWCxnQkFBSSxTQUFTQSxNQUFLLFFBQVEsS0FBSztBQUMvQixnQkFBSSxJQUFJO0FBR1IsZ0JBQUksT0FBTyxPQUFPLFVBQVU7QUFDMUIsbUJBQUs7QUFDTCxtQkFBSztBQUFBLFlBQ1A7QUFFQSxnQkFBSSxNQUFNLElBQUk7QUFFWixtQkFBSyxJQUFFLEdBQUcsSUFBRSxPQUFPLFFBQVEsS0FBSztBQUM5QixvQkFBSSxPQUFRLE9BQU8sT0FBTyxDQUFDLEVBQUU7QUFDN0Isb0JBQUksT0FBTyxPQUFPLENBQUMsRUFBRSxNQUFNLFFBQVEsQ0FBQyxNQUFNLE1BQU07QUFDOUMseUJBQU8sT0FBTyxHQUFHLENBQUM7QUFDbEI7QUFBQSxnQkFDRjtBQUFBLGNBQ0Y7QUFBQSxZQUNGLFdBQVcsT0FBTztBQUVoQixjQUFBQSxNQUFLLFFBQVEsS0FBSyxJQUFJLENBQUM7QUFBQSxZQUN6QixPQUFPO0FBRUwsa0JBQUksT0FBTyxPQUFPLEtBQUtBLEtBQUk7QUFDM0IsbUJBQUssSUFBRSxHQUFHLElBQUUsS0FBSyxRQUFRLEtBQUs7QUFDNUIsb0JBQUssS0FBSyxDQUFDLEVBQUUsUUFBUSxLQUFLLE1BQU0sS0FBTSxNQUFNLFFBQVFBLE1BQUssS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHO0FBQ2xFLGtCQUFBQSxNQUFLLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQztBQUFBLGdCQUNuQjtBQUFBLGNBQ0Y7QUFBQSxZQUNGO0FBRUEsbUJBQU9BO0FBQUEsVUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFTQSxNQUFNLFNBQVMsT0FBTyxJQUFJLElBQUk7QUFDNUIsZ0JBQUlBLFFBQU87QUFHWCxZQUFBQSxNQUFLLEdBQUcsT0FBTyxJQUFJLElBQUksQ0FBQztBQUV4QixtQkFBT0E7QUFBQSxVQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxVQVNBLE9BQU8sU0FBUyxPQUFPLElBQUksS0FBSztBQUM5QixnQkFBSUEsUUFBTztBQUNYLGdCQUFJLFNBQVNBLE1BQUssUUFBUSxLQUFLO0FBRy9CLHFCQUFTLElBQUUsT0FBTyxTQUFPLEdBQUcsS0FBRyxHQUFHLEtBQUs7QUFFckMsa0JBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxNQUFNLE9BQU8sQ0FBQyxFQUFFLE9BQU8sTUFBTSxVQUFVLFFBQVE7QUFDNUQsMkJBQVcsU0FBUyxJQUFJO0FBQ3RCLHFCQUFHLEtBQUssTUFBTSxJQUFJLEdBQUc7QUFBQSxnQkFDdkIsRUFBRSxLQUFLQSxPQUFNLE9BQU8sQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDO0FBRzdCLG9CQUFJLE9BQU8sQ0FBQyxFQUFFLE1BQU07QUFDbEIsa0JBQUFBLE1BQUssSUFBSSxPQUFPLE9BQU8sQ0FBQyxFQUFFLElBQUksT0FBTyxDQUFDLEVBQUUsRUFBRTtBQUFBLGdCQUM1QztBQUFBLGNBQ0Y7QUFBQSxZQUNGO0FBR0EsWUFBQUEsTUFBSyxXQUFXLEtBQUs7QUFFckIsbUJBQU9BO0FBQUEsVUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFVBUUEsWUFBWSxTQUFTLE9BQU87QUFDMUIsZ0JBQUlBLFFBQU87QUFFWCxnQkFBSUEsTUFBSyxPQUFPLFNBQVMsR0FBRztBQUMxQixrQkFBSSxPQUFPQSxNQUFLLE9BQU8sQ0FBQztBQUd4QixrQkFBSSxLQUFLLFVBQVUsT0FBTztBQUN4QixnQkFBQUEsTUFBSyxPQUFPLE1BQU07QUFDbEIsZ0JBQUFBLE1BQUssV0FBVztBQUFBLGNBQ2xCO0FBR0Esa0JBQUksQ0FBQyxPQUFPO0FBQ1YscUJBQUssT0FBTztBQUFBLGNBQ2Q7QUFBQSxZQUNGO0FBRUEsbUJBQU9BO0FBQUEsVUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxVQU9BLFFBQVEsU0FBUyxPQUFPO0FBQ3RCLGdCQUFJQSxRQUFPO0FBQ1gsZ0JBQUksU0FBUyxNQUFNO0FBS25CLGdCQUFJLENBQUNBLE1BQUssYUFBYSxNQUFNLFNBQVMsQ0FBQyxNQUFNLE1BQU0sVUFBVSxDQUFDLE1BQU0sTUFBTSxTQUFTLE1BQU0sTUFBTSxjQUFjLE1BQU0sT0FBTztBQUN4SCx5QkFBV0EsTUFBSyxPQUFPLEtBQUtBLE9BQU0sS0FBSyxHQUFHLEdBQUc7QUFDN0MscUJBQU9BO0FBQUEsWUFDVDtBQUdBLGdCQUFJLE9BQU8sQ0FBQyxFQUFFLE1BQU0sU0FBU0EsTUFBSyxRQUFRLE1BQU0sRUFBRSxDQUFDO0FBR25ELFlBQUFBLE1BQUssTUFBTSxPQUFPLE1BQU0sR0FBRztBQUczQixnQkFBSSxDQUFDQSxNQUFLLGFBQWEsTUFBTTtBQUMzQixjQUFBQSxNQUFLLEtBQUssTUFBTSxLQUFLLElBQUksRUFBRSxLQUFLLE1BQU0sR0FBRztBQUFBLFlBQzNDO0FBR0EsZ0JBQUlBLE1BQUssYUFBYSxNQUFNO0FBQzFCLGNBQUFBLE1BQUssTUFBTSxRQUFRLE1BQU0sR0FBRztBQUM1QixvQkFBTSxRQUFRLE1BQU0sVUFBVTtBQUM5QixvQkFBTSxZQUFZO0FBQ2xCLG9CQUFNLGFBQWFDLFFBQU8sSUFBSTtBQUU5QixrQkFBSSxXQUFZLE1BQU0sUUFBUSxNQUFNLFVBQVUsTUFBUSxLQUFLLElBQUksTUFBTSxLQUFLO0FBQzFFLGNBQUFELE1BQUssV0FBVyxNQUFNLEdBQUcsSUFBSSxXQUFXQSxNQUFLLE9BQU8sS0FBS0EsT0FBTSxLQUFLLEdBQUcsT0FBTztBQUFBLFlBQ2hGO0FBR0EsZ0JBQUlBLE1BQUssYUFBYSxDQUFDLE1BQU07QUFDM0Isb0JBQU0sVUFBVTtBQUNoQixvQkFBTSxTQUFTO0FBQ2Ysb0JBQU0sUUFBUSxNQUFNLFVBQVU7QUFDOUIsb0JBQU0sWUFBWTtBQUNsQixjQUFBQSxNQUFLLFlBQVksTUFBTSxHQUFHO0FBRzFCLGNBQUFBLE1BQUssYUFBYSxNQUFNLEtBQUs7QUFHN0IsY0FBQUMsUUFBTyxhQUFhO0FBQUEsWUFDdEI7QUFHQSxnQkFBSSxDQUFDRCxNQUFLLGFBQWEsQ0FBQyxNQUFNO0FBQzVCLGNBQUFBLE1BQUssS0FBSyxNQUFNLEtBQUssSUFBSTtBQUFBLFlBQzNCO0FBRUEsbUJBQU9BO0FBQUEsVUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxVQU9BLGFBQWEsU0FBUyxJQUFJO0FBQ3hCLGdCQUFJQSxRQUFPO0FBRVgsZ0JBQUlBLE1BQUssV0FBVyxFQUFFLEdBQUc7QUFFdkIsa0JBQUksT0FBT0EsTUFBSyxXQUFXLEVBQUUsTUFBTSxZQUFZO0FBQzdDLDZCQUFhQSxNQUFLLFdBQVcsRUFBRSxDQUFDO0FBQUEsY0FDbEMsT0FBTztBQUNMLG9CQUFJLFFBQVFBLE1BQUssV0FBVyxFQUFFO0FBQzlCLG9CQUFJLFNBQVMsTUFBTSxPQUFPO0FBQ3hCLHdCQUFNLE1BQU0sb0JBQW9CLFNBQVNBLE1BQUssV0FBVyxFQUFFLEdBQUcsS0FBSztBQUFBLGdCQUNyRTtBQUFBLGNBQ0Y7QUFFQSxxQkFBT0EsTUFBSyxXQUFXLEVBQUU7QUFBQSxZQUMzQjtBQUVBLG1CQUFPQTtBQUFBLFVBQ1Q7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFPQSxZQUFZLFNBQVMsSUFBSTtBQUN2QixnQkFBSUEsUUFBTztBQUdYLHFCQUFTLElBQUUsR0FBRyxJQUFFQSxNQUFLLFFBQVEsUUFBUSxLQUFLO0FBQ3hDLGtCQUFJLE9BQU9BLE1BQUssUUFBUSxDQUFDLEVBQUUsS0FBSztBQUM5Qix1QkFBT0EsTUFBSyxRQUFRLENBQUM7QUFBQSxjQUN2QjtBQUFBLFlBQ0Y7QUFFQSxtQkFBTztBQUFBLFVBQ1Q7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFVBTUEsZ0JBQWdCLFdBQVc7QUFDekIsZ0JBQUlBLFFBQU87QUFFWCxZQUFBQSxNQUFLLE9BQU87QUFHWixxQkFBUyxJQUFFLEdBQUcsSUFBRUEsTUFBSyxRQUFRLFFBQVEsS0FBSztBQUN4QyxrQkFBSUEsTUFBSyxRQUFRLENBQUMsRUFBRSxRQUFRO0FBQzFCLHVCQUFPQSxNQUFLLFFBQVEsQ0FBQyxFQUFFLE1BQU07QUFBQSxjQUMvQjtBQUFBLFlBQ0Y7QUFHQSxtQkFBTyxJQUFJTSxPQUFNTixLQUFJO0FBQUEsVUFDdkI7QUFBQTtBQUFBO0FBQUE7QUFBQSxVQUtBLFFBQVEsV0FBVztBQUNqQixnQkFBSUEsUUFBTztBQUNYLGdCQUFJLFFBQVFBLE1BQUs7QUFDakIsZ0JBQUksTUFBTTtBQUNWLGdCQUFJLElBQUk7QUFHUixnQkFBSUEsTUFBSyxRQUFRLFNBQVMsT0FBTztBQUMvQjtBQUFBLFlBQ0Y7QUFHQSxpQkFBSyxJQUFFLEdBQUcsSUFBRUEsTUFBSyxRQUFRLFFBQVEsS0FBSztBQUNwQyxrQkFBSUEsTUFBSyxRQUFRLENBQUMsRUFBRSxRQUFRO0FBQzFCO0FBQUEsY0FDRjtBQUFBLFlBQ0Y7QUFHQSxpQkFBSyxJQUFFQSxNQUFLLFFBQVEsU0FBUyxHQUFHLEtBQUcsR0FBRyxLQUFLO0FBQ3pDLGtCQUFJLE9BQU8sT0FBTztBQUNoQjtBQUFBLGNBQ0Y7QUFFQSxrQkFBSUEsTUFBSyxRQUFRLENBQUMsRUFBRSxRQUFRO0FBRTFCLG9CQUFJQSxNQUFLLGFBQWFBLE1BQUssUUFBUSxDQUFDLEVBQUUsT0FBTztBQUMzQyxrQkFBQUEsTUFBSyxRQUFRLENBQUMsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUFBLGdCQUNwQztBQUdBLGdCQUFBQSxNQUFLLFFBQVEsT0FBTyxHQUFHLENBQUM7QUFDeEI7QUFBQSxjQUNGO0FBQUEsWUFDRjtBQUFBLFVBQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFPQSxjQUFjLFNBQVMsSUFBSTtBQUN6QixnQkFBSUEsUUFBTztBQUVYLGdCQUFJLE9BQU8sT0FBTyxhQUFhO0FBQzdCLGtCQUFJLE1BQU0sQ0FBQztBQUNYLHVCQUFTLElBQUUsR0FBRyxJQUFFQSxNQUFLLFFBQVEsUUFBUSxLQUFLO0FBQ3hDLG9CQUFJLEtBQUtBLE1BQUssUUFBUSxDQUFDLEVBQUUsR0FBRztBQUFBLGNBQzlCO0FBRUEscUJBQU87QUFBQSxZQUNULE9BQU87QUFDTCxxQkFBTyxDQUFDLEVBQUU7QUFBQSxZQUNaO0FBQUEsVUFDRjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxVQU9BLGdCQUFnQixTQUFTLE9BQU87QUFDOUIsZ0JBQUlBLFFBQU87QUFHWCxrQkFBTSxNQUFNLGVBQWVDLFFBQU8sSUFBSSxtQkFBbUI7QUFDekQsa0JBQU0sTUFBTSxhQUFhLFNBQVMsTUFBTUQsTUFBSyxJQUFJO0FBR2pELGdCQUFJLE1BQU0sU0FBUztBQUNqQixvQkFBTSxNQUFNLGFBQWEsUUFBUSxNQUFNLE9BQU87QUFBQSxZQUNoRCxPQUFPO0FBQ0wsb0JBQU0sTUFBTSxhQUFhLFFBQVEsTUFBTSxLQUFLO0FBQUEsWUFDOUM7QUFHQSxrQkFBTSxNQUFNLGFBQWEsT0FBTyxNQUFNO0FBQ3RDLGdCQUFJLE1BQU0sT0FBTztBQUNmLG9CQUFNLE1BQU0sYUFBYSxZQUFZLE1BQU0sVUFBVTtBQUNyRCxvQkFBTSxNQUFNLGFBQWEsVUFBVSxNQUFNLFNBQVM7QUFBQSxZQUNwRDtBQUNBLGtCQUFNLE1BQU0sYUFBYSxhQUFhLGVBQWUsTUFBTSxPQUFPQyxRQUFPLElBQUksV0FBVztBQUV4RixtQkFBT0Q7QUFBQSxVQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFVBT0EsY0FBYyxTQUFTLE1BQU07QUFDM0IsZ0JBQUlBLFFBQU87QUFDWCxnQkFBSSxRQUFRQyxRQUFPLGNBQWNBLFFBQU8sV0FBVyxPQUFPLFFBQVEsT0FBTyxLQUFLO0FBRTlFLGdCQUFJLENBQUMsS0FBSyxjQUFjO0FBQ3RCLHFCQUFPRDtBQUFBLFlBQ1Q7QUFFQSxnQkFBSUMsUUFBTyxrQkFBa0IsS0FBSyxjQUFjO0FBQzlDLG1CQUFLLGFBQWEsVUFBVTtBQUM1QixtQkFBSyxhQUFhLFdBQVcsQ0FBQztBQUM5QixrQkFBSSxPQUFPO0FBQ1Qsb0JBQUk7QUFBRSx1QkFBSyxhQUFhLFNBQVNBLFFBQU87QUFBQSxnQkFBZ0IsU0FBUSxHQUFOO0FBQUEsZ0JBQVU7QUFBQSxjQUN0RTtBQUFBLFlBQ0Y7QUFDQSxpQkFBSyxlQUFlO0FBRXBCLG1CQUFPRDtBQUFBLFVBQ1Q7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFVBTUEsYUFBYSxTQUFTLE1BQU07QUFDMUIsZ0JBQUksVUFBVSxrQkFBa0IsS0FBS0MsUUFBTyxjQUFjQSxRQUFPLFdBQVcsU0FBUztBQUNyRixnQkFBSSxDQUFDLFNBQVM7QUFDWixtQkFBSyxNQUFNO0FBQUEsWUFDYjtBQUFBLFVBQ0Y7QUFBQSxRQUNGO0FBU0EsWUFBSUssU0FBUSxTQUFTLE1BQU07QUFDekIsZUFBSyxVQUFVO0FBQ2YsZUFBSyxLQUFLO0FBQUEsUUFDWjtBQUNBLFFBQUFBLE9BQU0sWUFBWTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFLaEIsTUFBTSxXQUFXO0FBQ2YsZ0JBQUlOLFFBQU87QUFDWCxnQkFBSSxTQUFTQSxNQUFLO0FBR2xCLFlBQUFBLE1BQUssU0FBUyxPQUFPO0FBQ3JCLFlBQUFBLE1BQUssUUFBUSxPQUFPO0FBQ3BCLFlBQUFBLE1BQUssVUFBVSxPQUFPO0FBQ3RCLFlBQUFBLE1BQUssUUFBUSxPQUFPO0FBQ3BCLFlBQUFBLE1BQUssUUFBUTtBQUNiLFlBQUFBLE1BQUssVUFBVTtBQUNmLFlBQUFBLE1BQUssU0FBUztBQUNkLFlBQUFBLE1BQUssVUFBVTtBQUdmLFlBQUFBLE1BQUssTUFBTSxFQUFFQyxRQUFPO0FBR3BCLG1CQUFPLFFBQVEsS0FBS0QsS0FBSTtBQUd4QixZQUFBQSxNQUFLLE9BQU87QUFFWixtQkFBT0E7QUFBQSxVQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxVQU1BLFFBQVEsV0FBVztBQUNqQixnQkFBSUEsUUFBTztBQUNYLGdCQUFJLFNBQVNBLE1BQUs7QUFDbEIsZ0JBQUksU0FBVUMsUUFBTyxVQUFVRCxNQUFLLFVBQVVBLE1BQUssUUFBUSxTQUFVLElBQUlBLE1BQUs7QUFFOUUsZ0JBQUksT0FBTyxXQUFXO0FBRXBCLGNBQUFBLE1BQUssUUFBUyxPQUFPQyxRQUFPLElBQUksZUFBZSxjQUFlQSxRQUFPLElBQUksZUFBZSxJQUFJQSxRQUFPLElBQUksV0FBVztBQUNsSCxjQUFBRCxNQUFLLE1BQU0sS0FBSyxlQUFlLFFBQVFDLFFBQU8sSUFBSSxXQUFXO0FBQzdELGNBQUFELE1BQUssTUFBTSxTQUFTO0FBQ3BCLGNBQUFBLE1BQUssTUFBTSxRQUFRQyxRQUFPLFVBQVU7QUFBQSxZQUN0QyxXQUFXLENBQUNBLFFBQU8sU0FBUztBQUUxQixjQUFBRCxNQUFLLFFBQVFDLFFBQU8sa0JBQWtCO0FBR3RDLGNBQUFELE1BQUssV0FBV0EsTUFBSyxlQUFlLEtBQUtBLEtBQUk7QUFDN0MsY0FBQUEsTUFBSyxNQUFNLGlCQUFpQixTQUFTQSxNQUFLLFVBQVUsS0FBSztBQUd6RCxjQUFBQSxNQUFLLFVBQVVBLE1BQUssY0FBYyxLQUFLQSxLQUFJO0FBQzNDLGNBQUFBLE1BQUssTUFBTSxpQkFBaUJDLFFBQU8sZUFBZUQsTUFBSyxTQUFTLEtBQUs7QUFJckUsY0FBQUEsTUFBSyxTQUFTQSxNQUFLLGFBQWEsS0FBS0EsS0FBSTtBQUN6QyxjQUFBQSxNQUFLLE1BQU0saUJBQWlCLFNBQVNBLE1BQUssUUFBUSxLQUFLO0FBR3ZELGNBQUFBLE1BQUssTUFBTSxNQUFNLE9BQU87QUFDeEIsY0FBQUEsTUFBSyxNQUFNLFVBQVUsT0FBTyxhQUFhLE9BQU8sU0FBUyxPQUFPO0FBQ2hFLGNBQUFBLE1BQUssTUFBTSxTQUFTLFNBQVNDLFFBQU8sT0FBTztBQUczQyxjQUFBRCxNQUFLLE1BQU0sS0FBSztBQUFBLFlBQ2xCO0FBRUEsbUJBQU9BO0FBQUEsVUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFNQSxPQUFPLFdBQVc7QUFDaEIsZ0JBQUlBLFFBQU87QUFDWCxnQkFBSSxTQUFTQSxNQUFLO0FBR2xCLFlBQUFBLE1BQUssU0FBUyxPQUFPO0FBQ3JCLFlBQUFBLE1BQUssUUFBUSxPQUFPO0FBQ3BCLFlBQUFBLE1BQUssVUFBVSxPQUFPO0FBQ3RCLFlBQUFBLE1BQUssUUFBUSxPQUFPO0FBQ3BCLFlBQUFBLE1BQUssUUFBUTtBQUNiLFlBQUFBLE1BQUssWUFBWTtBQUNqQixZQUFBQSxNQUFLLFVBQVU7QUFDZixZQUFBQSxNQUFLLFNBQVM7QUFDZCxZQUFBQSxNQUFLLFVBQVU7QUFHZixZQUFBQSxNQUFLLE1BQU0sRUFBRUMsUUFBTztBQUVwQixtQkFBT0Q7QUFBQSxVQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFLQSxnQkFBZ0IsV0FBVztBQUN6QixnQkFBSUEsUUFBTztBQUdYLFlBQUFBLE1BQUssUUFBUSxNQUFNLGFBQWFBLE1BQUssS0FBS0EsTUFBSyxNQUFNLFFBQVFBLE1BQUssTUFBTSxNQUFNLE9BQU8sQ0FBQztBQUd0RixZQUFBQSxNQUFLLE1BQU0sb0JBQW9CLFNBQVNBLE1BQUssVUFBVSxLQUFLO0FBQUEsVUFDOUQ7QUFBQTtBQUFBO0FBQUE7QUFBQSxVQUtBLGVBQWUsV0FBVztBQUN4QixnQkFBSUEsUUFBTztBQUNYLGdCQUFJLFNBQVNBLE1BQUs7QUFHbEIsbUJBQU8sWUFBWSxLQUFLLEtBQUtBLE1BQUssTUFBTSxXQUFXLEVBQUUsSUFBSTtBQUd6RCxnQkFBSSxPQUFPLEtBQUssT0FBTyxPQUFPLEVBQUUsV0FBVyxHQUFHO0FBQzVDLHFCQUFPLFVBQVUsRUFBQyxXQUFXLENBQUMsR0FBRyxPQUFPLFlBQVksR0FBSSxFQUFDO0FBQUEsWUFDM0Q7QUFFQSxnQkFBSSxPQUFPLFdBQVcsVUFBVTtBQUM5QixxQkFBTyxTQUFTO0FBQ2hCLHFCQUFPLE1BQU0sTUFBTTtBQUNuQixxQkFBTyxXQUFXO0FBQUEsWUFDcEI7QUFHQSxZQUFBQSxNQUFLLE1BQU0sb0JBQW9CQyxRQUFPLGVBQWVELE1BQUssU0FBUyxLQUFLO0FBQUEsVUFDMUU7QUFBQTtBQUFBO0FBQUE7QUFBQSxVQUtBLGNBQWMsV0FBVztBQUN2QixnQkFBSUEsUUFBTztBQUNYLGdCQUFJLFNBQVNBLE1BQUs7QUFHbEIsZ0JBQUksT0FBTyxjQUFjLFVBQVU7QUFHakMscUJBQU8sWUFBWSxLQUFLLEtBQUtBLE1BQUssTUFBTSxXQUFXLEVBQUUsSUFBSTtBQUd6RCxrQkFBSSxPQUFPLFFBQVEsVUFBVSxDQUFDLE1BQU0sVUFBVTtBQUM1Qyx1QkFBTyxRQUFRLFVBQVUsQ0FBQyxJQUFJLE9BQU8sWUFBWTtBQUFBLGNBQ25EO0FBR0EscUJBQU8sT0FBT0EsS0FBSTtBQUFBLFlBQ3BCO0FBR0EsWUFBQUEsTUFBSyxNQUFNLG9CQUFvQixTQUFTQSxNQUFLLFFBQVEsS0FBSztBQUFBLFVBQzVEO0FBQUEsUUFDRjtBQUtBLFlBQUksUUFBUSxDQUFDO0FBTWIsWUFBSSxhQUFhLFNBQVNBLE9BQU07QUFDOUIsY0FBSSxNQUFNQSxNQUFLO0FBR2YsY0FBSSxNQUFNLEdBQUcsR0FBRztBQUVkLFlBQUFBLE1BQUssWUFBWSxNQUFNLEdBQUcsRUFBRTtBQUc1QixzQkFBVUEsS0FBSTtBQUVkO0FBQUEsVUFDRjtBQUVBLGNBQUksc0JBQXNCLEtBQUssR0FBRyxHQUFHO0FBRW5DLGdCQUFJLE9BQU8sS0FBSyxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsQ0FBQztBQUNqQyxnQkFBSSxXQUFXLElBQUksV0FBVyxLQUFLLE1BQU07QUFDekMscUJBQVMsSUFBRSxHQUFHLElBQUUsS0FBSyxRQUFRLEVBQUUsR0FBRztBQUNoQyx1QkFBUyxDQUFDLElBQUksS0FBSyxXQUFXLENBQUM7QUFBQSxZQUNqQztBQUVBLDRCQUFnQixTQUFTLFFBQVFBLEtBQUk7QUFBQSxVQUN2QyxPQUFPO0FBRUwsZ0JBQUksTUFBTSxJQUFJLGVBQWU7QUFDN0IsZ0JBQUksS0FBS0EsTUFBSyxLQUFLLFFBQVEsS0FBSyxJQUFJO0FBQ3BDLGdCQUFJLGtCQUFrQkEsTUFBSyxLQUFLO0FBQ2hDLGdCQUFJLGVBQWU7QUFHbkIsZ0JBQUlBLE1BQUssS0FBSyxTQUFTO0FBQ3JCLHFCQUFPLEtBQUtBLE1BQUssS0FBSyxPQUFPLEVBQUUsUUFBUSxTQUFTLEtBQUs7QUFDbkQsb0JBQUksaUJBQWlCLEtBQUtBLE1BQUssS0FBSyxRQUFRLEdBQUcsQ0FBQztBQUFBLGNBQ2xELENBQUM7QUFBQSxZQUNIO0FBRUEsZ0JBQUksU0FBUyxXQUFXO0FBRXRCLGtCQUFJLFFBQVEsSUFBSSxTQUFTLElBQUksQ0FBQztBQUM5QixrQkFBSSxTQUFTLE9BQU8sU0FBUyxPQUFPLFNBQVMsS0FBSztBQUNoRCxnQkFBQUEsTUFBSyxNQUFNLGFBQWEsTUFBTSw0Q0FBNEMsSUFBSSxTQUFTLEdBQUc7QUFDMUY7QUFBQSxjQUNGO0FBRUEsOEJBQWdCLElBQUksVUFBVUEsS0FBSTtBQUFBLFlBQ3BDO0FBQ0EsZ0JBQUksVUFBVSxXQUFXO0FBRXZCLGtCQUFJQSxNQUFLLFdBQVc7QUFDbEIsZ0JBQUFBLE1BQUssU0FBUztBQUNkLGdCQUFBQSxNQUFLLFlBQVk7QUFDakIsZ0JBQUFBLE1BQUssVUFBVSxDQUFDO0FBQ2hCLHVCQUFPLE1BQU0sR0FBRztBQUNoQixnQkFBQUEsTUFBSyxLQUFLO0FBQUEsY0FDWjtBQUFBLFlBQ0Y7QUFDQSx3QkFBWSxHQUFHO0FBQUEsVUFDakI7QUFBQSxRQUNGO0FBTUEsWUFBSSxjQUFjLFNBQVMsS0FBSztBQUM5QixjQUFJO0FBQ0YsZ0JBQUksS0FBSztBQUFBLFVBQ1gsU0FBUyxHQUFQO0FBQ0EsZ0JBQUksUUFBUTtBQUFBLFVBQ2Q7QUFBQSxRQUNGO0FBT0EsWUFBSSxrQkFBa0IsU0FBUyxhQUFhQSxPQUFNO0FBRWhELGNBQUksUUFBUSxXQUFXO0FBQ3JCLFlBQUFBLE1BQUssTUFBTSxhQUFhLE1BQU0sNkJBQTZCO0FBQUEsVUFDN0Q7QUFHQSxjQUFJLFVBQVUsU0FBUyxRQUFRO0FBQzdCLGdCQUFJLFVBQVVBLE1BQUssUUFBUSxTQUFTLEdBQUc7QUFDckMsb0JBQU1BLE1BQUssSUFBSSxJQUFJO0FBQ25CLHdCQUFVQSxPQUFNLE1BQU07QUFBQSxZQUN4QixPQUFPO0FBQ0wsb0JBQU07QUFBQSxZQUNSO0FBQUEsVUFDRjtBQUdBLGNBQUksT0FBTyxZQUFZLGVBQWVDLFFBQU8sSUFBSSxnQkFBZ0IsV0FBVyxHQUFHO0FBQzdFLFlBQUFBLFFBQU8sSUFBSSxnQkFBZ0IsV0FBVyxFQUFFLEtBQUssT0FBTyxFQUFFLE1BQU0sS0FBSztBQUFBLFVBQ25FLE9BQU87QUFDTCxZQUFBQSxRQUFPLElBQUksZ0JBQWdCLGFBQWEsU0FBUyxLQUFLO0FBQUEsVUFDeEQ7QUFBQSxRQUNGO0FBT0EsWUFBSSxZQUFZLFNBQVNELE9BQU0sUUFBUTtBQUVyQyxjQUFJLFVBQVUsQ0FBQ0EsTUFBSyxXQUFXO0FBQzdCLFlBQUFBLE1BQUssWUFBWSxPQUFPO0FBQUEsVUFDMUI7QUFHQSxjQUFJLE9BQU8sS0FBS0EsTUFBSyxPQUFPLEVBQUUsV0FBVyxHQUFHO0FBQzFDLFlBQUFBLE1BQUssVUFBVSxFQUFDLFdBQVcsQ0FBQyxHQUFHQSxNQUFLLFlBQVksR0FBSSxFQUFDO0FBQUEsVUFDdkQ7QUFHQSxjQUFJQSxNQUFLLFdBQVcsVUFBVTtBQUM1QixZQUFBQSxNQUFLLFNBQVM7QUFDZCxZQUFBQSxNQUFLLE1BQU0sTUFBTTtBQUNqQixZQUFBQSxNQUFLLFdBQVc7QUFBQSxVQUNsQjtBQUFBLFFBQ0Y7QUFLQSxZQUFJLG9CQUFvQixXQUFXO0FBRWpDLGNBQUksQ0FBQ0MsUUFBTyxlQUFlO0FBQ3pCO0FBQUEsVUFDRjtBQUdBLGNBQUk7QUFDRixnQkFBSSxPQUFPLGlCQUFpQixhQUFhO0FBQ3ZDLGNBQUFBLFFBQU8sTUFBTSxJQUFJLGFBQWE7QUFBQSxZQUNoQyxXQUFXLE9BQU8sdUJBQXVCLGFBQWE7QUFDcEQsY0FBQUEsUUFBTyxNQUFNLElBQUksbUJBQW1CO0FBQUEsWUFDdEMsT0FBTztBQUNMLGNBQUFBLFFBQU8sZ0JBQWdCO0FBQUEsWUFDekI7QUFBQSxVQUNGLFNBQVEsR0FBTjtBQUNBLFlBQUFBLFFBQU8sZ0JBQWdCO0FBQUEsVUFDekI7QUFHQSxjQUFJLENBQUNBLFFBQU8sS0FBSztBQUNmLFlBQUFBLFFBQU8sZ0JBQWdCO0FBQUEsVUFDekI7QUFJQSxjQUFJLE1BQU8saUJBQWlCLEtBQUtBLFFBQU8sY0FBY0EsUUFBTyxXQUFXLFFBQVE7QUFDaEYsY0FBSSxhQUFhQSxRQUFPLGNBQWNBLFFBQU8sV0FBVyxXQUFXLE1BQU0sd0JBQXdCO0FBQ2pHLGNBQUksVUFBVSxhQUFhLFNBQVMsV0FBVyxDQUFDLEdBQUcsRUFBRSxJQUFJO0FBQ3pELGNBQUksT0FBTyxXQUFXLFVBQVUsR0FBRztBQUNqQyxnQkFBSSxTQUFTLFNBQVMsS0FBS0EsUUFBTyxjQUFjQSxRQUFPLFdBQVcsVUFBVSxZQUFZLENBQUM7QUFDekYsZ0JBQUlBLFFBQU8sY0FBYyxDQUFDLFFBQVE7QUFDaEMsY0FBQUEsUUFBTyxnQkFBZ0I7QUFBQSxZQUN6QjtBQUFBLFVBQ0Y7QUFHQSxjQUFJQSxRQUFPLGVBQWU7QUFDeEIsWUFBQUEsUUFBTyxhQUFjLE9BQU9BLFFBQU8sSUFBSSxlQUFlLGNBQWVBLFFBQU8sSUFBSSxlQUFlLElBQUlBLFFBQU8sSUFBSSxXQUFXO0FBQ3pILFlBQUFBLFFBQU8sV0FBVyxLQUFLLGVBQWVBLFFBQU8sU0FBUyxJQUFJQSxRQUFPLFNBQVNBLFFBQU8sSUFBSSxXQUFXO0FBQ2hHLFlBQUFBLFFBQU8sV0FBVyxRQUFRQSxRQUFPLElBQUksV0FBVztBQUFBLFVBQ2xEO0FBR0EsVUFBQUEsUUFBTyxPQUFPO0FBQUEsUUFDaEI7QUFHQSxZQUFJLE9BQU8sV0FBVyxjQUFjLE9BQU8sS0FBSztBQUM5QyxpQkFBTyxDQUFDLEdBQUcsV0FBVztBQUNwQixtQkFBTztBQUFBLGNBQ0wsUUFBUUE7QUFBQSxjQUNSLE1BQU1HO0FBQUEsWUFDUjtBQUFBLFVBQ0YsQ0FBQztBQUFBLFFBQ0g7QUFHQSxZQUFJLE9BQU8sWUFBWSxhQUFhO0FBQ2xDLGtCQUFRLFNBQVNIO0FBQ2pCLGtCQUFRLE9BQU9HO0FBQUEsUUFDakI7QUFHQSxZQUFJLE9BQU8sV0FBVyxhQUFhO0FBQ2pDLGlCQUFPLGVBQWVMO0FBQ3RCLGlCQUFPLFNBQVNFO0FBQ2hCLGlCQUFPLE9BQU9HO0FBQ2QsaUJBQU8sUUFBUUU7QUFBQSxRQUNqQixXQUFXLE9BQU8sV0FBVyxhQUFhO0FBQ3hDLGlCQUFPLGVBQWVQO0FBQ3RCLGlCQUFPLFNBQVNFO0FBQ2hCLGlCQUFPLE9BQU9HO0FBQ2QsaUJBQU8sUUFBUUU7QUFBQSxRQUNqQjtBQUFBLE1BQ0YsR0FBRztBQWVILE9BQUMsV0FBVztBQUVWO0FBR0EscUJBQWEsVUFBVSxPQUFPLENBQUMsR0FBRyxHQUFHLENBQUM7QUFDdEMscUJBQWEsVUFBVSxlQUFlLENBQUMsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLENBQUM7QUFXeEQscUJBQWEsVUFBVSxTQUFTLFNBQVMsS0FBSztBQUM1QyxjQUFJTixRQUFPO0FBR1gsY0FBSSxDQUFDQSxNQUFLLE9BQU8sQ0FBQ0EsTUFBSyxJQUFJLFVBQVU7QUFDbkMsbUJBQU9BO0FBQUEsVUFDVDtBQUdBLG1CQUFTLElBQUVBLE1BQUssT0FBTyxTQUFPLEdBQUcsS0FBRyxHQUFHLEtBQUs7QUFDMUMsWUFBQUEsTUFBSyxPQUFPLENBQUMsRUFBRSxPQUFPLEdBQUc7QUFBQSxVQUMzQjtBQUVBLGlCQUFPQTtBQUFBLFFBQ1Q7QUFVQSxxQkFBYSxVQUFVLE1BQU0sU0FBUyxHQUFHLEdBQUcsR0FBRztBQUM3QyxjQUFJQSxRQUFPO0FBR1gsY0FBSSxDQUFDQSxNQUFLLE9BQU8sQ0FBQ0EsTUFBSyxJQUFJLFVBQVU7QUFDbkMsbUJBQU9BO0FBQUEsVUFDVDtBQUdBLGNBQUssT0FBTyxNQUFNLFdBQVlBLE1BQUssS0FBSyxDQUFDLElBQUk7QUFDN0MsY0FBSyxPQUFPLE1BQU0sV0FBWUEsTUFBSyxLQUFLLENBQUMsSUFBSTtBQUU3QyxjQUFJLE9BQU8sTUFBTSxVQUFVO0FBQ3pCLFlBQUFBLE1BQUssT0FBTyxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBRXBCLGdCQUFJLE9BQU9BLE1BQUssSUFBSSxTQUFTLGNBQWMsYUFBYTtBQUN0RCxjQUFBQSxNQUFLLElBQUksU0FBUyxVQUFVLGdCQUFnQkEsTUFBSyxLQUFLLENBQUMsR0FBRyxPQUFPLElBQUksYUFBYSxHQUFHO0FBQ3JGLGNBQUFBLE1BQUssSUFBSSxTQUFTLFVBQVUsZ0JBQWdCQSxNQUFLLEtBQUssQ0FBQyxHQUFHLE9BQU8sSUFBSSxhQUFhLEdBQUc7QUFDckYsY0FBQUEsTUFBSyxJQUFJLFNBQVMsVUFBVSxnQkFBZ0JBLE1BQUssS0FBSyxDQUFDLEdBQUcsT0FBTyxJQUFJLGFBQWEsR0FBRztBQUFBLFlBQ3ZGLE9BQU87QUFDTCxjQUFBQSxNQUFLLElBQUksU0FBUyxZQUFZQSxNQUFLLEtBQUssQ0FBQyxHQUFHQSxNQUFLLEtBQUssQ0FBQyxHQUFHQSxNQUFLLEtBQUssQ0FBQyxDQUFDO0FBQUEsWUFDeEU7QUFBQSxVQUNGLE9BQU87QUFDTCxtQkFBT0EsTUFBSztBQUFBLFVBQ2Q7QUFFQSxpQkFBT0E7QUFBQSxRQUNUO0FBZ0JBLHFCQUFhLFVBQVUsY0FBYyxTQUFTLEdBQUcsR0FBRyxHQUFHLEtBQUssS0FBSyxLQUFLO0FBQ3BFLGNBQUlBLFFBQU87QUFHWCxjQUFJLENBQUNBLE1BQUssT0FBTyxDQUFDQSxNQUFLLElBQUksVUFBVTtBQUNuQyxtQkFBT0E7QUFBQSxVQUNUO0FBR0EsY0FBSSxLQUFLQSxNQUFLO0FBQ2QsY0FBSyxPQUFPLE1BQU0sV0FBWSxHQUFHLENBQUMsSUFBSTtBQUN0QyxjQUFLLE9BQU8sTUFBTSxXQUFZLEdBQUcsQ0FBQyxJQUFJO0FBQ3RDLGdCQUFPLE9BQU8sUUFBUSxXQUFZLEdBQUcsQ0FBQyxJQUFJO0FBQzFDLGdCQUFPLE9BQU8sUUFBUSxXQUFZLEdBQUcsQ0FBQyxJQUFJO0FBQzFDLGdCQUFPLE9BQU8sUUFBUSxXQUFZLEdBQUcsQ0FBQyxJQUFJO0FBRTFDLGNBQUksT0FBTyxNQUFNLFVBQVU7QUFDekIsWUFBQUEsTUFBSyxlQUFlLENBQUMsR0FBRyxHQUFHLEdBQUcsS0FBSyxLQUFLLEdBQUc7QUFFM0MsZ0JBQUksT0FBT0EsTUFBSyxJQUFJLFNBQVMsYUFBYSxhQUFhO0FBQ3JELGNBQUFBLE1BQUssSUFBSSxTQUFTLFNBQVMsZ0JBQWdCLEdBQUcsT0FBTyxJQUFJLGFBQWEsR0FBRztBQUN6RSxjQUFBQSxNQUFLLElBQUksU0FBUyxTQUFTLGdCQUFnQixHQUFHLE9BQU8sSUFBSSxhQUFhLEdBQUc7QUFDekUsY0FBQUEsTUFBSyxJQUFJLFNBQVMsU0FBUyxnQkFBZ0IsR0FBRyxPQUFPLElBQUksYUFBYSxHQUFHO0FBQ3pFLGNBQUFBLE1BQUssSUFBSSxTQUFTLElBQUksZ0JBQWdCLEtBQUssT0FBTyxJQUFJLGFBQWEsR0FBRztBQUN0RSxjQUFBQSxNQUFLLElBQUksU0FBUyxJQUFJLGdCQUFnQixLQUFLLE9BQU8sSUFBSSxhQUFhLEdBQUc7QUFDdEUsY0FBQUEsTUFBSyxJQUFJLFNBQVMsSUFBSSxnQkFBZ0IsS0FBSyxPQUFPLElBQUksYUFBYSxHQUFHO0FBQUEsWUFDeEUsT0FBTztBQUNMLGNBQUFBLE1BQUssSUFBSSxTQUFTLGVBQWUsR0FBRyxHQUFHLEdBQUcsS0FBSyxLQUFLLEdBQUc7QUFBQSxZQUN6RDtBQUFBLFVBQ0YsT0FBTztBQUNMLG1CQUFPO0FBQUEsVUFDVDtBQUVBLGlCQUFPQTtBQUFBLFFBQ1Q7QUFVQSxhQUFLLFVBQVUsT0FBUSxTQUFTLFFBQVE7QUFDdEMsaUJBQU8sU0FBUyxHQUFHO0FBQ2pCLGdCQUFJQSxRQUFPO0FBR1gsWUFBQUEsTUFBSyxlQUFlLEVBQUUsZUFBZSxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQzdDLFlBQUFBLE1BQUssVUFBVSxFQUFFLFVBQVU7QUFDM0IsWUFBQUEsTUFBSyxPQUFPLEVBQUUsT0FBTztBQUNyQixZQUFBQSxNQUFLLGNBQWM7QUFBQSxjQUNqQixnQkFBZ0IsT0FBTyxFQUFFLG1CQUFtQixjQUFjLEVBQUUsaUJBQWlCO0FBQUEsY0FDN0UsZ0JBQWdCLE9BQU8sRUFBRSxtQkFBbUIsY0FBYyxFQUFFLGlCQUFpQjtBQUFBLGNBQzdFLGVBQWUsT0FBTyxFQUFFLGtCQUFrQixjQUFjLEVBQUUsZ0JBQWdCO0FBQUEsY0FDMUUsZUFBZSxPQUFPLEVBQUUsa0JBQWtCLGNBQWMsRUFBRSxnQkFBZ0I7QUFBQSxjQUMxRSxhQUFhLE9BQU8sRUFBRSxnQkFBZ0IsY0FBYyxFQUFFLGNBQWM7QUFBQSxjQUNwRSxjQUFjLE9BQU8sRUFBRSxpQkFBaUIsY0FBYyxFQUFFLGVBQWU7QUFBQSxjQUN2RSxhQUFhLE9BQU8sRUFBRSxnQkFBZ0IsY0FBYyxFQUFFLGNBQWM7QUFBQSxjQUNwRSxlQUFlLE9BQU8sRUFBRSxrQkFBa0IsY0FBYyxFQUFFLGdCQUFnQjtBQUFBLFlBQzVFO0FBR0EsWUFBQUEsTUFBSyxZQUFZLEVBQUUsV0FBVyxDQUFDLEVBQUMsSUFBSSxFQUFFLFNBQVEsQ0FBQyxJQUFJLENBQUM7QUFDcEQsWUFBQUEsTUFBSyxTQUFTLEVBQUUsUUFBUSxDQUFDLEVBQUMsSUFBSSxFQUFFLE1BQUssQ0FBQyxJQUFJLENBQUM7QUFDM0MsWUFBQUEsTUFBSyxpQkFBaUIsRUFBRSxnQkFBZ0IsQ0FBQyxFQUFDLElBQUksRUFBRSxjQUFhLENBQUMsSUFBSSxDQUFDO0FBR25FLG1CQUFPLE9BQU8sS0FBSyxNQUFNLENBQUM7QUFBQSxVQUM1QjtBQUFBLFFBQ0YsRUFBRyxLQUFLLFVBQVUsSUFBSTtBQVF0QixhQUFLLFVBQVUsU0FBUyxTQUFTLEtBQUssSUFBSTtBQUN4QyxjQUFJQSxRQUFPO0FBR1gsY0FBSSxDQUFDQSxNQUFLLFdBQVc7QUFDbkIsbUJBQU9BO0FBQUEsVUFDVDtBQUdBLGNBQUlBLE1BQUssV0FBVyxVQUFVO0FBQzVCLFlBQUFBLE1BQUssT0FBTyxLQUFLO0FBQUEsY0FDZixPQUFPO0FBQUEsY0FDUCxRQUFRLFdBQVc7QUFDakIsZ0JBQUFBLE1BQUssT0FBTyxLQUFLLEVBQUU7QUFBQSxjQUNyQjtBQUFBLFlBQ0YsQ0FBQztBQUVELG1CQUFPQTtBQUFBLFVBQ1Q7QUFHQSxjQUFJLGFBQWMsT0FBTyxPQUFPLElBQUksdUJBQXVCLGNBQWUsWUFBWTtBQUd0RixjQUFJLE9BQU8sT0FBTyxhQUFhO0FBRTdCLGdCQUFJLE9BQU8sUUFBUSxVQUFVO0FBQzNCLGNBQUFBLE1BQUssVUFBVTtBQUNmLGNBQUFBLE1BQUssT0FBTyxDQUFDLEtBQUssR0FBRyxDQUFDO0FBQUEsWUFDeEIsT0FBTztBQUNMLHFCQUFPQSxNQUFLO0FBQUEsWUFDZDtBQUFBLFVBQ0Y7QUFHQSxjQUFJLE1BQU1BLE1BQUssYUFBYSxFQUFFO0FBQzlCLG1CQUFTLElBQUUsR0FBRyxJQUFFLElBQUksUUFBUSxLQUFLO0FBRS9CLGdCQUFJLFFBQVFBLE1BQUssV0FBVyxJQUFJLENBQUMsQ0FBQztBQUVsQyxnQkFBSSxPQUFPO0FBQ1Qsa0JBQUksT0FBTyxRQUFRLFVBQVU7QUFDM0Isc0JBQU0sVUFBVTtBQUNoQixzQkFBTSxPQUFPLENBQUMsS0FBSyxHQUFHLENBQUM7QUFFdkIsb0JBQUksTUFBTSxPQUFPO0FBRWYsd0JBQU0sWUFBWSxlQUFlO0FBR2pDLHNCQUFJLENBQUMsTUFBTSxXQUFXLENBQUMsTUFBTSxRQUFRLEtBQUs7QUFDeEMsZ0NBQVksT0FBTyxVQUFVO0FBQUEsa0JBQy9CO0FBRUEsc0JBQUksZUFBZSxXQUFXO0FBQzVCLHdCQUFJLE9BQU8sTUFBTSxRQUFRLGNBQWMsYUFBYTtBQUNsRCw0QkFBTSxRQUFRLFVBQVUsZUFBZSxLQUFLLE9BQU8sSUFBSSxXQUFXO0FBQ2xFLDRCQUFNLFFBQVEsVUFBVSxlQUFlLEdBQUcsT0FBTyxJQUFJLFdBQVc7QUFDaEUsNEJBQU0sUUFBUSxVQUFVLGVBQWUsR0FBRyxPQUFPLElBQUksV0FBVztBQUFBLG9CQUNsRSxPQUFPO0FBQ0wsNEJBQU0sUUFBUSxZQUFZLEtBQUssR0FBRyxDQUFDO0FBQUEsb0JBQ3JDO0FBQUEsa0JBQ0YsT0FBTztBQUNMLDBCQUFNLFFBQVEsSUFBSSxlQUFlLEtBQUssT0FBTyxJQUFJLFdBQVc7QUFBQSxrQkFDOUQ7QUFBQSxnQkFDRjtBQUVBLGdCQUFBQSxNQUFLLE1BQU0sVUFBVSxNQUFNLEdBQUc7QUFBQSxjQUNoQyxPQUFPO0FBQ0wsdUJBQU8sTUFBTTtBQUFBLGNBQ2Y7QUFBQSxZQUNGO0FBQUEsVUFDRjtBQUVBLGlCQUFPQTtBQUFBLFFBQ1Q7QUFVQSxhQUFLLFVBQVUsTUFBTSxTQUFTLEdBQUcsR0FBRyxHQUFHLElBQUk7QUFDekMsY0FBSUEsUUFBTztBQUdYLGNBQUksQ0FBQ0EsTUFBSyxXQUFXO0FBQ25CLG1CQUFPQTtBQUFBLFVBQ1Q7QUFHQSxjQUFJQSxNQUFLLFdBQVcsVUFBVTtBQUM1QixZQUFBQSxNQUFLLE9BQU8sS0FBSztBQUFBLGNBQ2YsT0FBTztBQUFBLGNBQ1AsUUFBUSxXQUFXO0FBQ2pCLGdCQUFBQSxNQUFLLElBQUksR0FBRyxHQUFHLEdBQUcsRUFBRTtBQUFBLGNBQ3RCO0FBQUEsWUFDRixDQUFDO0FBRUQsbUJBQU9BO0FBQUEsVUFDVDtBQUdBLGNBQUssT0FBTyxNQUFNLFdBQVksSUFBSTtBQUNsQyxjQUFLLE9BQU8sTUFBTSxXQUFZLE9BQU87QUFHckMsY0FBSSxPQUFPLE9BQU8sYUFBYTtBQUU3QixnQkFBSSxPQUFPLE1BQU0sVUFBVTtBQUN6QixjQUFBQSxNQUFLLE9BQU8sQ0FBQyxHQUFHLEdBQUcsQ0FBQztBQUFBLFlBQ3RCLE9BQU87QUFDTCxxQkFBT0EsTUFBSztBQUFBLFlBQ2Q7QUFBQSxVQUNGO0FBR0EsY0FBSSxNQUFNQSxNQUFLLGFBQWEsRUFBRTtBQUM5QixtQkFBUyxJQUFFLEdBQUcsSUFBRSxJQUFJLFFBQVEsS0FBSztBQUUvQixnQkFBSSxRQUFRQSxNQUFLLFdBQVcsSUFBSSxDQUFDLENBQUM7QUFFbEMsZ0JBQUksT0FBTztBQUNULGtCQUFJLE9BQU8sTUFBTSxVQUFVO0FBQ3pCLHNCQUFNLE9BQU8sQ0FBQyxHQUFHLEdBQUcsQ0FBQztBQUVyQixvQkFBSSxNQUFNLE9BQU87QUFFZixzQkFBSSxDQUFDLE1BQU0sV0FBVyxNQUFNLFFBQVEsS0FBSztBQUN2QyxnQ0FBWSxPQUFPLFNBQVM7QUFBQSxrQkFDOUI7QUFFQSxzQkFBSSxPQUFPLE1BQU0sUUFBUSxjQUFjLGFBQWE7QUFDbEQsMEJBQU0sUUFBUSxVQUFVLGVBQWUsR0FBRyxPQUFPLElBQUksV0FBVztBQUNoRSwwQkFBTSxRQUFRLFVBQVUsZUFBZSxHQUFHLE9BQU8sSUFBSSxXQUFXO0FBQ2hFLDBCQUFNLFFBQVEsVUFBVSxlQUFlLEdBQUcsT0FBTyxJQUFJLFdBQVc7QUFBQSxrQkFDbEUsT0FBTztBQUNMLDBCQUFNLFFBQVEsWUFBWSxHQUFHLEdBQUcsQ0FBQztBQUFBLGtCQUNuQztBQUFBLGdCQUNGO0FBRUEsZ0JBQUFBLE1BQUssTUFBTSxPQUFPLE1BQU0sR0FBRztBQUFBLGNBQzdCLE9BQU87QUFDTCx1QkFBTyxNQUFNO0FBQUEsY0FDZjtBQUFBLFlBQ0Y7QUFBQSxVQUNGO0FBRUEsaUJBQU9BO0FBQUEsUUFDVDtBQVlBLGFBQUssVUFBVSxjQUFjLFNBQVMsR0FBRyxHQUFHLEdBQUcsSUFBSTtBQUNqRCxjQUFJQSxRQUFPO0FBR1gsY0FBSSxDQUFDQSxNQUFLLFdBQVc7QUFDbkIsbUJBQU9BO0FBQUEsVUFDVDtBQUdBLGNBQUlBLE1BQUssV0FBVyxVQUFVO0FBQzVCLFlBQUFBLE1BQUssT0FBTyxLQUFLO0FBQUEsY0FDZixPQUFPO0FBQUEsY0FDUCxRQUFRLFdBQVc7QUFDakIsZ0JBQUFBLE1BQUssWUFBWSxHQUFHLEdBQUcsR0FBRyxFQUFFO0FBQUEsY0FDOUI7QUFBQSxZQUNGLENBQUM7QUFFRCxtQkFBT0E7QUFBQSxVQUNUO0FBR0EsY0FBSyxPQUFPLE1BQU0sV0FBWUEsTUFBSyxhQUFhLENBQUMsSUFBSTtBQUNyRCxjQUFLLE9BQU8sTUFBTSxXQUFZQSxNQUFLLGFBQWEsQ0FBQyxJQUFJO0FBR3JELGNBQUksT0FBTyxPQUFPLGFBQWE7QUFFN0IsZ0JBQUksT0FBTyxNQUFNLFVBQVU7QUFDekIsY0FBQUEsTUFBSyxlQUFlLENBQUMsR0FBRyxHQUFHLENBQUM7QUFBQSxZQUM5QixPQUFPO0FBQ0wscUJBQU9BLE1BQUs7QUFBQSxZQUNkO0FBQUEsVUFDRjtBQUdBLGNBQUksTUFBTUEsTUFBSyxhQUFhLEVBQUU7QUFDOUIsbUJBQVMsSUFBRSxHQUFHLElBQUUsSUFBSSxRQUFRLEtBQUs7QUFFL0IsZ0JBQUksUUFBUUEsTUFBSyxXQUFXLElBQUksQ0FBQyxDQUFDO0FBRWxDLGdCQUFJLE9BQU87QUFDVCxrQkFBSSxPQUFPLE1BQU0sVUFBVTtBQUN6QixzQkFBTSxlQUFlLENBQUMsR0FBRyxHQUFHLENBQUM7QUFFN0Isb0JBQUksTUFBTSxPQUFPO0FBRWYsc0JBQUksQ0FBQyxNQUFNLFNBQVM7QUFFbEIsd0JBQUksQ0FBQyxNQUFNLE1BQU07QUFDZiw0QkFBTSxPQUFPQSxNQUFLLFFBQVEsQ0FBQyxHQUFHLEdBQUcsSUFBSTtBQUFBLG9CQUN2QztBQUVBLGdDQUFZLE9BQU8sU0FBUztBQUFBLGtCQUM5QjtBQUVBLHNCQUFJLE9BQU8sTUFBTSxRQUFRLGlCQUFpQixhQUFhO0FBQ3JELDBCQUFNLFFBQVEsYUFBYSxlQUFlLEdBQUcsT0FBTyxJQUFJLFdBQVc7QUFDbkUsMEJBQU0sUUFBUSxhQUFhLGVBQWUsR0FBRyxPQUFPLElBQUksV0FBVztBQUNuRSwwQkFBTSxRQUFRLGFBQWEsZUFBZSxHQUFHLE9BQU8sSUFBSSxXQUFXO0FBQUEsa0JBQ3JFLE9BQU87QUFDTCwwQkFBTSxRQUFRLGVBQWUsR0FBRyxHQUFHLENBQUM7QUFBQSxrQkFDdEM7QUFBQSxnQkFDRjtBQUVBLGdCQUFBQSxNQUFLLE1BQU0sZUFBZSxNQUFNLEdBQUc7QUFBQSxjQUNyQyxPQUFPO0FBQ0wsdUJBQU8sTUFBTTtBQUFBLGNBQ2Y7QUFBQSxZQUNGO0FBQUEsVUFDRjtBQUVBLGlCQUFPQTtBQUFBLFFBQ1Q7QUFnQ0EsYUFBSyxVQUFVLGFBQWEsV0FBVztBQUNyQyxjQUFJQSxRQUFPO0FBQ1gsY0FBSSxPQUFPO0FBQ1gsY0FBSSxHQUFHLElBQUk7QUFHWCxjQUFJLENBQUNBLE1BQUssV0FBVztBQUNuQixtQkFBT0E7QUFBQSxVQUNUO0FBR0EsY0FBSSxLQUFLLFdBQVcsR0FBRztBQUVyQixtQkFBT0EsTUFBSztBQUFBLFVBQ2QsV0FBVyxLQUFLLFdBQVcsR0FBRztBQUM1QixnQkFBSSxPQUFPLEtBQUssQ0FBQyxNQUFNLFVBQVU7QUFDL0Isa0JBQUksS0FBSyxDQUFDO0FBR1Ysa0JBQUksT0FBTyxPQUFPLGFBQWE7QUFDN0Isb0JBQUksQ0FBQyxFQUFFLFlBQVk7QUFDakIsb0JBQUUsYUFBYTtBQUFBLG9CQUNiLGdCQUFnQixFQUFFO0FBQUEsb0JBQ2xCLGdCQUFnQixFQUFFO0FBQUEsb0JBQ2xCLGVBQWUsRUFBRTtBQUFBLG9CQUNqQixlQUFlLEVBQUU7QUFBQSxvQkFDakIsYUFBYSxFQUFFO0FBQUEsb0JBQ2YsYUFBYSxFQUFFO0FBQUEsb0JBQ2YsZUFBZSxFQUFFO0FBQUEsb0JBQ2pCLGNBQWMsRUFBRTtBQUFBLGtCQUNsQjtBQUFBLGdCQUNGO0FBRUEsZ0JBQUFBLE1BQUssY0FBYztBQUFBLGtCQUNqQixnQkFBZ0IsT0FBTyxFQUFFLFdBQVcsbUJBQW1CLGNBQWMsRUFBRSxXQUFXLGlCQUFpQkEsTUFBSztBQUFBLGtCQUN4RyxnQkFBZ0IsT0FBTyxFQUFFLFdBQVcsbUJBQW1CLGNBQWMsRUFBRSxXQUFXLGlCQUFpQkEsTUFBSztBQUFBLGtCQUN4RyxlQUFlLE9BQU8sRUFBRSxXQUFXLGtCQUFrQixjQUFjLEVBQUUsV0FBVyxnQkFBZ0JBLE1BQUs7QUFBQSxrQkFDckcsZUFBZSxPQUFPLEVBQUUsV0FBVyxrQkFBa0IsY0FBYyxFQUFFLFdBQVcsZ0JBQWdCQSxNQUFLO0FBQUEsa0JBQ3JHLGFBQWEsT0FBTyxFQUFFLFdBQVcsZ0JBQWdCLGNBQWMsRUFBRSxXQUFXLGNBQWNBLE1BQUs7QUFBQSxrQkFDL0YsYUFBYSxPQUFPLEVBQUUsV0FBVyxnQkFBZ0IsY0FBYyxFQUFFLFdBQVcsY0FBY0EsTUFBSztBQUFBLGtCQUMvRixlQUFlLE9BQU8sRUFBRSxXQUFXLGtCQUFrQixjQUFjLEVBQUUsV0FBVyxnQkFBZ0JBLE1BQUs7QUFBQSxrQkFDckcsY0FBYyxPQUFPLEVBQUUsV0FBVyxpQkFBaUIsY0FBYyxFQUFFLFdBQVcsZUFBZUEsTUFBSztBQUFBLGdCQUNwRztBQUFBLGNBQ0Y7QUFBQSxZQUNGLE9BQU87QUFFTCxzQkFBUUEsTUFBSyxXQUFXLFNBQVMsS0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQzdDLHFCQUFPLFFBQVEsTUFBTSxjQUFjQSxNQUFLO0FBQUEsWUFDMUM7QUFBQSxVQUNGLFdBQVcsS0FBSyxXQUFXLEdBQUc7QUFDNUIsZ0JBQUksS0FBSyxDQUFDO0FBQ1YsaUJBQUssU0FBUyxLQUFLLENBQUMsR0FBRyxFQUFFO0FBQUEsVUFDM0I7QUFHQSxjQUFJLE1BQU1BLE1BQUssYUFBYSxFQUFFO0FBQzlCLG1CQUFTLElBQUUsR0FBRyxJQUFFLElBQUksUUFBUSxLQUFLO0FBQy9CLG9CQUFRQSxNQUFLLFdBQVcsSUFBSSxDQUFDLENBQUM7QUFFOUIsZ0JBQUksT0FBTztBQUVULGtCQUFJLEtBQUssTUFBTTtBQUNmLG1CQUFLO0FBQUEsZ0JBQ0gsZ0JBQWdCLE9BQU8sRUFBRSxtQkFBbUIsY0FBYyxFQUFFLGlCQUFpQixHQUFHO0FBQUEsZ0JBQ2hGLGdCQUFnQixPQUFPLEVBQUUsbUJBQW1CLGNBQWMsRUFBRSxpQkFBaUIsR0FBRztBQUFBLGdCQUNoRixlQUFlLE9BQU8sRUFBRSxrQkFBa0IsY0FBYyxFQUFFLGdCQUFnQixHQUFHO0FBQUEsZ0JBQzdFLGVBQWUsT0FBTyxFQUFFLGtCQUFrQixjQUFjLEVBQUUsZ0JBQWdCLEdBQUc7QUFBQSxnQkFDN0UsYUFBYSxPQUFPLEVBQUUsZ0JBQWdCLGNBQWMsRUFBRSxjQUFjLEdBQUc7QUFBQSxnQkFDdkUsYUFBYSxPQUFPLEVBQUUsZ0JBQWdCLGNBQWMsRUFBRSxjQUFjLEdBQUc7QUFBQSxnQkFDdkUsZUFBZSxPQUFPLEVBQUUsa0JBQWtCLGNBQWMsRUFBRSxnQkFBZ0IsR0FBRztBQUFBLGdCQUM3RSxjQUFjLE9BQU8sRUFBRSxpQkFBaUIsY0FBYyxFQUFFLGVBQWUsR0FBRztBQUFBLGNBQzVFO0FBR0Esa0JBQUksU0FBUyxNQUFNO0FBQ25CLGtCQUFJLENBQUMsUUFBUTtBQUVYLG9CQUFJLENBQUMsTUFBTSxNQUFNO0FBQ2Ysd0JBQU0sT0FBT0EsTUFBSyxRQUFRLENBQUMsR0FBRyxHQUFHLElBQUk7QUFBQSxnQkFDdkM7QUFHQSw0QkFBWSxPQUFPLFNBQVM7QUFDNUIseUJBQVMsTUFBTTtBQUFBLGNBQ2pCO0FBR0EscUJBQU8saUJBQWlCLEdBQUc7QUFDM0IscUJBQU8saUJBQWlCLEdBQUc7QUFDM0IscUJBQU8sZ0JBQWdCLEdBQUc7QUFDMUIscUJBQU8sZ0JBQWdCLEdBQUc7QUFDMUIscUJBQU8sY0FBYyxHQUFHO0FBQ3hCLHFCQUFPLGNBQWMsR0FBRztBQUN4QixxQkFBTyxnQkFBZ0IsR0FBRztBQUMxQixxQkFBTyxlQUFlLEdBQUc7QUFBQSxZQUMzQjtBQUFBLFVBQ0Y7QUFFQSxpQkFBT0E7QUFBQSxRQUNUO0FBVUEsY0FBTSxVQUFVLE9BQVEsU0FBUyxRQUFRO0FBQ3ZDLGlCQUFPLFdBQVc7QUFDaEIsZ0JBQUlBLFFBQU87QUFDWCxnQkFBSSxTQUFTQSxNQUFLO0FBR2xCLFlBQUFBLE1BQUssZUFBZSxPQUFPO0FBQzNCLFlBQUFBLE1BQUssVUFBVSxPQUFPO0FBQ3RCLFlBQUFBLE1BQUssT0FBTyxPQUFPO0FBQ25CLFlBQUFBLE1BQUssY0FBYyxPQUFPO0FBRzFCLG1CQUFPLEtBQUssSUFBSTtBQUdoQixnQkFBSUEsTUFBSyxTQUFTO0FBQ2hCLHFCQUFPLE9BQU9BLE1BQUssT0FBTztBQUFBLFlBQzVCLFdBQVdBLE1BQUssTUFBTTtBQUNwQixxQkFBTyxJQUFJQSxNQUFLLEtBQUssQ0FBQyxHQUFHQSxNQUFLLEtBQUssQ0FBQyxHQUFHQSxNQUFLLEtBQUssQ0FBQyxHQUFHQSxNQUFLLEdBQUc7QUFBQSxZQUMvRDtBQUFBLFVBQ0Y7QUFBQSxRQUNGLEVBQUcsTUFBTSxVQUFVLElBQUk7QUFPdkIsY0FBTSxVQUFVLFFBQVMsU0FBUyxRQUFRO0FBQ3hDLGlCQUFPLFdBQVc7QUFDaEIsZ0JBQUlBLFFBQU87QUFDWCxnQkFBSSxTQUFTQSxNQUFLO0FBR2xCLFlBQUFBLE1BQUssZUFBZSxPQUFPO0FBQzNCLFlBQUFBLE1BQUssVUFBVSxPQUFPO0FBQ3RCLFlBQUFBLE1BQUssT0FBTyxPQUFPO0FBQ25CLFlBQUFBLE1BQUssY0FBYyxPQUFPO0FBRzFCLGdCQUFJQSxNQUFLLFNBQVM7QUFDaEIscUJBQU8sT0FBT0EsTUFBSyxPQUFPO0FBQUEsWUFDNUIsV0FBV0EsTUFBSyxNQUFNO0FBQ3BCLHFCQUFPLElBQUlBLE1BQUssS0FBSyxDQUFDLEdBQUdBLE1BQUssS0FBSyxDQUFDLEdBQUdBLE1BQUssS0FBSyxDQUFDLEdBQUdBLE1BQUssR0FBRztBQUFBLFlBQy9ELFdBQVdBLE1BQUssU0FBUztBQUV2QixjQUFBQSxNQUFLLFFBQVEsV0FBVyxDQUFDO0FBQ3pCLGNBQUFBLE1BQUssVUFBVTtBQUNmLHFCQUFPLGVBQWVBLEtBQUk7QUFBQSxZQUM1QjtBQUdBLG1CQUFPLE9BQU8sS0FBSyxJQUFJO0FBQUEsVUFDekI7QUFBQSxRQUNGLEVBQUcsTUFBTSxVQUFVLEtBQUs7QUFVeEIsWUFBSSxjQUFjLFNBQVMsT0FBTyxNQUFNO0FBQ3RDLGlCQUFPLFFBQVE7QUFHZixjQUFJLFNBQVMsV0FBVztBQUN0QixrQkFBTSxVQUFVLE9BQU8sSUFBSSxhQUFhO0FBQ3hDLGtCQUFNLFFBQVEsaUJBQWlCLE1BQU0sWUFBWTtBQUNqRCxrQkFBTSxRQUFRLGlCQUFpQixNQUFNLFlBQVk7QUFDakQsa0JBQU0sUUFBUSxnQkFBZ0IsTUFBTSxZQUFZO0FBQ2hELGtCQUFNLFFBQVEsZ0JBQWdCLE1BQU0sWUFBWTtBQUNoRCxrQkFBTSxRQUFRLGNBQWMsTUFBTSxZQUFZO0FBQzlDLGtCQUFNLFFBQVEsY0FBYyxNQUFNLFlBQVk7QUFDOUMsa0JBQU0sUUFBUSxnQkFBZ0IsTUFBTSxZQUFZO0FBQ2hELGtCQUFNLFFBQVEsZUFBZSxNQUFNLFlBQVk7QUFFL0MsZ0JBQUksT0FBTyxNQUFNLFFBQVEsY0FBYyxhQUFhO0FBQ2xELG9CQUFNLFFBQVEsVUFBVSxlQUFlLE1BQU0sS0FBSyxDQUFDLEdBQUcsT0FBTyxJQUFJLFdBQVc7QUFDNUUsb0JBQU0sUUFBUSxVQUFVLGVBQWUsTUFBTSxLQUFLLENBQUMsR0FBRyxPQUFPLElBQUksV0FBVztBQUM1RSxvQkFBTSxRQUFRLFVBQVUsZUFBZSxNQUFNLEtBQUssQ0FBQyxHQUFHLE9BQU8sSUFBSSxXQUFXO0FBQUEsWUFDOUUsT0FBTztBQUNMLG9CQUFNLFFBQVEsWUFBWSxNQUFNLEtBQUssQ0FBQyxHQUFHLE1BQU0sS0FBSyxDQUFDLEdBQUcsTUFBTSxLQUFLLENBQUMsQ0FBQztBQUFBLFlBQ3ZFO0FBRUEsZ0JBQUksT0FBTyxNQUFNLFFBQVEsaUJBQWlCLGFBQWE7QUFDckQsb0JBQU0sUUFBUSxhQUFhLGVBQWUsTUFBTSxhQUFhLENBQUMsR0FBRyxPQUFPLElBQUksV0FBVztBQUN2RixvQkFBTSxRQUFRLGFBQWEsZUFBZSxNQUFNLGFBQWEsQ0FBQyxHQUFHLE9BQU8sSUFBSSxXQUFXO0FBQ3ZGLG9CQUFNLFFBQVEsYUFBYSxlQUFlLE1BQU0sYUFBYSxDQUFDLEdBQUcsT0FBTyxJQUFJLFdBQVc7QUFBQSxZQUN6RixPQUFPO0FBQ0wsb0JBQU0sUUFBUSxlQUFlLE1BQU0sYUFBYSxDQUFDLEdBQUcsTUFBTSxhQUFhLENBQUMsR0FBRyxNQUFNLGFBQWEsQ0FBQyxDQUFDO0FBQUEsWUFDbEc7QUFBQSxVQUNGLE9BQU87QUFDTCxrQkFBTSxVQUFVLE9BQU8sSUFBSSxtQkFBbUI7QUFDOUMsa0JBQU0sUUFBUSxJQUFJLGVBQWUsTUFBTSxTQUFTLE9BQU8sSUFBSSxXQUFXO0FBQUEsVUFDeEU7QUFFQSxnQkFBTSxRQUFRLFFBQVEsTUFBTSxLQUFLO0FBR2pDLGNBQUksQ0FBQyxNQUFNLFNBQVM7QUFDbEIsa0JBQU0sUUFBUSxNQUFNLE1BQU0sS0FBSyxJQUFJLEVBQUUsS0FBSyxNQUFNLEtBQUssSUFBSTtBQUFBLFVBQzNEO0FBQUEsUUFDRjtBQUFBLE1BQ0YsR0FBRztBQUFBO0FBQUE7OztBQy9xR0g7QUFBQTtBQUFBO0FBRUEsYUFBTyxVQUFVUTtBQUNqQixhQUFPLFFBQVEsVUFBVUE7QUFFekIsZUFBU0EsUUFBTyxNQUFNLGFBQWEsS0FBSztBQUVwQyxjQUFNLE9BQU87QUFFYixZQUFJLFdBQVcsZUFBZSxZQUFZLFFBQ3RDLFdBQVcsV0FBVyxZQUFZLENBQUMsSUFBSSxNQUFNLEtBQUssUUFDbEQsWUFBWSxXQUFXLE1BQU0sR0FBRyxVQUFVLEtBQUssSUFBSSxHQUNuRCxZQUFZLENBQUM7QUFFakIsWUFBSSxDQUFDLGFBQWEsVUFBVSxTQUFTLFVBQVU7QUFBTSxpQkFBTztBQUU1RCxZQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sR0FBRyxHQUFHO0FBRWxDLFlBQUk7QUFBVSxzQkFBWSxlQUFlLE1BQU0sYUFBYSxXQUFXLEdBQUc7QUFHMUUsWUFBSSxLQUFLLFNBQVMsS0FBSyxLQUFLO0FBQ3hCLGlCQUFPLE9BQU8sS0FBSyxDQUFDO0FBQ3BCLGlCQUFPLE9BQU8sS0FBSyxDQUFDO0FBRXBCLG1CQUFTLElBQUksS0FBSyxJQUFJLFVBQVUsS0FBSyxLQUFLO0FBQ3RDLGdCQUFJLEtBQUssQ0FBQztBQUNWLGdCQUFJLEtBQUssSUFBSSxDQUFDO0FBQ2QsZ0JBQUksSUFBSTtBQUFNLHFCQUFPO0FBQ3JCLGdCQUFJLElBQUk7QUFBTSxxQkFBTztBQUNyQixnQkFBSSxJQUFJO0FBQU0scUJBQU87QUFDckIsZ0JBQUksSUFBSTtBQUFNLHFCQUFPO0FBQUEsVUFDekI7QUFHQSxvQkFBVSxLQUFLLElBQUksT0FBTyxNQUFNLE9BQU8sSUFBSTtBQUMzQyxvQkFBVSxZQUFZLElBQUksUUFBUSxVQUFVO0FBQUEsUUFDaEQ7QUFFQSxxQkFBYSxXQUFXLFdBQVcsS0FBSyxNQUFNLE1BQU0sU0FBUyxDQUFDO0FBRTlELGVBQU87QUFBQSxNQUNYO0FBR0EsZUFBUyxXQUFXLE1BQU0sT0FBTyxLQUFLLEtBQUssV0FBVztBQUNsRCxZQUFJLEdBQUc7QUFFUCxZQUFJLGNBQWUsV0FBVyxNQUFNLE9BQU8sS0FBSyxHQUFHLElBQUksR0FBSTtBQUN2RCxlQUFLLElBQUksT0FBTyxJQUFJLEtBQUssS0FBSztBQUFLLG1CQUFPLFdBQVcsR0FBRyxLQUFLLENBQUMsR0FBRyxLQUFLLElBQUksQ0FBQyxHQUFHLElBQUk7QUFBQSxRQUN0RixPQUFPO0FBQ0gsZUFBSyxJQUFJLE1BQU0sS0FBSyxLQUFLLE9BQU8sS0FBSztBQUFLLG1CQUFPLFdBQVcsR0FBRyxLQUFLLENBQUMsR0FBRyxLQUFLLElBQUksQ0FBQyxHQUFHLElBQUk7QUFBQSxRQUM3RjtBQUVBLFlBQUksUUFBUUMsUUFBTyxNQUFNLEtBQUssSUFBSSxHQUFHO0FBQ2pDLHFCQUFXLElBQUk7QUFDZixpQkFBTyxLQUFLO0FBQUEsUUFDaEI7QUFFQSxlQUFPO0FBQUEsTUFDWDtBQUdBLGVBQVMsYUFBYSxPQUFPLEtBQUs7QUFDOUIsWUFBSSxDQUFDO0FBQU8saUJBQU87QUFDbkIsWUFBSSxDQUFDO0FBQUssZ0JBQU07QUFFaEIsWUFBSSxJQUFJLE9BQ0o7QUFDSixXQUFHO0FBQ0Msa0JBQVE7QUFFUixjQUFJLENBQUMsRUFBRSxZQUFZQSxRQUFPLEdBQUcsRUFBRSxJQUFJLEtBQUssS0FBSyxFQUFFLE1BQU0sR0FBRyxFQUFFLElBQUksTUFBTSxJQUFJO0FBQ3BFLHVCQUFXLENBQUM7QUFDWixnQkFBSSxNQUFNLEVBQUU7QUFDWixnQkFBSSxNQUFNLEVBQUU7QUFBTTtBQUNsQixvQkFBUTtBQUFBLFVBRVosT0FBTztBQUNILGdCQUFJLEVBQUU7QUFBQSxVQUNWO0FBQUEsUUFDSixTQUFTLFNBQVMsTUFBTTtBQUV4QixlQUFPO0FBQUEsTUFDWDtBQUdBLGVBQVMsYUFBYSxLQUFLLFdBQVcsS0FBSyxNQUFNLE1BQU0sU0FBUyxNQUFNO0FBQ2xFLFlBQUksQ0FBQztBQUFLO0FBR1YsWUFBSSxDQUFDLFFBQVE7QUFBUyxxQkFBVyxLQUFLLE1BQU0sTUFBTSxPQUFPO0FBRXpELFlBQUksT0FBTyxLQUNQLE1BQU07QUFHVixlQUFPLElBQUksU0FBUyxJQUFJLE1BQU07QUFDMUIsaUJBQU8sSUFBSTtBQUNYLGlCQUFPLElBQUk7QUFFWCxjQUFJLFVBQVUsWUFBWSxLQUFLLE1BQU0sTUFBTSxPQUFPLElBQUksTUFBTSxHQUFHLEdBQUc7QUFFOUQsc0JBQVUsS0FBSyxLQUFLLElBQUksTUFBTSxDQUFDO0FBQy9CLHNCQUFVLEtBQUssSUFBSSxJQUFJLE1BQU0sQ0FBQztBQUM5QixzQkFBVSxLQUFLLEtBQUssSUFBSSxNQUFNLENBQUM7QUFFL0IsdUJBQVcsR0FBRztBQUdkLGtCQUFNLEtBQUs7QUFDWCxtQkFBTyxLQUFLO0FBRVo7QUFBQSxVQUNKO0FBRUEsZ0JBQU07QUFHTixjQUFJLFFBQVEsTUFBTTtBQUVkLGdCQUFJLENBQUMsTUFBTTtBQUNQLDJCQUFhLGFBQWEsR0FBRyxHQUFHLFdBQVcsS0FBSyxNQUFNLE1BQU0sU0FBUyxDQUFDO0FBQUEsWUFHMUUsV0FBVyxTQUFTLEdBQUc7QUFDbkIsb0JBQU0sdUJBQXVCLGFBQWEsR0FBRyxHQUFHLFdBQVcsR0FBRztBQUM5RCwyQkFBYSxLQUFLLFdBQVcsS0FBSyxNQUFNLE1BQU0sU0FBUyxDQUFDO0FBQUEsWUFHNUQsV0FBVyxTQUFTLEdBQUc7QUFDbkIsMEJBQVksS0FBSyxXQUFXLEtBQUssTUFBTSxNQUFNLE9BQU87QUFBQSxZQUN4RDtBQUVBO0FBQUEsVUFDSjtBQUFBLFFBQ0o7QUFBQSxNQUNKO0FBR0EsZUFBUyxNQUFNLEtBQUs7QUFDaEIsWUFBSSxJQUFJLElBQUksTUFDUixJQUFJLEtBQ0osSUFBSSxJQUFJO0FBRVosWUFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDLEtBQUs7QUFBRyxpQkFBTztBQUcvQixZQUFJLEtBQUssRUFBRSxHQUFHLEtBQUssRUFBRSxHQUFHLEtBQUssRUFBRSxHQUFHLEtBQUssRUFBRSxHQUFHLEtBQUssRUFBRSxHQUFHLEtBQUssRUFBRTtBQUc3RCxZQUFJLEtBQUssS0FBSyxLQUFNLEtBQUssS0FBSyxLQUFLLEtBQU8sS0FBSyxLQUFLLEtBQUssSUFDckQsS0FBSyxLQUFLLEtBQU0sS0FBSyxLQUFLLEtBQUssS0FBTyxLQUFLLEtBQUssS0FBSyxJQUNyRCxLQUFLLEtBQUssS0FBTSxLQUFLLEtBQUssS0FBSyxLQUFPLEtBQUssS0FBSyxLQUFLLElBQ3JELEtBQUssS0FBSyxLQUFNLEtBQUssS0FBSyxLQUFLLEtBQU8sS0FBSyxLQUFLLEtBQUs7QUFFekQsWUFBSSxJQUFJLEVBQUU7QUFDVixlQUFPLE1BQU0sR0FBRztBQUNaLGNBQUksRUFBRSxLQUFLLE1BQU0sRUFBRSxLQUFLLE1BQU0sRUFBRSxLQUFLLE1BQU0sRUFBRSxLQUFLLE1BQzlDLGdCQUFnQixJQUFJLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLEtBQ2hELEtBQUssRUFBRSxNQUFNLEdBQUcsRUFBRSxJQUFJLEtBQUs7QUFBRyxtQkFBTztBQUN6QyxjQUFJLEVBQUU7QUFBQSxRQUNWO0FBRUEsZUFBTztBQUFBLE1BQ1g7QUFFQSxlQUFTLFlBQVksS0FBSyxNQUFNLE1BQU0sU0FBUztBQUMzQyxZQUFJLElBQUksSUFBSSxNQUNSLElBQUksS0FDSixJQUFJLElBQUk7QUFFWixZQUFJLEtBQUssR0FBRyxHQUFHLENBQUMsS0FBSztBQUFHLGlCQUFPO0FBRS9CLFlBQUksS0FBSyxFQUFFLEdBQUcsS0FBSyxFQUFFLEdBQUcsS0FBSyxFQUFFLEdBQUcsS0FBSyxFQUFFLEdBQUcsS0FBSyxFQUFFLEdBQUcsS0FBSyxFQUFFO0FBRzdELFlBQUksS0FBSyxLQUFLLEtBQU0sS0FBSyxLQUFLLEtBQUssS0FBTyxLQUFLLEtBQUssS0FBSyxJQUNyRCxLQUFLLEtBQUssS0FBTSxLQUFLLEtBQUssS0FBSyxLQUFPLEtBQUssS0FBSyxLQUFLLElBQ3JELEtBQUssS0FBSyxLQUFNLEtBQUssS0FBSyxLQUFLLEtBQU8sS0FBSyxLQUFLLEtBQUssSUFDckQsS0FBSyxLQUFLLEtBQU0sS0FBSyxLQUFLLEtBQUssS0FBTyxLQUFLLEtBQUssS0FBSztBQUd6RCxZQUFJLE9BQU8sT0FBTyxJQUFJLElBQUksTUFBTSxNQUFNLE9BQU8sR0FDekMsT0FBTyxPQUFPLElBQUksSUFBSSxNQUFNLE1BQU0sT0FBTztBQUU3QyxZQUFJLElBQUksSUFBSSxPQUNSLElBQUksSUFBSTtBQUdaLGVBQU8sS0FBSyxFQUFFLEtBQUssUUFBUSxLQUFLLEVBQUUsS0FBSyxNQUFNO0FBQ3pDLGNBQUksRUFBRSxLQUFLLE1BQU0sRUFBRSxLQUFLLE1BQU0sRUFBRSxLQUFLLE1BQU0sRUFBRSxLQUFLLE1BQU0sTUFBTSxLQUFLLE1BQU0sS0FDckUsZ0JBQWdCLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUMsS0FBSyxLQUFLLEVBQUUsTUFBTSxHQUFHLEVBQUUsSUFBSSxLQUFLO0FBQUcsbUJBQU87QUFDOUYsY0FBSSxFQUFFO0FBRU4sY0FBSSxFQUFFLEtBQUssTUFBTSxFQUFFLEtBQUssTUFBTSxFQUFFLEtBQUssTUFBTSxFQUFFLEtBQUssTUFBTSxNQUFNLEtBQUssTUFBTSxLQUNyRSxnQkFBZ0IsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQyxLQUFLLEtBQUssRUFBRSxNQUFNLEdBQUcsRUFBRSxJQUFJLEtBQUs7QUFBRyxtQkFBTztBQUM5RixjQUFJLEVBQUU7QUFBQSxRQUNWO0FBR0EsZUFBTyxLQUFLLEVBQUUsS0FBSyxNQUFNO0FBQ3JCLGNBQUksRUFBRSxLQUFLLE1BQU0sRUFBRSxLQUFLLE1BQU0sRUFBRSxLQUFLLE1BQU0sRUFBRSxLQUFLLE1BQU0sTUFBTSxLQUFLLE1BQU0sS0FDckUsZ0JBQWdCLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUMsS0FBSyxLQUFLLEVBQUUsTUFBTSxHQUFHLEVBQUUsSUFBSSxLQUFLO0FBQUcsbUJBQU87QUFDOUYsY0FBSSxFQUFFO0FBQUEsUUFDVjtBQUdBLGVBQU8sS0FBSyxFQUFFLEtBQUssTUFBTTtBQUNyQixjQUFJLEVBQUUsS0FBSyxNQUFNLEVBQUUsS0FBSyxNQUFNLEVBQUUsS0FBSyxNQUFNLEVBQUUsS0FBSyxNQUFNLE1BQU0sS0FBSyxNQUFNLEtBQ3JFLGdCQUFnQixJQUFJLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLEtBQUssS0FBSyxFQUFFLE1BQU0sR0FBRyxFQUFFLElBQUksS0FBSztBQUFHLG1CQUFPO0FBQzlGLGNBQUksRUFBRTtBQUFBLFFBQ1Y7QUFFQSxlQUFPO0FBQUEsTUFDWDtBQUdBLGVBQVMsdUJBQXVCLE9BQU8sV0FBVyxLQUFLO0FBQ25ELFlBQUksSUFBSTtBQUNSLFdBQUc7QUFDQyxjQUFJLElBQUksRUFBRSxNQUNOLElBQUksRUFBRSxLQUFLO0FBRWYsY0FBSSxDQUFDQSxRQUFPLEdBQUcsQ0FBQyxLQUFLLFdBQVcsR0FBRyxHQUFHLEVBQUUsTUFBTSxDQUFDLEtBQUssY0FBYyxHQUFHLENBQUMsS0FBSyxjQUFjLEdBQUcsQ0FBQyxHQUFHO0FBRTVGLHNCQUFVLEtBQUssRUFBRSxJQUFJLE1BQU0sQ0FBQztBQUM1QixzQkFBVSxLQUFLLEVBQUUsSUFBSSxNQUFNLENBQUM7QUFDNUIsc0JBQVUsS0FBSyxFQUFFLElBQUksTUFBTSxDQUFDO0FBRzVCLHVCQUFXLENBQUM7QUFDWix1QkFBVyxFQUFFLElBQUk7QUFFakIsZ0JBQUksUUFBUTtBQUFBLFVBQ2hCO0FBQ0EsY0FBSSxFQUFFO0FBQUEsUUFDVixTQUFTLE1BQU07QUFFZixlQUFPLGFBQWEsQ0FBQztBQUFBLE1BQ3pCO0FBR0EsZUFBUyxZQUFZLE9BQU8sV0FBVyxLQUFLLE1BQU0sTUFBTSxTQUFTO0FBRTdELFlBQUksSUFBSTtBQUNSLFdBQUc7QUFDQyxjQUFJLElBQUksRUFBRSxLQUFLO0FBQ2YsaUJBQU8sTUFBTSxFQUFFLE1BQU07QUFDakIsZ0JBQUksRUFBRSxNQUFNLEVBQUUsS0FBSyxnQkFBZ0IsR0FBRyxDQUFDLEdBQUc7QUFFdEMsa0JBQUksSUFBSSxhQUFhLEdBQUcsQ0FBQztBQUd6QixrQkFBSSxhQUFhLEdBQUcsRUFBRSxJQUFJO0FBQzFCLGtCQUFJLGFBQWEsR0FBRyxFQUFFLElBQUk7QUFHMUIsMkJBQWEsR0FBRyxXQUFXLEtBQUssTUFBTSxNQUFNLFNBQVMsQ0FBQztBQUN0RCwyQkFBYSxHQUFHLFdBQVcsS0FBSyxNQUFNLE1BQU0sU0FBUyxDQUFDO0FBQ3REO0FBQUEsWUFDSjtBQUNBLGdCQUFJLEVBQUU7QUFBQSxVQUNWO0FBQ0EsY0FBSSxFQUFFO0FBQUEsUUFDVixTQUFTLE1BQU07QUFBQSxNQUNuQjtBQUdBLGVBQVMsZUFBZSxNQUFNLGFBQWEsV0FBVyxLQUFLO0FBQ3ZELFlBQUksUUFBUSxDQUFDLEdBQ1QsR0FBR0MsTUFBSyxPQUFPLEtBQUs7QUFFeEIsYUFBSyxJQUFJLEdBQUdBLE9BQU0sWUFBWSxRQUFRLElBQUlBLE1BQUssS0FBSztBQUNoRCxrQkFBUSxZQUFZLENBQUMsSUFBSTtBQUN6QixnQkFBTSxJQUFJQSxPQUFNLElBQUksWUFBWSxJQUFJLENBQUMsSUFBSSxNQUFNLEtBQUs7QUFDcEQsaUJBQU8sV0FBVyxNQUFNLE9BQU8sS0FBSyxLQUFLLEtBQUs7QUFDOUMsY0FBSSxTQUFTLEtBQUs7QUFBTSxpQkFBSyxVQUFVO0FBQ3ZDLGdCQUFNLEtBQUssWUFBWSxJQUFJLENBQUM7QUFBQSxRQUNoQztBQUVBLGNBQU0sS0FBSyxRQUFRO0FBR25CLGFBQUssSUFBSSxHQUFHLElBQUksTUFBTSxRQUFRLEtBQUs7QUFDL0Isc0JBQVksY0FBYyxNQUFNLENBQUMsR0FBRyxTQUFTO0FBQUEsUUFDakQ7QUFFQSxlQUFPO0FBQUEsTUFDWDtBQUVBLGVBQVMsU0FBUyxHQUFHLEdBQUc7QUFDcEIsZUFBTyxFQUFFLElBQUksRUFBRTtBQUFBLE1BQ25CO0FBR0EsZUFBUyxjQUFjLE1BQU0sV0FBVztBQUNwQyxZQUFJLFNBQVMsZUFBZSxNQUFNLFNBQVM7QUFDM0MsWUFBSSxDQUFDLFFBQVE7QUFDVCxpQkFBTztBQUFBLFFBQ1g7QUFFQSxZQUFJLGdCQUFnQixhQUFhLFFBQVEsSUFBSTtBQUc3QyxxQkFBYSxlQUFlLGNBQWMsSUFBSTtBQUM5QyxlQUFPLGFBQWEsUUFBUSxPQUFPLElBQUk7QUFBQSxNQUMzQztBQUdBLGVBQVMsZUFBZSxNQUFNLFdBQVc7QUFDckMsWUFBSSxJQUFJLFdBQ0osS0FBSyxLQUFLLEdBQ1YsS0FBSyxLQUFLLEdBQ1YsS0FBSyxXQUNMO0FBSUosV0FBRztBQUNDLGNBQUksTUFBTSxFQUFFLEtBQUssTUFBTSxFQUFFLEtBQUssS0FBSyxFQUFFLEtBQUssTUFBTSxFQUFFLEdBQUc7QUFDakQsZ0JBQUksSUFBSSxFQUFFLEtBQUssS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLElBQUksRUFBRSxNQUFNLEVBQUUsS0FBSyxJQUFJLEVBQUU7QUFDNUQsZ0JBQUksS0FBSyxNQUFNLElBQUksSUFBSTtBQUNuQixtQkFBSztBQUNMLGtCQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssSUFBSSxJQUFJLEVBQUU7QUFDM0Isa0JBQUksTUFBTTtBQUFJLHVCQUFPO0FBQUEsWUFDekI7QUFBQSxVQUNKO0FBQ0EsY0FBSSxFQUFFO0FBQUEsUUFDVixTQUFTLE1BQU07QUFFZixZQUFJLENBQUM7QUFBRyxpQkFBTztBQU1mLFlBQUksT0FBTyxHQUNQLEtBQUssRUFBRSxHQUNQLEtBQUssRUFBRSxHQUNQLFNBQVMsVUFDVDtBQUVKLFlBQUk7QUFFSixXQUFHO0FBQ0MsY0FBSSxNQUFNLEVBQUUsS0FBSyxFQUFFLEtBQUssTUFBTSxPQUFPLEVBQUUsS0FDL0IsZ0JBQWdCLEtBQUssS0FBSyxLQUFLLElBQUksSUFBSSxJQUFJLElBQUksS0FBSyxLQUFLLEtBQUssSUFBSSxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUMsR0FBRztBQUVyRixrQkFBTSxLQUFLLElBQUksS0FBSyxFQUFFLENBQUMsS0FBSyxLQUFLLEVBQUU7QUFFbkMsZ0JBQUksY0FBYyxHQUFHLElBQUksTUFDcEIsTUFBTSxVQUFXLFFBQVEsV0FBVyxFQUFFLElBQUksRUFBRSxLQUFNLEVBQUUsTUFBTSxFQUFFLEtBQUsscUJBQXFCLEdBQUcsQ0FBQyxLQUFPO0FBQ2xHLGtCQUFJO0FBQ0osdUJBQVM7QUFBQSxZQUNiO0FBQUEsVUFDSjtBQUVBLGNBQUksRUFBRTtBQUFBLFFBQ1YsU0FBUyxNQUFNO0FBRWYsZUFBTztBQUFBLE1BQ1g7QUFHQSxlQUFTLHFCQUFxQixHQUFHLEdBQUc7QUFDaEMsZUFBTyxLQUFLLEVBQUUsTUFBTSxHQUFHLEVBQUUsSUFBSSxJQUFJLEtBQUssS0FBSyxFQUFFLE1BQU0sR0FBRyxFQUFFLElBQUksSUFBSTtBQUFBLE1BQ3BFO0FBR0EsZUFBUyxXQUFXLE9BQU8sTUFBTSxNQUFNLFNBQVM7QUFDNUMsWUFBSSxJQUFJO0FBQ1IsV0FBRztBQUNDLGNBQUksRUFBRSxNQUFNO0FBQUcsY0FBRSxJQUFJLE9BQU8sRUFBRSxHQUFHLEVBQUUsR0FBRyxNQUFNLE1BQU0sT0FBTztBQUN6RCxZQUFFLFFBQVEsRUFBRTtBQUNaLFlBQUUsUUFBUSxFQUFFO0FBQ1osY0FBSSxFQUFFO0FBQUEsUUFDVixTQUFTLE1BQU07QUFFZixVQUFFLE1BQU0sUUFBUTtBQUNoQixVQUFFLFFBQVE7QUFFVixtQkFBVyxDQUFDO0FBQUEsTUFDaEI7QUFJQSxlQUFTLFdBQVcsTUFBTTtBQUN0QixZQUFJLEdBQUcsR0FBRyxHQUFHLEdBQUcsTUFBTSxXQUFXLE9BQU8sT0FDcEMsU0FBUztBQUViLFdBQUc7QUFDQyxjQUFJO0FBQ0osaUJBQU87QUFDUCxpQkFBTztBQUNQLHNCQUFZO0FBRVosaUJBQU8sR0FBRztBQUNOO0FBQ0EsZ0JBQUk7QUFDSixvQkFBUTtBQUNSLGlCQUFLLElBQUksR0FBRyxJQUFJLFFBQVEsS0FBSztBQUN6QjtBQUNBLGtCQUFJLEVBQUU7QUFDTixrQkFBSSxDQUFDO0FBQUc7QUFBQSxZQUNaO0FBQ0Esb0JBQVE7QUFFUixtQkFBTyxRQUFRLEtBQU0sUUFBUSxLQUFLLEdBQUk7QUFFbEMsa0JBQUksVUFBVSxNQUFNLFVBQVUsS0FBSyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSTtBQUNsRCxvQkFBSTtBQUNKLG9CQUFJLEVBQUU7QUFDTjtBQUFBLGNBQ0osT0FBTztBQUNILG9CQUFJO0FBQ0osb0JBQUksRUFBRTtBQUNOO0FBQUEsY0FDSjtBQUVBLGtCQUFJO0FBQU0scUJBQUssUUFBUTtBQUFBO0FBQ2xCLHVCQUFPO0FBRVosZ0JBQUUsUUFBUTtBQUNWLHFCQUFPO0FBQUEsWUFDWDtBQUVBLGdCQUFJO0FBQUEsVUFDUjtBQUVBLGVBQUssUUFBUTtBQUNiLG9CQUFVO0FBQUEsUUFFZCxTQUFTLFlBQVk7QUFFckIsZUFBTztBQUFBLE1BQ1g7QUFHQSxlQUFTLE9BQU8sR0FBRyxHQUFHLE1BQU0sTUFBTSxTQUFTO0FBRXZDLGFBQUssSUFBSSxRQUFRLFVBQVU7QUFDM0IsYUFBSyxJQUFJLFFBQVEsVUFBVTtBQUUzQixhQUFLLElBQUssS0FBSyxLQUFNO0FBQ3JCLGFBQUssSUFBSyxLQUFLLEtBQU07QUFDckIsYUFBSyxJQUFLLEtBQUssS0FBTTtBQUNyQixhQUFLLElBQUssS0FBSyxLQUFNO0FBRXJCLGFBQUssSUFBSyxLQUFLLEtBQU07QUFDckIsYUFBSyxJQUFLLEtBQUssS0FBTTtBQUNyQixhQUFLLElBQUssS0FBSyxLQUFNO0FBQ3JCLGFBQUssSUFBSyxLQUFLLEtBQU07QUFFckIsZUFBTyxJQUFLLEtBQUs7QUFBQSxNQUNyQjtBQUdBLGVBQVMsWUFBWSxPQUFPO0FBQ3hCLFlBQUksSUFBSSxPQUNKLFdBQVc7QUFDZixXQUFHO0FBQ0MsY0FBSSxFQUFFLElBQUksU0FBUyxLQUFNLEVBQUUsTUFBTSxTQUFTLEtBQUssRUFBRSxJQUFJLFNBQVM7QUFBSSx1QkFBVztBQUM3RSxjQUFJLEVBQUU7QUFBQSxRQUNWLFNBQVMsTUFBTTtBQUVmLGVBQU87QUFBQSxNQUNYO0FBR0EsZUFBUyxnQkFBZ0IsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJO0FBQ3JELGdCQUFRLEtBQUssT0FBTyxLQUFLLFFBQVEsS0FBSyxPQUFPLEtBQUssUUFDMUMsS0FBSyxPQUFPLEtBQUssUUFBUSxLQUFLLE9BQU8sS0FBSyxRQUMxQyxLQUFLLE9BQU8sS0FBSyxRQUFRLEtBQUssT0FBTyxLQUFLO0FBQUEsTUFDdEQ7QUFHQSxlQUFTLGdCQUFnQixHQUFHLEdBQUc7QUFDM0IsZUFBTyxFQUFFLEtBQUssTUFBTSxFQUFFLEtBQUssRUFBRSxLQUFLLE1BQU0sRUFBRSxLQUFLLENBQUMsa0JBQWtCLEdBQUcsQ0FBQztBQUFBLFNBQzlELGNBQWMsR0FBRyxDQUFDLEtBQUssY0FBYyxHQUFHLENBQUMsS0FBSyxhQUFhLEdBQUcsQ0FBQztBQUFBLFNBQzlELEtBQUssRUFBRSxNQUFNLEdBQUcsRUFBRSxJQUFJLEtBQUssS0FBSyxHQUFHLEVBQUUsTUFBTSxDQUFDO0FBQUEsUUFDN0NELFFBQU8sR0FBRyxDQUFDLEtBQUssS0FBSyxFQUFFLE1BQU0sR0FBRyxFQUFFLElBQUksSUFBSSxLQUFLLEtBQUssRUFBRSxNQUFNLEdBQUcsRUFBRSxJQUFJLElBQUk7QUFBQSxNQUNyRjtBQUdBLGVBQVMsS0FBSyxHQUFHLEdBQUcsR0FBRztBQUNuQixnQkFBUSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTtBQUFBLE1BQzlEO0FBR0EsZUFBU0EsUUFBTyxJQUFJLElBQUk7QUFDcEIsZUFBTyxHQUFHLE1BQU0sR0FBRyxLQUFLLEdBQUcsTUFBTSxHQUFHO0FBQUEsTUFDeEM7QUFHQSxlQUFTLFdBQVcsSUFBSSxJQUFJLElBQUksSUFBSTtBQUNoQyxZQUFJLEtBQUssS0FBSyxLQUFLLElBQUksSUFBSSxFQUFFLENBQUM7QUFDOUIsWUFBSSxLQUFLLEtBQUssS0FBSyxJQUFJLElBQUksRUFBRSxDQUFDO0FBQzlCLFlBQUksS0FBSyxLQUFLLEtBQUssSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUM5QixZQUFJLEtBQUssS0FBSyxLQUFLLElBQUksSUFBSSxFQUFFLENBQUM7QUFFOUIsWUFBSSxPQUFPLE1BQU0sT0FBTztBQUFJLGlCQUFPO0FBRW5DLFlBQUksT0FBTyxLQUFLLFVBQVUsSUFBSSxJQUFJLEVBQUU7QUFBRyxpQkFBTztBQUM5QyxZQUFJLE9BQU8sS0FBSyxVQUFVLElBQUksSUFBSSxFQUFFO0FBQUcsaUJBQU87QUFDOUMsWUFBSSxPQUFPLEtBQUssVUFBVSxJQUFJLElBQUksRUFBRTtBQUFHLGlCQUFPO0FBQzlDLFlBQUksT0FBTyxLQUFLLFVBQVUsSUFBSSxJQUFJLEVBQUU7QUFBRyxpQkFBTztBQUU5QyxlQUFPO0FBQUEsTUFDWDtBQUdBLGVBQVMsVUFBVSxHQUFHLEdBQUcsR0FBRztBQUN4QixlQUFPLEVBQUUsS0FBSyxLQUFLLElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQyxLQUFLLEVBQUUsS0FBSyxLQUFLLElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQyxLQUFLLEVBQUUsS0FBSyxLQUFLLElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQyxLQUFLLEVBQUUsS0FBSyxLQUFLLElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQztBQUFBLE1BQzFIO0FBRUEsZUFBUyxLQUFLLEtBQUs7QUFDZixlQUFPLE1BQU0sSUFBSSxJQUFJLE1BQU0sSUFBSSxLQUFLO0FBQUEsTUFDeEM7QUFHQSxlQUFTLGtCQUFrQixHQUFHLEdBQUc7QUFDN0IsWUFBSSxJQUFJO0FBQ1IsV0FBRztBQUNDLGNBQUksRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEtBQUssTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEtBQUssTUFBTSxFQUFFLEtBQzdELFdBQVcsR0FBRyxFQUFFLE1BQU0sR0FBRyxDQUFDO0FBQUcsbUJBQU87QUFDNUMsY0FBSSxFQUFFO0FBQUEsUUFDVixTQUFTLE1BQU07QUFFZixlQUFPO0FBQUEsTUFDWDtBQUdBLGVBQVMsY0FBYyxHQUFHLEdBQUc7QUFDekIsZUFBTyxLQUFLLEVBQUUsTUFBTSxHQUFHLEVBQUUsSUFBSSxJQUFJLElBQzdCLEtBQUssR0FBRyxHQUFHLEVBQUUsSUFBSSxLQUFLLEtBQUssS0FBSyxHQUFHLEVBQUUsTUFBTSxDQUFDLEtBQUssSUFDakQsS0FBSyxHQUFHLEdBQUcsRUFBRSxJQUFJLElBQUksS0FBSyxLQUFLLEdBQUcsRUFBRSxNQUFNLENBQUMsSUFBSTtBQUFBLE1BQ3ZEO0FBR0EsZUFBUyxhQUFhLEdBQUcsR0FBRztBQUN4QixZQUFJLElBQUksR0FDSixTQUFTLE9BQ1QsTUFBTSxFQUFFLElBQUksRUFBRSxLQUFLLEdBQ25CLE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSztBQUN2QixXQUFHO0FBQ0MsY0FBTSxFQUFFLElBQUksT0FBUyxFQUFFLEtBQUssSUFBSSxNQUFRLEVBQUUsS0FBSyxNQUFNLEVBQUUsS0FDOUMsTUFBTSxFQUFFLEtBQUssSUFBSSxFQUFFLE1BQU0sS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLElBQUksRUFBRSxLQUFLLEVBQUU7QUFDL0QscUJBQVMsQ0FBQztBQUNkLGNBQUksRUFBRTtBQUFBLFFBQ1YsU0FBUyxNQUFNO0FBRWYsZUFBTztBQUFBLE1BQ1g7QUFJQSxlQUFTLGFBQWEsR0FBRyxHQUFHO0FBQ3hCLFlBQUksS0FBSyxJQUFJLEtBQUssRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsR0FDM0IsS0FBSyxJQUFJLEtBQUssRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsR0FDM0IsS0FBSyxFQUFFLE1BQ1AsS0FBSyxFQUFFO0FBRVgsVUFBRSxPQUFPO0FBQ1QsVUFBRSxPQUFPO0FBRVQsV0FBRyxPQUFPO0FBQ1YsV0FBRyxPQUFPO0FBRVYsV0FBRyxPQUFPO0FBQ1YsV0FBRyxPQUFPO0FBRVYsV0FBRyxPQUFPO0FBQ1YsV0FBRyxPQUFPO0FBRVYsZUFBTztBQUFBLE1BQ1g7QUFHQSxlQUFTLFdBQVcsR0FBRyxHQUFHLEdBQUcsTUFBTTtBQUMvQixZQUFJLElBQUksSUFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDO0FBRXhCLFlBQUksQ0FBQyxNQUFNO0FBQ1AsWUFBRSxPQUFPO0FBQ1QsWUFBRSxPQUFPO0FBQUEsUUFFYixPQUFPO0FBQ0gsWUFBRSxPQUFPLEtBQUs7QUFDZCxZQUFFLE9BQU87QUFDVCxlQUFLLEtBQUssT0FBTztBQUNqQixlQUFLLE9BQU87QUFBQSxRQUNoQjtBQUNBLGVBQU87QUFBQSxNQUNYO0FBRUEsZUFBUyxXQUFXLEdBQUc7QUFDbkIsVUFBRSxLQUFLLE9BQU8sRUFBRTtBQUNoQixVQUFFLEtBQUssT0FBTyxFQUFFO0FBRWhCLFlBQUksRUFBRTtBQUFPLFlBQUUsTUFBTSxRQUFRLEVBQUU7QUFDL0IsWUFBSSxFQUFFO0FBQU8sWUFBRSxNQUFNLFFBQVEsRUFBRTtBQUFBLE1BQ25DO0FBRUEsZUFBUyxLQUFLLEdBQUcsR0FBRyxHQUFHO0FBRW5CLGFBQUssSUFBSTtBQUdULGFBQUssSUFBSTtBQUNULGFBQUssSUFBSTtBQUdULGFBQUssT0FBTztBQUNaLGFBQUssT0FBTztBQUdaLGFBQUssSUFBSTtBQUdULGFBQUssUUFBUTtBQUNiLGFBQUssUUFBUTtBQUdiLGFBQUssVUFBVTtBQUFBLE1BQ25CO0FBSUEsTUFBQUQsUUFBTyxZQUFZLFNBQVUsTUFBTSxhQUFhLEtBQUssV0FBVztBQUM1RCxZQUFJLFdBQVcsZUFBZSxZQUFZO0FBQzFDLFlBQUksV0FBVyxXQUFXLFlBQVksQ0FBQyxJQUFJLE1BQU0sS0FBSztBQUV0RCxZQUFJLGNBQWMsS0FBSyxJQUFJLFdBQVcsTUFBTSxHQUFHLFVBQVUsR0FBRyxDQUFDO0FBQzdELFlBQUksVUFBVTtBQUNWLG1CQUFTLElBQUksR0FBR0UsT0FBTSxZQUFZLFFBQVEsSUFBSUEsTUFBSyxLQUFLO0FBQ3BELGdCQUFJLFFBQVEsWUFBWSxDQUFDLElBQUk7QUFDN0IsZ0JBQUksTUFBTSxJQUFJQSxPQUFNLElBQUksWUFBWSxJQUFJLENBQUMsSUFBSSxNQUFNLEtBQUs7QUFDeEQsMkJBQWUsS0FBSyxJQUFJLFdBQVcsTUFBTSxPQUFPLEtBQUssR0FBRyxDQUFDO0FBQUEsVUFDN0Q7QUFBQSxRQUNKO0FBRUEsWUFBSSxnQkFBZ0I7QUFDcEIsYUFBSyxJQUFJLEdBQUcsSUFBSSxVQUFVLFFBQVEsS0FBSyxHQUFHO0FBQ3RDLGNBQUksSUFBSSxVQUFVLENBQUMsSUFBSTtBQUN2QixjQUFJLElBQUksVUFBVSxJQUFJLENBQUMsSUFBSTtBQUMzQixjQUFJLElBQUksVUFBVSxJQUFJLENBQUMsSUFBSTtBQUMzQiwyQkFBaUIsS0FBSztBQUFBLGFBQ2pCLEtBQUssQ0FBQyxJQUFJLEtBQUssQ0FBQyxNQUFNLEtBQUssSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsTUFDOUMsS0FBSyxDQUFDLElBQUksS0FBSyxDQUFDLE1BQU0sS0FBSyxJQUFJLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQztBQUFBLFVBQUU7QUFBQSxRQUN6RDtBQUVBLGVBQU8sZ0JBQWdCLEtBQUssa0JBQWtCLElBQUksSUFDOUMsS0FBSyxLQUFLLGdCQUFnQixlQUFlLFdBQVc7QUFBQSxNQUM1RDtBQUVBLGVBQVMsV0FBVyxNQUFNLE9BQU8sS0FBSyxLQUFLO0FBQ3ZDLFlBQUksTUFBTTtBQUNWLGlCQUFTLElBQUksT0FBTyxJQUFJLE1BQU0sS0FBSyxJQUFJLEtBQUssS0FBSyxLQUFLO0FBQ2xELGtCQUFRLEtBQUssQ0FBQyxJQUFJLEtBQUssQ0FBQyxNQUFNLEtBQUssSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUM7QUFDdEQsY0FBSTtBQUFBLFFBQ1I7QUFDQSxlQUFPO0FBQUEsTUFDWDtBQUdBLE1BQUFGLFFBQU8sVUFBVSxTQUFVLE1BQU07QUFDN0IsWUFBSSxNQUFNLEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBRSxRQUNqQixTQUFTLEVBQUMsVUFBVSxDQUFDLEdBQUcsT0FBTyxDQUFDLEdBQUcsWUFBWSxJQUFHLEdBQ2xELFlBQVk7QUFFaEIsaUJBQVMsSUFBSSxHQUFHLElBQUksS0FBSyxRQUFRLEtBQUs7QUFDbEMsbUJBQVMsSUFBSSxHQUFHLElBQUksS0FBSyxDQUFDLEVBQUUsUUFBUSxLQUFLO0FBQ3JDLHFCQUFTLElBQUksR0FBRyxJQUFJLEtBQUs7QUFBSyxxQkFBTyxTQUFTLEtBQUssS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUFBLFVBQ3BFO0FBQ0EsY0FBSSxJQUFJLEdBQUc7QUFDUCx5QkFBYSxLQUFLLElBQUksQ0FBQyxFQUFFO0FBQ3pCLG1CQUFPLE1BQU0sS0FBSyxTQUFTO0FBQUEsVUFDL0I7QUFBQSxRQUNKO0FBQ0EsZUFBTztBQUFBLE1BQ1g7QUFBQTtBQUFBOzs7QUN4cUJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7O0FFR08sTUFBSyxRQUFBRyxZQVFSQSxNQUFBQSxNQUFBLFNBQVMsQ0FBQSxJQUFULFVBU0FBLE1BQUFBLE1BQUEsT0FBTyxDQUFBLElBQVAsUUFTQUEsTUFBQUEsTUFBQSxNQUFNLENBQUEsSUFBTixPQVNBQSxNQUFBQSxNQUFBLFFBQVEsQ0FBQSxJQUFSLFNBVUFBLE1BQUFBLE1BQUEsU0FBUyxDQUFBLElBQVQsVUFvQkFBLE1BQUFBLE1BQUEsT0FBTyxDQUFBLElBQVAsUUFVQUEsTUFBQUEsTUFBQSxTQUFTLENBQUEsSUFBVCxVQVNBQSxNQUFBQSxNQUFBLE9BQU8sQ0FBQSxJQUFQLFFBU0FBLE1BQUFBLE1BQUEsVUFBVSxDQUFBLElBQVYsV0FTQUEsTUFBQUEsTUFBQSxXQUFXLENBQUEsSUFBWCxZQVNBQSxNQUFBQSxNQUFBLFlBQVksRUFBQSxJQUFaLGFBU0FBLE1BQUFBLE1BQUEsT0FBTyxFQUFBLElBQVAsUUFVQUEsTUFBQUEsTUFBQSxRQUFRLEVBQUEsSUFBUixTQVVBQSxNQUFBQSxNQUFBLFVBQVUsRUFBQSxJQUFWLFdBVUFBLE1BQUFBLE1BQUEsVUFBVSxFQUFBLElBQVYsV0FVQUEsTUFBQUEsTUFBQSxVQUFVLEVBQUEsSUFBVixXQWhLUUEsUUFBQSxRQUFBLENBQUEsQ0FBQTtBQUFMLE1BdUxNLHdCQUFOLE1BQXNEO0lBQ3pELE1BQU0sTUFBWSxPQUFpQjtBQUMvQixjQUFRLE1BQU07UUFDVixLQUFLO1FBQ0wsS0FBSztRQUNMLEtBQUs7UUFDTCxLQUFLO0FBQ0QsaUJBQU8sTUFBTSxNQUFNO1FBQ3ZCO0FBQ0ksaUJBQU87TUFDZjtJQUNKO0VBQ0o7QUFuTU8sTUFzTU0sd0JBQXdCLElBQUk7QUF0TWxDLE1BbVBNLFdBQVcsRUFNcEIsS0FBSyxlQUF3QixPQUEwQjtBQUNuRCxXQUFPLEVBQUMsTUFBTSxHQUFXLFNBQVMsYUFBWTtFQUNsRCxHQU9BLElBQUksZUFBdUIsR0FBc0I7QUFDN0MsV0FBTyxFQUFDLE1BQU0sR0FBVSxTQUFTLGFBQVk7RUFDakQsR0FPQSxNQUFNLGVBQXVCLEdBQXdCO0FBQ2pELFdBQU8sRUFBQyxNQUFNLEdBQVksU0FBUyxhQUFZO0VBQ25ELEdBT0EsT0FBTyxlQUFlLElBQXVCO0FBQ3pDLFdBQU8sRUFBQyxNQUFNLEdBQWEsU0FBUyxhQUFZO0VBQ3BELEdBU0EsS0FBSyxRQUFrQixjQUFtRDtBQUN0RSxXQUFPLEVBQUMsTUFBTSxHQUFXLFFBQVEsU0FBUyxhQUFZO0VBQzFELEdBR0EsT0FBTyxNQUFvRDtBQUN2RCxXQUFPLEVBQUMsTUFBTSxHQUFhLFNBQVMsTUFBTSxVQUFVLE1BQU0sWUFBWSxNQUFLO0VBQy9FLEdBR0EsS0FBSyxNQUFvRDtBQUNyRCxXQUFPLEVBQUMsTUFBTSxHQUFXLFNBQVMsTUFBTSxVQUFVLE1BQU0sWUFBWSxNQUFLO0VBQzdFLEdBR0EsUUFBUSxNQUFvRDtBQUN4RCxXQUFPLEVBQUMsTUFBTSxHQUFjLFNBQVMsTUFBTSxVQUFVLE1BQU0sWUFBWSxNQUFLO0VBQ2hGLEdBR0EsU0FBUyxNQUFvRDtBQUN6RCxXQUFPLEVBQUMsTUFBTSxHQUFlLFNBQVMsTUFBTSxVQUFVLE1BQU0sWUFBWSxNQUFLO0VBQ2pGLEdBR0EsVUFBVSxNQUFvRDtBQUMxRCxXQUFPLEVBQUMsTUFBTSxJQUFnQixTQUFTLE1BQU0sVUFBVSxNQUFNLFlBQVksTUFBSztFQUNsRixHQUdBLEtBQUssTUFBb0Q7QUFDckQsV0FBTyxFQUFDLE1BQU0sSUFBVyxTQUFTLE1BQU0sVUFBVSxNQUFNLFlBQVksTUFBSztFQUM3RSxHQVVBLE1BQU0sSUFBSSxHQUFLLElBQUksR0FBSyxJQUFJLEdBQUssSUFBSSxHQUF3QjtBQUN6RCxXQUFPLEVBQUMsTUFBTSxJQUFZLFNBQVMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLEVBQUM7RUFDbkQsR0FRQSxRQUFRLElBQUksR0FBSyxJQUFJLEdBQXdCO0FBQ3pDLFdBQU8sRUFBQyxNQUFNLElBQWMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxFQUFDO0VBQy9DLEdBU0EsUUFBUSxJQUFJLEdBQUssSUFBSSxHQUFLLElBQUksR0FBd0I7QUFDbEQsV0FBTyxFQUFDLE1BQU0sSUFBYyxTQUFTLENBQUMsR0FBRyxHQUFHLENBQUMsRUFBQztFQUNsRCxHQVVBLFFBQVEsSUFBSSxHQUFLLElBQUksR0FBSyxJQUFJLEdBQUssSUFBSSxHQUF3QjtBQUMzRCxXQUFPLEVBQUMsTUFBTSxJQUFjLFNBQVMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLEVBQUM7RUFDckQsRUFDSjtBQ3RXQSxXQUFTLGtCQUFrQixNQUF5QjtBQUNoRCxXQUFPLFNBQVUsUUFBbUIsYUFBMkI7QUFDM0QsVUFBTSxPQUFPLE9BQU87QUFDcEIsV0FBSyxhQUFhLEtBQUssZUFBZSxZQUFZLElBQUksS0FBSyxhQUFhLENBQUMsR0FDekUsS0FBSyxXQUFXLFdBQVcsSUFBSTtJQUNuQztFQUNKO0FBY08sV0FBUyxhQUFhO0FBQ3pCLFdBQU8sU0FBVSxHQUFRLElBQVksWUFBZ0M7QUFDakUsaUJBQVcsYUFBYTtJQUM1QjtFQUNKO0FBY08sV0FBUyxpQkFBaUI7QUFDN0IsV0FBTyxTQUNILFFBQ0EsYUFDQSxZQUNGO0FBQ0UsaUJBQVcsRUFBRSxRQUFRLGFBQWEsVUFBVSxHQUM1QyxrQkFBa0IsRUFBQyxNQUFBLEVBQWlCLENBQUMsRUFBRSxRQUFRLFdBQVc7SUFDOUQ7RUFDSjtBQStCTyxNQUFNLFdBQVcsQ0FBQztBQU16QixXQUFXLFFBQVE7QUFJZixhQUFTLElBQW9CLElBQUksSUFBSSxTQUFxQztBQUN0RSxVQUFNLFVBQVUsU0FBUyxJQUFvQjtBQUc3QyxhQUFPLGtCQUFrQixRQUFRLEdBQUcsSUFBSSxDQUFDO0lBQzdDO0FDcEZHLFdBQVMsU0FBUyxPQUE2QjtBQUNsRCxXQUFJLFNBQVUsT0FBb0MsUUFDM0MsT0FBTyxTQUFVLFlBQVksTUFBTSxnQkFBZ0I7RUFDOUQ7QUFRTyxXQUFTLFlBQVksT0FBZ0M7QUFDeEQsV0FDSSxpQkFBaUIsb0JBQ2pCLGlCQUFpQixvQkFDakIsaUJBQWlCO0VBRXpCO0FDa0NPLE1BQU0sVUFBTixNQUE0QztJQU01QixhQUE0QixDQUFDO0lBUXhDLGFBQWE7SUFPSixnQkFHWCxDQUFDO0lBNkJQLElBQUksVUFBK0IsT0FBaUMsQ0FBQyxHQUFTO0FBQzFFLFVBQU0sRUFBQyxPQUFPLE9BQU8sS0FBSyxPQUFTLElBQUksTUFDakMsT0FBTyxFQUFDLElBQUksTUFBTSxVQUFVLFNBQVE7QUFDMUMsYUFBSSxLQUFLLGNBQ0wsS0FBSyxjQUFjLEtBQUssRUFBQyxNQUFNLEdBQTBCLEtBQUksQ0FBQyxHQUN2RCxTQUVYLEtBQUssV0FBVyxLQUFLLElBQUksR0FDbEI7SUFDWDtJQVVBLFFBQVEsV0FBd0M7QUFDNUMsZUFBVyxNQUFNO0FBQVcsYUFBSyxJQUFJLEVBQUU7QUFDdkMsYUFBTztJQUNYO0lBaUJBLEtBQUssVUFBK0I7QUFDaEMsYUFBTyxLQUFLLElBQUksVUFBVSxFQUFDLE1BQU0sS0FBSSxDQUFDO0lBQzFDO0lBK0RBLE9BQU8sVUFBMkM7QUFDOUMsVUFBSSxLQUFLO0FBQ0wsZUFBQSxLQUFLLGNBQWMsS0FBSyxFQUFDLE1BQU0sR0FBeUIsTUFBTSxTQUFRLENBQUMsR0FDaEU7QUFHWCxVQUFNLFlBQVksS0FBSztBQUN2QixlQUFTLElBQUksR0FBRyxJQUFJLFVBQVUsUUFBUSxFQUFFLEdBQUc7QUFDdkMsWUFBTSxTQUFTLFVBQVUsQ0FBQztBQUFBLFNBQ3RCLE9BQU8sYUFBYSxZQUFZLE9BQU8sT0FBTyxhQUM5QyxVQUFVLE9BQU8sS0FBSyxDQUFDO01BRS9CO0FBQ0EsYUFBTztJQUNYO0lBYUEsSUFBSSxVQUE4QztBQUM5QyxVQUFNLFlBQVksS0FBSztBQUN2QixlQUFTLElBQUksR0FBRyxJQUFJLFVBQVUsUUFBUSxFQUFFLEdBQUc7QUFDdkMsWUFBTSxTQUFTLFVBQVUsQ0FBQztBQUMxQixZQUFJLE9BQU8sYUFBYSxZQUFZLE9BQU8sT0FBTztBQUFVLGlCQUFPO01BQ3ZFO0FBQ0EsYUFBTztJQUNYO0lBV0EsVUFBVSxNQUFlO0FBQ3JCLFVBQU0sWUFBWSxLQUFLO0FBRXZCLFdBQUssYUFBYTtBQUNsQixlQUFTLElBQUksR0FBRyxJQUFJLFVBQVUsUUFBUSxFQUFFLEdBQUc7QUFDdkMsWUFBTSxXQUFXLFVBQVUsQ0FBQztBQUN4QixpQkFBUyxRQUFNLFVBQVUsT0FBTyxLQUFLLENBQUM7QUFDMUMsWUFBSTtBQUNBLG1CQUFTLFNBQVMsR0FBRyxJQUFJO1FBQzdCLFNBQVMsR0FBVDtBQUNJLGtCQUFRLE1BQU0sQ0FBQztRQUNuQjtNQUNKO0FBQ0EsV0FBSyxhQUFhLE9BR2xCLEtBQUssbUJBQW1CO0lBQzVCO0lBV0EsZ0JBQWdCLE1BQWU7QUFDM0IsVUFBTSxZQUFZLEtBQUs7QUFFdkIsZUFBUyxJQUFJLEdBQUcsSUFBSSxVQUFVLFFBQVEsRUFBRSxHQUFHO0FBQ3ZDLFlBQU0sV0FBVyxVQUFVLENBQUM7QUFDeEIsaUJBQVMsUUFBTSxVQUFVLE9BQU8sS0FBSyxDQUFDLEdBQzFDLFNBQVMsU0FBUyxHQUFHLElBQUk7TUFDN0I7QUFHQSxXQUFLLG1CQUFtQjtJQUM1QjtJQVVBLFVBQXNCO0FBQ2xCLGFBQU8sSUFBSSxRQUFRLENBQUMsS0FBSyxNQUFNO0FBQzNCLGFBQUssS0FBSyxJQUFJLFNBQVM7QUFDZixlQUFLLFNBQVMsSUFDZCxJQUFJLElBQUksSUFFUixJQUFJLEtBQUssQ0FBQyxDQUFNO1FBRXhCLENBQUM7TUFDTCxDQUFDO0lBQ0w7SUFRQSxJQUFJLGdCQUFnQjtBQUNoQixhQUFPLEtBQUssV0FBVztJQUMzQjtJQUdBLElBQUksVUFBVTtBQUNWLGFBQU8sS0FBSyxrQkFBa0I7SUFDbEM7SUFPUSxxQkFBcUI7QUFDekIsVUFBTSxZQUFZLEtBQUs7QUFDdkIsZUFBVyxlQUFlLEtBQUs7QUFDdkIsb0JBQVksU0FBUyxJQUNyQixVQUFVLEtBQUssWUFBWSxJQUFtQixJQUU5QyxLQUFLLE9BQU8sWUFBWSxJQUEyQjtBQUczRCxXQUFLLGNBQWMsU0FBUztJQUNoQztFQUNKO0FBdFNPLE1Bd1RELHlCQUErQyxDQUFDO0FBeFQvQyxNQThWTSxnQkFBTixjQUEwRCxRQUFXO0lBRTlELFNBQTRDO0lBT25DO0lBR25CLElBQUksVUFBK0IsTUFBNkM7QUFDNUUsVUFBTSxZQUFZLE1BQU0sYUFBYTtBQUNyQyxhQUFJLEtBQUssV0FBVywwQkFBMEIsYUFDMUMsU0FBUyxHQUFJLEtBQUssTUFBWSxHQUVsQyxNQUFNLElBQUksVUFBVSxJQUFJLEdBQ2pCO0lBQ1g7SUFVQSxLQUFLLFVBQStCLFdBQXFCO0FBQ3JELGFBQU8sS0FBSyxJQUFJLFVBQVUsRUFBQyxNQUFNLE1BQU0sVUFBUyxDQUFDO0lBQ3JEO0lBR0EsVUFBVSxNQUFlO0FBQ3JCLFdBQUssU0FBUyxNQUNkLE1BQU0sT0FBTyxHQUFHLElBQUk7SUFDeEI7SUFHQSxnQkFBZ0IsTUFBZTtBQUMzQixXQUFLLFNBQVMsTUFDZCxNQUFNLGFBQWEsR0FBRyxJQUFJO0lBQzlCO0lBVUEsUUFBYztBQUNWLGFBQUEsS0FBSyxTQUFTLHdCQUNQO0lBQ1g7SUFHQSxJQUFJLE9BQXNCO0FBQ3RCLGFBQU8sS0FBSyxpQkFBaUIsS0FBSyxTQUFTO0lBQy9DO0lBR0EsSUFBSSxpQkFBMEI7QUFDMUIsYUFBTyxLQUFLLFdBQVc7SUFDM0I7RUFDSjtBQ3piTyxNQUFlLFdBQWYsTUFBd0I7SUFFbEIsU0FBaUI7SUFFakIsTUFBYztJQUVOO0lBRWpCLFlBQVksUUFBMEIsT0FBZTtBQUNqRCxXQUFLLFVBQVUsUUFDZixLQUFLLFNBQVMsT0FDZCxLQUFLLE1BQU07SUFDZjtJQUdBLElBQUksU0FBUztBQUNULGFBQU8sS0FBSztJQUNoQjtJQUdBLElBQUksUUFBUTtBQUNSLGFBQU8sS0FBSztJQUNoQjtJQWdCQSxPQUFPLE9BQXlDO0FBQzVDLGFBQUssUUFDRSxLQUFLLFdBQVcsTUFBTSxTQURWO0lBRXZCO0lBUUEsSUFBSSxjQUFjO0FBQ2QsYUFBTyxLQUFLLFVBQVU7SUFDMUI7RUFDSjtBSXZETyxXQUFTQyxzQkFBcUIsTUFBYztBQUMvQyxXQUFPLElBQUksTUFDUCxDQUFDLEdBQ0QsRUFDSSxJQUFJLEdBQUcsT0FBZTtBQUNsQixVQUFJLFVBQVU7QUFBZSxlQUFPO0FBQ3BDLFlBQU0sSUFBSSxNQUFNLGdCQUFnQix1QkFBdUIsTUFBTTtJQUNqRSxHQUNBLElBQUksR0FBRyxPQUFlO0FBQ2xCLFlBQU0sSUFBSSxNQUFNLGlCQUFpQix1QkFBdUIsTUFBTTtJQUNsRSxFQUNKLENBQ0o7RUFDSjtBQ3NDTyxNQUFLLFVBQUFDLGNBRVJBLFFBQUFBLFFBQUEsU0FBUyxDQUFBLElBQVQsVUFFQUEsUUFBQUEsUUFBQSxRQUFRLENBQUEsSUFBUixTQUVBQSxRQUFBQSxRQUFBLFlBQVksQ0FBQSxJQUFaLGFBTlFBLFVBQUEsVUFBQSxDQUFBLENBQUE7QUFBTCxNQVlLLFlBQUFDLGdCQVFSQSxVQUFBQSxVQUFBLFNBQVMsQ0FBQSxJQUFULFVBUUFBLFVBQUFBLFVBQUEsaUJBQWlCLENBQUEsSUFBakIsa0JBVUFBLFVBQUFBLFVBQUEsTUFBTSxDQUFBLElBQU4sT0ExQlFBLFlBQUEsWUFBQSxDQUFBLENBQUE7QUFaTCxNQTRDSyxhQUFBQyxpQkFFUkEsV0FBQUEsV0FBQSxPQUFPLENBQUEsSUFBUCxRQUdBQSxXQUFBQSxXQUFBLFNBQVMsQ0FBQSxJQUFULFVBR0FBLFdBQUFBLFdBQUEsUUFBUSxDQUFBLElBQVIsU0FSUUEsYUFBQSxhQUFBLENBQUEsQ0FBQTtBQTVDTCxNQTBESyxxQkFBQUMseUJBRVJBLG1CQUFBQSxtQkFBQSxPQUFPLENBQUEsSUFBUCxRQUdBQSxtQkFBQUEsbUJBQUEsU0FBUyxDQUFBLElBQVQsVUFHQUEsbUJBQUFBLG1CQUFBLE1BQU0sQ0FBQSxJQUFOLE9BR0FBLG1CQUFBQSxtQkFBQSxTQUFTLENBQUEsSUFBVCxVQVhRQSxxQkFBQSxxQkFBQSxDQUFBLENBQUE7QUExREwsTUFrRkssY0FBQUMsa0JBRVJBLFlBQUFBLFlBQUEsT0FBTyxDQUFBLElBQVAsUUFHQUEsWUFBQUEsWUFBQSxVQUFVLENBQUEsSUFBVixXQUxRQSxjQUFBLGNBQUEsQ0FBQSxDQUFBO0FBbEZMLE1BK0ZLLGdCQUFBQyxvQkFFUkEsY0FBQUEsY0FBQSxPQUFPLENBQUEsSUFBUCxRQUdBQSxjQUFBQSxjQUFBLE9BQU8sQ0FBQSxJQUFQLFFBR0FBLGNBQUFBLGNBQUEsT0FBTyxDQUFBLElBQVAsUUFHQUEsY0FBQUEsY0FBQSxPQUFPLENBQUEsSUFBUCxRQVhRQSxnQkFBQSxnQkFBQSxDQUFBLENBQUE7QUEvRkwsTUFnSEssYUFBQUMsaUJBRVJBLFdBQUFBLFdBQUEsT0FBTyxDQUFBLElBQVAsUUFHQUEsV0FBQUEsV0FBQSxVQUFVLENBQUEsSUFBVixXQUdBQSxXQUFBQSxXQUFBLFdBQVcsQ0FBQSxJQUFYLFlBR0FBLFdBQUFBLFdBQUEsaUJBQWlCLENBQUEsSUFBakIsa0JBR0FBLFdBQUFBLFdBQUEsa0JBQWtCLENBQUEsSUFBbEIsbUJBR0FBLFdBQUFBLFdBQUEsVUFBVSxDQUFBLElBQVYsV0FHQUEsV0FBQUEsV0FBQSxXQUFXLENBQUEsSUFBWCxZQXBCUUEsYUFBQSxhQUFBLENBQUEsQ0FBQTtBQWhITCxNQTBJSyxrQkFBQUMsc0JBRVJBLGdCQUFBQSxnQkFBQSxjQUFjLENBQUEsSUFBZCxlQUdBQSxnQkFBQUEsZ0JBQUEsZUFBZSxDQUFBLElBQWYsZ0JBTFFBLGtCQUFBLGtCQUFBLENBQUEsQ0FBQTtBQTFJTCxNQXFKSyxhQUFBQyxpQkFFUkEsV0FBQUEsV0FBQSxRQUFRLENBQUEsSUFBUixTQUdBQSxXQUFBQSxXQUFBLE9BQU8sQ0FBQSxJQUFQLFFBR0FBLFdBQUFBLFdBQUEsTUFBTSxDQUFBLElBQU4sT0FSUUEsYUFBQSxhQUFBLENBQUEsQ0FBQTtBQXJKTCxNQW1LSyxrQkFBQUMsc0JBRVJBLGdCQUFBQSxnQkFBQSxVQUFVLENBQUEsSUFBVixXQUlBQSxnQkFBQUEsZ0JBQUEsU0FBUyxDQUFBLElBQVQsVUFHQUEsZ0JBQUFBLGdCQUFBLFVBQVUsQ0FBQSxJQUFWLFdBVFFBLGtCQUFBLGtCQUFBLENBQUEsQ0FBQTtBQW5LTCxNQWtMSyxrQkFBQUMsc0JBRVJBLGdCQUFBQSxnQkFBQSxPQUFPLENBQUEsSUFBUCxRQUVBQSxnQkFBQUEsZ0JBQUEsZUFBZSxDQUFBLElBQWYsZ0JBRUFBLGdCQUFBQSxnQkFBQSxTQUFTLENBQUEsSUFBVCxVQU5RQSxrQkFBQSxrQkFBQSxDQUFBLENBQUE7QUFsTEwsTUFnTUssYUFBQUMsaUJBRVJBLFdBQUFBLFdBQUEsUUFBUSxDQUFBLElBQVIsU0FHQUEsV0FBQUEsV0FBQSxVQUFVLENBQUEsSUFBVixXQUdBQSxXQUFBQSxXQUFBLGlCQUFpQixDQUFBLElBQWpCLGtCQUdBQSxXQUFBQSxXQUFBLGVBQWUsQ0FBQSxJQUFmLGdCQVhRQSxhQUFBLGFBQUEsQ0FBQSxDQUFBO0FBaE1MLE1BaU5LLHNCQUFBQywwQkFFUkEsb0JBQUFBLG9CQUFBLFFBQVEsQ0FBQSxJQUFSLFNBR0FBLG9CQUFBQSxvQkFBQSxZQUFZLENBQUEsSUFBWixhQUdBQSxvQkFBQUEsb0JBQUEsZUFBZSxDQUFBLElBQWYsZ0JBR0FBLG9CQUFBQSxvQkFBQSxtQkFBbUIsQ0FBQSxJQUFuQixvQkFYUUEsc0JBQUEsc0JBQUEsQ0FBQSxDQUFBO0FBak5MLE1Bb09LLFNBQUFDLGFBRVJBLE9BQUFBLE9BQUEsT0FBTyxDQUFBLElBQVAsUUFHQUEsT0FBQUEsT0FBQSxTQUFTLENBQUEsSUFBVCxVQUdBQSxPQUFBQSxPQUFBLFVBQVUsQ0FBQSxJQUFWLFdBR0FBLE9BQUFBLE9BQUEsTUFBTSxDQUFBLElBQU4sT0FHQUEsT0FBQUEsT0FBQSxRQUFRLENBQUEsSUFBUixTQUdBQSxPQUFBQSxPQUFBLGFBQWEsQ0FBQSxJQUFiLGNBR0FBLE9BQUFBLE9BQUEsZUFBZSxDQUFBLElBQWYsZ0JBcEJRQSxTQUFBLFNBQUEsQ0FBQSxDQUFBO0FBcE9MLE1BK1BLLGlCQUFBQyxxQkFFUkEsZUFBQUEsZUFBQSxXQUFXLENBQUEsSUFBWCxZQUdBQSxlQUFBQSxlQUFBLFVBQVUsQ0FBQSxJQUFWLFdBR0FBLGVBQUFBLGVBQUEsU0FBUyxDQUFBLElBQVQsVUFHQUEsZUFBQUEsZUFBQSxvQkFBb0IsQ0FBQSxJQUFwQixxQkFHQUEsZUFBQUEsZUFBQSxRQUFRLENBQUEsSUFBUixTQUdBQSxlQUFBQSxlQUFBLFVBQVUsQ0FBQSxJQUFWLFdBR0FBLGVBQUFBLGVBQUEsY0FBYyxDQUFBLElBQWQsZUFwQlFBLGlCQUFBLGlCQUFBLENBQUEsQ0FBQTtBQS9QTCxNQXVSTSwwQkFBMEJDLHNCQUFxQixRQUFRO0FBdlI3RCxNQXlSTSw2QkFBNkJBLHNCQUFxQixXQUFXO0FBelJuRSxNQTJSTSwwQkFBMEJBLHNCQUFxQixjQUFjO0FBUTFFLFdBQVMsWUFBWSxPQUF1QjtBQUN4QyxXQUFPLFVBQVUsS0FBb0IsVUFBVTtFQUNuRDtBQVdBLFdBQVMscUJBQ0wsT0FDNkI7QUFDN0IsV0FDSSxDQUFDLENBQUMsU0FDRixNQUFNLGVBQWUsa0JBQWtCLEtBQ3RDLE1BQStCO0VBRXhDO0FBU0EsTUFFTSxTQUFTLEtBQUssS0FBSyxDQUFDOztBQUYxQixNQXdDYUMsY0FBTixXQUFnQjtJQVVuQixPQUFPLE1BQU0sT0FBZSxJQUFZO0FBQ3BDLGFBQVEsU0FBUyxLQUFNO0lBQzNCO0lBaUxBLE9BQU8scUJBQXFCO0FBQ3hCLHdCQUFrQixJQUFJO0lBQzFCO0lBOEZTO0lBRUE7SUFFQTtJQVNUO0lBR21CO0lBV25CLFlBQVksT0FBZSxVQUFrQixJQUFJLEtBQWEsSUFBSTtBQUM5RCxXQUFLLFNBQVMsT0FDZCxLQUFLLFdBQVcsU0FDaEIsS0FBSyxXQUFXLElBQ2hCLEtBQUssTUFBTSxHQUFVLE1BQU0sTUFBTSxRQUFRLEVBQUUsR0FDM0MsS0FBSyxVQUFVO0lBQ25CO0lBR0EsSUFBSSxRQUFRO0FBQ1IsYUFBTyxLQUFLO0lBQ2hCO0lBR0EsSUFBSSxTQUFTO0FBQ1QsYUFBTyxLQUFLLE9BQU87SUFDdkI7SUFHQSxJQUFJLE9BQWU7QUFFZixhQURhLEtBQUssWUFDTjtJQUNoQjtJQUdBLElBQUksU0FBbUI7QUFDbkIsVUFBSSxDQUFDLEtBQUssU0FBUztBQUNmLFlBQU0sV0FBVyxLQUFLLE9BQU8sS0FBSyx5QkFDOUIsS0FBSyxVQUNMLEtBQUssR0FDVDtBQUNBLGFBQUssVUFBVSxLQUFLLE9BQU8sS0FBSyxRQUFRO01BQzVDO0FBQ0EsYUFBTyxLQUFLO0lBQ2hCO0lBYUEsSUFBSSxPQUFPLFFBQWlCO0FBQ3hCLFdBQUssT0FBTyxLQUFLLHdCQUF3QixLQUFLLFVBQVUsS0FBSyxLQUFLLE1BQU07SUFDNUU7SUFHQSxJQUFJLFNBQWtCO0FBQ2xCLGFBQU8sS0FBSyxnQkFBZ0IsS0FBSyxPQUFPO0lBQzVDO0lBUUEsSUFBSSxlQUF3QjtBQUN4QixhQUFPLEtBQUssT0FBTyxLQUFLLHVCQUF1QixLQUFLLFVBQVUsS0FBSyxHQUFHLEtBQUs7SUFDL0U7SUFxQ0EsS0FBSyxLQUFnQztBQUVqQyxVQUFNLGFBRE8sS0FBSyxZQUNNO0FBQ3hCLFVBQUksQ0FBQztBQUFZLGVBQU87QUFDeEIsZUFBVyxRQUFRLFlBQVk7QUFDM0IsWUFBTUMsWUFBVyxXQUFXLElBQUksR0FDMUIsUUFBUSxJQUFJLElBQUk7QUFDdEIsWUFBSSxVQUFVO0FBQVc7QUFDekIsWUFBTSxTQUFTQSxVQUFTLFVBQVU7QUFDakMsYUFBNkIsSUFBSSxJQUFJLE9BQU8sTUFBTUEsVUFBUyxNQUFNLEtBQUs7TUFDM0U7QUFDQSxhQUFPO0lBQ1g7SUFjQSxVQUFnQjtBQUNaLFVBQU0sVUFBVSxLQUFLO0FBQ2pCLGdCQUFVLEtBQUssS0FBSyxNQUFNLEtBSTlCLEtBQUssT0FBTyxLQUFLLHFCQUFxQixTQUFTLEtBQUssR0FBRztJQUMzRDtJQWdCQSxPQUFPLGdCQUF1RDtBQUUxRCxhQUFLLGlCQUNFLEtBQUssYUFBYSxlQUFlLFlBQVksS0FBSyxRQUFRLGVBQWUsTUFEcEQ7SUFFaEM7SUFTQSxrQkFBd0I7QUFFcEIsVUFBTSxhQURPLEtBQUssWUFDTTtBQUN4QixVQUFJLENBQUM7QUFBWSxlQUFPO0FBQ3hCLGVBQVcsUUFBUSxZQUFZO0FBQzNCLFlBQU1BLFlBQVcsV0FBVyxJQUFJLEdBQzFCLFNBQVNBLFVBQVMsVUFBVTtBQUNqQyxhQUE2QixJQUFJLElBQUksT0FBTyxNQUN6Q0EsVUFBUyxNQUNUQSxVQUFTLE9BQ2I7TUFDSjtBQUNBLGFBQU87SUFDWDtJQUdBLFFBQWM7QUFDVixhQUFPLEtBQUssZ0JBQWdCO0lBQ2hDO0lBUUEscUJBQTJCO0FBQ3ZCLFVBQU0sT0FBTyxLQUFLO0FBQ2xCLFVBQUssS0FBSyxZQUFBO0FBRVYsaUJBQVcsUUFBUSxLQUFLO0FBQ3BCLGNBQUssS0FBSyxXQUFXLElBQUksRUFBRSxZQUN2QixDQUFFLEtBQTZCLElBQUk7QUFDbkMsa0JBQU0sSUFBSSxNQUFNLGFBQWEsMkNBQTJDO01BQUE7SUFHcEY7SUFFQSxXQUFXO0FBQ1AsYUFBSSxLQUFLLGNBQ0UseUJBRUosY0FBYyxLQUFLLFVBQVUsS0FBSztJQUM3QztJQXNCQSxJQUFJLGNBQXVCO0FBQ3ZCLGFBQU8sS0FBSyxNQUFNO0lBQ3RCO0lBR0EsTUFBTSxLQUFXLFlBQW9CO0FBQ2pDLFVBQU0sT0FBTyxLQUFLLE9BQU8sTUFHbkIsVUFBVSxLQUFLLFNBQ2YsZUFBZSxlQUFlLEdBRTlCLFlBQVksS0FBSyxRQUVqQixPQUFPLEtBQUs7QUFDbEIsZUFBVyxRQUFRLEtBQUssWUFBWTtBQUNoQyxZQUFNLFFBQVMsSUFBNEIsSUFBSTtBQUMvQyxZQUFJLFVBQVUsTUFBTTtBQUNmLGVBQTZCLElBQUksSUFBSTtBQUN0QztRQUNKO0FBRUEsWUFBTSxPQUFPLEtBQUssV0FBVyxJQUFJLEdBQzNCQyxVQUFTLFFBQVEsZUFBZSxLQUFLLElBQUksR0FFM0M7QUFDSixnQkFBUSxLQUFLLE1BQU07VUFDZixLQUFBLEdBQWtCO0FBQ2QsZ0JBQU0sUUFBUSxLQUFLLGlCQUFrQixNQUFtQixHQUFHLEdBQ3JELEtBQUssS0FBSyxjQUFjLFVBQVUsUUFBUSxRQUFRQSxPQUFNO0FBQzlELHlCQUFhLFVBQVUsS0FBSyxFQUFFO0FBQzlCO1VBQ0o7VUFDQSxLQUFBO0FBQ0kseUJBQWEsVUFBVSxXQUFXLEtBQzlCQSxVQUFVLE1BQW9CLE1BQ2xDO0FBQ0E7VUFDSixLQUFBO0FBQ0kseUJBQWEsVUFBVSxNQUFNLEtBQUtBLFVBQVUsTUFBZSxNQUFNO0FBQ2pFO1VBQ0o7QUFFSSwwQkFEZSxLQUFLLFVBQVUsdUJBQ1YsTUFBTSxLQUFLLE1BQU0sS0FBSztBQUMxQztRQUNSO0FBQ0MsYUFBNkIsSUFBSSxJQUFJO01BQzFDO0FBQ0EsYUFBTztJQUNYO0lBWUEsZUFBZTtBQUNYLFVBQUksS0FBSztBQUNMLFlBQUk7QUFDQSxlQUFLLEtBQUs7UUFDZCxTQUFTLEdBQVQ7QUFDSSxlQUFLLE9BQU8sSUFBSSxNQUNaLEdBQ0Esb0JBQW9CLEtBQUsseUJBQXlCLEtBQUssT0FBTyxNQUNsRSxHQUNBLEtBQUssT0FBTyxJQUFJLE1BQU0sR0FBa0IsQ0FBQztRQUM3QztBQUlKLFVBQU0sY0FBYyxLQUFLO0FBQ3pCLFdBQUssYUFBYSxXQUFZO0FBQzFCLGFBQUssYUFBYTtBQUNsQixZQUFJLFNBQVM7QUFDYixZQUFJO0FBQ0EsZUFBSyxtQkFBbUI7UUFDNUIsU0FBUyxHQUFUO0FBQ0ksZUFBSyxPQUFPLElBQUksTUFDWixHQUNBLG9CQUFvQixLQUFLLHVDQUF1QyxLQUFLLE9BQU8sTUFDaEYsR0FDQSxLQUFLLE9BQU8sSUFBSSxNQUFNLEdBQWtCLENBQUMsR0FDekMsU0FBUztRQUNiO0FBRUEsWUFBSTtBQUNBLGVBQUssUUFBUTtRQUNqQixTQUFTLEdBQVQ7QUFDSSxlQUFLLE9BQU8sSUFBSSxNQUNaLEdBQ0Esb0JBQW9CLEtBQUssMEJBQTBCLEtBQUssT0FBTyxNQUNuRSxHQUNBLEtBQUssT0FBTyxJQUFJLE1BQU0sR0FBa0IsQ0FBQyxHQUN6QyxTQUFTO1FBQ2I7QUFFQSxZQUFJLFFBQVE7QUFDUixlQUFLLFNBQVM7QUFDZDtRQUNKO0FBRUEsWUFBSyxLQUFLO0FBRVYsY0FBSTtBQUNBLGlCQUFLLFdBQVc7VUFDcEIsU0FBUyxHQUFUO0FBQ0ksaUJBQUssT0FBTyxJQUFJLE1BQ1osR0FDQSxvQkFBb0IsS0FBSywrQkFBK0IsS0FBSyxPQUFPLE1BQ3hFLEdBQ0EsS0FBSyxPQUFPLElBQUksTUFBTSxHQUFrQixDQUFDO1VBQzdDO01BQ0o7SUFDSjtJQVNBLGVBQWUsSUFBWTtBQUN2QixVQUFLLEtBQUs7QUFDVixZQUFJO0FBQ0EsZUFBSyxPQUFPLEVBQUU7UUFDbEIsU0FBUyxHQUFUO0FBQ0ksZUFBSyxPQUFPLElBQUksTUFDWixHQUNBLG9CQUFvQixLQUFLLDJCQUEyQixLQUFLLE9BQU8sTUFDcEUsR0FDQSxLQUFLLE9BQU8sSUFBSSxNQUFNLEdBQWtCLENBQUMsR0FDckMsS0FBSyxPQUFPLEtBQUssbUNBQ2pCLEtBQUssU0FBUztRQUV0QjtJQUNKO0lBU0EscUJBQXFCO0FBQ2pCLFVBQUssS0FBSztBQUNWLFlBQUk7QUFDQSxlQUFLLFdBQVc7UUFDcEIsU0FBUyxHQUFUO0FBQ0ksZUFBSyxPQUFPLElBQUksTUFDWixHQUNBLG9CQUFvQixLQUFLLCtCQUErQixLQUFLLE9BQU8sTUFDeEUsR0FDQSxLQUFLLE9BQU8sSUFBSSxNQUFNLEdBQWtCLENBQUM7UUFDN0M7SUFDSjtJQVNBLHVCQUF1QjtBQUNuQixVQUFLLEtBQUs7QUFDVixZQUFJO0FBQ0EsZUFBSyxhQUFhO1FBQ3RCLFNBQVMsR0FBVDtBQUNJLGVBQUssT0FBTyxJQUFJLE1BQ1osR0FDQSxvQkFBb0IsS0FBSyxpQ0FBaUMsS0FBSyxPQUFPLE1BQzFFLEdBQ0EsS0FBSyxPQUFPLElBQUksTUFBTSxHQUFrQixDQUFDO1FBQzdDO0lBQ0o7SUFTQSxvQkFBb0I7QUFDaEIsVUFBSTtBQUNJLGFBQUssYUFBVyxLQUFLLFVBQVU7TUFDdkMsU0FBUyxHQUFUO0FBQ0ksYUFBSyxPQUFPLElBQUksTUFDWixHQUNBLG9CQUFvQixLQUFLLDhCQUE4QixLQUFLLE9BQU8sTUFDdkUsR0FDQSxLQUFLLE9BQU8sSUFBSSxNQUFNLEdBQWtCLENBQUM7TUFDN0M7QUFDQSxXQUFLLE9BQU8sWUFBWSxRQUFRLElBQUk7SUFDeEM7RUFDSixHQWh0QkksY0F0QkcsSUFzQmEsb0JBQW1CLE9BVW5DLGNBaENHLElBZ0NJLGtCQUEyQixDQUFDLElBT25DLGNBdkNHLElBdUNJLGFBMERQLGNBakdHLElBaUdJLGVBK0JQLGNBaElHLElBZ0lJLHNCQW9EUCxjQXBMRyxJQW9MSSxlQXBMSjs7QUF4Q1AsTUEweEJhLG1CQUFOQyxNQUFBLGNBQThCSCxXQUFVO0VBRS9DLEdBREksY0FER0csS0FDSSxZQUFXLHlCQURmQTtBQTZCQSxXQUFTLGtCQUFrQixRQUE4QjtBQUM1RCxRQUFJLENBQUMsT0FBTztBQUFVO0FBRXRCLFFBQU0sUUFBZ0MsQ0FBQyxHQUNuQyxPQUFnQztBQUNwQyxXQUFPLFFBQVEsQ0FBQyxxQkFBcUIsSUFBSSxLQUFHO0FBQ3hDLFVBQU0sT0FBTztBQU1iLFVBQUksRUFIZSxLQUFLLGVBQWUsbUJBQW1CLElBQ3BELEtBQUssb0JBQ0w7QUFDVztBQUViLFdBQUssZUFBZSxZQUFZLEtBSWhDLE1BQU0sS0FBSyxJQUFJLEdBRW5CLE9BQU8sT0FBTyxlQUFlLElBQUk7SUFDckM7QUFHQSxRQUFJLENBQUMsTUFBTSxVQUFXLE1BQU0sV0FBVyxLQUFLLE1BQU0sQ0FBQyxNQUFNO0FBQ3JEO0FBR0osUUFBTSxTQUE0QyxDQUFDO0FBQ25ELGFBQVMsSUFBSSxNQUFNLFNBQVMsR0FBRyxLQUFLLEdBQUcsRUFBRTtBQUNyQyxhQUFPLE9BQU8sUUFBUSxNQUFNLENBQUMsRUFBRSxVQUFVO0FBRTdDLFdBQU8sYUFBYTtFQUN4Qjs7QUFPTyxNQUFNLHNCQUFOQSxNQUFBLGNBQWlDSCxXQUFVO0lBZ0I5QyxXQUFXLE1BQW1CLElBQUksYUFBYSxDQUFDLEdBQWdCO0FBQzVELFVBQU0sT0FBTyxLQUFLLE9BQU8sTUFDbkIsTUFBTSxLQUFLLG9DQUFvQyxLQUFLLEdBQUcsSUFBSTtBQUNqRSxhQUFBLElBQUksQ0FBQyxJQUFJLEtBQUssUUFBUSxHQUFHLEdBQ3pCLElBQUksQ0FBQyxJQUFJLEtBQUssUUFBUSxNQUFNLENBQUMsR0FDN0IsSUFBSSxDQUFDLElBQUksS0FBSyxRQUFRLE1BQU0sQ0FBQyxHQUN0QjtJQUNYO0lBSUEsSUFBSSxXQUFxQjtBQUNyQixhQUFPLEtBQUssT0FBTyxLQUFLLHFDQUFxQyxLQUFLLEdBQUc7SUFDekU7SUFPQSxJQUFJLFNBQVMsVUFBb0I7QUFDN0IsV0FBSyxPQUFPLEtBQUsscUNBQXFDLEtBQUssS0FBSyxRQUFRO0lBQzVFO0lBUUEsSUFBSSxVQUF3QjtBQUV4QixVQUFNLE9BQU8sS0FBSyxPQUFPO0FBQ3pCLGFBQU8sSUFBSSxhQUNQLEtBQUssUUFBUSxRQUNiLEtBQUssb0NBQW9DLEtBQUssR0FBRyxHQUNqRCxDQUNKO0lBQ0o7SUFrQkEsSUFBSSxRQUFRLFNBQWdDO0FBQ3hDLFVBQU0sT0FBTyxLQUFLLE9BQU8sTUFDbkIsTUFBTSxLQUFLLG9DQUFvQyxLQUFLLEdBQUcsSUFBSTtBQUNqRSxXQUFLLFFBQVEsR0FBRyxJQUFJLFFBQVEsQ0FBQyxHQUM3QixLQUFLLFFBQVEsTUFBTSxDQUFDLElBQUksUUFBUSxDQUFDLEdBQ2pDLEtBQUssUUFBUSxNQUFNLENBQUMsSUFBSSxRQUFRLENBQUM7SUFDckM7SUFtQkEsSUFBSSxTQUFpQjtBQUNqQixVQUFNLE9BQU8sS0FBSyxPQUFPO0FBQ3pCLFVBQUksS0FBSyxhQUFhO0FBQ2xCLGVBQU8sS0FBSyxRQUFRLEtBQUssb0NBQW9DLEtBQUssR0FBRyxLQUFLLENBQUM7QUFDL0UsVUFBTSxVQUFVLElBQUksYUFDaEIsS0FBSyxRQUFRLFFBQ2IsS0FBSyxvQ0FBb0MsS0FBSyxHQUFHLEdBQ2pELENBQ0osR0FDTSxLQUFLLFFBQVEsQ0FBQyxJQUFJLFFBQVEsQ0FBQyxHQUMzQixLQUFLLFFBQVEsQ0FBQyxJQUFJLFFBQVEsQ0FBQyxHQUMzQixLQUFLLFFBQVEsQ0FBQyxJQUFJLFFBQVEsQ0FBQztBQUNqQyxhQUFPLEtBQUssS0FBSyxLQUFLLEtBQUssRUFBRSxJQUFJO0lBQ3JDO0lBa0JBLElBQUksT0FBTyxRQUFnQjtBQUN2QixVQUFNSSxVQUFTLEtBQUssYUFBYSxJQUFrQixTQUFVLElBQUksU0FBVTtBQUMzRSxXQUFLLFFBQVEsSUFBSSxDQUFDQSxTQUFRQSxTQUFRQSxPQUFNLENBQUM7SUFDN0M7SUE0QkEsSUFBSSxRQUFnQjtBQUNoQixhQUFPLEtBQUssT0FBTyxLQUFLLGtDQUFrQyxLQUFLLEdBQUc7SUFDdEU7SUFPQSxJQUFJLE1BQU0sT0FBZTtBQUNyQixXQUFLLE9BQU8sS0FBSyxrQ0FBa0MsS0FBSyxLQUFLLEtBQUs7SUFDdEU7SUFrQkEsZ0JBQXNDO0FBQ2xDLFVBQU0sUUFBUSxLQUFLLE9BQU8sS0FBSyx1Q0FDM0IsS0FBSyxLQUNMLEtBQUssT0FBTyxLQUFLLFVBQ2pCLEtBQUssT0FBTyxLQUFLLGdCQUFnQixDQUNyQyxHQUNNLFdBQWlDLElBQUksTUFBTSxLQUFLO0FBQ3RELGVBQVMsSUFBSSxHQUFHLElBQUksT0FBTyxFQUFFLEdBQUc7QUFDNUIsWUFBTSxLQUFLLEtBQUssT0FBTyxLQUFLLGVBQWUsQ0FBQztBQUM1QyxpQkFBUyxDQUFDLElBQUksS0FBSyxPQUFPLFlBQVksY0FBYyxFQUFFO01BQzFEO0FBQ0EsYUFBTztJQUNYO0VBQ0osR0F2TUksY0FGR0QsS0FFSSxZQUFXLGNBRmZBO0FBMkJDLGtCQUFBLENBREgsZUFBZSxDQUFBLEdBMUJQLG1CQTJCTCxXQUFBLFlBQUEsQ0FBQSxHQW1CQSxnQkFBQSxDQURILGVBQWUsQ0FBQSxHQTdDUCxtQkE4Q0wsV0FBQSxXQUFBLENBQUEsR0FpSEEsZ0JBQUEsQ0FESCxlQUFlLENBQUEsR0E5SlAsbUJBK0pMLFdBQUEsU0FBQSxDQUFBOztBQWlERCxNQUFNLGlCQUFOQSxNQUFBLGNBQTRCSCxXQUFVO0lBTXpDLElBQUksWUFBdUI7QUFDdkIsYUFBTyxLQUFLLE9BQU8sS0FBSyw0Q0FBNEMsS0FBSyxHQUFHO0lBQ2hGO0lBT0EsSUFBSSxVQUFVLFdBQXNCO0FBQ2hDLFdBQUssT0FBTyxLQUFLLDRDQUE0QyxLQUFLLEtBQUssU0FBUztJQUNwRjtJQU9BLElBQUksb0JBQXVDO0FBQ3ZDLGFBQU8sS0FBSyxPQUFPLEtBQUssMENBQTBDLEtBQUssR0FBRztJQUM5RTtJQVFBLElBQUksa0JBQWtCLG1CQUFzQztBQUN4RCxXQUFLLE9BQU8sS0FBSywwQ0FDYixLQUFLLEtBQ0wsaUJBQ0o7SUFDSjtJQVFBLElBQUksZ0JBQWdCO0FBQ2hCLGFBQU8sS0FBSztJQUNoQjtJQVNBLElBQUksY0FBYyxlQUFrQztBQUNoRCxXQUFLLG9CQUFvQjtJQUM3QjtJQUlBLElBQUksbUJBQTJCO0FBQzNCLGFBQU8sS0FBSyxPQUFPLEtBQUsseUNBQXlDLEtBQUssR0FBRztJQUM3RTtJQU9BLElBQUksaUJBQWlCLFNBQWlCO0FBQ2xDLFdBQUssT0FBTyxLQUFLLHlDQUF5QyxLQUFLLEtBQUssT0FBTztJQUMvRTtJQUlBLElBQUksY0FBc0I7QUFDdEIsYUFBTyxLQUFLLE9BQU8sS0FBSyxvQ0FBb0MsS0FBSyxHQUFHO0lBQ3hFO0lBT0EsSUFBSSxZQUFZLFNBQWlCO0FBQzdCLFdBQUssT0FBTyxLQUFLLG9DQUFvQyxLQUFLLEtBQUssT0FBTztJQUMxRTtJQUlBLElBQUksU0FBcUI7QUFDckIsYUFBTyxLQUFLLE9BQU8sS0FBSyw4QkFBOEIsS0FBSyxHQUFHO0lBQ2xFO0lBT0EsSUFBSSxPQUFPLFFBQW9CO0FBQzNCLFdBQUssT0FBTyxLQUFLLDhCQUE4QixLQUFLLEtBQUssTUFBTTtJQUNuRTtJQU9BLElBQUksV0FBeUI7QUFDekIsYUFBTyxLQUFLLE9BQU8sS0FBSyxnQ0FBZ0MsS0FBSyxHQUFHO0lBQ3BFO0lBUUEsSUFBSSxTQUFTLFVBQXdCO0FBQ2pDLFdBQUssT0FBTyxLQUFLLGdDQUFnQyxLQUFLLEtBQUssUUFBUTtJQUN2RTtJQU9BLElBQUksWUFBb0I7QUFDcEIsYUFBTyxLQUFLLE9BQU8sS0FBSyxpQ0FBaUMsS0FBSyxHQUFHO0lBQ3JFO0lBV0EsSUFBSSxVQUFVLE9BQWU7QUFDekIsV0FBSyxPQUFPLEtBQUssaUNBQWlDLEtBQUssS0FBSyxLQUFLO0lBQ3JFO0lBSUEsSUFBSSxPQUFlO0FBQ2YsVUFBTSxPQUFPLEtBQUssT0FBTyxNQUNuQixNQUFNLEtBQUssNEJBQTRCLEtBQUssR0FBRztBQUNyRCxhQUFPLEtBQUssYUFBYSxHQUFHO0lBQ2hDO0lBT0EsSUFBSSxLQUFLLE1BQVc7QUFDaEIsVUFBTSxPQUFPLEtBQUssT0FBTztBQUN6QixXQUFLLDRCQUE0QixLQUFLLEtBQUssS0FBSyxTQUFTLEtBQUssU0FBUyxDQUFDLENBQUM7SUFDN0U7SUFPQSxJQUFJLFNBQVMsVUFBdUM7QUFDaEQsVUFBTSxXQUFXLFdBQVcsU0FBUyxNQUFNO0FBQzNDLFdBQUssT0FBTyxLQUFLLGdDQUFnQyxLQUFLLEtBQUssUUFBUTtJQUN2RTtJQUlBLElBQUksV0FBNEI7QUFDNUIsVUFBTSxRQUFRLEtBQUssT0FBTyxLQUFLLGdDQUFnQyxLQUFLLEdBQUc7QUFDdkUsYUFBTyxLQUFLLE9BQU8sVUFBVSxLQUFLLEtBQUs7SUFDM0M7SUFnQ0Esc0JBQ0ksTUFDQSxNQUF3QixJQUFJLGFBQWEsQ0FBQyxHQUMxQjtBQUNoQixVQUFNLE9BQU8sS0FBSyxPQUFPLE1BRW5CLFVBQVUsS0FBSyxTQUFTLE1BQU0sSUFBSSxDQUFDO0FBQ3pDLGFBQUEsS0FBSyxPQUFPLEtBQUssbUNBQ2IsS0FBSyxLQUNMLFNBQ0EsS0FBSyxRQUNULEdBQ0EsSUFBSSxDQUFDLElBQUksS0FBSyxjQUFjLENBQUMsR0FDN0IsSUFBSSxDQUFDLElBQUksS0FBSyxjQUFjLENBQUMsR0FDN0IsSUFBSSxDQUFDLElBQUksS0FBSyxjQUFjLENBQUMsR0FDN0IsSUFBSSxDQUFDLElBQUksS0FBSyxjQUFjLENBQUMsR0FDdEI7SUFDWDtJQWlDQSxlQUNJLE1BQXdCLElBQUksYUFBYSxDQUFDLEdBQzFCO0FBQ2hCLFVBQU0sT0FBTyxLQUFLLE9BQU87QUFDekIsYUFBQSxLQUFLLE9BQU8sS0FBSyxtQ0FBbUMsS0FBSyxLQUFLLEdBQUcsS0FBSyxRQUFRLEdBQzlFLElBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDLEdBQzdCLElBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDLEdBQzdCLElBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDLEdBQzdCLElBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDLEdBQ3RCO0lBQ1g7RUFDSixHQWhSSSxjQUZHRyxLQUVJLFlBQVcsU0FGZkE7QUFNQyxrQkFBQSxDQURILGVBQWUsQ0FBQSxHQUxQLGNBTUwsV0FBQSxhQUFBLENBQUEsR0FrQkEsZ0JBQUEsQ0FESCxlQUFlLENBQUEsR0F2QlAsY0F3QkwsV0FBQSxxQkFBQSxDQUFBLEdBdUJBLGdCQUFBLENBREgsZUFBZSxDQUFBLEdBOUNQLGNBK0NMLFdBQUEsaUJBQUEsQ0FBQSxHQWlCQSxnQkFBQSxDQURILGVBQWUsQ0FBQSxHQS9EUCxjQWdFTCxXQUFBLG9CQUFBLENBQUEsR0FlQSxnQkFBQSxDQURILGVBQWUsQ0FBQSxHQTlFUCxjQStFTCxXQUFBLGVBQUEsQ0FBQSxHQWVBLGdCQUFBLENBREgsZUFBZSxDQUFBLEdBN0ZQLGNBOEZMLFdBQUEsVUFBQSxDQUFBLEdBa0JBLGdCQUFBLENBREgsZUFBZSxDQUFBLEdBL0dQLGNBZ0hMLFdBQUEsWUFBQSxDQUFBLEdBbUJBLGdCQUFBLENBREgsZUFBZSxDQUFBLEdBbElQLGNBbUlMLFdBQUEsYUFBQSxDQUFBLEdBbUJBLGdCQUFBLENBREgsZUFBZSxDQUFBLEdBckpQLGNBc0pMLFdBQUEsUUFBQSxDQUFBLEdBNEJBLGdCQUFBLENBREgsZUFBZSxDQUFBLEdBakxQLGNBa0xMLFdBQUEsWUFBQSxDQUFBOztBQXVHRCxNQUFNLGlCQUFOQSxNQUFBLGNBQTRCSCxXQUFVO0lBVXpDLElBQUksaUJBQWlDO0FBQ2pDLGFBQU8sS0FBSyxPQUFPLEtBQUssc0NBQXNDLEtBQUssR0FBRztJQUMxRTtJQVFBLElBQUksZUFBZSxNQUFNO0FBQ3JCLFdBQUssT0FBTyxLQUFLLHNDQUFzQyxLQUFLLEtBQUssSUFBSTtJQUN6RTtJQVdBLG9CQUFvQixNQUFtQixJQUFJLGFBQWEsRUFBRSxHQUFnQjtBQUN0RSxVQUFNLE9BQU8sS0FBSyxPQUFPLE1BQ25CLE1BQ0YsS0FBSyx5Q0FBeUMsS0FBSyxHQUFHLElBQUk7QUFDOUQsZUFBUyxJQUFJLEdBQUcsSUFBSSxJQUFJLEVBQUU7QUFDdEIsWUFBSSxDQUFDLElBQUksS0FBSyxRQUFRLE1BQU0sQ0FBQztBQUVqQyxhQUFPO0lBQ1g7SUFRQSxJQUFJLG1CQUFpQztBQUVqQyxVQUFNLE9BQU8sS0FBSyxPQUFPO0FBQ3pCLGFBQU8sSUFBSSxhQUNQLEtBQUssUUFBUSxRQUNiLEtBQUsseUNBQXlDLEtBQUssR0FBRyxHQUN0RCxFQUNKO0lBQ0o7SUFJQSxJQUFJLE9BQWU7QUFDZixhQUFPLEtBQUssT0FBTyxLQUFLLDRCQUE0QixLQUFLLEdBQUc7SUFDaEU7SUFVQSxJQUFJLEtBQUssTUFBYztBQUNuQixXQUFLLE9BQU8sS0FBSyw0QkFBNEIsS0FBSyxLQUFLLElBQUk7SUFDL0Q7SUFJQSxJQUFJLE1BQWM7QUFDZCxhQUFPLEtBQUssT0FBTyxLQUFLLDJCQUEyQixLQUFLLEdBQUc7SUFDL0Q7SUFVQSxJQUFJLElBQUksS0FBYTtBQUNqQixXQUFLLE9BQU8sS0FBSywyQkFBMkIsS0FBSyxLQUFLLEdBQUc7SUFDN0Q7SUFVQSxJQUFJLE1BQWM7QUFDZCxhQUFPLEtBQUssT0FBTyxLQUFLLDJCQUEyQixLQUFLLEdBQUc7SUFDL0Q7SUFjQSxJQUFJLElBQUksS0FBSztBQUNULFdBQUssT0FBTyxLQUFLLDJCQUEyQixLQUFLLEtBQUssR0FBRztJQUM3RDtJQVFBLElBQUksU0FBaUI7QUFDakIsYUFBTyxLQUFLLE9BQU8sS0FBSyw4QkFBOEIsS0FBSyxHQUFHO0lBQ2xFO0lBV0EsSUFBSSxPQUFPLFFBQVE7QUFDZixXQUFLLE9BQU8sS0FBSyw4QkFBOEIsS0FBSyxLQUFLLE1BQU07SUFDbkU7RUFDSixHQS9JSSxjQUZHRyxLQUVJLFlBQVcsU0FGZkE7QUFVQyxrQkFBQSxDQURILGVBQWUsQ0FBQSxHQVRQLGNBVUwsV0FBQSxrQkFBQSxDQUFBLEdBdUNBLGdCQUFBLENBREgsV0FBVyxDQUFBLEdBaERILGNBaURMLFdBQUEsb0JBQUEsQ0FBQSxHQVlBLGdCQUFBLENBREgsZUFBZSxDQUFBLEdBNURQLGNBNkRMLFdBQUEsUUFBQSxDQUFBLEdBa0JBLGdCQUFBLENBREgsZUFBZSxDQUFBLEdBOUVQLGNBK0VMLFdBQUEsT0FBQSxDQUFBLEdBd0JBLGdCQUFBLENBREgsZUFBZSxDQUFBLEdBdEdQLGNBdUdMLFdBQUEsT0FBQSxDQUFBLEdBMEJBLGdCQUFBLENBREgsZUFBZSxDQUFBLEdBaElQLGNBaUlMLFdBQUEsVUFBQSxDQUFBOztBQXVCRCxNQUFNLGtCQUFOQSxNQUFBLGNBQTZCSCxXQUFVO0lBTTFDLElBQUksWUFBdUI7QUFDdkIsYUFBTyxLQUFLLE9BQU8sS0FBSyw2QkFBNkIsS0FBSyxHQUFHO0lBQ2pFO0lBT0EsSUFBSSxVQUFVLE1BQWlCO0FBQzNCLFdBQUssT0FBTyxLQUFLLDZCQUE2QixLQUFLLEtBQUssSUFBSTtJQUNoRTtJQU9BLElBQUksZ0JBQXNDO0FBQ3RDLFVBQU0sS0FBSyxLQUFLLE9BQU87QUFDdkIsVUFBSSxDQUFDO0FBQUksZUFBTztBQUVoQixlQUFTLGVBQWUsR0FBRyxRQUFRO0FBQy9CLFlBQUksWUFBWSxjQUFjLEtBQUs7QUFDL0IsaUJBQU87QUFJZixhQUFPO0lBQ1g7SUFNQSxJQUFJLGFBQXNDO0FBQ3RDLFVBQU0sWUFBWSxLQUFLO0FBQ3ZCLGFBQ0ksYUFBYSxLQUNiLGFBQWEsS0FDYixhQUFhLElBRU4sVUFFUCxhQUFhLEtBQ2IsYUFBYSxLQUNiLGFBQWEsSUFFTixTQUVKO0lBQ1g7RUFDSixHQXhESSxjQUZHRyxLQUVJLFlBQVcsVUFGZkE7QUFNQyxrQkFBQSxDQURILGVBQWUsQ0FBQSxHQUxQLGVBTUwsV0FBQSxhQUFBLENBQUEsR0FrQkEsZ0JBQUEsQ0FESCxXQUFXLENBQUEsR0F2QkgsZUF3QkwsV0FBQSxpQkFBQSxDQUFBLEdBaUJBLGdCQUFBLENBREgsV0FBVyxDQUFBLEdBeENILGVBeUNMLFdBQUEsY0FBQSxDQUFBOztBQXdCRCxNQUFNLGtCQUFOQSxNQUFBLGNBQTZCSCxXQUFVO0lBYzFDLFNBQVMsTUFBbUIsSUFBSSxhQUFhLENBQUMsR0FBZ0I7QUFDMUQsVUFBTSxPQUFPLEtBQUssT0FBTyxNQUNuQixNQUFNLEtBQUssOEJBQThCLEtBQUssR0FBRyxJQUFJO0FBQzNELGFBQUEsSUFBSSxDQUFDLElBQUksS0FBSyxRQUFRLEdBQUcsR0FDekIsSUFBSSxDQUFDLElBQUksS0FBSyxRQUFRLE1BQU0sQ0FBQyxHQUM3QixJQUFJLENBQUMsSUFBSSxLQUFLLFFBQVEsTUFBTSxDQUFDLEdBQ3RCO0lBQ1g7SUFRQSxTQUFTLEdBQWdDO0FBQ3JDLFVBQU0sT0FBTyxLQUFLLE9BQU8sTUFDbkIsTUFBTSxLQUFLLDhCQUE4QixLQUFLLEdBQUcsSUFBSTtBQUMzRCxXQUFLLFFBQVEsR0FBRyxJQUFJLEVBQUUsQ0FBQyxHQUN2QixLQUFLLFFBQVEsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDLEdBQzNCLEtBQUssUUFBUSxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDL0I7SUFRQSxJQUFJLFFBQXNCO0FBQ3RCLFVBQU0sT0FBTyxLQUFLLE9BQU87QUFDekIsYUFBTyxJQUFJLGFBQ1AsS0FBSyxRQUFRLFFBQ2IsS0FBSyw4QkFBOEIsS0FBSyxHQUFHLEdBQzNDLENBQ0o7SUFDSjtJQVNBLElBQUksTUFBTSxHQUEwQjtBQUNoQyxXQUFLLE1BQU0sSUFBSSxDQUFDO0lBQ3BCO0lBSUEsSUFBSSxZQUF1QjtBQUN2QixhQUFPLEtBQUssT0FBTyxLQUFLLDZCQUE2QixLQUFLLEdBQUc7SUFDakU7SUFPQSxJQUFJLFVBQVUsR0FBYztBQUN4QixXQUFLLE9BQU8sS0FBSyw2QkFBNkIsS0FBSyxLQUFLLENBQUM7SUFDN0Q7SUFPQSxJQUFJLFlBQW9CO0FBQ3BCLGFBQU8sS0FBSyxPQUFPLEtBQUssa0NBQWtDLEtBQUssR0FBRztJQUN0RTtJQVFBLElBQUksVUFBVSxXQUFtQjtBQUM3QixXQUFLLE9BQU8sS0FBSyxrQ0FBa0MsS0FBSyxLQUFLLFNBQVM7SUFDMUU7SUFPQSxJQUFJLGFBQXFCO0FBQ3JCLGFBQU8sS0FBSyxPQUFPLEtBQUssbUNBQW1DLEtBQUssR0FBRztJQUN2RTtJQVFBLElBQUksV0FBV0ssUUFBZTtBQUMxQixXQUFLLE9BQU8sS0FBSyxtQ0FBbUMsS0FBSyxLQUFLQSxNQUFLO0lBQ3ZFO0lBT0EsSUFBSSxhQUFxQjtBQUNyQixhQUFPLEtBQUssT0FBTyxLQUFLLG1DQUFtQyxLQUFLLEdBQUc7SUFDdkU7SUFRQSxJQUFJLFdBQVdBLFFBQWU7QUFDMUIsV0FBSyxPQUFPLEtBQUssbUNBQW1DLEtBQUssS0FBS0EsTUFBSztJQUN2RTtJQU9BLElBQUksVUFBbUI7QUFDbkIsYUFBTyxDQUFDLENBQUMsS0FBSyxPQUFPLEtBQUssZ0NBQWdDLEtBQUssR0FBRztJQUN0RTtJQVFBLElBQUksUUFBUSxHQUFZO0FBQ3BCLFdBQUssT0FBTyxLQUFLLGdDQUFnQyxLQUFLLEtBQUssQ0FBQztJQUNoRTtJQU9BLElBQUksY0FBc0I7QUFDdEIsYUFBTyxLQUFLLE9BQU8sS0FBSyxvQ0FBb0MsS0FBSyxHQUFHO0lBQ3hFO0lBUUEsSUFBSSxZQUFZLE9BQWU7QUFDM0IsV0FBSyxPQUFPLEtBQUssb0NBQW9DLEtBQUssS0FBSyxLQUFLO0lBQ3hFO0lBT0EsSUFBSSxhQUFxQjtBQUNyQixhQUFPLEtBQUssT0FBTyxLQUFLLG1DQUFtQyxLQUFLLEdBQUc7SUFDdkU7SUFRQSxJQUFJLFdBQVcsTUFBYztBQUN6QixXQUFLLE9BQU8sS0FBSyxtQ0FBbUMsS0FBSyxLQUFLLElBQUk7SUFDdEU7SUFPQSxJQUFJLG1CQUEyQjtBQUMzQixhQUFPLEtBQUssT0FBTyxLQUFLLHlDQUF5QyxLQUFLLEdBQUc7SUFDN0U7SUFRQSxJQUFJLGlCQUFpQixNQUFjO0FBQy9CLFdBQUssT0FBTyxLQUFLLHlDQUF5QyxLQUFLLEtBQUssSUFBSTtJQUM1RTtJQU9BLElBQUksa0JBQTBCO0FBQzFCLGFBQU8sS0FBSyxPQUFPLEtBQUssd0NBQXdDLEtBQUssR0FBRztJQUM1RTtJQVFBLElBQUksZ0JBQWdCLE1BQWM7QUFDOUIsV0FBSyxPQUFPLEtBQUssd0NBQXdDLEtBQUssS0FBSyxJQUFJO0lBQzNFO0lBT0EsSUFBSSxlQUF1QjtBQUN2QixhQUFPLEtBQUssT0FBTyxLQUFLLHFDQUFxQyxLQUFLLEdBQUc7SUFDekU7SUFRQSxJQUFJLGFBQWEsT0FBZTtBQUM1QixXQUFLLE9BQU8sS0FBSyxxQ0FBcUMsS0FBSyxLQUFLLEtBQUs7SUFDekU7RUFDSixHQXRQSSxjQUZHRixLQUVJLFlBQVcsVUFGZkE7QUEyQ0Msa0JBQUEsQ0FESCxlQUFlLENBQUEsR0ExQ1AsZUEyQ0wsV0FBQSxTQUFBLENBQUEsR0FzQkEsZ0JBQUEsQ0FESCxlQUFlLENBQUEsR0FoRVAsZUFpRUwsV0FBQSxhQUFBLENBQUEsR0FrQkEsZ0JBQUEsQ0FESCxlQUFlLENBQUEsR0FsRlAsZUFtRkwsV0FBQSxhQUFBLENBQUEsR0FtQkEsZ0JBQUEsQ0FESCxlQUFlLENBQUEsR0FyR1AsZUFzR0wsV0FBQSxjQUFBLENBQUEsR0FtQkEsZ0JBQUEsQ0FESCxlQUFlLENBQUEsR0F4SFAsZUF5SEwsV0FBQSxjQUFBLENBQUEsR0FtQkEsZ0JBQUEsQ0FESCxlQUFlLENBQUEsR0EzSVAsZUE0SUwsV0FBQSxXQUFBLENBQUEsR0FtQkEsZ0JBQUEsQ0FESCxlQUFlLENBQUEsR0E5SlAsZUErSkwsV0FBQSxlQUFBLENBQUEsR0FtQkEsZ0JBQUEsQ0FESCxlQUFlLENBQUEsR0FqTFAsZUFrTEwsV0FBQSxjQUFBLENBQUEsR0FtQkEsZ0JBQUEsQ0FESCxlQUFlLENBQUEsR0FwTVAsZUFxTUwsV0FBQSxvQkFBQSxDQUFBLEdBbUJBLGdCQUFBLENBREgsZUFBZSxDQUFBLEdBdk5QLGVBd05MLFdBQUEsbUJBQUEsQ0FBQSxHQW1CQSxnQkFBQSxDQURILGVBQWUsQ0FBQSxHQTFPUCxlQTJPTCxXQUFBLGdCQUFBLENBQUE7O0FBb0JELE1BQU0sc0JBQU5BLE1BQUEsY0FBaUNILFdBQVU7SUFTckMsVUFBVSxJQUFJO0lBVXZCLElBQUksVUFBVSxNQUFvQztBQUM5QyxXQUFLLE1BQU0sYUFBYSxJQUFJLEdBQzVCLEtBQUssT0FBTyxLQUFLLHNDQUNiLEtBQUssS0FDTCxPQUFPLEtBQUssTUFBTSxDQUN0QjtJQUNKO0lBSUEsSUFBSSxZQUE4QjtBQUM5QixVQUFNLFFBQVEsS0FBSyxPQUFPLEtBQUssc0NBQXNDLEtBQUssR0FBRztBQUM3RSxhQUFPLEtBQUssT0FBTyxXQUFXLEtBQUssS0FBSztJQUM1QztJQU9BLElBQUksVUFBVSxXQUFtQjtBQUM3QixXQUFLLE9BQU8sS0FBSyxzQ0FBc0MsS0FBSyxLQUFLLFNBQVM7SUFDOUU7SUFJQSxJQUFJLFlBQW9CO0FBQ3BCLGFBQU8sS0FBSyxPQUFPLEtBQUssc0NBQXNDLEtBQUssR0FBRztJQUMxRTtJQVdBLElBQUksTUFBTSxPQUFlO0FBQ3JCLFdBQUssT0FBTyxLQUFLLGtDQUFrQyxLQUFLLEtBQUssS0FBSztJQUN0RTtJQVFBLElBQUksUUFBZ0I7QUFDaEIsYUFBTyxLQUFLLE9BQU8sS0FBSyxrQ0FBa0MsS0FBSyxHQUFHO0lBQ3RFO0lBSUEsSUFBSSxRQUF3QjtBQUN4QixhQUFPLEtBQUssT0FBTyxLQUFLLDhCQUE4QixLQUFLLEdBQUc7SUFDbEU7SUFTQSxJQUFJLGlCQUFpQztBQUNqQyxhQUFPLEtBQUssT0FBTyxLQUFLLDJDQUEyQyxLQUFLLEdBQUc7SUFDL0U7SUFRQSxJQUFJLGVBQWUsTUFBc0I7QUFDckMsV0FBSyxPQUFPLEtBQUssMkNBQTJDLEtBQUssS0FBSyxJQUFJO0lBQzlFO0lBVUEsSUFBSSxZQUFvQjtBQUNwQixhQUFPLEtBQUssT0FBTyxLQUFLLHNDQUFzQyxLQUFLLEdBQUc7SUFDMUU7SUFXQSxJQUFJLFdBQW1CO0FBQ25CLGFBQU8sS0FBSyxPQUFPLEtBQUsscUNBQXFDLEtBQUssR0FBRztJQUN6RTtJQVFBLElBQUksV0FBbUI7QUFDbkIsYUFBTyxLQUFLLE9BQU8sS0FBSyxxQ0FBcUMsS0FBSyxHQUFHO0lBQ3pFO0lBVUEsT0FBYTtBQUNULFdBQUssT0FBTyxLQUFLLDZCQUE2QixLQUFLLEdBQUc7SUFDMUQ7SUFHQSxPQUFhO0FBQ1QsV0FBSyxPQUFPLEtBQUssNkJBQTZCLEtBQUssR0FBRztJQUMxRDtJQUdBLFFBQWM7QUFDVixXQUFLLE9BQU8sS0FBSyw4QkFBOEIsS0FBSyxHQUFHO0lBQzNEO0lBU0Esa0JBQWtCLE1BQTZCO0FBQzNDLFVBQU0sT0FBTyxLQUFLLE9BQU8sTUFDbkIsUUFBUSxLQUFLLDJDQUNmLEtBQUssS0FDTCxLQUFLLFNBQVMsSUFBSSxDQUN0QjtBQUNBLFVBQUksVUFBVTtBQUNWLGNBQU0sTUFBTSxzQkFBc0IsT0FBTztBQUU3QyxhQUFBLEtBQUssMkNBQTJDLEtBQUssS0FBSyxPQUFPLEtBQUssUUFBUSxHQUN2RSxLQUFLLGNBQWMsQ0FBQztJQUMvQjtJQVdBLGtCQUFrQixNQUFjLE9BQXFCO0FBQ2pELFVBQU0sT0FBTyxLQUFLLE9BQU8sTUFDbkIsUUFBUSxLQUFLLDJDQUNmLEtBQUssS0FDTCxLQUFLLFNBQVMsSUFBSSxDQUN0QjtBQUNBLFVBQUksVUFBVTtBQUNWLGNBQU0sTUFBTSxzQkFBc0IsT0FBTztBQUU3QyxXQUFLLGNBQWMsQ0FBQyxJQUFJLE9BQ3hCLEtBQUssMkNBQTJDLEtBQUssS0FBSyxPQUFPLEtBQUssUUFBUTtJQUNsRjtJQWFBLHlCQUF5QixNQUFtQixJQUFJLGFBQWEsQ0FBQyxHQUFnQjtBQUMxRSxVQUFNLE9BQU8sS0FBSyxPQUFPO0FBQ3pCLGFBQUEsS0FBSyxtREFBbUQsS0FBSyxLQUFLLEtBQUssUUFBUSxHQUMvRSxJQUFJLENBQUMsSUFBSSxLQUFLLGNBQWMsQ0FBQyxHQUM3QixJQUFJLENBQUMsSUFBSSxLQUFLLGNBQWMsQ0FBQyxHQUM3QixJQUFJLENBQUMsSUFBSSxLQUFLLGNBQWMsQ0FBQyxHQUN0QjtJQUNYO0lBYUEsc0JBQXNCLE1BQW1CLElBQUksYUFBYSxDQUFDLEdBQWdCO0FBQ3ZFLFVBQU0sT0FBTyxLQUFLLE9BQU87QUFDekIsYUFBQSxLQUFLLGdEQUFnRCxLQUFLLEtBQUssS0FBSyxRQUFRLEdBQzVFLElBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDLEdBQzdCLElBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDLEdBQzdCLElBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDLEdBQ3RCO0lBQ1g7RUFDSixHQTNPSSxjQUZHRyxLQUVJLFlBQVcsY0FGZkE7QUE2QkMsa0JBQUEsQ0FESCxlQUFlLENBQUEsR0E1QlAsbUJBNkJMLFdBQUEsYUFBQSxDQUFBLEdBZ0JBLGdCQUFBLENBREgsZUFBZSxDQUFBLEdBNUNQLG1CQTZDTCxXQUFBLGFBQUEsQ0FBQSxHQXVCQSxnQkFBQSxDQURILGVBQWUsQ0FBQSxHQW5FUCxtQkFvRUwsV0FBQSxTQUFBLENBQUEsR0FNQSxnQkFBQSxDQURILFdBQVcsQ0FBQSxHQXpFSCxtQkEwRUwsV0FBQSxTQUFBLENBQUEsR0FXQSxnQkFBQSxDQUZILGVBQWUsR0FDZixXQUFXLENBQUEsR0FwRkgsbUJBcUZMLFdBQUEsa0JBQUEsQ0FBQTs7QUErSkQsTUFBTSxpQkFBTkEsTUFBQSxjQUE0QkgsV0FBVTtJQVN6QyxJQUFJLFNBQVMsVUFBdUM7QUFDaEQsV0FBSyxPQUFPLEtBQUssZ0NBQ2IsS0FBSyxLQUNMLFdBQVcsU0FBUyxNQUFNLENBQzlCO0lBQ0o7SUFJQSxJQUFJLFdBQTRCO0FBQzVCLFVBQU0sUUFBUSxLQUFLLE9BQU8sS0FBSyxnQ0FBZ0MsS0FBSyxHQUFHO0FBQ3ZFLGFBQU8sS0FBSyxPQUFPLFVBQVUsS0FBSyxLQUFLO0lBQzNDO0lBSUEsSUFBSSxPQUFvQjtBQUNwQixVQUFNLFFBQVEsS0FBSyxPQUFPLEtBQUssNEJBQTRCLEtBQUssR0FBRztBQUNuRSxhQUFPLEtBQUssT0FBTyxPQUFPLEtBQUssS0FBSztJQUN4QztJQU9BLElBQUksS0FBSyxNQUErQjtBQUNwQyxXQUFLLE9BQU8sS0FBSyw0QkFBNEIsS0FBSyxLQUFLLE1BQU0sT0FBTyxDQUFDO0lBQ3pFO0lBSUEsSUFBSSxPQUFvQjtBQUNwQixVQUFNLFFBQVEsS0FBSyxPQUFPLEtBQUssNEJBQTRCLEtBQUssR0FBRztBQUNuRSxhQUFPLEtBQUssT0FBTyxNQUFNLEtBQUssS0FBSztJQUN2QztJQU9BLElBQUksS0FBSyxNQUErQjtBQUNwQyxXQUFLLE1BQU0sYUFBYSxJQUFJLEdBQzVCLEtBQUssT0FBTyxLQUFLLDRCQUE0QixLQUFLLEtBQUssT0FBTyxLQUFLLE1BQU0sQ0FBQztJQUM5RTtJQVFBLElBQUksZUFBb0M7QUFDcEMsVUFBTSxRQUFRLEtBQUssT0FBTyxLQUFLLHFDQUFxQyxLQUFLLEdBQUc7QUFDNUUsYUFBTyxLQUFLLE9BQU8sYUFBYSxLQUFLLEtBQUs7SUFDOUM7SUFTQSxJQUFJLGFBQWEsY0FBK0M7QUFDNUQsV0FBSyxPQUFPLEtBQUsscUNBQ2IsS0FBSyxLQUNMLGNBQWMsT0FBTyxDQUN6QjtJQUNKO0lBVUEsSUFBSSxxQkFBbUM7QUFDbkMsYUFBTyxLQUFLLHNCQUFzQjtJQUN0QztJQVNBLElBQUksbUJBQW1CLFNBQWdDO0FBQ25ELFdBQUssc0JBQXNCLE9BQU87SUFDdEM7SUFjQSxzQkFBc0IsS0FBZ0M7QUFDbEQsVUFBTSxPQUFPLEtBQUssT0FBTyxNQUNuQixRQUFRLEtBQUssNENBQ2YsS0FBSyxLQUNMLEtBQUssUUFDVDtBQUNLLGNBQ0QsTUFBTSxJQUFJLGFBQWEsS0FBSztBQUVoQyxlQUFTLElBQUksR0FBRyxJQUFJLE9BQU8sRUFBRTtBQUN6QixZQUFJLENBQUMsSUFBSSxLQUFLLGNBQWMsQ0FBQztBQUVqQyxhQUFPO0lBQ1g7SUFVQSxxQkFBcUIsUUFBZ0I7QUFDakMsVUFBTSxRQUFRLEtBQUssY0FBYyxTQUFTO0FBQzFDLFVBQUksVUFBVTtBQUNWLGNBQU0sSUFBSSxNQUFNLFNBQVMsK0JBQStCLGVBQWU7QUFFM0UsYUFBTyxLQUFLLE9BQU8sS0FBSywyQ0FDcEIsS0FBSyxLQUNMLE1BQ0o7SUFDSjtJQVVBLHNCQUFzQixTQUFnQztBQUNsRCxVQUFNLFFBQVEsS0FBSyxjQUFjLFNBQVM7QUFDMUMsVUFBSSxRQUFRLFdBQVc7QUFDbkIsY0FBTSxJQUFJLE1BQU0sWUFBWSx5QkFBeUIsUUFBUSxRQUFRO0FBRXpFLFVBQU0sT0FBTyxLQUFLLE9BQU87QUFDekIsV0FBSyxjQUFjLElBQUksT0FBTyxHQUM5QixLQUFLLDRDQUNELEtBQUssS0FDTCxLQUFLLFVBQ0wsUUFBUSxNQUNaO0lBQ0o7SUFrQkEscUJBQXFCLFFBQWdCLFFBQWdCO0FBQ2pELFVBQU0sUUFBUSxLQUFLLGNBQWMsU0FBUztBQUMxQyxVQUFJLFVBQVU7QUFDVixjQUFNLElBQUksTUFBTSxTQUFTLCtCQUErQixlQUFlO0FBRTNFLFdBQUssT0FBTyxLQUFLLDJDQUNiLEtBQUssS0FDTCxRQUNBLE1BQ0o7SUFDSjtFQUNKLEdBck1JLGNBRkdHLEtBRUksWUFBVyxTQUZmQTtBQWtCQyxrQkFBQSxDQURILGVBQWUsQ0FBQSxHQWpCUCxjQWtCTCxXQUFBLFlBQUEsQ0FBQSxHQU9BLGdCQUFBLENBREgsZUFBZSxDQUFBLEdBeEJQLGNBeUJMLFdBQUEsUUFBQSxDQUFBLEdBZ0JBLGdCQUFBLENBREgsZUFBZSxDQUFBLEdBeENQLGNBeUNMLFdBQUEsUUFBQSxDQUFBLEdBcUJBLGdCQUFBLENBREgsZUFBZSxDQUFBLEdBN0RQLGNBOERMLFdBQUEsZ0JBQUEsQ0FBQSxHQTJCQSxnQkFBQSxDQURILGVBQWUsQ0FBQSxHQXhGUCxjQXlGTCxXQUFBLHNCQUFBLENBQUE7QUFxSEQsTUFBSyxZQUFBRyxnQkFJUkEsVUFBQUEsVUFBQSxPQUFPLENBQUEsSUFBUCxRQUtBQSxVQUFBQSxVQUFBLElBQUksQ0FBQSxJQUFKLEtBS0FBLFVBQUFBLFVBQUEsSUFBSSxDQUFBLElBQUosS0FLQUEsVUFBQUEsVUFBQSxJQUFJLENBQUEsSUFBSixLQW5CUUEsWUFBQSxZQUFBLENBQUEsQ0FBQTs7QUFBTCxNQTRCTSxrQkFBTkgsT0FBQSxjQUE2QkgsV0FBVTtJQWlCMUMscUJBQXFCLE1BQW1CLElBQUksYUFBYSxDQUFDLEdBQWdCO0FBQ3RFLFVBQU0sT0FBTyxLQUFLLE9BQU87QUFDekIsYUFBQSxLQUFLLDBDQUEwQyxLQUFLLEtBQUssS0FBSyxRQUFRLEdBQ3RFLElBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDLEdBQzdCLElBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDLEdBQzdCLElBQUksQ0FBQyxJQUFJLEtBQUssY0FBYyxDQUFDLEdBQ3RCO0lBQ1g7SUFlQSxrQkFBa0IsTUFBbUIsSUFBSSxhQUFhLENBQUMsR0FBZ0I7QUFDbkUsVUFBTSxPQUFPLEtBQUssT0FBTyxNQUNuQixNQUNGLEtBQUssd0NBQXdDLEtBQUssR0FBRyxLQUFLO0FBQzlELGFBQUEsSUFBSSxDQUFDLElBQUksS0FBSyxRQUFRLEdBQUcsR0FDekIsSUFBSSxDQUFDLElBQUksS0FBSyxRQUFRLE1BQU0sQ0FBQyxHQUM3QixJQUFJLENBQUMsSUFBSSxLQUFLLFFBQVEsTUFBTSxDQUFDLEdBQzdCLElBQUksQ0FBQyxJQUFJLEtBQUssUUFBUSxNQUFNLENBQUMsR0FDdEI7SUFDWDtJQVdBLFdBQVcsTUFBbUIsSUFBSSxhQUFhLENBQUMsR0FBZ0I7QUFDNUQsVUFBTSxPQUFPLEtBQUssT0FBTyxNQUNuQixNQUFNLEtBQUssZ0NBQWdDLEtBQUssR0FBRyxJQUFJO0FBQzdELGFBQUEsSUFBSSxDQUFDLElBQUksS0FBSyxRQUFRLEdBQUcsR0FDekIsSUFBSSxDQUFDLElBQUksS0FBSyxRQUFRLE1BQU0sQ0FBQyxHQUM3QixJQUFJLENBQUMsSUFBSSxLQUFLLFFBQVEsTUFBTSxDQUFDLEdBQ3RCO0lBQ1g7SUFXQSxrQkFBa0IsTUFBbUIsSUFBSSxhQUFhLENBQUMsR0FBZ0I7QUFDbkUsVUFBTSxPQUFPLEtBQUssT0FBTyxNQUNuQixlQUFlLEtBQUs7QUFDMUIsYUFBQSxLQUFLLHVDQUNELEtBQUssS0FDTCxLQUFLLFFBQ1QsR0FDQSxJQUFJLENBQUMsSUFBSSxhQUFhLENBQUMsR0FDdkIsSUFBSSxDQUFDLElBQUksYUFBYSxDQUFDLEdBQ3ZCLElBQUksQ0FBQyxJQUFJLGFBQWEsQ0FBQyxHQUNoQjtJQUNYO0lBV0EsbUJBQW1CLE1BQW1CLElBQUksYUFBYSxDQUFDLEdBQWdCO0FBQ3BFLFVBQU0sT0FBTyxLQUFLLE9BQU8sTUFDbkIsZUFBZSxLQUFLO0FBQzFCLGFBQUEsS0FBSyx3Q0FDRCxLQUFLLEtBQ0wsS0FBSyxRQUNULEdBQ0EsSUFBSSxDQUFDLElBQUksYUFBYSxDQUFDLEdBQ3ZCLElBQUksQ0FBQyxJQUFJLGFBQWEsQ0FBQyxHQUN2QixJQUFJLENBQUMsSUFBSSxhQUFhLENBQUMsR0FDaEI7SUFDWDtJQVVBLElBQUksT0FBTyxHQUFZO0FBQ25CLFdBQUssT0FBTyxLQUFLLCtCQUErQixLQUFLLEtBQUssQ0FBQztJQUMvRDtJQWFBLElBQUksU0FBa0I7QUFDbEIsYUFBTyxDQUFDLENBQUMsS0FBSyxPQUFPLEtBQUssK0JBQStCLEtBQUssR0FBRztJQUNyRTtJQVlBLElBQUksb0JBQWtDO0FBQ2xDLGFBQU8sS0FBSyxxQkFBcUI7SUFDckM7SUFXQSxJQUFJLGtCQUFrQkUsU0FBMkI7QUFDaEMsV0FBSyxPQUFPLEtBQ3BCLDBDQUNELEtBQUssS0FDTEEsUUFBTyxDQUFDLEdBQ1JBLFFBQU8sQ0FBQyxHQUNSQSxRQUFPLENBQUMsQ0FDWjtJQUNKO0lBWUEsSUFBSSxpQkFBK0I7QUFDL0IsYUFBTyxLQUFLLGtCQUFrQjtJQUNsQztJQVdBLElBQUksZUFBZUEsU0FBMkI7QUFDN0IsV0FBSyxPQUFPLEtBQ3BCLHVDQUNELEtBQUssS0FDTEEsUUFBTyxDQUFDLEdBQ1JBLFFBQU8sQ0FBQyxHQUNSQSxRQUFPLENBQUMsR0FDUkEsUUFBTyxDQUFDLENBQ1o7SUFDSjtJQU9BLElBQUksVUFBVSxHQUFZO0FBQ3RCLFdBQUssT0FBTyxLQUFLLGtDQUFrQyxLQUFLLEtBQUssQ0FBQztJQUNsRTtJQU1BLElBQUksWUFBcUI7QUFDckIsYUFBTyxDQUFDLENBQUMsS0FBSyxPQUFPLEtBQUssa0NBQWtDLEtBQUssR0FBRztJQUN4RTtJQU9BLElBQUksUUFBUSxHQUFZO0FBQ3BCLFdBQUssT0FBTyxLQUFLLGdDQUFnQyxLQUFLLEtBQUssQ0FBQztJQUNoRTtJQU1BLElBQUksVUFBbUI7QUFDbkIsYUFBTyxDQUFDLENBQUMsS0FBSyxPQUFPLEtBQUssZ0NBQWdDLEtBQUssR0FBRztJQUN0RTtJQU9BLElBQUksU0FBUyxHQUFZO0FBQ3JCLFdBQUssT0FBTyxLQUFLLGlDQUFpQyxLQUFLLEtBQUssQ0FBQztJQUNqRTtJQU1BLElBQUksV0FBb0I7QUFDcEIsYUFBTyxDQUFDLENBQUMsS0FBSyxPQUFPLEtBQUssaUNBQWlDLEtBQUssR0FBRztJQUN2RTtJQVdBLElBQUksZ0JBQWdCLEdBQVk7QUFDNUIsV0FBSyxPQUFPLEtBQUssd0NBQXdDLEtBQUssS0FBSyxDQUFDO0lBQ3hFO0lBTUEsSUFBSSxrQkFBMkI7QUFDM0IsYUFBTyxDQUFDLENBQUMsS0FBSyxPQUFPLEtBQUssd0NBQXdDLEtBQUssR0FBRztJQUM5RTtJQU9BLElBQUksV0FBVyxHQUFZO0FBQ3ZCLFdBQUssT0FBTyxLQUFLLG1DQUFtQyxLQUFLLEtBQUssQ0FBQztJQUNuRTtJQU1BLElBQUksYUFBc0I7QUFDdEIsYUFBTyxDQUFDLENBQUMsS0FBSyxPQUFPLEtBQUssbUNBQW1DLEtBQUssR0FBRztJQUN6RTtJQVdBLElBQUksUUFBUSxHQUFZO0FBQ3BCLFdBQUssT0FBTyxLQUFLLGdDQUFnQyxLQUFLLEtBQUssQ0FBQztJQUNoRTtJQU1BLElBQUksVUFBbUI7QUFDbkIsYUFBTyxDQUFDLENBQUMsS0FBSyxPQUFPLEtBQUssZ0NBQWdDLEtBQUssR0FBRztJQUN0RTtJQVFBLElBQUksTUFBTSxHQUFVO0FBQ2hCLFdBQUssT0FBTyxLQUFLLDhCQUE4QixLQUFLLEtBQUssQ0FBQztJQUM5RDtJQUlBLElBQUksUUFBZTtBQUNmLGFBQU8sS0FBSyxPQUFPLEtBQUssOEJBQThCLEtBQUssR0FBRztJQUNsRTtJQVFBLElBQUksVUFBVSxHQUFHO0FBQ1QsV0FBSyxRQUFRLENBQUMsWUFBWSxLQUFLLEtBQUssS0FDeEMsS0FBSyxPQUFPLEtBQUssbUNBQW1DLEtBQUssS0FBSyxFQUFFLEtBQUs7SUFDekU7SUFZQSxJQUFJLFlBRUs7QUFDTCxhQUFLLFlBQVksS0FBSyxLQUFLLElBQ3BCLEVBQ0gsT0FBTyxLQUFLLE9BQU8sS0FBSyxtQ0FBbUMsS0FBSyxHQUFHLEVBQ3ZFLElBSHFDO0lBSXpDO0lBUUEsSUFBSSxRQUFRLEdBQTBCO0FBQ2xDLFdBQUssUUFBUSxJQUFJLENBQUM7SUFDdEI7SUFRQSxJQUFJLFVBQXdCO0FBQ3hCLFVBQU0sT0FBTyxLQUFLLE9BQU8sTUFFbkIsTUFBTSxLQUFLLGdDQUFnQyxLQUFLLEdBQUc7QUFDekQsYUFBTyxJQUFJLGFBQWEsS0FBSyxRQUFRLFFBQVEsS0FBSyxDQUFDO0lBQ3ZEO0lBTUEsSUFBSSxpQkFBeUI7QUFDekIsYUFBTyxLQUFLLE9BQU8sS0FBSyx1Q0FBdUMsS0FBSyxHQUFHO0lBQzNFO0lBTUEsSUFBSSxlQUFlLEdBQVc7QUFDMUIsV0FBSyxPQUFPLEtBQUssdUNBQXVDLEtBQUssS0FBSyxDQUFDO0lBQ3ZFO0lBTUEsSUFBSSxrQkFBMEI7QUFDMUIsYUFBTyxLQUFLLE9BQU8sS0FBSyx3Q0FBd0MsS0FBSyxHQUFHO0lBQzVFO0lBTUEsSUFBSSxnQkFBZ0IsR0FBVztBQUMzQixXQUFLLE9BQU8sS0FBSyx3Q0FBd0MsS0FBSyxLQUFLLENBQUM7SUFDeEU7SUFPQSxJQUFJLGFBQXFCO0FBQ3JCLGFBQU8sS0FBSyxPQUFPLEtBQUssbUNBQW1DLEtBQUssR0FBRztJQUN2RTtJQU9BLElBQUksV0FBVyxHQUFXO0FBQ3RCLFdBQUssT0FBTyxLQUFLLG1DQUFtQyxLQUFLLEtBQUssQ0FBQztJQUNuRTtJQU1BLElBQUksZ0JBQXdCO0FBQ3hCLGFBQU8sS0FBSyxPQUFPLEtBQUssc0NBQXNDLEtBQUssR0FBRztJQUMxRTtJQU1BLElBQUksY0FBYyxHQUFXO0FBQ3pCLFdBQUssT0FBTyxLQUFLLHNDQUFzQyxLQUFLLEtBQUssQ0FBQztJQUN0RTtJQUlBLElBQUksaUJBQXlCO0FBQ3pCLGFBQU8sS0FBSyxPQUFPLEtBQUssdUNBQXVDLEtBQUssR0FBRztJQUMzRTtJQU1BLElBQUksZUFBZSxHQUFXO0FBQzFCLFdBQUssT0FBTyxLQUFLLHVDQUF1QyxLQUFLLEtBQUssQ0FBQztJQUN2RTtJQVdBLElBQUksZUFBZSxHQUEwQjtBQUN6QyxXQUFLLE9BQU8sS0FBSyx1Q0FBdUMsS0FBSyxLQUFLLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ3RGO0lBUUEsSUFBSSxpQkFBK0I7QUFFL0IsVUFBTSxPQUFPLEtBQUssT0FBTztBQUN6QixhQUFBLEtBQUssdUNBQXVDLEtBQUssS0FBSyxLQUFLLFFBQVEsR0FDNUQsSUFBSSxhQUFhLEtBQUssUUFBUSxRQUFRLEtBQUssVUFBVSxDQUFDO0lBQ2pFO0lBV0EsSUFBSSxnQkFBZ0IsR0FBMEI7QUFDMUMsV0FBSyxPQUFPLEtBQUssd0NBQ2IsS0FBSyxLQUNMLEVBQUUsQ0FBQyxHQUNILEVBQUUsQ0FBQyxHQUNILEVBQUUsQ0FBQyxDQUNQO0lBQ0o7SUFRQSxJQUFJLGtCQUFnQztBQUVoQyxVQUFNLE9BQU8sS0FBSyxPQUFPO0FBQ3pCLGFBQUEsS0FBSyx3Q0FBd0MsS0FBSyxLQUFLLEtBQUssUUFBUSxHQUM3RCxJQUFJLGFBQWEsS0FBSyxRQUFRLFFBQVEsS0FBSyxVQUFVLENBQUM7SUFDakU7SUFPQSxJQUFJLFdBQVcsT0FBZTtBQUMxQixXQUFLLE9BQU8sS0FBSyxtQ0FBbUMsS0FBSyxLQUFLLEtBQUs7SUFDdkU7SUFzQkEsSUFBSSxhQUFxQjtBQUNyQixhQUFPLEtBQUssT0FBTyxLQUFLLG1DQUFtQyxLQUFLLEdBQUc7SUFDdkU7SUFPQSxJQUFJLFdBQVcsT0FBZTtBQUMxQixXQUFLLE9BQU8sS0FBSyxtQ0FBbUMsS0FBSyxLQUFLLEtBQUs7SUFDdkU7SUFzQkEsSUFBSSxhQUFxQjtBQUNyQixhQUFPLEtBQUssT0FBTyxLQUFLLG1DQUFtQyxLQUFLLEdBQUc7SUFDdkU7SUFnQkEsSUFBSSxlQUFlLE1BQWdCO0FBQy9CLFdBQUssT0FBTyxLQUFLLHVDQUF1QyxLQUFLLEtBQUssSUFBSTtJQUMxRTtJQWdCQSxJQUFJLGlCQUEyQjtBQUMzQixhQUFPLEtBQUssT0FBTyxLQUFLLHVDQUF1QyxLQUFLLEdBQUc7SUFDM0U7SUFjQSxJQUFJLGdCQUFnQixNQUFnQjtBQUNoQyxXQUFLLE9BQU8sS0FBSyx3Q0FBd0MsS0FBSyxLQUFLLElBQUk7SUFDM0U7SUFnQkEsSUFBSSxrQkFBNEI7QUFDNUIsYUFBTyxLQUFLLE9BQU8sS0FBSyx3Q0FBd0MsS0FBSyxHQUFHO0lBQzVFO0lBU0EsSUFBSSxLQUFLLEdBQVc7QUFDaEIsV0FBSyxPQUFPLEtBQUssNkJBQTZCLEtBQUssS0FBSyxDQUFDO0lBQzdEO0lBSUEsSUFBSSxPQUFlO0FBQ2YsYUFBTyxLQUFLLE9BQU8sS0FBSyw2QkFBNkIsS0FBSyxHQUFHO0lBQ2pFO0lBV0EsSUFBSSx1QkFBdUIsR0FBMEI7QUFDakQsV0FBSyxPQUFPLEtBQUssK0NBQ2IsS0FBSyxLQUNMLEVBQUUsQ0FBQyxHQUNILEVBQUUsQ0FBQyxHQUNILEVBQUUsQ0FBQyxDQUNQO0lBQ0o7SUFXQSxJQUFJLGdCQUFnQixNQUFlO0FBQy9CLFdBQUssT0FBTyxLQUFLLHdDQUF3QyxLQUFLLEtBQUssSUFBSTtJQUMzRTtJQVFBLElBQUksa0JBQTJCO0FBQzNCLGFBQU8sQ0FBQyxDQUFDLEtBQUssT0FBTyxLQUFLLHdDQUF3QyxLQUFLLEdBQUc7SUFDOUU7SUFlQSxTQUNJLEdBQ0EsSUFBZSxHQUNmLGFBQXNCLE9BQ3RCLEdBQ0EsUUFBaUIsT0FDbkI7QUFDRSxVQUFNLE9BQU8sS0FBSyxPQUFPO0FBQ3pCLFVBQUksQ0FBQyxHQUFHO0FBQ0osYUFBSyw2QkFBNkIsS0FBSyxLQUFLLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEdBQUcsVUFBVTtBQUMzRTtNQUNKO0FBQ0EsV0FBSywrQkFDRCxLQUFLLEtBQ0wsRUFBRSxDQUFDLEdBQ0gsRUFBRSxDQUFDLEdBQ0gsRUFBRSxDQUFDLEdBQ0gsR0FDQSxZQUNBLEVBQUUsQ0FBQyxHQUNILEVBQUUsQ0FBQyxHQUNILEVBQUUsQ0FBQyxHQUNILEtBQ0o7SUFDSjtJQVlBLFVBQVUsR0FBMEIsSUFBZSxHQUFpQjtBQUNoRSxXQUFLLE9BQU8sS0FBSyw4QkFBOEIsS0FBSyxLQUFLLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUM7SUFDaEY7SUFzQkEsWUFBWSxVQUFxQztBQUM3QyxhQUFPLEtBQUssZ0JBQWdCLE1BQU0sUUFBUTtJQUM5QztJQVlBLGdCQUFnQixXQUFpQixVQUFxQztBQUNsRSxVQUFNLFlBQVksS0FBSyxNQUFNO0FBQzdCLGFBQUssVUFBVSxJQUFJLEtBQUssR0FBRyxLQUN2QixVQUFVLElBQUksS0FBSyxLQUFLLENBQUMsQ0FBQyxHQUU5QixVQUFVLElBQUksS0FBSyxHQUFHLEVBQUcsS0FBSyxRQUFRLEdBQy9CLEtBQUssT0FBTyxLQUFLLGdDQUFnQyxLQUFLLEtBQUssVUFBVSxHQUFHO0lBQ25GO0lBU0Esd0JBQXdCLFlBQTBCO0FBQzlDLFVBQU0sSUFBSSxLQUFLLE9BQU8sS0FBSyxtQ0FBbUMsS0FBSyxLQUFLLFVBQVUsR0FDNUUsWUFBWSxLQUFLLE1BQU07QUFHekIsV0FBRyxVQUFVLElBQUksS0FBSyxHQUFHLEVBQUcsT0FBTyxDQUFDLENBQUM7SUFDN0M7RUFDSixHQXh6QkksY0FGR0MsTUFFSSxZQUFXLFVBRmZBO0FBdUlDLGtCQUFBLENBREgsZUFBZSxDQUFBLEdBdElQLGVBdUlMLFdBQUEsVUFBQSxDQUFBLEdBY0EsZ0JBQUEsQ0FESCxlQUFlLENBQUEsR0FwSlAsZUFxSkwsV0FBQSxxQkFBQSxDQUFBLEdBaUNBLGdCQUFBLENBREgsZUFBZSxDQUFBLEdBckxQLGVBc0xMLFdBQUEsa0JBQUEsQ0FBQSxHQXFDQSxnQkFBQSxDQURILGVBQWUsQ0FBQSxHQTFOUCxlQTJOTCxXQUFBLGFBQUEsQ0FBQSxHQWlCQSxnQkFBQSxDQURILGVBQWUsQ0FBQSxHQTNPUCxlQTRPTCxXQUFBLFdBQUEsQ0FBQSxHQWlCQSxnQkFBQSxDQURILGVBQWUsQ0FBQSxHQTVQUCxlQTZQTCxXQUFBLFlBQUEsQ0FBQSxHQXFCQSxnQkFBQSxDQURILGVBQWUsQ0FBQSxHQWpSUCxlQWtSTCxXQUFBLG1CQUFBLENBQUEsR0FpQkEsZ0JBQUEsQ0FESCxlQUFlLENBQUEsR0FsU1AsZUFtU0wsV0FBQSxjQUFBLENBQUEsR0FxQkEsZ0JBQUEsQ0FESCxlQUFlLENBQUEsR0F2VFAsZUF3VEwsV0FBQSxXQUFBLENBQUEsR0FnQkEsZ0JBQUEsQ0FESCxlQUFlLENBQUEsR0F2VVAsZUF3VUwsV0FBQSxTQUFBLENBQUEsR0F5QkEsZ0JBQUEsQ0FESCxlQUFlLENBQUEsR0FoV1AsZUFpV0wsV0FBQSxhQUFBLENBQUEsR0F5QkEsZ0JBQUEsQ0FESCxlQUFlLENBQUEsR0F6WFAsZUEwWEwsV0FBQSxXQUFBLENBQUEsR0FXQSxnQkFBQSxDQURILGVBQWUsQ0FBQSxHQXBZUCxlQXFZTCxXQUFBLGtCQUFBLENBQUEsR0FnQkEsZ0JBQUEsQ0FESCxlQUFlLENBQUEsR0FwWlAsZUFxWkwsV0FBQSxtQkFBQSxDQUFBLEdBaUJBLGdCQUFBLENBREgsZUFBZSxDQUFBLEdBcmFQLGVBc2FMLFdBQUEsY0FBQSxDQUFBLEdBaUJBLGdCQUFBLENBREgsZUFBZSxDQUFBLEdBdGJQLGVBdWJMLFdBQUEsaUJBQUEsQ0FBQSxHQWNBLGdCQUFBLENBREgsZUFBZSxDQUFBLEdBcGNQLGVBcWNMLFdBQUEsa0JBQUEsQ0FBQSxHQStCQSxnQkFBQSxDQURILGVBQWUsQ0FBQSxHQW5lUCxlQW9lTCxXQUFBLGtCQUFBLENBQUEsR0ErQkEsZ0JBQUEsQ0FESCxlQUFlLENBQUEsR0FsZ0JQLGVBbWdCTCxXQUFBLG1CQUFBLENBQUEsR0FvQ0EsZ0JBQUEsQ0FESCxlQUFlLENBQUEsR0F0aUJQLGVBdWlCTCxXQUFBLGNBQUEsQ0FBQSxHQWlDQSxnQkFBQSxDQURILGVBQWUsQ0FBQSxHQXZrQlAsZUF3a0JMLFdBQUEsY0FBQSxDQUFBLEdBb0NBLGdCQUFBLENBREgsZUFBZSxDQUFBLEdBM21CUCxlQTRtQkwsV0FBQSxrQkFBQSxDQUFBLEdBa0NBLGdCQUFBLENBREgsZUFBZSxDQUFBLEdBN29CUCxlQThvQkwsV0FBQSxtQkFBQSxDQUFBLEdBaUJBLGdCQUFBLENBREgsZUFBZSxDQUFBLEdBOXBCUCxlQStwQkwsV0FBQSxRQUFBLENBQUEsR0F5Q0EsZ0JBQUEsQ0FESCxlQUFlLENBQUEsR0F2c0JQLGVBd3NCTCxXQUFBLG1CQUFBLENBQUE7QUF1SEQsTUF3RkssaUJBQUFJLHFCQUVSQSxlQUFBQSxlQUFBLGVBQWUsQ0FBQSxJQUFmLGdCQUdBQSxlQUFBQSxlQUFBLGdCQUFnQixDQUFBLElBQWhCLGlCQUdBQSxlQUFBQSxlQUFBLGNBQWMsQ0FBQSxJQUFkLGVBUlFBLGlCQUFBLGlCQUFBLENBQUEsQ0FBQTtBQXhGTCxNQXNHSyxvQkFBQUMsd0JBRVJBLGtCQUFBQSxrQkFBQSxPQUFPLENBQUEsSUFBUCxRQUdBQSxrQkFBQUEsa0JBQUEsYUFBYSxDQUFBLElBQWIsY0FHQUEsa0JBQUFBLGtCQUFBLGNBQWMsQ0FBQSxJQUFkLGVBUlFBLG9CQUFBLG9CQUFBLENBQUEsQ0FBQTtBQXRHTCxNQTBKTSxPQUFOLGNBQW1CLFNBQVM7SUFVL0IsWUFBWSxRQUEwQixRQUEwQztBQUM1RSxVQUFJLENBQUMsU0FBUyxNQUFNLEdBQUc7QUFDbkIsWUFBTSxPQUFPLE9BQU8sT0FBTyxPQUFPLE1BQU07QUFFeEMsZUFBQSxNQUFNLFFBQVEsS0FBSyxNQUFNLEdBQ2xCO01BQ1g7QUFDQSxZQUFNLFFBQVEsTUFBTTtJQUN4QjtJQUdBLElBQUksY0FBc0I7QUFDdEIsYUFBTyxLQUFLLE9BQU8sS0FBSyx5QkFBeUIsS0FBSyxHQUFHO0lBQzdEO0lBR0EsSUFBSSxZQUEyRDtBQUMzRCxVQUFNLE9BQU8sS0FBSyxPQUFPLE1BQ25CLFVBQVUsS0FBSyxVQUNmLE1BQU0sS0FBSyx1QkFBdUIsS0FBSyxLQUFLLFNBQVMsVUFBVSxDQUFDO0FBQ3RFLFVBQUksUUFBUTtBQUFNLGVBQU87QUFFekIsVUFBTSxhQUFhLEtBQUssUUFBUSxVQUFVLENBQUM7QUFFM0MsY0FEa0IsS0FBSyxRQUFRLFVBQVUsSUFBSSxDQUFDLEdBQzNCO1FBQ2YsS0FBSztBQUNELGlCQUFPLElBQUksV0FBVyxLQUFLLE9BQU8sUUFBUSxLQUFLLFVBQVU7UUFDN0QsS0FBSztBQUNELGlCQUFPLElBQUksWUFBWSxLQUFLLFFBQVEsUUFBUSxLQUFLLFVBQVU7UUFDL0QsS0FBSztBQUNELGlCQUFPLElBQUksWUFBWSxLQUFLLFFBQVEsUUFBUSxLQUFLLFVBQVU7TUFDbkU7QUFDQSxhQUFPO0lBQ1g7SUFZQSxTQUFTO0FBQ0wsV0FBSyxPQUFPLEtBQUssZ0JBQWdCLEtBQUssR0FBRztJQUM3QztJQTBCQSxrQkFDSSxNQUF3QixJQUFJLGFBQWEsQ0FBQyxHQUMxQjtBQUNoQixVQUFNLE9BQU8sS0FBSyxPQUFPO0FBQ3pCLGFBQUEsS0FBSyxPQUFPLEtBQUssNEJBQTRCLEtBQUssS0FBSyxLQUFLLFFBQVEsR0FDcEUsSUFBSSxDQUFDLElBQUksS0FBSyxjQUFjLENBQUMsR0FDN0IsSUFBSSxDQUFDLElBQUksS0FBSyxjQUFjLENBQUMsR0FDN0IsSUFBSSxDQUFDLElBQUksS0FBSyxjQUFjLENBQUMsR0FDN0IsSUFBSSxDQUFDLElBQUksS0FBSyxjQUFjLENBQUMsR0FDdEI7SUFDWDtJQTZDQSxVQUFVLE1BQW1EO0FBQ3pELFVBQUksT0FBTyxRQUFRO0FBQ2YsY0FBTSxJQUFJLFVBQVUsOEJBQThCLE9BQU8sSUFBSTtBQUVqRSxVQUFNLE9BQU8sS0FBSyxPQUFPLE1BQ25CLGdCQUFnQixLQUFLO0FBRTNCLFVBREEsS0FBSyx1QkFBdUIsS0FBSyxLQUFLLE1BQU0sS0FBSyxRQUFRLEdBQ3JELGNBQWMsQ0FBQyxLQUFLO0FBQUssZUFBTztBQUVwQyxVQUFNLFlBQVksY0FBYyxDQUFDO0FBQ2pDLGFBQU8sSUFBSSxzQkFBc0IsS0FBSyxRQUFRLEVBQzFDLFdBQVcsY0FBYyxDQUFDLEdBQzFCLFFBQVEsY0FBYyxDQUFDLEdBQ3ZCLFFBQVEsY0FBYyxDQUFDLEdBQ3ZCLFlBQVksY0FBYyxDQUFDLEdBQzNCLGdCQUFnQixjQUFjLENBQUMsR0FFL0IsV0FBVyxhQUF3QixHQUNuQyxRQUFRLEtBQUssYUFDYixZQUFhLFNBQVMsSUFDaEIsZUFDQSxZQUNWLENBQUM7SUFDTDtJQWtCQSxVQUFnQjtBQUNaLFdBQUssT0FBTyxLQUFLLGlCQUFpQixLQUFLLEdBQUcsR0FDMUMsS0FBSyxPQUFPLE9BQU8sU0FBUyxJQUFJO0lBQ3BDO0lBRUEsV0FBVztBQUNQLGFBQUksS0FBSyxjQUNFLG9CQUVKLFFBQVEsS0FBSztJQUN4QjtFQUNKO0FBeFZPLE1BZ1lNLHdCQUFOLE1BQXVFO0lBRWpFLFNBQWlCO0lBR1A7SUFHWCxhQUFxQjtJQUVyQixVQUFrQjtJQUVsQixVQUFrQjtJQUVsQixjQUFzQjtJQUV0QixrQkFBMEI7SUFFMUIsYUFBcUI7SUFJckI7SUFLQTtJQVlSLFlBQVksUUFBMEIsU0FBMEM7QUFDNUUsV0FBSyxVQUFVO0FBQ2YsVUFBTSxPQUFPLEtBQUssUUFBUTtBQUUxQixXQUFLLGFBQWEsUUFBUSxXQUMxQixLQUFLLFVBQVUsUUFBUSxRQUN2QixLQUFLLFVBQVUsUUFBUSxRQUN2QixLQUFLLGNBQWMsUUFBUSxZQUMzQixLQUFLLGtCQUFrQixRQUFRLGdCQUMvQixLQUFLLGFBQWEsUUFBUSxXQUMxQixLQUFLLGNBQWMsUUFBUSxZQUMzQixLQUFLLFNBQVMsUUFBUSxRQUV0QixLQUFLLG9CQUNELEtBQUssZ0JBQWdCLGVBQ2YsS0FBSyxpQkFBaUIsS0FBSyxJQUFJLElBQy9CLEtBQUssaUJBQWlCLEtBQUssSUFBSTtJQUU3QztJQXFCQSxZQUFZLFFBQVEsR0FBa0I7QUFDbEMsYUFBQSxRQUFRLFFBQVEsS0FBSyxTQUFTLEtBQUssU0FBUyxPQUNyQyxJQUFJLEtBQUssWUFDWixRQUFRLEtBQUssa0JBQWtCLEtBQUssVUFDeEM7SUFDSjtJQW1CQSxJQUFJLE9BQWUsTUFBbUIsS0FBSyxZQUFZLEdBQWdCO0FBQ25FLFVBQUksSUFBSSxTQUFTLEtBQUssb0JBQW9CO0FBQ3RDLGNBQU0sSUFBSSxNQUNOLGVBQWUsSUFBSSxnRUFBZ0UsS0FBSyxpQkFDNUY7QUFHSixVQUFNLE9BQU8sS0FBSyxrQkFBa0IsSUFBSSxNQUFNLEdBQ3hDLGNBQWMsS0FBSyxZQUFZLG1CQUMvQixXQUFXLGNBQWMsSUFBSSxRQUM3QixnQkFBZ0IsS0FBSyxjQUFjLEtBQUssWUFDeEMsaUJBQWlCLEtBQUssa0JBQWtCLGNBQWMsS0FBSztBQUVqRSxXQUFLLFFBQVEsS0FBSyw4QkFDZCxLQUFLLFlBQ0wsZUFDQSxLQUFLLFVBQVUsUUFBUSxLQUFLLFNBQzVCLEtBQUssU0FDTCxnQkFDQSxLQUFLLFlBQ0wsUUFDSjtBQUVBLGVBQVMsSUFBSSxHQUFHLElBQUksSUFBSSxRQUFRLEVBQUU7QUFBRyxZQUFJLENBQUMsSUFBSSxLQUFLLENBQUM7QUFDcEQsYUFBTztJQUNYO0lBZUEsSUFBSSxHQUFXLEdBQTBCO0FBQ3JDLFVBQUksRUFBRSxTQUFTLEtBQUssb0JBQW9CO0FBQ3BDLGNBQU0sSUFBSSxNQUNOLGVBQWUsRUFBRSxnRUFBZ0UsS0FBSyxpQkFDMUY7QUFFSixVQUFNLGNBQWMsS0FBSyxZQUFZLG1CQUMvQixVQUFVLGNBQWMsRUFBRSxRQUMxQixnQkFBZ0IsS0FBSyxrQkFBa0IsY0FBYyxLQUFLLFlBQzFELGlCQUFpQixLQUFLLGNBQWMsS0FBSyxZQUV6QyxPQUFPLEtBQUssUUFBUTtBQUkxQixVQUFLLEVBQW1CLFVBQVUsS0FBSyxPQUFPLFFBQVE7QUFDbEQsWUFBTSxPQUFPLEtBQUssa0JBQWtCLEVBQUUsTUFBTTtBQUM1QyxhQUFLLElBQUksQ0FBQyxHQUNWLElBQUk7TUFDUjtBQUVBLGFBQUEsS0FBSyw4QkFDRCxLQUFLLFlBQ0wsZUFDQyxFQUFtQixZQUNwQixTQUNBLGdCQUNBLEtBQUssVUFBVSxJQUFJLEtBQUssU0FDeEIsS0FBSyxPQUNULEdBRU87SUFDWDtJQUdBLElBQUksU0FBUztBQUNULGFBQU8sS0FBSztJQUNoQjtFQUNKO0FBcGpCTyxNQWdtQkgsU0FHTztBQW5tQkosTUE2bUJNLFVBQU4sY0FBc0IsU0FBUztJQVlsQyxZQUFZLFFBQTBCLE9BQTJCO0FBQzdELFVBQUksWUFBWSxLQUFLLEdBQUc7QUFDcEIsWUFBTSxVQUFVLE9BQU8sU0FBUyxPQUFPLEtBQUs7QUFFNUMsZUFBQSxNQUFNLFFBQVEsUUFBUSxNQUFNLEdBQ3JCO01BQ1g7QUFDQSxZQUFNLFFBQVEsS0FBSztJQUN2QjtJQU9BLElBQUksUUFBaUI7QUFDakIsYUFBTyxDQUFDLEtBQUs7SUFDakI7SUFPQSxJQUFJLEtBQWE7QUFDYixhQUFPLEtBQUs7SUFDaEI7SUFHQSxTQUFTO0FBQ0wsVUFBTSxRQUFRLEtBQUs7QUFDZixPQUFDLEtBQUssU0FBUyxDQUFDLFNBQ3BCLEtBQUssT0FBTyxLQUFLLHlCQUF5QixLQUFLO0lBQ25EO0lBR0EsSUFBSSxRQUFnQjtBQUdoQixVQUFNLFVBQVUsS0FBSztBQUNyQixVQUFJO0FBQVMsZUFBTyxRQUFRO0FBRTVCLFVBQU0sT0FBTyxLQUFLLE9BQU87QUFDekIsYUFBQSxLQUFLLGVBQWUsS0FBSyxhQUFhLEtBQUssUUFBUSxHQUM1QyxLQUFLLGVBQWUsQ0FBQztJQUNoQztJQUdBLElBQUksU0FBaUI7QUFHakIsVUFBTSxVQUFVLEtBQUs7QUFDckIsVUFBSTtBQUFTLGVBQU8sUUFBUTtBQUU1QixVQUFNLE9BQU8sS0FBSyxPQUFPO0FBQ3pCLGFBQUEsS0FBSyxlQUFlLEtBQUssYUFBYSxLQUFLLFFBQVEsR0FDNUMsS0FBSyxlQUFlLENBQUM7SUFDaEM7SUFPQSxJQUFJLGNBQWdDO0FBQ2hDLFVBQU0sUUFBUSxLQUFLO0FBQ25CLFVBQUksQ0FBQztBQUFPLGVBQU87QUFFbkIsVUFBTSxPQUFPLEtBQUssT0FBTyxNQUNuQixlQUFlLEtBQUssNEJBQTRCLEtBQUs7QUFHM0QsYUFBTyxLQUFLLFFBQVEsWUFBWTtJQUNwQztJQWlCQSxlQUFlLEdBQVcsR0FBVyxHQUFXLEdBQWlCO0FBQzdELFVBQUksS0FBSztBQUFhO0FBRXRCLFVBQU0sUUFBUSxLQUFLO0FBQ25CLFVBQUksQ0FBQztBQUFPO0FBRVosVUFBTSxPQUFPLEtBQUssT0FBTyxNQUNuQixlQUFlLEtBQUssNEJBQTRCLEtBQUs7QUFHM0QsVUFBSSxDQUFDLFFBQVE7QUFDVCxZQUFNQyxVQUFTLFNBQVMsY0FBYyxRQUFRLEdBQ3hDLE1BQU1BLFFBQU8sV0FBVyxJQUFJO0FBQ2xDLFlBQUksQ0FBQztBQUNELGdCQUFNLElBQUksTUFDTixzRUFDSjtBQUVKLGlCQUFTLEVBQ0wsUUFBQUEsU0FDQSxJQUNKO01BQ0o7QUFFQSxVQUFNLE1BQU0sS0FBSyxRQUFRLFlBQVk7QUFDckMsVUFBSSxDQUFDO0FBQUs7QUFJVixhQUFPLE9BQU8sUUFBUSxHQUN0QixPQUFPLE9BQU8sU0FBUyxHQUN2QixPQUFPLElBQUksVUFBVSxLQUFLLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztBQUVoRCxVQUFNLFdBQVksSUFBeUIsZUFBZSxJQUFJLFVBQVUsSUFBSTtBQUM1RSxXQUFLLFFBQVEsWUFBWSxJQUFJLE9BQU8sUUFDcEMsS0FBSyx5QkFBeUIsT0FBTyxHQUFHLE9BQU8sR0FDL0MsS0FBSyxRQUFRLFlBQVksSUFBSTtJQUNqQztJQWVBLFVBQWdCO0FBQ0MsV0FBSyxPQUFPLEtBQ3BCLG9CQUFvQixLQUFLLEdBQUcsR0FDakMsS0FBSyxPQUFPLFNBQVMsU0FBUyxJQUFJO0lBQ3RDO0lBRUEsV0FBVztBQUNQLGFBQUksS0FBSyxjQUNFLHVCQUVKLFdBQVcsS0FBSztJQUMzQjtJQUNBLElBQVksY0FBYztBQUN0QixhQUFPLEtBQUssT0FBTyxLQUFLLDRCQUE0QixLQUFLLEdBQUc7SUFDaEU7RUFDSjtBQW1vRU8sTUE0Sk0sS0FBTixNQUFTO0lBRUg7SUFDQTtJQVVULFlBQVksTUFBWSxNQUFxQjtBQUN6QyxXQUFLLFFBQVEsTUFDYixLQUFLLFFBQVE7SUFDakI7SUFHQSxJQUFJLGNBQTZCO0FBQzdCLGFBQU8sS0FBSztJQUNoQjtJQUdBLElBQUksVUFBcUI7QUFDckIsYUFBTyxLQUFLLE1BQU07SUFDdEI7SUFHQSxJQUFJLFFBQWlCO0FBQ2pCLGFBQU8sS0FBSyxNQUFNO0lBQ3RCO0lBWUEsc0JBQXNCLE1BQXFEO0FBQ3ZFLGFBQU8sS0FBSyxNQUFNLGdCQUFpQixJQUFJLEtBQUs7SUFDaEQ7SUFHQSxJQUFJLHNCQUFzQixVQUE0QjtBQUNsRCxXQUFLLE1BQU0saUJBQWtCLFVBRTdCLEtBQUssTUFBTSxxQkFBcUI7QUFDaEMsZUFBVyxRQUFRLE9BQU8sS0FBSyxLQUFLLE1BQU0sZUFBZ0I7QUFDbEQsYUFBSyxNQUFNLGdCQUFpQixJQUE0QixNQUFNLGFBRTlELEtBQUssTUFBTSxxQkFBcUI7SUFHNUM7SUFHQSxJQUFJLHdCQUEwQztBQUMxQyxhQUFPLEtBQUssTUFBTTtJQUN0QjtJQUdBLElBQUksNEJBQWtEO0FBQ2xELGFBQU8sS0FBSyxNQUFNO0lBQ3RCO0lBR0EsSUFBSSxZQUErQjtBQUMvQixhQUFPLEtBQUssTUFBTTtJQUN0QjtJQUdBLElBQUksZUFBbUM7QUFDbkMsYUFBSyxNQUFNLFFBQVEsS0FBSyxNQUFNLFNBQVMsSUFHaEMsS0FBSyxNQUFNLFVBQVUsSUFBSyxRQUFPLEtBQUssTUFBTSxHQUFHLGFBQWEsRUFBRSxDQUFDLElBRjNELENBQUMsS0FBSyxNQUFNLEdBQUcsYUFBYSxLQUFLLE1BQU0sU0FBUyxDQUFDO0lBR2hFO0VBQ0o7QUN6bE5PLE1BQUsscUJBQUFDLHlCQUVSQSxtQkFBQUEsbUJBQUEsY0FBYyxDQUFBLElBQWQsZUFFQUEsbUJBQUFBLG1CQUFBLE1BQU0sQ0FBQSxJQUFOLE9BRUFBLG1CQUFBQSxtQkFBQSxZQUFZLENBQUEsSUFBWixhQUVBQSxtQkFBQUEsbUJBQUEsUUFBUSxDQUFBLElBQVIsU0FFQUEsbUJBQUFBLG1CQUFBLFVBQVUsQ0FBQSxJQUFWLFdBTUFBLG1CQUFBQSxtQkFBQSxPQUFPLENBQUEsSUFBUCxRQWhCUUEscUJBQUEscUJBQUEsQ0FBQSxDQUFBOztBQUFMLE1BK0dNLFlBQU5DLE9BQUEsY0FBdUIsU0FBUztJQWNuQyxZQUFZLFFBQTBCLFFBQXFDO0FBQ3ZFLFVBQUksT0FBTyxVQUFXLFVBQVU7QUFDNUIsWUFBSSxDQUFDLFFBQVE7QUFBVSxnQkFBTSxJQUFJLE1BQU0sOEJBQThCO0FBQ3JFLFlBQU0sV0FBVyxPQUFPLFVBQVUsWUFBWSxPQUFPLFFBQVEsR0FDdkQsV0FBVyxJQUFJO0FBQ3JCLGVBQUEsTUFBTSxRQUFRLFNBQVMsTUFBTSxHQUN0QjtNQUNYO0FBQ0EsWUFBTSxRQUFRLE1BQU07SUFDeEI7SUFTQSxhQUFhLE1BQWM7QUFDdkIsVUFBTSxhQUFjLEtBQUssWUFBb0M7QUFDN0QsYUFBTyxjQUFjLFdBQVcsSUFBSSxJQUFJO0lBQzVDO0lBR0EsSUFBSSxTQUFpQjtBQUNqQixhQUFPLEtBQUs7SUFDaEI7SUFHQSxJQUFJLFdBQW1CO0FBQ25CLFVBQU0sT0FBTyxLQUFLLE9BQU87QUFDekIsYUFBTyxLQUFLLGFBQWEsS0FBSywwQkFBMEIsS0FBSyxHQUFHLENBQUM7SUFDckU7SUFPQSxRQUF5QjtBQUNyQixVQUFNLFFBQVEsS0FBSyxPQUFPLEtBQUssbUJBQW1CLEtBQUssR0FBRztBQUMxRCxhQUFPLEtBQUssT0FBTyxVQUFVLEtBQUssS0FBSztJQUMzQztJQUVBLFdBQVc7QUFDUCxhQUFJLEtBQUssY0FDRSx3QkFFSixhQUFhLEtBQUssY0FBYyxLQUFLO0lBQ2hEO0lBV0EsT0FBTyxLQUFLLFFBQTBCLE9BQWdDO0FBQ2xFLGFBQU8sT0FBTyxVQUFVLEtBQUssS0FBSztJQUN0QztFQUNKLEdBM0VJLGNBRkdBLE1BRWEsdUJBQXNCQyxzQkFBcUIsVUFBVSxJQUZsRUQ7QUl4Q1AsTUFRWSxhQUFBRSxpQkFDUkEsV0FBQUEsV0FBQSxTQUFBLENBQUEsSUFBQSxVQUNBQSxXQUFBQSxXQUFBLE9BQUEsQ0FBQSxJQUFBLFFBQ0FBLFdBQUFBLFdBQUEsYUFBQSxDQUFBLElBQUEsY0FIUUEsYUFBQSxhQUFBLENBQUEsQ0FBQTtBRXBGWixXQUFTLE9BQU8sS0FBbUI7QUFDL0IsUUFBSSxPQUFPO0FBQ1AsWUFBTSxJQUFJLE1BQU0sMEJBQTBCLGdCQUFnQjtFQUVsRTtBQTZCTyxNQUFNLFNBQU4sTUFBd0M7SUFFbkMsUUFBZ0I7SUFReEIsVUFBVSxNQUFXO0FBQ2pCLGVBQVcsT0FBTztBQUNkLGVBQU8sR0FBRyxHQUVWLEtBQUssU0FBVSxLQUFLLFFBQVM7QUFFakMsYUFBTztJQUNYO0lBT0EsWUFBWTtBQUNSLGFBQUEsS0FBSyxRQUFRLElBQ047SUFDWDtJQVFBLFdBQVcsTUFBVztBQUNsQixlQUFXLE9BQU87QUFDZCxlQUFPLEdBQUcsR0FFVixLQUFLLFNBQVMsRUFBRyxLQUFLLFFBQVM7QUFFbkMsYUFBTztJQUNYO0lBT0EsYUFBYTtBQUNULGFBQUEsS0FBSyxRQUFRLEdBQ047SUFDWDtJQVFBLFFBQVEsS0FBUTtBQUNaLGFBQU8sQ0FBQyxFQUFFLEtBQUssUUFBVSxLQUFLLFFBQVM7SUFDM0M7RUFDSjtBQ2hHTyxNQUFLLFlBQUFDLGdCQUNSQSxVQUFBQSxVQUFBLE9BQU8sQ0FBQSxJQUFQLFFBQ0FBLFVBQUFBLFVBQUEsT0FBTyxDQUFBLElBQVAsUUFDQUEsVUFBQUEsVUFBQSxRQUFRLENBQUEsSUFBUixTQUhRQSxZQUFBLFlBQUEsQ0FBQSxDQUFBO0FBQUwsTUErRE0sU0FBTixNQUFhO0lBTWhCLFNBQTJCLElBQUk7SUFPL0IsT0FBZSxJQUFJLE9BQU8sRUFBRSxVQUFVO0lBT3RDLGVBQWUsUUFBb0I7QUFDL0IsV0FBSyxPQUFPLE9BQU8sR0FBRyxNQUFNO0lBQ2hDO0lBU0EsS0FBSyxRQUFnQixLQUFzQjtBQUN2QyxhQUFJLEtBQUssT0FBTyxRQUFRLENBQWEsS0FBSyxLQUFLLEtBQUssUUFBUSxHQUFHLEtBQzNELFFBQVEsSUFBSSxHQUFHLEdBQUcsR0FFZjtJQUNYO0lBU0EsS0FBSyxRQUFnQixLQUFzQjtBQUN2QyxhQUFJLEtBQUssT0FBTyxRQUFRLENBQWEsS0FBSyxLQUFLLEtBQUssUUFBUSxHQUFHLEtBQzNELFFBQVEsS0FBSyxHQUFHLEdBQUcsR0FFaEI7SUFDWDtJQVNBLE1BQU0sUUFBZ0IsS0FBc0I7QUFDeEMsYUFBSSxLQUFLLE9BQU8sUUFBUSxDQUFjLEtBQUssS0FBSyxLQUFLLFFBQVEsR0FBRyxLQUM1RCxRQUFRLE1BQU0sR0FBRyxHQUFHLEdBRWpCO0lBQ1g7RUFDSjtBQ3hDQSxXQUFTLE9BQ0wsTUFDQSxTQUFpQixDQUFDLEdBQUcsVUFBVSxPQUMvQixVQUFtQixDQUFDLEdBQ25CO0FBQ0QsUUFBTSxFQUFDLGFBQWEsU0FBUSxJQUFJLFNBQzFCLFdBQVcsSUFBSSxTQUFTLEtBQUssUUFBUSxLQUFLLFlBQVksS0FBSyxVQUFVLEdBQ3ZFQyxVQUFTO0FBRWIsYUFBUyxXQUFjQyxTQUFnQixPQUFhO0FBQ2hELGFBQUFELFdBQVVDLFNBQ0g7SUFDWDtBQUNBLGFBQVMsZ0JBQWdCQSxTQUFnQjtBQUNyQyxhQUFPLFdBQVdBLFNBQVEsS0FBSyxTQUFTRCxTQUFRQSxVQUFTQyxPQUFNLENBQUM7SUFDcEU7QUFDQSxhQUFTLGNBQWM7QUFDbkIsVUFBTSxXQUFXLHNCQUVYLGtCQUFrQixJQUFJLFlBQVksQ0FBQyxHQUNuQyxlQUFlLElBQUksU0FBUyxlQUFlLEdBQzNDLFFBQVEsV0FBVyxHQUVuQixPQUFPLFFBQVEsT0FDakIsV0FBVyxRQUFRLE9BQ2pCLFdBQVcsUUFBUTtBQUV6QixVQUFJLGFBQWE7QUFBUSxtQkFBVztlQUMzQixhQUFhO0FBQUcsb0JBQWE7ZUFDN0IsYUFBYTtBQUFHLGdCQUFRLE9BQU8sS0FBSyxLQUFLLFdBQVc7QUFFN0QsYUFBQSxhQUFhLFVBQVUsR0FBSSxRQUFRLEtBQU8sWUFBWSxLQUFPLFlBQVksRUFBRyxHQUNyRSxhQUFhLFdBQVcsQ0FBQztJQUNwQztBQUNBLGFBQVMsY0FBc0I7QUFDM0IsYUFBTyxXQUFXLEdBQUcsU0FBUyxXQUFXRCxPQUFNLENBQUM7SUFDcEQ7QUFDQSxhQUFTLGNBQXNCO0FBQzNCLGFBQU8sV0FBVyxHQUFHLFNBQVMsV0FBV0EsT0FBTSxDQUFDO0lBQ3BEO0FBQ0EsYUFBUyxZQUFvQjtBQUN6QixhQUFPLFdBQVcsR0FBRyxLQUFLQSxPQUFNLENBQUM7SUFDckM7QUFDQSxhQUFTLGFBQXFCO0FBQzFCLGFBQU8sV0FBVyxHQUFHLFNBQVMsVUFBVUEsT0FBTSxDQUFDO0lBQ25EO0FBQ0EsYUFBUyxhQUFxQjtBQUMxQixhQUFPLFdBQVcsR0FBRyxTQUFTLFVBQVVBLE9BQU0sQ0FBQztJQUNuRDtBQUNBLGFBQVMsYUFBcUI7QUFDMUIsYUFBTyxXQUFXLEdBQUcsU0FBUyxhQUFhQSxPQUFNLENBQUM7SUFDdEQ7QUFDQSxhQUFTLFlBQXFCO0FBQzFCLGFBQUksS0FBS0EsT0FBTSxNQUFNLE1BQWEsU0FDbENBLFdBQVUsR0FDSDtJQUNYO0FBQ0EsYUFBUyxXQUFXLHVCQUFnRDtBQUNoRSxVQUFJLHdCQUF3QjtBQUFJLGVBQU87QUFDdkMsVUFBSSwwQkFBMEI7QUFBSSxlQUFPLFVBQVU7QUFDbkQsVUFBSSwwQkFBMEI7QUFBSSxlQUFPLFdBQVc7QUFDcEQsVUFBSSwwQkFBMEI7QUFBSSxlQUFPLFdBQVc7QUFDcEQsVUFBSSwwQkFBMEIsSUFBSTtBQUM5QixZQUFNLFVBQVUsV0FBVztBQUMzQixlQUFJLFdBQVcsT0FBTyxtQkFBeUIsT0FBTyxPQUFPLElBQ3REO01BQ1g7QUFDQSxVQUFJLDBCQUEwQjtBQUFJLGVBQU87QUFDekMsWUFBTSxJQUFJLE1BQU0sb0NBQW9DO0lBQ3hEO0FBQ0EsYUFBUywyQkFBMkIsV0FBMkI7QUFDM0QsVUFBTSxjQUFjLFVBQVU7QUFDOUIsVUFBSSxnQkFBZ0I7QUFBTSxlQUFPO0FBQ2pDLFVBQU1DLFVBQVMsV0FBVyxjQUFjLEVBQUk7QUFDNUMsVUFBSUEsVUFBUyxLQUFLLGVBQWUsTUFBTTtBQUNuQyxjQUFNLElBQUksTUFBTSw4Q0FBOEM7QUFFbEUsYUFBTyxPQUFPQSxPQUFNO0lBQ3hCO0FBQ0EsYUFBUyxnQkFBZ0IsV0FBcUJBLFNBQWdCO0FBQzFELGVBQVMsSUFBSSxHQUFHLElBQUlBLFNBQVEsRUFBRSxHQUFHO0FBQzdCLFlBQUksUUFBUSxVQUFVO0FBQ2xCLGdCQUFRLFFBQ0osUUFBUSxPQUNSLFNBQVUsUUFBUSxPQUFTLElBQU0sVUFBVSxJQUFJLElBQy9DQSxXQUFVLEtBQ0gsUUFBUSxPQUNmLFNBQ00sUUFBUSxPQUFTLE1BQ2pCLFVBQVUsSUFBSSxPQUFTLElBQ3hCLFVBQVUsSUFBSSxJQUNuQkEsV0FBVSxNQUVWLFNBQ00sUUFBUSxNQUFTLE1BQ2pCLFVBQVUsSUFBSSxPQUFTLE1BQ3ZCLFVBQVUsSUFBSSxPQUFTLElBQ3hCLFVBQVUsSUFBSSxJQUNuQkEsV0FBVSxLQUlkLFFBQVEsUUFDUixVQUFVLEtBQUssS0FBSyxLQUVwQixTQUFTLE9BQ1QsVUFBVSxLQUFLLFFBQVUsU0FBUyxFQUFHLEdBQ3JDLFVBQVUsS0FBSyxRQUFVLFFBQVEsSUFBTTtNQUUvQztJQUNKO0FBRUEsYUFBUyxhQUFrQjtBQUN2QixVQUFNLGNBQWMsVUFBVSxHQUN4QixZQUFZLGVBQWUsR0FDM0Isd0JBQXdCLGNBQWMsSUFDeEMsR0FDQUE7QUFFSixVQUFJLGNBQWM7QUFDZCxnQkFBUSx1QkFBdUI7VUFDM0IsS0FBSztBQUNELG1CQUFPLFlBQVk7VUFDdkIsS0FBSztBQUNELG1CQUFPLFlBQVk7VUFDdkIsS0FBSztBQUNELG1CQUFPLFlBQVk7UUFDM0I7QUFJSixVQURBQSxVQUFTLFdBQVcscUJBQXFCLEdBQ3JDQSxVQUFTLE1BQU0sWUFBWSxLQUFLLElBQUk7QUFDcEMsY0FBTSxJQUFJLE1BQU0sMkJBQTJCO0FBRy9DLGNBQVEsV0FBVztRQUNmLEtBQUs7QUFDRCxpQkFBT0E7UUFDWCxLQUFLO0FBQ0QsaUJBQUksT0FBT0EsV0FBVyxXQUNYLEtBQUtBLFVBRVQsQ0FBQyxLQUFLQTtRQUNqQixLQUFLLEdBQUc7QUFDSixjQUFJQSxVQUFTLEdBQUc7QUFDWixnQkFBTSxXQUFXLENBQUMsR0FDZCxrQkFBa0I7QUFDdEIsb0JBQVFBLFVBQVMsMkJBQTJCLFNBQVMsTUFBTTtBQUN2RCxpQ0FBbUJBLFNBQ25CLFNBQVMsS0FBSyxnQkFBZ0JBLE9BQU0sQ0FBQztBQUV6QyxnQkFBTSxZQUFZLElBQUksV0FBVyxlQUFlLEdBQzVDLGtCQUFrQjtBQUN0QixpQkFBSyxJQUFJLEdBQUcsSUFBSSxTQUFTLFFBQVEsRUFBRTtBQUMvQix3QkFBVSxJQUFJLFNBQVMsQ0FBQyxHQUFHLGVBQWUsR0FDMUMsbUJBQW1CLFNBQVMsQ0FBQyxFQUFFO0FBRW5DLG1CQUFPO1VBQ1g7QUFDQSxpQkFBTyxnQkFBZ0JBLE9BQWdCLEVBQUUsTUFBTTtRQUNuRDtRQUNBLEtBQUssR0FBRztBQUtKLGNBQU0sWUFBc0IsQ0FBQztBQUM3QixjQUFJQSxVQUFTO0FBQ1Qsb0JBQVFBLFVBQVMsMkJBQTJCLFNBQVMsTUFBTTtBQUN2RCw4QkFBZ0IsV0FBV0EsT0FBTTs7QUFHckMsNEJBQWdCLFdBQVdBLE9BQWdCO0FBRS9DLGNBQUksU0FBUyxJQUNQLG9CQUFvQjtBQUMxQixlQUFLLElBQUksR0FBRyxJQUFJLFVBQVUsUUFBUSxLQUFLO0FBQ25DLHNCQUFVLE9BQU8sYUFBYSxNQUMxQixNQUNBLFVBQVUsTUFBTSxHQUFHLElBQUksaUJBQWlCLENBQzVDO0FBRUosaUJBQU87UUFDWDtRQUNBLEtBQUssR0FBRztBQUNKLGNBQUk7QUFDSixjQUFJQSxVQUFTLEdBQUc7QUFDWix1QkFBVyxDQUFDO0FBQ1osZ0JBQUksUUFBUTtBQUNaLG1CQUFPLENBQUMsVUFBVTtBQUNkLHVCQUFTLEtBQUssV0FBVyxDQUFDO1VBRWxDO0FBRUksaUJBREEsV0FBVyxJQUFJLE1BQU1BLE9BQU0sR0FDdEIsSUFBSSxHQUFHLElBQUlBLFNBQVEsRUFBRTtBQUN0Qix1QkFBUyxDQUFDLElBQUksV0FBVztBQUdqQyxpQkFBTztRQUNYO1FBQ0EsS0FBSyxHQUFHO0FBQ0osY0FBSSxlQUFlLE9BQU87QUFDdEIsZ0JBQU0sU0FBUyxvQkFBSTtBQUNuQixpQkFBSyxJQUFJLEdBQUcsSUFBSUEsV0FBV0EsVUFBUyxLQUFLLENBQUMsVUFBVSxHQUFJLEVBQUUsR0FBRztBQUN6RCxrQkFBTSxNQUFNLFdBQVc7QUFDdkIsa0JBQUksT0FBTyxJQUFJLEdBQUc7QUFDZCxzQkFBTSxJQUFJLE1BQU0sc0NBQXNDO0FBRTFELHFCQUFPLElBQUksS0FBSyxXQUFXLENBQUM7WUFDaEM7QUFDQSxtQkFBTztVQUNYO0FBQ0EsY0FBTSxZQUFpQixDQUFDO0FBQ3hCLGVBQUssSUFBSSxHQUFHLElBQUlBLFdBQVdBLFVBQVMsS0FBSyxDQUFDLFVBQVUsR0FBSSxFQUFFLEdBQUc7QUFDekQsZ0JBQU0sTUFBTSxXQUFXO0FBQ3ZCLGdCQUFJLE9BQU8sVUFBVSxlQUFlLEtBQUssV0FBVyxHQUFHO0FBQ25ELG9CQUFNLElBQUksTUFBTSxzQ0FBc0M7QUFFMUQsc0JBQVUsR0FBRyxJQUFJLFdBQVc7VUFDaEM7QUFDQSxpQkFBTztRQUNYO1FBQ0EsS0FBSyxHQUFHO0FBQ0osY0FBTSxRQUFRLFdBQVcsR0FDbkIsTUFBTUE7QUFDWixjQUFJLGlCQUFpQjtBQUNqQixvQkFBUSxLQUFLO2NBQ1QsS0FBSztjQUNMLEtBQUs7QUFDRCxvQkFBSSxNQUFNLE1BQU0sT0FBTyxDQUFDLEtBQUssT0FBTyxPQUFPLE1BQU0sT0FBTyxDQUFDLEdBQUcsRUFBRTtBQUM5RCx1QkFBSSxPQUFPLE1BQ1AsTUFBTSxDQUFDLEtBQUssTUFFVDtjQUVYLEtBQUs7QUFDRCx1QkFBTztjQUNYLEtBQUs7QUFDRCx1QkFBTyxJQUFJLFVBQVUsTUFBTSxNQUFNO2NBQ3JDLEtBQUs7QUFDRCx1QkFBTyxJQUFJLFlBQVksTUFBTSxNQUFNO2NBQ3ZDLEtBQUs7QUFDRCx1QkFBTyxJQUFJLFdBQVcsTUFBTSxNQUFNO2NBQ3RDLEtBQUs7QUFDRCx1QkFBTyxJQUFJLFlBQVksTUFBTSxNQUFNO2NBQ3ZDLEtBQUs7QUFDRCx1QkFBTyxJQUFJLFdBQVcsTUFBTSxNQUFNO2NBQ3RDLEtBQUs7QUFDRCx1QkFBTyxJQUFJLGVBQWUsTUFBTSxNQUFNO2NBQzFDLEtBQUs7QUFDRCx1QkFBTyxJQUFJLGNBQWMsTUFBTSxNQUFNO2NBQ3pDLEtBQUs7QUFDRCx1QkFBTyxJQUFJLGFBQWEsTUFBTSxNQUFNO2NBQ3hDLEtBQUs7QUFDRCx1QkFBTyxJQUFJLGFBQWEsTUFBTSxNQUFNO1lBQzVDO0FBRUosaUJBQU8sT0FBTyxLQUFLLEtBQUs7UUFDNUI7UUFDQSxLQUFLO0FBQ0Qsa0JBQVFBLFNBQVE7WUFDWixLQUFLO0FBQ0QscUJBQU87WUFDWCxLQUFLO0FBQ0QscUJBQU87WUFDWCxLQUFLO0FBQ0QscUJBQU87WUFDWCxLQUFLO0FBQ0Q7WUFDSjtBQUNJLHFCQUFPQTtVQUNmO01BQ1I7SUFDSjtBQUVBLFFBQU0sTUFBTSxXQUFXO0FBQ3ZCLFFBQUlELFlBQVcsS0FBSztBQUNoQixZQUFNLElBQUksTUFBTSw0QkFBNEI7QUFFaEQsV0FBTztFQUNYO0FBRU8sTUFBTSxPQUFPLEVBQ2hCLE9BQ0o7QUM5VkEsTUFBTSxxQkFBcUIsb0JBQUksSUFBZSxDQUMxQyxDQUFBLEdBQVksS0FBSyxHQUNqQixDQUFBLEdBQVcsQ0FBQyxHQUNaLENBQUEsR0FBYSxDQUFHLEdBQ2hCLENBQUEsR0FBYyxFQUFFLEdBQ2hCLENBQUEsR0FBWSxNQUFTLEdBQ3JCLENBQUEsR0FBYyxJQUFJLEdBQ2xCLENBQUEsR0FBWSxJQUFJLEdBQ2hCLENBQUEsR0FBZSxJQUFJLEdBQ25CLENBQUEsR0FBZ0IsSUFBSSxHQUNwQixDQUFBLElBQWlCLElBQUksR0FDckIsQ0FBQSxJQUFZLElBQUksR0FDaEIsQ0FBQSxJQUFhLGFBQWEsS0FBSyxDQUFDLEdBQUssR0FBSyxHQUFLLENBQUcsQ0FBQyxDQUFDLEdBQ3BELENBQUEsSUFBZSxhQUFhLEtBQUssQ0FBQyxHQUFLLENBQUcsQ0FBQyxDQUFDLEdBQzVDLENBQUEsSUFBZSxhQUFhLEtBQUssQ0FBQyxHQUFLLEdBQUssQ0FBRyxDQUFDLENBQUMsR0FDakQsQ0FBQSxJQUFlLGFBQWEsS0FBSyxDQUFDLEdBQUssR0FBSyxHQUFLLENBQUcsQ0FBQyxDQUFDLENBQzFELENBQUM7QUFRRCxXQUFTLGVBQWUsTUFBNEI7QUFDaEQsYUFBVyxRQUFRLEtBQUssWUFBWTtBQUNoQyxVQUFNLElBQUksS0FBSyxXQUFXLElBQUk7QUFFOUIsVUFBSSxFQUFFLFNBQVM7QUFHUCxVQUFFLFFBQVEsVUFHTixPQUFPLEVBQUUsV0FBWSxhQUdyQixFQUFFLFVBQVUsRUFBRSxPQUFPLFFBQVEsRUFBRSxPQUFPLEtBRXRDLEVBQUUsVUFBVSxLQUFLLEVBQUUsV0FBVyxFQUFFLE9BQU8sWUFDdkMsRUFBRSxVQUFVLE1BSWhCLEVBQUUsVUFBVTtnQkFHZixFQUFFLFNBQVMsTUFDUixFQUFFLFNBQVMsTUFDWCxFQUFFLFNBQVMsTUFDWCxFQUFFLFNBQVMsT0FDZixNQUFNLFFBQVEsRUFBRSxPQUFPO0FBSXZCLFVBQUUsVUFBVSxhQUFhLEtBQUssRUFBRSxPQUFPO2VBQ2hDLEVBQUUsWUFBWSxRQUFXO0FBQ2hDLFlBQU0sU0FBUyxFQUFFLFVBQVU7QUFDM0IsVUFBRSxVQUFVLE9BQU8sTUFBTSxFQUFFLE1BQU0sbUJBQW1CLElBQUksRUFBRSxJQUFJLENBQUM7TUFDbkU7QUFDQSxXQUFLLFVBQVUsSUFBSSxJQUFJLEVBQUU7SUFDN0I7RUFDSjtBQU9BLFdBQVMsa0JBQWtCLE1BQTRCO0FBQ25ELFNBQUssaUJBQWlCLEtBQUssZUFBZSxZQUFZLElBQ2hELE9BQU8sS0FBSyxLQUFLLFVBQVUsRUFBRSxLQUFLLElBQ2xDLENBQUM7RUFDWDtBQU9PLE1BQU1FLFFBQU4sTUFBVztJQU1MLFNBQWlCO0lBT2pCLE9BQW9CO0lBT3BCLFNBQTRCO0lBTzVCLDZCQUFrQztJQVNsQyxnQkFBa0M7SUFPbEMsdUJBQWlEO0lBT2pELHFCQUErQztJQU8vQyxjQUE4QjtJQU92QyxpQkFBMEM7SUFPakMsa0JBR0U7SUFPWCxxQkFBa0Q7SUFPekMsa0JBQTRDO0lBT3JELCtCQUF1QztJQVM5QixZQUErQjtJQVN4QztJQUdTLE9BQWUsSUFBSTtJQUc1QixpQ0FBMEM7SUFHMUMsV0FBbUI7SUFFbkIsZUFBdUI7SUFFdkIsZ0JBQThCO0lBRTlCLGNBQTBCO0lBRTFCLGdCQUE0QjtJQUU1QixpQkFBOEI7SUFFOUIsaUJBQThCO0lBRzlCLGlCQUFxQztJQUc1Qix1QkFBOEIsQ0FBQztJQUd4QyxVQUFnQyxDQUFDLElBQUk7SUFHN0IsY0FBMkI7SUFHbkMsa0JBQTBDLENBQUM7SUFHM0Msd0JBQWdELENBQUM7SUFHekMsVUFBNEI7SUFPNUIsYUFBc0I7SUFHYixlQUFlLElBQUksWUFBWSxNQUFNO0lBVXJDLHdCQUF3QjtJQU96QyxZQUFZQyxVQUFrQjtBQUN0QkEsaUJBQ0EsS0FBSyxtQkFBbUIsQ0FBQyxHQUFXLE1BQzNCLElBQ0UsS0FBSyxhQUFhLE9BQU8sS0FBSyxPQUFPLE1BQU0sR0FBRyxDQUFDLENBQUMsSUFEeEMsS0FJbkIsS0FBSyxtQkFBbUIsQ0FBQyxHQUFXLE1BQzNCLElBQ0UsS0FBSyxhQUFhLE9BQU8sS0FBSyxPQUFPLFNBQVMsR0FBRyxDQUFDLENBQUMsSUFEM0MsSUFLdEIsS0FBSyx3QkFBbUMsS0FBSyxtQkFBbUIsZUFBZTtJQUNwRjtJQU9BLFFBQVE7QUFFSixXQUFLLFVBQVUsR0FFZixLQUFLLGNBQWMsTUFDbkIsS0FBSyxRQUFRLFNBQVMsR0FDdEIsS0FBSyxtQkFBbUIsSUFBSSxHQUU1QixLQUFLLGtCQUFrQixDQUFDLEdBQ3hCLEtBQUssd0JBQXdCLENBQUMsR0FDN0IsS0FBSyx3QkFBbUMsS0FBSyxtQkFBbUIsZUFBZTtJQUNwRjtJQVFBLGFBQWEsTUFBYztBQUN2QixhQUFPLFFBQVEsS0FBSztJQUN4QjtJQVlBLHlCQUNJLFVBQ0EsUUFDQSxRQUNGO0FBQ0UsVUFBTSxPQUFPLGNBQThCQyxXQUFVO01BQUM7QUFDdEQsYUFBQSxLQUFLLFdBQVcsVUFDaEIsS0FBSyxhQUFhLFFBQ2xCLE9BQU8sT0FBTyxLQUFLLFdBQVcsTUFBTSxHQUM3QixLQUFLLG1CQUFtQixJQUFJO0lBQ3ZDO0lBVUEsbUJBQW1CLE1BQTRCO0FBQzNDLFVBQUksQ0FBQyxLQUFLO0FBQVUsY0FBTSxJQUFJLE1BQU0saUNBQWlDO0FBQ3JFLFVBQUksQ0FBQyxLQUFLLFVBQVU7QUFDaEIsY0FBTSxJQUFJLE1BQ04sa0NBQWtDLEtBQUssZ0NBQzNDO0FBR0osd0JBQWtCLElBQUksR0FDdEIsZUFBZSxJQUFJLEdBQ25CLGtCQUFrQixJQUFJO0FBRXRCLFVBQU0sWUFDRixLQUFLLFlBQVksS0FBSyx3QkFDaEIsS0FBSyxzQkFBc0IsS0FBSyxRQUFRLElBQ3hDLEtBQUssZ0JBQWdCO0FBSS9CLGFBSEEsS0FBSyxnQkFBZ0IsU0FBUyxJQUFJLE1BQ2xDLEtBQUssc0JBQXNCLEtBQUssUUFBUSxJQUFJLFdBRXhDLFNBQVMsb0JBRWIsS0FBSyxLQUFLLEtBQUEsR0FFTix3QkFDQSxLQUFLLFVBQ0wsVUFBVSxLQUFLLFNBQ2YsY0FDQSxTQUNKLEdBRUksS0FBSyxjQUFZLEtBQUssV0FBVyxLQUFLLE9BQU8sSUFFMUM7SUFDWDtJQVFBLG1CQUFtQixNQUFjO0FBQzdCLFdBQUssS0FBSyxLQUFBLEdBQW9CLHdCQUF3QixJQUFJLEdBQzFELEtBQUssZUFBZSxNQUNoQixLQUFLLFlBQVUsS0FBSyxNQUFNLEtBQUssUUFBUSxHQUMzQyxLQUFLLFdBQVcsS0FBSyxRQUFRLEtBQUssWUFBWSxHQUM5QyxLQUFLLGlCQUFpQjtJQUMxQjtJQU9BLGVBQWUsTUFBYztBQUNyQixXQUFLLGdCQUFnQixRQUV6QixLQUFLLG1CQUFtQixLQUFLLEtBQUssT0FBTyxJQUFJLElBQUksSUFBSTtJQUN6RDtJQVFBLG1CQUFtQjtBQUNmLFdBQUssZ0JBQWdCLElBQUksYUFDckIsS0FBSyxNQUFNLFFBQ1gsS0FBSyxVQUNMLEtBQUssZ0JBQWdCLENBQ3pCLEdBQ0EsS0FBSyxjQUFjLElBQUksV0FDbkIsS0FBSyxNQUFNLFFBQ1gsS0FBSyxVQUNMLEtBQUssZ0JBQWdCLENBQ3pCLEdBQ0EsS0FBSyxpQkFBaUIsSUFBSSxZQUN0QixLQUFLLE1BQU0sUUFDWCxLQUFLLFVBQ0wsS0FBSyxnQkFBZ0IsQ0FDekIsR0FDQSxLQUFLLGlCQUFpQixJQUFJLFlBQ3RCLEtBQUssTUFBTSxRQUNYLEtBQUssVUFDTCxLQUFLLGdCQUFnQixDQUN6QixHQUNBLEtBQUssZ0JBQWdCLElBQUksV0FDckIsS0FBSyxNQUFNLFFBQ1gsS0FBSyxVQUNMLEtBQUssWUFDVDtJQUNKO0lBV0EsZ0JBQWdCLE9BQTJCO0FBQ3ZDLGFBQUEsS0FBSyxlQUFlLEtBQUssR0FDbEIsS0FBSztJQUNoQjtJQVdBLGlCQUFpQixPQUE0QjtBQUN6QyxhQUFBLEtBQUssZUFBZSxRQUFRLENBQUMsR0FDdEIsS0FBSztJQUNoQjtJQVdBLGlCQUFpQixPQUE0QjtBQUN6QyxhQUFBLEtBQUssZUFBZSxRQUFRLENBQUMsR0FDdEIsS0FBSztJQUNoQjtJQVdBLGlCQUFpQixPQUEyQjtBQUN4QyxhQUFBLEtBQUssZUFBZSxRQUFRLENBQUMsR0FDdEIsS0FBSztJQUNoQjtJQVdBLGlCQUFpQixPQUE2QjtBQUMxQyxhQUFBLEtBQUssZUFBZSxRQUFRLENBQUMsR0FDdEIsS0FBSztJQUNoQjtJQWVBLFNBQVNDLE1BQWEsYUFBYSxHQUFXO0FBQzFDLFVBQU0sU0FBUyxLQUFLLGdCQUFnQkEsSUFBRyxJQUFJO0FBQzNDLFdBQUssZUFBZSxTQUFTLFVBQVU7QUFDdkMsVUFBTSxNQUFNLEtBQUssV0FBVztBQUM1QixhQUFBLEtBQUssYUFBYUEsTUFBSyxLQUFLLE1BQU0sR0FDM0I7SUFDWDtJQVVBLGlCQUFpQixRQUE2QjtBQUMxQyxVQUFNLE9BQU8sT0FBTyxZQUNkLE1BQU0sS0FBSyxRQUFRLElBQUk7QUFDN0IsYUFBQSxLQUFLLE9BQU8sSUFBSSxJQUFJLFdBQVcsTUFBTSxHQUFHLEdBQUcsR0FDcEM7SUFDWDtJQUtBLElBQUksWUFBcUI7QUFDckIsYUFBTyxLQUFLO0lBQ2hCO0lBU1UsV0FBVyxRQUFnQztBQUNqRCxXQUFLLFVBQVU7SUFDbkI7SUFJVSx1QkFBdUIsTUFBcUI7QUFDOUMsV0FBSyxRQUFRLE9BQU8sU0FDbkIsS0FBSyxRQUFRLEtBQW1CLElBQUksR0FBRyxNQUFNLElBQUksR0FDbEQsS0FBSyxRQUFRLGlCQUFpQixPQUFPLEtBQUssZUFBZ0IsSUFBSTtJQUV0RTtJQUNVLHVCQUF1QjtBQUM3QixVQUFNLGVBQWUsS0FBSyxRQUFRO0FBQzlCLDhCQUF3QixpQkFBZSxhQUFhLE1BQU0sR0FDOUQsS0FBSyxRQUFRLGVBQWUsT0FBTyxHQUNsQyxLQUFLLFFBQVEsS0FBYztJQUNoQztJQUNVLG1CQUFtQjtBQUV4QixXQUFLLFFBQVEsY0FBMEIsT0FDdkMsS0FBSyxRQUFRLGNBQTBCO0lBQzVDO0lBQ1UsV0FBVyxXQUFvQjtBQUNyQyxXQUFLLGFBQWEsV0FHbEIsS0FBSyxtQkFBbUIsSUFBSTtJQUNoQztJQUNVLG1CQUFtQixPQUFlO0FBQ3hDLFVBQU0sUUFBUSxLQUFLLFFBQVEsUUFBUSxLQUFLO0FBRXhDLFdBQUssY0FBYyxPQUFPLGlCQUFpQjtJQUMvQztJQUNVLG9CQUFvQixPQUFlO0FBQ3pDLFVBQU0sTUFBTSxLQUFLLFFBQVEsS0FBSztBQUN6QixjQUVMLEtBQUssUUFBUSxLQUFLLElBQUksTUFFakIsSUFBeUIsUUFBUSxXQUNqQyxJQUF5QixNQUFNLEtBRS9CLElBQXlCLFdBQVcsV0FDckMsSUFBSSxTQUFTLE9BRVosSUFBeUIsWUFBWSxXQUN0QyxJQUFJLFVBQVU7SUFFdEI7SUFDVSw0QkFDTixZQUNBLFFBQ0EsT0FDRjtBQUNFLFVBQU0sUUFBUSxLQUFLLFFBQVEsUUFBUSxVQUFVLEdBQ3ZDLFFBQVEsV0FBVztBQUN6QixlQUFTLElBQUksR0FBRyxJQUFJLE9BQU8sRUFBRSxHQUFHO0FBQzVCLFlBQU0sS0FBSyxLQUFLLFFBQVEsUUFBUSxDQUFDO0FBQ2pDLGNBQU0sZUFBZSxFQUFFO01BQzNCO0lBQ0o7SUFDVSx1QkFDTixZQUNBLFFBQ0EsUUFDQSxjQUNBLGlCQUNBLFlBQ0EsZUFDRjtBQUNFLFVBQU0sT0FBTyxLQUFLLE9BQU8sU0FBUyxjQUFjLGVBQWUsR0FDekQsVUFBVSxLQUFLLFFBQVEsU0FBUyxlQUFlLEdBQUcsa0JBQWtCLENBQUMsR0FDckUsTUFBTSxLQUFLLFFBQVEsU0FBUyxXQUFXLEdBQUcsV0FBVyxDQUFDLEdBRXRELFNBQVMsS0FBSyxTQUNkLFFBQVEsT0FBTyxRQUFRLFVBQVUsR0FDakMsYUFBYSxNQUFNLGVBRXJCO0FBQ0osVUFBSTtBQUNBLGtCQUFVLEtBQUssT0FBTyxJQUFJO01BQzlCLFNBQVMsR0FBVDtBQUNJLGFBQUssS0FBSyxNQUFBLEdBQXFCLCtDQUErQyxHQUM5RSxLQUFLLEtBQUssTUFBQSxHQUF3QixDQUFDO0FBQ25DO01BQ0o7QUFFQSxVQUFJLENBQUMsTUFBTSxRQUFRLE9BQU8sR0FBRztBQUN6QixhQUFLLEtBQUssTUFBQSxHQUFxQixpQ0FBaUM7QUFDaEU7TUFDSjtBQUNBLFVBQUksUUFBUSxXQUFXLElBQUksUUFBUTtBQUMvQixhQUFLLEtBQUssTUFBQSxHQUVOLDJCQUEyQixRQUFRLHVCQUF1QixJQUFJLFFBQ2xFO0FBQ0E7TUFDSjtBQUVBLGVBQVMsSUFBSSxHQUFHLElBQUksUUFBUSxRQUFRLEVBQUUsR0FBRztBQUNyQyxZQUFNLEtBQUtELFdBQVUsTUFBTSxZQUFZLElBQUksQ0FBQyxDQUFDLEdBQ3ZDLFFBQVEsS0FBSyxrQ0FBa0MsRUFBRSxHQUNqRCxZQUFZLFdBQVcsS0FBSyxHQUM1QixPQUFPLFVBQVU7QUFDdkIsWUFBSSxRQUFRO0FBQWlCO0FBRTdCLFlBQU0sYUFBYSxLQUFLLGdCQUNsQixjQUFjLFFBQVEsQ0FBQztBQUM3QixZQUFJLENBQUMsTUFBTSxRQUFRLFdBQVcsR0FBRztBQUM3QixlQUFLLEtBQUssTUFBQSxHQUFxQiwyQ0FBMkM7QUFDMUU7UUFDSjtBQUNBLFlBQUksWUFBWSxXQUFXLFdBQVcsUUFBUTtBQUMxQyxlQUFLLEtBQUssTUFBQSxHQUVOLHFDQUFxQyxZQUFZLHVCQUF1QixXQUFXLFFBQ3ZGO0FBQ0E7UUFDSjtBQUVBLGlCQUFTLElBQUksR0FBRyxJQUFJLFlBQVksUUFBUSxFQUFFLEdBQUc7QUFDekMsY0FBTSxPQUFPLFdBQVcsQ0FBQyxHQUNuQkUsWUFBVyxLQUFLLFdBQVcsSUFBSSxHQUMvQixPQUFPQSxVQUFTLE1BQ2xCLFFBQVEsWUFBWSxDQUFDO0FBR3pCLGNBQUksVUFBVSxRQUFXO0FBRXJCLHFCQURlQSxVQUFTLFVBQVUsdUJBQ25CLE1BQU0sTUFBTUEsVUFBUyxPQUFPLEdBQzFDLFVBQWtDLElBQUksSUFBSTtBQUMzQztVQUNKO0FBVUEsa0JBSkksT0FBTyxTQUFVLGFBQ2pCLFNBQVMsUUFBUSxJQUFJLElBR2pCLE1BQU07WUFDVixLQUFBO1lBQ0EsS0FBQTtZQUNBLEtBQUE7WUFDQSxLQUFBO1lBQ0EsS0FBQTtZQUNBLEtBQUE7WUFDQSxLQUFBO1lBQ0EsS0FBQTtBQUVJO1lBQ0osS0FBQTtBQUNJLHNCQUFRLFFBQ0YsTUFBTSxLQUFLLEtBQUssY0FBYyxNQUFNLFFBQVEsS0FBSyxDQUFDLElBQ2xEO0FBQ047WUFDSixLQUFBO0FBQ0ksc0JBQVEsT0FBTyxPQUFPLEtBQUssS0FBSztBQUNoQztZQUNKLEtBQUE7QUFDSSxzQkFBUSxPQUFPLFNBQVMsS0FBSyxLQUFLO0FBQ2xDO1lBQ0osS0FBQTtBQUNJLHNCQUFRLE9BQU8sVUFBVSxLQUFLLEtBQUs7QUFDbkM7WUFDSixLQUFBO0FBQ0ksc0JBQVEsTUFBTSxXQUFXLEtBQUssS0FBSztBQUNuQztZQUNKLEtBQUE7QUFDSSxzQkFBUSxNQUFNLE1BQU0sS0FBSyxLQUFLO0FBQzlCO1lBQ0osS0FBQTtBQUlJLGtCQUFNQyxRQUFPLEtBQU0sTUFBTSxvQkFBb0IsS0FBTTtBQUNuRCxzQkFBUSxhQUFhLEtBQUssT0FBTyxDQUFDLEdBQVcsTUFBTSxJQUFJQSxJQUFHO0FBQzFEO1VBQ1I7QUFFQyxvQkFBa0MsSUFBSSxJQUFJO1FBQy9DO01BQ0o7SUFDSjtJQUVVLHNDQUNOLE9BQ0EsV0FDQSxPQUNBLFVBQ0EsYUFDRjtBQUVFLFVBQU0sT0FEYyxLQUFLLFFBQVEsUUFBUSxLQUFLLEVBQVksY0FDbEMsU0FBUyxHQUUzQixRQUFRLEtBQUssaUJBQWlCLFVBQVUsV0FBVyxHQUVuRCxZQURPLEtBQUssWUFDSyxlQUFlLEtBQUs7QUFDMUMsV0FBNkIsU0FBUyxJQUFJO0lBQy9DO0lBRVUsK0JBQStCLFNBQWlCLFlBQW9CO0FBQzFFLFVBQU0sV0FBVyxLQUFLLGlCQUFpQixTQUFTLFVBQVUsR0FDcEQsUUFBUSxLQUFLLHNCQUFzQixRQUFRO0FBQ2pELGFBQUksVUFBVSxTQUNILEtBQUssd0JBRVQ7SUFDWDtJQUNVLHVCQUNOLFlBQ0EsT0FDQSxJQUNBLE1BQ0EsUUFDRjtBQUNnQixXQUFLLFFBQVEsUUFBUSxVQUFVLEVBQ3ZDLFlBQVksU0FBUyxPQUFPLElBQUksTUFBTSxNQUFNO0lBQ3REO0lBQ1UscUJBQXFCLE9BQWUsV0FBbUI7QUFDekMsV0FBSyxRQUFRLFFBQVEsS0FBSyxFQUFZLGNBQ3JDLFNBQVMsRUFDNUIsYUFBYTtJQUNuQjtJQUNVLHVCQUF1QixXQUFtQixJQUFZO0FBQ2xELFdBQUssWUFBWSxTQUFTLEVBQ2xDLGVBQWUsRUFBRTtJQUN2QjtJQUNVLDJCQUEyQixXQUFtQjtBQUMxQyxXQUFLLFlBQVksU0FBUyxFQUNsQyxtQkFBbUI7SUFDekI7SUFDVSw2QkFBNkIsV0FBbUI7QUFDNUMsV0FBSyxZQUFZLFNBQVMsRUFDbEMscUJBQXFCO0lBQzNCO0lBQ1UsOEJBQ04sWUFDQSxTQUNBLGFBQ0Y7QUFDZ0IsV0FBSyxRQUFRLFFBQVEsVUFBVSxFQUN2QyxrQkFBa0IsU0FBUyxXQUFXO0lBQ2hEO0lBQ1UsV0FBVyxPQUFlLEdBQVcsR0FBVztBQUN0RCxVQUFNLGFBQWMsS0FBSyxRQUFRLFFBQVEsS0FBSyxFQUFZLGVBQ3BELGFBQWEsV0FBVyxDQUFDO0FBQy9CLGlCQUFXLENBQUMsSUFBSSxXQUFXLENBQUMsR0FDNUIsV0FBVyxDQUFDLElBQUk7SUFDcEI7SUFDVSxXQUNOLGVBQ0EsVUFDQSxlQUNBLFVBQ0EsWUFDRjtBQUNFLFVBQU0sV0FBVyxLQUFLLFFBQVEsUUFBUSxhQUFhLEdBRTdDLFdBRFcsS0FBSyxRQUFRLFFBQVEsYUFBYSxFQUN6QixjQUFjLFFBQVEsR0FDMUMsVUFBVSxTQUFTLGNBQWMsUUFBUTtBQUMvQyxVQUFJO0FBQ0EsaUJBQVMsTUFBTSxTQUFTLFVBQVU7TUFDdEMsU0FBUyxHQUFUO0FBQ0ksYUFBSyxLQUFLLE1BQUEsR0FFTixvQkFBb0IsU0FBUyx5QkFBeUIsU0FBUyxPQUFPLE1BQzFFLEdBQ0EsS0FBSyxLQUFLLE1BQUEsR0FBd0IsQ0FBQztNQUN2QztJQUNKO0lBWVUsNkJBQ04sYUFDQSxTQUNBLFlBQ0Y7QUFFRSxVQUFNLE9BRFEsS0FBSyxRQUFRLE1BQ1IsWUFBWSxjQUFjLFdBQVcsR0FDbEQsVUFBVSxLQUFLLGlCQUFpQixTQUFTLFVBQVU7QUFDekQsV0FBSyxRQUFRLE9BQU8sT0FBTztJQUMvQjtFQUNKO0FBaW9CQSxXQUFTLG9CQUFvQixTQUFpQjtBQUMxQyxXQUFPLFdBQVk7QUFDZixZQUFNLElBQUksTUFDTiw0QkFBNEI7MkRBQ2tDLFNBQ2xFO0lBQ0o7RUFDSjtBQUdBLE1BQU0sc0JBQXNCLG9CQUFvQixPQUFPO0FBQ3ZETCxRQUFLLFVBQVUsa0NBQWtDO0FBQ2pEQSxRQUFLLFVBQVUsa0NBQWtDO0FBQ2pEQSxRQUFLLFVBQVUsbUNBQW1DO0FBQ2xEQSxRQUFLLFVBQVUsbUNBQW1DO0FBQ2xEQSxRQUFLLFVBQVUsMkJBQTJCO0FBQzFDQSxRQUFLLFVBQVUsaUNBQWlDO0FBQ2hEQSxRQUFLLFVBQVUsdUNBQXVDO0FBQ3REQSxRQUFLLFVBQVUsZ0NBQWdDO0FBQy9DQSxRQUFLLFVBQVUsaUNBQWlDO0FBQ2hEQSxRQUFLLFVBQVUsc0NBQXNDO0FBQ3JEQSxRQUFLLFVBQVUsb0NBQW9DO0FBQ25EQSxRQUFLLFVBQVUsc0NBQXNDO0FBQ3JELE1BQU0sc0JBQXNCLG9CQUFvQixPQUFPO0FBQ3ZEQSxRQUFLLFVBQVUsd0NBQXdDO0FBQ3ZEQSxRQUFLLFVBQVUsd0NBQXdDO0FBQ3ZEQSxRQUFLLFVBQVUsZ0NBQWdDO0FBQy9DQSxRQUFLLFVBQVUsZ0NBQWdDO0FBQy9DQSxRQUFLLFVBQVUsNkNBQTZDO0FBQzVEQSxRQUFLLFVBQVUsNkNBQTZDO0FBQzVEQSxRQUFLLFVBQVUscURBQXFEO0FBQ3BFQSxRQUFLLFVBQVUsa0RBQWtEO0FBQ2pFLE1BQU0sc0JBQXNCLG9CQUFvQixPQUFPO0FBQ3ZEQSxRQUFLLFVBQVUsc0NBQXNDO0FBQ3JEQSxRQUFLLFVBQVUsc0NBQXNDO0FBQ3JEQSxRQUFLLFVBQVUsaUNBQWlDO0FBQ2hEQSxRQUFLLFVBQVUsaUNBQWlDO0FBQ2hEQSxRQUFLLFVBQVUseUNBQXlDO0FBQ3hEQSxRQUFLLFVBQVUseUNBQXlDO0FBQ3hEQSxRQUFLLFVBQVUsd0NBQXdDO0FBQ3ZEQSxRQUFLLFVBQVUsdUNBQXVDO0FBQ3REQSxRQUFLLFVBQVUsdUNBQXVDO0FBQ3REQSxRQUFLLFVBQVUsOEJBQThCOzs7QUc3K0M3QyxNQUFNLGtCQUFOLGNBQThCLFdBQVU7QUFBQTtBQUFBLElBT3BDLE9BQU87QUFBQSxJQUNQLFVBQVU7QUFBQSxJQUNWLE9BQU87QUFBQTtBQUFBLElBQ1AsV0FBVyxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQUE7QUFBQSxJQUNuQixXQUFXLENBQUMsR0FBRyxHQUFHLEdBQUcsRUFBRTtBQUFBO0FBQUEsSUFDdkIsb0JBQW9CO0FBQUE7QUFBQSxJQUNwQix3QkFBd0I7QUFDcEIsYUFBTyxJQUFJLFFBQVEsT0FBTyxTQUFTLFdBQVc7QUFFMUMsZUFBTyxjQUFjLElBQUksTUFBTSxrQ0FBa0MsQ0FBQztBQUVsRSxlQUFPLGlCQUFpQix1Q0FBdUMsWUFBWTtBQUN2RSxjQUFJO0FBQ0Esa0JBQU0sY0FBYyxNQUFNLGtCQUFrQixrQkFBa0I7QUFDOUQsb0JBQVEsV0FBVztBQUFBLFVBQ3ZCLFNBQ08sV0FBUDtBQUNJLG1CQUFPLFNBQVM7QUFBQSxVQUNwQjtBQUFBLFFBQ0osQ0FBQztBQUFBLE1BQ0wsQ0FBQztBQUFBLElBQ0w7QUFBQSxJQUNBLE1BQU0saUJBQWlCO0FBR25CLFVBQUkscUJBQXFCLGtCQUFrQixtQkFBbUI7QUFDMUQsWUFBSTtBQUNBLGdCQUFNLFNBQVMsTUFBTSxrQkFBa0Isa0JBQWtCO0FBRXpELGNBQUksV0FBVyxXQUFXO0FBQ3RCLGtCQUFNLElBQUksTUFBTSxhQUFhO0FBQUEsVUFDakM7QUFBQSxRQUNKLFNBQ08sV0FBUDtBQUVJLGNBQUksVUFBVSxTQUFTLG1CQUFtQjtBQUN0QyxrQkFBTSxjQUFjLE1BQU0sS0FBSyxzQkFBc0I7QUFDckQsZ0JBQUksZ0JBQWdCLFdBQVc7QUFDM0Isb0JBQU0sSUFBSSxNQUFNLGFBQWE7QUFBQSxZQUNqQztBQUFBLFVBQ0osT0FDSztBQUNELGtCQUFNLElBQUksTUFBTSxhQUFhO0FBQUEsVUFDakM7QUFBQSxRQUNKO0FBQUEsTUFDSjtBQUNBLFVBQUk7QUFFQSxjQUFNLFNBQVMsTUFBTSxVQUFVLGFBQWEsYUFBYTtBQUFBLFVBQ3JELE9BQU87QUFBQSxVQUNQLE9BQU87QUFBQSxRQUNYLENBQUM7QUFFRCxlQUFPLFVBQVUsRUFBRSxRQUFRLENBQUMsVUFBVTtBQUNsQyxnQkFBTSxLQUFLO0FBQUEsUUFDZixDQUFDO0FBQUEsTUFDTCxTQUNPLFdBQVA7QUFDSSxjQUFNLElBQUksTUFBTSxRQUFRO0FBQUEsTUFDNUI7QUFBQSxJQUNKO0FBQUEsSUFDQSxPQUFPO0FBQ0gsV0FBSyxPQUFPLEtBQUssT0FBTyxhQUFhLE1BQU07QUFDM0MsV0FBSyxXQUFXLEtBQUssU0FBUyxLQUFLLElBQUk7QUFDdkMsV0FBSyxXQUFXLEtBQUssU0FBUyxLQUFLLElBQUk7QUFDdkMsV0FBSyxjQUFjLEtBQUssWUFBWSxLQUFLLElBQUk7QUFDN0MsV0FBSyx1QkFBdUIsS0FBSyxxQkFBcUIsS0FBSyxJQUFJO0FBQUEsSUFDbkU7QUFBQSxJQUNBLE1BQU0sUUFBUTtBQUNWLFdBQUssT0FBTyxLQUFLLE9BQU8sYUFBYSxNQUFNO0FBQzNDLFVBQUksQ0FBQyxLQUFLLHFCQUFxQjtBQUMzQix3QkFBZ0IsS0FBSztBQUFBLE1BQ3pCO0FBQ0EsVUFBSTtBQUNBLGNBQU0sS0FBSyxlQUFlO0FBQUEsTUFDOUIsU0FDTyxPQUFQO0FBRUksZUFBTyxjQUFjLElBQUksWUFBWSwyQkFBMkIsRUFBRSxRQUFRLE1BQU0sQ0FBQyxDQUFDO0FBQ2xGO0FBQUEsTUFDSjtBQUNBLFlBQU0sS0FBSyxXQUFXO0FBQ3RCLFVBQUksYUFBYSxVQUFVO0FBQUEsUUFDdkIsc0JBQXNCO0FBQUEsTUFDMUIsQ0FBQztBQUNELFdBQUssb0JBQW9CLElBQUksa0JBQWtCLGVBQWU7QUFDOUQsVUFBSSx5QkFBeUI7QUFBQSxRQUN6QixLQUFLO0FBQUEsUUFDTCxJQUFJLGFBQWEsZUFBZTtBQUFBLFFBQ2hDO0FBQUEsTUFDSixDQUFDO0FBQ0QsWUFBTSxTQUFTO0FBQUEsUUFDWCxjQUFjO0FBQUEsVUFDVixXQUFXLElBQUksU0FBUyxPQUFPLEVBQUU7QUFBQSxRQUNyQztBQUFBLFFBQ0EsUUFBUSxPQUFPO0FBQUEsUUFDZixnQkFBZ0IsSUFBSSxTQUFTLE9BQU8sRUFBRTtBQUFBLFFBQ3RDLFlBQVk7QUFBQSxNQUNoQjtBQUNBLFVBQUksSUFBSSxNQUFNO0FBQUEsSUFDbEI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBS0EsU0FBUyxRQUFRO0FBQ2IsV0FBSyxVQUFVO0FBQ2YsV0FBSyxPQUFPLE1BQU0sb0JBQW9CO0FBQ3RDLFlBQU0sS0FBSyxPQUFPO0FBQ2xCLFlBQU0sTUFBTSxLQUFLLE9BQU87QUFDeEIsWUFBTSxNQUFNLEtBQUssT0FBTyxvQkFBb0IsQ0FBQyxDQUFDO0FBQzlDLFdBQUssV0FBVyxNQUFNLEtBQUssR0FBRztBQUM5QixXQUFLLFdBQVcsTUFBTSxLQUFLLEdBQUc7QUFDOUIsVUFBSSxhQUFhLDZCQUE2QjtBQUFBLFFBQzFDLFFBQVEsRUFBRSxHQUFHLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsRUFBRTtBQUFBLFFBQzFDLFFBQVEsRUFBRSxHQUFHLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxFQUFFO0FBQUEsUUFDckQsS0FBSztBQUFBLFVBQ0QsZ0JBQWdCLE9BQU8sT0FBTztBQUFBLFVBQzlCLGlCQUFpQixPQUFPLE9BQU87QUFBQSxVQUMvQixlQUFlLEtBQUssS0FBSztBQUFBLFVBQ3pCLGNBQWMsS0FBSyxLQUFLO0FBQUEsUUFDNUI7QUFBQSxNQUNKLENBQUM7QUFDRCxXQUFLLE9BQU8sTUFBTSxZQUFZLEtBQUssTUFBTTtBQUNyQyxXQUFHLGdCQUFnQixHQUFHLGtCQUFrQixJQUFJO0FBQzVDLFlBQUksYUFBYSxLQUFLLElBQUksQ0FBQztBQUMzQixZQUFJLFVBQVU7QUFBQSxNQUNsQixDQUFDO0FBQ0QsV0FBSyxPQUFPLE1BQU0sYUFBYSxLQUFLLE1BQU07QUFDdEMsWUFBSSxjQUFjLEtBQUssSUFBSSxDQUFDO0FBQUEsTUFDaEMsQ0FBQztBQUFBLElBQ0w7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBS0EscUJBQXFCLEdBQUc7QUFDcEIsVUFBSSxLQUFLLEVBQUUsV0FBVyxVQUFVO0FBQzVCLGFBQUssWUFBWSxJQUFJLE1BQU0sOEJBQThCLEVBQUUsUUFBUSxDQUFDO0FBQUEsTUFDeEU7QUFBQSxJQUNKO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUtBLFNBQVMsR0FBRztBQUNSLFVBQUksQ0FBQyxFQUFFLGlCQUFpQjtBQUNwQjtBQUNKLFlBQU0sRUFBRSxVQUFVLFVBQVUsV0FBVyxJQUFJLEVBQUUsaUJBQWlCO0FBQzlELFdBQUssU0FBUyxDQUFDLElBQUksU0FBUztBQUM1QixXQUFLLFNBQVMsQ0FBQyxJQUFJLFNBQVM7QUFDNUIsV0FBSyxTQUFTLENBQUMsSUFBSSxTQUFTO0FBQzVCLFdBQUssU0FBUyxDQUFDLElBQUksU0FBUztBQUM1QixXQUFLLFNBQVMsQ0FBQyxJQUFJLFNBQVM7QUFDNUIsV0FBSyxTQUFTLENBQUMsSUFBSSxTQUFTO0FBQzVCLFdBQUssU0FBUyxDQUFDLElBQUksU0FBUztBQUM1QixVQUFJLFlBQVk7QUFDWixjQUFNLG1CQUFtQixLQUFLLEtBQUs7QUFDbkMsaUJBQVMsSUFBSSxHQUFHLElBQUksSUFBSSxLQUFLO0FBR3pCLGNBQUksT0FBTyxTQUFTLFdBQVcsQ0FBQyxDQUFDLEdBQUc7QUFDaEMsNkJBQWlCLENBQUMsSUFBSSxXQUFXLENBQUM7QUFBQSxVQUN0QztBQUFBLFFBQ0o7QUFBQSxNQUNKO0FBQ0EsVUFBSSxZQUFZLFVBQVU7QUFDdEIsYUFBSyxPQUFPLGdCQUFnQixLQUFLO0FBQ2pDLGFBQUssT0FBTyxvQkFBb0IsS0FBSyxRQUFRO0FBQUEsTUFDakQ7QUFBQSxJQUNKO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUtBLFlBQVksT0FBTztBQUNmLGNBQVEsTUFBTSxzQkFBc0IsS0FBSztBQUN6QyxhQUFPLGNBQWMsSUFBSSxZQUFZLGlCQUFpQixFQUFFLFFBQVEsTUFBTSxDQUFDLENBQUM7QUFBQSxJQUM1RTtBQUFBLElBQ0EsYUFBYTtBQUNULGFBQU8sSUFBSSxRQUFRLENBQUMsU0FBUyxTQUFTO0FBQ2xDLFlBQUksT0FBTyxLQUFLO0FBQ1osa0JBQVE7QUFBQSxRQUNaLE9BQ0s7QUFDRCxpQkFBTyxpQkFBaUIsWUFBWSxNQUFNLFFBQVEsQ0FBQztBQUFBLFFBQ3ZEO0FBQUEsTUFDSixDQUFDO0FBQUEsSUFDTDtBQUFBLEVBQ0o7QUFuTUksZ0JBREUsaUJBQ0ssWUFBVztBQUNsQixnQkFGRSxpQkFFSyxjQUFhO0FBQUE7QUFBQSxJQUVoQixxQkFBcUIsRUFBRSxNQUFNLEtBQUssTUFBTSxTQUFTLE1BQU07QUFBQSxFQUMzRDtBQWlNSixNQUFNLGtCQUFrQjtBQUFBLElBQ3BCLE1BQU0sV0FBWTtBQUNkLFdBQUssK0JBQStCLEtBQUssNkJBQTZCLEtBQUssSUFBSTtBQUMvRSxXQUFLLHVCQUF1QixLQUFLLHFCQUFxQixLQUFLLElBQUk7QUFDL0QsV0FBSyxjQUFjLEtBQUssWUFBWSxLQUFLLElBQUk7QUFDN0MsYUFBTyxpQkFBaUIsb0NBQW9DLEtBQUssNEJBQTRCO0FBQzdGLGFBQU8saUJBQWlCLDJCQUEyQixLQUFLLG9CQUFvQjtBQUM1RSxhQUFPLGlCQUFpQixpQkFBaUIsS0FBSyxXQUFXO0FBQUEsSUFDN0Q7QUFBQSxJQUNBLDhCQUE4QixXQUFZO0FBQ3RDLFlBQU0sVUFBVSxLQUFLLFlBQVksd0JBQXdCO0FBQ3pELGFBQU8saUJBQWlCLHVDQUF1QyxNQUFNO0FBQ2pFLGdCQUFRLE9BQU87QUFBQSxNQUNuQixDQUFDO0FBQUEsSUFDTDtBQUFBLElBQ0Esc0JBQXNCLFNBQVUsU0FBUztBQUNyQyxXQUFLLFlBQVksdUJBQXVCO0FBQUEsSUFDNUM7QUFBQSxJQUNBLGFBQWEsU0FBVSxRQUFRO0FBQzNCLFdBQUssWUFBWSxtQkFBbUI7QUFBQSxJQUN4QztBQUFBLElBQ0EsYUFBYSxTQUFVLGFBQWE7QUFDaEMsWUFBTSxVQUFVLFNBQVMsY0FBYyxLQUFLO0FBQzVDLGNBQVEsWUFBWTtBQUNwQixlQUFTLEtBQUssWUFBWSxPQUFPO0FBQ2pDLGFBQU87QUFBQSxJQUNYO0FBQUEsRUFDSjtBQUNBLE1BQU0sMkJBQTJCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFtQ2pDLE1BQU0sMEJBQTBCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFtQ2hDLE1BQU0sc0JBQXNCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7OztBQzlVNUIsTUFBTSxVQUFVLElBQUksYUFBYSxDQUFDO0FBQ2xDLE1BQU0sV0FBVyxJQUFJLGFBQWEsQ0FBQztBQUM1QixXQUFTLHlCQUF5QixHQUFHLFdBQVc7QUFDbkQsVUFBTSxJQUFJLFVBQVU7QUFDcEIsYUFBUyxDQUFDLElBQUksRUFBRTtBQUNoQixhQUFTLENBQUMsSUFBSSxFQUFFO0FBQ2hCLGFBQVMsQ0FBQyxJQUFJLEVBQUU7QUFDaEIsYUFBUyxDQUFDLElBQUksRUFBRTtBQUNoQixVQUFNLElBQUksVUFBVTtBQUNwQixZQUFRLENBQUMsSUFBSSxFQUFFO0FBQ2YsWUFBUSxDQUFDLElBQUksRUFBRTtBQUNmLFlBQVEsQ0FBQyxJQUFJLEVBQUU7QUFDZixNQUFFLHNCQUFzQjtBQUN4QixNQUFFLGlCQUFpQixRQUFRO0FBQzNCLE1BQUUsZUFBZSxPQUFPO0FBQUEsRUFDNUI7OztBQ2ZBLE1BQUksYUFBMEMsU0FBVSxZQUFZLFFBQVEsS0FBSyxNQUFNO0FBQ25GLFFBQUksSUFBSSxVQUFVLFFBQVEsSUFBSSxJQUFJLElBQUksU0FBUyxTQUFTLE9BQU8sT0FBTyxPQUFPLHlCQUF5QixRQUFRLEdBQUcsSUFBSSxNQUFNO0FBQzNILFFBQUksT0FBTyxZQUFZLFlBQVksT0FBTyxRQUFRLGFBQWE7QUFBWSxVQUFJLFFBQVEsU0FBUyxZQUFZLFFBQVEsS0FBSyxJQUFJO0FBQUE7QUFDeEgsZUFBUyxJQUFJLFdBQVcsU0FBUyxHQUFHLEtBQUssR0FBRztBQUFLLFlBQUksSUFBSSxXQUFXLENBQUM7QUFBRyxlQUFLLElBQUksSUFBSSxFQUFFLENBQUMsSUFBSSxJQUFJLElBQUksRUFBRSxRQUFRLEtBQUssQ0FBQyxJQUFJLEVBQUUsUUFBUSxHQUFHLE1BQU07QUFDaEosV0FBTyxJQUFJLEtBQUssS0FBSyxPQUFPLGVBQWUsUUFBUSxLQUFLLENBQUMsR0FBRztBQUFBLEVBQ2hFO0FBSUEsTUFBSSxXQUFXLElBQUksYUFBYSxDQUFDO0FBQ2pDLE1BQUlNLFlBQVcsSUFBSSxhQUFhLENBQUM7QUFWakM7QUF5QkEsTUFBTSxVQUFOLGNBQXFCLFdBQVU7QUFBQSxJQUEvQjtBQUFBO0FBcURJO0FBR0EseUJBQU07QUFrQk47QUFrQkE7QUFHQTtBQTNGQSxxQ0FBVTtBQUVWO0FBQUEsa0NBQU87QUFFUDtBQUFBLHNDQUFXO0FBRVg7QUFBQSxzQ0FBVyxJQUFJLFFBQVE7QUFFdkI7QUFBQSxxQ0FBVTtBQUVWO0FBQUEsNkNBQWtCLElBQUksUUFBUTtBQUU5QjtBQUFBLDRDQUFpQixJQUFJLFFBQVE7QUFFN0I7QUFBQSxxQ0FBVTtBQUVWO0FBQUEseUNBQWM7QUFBQTtBQUFBO0FBQUEsSUFFZCxPQUFPLGdCQUFnQjtBQUNuQixhQUFPLHNCQUFPO0FBQUEsSUFDbEI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQW1CQSxPQUFPLE9BQU8sR0FBRyxRQUFRLE9BQU8sV0FBVztBQUN2QyxZQUFNLElBQUksRUFBRSxhQUFhLFNBQVEsRUFBRSxHQUFHLFFBQVEsUUFBUSxNQUFNLENBQUM7QUFDN0QsVUFBSSxNQUFNO0FBQ04sZUFBTztBQUNYLFFBQUUsY0FBYyxhQUFhO0FBQzdCLFFBQUUsVUFBVSxTQUFTO0FBQ3JCLFFBQUUsU0FBUyxLQUFLLE9BQVEsRUFBRSxVQUFVLE1BQVEsRUFBRSxjQUFjLEtBQU07QUFDbEUsUUFBRSxTQUFTO0FBQ1gsYUFBTyxFQUFFLFNBQVMsUUFBUTtBQUFBLElBQzlCO0FBQUEsSUErQ0EsUUFBUTtBQUNKLFVBQUksS0FBSyxRQUFRLEtBQUssT0FBTyxJQUFJO0FBQzdCLGFBQUssVUFBVTtBQUNmLFlBQUksS0FBSyxPQUFPLEdBQUcsUUFBUSw0QkFBNEIsUUFBVztBQUM5RCxrQkFBUSxLQUFLLHlGQUF5RjtBQUFBLFFBQzFHO0FBQ0EsYUFBSyxPQUFPLEdBQUcsUUFBUSx3QkFBd0IsS0FBSyxJQUFJLEVBQUUsS0FBSyxzQkFBSyxzQ0FBaUIsS0FBSyxJQUFJLENBQUM7QUFBQSxNQUNuRyxXQUNTLHNCQUFLLHdCQUFMLFlBQWtCO0FBQ3ZCLDhCQUFLLGdDQUFMLFdBQXFCLEtBQUssc0JBQUssOEJBQWEsS0FBSyxJQUFJLENBQUM7QUFBQSxNQUMxRCxPQUNLO0FBQ0QsY0FBTSxJQUFJLE1BQU0seUVBQXlFO0FBQUEsTUFDN0Y7QUFBQSxJQUNKO0FBQUEsSUFDQSxTQUFTO0FBQ0wsVUFBSSxDQUFDLEtBQUssWUFBWSxDQUFDLEtBQUssT0FBTztBQUMvQjtBQUVKLFlBQU0sT0FBTyxLQUFLLE9BQU8sR0FBRyxNQUFNLFFBQVEsS0FBSyxTQUFTLGFBQWEsS0FBSyxPQUFPLEdBQUcscUJBQXFCO0FBQ3pHLFlBQU0sVUFBVSxDQUFDLENBQUM7QUFDbEIsVUFBSSxXQUFXLEtBQUssU0FBUztBQUN6QixhQUFLLFVBQVU7QUFDZixTQUFDLFVBQVUsS0FBSyxrQkFBa0IsS0FBSyxnQkFBZ0IsT0FBTyxJQUFJO0FBQUEsTUFDdEU7QUFDQSxVQUFJLE1BQU07QUFDTixpQ0FBeUIsS0FBSyxRQUFRLEtBQUssU0FBUztBQUFBLE1BQ3hEO0FBQUEsSUFDSjtBQUFBLElBQ0EsWUFBWTtBQXpKaEIsVUFBQUM7QUEwSlEsc0JBQUFBLE9BQUEsU0FBTyxnQ0FBUCxLQUFBQSxNQUFxQjtBQUFBLElBQ3pCO0FBQUEsRUFDSjtBQW5JQSxNQUFNLFNBQU47QUFHVztBQXNCQTtBQUFBLGlCQUFVLFNBQUMsUUFBUTtBQUN0QiwwQkFBTyxVQUFTLEtBQUssTUFBTTtBQUFBLEVBQy9CO0FBQ087QUFBQSxvQkFBYSxTQUFDLFFBQVE7QUFDekIsVUFBTSxRQUFRLHNCQUFPLFVBQVMsUUFBUSxNQUFNO0FBQzVDLFFBQUksUUFBUTtBQUNSO0FBQ0osMEJBQU8sVUFBUyxPQUFPLE9BQU8sQ0FBQztBQUFBLEVBQ25DO0FBb0JBO0FBQUEsZ0JBQVMsV0FBRztBQUNSLFdBQU8sS0FBSyxXQUFXLEtBQUssT0FBTyxHQUFHO0FBQUEsRUFDMUM7QUFDTTtBQUFBLG9CQUFhLGlCQUFHO0FBQ2xCLFFBQUksQ0FBQyxzQkFBSyx3QkFBTCxXQUFpQixjQUFjO0FBQ2hDLFlBQU0sSUFBSSxNQUFNLDJGQUEyRjtBQUFBLElBQy9HO0FBQ0EsUUFBSSxLQUFLLGFBQWE7QUFDbEIsVUFBSSxLQUFLLFlBQVksaUJBQWlCLFFBQVc7QUFDN0MsY0FBTSxJQUFJLE1BQU0sbUZBQW1GO0FBQUEsTUFDdkc7QUFDQSxhQUFPLEtBQUssWUFBWSxhQUFhO0FBQUEsSUFDekMsT0FDSztBQUNELFdBQUssT0FBTyxvQkFBb0IsUUFBUTtBQUN4QyxNQUFBRCxVQUFTLElBQUksS0FBSyxPQUFPLGFBQWE7QUFDdEMsWUFBTSxXQUFXQTtBQUNqQixZQUFNLGFBQWEsSUFBSSxpQkFBaUIsRUFBRSxHQUFHLFNBQVMsQ0FBQyxHQUFHLEdBQUcsU0FBUyxDQUFDLEdBQUcsR0FBRyxTQUFTLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxTQUFTLENBQUMsR0FBRyxHQUFHLFNBQVMsQ0FBQyxHQUFHLEdBQUcsU0FBUyxDQUFDLEdBQUcsR0FBRyxTQUFTLENBQUMsRUFBRSxDQUFDO0FBQzlKLGFBQU8sc0JBQUssd0JBQUwsWUFBa0IsYUFBYSxZQUFZLEtBQUssT0FBTyxHQUFHLHFCQUFxQjtBQUFBLElBQzFGO0FBQUEsRUFDSjtBQUNBO0FBQUEsbUJBQVksU0FBQyxRQUFRO0FBQ2pCLFFBQUksQ0FBQztBQUNEO0FBQ0osUUFBSSxLQUFLLFNBQVM7QUFDZCxVQUFJLE9BQU8sNEJBQTRCLFFBQVc7QUFDOUMsZUFBTyx3QkFBd0IsRUFBRSxLQUFLLENBQUMsU0FBUztBQXhHaEUsY0FBQUM7QUF5R29CLGVBQUssT0FBTztBQUNaLGdDQUFLLHdCQUFMLFdBQWU7QUFDZiwwQkFBQUEsT0FBQSxTQUFPLDBCQUFQLEtBQUFBLE1BQWtCO0FBQUEsUUFDdEIsQ0FBQztBQUNEO0FBQUEsTUFDSixPQUNLO0FBQ0QsZ0JBQVEsS0FBSyx5RkFBeUY7QUFBQSxNQUMxRztBQUFBLElBQ0o7QUFDQSwwQkFBSyx3QkFBTCxXQUFlO0FBQUEsRUFDbkI7QUFDQTtBQUFBLHVCQUFnQixTQUFDLFFBQVE7QUFDckIsMEJBQUssd0JBQUwsV0FBZTtBQUFBLEVBQ25CO0FBQ0E7QUFBQSxnQkFBUyxTQUFDLFFBQVE7QUFDZCxTQUFLLFdBQVc7QUFDaEIsU0FBSyxTQUFTLE9BQU8sSUFBSTtBQUFBLEVBQzdCO0FBekVBLGVBekJFLFFBeUJLO0FBR1AsZUE1QkUsUUE0Qks7QUEzQlAsZ0JBREUsUUFDSyxZQUFXO0FBRWxCO0FBQUEsZUFIRSxRQUdLLFVBQVcsQ0FBQztBQWlJdkIsYUFBVztBQUFBLElBQ1AsU0FBUyxLQUFLLEtBQUs7QUFBQSxFQUN2QixHQUFHLE9BQU8sV0FBVyxXQUFXLE1BQU07QUFDdEMsYUFBVztBQUFBLElBQ1AsU0FBUyxPQUFPO0FBQUEsRUFDcEIsR0FBRyxPQUFPLFdBQVcsUUFBUSxNQUFNOzs7QUM5R25DLE1BQU0sZUFBTixjQUEyQixXQUFVO0FBQUE7QUFBQSxJQUlqQyxVQUFVLElBQUksUUFBUTtBQUFBO0FBQUEsSUFFdEIsWUFBWSxJQUFJLFFBQVE7QUFBQTtBQUFBLElBRXhCLFVBQVUsSUFBSSxRQUFRO0FBQUE7QUFBQSxJQUV0QixTQUFTLElBQUksUUFBUTtBQUFBO0FBQUEsSUFFckIsU0FBUyxJQUFJLFFBQVE7QUFBQTtBQUFBLElBRXJCLE9BQU8sSUFBSSxRQUFRO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFPbkIsaUJBQWlCLEdBQUc7QUFDaEIsV0FBSyxRQUFRLElBQUksQ0FBQztBQUFBLElBQ3RCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFPQSxvQkFBb0IsR0FBRztBQUNuQixXQUFLLFFBQVEsT0FBTyxDQUFDO0FBQUEsSUFDekI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQU9BLG1CQUFtQixHQUFHO0FBQ2xCLFdBQUssVUFBVSxJQUFJLENBQUM7QUFBQSxJQUN4QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBT0Esc0JBQXNCLEdBQUc7QUFDckIsV0FBSyxVQUFVLE9BQU8sQ0FBQztBQUFBLElBQzNCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFPQSxpQkFBaUIsR0FBRztBQUNoQixXQUFLLFFBQVEsSUFBSSxDQUFDO0FBQUEsSUFDdEI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQU9BLG9CQUFvQixHQUFHO0FBQ25CLFdBQUssUUFBUSxPQUFPLENBQUM7QUFBQSxJQUN6QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBT0EsZ0JBQWdCLEdBQUc7QUFDZixXQUFLLE9BQU8sSUFBSSxDQUFDO0FBQUEsSUFDckI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQU9BLG1CQUFtQixHQUFHO0FBQ2xCLFdBQUssT0FBTyxPQUFPLENBQUM7QUFBQSxJQUN4QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBT0EsZ0JBQWdCLEdBQUc7QUFDZixXQUFLLE9BQU8sSUFBSSxDQUFDO0FBQUEsSUFDckI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQU9BLG1CQUFtQixHQUFHO0FBQ2xCLFdBQUssT0FBTyxPQUFPLENBQUM7QUFBQSxJQUN4QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBT0EsY0FBYyxHQUFHO0FBQ2IsV0FBSyxLQUFLLElBQUksQ0FBQztBQUFBLElBQ25CO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFPQSxpQkFBaUIsR0FBRztBQUNoQixXQUFLLEtBQUssT0FBTyxDQUFDO0FBQUEsSUFDdEI7QUFBQSxFQUNKO0FBMUhJLGdCQURFLGNBQ0ssWUFBVztBQUNsQixnQkFGRSxjQUVLLGNBQWEsQ0FBQzs7O0FDakRsQixNQUFJLFVBQVU7QUFDZCxNQUFJLGFBQWEsT0FBTyxpQkFBaUIsY0FBYyxlQUFlO0FBQ3RFLE1BQUksU0FBUyxLQUFLO0FBVXpCLE1BQUksU0FBUyxLQUFLLEtBQUs7QUF1QnZCLE1BQUksQ0FBQyxLQUFLO0FBQU8sU0FBSyxRQUFRLFdBQVk7QUFDeEMsVUFBSSxJQUFJLEdBQ0osSUFBSSxVQUFVO0FBRWxCLGFBQU8sS0FBSztBQUNWLGFBQUssVUFBVSxDQUFDLElBQUksVUFBVSxDQUFDO0FBQUEsTUFDakM7QUFFQSxhQUFPLEtBQUssS0FBSyxDQUFDO0FBQUEsSUFDcEI7OztBQ3JDTyxXQUFTLFNBQVM7QUFDdkIsUUFBSSxNQUFNLElBQWEsV0FBVyxDQUFDO0FBRW5DLFFBQWEsY0FBYyxjQUFjO0FBQ3ZDLFVBQUksQ0FBQyxJQUFJO0FBQ1QsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksQ0FBQyxJQUFJO0FBQ1QsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLENBQUMsSUFBSTtBQUFBLElBQ1g7QUFFQSxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxXQUFPO0FBQUEsRUFDVDs7O0FDNUJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLGtCQUFBQztBQUFBLElBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVlPLFdBQVNDLFVBQVM7QUFDdkIsUUFBSSxNQUFNLElBQWEsV0FBVyxFQUFFO0FBRXBDLFFBQWEsY0FBYyxjQUFjO0FBQ3ZDLFVBQUksQ0FBQyxJQUFJO0FBQ1QsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksQ0FBQyxJQUFJO0FBQ1QsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksQ0FBQyxJQUFJO0FBQ1QsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLEVBQUUsSUFBSTtBQUNWLFVBQUksRUFBRSxJQUFJO0FBQ1YsVUFBSSxFQUFFLElBQUk7QUFDVixVQUFJLEVBQUUsSUFBSTtBQUFBLElBQ1o7QUFFQSxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFdBQU87QUFBQSxFQUNUO0FBUU8sV0FBUyxNQUFNLEdBQUc7QUFDdkIsUUFBSSxNQUFNLElBQWEsV0FBVyxFQUFFO0FBQ3BDLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFdBQU87QUFBQSxFQUNUO0FBU08sV0FBUyxLQUFLLEtBQUssR0FBRztBQUMzQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxXQUFPO0FBQUEsRUFDVDtBQXVCTyxXQUFTLFdBQVcsS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUN6RyxRQUFJLE1BQU0sSUFBYSxXQUFXLEVBQUU7QUFDcEMsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixXQUFPO0FBQUEsRUFDVDtBQXdCTyxXQUFTLElBQUksS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO0FBQ3ZHLFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsV0FBTztBQUFBLEVBQ1Q7QUFRTyxXQUFTLFNBQVMsS0FBSztBQUM1QixRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFdBQU87QUFBQSxFQUNUO0FBU08sV0FBUyxVQUFVLEtBQUssR0FBRztBQUVoQyxRQUFJLFFBQVEsR0FBRztBQUNiLFVBQUksTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDO0FBQ2IsVUFBSSxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDO0FBQ2IsVUFBSSxNQUFNLEVBQUUsRUFBRTtBQUNkLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNiLFVBQUksQ0FBQyxJQUFJO0FBQ1QsVUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osVUFBSSxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ2IsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFVBQUksRUFBRSxJQUFJO0FBQ1YsVUFBSSxFQUFFLElBQUk7QUFDVixVQUFJLEVBQUUsSUFBSTtBQUFBLElBQ1osT0FBTztBQUNMLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNiLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNiLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFVBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQztBQUNiLFVBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQztBQUNiLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUFBLElBQ2hCO0FBRUEsV0FBTztBQUFBLEVBQ1Q7QUFTTyxXQUFTLE9BQU8sS0FBSyxHQUFHO0FBQzdCLFFBQUksTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUM7QUFDYixRQUFJLE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDO0FBQ2IsUUFBSSxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRTtBQUNkLFFBQUksTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUU7QUFDZCxRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUU1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBRTVFLFFBQUksQ0FBQyxLQUFLO0FBQ1IsYUFBTztBQUFBLElBQ1Q7QUFFQSxVQUFNLElBQU07QUFDWixRQUFJLENBQUMsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUMvQyxRQUFJLENBQUMsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUMvQyxRQUFJLENBQUMsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUMvQyxRQUFJLENBQUMsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUMvQyxRQUFJLENBQUMsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUMvQyxRQUFJLENBQUMsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUMvQyxRQUFJLENBQUMsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUMvQyxRQUFJLENBQUMsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUMvQyxRQUFJLENBQUMsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUMvQyxRQUFJLENBQUMsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUMvQyxRQUFJLEVBQUUsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUNoRCxRQUFJLEVBQUUsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUNoRCxRQUFJLEVBQUUsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUNoRCxRQUFJLEVBQUUsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUNoRCxRQUFJLEVBQUUsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUNoRCxRQUFJLEVBQUUsS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUNoRCxXQUFPO0FBQUEsRUFDVDtBQVNPLFdBQVMsUUFBUSxLQUFLLEdBQUc7QUFDOUIsUUFBSSxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQztBQUNiLFFBQUksTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUM7QUFDYixRQUFJLE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFO0FBQ2QsUUFBSSxNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRTtBQUNkLFFBQUksQ0FBQyxJQUFJLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNsRyxRQUFJLENBQUMsSUFBSSxFQUFFLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNwRyxRQUFJLENBQUMsSUFBSSxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDbEcsUUFBSSxDQUFDLElBQUksRUFBRSxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDcEcsUUFBSSxDQUFDLElBQUksRUFBRSxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDcEcsUUFBSSxDQUFDLElBQUksT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ2xHLFFBQUksQ0FBQyxJQUFJLEVBQUUsT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ3BHLFFBQUksQ0FBQyxJQUFJLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNsRyxRQUFJLENBQUMsSUFBSSxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDbEcsUUFBSSxDQUFDLElBQUksRUFBRSxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDcEcsUUFBSSxFQUFFLElBQUksT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ25HLFFBQUksRUFBRSxJQUFJLEVBQUUsT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ3JHLFFBQUksRUFBRSxJQUFJLEVBQUUsT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ3JHLFFBQUksRUFBRSxJQUFJLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNuRyxRQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNyRyxRQUFJLEVBQUUsSUFBSSxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDbkcsV0FBTztBQUFBLEVBQ1Q7QUFRTyxXQUFTLFlBQVksR0FBRztBQUM3QixRQUFJLE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDO0FBQ2IsUUFBSSxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQztBQUNiLFFBQUksTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUU7QUFDZCxRQUFJLE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFO0FBQ2QsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFFNUIsV0FBTyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFBQSxFQUMzRTtBQVVPLFdBQVMsU0FBUyxLQUFLLEdBQUcsR0FBRztBQUNsQyxRQUFJLE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDO0FBQ2IsUUFBSSxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQztBQUNiLFFBQUksTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUU7QUFDZCxRQUFJLE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFO0FBRWQsUUFBSSxLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDL0MsUUFBSSxDQUFDLElBQUksS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSztBQUMvQyxRQUFJLENBQUMsSUFBSSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQy9DLFFBQUksQ0FBQyxJQUFJLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDL0MsU0FBSyxFQUFFLENBQUM7QUFDUixTQUFLLEVBQUUsQ0FBQztBQUNSLFNBQUssRUFBRSxDQUFDO0FBQ1IsU0FBSyxFQUFFLENBQUM7QUFDUixRQUFJLENBQUMsSUFBSSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQy9DLFFBQUksQ0FBQyxJQUFJLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDL0MsUUFBSSxDQUFDLElBQUksS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSztBQUMvQyxRQUFJLENBQUMsSUFBSSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQy9DLFNBQUssRUFBRSxDQUFDO0FBQ1IsU0FBSyxFQUFFLENBQUM7QUFDUixTQUFLLEVBQUUsRUFBRTtBQUNULFNBQUssRUFBRSxFQUFFO0FBQ1QsUUFBSSxDQUFDLElBQUksS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSztBQUMvQyxRQUFJLENBQUMsSUFBSSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQy9DLFFBQUksRUFBRSxJQUFJLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDaEQsUUFBSSxFQUFFLElBQUksS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSztBQUNoRCxTQUFLLEVBQUUsRUFBRTtBQUNULFNBQUssRUFBRSxFQUFFO0FBQ1QsU0FBSyxFQUFFLEVBQUU7QUFDVCxTQUFLLEVBQUUsRUFBRTtBQUNULFFBQUksRUFBRSxJQUFJLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDaEQsUUFBSSxFQUFFLElBQUksS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSztBQUNoRCxRQUFJLEVBQUUsSUFBSSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQ2hELFFBQUksRUFBRSxJQUFJLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDaEQsV0FBTztBQUFBLEVBQ1Q7QUFVTyxXQUFTLFVBQVUsS0FBSyxHQUFHLEdBQUc7QUFDbkMsUUFBSSxJQUFJLEVBQUUsQ0FBQyxHQUNQLElBQUksRUFBRSxDQUFDLEdBQ1AsSUFBSSxFQUFFLENBQUM7QUFDWCxRQUFJLEtBQUssS0FBSyxLQUFLO0FBQ25CLFFBQUksS0FBSyxLQUFLLEtBQUs7QUFDbkIsUUFBSSxLQUFLLEtBQUssS0FBSztBQUVuQixRQUFJLE1BQU0sS0FBSztBQUNiLFVBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsSUFBSSxJQUFJLEVBQUUsRUFBRTtBQUMvQyxVQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDLElBQUksSUFBSSxFQUFFLEVBQUU7QUFDL0MsVUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsSUFBSSxJQUFJLEVBQUUsRUFBRSxJQUFJLElBQUksRUFBRSxFQUFFO0FBQ2hELFVBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDLElBQUksSUFBSSxFQUFFLEVBQUUsSUFBSSxJQUFJLEVBQUUsRUFBRTtBQUFBLElBQ2xELE9BQU87QUFDTCxZQUFNLEVBQUUsQ0FBQztBQUNULFlBQU0sRUFBRSxDQUFDO0FBQ1QsWUFBTSxFQUFFLENBQUM7QUFDVCxZQUFNLEVBQUUsQ0FBQztBQUNULFlBQU0sRUFBRSxDQUFDO0FBQ1QsWUFBTSxFQUFFLENBQUM7QUFDVCxZQUFNLEVBQUUsQ0FBQztBQUNULFlBQU0sRUFBRSxDQUFDO0FBQ1QsWUFBTSxFQUFFLENBQUM7QUFDVCxZQUFNLEVBQUUsQ0FBQztBQUNULFlBQU0sRUFBRSxFQUFFO0FBQ1YsWUFBTSxFQUFFLEVBQUU7QUFDVixVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksQ0FBQyxJQUFJO0FBQ1QsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksQ0FBQyxJQUFJO0FBQ1QsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksQ0FBQyxJQUFJO0FBQ1QsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksRUFBRSxJQUFJO0FBQ1YsVUFBSSxFQUFFLElBQUk7QUFDVixVQUFJLEVBQUUsSUFBSSxNQUFNLElBQUksTUFBTSxJQUFJLE1BQU0sSUFBSSxFQUFFLEVBQUU7QUFDNUMsVUFBSSxFQUFFLElBQUksTUFBTSxJQUFJLE1BQU0sSUFBSSxNQUFNLElBQUksRUFBRSxFQUFFO0FBQzVDLFVBQUksRUFBRSxJQUFJLE1BQU0sSUFBSSxNQUFNLElBQUksTUFBTSxJQUFJLEVBQUUsRUFBRTtBQUM1QyxVQUFJLEVBQUUsSUFBSSxNQUFNLElBQUksTUFBTSxJQUFJLE1BQU0sSUFBSSxFQUFFLEVBQUU7QUFBQSxJQUM5QztBQUVBLFdBQU87QUFBQSxFQUNUO0FBVU8sV0FBUyxNQUFNLEtBQUssR0FBRyxHQUFHO0FBQy9CLFFBQUksSUFBSSxFQUFFLENBQUMsR0FDUCxJQUFJLEVBQUUsQ0FBQyxHQUNQLElBQUksRUFBRSxDQUFDO0FBQ1gsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUk7QUFDbEIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUk7QUFDbEIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsV0FBTztBQUFBLEVBQ1Q7QUFXTyxXQUFTLE9BQU8sS0FBSyxHQUFHLEtBQUssTUFBTTtBQUN4QyxRQUFJLElBQUksS0FBSyxDQUFDLEdBQ1YsSUFBSSxLQUFLLENBQUMsR0FDVixJQUFJLEtBQUssQ0FBQztBQUNkLFFBQUlDLE9BQU0sS0FBSyxNQUFNLEdBQUcsR0FBRyxDQUFDO0FBQzVCLFFBQUksR0FBRyxHQUFHO0FBQ1YsUUFBSSxLQUFLLEtBQUssS0FBSztBQUNuQixRQUFJLEtBQUssS0FBSyxLQUFLO0FBQ25CLFFBQUksS0FBSyxLQUFLLEtBQUs7QUFDbkIsUUFBSSxLQUFLLEtBQUs7QUFDZCxRQUFJLEtBQUssS0FBSztBQUNkLFFBQUksS0FBSyxLQUFLO0FBRWQsUUFBSUEsT0FBZSxTQUFTO0FBQzFCLGFBQU87QUFBQSxJQUNUO0FBRUEsSUFBQUEsT0FBTSxJQUFJQTtBQUNWLFNBQUtBO0FBQ0wsU0FBS0E7QUFDTCxTQUFLQTtBQUNMLFFBQUksS0FBSyxJQUFJLEdBQUc7QUFDaEIsUUFBSSxLQUFLLElBQUksR0FBRztBQUNoQixRQUFJLElBQUk7QUFDUixVQUFNLEVBQUUsQ0FBQztBQUNULFVBQU0sRUFBRSxDQUFDO0FBQ1QsVUFBTSxFQUFFLENBQUM7QUFDVCxVQUFNLEVBQUUsQ0FBQztBQUNULFVBQU0sRUFBRSxDQUFDO0FBQ1QsVUFBTSxFQUFFLENBQUM7QUFDVCxVQUFNLEVBQUUsQ0FBQztBQUNULFVBQU0sRUFBRSxDQUFDO0FBQ1QsVUFBTSxFQUFFLENBQUM7QUFDVCxVQUFNLEVBQUUsQ0FBQztBQUNULFVBQU0sRUFBRSxFQUFFO0FBQ1YsVUFBTSxFQUFFLEVBQUU7QUFFVixVQUFNLElBQUksSUFBSSxJQUFJO0FBQ2xCLFVBQU0sSUFBSSxJQUFJLElBQUksSUFBSTtBQUN0QixVQUFNLElBQUksSUFBSSxJQUFJLElBQUk7QUFDdEIsVUFBTSxJQUFJLElBQUksSUFBSSxJQUFJO0FBQ3RCLFVBQU0sSUFBSSxJQUFJLElBQUk7QUFDbEIsVUFBTSxJQUFJLElBQUksSUFBSSxJQUFJO0FBQ3RCLFVBQU0sSUFBSSxJQUFJLElBQUksSUFBSTtBQUN0QixVQUFNLElBQUksSUFBSSxJQUFJLElBQUk7QUFDdEIsVUFBTSxJQUFJLElBQUksSUFBSTtBQUVsQixRQUFJLENBQUMsSUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDdkMsUUFBSSxDQUFDLElBQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQ3ZDLFFBQUksQ0FBQyxJQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUN2QyxRQUFJLENBQUMsSUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDdkMsUUFBSSxDQUFDLElBQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQ3ZDLFFBQUksQ0FBQyxJQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUN2QyxRQUFJLENBQUMsSUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDdkMsUUFBSSxDQUFDLElBQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQ3ZDLFFBQUksQ0FBQyxJQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUN2QyxRQUFJLENBQUMsSUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDdkMsUUFBSSxFQUFFLElBQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQ3hDLFFBQUksRUFBRSxJQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUV4QyxRQUFJLE1BQU0sS0FBSztBQUViLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUFBLElBQ2hCO0FBRUEsV0FBTztBQUFBLEVBQ1Q7QUFVTyxXQUFTLFFBQVEsS0FBSyxHQUFHLEtBQUs7QUFDbkMsUUFBSSxJQUFJLEtBQUssSUFBSSxHQUFHO0FBQ3BCLFFBQUksSUFBSSxLQUFLLElB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QUM7QUFDYixRQUFJLE1BQU0sRUFBRSxDQUFDO0FBQ2IsUUFBSSxNQUFNLEVBQUUsQ0FBQztBQUNiLFFBQUksTUFBTSxFQUFFLENBQUM7QUFDYixRQUFJLE1BQU0sRUFBRSxDQUFDO0FBQ2IsUUFBSSxNQUFNLEVBQUUsQ0FBQztBQUNiLFFBQUksTUFBTSxFQUFFLENBQUM7QUFFYixRQUFJLE1BQU0sS0FBSztBQUViLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUFBLElBQ2hCO0FBR0EsUUFBSSxDQUFDLElBQUksTUFBTSxJQUFJLE1BQU07QUFDekIsUUFBSSxDQUFDLElBQUksTUFBTSxJQUFJLE1BQU07QUFDekIsUUFBSSxDQUFDLElBQUksTUFBTSxJQUFJLE1BQU07QUFDekIsUUFBSSxDQUFDLElBQUksTUFBTSxJQUFJLE1BQU07QUFDekIsUUFBSSxDQUFDLElBQUksTUFBTSxJQUFJLE1BQU07QUFDekIsUUFBSSxDQUFDLElBQUksTUFBTSxJQUFJLE1BQU07QUFDekIsUUFBSSxDQUFDLElBQUksTUFBTSxJQUFJLE1BQU07QUFDekIsUUFBSSxDQUFDLElBQUksTUFBTSxJQUFJLE1BQU07QUFDekIsV0FBTztBQUFBLEVBQ1Q7QUFhTyxXQUFTLGdCQUFnQixLQUFLLEdBQUc7QUFDdEMsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7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UUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixXQUFPO0FBQUEsRUFDVDtBQWFPLFdBQVMsY0FBYyxLQUFLLEtBQUs7QUFDdEMsUUFBSSxJQUFJLEtBQUssSUFBSSxHQUFHO0FBQ3BCLFFBQUksSUFBSSxLQUFLLElBQUksR0FBRztBQUVwQixRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUksQ0FBQztBQUNWLFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsV0FBTztBQUFBLEVBQ1Q7QUFhTyxXQUFTLGNBQWMsS0FBSyxLQUFLO0FBQ3RDLFFBQUksSUFBSSxLQUFLLElBQUksR0FBRztBQUNwQixRQUFJLElBQUksS0FBSyxJQUFJLEdBQUc7QUFFcEIsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSSxDQUFDO0FBQ1YsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJ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TyxFQUFFLEVBQUUsSUFBSSxPQUFPLEVBQUUsRUFBRSxJQUFJLE9BQU8sRUFBRSxFQUFFLElBQUksT0FBTyxFQUFFLEVBQUUsSUFBSTtBQUFBLEVBQ2xQO0FBUU8sV0FBUyxLQUFLLEdBQUc7QUFDdEIsV0FBTyxLQUFLLE1BQU0sRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUM7QUFBQSxFQUN4SDtBQVVPLFdBQVMsSUFBSSxLQUFLLEdBQUcsR0FBRztBQUM3QixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ3RCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUN0QixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDdEIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ3RCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUN0QixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDdEIsV0FBTztBQUFBLEVBQ1Q7QUFVTyxXQUFTLFNBQVMsS0FBSyxHQUFHLEdBQUc7QUFDbEMsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUN0QixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDdEIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ3RCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUN0QixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDdEIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ3RCLFdBQU87QUFBQSxFQUNUO0FBVU8sV0FBUyxlQUFlLEtBQUssR0FBRyxHQUFHO0FBQ3hDLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJO0FBQ2xCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJO0FBQ2xCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJO0FBQ2xCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJO0FBQ2xCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJO0FBQ2xCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJO0FBQ2xCLFdBQU87QUFBQSxFQUNUO0FBV08sV0FBUyxxQkFBcUIsS0FBSyxHQUFHLEdBQUdDLFFBQU87QUFDckQsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUlBO0FBQ3ZCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJQTtBQUN2QixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSUE7QUFDdkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUlBO0FBQ3ZCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJQTtBQUN2QixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSUE7QUFDdkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUlBO0FBQ3ZCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJQTtBQUN2QixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSUE7QUFDdkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUlBO0FBQ3ZCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJQTtBQUMxQixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSUE7QUFDMUIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUlBO0FBQzFCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJQTtBQUMxQixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSUE7QUFDMUIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUlBO0FBQzFCLFdBQU87QUFBQSxFQUNUO0FBU08sV0FBUyxZQUFZLEdBQUcsR0FBRztBQUNoQyxXQUFPLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRTtBQUFBLEVBQ2hTO0FBU08sV0FBUyxPQUFPLEdBQUcsR0FBRztBQUMzQixRQUFJLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDO0FBQ1osUUFBSSxLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQztBQUNaLFFBQUksS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUU7QUFDZCxRQUFJLE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFO0FBQ2QsUUFBSSxLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQztBQUNaLFFBQUksS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUM7QUFDWixRQUFJLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFO0FBQ2QsUUFBSSxNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRTtBQUNkLFdBQU8sS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLE1BQU0sR0FBRyxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEdBQUcsR0FBRyxLQUFLLElBQUksR0FBRyxDQUFDLEtBQUssS0FBSyxJQUFJLE1BQU0sR0FBRyxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEdBQUcsR0FBRyxLQUFLLElBQUksR0FBRyxDQUFDLEtBQUssS0FBSyxJQUFJLE1BQU0sR0FBRyxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEdBQUcsR0FBRyxLQUFLLElBQUksR0FBRyxDQUFDLEtBQUssS0FBSyxJQUFJLE1BQU0sR0FBRyxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEdBQUcsR0FBRyxLQUFLLElBQUksR0FBRyxDQUFDLEtBQUssS0FBSyxJQUFJLE1BQU0sR0FBRyxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEdBQUcsR0FBRyxLQUFLLElBQUksR0FBRyxDQUFDLEtBQUssS0FBSyxJQUFJLE1BQU0sR0FBRyxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEdBQUcsR0FBRyxLQUFLLElBQUksR0FBRyxDQUFDO0FBQUEsRUFDNTJDO0FBTU8sTUFBSSxNQUFNO0FBTVYsTUFBSSxNQUFNOzs7QUNyM0RqQjtBQUFBO0FBQUEsZUFBQUM7QUFBQSxJQUFBO0FBQUEsaUJBQUFDO0FBQUEsSUFBQTtBQUFBLGdCQUFBQztBQUFBLElBQUEsY0FBQUM7QUFBQSxJQUFBLFdBQUFDO0FBQUEsSUFBQSxj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Q0FBQyxDQUFDO0FBQ3hCLFFBQUksQ0FBQyxJQUFJLEtBQUssTUFBTSxFQUFFLENBQUMsQ0FBQztBQUN4QixRQUFJLENBQUMsSUFBSSxLQUFLLE1BQU0sRUFBRSxDQUFDLENBQUM7QUFDeEIsV0FBTztBQUFBLEVBQ1Q7QUFVTyxXQUFTLElBQUksS0FBSyxHQUFHLEdBQUc7QUFDN0IsUUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO0FBQzVCLFFBQUksQ0FBQyxJQUFJLEtBQUssSUFBSSxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztBQUM1QixRQUFJLENBQUMsSUFBSSxLQUFLLElBQUksRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7QUFDNUIsV0FBTztBQUFBLEVBQ1Q7QUFVTyxXQUFTLElBQUksS0FBSyxHQUFHLEdBQUc7QUFDN0IsUUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO0FBQzVCLFFBQUksQ0FBQyxJQUFJLEtBQUssSUFBSSxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztBQUM1QixRQUFJLENBQUMsSUFBSSxLQUFLLElBQUksRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7QUFDNUIsV0FBTztBQUFBLEVBQ1Q7QUFTTyxXQUFTLE1BQU0sS0FBSyxHQUFHO0FBQzVCLFFBQUksQ0FBQyxJQUFJLEtBQUssTUFBTSxFQUFFLENBQUMsQ0FBQztBQUN4QixRQUFJLENBQUMsSUFBSSxLQUFLLE1BQU0sRUFBRSxDQUFDLENBQUM7QUFDeEIsUUFBSSxDQUFDLElBQUksS0FBSyxNQUFNLEVBQUUsQ0FBQyxDQUFDO0FBQ3hCLFdBQU87QUFBQSxFQUNUO0FBVU8sV0FBU0MsT0FBTSxLQUFLLEdBQUcsR0FBRztBQUMvQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSTtBQUNoQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSTtBQUNoQixRQUFJLENBQUMsSUFBSSxF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Q1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUM1QyxRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO0FBQzVDLFFBQUksQ0FBQyxJQUFJLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUs7QUFDNUMsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUM1QyxXQUFPO0FBQUEsRUFDVDtBQVVPLFdBQVNDLFNBQVEsS0FBSyxHQUFHLEtBQUs7QUFDbkMsV0FBTztBQUNQLFFBQUksS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUM7QUFDWixRQUFJLEtBQUssS0FBSyxJQUFJLEdBQUcsR0FDakIsS0FBSyxLQUFLLElBQUksR0FBRztBQUNyQixRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSztBQUN4QixRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSztBQUN4QixRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSztBQUN4QixRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSztBQUN4QixXQUFPO0FBQUEsRUFDVDtBQVVPLFdBQVNDLFNBQVEsS0FBSyxHQUFHLEtBQUs7QUFDbkMsV0FBTztBQUNQLFFBQUksS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUM7QUFDWixRQUFJLEtBQUssS0FBSyxJQUFJLEdBQUcsR0FDakIsS0FBSyxLQUFLLElBQUksR0FBRztBQUNyQixRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSztBQUN4QixRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUss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Q0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxXQUFPO0FBQUEsRUFDVDtBQWlCTyxXQUFTQyxLQUFJLEtBQUssSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJO0FBQ3ZELFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxXQUFPO0FBQUEsRUFDVDtBQVFPLE1BQUksVUFBZUY7QUFRbkIsV0FBUyxRQUFRLEtBQUssR0FBRztBQUM5QixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixXQUFPO0FBQUEsRUFDVDtBQVVPLE1BQUksVUFBZUE7QUFVbkIsV0FBUyxRQUFRLEtBQUssR0FBRztBQUM5QixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixXQUFPO0FBQUEsRUFDVDtBQVFPLFdBQVNHLGdCQUFlLEtBQUssR0FBRztBQUNyQyxRQUFJLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxDQUFDLEVBQUUsQ0FBQyxHQUNULEtBQUssQ0FBQyxFQUFFLENBQUMsR0FDVCxLQUFLLENBQUMsRUFBRSxDQUFDLEdBQ1QsS0FBSyxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsS0FBSyxLQUFLLEtBQUssS0FB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QUM7QUFDVixTQUFLLElBQUksQ0FBQztBQUNWLFNBQUssSUFBSSxDQUFDO0FBQ1YsU0FBSyxJQUFJLENBQUM7QUFDVixRQUFJLENBQUMsSUFBSSxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNO0FBQ2hELFFBQUksQ0FBQyxJQUFJLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU07QUFDaEQsUUFBSSxDQUFDLElBQUksTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTTtBQUNoRCxRQUFJLENBQUMsSUFBSSxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNO0FBQ2hELFdBQU87QUFBQSxFQUNUO0FBVU8sV0FBUyxtQkFBbUIsS0FBSyxHQUFHLEdBQUc7QUFDNUMsUUFBSSxLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUM1QyxRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO0FBQzVDLFFBQUksQ0FBQyxJQUFJLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUs7QUFDNUMsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUM1QyxTQUFLLEVBQUUsQ0FBQztBQUNSLFNBQUssRUFBRSxDQUFDO0FBQ1IsU0FBSyxFQUFFLENBQUM7QUFDUixTQUFLLEVBQUUsQ0FBQztBQUNSLFFBQUksQ0FBQyxJQUFJLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUs7QUFDNUMsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUM1QyxRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO0FBQzVDLFFBQUksQ0FBQyxJQUFJLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUs7QUFDNUMsV0FBTztBQUFBLEVBQ1Q7QUFVTyxXQUFTLG9CQUFvQixLQUFLLEdBQUcsR0FBRztBQUM3QyxRQUFJLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO0FBQzVDLFFBQUksQ0FBQyxJQUFJLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUs7QUFDNUMsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUM1QyxRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO0FBQzVDLFNBQUssRUFBRSxDQUFDO0FBQ1IsU0FBSyxFQUFFLENBQUM7QUFDUixTQUFLLEVBQUUsQ0FBQztBQUNSLFNBQUssRUFBRSxDQUFDO0FBQ1IsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUM1QyxRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO0FBQzVDLFFBQUksQ0FBQyxJQUFJLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUs7QUFDNUMsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUM1QyxXQUFPO0FBQUEsRUFDVDtBQVdPLFdBQVMsaUJBQWlCLEtBQUssR0FBRyxNQUFNLEtBQUs7QUFFbEQsUUFBSSxLQUFLLElBQUksR0FBRyxJQUFhLFNBQVM7QUFDcEMsYUFBT1AsTUFBSyxLQUFLLENBQUM7QUFBQSxJQUNwQjtBQUVBLFFBQUksYUFBYSxLQUFLLE1BQU0sS0FBSyxDQUFDLEdBQUcsS0FBSyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUM7QUFDckQsVUFBTSxNQUFNO0FBQ1osUUFBSSxJQUFJLEtBQUssSUFBSSxHQUFHO0FBQ3BCLFFBQUksS0FBSyxJQUFJLEtBQUssQ0FBQyxJQUFJO0FBQ3ZCLFFBQUksS0FBSyxJQUFJLEtBQUssQ0FBQyxJQUFJO0FBQ3ZCLFFBQUksS0FBSyxJQUFJLEtBQUssQ0FBQyxJQUFJO0FBQ3ZCLFFBQUksS0FBSyxLQUFLLElBQUksR0FBRztBQUNyQixRQUFJLE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDO0FBQ2IsUUFBSSxDQUFDLElBQUksTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTTtBQUNoRCxRQUFJLENBQUMsSUFBSSxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNO0FBQ2hELFFBQUksQ0FBQyxJQUFJLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU07QUFDaEQsUUFBSSxDQUFDLElBQUksTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTTtBQUNoRCxRQUFJLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUM1QyxRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO0FBQzVDLFFBQUksQ0FBQyxJQUFJLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUs7QUFDNUMsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUM1QyxXQUFPO0FBQUEsRUFDVDtBQVdPLFdBQVNRLEtBQUksS0FBSyxHQUFHLEdBQUc7QUFDN0IsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixXQUFPO0FBQUEsRUFDVDtBQVVPLFdBQVNDLFVBQVMsS0FBSyxHQUFHLEdBQUc7QUFDbEMsUUFBSSxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQztBQUNiLFFBQUksQ0FBQyxJQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDbkQsUUFBSSxDQUFDLElBQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUNuRCxRQUFJLENBQUMsSUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQ25ELFFBQUksQ0FBQyxJQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDbkQsUUFBSSxDQUFDLElBQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDbkcsUUFBSSxDQUFDLElBQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDbkcsUUFBSSxDQUFDLElBQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDbkcsUUFBSSxDQUFDLElBQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDbkcsV0FBTztBQUFBLEVBQ1Q7QUFNTyxNQUFJQyxPQUFNRDtBQVdWLFdBQVNFLE9BQU0sS0FBSyxHQUFHLEdBQUc7QUFDL0IsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUk7QUFDaEIsUUFBSSxDQUFDLElBQUksRUFBRSxD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Q0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUM7QUFDWixRQUFJLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUM7QUFDWixXQUFPLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUss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O0FBQUEsSUFFQSxpQkFBaUIsR0FBRztBQUtoQixRQUFFLGlCQUFpQixVQUFVLEtBQUssVUFBVSxLQUFLLElBQUksQ0FBQztBQUFBLElBQzFEO0FBQUEsSUFFQSxZQUFZO0FBRVIsWUFBTSxnQkFBZ0IsS0FBSyxPQUFPLE1BQU0sVUFBVTtBQUVsRCxvQkFDSyxrQkFBa0IsS0FBSyxPQUFPLGtCQUFrQixDQUFDLEVBQ2pELE1BQU0sQ0FBQyxNQUFNLE1BQU0sSUFBSSxDQUFDLEVBR3hCLFVBQVUsQ0FBQyxHQUFLLE1BQU0sQ0FBRyxDQUFDO0FBRy9CLFlBQU0sT0FBTyxjQUFjLGFBQWEsYUFBYTtBQUNyRCxXQUFLLFdBQVcsS0FBSztBQUNyQixXQUFLLE9BQU8sS0FBSztBQUNqQixXQUFLLFNBQVM7QUFBQSxJQUNsQjtBQUFBLEVBQ0o7QUF2Q0ksZ0JBRFMsbUJBQ0YsWUFBVztBQUNsQixnQkFGUyxtQkFFRixjQUFhO0FBQUE7QUFBQSxJQUVoQixNQUFNLFNBQVMsS0FBSztBQUFBO0FBQUEsSUFFcEIsVUFBVSxTQUFTLFNBQVM7QUFBQSxFQUNoQzs7O0FDYkosa0JBQWdCLFlBQTZCO0FBRTdDLGtCQUFnQiw0QkFBbUY7IiwKICAibmFtZXMiOiBbIkhvd2xlckdsb2JhbCIsICJzZWxmIiwgIkhvd2xlciIsICJlIiwgImkiLCAiSG93bCIsICJzdHIiLCAiU291bmQiLCAibGVuIiwgImVhcmN1dCIsICJlcXVhbHMiLCAibGVuIiwgIlR5cGUiLCAiY3JlYXRlRGVzdHJveWVkUHJveHkiLCAiTG9nVGFnIiwgIkNvbGxpZGVyIiwgIkFsaWdubWVudCIsICJWZXJ0aWNhbEFsaWdubWVudCIsICJUZXh0RWZmZWN0IiwgIlRleHRXcmFwTW9kZSIsICJJbnB1dFR5cGUiLCAiUHJvamVjdGlvblR5cGUiLCAiTGlnaHRUeXBlIiwgIkFuaW1hdGlvblN0YXRlIiwgIlJvb3RNb3Rpb25Nb2RlIiwgIkZvcmNlTW9kZSIsICJDb2xsaXNpb25FdmVudFR5cGUiLCAiU2hhcGUiLCAiTWVzaEF0dHJpYnV0ZSIsICJjcmVhdGVEZXN0cm95ZWRQcm94eSIsICJDb21wb25lbnQiLCAicHJvcGVydHkiLCAib2Zmc2V0IiwgIl9hIiwgImxlbmd0aCIsICJhbmdsZSIsICJMb2NrQXhpcyIsICJNZXNoSW5kZXhUeXBlIiwgIk1lc2hTa2lubmluZ1R5cGUiLCAiY2FudmFzIiwgIk1hdGVyaWFsUGFyYW1UeXBlIiwgIl9hIiwgImNyZWF0ZURlc3Ryb3llZFByb3h5IiwgIlNjZW5lVHlwZSIsICJMb2dMZXZlbCIsICJvZmZzZXQiLCAibGVuZ3RoIiwgIldBU00iLCAidGhyZWFkcyIsICJDb21wb25lbnQiLCAic3RyIiwgInByb3BlcnR5IiwgIm1heCIsICJ0ZW1wUXVhdCIsICJfYSIsICJjcmVhdGUiLCAiY3JlYXRlIiwgImxlbiIsICJzY2FsZSIsICJhZGQiLCAiY2xvbmUiLCAiY29weSIsICJjcmVhdGUiLCAiZG90IiwgImVxdWFscyIsICJleGFjdEVxdWFscyIsICJmcm9tVmFsdWVzIiwgImlkZW50aXR5IiwgImludmVydCIsICJsZW4iLCAibGVuZ3RoIiwgImxlcnAiLCAibXVsIiwgIm11bHRpcGx5IiwgIm5vcm1hbGl6ZSIsICJyYW5kb20iLCAicm90YXRlWCIsICJyb3RhdGVZIiwgInJvdGF0ZVoiLCAic2NhbGUiLCAic2V0IiwgInNxckxlbiIsICJzcXVhcmVkTGVuZ3RoIiwgInN0ciIsICJhZGQiLCAiY2xvbmUiLCAiY29weSIsICJjcmVhdGUiLCAiZXF1YWxzIiwgImV4YWN0RXF1YWxzIiwgImZyb21WYWx1ZXMiLCAibXVsIiwgIm11bHRpcGx5IiwgInJvdGF0ZVgiLCAicm90YXRlWSIsICJyb3RhdGVaIiwgInNjYWxlIiwgInNldCIsICJzdHIiLCAic3ViIiwgInN1YnRyYWN0IiwgImNyZWF0ZSIsICJjbG9uZSIsICJmcm9tVmFsdWVzIiwgImNvcHkiLCAic2V0IiwgImFkZCIsICJzdWJ0cmFjdCIsICJtdWx0aXBseSIsICJzY2FsZSIsICJsZW4iLCAicm90YXRlWCIsICJyb3RhdGVZIiwgInJvdGF0ZVoiLCAic3RyIiwgImV4YWN0RXF1YWxzIiwgImVxdWFscyIsICJzdWIiLCAibXVsIiwgIm9mZnNldCIsICJjcmVhdGUiLCAiY2xvbmUiLCAiZnJvbVZhbHVlcyIsICJjb3B5IiwgInNldCIsICJhZGQiLCAic2NhbGUiLCAibGVuZ3RoIiwgInNxdWFyZWRMZW5ndGgiLCAibm9ybWFsaXplIiwgImxlbiIsICJkb3QiLCAibGVycCIsICJleGFjdEVxdWFscyIsICJlcXVhbHMiLCAiZm9yRWFjaCIsICJjcmVhdGUiLCAib2Zmc2V0IiwgImNyZWF0ZSIsICJpZGVudGl0eSIsICJkb3QiLCAibXVsdGlwbHkiLCAicm90YXRlWCIsICJyb3RhdGVZIiwgInJvdGF0ZVoiLCAic2NhbGUiLCAicmFuZG9tIiwgImludmVydCIsICJzdHIiLCAiY2xvbmUiLCAiZnJvbVZhbHVlcyIsICJjb3B5IiwgInNldCIsICJhZGQiLCAibXVsIiwgImxlcnAiLCAibGVuZ3RoIiwgImxlbiIsICJzcXVhcmVkTGVuZ3RoIiwgInNxckxlbiIsICJub3JtYWxpemUiLCAiZXhhY3RFcXVhbHMiLCAiZXF1YWxzIiwgImFkZCIsICJjbG9uZSIsICJjb25qdWdhdGUiLCAiY29weSIsICJjcmVhdGUiLCAiZG90IiwgImVxdWFscyIsICJleGFjdEVxdWFscyIsICJmcm9tUm90YXRpb24iLCAiZnJvbVJvdGF0aW9uVHJhbnNsYXRpb24iLCAiZnJvbVRyYW5zbGF0aW9uIiwgImZyb21WYWx1ZXMiLCAiZ2V0VHJhbnNsYXRpb24iLCAiaWRlbnRpdHkiLCAiaW52ZXJ0IiwgImxlbiIsICJsZW5ndGgiLCAibGVycCIsICJtdWwiLCAibXVsdGlwbHkiLCAibm9ybWFsaXplIiwgInJvdGF0ZVgiLCAicm90YXRlWSIsICJyb3RhdGVaIiwgInNjYWxlIiwgInNldCIsICJzcXJMZW4iLCAic3F1YXJlZExlbmd0aCIsICJzdHIiLCAidHJhbnNsYXRlIiwgImNyZWF0ZSIsICJjbG9uZSIsICJmcm9tVmFsdWVzIiwgImZyb21Sb3RhdGlvblRyYW5zbGF0aW9uIiwgImZyb21UcmFuc2xhdGlvbiIsICJmcm9tUm90YXRpb24iLCAiY29weSIsICJpZGVudGl0eSIsICJzZXQiLCAiZ2V0VHJhbnNsYXRpb24iLCAidHJhbnNsYXRlIiwgInJvdGF0ZVgiLCAicm90YXRlWSIsICJyb3RhdGVaIiwgImFkZCIsICJtdWx0aXBseSIsICJtdWwiLCAic2NhbGUiLCAiZG90IiwgImxlcnAiLCAiaW52ZXJ0IiwgInNxdWFyZWRMZW5ndGgiLCAiY29uanVnYXRlIiwgImxlbmd0aCIsICJsZW4iLCAic3FyTGVuIiwgIm5vcm1hbGl6ZSIsICJzdHIiLCAiZXhhY3RFcXVhbHMiLCAiZXF1YWxzIiwgIl9fZGVjb3JhdGUiLCAiX19kZWNvcmF0ZSIsICJ0ZW1wVmVjIiwgImNhbnZhcyIsICJkaXN0IiwgIl9fZGVjb3JhdGUiLCAiX19kZWNvcmF0ZSIsICJpbXBvcnRfaG93bGVyIiwgIl9fZGVjb3JhdGUiLCAiY2FudmFzIiwgIl9fZGVjb3JhdGUiLCAiYSIsICJkaXJlY3Rpb24iLCAiX19kZWNvcmF0ZSIsICJ0ZW1wUXVhdCIsICJ0YXJnZXRQb3MiLCAiX19kZWNvcmF0ZSIsICJ0ZW1wVmVjMyIsICJlYXJjdXQiLCAibG9va0F0IiwgIm9mZnNldCIsICJkaXN0IiwgImRvdCIsICJfX2RlY29yYXRlIiwgIm1pbiIsICJtYXgiLCAiX19kZWNvcmF0ZSIsICJwcmV2ZW50RGVmYXVsdCIsICJ0ZW1wVmVjIiwgInRlbXBWZWMzIiwgImNhbnZhcyJdCn0K
