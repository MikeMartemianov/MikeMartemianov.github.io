(() => {
  var __create = Object.create;
  var __defProp = Object.defineProperty;
  var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
  var __getOwnPropNames = Object.getOwnPropertyNames;
  var __getProtoOf = Object.getPrototypeOf;
  var __hasOwnProp = Object.prototype.hasOwnProperty;
  var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
  var __commonJS = (cb, mod) => function __require() {
    return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
  };
  var __export = (target, all) => {
    for (var name in all)
      __defProp(target, name, { get: all[name], enumerable: true });
  };
  var __copyProps = (to, from, except, desc) => {
    if (from && typeof from === "object" || typeof from === "function") {
      for (let key of __getOwnPropNames(from))
        if (!__hasOwnProp.call(to, key) && key !== except)
          __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
    }
    return to;
  };
  var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
    // If the importer is in node compatibility mode or this is not an ESM
    // file that has been converted to a CommonJS file using a Babel-
    // compatible transform (i.e. "__esModule" has not been set), then set
    // "default" to the CommonJS "module.exports" for node compatibility.
    isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
    mod
  ));
  var __publicField = (obj, key, value) => {
    __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);
    return value;
  };
  var __accessCheck = (obj, member, msg) => {
    if (!member.has(obj))
      throw TypeError("Cannot " + msg);
  };
  var __privateGet = (obj, member, getter) => {
    __accessCheck(obj, member, "read from private field");
    return getter ? getter.call(obj) : member.get(obj);
  };
  var __privateAdd = (obj, member, value) => {
    if (member.has(obj))
      throw TypeError("Cannot add the same private member more than once");
    member instanceof WeakSet ? member.add(obj) : member.set(obj, value);
  };
  var __privateMethod = (obj, member, method) => {
    __accessCheck(obj, member, "access private method");
    return method;
  };

  // node_modules/howler/dist/howler.js
  var require_howler = __commonJS({
    "node_modules/howler/dist/howler.js"(exports) {
      (function() {
        "use strict";
        var HowlerGlobal2 = function() {
          this.init();
        };
        HowlerGlobal2.prototype = {
          /**
           * Initialize the global Howler object.
           * @return {Howler}
           */
          init: function() {
            var self2 = this || Howler2;
            self2._counter = 1e3;
            self2._html5AudioPool = [];
            self2.html5PoolSize = 10;
            self2._codecs = {};
            self2._howls = [];
            self2._muted = false;
            self2._volume = 1;
            self2._canPlayEvent = "canplaythrough";
            self2._navigator = typeof window !== "undefined" && window.navigator ? window.navigator : null;
            self2.masterGain = null;
            self2.noAudio = false;
            self2.usingWebAudio = true;
            self2.autoSuspend = true;
            self2.ctx = null;
            self2.autoUnlock = true;
            self2._setup();
            return self2;
          },
          /**
           * Get/set the global volume for all sounds.
           * @param  {Float} vol Volume from 0.0 to 1.0.
           * @return {Howler/Float}     Returns self or current volume.
           */
          volume: function(vol) {
            var self2 = this || Howler2;
            vol = parseFloat(vol);
            if (!self2.ctx) {
              setupAudioContext();
            }
            if (typeof vol !== "undefined" && vol >= 0 && vol <= 1) {
              self2._volume = vol;
              if (self2._muted) {
                return self2;
              }
              if (self2.usingWebAudio) {
                self2.masterGain.gain.setValueAtTime(vol, Howler2.ctx.currentTime);
              }
              for (var i = 0; i < self2._howls.length; i++) {
                if (!self2._howls[i]._webAudio) {
                  var ids = self2._howls[i]._getSoundIds();
                  for (var j = 0; j < ids.length; j++) {
                    var sound = self2._howls[i]._soundById(ids[j]);
                    if (sound && sound._node) {
                      sound._node.volume = sound._volume * vol;
                    }
                  }
                }
              }
              return self2;
            }
            return self2._volume;
          },
          /**
           * Handle muting and unmuting globally.
           * @param  {Boolean} muted Is muted or not.
           */
          mute: function(muted) {
            var self2 = this || Howler2;
            if (!self2.ctx) {
              setupAudioContext();
            }
            self2._muted = muted;
            if (self2.usingWebAudio) {
              self2.masterGain.gain.setValueAtTime(muted ? 0 : self2._volume, Howler2.ctx.currentTime);
            }
            for (var i = 0; i < self2._howls.length; i++) {
              if (!self2._howls[i]._webAudio) {
                var ids = self2._howls[i]._getSoundIds();
                for (var j = 0; j < ids.length; j++) {
                  var sound = self2._howls[i]._soundById(ids[j]);
                  if (sound && sound._node) {
                    sound._node.muted = muted ? true : sound._muted;
                  }
                }
              }
            }
            return self2;
          },
          /**
           * Handle stopping all sounds globally.
           */
          stop: function() {
            var self2 = this || Howler2;
            for (var i = 0; i < self2._howls.length; i++) {
              self2._howls[i].stop();
            }
            return self2;
          },
          /**
           * Unload and destroy all currently loaded Howl objects.
           * @return {Howler}
           */
          unload: function() {
            var self2 = this || Howler2;
            for (var i = self2._howls.length - 1; i >= 0; i--) {
              self2._howls[i].unload();
            }
            if (self2.usingWebAudio && self2.ctx && typeof self2.ctx.close !== "undefined") {
              self2.ctx.close();
              self2.ctx = null;
              setupAudioContext();
            }
            return self2;
          },
          /**
           * Check for codec support of specific extension.
           * @param  {String} ext Audio file extention.
           * @return {Boolean}
           */
          codecs: function(ext) {
            return (this || Howler2)._codecs[ext.replace(/^x-/, "")];
          },
          /**
           * Setup various state values for global tracking.
           * @return {Howler}
           */
          _setup: function() {
            var self2 = this || Howler2;
            self2.state = self2.ctx ? self2.ctx.state || "suspended" : "suspended";
            self2._autoSuspend();
            if (!self2.usingWebAudio) {
              if (typeof Audio !== "undefined") {
                try {
                  var test = new Audio();
                  if (typeof test.oncanplaythrough === "undefined") {
                    self2._canPlayEvent = "canplay";
                  }
                } catch (e) {
                  self2.noAudio = true;
                }
              } else {
                self2.noAudio = true;
              }
            }
            try {
              var test = new Audio();
              if (test.muted) {
                self2.noAudio = true;
              }
            } catch (e) {
            }
            if (!self2.noAudio) {
              self2._setupCodecs();
            }
            return self2;
          },
          /**
           * Check for browser support for various codecs and cache the results.
           * @return {Howler}
           */
          _setupCodecs: function() {
            var self2 = this || Howler2;
            var audioTest = null;
            try {
              audioTest = typeof Audio !== "undefined" ? new Audio() : null;
            } catch (err) {
              return self2;
            }
            if (!audioTest || typeof audioTest.canPlayType !== "function") {
              return self2;
            }
            var mpegTest = audioTest.canPlayType("audio/mpeg;").replace(/^no$/, "");
            var ua = self2._navigator ? self2._navigator.userAgent : "";
            var checkOpera = ua.match(/OPR\/(\d+)/g);
            var isOldOpera = checkOpera && parseInt(checkOpera[0].split("/")[1], 10) < 33;
            var checkSafari = ua.indexOf("Safari") !== -1 && ua.indexOf("Chrome") === -1;
            var safariVersion = ua.match(/Version\/(.*?) /);
            var isOldSafari = checkSafari && safariVersion && parseInt(safariVersion[1], 10) < 15;
            self2._codecs = {
              mp3: !!(!isOldOpera && (mpegTest || audioTest.canPlayType("audio/mp3;").replace(/^no$/, ""))),
              mpeg: !!mpegTest,
              opus: !!audioTest.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/, ""),
              ogg: !!audioTest.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""),
              oga: !!audioTest.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""),
              wav: !!(audioTest.canPlayType('audio/wav; codecs="1"') || audioTest.canPlayType("audio/wav")).replace(/^no$/, ""),
              aac: !!audioTest.canPlayType("audio/aac;").replace(/^no$/, ""),
              caf: !!audioTest.canPlayType("audio/x-caf;").replace(/^no$/, ""),
              m4a: !!(audioTest.canPlayType("audio/x-m4a;") || audioTest.canPlayType("audio/m4a;") || audioTest.canPlayType("audio/aac;")).replace(/^no$/, ""),
              m4b: !!(audioTest.canPlayType("audio/x-m4b;") || audioTest.canPlayType("audio/m4b;") || audioTest.canPlayType("audio/aac;")).replace(/^no$/, ""),
              mp4: !!(audioTest.canPlayType("audio/x-mp4;") || audioTest.canPlayType("audio/mp4;") || audioTest.canPlayType("audio/aac;")).replace(/^no$/, ""),
              weba: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, "")),
              webm: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, "")),
              dolby: !!audioTest.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/, ""),
              flac: !!(audioTest.canPlayType("audio/x-flac;") || audioTest.canPlayType("audio/flac;")).replace(/^no$/, "")
            };
            return self2;
          },
          /**
           * Some browsers/devices will only allow audio to be played after a user interaction.
           * Attempt to automatically unlock audio on the first user interaction.
           * Concept from: http://paulbakaus.com/tutorials/html5/web-audio-on-ios/
           * @return {Howler}
           */
          _unlockAudio: function() {
            var self2 = this || Howler2;
            if (self2._audioUnlocked || !self2.ctx) {
              return;
            }
            self2._audioUnlocked = false;
            self2.autoUnlock = false;
            if (!self2._mobileUnloaded && self2.ctx.sampleRate !== 44100) {
              self2._mobileUnloaded = true;
              self2.unload();
            }
            self2._scratchBuffer = self2.ctx.createBuffer(1, 1, 22050);
            var unlock = function(e) {
              while (self2._html5AudioPool.length < self2.html5PoolSize) {
                try {
                  var audioNode = new Audio();
                  audioNode._unlocked = true;
                  self2._releaseHtml5Audio(audioNode);
                } catch (e2) {
                  self2.noAudio = true;
                  break;
                }
              }
              for (var i = 0; i < self2._howls.length; i++) {
                if (!self2._howls[i]._webAudio) {
                  var ids = self2._howls[i]._getSoundIds();
                  for (var j = 0; j < ids.length; j++) {
                    var sound = self2._howls[i]._soundById(ids[j]);
                    if (sound && sound._node && !sound._node._unlocked) {
                      sound._node._unlocked = true;
                      sound._node.load();
                    }
                  }
                }
              }
              self2._autoResume();
              var source = self2.ctx.createBufferSource();
              source.buffer = self2._scratchBuffer;
              source.connect(self2.ctx.destination);
              if (typeof source.start === "undefined") {
                source.noteOn(0);
              } else {
                source.start(0);
              }
              if (typeof self2.ctx.resume === "function") {
                self2.ctx.resume();
              }
              source.onended = function() {
                source.disconnect(0);
                self2._audioUnlocked = true;
                document.removeEventListener("touchstart", unlock, true);
                document.removeEventListener("touchend", unlock, true);
                document.removeEventListener("click", unlock, true);
                document.removeEventListener("keydown", unlock, true);
                for (var i2 = 0; i2 < self2._howls.length; i2++) {
                  self2._howls[i2]._emit("unlock");
                }
              };
            };
            document.addEventListener("touchstart", unlock, true);
            document.addEventListener("touchend", unlock, true);
            document.addEventListener("click", unlock, true);
            document.addEventListener("keydown", unlock, true);
            return self2;
          },
          /**
           * Get an unlocked HTML5 Audio object from the pool. If none are left,
           * return a new Audio object and throw a warning.
           * @return {Audio} HTML5 Audio object.
           */
          _obtainHtml5Audio: function() {
            var self2 = this || Howler2;
            if (self2._html5AudioPool.length) {
              return self2._html5AudioPool.pop();
            }
            var testPlay = new Audio().play();
            if (testPlay && typeof Promise !== "undefined" && (testPlay instanceof Promise || typeof testPlay.then === "function")) {
              testPlay.catch(function() {
                console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.");
              });
            }
            return new Audio();
          },
          /**
           * Return an activated HTML5 Audio object to the pool.
           * @return {Howler}
           */
          _releaseHtml5Audio: function(audio) {
            var self2 = this || Howler2;
            if (audio._unlocked) {
              self2._html5AudioPool.push(audio);
            }
            return self2;
          },
          /**
           * Automatically suspend the Web Audio AudioContext after no sound has played for 30 seconds.
           * This saves processing/energy and fixes various browser-specific bugs with audio getting stuck.
           * @return {Howler}
           */
          _autoSuspend: function() {
            var self2 = this;
            if (!self2.autoSuspend || !self2.ctx || typeof self2.ctx.suspend === "undefined" || !Howler2.usingWebAudio) {
              return;
            }
            for (var i = 0; i < self2._howls.length; i++) {
              if (self2._howls[i]._webAudio) {
                for (var j = 0; j < self2._howls[i]._sounds.length; j++) {
                  if (!self2._howls[i]._sounds[j]._paused) {
                    return self2;
                  }
                }
              }
            }
            if (self2._suspendTimer) {
              clearTimeout(self2._suspendTimer);
            }
            self2._suspendTimer = setTimeout(function() {
              if (!self2.autoSuspend) {
                return;
              }
              self2._suspendTimer = null;
              self2.state = "suspending";
              var handleSuspension = function() {
                self2.state = "suspended";
                if (self2._resumeAfterSuspend) {
                  delete self2._resumeAfterSuspend;
                  self2._autoResume();
                }
              };
              self2.ctx.suspend().then(handleSuspension, handleSuspension);
            }, 3e4);
            return self2;
          },
          /**
           * Automatically resume the Web Audio AudioContext when a new sound is played.
           * @return {Howler}
           */
          _autoResume: function() {
            var self2 = this;
            if (!self2.ctx || typeof self2.ctx.resume === "undefined" || !Howler2.usingWebAudio) {
              return;
            }
            if (self2.state === "running" && self2.ctx.state !== "interrupted" && self2._suspendTimer) {
              clearTimeout(self2._suspendTimer);
              self2._suspendTimer = null;
            } else if (self2.state === "suspended" || self2.state === "running" && self2.ctx.state === "interrupted") {
              self2.ctx.resume().then(function() {
                self2.state = "running";
                for (var i = 0; i < self2._howls.length; i++) {
                  self2._howls[i]._emit("resume");
                }
              });
              if (self2._suspendTimer) {
                clearTimeout(self2._suspendTimer);
                self2._suspendTimer = null;
              }
            } else if (self2.state === "suspending") {
              self2._resumeAfterSuspend = true;
            }
            return self2;
          }
        };
        var Howler2 = new HowlerGlobal2();
        var Howl2 = function(o) {
          var self2 = this;
          if (!o.src || o.src.length === 0) {
            console.error("An array of source files must be passed with any new Howl.");
            return;
          }
          self2.init(o);
        };
        Howl2.prototype = {
          /**
           * Initialize a new Howl group object.
           * @param  {Object} o Passed in properties for this group.
           * @return {Howl}
           */
          init: function(o) {
            var self2 = this;
            if (!Howler2.ctx) {
              setupAudioContext();
            }
            self2._autoplay = o.autoplay || false;
            self2._format = typeof o.format !== "string" ? o.format : [o.format];
            self2._html5 = o.html5 || false;
            self2._muted = o.mute || false;
            self2._loop = o.loop || false;
            self2._pool = o.pool || 5;
            self2._preload = typeof o.preload === "boolean" || o.preload === "metadata" ? o.preload : true;
            self2._rate = o.rate || 1;
            self2._sprite = o.sprite || {};
            self2._src = typeof o.src !== "string" ? o.src : [o.src];
            self2._volume = o.volume !== void 0 ? o.volume : 1;
            self2._xhr = {
              method: o.xhr && o.xhr.method ? o.xhr.method : "GET",
              headers: o.xhr && o.xhr.headers ? o.xhr.headers : null,
              withCredentials: o.xhr && o.xhr.withCredentials ? o.xhr.withCredentials : false
            };
            self2._duration = 0;
            self2._state = "unloaded";
            self2._sounds = [];
            self2._endTimers = {};
            self2._queue = [];
            self2._playLock = false;
            self2._onend = o.onend ? [{ fn: o.onend }] : [];
            self2._onfade = o.onfade ? [{ fn: o.onfade }] : [];
            self2._onload = o.onload ? [{ fn: o.onload }] : [];
            self2._onloaderror = o.onloaderror ? [{ fn: o.onloaderror }] : [];
            self2._onplayerror = o.onplayerror ? [{ fn: o.onplayerror }] : [];
            self2._onpause = o.onpause ? [{ fn: o.onpause }] : [];
            self2._onplay = o.onplay ? [{ fn: o.onplay }] : [];
            self2._onstop = o.onstop ? [{ fn: o.onstop }] : [];
            self2._onmute = o.onmute ? [{ fn: o.onmute }] : [];
            self2._onvolume = o.onvolume ? [{ fn: o.onvolume }] : [];
            self2._onrate = o.onrate ? [{ fn: o.onrate }] : [];
            self2._onseek = o.onseek ? [{ fn: o.onseek }] : [];
            self2._onunlock = o.onunlock ? [{ fn: o.onunlock }] : [];
            self2._onresume = [];
            self2._webAudio = Howler2.usingWebAudio && !self2._html5;
            if (typeof Howler2.ctx !== "undefined" && Howler2.ctx && Howler2.autoUnlock) {
              Howler2._unlockAudio();
            }
            Howler2._howls.push(self2);
            if (self2._autoplay) {
              self2._queue.push({
                event: "play",
                action: function() {
                  self2.play();
                }
              });
            }
            if (self2._preload && self2._preload !== "none") {
              self2.load();
            }
            return self2;
          },
          /**
           * Load the audio file.
           * @return {Howler}
           */
          load: function() {
            var self2 = this;
            var url = null;
            if (Howler2.noAudio) {
              self2._emit("loaderror", null, "No audio support.");
              return;
            }
            if (typeof self2._src === "string") {
              self2._src = [self2._src];
            }
            for (var i = 0; i < self2._src.length; i++) {
              var ext, str5;
              if (self2._format && self2._format[i]) {
                ext = self2._format[i];
              } else {
                str5 = self2._src[i];
                if (typeof str5 !== "string") {
                  self2._emit("loaderror", null, "Non-string found in selected audio sources - ignoring.");
                  continue;
                }
                ext = /^data:audio\/([^;,]+);/i.exec(str5);
                if (!ext) {
                  ext = /\.([^.]+)$/.exec(str5.split("?", 1)[0]);
                }
                if (ext) {
                  ext = ext[1].toLowerCase();
                }
              }
              if (!ext) {
                console.warn('No file extension was found. Consider using the "format" property or specify an extension.');
              }
              if (ext && Howler2.codecs(ext)) {
                url = self2._src[i];
                break;
              }
            }
            if (!url) {
              self2._emit("loaderror", null, "No codec support for selected audio sources.");
              return;
            }
            self2._src = url;
            self2._state = "loading";
            if (window.location.protocol === "https:" && url.slice(0, 5) === "http:") {
              self2._html5 = true;
              self2._webAudio = false;
            }
            new Sound2(self2);
            if (self2._webAudio) {
              loadBuffer(self2);
            }
            return self2;
          },
          /**
           * Play a sound or resume previous playback.
           * @param  {String/Number} sprite   Sprite name for sprite playback or sound id to continue previous.
           * @param  {Boolean} internal Internal Use: true prevents event firing.
           * @return {Number}          Sound ID.
           */
          play: function(sprite, internal) {
            var self2 = this;
            var id = null;
            if (typeof sprite === "number") {
              id = sprite;
              sprite = null;
            } else if (typeof sprite === "string" && self2._state === "loaded" && !self2._sprite[sprite]) {
              return null;
            } else if (typeof sprite === "undefined") {
              sprite = "__default";
              if (!self2._playLock) {
                var num = 0;
                for (var i = 0; i < self2._sounds.length; i++) {
                  if (self2._sounds[i]._paused && !self2._sounds[i]._ended) {
                    num++;
                    id = self2._sounds[i]._id;
                  }
                }
                if (num === 1) {
                  sprite = null;
                } else {
                  id = null;
                }
              }
            }
            var sound = id ? self2._soundById(id) : self2._inactiveSound();
            if (!sound) {
              return null;
            }
            if (id && !sprite) {
              sprite = sound._sprite || "__default";
            }
            if (self2._state !== "loaded") {
              sound._sprite = sprite;
              sound._ended = false;
              var soundId = sound._id;
              self2._queue.push({
                event: "play",
                action: function() {
                  self2.play(soundId);
                }
              });
              return soundId;
            }
            if (id && !sound._paused) {
              if (!internal) {
                self2._loadQueue("play");
              }
              return sound._id;
            }
            if (self2._webAudio) {
              Howler2._autoResume();
            }
            var seek = Math.max(0, sound._seek > 0 ? sound._seek : self2._sprite[sprite][0] / 1e3);
            var duration = Math.max(0, (self2._sprite[sprite][0] + self2._sprite[sprite][1]) / 1e3 - seek);
            var timeout = duration * 1e3 / Math.abs(sound._rate);
            var start = self2._sprite[sprite][0] / 1e3;
            var stop = (self2._sprite[sprite][0] + self2._sprite[sprite][1]) / 1e3;
            sound._sprite = sprite;
            sound._ended = false;
            var setParams = function() {
              sound._paused = false;
              sound._seek = seek;
              sound._start = start;
              sound._stop = stop;
              sound._loop = !!(sound._loop || self2._sprite[sprite][2]);
            };
            if (seek >= stop) {
              self2._ended(sound);
              return;
            }
            var node = sound._node;
            if (self2._webAudio) {
              var playWebAudio = function() {
                self2._playLock = false;
                setParams();
                self2._refreshBuffer(sound);
                var vol = sound._muted || self2._muted ? 0 : sound._volume;
                node.gain.setValueAtTime(vol, Howler2.ctx.currentTime);
                sound._playStart = Howler2.ctx.currentTime;
                if (typeof node.bufferSource.start === "undefined") {
                  sound._loop ? node.bufferSource.noteGrainOn(0, seek, 86400) : node.bufferSource.noteGrainOn(0, seek, duration);
                } else {
                  sound._loop ? node.bufferSource.start(0, seek, 86400) : node.bufferSource.start(0, seek, duration);
                }
                if (timeout !== Infinity) {
                  self2._endTimers[sound._id] = setTimeout(self2._ended.bind(self2, sound), timeout);
                }
                if (!internal) {
                  setTimeout(function() {
                    self2._emit("play", sound._id);
                    self2._loadQueue();
                  }, 0);
                }
              };
              if (Howler2.state === "running" && Howler2.ctx.state !== "interrupted") {
                playWebAudio();
              } else {
                self2._playLock = true;
                self2.once("resume", playWebAudio);
                self2._clearTimer(sound._id);
              }
            } else {
              var playHtml5 = function() {
                node.currentTime = seek;
                node.muted = sound._muted || self2._muted || Howler2._muted || node.muted;
                node.volume = sound._volume * Howler2.volume();
                node.playbackRate = sound._rate;
                try {
                  var play = node.play();
                  if (play && typeof Promise !== "undefined" && (play instanceof Promise || typeof play.then === "function")) {
                    self2._playLock = true;
                    setParams();
                    play.then(function() {
                      self2._playLock = false;
                      node._unlocked = true;
                      if (!internal) {
                        self2._emit("play", sound._id);
                      } else {
                        self2._loadQueue();
                      }
                    }).catch(function() {
                      self2._playLock = false;
                      self2._emit("playerror", sound._id, "Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");
                      sound._ended = true;
                      sound._paused = true;
                    });
                  } else if (!internal) {
                    self2._playLock = false;
                    setParams();
                    self2._emit("play", sound._id);
                  }
                  node.playbackRate = sound._rate;
                  if (node.paused) {
                    self2._emit("playerror", sound._id, "Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");
                    return;
                  }
                  if (sprite !== "__default" || sound._loop) {
                    self2._endTimers[sound._id] = setTimeout(self2._ended.bind(self2, sound), timeout);
                  } else {
                    self2._endTimers[sound._id] = function() {
                      self2._ended(sound);
                      node.removeEventListener("ended", self2._endTimers[sound._id], false);
                    };
                    node.addEventListener("ended", self2._endTimers[sound._id], false);
                  }
                } catch (err) {
                  self2._emit("playerror", sound._id, err);
                }
              };
              if (node.src === "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA") {
                node.src = self2._src;
                node.load();
              }
              var loadedNoReadyState = window && window.ejecta || !node.readyState && Howler2._navigator.isCocoonJS;
              if (node.readyState >= 3 || loadedNoReadyState) {
                playHtml5();
              } else {
                self2._playLock = true;
                self2._state = "loading";
                var listener = function() {
                  self2._state = "loaded";
                  playHtml5();
                  node.removeEventListener(Howler2._canPlayEvent, listener, false);
                };
                node.addEventListener(Howler2._canPlayEvent, listener, false);
                self2._clearTimer(sound._id);
              }
            }
            return sound._id;
          },
          /**
           * Pause playback and save current position.
           * @param  {Number} id The sound ID (empty to pause all in group).
           * @return {Howl}
           */
          pause: function(id) {
            var self2 = this;
            if (self2._state !== "loaded" || self2._playLock) {
              self2._queue.push({
                event: "pause",
                action: function() {
                  self2.pause(id);
                }
              });
              return self2;
            }
            var ids = self2._getSoundIds(id);
            for (var i = 0; i < ids.length; i++) {
              self2._clearTimer(ids[i]);
              var sound = self2._soundById(ids[i]);
              if (sound && !sound._paused) {
                sound._seek = self2.seek(ids[i]);
                sound._rateSeek = 0;
                sound._paused = true;
                self2._stopFade(ids[i]);
                if (sound._node) {
                  if (self2._webAudio) {
                    if (!sound._node.bufferSource) {
                      continue;
                    }
                    if (typeof sound._node.bufferSource.stop === "undefined") {
                      sound._node.bufferSource.noteOff(0);
                    } else {
                      sound._node.bufferSource.stop(0);
                    }
                    self2._cleanBuffer(sound._node);
                  } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {
                    sound._node.pause();
                  }
                }
              }
              if (!arguments[1]) {
                self2._emit("pause", sound ? sound._id : null);
              }
            }
            return self2;
          },
          /**
           * Stop playback and reset to start.
           * @param  {Number} id The sound ID (empty to stop all in group).
           * @param  {Boolean} internal Internal Use: true prevents event firing.
           * @return {Howl}
           */
          stop: function(id, internal) {
            var self2 = this;
            if (self2._state !== "loaded" || self2._playLock) {
              self2._queue.push({
                event: "stop",
                action: function() {
                  self2.stop(id);
                }
              });
              return self2;
            }
            var ids = self2._getSoundIds(id);
            for (var i = 0; i < ids.length; i++) {
              self2._clearTimer(ids[i]);
              var sound = self2._soundById(ids[i]);
              if (sound) {
                sound._seek = sound._start || 0;
                sound._rateSeek = 0;
                sound._paused = true;
                sound._ended = true;
                self2._stopFade(ids[i]);
                if (sound._node) {
                  if (self2._webAudio) {
                    if (sound._node.bufferSource) {
                      if (typeof sound._node.bufferSource.stop === "undefined") {
                        sound._node.bufferSource.noteOff(0);
                      } else {
                        sound._node.bufferSource.stop(0);
                      }
                      self2._cleanBuffer(sound._node);
                    }
                  } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {
                    sound._node.currentTime = sound._start || 0;
                    sound._node.pause();
                    if (sound._node.duration === Infinity) {
                      self2._clearSound(sound._node);
                    }
                  }
                }
                if (!internal) {
                  self2._emit("stop", sound._id);
                }
              }
            }
            return self2;
          },
          /**
           * Mute/unmute a single sound or all sounds in this Howl group.
           * @param  {Boolean} muted Set to true to mute and false to unmute.
           * @param  {Number} id    The sound ID to update (omit to mute/unmute all).
           * @return {Howl}
           */
          mute: function(muted, id) {
            var self2 = this;
            if (self2._state !== "loaded" || self2._playLock) {
              self2._queue.push({
                event: "mute",
                action: function() {
                  self2.mute(muted, id);
                }
              });
              return self2;
            }
            if (typeof id === "undefined") {
              if (typeof muted === "boolean") {
                self2._muted = muted;
              } else {
                return self2._muted;
              }
            }
            var ids = self2._getSoundIds(id);
            for (var i = 0; i < ids.length; i++) {
              var sound = self2._soundById(ids[i]);
              if (sound) {
                sound._muted = muted;
                if (sound._interval) {
                  self2._stopFade(sound._id);
                }
                if (self2._webAudio && sound._node) {
                  sound._node.gain.setValueAtTime(muted ? 0 : sound._volume, Howler2.ctx.currentTime);
                } else if (sound._node) {
                  sound._node.muted = Howler2._muted ? true : muted;
                }
                self2._emit("mute", sound._id);
              }
            }
            return self2;
          },
          /**
           * Get/set the volume of this sound or of the Howl group. This method can optionally take 0, 1 or 2 arguments.
           *   volume() -> Returns the group's volume value.
           *   volume(id) -> Returns the sound id's current volume.
           *   volume(vol) -> Sets the volume of all sounds in this Howl group.
           *   volume(vol, id) -> Sets the volume of passed sound id.
           * @return {Howl/Number} Returns self or current volume.
           */
          volume: function() {
            var self2 = this;
            var args = arguments;
            var vol, id;
            if (args.length === 0) {
              return self2._volume;
            } else if (args.length === 1 || args.length === 2 && typeof args[1] === "undefined") {
              var ids = self2._getSoundIds();
              var index = ids.indexOf(args[0]);
              if (index >= 0) {
                id = parseInt(args[0], 10);
              } else {
                vol = parseFloat(args[0]);
              }
            } else if (args.length >= 2) {
              vol = parseFloat(args[0]);
              id = parseInt(args[1], 10);
            }
            var sound;
            if (typeof vol !== "undefined" && vol >= 0 && vol <= 1) {
              if (self2._state !== "loaded" || self2._playLock) {
                self2._queue.push({
                  event: "volume",
                  action: function() {
                    self2.volume.apply(self2, args);
                  }
                });
                return self2;
              }
              if (typeof id === "undefined") {
                self2._volume = vol;
              }
              id = self2._getSoundIds(id);
              for (var i = 0; i < id.length; i++) {
                sound = self2._soundById(id[i]);
                if (sound) {
                  sound._volume = vol;
                  if (!args[2]) {
                    self2._stopFade(id[i]);
                  }
                  if (self2._webAudio && sound._node && !sound._muted) {
                    sound._node.gain.setValueAtTime(vol, Howler2.ctx.currentTime);
                  } else if (sound._node && !sound._muted) {
                    sound._node.volume = vol * Howler2.volume();
                  }
                  self2._emit("volume", sound._id);
                }
              }
            } else {
              sound = id ? self2._soundById(id) : self2._sounds[0];
              return sound ? sound._volume : 0;
            }
            return self2;
          },
          /**
           * Fade a currently playing sound between two volumes (if no id is passed, all sounds will fade).
           * @param  {Number} from The value to fade from (0.0 to 1.0).
           * @param  {Number} to   The volume to fade to (0.0 to 1.0).
           * @param  {Number} len  Time in milliseconds to fade.
           * @param  {Number} id   The sound id (omit to fade all sounds).
           * @return {Howl}
           */
          fade: function(from, to, len4, id) {
            var self2 = this;
            if (self2._state !== "loaded" || self2._playLock) {
              self2._queue.push({
                event: "fade",
                action: function() {
                  self2.fade(from, to, len4, id);
                }
              });
              return self2;
            }
            from = Math.min(Math.max(0, parseFloat(from)), 1);
            to = Math.min(Math.max(0, parseFloat(to)), 1);
            len4 = parseFloat(len4);
            self2.volume(from, id);
            var ids = self2._getSoundIds(id);
            for (var i = 0; i < ids.length; i++) {
              var sound = self2._soundById(ids[i]);
              if (sound) {
                if (!id) {
                  self2._stopFade(ids[i]);
                }
                if (self2._webAudio && !sound._muted) {
                  var currentTime = Howler2.ctx.currentTime;
                  var end = currentTime + len4 / 1e3;
                  sound._volume = from;
                  sound._node.gain.setValueAtTime(from, currentTime);
                  sound._node.gain.linearRampToValueAtTime(to, end);
                }
                self2._startFadeInterval(sound, from, to, len4, ids[i], typeof id === "undefined");
              }
            }
            return self2;
          },
          /**
           * Starts the internal interval to fade a sound.
           * @param  {Object} sound Reference to sound to fade.
           * @param  {Number} from The value to fade from (0.0 to 1.0).
           * @param  {Number} to   The volume to fade to (0.0 to 1.0).
           * @param  {Number} len  Time in milliseconds to fade.
           * @param  {Number} id   The sound id to fade.
           * @param  {Boolean} isGroup   If true, set the volume on the group.
           */
          _startFadeInterval: function(sound, from, to, len4, id, isGroup) {
            var self2 = this;
            var vol = from;
            var diff = to - from;
            var steps = Math.abs(diff / 0.01);
            var stepLen = Math.max(4, steps > 0 ? len4 / steps : len4);
            var lastTick = Date.now();
            sound._fadeTo = to;
            sound._interval = setInterval(function() {
              var tick = (Date.now() - lastTick) / len4;
              lastTick = Date.now();
              vol += diff * tick;
              vol = Math.round(vol * 100) / 100;
              if (diff < 0) {
                vol = Math.max(to, vol);
              } else {
                vol = Math.min(to, vol);
              }
              if (self2._webAudio) {
                sound._volume = vol;
              } else {
                self2.volume(vol, sound._id, true);
              }
              if (isGroup) {
                self2._volume = vol;
              }
              if (to < from && vol <= to || to > from && vol >= to) {
                clearInterval(sound._interval);
                sound._interval = null;
                sound._fadeTo = null;
                self2.volume(to, sound._id);
                self2._emit("fade", sound._id);
              }
            }, stepLen);
          },
          /**
           * Internal method that stops the currently playing fade when
           * a new fade starts, volume is changed or the sound is stopped.
           * @param  {Number} id The sound id.
           * @return {Howl}
           */
          _stopFade: function(id) {
            var self2 = this;
            var sound = self2._soundById(id);
            if (sound && sound._interval) {
              if (self2._webAudio) {
                sound._node.gain.cancelScheduledValues(Howler2.ctx.currentTime);
              }
              clearInterval(sound._interval);
              sound._interval = null;
              self2.volume(sound._fadeTo, id);
              sound._fadeTo = null;
              self2._emit("fade", id);
            }
            return self2;
          },
          /**
           * Get/set the loop parameter on a sound. This method can optionally take 0, 1 or 2 arguments.
           *   loop() -> Returns the group's loop value.
           *   loop(id) -> Returns the sound id's loop value.
           *   loop(loop) -> Sets the loop value for all sounds in this Howl group.
           *   loop(loop, id) -> Sets the loop value of passed sound id.
           * @return {Howl/Boolean} Returns self or current loop value.
           */
          loop: function() {
            var self2 = this;
            var args = arguments;
            var loop, id, sound;
            if (args.length === 0) {
              return self2._loop;
            } else if (args.length === 1) {
              if (typeof args[0] === "boolean") {
                loop = args[0];
                self2._loop = loop;
              } else {
                sound = self2._soundById(parseInt(args[0], 10));
                return sound ? sound._loop : false;
              }
            } else if (args.length === 2) {
              loop = args[0];
              id = parseInt(args[1], 10);
            }
            var ids = self2._getSoundIds(id);
            for (var i = 0; i < ids.length; i++) {
              sound = self2._soundById(ids[i]);
              if (sound) {
                sound._loop = loop;
                if (self2._webAudio && sound._node && sound._node.bufferSource) {
                  sound._node.bufferSource.loop = loop;
                  if (loop) {
                    sound._node.bufferSource.loopStart = sound._start || 0;
                    sound._node.bufferSource.loopEnd = sound._stop;
                    if (self2.playing(ids[i])) {
                      self2.pause(ids[i], true);
                      self2.play(ids[i], true);
                    }
                  }
                }
              }
            }
            return self2;
          },
          /**
           * Get/set the playback rate of a sound. This method can optionally take 0, 1 or 2 arguments.
           *   rate() -> Returns the first sound node's current playback rate.
           *   rate(id) -> Returns the sound id's current playback rate.
           *   rate(rate) -> Sets the playback rate of all sounds in this Howl group.
           *   rate(rate, id) -> Sets the playback rate of passed sound id.
           * @return {Howl/Number} Returns self or the current playback rate.
           */
          rate: function() {
            var self2 = this;
            var args = arguments;
            var rate, id;
            if (args.length === 0) {
              id = self2._sounds[0]._id;
            } else if (args.length === 1) {
              var ids = self2._getSoundIds();
              var index = ids.indexOf(args[0]);
              if (index >= 0) {
                id = parseInt(args[0], 10);
              } else {
                rate = parseFloat(args[0]);
              }
            } else if (args.length === 2) {
              rate = parseFloat(args[0]);
              id = parseInt(args[1], 10);
            }
            var sound;
            if (typeof rate === "number") {
              if (self2._state !== "loaded" || self2._playLock) {
                self2._queue.push({
                  event: "rate",
                  action: function() {
                    self2.rate.apply(self2, args);
                  }
                });
                return self2;
              }
              if (typeof id === "undefined") {
                self2._rate = rate;
              }
              id = self2._getSoundIds(id);
              for (var i = 0; i < id.length; i++) {
                sound = self2._soundById(id[i]);
                if (sound) {
                  if (self2.playing(id[i])) {
                    sound._rateSeek = self2.seek(id[i]);
                    sound._playStart = self2._webAudio ? Howler2.ctx.currentTime : sound._playStart;
                  }
                  sound._rate = rate;
                  if (self2._webAudio && sound._node && sound._node.bufferSource) {
                    sound._node.bufferSource.playbackRate.setValueAtTime(rate, Howler2.ctx.currentTime);
                  } else if (sound._node) {
                    sound._node.playbackRate = rate;
                  }
                  var seek = self2.seek(id[i]);
                  var duration = (self2._sprite[sound._sprite][0] + self2._sprite[sound._sprite][1]) / 1e3 - seek;
                  var timeout = duration * 1e3 / Math.abs(sound._rate);
                  if (self2._endTimers[id[i]] || !sound._paused) {
                    self2._clearTimer(id[i]);
                    self2._endTimers[id[i]] = setTimeout(self2._ended.bind(self2, sound), timeout);
                  }
                  self2._emit("rate", sound._id);
                }
              }
            } else {
              sound = self2._soundById(id);
              return sound ? sound._rate : self2._rate;
            }
            return self2;
          },
          /**
           * Get/set the seek position of a sound. This method can optionally take 0, 1 or 2 arguments.
           *   seek() -> Returns the first sound node's current seek position.
           *   seek(id) -> Returns the sound id's current seek position.
           *   seek(seek) -> Sets the seek position of the first sound node.
           *   seek(seek, id) -> Sets the seek position of passed sound id.
           * @return {Howl/Number} Returns self or the current seek position.
           */
          seek: function() {
            var self2 = this;
            var args = arguments;
            var seek, id;
            if (args.length === 0) {
              if (self2._sounds.length) {
                id = self2._sounds[0]._id;
              }
            } else if (args.length === 1) {
              var ids = self2._getSoundIds();
              var index = ids.indexOf(args[0]);
              if (index >= 0) {
                id = parseInt(args[0], 10);
              } else if (self2._sounds.length) {
                id = self2._sounds[0]._id;
                seek = parseFloat(args[0]);
              }
            } else if (args.length === 2) {
              seek = parseFloat(args[0]);
              id = parseInt(args[1], 10);
            }
            if (typeof id === "undefined") {
              return 0;
            }
            if (typeof seek === "number" && (self2._state !== "loaded" || self2._playLock)) {
              self2._queue.push({
                event: "seek",
                action: function() {
                  self2.seek.apply(self2, args);
                }
              });
              return self2;
            }
            var sound = self2._soundById(id);
            if (sound) {
              if (typeof seek === "number" && seek >= 0) {
                var playing = self2.playing(id);
                if (playing) {
                  self2.pause(id, true);
                }
                sound._seek = seek;
                sound._ended = false;
                self2._clearTimer(id);
                if (!self2._webAudio && sound._node && !isNaN(sound._node.duration)) {
                  sound._node.currentTime = seek;
                }
                var seekAndEmit = function() {
                  if (playing) {
                    self2.play(id, true);
                  }
                  self2._emit("seek", id);
                };
                if (playing && !self2._webAudio) {
                  var emitSeek = function() {
                    if (!self2._playLock) {
                      seekAndEmit();
                    } else {
                      setTimeout(emitSeek, 0);
                    }
                  };
                  setTimeout(emitSeek, 0);
                } else {
                  seekAndEmit();
                }
              } else {
                if (self2._webAudio) {
                  var realTime = self2.playing(id) ? Howler2.ctx.currentTime - sound._playStart : 0;
                  var rateSeek = sound._rateSeek ? sound._rateSeek - sound._seek : 0;
                  return sound._seek + (rateSeek + realTime * Math.abs(sound._rate));
                } else {
                  return sound._node.currentTime;
                }
              }
            }
            return self2;
          },
          /**
           * Check if a specific sound is currently playing or not (if id is provided), or check if at least one of the sounds in the group is playing or not.
           * @param  {Number}  id The sound id to check. If none is passed, the whole sound group is checked.
           * @return {Boolean} True if playing and false if not.
           */
          playing: function(id) {
            var self2 = this;
            if (typeof id === "number") {
              var sound = self2._soundById(id);
              return sound ? !sound._paused : false;
            }
            for (var i = 0; i < self2._sounds.length; i++) {
              if (!self2._sounds[i]._paused) {
                return true;
              }
            }
            return false;
          },
          /**
           * Get the duration of this sound. Passing a sound id will return the sprite duration.
           * @param  {Number} id The sound id to check. If none is passed, return full source duration.
           * @return {Number} Audio duration in seconds.
           */
          duration: function(id) {
            var self2 = this;
            var duration = self2._duration;
            var sound = self2._soundById(id);
            if (sound) {
              duration = self2._sprite[sound._sprite][1] / 1e3;
            }
            return duration;
          },
          /**
           * Returns the current loaded state of this Howl.
           * @return {String} 'unloaded', 'loading', 'loaded'
           */
          state: function() {
            return this._state;
          },
          /**
           * Unload and destroy the current Howl object.
           * This will immediately stop all sound instances attached to this group.
           */
          unload: function() {
            var self2 = this;
            var sounds = self2._sounds;
            for (var i = 0; i < sounds.length; i++) {
              if (!sounds[i]._paused) {
                self2.stop(sounds[i]._id);
              }
              if (!self2._webAudio) {
                self2._clearSound(sounds[i]._node);
                sounds[i]._node.removeEventListener("error", sounds[i]._errorFn, false);
                sounds[i]._node.removeEventListener(Howler2._canPlayEvent, sounds[i]._loadFn, false);
                sounds[i]._node.removeEventListener("ended", sounds[i]._endFn, false);
                Howler2._releaseHtml5Audio(sounds[i]._node);
              }
              delete sounds[i]._node;
              self2._clearTimer(sounds[i]._id);
            }
            var index = Howler2._howls.indexOf(self2);
            if (index >= 0) {
              Howler2._howls.splice(index, 1);
            }
            var remCache = true;
            for (i = 0; i < Howler2._howls.length; i++) {
              if (Howler2._howls[i]._src === self2._src || self2._src.indexOf(Howler2._howls[i]._src) >= 0) {
                remCache = false;
                break;
              }
            }
            if (cache && remCache) {
              delete cache[self2._src];
            }
            Howler2.noAudio = false;
            self2._state = "unloaded";
            self2._sounds = [];
            self2 = null;
            return null;
          },
          /**
           * Listen to a custom event.
           * @param  {String}   event Event name.
           * @param  {Function} fn    Listener to call.
           * @param  {Number}   id    (optional) Only listen to events for this sound.
           * @param  {Number}   once  (INTERNAL) Marks event to fire only once.
           * @return {Howl}
           */
          on: function(event, fn, id, once) {
            var self2 = this;
            var events = self2["_on" + event];
            if (typeof fn === "function") {
              events.push(once ? { id, fn, once } : { id, fn });
            }
            return self2;
          },
          /**
           * Remove a custom event. Call without parameters to remove all events.
           * @param  {String}   event Event name.
           * @param  {Function} fn    Listener to remove. Leave empty to remove all.
           * @param  {Number}   id    (optional) Only remove events for this sound.
           * @return {Howl}
           */
          off: function(event, fn, id) {
            var self2 = this;
            var events = self2["_on" + event];
            var i = 0;
            if (typeof fn === "number") {
              id = fn;
              fn = null;
            }
            if (fn || id) {
              for (i = 0; i < events.length; i++) {
                var isId = id === events[i].id;
                if (fn === events[i].fn && isId || !fn && isId) {
                  events.splice(i, 1);
                  break;
                }
              }
            } else if (event) {
              self2["_on" + event] = [];
            } else {
              var keys = Object.keys(self2);
              for (i = 0; i < keys.length; i++) {
                if (keys[i].indexOf("_on") === 0 && Array.isArray(self2[keys[i]])) {
                  self2[keys[i]] = [];
                }
              }
            }
            return self2;
          },
          /**
           * Listen to a custom event and remove it once fired.
           * @param  {String}   event Event name.
           * @param  {Function} fn    Listener to call.
           * @param  {Number}   id    (optional) Only listen to events for this sound.
           * @return {Howl}
           */
          once: function(event, fn, id) {
            var self2 = this;
            self2.on(event, fn, id, 1);
            return self2;
          },
          /**
           * Emit all events of a specific type and pass the sound id.
           * @param  {String} event Event name.
           * @param  {Number} id    Sound ID.
           * @param  {Number} msg   Message to go with event.
           * @return {Howl}
           */
          _emit: function(event, id, msg) {
            var self2 = this;
            var events = self2["_on" + event];
            for (var i = events.length - 1; i >= 0; i--) {
              if (!events[i].id || events[i].id === id || event === "load") {
                setTimeout(function(fn) {
                  fn.call(this, id, msg);
                }.bind(self2, events[i].fn), 0);
                if (events[i].once) {
                  self2.off(event, events[i].fn, events[i].id);
                }
              }
            }
            self2._loadQueue(event);
            return self2;
          },
          /**
           * Queue of actions initiated before the sound has loaded.
           * These will be called in sequence, with the next only firing
           * after the previous has finished executing (even if async like play).
           * @return {Howl}
           */
          _loadQueue: function(event) {
            var self2 = this;
            if (self2._queue.length > 0) {
              var task = self2._queue[0];
              if (task.event === event) {
                self2._queue.shift();
                self2._loadQueue();
              }
              if (!event) {
                task.action();
              }
            }
            return self2;
          },
          /**
           * Fired when playback ends at the end of the duration.
           * @param  {Sound} sound The sound object to work with.
           * @return {Howl}
           */
          _ended: function(sound) {
            var self2 = this;
            var sprite = sound._sprite;
            if (!self2._webAudio && sound._node && !sound._node.paused && !sound._node.ended && sound._node.currentTime < sound._stop) {
              setTimeout(self2._ended.bind(self2, sound), 100);
              return self2;
            }
            var loop = !!(sound._loop || self2._sprite[sprite][2]);
            self2._emit("end", sound._id);
            if (!self2._webAudio && loop) {
              self2.stop(sound._id, true).play(sound._id);
            }
            if (self2._webAudio && loop) {
              self2._emit("play", sound._id);
              sound._seek = sound._start || 0;
              sound._rateSeek = 0;
              sound._playStart = Howler2.ctx.currentTime;
              var timeout = (sound._stop - sound._start) * 1e3 / Math.abs(sound._rate);
              self2._endTimers[sound._id] = setTimeout(self2._ended.bind(self2, sound), timeout);
            }
            if (self2._webAudio && !loop) {
              sound._paused = true;
              sound._ended = true;
              sound._seek = sound._start || 0;
              sound._rateSeek = 0;
              self2._clearTimer(sound._id);
              self2._cleanBuffer(sound._node);
              Howler2._autoSuspend();
            }
            if (!self2._webAudio && !loop) {
              self2.stop(sound._id, true);
            }
            return self2;
          },
          /**
           * Clear the end timer for a sound playback.
           * @param  {Number} id The sound ID.
           * @return {Howl}
           */
          _clearTimer: function(id) {
            var self2 = this;
            if (self2._endTimers[id]) {
              if (typeof self2._endTimers[id] !== "function") {
                clearTimeout(self2._endTimers[id]);
              } else {
                var sound = self2._soundById(id);
                if (sound && sound._node) {
                  sound._node.removeEventListener("ended", self2._endTimers[id], false);
                }
              }
              delete self2._endTimers[id];
            }
            return self2;
          },
          /**
           * Return the sound identified by this ID, or return null.
           * @param  {Number} id Sound ID
           * @return {Object}    Sound object or null.
           */
          _soundById: function(id) {
            var self2 = this;
            for (var i = 0; i < self2._sounds.length; i++) {
              if (id === self2._sounds[i]._id) {
                return self2._sounds[i];
              }
            }
            return null;
          },
          /**
           * Return an inactive sound from the pool or create a new one.
           * @return {Sound} Sound playback object.
           */
          _inactiveSound: function() {
            var self2 = this;
            self2._drain();
            for (var i = 0; i < self2._sounds.length; i++) {
              if (self2._sounds[i]._ended) {
                return self2._sounds[i].reset();
              }
            }
            return new Sound2(self2);
          },
          /**
           * Drain excess inactive sounds from the pool.
           */
          _drain: function() {
            var self2 = this;
            var limit = self2._pool;
            var cnt = 0;
            var i = 0;
            if (self2._sounds.length < limit) {
              return;
            }
            for (i = 0; i < self2._sounds.length; i++) {
              if (self2._sounds[i]._ended) {
                cnt++;
              }
            }
            for (i = self2._sounds.length - 1; i >= 0; i--) {
              if (cnt <= limit) {
                return;
              }
              if (self2._sounds[i]._ended) {
                if (self2._webAudio && self2._sounds[i]._node) {
                  self2._sounds[i]._node.disconnect(0);
                }
                self2._sounds.splice(i, 1);
                cnt--;
              }
            }
          },
          /**
           * Get all ID's from the sounds pool.
           * @param  {Number} id Only return one ID if one is passed.
           * @return {Array}    Array of IDs.
           */
          _getSoundIds: function(id) {
            var self2 = this;
            if (typeof id === "undefined") {
              var ids = [];
              for (var i = 0; i < self2._sounds.length; i++) {
                ids.push(self2._sounds[i]._id);
              }
              return ids;
            } else {
              return [id];
            }
          },
          /**
           * Load the sound back into the buffer source.
           * @param  {Sound} sound The sound object to work with.
           * @return {Howl}
           */
          _refreshBuffer: function(sound) {
            var self2 = this;
            sound._node.bufferSource = Howler2.ctx.createBufferSource();
            sound._node.bufferSource.buffer = cache[self2._src];
            if (sound._panner) {
              sound._node.bufferSource.connect(sound._panner);
            } else {
              sound._node.bufferSource.connect(sound._node);
            }
            sound._node.bufferSource.loop = sound._loop;
            if (sound._loop) {
              sound._node.bufferSource.loopStart = sound._start || 0;
              sound._node.bufferSource.loopEnd = sound._stop || 0;
            }
            sound._node.bufferSource.playbackRate.setValueAtTime(sound._rate, Howler2.ctx.currentTime);
            return self2;
          },
          /**
           * Prevent memory leaks by cleaning up the buffer source after playback.
           * @param  {Object} node Sound's audio node containing the buffer source.
           * @return {Howl}
           */
          _cleanBuffer: function(node) {
            var self2 = this;
            var isIOS = Howler2._navigator && Howler2._navigator.vendor.indexOf("Apple") >= 0;
            if (!node.bufferSource) {
              return self2;
            }
            if (Howler2._scratchBuffer && node.bufferSource) {
              node.bufferSource.onended = null;
              node.bufferSource.disconnect(0);
              if (isIOS) {
                try {
                  node.bufferSource.buffer = Howler2._scratchBuffer;
                } catch (e) {
                }
              }
            }
            node.bufferSource = null;
            return self2;
          },
          /**
           * Set the source to a 0-second silence to stop any downloading (except in IE).
           * @param  {Object} node Audio node to clear.
           */
          _clearSound: function(node) {
            var checkIE = /MSIE |Trident\//.test(Howler2._navigator && Howler2._navigator.userAgent);
            if (!checkIE) {
              node.src = "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA";
            }
          }
        };
        var Sound2 = function(howl) {
          this._parent = howl;
          this.init();
        };
        Sound2.prototype = {
          /**
           * Initialize a new Sound object.
           * @return {Sound}
           */
          init: function() {
            var self2 = this;
            var parent = self2._parent;
            self2._muted = parent._muted;
            self2._loop = parent._loop;
            self2._volume = parent._volume;
            self2._rate = parent._rate;
            self2._seek = 0;
            self2._paused = true;
            self2._ended = true;
            self2._sprite = "__default";
            self2._id = ++Howler2._counter;
            parent._sounds.push(self2);
            self2.create();
            return self2;
          },
          /**
           * Create and setup a new sound object, whether HTML5 Audio or Web Audio.
           * @return {Sound}
           */
          create: function() {
            var self2 = this;
            var parent = self2._parent;
            var volume = Howler2._muted || self2._muted || self2._parent._muted ? 0 : self2._volume;
            if (parent._webAudio) {
              self2._node = typeof Howler2.ctx.createGain === "undefined" ? Howler2.ctx.createGainNode() : Howler2.ctx.createGain();
              self2._node.gain.setValueAtTime(volume, Howler2.ctx.currentTime);
              self2._node.paused = true;
              self2._node.connect(Howler2.masterGain);
            } else if (!Howler2.noAudio) {
              self2._node = Howler2._obtainHtml5Audio();
              self2._errorFn = self2._errorListener.bind(self2);
              self2._node.addEventListener("error", self2._errorFn, false);
              self2._loadFn = self2._loadListener.bind(self2);
              self2._node.addEventListener(Howler2._canPlayEvent, self2._loadFn, false);
              self2._endFn = self2._endListener.bind(self2);
              self2._node.addEventListener("ended", self2._endFn, false);
              self2._node.src = parent._src;
              self2._node.preload = parent._preload === true ? "auto" : parent._preload;
              self2._node.volume = volume * Howler2.volume();
              self2._node.load();
            }
            return self2;
          },
          /**
           * Reset the parameters of this sound to the original state (for recycle).
           * @return {Sound}
           */
          reset: function() {
            var self2 = this;
            var parent = self2._parent;
            self2._muted = parent._muted;
            self2._loop = parent._loop;
            self2._volume = parent._volume;
            self2._rate = parent._rate;
            self2._seek = 0;
            self2._rateSeek = 0;
            self2._paused = true;
            self2._ended = true;
            self2._sprite = "__default";
            self2._id = ++Howler2._counter;
            return self2;
          },
          /**
           * HTML5 Audio error listener callback.
           */
          _errorListener: function() {
            var self2 = this;
            self2._parent._emit("loaderror", self2._id, self2._node.error ? self2._node.error.code : 0);
            self2._node.removeEventListener("error", self2._errorFn, false);
          },
          /**
           * HTML5 Audio canplaythrough listener callback.
           */
          _loadListener: function() {
            var self2 = this;
            var parent = self2._parent;
            parent._duration = Math.ceil(self2._node.duration * 10) / 10;
            if (Object.keys(parent._sprite).length === 0) {
              parent._sprite = { __default: [0, parent._duration * 1e3] };
            }
            if (parent._state !== "loaded") {
              parent._state = "loaded";
              parent._emit("load");
              parent._loadQueue();
            }
            self2._node.removeEventListener(Howler2._canPlayEvent, self2._loadFn, false);
          },
          /**
           * HTML5 Audio ended listener callback.
           */
          _endListener: function() {
            var self2 = this;
            var parent = self2._parent;
            if (parent._duration === Infinity) {
              parent._duration = Math.ceil(self2._node.duration * 10) / 10;
              if (parent._sprite.__default[1] === Infinity) {
                parent._sprite.__default[1] = parent._duration * 1e3;
              }
              parent._ended(self2);
            }
            self2._node.removeEventListener("ended", self2._endFn, false);
          }
        };
        var cache = {};
        var loadBuffer = function(self2) {
          var url = self2._src;
          if (cache[url]) {
            self2._duration = cache[url].duration;
            loadSound(self2);
            return;
          }
          if (/^data:[^;]+;base64,/.test(url)) {
            var data = atob(url.split(",")[1]);
            var dataView = new Uint8Array(data.length);
            for (var i = 0; i < data.length; ++i) {
              dataView[i] = data.charCodeAt(i);
            }
            decodeAudioData(dataView.buffer, self2);
          } else {
            var xhr = new XMLHttpRequest();
            xhr.open(self2._xhr.method, url, true);
            xhr.withCredentials = self2._xhr.withCredentials;
            xhr.responseType = "arraybuffer";
            if (self2._xhr.headers) {
              Object.keys(self2._xhr.headers).forEach(function(key) {
                xhr.setRequestHeader(key, self2._xhr.headers[key]);
              });
            }
            xhr.onload = function() {
              var code = (xhr.status + "")[0];
              if (code !== "0" && code !== "2" && code !== "3") {
                self2._emit("loaderror", null, "Failed loading audio file with status: " + xhr.status + ".");
                return;
              }
              decodeAudioData(xhr.response, self2);
            };
            xhr.onerror = function() {
              if (self2._webAudio) {
                self2._html5 = true;
                self2._webAudio = false;
                self2._sounds = [];
                delete cache[url];
                self2.load();
              }
            };
            safeXhrSend(xhr);
          }
        };
        var safeXhrSend = function(xhr) {
          try {
            xhr.send();
          } catch (e) {
            xhr.onerror();
          }
        };
        var decodeAudioData = function(arraybuffer, self2) {
          var error = function() {
            self2._emit("loaderror", null, "Decoding audio data failed.");
          };
          var success = function(buffer) {
            if (buffer && self2._sounds.length > 0) {
              cache[self2._src] = buffer;
              loadSound(self2, buffer);
            } else {
              error();
            }
          };
          if (typeof Promise !== "undefined" && Howler2.ctx.decodeAudioData.length === 1) {
            Howler2.ctx.decodeAudioData(arraybuffer).then(success).catch(error);
          } else {
            Howler2.ctx.decodeAudioData(arraybuffer, success, error);
          }
        };
        var loadSound = function(self2, buffer) {
          if (buffer && !self2._duration) {
            self2._duration = buffer.duration;
          }
          if (Object.keys(self2._sprite).length === 0) {
            self2._sprite = { __default: [0, self2._duration * 1e3] };
          }
          if (self2._state !== "loaded") {
            self2._state = "loaded";
            self2._emit("load");
            self2._loadQueue();
          }
        };
        var setupAudioContext = function() {
          if (!Howler2.usingWebAudio) {
            return;
          }
          try {
            if (typeof AudioContext !== "undefined") {
              Howler2.ctx = new AudioContext();
            } else if (typeof webkitAudioContext !== "undefined") {
              Howler2.ctx = new webkitAudioContext();
            } else {
              Howler2.usingWebAudio = false;
            }
          } catch (e) {
            Howler2.usingWebAudio = false;
          }
          if (!Howler2.ctx) {
            Howler2.usingWebAudio = false;
          }
          var iOS = /iP(hone|od|ad)/.test(Howler2._navigator && Howler2._navigator.platform);
          var appVersion = Howler2._navigator && Howler2._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);
          var version = appVersion ? parseInt(appVersion[1], 10) : null;
          if (iOS && version && version < 9) {
            var safari = /safari/.test(Howler2._navigator && Howler2._navigator.userAgent.toLowerCase());
            if (Howler2._navigator && !safari) {
              Howler2.usingWebAudio = false;
            }
          }
          if (Howler2.usingWebAudio) {
            Howler2.masterGain = typeof Howler2.ctx.createGain === "undefined" ? Howler2.ctx.createGainNode() : Howler2.ctx.createGain();
            Howler2.masterGain.gain.setValueAtTime(Howler2._muted ? 0 : Howler2._volume, Howler2.ctx.currentTime);
            Howler2.masterGain.connect(Howler2.ctx.destination);
          }
          Howler2._setup();
        };
        if (typeof define === "function" && define.amd) {
          define([], function() {
            return {
              Howler: Howler2,
              Howl: Howl2
            };
          });
        }
        if (typeof exports !== "undefined") {
          exports.Howler = Howler2;
          exports.Howl = Howl2;
        }
        if (typeof global !== "undefined") {
          global.HowlerGlobal = HowlerGlobal2;
          global.Howler = Howler2;
          global.Howl = Howl2;
          global.Sound = Sound2;
        } else if (typeof window !== "undefined") {
          window.HowlerGlobal = HowlerGlobal2;
          window.Howler = Howler2;
          window.Howl = Howl2;
          window.Sound = Sound2;
        }
      })();
      (function() {
        "use strict";
        HowlerGlobal.prototype._pos = [0, 0, 0];
        HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0];
        HowlerGlobal.prototype.stereo = function(pan) {
          var self2 = this;
          if (!self2.ctx || !self2.ctx.listener) {
            return self2;
          }
          for (var i = self2._howls.length - 1; i >= 0; i--) {
            self2._howls[i].stereo(pan);
          }
          return self2;
        };
        HowlerGlobal.prototype.pos = function(x, y, z) {
          var self2 = this;
          if (!self2.ctx || !self2.ctx.listener) {
            return self2;
          }
          y = typeof y !== "number" ? self2._pos[1] : y;
          z = typeof z !== "number" ? self2._pos[2] : z;
          if (typeof x === "number") {
            self2._pos = [x, y, z];
            if (typeof self2.ctx.listener.positionX !== "undefined") {
              self2.ctx.listener.positionX.setTargetAtTime(self2._pos[0], Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.positionY.setTargetAtTime(self2._pos[1], Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.positionZ.setTargetAtTime(self2._pos[2], Howler.ctx.currentTime, 0.1);
            } else {
              self2.ctx.listener.setPosition(self2._pos[0], self2._pos[1], self2._pos[2]);
            }
          } else {
            return self2._pos;
          }
          return self2;
        };
        HowlerGlobal.prototype.orientation = function(x, y, z, xUp, yUp, zUp) {
          var self2 = this;
          if (!self2.ctx || !self2.ctx.listener) {
            return self2;
          }
          var or = self2._orientation;
          y = typeof y !== "number" ? or[1] : y;
          z = typeof z !== "number" ? or[2] : z;
          xUp = typeof xUp !== "number" ? or[3] : xUp;
          yUp = typeof yUp !== "number" ? or[4] : yUp;
          zUp = typeof zUp !== "number" ? or[5] : zUp;
          if (typeof x === "number") {
            self2._orientation = [x, y, z, xUp, yUp, zUp];
            if (typeof self2.ctx.listener.forwardX !== "undefined") {
              self2.ctx.listener.forwardX.setTargetAtTime(x, Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.forwardY.setTargetAtTime(y, Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.forwardZ.setTargetAtTime(z, Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.upX.setTargetAtTime(xUp, Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.upY.setTargetAtTime(yUp, Howler.ctx.currentTime, 0.1);
              self2.ctx.listener.upZ.setTargetAtTime(zUp, Howler.ctx.currentTime, 0.1);
            } else {
              self2.ctx.listener.setOrientation(x, y, z, xUp, yUp, zUp);
            }
          } else {
            return or;
          }
          return self2;
        };
        Howl.prototype.init = function(_super) {
          return function(o) {
            var self2 = this;
            self2._orientation = o.orientation || [1, 0, 0];
            self2._stereo = o.stereo || null;
            self2._pos = o.pos || null;
            self2._pannerAttr = {
              coneInnerAngle: typeof o.coneInnerAngle !== "undefined" ? o.coneInnerAngle : 360,
              coneOuterAngle: typeof o.coneOuterAngle !== "undefined" ? o.coneOuterAngle : 360,
              coneOuterGain: typeof o.coneOuterGain !== "undefined" ? o.coneOuterGain : 0,
              distanceModel: typeof o.distanceModel !== "undefined" ? o.distanceModel : "inverse",
              maxDistance: typeof o.maxDistance !== "undefined" ? o.maxDistance : 1e4,
              panningModel: typeof o.panningModel !== "undefined" ? o.panningModel : "HRTF",
              refDistance: typeof o.refDistance !== "undefined" ? o.refDistance : 1,
              rolloffFactor: typeof o.rolloffFactor !== "undefined" ? o.rolloffFactor : 1
            };
            self2._onstereo = o.onstereo ? [{ fn: o.onstereo }] : [];
            self2._onpos = o.onpos ? [{ fn: o.onpos }] : [];
            self2._onorientation = o.onorientation ? [{ fn: o.onorientation }] : [];
            return _super.call(this, o);
          };
        }(Howl.prototype.init);
        Howl.prototype.stereo = function(pan, id) {
          var self2 = this;
          if (!self2._webAudio) {
            return self2;
          }
          if (self2._state !== "loaded") {
            self2._queue.push({
              event: "stereo",
              action: function() {
                self2.stereo(pan, id);
              }
            });
            return self2;
          }
          var pannerType = typeof Howler.ctx.createStereoPanner === "undefined" ? "spatial" : "stereo";
          if (typeof id === "undefined") {
            if (typeof pan === "number") {
              self2._stereo = pan;
              self2._pos = [pan, 0, 0];
            } else {
              return self2._stereo;
            }
          }
          var ids = self2._getSoundIds(id);
          for (var i = 0; i < ids.length; i++) {
            var sound = self2._soundById(ids[i]);
            if (sound) {
              if (typeof pan === "number") {
                sound._stereo = pan;
                sound._pos = [pan, 0, 0];
                if (sound._node) {
                  sound._pannerAttr.panningModel = "equalpower";
                  if (!sound._panner || !sound._panner.pan) {
                    setupPanner(sound, pannerType);
                  }
                  if (pannerType === "spatial") {
                    if (typeof sound._panner.positionX !== "undefined") {
                      sound._panner.positionX.setValueAtTime(pan, Howler.ctx.currentTime);
                      sound._panner.positionY.setValueAtTime(0, Howler.ctx.currentTime);
                      sound._panner.positionZ.setValueAtTime(0, Howler.ctx.currentTime);
                    } else {
                      sound._panner.setPosition(pan, 0, 0);
                    }
                  } else {
                    sound._panner.pan.setValueAtTime(pan, Howler.ctx.currentTime);
                  }
                }
                self2._emit("stereo", sound._id);
              } else {
                return sound._stereo;
              }
            }
          }
          return self2;
        };
        Howl.prototype.pos = function(x, y, z, id) {
          var self2 = this;
          if (!self2._webAudio) {
            return self2;
          }
          if (self2._state !== "loaded") {
            self2._queue.push({
              event: "pos",
              action: function() {
                self2.pos(x, y, z, id);
              }
            });
            return self2;
          }
          y = typeof y !== "number" ? 0 : y;
          z = typeof z !== "number" ? -0.5 : z;
          if (typeof id === "undefined") {
            if (typeof x === "number") {
              self2._pos = [x, y, z];
            } else {
              return self2._pos;
            }
          }
          var ids = self2._getSoundIds(id);
          for (var i = 0; i < ids.length; i++) {
            var sound = self2._soundById(ids[i]);
            if (sound) {
              if (typeof x === "number") {
                sound._pos = [x, y, z];
                if (sound._node) {
                  if (!sound._panner || sound._panner.pan) {
                    setupPanner(sound, "spatial");
                  }
                  if (typeof sound._panner.positionX !== "undefined") {
                    sound._panner.positionX.setValueAtTime(x, Howler.ctx.currentTime);
                    sound._panner.positionY.setValueAtTime(y, Howler.ctx.currentTime);
                    sound._panner.positionZ.setValueAtTime(z, Howler.ctx.currentTime);
                  } else {
                    sound._panner.setPosition(x, y, z);
                  }
                }
                self2._emit("pos", sound._id);
              } else {
                return sound._pos;
              }
            }
          }
          return self2;
        };
        Howl.prototype.orientation = function(x, y, z, id) {
          var self2 = this;
          if (!self2._webAudio) {
            return self2;
          }
          if (self2._state !== "loaded") {
            self2._queue.push({
              event: "orientation",
              action: function() {
                self2.orientation(x, y, z, id);
              }
            });
            return self2;
          }
          y = typeof y !== "number" ? self2._orientation[1] : y;
          z = typeof z !== "number" ? self2._orientation[2] : z;
          if (typeof id === "undefined") {
            if (typeof x === "number") {
              self2._orientation = [x, y, z];
            } else {
              return self2._orientation;
            }
          }
          var ids = self2._getSoundIds(id);
          for (var i = 0; i < ids.length; i++) {
            var sound = self2._soundById(ids[i]);
            if (sound) {
              if (typeof x === "number") {
                sound._orientation = [x, y, z];
                if (sound._node) {
                  if (!sound._panner) {
                    if (!sound._pos) {
                      sound._pos = self2._pos || [0, 0, -0.5];
                    }
                    setupPanner(sound, "spatial");
                  }
                  if (typeof sound._panner.orientationX !== "undefined") {
                    sound._panner.orientationX.setValueAtTime(x, Howler.ctx.currentTime);
                    sound._panner.orientationY.setValueAtTime(y, Howler.ctx.currentTime);
                    sound._panner.orientationZ.setValueAtTime(z, Howler.ctx.currentTime);
                  } else {
                    sound._panner.setOrientation(x, y, z);
                  }
                }
                self2._emit("orientation", sound._id);
              } else {
                return sound._orientation;
              }
            }
          }
          return self2;
        };
        Howl.prototype.pannerAttr = function() {
          var self2 = this;
          var args = arguments;
          var o, id, sound;
          if (!self2._webAudio) {
            return self2;
          }
          if (args.length === 0) {
            return self2._pannerAttr;
          } else if (args.length === 1) {
            if (typeof args[0] === "object") {
              o = args[0];
              if (typeof id === "undefined") {
                if (!o.pannerAttr) {
                  o.pannerAttr = {
                    coneInnerAngle: o.coneInnerAngle,
                    coneOuterAngle: o.coneOuterAngle,
                    coneOuterGain: o.coneOuterGain,
                    distanceModel: o.distanceModel,
                    maxDistance: o.maxDistance,
                    refDistance: o.refDistance,
                    rolloffFactor: o.rolloffFactor,
                    panningModel: o.panningModel
                  };
                }
                self2._pannerAttr = {
                  coneInnerAngle: typeof o.pannerAttr.coneInnerAngle !== "undefined" ? o.pannerAttr.coneInnerAngle : self2._coneInnerAngle,
                  coneOuterAngle: typeof o.pannerAttr.coneOuterAngle !== "undefined" ? o.pannerAttr.coneOuterAngle : self2._coneOuterAngle,
                  coneOuterGain: typeof o.pannerAttr.coneOuterGain !== "undefined" ? o.pannerAttr.coneOuterGain : self2._coneOuterGain,
                  distanceModel: typeof o.pannerAttr.distanceModel !== "undefined" ? o.pannerAttr.distanceModel : self2._distanceModel,
                  maxDistance: typeof o.pannerAttr.maxDistance !== "undefined" ? o.pannerAttr.maxDistance : self2._maxDistance,
                  refDistance: typeof o.pannerAttr.refDistance !== "undefined" ? o.pannerAttr.refDistance : self2._refDistance,
                  rolloffFactor: typeof o.pannerAttr.rolloffFactor !== "undefined" ? o.pannerAttr.rolloffFactor : self2._rolloffFactor,
                  panningModel: typeof o.pannerAttr.panningModel !== "undefined" ? o.pannerAttr.panningModel : self2._panningModel
                };
              }
            } else {
              sound = self2._soundById(parseInt(args[0], 10));
              return sound ? sound._pannerAttr : self2._pannerAttr;
            }
          } else if (args.length === 2) {
            o = args[0];
            id = parseInt(args[1], 10);
          }
          var ids = self2._getSoundIds(id);
          for (var i = 0; i < ids.length; i++) {
            sound = self2._soundById(ids[i]);
            if (sound) {
              var pa = sound._pannerAttr;
              pa = {
                coneInnerAngle: typeof o.coneInnerAngle !== "undefined" ? o.coneInnerAngle : pa.coneInnerAngle,
                coneOuterAngle: typeof o.coneOuterAngle !== "undefined" ? o.coneOuterAngle : pa.coneOuterAngle,
                coneOuterGain: typeof o.coneOuterGain !== "undefined" ? o.coneOuterGain : pa.coneOuterGain,
                distanceModel: typeof o.distanceModel !== "undefined" ? o.distanceModel : pa.distanceModel,
                maxDistance: typeof o.maxDistance !== "undefined" ? o.maxDistance : pa.maxDistance,
                refDistance: typeof o.refDistance !== "undefined" ? o.refDistance : pa.refDistance,
                rolloffFactor: typeof o.rolloffFactor !== "undefined" ? o.rolloffFactor : pa.rolloffFactor,
                panningModel: typeof o.panningModel !== "undefined" ? o.panningModel : pa.panningModel
              };
              var panner = sound._panner;
              if (!panner) {
                if (!sound._pos) {
                  sound._pos = self2._pos || [0, 0, -0.5];
                }
                setupPanner(sound, "spatial");
                panner = sound._panner;
              }
              panner.coneInnerAngle = pa.coneInnerAngle;
              panner.coneOuterAngle = pa.coneOuterAngle;
              panner.coneOuterGain = pa.coneOuterGain;
              panner.distanceModel = pa.distanceModel;
              panner.maxDistance = pa.maxDistance;
              panner.refDistance = pa.refDistance;
              panner.rolloffFactor = pa.rolloffFactor;
              panner.panningModel = pa.panningModel;
            }
          }
          return self2;
        };
        Sound.prototype.init = function(_super) {
          return function() {
            var self2 = this;
            var parent = self2._parent;
            self2._orientation = parent._orientation;
            self2._stereo = parent._stereo;
            self2._pos = parent._pos;
            self2._pannerAttr = parent._pannerAttr;
            _super.call(this);
            if (self2._stereo) {
              parent.stereo(self2._stereo);
            } else if (self2._pos) {
              parent.pos(self2._pos[0], self2._pos[1], self2._pos[2], self2._id);
            }
          };
        }(Sound.prototype.init);
        Sound.prototype.reset = function(_super) {
          return function() {
            var self2 = this;
            var parent = self2._parent;
            self2._orientation = parent._orientation;
            self2._stereo = parent._stereo;
            self2._pos = parent._pos;
            self2._pannerAttr = parent._pannerAttr;
            if (self2._stereo) {
              parent.stereo(self2._stereo);
            } else if (self2._pos) {
              parent.pos(self2._pos[0], self2._pos[1], self2._pos[2], self2._id);
            } else if (self2._panner) {
              self2._panner.disconnect(0);
              self2._panner = void 0;
              parent._refreshBuffer(self2);
            }
            return _super.call(this);
          };
        }(Sound.prototype.reset);
        var setupPanner = function(sound, type) {
          type = type || "spatial";
          if (type === "spatial") {
            sound._panner = Howler.ctx.createPanner();
            sound._panner.coneInnerAngle = sound._pannerAttr.coneInnerAngle;
            sound._panner.coneOuterAngle = sound._pannerAttr.coneOuterAngle;
            sound._panner.coneOuterGain = sound._pannerAttr.coneOuterGain;
            sound._panner.distanceModel = sound._pannerAttr.distanceModel;
            sound._panner.maxDistance = sound._pannerAttr.maxDistance;
            sound._panner.refDistance = sound._pannerAttr.refDistance;
            sound._panner.rolloffFactor = sound._pannerAttr.rolloffFactor;
            sound._panner.panningModel = sound._pannerAttr.panningModel;
            if (typeof sound._panner.positionX !== "undefined") {
              sound._panner.positionX.setValueAtTime(sound._pos[0], Howler.ctx.currentTime);
              sound._panner.positionY.setValueAtTime(sound._pos[1], Howler.ctx.currentTime);
              sound._panner.positionZ.setValueAtTime(sound._pos[2], Howler.ctx.currentTime);
            } else {
              sound._panner.setPosition(sound._pos[0], sound._pos[1], sound._pos[2]);
            }
            if (typeof sound._panner.orientationX !== "undefined") {
              sound._panner.orientationX.setValueAtTime(sound._orientation[0], Howler.ctx.currentTime);
              sound._panner.orientationY.setValueAtTime(sound._orientation[1], Howler.ctx.currentTime);
              sound._panner.orientationZ.setValueAtTime(sound._orientation[2], Howler.ctx.currentTime);
            } else {
              sound._panner.setOrientation(sound._orientation[0], sound._orientation[1], sound._orientation[2]);
            }
          } else {
            sound._panner = Howler.ctx.createStereoPanner();
            sound._panner.pan.setValueAtTime(sound._stereo, Howler.ctx.currentTime);
          }
          sound._panner.connect(sound._node);
          if (!sound._paused) {
            sound._parent.pause(sound._id, true).play(sound._id, true);
          }
        };
      })();
    }
  });

  // node_modules/earcut/src/earcut.js
  var require_earcut = __commonJS({
    "node_modules/earcut/src/earcut.js"(exports, module) {
      "use strict";
      module.exports = earcut2;
      module.exports.default = earcut2;
      function earcut2(data, holeIndices, dim) {
        dim = dim || 2;
        var hasHoles = holeIndices && holeIndices.length, outerLen = hasHoles ? holeIndices[0] * dim : data.length, outerNode = linkedList(data, 0, outerLen, dim, true), triangles = [];
        if (!outerNode || outerNode.next === outerNode.prev)
          return triangles;
        var minX, minY, maxX, maxY, x, y, invSize;
        if (hasHoles)
          outerNode = eliminateHoles(data, holeIndices, outerNode, dim);
        if (data.length > 80 * dim) {
          minX = maxX = data[0];
          minY = maxY = data[1];
          for (var i = dim; i < outerLen; i += dim) {
            x = data[i];
            y = data[i + 1];
            if (x < minX)
              minX = x;
            if (y < minY)
              minY = y;
            if (x > maxX)
              maxX = x;
            if (y > maxY)
              maxY = y;
          }
          invSize = Math.max(maxX - minX, maxY - minY);
          invSize = invSize !== 0 ? 32767 / invSize : 0;
        }
        earcutLinked(outerNode, triangles, dim, minX, minY, invSize, 0);
        return triangles;
      }
      function linkedList(data, start, end, dim, clockwise) {
        var i, last;
        if (clockwise === signedArea(data, start, end, dim) > 0) {
          for (i = start; i < end; i += dim)
            last = insertNode(i, data[i], data[i + 1], last);
        } else {
          for (i = end - dim; i >= start; i -= dim)
            last = insertNode(i, data[i], data[i + 1], last);
        }
        if (last && equals6(last, last.next)) {
          removeNode(last);
          last = last.next;
        }
        return last;
      }
      function filterPoints(start, end) {
        if (!start)
          return start;
        if (!end)
          end = start;
        var p = start, again;
        do {
          again = false;
          if (!p.steiner && (equals6(p, p.next) || area(p.prev, p, p.next) === 0)) {
            removeNode(p);
            p = end = p.prev;
            if (p === p.next)
              break;
            again = true;
          } else {
            p = p.next;
          }
        } while (again || p !== end);
        return end;
      }
      function earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {
        if (!ear)
          return;
        if (!pass && invSize)
          indexCurve(ear, minX, minY, invSize);
        var stop = ear, prev, next;
        while (ear.prev !== ear.next) {
          prev = ear.prev;
          next = ear.next;
          if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {
            triangles.push(prev.i / dim | 0);
            triangles.push(ear.i / dim | 0);
            triangles.push(next.i / dim | 0);
            removeNode(ear);
            ear = next.next;
            stop = next.next;
            continue;
          }
          ear = next;
          if (ear === stop) {
            if (!pass) {
              earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);
            } else if (pass === 1) {
              ear = cureLocalIntersections(filterPoints(ear), triangles, dim);
              earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);
            } else if (pass === 2) {
              splitEarcut(ear, triangles, dim, minX, minY, invSize);
            }
            break;
          }
        }
      }
      function isEar(ear) {
        var a = ear.prev, b = ear, c = ear.next;
        if (area(a, b, c) >= 0)
          return false;
        var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;
        var x0 = ax < bx ? ax < cx ? ax : cx : bx < cx ? bx : cx, y0 = ay < by ? ay < cy ? ay : cy : by < cy ? by : cy, x1 = ax > bx ? ax > cx ? ax : cx : bx > cx ? bx : cx, y1 = ay > by ? ay > cy ? ay : cy : by > cy ? by : cy;
        var p = c.next;
        while (p !== a) {
          if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0)
            return false;
          p = p.next;
        }
        return true;
      }
      function isEarHashed(ear, minX, minY, invSize) {
        var a = ear.prev, b = ear, c = ear.next;
        if (area(a, b, c) >= 0)
          return false;
        var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;
        var x0 = ax < bx ? ax < cx ? ax : cx : bx < cx ? bx : cx, y0 = ay < by ? ay < cy ? ay : cy : by < cy ? by : cy, x1 = ax > bx ? ax > cx ? ax : cx : bx > cx ? bx : cx, y1 = ay > by ? ay > cy ? ay : cy : by > cy ? by : cy;
        var minZ = zOrder(x0, y0, minX, minY, invSize), maxZ = zOrder(x1, y1, minX, minY, invSize);
        var p = ear.prevZ, n = ear.nextZ;
        while (p && p.z >= minZ && n && n.z <= maxZ) {
          if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c && pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0)
            return false;
          p = p.prevZ;
          if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c && pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0)
            return false;
          n = n.nextZ;
        }
        while (p && p.z >= minZ) {
          if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c && pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0)
            return false;
          p = p.prevZ;
        }
        while (n && n.z <= maxZ) {
          if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c && pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0)
            return false;
          n = n.nextZ;
        }
        return true;
      }
      function cureLocalIntersections(start, triangles, dim) {
        var p = start;
        do {
          var a = p.prev, b = p.next.next;
          if (!equals6(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {
            triangles.push(a.i / dim | 0);
            triangles.push(p.i / dim | 0);
            triangles.push(b.i / dim | 0);
            removeNode(p);
            removeNode(p.next);
            p = start = b;
          }
          p = p.next;
        } while (p !== start);
        return filterPoints(p);
      }
      function splitEarcut(start, triangles, dim, minX, minY, invSize) {
        var a = start;
        do {
          var b = a.next.next;
          while (b !== a.prev) {
            if (a.i !== b.i && isValidDiagonal(a, b)) {
              var c = splitPolygon(a, b);
              a = filterPoints(a, a.next);
              c = filterPoints(c, c.next);
              earcutLinked(a, triangles, dim, minX, minY, invSize, 0);
              earcutLinked(c, triangles, dim, minX, minY, invSize, 0);
              return;
            }
            b = b.next;
          }
          a = a.next;
        } while (a !== start);
      }
      function eliminateHoles(data, holeIndices, outerNode, dim) {
        var queue = [], i, len4, start, end, list;
        for (i = 0, len4 = holeIndices.length; i < len4; i++) {
          start = holeIndices[i] * dim;
          end = i < len4 - 1 ? holeIndices[i + 1] * dim : data.length;
          list = linkedList(data, start, end, dim, false);
          if (list === list.next)
            list.steiner = true;
          queue.push(getLeftmost(list));
        }
        queue.sort(compareX);
        for (i = 0; i < queue.length; i++) {
          outerNode = eliminateHole(queue[i], outerNode);
        }
        return outerNode;
      }
      function compareX(a, b) {
        return a.x - b.x;
      }
      function eliminateHole(hole, outerNode) {
        var bridge = findHoleBridge(hole, outerNode);
        if (!bridge) {
          return outerNode;
        }
        var bridgeReverse = splitPolygon(bridge, hole);
        filterPoints(bridgeReverse, bridgeReverse.next);
        return filterPoints(bridge, bridge.next);
      }
      function findHoleBridge(hole, outerNode) {
        var p = outerNode, hx = hole.x, hy = hole.y, qx = -Infinity, m;
        do {
          if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {
            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);
            if (x <= hx && x > qx) {
              qx = x;
              m = p.x < p.next.x ? p : p.next;
              if (x === hx)
                return m;
            }
          }
          p = p.next;
        } while (p !== outerNode);
        if (!m)
          return null;
        var stop = m, mx = m.x, my = m.y, tanMin = Infinity, tan;
        p = m;
        do {
          if (hx >= p.x && p.x >= mx && hx !== p.x && pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {
            tan = Math.abs(hy - p.y) / (hx - p.x);
            if (locallyInside(p, hole) && (tan < tanMin || tan === tanMin && (p.x > m.x || p.x === m.x && sectorContainsSector(m, p)))) {
              m = p;
              tanMin = tan;
            }
          }
          p = p.next;
        } while (p !== stop);
        return m;
      }
      function sectorContainsSector(m, p) {
        return area(m.prev, m, p.prev) < 0 && area(p.next, m, m.next) < 0;
      }
      function indexCurve(start, minX, minY, invSize) {
        var p = start;
        do {
          if (p.z === 0)
            p.z = zOrder(p.x, p.y, minX, minY, invSize);
          p.prevZ = p.prev;
          p.nextZ = p.next;
          p = p.next;
        } while (p !== start);
        p.prevZ.nextZ = null;
        p.prevZ = null;
        sortLinked(p);
      }
      function sortLinked(list) {
        var i, p, q, e, tail, numMerges, pSize, qSize, inSize = 1;
        do {
          p = list;
          list = null;
          tail = null;
          numMerges = 0;
          while (p) {
            numMerges++;
            q = p;
            pSize = 0;
            for (i = 0; i < inSize; i++) {
              pSize++;
              q = q.nextZ;
              if (!q)
                break;
            }
            qSize = inSize;
            while (pSize > 0 || qSize > 0 && q) {
              if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {
                e = p;
                p = p.nextZ;
                pSize--;
              } else {
                e = q;
                q = q.nextZ;
                qSize--;
              }
              if (tail)
                tail.nextZ = e;
              else
                list = e;
              e.prevZ = tail;
              tail = e;
            }
            p = q;
          }
          tail.nextZ = null;
          inSize *= 2;
        } while (numMerges > 1);
        return list;
      }
      function zOrder(x, y, minX, minY, invSize) {
        x = (x - minX) * invSize | 0;
        y = (y - minY) * invSize | 0;
        x = (x | x << 8) & 16711935;
        x = (x | x << 4) & 252645135;
        x = (x | x << 2) & 858993459;
        x = (x | x << 1) & 1431655765;
        y = (y | y << 8) & 16711935;
        y = (y | y << 4) & 252645135;
        y = (y | y << 2) & 858993459;
        y = (y | y << 1) & 1431655765;
        return x | y << 1;
      }
      function getLeftmost(start) {
        var p = start, leftmost = start;
        do {
          if (p.x < leftmost.x || p.x === leftmost.x && p.y < leftmost.y)
            leftmost = p;
          p = p.next;
        } while (p !== start);
        return leftmost;
      }
      function pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {
        return (cx - px) * (ay - py) >= (ax - px) * (cy - py) && (ax - px) * (by - py) >= (bx - px) * (ay - py) && (bx - px) * (cy - py) >= (cx - px) * (by - py);
      }
      function isValidDiagonal(a, b) {
        return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && // dones't intersect other edges
        (locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b) && // locally visible
        (area(a.prev, a, b.prev) || area(a, b.prev, b)) || // does not create opposite-facing sectors
        equals6(a, b) && area(a.prev, a, a.next) > 0 && area(b.prev, b, b.next) > 0);
      }
      function area(p, q, r) {
        return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);
      }
      function equals6(p1, p2) {
        return p1.x === p2.x && p1.y === p2.y;
      }
      function intersects(p1, q1, p2, q2) {
        var o1 = sign(area(p1, q1, p2));
        var o2 = sign(area(p1, q1, q2));
        var o3 = sign(area(p2, q2, p1));
        var o4 = sign(area(p2, q2, q1));
        if (o1 !== o2 && o3 !== o4)
          return true;
        if (o1 === 0 && onSegment(p1, p2, q1))
          return true;
        if (o2 === 0 && onSegment(p1, q2, q1))
          return true;
        if (o3 === 0 && onSegment(p2, p1, q2))
          return true;
        if (o4 === 0 && onSegment(p2, q1, q2))
          return true;
        return false;
      }
      function onSegment(p, q, r) {
        return q.x <= Math.max(p.x, r.x) && q.x >= Math.min(p.x, r.x) && q.y <= Math.max(p.y, r.y) && q.y >= Math.min(p.y, r.y);
      }
      function sign(num) {
        return num > 0 ? 1 : num < 0 ? -1 : 0;
      }
      function intersectsPolygon(a, b) {
        var p = a;
        do {
          if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i && intersects(p, p.next, a, b))
            return true;
          p = p.next;
        } while (p !== a);
        return false;
      }
      function locallyInside(a, b) {
        return area(a.prev, a, a.next) < 0 ? area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 : area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;
      }
      function middleInside(a, b) {
        var p = a, inside = false, px = (a.x + b.x) / 2, py = (a.y + b.y) / 2;
        do {
          if (p.y > py !== p.next.y > py && p.next.y !== p.y && px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x)
            inside = !inside;
          p = p.next;
        } while (p !== a);
        return inside;
      }
      function splitPolygon(a, b) {
        var a2 = new Node(a.i, a.x, a.y), b2 = new Node(b.i, b.x, b.y), an = a.next, bp = b.prev;
        a.next = b;
        b.prev = a;
        a2.next = an;
        an.prev = a2;
        b2.next = a2;
        a2.prev = b2;
        bp.next = b2;
        b2.prev = bp;
        return b2;
      }
      function insertNode(i, x, y, last) {
        var p = new Node(i, x, y);
        if (!last) {
          p.prev = p;
          p.next = p;
        } else {
          p.next = last.next;
          p.prev = last;
          last.next.prev = p;
          last.next = p;
        }
        return p;
      }
      function removeNode(p) {
        p.next.prev = p.prev;
        p.prev.next = p.next;
        if (p.prevZ)
          p.prevZ.nextZ = p.nextZ;
        if (p.nextZ)
          p.nextZ.prevZ = p.prevZ;
      }
      function Node(i, x, y) {
        this.i = i;
        this.x = x;
        this.y = y;
        this.prev = null;
        this.next = null;
        this.z = 0;
        this.prevZ = null;
        this.nextZ = null;
        this.steiner = false;
      }
      earcut2.deviation = function(data, holeIndices, dim, triangles) {
        var hasHoles = holeIndices && holeIndices.length;
        var outerLen = hasHoles ? holeIndices[0] * dim : data.length;
        var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));
        if (hasHoles) {
          for (var i = 0, len4 = holeIndices.length; i < len4; i++) {
            var start = holeIndices[i] * dim;
            var end = i < len4 - 1 ? holeIndices[i + 1] * dim : data.length;
            polygonArea -= Math.abs(signedArea(data, start, end, dim));
          }
        }
        var trianglesArea = 0;
        for (i = 0; i < triangles.length; i += 3) {
          var a = triangles[i] * dim;
          var b = triangles[i + 1] * dim;
          var c = triangles[i + 2] * dim;
          trianglesArea += Math.abs(
            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) - (data[a] - data[b]) * (data[c + 1] - data[a + 1])
          );
        }
        return polygonArea === 0 && trianglesArea === 0 ? 0 : Math.abs((trianglesArea - polygonArea) / polygonArea);
      };
      function signedArea(data, start, end, dim) {
        var sum = 0;
        for (var i = start, j = end - dim; i < end; i += dim) {
          sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);
          j = i;
        }
        return sum;
      }
      earcut2.flatten = function(data) {
        var dim = data[0][0].length, result = { vertices: [], holes: [], dimensions: dim }, holeIndex = 0;
        for (var i = 0; i < data.length; i++) {
          for (var j = 0; j < data[i].length; j++) {
            for (var d = 0; d < dim; d++)
              result.vertices.push(data[i][j][d]);
          }
          if (i > 0) {
            holeIndex += data[i - 1].length;
            result.holes.push(holeIndex);
          }
        }
        return result;
      };
    }
  });

  // node_modules/@wonderlandengine/components/dist/index.js
  var dist_exports = {};
  __export(dist_exports, {
    ARCamera8thwall: () => ARCamera8thwall,
    Anchor: () => Anchor,
    Cursor: () => Cursor,
    CursorTarget: () => CursorTarget,
    DebugObject: () => DebugObject,
    DeviceOrientationLook: () => DeviceOrientationLook,
    FingerCursor: () => FingerCursor,
    FixedFoveation: () => FixedFoveation,
    HandTracking: () => HandTracking,
    HitTestLocation: () => HitTestLocation,
    HowlerAudioListener: () => HowlerAudioListener,
    HowlerAudioSource: () => HowlerAudioSource,
    ImageTexture: () => ImageTexture,
    InputProfile: () => InputProfile,
    MouseLookComponent: () => MouseLookComponent,
    OrbitalCamera: () => OrbitalCamera,
    PlaneDetection: () => PlaneDetection,
    PlayerHeight: () => PlayerHeight,
    TargetFramerate: () => TargetFramerate,
    TeleportComponent: () => TeleportComponent,
    Trail: () => Trail,
    TwoJointIkSolver: () => TwoJointIkSolver,
    VideoTexture: () => VideoTexture,
    VrModeActiveSwitch: () => VrModeActiveSwitch,
    Vrm: () => Vrm,
    WasdControlsComponent: () => WasdControlsComponent,
    isPointLocalOnXRPlanePolygon: () => isPointLocalOnXRPlanePolygon,
    isPointWorldOnXRPlanePolygon: () => isPointWorldOnXRPlanePolygon
  });

  // node_modules/@wonderlandengine/api/dist/index.js
  var __defProp2 = Object.defineProperty;
  var __getOwnPropDesc2 = Object.getOwnPropertyDescriptor;
  var __decorateClass = (decorators, target, key, kind) => {
    for (var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc2(target, key) : target, i = decorators.length - 1, decorator; i >= 0; i--)
      (decorator = decorators[i]) && (result = (kind ? decorator(target, key, result) : decorator(result)) || result);
    return kind && result && __defProp2(target, key, result), result;
  };
  var Type = ((Type2) => (Type2[Type2.Native = 0] = "Native", Type2[Type2.Bool = 1] = "Bool", Type2[Type2.Int = 2] = "Int", Type2[Type2.Float = 3] = "Float", Type2[Type2.String = 4] = "String", Type2[Type2.Enum = 5] = "Enum", Type2[Type2.Object = 6] = "Object", Type2[Type2.Mesh = 7] = "Mesh", Type2[Type2.Texture = 8] = "Texture", Type2[Type2.Material = 9] = "Material", Type2[Type2.Animation = 10] = "Animation", Type2[Type2.Skin = 11] = "Skin", Type2[Type2.Color = 12] = "Color", Type2[Type2.Vector2 = 13] = "Vector2", Type2[Type2.Vector3 = 14] = "Vector3", Type2[Type2.Vector4 = 15] = "Vector4", Type2))(Type || {});
  var DefaultPropertyCloner = class {
    clone(type, value) {
      switch (type) {
        case 12:
        case 13:
        case 14:
        case 15:
          return value.slice();
        default:
          return value;
      }
    }
  };
  var defaultPropertyCloner = new DefaultPropertyCloner();
  var Property = { bool(defaultValue = false) {
    return { type: 1, default: defaultValue };
  }, int(defaultValue = 0) {
    return { type: 2, default: defaultValue };
  }, float(defaultValue = 0) {
    return { type: 3, default: defaultValue };
  }, string(defaultValue = "") {
    return { type: 4, default: defaultValue };
  }, enum(values, defaultValue) {
    return { type: 5, values, default: defaultValue };
  }, object(opts) {
    return { type: 6, default: null, required: opts?.required ?? false };
  }, mesh(opts) {
    return { type: 7, default: null, required: opts?.required ?? false };
  }, texture(opts) {
    return { type: 8, default: null, required: opts?.required ?? false };
  }, material(opts) {
    return { type: 9, default: null, required: opts?.required ?? false };
  }, animation(opts) {
    return { type: 10, default: null, required: opts?.required ?? false };
  }, skin(opts) {
    return { type: 11, default: null, required: opts?.required ?? false };
  }, color(r = 0, g = 0, b = 0, a = 1) {
    return { type: 12, default: [r, g, b, a] };
  }, vector2(x = 0, y = 0) {
    return { type: 13, default: [x, y] };
  }, vector3(x = 0, y = 0, z = 0) {
    return { type: 14, default: [x, y, z] };
  }, vector4(x = 0, y = 0, z = 0, w = 0) {
    return { type: 15, default: [x, y, z, w] };
  } };
  function propertyDecorator(data) {
    return function(target, propertyKey) {
      let ctor = target.constructor;
      ctor.Properties = ctor.hasOwnProperty("Properties") ? ctor.Properties : {}, ctor.Properties[propertyKey] = data;
    };
  }
  function enumerable() {
    return function(_, __, descriptor) {
      descriptor.enumerable = true;
    };
  }
  function nativeProperty() {
    return function(target, propertyKey, descriptor) {
      enumerable()(target, propertyKey, descriptor), propertyDecorator({ type: 0 })(target, propertyKey);
    };
  }
  var property = {};
  for (let name in Property)
    property[name] = (...args) => {
      let functor = Property[name];
      return propertyDecorator(functor(...args));
    };
  function isNumber(value) {
    return value == null ? false : typeof value == "number" || value.constructor === Number;
  }
  function isImageLike(value) {
    return value instanceof HTMLImageElement || value instanceof HTMLVideoElement || value instanceof HTMLCanvasElement;
  }
  var Emitter = class {
    _listeners = [];
    _notifying = false;
    _transactions = [];
    add(listener, opts = {}) {
      let { once = false, id = void 0 } = opts, data = { id, once, callback: listener };
      return this._notifying ? (this._transactions.push({ type: 1, data }), this) : (this._listeners.push(data), this);
    }
    push(...listeners) {
      for (let cb of listeners)
        this.add(cb);
      return this;
    }
    once(listener) {
      return this.add(listener, { once: true });
    }
    remove(listener) {
      if (this._notifying)
        return this._transactions.push({ type: 2, data: listener }), this;
      let listeners = this._listeners;
      for (let i = 0; i < listeners.length; ++i) {
        let target = listeners[i];
        (target.callback === listener || target.id === listener) && listeners.splice(i--, 1);
      }
      return this;
    }
    has(listener) {
      let listeners = this._listeners;
      for (let i = 0; i < listeners.length; ++i) {
        let target = listeners[i];
        if (target.callback === listener || target.id === listener)
          return true;
      }
      return false;
    }
    notify(...data) {
      let listeners = this._listeners;
      this._notifying = true;
      for (let i = 0; i < listeners.length; ++i) {
        let listener = listeners[i];
        listener.once && listeners.splice(i--, 1);
        try {
          listener.callback(...data);
        } catch (e) {
          console.error(e);
        }
      }
      this._notifying = false, this._flushTransactions();
    }
    notifyUnsafe(...data) {
      let listeners = this._listeners;
      for (let i = 0; i < listeners.length; ++i) {
        let listener = listeners[i];
        listener.once && listeners.splice(i--, 1), listener.callback(...data);
      }
      this._flushTransactions();
    }
    promise() {
      return new Promise((res, _) => {
        this.once((...args) => {
          args.length > 1 ? res(args) : res(args[0]);
        });
      });
    }
    get listenerCount() {
      return this._listeners.length;
    }
    get isEmpty() {
      return this.listenerCount === 0;
    }
    _flushTransactions() {
      let listeners = this._listeners;
      for (let transaction of this._transactions)
        transaction.type === 1 ? listeners.push(transaction.data) : this.remove(transaction.data);
      this._transactions.length = 0;
    }
  };
  var RetainEmitterUndefined = {};
  var RetainEmitter = class extends Emitter {
    _event = RetainEmitterUndefined;
    _reset;
    add(listener, opts) {
      let immediate = opts?.immediate ?? true;
      return this._event !== RetainEmitterUndefined && immediate && listener(...this._event), super.add(listener, opts), this;
    }
    once(listener, immediate) {
      return this.add(listener, { once: true, immediate });
    }
    notify(...data) {
      this._event = data, super.notify(...data);
    }
    notifyUnsafe(...data) {
      this._event = data, super.notifyUnsafe(...data);
    }
    reset() {
      return this._event = RetainEmitterUndefined, this;
    }
    get data() {
      return this.isDataRetained ? this._event : void 0;
    }
    get isDataRetained() {
      return this._event !== RetainEmitterUndefined;
    }
  };
  var Resource = class {
    _index = -1;
    _id = -1;
    _engine;
    constructor(engine, index) {
      this._engine = engine, this._index = index, this._id = index;
    }
    get engine() {
      return this._engine;
    }
    get index() {
      return this._index;
    }
    equals(other) {
      return other ? this._index === other._index : false;
    }
    get isDestroyed() {
      return this._index <= 0;
    }
  };
  function createDestroyedProxy2(type) {
    return new Proxy({}, { get(_, param) {
      if (param === "isDestroyed")
        return true;
      throw new Error(`Cannot read '${param}' of destroyed ${type}`);
    }, set(_, param) {
      throw new Error(`Cannot write '${param}' of destroyed ${type}`);
    } });
  }
  var LogTag = ((LogTag2) => (LogTag2[LogTag2.Engine = 0] = "Engine", LogTag2[LogTag2.Scene = 1] = "Scene", LogTag2[LogTag2.Component = 2] = "Component", LogTag2))(LogTag || {});
  var Collider = ((Collider2) => (Collider2[Collider2.Sphere = 0] = "Sphere", Collider2[Collider2.AxisAlignedBox = 1] = "AxisAlignedBox", Collider2[Collider2.Box = 2] = "Box", Collider2))(Collider || {});
  var Alignment = ((Alignment2) => (Alignment2[Alignment2.Left = 0] = "Left", Alignment2[Alignment2.Center = 1] = "Center", Alignment2[Alignment2.Right = 2] = "Right", Alignment2))(Alignment || {});
  var VerticalAlignment = ((VerticalAlignment2) => (VerticalAlignment2[VerticalAlignment2.Line = 0] = "Line", VerticalAlignment2[VerticalAlignment2.Middle = 1] = "Middle", VerticalAlignment2[VerticalAlignment2.Top = 2] = "Top", VerticalAlignment2[VerticalAlignment2.Bottom = 3] = "Bottom", VerticalAlignment2))(VerticalAlignment || {});
  var TextEffect = ((TextEffect2) => (TextEffect2[TextEffect2.None = 0] = "None", TextEffect2[TextEffect2.Outline = 1] = "Outline", TextEffect2))(TextEffect || {});
  var TextWrapMode = ((TextWrapMode2) => (TextWrapMode2[TextWrapMode2.None = 0] = "None", TextWrapMode2[TextWrapMode2.Soft = 1] = "Soft", TextWrapMode2[TextWrapMode2.Hard = 2] = "Hard", TextWrapMode2[TextWrapMode2.Clip = 3] = "Clip", TextWrapMode2))(TextWrapMode || {});
  var InputType = ((InputType2) => (InputType2[InputType2.Head = 0] = "Head", InputType2[InputType2.EyeLeft = 1] = "EyeLeft", InputType2[InputType2.EyeRight = 2] = "EyeRight", InputType2[InputType2.ControllerLeft = 3] = "ControllerLeft", InputType2[InputType2.ControllerRight = 4] = "ControllerRight", InputType2[InputType2.RayLeft = 5] = "RayLeft", InputType2[InputType2.RayRight = 6] = "RayRight", InputType2))(InputType || {});
  var ProjectionType = ((ProjectionType2) => (ProjectionType2[ProjectionType2.Perspective = 0] = "Perspective", ProjectionType2[ProjectionType2.Orthographic = 1] = "Orthographic", ProjectionType2))(ProjectionType || {});
  var LightType = ((LightType2) => (LightType2[LightType2.Point = 0] = "Point", LightType2[LightType2.Spot = 1] = "Spot", LightType2[LightType2.Sun = 2] = "Sun", LightType2))(LightType || {});
  var AnimationState = ((AnimationState2) => (AnimationState2[AnimationState2.Playing = 0] = "Playing", AnimationState2[AnimationState2.Paused = 1] = "Paused", AnimationState2[AnimationState2.Stopped = 2] = "Stopped", AnimationState2))(AnimationState || {});
  var RootMotionMode = ((RootMotionMode2) => (RootMotionMode2[RootMotionMode2.None = 0] = "None", RootMotionMode2[RootMotionMode2.ApplyToOwner = 1] = "ApplyToOwner", RootMotionMode2[RootMotionMode2.Script = 2] = "Script", RootMotionMode2))(RootMotionMode || {});
  var ForceMode = ((ForceMode2) => (ForceMode2[ForceMode2.Force = 0] = "Force", ForceMode2[ForceMode2.Impulse = 1] = "Impulse", ForceMode2[ForceMode2.VelocityChange = 2] = "VelocityChange", ForceMode2[ForceMode2.Acceleration = 3] = "Acceleration", ForceMode2))(ForceMode || {});
  var CollisionEventType = ((CollisionEventType2) => (CollisionEventType2[CollisionEventType2.Touch = 0] = "Touch", CollisionEventType2[CollisionEventType2.TouchLost = 1] = "TouchLost", CollisionEventType2[CollisionEventType2.TriggerTouch = 2] = "TriggerTouch", CollisionEventType2[CollisionEventType2.TriggerTouchLost = 3] = "TriggerTouchLost", CollisionEventType2))(CollisionEventType || {});
  var Shape = ((Shape2) => (Shape2[Shape2.None = 0] = "None", Shape2[Shape2.Sphere = 1] = "Sphere", Shape2[Shape2.Capsule = 2] = "Capsule", Shape2[Shape2.Box = 3] = "Box", Shape2[Shape2.Plane = 4] = "Plane", Shape2[Shape2.ConvexMesh = 5] = "ConvexMesh", Shape2[Shape2.TriangleMesh = 6] = "TriangleMesh", Shape2))(Shape || {});
  var MeshAttribute = ((MeshAttribute2) => (MeshAttribute2[MeshAttribute2.Position = 0] = "Position", MeshAttribute2[MeshAttribute2.Tangent = 1] = "Tangent", MeshAttribute2[MeshAttribute2.Normal = 2] = "Normal", MeshAttribute2[MeshAttribute2.TextureCoordinate = 3] = "TextureCoordinate", MeshAttribute2[MeshAttribute2.Color = 4] = "Color", MeshAttribute2[MeshAttribute2.JointId = 5] = "JointId", MeshAttribute2[MeshAttribute2.JointWeight = 6] = "JointWeight", MeshAttribute2))(MeshAttribute || {});
  var DestroyedObjectInstance = createDestroyedProxy2("object");
  var DestroyedComponentInstance = createDestroyedProxy2("component");
  var DestroyedPrefabInstance = createDestroyedProxy2("prefab/scene");
  function isMeshShape(shape) {
    return shape === 5 || shape === 6;
  }
  function isBaseComponentClass(value) {
    return !!value && value.hasOwnProperty("_isBaseComponent") && value._isBaseComponent;
  }
  var SQRT_3 = Math.sqrt(3);
  var _a;
  var Component3 = (_a = class {
    static _pack(scene, id) {
      return scene << 22 | id;
    }
    static _inheritProperties() {
      inheritProperties(this);
    }
    _manager;
    _id;
    _localId;
    _object;
    _scene;
    constructor(scene, manager = -1, id = -1) {
      this._scene = scene, this._manager = manager, this._localId = id, this._id = _a._pack(scene._index, id), this._object = null;
    }
    get scene() {
      return this._scene;
    }
    get engine() {
      return this._scene.engine;
    }
    get type() {
      return this.constructor.TypeName;
    }
    get object() {
      if (!this._object) {
        let objectId = this.engine.wasm._wl_component_get_object(this._manager, this._id);
        this._object = this._scene.wrap(objectId);
      }
      return this._object;
    }
    set active(active) {
      this.engine.wasm._wl_component_setActive(this._manager, this._id, active);
    }
    get active() {
      return this.markedActive && this._scene.isActive;
    }
    get markedActive() {
      return this.engine.wasm._wl_component_isActive(this._manager, this._id) != 0;
    }
    copy(src) {
      let properties = this.constructor.Properties;
      if (!properties)
        return this;
      for (let name in properties) {
        let property2 = properties[name], value = src[name];
        if (value === void 0)
          continue;
        let cloner = property2.cloner ?? defaultPropertyCloner;
        this[name] = cloner.clone(property2.type, value);
      }
      return this;
    }
    destroy() {
      let manager = this._manager;
      manager < 0 || this._id < 0 || this.engine.wasm._wl_component_remove(manager, this._id);
    }
    equals(otherComponent) {
      return otherComponent ? this._manager === otherComponent._manager && this._id === otherComponent._id : false;
    }
    resetProperties() {
      let properties = this.constructor.Properties;
      if (!properties)
        return this;
      for (let name in properties) {
        let property2 = properties[name], cloner = property2.cloner ?? defaultPropertyCloner;
        this[name] = cloner.clone(property2.type, property2.default);
      }
      return this;
    }
    reset() {
      return this.resetProperties();
    }
    validateProperties() {
      let ctor = this.constructor;
      if (ctor.Properties) {
        for (let name in ctor.Properties)
          if (ctor.Properties[name].required && !this[name])
            throw new Error(`Property '${name}' is required but was not initialized`);
      }
    }
    toString() {
      return this.isDestroyed ? "Component(destroyed)" : `Component('${this.type}', ${this._localId})`;
    }
    get isDestroyed() {
      return this._id < 0;
    }
    _copy(src, offsetsPtr) {
      let wasm = this.engine.wasm, offsets = wasm.HEAPU32, offsetsStart = offsetsPtr >>> 2, destScene = this._scene, ctor = this.constructor;
      for (let name in ctor.Properties) {
        let value = src[name];
        if (value === null) {
          this[name] = null;
          continue;
        }
        let prop = ctor.Properties[name], offset2 = offsets[offsetsStart + prop.type], retargeted;
        switch (prop.type) {
          case 6: {
            let index = wasm._wl_object_index(value._id), id = wasm._wl_object_id(destScene._index, index + offset2);
            retargeted = destScene.wrap(id);
            break;
          }
          case 10:
            retargeted = destScene.animations.wrap(offset2 + value._index);
            break;
          case 11:
            retargeted = destScene.skins.wrap(offset2 + value._index);
            break;
          default:
            retargeted = (prop.cloner ?? defaultPropertyCloner).clone(prop.type, value);
            break;
        }
        this[name] = retargeted;
      }
      return this;
    }
    _triggerInit() {
      if (this.init)
        try {
          this.init();
        } catch (e) {
          this.engine.log.error(2, `Exception during ${this.type} init() on object ${this.object.name}`), this.engine.log.error(2, e);
        }
      let oldActivate = this.onActivate;
      this.onActivate = function() {
        this.onActivate = oldActivate;
        let failed = false;
        try {
          this.validateProperties();
        } catch (e) {
          this.engine.log.error(2, `Exception during ${this.type} validateProperties() on object ${this.object.name}`), this.engine.log.error(2, e), failed = true;
        }
        try {
          this.start?.();
        } catch (e) {
          this.engine.log.error(2, `Exception during ${this.type} start() on object ${this.object.name}`), this.engine.log.error(2, e), failed = true;
        }
        if (failed) {
          this.active = false;
          return;
        }
        if (this.onActivate)
          try {
            this.onActivate();
          } catch (e) {
            this.engine.log.error(2, `Exception during ${this.type} onActivate() on object ${this.object.name}`), this.engine.log.error(2, e);
          }
      };
    }
    _triggerUpdate(dt) {
      if (this.update)
        try {
          this.update(dt);
        } catch (e) {
          this.engine.log.error(2, `Exception during ${this.type} update() on object ${this.object.name}`), this.engine.log.error(2, e), this.engine.wasm._deactivate_component_on_error && (this.active = false);
        }
    }
    _triggerOnActivate() {
      if (this.onActivate)
        try {
          this.onActivate();
        } catch (e) {
          this.engine.log.error(2, `Exception during ${this.type} onActivate() on object ${this.object.name}`), this.engine.log.error(2, e);
        }
    }
    _triggerOnDeactivate() {
      if (this.onDeactivate)
        try {
          this.onDeactivate();
        } catch (e) {
          this.engine.log.error(2, `Exception during ${this.type} onDeactivate() on object ${this.object.name}`), this.engine.log.error(2, e);
        }
    }
    _triggerOnDestroy() {
      try {
        this.onDestroy && this.onDestroy();
      } catch (e) {
        this.engine.log.error(2, `Exception during ${this.type} onDestroy() on object ${this.object.name}`), this.engine.log.error(2, e);
      }
      this._scene._components.destroy(this);
    }
  }, __publicField(_a, "_isBaseComponent", true), __publicField(_a, "_propertyOrder", []), __publicField(_a, "TypeName"), __publicField(_a, "Properties"), __publicField(_a, "InheritProperties"), __publicField(_a, "onRegister"), _a);
  var _a2;
  var BrokenComponent = (_a2 = class extends Component3 {
  }, __publicField(_a2, "TypeName", "__broken-component__"), _a2);
  function inheritProperties(target) {
    if (!target.TypeName)
      return;
    let chain = [], curr = target;
    for (; curr && !isBaseComponentClass(curr); ) {
      let comp = curr;
      if (!(comp.hasOwnProperty("InheritProperties") ? comp.InheritProperties : true))
        break;
      comp.hasOwnProperty("Properties") && chain.push(comp), curr = Object.getPrototypeOf(curr);
    }
    if (!chain.length || chain.length === 1 && chain[0] === target)
      return;
    let merged = {};
    for (let i = chain.length - 1; i >= 0; --i)
      Object.assign(merged, chain[i].Properties);
    target.Properties = merged;
  }
  var _a3;
  var CollisionComponent = (_a3 = class extends Component3 {
    getExtents(out = new Float32Array(3)) {
      let wasm = this.engine.wasm, ptr = wasm._wl_collision_component_get_extents(this._id) / 4;
      return out[0] = wasm.HEAPF32[ptr], out[1] = wasm.HEAPF32[ptr + 1], out[2] = wasm.HEAPF32[ptr + 2], out;
    }
    get collider() {
      return this.engine.wasm._wl_collision_component_get_collider(this._id);
    }
    set collider(collider) {
      this.engine.wasm._wl_collision_component_set_collider(this._id, collider);
    }
    get extents() {
      let wasm = this.engine.wasm;
      return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_collision_component_get_extents(this._id), 3);
    }
    set extents(extents) {
      let wasm = this.engine.wasm, ptr = wasm._wl_collision_component_get_extents(this._id) / 4;
      wasm.HEAPF32[ptr] = extents[0], wasm.HEAPF32[ptr + 1] = extents[1], wasm.HEAPF32[ptr + 2] = extents[2];
    }
    get radius() {
      let wasm = this.engine.wasm;
      if (this.collider === 0)
        return wasm.HEAPF32[wasm._wl_collision_component_get_extents(this._id) >> 2];
      let extents = new Float32Array(wasm.HEAPF32.buffer, wasm._wl_collision_component_get_extents(this._id), 3), x2 = extents[0] * extents[0], y2 = extents[1] * extents[1], z2 = extents[2] * extents[2];
      return Math.sqrt(x2 + y2 + z2) / 2;
    }
    set radius(radius) {
      let length5 = this.collider === 0 ? radius : 2 * radius / SQRT_3;
      this.extents.set([length5, length5, length5]);
    }
    get group() {
      return this.engine.wasm._wl_collision_component_get_group(this._id);
    }
    set group(group) {
      this.engine.wasm._wl_collision_component_set_group(this._id, group);
    }
    queryOverlaps() {
      let count = this.engine.wasm._wl_collision_component_query_overlaps(this._id, this.engine.wasm._tempMem, this.engine.wasm._tempMemSize >> 1), overlaps = new Array(count);
      for (let i = 0; i < count; ++i) {
        let id = this.engine.wasm._tempMemUint16[i];
        overlaps[i] = this._scene._components.wrapCollision(id);
      }
      return overlaps;
    }
  }, __publicField(_a3, "TypeName", "collision"), _a3);
  __decorateClass([nativeProperty()], CollisionComponent.prototype, "collider", 1), __decorateClass([nativeProperty()], CollisionComponent.prototype, "extents", 1), __decorateClass([nativeProperty()], CollisionComponent.prototype, "group", 1);
  var _a4;
  var TextComponent = (_a4 = class extends Component3 {
    get alignment() {
      return this.engine.wasm._wl_text_component_get_horizontal_alignment(this._id);
    }
    set alignment(alignment) {
      this.engine.wasm._wl_text_component_set_horizontal_alignment(this._id, alignment);
    }
    get verticalAlignment() {
      return this.engine.wasm._wl_text_component_get_vertical_alignment(this._id);
    }
    set verticalAlignment(verticalAlignment) {
      this.engine.wasm._wl_text_component_set_vertical_alignment(this._id, verticalAlignment);
    }
    get justification() {
      return this.verticalAlignment;
    }
    set justification(justification) {
      this.verticalAlignment = justification;
    }
    get characterSpacing() {
      return this.engine.wasm._wl_text_component_get_character_spacing(this._id);
    }
    set characterSpacing(spacing) {
      this.engine.wasm._wl_text_component_set_character_spacing(this._id, spacing);
    }
    get lineSpacing() {
      return this.engine.wasm._wl_text_component_get_line_spacing(this._id);
    }
    set lineSpacing(spacing) {
      this.engine.wasm._wl_text_component_set_line_spacing(this._id, spacing);
    }
    get effect() {
      return this.engine.wasm._wl_text_component_get_effect(this._id);
    }
    set effect(effect) {
      this.engine.wasm._wl_text_component_set_effect(this._id, effect);
    }
    get wrapMode() {
      return this.engine.wasm._wl_text_component_get_wrapMode(this._id);
    }
    set wrapMode(wrapMode) {
      this.engine.wasm._wl_text_component_set_wrapMode(this._id, wrapMode);
    }
    get wrapWidth() {
      return this.engine.wasm._wl_text_component_get_wrapWidth(this._id);
    }
    set wrapWidth(width) {
      this.engine.wasm._wl_text_component_set_wrapWidth(this._id, width);
    }
    get text() {
      let wasm = this.engine.wasm, ptr = wasm._wl_text_component_get_text(this._id);
      return wasm.UTF8ToString(ptr);
    }
    set text(text) {
      let wasm = this.engine.wasm;
      wasm._wl_text_component_set_text(this._id, wasm.tempUTF8(text.toString()));
    }
    set material(material) {
      let matIndex = material ? material._id : 0;
      this.engine.wasm._wl_text_component_set_material(this._id, matIndex);
    }
    get material() {
      let index = this.engine.wasm._wl_text_component_get_material(this._id);
      return this.engine.materials.wrap(index);
    }
    getBoundingBoxForText(text, out = new Float32Array(4)) {
      let wasm = this.engine.wasm, textPtr = wasm.tempUTF8(text, 4 * 4);
      return this.engine.wasm._wl_text_component_get_boundingBox(this._id, textPtr, wasm._tempMem), out[0] = wasm._tempMemFloat[0], out[1] = wasm._tempMemFloat[1], out[2] = wasm._tempMemFloat[2], out[3] = wasm._tempMemFloat[3], out;
    }
    getBoundingBox(out = new Float32Array(4)) {
      let wasm = this.engine.wasm;
      return this.engine.wasm._wl_text_component_get_boundingBox(this._id, 0, wasm._tempMem), out[0] = wasm._tempMemFloat[0], out[1] = wasm._tempMemFloat[1], out[2] = wasm._tempMemFloat[2], out[3] = wasm._tempMemFloat[3], out;
    }
  }, __publicField(_a4, "TypeName", "text"), _a4);
  __decorateClass([nativeProperty()], TextComponent.prototype, "alignment", 1), __decorateClass([nativeProperty()], TextComponent.prototype, "verticalAlignment", 1), __decorateClass([nativeProperty()], TextComponent.prototype, "justification", 1), __decorateClass([nativeProperty()], TextComponent.prototype, "characterSpacing", 1), __decorateClass([nativeProperty()], TextComponent.prototype, "lineSpacing", 1), __decorateClass([nativeProperty()], TextComponent.prototype, "effect", 1), __decorateClass([nativeProperty()], TextComponent.prototype, "wrapMode", 1), __decorateClass([nativeProperty()], TextComponent.prototype, "wrapWidth", 1), __decorateClass([nativeProperty()], TextComponent.prototype, "text", 1), __decorateClass([nativeProperty()], TextComponent.prototype, "material", 1);
  var _a5;
  var ViewComponent = (_a5 = class extends Component3 {
    get projectionType() {
      return this.engine.wasm._wl_view_component_get_projectionType(this._id);
    }
    set projectionType(type) {
      this.engine.wasm._wl_view_component_set_projectionType(this._id, type);
    }
    getProjectionMatrix(out = new Float32Array(16)) {
      let wasm = this.engine.wasm, ptr = wasm._wl_view_component_get_projection_matrix(this._id) / 4;
      for (let i = 0; i < 16; ++i)
        out[i] = wasm.HEAPF32[ptr + i];
      return out;
    }
    get projectionMatrix() {
      let wasm = this.engine.wasm;
      return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_view_component_get_projection_matrix(this._id), 16);
    }
    get near() {
      return this.engine.wasm._wl_view_component_get_near(this._id);
    }
    set near(near) {
      this.engine.wasm._wl_view_component_set_near(this._id, near);
    }
    get far() {
      return this.engine.wasm._wl_view_component_get_far(this._id);
    }
    set far(far) {
      this.engine.wasm._wl_view_component_set_far(this._id, far);
    }
    get fov() {
      return this.engine.wasm._wl_view_component_get_fov(this._id);
    }
    set fov(fov) {
      this.engine.wasm._wl_view_component_set_fov(this._id, fov);
    }
    get extent() {
      return this.engine.wasm._wl_view_component_get_extent(this._id);
    }
    set extent(extent) {
      this.engine.wasm._wl_view_component_set_extent(this._id, extent);
    }
  }, __publicField(_a5, "TypeName", "view"), _a5);
  __decorateClass([nativeProperty()], ViewComponent.prototype, "projectionType", 1), __decorateClass([enumerable()], ViewComponent.prototype, "projectionMatrix", 1), __decorateClass([nativeProperty()], ViewComponent.prototype, "near", 1), __decorateClass([nativeProperty()], ViewComponent.prototype, "far", 1), __decorateClass([nativeProperty()], ViewComponent.prototype, "fov", 1), __decorateClass([nativeProperty()], ViewComponent.prototype, "extent", 1);
  var _a6;
  var InputComponent = (_a6 = class extends Component3 {
    get inputType() {
      return this.engine.wasm._wl_input_component_get_type(this._id);
    }
    set inputType(type) {
      this.engine.wasm._wl_input_component_set_type(this._id, type);
    }
    get xrInputSource() {
      let xr = this.engine.xr;
      if (!xr)
        return null;
      for (let inputSource of xr.session.inputSources)
        if (inputSource.handedness == this.handedness)
          return inputSource;
      return null;
    }
    get handedness() {
      let inputType = this.inputType;
      return inputType == 4 || inputType == 6 || inputType == 2 ? "right" : inputType == 3 || inputType == 5 || inputType == 1 ? "left" : null;
    }
  }, __publicField(_a6, "TypeName", "input"), _a6);
  __decorateClass([nativeProperty()], InputComponent.prototype, "inputType", 1), __decorateClass([enumerable()], InputComponent.prototype, "xrInputSource", 1), __decorateClass([enumerable()], InputComponent.prototype, "handedness", 1);
  var _a7;
  var LightComponent = (_a7 = class extends Component3 {
    getColor(out = new Float32Array(3)) {
      let wasm = this.engine.wasm, ptr = wasm._wl_light_component_get_color(this._id) / 4;
      return out[0] = wasm.HEAPF32[ptr], out[1] = wasm.HEAPF32[ptr + 1], out[2] = wasm.HEAPF32[ptr + 2], out;
    }
    setColor(c) {
      let wasm = this.engine.wasm, ptr = wasm._wl_light_component_get_color(this._id) / 4;
      wasm.HEAPF32[ptr] = c[0], wasm.HEAPF32[ptr + 1] = c[1], wasm.HEAPF32[ptr + 2] = c[2];
    }
    get color() {
      let wasm = this.engine.wasm;
      return new Float32Array(wasm.HEAPF32.buffer, wasm._wl_light_component_get_color(this._id), 3);
    }
    set color(c) {
      this.color.set(c);
    }
    get lightType() {
      return this.engine.wasm._wl_light_component_get_type(this._id);
    }
    set lightType(t) {
      this.engine.wasm._wl_light_component_set_type(this._id, t);
    }
    get intensity() {
      return this.engine.wasm._wl_light_component_get_intensity(this._id);
    }
    set intensity(intensity) {
      this.engine.wasm._wl_light_component_set_intensity(this._id, intensity);
    }
    get outerAngle() {
      return this.engine.wasm._wl_light_component_get_outerAngle(this._id);
    }
    set outerAngle(angle2) {
      this.engine.wasm._wl_light_component_set_outerAngle(this._id, angle2);
    }
    get innerAngle() {
      return this.engine.wasm._wl_light_component_get_innerAngle(this._id);
    }
    set innerAngle(angle2) {
      this.engine.wasm._wl_light_component_set_innerAngle(this._id, angle2);
    }
    get shadows() {
      return !!this.engine.wasm._wl_light_component_get_shadows(this._id);
    }
    set shadows(b) {
      this.engine.wasm._wl_light_component_set_shadows(this._id, b);
    }
    get shadowRange() {
      return this.engine.wasm._wl_light_component_get_shadowRange(this._id);
    }
    set shadowRange(range) {
      this.engine.wasm._wl_light_component_set_shadowRange(this._id, range);
    }
    get shadowBias() {
      return this.engine.wasm._wl_light_component_get_shadowBias(this._id);
    }
    set shadowBias(bias) {
      this.engine.wasm._wl_light_component_set_shadowBias(this._id, bias);
    }
    get shadowNormalBias() {
      return this.engine.wasm._wl_light_component_get_shadowNormalBias(this._id);
    }
    set shadowNormalBias(bias) {
      this.engine.wasm._wl_light_component_set_shadowNormalBias(this._id, bias);
    }
    get shadowTexelSize() {
      return this.engine.wasm._wl_light_component_get_shadowTexelSize(this._id);
    }
    set shadowTexelSize(size) {
      this.engine.wasm._wl_light_component_set_shadowTexelSize(this._id, size);
    }
    get cascadeCount() {
      return this.engine.wasm._wl_light_component_get_cascadeCount(this._id);
    }
    set cascadeCount(count) {
      this.engine.wasm._wl_light_component_set_cascadeCount(this._id, count);
    }
  }, __publicField(_a7, "TypeName", "light"), _a7);
  __decorateClass([nativeProperty()], LightComponent.prototype, "color", 1), __decorateClass([nativeProperty()], LightComponent.prototype, "lightType", 1), __decorateClass([nativeProperty()], LightComponent.prototype, "intensity", 1), __decorateClass([nativeProperty()], LightComponent.prototype, "outerAngle", 1), __decorateClass([nativeProperty()], LightComponent.prototype, "innerAngle", 1), __decorateClass([nativeProperty()], LightComponent.prototype, "shadows", 1), __decorateClass([nativeProperty()], LightComponent.prototype, "shadowRange", 1), __decorateClass([nativeProperty()], LightComponent.prototype, "shadowBias", 1), __decorateClass([nativeProperty()], LightComponent.prototype, "shadowNormalBias", 1), __decorateClass([nativeProperty()], LightComponent.prototype, "shadowTexelSize", 1), __decorateClass([nativeProperty()], LightComponent.prototype, "cascadeCount", 1);
  var _a8;
  var AnimationComponent = (_a8 = class extends Component3 {
    onEvent = new Emitter();
    set animation(anim) {
      this.scene.assertOrigin(anim), this.engine.wasm._wl_animation_component_set_animation(this._id, anim ? anim._id : 0);
    }
    get animation() {
      let index = this.engine.wasm._wl_animation_component_get_animation(this._id);
      return this._scene.animations.wrap(index);
    }
    set playCount(playCount) {
      this.engine.wasm._wl_animation_component_set_playCount(this._id, playCount);
    }
    get playCount() {
      return this.engine.wasm._wl_animation_component_get_playCount(this._id);
    }
    set speed(speed) {
      this.engine.wasm._wl_animation_component_set_speed(this._id, speed);
    }
    get speed() {
      return this.engine.wasm._wl_animation_component_get_speed(this._id);
    }
    get state() {
      return this.engine.wasm._wl_animation_component_state(this._id);
    }
    get rootMotionMode() {
      return this.engine.wasm._wl_animation_component_get_rootMotionMode(this._id);
    }
    set rootMotionMode(mode) {
      this.engine.wasm._wl_animation_component_set_rootMotionMode(this._id, mode);
    }
    get iteration() {
      return this.engine.wasm._wl_animation_component_get_iteration(this._id);
    }
    get position() {
      return this.engine.wasm._wl_animation_component_get_position(this._id);
    }
    get duration() {
      return this.engine.wasm._wl_animation_component_get_duration(this._id);
    }
    play() {
      this.engine.wasm._wl_animation_component_play(this._id);
    }
    stop() {
      this.engine.wasm._wl_animation_component_stop(this._id);
    }
    pause() {
      this.engine.wasm._wl_animation_component_pause(this._id);
    }
    getFloatParameter(name) {
      let wasm = this.engine.wasm, index = wasm._wl_animation_component_getGraphParamIndex(this._id, wasm.tempUTF8(name));
      if (index === -1)
        throw Error(`Missing parameter '${name}'`);
      return wasm._wl_animation_component_getGraphParamValue(this._id, index, wasm._tempMem), wasm._tempMemFloat[0];
    }
    setFloatParameter(name, value) {
      let wasm = this.engine.wasm, index = wasm._wl_animation_component_getGraphParamIndex(this._id, wasm.tempUTF8(name));
      if (index === -1)
        throw Error(`Missing parameter '${name}'`);
      wasm._tempMemFloat[0] = value, wasm._wl_animation_component_setGraphParamValue(this._id, index, wasm._tempMem);
    }
    getRootMotionTranslation(out = new Float32Array(3)) {
      let wasm = this.engine.wasm;
      return wasm._wl_animation_component_get_rootMotion_translation(this._id, wasm._tempMem), out[0] = wasm._tempMemFloat[0], out[1] = wasm._tempMemFloat[1], out[2] = wasm._tempMemFloat[2], out;
    }
    getRootMotionRotation(out = new Float32Array(3)) {
      let wasm = this.engine.wasm;
      return wasm._wl_animation_component_get_rootMotion_rotation(this._id, wasm._tempMem), out[0] = wasm._tempMemFloat[0], out[1] = wasm._tempMemFloat[1], out[2] = wasm._tempMemFloat[2], out;
    }
  }, __publicField(_a8, "TypeName", "animation"), _a8);
  __decorateClass([nativeProperty()], AnimationComponent.prototype, "animation", 1), __decorateClass([nativeProperty()], AnimationComponent.prototype, "playCount", 1), __decorateClass([nativeProperty()], AnimationComponent.prototype, "speed", 1), __decorateClass([enumerable()], AnimationComponent.prototype, "state", 1), __decorateClass([nativeProperty(), enumerable()], AnimationComponent.prototype, "rootMotionMode", 1);
  var _a9;
  var MeshComponent = (_a9 = class extends Component3 {
    set material(material) {
      this.engine.wasm._wl_mesh_component_set_material(this._id, material ? material._id : 0);
    }
    get material() {
      let index = this.engine.wasm._wl_mesh_component_get_material(this._id);
      return this.engine.materials.wrap(index);
    }
    get mesh() {
      let index = this.engine.wasm._wl_mesh_component_get_mesh(this._id);
      return this.engine.meshes.wrap(index);
    }
    set mesh(mesh) {
      this.engine.wasm._wl_mesh_component_set_mesh(this._id, mesh?._id ?? 0);
    }
    get skin() {
      let index = this.engine.wasm._wl_mesh_component_get_skin(this._id);
      return this._scene.skins.wrap(index);
    }
    set skin(skin) {
      this.scene.assertOrigin(skin), this.engine.wasm._wl_mesh_component_set_skin(this._id, skin ? skin._id : 0);
    }
    get morphTargets() {
      let index = this.engine.wasm._wl_mesh_component_get_morph_targets(this._id);
      return this.engine.morphTargets.wrap(index);
    }
    set morphTargets(morphTargets) {
      this.engine.wasm._wl_mesh_component_set_morph_targets(this._id, morphTargets?._id ?? 0);
    }
    get morphTargetWeights() {
      return this.getMorphTargetWeights();
    }
    set morphTargetWeights(weights) {
      this.setMorphTargetWeights(weights);
    }
    getMorphTargetWeights(out) {
      let wasm = this.engine.wasm, count = wasm._wl_mesh_component_get_morph_target_weights(this._id, wasm._tempMem);
      out || (out = new Float32Array(count));
      for (let i = 0; i < count; ++i)
        out[i] = wasm._tempMemFloat[i];
      return out;
    }
    getMorphTargetWeight(target) {
      let count = this.morphTargets?.count ?? 0;
      if (target >= count)
        throw new Error(`Index ${target} is out of bounds for ${count} targets`);
      return this.engine.wasm._wl_mesh_component_get_morph_target_weight(this._id, target);
    }
    setMorphTargetWeights(weights) {
      let count = this.morphTargets?.count ?? 0;
      if (weights.length !== count)
        throw new Error(`Expected ${count} weights but got ${weights.length}`);
      let wasm = this.engine.wasm;
      wasm._tempMemFloat.set(weights), wasm._wl_mesh_component_set_morph_target_weights(this._id, wasm._tempMem, weights.length);
    }
    setMorphTargetWeight(target, weight) {
      let count = this.morphTargets?.count ?? 0;
      if (target >= count)
        throw new Error(`Index ${target} is out of bounds for ${count} targets`);
      this.engine.wasm._wl_mesh_component_set_morph_target_weight(this._id, target, weight);
    }
  }, __publicField(_a9, "TypeName", "mesh"), _a9);
  __decorateClass([nativeProperty()], MeshComponent.prototype, "material", 1), __decorateClass([nativeProperty()], MeshComponent.prototype, "mesh", 1), __decorateClass([nativeProperty()], MeshComponent.prototype, "skin", 1), __decorateClass([nativeProperty()], MeshComponent.prototype, "morphTargets", 1), __decorateClass([nativeProperty()], MeshComponent.prototype, "morphTargetWeights", 1);
  var LockAxis = ((LockAxis2) => (LockAxis2[LockAxis2.None = 0] = "None", LockAxis2[LockAxis2.X = 1] = "X", LockAxis2[LockAxis2.Y = 2] = "Y", LockAxis2[LockAxis2.Z = 4] = "Z", LockAxis2))(LockAxis || {});
  var _a10;
  var PhysXComponent = (_a10 = class extends Component3 {
    getTranslationOffset(out = new Float32Array(3)) {
      let wasm = this.engine.wasm;
      return wasm._wl_physx_component_get_offsetTranslation(this._id, wasm._tempMem), out[0] = wasm._tempMemFloat[0], out[1] = wasm._tempMemFloat[1], out[2] = wasm._tempMemFloat[2], out;
    }
    getRotationOffset(out = new Float32Array(4)) {
      let wasm = this.engine.wasm, ptr = wasm._wl_physx_component_get_offsetTransform(this._id) >> 2;
      return out[0] = wasm.HEAPF32[ptr], out[1] = wasm.HEAPF32[ptr + 1], out[2] = wasm.HEAPF32[ptr + 2], out[3] = wasm.HEAPF32[ptr + 3], out;
    }
    getExtents(out = new Float32Array(3)) {
      let wasm = this.engine.wasm, ptr = wasm._wl_physx_component_get_extents(this._id) / 4;
      return out[0] = wasm.HEAPF32[ptr], out[1] = wasm.HEAPF32[ptr + 1], out[2] = wasm.HEAPF32[ptr + 2], out;
    }
    getLinearVelocity(out = new Float32Array(3)) {
      let wasm = this.engine.wasm, tempMemFloat = wasm._tempMemFloat;
      return wasm._wl_physx_component_get_linearVelocity(this._id, wasm._tempMem), out[0] = tempMemFloat[0], out[1] = tempMemFloat[1], out[2] = tempMemFloat[2], out;
    }
    getAngularVelocity(out = new Float32Array(3)) {
      let wasm = this.engine.wasm, tempMemFloat = wasm._tempMemFloat;
      return wasm._wl_physx_component_get_angularVelocity(this._id, wasm._tempMem), out[0] = tempMemFloat[0], out[1] = tempMemFloat[1], out[2] = tempMemFloat[2], out;
    }
    set static(b) {
      this.engine.wasm._wl_physx_component_set_static(this._id, b);
    }
    get static() {
      return !!this.engine.wasm._wl_physx_component_get_static(this._id);
    }
    get translationOffset() {
      return this.getTranslationOffset();
    }
    set translationOffset(offset2) {
      this.engine.wasm._wl_physx_component_set_offsetTranslation(this._id, offset2[0], offset2[1], offset2[2]);
    }
    get rotationOffset() {
      return this.getRotationOffset();
    }
    set rotationOffset(offset2) {
      this.engine.wasm._wl_physx_component_set_offsetRotation(this._id, offset2[0], offset2[1], offset2[2], offset2[3]);
    }
    set kinematic(b) {
      this.engine.wasm._wl_physx_component_set_kinematic(this._id, b);
    }
    get kinematic() {
      return !!this.engine.wasm._wl_physx_component_get_kinematic(this._id);
    }
    set gravity(b) {
      this.engine.wasm._wl_physx_component_set_gravity(this._id, b);
    }
    get gravity() {
      return !!this.engine.wasm._wl_physx_component_get_gravity(this._id);
    }
    set simulate(b) {
      this.engine.wasm._wl_physx_component_set_simulate(this._id, b);
    }
    get simulate() {
      return !!this.engine.wasm._wl_physx_component_get_simulate(this._id);
    }
    set allowSimulation(b) {
      this.engine.wasm._wl_physx_component_set_allowSimulation(this._id, b);
    }
    get allowSimulation() {
      return !!this.engine.wasm._wl_physx_component_get_allowSimulation(this._id);
    }
    set allowQuery(b) {
      this.engine.wasm._wl_physx_component_set_allowQuery(this._id, b);
    }
    get allowQuery() {
      return !!this.engine.wasm._wl_physx_component_get_allowQuery(this._id);
    }
    set trigger(b) {
      this.engine.wasm._wl_physx_component_set_trigger(this._id, b);
    }
    get trigger() {
      return !!this.engine.wasm._wl_physx_component_get_trigger(this._id);
    }
    set shape(s) {
      this.engine.wasm._wl_physx_component_set_shape(this._id, s);
    }
    get shape() {
      return this.engine.wasm._wl_physx_component_get_shape(this._id);
    }
    set shapeData(d) {
      d == null || !isMeshShape(this.shape) || this.engine.wasm._wl_physx_component_set_shape_data(this._id, d.index);
    }
    get shapeData() {
      return isMeshShape(this.shape) ? { index: this.engine.wasm._wl_physx_component_get_shape_data(this._id) } : null;
    }
    set extents(e) {
      this.extents.set(e);
    }
    get extents() {
      let wasm = this.engine.wasm, ptr = wasm._wl_physx_component_get_extents(this._id);
      return new Float32Array(wasm.HEAPF32.buffer, ptr, 3);
    }
    get staticFriction() {
      return this.engine.wasm._wl_physx_component_get_staticFriction(this._id);
    }
    set staticFriction(v) {
      this.engine.wasm._wl_physx_component_set_staticFriction(this._id, v);
    }
    get dynamicFriction() {
      return this.engine.wasm._wl_physx_component_get_dynamicFriction(this._id);
    }
    set dynamicFriction(v) {
      this.engine.wasm._wl_physx_component_set_dynamicFriction(this._id, v);
    }
    get bounciness() {
      return this.engine.wasm._wl_physx_component_get_bounciness(this._id);
    }
    set bounciness(v) {
      this.engine.wasm._wl_physx_component_set_bounciness(this._id, v);
    }
    get linearDamping() {
      return this.engine.wasm._wl_physx_component_get_linearDamping(this._id);
    }
    set linearDamping(v) {
      this.engine.wasm._wl_physx_component_set_linearDamping(this._id, v);
    }
    get angularDamping() {
      return this.engine.wasm._wl_physx_component_get_angularDamping(this._id);
    }
    set angularDamping(v) {
      this.engine.wasm._wl_physx_component_set_angularDamping(this._id, v);
    }
    set linearVelocity(v) {
      this.engine.wasm._wl_physx_component_set_linearVelocity(this._id, v[0], v[1], v[2]);
    }
    get linearVelocity() {
      let wasm = this.engine.wasm;
      return wasm._wl_physx_component_get_linearVelocity(this._id, wasm._tempMem), new Float32Array(wasm.HEAPF32.buffer, wasm._tempMem, 3);
    }
    set angularVelocity(v) {
      this.engine.wasm._wl_physx_component_set_angularVelocity(this._id, v[0], v[1], v[2]);
    }
    get angularVelocity() {
      let wasm = this.engine.wasm;
      return wasm._wl_physx_component_get_angularVelocity(this._id, wasm._tempMem), new Float32Array(wasm.HEAPF32.buffer, wasm._tempMem, 3);
    }
    set groupsMask(flags) {
      this.engine.wasm._wl_physx_component_set_groupsMask(this._id, flags);
    }
    get groupsMask() {
      return this.engine.wasm._wl_physx_component_get_groupsMask(this._id);
    }
    set blocksMask(flags) {
      this.engine.wasm._wl_physx_component_set_blocksMask(this._id, flags);
    }
    get blocksMask() {
      return this.engine.wasm._wl_physx_component_get_blocksMask(this._id);
    }
    set linearLockAxis(lock) {
      this.engine.wasm._wl_physx_component_set_linearLockAxis(this._id, lock);
    }
    get linearLockAxis() {
      return this.engine.wasm._wl_physx_component_get_linearLockAxis(this._id);
    }
    set angularLockAxis(lock) {
      this.engine.wasm._wl_physx_component_set_angularLockAxis(this._id, lock);
    }
    get angularLockAxis() {
      return this.engine.wasm._wl_physx_component_get_angularLockAxis(this._id);
    }
    set mass(m) {
      this.engine.wasm._wl_physx_component_set_mass(this._id, m);
    }
    get mass() {
      return this.engine.wasm._wl_physx_component_get_mass(this._id);
    }
    set massSpaceInteriaTensor(v) {
      this.engine.wasm._wl_physx_component_set_massSpaceInertiaTensor(this._id, v[0], v[1], v[2]);
    }
    set sleepOnActivate(flag) {
      this.engine.wasm._wl_physx_component_set_sleepOnActivate(this._id, flag);
    }
    get sleepOnActivate() {
      return !!this.engine.wasm._wl_physx_component_get_sleepOnActivate(this._id);
    }
    addForce(f, m = 0, localForce = false, p, local = false) {
      let wasm = this.engine.wasm;
      if (!p) {
        wasm._wl_physx_component_addForce(this._id, f[0], f[1], f[2], m, localForce);
        return;
      }
      wasm._wl_physx_component_addForceAt(this._id, f[0], f[1], f[2], m, localForce, p[0], p[1], p[2], local);
    }
    addTorque(f, m = 0) {
      this.engine.wasm._wl_physx_component_addTorque(this._id, f[0], f[1], f[2], m);
    }
    onCollision(callback) {
      return this.onCollisionWith(this, callback);
    }
    onCollisionWith(otherComp, callback) {
      let callbacks = this.scene._pxCallbacks;
      return callbacks.has(this._id) || callbacks.set(this._id, []), callbacks.get(this._id).push(callback), this.engine.wasm._wl_physx_component_addCallback(this._id, otherComp._id);
    }
    removeCollisionCallback(callbackId) {
      let r = this.engine.wasm._wl_physx_component_removeCallback(this._id, callbackId), callbacks = this.scene._pxCallbacks;
      r && callbacks.get(this._id).splice(-r);
    }
  }, __publicField(_a10, "TypeName", "physx"), _a10);
  __decorateClass([nativeProperty()], PhysXComponent.prototype, "static", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "translationOffset", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "rotationOffset", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "kinematic", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "gravity", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "simulate", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "allowSimulation", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "allowQuery", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "trigger", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "shape", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "shapeData", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "extents", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "staticFriction", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "dynamicFriction", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "bounciness", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "linearDamping", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "angularDamping", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "linearVelocity", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "angularVelocity", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "groupsMask", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "blocksMask", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "linearLockAxis", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "angularLockAxis", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "mass", 1), __decorateClass([nativeProperty()], PhysXComponent.prototype, "sleepOnActivate", 1);
  var MeshIndexType = ((MeshIndexType2) => (MeshIndexType2[MeshIndexType2.UnsignedByte = 1] = "UnsignedByte", MeshIndexType2[MeshIndexType2.UnsignedShort = 2] = "UnsignedShort", MeshIndexType2[MeshIndexType2.UnsignedInt = 4] = "UnsignedInt", MeshIndexType2))(MeshIndexType || {});
  var MeshSkinningType = ((MeshSkinningType2) => (MeshSkinningType2[MeshSkinningType2.None = 0] = "None", MeshSkinningType2[MeshSkinningType2.FourJoints = 1] = "FourJoints", MeshSkinningType2[MeshSkinningType2.EightJoints = 2] = "EightJoints", MeshSkinningType2))(MeshSkinningType || {});
  var Mesh = class extends Resource {
    constructor(engine, params) {
      if (!isNumber(params)) {
        let mesh = engine.meshes.create(params);
        return super(engine, mesh._index), mesh;
      }
      super(engine, params);
    }
    get vertexCount() {
      return this.engine.wasm._wl_mesh_get_vertexCount(this._id);
    }
    get indexData() {
      let wasm = this.engine.wasm, tempMem = wasm._tempMem, ptr = wasm._wl_mesh_get_indexData(this._id, tempMem, tempMem + 4);
      if (ptr === null)
        return null;
      let indexCount = wasm.HEAPU32[tempMem / 4];
      switch (wasm.HEAPU32[tempMem / 4 + 1]) {
        case 1:
          return new Uint8Array(wasm.HEAPU8.buffer, ptr, indexCount);
        case 2:
          return new Uint16Array(wasm.HEAPU16.buffer, ptr, indexCount);
        case 4:
          return new Uint32Array(wasm.HEAPU32.buffer, ptr, indexCount);
      }
      return null;
    }
    update() {
      this.engine.wasm._wl_mesh_update(this._id);
    }
    getBoundingSphere(out = new Float32Array(4)) {
      let wasm = this.engine.wasm;
      return this.engine.wasm._wl_mesh_get_boundingSphere(this._id, wasm._tempMem), out[0] = wasm._tempMemFloat[0], out[1] = wasm._tempMemFloat[1], out[2] = wasm._tempMemFloat[2], out[3] = wasm._tempMemFloat[3], out;
    }
    attribute(attr) {
      if (typeof attr != "number")
        throw new TypeError("Expected number, but got " + typeof attr);
      let wasm = this.engine.wasm, tempMemUint32 = wasm._tempMemUint32;
      if (wasm._wl_mesh_get_attribute(this._id, attr, wasm._tempMem), tempMemUint32[0] == 255)
        return null;
      let arraySize = tempMemUint32[5];
      return new MeshAttributeAccessor(this.engine, { attribute: tempMemUint32[0], offset: tempMemUint32[1], stride: tempMemUint32[2], formatSize: tempMemUint32[3], componentCount: tempMemUint32[4], arraySize: arraySize || 1, length: this.vertexCount, bufferType: attr !== 5 ? Float32Array : Uint16Array });
    }
    destroy() {
      this.engine.wasm._wl_mesh_destroy(this._id), this.engine.meshes._destroy(this);
    }
    toString() {
      return this.isDestroyed ? "Mesh(destroyed)" : `Mesh(${this._index})`;
    }
  };
  var MeshAttributeAccessor = class {
    length = 0;
    _engine;
    _attribute = -1;
    _offset = 0;
    _stride = 0;
    _formatSize = 0;
    _componentCount = 0;
    _arraySize = 1;
    _bufferType;
    _tempBufferGetter;
    constructor(engine, options) {
      this._engine = engine;
      let wasm = this._engine.wasm;
      this._attribute = options.attribute, this._offset = options.offset, this._stride = options.stride, this._formatSize = options.formatSize, this._componentCount = options.componentCount, this._arraySize = options.arraySize, this._bufferType = options.bufferType, this.length = options.length, this._tempBufferGetter = this._bufferType === Float32Array ? wasm.getTempBufferF32.bind(wasm) : wasm.getTempBufferU16.bind(wasm);
    }
    createArray(count = 1) {
      return count = count > this.length ? this.length : count, new this._bufferType(count * this._componentCount * this._arraySize);
    }
    get(index, out = this.createArray()) {
      if (out.length % this._componentCount !== 0)
        throw new Error(`out.length, ${out.length} is not a multiple of the attribute vector components, ${this._componentCount}`);
      let dest = this._tempBufferGetter(out.length), elementSize = this._bufferType.BYTES_PER_ELEMENT, destSize = elementSize * out.length, srcFormatSize = this._formatSize * this._arraySize, destFormatSize = this._componentCount * elementSize * this._arraySize;
      this._engine.wasm._wl_mesh_get_attribute_values(this._attribute, srcFormatSize, this._offset + index * this._stride, this._stride, destFormatSize, dest.byteOffset, destSize);
      for (let i = 0; i < out.length; ++i)
        out[i] = dest[i];
      return out;
    }
    set(i, v) {
      if (v.length % this._componentCount !== 0)
        throw new Error(`out.length, ${v.length} is not a multiple of the attribute vector components, ${this._componentCount}`);
      let elementSize = this._bufferType.BYTES_PER_ELEMENT, srcSize = elementSize * v.length, srcFormatSize = this._componentCount * elementSize * this._arraySize, destFormatSize = this._formatSize * this._arraySize, wasm = this._engine.wasm;
      if (v.buffer != wasm.HEAPU8.buffer) {
        let dest = this._tempBufferGetter(v.length);
        dest.set(v), v = dest;
      }
      return wasm._wl_mesh_set_attribute_values(this._attribute, srcFormatSize, v.byteOffset, srcSize, destFormatSize, this._offset + i * this._stride, this._stride), this;
    }
    get engine() {
      return this._engine;
    }
  };
  var temp2d = null;
  var Texture = class extends Resource {
    constructor(engine, param) {
      if (isImageLike(param)) {
        let texture = engine.textures.create(param);
        return super(engine, texture._index), texture;
      }
      super(engine, param);
    }
    get valid() {
      return !this.isDestroyed;
    }
    get id() {
      return this.index;
    }
    update() {
      let image = this._imageIndex;
      !this.valid || !image || this.engine.wasm._wl_renderer_updateImage(image);
    }
    get width() {
      let element = this.htmlElement;
      if (element)
        return element.width;
      let wasm = this.engine.wasm;
      return wasm._wl_image_size(this._imageIndex, wasm._tempMem), wasm._tempMemUint32[0];
    }
    get height() {
      let element = this.htmlElement;
      if (element)
        return element.height;
      let wasm = this.engine.wasm;
      return wasm._wl_image_size(this._imageIndex, wasm._tempMem), wasm._tempMemUint32[1];
    }
    get htmlElement() {
      let image = this._imageIndex;
      if (!image)
        return null;
      let wasm = this.engine.wasm, jsImageIndex = wasm._wl_image_get_jsImage_index(image);
      return wasm._images[jsImageIndex];
    }
    updateSubImage(x, y, w, h) {
      if (this.isDestroyed)
        return;
      let image = this._imageIndex;
      if (!image)
        return;
      let wasm = this.engine.wasm, jsImageIndex = wasm._wl_image_get_jsImage_index(image);
      if (!temp2d) {
        let canvas2 = document.createElement("canvas"), ctx = canvas2.getContext("2d");
        if (!ctx)
          throw new Error("Texture.updateSubImage(): Failed to obtain CanvasRenderingContext2D.");
        temp2d = { canvas: canvas2, ctx };
      }
      let img = wasm._images[jsImageIndex];
      if (!img)
        return;
      temp2d.canvas.width = w, temp2d.canvas.height = h, temp2d.ctx.drawImage(img, x, y, w, h, 0, 0, w, h);
      let yOffset = (img.videoHeight ?? img.height) - y - h;
      wasm._images[jsImageIndex] = temp2d.canvas, wasm._wl_renderer_updateImage(image, x, yOffset), wasm._images[jsImageIndex] = img;
    }
    destroy() {
      this.engine.wasm._wl_texture_destroy(this._id), this.engine.textures._destroy(this);
    }
    toString() {
      return this.isDestroyed ? "Texture(destroyed)" : `Texture(${this._index})`;
    }
    get _imageIndex() {
      return this.engine.wasm._wl_texture_get_image_index(this._id);
    }
  };
  var XR = class {
    #wasm;
    #mode;
    constructor(wasm, mode) {
      this.#wasm = wasm, this.#mode = mode;
    }
    get sessionMode() {
      return this.#mode;
    }
    get session() {
      return this.#wasm.webxr_session;
    }
    get frame() {
      return this.#wasm.webxr_frame;
    }
    referenceSpaceForType(type) {
      return this.#wasm.webxr_refSpaces[type] ?? null;
    }
    set currentReferenceSpace(refSpace) {
      this.#wasm.webxr_refSpace = refSpace, this.#wasm.webxr_refSpaceType = null;
      for (let type of Object.keys(this.#wasm.webxr_refSpaces))
        this.#wasm.webxr_refSpaces[type] === refSpace && (this.#wasm.webxr_refSpaceType = type);
    }
    get currentReferenceSpace() {
      return this.#wasm.webxr_refSpace;
    }
    get currentReferenceSpaceType() {
      return this.#wasm.webxr_refSpaceType;
    }
    get baseLayer() {
      return this.#wasm.webxr_baseLayer;
    }
    get framebuffers() {
      return Array.isArray(this.#wasm.webxr_fbo) ? this.#wasm.webxr_fbo.map((id) => this.#wasm.GL.framebuffers[id]) : [this.#wasm.GL.framebuffers[this.#wasm.webxr_fbo]];
    }
  };
  var MaterialParamType = ((MaterialParamType2) => (MaterialParamType2[MaterialParamType2.UnsignedInt = 0] = "UnsignedInt", MaterialParamType2[MaterialParamType2.Int = 1] = "Int", MaterialParamType2[MaterialParamType2.HalfFloat = 2] = "HalfFloat", MaterialParamType2[MaterialParamType2.Float = 3] = "Float", MaterialParamType2[MaterialParamType2.Sampler = 4] = "Sampler", MaterialParamType2[MaterialParamType2.Font = 5] = "Font", MaterialParamType2))(MaterialParamType || {});
  var _a11;
  var Material = (_a11 = class extends Resource {
    constructor(engine, params) {
      if (typeof params != "number") {
        if (!params?.pipeline)
          throw new Error("Missing parameter 'pipeline'");
        let template = engine.materials.getTemplate(params.pipeline), material = new template();
        return super(engine, material._index), material;
      }
      super(engine, params);
    }
    hasParameter(name) {
      let parameters = this.constructor.Parameters;
      return parameters && parameters.has(name);
    }
    get shader() {
      return this.pipeline;
    }
    get pipeline() {
      let wasm = this.engine.wasm;
      return wasm.UTF8ToString(wasm._wl_material_get_pipeline(this._id));
    }
    clone() {
      let index = this.engine.wasm._wl_material_clone(this._id);
      return this.engine.materials.wrap(index);
    }
    toString() {
      return this.isDestroyed ? "Material(destroyed)" : `Material('${this.pipeline}', ${this._index})`;
    }
    static wrap(engine, index) {
      return engine.materials.wrap(index);
    }
  }, __publicField(_a11, "_destroyedPrototype", createDestroyedProxy2("material")), _a11);
  var SceneType = ((SceneType2) => (SceneType2[SceneType2.Prefab = 0] = "Prefab", SceneType2[SceneType2.Main = 1] = "Main", SceneType2[SceneType2.Dependency = 2] = "Dependency", SceneType2))(SceneType || {});
  function assert(bit) {
    if (bit >= 32)
      throw new Error(`BitSet.enable(): Value ${bit} is over 31`);
  }
  var BitSet = class {
    _bits = 0;
    enable(...bits) {
      for (let bit of bits)
        assert(bit), this._bits |= 1 << bit >>> 0;
      return this;
    }
    enableAll() {
      return this._bits = -1, this;
    }
    disable(...bits) {
      for (let bit of bits)
        assert(bit), this._bits &= ~(1 << bit >>> 0);
      return this;
    }
    disableAll() {
      return this._bits = 0, this;
    }
    enabled(bit) {
      return !!(this._bits & 1 << bit >>> 0);
    }
  };
  var LogLevel = ((LogLevel2) => (LogLevel2[LogLevel2.Info = 0] = "Info", LogLevel2[LogLevel2.Warn = 1] = "Warn", LogLevel2[LogLevel2.Error = 2] = "Error", LogLevel2))(LogLevel || {});
  var Logger = class {
    levels = new BitSet();
    tags = new BitSet().enableAll();
    constructor(...levels) {
      this.levels.enable(...levels);
    }
    info(tag, ...msg) {
      return this.levels.enabled(0) && this.tags.enabled(tag) && console.log(...msg), this;
    }
    warn(tag, ...msg) {
      return this.levels.enabled(1) && this.tags.enabled(tag) && console.warn(...msg), this;
    }
    error(tag, ...msg) {
      return this.levels.enabled(2) && this.tags.enabled(tag) && console.error(...msg), this;
    }
  };
  function decode(data, tagger = (_, value) => value, options = {}) {
    let { dictionary = "object" } = options, dataView = new DataView(data.buffer, data.byteOffset, data.byteLength), offset2 = 0;
    function commitRead(length5, value) {
      return offset2 += length5, value;
    }
    function readArrayBuffer(length5) {
      return commitRead(length5, data.subarray(offset2, offset2 + length5));
    }
    function readFloat16() {
      let POW_2_24 = 5960464477539063e-23, tempArrayBuffer = new ArrayBuffer(4), tempDataView = new DataView(tempArrayBuffer), value = readUint16(), sign = value & 32768, exponent = value & 31744, fraction = value & 1023;
      if (exponent === 31744)
        exponent = 261120;
      else if (exponent !== 0)
        exponent += 114688;
      else if (fraction !== 0)
        return (sign ? -1 : 1) * fraction * POW_2_24;
      return tempDataView.setUint32(0, sign << 16 | exponent << 13 | fraction << 13), tempDataView.getFloat32(0);
    }
    function readFloat32() {
      return commitRead(4, dataView.getFloat32(offset2));
    }
    function readFloat64() {
      return commitRead(8, dataView.getFloat64(offset2));
    }
    function readUint8() {
      return commitRead(1, data[offset2]);
    }
    function readUint16() {
      return commitRead(2, dataView.getUint16(offset2));
    }
    function readUint32() {
      return commitRead(4, dataView.getUint32(offset2));
    }
    function readUint64() {
      return commitRead(8, dataView.getBigUint64(offset2));
    }
    function readBreak() {
      return data[offset2] !== 255 ? false : (offset2 += 1, true);
    }
    function readLength(additionalInformation) {
      if (additionalInformation < 24)
        return additionalInformation;
      if (additionalInformation === 24)
        return readUint8();
      if (additionalInformation === 25)
        return readUint16();
      if (additionalInformation === 26)
        return readUint32();
      if (additionalInformation === 27) {
        let integer = readUint64();
        return integer <= Number.MAX_SAFE_INTEGER ? Number(integer) : integer;
      }
      if (additionalInformation === 31)
        return -1;
      throw new Error("CBORError: Invalid length encoding");
    }
    function readIndefiniteStringLength(majorType) {
      let initialByte = readUint8();
      if (initialByte === 255)
        return -1;
      let length5 = readLength(initialByte & 31);
      if (length5 < 0 || initialByte >> 5 !== majorType)
        throw new Error("CBORError: Invalid indefinite length element");
      return Number(length5);
    }
    function appendUtf16Data(utf16data, length5) {
      for (let i = 0; i < length5; ++i) {
        let value = readUint8();
        value & 128 && (value < 224 ? (value = (value & 31) << 6 | readUint8() & 63, length5 -= 1) : value < 240 ? (value = (value & 15) << 12 | (readUint8() & 63) << 6 | readUint8() & 63, length5 -= 2) : (value = (value & 7) << 18 | (readUint8() & 63) << 12 | (readUint8() & 63) << 6 | readUint8() & 63, length5 -= 3)), value < 65536 ? utf16data.push(value) : (value -= 65536, utf16data.push(55296 | value >> 10), utf16data.push(56320 | value & 1023));
      }
    }
    function decodeItem() {
      let initialByte = readUint8(), majorType = initialByte >> 5, additionalInformation = initialByte & 31, i, length5;
      if (majorType === 7)
        switch (additionalInformation) {
          case 25:
            return readFloat16();
          case 26:
            return readFloat32();
          case 27:
            return readFloat64();
        }
      if (length5 = readLength(additionalInformation), length5 < 0 && (majorType < 2 || 6 < majorType))
        throw new Error("CBORError: Invalid length");
      switch (majorType) {
        case 0:
          return length5;
        case 1:
          return typeof length5 == "number" ? -1 - length5 : -1n - length5;
        case 2: {
          if (length5 < 0) {
            let elements = [], fullArrayLength = 0;
            for (; (length5 = readIndefiniteStringLength(majorType)) >= 0; )
              fullArrayLength += length5, elements.push(readArrayBuffer(length5));
            let fullArray = new Uint8Array(fullArrayLength), fullArrayOffset = 0;
            for (i = 0; i < elements.length; ++i)
              fullArray.set(elements[i], fullArrayOffset), fullArrayOffset += elements[i].length;
            return fullArray;
          }
          return readArrayBuffer(length5).slice();
        }
        case 3: {
          let utf16data = [];
          if (length5 < 0)
            for (; (length5 = readIndefiniteStringLength(majorType)) >= 0; )
              appendUtf16Data(utf16data, length5);
          else
            appendUtf16Data(utf16data, length5);
          let string = "", DECODE_CHUNK_SIZE = 8192;
          for (i = 0; i < utf16data.length; i += DECODE_CHUNK_SIZE)
            string += String.fromCharCode.apply(null, utf16data.slice(i, i + DECODE_CHUNK_SIZE));
          return string;
        }
        case 4: {
          let retArray;
          if (length5 < 0) {
            retArray = [];
            let index = 0;
            for (; !readBreak(); )
              retArray.push(decodeItem());
          } else
            for (retArray = new Array(length5), i = 0; i < length5; ++i)
              retArray[i] = decodeItem();
          return retArray;
        }
        case 5: {
          if (dictionary === "map") {
            let retMap = /* @__PURE__ */ new Map();
            for (i = 0; i < length5 || length5 < 0 && !readBreak(); ++i) {
              let key = decodeItem();
              if (retMap.has(key))
                throw new Error("CBORError: Duplicate key encountered");
              retMap.set(key, decodeItem());
            }
            return retMap;
          }
          let retObject = {};
          for (i = 0; i < length5 || length5 < 0 && !readBreak(); ++i) {
            let key = decodeItem();
            if (Object.prototype.hasOwnProperty.call(retObject, key))
              throw new Error("CBORError: Duplicate key encountered");
            retObject[key] = decodeItem();
          }
          return retObject;
        }
        case 6: {
          let value = decodeItem(), tag = length5;
          if (value instanceof Uint8Array)
            switch (tag) {
              case 2:
              case 3:
                let num = value.reduce((acc, n) => (acc << 8n) + BigInt(n), 0n);
                return tag == 3 && (num = -1n - num), num;
              case 64:
                return value;
              case 72:
                return new Int8Array(value.buffer);
              case 69:
                return new Uint16Array(value.buffer);
              case 77:
                return new Int16Array(value.buffer);
              case 70:
                return new Uint32Array(value.buffer);
              case 78:
                return new Int32Array(value.buffer);
              case 71:
                return new BigUint64Array(value.buffer);
              case 79:
                return new BigInt64Array(value.buffer);
              case 85:
                return new Float32Array(value.buffer);
              case 86:
                return new Float64Array(value.buffer);
            }
          return tagger(tag, value);
        }
        case 7:
          switch (length5) {
            case 20:
              return false;
            case 21:
              return true;
            case 22:
              return null;
            case 23:
              return;
            default:
              return length5;
          }
      }
    }
    let ret = decodeItem();
    if (offset2 !== data.byteLength)
      throw new Error("CBORError: Remaining bytes");
    return ret;
  }
  var CBOR = { decode };
  var _componentDefaults = /* @__PURE__ */ new Map([[1, false], [2, 0], [3, 0], [4, ""], [5, void 0], [6, null], [7, null], [8, null], [9, null], [10, null], [11, null], [12, Float32Array.from([0, 0, 0, 1])], [13, Float32Array.from([0, 0])], [14, Float32Array.from([0, 0, 0])], [15, Float32Array.from([0, 0, 0, 0])]]);
  function _setupDefaults(ctor) {
    for (let name in ctor.Properties) {
      let p = ctor.Properties[name];
      if (p.type === 5)
        p.values?.length ? (typeof p.default != "number" && (p.default = p.values.indexOf(p.default)), (p.default < 0 || p.default >= p.values.length) && (p.default = 0)) : p.default = void 0;
      else if ((p.type === 12 || p.type === 13 || p.type === 14 || p.type === 15) && Array.isArray(p.default))
        p.default = Float32Array.from(p.default);
      else if (p.default === void 0) {
        let cloner = p.cloner ?? defaultPropertyCloner;
        p.default = cloner.clone(p.type, _componentDefaults.get(p.type));
      }
      ctor.prototype[name] = p.default;
    }
  }
  function _setPropertyOrder(ctor) {
    ctor._propertyOrder = ctor.hasOwnProperty("Properties") ? Object.keys(ctor.Properties).sort() : [];
  }
  var WASM2 = class {
    worker = "";
    wasm = null;
    canvas = null;
    preinitializedWebGPUDevice = null;
    webxr_session = null;
    webxr_requestSession = null;
    webxr_offerSession = null;
    webxr_frame = null;
    webxr_refSpace = null;
    webxr_refSpaces = null;
    webxr_refSpaceType = null;
    webxr_baseLayer = null;
    webxr_framebufferScaleFactor = 1;
    webxr_fbo = 0;
    UTF8ViewToString;
    _log = new Logger();
    _deactivate_component_on_error = false;
    _tempMem = null;
    _tempMemSize = 0;
    _tempMemFloat = null;
    _tempMemInt = null;
    _tempMemUint8 = null;
    _tempMemUint32 = null;
    _tempMemUint16 = null;
    _loadingScreen = null;
    _sceneLoadedCallback = [];
    _images = [null];
    _components = null;
    _componentTypes = [];
    _componentTypeIndices = {};
    _engine = null;
    _withPhysX = false;
    _utf8Decoder = new TextDecoder("utf8");
    _brokenComponentIndex = 0;
    constructor(threads2) {
      threads2 ? this.UTF8ViewToString = (s, e) => s ? this._utf8Decoder.decode(this.HEAPU8.slice(s, e)) : "" : this.UTF8ViewToString = (s, e) => s ? this._utf8Decoder.decode(this.HEAPU8.subarray(s, e)) : "", this._brokenComponentIndex = this._registerComponent(BrokenComponent);
    }
    reset() {
      this._wl_reset(), this._components = null, this._images.length = 1, this.allocateTempMemory(1024), this._componentTypes = [], this._componentTypeIndices = {}, this._brokenComponentIndex = this._registerComponent(BrokenComponent);
    }
    isRegistered(type) {
      return type in this._componentTypeIndices;
    }
    _registerComponentLegacy(typeName, params, object) {
      let ctor = class extends Component3 {
      };
      return ctor.TypeName = typeName, ctor.Properties = params, Object.assign(ctor.prototype, object), this._registerComponent(ctor);
    }
    _registerComponent(ctor) {
      if (!ctor.TypeName)
        throw new Error("no name provided for component.");
      if (!ctor.prototype._triggerInit)
        throw new Error(`registerComponent(): Component ${ctor.TypeName} must extend Component`);
      inheritProperties(ctor), _setupDefaults(ctor), _setPropertyOrder(ctor);
      let typeIndex = ctor.TypeName in this._componentTypeIndices ? this._componentTypeIndices[ctor.TypeName] : this._componentTypes.length;
      return this._componentTypes[typeIndex] = ctor, this._componentTypeIndices[ctor.TypeName] = typeIndex, ctor === BrokenComponent || (this._log.info(0, "Registered component", ctor.TypeName, `(class ${ctor.name})`, "with index", typeIndex), ctor.onRegister && ctor.onRegister(this._engine)), typeIndex;
    }
    allocateTempMemory(size) {
      this._log.info(0, "Allocating temp mem:", size), this._tempMemSize = size, this._tempMem && this._free(this._tempMem), this._tempMem = this._malloc(this._tempMemSize), this.updateTempMemory();
    }
    requireTempMem(size) {
      this._tempMemSize >= size || this.allocateTempMemory(Math.ceil(size / 1024) * 1024);
    }
    updateTempMemory() {
      this._tempMemFloat = new Float32Array(this.HEAP8.buffer, this._tempMem, this._tempMemSize >> 2), this._tempMemInt = new Int32Array(this.HEAP8.buffer, this._tempMem, this._tempMemSize >> 2), this._tempMemUint32 = new Uint32Array(this.HEAP8.buffer, this._tempMem, this._tempMemSize >> 2), this._tempMemUint16 = new Uint16Array(this.HEAP8.buffer, this._tempMem, this._tempMemSize >> 1), this._tempMemUint8 = new Uint8Array(this.HEAP8.buffer, this._tempMem, this._tempMemSize);
    }
    getTempBufferU8(count) {
      return this.requireTempMem(count), this._tempMemUint8;
    }
    getTempBufferU16(count) {
      return this.requireTempMem(count * 2), this._tempMemUint16;
    }
    getTempBufferU32(count) {
      return this.requireTempMem(count * 4), this._tempMemUint32;
    }
    getTempBufferI32(count) {
      return this.requireTempMem(count * 4), this._tempMemInt;
    }
    getTempBufferF32(count) {
      return this.requireTempMem(count * 4), this._tempMemFloat;
    }
    tempUTF8(str5, byteOffset = 0) {
      let strLen = this.lengthBytesUTF8(str5) + 1;
      this.requireTempMem(strLen + byteOffset);
      let ptr = this._tempMem + byteOffset;
      return this.stringToUTF8(str5, ptr, strLen), ptr;
    }
    copyBufferToHeap(buffer) {
      let size = buffer.byteLength, ptr = this._malloc(size);
      return this.HEAPU8.set(new Uint8Array(buffer), ptr), ptr;
    }
    get withPhysX() {
      return this._withPhysX;
    }
    _setEngine(engine) {
      this._engine = engine;
    }
    _wljs_xr_session_start(mode) {
      this._engine.xr === null && (this._engine.xr = new XR(this, mode), this._engine.onXRSessionStart.notify(this.webxr_session, mode));
    }
    _wljs_xr_session_end() {
      let startEmitter = this._engine.onXRSessionStart;
      startEmitter instanceof RetainEmitter && startEmitter.reset(), this._engine.onXRSessionEnd.notify(), this._engine.xr = null;
    }
    _wljs_xr_disable() {
      this._engine.arSupported = false, this._engine.vrSupported = false;
    }
    _wljs_init(withPhysX) {
      this._withPhysX = withPhysX, this.allocateTempMemory(1024);
    }
    _wljs_scene_switch(index) {
      let scene = this._engine._scenes[index];
      this._components = scene?._jsComponents ?? null;
    }
    _wljs_destroy_image(index) {
      let img = this._images[index];
      img && (this._images[index] = null, img.src !== void 0 && (img.src = ""), img.onload !== void 0 && (img.onload = null), img.onerror !== void 0 && (img.onerror = null));
    }
    _wljs_objects_markDestroyed(sceneIndex, idsPtr, count) {
      let scene = this._engine._scenes[sceneIndex], start = idsPtr >>> 1;
      for (let i = 0; i < count; ++i) {
        let id = this.HEAPU16[start + i];
        scene._destroyObject(id);
      }
    }
    _wljs_scene_initialize(sceneIndex, idsPtr, idsEnd, paramDataPtr, paramDataEndPtr, offsetsPtr, offsetsEndPtr) {
      let cbor = this.HEAPU8.subarray(paramDataPtr, paramDataEndPtr), offsets = this.HEAPU32.subarray(offsetsPtr >>> 2, offsetsEndPtr >>> 2), ids = this.HEAPU16.subarray(idsPtr >>> 1, idsEnd >>> 1), engine = this._engine, scene = engine._scenes[sceneIndex], components = scene._jsComponents, decoded;
      try {
        decoded = CBOR.decode(cbor);
      } catch (e) {
        this._log.error(0, "Exception during component parameter decoding"), this._log.error(2, e);
        return;
      }
      if (!Array.isArray(decoded)) {
        this._log.error(0, "Parameter data must be an array");
        return;
      }
      if (decoded.length !== ids.length) {
        this._log.error(0, `Parameter data has size ${decoded.length} but expected ${ids.length}`);
        return;
      }
      for (let i = 0; i < decoded.length; ++i) {
        let id = Component3._pack(sceneIndex, ids[i]), index = this._wl_get_js_component_index_for_id(id), component = components[index], ctor = component.constructor;
        if (ctor == BrokenComponent)
          continue;
        let paramNames = ctor._propertyOrder, paramValues = decoded[i];
        if (!Array.isArray(paramValues)) {
          this._log.error(0, "Component parameter data must be an array");
          continue;
        }
        if (paramValues.length !== paramNames.length) {
          this._log.error(0, `Component parameter data has size ${paramValues.length} but expected ${paramNames.length}`);
          continue;
        }
        for (let j = 0; j < paramValues.length; ++j) {
          let name = paramNames[j], property2 = ctor.Properties[name], type = property2.type, value = paramValues[j];
          if (value === void 0) {
            value = (property2.cloner ?? defaultPropertyCloner).clone(type, property2.default), component[name] = value;
            continue;
          }
          switch (typeof value == "number" && (value += offsets[type]), type) {
            case 1:
            case 2:
            case 3:
            case 4:
            case 5:
            case 13:
            case 14:
            case 15:
              break;
            case 6:
              value = value ? scene.wrap(this._wl_object_id(scene._index, value)) : null;
              break;
            case 7:
              value = engine.meshes.wrap(value);
              break;
            case 8:
              value = engine.textures.wrap(value);
              break;
            case 9:
              value = engine.materials.wrap(value);
              break;
            case 10:
              value = scene.animations.wrap(value);
              break;
            case 11:
              value = scene.skins.wrap(value);
              break;
            case 12:
              let max2 = (1 << value.BYTES_PER_ELEMENT * 8) - 1;
              value = Float32Array.from(value, (f, _) => f / max2);
              break;
          }
          component[name] = value;
        }
      }
    }
    _wljs_set_component_param_translation(scene, component, param, valuePtr, valueEndPtr) {
      let comp = this._engine._scenes[scene]._jsComponents[component], value = this.UTF8ViewToString(valuePtr, valueEndPtr), paramName = comp.constructor._propertyOrder[param];
      comp[paramName] = value;
    }
    _wljs_get_component_type_index(namePtr, nameEndPtr) {
      let typename = this.UTF8ViewToString(namePtr, nameEndPtr), index = this._componentTypeIndices[typename];
      return index === void 0 ? this._brokenComponentIndex : index;
    }
    _wljs_component_create(sceneIndex, index, id, type, object) {
      this._engine._scenes[sceneIndex]._components.createJs(index, id, type, object);
    }
    _wljs_component_init(scene, component) {
      this._engine._scenes[scene]._jsComponents[component]._triggerInit();
    }
    _wljs_component_update(component, dt) {
      this._components[component]._triggerUpdate(dt);
    }
    _wljs_component_onActivate(component) {
      this._components[component]._triggerOnActivate();
    }
    _wljs_component_onDeactivate(component) {
      this._components[component]._triggerOnDeactivate();
    }
    _wljs_component_markDestroyed(sceneIndex, manager, componentId) {
      this._engine._scenes[sceneIndex]._destroyComponent(manager, componentId);
    }
    _wljs_swap(scene, a, b) {
      let components = this._engine._scenes[scene]._jsComponents, componentA = components[a];
      components[a] = components[b], components[b] = componentA;
    }
    _wljs_copy(srcSceneIndex, srcIndex, dstSceneIndex, dstIndex, offsetsPtr) {
      let srcScene = this._engine._scenes[srcSceneIndex], destComp = this._engine._scenes[dstSceneIndex]._jsComponents[dstIndex], srcComp = srcScene._jsComponents[srcIndex];
      try {
        destComp._copy(srcComp, offsetsPtr);
      } catch (e) {
        this._log.error(2, `Exception during ${destComp.type} copy() on object ${destComp.object.name}`), this._log.error(2, e);
      }
    }
    _wljs_trigger_animationEvent(componentId, namePtr, nameEndPtr) {
      let comp = this._engine.scene._components.wrapAnimation(componentId), nameStr = this.UTF8ViewToString(namePtr, nameEndPtr);
      comp.onEvent.notify(nameStr);
    }
  };
  function throwInvalidRuntime(version) {
    return function() {
      throw new Error(`Feature added in version ${version}.
	\u2192 Please use a Wonderland Engine editor version >= ${version}`);
    };
  }
  var requireRuntime1_2_1 = throwInvalidRuntime("1.2.1");
  WASM2.prototype._wl_text_component_get_wrapMode = requireRuntime1_2_1;
  WASM2.prototype._wl_text_component_set_wrapMode = requireRuntime1_2_1;
  WASM2.prototype._wl_text_component_get_wrapWidth = requireRuntime1_2_1;
  WASM2.prototype._wl_text_component_set_wrapWidth = requireRuntime1_2_1;
  WASM2.prototype._wl_font_get_outlineSize = requireRuntime1_2_1;
  WASM2.prototype._wl_scene_create_chunked_start = requireRuntime1_2_1;
  WASM2.prototype._wl_scene_create_chunked_buffer_size = requireRuntime1_2_1;
  WASM2.prototype._wl_scene_create_chunked_next = requireRuntime1_2_1;
  WASM2.prototype._wl_scene_create_chunked_abort = requireRuntime1_2_1;
  WASM2.prototype._wl_scene_create_chunked_end_prefab = requireRuntime1_2_1;
  WASM2.prototype._wl_scene_create_chunked_end_main = requireRuntime1_2_1;
  WASM2.prototype._wl_scene_create_chunked_end_queued = requireRuntime1_2_1;
  var requireRuntime1_2_2 = throwInvalidRuntime("1.2.2");
  WASM2.prototype._wl_view_component_get_projectionType = requireRuntime1_2_2;
  WASM2.prototype._wl_view_component_set_projectionType = requireRuntime1_2_2;
  WASM2.prototype._wl_view_component_get_extent = requireRuntime1_2_2;
  WASM2.prototype._wl_view_component_set_extent = requireRuntime1_2_2;
  WASM2.prototype._wl_animation_component_get_rootMotionMode = requireRuntime1_2_2;
  WASM2.prototype._wl_animation_component_set_rootMotionMode = requireRuntime1_2_2;
  WASM2.prototype._wl_animation_component_get_rootMotion_translation = requireRuntime1_2_2;
  WASM2.prototype._wl_animation_component_get_rootMotion_rotation = requireRuntime1_2_2;
  var requireRuntime1_2_3 = throwInvalidRuntime("1.2.3");
  WASM2.prototype._wl_scene_environment_set_intensity = requireRuntime1_2_3;
  WASM2.prototype._wl_scene_environment_get_intensity = requireRuntime1_2_3;
  WASM2.prototype._wl_scene_environment_set_tint = requireRuntime1_2_3;
  WASM2.prototype._wl_scene_environment_get_tint = requireRuntime1_2_3;
  WASM2.prototype._wl_scene_environment_set_coefficients = requireRuntime1_2_3;
  WASM2.prototype._wl_scene_environment_get_coefficients = requireRuntime1_2_3;
  WASM2.prototype._wl_animation_component_get_iteration = requireRuntime1_2_3;
  WASM2.prototype._wl_animation_component_get_position = requireRuntime1_2_3;
  WASM2.prototype._wl_animation_component_get_duration = requireRuntime1_2_3;
  WASM2.prototype._wl_renderer_streaming_idle = requireRuntime1_2_3;

  // node_modules/@wonderlandengine/components/dist/8thwall-camera.js
  var ARCamera8thwall = class extends Component3 {
    /* 8thwall camera pipeline module name */
    name = "wonderland-engine-8thwall-camera";
    started = false;
    view = null;
    // cache camera
    position = [0, 0, 0];
    // cache 8thwall cam position
    rotation = [0, 0, 0, -1];
    // cache 8thwall cam rotation
    glTextureRenderer = null;
    // cache XR8.GlTextureRenderer.pipelineModule
    promptForDeviceMotion() {
      return new Promise(async (resolve, reject) => {
        window.dispatchEvent(new Event("8thwall-request-user-interaction"));
        window.addEventListener("8thwall-safe-to-request-permissions", async () => {
          try {
            const motionEvent = await DeviceMotionEvent.requestPermission();
            resolve(motionEvent);
          } catch (exception) {
            reject(exception);
          }
        });
      });
    }
    async getPermissions() {
      if (DeviceMotionEvent && DeviceMotionEvent.requestPermission) {
        try {
          const result = await DeviceMotionEvent.requestPermission();
          if (result !== "granted") {
            throw new Error("MotionEvent");
          }
        } catch (exception) {
          if (exception.name === "NotAllowedError") {
            const motionEvent = await this.promptForDeviceMotion();
            if (motionEvent !== "granted") {
              throw new Error("MotionEvent");
            }
          } else {
            throw new Error("MotionEvent");
          }
        }
      }
      try {
        const stream = await navigator.mediaDevices.getUserMedia({
          video: true,
          audio: true
        });
        stream.getTracks().forEach((track) => {
          track.stop();
        });
      } catch (exception) {
        throw new Error("Camera");
      }
    }
    init() {
      this.view = this.object.getComponent("view");
      this.onUpdate = this.onUpdate.bind(this);
      this.onAttach = this.onAttach.bind(this);
      this.onException = this.onException.bind(this);
      this.onCameraStatusChange = this.onCameraStatusChange.bind(this);
    }
    async start() {
      this.view = this.object.getComponent("view");
      if (!this.useCustomUIOverlays) {
        OverlaysHandler.init();
      }
      try {
        await this.getPermissions();
      } catch (error) {
        window.dispatchEvent(new CustomEvent("8thwall-permission-fail", { detail: error }));
        return;
      }
      await this.waitForXR8();
      XR8.XrController.configure({
        disableWorldTracking: false
      });
      this.glTextureRenderer = XR8.GlTextureRenderer.pipelineModule();
      XR8.addCameraPipelineModules([
        this.glTextureRenderer,
        XR8.XrController.pipelineModule(),
        this
      ]);
      const config = {
        cameraConfig: {
          direction: XR8.XrConfig.camera().BACK
        },
        canvas: Module.canvas,
        allowedDevices: XR8.XrConfig.device().ANY,
        ownRunLoop: false
      };
      XR8.run(config);
    }
    /**
     * @private
     * 8thwall pipeline function
     */
    onAttach(params) {
      this.started = true;
      this.engine.scene.colorClearEnabled = false;
      const gl = Module.ctx;
      const rot = this.object.rotationWorld;
      const pos = this.object.getTranslationWorld([]);
      this.position = Array.from(pos);
      this.rotation = Array.from(rot);
      XR8.XrController.updateCameraProjectionMatrix({
        origin: { x: pos[0], y: pos[1], z: pos[2] },
        facing: { x: rot[0], y: rot[1], z: rot[2], w: rot[3] },
        cam: {
          pixelRectWidth: Module.canvas.width,
          pixelRectHeight: Module.canvas.height,
          nearClipPlane: this.view.near,
          farClipPlane: this.view.far
        }
      });
      this.engine.scene.onPreRender.push(() => {
        gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, null);
        XR8.runPreRender(Date.now());
        XR8.runRender();
      });
      this.engine.scene.onPostRender.push(() => {
        XR8.runPostRender(Date.now());
      });
    }
    /**
     * @private
     * 8thwall pipeline function
     */
    onCameraStatusChange(e) {
      if (e && e.status === "failed") {
        this.onException(new Error(`Camera failed with status: ${e.status}`));
      }
    }
    /**
     * @private
     * 8thwall pipeline function
     */
    onUpdate(e) {
      if (!e.processCpuResult.reality)
        return;
      const { rotation, position, intrinsics } = e.processCpuResult.reality;
      this.rotation[0] = rotation.x;
      this.rotation[1] = rotation.y;
      this.rotation[2] = rotation.z;
      this.rotation[3] = rotation.w;
      this.position[0] = position.x;
      this.position[1] = position.y;
      this.position[2] = position.z;
      if (intrinsics) {
        const projectionMatrix = this.view.projectionMatrix;
        for (let i = 0; i < 16; i++) {
          if (Number.isFinite(intrinsics[i])) {
            projectionMatrix[i] = intrinsics[i];
          }
        }
      }
      if (position && rotation) {
        this.object.rotationWorld = this.rotation;
        this.object.setTranslationWorld(this.position);
      }
    }
    /**
     * @private
     * 8thwall pipeline function
     */
    onException(error) {
      console.error("8thwall exception:", error);
      window.dispatchEvent(new CustomEvent("8thwall-error", { detail: error }));
    }
    waitForXR8() {
      return new Promise((resolve, _rej) => {
        if (window.XR8) {
          resolve();
        } else {
          window.addEventListener("xrloaded", () => resolve());
        }
      });
    }
  };
  __publicField(ARCamera8thwall, "TypeName", "8thwall-camera");
  __publicField(ARCamera8thwall, "Properties", {
    /** Override the WL html overlays for handling camera/motion permissions and error handling */
    useCustomUIOverlays: { type: Type.Bool, default: false }
  });
  var OverlaysHandler = {
    init: function() {
      this.handleRequestUserInteraction = this.handleRequestUserInteraction.bind(this);
      this.handlePermissionFail = this.handlePermissionFail.bind(this);
      this.handleError = this.handleError.bind(this);
      window.addEventListener("8thwall-request-user-interaction", this.handleRequestUserInteraction);
      window.addEventListener("8thwall-permission-fail", this.handlePermissionFail);
      window.addEventListener("8thwall-error", this.handleError);
    },
    handleRequestUserInteraction: function() {
      const overlay = this.showOverlay(requestPermissionOverlay);
      window.addEventListener("8thwall-safe-to-request-permissions", () => {
        overlay.remove();
      });
    },
    handlePermissionFail: function(_reason) {
      this.showOverlay(failedPermissionOverlay);
    },
    handleError: function(_error) {
      this.showOverlay(runtimeErrorOverlay);
    },
    showOverlay: function(htmlContent) {
      const overlay = document.createElement("div");
      overlay.innerHTML = htmlContent;
      document.body.appendChild(overlay);
      return overlay;
    }
  };
  var requestPermissionOverlay = `
<style>
  #request-permission-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 999;
    color: #fff;
    background-color: rgba(0, 0, 0, 0.5);
    text-align: center;
    font-family: sans-serif;
  }

  .request-permission-overlay_title {
    margin: 30px;
    font-size: 32px;
  }

  .request-permission-overlay_button {
    background-color: #e80086;
    font-size: 22px;
    padding: 10px 30px;
    color: #fff;
    border-radius: 15px;
    border: none;
  }
</style>

<div id="request-permission-overlay">
  <div class="request-permission-overlay_title">This app requires to use your camera and motion sensors</div>

  <button class="request-permission-overlay_button" onclick="window.dispatchEvent(new Event('8thwall-safe-to-request-permissions'))">OK</button>
</div>`;
  var failedPermissionOverlay = `
<style>
  #failed-permission-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 999;
    color: #fff;
    background-color: rgba(0, 0, 0, 0.5);
    text-align: center;
    font-family: sans-serif;
  }

  .failed-permission-overlay_title {
    margin: 30px;
    font-size: 32px;
  }

  .failed-permission-overlay_button {
    background-color: #e80086;
    font-size: 22px;
    padding: 10px 30px;
    color: #fff;
    border-radius: 15px;
    border: none;
  }
</style>

<div id="failed-permission-overlay">
  <div class="failed-permission-overlay_title">Failed to grant permissions. Reset the the permissions and refresh the page.</div>

  <button class="failed-permission-overlay_button" onclick="window.location.reload()">Refresh the page</button>
</div>`;
  var runtimeErrorOverlay = `
<style>
  #wall-error-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 999;
    color: #fff;
    background-color: rgba(0, 0, 0, 0.5);
    text-align: center;
    font-family: sans-serif;
  }

  .wall-error-overlay_title {
    margin: 30px;
    font-size: 32px;
  }

  .wall-error-overlay_button {
    background-color: #e80086;
    font-size: 22px;
    padding: 10px 30px;
    color: #fff;
    border-radius: 15px;
    border: none;
  }
</style>

<div id="wall-error-overlay">
  <div class="wall-error-overlay_title">Error has occurred. Please reload the page</div>

  <button class="wall-error-overlay_button" onclick="window.location.reload()">Reload</button>
</div>`;

  // node_modules/@wonderlandengine/components/dist/utils/webxr.js
  var tempVec = new Float32Array(3);
  var tempQuat = new Float32Array(4);
  function setXRRigidTransformLocal(o, transform) {
    const r = transform.orientation;
    tempQuat[0] = r.x;
    tempQuat[1] = r.y;
    tempQuat[2] = r.z;
    tempQuat[3] = r.w;
    const t = transform.position;
    tempVec[0] = t.x;
    tempVec[1] = t.y;
    tempVec[2] = t.z;
    o.resetPositionRotation();
    o.setRotationLocal(tempQuat);
    o.translateLocal(tempVec);
  }

  // node_modules/@wonderlandengine/components/dist/anchor.js
  var __decorate = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var tempVec3 = new Float32Array(3);
  var tempQuat2 = new Float32Array(4);
  var _anchors, _addAnchor, addAnchor_fn, _removeAnchor, removeAnchor_fn, _getFrame, getFrame_fn, _createAnchor, createAnchor_fn, _onAddAnchor, onAddAnchor_fn, _onRestoreAnchor, onRestoreAnchor_fn, _onCreate, onCreate_fn;
  var _Anchor = class extends Component3 {
    constructor() {
      super(...arguments);
      __privateAdd(this, _getFrame);
      __privateAdd(this, _createAnchor);
      __privateAdd(this, _onAddAnchor);
      __privateAdd(this, _onRestoreAnchor);
      __privateAdd(this, _onCreate);
      __publicField(this, "persist", false);
      /** Unique identifier to load a persistent anchor from, or empty/null if unknown */
      __publicField(this, "uuid", null);
      /** The xrAnchor, if created */
      __publicField(this, "xrAnchor", null);
      /** Emits events when the anchor is created either by being restored or newly created */
      __publicField(this, "onCreate", new Emitter());
      /** Whether the anchor is currently being tracked */
      __publicField(this, "visible", false);
      /** Emits an event when this anchor starts tracking */
      __publicField(this, "onTrackingFound", new Emitter());
      /** Emits an event when this anchor stops tracking */
      __publicField(this, "onTrackingLost", new Emitter());
      /** XRFrame to use for creating the anchor */
      __publicField(this, "xrFrame", null);
      /** XRHitTestResult to use for creating the anchor */
      __publicField(this, "xrHitResult", null);
    }
    /** Retrieve all anchors of the current scene */
    static getAllAnchors() {
      return __privateGet(_Anchor, _anchors);
    }
    /**
     * Create a new anchor
     *
     * @param o Object to attach the component to
     * @param params Parameters for the anchor component
     * @param frame XRFrame to use for anchor cration, if null, will use the current frame if available
     * @param hitResult Optional hit-test result to create the anchor with
     * @returns Promise for the newly created anchor component
     */
    static create(o, params, frame, hitResult) {
      const a = o.addComponent(_Anchor, { ...params, active: false });
      if (a === null)
        return null;
      a.xrHitResult = hitResult ?? null;
      a.xrFrame = frame ?? null;
      a.onCreate.once(() => (a.xrFrame = null, a.xrHitResult = null));
      a.active = true;
      return a.onCreate.promise();
    }
    start() {
      if (this.uuid && this.engine.xr) {
        this.persist = true;
        if (this.engine.xr.session.restorePersistentAnchor === void 0) {
          console.warn("anchor: Persistent anchors are not supported by your client. Ignoring persist property.");
        }
        this.engine.xr.session.restorePersistentAnchor(this.uuid).then(__privateMethod(this, _onRestoreAnchor, onRestoreAnchor_fn).bind(this));
      } else if (__privateMethod(this, _getFrame, getFrame_fn).call(this)) {
        __privateMethod(this, _createAnchor, createAnchor_fn).call(this).then(__privateMethod(this, _onAddAnchor, onAddAnchor_fn).bind(this));
      } else {
        throw new Error("Anchors can only be created during the XR frame in an active XR session");
      }
    }
    update() {
      if (!this.xrAnchor || !this.engine.xr)
        return;
      const pose = this.engine.xr.frame.getPose(this.xrAnchor.anchorSpace, this.engine.xr.currentReferenceSpace);
      const visible = !!pose;
      if (visible != this.visible) {
        this.visible = visible;
        (visible ? this.onTrackingFound : this.onTrackingLost).notify(this);
      }
      if (pose) {
        setXRRigidTransformLocal(this.object, pose.transform);
      }
    }
    onDestroy() {
      var _a12;
      __privateMethod(_a12 = _Anchor, _removeAnchor, removeAnchor_fn).call(_a12, this);
    }
  };
  var Anchor = _Anchor;
  _anchors = new WeakMap();
  _addAnchor = new WeakSet();
  addAnchor_fn = function(anchor) {
    __privateGet(_Anchor, _anchors).push(anchor);
  };
  _removeAnchor = new WeakSet();
  removeAnchor_fn = function(anchor) {
    const index = __privateGet(_Anchor, _anchors).indexOf(anchor);
    if (index < 0)
      return;
    __privateGet(_Anchor, _anchors).splice(index, 1);
  };
  _getFrame = new WeakSet();
  getFrame_fn = function() {
    return this.xrFrame || this.engine.xr.frame;
  };
  _createAnchor = new WeakSet();
  createAnchor_fn = async function() {
    if (!__privateMethod(this, _getFrame, getFrame_fn).call(this).createAnchor) {
      throw new Error("Cannot create anchor - anchors not supported, did you enable the 'anchors' WebXR feature?");
    }
    if (this.xrHitResult) {
      if (this.xrHitResult.createAnchor === void 0) {
        throw new Error("Requested anchor on XRHitTestResult, but WebXR hit-test feature is not available.");
      }
      return this.xrHitResult.createAnchor();
    } else {
      this.object.getTranslationWorld(tempVec3);
      tempQuat2.set(this.object.rotationWorld);
      const rotation = tempQuat2;
      const anchorPose = new XRRigidTransform({ x: tempVec3[0], y: tempVec3[1], z: tempVec3[2] }, { x: rotation[0], y: rotation[1], z: rotation[2], w: rotation[3] });
      return __privateMethod(this, _getFrame, getFrame_fn).call(this)?.createAnchor(anchorPose, this.engine.xr.currentReferenceSpace);
    }
  };
  _onAddAnchor = new WeakSet();
  onAddAnchor_fn = function(anchor) {
    if (!anchor)
      return;
    if (this.persist) {
      if (anchor.requestPersistentHandle !== void 0) {
        anchor.requestPersistentHandle().then((uuid) => {
          var _a12;
          this.uuid = uuid;
          __privateMethod(this, _onCreate, onCreate_fn).call(this, anchor);
          __privateMethod(_a12 = _Anchor, _addAnchor, addAnchor_fn).call(_a12, this);
        });
        return;
      } else {
        console.warn("anchor: Persistent anchors are not supported by your client. Ignoring persist property.");
      }
    }
    __privateMethod(this, _onCreate, onCreate_fn).call(this, anchor);
  };
  _onRestoreAnchor = new WeakSet();
  onRestoreAnchor_fn = function(anchor) {
    __privateMethod(this, _onCreate, onCreate_fn).call(this, anchor);
  };
  _onCreate = new WeakSet();
  onCreate_fn = function(anchor) {
    this.xrAnchor = anchor;
    this.onCreate.notify(this);
  };
  __privateAdd(Anchor, _addAnchor);
  __privateAdd(Anchor, _removeAnchor);
  __publicField(Anchor, "TypeName", "anchor");
  /* Static management of all anchors */
  __privateAdd(Anchor, _anchors, []);
  __decorate([
    property.bool(false)
  ], Anchor.prototype, "persist", void 0);
  __decorate([
    property.string()
  ], Anchor.prototype, "uuid", void 0);

  // node_modules/@wonderlandengine/components/dist/cursor-target.js
  var CursorTarget = class extends Component3 {
    /** Emitter for events when the target is hovered */
    onHover = new Emitter();
    /** Emitter for events when the target is unhovered */
    onUnhover = new Emitter();
    /** Emitter for events when the target is clicked */
    onClick = new Emitter();
    /** Emitter for events when the cursor moves on the target */
    onMove = new Emitter();
    /** Emitter for events when the user pressed the select button on the target */
    onDown = new Emitter();
    /** Emitter for events when the user unpressed the select button on the target */
    onUp = new Emitter();
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    this.onHover.add(f);
     */
    addHoverFunction(f) {
      this.onHover.add(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    this.onHover.remove(f);
     */
    removeHoverFunction(f) {
      this.onHover.remove(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    this.onUnhover.add(f);
     */
    addUnHoverFunction(f) {
      this.onUnhover.add(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    this.onUnhover.remove(f);
     */
    removeUnHoverFunction(f) {
      this.onUnhover.remove(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    this.onClick.add(f);
     */
    addClickFunction(f) {
      this.onClick.add(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onClick.remove(f);
     */
    removeClickFunction(f) {
      this.onClick.remove(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onMove.add(f);
     */
    addMoveFunction(f) {
      this.onMove.add(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onMove.remove(f);
     */
    removeMoveFunction(f) {
      this.onMove.remove(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onDown.add(f);
     */
    addDownFunction(f) {
      this.onDown.add(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onDown.remove(f);
     */
    removeDownFunction(f) {
      this.onDown.remove(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onUp.add(f);
     */
    addUpFunction(f) {
      this.onUp.add(f);
    }
    /**
     * @deprecated Use the emitter instead.
     *
     * @example
     *    component.onUp.remove(f);
     */
    removeUpFunction(f) {
      this.onUp.remove(f);
    }
  };
  __publicField(CursorTarget, "TypeName", "cursor-target");
  __publicField(CursorTarget, "Properties", {});

  // node_modules/gl-matrix/esm/common.js
  var EPSILON = 1e-6;
  var ARRAY_TYPE = typeof Float32Array !== "undefined" ? Float32Array : Array;
  var RANDOM = Math.random;
  var degree = Math.PI / 180;
  if (!Math.hypot)
    Math.hypot = function() {
      var y = 0, i = arguments.length;
      while (i--) {
        y += arguments[i] * arguments[i];
      }
      return Math.sqrt(y);
    };

  // node_modules/gl-matrix/esm/mat3.js
  function create() {
    var out = new ARRAY_TYPE(9);
    if (ARRAY_TYPE != Float32Array) {
      out[1] = 0;
      out[2] = 0;
      out[3] = 0;
      out[5] = 0;
      out[6] = 0;
      out[7] = 0;
    }
    out[0] = 1;
    out[4] = 1;
    out[8] = 1;
    return out;
  }

  // node_modules/gl-matrix/esm/mat4.js
  var mat4_exports = {};
  __export(mat4_exports, {
    add: () => add,
    adjoint: () => adjoint,
    clone: () => clone,
    copy: () => copy,
    create: () => create2,
    determinant: () => determinant,
    equals: () => equals,
    exactEquals: () => exactEquals,
    frob: () => frob,
    fromQuat: () => fromQuat,
    fromQuat2: () => fromQuat2,
    fromRotation: () => fromRotation,
    fromRotationTranslation: () => fromRotationTranslation,
    fromRotationTranslationScale: () => fromRotationTranslationScale,
    fromRotationTranslationScaleOrigin: () => fromRotationTranslationScaleOrigin,
    fromScaling: () => fromScaling,
    fromTranslation: () => fromTranslation,
    fromValues: () => fromValues,
    fromXRotation: () => fromXRotation,
    fromYRotation: () => fromYRotation,
    fromZRotation: () => fromZRotation,
    frustum: () => frustum,
    getRotation: () => getRotation,
    getScaling: () => getScaling,
    getTranslation: () => getTranslation,
    identity: () => identity,
    invert: () => invert,
    lookAt: () => lookAt,
    mul: () => mul,
    multiply: () => multiply,
    multiplyScalar: () => multiplyScalar,
    multiplyScalarAndAdd: () => multiplyScalarAndAdd,
    ortho: () => ortho,
    orthoNO: () => orthoNO,
    orthoZO: () => orthoZO,
    perspective: () => perspective,
    perspectiveFromFieldOfView: () => perspectiveFromFieldOfView,
    perspectiveNO: () => perspectiveNO,
    perspectiveZO: () => perspectiveZO,
    rotate: () => rotate,
    rotateX: () => rotateX,
    rotateY: () => rotateY,
    rotateZ: () => rotateZ,
    scale: () => scale,
    set: () => set,
    str: () => str,
    sub: () => sub,
    subtract: () => subtract,
    targetTo: () => targetTo,
    translate: () => translate,
    transpose: () => transpose
  });
  function create2() {
    var out = new ARRAY_TYPE(16);
    if (ARRAY_TYPE != Float32Array) {
      out[1] = 0;
      out[2] = 0;
      out[3] = 0;
      out[4] = 0;
      out[6] = 0;
      out[7] = 0;
      out[8] = 0;
      out[9] = 0;
      out[11] = 0;
      out[12] = 0;
      out[13] = 0;
      out[14] = 0;
    }
    out[0] = 1;
    out[5] = 1;
    out[10] = 1;
    out[15] = 1;
    return out;
  }
  function clone(a) {
    var out = new ARRAY_TYPE(16);
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    out[3] = a[3];
    out[4] = a[4];
    out[5] = a[5];
    out[6] = a[6];
    out[7] = a[7];
    out[8] = a[8];
    out[9] = a[9];
    out[10] = a[10];
    out[11] = a[11];
    out[12] = a[12];
    out[13] = a[13];
    out[14] = a[14];
    out[15] = a[15];
    return out;
  }
  function copy(out, a) {
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    out[3] = a[3];
    out[4] = a[4];
    out[5] = a[5];
    out[6] = a[6];
    out[7] = a[7];
    out[8] = a[8];
    out[9] = a[9];
    out[10] = a[10];
    out[11] = a[11];
    out[12] = a[12];
    out[13] = a[13];
    out[14] = a[14];
    out[15] = a[15];
    return out;
  }
  function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {
    var out = new ARRAY_TYPE(16);
    out[0] = m00;
    out[1] = m01;
    out[2] = m02;
    out[3] = m03;
    out[4] = m10;
    out[5] = m11;
    out[6] = m12;
    out[7] = m13;
    out[8] = m20;
    out[9] = m21;
    out[10] = m22;
    out[11] = m23;
    out[12] = m30;
    out[13] = m31;
    out[14] = m32;
    out[15] = m33;
    return out;
  }
  function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {
    out[0] = m00;
    out[1] = m01;
    out[2] = m02;
    out[3] = m03;
    out[4] = m10;
    out[5] = m11;
    out[6] = m12;
    out[7] = m13;
    out[8] = m20;
    out[9] = m21;
    out[10] = m22;
    out[11] = m23;
    out[12] = m30;
    out[13] = m31;
    out[14] = m32;
    out[15] = m33;
    return out;
  }
  function identity(out) {
    out[0] = 1;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = 1;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[10] = 1;
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function transpose(out, a) {
    if (out === a) {
      var a01 = a[1], a02 = a[2], a03 = a[3];
      var a12 = a[6], a13 = a[7];
      var a23 = a[11];
      out[1] = a[4];
      out[2] = a[8];
      out[3] = a[12];
      out[4] = a01;
      out[6] = a[9];
      out[7] = a[13];
      out[8] = a02;
      out[9] = a12;
      out[11] = a[14];
      out[12] = a03;
      out[13] = a13;
      out[14] = a23;
    } else {
      out[0] = a[0];
      out[1] = a[4];
      out[2] = a[8];
      out[3] = a[12];
      out[4] = a[1];
      out[5] = a[5];
      out[6] = a[9];
      out[7] = a[13];
      out[8] = a[2];
      out[9] = a[6];
      out[10] = a[10];
      out[11] = a[14];
      out[12] = a[3];
      out[13] = a[7];
      out[14] = a[11];
      out[15] = a[15];
    }
    return out;
  }
  function invert(out, a) {
    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];
    var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];
    var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];
    var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];
    var b00 = a00 * a11 - a01 * a10;
    var b01 = a00 * a12 - a02 * a10;
    var b02 = a00 * a13 - a03 * a10;
    var b03 = a01 * a12 - a02 * a11;
    var b04 = a01 * a13 - a03 * a11;
    var b05 = a02 * a13 - a03 * a12;
    var b06 = a20 * a31 - a21 * a30;
    var b07 = a20 * a32 - a22 * a30;
    var b08 = a20 * a33 - a23 * a30;
    var b09 = a21 * a32 - a22 * a31;
    var b10 = a21 * a33 - a23 * a31;
    var b11 = a22 * a33 - a23 * a32;
    var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
    if (!det) {
      return null;
    }
    det = 1 / det;
    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;
    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;
    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;
    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;
    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;
    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;
    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;
    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;
    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;
    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;
    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;
    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;
    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;
    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;
    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;
    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;
    return out;
  }
  function adjoint(out, a) {
    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];
    var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];
    var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];
    var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];
    out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);
    out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));
    out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);
    out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));
    out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));
    out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);
    out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));
    out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);
    out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);
    out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));
    out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);
    out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));
    out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));
    out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);
    out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));
    out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);
    return out;
  }
  function determinant(a) {
    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];
    var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];
    var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];
    var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];
    var b00 = a00 * a11 - a01 * a10;
    var b01 = a00 * a12 - a02 * a10;
    var b02 = a00 * a13 - a03 * a10;
    var b03 = a01 * a12 - a02 * a11;
    var b04 = a01 * a13 - a03 * a11;
    var b05 = a02 * a13 - a03 * a12;
    var b06 = a20 * a31 - a21 * a30;
    var b07 = a20 * a32 - a22 * a30;
    var b08 = a20 * a33 - a23 * a30;
    var b09 = a21 * a32 - a22 * a31;
    var b10 = a21 * a33 - a23 * a31;
    var b11 = a22 * a33 - a23 * a32;
    return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
  }
  function multiply(out, a, b) {
    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];
    var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];
    var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];
    var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];
    var b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];
    out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;
    out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;
    out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;
    out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;
    b0 = b[4];
    b1 = b[5];
    b2 = b[6];
    b3 = b[7];
    out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;
    out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;
    out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;
    out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;
    b0 = b[8];
    b1 = b[9];
    b2 = b[10];
    b3 = b[11];
    out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;
    out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;
    out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;
    out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;
    b0 = b[12];
    b1 = b[13];
    b2 = b[14];
    b3 = b[15];
    out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;
    out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;
    out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;
    out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;
    return out;
  }
  function translate(out, a, v) {
    var x = v[0], y = v[1], z = v[2];
    var a00, a01, a02, a03;
    var a10, a11, a12, a13;
    var a20, a21, a22, a23;
    if (a === out) {
      out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];
      out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];
      out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];
      out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];
    } else {
      a00 = a[0];
      a01 = a[1];
      a02 = a[2];
      a03 = a[3];
      a10 = a[4];
      a11 = a[5];
      a12 = a[6];
      a13 = a[7];
      a20 = a[8];
      a21 = a[9];
      a22 = a[10];
      a23 = a[11];
      out[0] = a00;
      out[1] = a01;
      out[2] = a02;
      out[3] = a03;
      out[4] = a10;
      out[5] = a11;
      out[6] = a12;
      out[7] = a13;
      out[8] = a20;
      out[9] = a21;
      out[10] = a22;
      out[11] = a23;
      out[12] = a00 * x + a10 * y + a20 * z + a[12];
      out[13] = a01 * x + a11 * y + a21 * z + a[13];
      out[14] = a02 * x + a12 * y + a22 * z + a[14];
      out[15] = a03 * x + a13 * y + a23 * z + a[15];
    }
    return out;
  }
  function scale(out, a, v) {
    var x = v[0], y = v[1], z = v[2];
    out[0] = a[0] * x;
    out[1] = a[1] * x;
    out[2] = a[2] * x;
    out[3] = a[3] * x;
    out[4] = a[4] * y;
    out[5] = a[5] * y;
    out[6] = a[6] * y;
    out[7] = a[7] * y;
    out[8] = a[8] * z;
    out[9] = a[9] * z;
    out[10] = a[10] * z;
    out[11] = a[11] * z;
    out[12] = a[12];
    out[13] = a[13];
    out[14] = a[14];
    out[15] = a[15];
    return out;
  }
  function rotate(out, a, rad, axis) {
    var x = axis[0], y = axis[1], z = axis[2];
    var len4 = Math.hypot(x, y, z);
    var s, c, t;
    var a00, a01, a02, a03;
    var a10, a11, a12, a13;
    var a20, a21, a22, a23;
    var b00, b01, b02;
    var b10, b11, b12;
    var b20, b21, b22;
    if (len4 < EPSILON) {
      return null;
    }
    len4 = 1 / len4;
    x *= len4;
    y *= len4;
    z *= len4;
    s = Math.sin(rad);
    c = Math.cos(rad);
    t = 1 - c;
    a00 = a[0];
    a01 = a[1];
    a02 = a[2];
    a03 = a[3];
    a10 = a[4];
    a11 = a[5];
    a12 = a[6];
    a13 = a[7];
    a20 = a[8];
    a21 = a[9];
    a22 = a[10];
    a23 = a[11];
    b00 = x * x * t + c;
    b01 = y * x * t + z * s;
    b02 = z * x * t - y * s;
    b10 = x * y * t - z * s;
    b11 = y * y * t + c;
    b12 = z * y * t + x * s;
    b20 = x * z * t + y * s;
    b21 = y * z * t - x * s;
    b22 = z * z * t + c;
    out[0] = a00 * b00 + a10 * b01 + a20 * b02;
    out[1] = a01 * b00 + a11 * b01 + a21 * b02;
    out[2] = a02 * b00 + a12 * b01 + a22 * b02;
    out[3] = a03 * b00 + a13 * b01 + a23 * b02;
    out[4] = a00 * b10 + a10 * b11 + a20 * b12;
    out[5] = a01 * b10 + a11 * b11 + a21 * b12;
    out[6] = a02 * b10 + a12 * b11 + a22 * b12;
    out[7] = a03 * b10 + a13 * b11 + a23 * b12;
    out[8] = a00 * b20 + a10 * b21 + a20 * b22;
    out[9] = a01 * b20 + a11 * b21 + a21 * b22;
    out[10] = a02 * b20 + a12 * b21 + a22 * b22;
    out[11] = a03 * b20 + a13 * b21 + a23 * b22;
    if (a !== out) {
      out[12] = a[12];
      out[13] = a[13];
      out[14] = a[14];
      out[15] = a[15];
    }
    return out;
  }
  function rotateX(out, a, rad) {
    var s = Math.sin(rad);
    var c = Math.cos(rad);
    var a10 = a[4];
    var a11 = a[5];
    var a12 = a[6];
    var a13 = a[7];
    var a20 = a[8];
    var a21 = a[9];
    var a22 = a[10];
    var a23 = a[11];
    if (a !== out) {
      out[0] = a[0];
      out[1] = a[1];
      out[2] = a[2];
      out[3] = a[3];
      out[12] = a[12];
      out[13] = a[13];
      out[14] = a[14];
      out[15] = a[15];
    }
    out[4] = a10 * c + a20 * s;
    out[5] = a11 * c + a21 * s;
    out[6] = a12 * c + a22 * s;
    out[7] = a13 * c + a23 * s;
    out[8] = a20 * c - a10 * s;
    out[9] = a21 * c - a11 * s;
    out[10] = a22 * c - a12 * s;
    out[11] = a23 * c - a13 * s;
    return out;
  }
  function rotateY(out, a, rad) {
    var s = Math.sin(rad);
    var c = Math.cos(rad);
    var a00 = a[0];
    var a01 = a[1];
    var a02 = a[2];
    var a03 = a[3];
    var a20 = a[8];
    var a21 = a[9];
    var a22 = a[10];
    var a23 = a[11];
    if (a !== out) {
      out[4] = a[4];
      out[5] = a[5];
      out[6] = a[6];
      out[7] = a[7];
      out[12] = a[12];
      out[13] = a[13];
      out[14] = a[14];
      out[15] = a[15];
    }
    out[0] = a00 * c - a20 * s;
    out[1] = a01 * c - a21 * s;
    out[2] = a02 * c - a22 * s;
    out[3] = a03 * c - a23 * s;
    out[8] = a00 * s + a20 * c;
    out[9] = a01 * s + a21 * c;
    out[10] = a02 * s + a22 * c;
    out[11] = a03 * s + a23 * c;
    return out;
  }
  function rotateZ(out, a, rad) {
    var s = Math.sin(rad);
    var c = Math.cos(rad);
    var a00 = a[0];
    var a01 = a[1];
    var a02 = a[2];
    var a03 = a[3];
    var a10 = a[4];
    var a11 = a[5];
    var a12 = a[6];
    var a13 = a[7];
    if (a !== out) {
      out[8] = a[8];
      out[9] = a[9];
      out[10] = a[10];
      out[11] = a[11];
      out[12] = a[12];
      out[13] = a[13];
      out[14] = a[14];
      out[15] = a[15];
    }
    out[0] = a00 * c + a10 * s;
    out[1] = a01 * c + a11 * s;
    out[2] = a02 * c + a12 * s;
    out[3] = a03 * c + a13 * s;
    out[4] = a10 * c - a00 * s;
    out[5] = a11 * c - a01 * s;
    out[6] = a12 * c - a02 * s;
    out[7] = a13 * c - a03 * s;
    return out;
  }
  function fromTranslation(out, v) {
    out[0] = 1;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = 1;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[10] = 1;
    out[11] = 0;
    out[12] = v[0];
    out[13] = v[1];
    out[14] = v[2];
    out[15] = 1;
    return out;
  }
  function fromScaling(out, v) {
    out[0] = v[0];
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = v[1];
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[10] = v[2];
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function fromRotation(out, rad, axis) {
    var x = axis[0], y = axis[1], z = axis[2];
    var len4 = Math.hypot(x, y, z);
    var s, c, t;
    if (len4 < EPSILON) {
      return null;
    }
    len4 = 1 / len4;
    x *= len4;
    y *= len4;
    z *= len4;
    s = Math.sin(rad);
    c = Math.cos(rad);
    t = 1 - c;
    out[0] = x * x * t + c;
    out[1] = y * x * t + z * s;
    out[2] = z * x * t - y * s;
    out[3] = 0;
    out[4] = x * y * t - z * s;
    out[5] = y * y * t + c;
    out[6] = z * y * t + x * s;
    out[7] = 0;
    out[8] = x * z * t + y * s;
    out[9] = y * z * t - x * s;
    out[10] = z * z * t + c;
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function fromXRotation(out, rad) {
    var s = Math.sin(rad);
    var c = Math.cos(rad);
    out[0] = 1;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = c;
    out[6] = s;
    out[7] = 0;
    out[8] = 0;
    out[9] = -s;
    out[10] = c;
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function fromYRotation(out, rad) {
    var s = Math.sin(rad);
    var c = Math.cos(rad);
    out[0] = c;
    out[1] = 0;
    out[2] = -s;
    out[3] = 0;
    out[4] = 0;
    out[5] = 1;
    out[6] = 0;
    out[7] = 0;
    out[8] = s;
    out[9] = 0;
    out[10] = c;
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function fromZRotation(out, rad) {
    var s = Math.sin(rad);
    var c = Math.cos(rad);
    out[0] = c;
    out[1] = s;
    out[2] = 0;
    out[3] = 0;
    out[4] = -s;
    out[5] = c;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[10] = 1;
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function fromRotationTranslation(out, q, v) {
    var x = q[0], y = q[1], z = q[2], w = q[3];
    var x2 = x + x;
    var y2 = y + y;
    var z2 = z + z;
    var xx = x * x2;
    var xy = x * y2;
    var xz = x * z2;
    var yy = y * y2;
    var yz = y * z2;
    var zz = z * z2;
    var wx = w * x2;
    var wy = w * y2;
    var wz = w * z2;
    out[0] = 1 - (yy + zz);
    out[1] = xy + wz;
    out[2] = xz - wy;
    out[3] = 0;
    out[4] = xy - wz;
    out[5] = 1 - (xx + zz);
    out[6] = yz + wx;
    out[7] = 0;
    out[8] = xz + wy;
    out[9] = yz - wx;
    out[10] = 1 - (xx + yy);
    out[11] = 0;
    out[12] = v[0];
    out[13] = v[1];
    out[14] = v[2];
    out[15] = 1;
    return out;
  }
  function fromQuat2(out, a) {
    var translation = new ARRAY_TYPE(3);
    var bx = -a[0], by = -a[1], bz = -a[2], bw = a[3], ax = a[4], ay = a[5], az = a[6], aw = a[7];
    var magnitude = bx * bx + by * by + bz * bz + bw * bw;
    if (magnitude > 0) {
      translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;
      translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;
      translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;
    } else {
      translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;
      translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;
      translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;
    }
    fromRotationTranslation(out, a, translation);
    return out;
  }
  function getTranslation(out, mat) {
    out[0] = mat[12];
    out[1] = mat[13];
    out[2] = mat[14];
    return out;
  }
  function getScaling(out, mat) {
    var m11 = mat[0];
    var m12 = mat[1];
    var m13 = mat[2];
    var m21 = mat[4];
    var m22 = mat[5];
    var m23 = mat[6];
    var m31 = mat[8];
    var m32 = mat[9];
    var m33 = mat[10];
    out[0] = Math.hypot(m11, m12, m13);
    out[1] = Math.hypot(m21, m22, m23);
    out[2] = Math.hypot(m31, m32, m33);
    return out;
  }
  function getRotation(out, mat) {
    var scaling = new ARRAY_TYPE(3);
    getScaling(scaling, mat);
    var is1 = 1 / scaling[0];
    var is2 = 1 / scaling[1];
    var is3 = 1 / scaling[2];
    var sm11 = mat[0] * is1;
    var sm12 = mat[1] * is2;
    var sm13 = mat[2] * is3;
    var sm21 = mat[4] * is1;
    var sm22 = mat[5] * is2;
    var sm23 = mat[6] * is3;
    var sm31 = mat[8] * is1;
    var sm32 = mat[9] * is2;
    var sm33 = mat[10] * is3;
    var trace = sm11 + sm22 + sm33;
    var S = 0;
    if (trace > 0) {
      S = Math.sqrt(trace + 1) * 2;
      out[3] = 0.25 * S;
      out[0] = (sm23 - sm32) / S;
      out[1] = (sm31 - sm13) / S;
      out[2] = (sm12 - sm21) / S;
    } else if (sm11 > sm22 && sm11 > sm33) {
      S = Math.sqrt(1 + sm11 - sm22 - sm33) * 2;
      out[3] = (sm23 - sm32) / S;
      out[0] = 0.25 * S;
      out[1] = (sm12 + sm21) / S;
      out[2] = (sm31 + sm13) / S;
    } else if (sm22 > sm33) {
      S = Math.sqrt(1 + sm22 - sm11 - sm33) * 2;
      out[3] = (sm31 - sm13) / S;
      out[0] = (sm12 + sm21) / S;
      out[1] = 0.25 * S;
      out[2] = (sm23 + sm32) / S;
    } else {
      S = Math.sqrt(1 + sm33 - sm11 - sm22) * 2;
      out[3] = (sm12 - sm21) / S;
      out[0] = (sm31 + sm13) / S;
      out[1] = (sm23 + sm32) / S;
      out[2] = 0.25 * S;
    }
    return out;
  }
  function fromRotationTranslationScale(out, q, v, s) {
    var x = q[0], y = q[1], z = q[2], w = q[3];
    var x2 = x + x;
    var y2 = y + y;
    var z2 = z + z;
    var xx = x * x2;
    var xy = x * y2;
    var xz = x * z2;
    var yy = y * y2;
    var yz = y * z2;
    var zz = z * z2;
    var wx = w * x2;
    var wy = w * y2;
    var wz = w * z2;
    var sx = s[0];
    var sy = s[1];
    var sz = s[2];
    out[0] = (1 - (yy + zz)) * sx;
    out[1] = (xy + wz) * sx;
    out[2] = (xz - wy) * sx;
    out[3] = 0;
    out[4] = (xy - wz) * sy;
    out[5] = (1 - (xx + zz)) * sy;
    out[6] = (yz + wx) * sy;
    out[7] = 0;
    out[8] = (xz + wy) * sz;
    out[9] = (yz - wx) * sz;
    out[10] = (1 - (xx + yy)) * sz;
    out[11] = 0;
    out[12] = v[0];
    out[13] = v[1];
    out[14] = v[2];
    out[15] = 1;
    return out;
  }
  function fromRotationTranslationScaleOrigin(out, q, v, s, o) {
    var x = q[0], y = q[1], z = q[2], w = q[3];
    var x2 = x + x;
    var y2 = y + y;
    var z2 = z + z;
    var xx = x * x2;
    var xy = x * y2;
    var xz = x * z2;
    var yy = y * y2;
    var yz = y * z2;
    var zz = z * z2;
    var wx = w * x2;
    var wy = w * y2;
    var wz = w * z2;
    var sx = s[0];
    var sy = s[1];
    var sz = s[2];
    var ox = o[0];
    var oy = o[1];
    var oz = o[2];
    var out0 = (1 - (yy + zz)) * sx;
    var out1 = (xy + wz) * sx;
    var out2 = (xz - wy) * sx;
    var out4 = (xy - wz) * sy;
    var out5 = (1 - (xx + zz)) * sy;
    var out6 = (yz + wx) * sy;
    var out8 = (xz + wy) * sz;
    var out9 = (yz - wx) * sz;
    var out10 = (1 - (xx + yy)) * sz;
    out[0] = out0;
    out[1] = out1;
    out[2] = out2;
    out[3] = 0;
    out[4] = out4;
    out[5] = out5;
    out[6] = out6;
    out[7] = 0;
    out[8] = out8;
    out[9] = out9;
    out[10] = out10;
    out[11] = 0;
    out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);
    out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);
    out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);
    out[15] = 1;
    return out;
  }
  function fromQuat(out, q) {
    var x = q[0], y = q[1], z = q[2], w = q[3];
    var x2 = x + x;
    var y2 = y + y;
    var z2 = z + z;
    var xx = x * x2;
    var yx = y * x2;
    var yy = y * y2;
    var zx = z * x2;
    var zy = z * y2;
    var zz = z * z2;
    var wx = w * x2;
    var wy = w * y2;
    var wz = w * z2;
    out[0] = 1 - yy - zz;
    out[1] = yx + wz;
    out[2] = zx - wy;
    out[3] = 0;
    out[4] = yx - wz;
    out[5] = 1 - xx - zz;
    out[6] = zy + wx;
    out[7] = 0;
    out[8] = zx + wy;
    out[9] = zy - wx;
    out[10] = 1 - xx - yy;
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
    out[15] = 1;
    return out;
  }
  function frustum(out, left, right, bottom, top, near, far) {
    var rl = 1 / (right - left);
    var tb = 1 / (top - bottom);
    var nf = 1 / (near - far);
    out[0] = near * 2 * rl;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = near * 2 * tb;
    out[6] = 0;
    out[7] = 0;
    out[8] = (right + left) * rl;
    out[9] = (top + bottom) * tb;
    out[10] = (far + near) * nf;
    out[11] = -1;
    out[12] = 0;
    out[13] = 0;
    out[14] = far * near * 2 * nf;
    out[15] = 0;
    return out;
  }
  function perspectiveNO(out, fovy, aspect, near, far) {
    var f = 1 / Math.tan(fovy / 2), nf;
    out[0] = f / aspect;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = f;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[11] = -1;
    out[12] = 0;
    out[13] = 0;
    out[15] = 0;
    if (far != null && far !== Infinity) {
      nf = 1 / (near - far);
      out[10] = (far + near) * nf;
      out[14] = 2 * far * near * nf;
    } else {
      out[10] = -1;
      out[14] = -2 * near;
    }
    return out;
  }
  var perspective = perspectiveNO;
  function perspectiveZO(out, fovy, aspect, near, far) {
    var f = 1 / Math.tan(fovy / 2), nf;
    out[0] = f / aspect;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = f;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[11] = -1;
    out[12] = 0;
    out[13] = 0;
    out[15] = 0;
    if (far != null && far !== Infinity) {
      nf = 1 / (near - far);
      out[10] = far * nf;
      out[14] = far * near * nf;
    } else {
      out[10] = -1;
      out[14] = -near;
    }
    return out;
  }
  function perspectiveFromFieldOfView(out, fov, near, far) {
    var upTan = Math.tan(fov.upDegrees * Math.PI / 180);
    var downTan = Math.tan(fov.downDegrees * Math.PI / 180);
    var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180);
    var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180);
    var xScale = 2 / (leftTan + rightTan);
    var yScale = 2 / (upTan + downTan);
    out[0] = xScale;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = yScale;
    out[6] = 0;
    out[7] = 0;
    out[8] = -((leftTan - rightTan) * xScale * 0.5);
    out[9] = (upTan - downTan) * yScale * 0.5;
    out[10] = far / (near - far);
    out[11] = -1;
    out[12] = 0;
    out[13] = 0;
    out[14] = far * near / (near - far);
    out[15] = 0;
    return out;
  }
  function orthoNO(out, left, right, bottom, top, near, far) {
    var lr = 1 / (left - right);
    var bt = 1 / (bottom - top);
    var nf = 1 / (near - far);
    out[0] = -2 * lr;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = -2 * bt;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[10] = 2 * nf;
    out[11] = 0;
    out[12] = (left + right) * lr;
    out[13] = (top + bottom) * bt;
    out[14] = (far + near) * nf;
    out[15] = 1;
    return out;
  }
  var ortho = orthoNO;
  function orthoZO(out, left, right, bottom, top, near, far) {
    var lr = 1 / (left - right);
    var bt = 1 / (bottom - top);
    var nf = 1 / (near - far);
    out[0] = -2 * lr;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[5] = -2 * bt;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[10] = nf;
    out[11] = 0;
    out[12] = (left + right) * lr;
    out[13] = (top + bottom) * bt;
    out[14] = near * nf;
    out[15] = 1;
    return out;
  }
  function lookAt(out, eye, center, up) {
    var x0, x1, x2, y0, y1, y2, z0, z1, z2, len4;
    var eyex = eye[0];
    var eyey = eye[1];
    var eyez = eye[2];
    var upx = up[0];
    var upy = up[1];
    var upz = up[2];
    var centerx = center[0];
    var centery = center[1];
    var centerz = center[2];
    if (Math.abs(eyex - centerx) < EPSILON && Math.abs(eyey - centery) < EPSILON && Math.abs(eyez - centerz) < EPSILON) {
      return identity(out);
    }
    z0 = eyex - centerx;
    z1 = eyey - centery;
    z2 = eyez - centerz;
    len4 = 1 / Math.hypot(z0, z1, z2);
    z0 *= len4;
    z1 *= len4;
    z2 *= len4;
    x0 = upy * z2 - upz * z1;
    x1 = upz * z0 - upx * z2;
    x2 = upx * z1 - upy * z0;
    len4 = Math.hypot(x0, x1, x2);
    if (!len4) {
      x0 = 0;
      x1 = 0;
      x2 = 0;
    } else {
      len4 = 1 / len4;
      x0 *= len4;
      x1 *= len4;
      x2 *= len4;
    }
    y0 = z1 * x2 - z2 * x1;
    y1 = z2 * x0 - z0 * x2;
    y2 = z0 * x1 - z1 * x0;
    len4 = Math.hypot(y0, y1, y2);
    if (!len4) {
      y0 = 0;
      y1 = 0;
      y2 = 0;
    } else {
      len4 = 1 / len4;
      y0 *= len4;
      y1 *= len4;
      y2 *= len4;
    }
    out[0] = x0;
    out[1] = y0;
    out[2] = z0;
    out[3] = 0;
    out[4] = x1;
    out[5] = y1;
    out[6] = z1;
    out[7] = 0;
    out[8] = x2;
    out[9] = y2;
    out[10] = z2;
    out[11] = 0;
    out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);
    out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);
    out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);
    out[15] = 1;
    return out;
  }
  function targetTo(out, eye, target, up) {
    var eyex = eye[0], eyey = eye[1], eyez = eye[2], upx = up[0], upy = up[1], upz = up[2];
    var z0 = eyex - target[0], z1 = eyey - target[1], z2 = eyez - target[2];
    var len4 = z0 * z0 + z1 * z1 + z2 * z2;
    if (len4 > 0) {
      len4 = 1 / Math.sqrt(len4);
      z0 *= len4;
      z1 *= len4;
      z2 *= len4;
    }
    var x0 = upy * z2 - upz * z1, x1 = upz * z0 - upx * z2, x2 = upx * z1 - upy * z0;
    len4 = x0 * x0 + x1 * x1 + x2 * x2;
    if (len4 > 0) {
      len4 = 1 / Math.sqrt(len4);
      x0 *= len4;
      x1 *= len4;
      x2 *= len4;
    }
    out[0] = x0;
    out[1] = x1;
    out[2] = x2;
    out[3] = 0;
    out[4] = z1 * x2 - z2 * x1;
    out[5] = z2 * x0 - z0 * x2;
    out[6] = z0 * x1 - z1 * x0;
    out[7] = 0;
    out[8] = z0;
    out[9] = z1;
    out[10] = z2;
    out[11] = 0;
    out[12] = eyex;
    out[13] = eyey;
    out[14] = eyez;
    out[15] = 1;
    return out;
  }
  function str(a) {
    return "mat4(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ", " + a[4] + ", " + a[5] + ", " + a[6] + ", " + a[7] + ", " + a[8] + ", " + a[9] + ", " + a[10] + ", " + a[11] + ", " + a[12] + ", " + a[13] + ", " + a[14] + ", " + a[15] + ")";
  }
  function frob(a) {
    return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);
  }
  function add(out, a, b) {
    out[0] = a[0] + b[0];
    out[1] = a[1] + b[1];
    out[2] = a[2] + b[2];
    out[3] = a[3] + b[3];
    out[4] = a[4] + b[4];
    out[5] = a[5] + b[5];
    out[6] = a[6] + b[6];
    out[7] = a[7] + b[7];
    out[8] = a[8] + b[8];
    out[9] = a[9] + b[9];
    out[10] = a[10] + b[10];
    out[11] = a[11] + b[11];
    out[12] = a[12] + b[12];
    out[13] = a[13] + b[13];
    out[14] = a[14] + b[14];
    out[15] = a[15] + b[15];
    return out;
  }
  function subtract(out, a, b) {
    out[0] = a[0] - b[0];
    out[1] = a[1] - b[1];
    out[2] = a[2] - b[2];
    out[3] = a[3] - b[3];
    out[4] = a[4] - b[4];
    out[5] = a[5] - b[5];
    out[6] = a[6] - b[6];
    out[7] = a[7] - b[7];
    out[8] = a[8] - b[8];
    out[9] = a[9] - b[9];
    out[10] = a[10] - b[10];
    out[11] = a[11] - b[11];
    out[12] = a[12] - b[12];
    out[13] = a[13] - b[13];
    out[14] = a[14] - b[14];
    out[15] = a[15] - b[15];
    return out;
  }
  function multiplyScalar(out, a, b) {
    out[0] = a[0] * b;
    out[1] = a[1] * b;
    out[2] = a[2] * b;
    out[3] = a[3] * b;
    out[4] = a[4] * b;
    out[5] = a[5] * b;
    out[6] = a[6] * b;
    out[7] = a[7] * b;
    out[8] = a[8] * b;
    out[9] = a[9] * b;
    out[10] = a[10] * b;
    out[11] = a[11] * b;
    out[12] = a[12] * b;
    out[13] = a[13] * b;
    out[14] = a[14] * b;
    out[15] = a[15] * b;
    return out;
  }
  function multiplyScalarAndAdd(out, a, b, scale6) {
    out[0] = a[0] + b[0] * scale6;
    out[1] = a[1] + b[1] * scale6;
    out[2] = a[2] + b[2] * scale6;
    out[3] = a[3] + b[3] * scale6;
    out[4] = a[4] + b[4] * scale6;
    out[5] = a[5] + b[5] * scale6;
    out[6] = a[6] + b[6] * scale6;
    out[7] = a[7] + b[7] * scale6;
    out[8] = a[8] + b[8] * scale6;
    out[9] = a[9] + b[9] * scale6;
    out[10] = a[10] + b[10] * scale6;
    out[11] = a[11] + b[11] * scale6;
    out[12] = a[12] + b[12] * scale6;
    out[13] = a[13] + b[13] * scale6;
    out[14] = a[14] + b[14] * scale6;
    out[15] = a[15] + b[15] * scale6;
    return out;
  }
  function exactEquals(a, b) {
    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];
  }
  function equals(a, b) {
    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];
    var a4 = a[4], a5 = a[5], a6 = a[6], a7 = a[7];
    var a8 = a[8], a9 = a[9], a10 = a[10], a11 = a[11];
    var a12 = a[12], a13 = a[13], a14 = a[14], a15 = a[15];
    var b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];
    var b4 = b[4], b5 = b[5], b6 = b[6], b7 = b[7];
    var b8 = b[8], b9 = b[9], b10 = b[10], b11 = b[11];
    var b12 = b[12], b13 = b[13], b14 = b[14], b15 = b[15];
    return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= EPSILON * Math.max(1, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= EPSILON * Math.max(1, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= EPSILON * Math.max(1, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= EPSILON * Math.max(1, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= EPSILON * Math.max(1, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= EPSILON * Math.max(1, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= EPSILON * Math.max(1, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= EPSILON * Math.max(1, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= EPSILON * Math.max(1, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= EPSILON * Math.max(1, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= EPSILON * Math.max(1, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= EPSILON * Math.max(1, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= EPSILON * Math.max(1, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= EPSILON * Math.max(1, Math.abs(a15), Math.abs(b15));
  }
  var mul = multiply;
  var sub = subtract;

  // node_modules/gl-matrix/esm/quat.js
  var quat_exports = {};
  __export(quat_exports, {
    add: () => add4,
    calculateW: () => calculateW,
    clone: () => clone4,
    conjugate: () => conjugate,
    copy: () => copy4,
    create: () => create5,
    dot: () => dot3,
    equals: () => equals4,
    exactEquals: () => exactEquals4,
    exp: () => exp,
    fromEuler: () => fromEuler,
    fromMat3: () => fromMat3,
    fromValues: () => fromValues4,
    getAngle: () => getAngle,
    getAxisAngle: () => getAxisAngle,
    identity: () => identity2,
    invert: () => invert2,
    len: () => len2,
    length: () => length3,
    lerp: () => lerp3,
    ln: () => ln,
    mul: () => mul3,
    multiply: () => multiply3,
    normalize: () => normalize3,
    pow: () => pow,
    random: () => random2,
    rotateX: () => rotateX3,
    rotateY: () => rotateY3,
    rotateZ: () => rotateZ3,
    rotationTo: () => rotationTo,
    scale: () => scale4,
    set: () => set4,
    setAxes: () => setAxes,
    setAxisAngle: () => setAxisAngle,
    slerp: () => slerp,
    sqlerp: () => sqlerp,
    sqrLen: () => sqrLen2,
    squaredLength: () => squaredLength3,
    str: () => str3
  });

  // node_modules/gl-matrix/esm/vec3.js
  var vec3_exports = {};
  __export(vec3_exports, {
    add: () => add2,
    angle: () => angle,
    bezier: () => bezier,
    ceil: () => ceil,
    clone: () => clone2,
    copy: () => copy2,
    create: () => create3,
    cross: () => cross,
    dist: () => dist,
    distance: () => distance,
    div: () => div,
    divide: () => divide,
    dot: () => dot,
    equals: () => equals2,
    exactEquals: () => exactEquals2,
    floor: () => floor,
    forEach: () => forEach,
    fromValues: () => fromValues2,
    hermite: () => hermite,
    inverse: () => inverse,
    len: () => len,
    length: () => length,
    lerp: () => lerp,
    max: () => max,
    min: () => min,
    mul: () => mul2,
    multiply: () => multiply2,
    negate: () => negate,
    normalize: () => normalize,
    random: () => random,
    rotateX: () => rotateX2,
    rotateY: () => rotateY2,
    rotateZ: () => rotateZ2,
    round: () => round,
    scale: () => scale2,
    scaleAndAdd: () => scaleAndAdd,
    set: () => set2,
    sqrDist: () => sqrDist,
    sqrLen: () => sqrLen,
    squaredDistance: () => squaredDistance,
    squaredLength: () => squaredLength,
    str: () => str2,
    sub: () => sub2,
    subtract: () => subtract2,
    transformMat3: () => transformMat3,
    transformMat4: () => transformMat4,
    transformQuat: () => transformQuat,
    zero: () => zero
  });
  function create3() {
    var out = new ARRAY_TYPE(3);
    if (ARRAY_TYPE != Float32Array) {
      out[0] = 0;
      out[1] = 0;
      out[2] = 0;
    }
    return out;
  }
  function clone2(a) {
    var out = new ARRAY_TYPE(3);
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    return out;
  }
  function length(a) {
    var x = a[0];
    var y = a[1];
    var z = a[2];
    return Math.hypot(x, y, z);
  }
  function fromValues2(x, y, z) {
    var out = new ARRAY_TYPE(3);
    out[0] = x;
    out[1] = y;
    out[2] = z;
    return out;
  }
  function copy2(out, a) {
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    return out;
  }
  function set2(out, x, y, z) {
    out[0] = x;
    out[1] = y;
    out[2] = z;
    return out;
  }
  function add2(out, a, b) {
    out[0] = a[0] + b[0];
    out[1] = a[1] + b[1];
    out[2] = a[2] + b[2];
    return out;
  }
  function subtract2(out, a, b) {
    out[0] = a[0] - b[0];
    out[1] = a[1] - b[1];
    out[2] = a[2] - b[2];
    return out;
  }
  function multiply2(out, a, b) {
    out[0] = a[0] * b[0];
    out[1] = a[1] * b[1];
    out[2] = a[2] * b[2];
    return out;
  }
  function divide(out, a, b) {
    out[0] = a[0] / b[0];
    out[1] = a[1] / b[1];
    out[2] = a[2] / b[2];
    return out;
  }
  function ceil(out, a) {
    out[0] = Math.ceil(a[0]);
    out[1] = Math.ceil(a[1]);
    out[2] = Math.ceil(a[2]);
    return out;
  }
  function floor(out, a) {
    out[0] = Math.floor(a[0]);
    out[1] = Math.floor(a[1]);
    out[2] = Math.floor(a[2]);
    return out;
  }
  function min(out, a, b) {
    out[0] = Math.min(a[0], b[0]);
    out[1] = Math.min(a[1], b[1]);
    out[2] = Math.min(a[2], b[2]);
    return out;
  }
  function max(out, a, b) {
    out[0] = Math.max(a[0], b[0]);
    out[1] = Math.max(a[1], b[1]);
    out[2] = Math.max(a[2], b[2]);
    return out;
  }
  function round(out, a) {
    out[0] = Math.round(a[0]);
    out[1] = Math.round(a[1]);
    out[2] = Math.round(a[2]);
    return out;
  }
  function scale2(out, a, b) {
    out[0] = a[0] * b;
    out[1] = a[1] * b;
    out[2] = a[2] * b;
    return out;
  }
  function scaleAndAdd(out, a, b, scale6) {
    out[0] = a[0] + b[0] * scale6;
    out[1] = a[1] + b[1] * scale6;
    out[2] = a[2] + b[2] * scale6;
    return out;
  }
  function distance(a, b) {
    var x = b[0] - a[0];
    var y = b[1] - a[1];
    var z = b[2] - a[2];
    return Math.hypot(x, y, z);
  }
  function squaredDistance(a, b) {
    var x = b[0] - a[0];
    var y = b[1] - a[1];
    var z = b[2] - a[2];
    return x * x + y * y + z * z;
  }
  function squaredLength(a) {
    var x = a[0];
    var y = a[1];
    var z = a[2];
    return x * x + y * y + z * z;
  }
  function negate(out, a) {
    out[0] = -a[0];
    out[1] = -a[1];
    out[2] = -a[2];
    return out;
  }
  function inverse(out, a) {
    out[0] = 1 / a[0];
    out[1] = 1 / a[1];
    out[2] = 1 / a[2];
    return out;
  }
  function normalize(out, a) {
    var x = a[0];
    var y = a[1];
    var z = a[2];
    var len4 = x * x + y * y + z * z;
    if (len4 > 0) {
      len4 = 1 / Math.sqrt(len4);
    }
    out[0] = a[0] * len4;
    out[1] = a[1] * len4;
    out[2] = a[2] * len4;
    return out;
  }
  function dot(a, b) {
    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];
  }
  function cross(out, a, b) {
    var ax = a[0], ay = a[1], az = a[2];
    var bx = b[0], by = b[1], bz = b[2];
    out[0] = ay * bz - az * by;
    out[1] = az * bx - ax * bz;
    out[2] = ax * by - ay * bx;
    return out;
  }
  function lerp(out, a, b, t) {
    var ax = a[0];
    var ay = a[1];
    var az = a[2];
    out[0] = ax + t * (b[0] - ax);
    out[1] = ay + t * (b[1] - ay);
    out[2] = az + t * (b[2] - az);
    return out;
  }
  function hermite(out, a, b, c, d, t) {
    var factorTimes2 = t * t;
    var factor1 = factorTimes2 * (2 * t - 3) + 1;
    var factor2 = factorTimes2 * (t - 2) + t;
    var factor3 = factorTimes2 * (t - 1);
    var factor4 = factorTimes2 * (3 - 2 * t);
    out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;
    out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;
    out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;
    return out;
  }
  function bezier(out, a, b, c, d, t) {
    var inverseFactor = 1 - t;
    var inverseFactorTimesTwo = inverseFactor * inverseFactor;
    var factorTimes2 = t * t;
    var factor1 = inverseFactorTimesTwo * inverseFactor;
    var factor2 = 3 * t * inverseFactorTimesTwo;
    var factor3 = 3 * factorTimes2 * inverseFactor;
    var factor4 = factorTimes2 * t;
    out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;
    out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;
    out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;
    return out;
  }
  function random(out, scale6) {
    scale6 = scale6 || 1;
    var r = RANDOM() * 2 * Math.PI;
    var z = RANDOM() * 2 - 1;
    var zScale = Math.sqrt(1 - z * z) * scale6;
    out[0] = Math.cos(r) * zScale;
    out[1] = Math.sin(r) * zScale;
    out[2] = z * scale6;
    return out;
  }
  function transformMat4(out, a, m) {
    var x = a[0], y = a[1], z = a[2];
    var w = m[3] * x + m[7] * y + m[11] * z + m[15];
    w = w || 1;
    out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;
    out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;
    out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;
    return out;
  }
  function transformMat3(out, a, m) {
    var x = a[0], y = a[1], z = a[2];
    out[0] = x * m[0] + y * m[3] + z * m[6];
    out[1] = x * m[1] + y * m[4] + z * m[7];
    out[2] = x * m[2] + y * m[5] + z * m[8];
    return out;
  }
  function transformQuat(out, a, q) {
    var qx = q[0], qy = q[1], qz = q[2], qw = q[3];
    var x = a[0], y = a[1], z = a[2];
    var uvx = qy * z - qz * y, uvy = qz * x - qx * z, uvz = qx * y - qy * x;
    var uuvx = qy * uvz - qz * uvy, uuvy = qz * uvx - qx * uvz, uuvz = qx * uvy - qy * uvx;
    var w2 = qw * 2;
    uvx *= w2;
    uvy *= w2;
    uvz *= w2;
    uuvx *= 2;
    uuvy *= 2;
    uuvz *= 2;
    out[0] = x + uvx + uuvx;
    out[1] = y + uvy + uuvy;
    out[2] = z + uvz + uuvz;
    return out;
  }
  function rotateX2(out, a, b, rad) {
    var p = [], r = [];
    p[0] = a[0] - b[0];
    p[1] = a[1] - b[1];
    p[2] = a[2] - b[2];
    r[0] = p[0];
    r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);
    r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad);
    out[0] = r[0] + b[0];
    out[1] = r[1] + b[1];
    out[2] = r[2] + b[2];
    return out;
  }
  function rotateY2(out, a, b, rad) {
    var p = [], r = [];
    p[0] = a[0] - b[0];
    p[1] = a[1] - b[1];
    p[2] = a[2] - b[2];
    r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);
    r[1] = p[1];
    r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad);
    out[0] = r[0] + b[0];
    out[1] = r[1] + b[1];
    out[2] = r[2] + b[2];
    return out;
  }
  function rotateZ2(out, a, b, rad) {
    var p = [], r = [];
    p[0] = a[0] - b[0];
    p[1] = a[1] - b[1];
    p[2] = a[2] - b[2];
    r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);
    r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);
    r[2] = p[2];
    out[0] = r[0] + b[0];
    out[1] = r[1] + b[1];
    out[2] = r[2] + b[2];
    return out;
  }
  function angle(a, b) {
    var ax = a[0], ay = a[1], az = a[2], bx = b[0], by = b[1], bz = b[2], mag1 = Math.sqrt(ax * ax + ay * ay + az * az), mag2 = Math.sqrt(bx * bx + by * by + bz * bz), mag = mag1 * mag2, cosine = mag && dot(a, b) / mag;
    return Math.acos(Math.min(Math.max(cosine, -1), 1));
  }
  function zero(out) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
    return out;
  }
  function str2(a) {
    return "vec3(" + a[0] + ", " + a[1] + ", " + a[2] + ")";
  }
  function exactEquals2(a, b) {
    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];
  }
  function equals2(a, b) {
    var a0 = a[0], a1 = a[1], a2 = a[2];
    var b0 = b[0], b1 = b[1], b2 = b[2];
    return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= EPSILON * Math.max(1, Math.abs(a2), Math.abs(b2));
  }
  var sub2 = subtract2;
  var mul2 = multiply2;
  var div = divide;
  var dist = distance;
  var sqrDist = squaredDistance;
  var len = length;
  var sqrLen = squaredLength;
  var forEach = function() {
    var vec = create3();
    return function(a, stride, offset2, count, fn, arg) {
      var i, l;
      if (!stride) {
        stride = 3;
      }
      if (!offset2) {
        offset2 = 0;
      }
      if (count) {
        l = Math.min(count * stride + offset2, a.length);
      } else {
        l = a.length;
      }
      for (i = offset2; i < l; i += stride) {
        vec[0] = a[i];
        vec[1] = a[i + 1];
        vec[2] = a[i + 2];
        fn(vec, vec, arg);
        a[i] = vec[0];
        a[i + 1] = vec[1];
        a[i + 2] = vec[2];
      }
      return a;
    };
  }();

  // node_modules/gl-matrix/esm/vec4.js
  function create4() {
    var out = new ARRAY_TYPE(4);
    if (ARRAY_TYPE != Float32Array) {
      out[0] = 0;
      out[1] = 0;
      out[2] = 0;
      out[3] = 0;
    }
    return out;
  }
  function clone3(a) {
    var out = new ARRAY_TYPE(4);
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    out[3] = a[3];
    return out;
  }
  function fromValues3(x, y, z, w) {
    var out = new ARRAY_TYPE(4);
    out[0] = x;
    out[1] = y;
    out[2] = z;
    out[3] = w;
    return out;
  }
  function copy3(out, a) {
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    out[3] = a[3];
    return out;
  }
  function set3(out, x, y, z, w) {
    out[0] = x;
    out[1] = y;
    out[2] = z;
    out[3] = w;
    return out;
  }
  function add3(out, a, b) {
    out[0] = a[0] + b[0];
    out[1] = a[1] + b[1];
    out[2] = a[2] + b[2];
    out[3] = a[3] + b[3];
    return out;
  }
  function scale3(out, a, b) {
    out[0] = a[0] * b;
    out[1] = a[1] * b;
    out[2] = a[2] * b;
    out[3] = a[3] * b;
    return out;
  }
  function length2(a) {
    var x = a[0];
    var y = a[1];
    var z = a[2];
    var w = a[3];
    return Math.hypot(x, y, z, w);
  }
  function squaredLength2(a) {
    var x = a[0];
    var y = a[1];
    var z = a[2];
    var w = a[3];
    return x * x + y * y + z * z + w * w;
  }
  function normalize2(out, a) {
    var x = a[0];
    var y = a[1];
    var z = a[2];
    var w = a[3];
    var len4 = x * x + y * y + z * z + w * w;
    if (len4 > 0) {
      len4 = 1 / Math.sqrt(len4);
    }
    out[0] = x * len4;
    out[1] = y * len4;
    out[2] = z * len4;
    out[3] = w * len4;
    return out;
  }
  function dot2(a, b) {
    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];
  }
  function lerp2(out, a, b, t) {
    var ax = a[0];
    var ay = a[1];
    var az = a[2];
    var aw = a[3];
    out[0] = ax + t * (b[0] - ax);
    out[1] = ay + t * (b[1] - ay);
    out[2] = az + t * (b[2] - az);
    out[3] = aw + t * (b[3] - aw);
    return out;
  }
  function exactEquals3(a, b) {
    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];
  }
  function equals3(a, b) {
    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];
    var b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];
    return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= EPSILON * Math.max(1, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= EPSILON * Math.max(1, Math.abs(a3), Math.abs(b3));
  }
  var forEach2 = function() {
    var vec = create4();
    return function(a, stride, offset2, count, fn, arg) {
      var i, l;
      if (!stride) {
        stride = 4;
      }
      if (!offset2) {
        offset2 = 0;
      }
      if (count) {
        l = Math.min(count * stride + offset2, a.length);
      } else {
        l = a.length;
      }
      for (i = offset2; i < l; i += stride) {
        vec[0] = a[i];
        vec[1] = a[i + 1];
        vec[2] = a[i + 2];
        vec[3] = a[i + 3];
        fn(vec, vec, arg);
        a[i] = vec[0];
        a[i + 1] = vec[1];
        a[i + 2] = vec[2];
        a[i + 3] = vec[3];
      }
      return a;
    };
  }();

  // node_modules/gl-matrix/esm/quat.js
  function create5() {
    var out = new ARRAY_TYPE(4);
    if (ARRAY_TYPE != Float32Array) {
      out[0] = 0;
      out[1] = 0;
      out[2] = 0;
    }
    out[3] = 1;
    return out;
  }
  function identity2(out) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
    out[3] = 1;
    return out;
  }
  function setAxisAngle(out, axis, rad) {
    rad = rad * 0.5;
    var s = Math.sin(rad);
    out[0] = s * axis[0];
    out[1] = s * axis[1];
    out[2] = s * axis[2];
    out[3] = Math.cos(rad);
    return out;
  }
  function getAxisAngle(out_axis, q) {
    var rad = Math.acos(q[3]) * 2;
    var s = Math.sin(rad / 2);
    if (s > EPSILON) {
      out_axis[0] = q[0] / s;
      out_axis[1] = q[1] / s;
      out_axis[2] = q[2] / s;
    } else {
      out_axis[0] = 1;
      out_axis[1] = 0;
      out_axis[2] = 0;
    }
    return rad;
  }
  function getAngle(a, b) {
    var dotproduct = dot3(a, b);
    return Math.acos(2 * dotproduct * dotproduct - 1);
  }
  function multiply3(out, a, b) {
    var ax = a[0], ay = a[1], az = a[2], aw = a[3];
    var bx = b[0], by = b[1], bz = b[2], bw = b[3];
    out[0] = ax * bw + aw * bx + ay * bz - az * by;
    out[1] = ay * bw + aw * by + az * bx - ax * bz;
    out[2] = az * bw + aw * bz + ax * by - ay * bx;
    out[3] = aw * bw - ax * bx - ay * by - az * bz;
    return out;
  }
  function rotateX3(out, a, rad) {
    rad *= 0.5;
    var ax = a[0], ay = a[1], az = a[2], aw = a[3];
    var bx = Math.sin(rad), bw = Math.cos(rad);
    out[0] = ax * bw + aw * bx;
    out[1] = ay * bw + az * bx;
    out[2] = az * bw - ay * bx;
    out[3] = aw * bw - ax * bx;
    return out;
  }
  function rotateY3(out, a, rad) {
    rad *= 0.5;
    var ax = a[0], ay = a[1], az = a[2], aw = a[3];
    var by = Math.sin(rad), bw = Math.cos(rad);
    out[0] = ax * bw - az * by;
    out[1] = ay * bw + aw * by;
    out[2] = az * bw + ax * by;
    out[3] = aw * bw - ay * by;
    return out;
  }
  function rotateZ3(out, a, rad) {
    rad *= 0.5;
    var ax = a[0], ay = a[1], az = a[2], aw = a[3];
    var bz = Math.sin(rad), bw = Math.cos(rad);
    out[0] = ax * bw + ay * bz;
    out[1] = ay * bw - ax * bz;
    out[2] = az * bw + aw * bz;
    out[3] = aw * bw - az * bz;
    return out;
  }
  function calculateW(out, a) {
    var x = a[0], y = a[1], z = a[2];
    out[0] = x;
    out[1] = y;
    out[2] = z;
    out[3] = Math.sqrt(Math.abs(1 - x * x - y * y - z * z));
    return out;
  }
  function exp(out, a) {
    var x = a[0], y = a[1], z = a[2], w = a[3];
    var r = Math.sqrt(x * x + y * y + z * z);
    var et = Math.exp(w);
    var s = r > 0 ? et * Math.sin(r) / r : 0;
    out[0] = x * s;
    out[1] = y * s;
    out[2] = z * s;
    out[3] = et * Math.cos(r);
    return out;
  }
  function ln(out, a) {
    var x = a[0], y = a[1], z = a[2], w = a[3];
    var r = Math.sqrt(x * x + y * y + z * z);
    var t = r > 0 ? Math.atan2(r, w) / r : 0;
    out[0] = x * t;
    out[1] = y * t;
    out[2] = z * t;
    out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);
    return out;
  }
  function pow(out, a, b) {
    ln(out, a);
    scale4(out, out, b);
    exp(out, out);
    return out;
  }
  function slerp(out, a, b, t) {
    var ax = a[0], ay = a[1], az = a[2], aw = a[3];
    var bx = b[0], by = b[1], bz = b[2], bw = b[3];
    var omega, cosom, sinom, scale0, scale1;
    cosom = ax * bx + ay * by + az * bz + aw * bw;
    if (cosom < 0) {
      cosom = -cosom;
      bx = -bx;
      by = -by;
      bz = -bz;
      bw = -bw;
    }
    if (1 - cosom > EPSILON) {
      omega = Math.acos(cosom);
      sinom = Math.sin(omega);
      scale0 = Math.sin((1 - t) * omega) / sinom;
      scale1 = Math.sin(t * omega) / sinom;
    } else {
      scale0 = 1 - t;
      scale1 = t;
    }
    out[0] = scale0 * ax + scale1 * bx;
    out[1] = scale0 * ay + scale1 * by;
    out[2] = scale0 * az + scale1 * bz;
    out[3] = scale0 * aw + scale1 * bw;
    return out;
  }
  function random2(out) {
    var u1 = RANDOM();
    var u2 = RANDOM();
    var u3 = RANDOM();
    var sqrt1MinusU1 = Math.sqrt(1 - u1);
    var sqrtU1 = Math.sqrt(u1);
    out[0] = sqrt1MinusU1 * Math.sin(2 * Math.PI * u2);
    out[1] = sqrt1MinusU1 * Math.cos(2 * Math.PI * u2);
    out[2] = sqrtU1 * Math.sin(2 * Math.PI * u3);
    out[3] = sqrtU1 * Math.cos(2 * Math.PI * u3);
    return out;
  }
  function invert2(out, a) {
    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];
    var dot5 = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;
    var invDot = dot5 ? 1 / dot5 : 0;
    out[0] = -a0 * invDot;
    out[1] = -a1 * invDot;
    out[2] = -a2 * invDot;
    out[3] = a3 * invDot;
    return out;
  }
  function conjugate(out, a) {
    out[0] = -a[0];
    out[1] = -a[1];
    out[2] = -a[2];
    out[3] = a[3];
    return out;
  }
  function fromMat3(out, m) {
    var fTrace = m[0] + m[4] + m[8];
    var fRoot;
    if (fTrace > 0) {
      fRoot = Math.sqrt(fTrace + 1);
      out[3] = 0.5 * fRoot;
      fRoot = 0.5 / fRoot;
      out[0] = (m[5] - m[7]) * fRoot;
      out[1] = (m[6] - m[2]) * fRoot;
      out[2] = (m[1] - m[3]) * fRoot;
    } else {
      var i = 0;
      if (m[4] > m[0])
        i = 1;
      if (m[8] > m[i * 3 + i])
        i = 2;
      var j = (i + 1) % 3;
      var k = (i + 2) % 3;
      fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1);
      out[i] = 0.5 * fRoot;
      fRoot = 0.5 / fRoot;
      out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;
      out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;
      out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;
    }
    return out;
  }
  function fromEuler(out, x, y, z) {
    var halfToRad = 0.5 * Math.PI / 180;
    x *= halfToRad;
    y *= halfToRad;
    z *= halfToRad;
    var sx = Math.sin(x);
    var cx = Math.cos(x);
    var sy = Math.sin(y);
    var cy = Math.cos(y);
    var sz = Math.sin(z);
    var cz = Math.cos(z);
    out[0] = sx * cy * cz - cx * sy * sz;
    out[1] = cx * sy * cz + sx * cy * sz;
    out[2] = cx * cy * sz - sx * sy * cz;
    out[3] = cx * cy * cz + sx * sy * sz;
    return out;
  }
  function str3(a) {
    return "quat(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ")";
  }
  var clone4 = clone3;
  var fromValues4 = fromValues3;
  var copy4 = copy3;
  var set4 = set3;
  var add4 = add3;
  var mul3 = multiply3;
  var scale4 = scale3;
  var dot3 = dot2;
  var lerp3 = lerp2;
  var length3 = length2;
  var len2 = length3;
  var squaredLength3 = squaredLength2;
  var sqrLen2 = squaredLength3;
  var normalize3 = normalize2;
  var exactEquals4 = exactEquals3;
  var equals4 = equals3;
  var rotationTo = function() {
    var tmpvec3 = create3();
    var xUnitVec3 = fromValues2(1, 0, 0);
    var yUnitVec3 = fromValues2(0, 1, 0);
    return function(out, a, b) {
      var dot5 = dot(a, b);
      if (dot5 < -0.999999) {
        cross(tmpvec3, xUnitVec3, a);
        if (len(tmpvec3) < 1e-6)
          cross(tmpvec3, yUnitVec3, a);
        normalize(tmpvec3, tmpvec3);
        setAxisAngle(out, tmpvec3, Math.PI);
        return out;
      } else if (dot5 > 0.999999) {
        out[0] = 0;
        out[1] = 0;
        out[2] = 0;
        out[3] = 1;
        return out;
      } else {
        cross(tmpvec3, a, b);
        out[0] = tmpvec3[0];
        out[1] = tmpvec3[1];
        out[2] = tmpvec3[2];
        out[3] = 1 + dot5;
        return normalize3(out, out);
      }
    };
  }();
  var sqlerp = function() {
    var temp1 = create5();
    var temp2 = create5();
    return function(out, a, b, c, d, t) {
      slerp(temp1, a, d, t);
      slerp(temp2, b, c, t);
      slerp(out, temp1, temp2, 2 * t * (1 - t));
      return out;
    };
  }();
  var setAxes = function() {
    var matr = create();
    return function(out, view, right, up) {
      matr[0] = right[0];
      matr[3] = right[1];
      matr[6] = right[2];
      matr[1] = up[0];
      matr[4] = up[1];
      matr[7] = up[2];
      matr[2] = -view[0];
      matr[5] = -view[1];
      matr[8] = -view[2];
      return normalize3(out, fromMat3(out, matr));
    };
  }();

  // node_modules/gl-matrix/esm/quat2.js
  var quat2_exports = {};
  __export(quat2_exports, {
    add: () => add5,
    clone: () => clone5,
    conjugate: () => conjugate2,
    copy: () => copy5,
    create: () => create6,
    dot: () => dot4,
    equals: () => equals5,
    exactEquals: () => exactEquals5,
    fromMat4: () => fromMat4,
    fromRotation: () => fromRotation2,
    fromRotationTranslation: () => fromRotationTranslation2,
    fromRotationTranslationValues: () => fromRotationTranslationValues,
    fromTranslation: () => fromTranslation2,
    fromValues: () => fromValues5,
    getDual: () => getDual,
    getReal: () => getReal,
    getTranslation: () => getTranslation2,
    identity: () => identity3,
    invert: () => invert3,
    len: () => len3,
    length: () => length4,
    lerp: () => lerp4,
    mul: () => mul4,
    multiply: () => multiply4,
    normalize: () => normalize4,
    rotateAroundAxis: () => rotateAroundAxis,
    rotateByQuatAppend: () => rotateByQuatAppend,
    rotateByQuatPrepend: () => rotateByQuatPrepend,
    rotateX: () => rotateX4,
    rotateY: () => rotateY4,
    rotateZ: () => rotateZ4,
    scale: () => scale5,
    set: () => set5,
    setDual: () => setDual,
    setReal: () => setReal,
    sqrLen: () => sqrLen3,
    squaredLength: () => squaredLength4,
    str: () => str4,
    translate: () => translate2
  });
  function create6() {
    var dq = new ARRAY_TYPE(8);
    if (ARRAY_TYPE != Float32Array) {
      dq[0] = 0;
      dq[1] = 0;
      dq[2] = 0;
      dq[4] = 0;
      dq[5] = 0;
      dq[6] = 0;
      dq[7] = 0;
    }
    dq[3] = 1;
    return dq;
  }
  function clone5(a) {
    var dq = new ARRAY_TYPE(8);
    dq[0] = a[0];
    dq[1] = a[1];
    dq[2] = a[2];
    dq[3] = a[3];
    dq[4] = a[4];
    dq[5] = a[5];
    dq[6] = a[6];
    dq[7] = a[7];
    return dq;
  }
  function fromValues5(x1, y1, z1, w1, x2, y2, z2, w2) {
    var dq = new ARRAY_TYPE(8);
    dq[0] = x1;
    dq[1] = y1;
    dq[2] = z1;
    dq[3] = w1;
    dq[4] = x2;
    dq[5] = y2;
    dq[6] = z2;
    dq[7] = w2;
    return dq;
  }
  function fromRotationTranslationValues(x1, y1, z1, w1, x2, y2, z2) {
    var dq = new ARRAY_TYPE(8);
    dq[0] = x1;
    dq[1] = y1;
    dq[2] = z1;
    dq[3] = w1;
    var ax = x2 * 0.5, ay = y2 * 0.5, az = z2 * 0.5;
    dq[4] = ax * w1 + ay * z1 - az * y1;
    dq[5] = ay * w1 + az * x1 - ax * z1;
    dq[6] = az * w1 + ax * y1 - ay * x1;
    dq[7] = -ax * x1 - ay * y1 - az * z1;
    return dq;
  }
  function fromRotationTranslation2(out, q, t) {
    var ax = t[0] * 0.5, ay = t[1] * 0.5, az = t[2] * 0.5, bx = q[0], by = q[1], bz = q[2], bw = q[3];
    out[0] = bx;
    out[1] = by;
    out[2] = bz;
    out[3] = bw;
    out[4] = ax * bw + ay * bz - az * by;
    out[5] = ay * bw + az * bx - ax * bz;
    out[6] = az * bw + ax * by - ay * bx;
    out[7] = -ax * bx - ay * by - az * bz;
    return out;
  }
  function fromTranslation2(out, t) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
    out[3] = 1;
    out[4] = t[0] * 0.5;
    out[5] = t[1] * 0.5;
    out[6] = t[2] * 0.5;
    out[7] = 0;
    return out;
  }
  function fromRotation2(out, q) {
    out[0] = q[0];
    out[1] = q[1];
    out[2] = q[2];
    out[3] = q[3];
    out[4] = 0;
    out[5] = 0;
    out[6] = 0;
    out[7] = 0;
    return out;
  }
  function fromMat4(out, a) {
    var outer = create5();
    getRotation(outer, a);
    var t = new ARRAY_TYPE(3);
    getTranslation(t, a);
    fromRotationTranslation2(out, outer, t);
    return out;
  }
  function copy5(out, a) {
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    out[3] = a[3];
    out[4] = a[4];
    out[5] = a[5];
    out[6] = a[6];
    out[7] = a[7];
    return out;
  }
  function identity3(out) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
    out[3] = 1;
    out[4] = 0;
    out[5] = 0;
    out[6] = 0;
    out[7] = 0;
    return out;
  }
  function set5(out, x1, y1, z1, w1, x2, y2, z2, w2) {
    out[0] = x1;
    out[1] = y1;
    out[2] = z1;
    out[3] = w1;
    out[4] = x2;
    out[5] = y2;
    out[6] = z2;
    out[7] = w2;
    return out;
  }
  var getReal = copy4;
  function getDual(out, a) {
    out[0] = a[4];
    out[1] = a[5];
    out[2] = a[6];
    out[3] = a[7];
    return out;
  }
  var setReal = copy4;
  function setDual(out, q) {
    out[4] = q[0];
    out[5] = q[1];
    out[6] = q[2];
    out[7] = q[3];
    return out;
  }
  function getTranslation2(out, a) {
    var ax = a[4], ay = a[5], az = a[6], aw = a[7], bx = -a[0], by = -a[1], bz = -a[2], bw = a[3];
    out[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;
    out[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;
    out[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;
    return out;
  }
  function translate2(out, a, v) {
    var ax1 = a[0], ay1 = a[1], az1 = a[2], aw1 = a[3], bx1 = v[0] * 0.5, by1 = v[1] * 0.5, bz1 = v[2] * 0.5, ax2 = a[4], ay2 = a[5], az2 = a[6], aw2 = a[7];
    out[0] = ax1;
    out[1] = ay1;
    out[2] = az1;
    out[3] = aw1;
    out[4] = aw1 * bx1 + ay1 * bz1 - az1 * by1 + ax2;
    out[5] = aw1 * by1 + az1 * bx1 - ax1 * bz1 + ay2;
    out[6] = aw1 * bz1 + ax1 * by1 - ay1 * bx1 + az2;
    out[7] = -ax1 * bx1 - ay1 * by1 - az1 * bz1 + aw2;
    return out;
  }
  function rotateX4(out, a, rad) {
    var bx = -a[0], by = -a[1], bz = -a[2], bw = a[3], ax = a[4], ay = a[5], az = a[6], aw = a[7], ax1 = ax * bw + aw * bx + ay * bz - az * by, ay1 = ay * bw + aw * by + az * bx - ax * bz, az1 = az * bw + aw * bz + ax * by - ay * bx, aw1 = aw * bw - ax * bx - ay * by - az * bz;
    rotateX3(out, a, rad);
    bx = out[0];
    by = out[1];
    bz = out[2];
    bw = out[3];
    out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;
    out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;
    out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;
    out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;
    return out;
  }
  function rotateY4(out, a, rad) {
    var bx = -a[0], by = -a[1], bz = -a[2], bw = a[3], ax = a[4], ay = a[5], az = a[6], aw = a[7], ax1 = ax * bw + aw * bx + ay * bz - az * by, ay1 = ay * bw + aw * by + az * bx - ax * bz, az1 = az * bw + aw * bz + ax * by - ay * bx, aw1 = aw * bw - ax * bx - ay * by - az * bz;
    rotateY3(out, a, rad);
    bx = out[0];
    by = out[1];
    bz = out[2];
    bw = out[3];
    out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;
    out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;
    out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;
    out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;
    return out;
  }
  function rotateZ4(out, a, rad) {
    var bx = -a[0], by = -a[1], bz = -a[2], bw = a[3], ax = a[4], ay = a[5], az = a[6], aw = a[7], ax1 = ax * bw + aw * bx + ay * bz - az * by, ay1 = ay * bw + aw * by + az * bx - ax * bz, az1 = az * bw + aw * bz + ax * by - ay * bx, aw1 = aw * bw - ax * bx - ay * by - az * bz;
    rotateZ3(out, a, rad);
    bx = out[0];
    by = out[1];
    bz = out[2];
    bw = out[3];
    out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;
    out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;
    out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;
    out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;
    return out;
  }
  function rotateByQuatAppend(out, a, q) {
    var qx = q[0], qy = q[1], qz = q[2], qw = q[3], ax = a[0], ay = a[1], az = a[2], aw = a[3];
    out[0] = ax * qw + aw * qx + ay * qz - az * qy;
    out[1] = ay * qw + aw * qy + az * qx - ax * qz;
    out[2] = az * qw + aw * qz + ax * qy - ay * qx;
    out[3] = aw * qw - ax * qx - ay * qy - az * qz;
    ax = a[4];
    ay = a[5];
    az = a[6];
    aw = a[7];
    out[4] = ax * qw + aw * qx + ay * qz - az * qy;
    out[5] = ay * qw + aw * qy + az * qx - ax * qz;
    out[6] = az * qw + aw * qz + ax * qy - ay * qx;
    out[7] = aw * qw - ax * qx - ay * qy - az * qz;
    return out;
  }
  function rotateByQuatPrepend(out, q, a) {
    var qx = q[0], qy = q[1], qz = q[2], qw = q[3], bx = a[0], by = a[1], bz = a[2], bw = a[3];
    out[0] = qx * bw + qw * bx + qy * bz - qz * by;
    out[1] = qy * bw + qw * by + qz * bx - qx * bz;
    out[2] = qz * bw + qw * bz + qx * by - qy * bx;
    out[3] = qw * bw - qx * bx - qy * by - qz * bz;
    bx = a[4];
    by = a[5];
    bz = a[6];
    bw = a[7];
    out[4] = qx * bw + qw * bx + qy * bz - qz * by;
    out[5] = qy * bw + qw * by + qz * bx - qx * bz;
    out[6] = qz * bw + qw * bz + qx * by - qy * bx;
    out[7] = qw * bw - qx * bx - qy * by - qz * bz;
    return out;
  }
  function rotateAroundAxis(out, a, axis, rad) {
    if (Math.abs(rad) < EPSILON) {
      return copy5(out, a);
    }
    var axisLength = Math.hypot(axis[0], axis[1], axis[2]);
    rad = rad * 0.5;
    var s = Math.sin(rad);
    var bx = s * axis[0] / axisLength;
    var by = s * axis[1] / axisLength;
    var bz = s * axis[2] / axisLength;
    var bw = Math.cos(rad);
    var ax1 = a[0], ay1 = a[1], az1 = a[2], aw1 = a[3];
    out[0] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;
    out[1] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;
    out[2] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;
    out[3] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;
    var ax = a[4], ay = a[5], az = a[6], aw = a[7];
    out[4] = ax * bw + aw * bx + ay * bz - az * by;
    out[5] = ay * bw + aw * by + az * bx - ax * bz;
    out[6] = az * bw + aw * bz + ax * by - ay * bx;
    out[7] = aw * bw - ax * bx - ay * by - az * bz;
    return out;
  }
  function add5(out, a, b) {
    out[0] = a[0] + b[0];
    out[1] = a[1] + b[1];
    out[2] = a[2] + b[2];
    out[3] = a[3] + b[3];
    out[4] = a[4] + b[4];
    out[5] = a[5] + b[5];
    out[6] = a[6] + b[6];
    out[7] = a[7] + b[7];
    return out;
  }
  function multiply4(out, a, b) {
    var ax0 = a[0], ay0 = a[1], az0 = a[2], aw0 = a[3], bx1 = b[4], by1 = b[5], bz1 = b[6], bw1 = b[7], ax1 = a[4], ay1 = a[5], az1 = a[6], aw1 = a[7], bx0 = b[0], by0 = b[1], bz0 = b[2], bw0 = b[3];
    out[0] = ax0 * bw0 + aw0 * bx0 + ay0 * bz0 - az0 * by0;
    out[1] = ay0 * bw0 + aw0 * by0 + az0 * bx0 - ax0 * bz0;
    out[2] = az0 * bw0 + aw0 * bz0 + ax0 * by0 - ay0 * bx0;
    out[3] = aw0 * bw0 - ax0 * bx0 - ay0 * by0 - az0 * bz0;
    out[4] = ax0 * bw1 + aw0 * bx1 + ay0 * bz1 - az0 * by1 + ax1 * bw0 + aw1 * bx0 + ay1 * bz0 - az1 * by0;
    out[5] = ay0 * bw1 + aw0 * by1 + az0 * bx1 - ax0 * bz1 + ay1 * bw0 + aw1 * by0 + az1 * bx0 - ax1 * bz0;
    out[6] = az0 * bw1 + aw0 * bz1 + ax0 * by1 - ay0 * bx1 + az1 * bw0 + aw1 * bz0 + ax1 * by0 - ay1 * bx0;
    out[7] = aw0 * bw1 - ax0 * bx1 - ay0 * by1 - az0 * bz1 + aw1 * bw0 - ax1 * bx0 - ay1 * by0 - az1 * bz0;
    return out;
  }
  var mul4 = multiply4;
  function scale5(out, a, b) {
    out[0] = a[0] * b;
    out[1] = a[1] * b;
    out[2] = a[2] * b;
    out[3] = a[3] * b;
    out[4] = a[4] * b;
    out[5] = a[5] * b;
    out[6] = a[6] * b;
    out[7] = a[7] * b;
    return out;
  }
  var dot4 = dot3;
  function lerp4(out, a, b, t) {
    var mt = 1 - t;
    if (dot4(a, b) < 0)
      t = -t;
    out[0] = a[0] * mt + b[0] * t;
    out[1] = a[1] * mt + b[1] * t;
    out[2] = a[2] * mt + b[2] * t;
    out[3] = a[3] * mt + b[3] * t;
    out[4] = a[4] * mt + b[4] * t;
    out[5] = a[5] * mt + b[5] * t;
    out[6] = a[6] * mt + b[6] * t;
    out[7] = a[7] * mt + b[7] * t;
    return out;
  }
  function invert3(out, a) {
    var sqlen = squaredLength4(a);
    out[0] = -a[0] / sqlen;
    out[1] = -a[1] / sqlen;
    out[2] = -a[2] / sqlen;
    out[3] = a[3] / sqlen;
    out[4] = -a[4] / sqlen;
    out[5] = -a[5] / sqlen;
    out[6] = -a[6] / sqlen;
    out[7] = a[7] / sqlen;
    return out;
  }
  function conjugate2(out, a) {
    out[0] = -a[0];
    out[1] = -a[1];
    out[2] = -a[2];
    out[3] = a[3];
    out[4] = -a[4];
    out[5] = -a[5];
    out[6] = -a[6];
    out[7] = a[7];
    return out;
  }
  var length4 = length3;
  var len3 = length4;
  var squaredLength4 = squaredLength3;
  var sqrLen3 = squaredLength4;
  function normalize4(out, a) {
    var magnitude = squaredLength4(a);
    if (magnitude > 0) {
      magnitude = Math.sqrt(magnitude);
      var a0 = a[0] / magnitude;
      var a1 = a[1] / magnitude;
      var a2 = a[2] / magnitude;
      var a3 = a[3] / magnitude;
      var b0 = a[4];
      var b1 = a[5];
      var b2 = a[6];
      var b3 = a[7];
      var a_dot_b = a0 * b0 + a1 * b1 + a2 * b2 + a3 * b3;
      out[0] = a0;
      out[1] = a1;
      out[2] = a2;
      out[3] = a3;
      out[4] = (b0 - a0 * a_dot_b) / magnitude;
      out[5] = (b1 - a1 * a_dot_b) / magnitude;
      out[6] = (b2 - a2 * a_dot_b) / magnitude;
      out[7] = (b3 - a3 * a_dot_b) / magnitude;
    }
    return out;
  }
  function str4(a) {
    return "quat2(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ", " + a[4] + ", " + a[5] + ", " + a[6] + ", " + a[7] + ")";
  }
  function exactEquals5(a, b) {
    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7];
  }
  function equals5(a, b) {
    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3], a4 = a[4], a5 = a[5], a6 = a[6], a7 = a[7];
    var b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3], b4 = b[4], b5 = b[5], b6 = b[6], b7 = b[7];
    return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= EPSILON * Math.max(1, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= EPSILON * Math.max(1, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= EPSILON * Math.max(1, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= EPSILON * Math.max(1, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= EPSILON * Math.max(1, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= EPSILON * Math.max(1, Math.abs(a7), Math.abs(b7));
  }

  // node_modules/@wonderlandengine/components/dist/hit-test-location.js
  var __decorate2 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var HitTestLocation = class extends Component3 {
    tempScaling = new Float32Array(3);
    visible = false;
    xrHitTestSource = null;
    /** Reference space for creating the hit test when the session starts */
    xrReferenceSpace = null;
    /**
     * For maintaining backwards compatibility: Whether to scale the object to 0 and back.
     * @deprecated Use onHitLost and onHitFound instead.
     */
    scaleObject = true;
    /** Emits an event when the hit test switches from visible to invisible */
    onHitLost = new Emitter();
    /** Emits an event when the hit test switches from invisible to visible */
    onHitFound = new Emitter();
    onSessionStartCallback = null;
    onSessionEndCallback = null;
    start() {
      this.onSessionStartCallback = this.onXRSessionStart.bind(this);
      this.onSessionEndCallback = this.onXRSessionEnd.bind(this);
      if (this.scaleObject) {
        this.tempScaling.set(this.object.scalingLocal);
        this.object.scale([0, 0, 0]);
        this.onHitLost.add(() => {
          this.tempScaling.set(this.object.scalingLocal);
          this.object.scale([0, 0, 0]);
        });
        this.onHitFound.add(() => {
          this.object.scalingLocal.set(this.tempScaling);
          this.object.setDirty();
        });
      }
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this.onSessionStartCallback);
      this.engine.onXRSessionEnd.add(this.onSessionEndCallback);
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this.onSessionStartCallback);
      this.engine.onXRSessionEnd.remove(this.onSessionEndCallback);
    }
    update() {
      const wasVisible = this.visible;
      if (this.xrHitTestSource) {
        const frame = this.engine.xrFrame;
        if (!frame)
          return;
        let hitTestResults = frame.getHitTestResults(this.xrHitTestSource);
        if (hitTestResults.length > 0) {
          let pose = hitTestResults[0].getPose(this.engine.xr.currentReferenceSpace);
          this.visible = !!pose;
          if (pose) {
            setXRRigidTransformLocal(this.object, pose.transform);
          }
        } else {
          this.visible = false;
        }
      }
      if (this.visible != wasVisible) {
        (this.visible ? this.onHitFound : this.onHitLost).notify(this);
      }
    }
    getHitTestResults(frame = this.engine.xr?.frame ?? null) {
      if (!frame)
        return [];
      if (!this.xrHitTestSource)
        return [];
      return frame.getHitTestResults(this.xrHitTestSource);
    }
    onXRSessionStart(session) {
      if (session.requestHitTestSource === void 0) {
        console.error("hit-test-location: hit test feature not available. Deactivating component.");
        this.active = false;
        return;
      }
      session.requestHitTestSource({
        space: this.xrReferenceSpace ?? this.engine.xr.referenceSpaceForType("viewer")
      }).then((hitTestSource) => {
        this.xrHitTestSource = hitTestSource;
      }).catch(console.error);
    }
    onXRSessionEnd() {
      if (!this.xrHitTestSource)
        return;
      this.xrHitTestSource.cancel();
      this.xrHitTestSource = null;
    }
  };
  __publicField(HitTestLocation, "TypeName", "hit-test-location");
  __decorate2([
    property.bool(true)
  ], HitTestLocation.prototype, "scaleObject", void 0);

  // node_modules/@wonderlandengine/components/dist/cursor.js
  var __decorate3 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var tempVec2 = new Float32Array(3);
  var ZERO = [0, 0, 0];
  var CursorTargetEmitters = class {
    /** Emitter for events when the target is hovered */
    onHover = new Emitter();
    /** Emitter for events when the target is unhovered */
    onUnhover = new Emitter();
    /** Emitter for events when the target is clicked */
    onClick = new Emitter();
    /** Emitter for events when the cursor moves on the target */
    onMove = new Emitter();
    /** Emitter for events when the user pressed the select button on the target */
    onDown = new Emitter();
    /** Emitter for events when the user unpressed the select button on the target */
    onUp = new Emitter();
  };
  var Cursor = class extends Component3 {
    static onRegister(engine) {
      engine.registerComponent(HitTestLocation);
    }
    _collisionMask = 0;
    _onDeactivateCallbacks = [];
    _input = null;
    _origin = new Float32Array(3);
    _cursorObjScale = new Float32Array(3);
    _direction = new Float32Array(3);
    _projectionMatrix = new Float32Array(16);
    _viewComponent = null;
    _isDown = false;
    _lastIsDown = false;
    _arTouchDown = false;
    _lastPointerPos = new Float32Array(2);
    _lastCursorPosOnTarget = new Float32Array(3);
    _hitTestLocation = null;
    _hitTestObject = null;
    _onSessionStartCallback = null;
    /**
     * Whether the cursor (and cursorObject) is visible, i.e. pointing at an object
     * that matches the collision group
     */
    visible = true;
    /** Currently hovered object */
    hoveringObject = null;
    /** CursorTarget component of the currently hovered object */
    hoveringObjectTarget = null;
    /** Whether the cursor is hovering reality via hit-test */
    hoveringReality = false;
    /**
     * Global target lets you receive global cursor events on any object.
     */
    globalTarget = new CursorTargetEmitters();
    /**
     * Hit test target lets you receive cursor events for "reality", if
     * `useWebXRHitTest` is set to `true`.
     *
     * @example
     * ```js
     * cursor.hitTestTarget.onClick.add((hit, cursor) => {
     *     // User clicked on reality
     * });
     * ```
     */
    hitTestTarget = new CursorTargetEmitters();
    /** World position of the cursor */
    cursorPos = new Float32Array(3);
    /** Collision group for the ray cast. Only objects in this group will be affected by this cursor. */
    collisionGroup = 1;
    /** (optional) Object that visualizes the cursor's ray. */
    cursorRayObject = null;
    /** Axis along which to scale the `cursorRayObject`. */
    cursorRayScalingAxis = 2;
    /** (optional) Object that visualizes the cursor's hit location. */
    cursorObject = null;
    /** Handedness for VR cursors to accept trigger events only from respective controller. */
    handedness = 0;
    /** Mode for raycasting, whether to use PhysX or simple collision components */
    rayCastMode = 0;
    /** Maximum distance for the cursor's ray cast. */
    maxDistance = 100;
    /** Whether to set the CSS style of the mouse cursor on desktop */
    styleCursor = true;
    /**
     * Use WebXR hit-test if available.
     *
     * Attaches a hit-test-location component to the cursorObject, which will be used
     * by the cursor to send events to the hitTestTarget with HitTestResult.
     */
    useWebXRHitTest = false;
    _onViewportResize = () => {
      if (!this._viewComponent)
        return;
      mat4_exports.invert(this._projectionMatrix, this._viewComponent.projectionMatrix);
    };
    start() {
      this._collisionMask = 1 << this.collisionGroup;
      if (this.handedness == 0) {
        const inputComp = this.object.getComponent("input");
        if (!inputComp) {
          console.warn("cursor component on object", this.object.name, 'was configured with handedness "input component", but object has no input component.');
        } else {
          this.handedness = inputComp.handedness || "none";
          this._input = inputComp;
        }
      } else {
        this.handedness = ["left", "right", "none"][this.handedness - 1];
      }
      this._viewComponent = this.object.getComponent(ViewComponent);
      if (this.useWebXRHitTest) {
        this._hitTestObject = this.engine.scene.addObject(this.object);
        this._hitTestLocation = this._hitTestObject.addComponent(HitTestLocation, {
          scaleObject: false
        }) ?? null;
      }
      this._onSessionStartCallback = this.setupVREvents.bind(this);
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this._onSessionStartCallback);
      this.engine.onResize.add(this._onViewportResize);
      this._setCursorVisibility(true);
      if (this._viewComponent != null) {
        const canvas2 = this.engine.canvas;
        const onClick = this.onClick.bind(this);
        const onPointerMove = this.onPointerMove.bind(this);
        const onPointerDown = this.onPointerDown.bind(this);
        const onPointerUp = this.onPointerUp.bind(this);
        canvas2.addEventListener("click", onClick);
        canvas2.addEventListener("pointermove", onPointerMove);
        canvas2.addEventListener("pointerdown", onPointerDown);
        canvas2.addEventListener("pointerup", onPointerUp);
        this._onDeactivateCallbacks.push(() => {
          canvas2.removeEventListener("click", onClick);
          canvas2.removeEventListener("pointermove", onPointerMove);
          canvas2.removeEventListener("pointerdown", onPointerDown);
          canvas2.removeEventListener("pointerup", onPointerUp);
        });
      }
      this._onViewportResize();
    }
    _setCursorRayTransform(hitPosition) {
      if (!this.cursorRayObject)
        return;
      const dist2 = vec3_exports.dist(this._origin, hitPosition);
      this.cursorRayObject.setPositionLocal([0, 0, -dist2 / 2]);
      if (this.cursorRayScalingAxis != 4) {
        tempVec2.fill(1);
        tempVec2[this.cursorRayScalingAxis] = dist2 / 2;
        this.cursorRayObject.setScalingLocal(tempVec2);
      }
    }
    _setCursorVisibility(visible) {
      if (this.visible == visible)
        return;
      this.visible = visible;
      if (!this.cursorObject)
        return;
      if (visible) {
        this.cursorObject.setScalingWorld(this._cursorObjScale);
      } else {
        this.cursorObject.getScalingWorld(this._cursorObjScale);
        this.cursorObject.scaleLocal([0, 0, 0]);
      }
    }
    update() {
      if (this.engine.xr && this._arTouchDown && this._input && this.engine.xr.session.inputSources[0].handedness === "none" && this.engine.xr.session.inputSources[0].gamepad) {
        const p = this.engine.xr.session.inputSources[0].gamepad.axes;
        this._direction[0] = p[0];
        this._direction[1] = -p[1];
        this._direction[2] = -1;
        this.applyTransformAndProjectDirection();
      } else if (this.engine.xr && this._input && this._input.xrInputSource) {
        this._direction[0] = 0;
        this._direction[1] = 0;
        this._direction[2] = -1;
        this.applyTransformToDirection();
      } else if (this._viewComponent) {
        this.updateDirection();
      }
      this.rayCast(null, this.engine.xr?.frame);
      if (this.cursorObject) {
        if (this.hoveringObject && (this.cursorPos[0] != 0 || this.cursorPos[1] != 0 || this.cursorPos[2] != 0)) {
          this._setCursorVisibility(true);
          this.cursorObject.setPositionWorld(this.cursorPos);
          this._setCursorRayTransform(this.cursorPos);
        } else {
          this._setCursorVisibility(false);
        }
      }
    }
    /* Returns the hovered cursor target, if available */
    notify(event, originalEvent) {
      const target = this.hoveringObject;
      if (target) {
        const cursorTarget = this.hoveringObjectTarget;
        if (cursorTarget)
          cursorTarget[event].notify(target, this, originalEvent ?? void 0);
        this.globalTarget[event].notify(target, this, originalEvent ?? void 0);
      }
    }
    hoverBehaviour(rayHit, hitTestResult, doClick, originalEvent) {
      const hit = !this.hoveringReality && rayHit.hitCount > 0 ? rayHit.objects[0] : null;
      if (hit) {
        if (!this.hoveringObject || !this.hoveringObject.equals(hit)) {
          if (this.hoveringObject) {
            this.notify("onUnhover", originalEvent);
          }
          this.hoveringObject = hit;
          this.hoveringObjectTarget = this.hoveringObject.getComponent(CursorTarget);
          if (this.styleCursor)
            this.engine.canvas.style.cursor = "pointer";
          this.notify("onHover", originalEvent);
        }
      } else if (this.hoveringObject) {
        this.notify("onUnhover", originalEvent);
        this.hoveringObject = null;
        this.hoveringObjectTarget = null;
        if (this.styleCursor)
          this.engine.canvas.style.cursor = "default";
      }
      if (this.hoveringObject) {
        if (this._isDown !== this._lastIsDown) {
          this.notify(this._isDown ? "onDown" : "onUp", originalEvent);
        }
        if (doClick)
          this.notify("onClick", originalEvent);
      } else if (this.hoveringReality) {
        if (this._isDown !== this._lastIsDown) {
          (this._isDown ? this.hitTestTarget.onDown : this.hitTestTarget.onUp).notify(hitTestResult, this, originalEvent ?? void 0);
        }
        if (doClick)
          this.hitTestTarget.onClick.notify(hitTestResult, this, originalEvent ?? void 0);
      }
      if (hit) {
        if (this.hoveringObject) {
          this.hoveringObject.transformPointInverseWorld(tempVec2, this.cursorPos);
        } else {
          tempVec2.set(this.cursorPos);
        }
        if (!vec3_exports.equals(this._lastCursorPosOnTarget, tempVec2)) {
          this.notify("onMove", originalEvent);
          this._lastCursorPosOnTarget.set(tempVec2);
        }
      } else if (this.hoveringReality) {
        if (!vec3_exports.equals(this._lastCursorPosOnTarget, this.cursorPos)) {
          this.hitTestTarget.onMove.notify(hitTestResult, this, originalEvent ?? void 0);
          this._lastCursorPosOnTarget.set(this.cursorPos);
        }
      } else {
        this._lastCursorPosOnTarget.set(this.cursorPos);
      }
      this._lastIsDown = this._isDown;
    }
    /**
     * Setup event listeners on session object
     * @param s WebXR session
     *
     * Sets up 'select' and 'end' events.
     */
    setupVREvents(s) {
      if (!s)
        console.error("setupVREvents called without a valid session");
      if (!this.active)
        return;
      const onSelect = this.onSelect.bind(this);
      s.addEventListener("select", onSelect);
      const onSelectStart = this.onSelectStart.bind(this);
      s.addEventListener("selectstart", onSelectStart);
      const onSelectEnd = this.onSelectEnd.bind(this);
      s.addEventListener("selectend", onSelectEnd);
      this._onDeactivateCallbacks.push(() => {
        if (!this.engine.xr)
          return;
        s.removeEventListener("select", onSelect);
        s.removeEventListener("selectstart", onSelectStart);
        s.removeEventListener("selectend", onSelectEnd);
      });
      this._onViewportResize();
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this._onSessionStartCallback);
      this.engine.onResize.remove(this._onViewportResize);
      this._setCursorVisibility(false);
      if (this.hoveringObject)
        this.notify("onUnhover", null);
      if (this.cursorRayObject)
        this.cursorRayObject.setScalingLocal(ZERO);
      for (const f of this._onDeactivateCallbacks)
        f();
      this._onDeactivateCallbacks.length = 0;
    }
    onDestroy() {
      this._hitTestObject?.destroy();
    }
    /** 'select' event listener */
    onSelect(e) {
      if (e.inputSource.handedness != this.handedness)
        return;
      this.rayCast(e, e.frame, true);
    }
    /** 'selectstart' event listener */
    onSelectStart(e) {
      this._arTouchDown = true;
      if (e.inputSource.handedness == this.handedness) {
        this._isDown = true;
        this.rayCast(e, e.frame);
      }
    }
    /** 'selectend' event listener */
    onSelectEnd(e) {
      this._arTouchDown = false;
      if (e.inputSource.handedness == this.handedness) {
        this._isDown = false;
        this.rayCast(e, e.frame);
      }
    }
    /** 'pointermove' event listener */
    onPointerMove(e) {
      if (!e.isPrimary)
        return;
      this.updateMousePos(e);
      this.rayCast(e, null);
    }
    /** 'click' event listener */
    onClick(e) {
      this.updateMousePos(e);
      this.rayCast(e, null, true);
    }
    /** 'pointerdown' event listener */
    onPointerDown(e) {
      if (!e.isPrimary || e.button !== 0)
        return;
      this.updateMousePos(e);
      this._isDown = true;
      this.rayCast(e);
    }
    /** 'pointerup' event listener */
    onPointerUp(e) {
      if (!e.isPrimary || e.button !== 0)
        return;
      this.updateMousePos(e);
      this._isDown = false;
      this.rayCast(e);
    }
    /**
     * Update mouse position in non-VR mode and raycast for new position
     * @returns @ref RayHit for new position.
     */
    updateMousePos(e) {
      this._lastPointerPos[0] = e.clientX;
      this._lastPointerPos[1] = e.clientY;
      this.updateDirection();
    }
    updateDirection() {
      const bounds = this.engine.canvas.getBoundingClientRect();
      const left = this._lastPointerPos[0] / bounds.width;
      const top = this._lastPointerPos[1] / bounds.height;
      this._direction[0] = left * 2 - 1;
      this._direction[1] = -top * 2 + 1;
      this._direction[2] = -1;
      this.applyTransformAndProjectDirection();
    }
    applyTransformAndProjectDirection() {
      vec3_exports.transformMat4(this._direction, this._direction, this._projectionMatrix);
      vec3_exports.normalize(this._direction, this._direction);
      this.applyTransformToDirection();
    }
    applyTransformToDirection() {
      this.object.transformVectorWorld(this._direction, this._direction);
      this.object.getPositionWorld(this._origin);
    }
    rayCast(originalEvent, frame = null, doClick = false) {
      const rayHit = this.rayCastMode == 0 ? this.engine.scene.rayCast(this._origin, this._direction, this._collisionMask) : this.engine.physics.rayCast(this._origin, this._direction, this._collisionMask, this.maxDistance);
      let hitResultDistance = Infinity;
      let hitTestResult = null;
      if (this._hitTestLocation?.visible) {
        this._hitTestObject.getPositionWorld(this.cursorPos);
        hitResultDistance = vec3_exports.distance(this.object.getPositionWorld(tempVec2), this.cursorPos);
        hitTestResult = this._hitTestLocation?.getHitTestResults(frame)[0];
      }
      let hoveringReality = false;
      if (rayHit.hitCount > 0) {
        const d = rayHit.distances[0];
        if (hitResultDistance >= d) {
          this.cursorPos.set(rayHit.locations[0]);
        } else {
          hoveringReality = true;
        }
      } else if (hitResultDistance < Infinity) {
      } else {
        this.cursorPos.fill(0);
      }
      if (hoveringReality && !this.hoveringReality) {
        this.hitTestTarget.onHover.notify(hitTestResult, this);
      } else if (!hoveringReality && this.hoveringReality) {
        this.hitTestTarget.onUnhover.notify(hitTestResult, this);
      }
      this.hoveringReality = hoveringReality;
      this.hoverBehaviour(rayHit, hitTestResult, doClick, originalEvent);
      return rayHit;
    }
  };
  __publicField(Cursor, "TypeName", "cursor");
  /* Dependencies is deprecated, but we keep it here for compatibility
   * with 1.0.0-rc2 until 1.0.0 is released */
  __publicField(Cursor, "Dependencies", [HitTestLocation]);
  __decorate3([
    property.int(1)
  ], Cursor.prototype, "collisionGroup", void 0);
  __decorate3([
    property.object()
  ], Cursor.prototype, "cursorRayObject", void 0);
  __decorate3([
    property.enum(["x", "y", "z", "none"], "z")
  ], Cursor.prototype, "cursorRayScalingAxis", void 0);
  __decorate3([
    property.object()
  ], Cursor.prototype, "cursorObject", void 0);
  __decorate3([
    property.enum(["input component", "left", "right", "none"], "input component")
  ], Cursor.prototype, "handedness", void 0);
  __decorate3([
    property.enum(["collision", "physx"], "collision")
  ], Cursor.prototype, "rayCastMode", void 0);
  __decorate3([
    property.float(100)
  ], Cursor.prototype, "maxDistance", void 0);
  __decorate3([
    property.bool(true)
  ], Cursor.prototype, "styleCursor", void 0);
  __decorate3([
    property.bool(false)
  ], Cursor.prototype, "useWebXRHitTest", void 0);

  // node_modules/@wonderlandengine/components/dist/debug-object.js
  var __decorate4 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var DebugObject = class extends Component3 {
    /** A second object to print the name of */
    obj = null;
    start() {
      let origin = new Float32Array(3);
      quat2_exports.getTranslation(origin, this.object.transformWorld);
      console.log("Debug object:", this.object.name);
      console.log("Other object:", this.obj?.name);
      console.log("	translation", origin);
      console.log("	transformWorld", this.object.transformWorld);
      console.log("	transformLocal", this.object.transformLocal);
    }
  };
  __publicField(DebugObject, "TypeName", "debug-object");
  __decorate4([
    property.object()
  ], DebugObject.prototype, "obj", void 0);

  // node_modules/@wonderlandengine/components/dist/device-orientation-look.js
  function quatFromEulerYXZ(out, x, y, z) {
    const c1 = Math.cos(x / 2);
    const c2 = Math.cos(y / 2);
    const c3 = Math.cos(z / 2);
    const s1 = Math.sin(x / 2);
    const s2 = Math.sin(y / 2);
    const s3 = Math.sin(z / 2);
    out[0] = s1 * c2 * c3 + c1 * s2 * s3;
    out[1] = c1 * s2 * c3 - s1 * c2 * s3;
    out[2] = c1 * c2 * s3 - s1 * s2 * c3;
    out[3] = c1 * c2 * c3 + s1 * s2 * s3;
  }
  var DeviceOrientationLook = class extends Component3 {
    start() {
      this.rotationX = 0;
      this.rotationY = 0;
      this.lastClientX = -1;
      this.lastClientY = -1;
    }
    init() {
      this.deviceOrientation = [0, 0, 0, 1];
      this.screenOrientation = window.innerHeight > window.innerWidth ? 0 : 90;
      this._origin = [0, 0, 0];
      window.addEventListener("deviceorientation", function(e) {
        let alpha = e.alpha || 0;
        let beta = e.beta || 0;
        let gamma = e.gamma || 0;
        const toRad = Math.PI / 180;
        quatFromEulerYXZ(this.deviceOrientation, beta * toRad, alpha * toRad, -gamma * toRad);
      }.bind(this));
      window.addEventListener("orientationchange", function(e) {
        this.screenOrientation = window.orientation || 0;
      }.bind(this), false);
    }
    update() {
      if (this.engine.xr)
        return;
      this.object.getTranslationLocal(this._origin);
      this.object.resetTransform();
      if (this.screenOrientation != 0) {
        this.object.rotateAxisAngleDeg([0, 0, -1], this.screenOrientation);
      }
      this.object.rotate([-Math.sqrt(0.5), 0, 0, Math.sqrt(0.5)]);
      this.object.rotate(this.deviceOrientation);
      this.object.translate(this._origin);
    }
  };
  __publicField(DeviceOrientationLook, "TypeName", "device-orientation-look");
  __publicField(DeviceOrientationLook, "Properties", {});

  // node_modules/@wonderlandengine/components/dist/finger-cursor.js
  var FingerCursor = class extends Component3 {
    init() {
      this.lastTarget = null;
    }
    start() {
      this.tip = this.object.getComponent("collision");
    }
    update() {
      const overlaps = this.tip.queryOverlaps();
      let overlapFound = null;
      for (let i = 0; i < overlaps.length; ++i) {
        const o = overlaps[i].object;
        const target = o.getComponent("cursor-target");
        if (target) {
          if (!target.equals(this.lastTarget)) {
            target.onHover(o, this);
            target.onClick(o, this);
          }
          overlapFound = target;
          break;
        }
      }
      if (!overlapFound) {
        if (this.lastTarget)
          this.lastTarget.onUnhover(this.lastTarget.object, this);
        this.lastTarget = null;
        return;
      } else {
        this.lastTarget = overlapFound;
      }
    }
  };
  __publicField(FingerCursor, "TypeName", "finger-cursor");
  __publicField(FingerCursor, "Properties", {});

  // node_modules/@wonderlandengine/components/dist/fixed-foveation.js
  var FixedFoveation = class extends Component3 {
    start() {
      this.onSessionStartCallback = this.setFixedFoveation.bind(this);
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this.onSessionStartCallback);
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this.onSessionStartCallback);
    }
    setFixedFoveation() {
      this.engine.xr.baseLayer.fixedFoveation = this.fixedFoveation;
    }
  };
  __publicField(FixedFoveation, "TypeName", "fixed-foveation");
  __publicField(FixedFoveation, "Properties", {
    /** Amount to apply from 0 (none) to 1 (full) */
    fixedFoveation: { type: Type.Float, default: 0.5 }
  });

  // node_modules/@wonderlandengine/components/dist/hand-tracking.js
  var __decorate5 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var ORDERED_JOINTS = [
    "wrist",
    "thumb-metacarpal",
    "thumb-phalanx-proximal",
    "thumb-phalanx-distal",
    "thumb-tip",
    "index-finger-metacarpal",
    "index-finger-phalanx-proximal",
    "index-finger-phalanx-intermediate",
    "index-finger-phalanx-distal",
    "index-finger-tip",
    "middle-finger-metacarpal",
    "middle-finger-phalanx-proximal",
    "middle-finger-phalanx-intermediate",
    "middle-finger-phalanx-distal",
    "middle-finger-tip",
    "ring-finger-metacarpal",
    "ring-finger-phalanx-proximal",
    "ring-finger-phalanx-intermediate",
    "ring-finger-phalanx-distal",
    "ring-finger-tip",
    "pinky-finger-metacarpal",
    "pinky-finger-phalanx-proximal",
    "pinky-finger-phalanx-intermediate",
    "pinky-finger-phalanx-distal",
    "pinky-finger-tip"
  ];
  var invTranslation = vec3_exports.create();
  var invRotation = quat_exports.create();
  var tempVec0 = vec3_exports.create();
  var tempVec1 = vec3_exports.create();
  var HandTracking = class extends Component3 {
    /** Handedness determining whether to receive tracking input from right or left hand */
    handedness = 0;
    /** (optional) Mesh to use to visualize joints */
    jointMesh = null;
    /** Material to use for display. Applied to either the spawned skinned mesh or the joint spheres. */
    jointMaterial = null;
    /** (optional) Skin to apply tracked joint poses to. If not present,
     * joint spheres will be used for display instead. */
    handSkin = null;
    /** Deactivate children if no pose was tracked */
    deactivateChildrenWithoutPose = true;
    /** Controller objects to activate including children if no pose is available */
    controllerToDeactivate = null;
    init() {
      this.handedness = ["left", "right"][this.handedness];
    }
    joints = {};
    session = null;
    /* Whether last update had a hand pose */
    hasPose = false;
    _childrenActive = true;
    start() {
      if (!("XRHand" in window)) {
        console.warn("WebXR Hand Tracking not supported by this browser.");
        this.active = false;
        return;
      }
      if (this.handSkin) {
        const skin = this.handSkin;
        const jointIds = skin.jointIds;
        this.joints[ORDERED_JOINTS[0]] = this.engine.wrapObject(jointIds[0]);
        for (let j = 0; j < jointIds.length; ++j) {
          const joint = this.engine.wrapObject(jointIds[j]);
          this.joints[joint.name] = joint;
        }
        return;
      }
      const jointObjects = this.engine.scene.addObjects(ORDERED_JOINTS.length, this.object, ORDERED_JOINTS.length);
      for (let j = 0; j < ORDERED_JOINTS.length; ++j) {
        const joint = jointObjects[j];
        joint.addComponent(MeshComponent, {
          mesh: this.jointMesh,
          material: this.jointMaterial
        });
        this.joints[ORDERED_JOINTS[j]] = joint;
        joint.name = ORDERED_JOINTS[j];
      }
    }
    update(dt) {
      if (!this.engine.xr)
        return;
      this.hasPose = false;
      if (this.engine.xr.session.inputSources) {
        for (let i = 0; i < this.engine.xr.session.inputSources.length; ++i) {
          const inputSource = this.engine.xr.session.inputSources[i];
          if (!inputSource?.hand || inputSource?.handedness != this.handedness)
            continue;
          const wristSpace = inputSource.hand.get("wrist");
          if (wristSpace) {
            const p = this.engine.xr.frame.getJointPose(wristSpace, this.engine.xr.currentReferenceSpace);
            if (p) {
              setXRRigidTransformLocal(this.object, p.transform);
            }
          }
          this.object.getRotationLocal(invRotation);
          quat_exports.conjugate(invRotation, invRotation);
          this.object.getPositionLocal(invTranslation);
          this.joints["wrist"].resetTransform();
          for (let j = 0; j < ORDERED_JOINTS.length; ++j) {
            const jointName = ORDERED_JOINTS[j];
            const joint = this.joints[jointName];
            if (!joint)
              continue;
            let jointPose = null;
            const jointSpace = inputSource.hand.get(jointName);
            if (jointSpace) {
              jointPose = this.engine.xr.frame.getJointPose(jointSpace, this.engine.xr.currentReferenceSpace);
            }
            if (jointPose) {
              this.hasPose = true;
              joint.resetPositionRotation();
              joint.translateLocal([
                jointPose.transform.position.x - invTranslation[0],
                jointPose.transform.position.y - invTranslation[1],
                jointPose.transform.position.z - invTranslation[2]
              ]);
              joint.rotateLocal(invRotation);
              joint.rotateObject([
                jointPose.transform.orientation.x,
                jointPose.transform.orientation.y,
                jointPose.transform.orientation.z,
                jointPose.transform.orientation.w
              ]);
              if (!this.handSkin) {
                const r = jointPose.radius || 7e-3;
                joint.setScalingLocal([r, r, r]);
              }
            }
          }
        }
      }
      if (!this.hasPose && this._childrenActive) {
        this._childrenActive = false;
        if (this.deactivateChildrenWithoutPose) {
          this.setChildrenActive(false);
        }
        if (this.controllerToDeactivate) {
          this.controllerToDeactivate.active = true;
          this.setChildrenActive(true, this.controllerToDeactivate);
        }
      } else if (this.hasPose && !this._childrenActive) {
        this._childrenActive = true;
        if (this.deactivateChildrenWithoutPose) {
          this.setChildrenActive(true);
        }
        if (this.controllerToDeactivate) {
          this.controllerToDeactivate.active = false;
          this.setChildrenActive(false, this.controllerToDeactivate);
        }
      }
    }
    setChildrenActive(active, object) {
      object = object || this.object;
      const children = object.children;
      for (const o of children) {
        o.active = active;
        this.setChildrenActive(active, o);
      }
    }
    isGrabbing() {
      this.joints["index-finger-tip"].getPositionLocal(tempVec0);
      this.joints["thumb-tip"].getPositionLocal(tempVec1);
      return vec3_exports.sqrDist(tempVec0, tempVec1) < 1e-3;
    }
  };
  __publicField(HandTracking, "TypeName", "hand-tracking");
  __decorate5([
    property.enum(["left", "right"])
  ], HandTracking.prototype, "handedness", void 0);
  __decorate5([
    property.mesh()
  ], HandTracking.prototype, "jointMesh", void 0);
  __decorate5([
    property.material()
  ], HandTracking.prototype, "jointMaterial", void 0);
  __decorate5([
    property.skin()
  ], HandTracking.prototype, "handSkin", void 0);
  __decorate5([
    property.bool(true)
  ], HandTracking.prototype, "deactivateChildrenWithoutPose", void 0);
  __decorate5([
    property.object()
  ], HandTracking.prototype, "controllerToDeactivate", void 0);

  // node_modules/@wonderlandengine/components/dist/howler-audio-listener.js
  var import_howler = __toESM(require_howler(), 1);
  var HowlerAudioListener = class extends Component3 {
    init() {
      this.origin = new Float32Array(3);
      this.fwd = new Float32Array(3);
      this.up = new Float32Array(3);
    }
    update() {
      if (!this.spatial)
        return;
      this.object.getTranslationWorld(this.origin);
      this.object.getForward(this.fwd);
      this.object.getUp(this.up);
      Howler.pos(this.origin[0], this.origin[1], this.origin[2]);
      Howler.orientation(this.fwd[0], this.fwd[1], this.fwd[2], this.up[0], this.up[1], this.up[2]);
    }
  };
  __publicField(HowlerAudioListener, "TypeName", "howler-audio-listener");
  __publicField(HowlerAudioListener, "Properties", {
    /** Whether audio should be spatialized/positional. */
    spatial: { type: Type.Bool, default: true }
  });

  // node_modules/@wonderlandengine/components/dist/howler-audio-source.js
  var import_howler2 = __toESM(require_howler(), 1);
  var HowlerAudioSource = class extends Component3 {
    start() {
      this.audio = new Howl({
        src: [this.src],
        loop: this.loop,
        volume: this.volume,
        autoplay: this.autoplay
      });
      this.lastPlayedAudioId = null;
      this.origin = new Float32Array(3);
      this.lastOrigin = new Float32Array(3);
      if (this.spatial && this.autoplay) {
        this.updatePosition();
        this.play();
      }
    }
    update() {
      if (!this.spatial || !this.lastPlayedAudioId)
        return;
      this.object.getTranslationWorld(this.origin);
      if (Math.abs(this.lastOrigin[0] - this.origin[0]) > 5e-3 || Math.abs(this.lastOrigin[1] - this.origin[1]) > 5e-3 || Math.abs(this.lastOrigin[2] - this.origin[2]) > 5e-3) {
        this.updatePosition();
      }
    }
    updatePosition() {
      this.audio.pos(this.origin[0], this.origin[1], this.origin[2], this.lastPlayedAudioId);
      this.lastOrigin.set(this.origin);
    }
    play() {
      if (this.lastPlayedAudioId)
        this.audio.stop(this.lastPlayedAudioId);
      this.lastPlayedAudioId = this.audio.play();
      if (this.spatial)
        this.updatePosition();
    }
    stop() {
      if (!this.lastPlayedAudioId)
        return;
      this.audio.stop(this.lastPlayedAudioId);
      this.lastPlayedAudioId = null;
    }
    onDeactivate() {
      this.stop();
    }
  };
  __publicField(HowlerAudioSource, "TypeName", "howler-audio-source");
  __publicField(HowlerAudioSource, "Properties", {
    /** Volume */
    volume: { type: Type.Float, default: 1 },
    /** Whether audio should be spatialized/positional */
    spatial: { type: Type.Bool, default: true },
    /** Whether to loop the sound */
    loop: { type: Type.Bool, default: false },
    /** Whether to start playing automatically */
    autoplay: { type: Type.Bool, default: false },
    /** URL to a sound file to play */
    src: { type: Type.String, default: "" }
  });

  // node_modules/@wonderlandengine/components/dist/utils/utils.js
  function setFirstMaterialTexture(mat, texture, customTextureProperty) {
    if (customTextureProperty !== "auto") {
      mat[customTextureProperty] = texture;
      return true;
    }
    const shader = mat.shader;
    if (shader === "Flat Opaque Textured") {
      mat.flatTexture = texture;
      return true;
    } else if (shader === "Phong Opaque Textured" || shader === "Foliage" || shader === "Phong Normalmapped" || shader === "Phong Lightmapped") {
      mat.diffuseTexture = texture;
      return true;
    } else if (shader === "Particle") {
      mat.mainTexture = texture;
      return true;
    } else if (shader === "DistanceFieldVector") {
      mat.vectorTexture = texture;
      return true;
    } else if (shader === "Background" || shader === "Sky") {
      mat.texture = texture;
      return true;
    } else if (shader === "Physical Opaque Textured") {
      mat.albedoTexture = texture;
      return true;
    }
    return false;
  }
  function deg2rad(value) {
    return value * Math.PI / 180;
  }
  function rad2deg(value) {
    return value * 180 / Math.PI;
  }

  // node_modules/@wonderlandengine/components/dist/image-texture.js
  var ImageTexture = class extends Component3 {
    start() {
      if (!this.material) {
        throw Error("image-texture: material property not set");
      }
      this.engine.textures.load(this.url, "anonymous").then((texture) => {
        const mat = this.material;
        if (!setFirstMaterialTexture(mat, texture, this.textureProperty)) {
          console.error("Shader", mat.shader, "not supported by image-texture");
        }
      }).catch(console.err);
    }
  };
  __publicField(ImageTexture, "TypeName", "image-texture");
  __publicField(ImageTexture, "Properties", {
    /** URL to download the image from */
    url: Property.string(),
    /** Material to apply the video texture to */
    material: Property.material(),
    /** Name of the texture property to set */
    textureProperty: Property.string("auto")
  });

  // node_modules/@wonderlandengine/components/dist/mouse-look.js
  var __decorate6 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var preventDefault = (e) => {
    e.preventDefault();
  };
  var MouseLookComponent = class extends Component3 {
    /** Mouse look sensitivity */
    sensitity = 0.25;
    /** Require a mouse button to be pressed to control view.
     * Otherwise view will allways follow mouse movement */
    requireMouseDown = true;
    /** If "moveOnClick" is enabled, mouse button which should
     * be held down to control view */
    mouseButtonIndex = 0;
    /** Enables pointer lock on "mousedown" event on canvas */
    pointerLockOnClick = false;
    currentRotationY = 0;
    currentRotationX = 0;
    origin = new Float32Array(3);
    parentOrigin = new Float32Array(3);
    rotationX = 0;
    rotationY = 0;
    mouseDown = false;
    onActivate() {
      document.addEventListener("mousemove", this.onMouseMove);
      const canvas2 = this.engine.canvas;
      if (this.pointerLockOnClick) {
        canvas2.addEventListener("mousedown", this.requestPointerLock);
      }
      if (this.requireMouseDown) {
        if (this.mouseButtonIndex === 2) {
          canvas2.addEventListener("contextmenu", preventDefault, false);
        }
        canvas2.addEventListener("mousedown", this.onMouseDown);
        canvas2.addEventListener("mouseup", this.onMouseUp);
      }
    }
    onDeactivate() {
      document.removeEventListener("mousemove", this.onMouseMove);
      const canvas2 = this.engine.canvas;
      if (this.pointerLockOnClick) {
        canvas2.removeEventListener("mousedown", this.requestPointerLock);
      }
      if (this.requireMouseDown) {
        if (this.mouseButtonIndex === 2) {
          canvas2.removeEventListener("contextmenu", preventDefault, false);
        }
        canvas2.removeEventListener("mousedown", this.onMouseDown);
        canvas2.removeEventListener("mouseup", this.onMouseUp);
      }
    }
    requestPointerLock = () => {
      const canvas2 = this.engine.canvas;
      canvas2.requestPointerLock = canvas2.requestPointerLock || canvas2.mozRequestPointerLock || canvas2.webkitRequestPointerLock;
      canvas2.requestPointerLock();
    };
    onMouseDown = (e) => {
      if (e.button === this.mouseButtonIndex) {
        this.mouseDown = true;
        document.body.style.cursor = "grabbing";
        if (e.button === 1) {
          e.preventDefault();
          return false;
        }
      }
    };
    onMouseUp = (e) => {
      if (e.button === this.mouseButtonIndex) {
        this.mouseDown = false;
        document.body.style.cursor = "initial";
      }
    };
    onMouseMove = (e) => {
      if (this.active && (this.mouseDown || !this.requireMouseDown)) {
        this.rotationY = -this.sensitity * e.movementX / 100;
        this.rotationX = -this.sensitity * e.movementY / 100;
        this.currentRotationX += this.rotationX;
        this.currentRotationY += this.rotationY;
        this.currentRotationX = Math.min(1.507, this.currentRotationX);
        this.currentRotationX = Math.max(-1.507, this.currentRotationX);
        this.object.getPositionWorld(this.origin);
        const parent = this.object.parent;
        if (parent) {
          parent.getPositionWorld(this.parentOrigin);
          vec3_exports.sub(this.origin, this.origin, this.parentOrigin);
        }
        this.object.resetPositionRotation();
        this.object.rotateAxisAngleRadLocal([1, 0, 0], this.currentRotationX);
        this.object.rotateAxisAngleRadLocal([0, 1, 0], this.currentRotationY);
        this.object.translateLocal(this.origin);
      }
    };
  };
  __publicField(MouseLookComponent, "TypeName", "mouse-look");
  __decorate6([
    property.float(0.25)
  ], MouseLookComponent.prototype, "sensitity", void 0);
  __decorate6([
    property.bool(true)
  ], MouseLookComponent.prototype, "requireMouseDown", void 0);
  __decorate6([
    property.int()
  ], MouseLookComponent.prototype, "mouseButtonIndex", void 0);
  __decorate6([
    property.bool(false)
  ], MouseLookComponent.prototype, "pointerLockOnClick", void 0);

  // node_modules/@wonderlandengine/components/dist/player-height.js
  var __decorate7 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var PlayerHeight = class extends Component3 {
    height = 1.75;
    onSessionStartCallback;
    onSessionEndCallback;
    start() {
      this.object.resetPositionRotation();
      this.object.translateLocal([0, this.height, 0]);
      this.onSessionStartCallback = this.onXRSessionStart.bind(this);
      this.onSessionEndCallback = this.onXRSessionEnd.bind(this);
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this.onSessionStartCallback);
      this.engine.onXRSessionEnd.add(this.onSessionEndCallback);
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this.onSessionStartCallback);
      this.engine.onXRSessionEnd.remove(this.onSessionEndCallback);
    }
    onXRSessionStart() {
      const type = this.engine.xr?.currentReferenceSpaceType;
      if (type !== "local" && type !== "viewer") {
        this.object.resetPositionRotation();
      }
    }
    onXRSessionEnd() {
      const type = this.engine.xr?.currentReferenceSpaceType;
      if (type !== "local" && type !== "viewer") {
        this.object.resetPositionRotation();
        this.object.translateLocal([0, this.height, 0]);
      }
    }
  };
  __publicField(PlayerHeight, "TypeName", "player-height");
  __decorate7([
    property.float(1.75)
  ], PlayerHeight.prototype, "height", void 0);

  // node_modules/@wonderlandengine/components/dist/target-framerate.js
  var TargetFramerate = class extends Component3 {
    start() {
      this.onSessionStartCallback = this.setTargetFramerate.bind(this);
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this.onSessionStartCallback);
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this.onSessionStartCallback);
    }
    setTargetFramerate(s) {
      if (s.supportedFrameRates && s.updateTargetFrameRate) {
        const a = this.engine.xr.session.supportedFrameRates;
        a.sort((a2, b) => Math.abs(a2 - this.framerate) - Math.abs(b - this.framerate));
        this.engine.xr.session.updateTargetFrameRate(a[0]);
      }
    }
  };
  __publicField(TargetFramerate, "TypeName", "target-framerate");
  __publicField(TargetFramerate, "Properties", {
    framerate: { type: Type.Float, default: 90 }
  });

  // node_modules/@wonderlandengine/components/dist/teleport.js
  var TeleportComponent = class extends Component3 {
    init() {
      this._prevThumbstickAxis = new Float32Array(2);
      this._tempVec = new Float32Array(3);
      this._tempVec0 = new Float32Array(3);
      this._currentIndicatorRotation = 0;
      this.input = this.object.getComponent("input");
      if (!this.input) {
        console.error(this.object.name, "generic-teleport-component.js: input component is required on the object");
        return;
      }
      if (!this.teleportIndicatorMeshObject) {
        console.error(this.object.name, "generic-teleport-component.js: Teleport indicator mesh is missing");
        return;
      }
      if (!this.camRoot) {
        console.error(this.object.name, "generic-teleport-component.js: camRoot not set");
        return;
      }
      this.isIndicating = false;
      this.indicatorHidden = true;
      this.hitSpot = new Float32Array(3);
      this._hasHit = false;
      this._extraRotation = 0;
      this._currentStickAxes = new Float32Array(2);
    }
    start() {
      if (this.cam) {
        this.isMouseIndicating = false;
        canvas.addEventListener("mousedown", this.onMouseDown.bind(this));
        canvas.addEventListener("mouseup", this.onMouseUp.bind(this));
      }
      if (this.handedness == 0) {
        const inputComp = this.object.getComponent("input");
        if (!inputComp) {
          console.warn("teleport component on object", this.object.name, 'was configured with handedness "input component", but object has no input component.');
        } else {
          this.handedness = inputComp.handedness;
          this.input = inputComp;
        }
      } else {
        this.handedness = ["left", "right"][this.handedness - 1];
      }
      this.onSessionStartCallback = this.setupVREvents.bind(this);
      this.teleportIndicatorMeshObject.active = false;
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this.onSessionStartCallback);
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this.onSessionStartCallback);
    }
    /* Get current camera Y rotation */
    _getCamRotation() {
      this.eyeLeft.getForward(this._tempVec);
      this._tempVec[1] = 0;
      vec3_exports.normalize(this._tempVec, this._tempVec);
      return Math.atan2(this._tempVec[0], this._tempVec[2]);
    }
    update() {
      let inputLength = 0;
      if (this.gamepad && this.gamepad.axes) {
        this._currentStickAxes[0] = this.gamepad.axes[2];
        this._currentStickAxes[1] = this.gamepad.axes[3];
        inputLength = Math.abs(this._currentStickAxes[0]) + Math.abs(this._currentStickAxes[1]);
      }
      if (!this.isIndicating && this._prevThumbstickAxis[1] >= this.thumbstickActivationThreshhold && this._currentStickAxes[1] < this.thumbstickActivationThreshhold) {
        this.isIndicating = true;
      } else if (this.isIndicating && inputLength < this.thumbstickDeactivationThreshhold) {
        this.isIndicating = false;
        this.teleportIndicatorMeshObject.active = false;
        if (this._hasHit) {
          this._teleportPlayer(this.hitSpot, this._extraRotation);
        }
      }
      if (this.isIndicating && this.teleportIndicatorMeshObject && this.input) {
        const origin = this._tempVec0;
        this.object.getPositionWorld(origin);
        const direction2 = this.object.getForwardWorld(this._tempVec);
        let rayHit = this.rayHit = this.rayCastMode == 0 ? this.engine.scene.rayCast(origin, direction2, 1 << this.floorGroup) : this.engine.physics.rayCast(origin, direction2, 1 << this.floorGroup, this.maxDistance);
        if (rayHit.hitCount > 0) {
          this.indicatorHidden = false;
          this._extraRotation = Math.PI + Math.atan2(this._currentStickAxes[0], this._currentStickAxes[1]);
          this._currentIndicatorRotation = this._getCamRotation() + (this._extraRotation - Math.PI);
          this.teleportIndicatorMeshObject.resetPositionRotation();
          this.teleportIndicatorMeshObject.rotateAxisAngleRad([0, 1, 0], this._currentIndicatorRotation);
          this.teleportIndicatorMeshObject.translate(rayHit.locations[0]);
          this.teleportIndicatorMeshObject.translate([
            0,
            this.indicatorYOffset,
            0
          ]);
          this.teleportIndicatorMeshObject.active = true;
          this.hitSpot.set(rayHit.locations[0]);
          this._hasHit = true;
        } else {
          if (!this.indicatorHidden) {
            this.teleportIndicatorMeshObject.active = false;
            this.indicatorHidden = true;
          }
          this._hasHit = false;
        }
      } else if (this.teleportIndicatorMeshObject && this.isMouseIndicating) {
        this.onMousePressed();
      }
      this._prevThumbstickAxis.set(this._currentStickAxes);
    }
    setupVREvents(s) {
      this.session = s;
      s.addEventListener("end", function() {
        this.gamepad = null;
        this.session = null;
      }.bind(this));
      if (s.inputSources && s.inputSources.length) {
        for (let i = 0; i < s.inputSources.length; i++) {
          let inputSource = s.inputSources[i];
          if (inputSource.handedness == this.handedness) {
            this.gamepad = inputSource.gamepad;
          }
        }
      }
      s.addEventListener("inputsourceschange", function(e) {
        if (e.added && e.added.length) {
          for (let i = 0; i < e.added.length; i++) {
            let inputSource = e.added[i];
            if (inputSource.handedness == this.handedness) {
              this.gamepad = inputSource.gamepad;
            }
          }
        }
      }.bind(this));
    }
    onMouseDown() {
      this.isMouseIndicating = true;
    }
    onMouseUp() {
      this.isMouseIndicating = false;
      this.teleportIndicatorMeshObject.active = false;
      if (this._hasHit) {
        this._teleportPlayer(this.hitSpot, 0);
      }
    }
    onMousePressed() {
      let origin = [0, 0, 0];
      this.cam.getPositionWorld(origin);
      const direction2 = this.cam.getForward(this._tempVec);
      let rayHit = this.rayHit = this.rayCastMode == 0 ? this.engine.scene.rayCast(origin, direction2, 1 << this.floorGroup) : this.engine.physics.rayCast(origin, direction2, 1 << this.floorGroup, this.maxDistance);
      if (rayHit.hitCount > 0) {
        this.indicatorHidden = false;
        direction2[1] = 0;
        vec3_exports.normalize(direction2, direction2);
        this._currentIndicatorRotation = -Math.sign(direction2[2]) * Math.acos(direction2[0]) - Math.PI * 0.5;
        this.teleportIndicatorMeshObject.resetPositionRotation();
        this.teleportIndicatorMeshObject.rotateAxisAngleRad([0, 1, 0], this._currentIndicatorRotation);
        this.teleportIndicatorMeshObject.translate(rayHit.locations[0]);
        this.teleportIndicatorMeshObject.active = true;
        this.hitSpot = rayHit.locations[0];
        this._hasHit = true;
      } else {
        if (!this.indicatorHidden) {
          this.teleportIndicatorMeshObject.active = false;
          this.indicatorHidden = true;
        }
        this._hasHit = false;
      }
    }
    _teleportPlayer(newPosition, rotationToAdd) {
      this.camRoot.rotateAxisAngleRad([0, 1, 0], rotationToAdd);
      const p = this._tempVec;
      const p1 = this._tempVec0;
      if (this.session) {
        this.eyeLeft.getPositionWorld(p);
        this.eyeRight.getPositionWorld(p1);
        vec3_exports.add(p, p, p1);
        vec3_exports.scale(p, p, 0.5);
      } else {
        this.cam.getPositionWorld(p);
      }
      this.camRoot.getPositionWorld(p1);
      vec3_exports.sub(p, p1, p);
      p[0] += newPosition[0];
      p[1] = newPosition[1];
      p[2] += newPosition[2];
      this.camRoot.setPositionWorld(p);
    }
  };
  __publicField(TeleportComponent, "TypeName", "teleport");
  __publicField(TeleportComponent, "Properties", {
    /** Object that will be placed as indiciation forwhere the player will teleport to. */
    teleportIndicatorMeshObject: { type: Type.Object },
    /** Root of the player, the object that will be positioned on teleportation. */
    camRoot: { type: Type.Object },
    /** Non-vr camera for use outside of VR */
    cam: { type: Type.Object },
    /** Left eye for use in VR*/
    eyeLeft: { type: Type.Object },
    /** Right eye for use in VR*/
    eyeRight: { type: Type.Object },
    /** Handedness for VR cursors to accept trigger events only from respective controller. */
    handedness: {
      type: Type.Enum,
      values: ["input component", "left", "right", "none"],
      default: "input component"
    },
    /** Collision group of valid "floor" objects that can be teleported on */
    floorGroup: { type: Type.Int, default: 1 },
    /** How far the thumbstick needs to be pushed to have the teleport target indicator show up */
    thumbstickActivationThreshhold: { type: Type.Float, default: -0.7 },
    /** How far the thumbstick needs to be released to execute the teleport */
    thumbstickDeactivationThreshhold: { type: Type.Float, default: 0.3 },
    /** Offset to apply to the indicator object, e.g. to avoid it from Z-fighting with the floor */
    indicatorYOffset: { type: Type.Float, default: 0.01 },
    /** Mode for raycasting, whether to use PhysX or simple collision components */
    rayCastMode: {
      type: Type.Enum,
      values: ["collision", "physx"],
      default: "collision"
    },
    /** Max distance for PhysX raycast */
    maxDistance: { type: Type.Float, default: 100 }
  });

  // node_modules/@wonderlandengine/components/dist/trail.js
  var __decorate8 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var direction = vec3_exports.create();
  var offset = vec3_exports.create();
  var normal = vec3_exports.create();
  var UP = vec3_exports.fromValues(0, 1, 0);
  var Trail = class extends Component3 {
    /** The material to apply to the trail mesh */
    material = null;
    /** The number of segments in the trail mesh */
    segments = 50;
    /** The time interval before recording a new point */
    interval = 0.1;
    /** The width of the trail (in world space) */
    width = 1;
    /** Whether or not the trail should taper off */
    taper = true;
    /**
     * The maximum delta time in seconds, above which the trail resets.
     * This prevents the trail from jumping around when updates happen
     * infrequently (e.g. when the tab doesn't have focus).
     */
    resetThreshold = 0.5;
    _currentPointIndex = 0;
    _timeTillNext = 0;
    _points = [];
    _trailContainer = null;
    _meshComp = null;
    _mesh = null;
    _indexData = null;
    start() {
      this._points = new Array(this.segments + 1);
      for (let i = 0; i < this._points.length; ++i) {
        this._points[i] = vec3_exports.create();
      }
      this._timeTillNext = this.interval;
      this._trailContainer = this.engine.scene.addObject();
      this._meshComp = this._trailContainer.addComponent("mesh");
      this._meshComp.material = this.material;
      const vertexCount = 2 * this._points.length;
      this._indexData = new Uint32Array(6 * this.segments);
      for (let i = 0, v = 0; i < vertexCount - 2; i += 2, v += 6) {
        this._indexData.subarray(v, v + 6).set([i + 1, i + 0, i + 2, i + 2, i + 3, i + 1]);
      }
      this._mesh = new Mesh(this.engine, {
        vertexCount,
        indexData: this._indexData,
        indexType: MeshIndexType.UnsignedInt
      });
      this._meshComp.mesh = this._mesh;
    }
    updateVertices() {
      if (!this._mesh)
        return;
      const positions = this._mesh.attribute(MeshAttribute.Position);
      const texCoords = this._mesh.attribute(MeshAttribute.TextureCoordinate);
      const normals = this._mesh.attribute(MeshAttribute.Normal);
      vec3_exports.set(direction, 0, 0, 0);
      for (let i = 0; i < this._points.length; ++i) {
        const curr = this._points[(this._currentPointIndex + i + 1) % this._points.length];
        const next = this._points[(this._currentPointIndex + i + 2) % this._points.length];
        if (i !== this._points.length - 1) {
          vec3_exports.sub(direction, next, curr);
        }
        vec3_exports.cross(offset, UP, direction);
        vec3_exports.normalize(offset, offset);
        const timeFraction = 1 - this._timeTillNext / this.interval;
        const fraction = (i - timeFraction) / this.segments;
        vec3_exports.scale(offset, offset, (this.taper ? fraction : 1) * this.width / 2);
        positions.set(i * 2, [
          curr[0] - offset[0],
          curr[1] - offset[1],
          curr[2] - offset[2]
        ]);
        positions.set(i * 2 + 1, [
          curr[0] + offset[0],
          curr[1] + offset[1],
          curr[2] + offset[2]
        ]);
        if (normals) {
          vec3_exports.cross(normal, direction, offset);
          vec3_exports.normalize(normal, normal);
          normals.set(i * 2, normal);
          normals.set(i * 2 + 1, normal);
        }
        if (texCoords) {
          texCoords.set(i * 2, [0, fraction]);
          texCoords.set(i * 2 + 1, [1, fraction]);
        }
      }
      this._mesh.update();
    }
    resetTrail() {
      this.object.getPositionWorld(this._points[0]);
      for (let i = 1; i < this._points.length; ++i) {
        vec3_exports.copy(this._points[i], this._points[0]);
      }
      this._currentPointIndex = 0;
      this._timeTillNext = this.interval;
    }
    update(dt) {
      this._timeTillNext -= dt;
      if (dt > this.resetThreshold) {
        this.resetTrail();
      }
      if (this._timeTillNext < 0) {
        this._currentPointIndex = (this._currentPointIndex + 1) % this._points.length;
        this._timeTillNext = this._timeTillNext % this.interval + this.interval;
      }
      this.object.getPositionWorld(this._points[this._currentPointIndex]);
      this.updateVertices();
    }
    onActivate() {
      this.resetTrail();
      if (this._meshComp)
        this._meshComp.active = true;
    }
    onDeactivate() {
      if (this._meshComp)
        this._meshComp.active = false;
    }
    onDestroy() {
      if (this._trailContainer)
        this._trailContainer.destroy();
      if (this._mesh)
        this._mesh.destroy();
    }
  };
  __publicField(Trail, "TypeName", "trail");
  __decorate8([
    property.material()
  ], Trail.prototype, "material", void 0);
  __decorate8([
    property.int(50)
  ], Trail.prototype, "segments", void 0);
  __decorate8([
    property.float(50)
  ], Trail.prototype, "interval", void 0);
  __decorate8([
    property.float(1)
  ], Trail.prototype, "width", void 0);
  __decorate8([
    property.bool(true)
  ], Trail.prototype, "taper", void 0);
  __decorate8([
    property.float(1)
  ], Trail.prototype, "resetThreshold", void 0);

  // node_modules/@wonderlandengine/components/dist/two-joint-ik-solver.js
  function clamp(v, a, b) {
    return Math.max(a, Math.min(v, b));
  }
  var rootScaling = new Float32Array(3);
  var tempQuat3 = new Float32Array(4);
  var middlePos = new Float32Array(3);
  var endPos = new Float32Array(3);
  var targetPos = new Float32Array(3);
  var helperPos = new Float32Array(3);
  var rootTransform = new Float32Array(8);
  var middleTransform = new Float32Array(8);
  var endTransform = new Float32Array(8);
  var twoJointIK = function() {
    const ta = new Float32Array(3);
    const ca = new Float32Array(3);
    const ba = new Float32Array(3);
    const ab = new Float32Array(3);
    const cb = new Float32Array(3);
    const axis0 = new Float32Array(3);
    const axis1 = new Float32Array(3);
    const temp = new Float32Array(3);
    return function(root, middle, b, c, targetPos2, eps, helper) {
      ba.set(b);
      const lab = vec3_exports.length(ba);
      vec3_exports.sub(ta, b, c);
      const lcb = vec3_exports.length(ta);
      ta.set(targetPos2);
      const lat = clamp(vec3_exports.length(ta), eps, lab + lcb - eps);
      ca.set(c);
      vec3_exports.scale(ab, b, -1);
      vec3_exports.sub(cb, c, b);
      vec3_exports.normalize(ca, ca);
      vec3_exports.normalize(ba, ba);
      vec3_exports.normalize(ab, ab);
      vec3_exports.normalize(cb, cb);
      vec3_exports.normalize(ta, ta);
      const ac_ab_0 = Math.acos(clamp(vec3_exports.dot(ca, ba), -1, 1));
      const ba_bc_0 = Math.acos(clamp(vec3_exports.dot(ab, cb), -1, 1));
      const ac_at_0 = Math.acos(clamp(vec3_exports.dot(ca, ta), -1, 1));
      const ac_ab_1 = Math.acos(clamp((lcb * lcb - lab * lab - lat * lat) / (-2 * lab * lat), -1, 1));
      const ba_bc_1 = Math.acos(clamp((lat * lat - lab * lab - lcb * lcb) / (-2 * lab * lcb), -1, 1));
      if (helper) {
        vec3_exports.sub(ba, helper, b);
        vec3_exports.normalize(ba, ba);
      }
      vec3_exports.cross(axis0, ca, ba);
      vec3_exports.normalize(axis0, axis0);
      vec3_exports.cross(axis1, c, targetPos2);
      vec3_exports.normalize(axis1, axis1);
      middle.transformVectorInverseLocal(temp, axis0);
      root.rotateAxisAngleRadObject(axis1, ac_at_0);
      root.rotateAxisAngleRadObject(axis0, ac_ab_1 - ac_ab_0);
      middle.rotateAxisAngleRadObject(axis0, ba_bc_1 - ba_bc_0);
    };
  }();
  var TwoJointIkSolver = class extends Component3 {
    time = 0;
    start() {
      this.root.getTransformLocal(rootTransform);
      this.middle.getTransformLocal(middleTransform);
      this.end.getTransformLocal(endTransform);
    }
    update(dt) {
      this.time += dt;
      this.root.setTransformLocal(rootTransform);
      this.middle.setTransformLocal(middleTransform);
      this.end.setTransformLocal(endTransform);
      this.root.getScalingWorld(rootScaling);
      this.middle.getPositionLocal(middlePos);
      this.end.getPositionLocal(endPos);
      this.middle.transformPointLocal(endPos, endPos);
      if (this.helper) {
        this.helper.getPositionWorld(helperPos);
        this.root.transformPointInverseWorld(helperPos, helperPos);
        vec3_exports.div(helperPos, helperPos, rootScaling);
      }
      this.target.getPositionWorld(targetPos);
      this.root.transformPointInverseWorld(targetPos, targetPos);
      vec3_exports.div(targetPos, targetPos, rootScaling);
      twoJointIK(this.root, this.middle, middlePos, endPos, targetPos, 0.01, this.helper ? helperPos : null, this.time);
      if (this.copyTargetRotation) {
        this.end.setRotationWorld(this.target.getRotationWorld(tempQuat3));
      }
    }
  };
  __publicField(TwoJointIkSolver, "TypeName", "two-joint-ik-solver");
  __publicField(TwoJointIkSolver, "Properties", {
    /** Root bone, never moves */
    root: Property.object(),
    /** Bone attached to the root */
    middle: Property.object(),
    /** Bone attached to the middle */
    end: Property.object(),
    /** Target the joins should reach for */
    target: Property.object(),
    /** Flag for copying rotation from target to end */
    copyTargetRotation: Property.bool(true),
    /** Helper object to use to determine joint rotation axis */
    helper: Property.object()
  });

  // node_modules/@wonderlandengine/components/dist/video-texture.js
  var VideoTexture = class extends Component3 {
    init() {
      if (!this.material) {
        throw Error("video-texture: material property not set");
      }
      this.loaded = false;
      this.frameUpdateRequested = true;
    }
    start() {
      this.video = document.createElement("video");
      this.video.src = this.url;
      this.video.crossOrigin = "anonymous";
      this.video.playsInline = true;
      this.video.loop = this.loop;
      this.video.muted = this.muted;
      this.video.addEventListener("playing", () => {
        this.loaded = true;
      });
      if (this.autoplay) {
        const playAfterUserGesture = () => {
          this.video.play();
          window.removeEventListener("click", playAfterUserGesture);
          window.removeEventListener("touchstart", playAfterUserGesture);
        };
        window.addEventListener("click", playAfterUserGesture);
        window.addEventListener("touchstart", playAfterUserGesture);
      }
    }
    applyTexture() {
      const mat = this.material;
      const shader = mat.shader;
      const texture = this.texture = new Texture(this.engine, this.video);
      if (!setFirstMaterialTexture(mat, texture, this.textureProperty)) {
        console.error("Shader", shader, "not supported by video-texture");
      }
      if ("requestVideoFrameCallback" in this.video) {
        this.video.requestVideoFrameCallback(this.updateVideo.bind(this));
      } else {
        this.video.addEventListener("timeupdate", () => {
          this.frameUpdateRequested = true;
        });
      }
    }
    update(dt) {
      if (this.loaded && this.frameUpdateRequested) {
        if (this.texture) {
          this.texture.update();
        } else {
          this.applyTexture();
        }
        this.frameUpdateRequested = false;
      }
    }
    updateVideo() {
      this.frameUpdateRequested = true;
      this.video.requestVideoFrameCallback(this.updateVideo.bind(this));
    }
  };
  __publicField(VideoTexture, "TypeName", "video-texture");
  __publicField(VideoTexture, "Properties", {
    /** URL to download video from */
    url: Property.string(),
    /** Material to apply the video texture to */
    material: Property.material(),
    /** Whether to loop the video */
    loop: Property.bool(true),
    /** Whether to automatically start playing the video */
    autoplay: Property.bool(true),
    /** Whether to mute sound */
    muted: Property.bool(true),
    /** Name of the texture property to set */
    textureProperty: Property.string("auto")
  });

  // node_modules/@wonderlandengine/components/dist/vr-mode-active-switch.js
  var VrModeActiveSwitch = class extends Component3 {
    start() {
      this.components = [];
      this.getComponents(this.object);
      this.onXRSessionEnd();
      this.onSessionStartCallback = this.onXRSessionStart.bind(this);
      this.onSessionEndCallback = this.onXRSessionEnd.bind(this);
    }
    onActivate() {
      this.engine.onXRSessionStart.add(this.onSessionStartCallback);
      this.engine.onXRSessionEnd.add(this.onSessionEndCallback);
    }
    onDeactivate() {
      this.engine.onXRSessionStart.remove(this.onSessionStartCallback);
      this.engine.onXRSessionEnd.remove(this.onSessionEndCallback);
    }
    getComponents(obj) {
      const comps = obj.getComponents().filter((c) => c.type !== "vr-mode-active-switch");
      this.components = this.components.concat(comps);
      if (this.affectChildren) {
        let children = obj.children;
        for (let i = 0; i < children.length; ++i) {
          this.getComponents(children[i]);
        }
      }
    }
    setComponentsActive(active) {
      const comps = this.components;
      for (let i = 0; i < comps.length; ++i) {
        comps[i].active = active;
      }
    }
    onXRSessionStart() {
      this.setComponentsActive(this.activateComponents == 0);
    }
    onXRSessionEnd() {
      this.setComponentsActive(this.activateComponents != 0);
    }
  };
  __publicField(VrModeActiveSwitch, "TypeName", "vr-mode-active-switch");
  __publicField(VrModeActiveSwitch, "Properties", {
    /** When components should be active: In VR or when not in VR */
    activateComponents: {
      type: Type.Enum,
      values: ["in VR", "in non-VR"],
      default: "in VR"
    },
    /** Whether child object's components should be affected */
    affectChildren: { type: Type.Bool, default: true }
  });

  // node_modules/@wonderlandengine/components/dist/plane-detection.js
  var import_earcut = __toESM(require_earcut(), 1);
  var __decorate9 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var tempVec32 = new Float32Array(3);
  function extentsFromContour(out, points) {
    if (points.length == 0)
      return out;
    let absMaxX = Math.abs(points[0].x);
    let absMaxZ = Math.abs(points[0].z);
    for (let i = 1; i < points.length; ++i) {
      absMaxX = Math.max(absMaxX, Math.abs(points[i].x));
      absMaxZ = Math.max(absMaxZ, Math.abs(points[i].z));
    }
    out[0] = absMaxX;
    out[1] = 0;
    out[2] = absMaxZ;
  }
  function within(x, a, b) {
    if (a > b)
      return x < a && x > b;
    return x > a && x < b;
  }
  function isPointLocalOnXRPlanePolygon(p, plane) {
    const points = plane.polygon;
    if (points.length < 3)
      return false;
    const pX = p[0];
    const pZ = p[2];
    let intersections = 0;
    for (let n = 0, l = points.length - 1; n < points.length; ++n) {
      const aX = points[l].x;
      const aZ = points[l].z;
      const s = (points[n].z - aZ) / (points[n].x - aX);
      const x = Math.abs((pZ - aZ) / s);
      if (x >= 0 && x <= 1 && within(x + pX, aX, points[n].x))
        ++intersections;
      l = n;
    }
    return (intersections & 1) == 0;
  }
  function isPointWorldOnXRPlanePolygon(object, p, plane) {
    if (plane.polygon.length < 3)
      return false;
    isPointLocalOnXRPlanePolygon(object.transformPointInverseWorld(tempVec32, p), plane);
  }
  function planeMeshFromContour(engine, points, meshToUpdate = null) {
    const vertexCount = points.length;
    const vertices = new Float32Array(vertexCount * 2);
    for (let i = 0, d = 0; i < vertexCount; ++i, d += 2) {
      vertices[d] = points[i].x;
      vertices[d + 1] = points[i].z;
    }
    const triangles = (0, import_earcut.default)(vertices);
    const mesh = meshToUpdate || new Mesh(engine, {
      vertexCount,
      /* Assumption here that we will never have more than 256 points
       * in the detected plane meshes! */
      indexType: MeshIndexType.UnsignedByte,
      indexData: triangles
    });
    if (mesh.vertexCount !== vertexCount) {
      console.warn("vertexCount of meshToUpdate did not match required vertexCount");
      return mesh;
    }
    const positions = mesh.attribute(MeshAttribute.Position);
    const textureCoords = mesh.attribute(MeshAttribute.TextureCoordinate);
    const normals = mesh.attribute(MeshAttribute.Normal);
    tempVec32[1] = 0;
    for (let i = 0, s = 0; i < vertexCount; ++i, s += 2) {
      tempVec32[0] = vertices[s];
      tempVec32[2] = vertices[s + 1];
      positions.set(i, tempVec32);
    }
    textureCoords?.set(0, vertices);
    if (normals) {
      tempVec32[0] = 0;
      tempVec32[1] = 1;
      tempVec32[2] = 0;
      for (let i = 0; i < vertexCount; ++i) {
        normals.set(i, tempVec32);
      }
    }
    if (meshToUpdate)
      mesh.update();
    return mesh;
  }
  var _planeLost, planeLost_fn, _planeFound, planeFound_fn, _planeUpdate, planeUpdate_fn, _planeUpdatePose, planeUpdatePose_fn;
  var PlaneDetection = class extends Component3 {
    constructor() {
      super(...arguments);
      __privateAdd(this, _planeLost);
      __privateAdd(this, _planeFound);
      __privateAdd(this, _planeUpdate);
      __privateAdd(this, _planeUpdatePose);
      /**
       * Material to assign to created plane meshes or `null` if meshes should not be created.
       */
      __publicField(this, "planeMaterial", null);
      /**
       * Collision mask to assign to newly created collision components or a negative value if
       * collision components should not be created.
       */
      __publicField(this, "collisionMask", -1);
      /** Map of all planes and their last updated timestamps */
      __publicField(this, "planes", /* @__PURE__ */ new Map());
      /** Objects generated for each XRPlane */
      __publicField(this, "planeObjects", /* @__PURE__ */ new Map());
      /** Called when a plane starts tracking */
      __publicField(this, "onPlaneFound", new Emitter());
      /** Called when a plane stops tracking */
      __publicField(this, "onPlaneLost", new Emitter());
    }
    update() {
      if (!this.engine.xr?.frame)
        return;
      if (this.engine.xr.frame.detectedPlanes === void 0) {
        console.error("plane-detection: WebXR feature not available.");
        this.active = false;
        return;
      }
      const detectedPlanes = this.engine.xr.frame.detectedPlanes;
      for (const [plane, _] of this.planes) {
        if (!detectedPlanes.has(plane)) {
          __privateMethod(this, _planeLost, planeLost_fn).call(this, plane);
        }
      }
      detectedPlanes.forEach((plane) => {
        if (this.planes.has(plane)) {
          if (plane.lastChangedTime > this.planes.get(plane)) {
            __privateMethod(this, _planeUpdate, planeUpdate_fn).call(this, plane);
          }
        } else {
          __privateMethod(this, _planeFound, planeFound_fn).call(this, plane);
        }
        __privateMethod(this, _planeUpdatePose, planeUpdatePose_fn).call(this, plane);
      });
    }
  };
  _planeLost = new WeakSet();
  planeLost_fn = function(plane) {
    this.planes.delete(plane);
    const o = this.planeObjects.get(plane);
    this.onPlaneLost.notify(plane, o);
    if (o.objectId > 0)
      o.destroy();
  };
  _planeFound = new WeakSet();
  planeFound_fn = function(plane) {
    this.planes.set(plane, plane.lastChangedTime);
    const o = this.engine.scene.addObject(this.object);
    this.planeObjects.set(plane, o);
    if (this.planeMaterial) {
      o.addComponent(MeshComponent, {
        mesh: planeMeshFromContour(this.engine, plane.polygon),
        material: this.planeMaterial
      });
    }
    if (this.collisionMask >= 0) {
      extentsFromContour(tempVec32, plane.polygon);
      tempVec32[1] = 0.025;
      o.addComponent(CollisionComponent, {
        group: this.collisionMask,
        collider: Collider.Box,
        extents: tempVec32
      });
    }
    this.onPlaneFound.notify(plane, o);
  };
  _planeUpdate = new WeakSet();
  planeUpdate_fn = function(plane) {
    this.planes.set(plane, plane.lastChangedTime);
    const planeMesh = this.planeObjects.get(plane).getComponent(MeshComponent);
    if (!planeMesh)
      return;
    planeMeshFromContour(this.engine, plane.polygon, planeMesh.mesh);
  };
  _planeUpdatePose = new WeakSet();
  planeUpdatePose_fn = function(plane) {
    const o = this.planeObjects.get(plane);
    const pose = this.engine.xr.frame.getPose(plane.planeSpace, this.engine.xr.currentReferenceSpace);
    if (!pose) {
      o.active = false;
      return;
    }
    setXRRigidTransformLocal(o, pose.transform);
  };
  __publicField(PlaneDetection, "TypeName", "plane-detection");
  __decorate9([
    property.material()
  ], PlaneDetection.prototype, "planeMaterial", void 0);
  __decorate9([
    property.int()
  ], PlaneDetection.prototype, "collisionMask", void 0);

  // node_modules/@wonderlandengine/components/dist/vrm.js
  var VRM_ROLL_AXES = {
    X: [1, 0, 0],
    Y: [0, 1, 0],
    Z: [0, 0, 1]
  };
  var VRM_AIM_AXES = {
    PositiveX: [1, 0, 0],
    NegativeX: [-1, 0, 0],
    PositiveY: [0, 1, 0],
    NegativeY: [0, -1, 0],
    PositiveZ: [0, 0, 1],
    NegativeZ: [0, 0, -1]
  };
  var Vrm = class extends Component3 {
    /** Meta information about the VRM model */
    meta = null;
    /** The humanoid bones of the VRM model */
    bones = {
      /* Torso */
      hips: null,
      spine: null,
      chest: null,
      upperChest: null,
      neck: null,
      /* Head */
      head: null,
      leftEye: null,
      rightEye: null,
      jaw: null,
      /* Legs */
      leftUpperLeg: null,
      leftLowerLeg: null,
      leftFoot: null,
      leftToes: null,
      rightUpperLeg: null,
      rightLowerLeg: null,
      rightFoot: null,
      rightToes: null,
      /* Arms */
      leftShoulder: null,
      leftUpperArm: null,
      leftLowerArm: null,
      leftHand: null,
      rightShoulder: null,
      rightUpperArm: null,
      rightLowerArm: null,
      rightHand: null,
      /* Fingers */
      leftThumbMetacarpal: null,
      leftThumbProximal: null,
      leftThumbDistal: null,
      leftIndexProximal: null,
      leftIndexIntermediate: null,
      leftIndexDistal: null,
      leftMiddleProximal: null,
      leftMiddleIntermediate: null,
      leftMiddleDistal: null,
      leftRingProximal: null,
      leftRingIntermediate: null,
      leftRingDistal: null,
      leftLittleProximal: null,
      leftLittleIntermediate: null,
      leftLittleDistal: null,
      rightThumbMetacarpal: null,
      rightThumbProximal: null,
      rightThumbDistal: null,
      rightIndexProximal: null,
      rightIndexIntermediate: null,
      rightIndexDistal: null,
      rightMiddleProximal: null,
      rightMiddleIntermediate: null,
      rightMiddleDistal: null,
      rightRingProximal: null,
      rightRingIntermediate: null,
      rightRingDistal: null,
      rightLittleProximal: null,
      rightLittleIntermediate: null,
      rightLittleDistal: null
    };
    /** Rotations of the bones in the rest pose (T-pose) */
    restPose = {};
    /* All node constraints, ordered to deal with dependencies */
    _nodeConstraints = [];
    /* VRMC_springBone chains */
    _springChains = [];
    /* Spherical colliders for spring bones */
    _sphereColliders = [];
    /* Capsule shaped colliders for spring bones */
    _capsuleColliders = [];
    /* Indicates which meshes are rendered in first/third person views */
    _firstPersonAnnotations = [];
    /* Contains details for (bone type) lookAt behaviour */
    _lookAt = null;
    /* Whether or not the VRM component has been initialized with `initializeVrm` */
    _initialized = false;
    init() {
      this._tempV3 = vec3_exports.create();
      this._tempV3A = vec3_exports.create();
      this._tempV3B = vec3_exports.create();
      this._tempQuat = quat_exports.create();
      this._tempQuatA = quat_exports.create();
      this._tempQuatB = quat_exports.create();
      this._tempMat4A = mat4_exports.create();
      this._tempQuat2 = quat2_exports.create();
      this._tailToShape = vec3_exports.create();
      this._headToTail = vec3_exports.create();
      this._inertia = vec3_exports.create();
      this._stiffness = vec3_exports.create();
      this._external = vec3_exports.create();
      this._rightVector = vec3_exports.set(vec3_exports.create(), 1, 0, 0);
      this._upVector = vec3_exports.set(vec3_exports.create(), 0, 1, 0);
      this._forwardVector = vec3_exports.set(vec3_exports.create(), 0, 0, 1);
      this._identityQuat = quat_exports.identity(quat_exports.create());
      this._rad2deg = 180 / Math.PI;
    }
    start() {
      if (!this.src) {
        console.error("vrm: src property not set");
        return;
      }
      this.engine.scene.append(this.src, { loadGltfExtensions: true }).then(({ root, extensions }) => {
        root.children.forEach((child) => child.parent = this.object);
        this._initializeVrm(extensions);
        root.destroy();
      });
    }
    /**
     * Parses the VRM glTF extensions and initializes the vrm component.
     * @param {GLTFExtensions} extensions The glTF extensions for the VRM model
     */
    _initializeVrm(extensions) {
      if (this._initialized) {
        throw Error("VRM component has already been initialized");
      }
      const VRMC_vrm = extensions.root["VRMC_vrm"];
      if (!VRMC_vrm) {
        throw Error("Missing VRM extensions");
      }
      if (VRMC_vrm.specVersion !== "1.0") {
        throw Error(`Unsupported VRM version, only 1.0 is supported, but encountered '${VRMC_vrm.specVersion}'`);
      }
      this.meta = VRMC_vrm.meta;
      this._parseHumanoid(VRMC_vrm.humanoid, extensions);
      if (VRMC_vrm.firstPerson) {
        this._parseFirstPerson(VRMC_vrm.firstPerson, extensions);
      }
      if (VRMC_vrm.lookAt) {
        this._parseLookAt(VRMC_vrm.lookAt);
      }
      this._findAndParseNodeConstraints(extensions);
      const springBone = extensions.root["VRMC_springBone"];
      if (springBone) {
        this._parseAndInitializeSpringBones(springBone, extensions);
      }
      this._initialized = true;
    }
    _parseHumanoid(humanoid, extensions) {
      for (const boneName in humanoid.humanBones) {
        if (!(boneName in this.bones)) {
          console.warn(`Unrecognized bone '${boneName}'`);
          continue;
        }
        const node = humanoid.humanBones[boneName].node;
        const objectId = extensions.idMapping[node];
        this.bones[boneName] = this.engine.wrapObject(objectId);
        this.restPose[boneName] = quat_exports.copy(quat_exports.create(), this.bones[boneName].rotationLocal);
      }
    }
    _parseFirstPerson(firstPerson, extensions) {
      for (const meshAnnotation of firstPerson.meshAnnotations) {
        const annotation = {
          node: this.engine.wrapObject(extensions.idMapping[meshAnnotation.node]),
          firstPerson: true,
          thirdPerson: true
        };
        switch (meshAnnotation.type) {
          case "firstPersonOnly":
            annotation.thirdPerson = false;
            break;
          case "thirdPersonOnly":
            annotation.firstPerson = false;
            break;
          case "both":
            break;
          case "auto":
            console.warn("First person mesh annotation type 'auto' is not supported, treating as 'both'!");
            break;
          default:
            console.error(`Invalid mesh annotation type '${meshAnnotation.type}'`);
            break;
        }
        this._firstPersonAnnotations.push(annotation);
      }
    }
    _parseLookAt(lookAt2) {
      if (lookAt2.type !== "bone") {
        console.warn(`Unsupported lookAt type '${lookAt2.type}', only 'bone' is supported`);
        return;
      }
      const parseRangeMap = (rangeMap) => {
        return {
          inputMaxValue: rangeMap.inputMaxValue,
          outputScale: rangeMap.outputScale
        };
      };
      this._lookAt = {
        offsetFromHeadBone: lookAt2.offsetFromHeadBone || [0, 0, 0],
        horizontalInner: parseRangeMap(lookAt2.rangeMapHorizontalInner),
        horizontalOuter: parseRangeMap(lookAt2.rangeMapHorizontalOuter),
        verticalDown: parseRangeMap(lookAt2.rangeMapVerticalDown),
        verticalUp: parseRangeMap(lookAt2.rangeMapVerticalUp)
      };
    }
    _findAndParseNodeConstraints(extensions) {
      const traverse = (object) => {
        const nodeExtensions = extensions.node[object.objectId];
        if (nodeExtensions && "VRMC_node_constraint" in nodeExtensions) {
          const nodeConstraintExtension = nodeExtensions["VRMC_node_constraint"];
          const constraint = nodeConstraintExtension.constraint;
          let type, axis;
          if ("roll" in constraint) {
            type = "roll";
            axis = VRM_ROLL_AXES[constraint.roll.rollAxis];
          } else if ("aim" in constraint) {
            type = "aim";
            axis = VRM_AIM_AXES[constraint.aim.aimAxis];
          } else if ("rotation" in constraint) {
            type = "rotation";
          }
          if (type) {
            const source = this.engine.wrapObject(extensions.idMapping[constraint[type].source]);
            this._nodeConstraints.push({
              type,
              source,
              destination: object,
              axis,
              weight: constraint[type].weight,
              /* Rest pose */
              destinationRestLocalRotation: quat_exports.copy(quat_exports.create(), object.rotationLocal),
              sourceRestLocalRotation: quat_exports.copy(quat_exports.create(), source.rotationLocal),
              sourceRestLocalRotationInv: quat_exports.invert(quat_exports.create(), source.rotationLocal)
            });
          } else {
            console.warn("Unrecognized or invalid VRMC_node_constraint, ignoring it");
          }
        }
        for (const child of object.children) {
          traverse(child);
        }
      };
      traverse(this.object);
    }
    _parseAndInitializeSpringBones(springBone, extensions) {
      const colliders = (springBone.colliders || []).map((collider, i) => {
        const shapeType = "capsule" in collider.shape ? "capsule" : "sphere";
        return {
          id: i,
          object: this.engine.wrapObject(extensions.idMapping[collider.node]),
          shape: {
            isCapsule: shapeType === "capsule",
            radius: collider.shape[shapeType].radius,
            offset: collider.shape[shapeType].offset,
            tail: collider.shape[shapeType].tail
          },
          cache: {
            head: vec3_exports.create(),
            tail: vec3_exports.create()
          }
        };
      });
      this._sphereColliders = colliders.filter((c) => !c.shape.isCapsule);
      this._capsuleColliders = colliders.filter((c) => c.shape.isCapsule);
      const colliderGroups = (springBone.colliderGroups || []).map((group) => ({
        name: group.name,
        colliders: group.colliders.map((c) => colliders[c])
      }));
      for (const spring of springBone.springs) {
        const joints = [];
        for (const joint of spring.joints) {
          const springJoint = {
            hitRadius: 0,
            stiffness: 1,
            gravityPower: 0,
            gravityDir: [0, -1, 0],
            dragForce: 0.5,
            node: null,
            state: null
          };
          Object.assign(springJoint, joint);
          springJoint.node = this.engine.wrapObject(extensions.idMapping[springJoint.node]);
          joints.push(springJoint);
        }
        const springChainColliders = (spring.colliderGroups || []).flatMap((cg) => colliderGroups[cg].colliders);
        this._springChains.push({
          name: spring.name,
          center: spring.center ? this.engine.wrapObject(extensions.idMapping[spring.center]) : null,
          joints,
          sphereColliders: springChainColliders.filter((c) => !c.shape.isCapsule),
          capsuleColliders: springChainColliders.filter((c) => c.shape.isCapsule)
        });
      }
      for (const springChain of this._springChains) {
        for (let i = 0; i < springChain.joints.length - 1; ++i) {
          const springBoneJoint = springChain.joints[i];
          const childSpringBoneJoint = springChain.joints[i + 1];
          const springBonePosition = springBoneJoint.node.getTranslationWorld(vec3_exports.create());
          const childSpringBonePosition = childSpringBoneJoint.node.getTranslationWorld(vec3_exports.create());
          const boneDirection = vec3_exports.subtract(this._tempV3A, springBonePosition, childSpringBonePosition);
          const state = {
            prevTail: childSpringBonePosition,
            currentTail: vec3_exports.copy(vec3_exports.create(), childSpringBonePosition),
            initialLocalRotation: quat_exports.copy(quat_exports.create(), springBoneJoint.node.rotationLocal),
            initialLocalTransformInvert: quat2_exports.invert(quat2_exports.create(), springBoneJoint.node.transformLocal),
            boneAxis: vec3_exports.normalize(vec3_exports.create(), childSpringBoneJoint.node.getTranslationLocal(this._tempV3)),
            /* Ensure bone length is at least 1cm to avoid jittery behaviour from zero-length bones */
            boneLength: Math.max(0.01, vec3_exports.length(boneDirection)),
            /* Tail positions in center space, if needed */
            prevTailCenter: null,
            currentTailCenter: null
          };
          if (springChain.center) {
            state.prevTailCenter = springChain.center.transformPointInverseWorld(vec3_exports.create(), childSpringBonePosition);
            state.currentTailCenter = vec3_exports.copy(vec3_exports.create(), childSpringBonePosition);
          }
          springBoneJoint.state = state;
        }
      }
    }
    update(dt) {
      if (!this._initialized) {
        return;
      }
      this._resolveLookAt();
      this._resolveConstraints();
      this._updateSpringBones(dt);
    }
    _rangeMap(rangeMap, input) {
      const maxValue = rangeMap.inputMaxValue;
      const outputScale = rangeMap.outputScale;
      return Math.min(input, maxValue) / maxValue * outputScale;
    }
    _resolveLookAt() {
      if (!this._lookAt || !this.lookAtTarget) {
        return;
      }
      const lookAtSource = this.bones.head.transformPointWorld(this._tempV3A, this._lookAt.offsetFromHeadBone);
      const lookAtTarget = this.lookAtTarget.getTranslationWorld(this._tempV3B);
      const lookAtDirection = vec3_exports.sub(this._tempV3A, lookAtTarget, lookAtSource);
      vec3_exports.normalize(lookAtDirection, lookAtDirection);
      this.bones.head.parent.transformVectorInverseWorld(lookAtDirection);
      const z = vec3_exports.dot(lookAtDirection, this._forwardVector);
      const x = vec3_exports.dot(lookAtDirection, this._rightVector);
      const yaw = Math.atan2(x, z) * this._rad2deg;
      const xz = Math.sqrt(x * x + z * z);
      const y = vec3_exports.dot(lookAtDirection, this._upVector);
      let pitch = Math.atan2(-y, xz) * this._rad2deg;
      if (pitch > 0) {
        pitch = this._rangeMap(this._lookAt.verticalDown, pitch);
      } else {
        pitch = -this._rangeMap(this._lookAt.verticalUp, -pitch);
      }
      if (this.bones.leftEye) {
        let yawLeft = yaw;
        if (yawLeft > 0) {
          yawLeft = this._rangeMap(this._lookAt.horizontalInner, yawLeft);
        } else {
          yawLeft = -this._rangeMap(this._lookAt.horizontalOuter, -yawLeft);
        }
        const eyeRotation = quat_exports.fromEuler(this._tempQuatA, pitch, yawLeft, 0);
        this.bones.leftEye.rotationLocal = quat_exports.multiply(eyeRotation, this.restPose.leftEye, eyeRotation);
      }
      if (this.bones.rightEye) {
        let yawRight = yaw;
        if (yawRight > 0) {
          yawRight = this._rangeMap(this._lookAt.horizontalOuter, yawRight);
        } else {
          yawRight = -this._rangeMap(this._lookAt.horizontalInner, -yawRight);
        }
        const eyeRotation = quat_exports.fromEuler(this._tempQuatA, pitch, yawRight, 0);
        this.bones.rightEye.rotationLocal = quat_exports.multiply(eyeRotation, this.restPose.rightEye, eyeRotation);
      }
    }
    _resolveConstraints() {
      for (const nodeConstraint of this._nodeConstraints) {
        this._resolveConstraint(nodeConstraint);
      }
    }
    _resolveConstraint(nodeConstraint) {
      const dstRestQuat = nodeConstraint.destinationRestLocalRotation;
      const srcRestQuatInv = nodeConstraint.sourceRestLocalRotationInv;
      const targetQuat = quat_exports.identity(this._tempQuatA);
      switch (nodeConstraint.type) {
        case "roll":
          {
            const deltaSrcQuat = quat_exports.multiply(this._tempQuatA, srcRestQuatInv, nodeConstraint.source.rotationLocal);
            const deltaSrcQuatInParent = quat_exports.multiply(this._tempQuatA, nodeConstraint.sourceRestLocalRotation, deltaSrcQuat);
            quat_exports.mul(deltaSrcQuatInParent, deltaSrcQuatInParent, srcRestQuatInv);
            const dstRestQuatInv = quat_exports.invert(this._tempQuatB, dstRestQuat);
            const deltaSrcQuatInDst = quat_exports.multiply(this._tempQuatB, dstRestQuatInv, deltaSrcQuatInParent);
            quat_exports.multiply(deltaSrcQuatInDst, deltaSrcQuatInDst, dstRestQuat);
            const toVec = vec3_exports.transformQuat(this._tempV3A, nodeConstraint.axis, deltaSrcQuatInDst);
            const fromToQuat = quat_exports.rotationTo(this._tempQuatA, nodeConstraint.axis, toVec);
            quat_exports.mul(targetQuat, dstRestQuat, quat_exports.invert(this._tempQuat, fromToQuat));
            quat_exports.mul(targetQuat, targetQuat, deltaSrcQuatInDst);
          }
          break;
        case "aim":
          {
            const dstParentWorldQuat = nodeConstraint.destination.parent.rotationWorld;
            const fromVec = vec3_exports.transformQuat(this._tempV3A, nodeConstraint.axis, dstRestQuat);
            vec3_exports.transformQuat(fromVec, fromVec, dstParentWorldQuat);
            const toVec = nodeConstraint.source.getTranslationWorld(this._tempV3B);
            vec3_exports.sub(toVec, toVec, nodeConstraint.destination.getTranslationWorld(this._tempV3));
            vec3_exports.normalize(toVec, toVec);
            const fromToQuat = quat_exports.rotationTo(this._tempQuatA, fromVec, toVec);
            quat_exports.mul(targetQuat, quat_exports.invert(this._tempQuat, dstParentWorldQuat), fromToQuat);
            quat_exports.mul(targetQuat, targetQuat, dstParentWorldQuat);
            quat_exports.mul(targetQuat, targetQuat, dstRestQuat);
          }
          break;
        case "rotation":
          {
            const srcDeltaQuat = quat_exports.mul(targetQuat, srcRestQuatInv, nodeConstraint.source.rotationLocal);
            quat_exports.mul(targetQuat, dstRestQuat, srcDeltaQuat);
          }
          break;
      }
      quat_exports.slerp(targetQuat, dstRestQuat, targetQuat, nodeConstraint.weight);
      nodeConstraint.destination.rotationLocal = targetQuat;
    }
    _updateSpringBones(dt) {
      this._sphereColliders.forEach(({ object, shape, cache }) => {
        const offset2 = vec3_exports.copy(cache.head, shape.offset);
        object.transformVectorWorld(offset2);
        vec3_exports.add(cache.head, object.getTranslationWorld(this._tempV3), offset2);
      });
      this._capsuleColliders.forEach(({ object, shape, cache }) => {
        const shapeCenter = object.getTranslationWorld(this._tempV3A);
        const headOffset = vec3_exports.copy(cache.head, shape.offset);
        object.transformVectorWorld(headOffset);
        vec3_exports.add(cache.head, shapeCenter, headOffset);
        const tailOffset = vec3_exports.copy(cache.tail, shape.tail);
        object.transformVectorWorld(tailOffset);
        vec3_exports.add(cache.tail, shapeCenter, tailOffset);
      });
      this._springChains.forEach((springChain) => {
        for (let i = 0; i < springChain.joints.length - 1; ++i) {
          const joint = springChain.joints[i];
          const parentWorldRotation = joint.node.parent ? joint.node.parent.rotationWorld : this._identityQuat;
          const inertia = this._inertia;
          if (springChain.center) {
            vec3_exports.sub(inertia, joint.state.currentTailCenter, joint.state.prevTailCenter);
            springChain.center.transformVectorWorld(inertia);
          } else {
            vec3_exports.sub(inertia, joint.state.currentTail, joint.state.prevTail);
          }
          vec3_exports.scale(inertia, inertia, 1 - joint.dragForce);
          const stiffness = vec3_exports.copy(this._stiffness, joint.state.boneAxis);
          vec3_exports.transformQuat(stiffness, stiffness, joint.state.initialLocalRotation);
          vec3_exports.transformQuat(stiffness, stiffness, parentWorldRotation);
          vec3_exports.scale(stiffness, stiffness, dt * joint.stiffness);
          const external = vec3_exports.scale(this._external, joint.gravityDir, dt * joint.gravityPower);
          const nextTail = vec3_exports.copy(this._tempV3A, joint.state.currentTail);
          vec3_exports.add(nextTail, nextTail, inertia);
          vec3_exports.add(nextTail, nextTail, stiffness);
          vec3_exports.add(nextTail, nextTail, external);
          const worldPosition = joint.node.getTranslationWorld(this._tempV3B);
          vec3_exports.sub(nextTail, nextTail, worldPosition);
          vec3_exports.normalize(nextTail, nextTail);
          vec3_exports.scaleAndAdd(nextTail, worldPosition, nextTail, joint.state.boneLength);
          for (const { shape, cache } of springChain.sphereColliders) {
            let tailToShape = this._tailToShape;
            const sphereCenter = cache.head;
            tailToShape = vec3_exports.sub(tailToShape, nextTail, sphereCenter);
            const radius = shape.radius + joint.hitRadius;
            const dist2 = vec3_exports.length(tailToShape) - radius;
            if (dist2 < 0) {
              vec3_exports.normalize(tailToShape, tailToShape);
              vec3_exports.scaleAndAdd(nextTail, nextTail, tailToShape, -dist2);
              vec3_exports.sub(nextTail, nextTail, worldPosition);
              vec3_exports.normalize(nextTail, nextTail);
              vec3_exports.scaleAndAdd(nextTail, worldPosition, nextTail, joint.state.boneLength);
            }
          }
          for (const { shape, cache } of springChain.capsuleColliders) {
            let tailToShape = this._tailToShape;
            const head = cache.head;
            const tail = cache.tail;
            tailToShape = vec3_exports.sub(tailToShape, nextTail, head);
            const headToTail = vec3_exports.sub(this._headToTail, tail, head);
            const dot5 = vec3_exports.dot(headToTail, tailToShape);
            if (vec3_exports.squaredLength(headToTail) <= dot5) {
              vec3_exports.sub(tailToShape, nextTail, tail);
            } else if (dot5 > 0) {
              vec3_exports.scale(headToTail, headToTail, dot5 / vec3_exports.squaredLength(headToTail));
              vec3_exports.sub(tailToShape, tailToShape, headToTail);
            }
            const radius = shape.radius + joint.hitRadius;
            const dist2 = vec3_exports.length(tailToShape) - radius;
            if (dist2 < 0) {
              vec3_exports.normalize(tailToShape, tailToShape);
              vec3_exports.scaleAndAdd(nextTail, nextTail, tailToShape, -dist2);
              vec3_exports.sub(nextTail, nextTail, worldPosition);
              vec3_exports.normalize(nextTail, nextTail);
              vec3_exports.scaleAndAdd(nextTail, worldPosition, nextTail, joint.state.boneLength);
            }
          }
          vec3_exports.copy(joint.state.prevTail, joint.state.currentTail);
          vec3_exports.copy(joint.state.currentTail, nextTail);
          if (springChain.center) {
            vec3_exports.copy(joint.state.prevTailCenter, joint.state.currentTailCenter);
            vec3_exports.copy(joint.state.currentTailCenter, nextTail);
            springChain.center.transformPointInverseWorld(joint.state.currentTailCenter);
          }
          joint.node.parent.transformPointInverseWorld(nextTail);
          const nextTailDualQuat = quat2_exports.fromTranslation(this._tempQuat2, nextTail);
          quat2_exports.multiply(nextTailDualQuat, joint.state.initialLocalTransformInvert, nextTailDualQuat);
          quat2_exports.getTranslation(nextTail, nextTailDualQuat);
          vec3_exports.normalize(nextTail, nextTail);
          const jointRotation = quat_exports.rotationTo(this._tempQuatA, joint.state.boneAxis, nextTail);
          joint.node.rotationLocal = quat_exports.mul(this._tempQuatA, joint.state.initialLocalRotation, jointRotation);
        }
      });
    }
    /**
     * @param {boolean} firstPerson Whether the model should render for first person or third person views
     */
    set firstPerson(firstPerson) {
      this._firstPersonAnnotations.forEach((annotation) => {
        const visible = firstPerson == annotation.firstPerson || firstPerson != annotation.thirdPerson;
        annotation.node.getComponents("mesh").forEach((mesh) => {
          mesh.active = visible;
        });
      });
    }
  };
  __publicField(Vrm, "TypeName", "vrm");
  __publicField(Vrm, "Properties", {
    /** URL to a VRM file to load */
    src: { type: Type.String },
    /** Object the VRM is looking at */
    lookAtTarget: { type: Type.Object }
  });

  // node_modules/@wonderlandengine/components/dist/wasd-controls.js
  var _direction = new Float32Array(3);
  var WasdControlsComponent = class extends Component3 {
    init() {
      this.up = false;
      this.right = false;
      this.down = false;
      this.left = false;
      window.addEventListener("keydown", this.press.bind(this));
      window.addEventListener("keyup", this.release.bind(this));
    }
    start() {
      this.headObject = this.headObject || this.object;
    }
    update() {
      vec3_exports.zero(_direction);
      if (this.up)
        _direction[2] -= 1;
      if (this.down)
        _direction[2] += 1;
      if (this.left)
        _direction[0] -= 1;
      if (this.right)
        _direction[0] += 1;
      vec3_exports.normalize(_direction, _direction);
      _direction[0] *= this.speed;
      _direction[2] *= this.speed;
      vec3_exports.transformQuat(_direction, _direction, this.headObject.transformWorld);
      if (this.lockY) {
        _direction[1] = 0;
        vec3_exports.normalize(_direction, _direction);
        vec3_exports.scale(_direction, _direction, this.speed);
      }
      this.object.translateLocal(_direction);
    }
    press(e) {
      if (e.keyCode === 38 || e.keyCode === 87 || e.keyCode === 90) {
        this.up = true;
      } else if (e.keyCode === 39 || e.keyCode === 68) {
        this.right = true;
      } else if (e.keyCode === 40 || e.keyCode === 83) {
        this.down = true;
      } else if (e.keyCode === 37 || e.keyCode === 65 || e.keyCode === 81) {
        this.left = true;
      }
    }
    release(e) {
      if (e.keyCode === 38 || e.keyCode === 87 || e.keyCode === 90) {
        this.up = false;
      } else if (e.keyCode === 39 || e.keyCode === 68) {
        this.right = false;
      } else if (e.keyCode === 40 || e.keyCode === 83) {
        this.down = false;
      } else if (e.keyCode === 37 || e.keyCode === 65 || e.keyCode === 81) {
        this.left = false;
      }
    }
  };
  __publicField(WasdControlsComponent, "TypeName", "wasd-controls");
  __publicField(WasdControlsComponent, "Properties", {
    /** Movement speed in m/s. */
    speed: { type: Type.Float, default: 0.1 },
    /** Flag for only moving the object on the global x & z planes */
    lockY: { type: Type.Bool, default: false },
    /** Object of which the orientation is used to determine forward direction */
    headObject: { type: Type.Object }
  });

  // node_modules/@wonderlandengine/components/dist/input-profile.js
  var __decorate10 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var _tempVec = vec3_exports.create();
  var _tempQuat = quat_exports.create();
  var _tempRotation1 = new Float32Array(4);
  var _tempRotation2 = new Float32Array(4);
  var minTemp = new Float32Array(3);
  var maxTemp = new Float32Array(3);
  var hands = ["left", "right"];
  var _InputProfile = class extends Component3 {
    _gamepadObjects = {};
    _controllerModel = null;
    _defaultControllerComponents;
    _handedness;
    _profileJSON = null;
    _buttons = [];
    _axes = [];
    /**
     * The XR gamepad associated with the current input source.
     */
    gamepad;
    /**
     * A reference to the emitter which triggered on model lodaed event.
     */
    onModelLoaded = new Emitter();
    /**
     * Returns url of input profile json file
     */
    url;
    /**
     * A set of components to filter during component retrieval.
     */
    toFilter = /* @__PURE__ */ new Set(["vr-mode-active-mode-switch"]);
    /**
     * The index representing the handedness of the controller (0 for left, 1 for right).
     */
    handedness = 0;
    /**
     * The base path where XR input profiles are stored.
     */
    defaultBasePath;
    /**
     * An optional folder path for loading custom XR input profiles.
     */
    customBasePath;
    /**
     * The default 3D controller model used when a custom model fails to load.
     */
    defaultController;
    /**
     * The object which has HandTracking component added to it.
     */
    trackedHand;
    /**
     * If true, the input profile will be mapped to the default controller, and no dynamic 3D model of controller will be loaded.
     */
    mapToDefaultController;
    /**
     * If true, adds a VR mode switch component to the loaded controller model.
     */
    addVrModeSwitch;
    onActivate() {
      this._handedness = hands[this.handedness];
      const defaultHandName = "Hand" + this._handedness.charAt(0).toUpperCase() + this._handedness.slice(1);
      this.trackedHand = this.trackedHand ?? this.object.parent?.findByNameRecursive(defaultHandName)[0];
      this.defaultController = this.defaultController || this.object.children[0];
      this._defaultControllerComponents = this._getComponents(this.defaultController);
      this.engine.onXRSessionStart.add(() => {
        this.engine.xr?.session.addEventListener("inputsourceschange", this._onInputSourcesChange.bind(this));
      });
    }
    onDeactivate() {
      this.engine.xr?.session?.removeEventListener("inputsourceschange", this._onInputSourcesChange.bind(this));
    }
    /**
     * Sets newly loaded controllers for the HandTracking component to proper switching.
     * @param controllerObject The controller object.
     * @hidden
     */
    _setHandTrackingControllers(controllerObject) {
      const handtrackingComponent = this.trackedHand.getComponent(HandTracking);
      if (!handtrackingComponent)
        return;
      handtrackingComponent.controllerToDeactivate = controllerObject;
    }
    /**
     * Retrieves all components from the specified object and its children.
     * @param obj The object to retrieve components from.
     * @return An array of components.
     * @hidden
     */
    _getComponents(obj) {
      const components = [];
      if (obj == null)
        return components;
      const stack = [obj];
      while (stack.length > 0) {
        const currentObj = stack.pop();
        const comps = currentObj.getComponents().filter((c) => !this.toFilter.has(c.type));
        components.push(...comps);
        const children = currentObj.children;
        for (let i = children.length - 1; i >= 0; --i) {
          stack.push(children[i]);
        }
      }
      return components;
    }
    /**
     * Activates or deactivates components based on the specified boolean value.
     * @param active If true, components are set to active; otherwise, they are set to inactive.
     * @hidden
     */
    _setComponentsActive(active) {
      const comps = this._defaultControllerComponents;
      if (comps == void 0)
        return;
      for (let i = 0; i < comps.length; ++i) {
        comps[i].active = active;
      }
    }
    /**
     * Event handler triggered when XR input sources change.
     * Detects new XR input sources and initiates the loading of input profiles.
     * @param event The XR input source change event.
     * @hidden
     */
    _onInputSourcesChange(event) {
      if (this._isModelLoaded() && !this.mapToDefaultController) {
        this._setComponentsActive(false);
      }
      event.added.forEach((xrInputSource) => {
        if (xrInputSource.hand != null)
          return;
        if (this._handedness != xrInputSource.handedness)
          return;
        this.gamepad = xrInputSource.gamepad;
        const profile = this.customBasePath !== "" ? this.customBasePath : this.defaultBasePath + xrInputSource.profiles[0];
        this.url = profile + "/profile.json";
        this._profileJSON = _InputProfile.Cache.get(this.url) ?? null;
        if (this._profileJSON != null)
          return;
        fetch(this.url).then((res) => res.json()).then((out) => {
          this._profileJSON = out;
          _InputProfile.Cache.set(this.url, this._profileJSON);
          if (!this._isModelLoaded())
            this._loadAndMapGamepad(profile);
        }).catch((e) => {
          console.error(`Failed to load profile from ${this.url}. Reason:`, e);
        });
      });
    }
    /**
     * Checks if the 3D controller model is loaded.
     * @return True if the model is loaded; otherwise, false.
     * @hidden
     */
    _isModelLoaded() {
      return this._controllerModel !== null;
    }
    /**
     * Loads the 3D controller model and caches the mapping to the gamepad.
     * @param profile The path to the input profile.
     * @hidden
     */
    async _loadAndMapGamepad(profile) {
      const assetPath = profile + "/" + this._handedness + ".glb";
      this._controllerModel = this.defaultController;
      if (!this.mapToDefaultController) {
        try {
          this._controllerModel = await this.engine.scene.append(assetPath);
        } catch (e) {
          console.error(`Failed to load i-p controller model. Reason:`, e, `Continuing with ${this._handedness} default controller.`);
          this._setComponentsActive(true);
        }
        this._controllerModel.parent = this.object;
        this._controllerModel.setPositionLocal([0, 0, 0]);
        this._setComponentsActive(false);
        if (this.addVrModeSwitch)
          this._controllerModel.addComponent(VrModeActiveSwitch);
        this.onModelLoaded.notify();
      }
      this._cacheGamepadObjectsFromProfile(this._profileJSON, this._controllerModel);
      this._setHandTrackingControllers(this._controllerModel);
      this.update = () => this._mapGamepadInput();
    }
    /**
     * Caches gamepad objects (buttons, axes) from the loaded input profile.
     * @hidden
     */
    _cacheGamepadObjectsFromProfile(profile, obj) {
      const components = profile.layouts[this._handedness].components;
      if (!components)
        return;
      this._buttons = [];
      this._axes = [];
      for (const i in components) {
        const visualResponses = components[i].visualResponses;
        for (const j in visualResponses) {
          const visualResponse = visualResponses[j];
          const valueNode = visualResponse.valueNodeName;
          const minNode = visualResponse.minNodeName;
          const maxNode = visualResponse.maxNodeName;
          this._gamepadObjects[valueNode] = obj.findByNameRecursive(valueNode)[0];
          this._gamepadObjects[minNode] = obj.findByNameRecursive(minNode)[0];
          this._gamepadObjects[maxNode] = obj.findByNameRecursive(maxNode)[0];
          const indice = visualResponses[j].componentProperty;
          const response = {
            target: this._gamepadObjects[valueNode],
            min: this._gamepadObjects[minNode],
            max: this._gamepadObjects[maxNode],
            id: components[i].gamepadIndices[indice]
            // Assign a unique ID
          };
          switch (indice) {
            case "button":
              this._buttons.push(response);
              break;
            case "xAxis":
            case "yAxis":
              this._axes.push(response);
              break;
          }
        }
      }
    }
    /**
     * Assigns a transformed position and rotation to the target based on minimum and maximum values and a normalized input value.
     * @param target The target object to be transformed.
     * @param min The minimum object providing transformation limits.
     * @param max The maximum object providing transformation limits.
     * @param value The normalized input value.
     * @hidden
     */
    _assignTransform(target, min2, max2, value) {
      vec3_exports.lerp(_tempVec, min2.getPositionWorld(minTemp), max2.getPositionWorld(maxTemp), value);
      target.setPositionWorld(_tempVec);
      quat_exports.lerp(_tempQuat, min2.getRotationWorld(_tempRotation1), max2.getRotationWorld(_tempRotation2), value);
      quat_exports.normalize(_tempQuat, _tempQuat);
      target.setRotationWorld(_tempQuat);
    }
    /**
     * Maps input values (buttons, axes) to the 3D controller model.
     * @hidden
     */
    _mapGamepadInput() {
      for (const button of this._buttons) {
        const buttonValue = this.gamepad.buttons[button.id].value;
        this._assignTransform(button.target, button.min, button.max, buttonValue);
      }
      for (const axis of this._axes) {
        const axisValue = this.gamepad.axes[axis.id];
        const normalizedAxisValue = (axisValue + 1) / 2;
        this._assignTransform(axis.target, axis.min, axis.max, normalizedAxisValue);
      }
    }
  };
  var InputProfile = _InputProfile;
  __publicField(InputProfile, "TypeName", "input-profile");
  /**
   * A cache to store loaded profiles for reuse.
   */
  __publicField(InputProfile, "Cache", /* @__PURE__ */ new Map());
  __decorate10([
    property.enum(hands, 0)
  ], InputProfile.prototype, "handedness", void 0);
  __decorate10([
    property.string("https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@latest/dist/profiles/")
  ], InputProfile.prototype, "defaultBasePath", void 0);
  __decorate10([
    property.string()
  ], InputProfile.prototype, "customBasePath", void 0);
  __decorate10([
    property.object()
  ], InputProfile.prototype, "defaultController", void 0);
  __decorate10([
    property.object()
  ], InputProfile.prototype, "trackedHand", void 0);
  __decorate10([
    property.bool(false)
  ], InputProfile.prototype, "mapToDefaultController", void 0);
  __decorate10([
    property.bool(true)
  ], InputProfile.prototype, "addVrModeSwitch", void 0);

  // node_modules/@wonderlandengine/components/dist/orbital-camera.js
  var __decorate11 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i = decorators.length - 1; i >= 0; i--)
        if (d = decorators[i])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var preventDefault2 = (e) => {
    e.preventDefault();
  };
  var tempVec4 = [0, 0, 0];
  var tempquat = quat_exports.create();
  var tempquat2 = quat_exports.create();
  var tempVec33 = vec3_exports.create();
  var OrbitalCamera = class extends Component3 {
    mouseButtonIndex = 0;
    radial = 5;
    minElevation = 0;
    maxElevation = 89.99;
    minZoom = 0.01;
    maxZoom = 10;
    xSensitivity = 0.5;
    ySensitivity = 0.5;
    zoomSensitivity = 0.02;
    damping = 0.9;
    _mouseDown = false;
    _origin = [0, 0, 0];
    _azimuth = 0;
    _polar = 45;
    _initialPinchDistance = 0;
    _touchStartX = 0;
    _touchStartY = 0;
    _azimuthSpeed = 0;
    _polarSpeed = 0;
    init() {
      this.object.getPositionWorld(this._origin);
    }
    start() {
      this._updateCamera();
    }
    onActivate() {
      const canvas2 = this.engine.canvas;
      if (this.mouseButtonIndex === 2) {
        canvas2.addEventListener("contextmenu", preventDefault2, { passive: false });
      }
      canvas2.addEventListener("mousedown", this._onMouseDown);
      canvas2.addEventListener("wheel", this._onMouseScroll, { passive: false });
      canvas2.addEventListener("touchstart", this._onTouchStart, { passive: false });
      canvas2.addEventListener("touchmove", this._onTouchMove, { passive: false });
      canvas2.addEventListener("touchend", this._onTouchEnd);
    }
    onDeactivate() {
      const canvas2 = this.engine.canvas;
      if (this.mouseButtonIndex === 2) {
        canvas2.removeEventListener("contextmenu", preventDefault2);
      }
      canvas2.removeEventListener("mousemove", this._onMouseMove);
      canvas2.removeEventListener("mousedown", this._onMouseDown);
      canvas2.removeEventListener("wheel", this._onMouseScroll);
      canvas2.removeEventListener("touchstart", this._onTouchStart);
      canvas2.removeEventListener("touchmove", this._onTouchMove);
      canvas2.removeEventListener("touchend", this._onTouchEnd);
      this._mouseDown = false;
      this._initialPinchDistance = 0;
      this._touchStartX = 0;
      this._touchStartY = 0;
      this._azimuthSpeed = 0;
      this._polarSpeed = 0;
    }
    update() {
      this._azimuthSpeed *= this.damping;
      this._polarSpeed *= this.damping;
      if (Math.abs(this._azimuthSpeed) < 0.01)
        this._azimuthSpeed = 0;
      if (Math.abs(this._polarSpeed) < 0.01)
        this._polarSpeed = 0;
      this._azimuth += this._azimuthSpeed;
      this._polar += this._polarSpeed;
      this._polar = Math.min(this.maxElevation, Math.max(this.minElevation, this._polar));
      if (this._azimuthSpeed !== 0 || this._polarSpeed !== 0) {
        this._updateCamera();
      }
    }
    /**
     * Get the closest position to the given position on the orbit sphere of the camera.
     * This can be used to get a position and rotation to transition to.
     *
     * You pass this a position object. The method calculates the closest positition and updates the position parameter.
     * It also sets the rotation parameter to reflect the rotate the camera will have when it is on the orbit sphere,
     * pointing towards the center.
     * @param position the position to get the closest position to
     * @param rotation the rotation to get the closest position to
     */
    getClosestPosition(position, rotation) {
      this.object.getRotationWorld(tempquat);
      this.object.lookAt(this._origin);
      this.object.getRotationWorld(tempquat2);
      if (quat_exports.dot(tempquat, tempquat2) < 0) {
        quat_exports.scale(tempquat2, tempquat2, -1);
      }
      this.object.setRotationWorld(tempquat);
      const directionToCamera = vec3_exports.create();
      vec3_exports.subtract(directionToCamera, position, this._origin);
      vec3_exports.normalize(directionToCamera, directionToCamera);
      const nearestPointOnSphere = vec3_exports.create();
      vec3_exports.scale(nearestPointOnSphere, directionToCamera, this.radial);
      vec3_exports.add(nearestPointOnSphere, nearestPointOnSphere, this._origin);
      vec3_exports.copy(position, nearestPointOnSphere);
      quat_exports.copy(rotation, tempquat2);
    }
    /**
     * Set the camera position based on the given position and calculate the rotation.
     * @param cameraPosition the position to set the camera to
     */
    setPosition(cameraPosition) {
      const centerOfOrbit = this._origin;
      vec3_exports.subtract(tempVec33, cameraPosition, centerOfOrbit);
      vec3_exports.normalize(tempVec33, tempVec33);
      const azimuth = Math.atan2(tempVec33[0], tempVec33[2]);
      const polar = Math.acos(tempVec33[1]);
      const azimuthDeg = rad2deg(azimuth);
      const polarDeg = 90 - rad2deg(polar);
      this._azimuth = azimuthDeg;
      this._polar = polarDeg;
    }
    /**
     * Update the camera position based on the current azimuth,
     * polar and radial values
     */
    _updateCamera() {
      const azimuthInRadians = deg2rad(this._azimuth);
      const polarInRadians = deg2rad(this._polar);
      tempVec4[0] = this.radial * Math.sin(azimuthInRadians) * Math.cos(polarInRadians);
      tempVec4[1] = this.radial * Math.sin(polarInRadians);
      tempVec4[2] = this.radial * Math.cos(azimuthInRadians) * Math.cos(polarInRadians);
      this.object.setPositionWorld(tempVec4);
      this.object.translateWorld(this._origin);
      this.object.lookAt(this._origin);
    }
    /* Mouse Event Handlers */
    _onMouseDown = (e) => {
      window.addEventListener("mouseup", this._onMouseUp);
      window.addEventListener("mousemove", this._onMouseMove);
      if (e.button === this.mouseButtonIndex) {
        this._mouseDown = true;
        document.body.style.cursor = "grabbing";
        if (e.button === 1) {
          e.preventDefault();
          return false;
        }
      }
    };
    _onMouseUp = (e) => {
      window.removeEventListener("mouseup", this._onMouseUp);
      window.removeEventListener("mousemove", this._onMouseMove);
      if (e.button === this.mouseButtonIndex) {
        this._mouseDown = false;
        document.body.style.cursor = "initial";
      }
    };
    _onMouseMove = (e) => {
      if (this.active && this._mouseDown) {
        if (this.active && this._mouseDown) {
          this._azimuthSpeed = -(e.movementX * this.xSensitivity);
          this._polarSpeed = e.movementY * this.ySensitivity;
        }
      }
    };
    _onMouseScroll = (e) => {
      e.preventDefault();
      this.radial *= 1 - e.deltaY * this.zoomSensitivity * -1e-3;
      this.radial = Math.min(this.maxZoom, Math.max(this.minZoom, this.radial));
      this._updateCamera();
    };
    /* Touch event handlers */
    _onTouchStart = (e) => {
      if (e.touches.length === 1) {
        e.preventDefault();
        this._touchStartX = e.touches[0].clientX;
        this._touchStartY = e.touches[0].clientY;
        this._mouseDown = true;
      } else if (e.touches.length === 2) {
        this._initialPinchDistance = this._getDistanceBetweenTouches(e.touches);
        e.preventDefault();
      }
    };
    _onTouchMove = (e) => {
      if (!this.active || !this._mouseDown) {
        return;
      }
      e.preventDefault();
      if (e.touches.length === 1) {
        const deltaX = e.touches[0].clientX - this._touchStartX;
        const deltaY = e.touches[0].clientY - this._touchStartY;
        this._azimuthSpeed = -(deltaX * this.xSensitivity);
        this._polarSpeed = deltaY * this.ySensitivity;
        this._touchStartX = e.touches[0].clientX;
        this._touchStartY = e.touches[0].clientY;
      } else if (e.touches.length === 2) {
        const currentPinchDistance = this._getDistanceBetweenTouches(e.touches);
        const pinchScale = this._initialPinchDistance / currentPinchDistance;
        this.radial *= pinchScale;
        this.radial = Math.min(this.maxZoom, Math.max(this.minZoom, this.radial));
        this._updateCamera();
        this._initialPinchDistance = currentPinchDistance;
      }
    };
    _onTouchEnd = (e) => {
      if (e.touches.length < 2) {
        this._mouseDown = false;
      }
      if (e.touches.length === 1) {
        this._touchStartX = e.touches[0].clientX;
        this._touchStartY = e.touches[0].clientY;
      }
    };
    /**
     * Helper function to calculate the distance between two touch points
     * @param touches list of touch points
     * @returns distance between the two touch points
     */
    _getDistanceBetweenTouches(touches) {
      const dx = touches[0].clientX - touches[1].clientX;
      const dy = touches[0].clientY - touches[1].clientY;
      return Math.sqrt(dx * dx + dy * dy);
    }
  };
  __publicField(OrbitalCamera, "TypeName", "orbital-camera");
  __decorate11([
    property.int()
  ], OrbitalCamera.prototype, "mouseButtonIndex", void 0);
  __decorate11([
    property.float(5)
  ], OrbitalCamera.prototype, "radial", void 0);
  __decorate11([
    property.float()
  ], OrbitalCamera.prototype, "minElevation", void 0);
  __decorate11([
    property.float(89.99)
  ], OrbitalCamera.prototype, "maxElevation", void 0);
  __decorate11([
    property.float()
  ], OrbitalCamera.prototype, "minZoom", void 0);
  __decorate11([
    property.float(10)
  ], OrbitalCamera.prototype, "maxZoom", void 0);
  __decorate11([
    property.float(0.5)
  ], OrbitalCamera.prototype, "xSensitivity", void 0);
  __decorate11([
    property.float(0.5)
  ], OrbitalCamera.prototype, "ySensitivity", void 0);
  __decorate11([
    property.float(0.02)
  ], OrbitalCamera.prototype, "zoomSensitivity", void 0);
  __decorate11([
    property.float(0.9)
  ], OrbitalCamera.prototype, "damping", void 0);

  // js/button.js
  var button_exports = {};
  __export(button_exports, {
    ButtonComponent: () => ButtonComponent,
    hapticFeedback: () => hapticFeedback
  });
  function hapticFeedback(object, strength, duration) {
    const input = object.getComponent(InputComponent);
    if (input && input.xrInputSource) {
      const gamepad = input.xrInputSource.gamepad;
      if (gamepad && gamepad.hapticActuators)
        gamepad.hapticActuators[0].pulse(strength, duration);
    }
  }
  var ButtonComponent = class extends Component3 {
    static onRegister(engine) {
      engine.registerComponent(HowlerAudioSource);
      engine.registerComponent(CursorTarget);
    }
    /* Position to return to when "unpressing" the button */
    returnPos = new Float32Array(3);
    start() {
      this.mesh = this.buttonMeshObject.getComponent(MeshComponent);
      this.defaultMaterial = this.mesh.material;
      this.buttonMeshObject.getTranslationLocal(this.returnPos);
      this.target = this.object.getComponent(CursorTarget) || this.object.addComponent(CursorTarget);
      this.soundClick = this.object.addComponent(HowlerAudioSource, {
        src: "sfx/click.wav",
        spatial: true
      });
      this.soundUnClick = this.object.addComponent(HowlerAudioSource, {
        src: "sfx/unclick.wav",
        spatial: true
      });
    }
    onActivate() {
      this.target.onHover.add(this.onHover);
      this.target.onUnhover.add(this.onUnhover);
      this.target.onDown.add(this.onDown);
      this.target.onUp.add(this.onUp);
    }
    onDeactivate() {
      this.target.onHover.remove(this.onHover);
      this.target.onUnhover.remove(this.onUnhover);
      this.target.onDown.remove(this.onDown);
      this.target.onUp.remove(this.onUp);
    }
    /* Called by 'cursor-target' */
    onHover = (_, cursor) => {
      this.mesh.material = this.hoverMaterial;
      if (cursor.type === "finger-cursor") {
        this.onDown(_, cursor);
      }
      hapticFeedback(cursor.object, 0.5, 50);
    };
    /* Called by 'cursor-target' */
    onDown = (_, cursor) => {
      this.soundClick.play();
      this.buttonMeshObject.translate([0, -0.1, 0]);
      hapticFeedback(cursor.object, 1, 20);
    };
    /* Called by 'cursor-target' */
    onUp = (_, cursor) => {
      this.soundUnClick.play();
      this.buttonMeshObject.setTranslationLocal(this.returnPos);
      hapticFeedback(cursor.object, 0.7, 20);
    };
    /* Called by 'cursor-target' */
    onUnhover = (_, cursor) => {
      this.mesh.material = this.defaultMaterial;
      if (cursor.type === "finger-cursor") {
        this.onUp(_, cursor);
      }
      hapticFeedback(cursor.object, 0.3, 50);
    };
  };
  __publicField(ButtonComponent, "TypeName", "button");
  __publicField(ButtonComponent, "Properties", {
    /** Object that has the button's mesh attached */
    buttonMeshObject: Property.object(),
    /** Material to apply when the user hovers the button */
    hoverMaterial: Property.material()
  });

  // cache/js/_editor_index.js
  _registerEditor(dist_exports);
  _registerEditor(button_exports);
})();
/*! Bundled license information:

howler/dist/howler.js:
  (*!
   *  howler.js v2.2.4
   *  howlerjs.com
   *
   *  (c) 2013-2020, James Simpson of GoldFire Studios
   *  goldfirestudios.com
   *
   *  MIT License
   *)
  (*!
   *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
   *  
   *  howler.js v2.2.4
   *  howlerjs.com
   *
   *  (c) 2013-2020, James Simpson of GoldFire Studios
   *  goldfirestudios.com
   *
   *  MIT License
   *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vbm9kZV9tb2R1bGVzL2hvd2xlci9kaXN0L2hvd2xlci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZWFyY3V0L3NyYy9lYXJjdXQuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC9pbmRleC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvbm9kZV9tb2R1bGVzL3dhc20tZmVhdHVyZS1kZXRlY3QvZGlzdC9lc20vaW5kZXguanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9zcmMvcHJvcGVydHkudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9zcmMvZGVjb3JhdG9ycy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvYXBpL3NyYy91dGlscy9vYmplY3QudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9zcmMvdXRpbHMvZXZlbnQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9zcmMvcmVzb3VyY2VzL3Jlc291cmNlLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9hcGkvc3JjL2NvbXBvbmVudC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvYXBpL3NyYy91dGlscy9mZXRjaC50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvYXBpL3NyYy9wcmVmYWIudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9zcmMvdXRpbHMvbWlzYy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvYXBpL3NyYy93b25kZXJsYW5kLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9hcGkvc3JjL3Jlc291cmNlcy9tYXRlcmlhbC1tYW5hZ2VyLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9hcGkvc3JjL3Jlc291cmNlcy9tZXNoLW1hbmFnZXIudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9zcmMvcmVzb3VyY2VzL3RleHR1cmUtbWFuYWdlci50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvYXBpL3NyYy9zY2VuZS1nbHRmLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9hcGkvc3JjL3NjZW5lLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9hcGkvc3JjL2VuZ2luZS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvYXBpL3NyYy91dGlscy9iaXRzZXQudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9zcmMvdXRpbHMvbG9nZ2VyLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9hcGkvc3JjL3V0aWxzL2Nib3IudHMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2FwaS9zcmMvd2FzbS50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvYXBpL3NyYy92ZXJzaW9uLnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9hcGkvc3JjL2luZGV4LnRzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvOHRod2FsbC1jYW1lcmEuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC91dGlscy93ZWJ4ci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L2FuY2hvci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L2N1cnNvci10YXJnZXQuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dsLW1hdHJpeC9lc20vY29tbW9uLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9nbC1tYXRyaXgvZXNtL21hdDMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dsLW1hdHJpeC9lc20vbWF0NC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZ2wtbWF0cml4L2VzbS9xdWF0LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9nbC1tYXRyaXgvZXNtL3ZlYzMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dsLW1hdHJpeC9lc20vdmVjNC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZ2wtbWF0cml4L2VzbS9xdWF0Mi5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L2hpdC10ZXN0LWxvY2F0aW9uLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvY3Vyc29yLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvZGVidWctb2JqZWN0LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvZGV2aWNlLW9yaWVudGF0aW9uLWxvb2suanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC9maW5nZXItY3Vyc29yLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvZml4ZWQtZm92ZWF0aW9uLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvaGFuZC10cmFja2luZy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L2hvd2xlci1hdWRpby1saXN0ZW5lci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L2hvd2xlci1hdWRpby1zb3VyY2UuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC91dGlscy91dGlscy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L2ltYWdlLXRleHR1cmUuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC9tb3VzZS1sb29rLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvcGxheWVyLWhlaWdodC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L3RhcmdldC1mcmFtZXJhdGUuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC90ZWxlcG9ydC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L3RyYWlsLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvdHdvLWpvaW50LWlrLXNvbHZlci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L3ZpZGVvLXRleHR1cmUuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC92ci1tb2RlLWFjdGl2ZS1zd2l0Y2guanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC9wbGFuZS1kZXRlY3Rpb24uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC92cm0uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3b25kZXJsYW5kZW5naW5lL2NvbXBvbmVudHMvZGlzdC93YXNkLWNvbnRyb2xzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzL2Rpc3QvaW5wdXQtcHJvZmlsZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cy9kaXN0L29yYml0YWwtY2FtZXJhLmpzIiwgIi4uLy4uL2pzL2J1dHRvbi5qcyIsICJfZWRpdG9yX2luZGV4LmpzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvKiFcbiAqICBob3dsZXIuanMgdjIuMi40XG4gKiAgaG93bGVyanMuY29tXG4gKlxuICogIChjKSAyMDEzLTIwMjAsIEphbWVzIFNpbXBzb24gb2YgR29sZEZpcmUgU3R1ZGlvc1xuICogIGdvbGRmaXJlc3R1ZGlvcy5jb21cbiAqXG4gKiAgTUlUIExpY2Vuc2VcbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8qKiBHbG9iYWwgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogQ3JlYXRlIHRoZSBnbG9iYWwgY29udHJvbGxlci4gQWxsIGNvbnRhaW5lZCBtZXRob2RzIGFuZCBwcm9wZXJ0aWVzIGFwcGx5XG4gICAqIHRvIGFsbCBzb3VuZHMgdGhhdCBhcmUgY3VycmVudGx5IHBsYXlpbmcgb3Igd2lsbCBiZSBpbiB0aGUgZnV0dXJlLlxuICAgKi9cbiAgdmFyIEhvd2xlckdsb2JhbCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaW5pdCgpO1xuICB9O1xuICBIb3dsZXJHbG9iYWwucHJvdG90eXBlID0ge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgdGhlIGdsb2JhbCBIb3dsZXIgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIENyZWF0ZSBhIGdsb2JhbCBJRCBjb3VudGVyLlxuICAgICAgc2VsZi5fY291bnRlciA9IDEwMDA7XG5cbiAgICAgIC8vIFBvb2wgb2YgdW5sb2NrZWQgSFRNTDUgQXVkaW8gb2JqZWN0cy5cbiAgICAgIHNlbGYuX2h0bWw1QXVkaW9Qb29sID0gW107XG4gICAgICBzZWxmLmh0bWw1UG9vbFNpemUgPSAxMDtcblxuICAgICAgLy8gSW50ZXJuYWwgcHJvcGVydGllcy5cbiAgICAgIHNlbGYuX2NvZGVjcyA9IHt9O1xuICAgICAgc2VsZi5faG93bHMgPSBbXTtcbiAgICAgIHNlbGYuX211dGVkID0gZmFsc2U7XG4gICAgICBzZWxmLl92b2x1bWUgPSAxO1xuICAgICAgc2VsZi5fY2FuUGxheUV2ZW50ID0gJ2NhbnBsYXl0aHJvdWdoJztcbiAgICAgIHNlbGYuX25hdmlnYXRvciA9ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cubmF2aWdhdG9yKSA/IHdpbmRvdy5uYXZpZ2F0b3IgOiBudWxsO1xuXG4gICAgICAvLyBQdWJsaWMgcHJvcGVydGllcy5cbiAgICAgIHNlbGYubWFzdGVyR2FpbiA9IG51bGw7XG4gICAgICBzZWxmLm5vQXVkaW8gPSBmYWxzZTtcbiAgICAgIHNlbGYudXNpbmdXZWJBdWRpbyA9IHRydWU7XG4gICAgICBzZWxmLmF1dG9TdXNwZW5kID0gdHJ1ZTtcbiAgICAgIHNlbGYuY3R4ID0gbnVsbDtcblxuICAgICAgLy8gU2V0IHRvIGZhbHNlIHRvIGRpc2FibGUgdGhlIGF1dG8gYXVkaW8gdW5sb2NrZXIuXG4gICAgICBzZWxmLmF1dG9VbmxvY2sgPSB0cnVlO1xuXG4gICAgICAvLyBTZXR1cCB0aGUgdmFyaW91cyBzdGF0ZSB2YWx1ZXMgZm9yIGdsb2JhbCB0cmFja2luZy5cbiAgICAgIHNlbGYuX3NldHVwKCk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQvc2V0IHRoZSBnbG9iYWwgdm9sdW1lIGZvciBhbGwgc291bmRzLlxuICAgICAqIEBwYXJhbSAge0Zsb2F0fSB2b2wgVm9sdW1lIGZyb20gMC4wIHRvIDEuMC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXIvRmxvYXR9ICAgICBSZXR1cm5zIHNlbGYgb3IgY3VycmVudCB2b2x1bWUuXG4gICAgICovXG4gICAgdm9sdW1lOiBmdW5jdGlvbih2b2wpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG4gICAgICB2b2wgPSBwYXJzZUZsb2F0KHZvbCk7XG5cbiAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYW4gQXVkaW9Db250ZXh0IGNyZWF0ZWQgeWV0LCBydW4gdGhlIHNldHVwLlxuICAgICAgaWYgKCFzZWxmLmN0eCkge1xuICAgICAgICBzZXR1cEF1ZGlvQ29udGV4dCgpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHZvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgdm9sID49IDAgJiYgdm9sIDw9IDEpIHtcbiAgICAgICAgc2VsZi5fdm9sdW1lID0gdm9sO1xuXG4gICAgICAgIC8vIERvbid0IHVwZGF0ZSBhbnkgb2YgdGhlIG5vZGVzIGlmIHdlIGFyZSBtdXRlZC5cbiAgICAgICAgaWYgKHNlbGYuX211dGVkKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXaGVuIHVzaW5nIFdlYiBBdWRpbywgd2UganVzdCBuZWVkIHRvIGFkanVzdCB0aGUgbWFzdGVyIGdhaW4uXG4gICAgICAgIGlmIChzZWxmLnVzaW5nV2ViQXVkaW8pIHtcbiAgICAgICAgICBzZWxmLm1hc3RlckdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZSh2b2wsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFuZCBjaGFuZ2Ugdm9sdW1lIGZvciBhbGwgSFRNTDUgYXVkaW8gbm9kZXMuXG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9ob3dscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmICghc2VsZi5faG93bHNbaV0uX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgICAvLyBHZXQgYWxsIG9mIHRoZSBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAgICAgICAgdmFyIGlkcyA9IHNlbGYuX2hvd2xzW2ldLl9nZXRTb3VuZElkcygpO1xuXG4gICAgICAgICAgICAvLyBMb29wIHRocm91Z2ggYWxsIHNvdW5kcyBhbmQgY2hhbmdlIHRoZSB2b2x1bWVzLlxuICAgICAgICAgICAgZm9yICh2YXIgaj0wOyBqPGlkcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9ob3dsc1tpXS5fc291bmRCeUlkKGlkc1tqXSk7XG5cbiAgICAgICAgICAgICAgaWYgKHNvdW5kICYmIHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICAgICAgc291bmQuX25vZGUudm9sdW1lID0gc291bmQuX3ZvbHVtZSAqIHZvbDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZi5fdm9sdW1lO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgbXV0aW5nIGFuZCB1bm11dGluZyBnbG9iYWxseS5cbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBtdXRlZCBJcyBtdXRlZCBvciBub3QuXG4gICAgICovXG4gICAgbXV0ZTogZnVuY3Rpb24obXV0ZWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYW4gQXVkaW9Db250ZXh0IGNyZWF0ZWQgeWV0LCBydW4gdGhlIHNldHVwLlxuICAgICAgaWYgKCFzZWxmLmN0eCkge1xuICAgICAgICBzZXR1cEF1ZGlvQ29udGV4dCgpO1xuICAgICAgfVxuXG4gICAgICBzZWxmLl9tdXRlZCA9IG11dGVkO1xuXG4gICAgICAvLyBXaXRoIFdlYiBBdWRpbywgd2UganVzdCBuZWVkIHRvIG11dGUgdGhlIG1hc3RlciBnYWluLlxuICAgICAgaWYgKHNlbGYudXNpbmdXZWJBdWRpbykge1xuICAgICAgICBzZWxmLm1hc3RlckdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZShtdXRlZCA/IDAgOiBzZWxmLl92b2x1bWUsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgfVxuXG4gICAgICAvLyBMb29wIHRocm91Z2ggYW5kIG11dGUgYWxsIEhUTUw1IEF1ZGlvIG5vZGVzLlxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICghc2VsZi5faG93bHNbaV0uX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgLy8gR2V0IGFsbCBvZiB0aGUgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICAgICAgICB2YXIgaWRzID0gc2VsZi5faG93bHNbaV0uX2dldFNvdW5kSWRzKCk7XG5cbiAgICAgICAgICAvLyBMb29wIHRocm91Z2ggYWxsIHNvdW5kcyBhbmQgbWFyayB0aGUgYXVkaW8gbm9kZSBhcyBtdXRlZC5cbiAgICAgICAgICBmb3IgKHZhciBqPTA7IGo8aWRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9ob3dsc1tpXS5fc291bmRCeUlkKGlkc1tqXSk7XG5cbiAgICAgICAgICAgIGlmIChzb3VuZCAmJiBzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5tdXRlZCA9IChtdXRlZCkgPyB0cnVlIDogc291bmQuX211dGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIHN0b3BwaW5nIGFsbCBzb3VuZHMgZ2xvYmFsbHkuXG4gICAgICovXG4gICAgc3RvcDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICAvLyBMb29wIHRocm91Z2ggYWxsIEhvd2xzIGFuZCBzdG9wIHRoZW0uXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc2VsZi5faG93bHNbaV0uc3RvcCgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVW5sb2FkIGFuZCBkZXN0cm95IGFsbCBjdXJyZW50bHkgbG9hZGVkIEhvd2wgb2JqZWN0cy5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgdW5sb2FkOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIGZvciAodmFyIGk9c2VsZi5faG93bHMubGVuZ3RoLTE7IGk+PTA7IGktLSkge1xuICAgICAgICBzZWxmLl9ob3dsc1tpXS51bmxvYWQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIGEgbmV3IEF1ZGlvQ29udGV4dCB0byBtYWtlIHN1cmUgaXQgaXMgZnVsbHkgcmVzZXQuXG4gICAgICBpZiAoc2VsZi51c2luZ1dlYkF1ZGlvICYmIHNlbGYuY3R4ICYmIHR5cGVvZiBzZWxmLmN0eC5jbG9zZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgc2VsZi5jdHguY2xvc2UoKTtcbiAgICAgICAgc2VsZi5jdHggPSBudWxsO1xuICAgICAgICBzZXR1cEF1ZGlvQ29udGV4dCgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgZm9yIGNvZGVjIHN1cHBvcnQgb2Ygc3BlY2lmaWMgZXh0ZW5zaW9uLlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gZXh0IEF1ZGlvIGZpbGUgZXh0ZW50aW9uLlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICovXG4gICAgY29kZWNzOiBmdW5jdGlvbihleHQpIHtcbiAgICAgIHJldHVybiAodGhpcyB8fCBIb3dsZXIpLl9jb2RlY3NbZXh0LnJlcGxhY2UoL154LS8sICcnKV07XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldHVwIHZhcmlvdXMgc3RhdGUgdmFsdWVzIGZvciBnbG9iYWwgdHJhY2tpbmcuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIF9zZXR1cDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICAvLyBLZWVwcyB0cmFjayBvZiB0aGUgc3VzcGVuZC9yZXN1bWUgc3RhdGUgb2YgdGhlIEF1ZGlvQ29udGV4dC5cbiAgICAgIHNlbGYuc3RhdGUgPSBzZWxmLmN0eCA/IHNlbGYuY3R4LnN0YXRlIHx8ICdzdXNwZW5kZWQnIDogJ3N1c3BlbmRlZCc7XG5cbiAgICAgIC8vIEF1dG9tYXRpY2FsbHkgYmVnaW4gdGhlIDMwLXNlY29uZCBzdXNwZW5kIHByb2Nlc3NcbiAgICAgIHNlbGYuX2F1dG9TdXNwZW5kKCk7XG5cbiAgICAgIC8vIENoZWNrIGlmIGF1ZGlvIGlzIGF2YWlsYWJsZS5cbiAgICAgIGlmICghc2VsZi51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICAgIC8vIE5vIGF1ZGlvIGlzIGF2YWlsYWJsZSBvbiB0aGlzIHN5c3RlbSBpZiBub0F1ZGlvIGlzIHNldCB0byB0cnVlLlxuICAgICAgICBpZiAodHlwZW9mIEF1ZGlvICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgdGVzdCA9IG5ldyBBdWRpbygpO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgY2FucGxheXRocm91Z2ggZXZlbnQgaXMgYXZhaWxhYmxlLlxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZXN0Lm9uY2FucGxheXRocm91Z2ggPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHNlbGYuX2NhblBsYXlFdmVudCA9ICdjYW5wbGF5JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgIHNlbGYubm9BdWRpbyA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlbGYubm9BdWRpbyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVGVzdCB0byBtYWtlIHN1cmUgYXVkaW8gaXNuJ3QgZGlzYWJsZWQgaW4gSW50ZXJuZXQgRXhwbG9yZXIuXG4gICAgICB0cnkge1xuICAgICAgICB2YXIgdGVzdCA9IG5ldyBBdWRpbygpO1xuICAgICAgICBpZiAodGVzdC5tdXRlZCkge1xuICAgICAgICAgIHNlbGYubm9BdWRpbyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cbiAgICAgIC8vIENoZWNrIGZvciBzdXBwb3J0ZWQgY29kZWNzLlxuICAgICAgaWYgKCFzZWxmLm5vQXVkaW8pIHtcbiAgICAgICAgc2VsZi5fc2V0dXBDb2RlY3MoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENoZWNrIGZvciBicm93c2VyIHN1cHBvcnQgZm9yIHZhcmlvdXMgY29kZWNzIGFuZCBjYWNoZSB0aGUgcmVzdWx0cy5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgX3NldHVwQ29kZWNzOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG4gICAgICB2YXIgYXVkaW9UZXN0ID0gbnVsbDtcblxuICAgICAgLy8gTXVzdCB3cmFwIGluIGEgdHJ5L2NhdGNoIGJlY2F1c2UgSUUxMSBpbiBzZXJ2ZXIgbW9kZSB0aHJvd3MgYW4gZXJyb3IuXG4gICAgICB0cnkge1xuICAgICAgICBhdWRpb1Rlc3QgPSAodHlwZW9mIEF1ZGlvICE9PSAndW5kZWZpbmVkJykgPyBuZXcgQXVkaW8oKSA6IG51bGw7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIGlmICghYXVkaW9UZXN0IHx8IHR5cGVvZiBhdWRpb1Rlc3QuY2FuUGxheVR5cGUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIHZhciBtcGVnVGVzdCA9IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbXBlZzsnKS5yZXBsYWNlKC9ebm8kLywgJycpO1xuXG4gICAgICAvLyBPcGVyYSB2ZXJzaW9uIDwzMyBoYXMgbWl4ZWQgTVAzIHN1cHBvcnQsIHNvIHdlIG5lZWQgdG8gY2hlY2sgZm9yIGFuZCBibG9jayBpdC5cbiAgICAgIHZhciB1YSA9IHNlbGYuX25hdmlnYXRvciA/IHNlbGYuX25hdmlnYXRvci51c2VyQWdlbnQgOiAnJztcbiAgICAgIHZhciBjaGVja09wZXJhID0gdWEubWF0Y2goL09QUlxcLyhcXGQrKS9nKTtcbiAgICAgIHZhciBpc09sZE9wZXJhID0gKGNoZWNrT3BlcmEgJiYgcGFyc2VJbnQoY2hlY2tPcGVyYVswXS5zcGxpdCgnLycpWzFdLCAxMCkgPCAzMyk7XG4gICAgICB2YXIgY2hlY2tTYWZhcmkgPSB1YS5pbmRleE9mKCdTYWZhcmknKSAhPT0gLTEgJiYgdWEuaW5kZXhPZignQ2hyb21lJykgPT09IC0xO1xuICAgICAgdmFyIHNhZmFyaVZlcnNpb24gPSB1YS5tYXRjaCgvVmVyc2lvblxcLyguKj8pIC8pO1xuICAgICAgdmFyIGlzT2xkU2FmYXJpID0gKGNoZWNrU2FmYXJpICYmIHNhZmFyaVZlcnNpb24gJiYgcGFyc2VJbnQoc2FmYXJpVmVyc2lvblsxXSwgMTApIDwgMTUpO1xuXG4gICAgICBzZWxmLl9jb2RlY3MgPSB7XG4gICAgICAgIG1wMzogISEoIWlzT2xkT3BlcmEgJiYgKG1wZWdUZXN0IHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbXAzOycpLnJlcGxhY2UoL15ubyQvLCAnJykpKSxcbiAgICAgICAgbXBlZzogISFtcGVnVGVzdCxcbiAgICAgICAgb3B1czogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL29nZzsgY29kZWNzPVwib3B1c1wiJykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgb2dnOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vb2dnOyBjb2RlY3M9XCJ2b3JiaXNcIicpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIG9nYTogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL29nZzsgY29kZWNzPVwidm9yYmlzXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICB3YXY6ICEhKGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vd2F2OyBjb2RlY3M9XCIxXCInKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3dhdicpKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBhYWM6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9hYWM7JykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgY2FmOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8veC1jYWY7JykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgbTRhOiAhIShhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3gtbTRhOycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbTRhOycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vYWFjOycpKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBtNGI6ICEhKGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8veC1tNGI7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9tNGI7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9hYWM7JykpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIG1wNDogISEoYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby94LW1wNDsnKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL21wNDsnKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL2FhYzsnKSkucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgd2ViYTogISEoIWlzT2xkU2FmYXJpICYmIGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vd2VibTsgY29kZWNzPVwidm9yYmlzXCInKS5yZXBsYWNlKC9ebm8kLywgJycpKSxcbiAgICAgICAgd2VibTogISEoIWlzT2xkU2FmYXJpICYmIGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vd2VibTsgY29kZWNzPVwidm9yYmlzXCInKS5yZXBsYWNlKC9ebm8kLywgJycpKSxcbiAgICAgICAgZG9sYnk6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9tcDQ7IGNvZGVjcz1cImVjLTNcIicpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIGZsYWM6ICEhKGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8veC1mbGFjOycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vZmxhYzsnKSkucmVwbGFjZSgvXm5vJC8sICcnKVxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNvbWUgYnJvd3NlcnMvZGV2aWNlcyB3aWxsIG9ubHkgYWxsb3cgYXVkaW8gdG8gYmUgcGxheWVkIGFmdGVyIGEgdXNlciBpbnRlcmFjdGlvbi5cbiAgICAgKiBBdHRlbXB0IHRvIGF1dG9tYXRpY2FsbHkgdW5sb2NrIGF1ZGlvIG9uIHRoZSBmaXJzdCB1c2VyIGludGVyYWN0aW9uLlxuICAgICAqIENvbmNlcHQgZnJvbTogaHR0cDovL3BhdWxiYWthdXMuY29tL3R1dG9yaWFscy9odG1sNS93ZWItYXVkaW8tb24taW9zL1xuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBfdW5sb2NrQXVkaW86IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcblxuICAgICAgLy8gT25seSBydW4gdGhpcyBpZiBXZWIgQXVkaW8gaXMgc3VwcG9ydGVkIGFuZCBpdCBoYXNuJ3QgYWxyZWFkeSBiZWVuIHVubG9ja2VkLlxuICAgICAgaWYgKHNlbGYuX2F1ZGlvVW5sb2NrZWQgfHwgIXNlbGYuY3R4KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc2VsZi5fYXVkaW9VbmxvY2tlZCA9IGZhbHNlO1xuICAgICAgc2VsZi5hdXRvVW5sb2NrID0gZmFsc2U7XG5cbiAgICAgIC8vIFNvbWUgbW9iaWxlIGRldmljZXMvcGxhdGZvcm1zIGhhdmUgZGlzdG9ydGlvbiBpc3N1ZXMgd2hlbiBvcGVuaW5nL2Nsb3NpbmcgdGFicyBhbmQvb3Igd2ViIHZpZXdzLlxuICAgICAgLy8gQnVncyBpbiB0aGUgYnJvd3NlciAoZXNwZWNpYWxseSBNb2JpbGUgU2FmYXJpKSBjYW4gY2F1c2UgdGhlIHNhbXBsZVJhdGUgdG8gY2hhbmdlIGZyb20gNDQxMDAgdG8gNDgwMDAuXG4gICAgICAvLyBCeSBjYWxsaW5nIEhvd2xlci51bmxvYWQoKSwgd2UgY3JlYXRlIGEgbmV3IEF1ZGlvQ29udGV4dCB3aXRoIHRoZSBjb3JyZWN0IHNhbXBsZVJhdGUuXG4gICAgICBpZiAoIXNlbGYuX21vYmlsZVVubG9hZGVkICYmIHNlbGYuY3R4LnNhbXBsZVJhdGUgIT09IDQ0MTAwKSB7XG4gICAgICAgIHNlbGYuX21vYmlsZVVubG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgc2VsZi51bmxvYWQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2NyYXRjaCBidWZmZXIgZm9yIGVuYWJsaW5nIGlPUyB0byBkaXNwb3NlIG9mIHdlYiBhdWRpbyBidWZmZXJzIGNvcnJlY3RseSwgYXMgcGVyOlxuICAgICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yNDExOTY4NFxuICAgICAgc2VsZi5fc2NyYXRjaEJ1ZmZlciA9IHNlbGYuY3R4LmNyZWF0ZUJ1ZmZlcigxLCAxLCAyMjA1MCk7XG5cbiAgICAgIC8vIENhbGwgdGhpcyBtZXRob2Qgb24gdG91Y2ggc3RhcnQgdG8gY3JlYXRlIGFuZCBwbGF5IGEgYnVmZmVyLFxuICAgICAgLy8gdGhlbiBjaGVjayBpZiB0aGUgYXVkaW8gYWN0dWFsbHkgcGxheWVkIHRvIGRldGVybWluZSBpZlxuICAgICAgLy8gYXVkaW8gaGFzIG5vdyBiZWVuIHVubG9ja2VkIG9uIGlPUywgQW5kcm9pZCwgZXRjLlxuICAgICAgdmFyIHVubG9jayA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgLy8gQ3JlYXRlIGEgcG9vbCBvZiB1bmxvY2tlZCBIVE1MNSBBdWRpbyBvYmplY3RzIHRoYXQgY2FuXG4gICAgICAgIC8vIGJlIHVzZWQgZm9yIHBsYXlpbmcgc291bmRzIHdpdGhvdXQgdXNlciBpbnRlcmFjdGlvbi4gSFRNTDVcbiAgICAgICAgLy8gQXVkaW8gb2JqZWN0cyBtdXN0IGJlIGluZGl2aWR1YWxseSB1bmxvY2tlZCwgYXMgb3Bwb3NlZFxuICAgICAgICAvLyB0byB0aGUgV2ViQXVkaW8gQVBJIHdoaWNoIG9ubHkgbmVlZHMgYSBzaW5nbGUgYWN0aXZhdGlvbi5cbiAgICAgICAgLy8gVGhpcyBtdXN0IG9jY3VyIGJlZm9yZSBXZWJBdWRpbyBzZXR1cCBvciB0aGUgc291cmNlLm9uZW5kZWRcbiAgICAgICAgLy8gZXZlbnQgd2lsbCBub3QgZmlyZS5cbiAgICAgICAgd2hpbGUgKHNlbGYuX2h0bWw1QXVkaW9Qb29sLmxlbmd0aCA8IHNlbGYuaHRtbDVQb29sU2l6ZSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgYXVkaW9Ob2RlID0gbmV3IEF1ZGlvKCk7XG5cbiAgICAgICAgICAgIC8vIE1hcmsgdGhpcyBBdWRpbyBvYmplY3QgYXMgdW5sb2NrZWQgdG8gZW5zdXJlIGl0IGNhbiBnZXQgcmV0dXJuZWRcbiAgICAgICAgICAgIC8vIHRvIHRoZSB1bmxvY2tlZCBwb29sIHdoZW4gcmVsZWFzZWQuXG4gICAgICAgICAgICBhdWRpb05vZGUuX3VubG9ja2VkID0gdHJ1ZTtcblxuICAgICAgICAgICAgLy8gQWRkIHRoZSBhdWRpbyBub2RlIHRvIHRoZSBwb29sLlxuICAgICAgICAgICAgc2VsZi5fcmVsZWFzZUh0bWw1QXVkaW8oYXVkaW9Ob2RlKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBzZWxmLm5vQXVkaW8gPSB0cnVlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFueSBhc3NpZ25lZCBhdWRpbyBub2RlcyBhbmQgdW5sb2NrIHRoZW0uXG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9ob3dscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmICghc2VsZi5faG93bHNbaV0uX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgICAvLyBHZXQgYWxsIG9mIHRoZSBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAgICAgICAgdmFyIGlkcyA9IHNlbGYuX2hvd2xzW2ldLl9nZXRTb3VuZElkcygpO1xuXG4gICAgICAgICAgICAvLyBMb29wIHRocm91Z2ggYWxsIHNvdW5kcyBhbmQgdW5sb2NrIHRoZSBhdWRpbyBub2Rlcy5cbiAgICAgICAgICAgIGZvciAodmFyIGo9MDsgajxpZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5faG93bHNbaV0uX3NvdW5kQnlJZChpZHNbal0pO1xuXG4gICAgICAgICAgICAgIGlmIChzb3VuZCAmJiBzb3VuZC5fbm9kZSAmJiAhc291bmQuX25vZGUuX3VubG9ja2VkKSB7XG4gICAgICAgICAgICAgICAgc291bmQuX25vZGUuX3VubG9ja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5sb2FkKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGaXggQW5kcm9pZCBjYW4gbm90IHBsYXkgaW4gc3VzcGVuZCBzdGF0ZS5cbiAgICAgICAgc2VsZi5fYXV0b1Jlc3VtZSgpO1xuXG4gICAgICAgIC8vIENyZWF0ZSBhbiBlbXB0eSBidWZmZXIuXG4gICAgICAgIHZhciBzb3VyY2UgPSBzZWxmLmN0eC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcbiAgICAgICAgc291cmNlLmJ1ZmZlciA9IHNlbGYuX3NjcmF0Y2hCdWZmZXI7XG4gICAgICAgIHNvdXJjZS5jb25uZWN0KHNlbGYuY3R4LmRlc3RpbmF0aW9uKTtcblxuICAgICAgICAvLyBQbGF5IHRoZSBlbXB0eSBidWZmZXIuXG4gICAgICAgIGlmICh0eXBlb2Ygc291cmNlLnN0YXJ0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHNvdXJjZS5ub3RlT24oMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc291cmNlLnN0YXJ0KDApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2FsbGluZyByZXN1bWUoKSBvbiBhIHN0YWNrIGluaXRpYXRlZCBieSB1c2VyIGdlc3R1cmUgaXMgd2hhdCBhY3R1YWxseSB1bmxvY2tzIHRoZSBhdWRpbyBvbiBBbmRyb2lkIENocm9tZSA+PSA1NS5cbiAgICAgICAgaWYgKHR5cGVvZiBzZWxmLmN0eC5yZXN1bWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBzZWxmLmN0eC5yZXN1bWUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldHVwIGEgdGltZW91dCB0byBjaGVjayB0aGF0IHdlIGFyZSB1bmxvY2tlZCBvbiB0aGUgbmV4dCBldmVudCBsb29wLlxuICAgICAgICBzb3VyY2Uub25lbmRlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNvdXJjZS5kaXNjb25uZWN0KDApO1xuXG4gICAgICAgICAgLy8gVXBkYXRlIHRoZSB1bmxvY2tlZCBzdGF0ZSBhbmQgcHJldmVudCB0aGlzIGNoZWNrIGZyb20gaGFwcGVuaW5nIGFnYWluLlxuICAgICAgICAgIHNlbGYuX2F1ZGlvVW5sb2NrZWQgPSB0cnVlO1xuXG4gICAgICAgICAgLy8gUmVtb3ZlIHRoZSB0b3VjaCBzdGFydCBsaXN0ZW5lci5cbiAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdW5sb2NrLCB0cnVlKTtcbiAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHVubG9jaywgdHJ1ZSk7XG4gICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB1bmxvY2ssIHRydWUpO1xuICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB1bmxvY2ssIHRydWUpO1xuXG4gICAgICAgICAgLy8gTGV0IGFsbCBzb3VuZHMga25vdyB0aGF0IGF1ZGlvIGhhcyBiZWVuIHVubG9ja2VkLlxuICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9ob3dscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgc2VsZi5faG93bHNbaV0uX2VtaXQoJ3VubG9jaycpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH07XG5cbiAgICAgIC8vIFNldHVwIGEgdG91Y2ggc3RhcnQgbGlzdGVuZXIgdG8gYXR0ZW1wdCBhbiB1bmxvY2sgaW4uXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdW5sb2NrLCB0cnVlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdW5sb2NrLCB0cnVlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdW5sb2NrLCB0cnVlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB1bmxvY2ssIHRydWUpO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IGFuIHVubG9ja2VkIEhUTUw1IEF1ZGlvIG9iamVjdCBmcm9tIHRoZSBwb29sLiBJZiBub25lIGFyZSBsZWZ0LFxuICAgICAqIHJldHVybiBhIG5ldyBBdWRpbyBvYmplY3QgYW5kIHRocm93IGEgd2FybmluZy5cbiAgICAgKiBAcmV0dXJuIHtBdWRpb30gSFRNTDUgQXVkaW8gb2JqZWN0LlxuICAgICAqL1xuICAgIF9vYnRhaW5IdG1sNUF1ZGlvOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIFJldHVybiB0aGUgbmV4dCBvYmplY3QgZnJvbSB0aGUgcG9vbCBpZiBvbmUgZXhpc3RzLlxuICAgICAgaWYgKHNlbGYuX2h0bWw1QXVkaW9Qb29sLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gc2VsZi5faHRtbDVBdWRpb1Bvb2wucG9wKCk7XG4gICAgICB9XG5cbiAgICAgIC8vLkNoZWNrIGlmIHRoZSBhdWRpbyBpcyBsb2NrZWQgYW5kIHRocm93IGEgd2FybmluZy5cbiAgICAgIHZhciB0ZXN0UGxheSA9IG5ldyBBdWRpbygpLnBsYXkoKTtcbiAgICAgIGlmICh0ZXN0UGxheSAmJiB0eXBlb2YgUHJvbWlzZSAhPT0gJ3VuZGVmaW5lZCcgJiYgKHRlc3RQbGF5IGluc3RhbmNlb2YgUHJvbWlzZSB8fCB0eXBlb2YgdGVzdFBsYXkudGhlbiA9PT0gJ2Z1bmN0aW9uJykpIHtcbiAgICAgICAgdGVzdFBsYXkuY2F0Y2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdIVE1MNSBBdWRpbyBwb29sIGV4aGF1c3RlZCwgcmV0dXJuaW5nIHBvdGVudGlhbGx5IGxvY2tlZCBhdWRpbyBvYmplY3QuJyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IEF1ZGlvKCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJldHVybiBhbiBhY3RpdmF0ZWQgSFRNTDUgQXVkaW8gb2JqZWN0IHRvIHRoZSBwb29sLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBfcmVsZWFzZUh0bWw1QXVkaW86IGZ1bmN0aW9uKGF1ZGlvKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICAvLyBEb24ndCBhZGQgYXVkaW8gdG8gdGhlIHBvb2wgaWYgd2UgZG9uJ3Qga25vdyBpZiBpdCBoYXMgYmVlbiB1bmxvY2tlZC5cbiAgICAgIGlmIChhdWRpby5fdW5sb2NrZWQpIHtcbiAgICAgICAgc2VsZi5faHRtbDVBdWRpb1Bvb2wucHVzaChhdWRpbyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBdXRvbWF0aWNhbGx5IHN1c3BlbmQgdGhlIFdlYiBBdWRpbyBBdWRpb0NvbnRleHQgYWZ0ZXIgbm8gc291bmQgaGFzIHBsYXllZCBmb3IgMzAgc2Vjb25kcy5cbiAgICAgKiBUaGlzIHNhdmVzIHByb2Nlc3NpbmcvZW5lcmd5IGFuZCBmaXhlcyB2YXJpb3VzIGJyb3dzZXItc3BlY2lmaWMgYnVncyB3aXRoIGF1ZGlvIGdldHRpbmcgc3R1Y2suXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIF9hdXRvU3VzcGVuZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGlmICghc2VsZi5hdXRvU3VzcGVuZCB8fCAhc2VsZi5jdHggfHwgdHlwZW9mIHNlbGYuY3R4LnN1c3BlbmQgPT09ICd1bmRlZmluZWQnIHx8ICFIb3dsZXIudXNpbmdXZWJBdWRpbykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGlmIGFueSBzb3VuZHMgYXJlIHBsYXlpbmcuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHNlbGYuX2hvd2xzW2ldLl93ZWJBdWRpbykge1xuICAgICAgICAgIGZvciAodmFyIGo9MDsgajxzZWxmLl9ob3dsc1tpXS5fc291bmRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBpZiAoIXNlbGYuX2hvd2xzW2ldLl9zb3VuZHNbal0uX3BhdXNlZCkge1xuICAgICAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHNlbGYuX3N1c3BlbmRUaW1lcikge1xuICAgICAgICBjbGVhclRpbWVvdXQoc2VsZi5fc3VzcGVuZFRpbWVyKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gc291bmQgaGFzIHBsYXllZCBhZnRlciAzMCBzZWNvbmRzLCBzdXNwZW5kIHRoZSBjb250ZXh0LlxuICAgICAgc2VsZi5fc3VzcGVuZFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFzZWxmLmF1dG9TdXNwZW5kKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5fc3VzcGVuZFRpbWVyID0gbnVsbDtcbiAgICAgICAgc2VsZi5zdGF0ZSA9ICdzdXNwZW5kaW5nJztcblxuICAgICAgICAvLyBIYW5kbGUgdXBkYXRpbmcgdGhlIHN0YXRlIG9mIHRoZSBhdWRpbyBjb250ZXh0IGFmdGVyIHN1c3BlbmRpbmcuXG4gICAgICAgIHZhciBoYW5kbGVTdXNwZW5zaW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5zdGF0ZSA9ICdzdXNwZW5kZWQnO1xuXG4gICAgICAgICAgaWYgKHNlbGYuX3Jlc3VtZUFmdGVyU3VzcGVuZCkge1xuICAgICAgICAgICAgZGVsZXRlIHNlbGYuX3Jlc3VtZUFmdGVyU3VzcGVuZDtcbiAgICAgICAgICAgIHNlbGYuX2F1dG9SZXN1bWUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gRWl0aGVyIHRoZSBzdGF0ZSBnZXRzIHN1c3BlbmRlZCBvciBpdCBpcyBpbnRlcnJ1cHRlZC5cbiAgICAgICAgLy8gRWl0aGVyIHdheSwgd2UgbmVlZCB0byB1cGRhdGUgdGhlIHN0YXRlIHRvIHN1c3BlbmRlZC5cbiAgICAgICAgc2VsZi5jdHguc3VzcGVuZCgpLnRoZW4oaGFuZGxlU3VzcGVuc2lvbiwgaGFuZGxlU3VzcGVuc2lvbik7XG4gICAgICB9LCAzMDAwMCk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBdXRvbWF0aWNhbGx5IHJlc3VtZSB0aGUgV2ViIEF1ZGlvIEF1ZGlvQ29udGV4dCB3aGVuIGEgbmV3IHNvdW5kIGlzIHBsYXllZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgX2F1dG9SZXN1bWU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBpZiAoIXNlbGYuY3R4IHx8IHR5cGVvZiBzZWxmLmN0eC5yZXN1bWUgPT09ICd1bmRlZmluZWQnIHx8ICFIb3dsZXIudXNpbmdXZWJBdWRpbykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChzZWxmLnN0YXRlID09PSAncnVubmluZycgJiYgc2VsZi5jdHguc3RhdGUgIT09ICdpbnRlcnJ1cHRlZCcgJiYgc2VsZi5fc3VzcGVuZFRpbWVyKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChzZWxmLl9zdXNwZW5kVGltZXIpO1xuICAgICAgICBzZWxmLl9zdXNwZW5kVGltZXIgPSBudWxsO1xuICAgICAgfSBlbHNlIGlmIChzZWxmLnN0YXRlID09PSAnc3VzcGVuZGVkJyB8fCBzZWxmLnN0YXRlID09PSAncnVubmluZycgJiYgc2VsZi5jdHguc3RhdGUgPT09ICdpbnRlcnJ1cHRlZCcpIHtcbiAgICAgICAgc2VsZi5jdHgucmVzdW1lKCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLnN0YXRlID0gJ3J1bm5pbmcnO1xuXG4gICAgICAgICAgLy8gRW1pdCB0byBhbGwgSG93bHMgdGhhdCB0aGUgYXVkaW8gaGFzIHJlc3VtZWQuXG4gICAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBzZWxmLl9ob3dsc1tpXS5fZW1pdCgncmVzdW1lJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoc2VsZi5fc3VzcGVuZFRpbWVyKSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYuX3N1c3BlbmRUaW1lcik7XG4gICAgICAgICAgc2VsZi5fc3VzcGVuZFRpbWVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzZWxmLnN0YXRlID09PSAnc3VzcGVuZGluZycpIHtcbiAgICAgICAgc2VsZi5fcmVzdW1lQWZ0ZXJTdXNwZW5kID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuICB9O1xuXG4gIC8vIFNldHVwIHRoZSBnbG9iYWwgYXVkaW8gY29udHJvbGxlci5cbiAgdmFyIEhvd2xlciA9IG5ldyBIb3dsZXJHbG9iYWwoKTtcblxuICAvKiogR3JvdXAgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGF1ZGlvIGdyb3VwIGNvbnRyb2xsZXIuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvIFBhc3NlZCBpbiBwcm9wZXJ0aWVzIGZvciB0aGlzIGdyb3VwLlxuICAgKi9cbiAgdmFyIEhvd2wgPSBmdW5jdGlvbihvKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gVGhyb3cgYW4gZXJyb3IgaWYgbm8gc291cmNlIGlzIHByb3ZpZGVkLlxuICAgIGlmICghby5zcmMgfHwgby5zcmMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdBbiBhcnJheSBvZiBzb3VyY2UgZmlsZXMgbXVzdCBiZSBwYXNzZWQgd2l0aCBhbnkgbmV3IEhvd2wuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc2VsZi5pbml0KG8pO1xuICB9O1xuICBIb3dsLnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIGEgbmV3IEhvd2wgZ3JvdXAgb2JqZWN0LlxuICAgICAqIEBwYXJhbSAge09iamVjdH0gbyBQYXNzZWQgaW4gcHJvcGVydGllcyBmb3IgdGhpcyBncm91cC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIGluaXQ6IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhbiBBdWRpb0NvbnRleHQgY3JlYXRlZCB5ZXQsIHJ1biB0aGUgc2V0dXAuXG4gICAgICBpZiAoIUhvd2xlci5jdHgpIHtcbiAgICAgICAgc2V0dXBBdWRpb0NvbnRleHQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2V0dXAgdXNlci1kZWZpbmVkIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgICAgIHNlbGYuX2F1dG9wbGF5ID0gby5hdXRvcGxheSB8fCBmYWxzZTtcbiAgICAgIHNlbGYuX2Zvcm1hdCA9ICh0eXBlb2Ygby5mb3JtYXQgIT09ICdzdHJpbmcnKSA/IG8uZm9ybWF0IDogW28uZm9ybWF0XTtcbiAgICAgIHNlbGYuX2h0bWw1ID0gby5odG1sNSB8fCBmYWxzZTtcbiAgICAgIHNlbGYuX211dGVkID0gby5tdXRlIHx8IGZhbHNlO1xuICAgICAgc2VsZi5fbG9vcCA9IG8ubG9vcCB8fCBmYWxzZTtcbiAgICAgIHNlbGYuX3Bvb2wgPSBvLnBvb2wgfHwgNTtcbiAgICAgIHNlbGYuX3ByZWxvYWQgPSAodHlwZW9mIG8ucHJlbG9hZCA9PT0gJ2Jvb2xlYW4nIHx8IG8ucHJlbG9hZCA9PT0gJ21ldGFkYXRhJykgPyBvLnByZWxvYWQgOiB0cnVlO1xuICAgICAgc2VsZi5fcmF0ZSA9IG8ucmF0ZSB8fCAxO1xuICAgICAgc2VsZi5fc3ByaXRlID0gby5zcHJpdGUgfHwge307XG4gICAgICBzZWxmLl9zcmMgPSAodHlwZW9mIG8uc3JjICE9PSAnc3RyaW5nJykgPyBvLnNyYyA6IFtvLnNyY107XG4gICAgICBzZWxmLl92b2x1bWUgPSBvLnZvbHVtZSAhPT0gdW5kZWZpbmVkID8gby52b2x1bWUgOiAxO1xuICAgICAgc2VsZi5feGhyID0ge1xuICAgICAgICBtZXRob2Q6IG8ueGhyICYmIG8ueGhyLm1ldGhvZCA/IG8ueGhyLm1ldGhvZCA6ICdHRVQnLFxuICAgICAgICBoZWFkZXJzOiBvLnhociAmJiBvLnhoci5oZWFkZXJzID8gby54aHIuaGVhZGVycyA6IG51bGwsXG4gICAgICAgIHdpdGhDcmVkZW50aWFsczogby54aHIgJiYgby54aHIud2l0aENyZWRlbnRpYWxzID8gby54aHIud2l0aENyZWRlbnRpYWxzIDogZmFsc2UsXG4gICAgICB9O1xuXG4gICAgICAvLyBTZXR1cCBhbGwgb3RoZXIgZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5fZHVyYXRpb24gPSAwO1xuICAgICAgc2VsZi5fc3RhdGUgPSAndW5sb2FkZWQnO1xuICAgICAgc2VsZi5fc291bmRzID0gW107XG4gICAgICBzZWxmLl9lbmRUaW1lcnMgPSB7fTtcbiAgICAgIHNlbGYuX3F1ZXVlID0gW107XG4gICAgICBzZWxmLl9wbGF5TG9jayA9IGZhbHNlO1xuXG4gICAgICAvLyBTZXR1cCBldmVudCBsaXN0ZW5lcnMuXG4gICAgICBzZWxmLl9vbmVuZCA9IG8ub25lbmQgPyBbe2ZuOiBvLm9uZW5kfV0gOiBbXTtcbiAgICAgIHNlbGYuX29uZmFkZSA9IG8ub25mYWRlID8gW3tmbjogby5vbmZhZGV9XSA6IFtdO1xuICAgICAgc2VsZi5fb25sb2FkID0gby5vbmxvYWQgPyBbe2ZuOiBvLm9ubG9hZH1dIDogW107XG4gICAgICBzZWxmLl9vbmxvYWRlcnJvciA9IG8ub25sb2FkZXJyb3IgPyBbe2ZuOiBvLm9ubG9hZGVycm9yfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ucGxheWVycm9yID0gby5vbnBsYXllcnJvciA/IFt7Zm46IG8ub25wbGF5ZXJyb3J9XSA6IFtdO1xuICAgICAgc2VsZi5fb25wYXVzZSA9IG8ub25wYXVzZSA/IFt7Zm46IG8ub25wYXVzZX1dIDogW107XG4gICAgICBzZWxmLl9vbnBsYXkgPSBvLm9ucGxheSA/IFt7Zm46IG8ub25wbGF5fV0gOiBbXTtcbiAgICAgIHNlbGYuX29uc3RvcCA9IG8ub25zdG9wID8gW3tmbjogby5vbnN0b3B9XSA6IFtdO1xuICAgICAgc2VsZi5fb25tdXRlID0gby5vbm11dGUgPyBbe2ZuOiBvLm9ubXV0ZX1dIDogW107XG4gICAgICBzZWxmLl9vbnZvbHVtZSA9IG8ub252b2x1bWUgPyBbe2ZuOiBvLm9udm9sdW1lfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ucmF0ZSA9IG8ub25yYXRlID8gW3tmbjogby5vbnJhdGV9XSA6IFtdO1xuICAgICAgc2VsZi5fb25zZWVrID0gby5vbnNlZWsgPyBbe2ZuOiBvLm9uc2Vla31dIDogW107XG4gICAgICBzZWxmLl9vbnVubG9jayA9IG8ub251bmxvY2sgPyBbe2ZuOiBvLm9udW5sb2NrfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ucmVzdW1lID0gW107XG5cbiAgICAgIC8vIFdlYiBBdWRpbyBvciBIVE1MNSBBdWRpbz9cbiAgICAgIHNlbGYuX3dlYkF1ZGlvID0gSG93bGVyLnVzaW5nV2ViQXVkaW8gJiYgIXNlbGYuX2h0bWw1O1xuXG4gICAgICAvLyBBdXRvbWF0aWNhbGx5IHRyeSB0byBlbmFibGUgYXVkaW8uXG4gICAgICBpZiAodHlwZW9mIEhvd2xlci5jdHggIT09ICd1bmRlZmluZWQnICYmIEhvd2xlci5jdHggJiYgSG93bGVyLmF1dG9VbmxvY2spIHtcbiAgICAgICAgSG93bGVyLl91bmxvY2tBdWRpbygpO1xuICAgICAgfVxuXG4gICAgICAvLyBLZWVwIHRyYWNrIG9mIHRoaXMgSG93bCBncm91cCBpbiB0aGUgZ2xvYmFsIGNvbnRyb2xsZXIuXG4gICAgICBIb3dsZXIuX2hvd2xzLnB1c2goc2VsZik7XG5cbiAgICAgIC8vIElmIHRoZXkgc2VsZWN0ZWQgYXV0b3BsYXksIGFkZCBhIHBsYXkgZXZlbnQgdG8gdGhlIGxvYWQgcXVldWUuXG4gICAgICBpZiAoc2VsZi5fYXV0b3BsYXkpIHtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdwbGF5JyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5wbGF5KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gTG9hZCB0aGUgc291cmNlIGZpbGUgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gICAgICBpZiAoc2VsZi5fcHJlbG9hZCAmJiBzZWxmLl9wcmVsb2FkICE9PSAnbm9uZScpIHtcbiAgICAgICAgc2VsZi5sb2FkKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBMb2FkIHRoZSBhdWRpbyBmaWxlLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBsb2FkOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciB1cmwgPSBudWxsO1xuXG4gICAgICAvLyBJZiBubyBhdWRpbyBpcyBhdmFpbGFibGUsIHF1aXQgaW1tZWRpYXRlbHkuXG4gICAgICBpZiAoSG93bGVyLm5vQXVkaW8pIHtcbiAgICAgICAgc2VsZi5fZW1pdCgnbG9hZGVycm9yJywgbnVsbCwgJ05vIGF1ZGlvIHN1cHBvcnQuJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gTWFrZSBzdXJlIG91ciBzb3VyY2UgaXMgaW4gYW4gYXJyYXkuXG4gICAgICBpZiAodHlwZW9mIHNlbGYuX3NyYyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgc2VsZi5fc3JjID0gW3NlbGYuX3NyY107XG4gICAgICB9XG5cbiAgICAgIC8vIExvb3AgdGhyb3VnaCB0aGUgc291cmNlcyBhbmQgcGljayB0aGUgZmlyc3Qgb25lIHRoYXQgaXMgY29tcGF0aWJsZS5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9zcmMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGV4dCwgc3RyO1xuXG4gICAgICAgIGlmIChzZWxmLl9mb3JtYXQgJiYgc2VsZi5fZm9ybWF0W2ldKSB7XG4gICAgICAgICAgLy8gSWYgYW4gZXh0ZW5zaW9uIHdhcyBzcGVjaWZpZWQsIHVzZSB0aGF0IGluc3RlYWQuXG4gICAgICAgICAgZXh0ID0gc2VsZi5fZm9ybWF0W2ldO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgc291cmNlIGlzIGEgc3RyaW5nLlxuICAgICAgICAgIHN0ciA9IHNlbGYuX3NyY1tpXTtcbiAgICAgICAgICBpZiAodHlwZW9mIHN0ciAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHNlbGYuX2VtaXQoJ2xvYWRlcnJvcicsIG51bGwsICdOb24tc3RyaW5nIGZvdW5kIGluIHNlbGVjdGVkIGF1ZGlvIHNvdXJjZXMgLSBpZ25vcmluZy4nKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEV4dHJhY3QgdGhlIGZpbGUgZXh0ZW5zaW9uIGZyb20gdGhlIFVSTCBvciBiYXNlNjQgZGF0YSBVUkkuXG4gICAgICAgICAgZXh0ID0gL15kYXRhOmF1ZGlvXFwvKFteOyxdKyk7L2kuZXhlYyhzdHIpO1xuICAgICAgICAgIGlmICghZXh0KSB7XG4gICAgICAgICAgICBleHQgPSAvXFwuKFteLl0rKSQvLmV4ZWMoc3RyLnNwbGl0KCc/JywgMSlbMF0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChleHQpIHtcbiAgICAgICAgICAgIGV4dCA9IGV4dFsxXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIExvZyBhIHdhcm5pbmcgaWYgbm8gZXh0ZW5zaW9uIHdhcyBmb3VuZC5cbiAgICAgICAgaWYgKCFleHQpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ05vIGZpbGUgZXh0ZW5zaW9uIHdhcyBmb3VuZC4gQ29uc2lkZXIgdXNpbmcgdGhlIFwiZm9ybWF0XCIgcHJvcGVydHkgb3Igc3BlY2lmeSBhbiBleHRlbnNpb24uJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBpZiB0aGlzIGV4dGVuc2lvbiBpcyBhdmFpbGFibGUuXG4gICAgICAgIGlmIChleHQgJiYgSG93bGVyLmNvZGVjcyhleHQpKSB7XG4gICAgICAgICAgdXJsID0gc2VsZi5fc3JjW2ldO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghdXJsKSB7XG4gICAgICAgIHNlbGYuX2VtaXQoJ2xvYWRlcnJvcicsIG51bGwsICdObyBjb2RlYyBzdXBwb3J0IGZvciBzZWxlY3RlZCBhdWRpbyBzb3VyY2VzLicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNlbGYuX3NyYyA9IHVybDtcbiAgICAgIHNlbGYuX3N0YXRlID0gJ2xvYWRpbmcnO1xuXG4gICAgICAvLyBJZiB0aGUgaG9zdGluZyBwYWdlIGlzIEhUVFBTIGFuZCB0aGUgc291cmNlIGlzbid0LFxuICAgICAgLy8gZHJvcCBkb3duIHRvIEhUTUw1IEF1ZGlvIHRvIGF2b2lkIE1peGVkIENvbnRlbnQgZXJyb3JzLlxuICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2h0dHBzOicgJiYgdXJsLnNsaWNlKDAsIDUpID09PSAnaHR0cDonKSB7XG4gICAgICAgIHNlbGYuX2h0bWw1ID0gdHJ1ZTtcbiAgICAgICAgc2VsZi5fd2ViQXVkaW8gPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIGEgbmV3IHNvdW5kIG9iamVjdCBhbmQgYWRkIGl0IHRvIHRoZSBwb29sLlxuICAgICAgbmV3IFNvdW5kKHNlbGYpO1xuXG4gICAgICAvLyBMb2FkIGFuZCBkZWNvZGUgdGhlIGF1ZGlvIGRhdGEgZm9yIHBsYXliYWNrLlxuICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgIGxvYWRCdWZmZXIoc2VsZik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQbGF5IGEgc291bmQgb3IgcmVzdW1lIHByZXZpb3VzIHBsYXliYWNrLlxuICAgICAqIEBwYXJhbSAge1N0cmluZy9OdW1iZXJ9IHNwcml0ZSAgIFNwcml0ZSBuYW1lIGZvciBzcHJpdGUgcGxheWJhY2sgb3Igc291bmQgaWQgdG8gY29udGludWUgcHJldmlvdXMuXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gaW50ZXJuYWwgSW50ZXJuYWwgVXNlOiB0cnVlIHByZXZlbnRzIGV2ZW50IGZpcmluZy5cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICAgICAgIFNvdW5kIElELlxuICAgICAqL1xuICAgIHBsYXk6IGZ1bmN0aW9uKHNwcml0ZSwgaW50ZXJuYWwpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBpZCA9IG51bGw7XG5cbiAgICAgIC8vIERldGVybWluZSBpZiBhIHNwcml0ZSwgc291bmQgaWQgb3Igbm90aGluZyB3YXMgcGFzc2VkXG4gICAgICBpZiAodHlwZW9mIHNwcml0ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgaWQgPSBzcHJpdGU7XG4gICAgICAgIHNwcml0ZSA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzcHJpdGUgPT09ICdzdHJpbmcnICYmIHNlbGYuX3N0YXRlID09PSAnbG9hZGVkJyAmJiAhc2VsZi5fc3ByaXRlW3Nwcml0ZV0pIHtcbiAgICAgICAgLy8gSWYgdGhlIHBhc3NlZCBzcHJpdGUgZG9lc24ndCBleGlzdCwgZG8gbm90aGluZy5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzcHJpdGUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8vIFVzZSB0aGUgZGVmYXVsdCBzb3VuZCBzcHJpdGUgKHBsYXlzIHRoZSBmdWxsIGF1ZGlvIGxlbmd0aCkuXG4gICAgICAgIHNwcml0ZSA9ICdfX2RlZmF1bHQnO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGEgc2luZ2xlIHBhdXNlZCBzb3VuZCB0aGF0IGlzbid0IGVuZGVkLlxuICAgICAgICAvLyBJZiB0aGVyZSBpcywgcGxheSB0aGF0IHNvdW5kLiBJZiBub3QsIGNvbnRpbnVlIGFzIHVzdWFsLlxuICAgICAgICBpZiAoIXNlbGYuX3BsYXlMb2NrKSB7XG4gICAgICAgICAgdmFyIG51bSA9IDA7XG4gICAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHNlbGYuX3NvdW5kc1tpXS5fcGF1c2VkICYmICFzZWxmLl9zb3VuZHNbaV0uX2VuZGVkKSB7XG4gICAgICAgICAgICAgIG51bSsrO1xuICAgICAgICAgICAgICBpZCA9IHNlbGYuX3NvdW5kc1tpXS5faWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKG51bSA9PT0gMSkge1xuICAgICAgICAgICAgc3ByaXRlID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWQgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBHZXQgdGhlIHNlbGVjdGVkIG5vZGUsIG9yIGdldCBvbmUgZnJvbSB0aGUgcG9vbC5cbiAgICAgIHZhciBzb3VuZCA9IGlkID8gc2VsZi5fc291bmRCeUlkKGlkKSA6IHNlbGYuX2luYWN0aXZlU291bmQoKTtcblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGRvZXNuJ3QgZXhpc3QsIGRvIG5vdGhpbmcuXG4gICAgICBpZiAoIXNvdW5kKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICAvLyBTZWxlY3QgdGhlIHNwcml0ZSBkZWZpbml0aW9uLlxuICAgICAgaWYgKGlkICYmICFzcHJpdGUpIHtcbiAgICAgICAgc3ByaXRlID0gc291bmQuX3Nwcml0ZSB8fCAnX19kZWZhdWx0JztcbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIHdlIG11c3Qgd2FpdCB0byBnZXQgdGhlIGF1ZGlvJ3MgZHVyYXRpb24uXG4gICAgICAvLyBXZSBhbHNvIG5lZWQgdG8gd2FpdCB0byBtYWtlIHN1cmUgd2UgZG9uJ3QgcnVuIGludG8gcmFjZSBjb25kaXRpb25zIHdpdGhcbiAgICAgIC8vIHRoZSBvcmRlciBvZiBmdW5jdGlvbiBjYWxscy5cbiAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgICAgLy8gU2V0IHRoZSBzcHJpdGUgdmFsdWUgb24gdGhpcyBzb3VuZC5cbiAgICAgICAgc291bmQuX3Nwcml0ZSA9IHNwcml0ZTtcblxuICAgICAgICAvLyBNYXJrIHRoaXMgc291bmQgYXMgbm90IGVuZGVkIGluIGNhc2UgYW5vdGhlciBzb3VuZCBpcyBwbGF5ZWQgYmVmb3JlIHRoaXMgb25lIGxvYWRzLlxuICAgICAgICBzb3VuZC5fZW5kZWQgPSBmYWxzZTtcblxuICAgICAgICAvLyBBZGQgdGhlIHNvdW5kIHRvIHRoZSBxdWV1ZSB0byBiZSBwbGF5ZWQgb24gbG9hZC5cbiAgICAgICAgdmFyIHNvdW5kSWQgPSBzb3VuZC5faWQ7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAncGxheScsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYucGxheShzb3VuZElkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzb3VuZElkO1xuICAgICAgfVxuXG4gICAgICAvLyBEb24ndCBwbGF5IHRoZSBzb3VuZCBpZiBhbiBpZCB3YXMgcGFzc2VkIGFuZCBpdCBpcyBhbHJlYWR5IHBsYXlpbmcuXG4gICAgICBpZiAoaWQgJiYgIXNvdW5kLl9wYXVzZWQpIHtcbiAgICAgICAgLy8gVHJpZ2dlciB0aGUgcGxheSBldmVudCwgaW4gb3JkZXIgdG8ga2VlcCBpdGVyYXRpbmcgdGhyb3VnaCBxdWV1ZS5cbiAgICAgICAgaWYgKCFpbnRlcm5hbCkge1xuICAgICAgICAgIHNlbGYuX2xvYWRRdWV1ZSgncGxheScpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNvdW5kLl9pZDtcbiAgICAgIH1cblxuICAgICAgLy8gTWFrZSBzdXJlIHRoZSBBdWRpb0NvbnRleHQgaXNuJ3Qgc3VzcGVuZGVkLCBhbmQgcmVzdW1lIGl0IGlmIGl0IGlzLlxuICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgIEhvd2xlci5fYXV0b1Jlc3VtZSgpO1xuICAgICAgfVxuXG4gICAgICAvLyBEZXRlcm1pbmUgaG93IGxvbmcgdG8gcGxheSBmb3IgYW5kIHdoZXJlIHRvIHN0YXJ0IHBsYXlpbmcuXG4gICAgICB2YXIgc2VlayA9IE1hdGgubWF4KDAsIHNvdW5kLl9zZWVrID4gMCA/IHNvdW5kLl9zZWVrIDogc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMF0gLyAxMDAwKTtcbiAgICAgIHZhciBkdXJhdGlvbiA9IE1hdGgubWF4KDAsICgoc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMF0gKyBzZWxmLl9zcHJpdGVbc3ByaXRlXVsxXSkgLyAxMDAwKSAtIHNlZWspO1xuICAgICAgdmFyIHRpbWVvdXQgPSAoZHVyYXRpb24gKiAxMDAwKSAvIE1hdGguYWJzKHNvdW5kLl9yYXRlKTtcbiAgICAgIHZhciBzdGFydCA9IHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzBdIC8gMTAwMDtcbiAgICAgIHZhciBzdG9wID0gKHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzBdICsgc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMV0pIC8gMTAwMDtcbiAgICAgIHNvdW5kLl9zcHJpdGUgPSBzcHJpdGU7XG5cbiAgICAgIC8vIE1hcmsgdGhlIHNvdW5kIGFzIGVuZGVkIGluc3RhbnRseSBzbyB0aGF0IHRoaXMgYXN5bmMgcGxheWJhY2tcbiAgICAgIC8vIGRvZXNuJ3QgZ2V0IGdyYWJiZWQgYnkgYW5vdGhlciBjYWxsIHRvIHBsYXkgd2hpbGUgdGhpcyBvbmUgd2FpdHMgdG8gc3RhcnQuXG4gICAgICBzb3VuZC5fZW5kZWQgPSBmYWxzZTtcblxuICAgICAgLy8gVXBkYXRlIHRoZSBwYXJhbWV0ZXJzIG9mIHRoZSBzb3VuZC5cbiAgICAgIHZhciBzZXRQYXJhbXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgc291bmQuX3BhdXNlZCA9IGZhbHNlO1xuICAgICAgICBzb3VuZC5fc2VlayA9IHNlZWs7XG4gICAgICAgIHNvdW5kLl9zdGFydCA9IHN0YXJ0O1xuICAgICAgICBzb3VuZC5fc3RvcCA9IHN0b3A7XG4gICAgICAgIHNvdW5kLl9sb29wID0gISEoc291bmQuX2xvb3AgfHwgc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMl0pO1xuICAgICAgfTtcblxuICAgICAgLy8gRW5kIHRoZSBzb3VuZCBpbnN0YW50bHkgaWYgc2VlayBpcyBhdCB0aGUgZW5kLlxuICAgICAgaWYgKHNlZWsgPj0gc3RvcCkge1xuICAgICAgICBzZWxmLl9lbmRlZChzb3VuZCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gQmVnaW4gdGhlIGFjdHVhbCBwbGF5YmFjay5cbiAgICAgIHZhciBub2RlID0gc291bmQuX25vZGU7XG4gICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgLy8gRmlyZSB0aGlzIHdoZW4gdGhlIHNvdW5kIGlzIHJlYWR5IHRvIHBsYXkgdG8gYmVnaW4gV2ViIEF1ZGlvIHBsYXliYWNrLlxuICAgICAgICB2YXIgcGxheVdlYkF1ZGlvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5fcGxheUxvY2sgPSBmYWxzZTtcbiAgICAgICAgICBzZXRQYXJhbXMoKTtcbiAgICAgICAgICBzZWxmLl9yZWZyZXNoQnVmZmVyKHNvdW5kKTtcblxuICAgICAgICAgIC8vIFNldHVwIHRoZSBwbGF5YmFjayBwYXJhbXMuXG4gICAgICAgICAgdmFyIHZvbCA9IChzb3VuZC5fbXV0ZWQgfHwgc2VsZi5fbXV0ZWQpID8gMCA6IHNvdW5kLl92b2x1bWU7XG4gICAgICAgICAgbm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKHZvbCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgc291bmQuX3BsYXlTdGFydCA9IEhvd2xlci5jdHguY3VycmVudFRpbWU7XG5cbiAgICAgICAgICAvLyBQbGF5IHRoZSBzb3VuZCB1c2luZyB0aGUgc3VwcG9ydGVkIG1ldGhvZC5cbiAgICAgICAgICBpZiAodHlwZW9mIG5vZGUuYnVmZmVyU291cmNlLnN0YXJ0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgc291bmQuX2xvb3AgPyBub2RlLmJ1ZmZlclNvdXJjZS5ub3RlR3JhaW5PbigwLCBzZWVrLCA4NjQwMCkgOiBub2RlLmJ1ZmZlclNvdXJjZS5ub3RlR3JhaW5PbigwLCBzZWVrLCBkdXJhdGlvbik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNvdW5kLl9sb29wID8gbm9kZS5idWZmZXJTb3VyY2Uuc3RhcnQoMCwgc2VlaywgODY0MDApIDogbm9kZS5idWZmZXJTb3VyY2Uuc3RhcnQoMCwgc2VlaywgZHVyYXRpb24pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFN0YXJ0IGEgbmV3IHRpbWVyIGlmIG5vbmUgaXMgcHJlc2VudC5cbiAgICAgICAgICBpZiAodGltZW91dCAhPT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgIHNlbGYuX2VuZFRpbWVyc1tzb3VuZC5faWRdID0gc2V0VGltZW91dChzZWxmLl9lbmRlZC5iaW5kKHNlbGYsIHNvdW5kKSwgdGltZW91dCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFpbnRlcm5hbCkge1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgc2VsZi5fZW1pdCgncGxheScsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgICAgIHNlbGYuX2xvYWRRdWV1ZSgpO1xuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChIb3dsZXIuc3RhdGUgPT09ICdydW5uaW5nJyAmJiBIb3dsZXIuY3R4LnN0YXRlICE9PSAnaW50ZXJydXB0ZWQnKSB7XG4gICAgICAgICAgcGxheVdlYkF1ZGlvKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsZi5fcGxheUxvY2sgPSB0cnVlO1xuXG4gICAgICAgICAgLy8gV2FpdCBmb3IgdGhlIGF1ZGlvIGNvbnRleHQgdG8gcmVzdW1lIGJlZm9yZSBwbGF5aW5nLlxuICAgICAgICAgIHNlbGYub25jZSgncmVzdW1lJywgcGxheVdlYkF1ZGlvKTtcblxuICAgICAgICAgIC8vIENhbmNlbCB0aGUgZW5kIHRpbWVyLlxuICAgICAgICAgIHNlbGYuX2NsZWFyVGltZXIoc291bmQuX2lkKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRmlyZSB0aGlzIHdoZW4gdGhlIHNvdW5kIGlzIHJlYWR5IHRvIHBsYXkgdG8gYmVnaW4gSFRNTDUgQXVkaW8gcGxheWJhY2suXG4gICAgICAgIHZhciBwbGF5SHRtbDUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBub2RlLmN1cnJlbnRUaW1lID0gc2VlaztcbiAgICAgICAgICBub2RlLm11dGVkID0gc291bmQuX211dGVkIHx8IHNlbGYuX211dGVkIHx8IEhvd2xlci5fbXV0ZWQgfHwgbm9kZS5tdXRlZDtcbiAgICAgICAgICBub2RlLnZvbHVtZSA9IHNvdW5kLl92b2x1bWUgKiBIb3dsZXIudm9sdW1lKCk7XG4gICAgICAgICAgbm9kZS5wbGF5YmFja1JhdGUgPSBzb3VuZC5fcmF0ZTtcblxuICAgICAgICAgIC8vIFNvbWUgYnJvd3NlcnMgd2lsbCB0aHJvdyBhbiBlcnJvciBpZiB0aGlzIGlzIGNhbGxlZCB3aXRob3V0IHVzZXIgaW50ZXJhY3Rpb24uXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBwbGF5ID0gbm9kZS5wbGF5KCk7XG5cbiAgICAgICAgICAgIC8vIFN1cHBvcnQgb2xkZXIgYnJvd3NlcnMgdGhhdCBkb24ndCBzdXBwb3J0IHByb21pc2VzLCBhbmQgdGh1cyBkb24ndCBoYXZlIHRoaXMgaXNzdWUuXG4gICAgICAgICAgICBpZiAocGxheSAmJiB0eXBlb2YgUHJvbWlzZSAhPT0gJ3VuZGVmaW5lZCcgJiYgKHBsYXkgaW5zdGFuY2VvZiBQcm9taXNlIHx8IHR5cGVvZiBwbGF5LnRoZW4gPT09ICdmdW5jdGlvbicpKSB7XG4gICAgICAgICAgICAgIC8vIEltcGxlbWVudHMgYSBsb2NrIHRvIHByZXZlbnQgRE9NRXhjZXB0aW9uOiBUaGUgcGxheSgpIHJlcXVlc3Qgd2FzIGludGVycnVwdGVkIGJ5IGEgY2FsbCB0byBwYXVzZSgpLlxuICAgICAgICAgICAgICBzZWxmLl9wbGF5TG9jayA9IHRydWU7XG5cbiAgICAgICAgICAgICAgLy8gU2V0IHBhcmFtIHZhbHVlcyBpbW1lZGlhdGVseS5cbiAgICAgICAgICAgICAgc2V0UGFyYW1zKCk7XG5cbiAgICAgICAgICAgICAgLy8gUmVsZWFzZXMgdGhlIGxvY2sgYW5kIGV4ZWN1dGVzIHF1ZXVlZCBhY3Rpb25zLlxuICAgICAgICAgICAgICBwbGF5XG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICBzZWxmLl9wbGF5TG9jayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgbm9kZS5fdW5sb2NrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgaWYgKCFpbnRlcm5hbCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLl9lbWl0KCdwbGF5Jywgc291bmQuX2lkKTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2xvYWRRdWV1ZSgpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgc2VsZi5fcGxheUxvY2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3BsYXllcnJvcicsIHNvdW5kLl9pZCwgJ1BsYXliYWNrIHdhcyB1bmFibGUgdG8gc3RhcnQuIFRoaXMgaXMgbW9zdCBjb21tb25seSBhbiBpc3N1ZSAnICtcbiAgICAgICAgICAgICAgICAgICAgJ29uIG1vYmlsZSBkZXZpY2VzIGFuZCBDaHJvbWUgd2hlcmUgcGxheWJhY2sgd2FzIG5vdCB3aXRoaW4gYSB1c2VyIGludGVyYWN0aW9uLicpO1xuXG4gICAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgZW5kZWQgYW5kIHBhdXNlZCB2YWx1ZXMuXG4gICAgICAgICAgICAgICAgICBzb3VuZC5fZW5kZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgc291bmQuX3BhdXNlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFpbnRlcm5hbCkge1xuICAgICAgICAgICAgICBzZWxmLl9wbGF5TG9jayA9IGZhbHNlO1xuICAgICAgICAgICAgICBzZXRQYXJhbXMoKTtcbiAgICAgICAgICAgICAgc2VsZi5fZW1pdCgncGxheScsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNldHRpbmcgcmF0ZSBiZWZvcmUgcGxheWluZyB3b24ndCB3b3JrIGluIElFLCBzbyB3ZSBzZXQgaXQgYWdhaW4gaGVyZS5cbiAgICAgICAgICAgIG5vZGUucGxheWJhY2tSYXRlID0gc291bmQuX3JhdGU7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZSBub2RlIGlzIHN0aWxsIHBhdXNlZCwgdGhlbiB3ZSBjYW4gYXNzdW1lIHRoZXJlIHdhcyBhIHBsYXliYWNrIGlzc3VlLlxuICAgICAgICAgICAgaWYgKG5vZGUucGF1c2VkKSB7XG4gICAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3BsYXllcnJvcicsIHNvdW5kLl9pZCwgJ1BsYXliYWNrIHdhcyB1bmFibGUgdG8gc3RhcnQuIFRoaXMgaXMgbW9zdCBjb21tb25seSBhbiBpc3N1ZSAnICtcbiAgICAgICAgICAgICAgICAnb24gbW9iaWxlIGRldmljZXMgYW5kIENocm9tZSB3aGVyZSBwbGF5YmFjayB3YXMgbm90IHdpdGhpbiBhIHVzZXIgaW50ZXJhY3Rpb24uJyk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2V0dXAgdGhlIGVuZCB0aW1lciBvbiBzcHJpdGVzIG9yIGxpc3RlbiBmb3IgdGhlIGVuZGVkIGV2ZW50LlxuICAgICAgICAgICAgaWYgKHNwcml0ZSAhPT0gJ19fZGVmYXVsdCcgfHwgc291bmQuX2xvb3ApIHtcbiAgICAgICAgICAgICAgc2VsZi5fZW5kVGltZXJzW3NvdW5kLl9pZF0gPSBzZXRUaW1lb3V0KHNlbGYuX2VuZGVkLmJpbmQoc2VsZiwgc291bmQpLCB0aW1lb3V0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNlbGYuX2VuZFRpbWVyc1tzb3VuZC5faWRdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLy8gRmlyZSBlbmRlZCBvbiB0aGlzIGF1ZGlvIG5vZGUuXG4gICAgICAgICAgICAgICAgc2VsZi5fZW5kZWQoc291bmQpO1xuXG4gICAgICAgICAgICAgICAgLy8gQ2xlYXIgdGhpcyBsaXN0ZW5lci5cbiAgICAgICAgICAgICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgc2VsZi5fZW5kVGltZXJzW3NvdW5kLl9pZF0sIGZhbHNlKTtcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKCdlbmRlZCcsIHNlbGYuX2VuZFRpbWVyc1tzb3VuZC5faWRdLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBzZWxmLl9lbWl0KCdwbGF5ZXJyb3InLCBzb3VuZC5faWQsIGVycik7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIElmIHRoaXMgaXMgc3RyZWFtaW5nIGF1ZGlvLCBtYWtlIHN1cmUgdGhlIHNyYyBpcyBzZXQgYW5kIGxvYWQgYWdhaW4uXG4gICAgICAgIGlmIChub2RlLnNyYyA9PT0gJ2RhdGE6YXVkaW8vd2F2O2Jhc2U2NCxVa2xHUmlnQUFBQlhRVlpGWm0xMElCSUFBQUFCQUFFQVJLd0FBSWhZQVFBQ0FCQUFBQUJrWVhSaEFnQUFBQUVBJykge1xuICAgICAgICAgIG5vZGUuc3JjID0gc2VsZi5fc3JjO1xuICAgICAgICAgIG5vZGUubG9hZCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUGxheSBpbW1lZGlhdGVseSBpZiByZWFkeSwgb3Igd2FpdCBmb3IgdGhlICdjYW5wbGF5dGhyb3VnaCdlIHZlbnQuXG4gICAgICAgIHZhciBsb2FkZWROb1JlYWR5U3RhdGUgPSAod2luZG93ICYmIHdpbmRvdy5lamVjdGEpIHx8ICghbm9kZS5yZWFkeVN0YXRlICYmIEhvd2xlci5fbmF2aWdhdG9yLmlzQ29jb29uSlMpO1xuICAgICAgICBpZiAobm9kZS5yZWFkeVN0YXRlID49IDMgfHwgbG9hZGVkTm9SZWFkeVN0YXRlKSB7XG4gICAgICAgICAgcGxheUh0bWw1KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsZi5fcGxheUxvY2sgPSB0cnVlO1xuICAgICAgICAgIHNlbGYuX3N0YXRlID0gJ2xvYWRpbmcnO1xuXG4gICAgICAgICAgdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLl9zdGF0ZSA9ICdsb2FkZWQnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBCZWdpbiBwbGF5YmFjay5cbiAgICAgICAgICAgIHBsYXlIdG1sNSgpO1xuXG4gICAgICAgICAgICAvLyBDbGVhciB0aGlzIGxpc3RlbmVyLlxuICAgICAgICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKEhvd2xlci5fY2FuUGxheUV2ZW50LCBsaXN0ZW5lciwgZmFsc2UpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKEhvd2xlci5fY2FuUGxheUV2ZW50LCBsaXN0ZW5lciwgZmFsc2UpO1xuXG4gICAgICAgICAgLy8gQ2FuY2VsIHRoZSBlbmQgdGltZXIuXG4gICAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihzb3VuZC5faWQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzb3VuZC5faWQ7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFBhdXNlIHBsYXliYWNrIGFuZCBzYXZlIGN1cnJlbnQgcG9zaXRpb24uXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBUaGUgc291bmQgSUQgKGVtcHR5IHRvIHBhdXNlIGFsbCBpbiBncm91cCkuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBwYXVzZTogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQgb3IgYSBwbGF5KCkgcHJvbWlzZSBpcyBwZW5kaW5nLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gcGF1c2Ugd2hlbiBjYXBhYmxlLlxuICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJyB8fCBzZWxmLl9wbGF5TG9jaykge1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ3BhdXNlJyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5wYXVzZShpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gaWQgaXMgcGFzc2VkLCBnZXQgYWxsIElEJ3MgdG8gYmUgcGF1c2VkLlxuICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcblxuICAgICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBDbGVhciB0aGUgZW5kIHRpbWVyLlxuICAgICAgICBzZWxmLl9jbGVhclRpbWVyKGlkc1tpXSk7XG5cbiAgICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgICAgaWYgKHNvdW5kICYmICFzb3VuZC5fcGF1c2VkKSB7XG4gICAgICAgICAgLy8gUmVzZXQgdGhlIHNlZWsgcG9zaXRpb24uXG4gICAgICAgICAgc291bmQuX3NlZWsgPSBzZWxmLnNlZWsoaWRzW2ldKTtcbiAgICAgICAgICBzb3VuZC5fcmF0ZVNlZWsgPSAwO1xuICAgICAgICAgIHNvdW5kLl9wYXVzZWQgPSB0cnVlO1xuXG4gICAgICAgICAgLy8gU3RvcCBjdXJyZW50bHkgcnVubmluZyBmYWRlcy5cbiAgICAgICAgICBzZWxmLl9zdG9wRmFkZShpZHNbaV0pO1xuXG4gICAgICAgICAgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBzb3VuZCBoYXMgYmVlbiBjcmVhdGVkLlxuICAgICAgICAgICAgICBpZiAoIXNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2Uuc3RvcCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2Uubm90ZU9mZigwKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2Uuc3RvcCgwKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIENsZWFuIHVwIHRoZSBidWZmZXIgc291cmNlLlxuICAgICAgICAgICAgICBzZWxmLl9jbGVhbkJ1ZmZlcihzb3VuZC5fbm9kZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFpc05hTihzb3VuZC5fbm9kZS5kdXJhdGlvbikgfHwgc291bmQuX25vZGUuZHVyYXRpb24gPT09IEluZmluaXR5KSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLnBhdXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gRmlyZSB0aGUgcGF1c2UgZXZlbnQsIHVubGVzcyBgdHJ1ZWAgaXMgcGFzc2VkIGFzIHRoZSAybmQgYXJndW1lbnQuXG4gICAgICAgIGlmICghYXJndW1lbnRzWzFdKSB7XG4gICAgICAgICAgc2VsZi5fZW1pdCgncGF1c2UnLCBzb3VuZCA/IHNvdW5kLl9pZCA6IG51bGwpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTdG9wIHBsYXliYWNrIGFuZCByZXNldCB0byBzdGFydC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIFRoZSBzb3VuZCBJRCAoZW1wdHkgdG8gc3RvcCBhbGwgaW4gZ3JvdXApLlxuICAgICAqIEBwYXJhbSAge0Jvb2xlYW59IGludGVybmFsIEludGVybmFsIFVzZTogdHJ1ZSBwcmV2ZW50cyBldmVudCBmaXJpbmcuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBzdG9wOiBmdW5jdGlvbihpZCwgaW50ZXJuYWwpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBzdG9wIHdoZW4gY2FwYWJsZS5cbiAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcgfHwgc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdzdG9wJyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5zdG9wKGlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyBpZCBpcyBwYXNzZWQsIGdldCBhbGwgSUQncyB0byBiZSBzdG9wcGVkLlxuICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcblxuICAgICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBDbGVhciB0aGUgZW5kIHRpbWVyLlxuICAgICAgICBzZWxmLl9jbGVhclRpbWVyKGlkc1tpXSk7XG5cbiAgICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgICAgLy8gUmVzZXQgdGhlIHNlZWsgcG9zaXRpb24uXG4gICAgICAgICAgc291bmQuX3NlZWsgPSBzb3VuZC5fc3RhcnQgfHwgMDtcbiAgICAgICAgICBzb3VuZC5fcmF0ZVNlZWsgPSAwO1xuICAgICAgICAgIHNvdW5kLl9wYXVzZWQgPSB0cnVlO1xuICAgICAgICAgIHNvdW5kLl9lbmRlZCA9IHRydWU7XG5cbiAgICAgICAgICAvLyBTdG9wIGN1cnJlbnRseSBydW5uaW5nIGZhZGVzLlxuICAgICAgICAgIHNlbGYuX3N0b3BGYWRlKGlkc1tpXSk7XG5cbiAgICAgICAgICBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIHNvdW5kJ3MgQXVkaW9CdWZmZXJTb3VyY2VOb2RlIGhhcyBiZWVuIGNyZWF0ZWQuXG4gICAgICAgICAgICAgIGlmIChzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5zdG9wID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLm5vdGVPZmYoMCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5zdG9wKDApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIENsZWFuIHVwIHRoZSBidWZmZXIgc291cmNlLlxuICAgICAgICAgICAgICAgIHNlbGYuX2NsZWFuQnVmZmVyKHNvdW5kLl9ub2RlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICghaXNOYU4oc291bmQuX25vZGUuZHVyYXRpb24pIHx8IHNvdW5kLl9ub2RlLmR1cmF0aW9uID09PSBJbmZpbml0eSkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5jdXJyZW50VGltZSA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5wYXVzZSgpO1xuXG4gICAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgYSBsaXZlIHN0cmVhbSwgc3RvcCBkb3dubG9hZCBvbmNlIHRoZSBhdWRpbyBpcyBzdG9wcGVkLlxuICAgICAgICAgICAgICBpZiAoc291bmQuX25vZGUuZHVyYXRpb24gPT09IEluZmluaXR5KSB7XG4gICAgICAgICAgICAgICAgc2VsZi5fY2xlYXJTb3VuZChzb3VuZC5fbm9kZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWludGVybmFsKSB7XG4gICAgICAgICAgICBzZWxmLl9lbWl0KCdzdG9wJywgc291bmQuX2lkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIE11dGUvdW5tdXRlIGEgc2luZ2xlIHNvdW5kIG9yIGFsbCBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAqIEBwYXJhbSAge0Jvb2xlYW59IG11dGVkIFNldCB0byB0cnVlIHRvIG11dGUgYW5kIGZhbHNlIHRvIHVubXV0ZS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkICAgIFRoZSBzb3VuZCBJRCB0byB1cGRhdGUgKG9taXQgdG8gbXV0ZS91bm11dGUgYWxsKS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIG11dGU6IGZ1bmN0aW9uKG11dGVkLCBpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIG11dGUgd2hlbiBjYXBhYmxlLlxuICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJ3x8IHNlbGYuX3BsYXlMb2NrKSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAnbXV0ZScsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYubXV0ZShtdXRlZCwgaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIGFwcGx5aW5nIG11dGUvdW5tdXRlIHRvIGFsbCBzb3VuZHMsIHVwZGF0ZSB0aGUgZ3JvdXAncyB2YWx1ZS5cbiAgICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbXV0ZWQgPT09ICdib29sZWFuJykge1xuICAgICAgICAgIHNlbGYuX211dGVkID0gbXV0ZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuX211dGVkO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5vIGlkIGlzIHBhc3NlZCwgZ2V0IGFsbCBJRCdzIHRvIGJlIG11dGVkLlxuICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcblxuICAgICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgICBzb3VuZC5fbXV0ZWQgPSBtdXRlZDtcblxuICAgICAgICAgIC8vIENhbmNlbCBhY3RpdmUgZmFkZSBhbmQgc2V0IHRoZSB2b2x1bWUgdG8gdGhlIGVuZCB2YWx1ZS5cbiAgICAgICAgICBpZiAoc291bmQuX2ludGVydmFsKSB7XG4gICAgICAgICAgICBzZWxmLl9zdG9wRmFkZShzb3VuZC5faWQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgc291bmQuX25vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZShtdXRlZCA/IDAgOiBzb3VuZC5fdm9sdW1lLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICBzb3VuZC5fbm9kZS5tdXRlZCA9IEhvd2xlci5fbXV0ZWQgPyB0cnVlIDogbXV0ZWQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5fZW1pdCgnbXV0ZScsIHNvdW5kLl9pZCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldC9zZXQgdGhlIHZvbHVtZSBvZiB0aGlzIHNvdW5kIG9yIG9mIHRoZSBIb3dsIGdyb3VwLiBUaGlzIG1ldGhvZCBjYW4gb3B0aW9uYWxseSB0YWtlIDAsIDEgb3IgMiBhcmd1bWVudHMuXG4gICAgICogICB2b2x1bWUoKSAtPiBSZXR1cm5zIHRoZSBncm91cCdzIHZvbHVtZSB2YWx1ZS5cbiAgICAgKiAgIHZvbHVtZShpZCkgLT4gUmV0dXJucyB0aGUgc291bmQgaWQncyBjdXJyZW50IHZvbHVtZS5cbiAgICAgKiAgIHZvbHVtZSh2b2wpIC0+IFNldHMgdGhlIHZvbHVtZSBvZiBhbGwgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICAgKiAgIHZvbHVtZSh2b2wsIGlkKSAtPiBTZXRzIHRoZSB2b2x1bWUgb2YgcGFzc2VkIHNvdW5kIGlkLlxuICAgICAqIEByZXR1cm4ge0hvd2wvTnVtYmVyfSBSZXR1cm5zIHNlbGYgb3IgY3VycmVudCB2b2x1bWUuXG4gICAgICovXG4gICAgdm9sdW1lOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgdmFyIHZvbCwgaWQ7XG5cbiAgICAgIC8vIERldGVybWluZSB0aGUgdmFsdWVzIGJhc2VkIG9uIGFyZ3VtZW50cy5cbiAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBSZXR1cm4gdGhlIHZhbHVlIG9mIHRoZSBncm91cHMnIHZvbHVtZS5cbiAgICAgICAgcmV0dXJuIHNlbGYuX3ZvbHVtZTtcbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDEgfHwgYXJncy5sZW5ndGggPT09IDIgJiYgdHlwZW9mIGFyZ3NbMV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8vIEZpcnN0IGNoZWNrIGlmIHRoaXMgaXMgYW4gSUQsIGFuZCBpZiBub3QsIGFzc3VtZSBpdCBpcyBhIG5ldyB2b2x1bWUuXG4gICAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcygpO1xuICAgICAgICB2YXIgaW5kZXggPSBpZHMuaW5kZXhPZihhcmdzWzBdKTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMF0sIDEwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2b2wgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID49IDIpIHtcbiAgICAgICAgdm9sID0gcGFyc2VGbG9hdChhcmdzWzBdKTtcbiAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzFdLCAxMCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgdm9sdW1lIG9yIHJldHVybiB0aGUgY3VycmVudCB2b2x1bWUuXG4gICAgICB2YXIgc291bmQ7XG4gICAgICBpZiAodHlwZW9mIHZvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgdm9sID49IDAgJiYgdm9sIDw9IDEpIHtcbiAgICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBjaGFuZ2Ugdm9sdW1lIHdoZW4gY2FwYWJsZS5cbiAgICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJ3x8IHNlbGYuX3BsYXlMb2NrKSB7XG4gICAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgICBldmVudDogJ3ZvbHVtZScsXG4gICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBzZWxmLnZvbHVtZS5hcHBseShzZWxmLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0IHRoZSBncm91cCB2b2x1bWUuXG4gICAgICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc2VsZi5fdm9sdW1lID0gdm9sO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVXBkYXRlIG9uZSBvciBhbGwgdm9sdW1lcy5cbiAgICAgICAgaWQgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxpZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRbaV0pO1xuXG4gICAgICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgICAgICBzb3VuZC5fdm9sdW1lID0gdm9sO1xuXG4gICAgICAgICAgICAvLyBTdG9wIGN1cnJlbnRseSBydW5uaW5nIGZhZGVzLlxuICAgICAgICAgICAgaWYgKCFhcmdzWzJdKSB7XG4gICAgICAgICAgICAgIHNlbGYuX3N0b3BGYWRlKGlkW2ldKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmIHNvdW5kLl9ub2RlICYmICFzb3VuZC5fbXV0ZWQpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSh2b2wsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzb3VuZC5fbm9kZSAmJiAhc291bmQuX211dGVkKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLnZvbHVtZSA9IHZvbCAqIEhvd2xlci52b2x1bWUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZi5fZW1pdCgndm9sdW1lJywgc291bmQuX2lkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNvdW5kID0gaWQgPyBzZWxmLl9zb3VuZEJ5SWQoaWQpIDogc2VsZi5fc291bmRzWzBdO1xuICAgICAgICByZXR1cm4gc291bmQgPyBzb3VuZC5fdm9sdW1lIDogMDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEZhZGUgYSBjdXJyZW50bHkgcGxheWluZyBzb3VuZCBiZXR3ZWVuIHR3byB2b2x1bWVzIChpZiBubyBpZCBpcyBwYXNzZWQsIGFsbCBzb3VuZHMgd2lsbCBmYWRlKS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGZyb20gVGhlIHZhbHVlIHRvIGZhZGUgZnJvbSAoMC4wIHRvIDEuMCkuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSB0byAgIFRoZSB2b2x1bWUgdG8gZmFkZSB0byAoMC4wIHRvIDEuMCkuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBsZW4gIFRpbWUgaW4gbWlsbGlzZWNvbmRzIHRvIGZhZGUuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAgIFRoZSBzb3VuZCBpZCAob21pdCB0byBmYWRlIGFsbCBzb3VuZHMpLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgZmFkZTogZnVuY3Rpb24oZnJvbSwgdG8sIGxlbiwgaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBmYWRlIHdoZW4gY2FwYWJsZS5cbiAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcgfHwgc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdmYWRlJyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5mYWRlKGZyb20sIHRvLCBsZW4sIGlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBNYWtlIHN1cmUgdGhlIHRvL2Zyb20vbGVuIHZhbHVlcyBhcmUgbnVtYmVycy5cbiAgICAgIGZyb20gPSBNYXRoLm1pbihNYXRoLm1heCgwLCBwYXJzZUZsb2F0KGZyb20pKSwgMSk7XG4gICAgICB0byA9IE1hdGgubWluKE1hdGgubWF4KDAsIHBhcnNlRmxvYXQodG8pKSwgMSk7XG4gICAgICBsZW4gPSBwYXJzZUZsb2F0KGxlbik7XG5cbiAgICAgIC8vIFNldCB0aGUgdm9sdW1lIHRvIHRoZSBzdGFydCBwb3NpdGlvbi5cbiAgICAgIHNlbGYudm9sdW1lKGZyb20sIGlkKTtcblxuICAgICAgLy8gRmFkZSB0aGUgdm9sdW1lIG9mIG9uZSBvciBhbGwgc291bmRzLlxuICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgbGluZWFyIGZhZGUgb3IgZmFsbCBiYWNrIHRvIHRpbWVvdXRzIHdpdGggSFRNTDUgQXVkaW8uXG4gICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgIC8vIFN0b3AgdGhlIHByZXZpb3VzIGZhZGUgaWYgbm8gc3ByaXRlIGlzIGJlaW5nIHVzZWQgKG90aGVyd2lzZSwgdm9sdW1lIGhhbmRsZXMgdGhpcykuXG4gICAgICAgICAgaWYgKCFpZCkge1xuICAgICAgICAgICAgc2VsZi5fc3RvcEZhZGUoaWRzW2ldKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBJZiB3ZSBhcmUgdXNpbmcgV2ViIEF1ZGlvLCBsZXQgdGhlIG5hdGl2ZSBtZXRob2RzIGRvIHRoZSBhY3R1YWwgZmFkZS5cbiAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgIXNvdW5kLl9tdXRlZCkge1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRUaW1lID0gSG93bGVyLmN0eC5jdXJyZW50VGltZTtcbiAgICAgICAgICAgIHZhciBlbmQgPSBjdXJyZW50VGltZSArIChsZW4gLyAxMDAwKTtcbiAgICAgICAgICAgIHNvdW5kLl92b2x1bWUgPSBmcm9tO1xuICAgICAgICAgICAgc291bmQuX25vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZShmcm9tLCBjdXJyZW50VGltZSk7XG4gICAgICAgICAgICBzb3VuZC5fbm9kZS5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKHRvLCBlbmQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuX3N0YXJ0RmFkZUludGVydmFsKHNvdW5kLCBmcm9tLCB0bywgbGVuLCBpZHNbaV0sIHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTdGFydHMgdGhlIGludGVybmFsIGludGVydmFsIHRvIGZhZGUgYSBzb3VuZC5cbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IHNvdW5kIFJlZmVyZW5jZSB0byBzb3VuZCB0byBmYWRlLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gZnJvbSBUaGUgdmFsdWUgdG8gZmFkZSBmcm9tICgwLjAgdG8gMS4wKS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHRvICAgVGhlIHZvbHVtZSB0byBmYWRlIHRvICgwLjAgdG8gMS4wKS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGxlbiAgVGltZSBpbiBtaWxsaXNlY29uZHMgdG8gZmFkZS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkICAgVGhlIHNvdW5kIGlkIHRvIGZhZGUuXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gaXNHcm91cCAgIElmIHRydWUsIHNldCB0aGUgdm9sdW1lIG9uIHRoZSBncm91cC5cbiAgICAgKi9cbiAgICBfc3RhcnRGYWRlSW50ZXJ2YWw6IGZ1bmN0aW9uKHNvdW5kLCBmcm9tLCB0bywgbGVuLCBpZCwgaXNHcm91cCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHZvbCA9IGZyb207XG4gICAgICB2YXIgZGlmZiA9IHRvIC0gZnJvbTtcbiAgICAgIHZhciBzdGVwcyA9IE1hdGguYWJzKGRpZmYgLyAwLjAxKTtcbiAgICAgIHZhciBzdGVwTGVuID0gTWF0aC5tYXgoNCwgKHN0ZXBzID4gMCkgPyBsZW4gLyBzdGVwcyA6IGxlbik7XG4gICAgICB2YXIgbGFzdFRpY2sgPSBEYXRlLm5vdygpO1xuXG4gICAgICAvLyBTdG9yZSB0aGUgdmFsdWUgYmVpbmcgZmFkZWQgdG8uXG4gICAgICBzb3VuZC5fZmFkZVRvID0gdG87XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgdm9sdW1lIHZhbHVlIG9uIGVhY2ggaW50ZXJ2YWwgdGljay5cbiAgICAgIHNvdW5kLl9pbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBVcGRhdGUgdGhlIHZvbHVtZSBiYXNlZCBvbiB0aGUgdGltZSBzaW5jZSB0aGUgbGFzdCB0aWNrLlxuICAgICAgICB2YXIgdGljayA9IChEYXRlLm5vdygpIC0gbGFzdFRpY2spIC8gbGVuO1xuICAgICAgICBsYXN0VGljayA9IERhdGUubm93KCk7XG4gICAgICAgIHZvbCArPSBkaWZmICogdGljaztcblxuICAgICAgICAvLyBSb3VuZCB0byB3aXRoaW4gMiBkZWNpbWFsIHBvaW50cy5cbiAgICAgICAgdm9sID0gTWF0aC5yb3VuZCh2b2wgKiAxMDApIC8gMTAwO1xuXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgdm9sdW1lIGlzIGluIHRoZSByaWdodCBib3VuZHMuXG4gICAgICAgIGlmIChkaWZmIDwgMCkge1xuICAgICAgICAgIHZvbCA9IE1hdGgubWF4KHRvLCB2b2wpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZvbCA9IE1hdGgubWluKHRvLCB2b2wpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hhbmdlIHRoZSB2b2x1bWUuXG4gICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgIHNvdW5kLl92b2x1bWUgPSB2b2w7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsZi52b2x1bWUodm9sLCBzb3VuZC5faWQsIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0IHRoZSBncm91cCdzIHZvbHVtZS5cbiAgICAgICAgaWYgKGlzR3JvdXApIHtcbiAgICAgICAgICBzZWxmLl92b2x1bWUgPSB2b2w7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXaGVuIHRoZSBmYWRlIGlzIGNvbXBsZXRlLCBzdG9wIGl0IGFuZCBmaXJlIGV2ZW50LlxuICAgICAgICBpZiAoKHRvIDwgZnJvbSAmJiB2b2wgPD0gdG8pIHx8ICh0byA+IGZyb20gJiYgdm9sID49IHRvKSkge1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwoc291bmQuX2ludGVydmFsKTtcbiAgICAgICAgICBzb3VuZC5faW50ZXJ2YWwgPSBudWxsO1xuICAgICAgICAgIHNvdW5kLl9mYWRlVG8gPSBudWxsO1xuICAgICAgICAgIHNlbGYudm9sdW1lKHRvLCBzb3VuZC5faWQpO1xuICAgICAgICAgIHNlbGYuX2VtaXQoJ2ZhZGUnLCBzb3VuZC5faWQpO1xuICAgICAgICB9XG4gICAgICB9LCBzdGVwTGVuKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgbWV0aG9kIHRoYXQgc3RvcHMgdGhlIGN1cnJlbnRseSBwbGF5aW5nIGZhZGUgd2hlblxuICAgICAqIGEgbmV3IGZhZGUgc3RhcnRzLCB2b2x1bWUgaXMgY2hhbmdlZCBvciB0aGUgc291bmQgaXMgc3RvcHBlZC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIFRoZSBzb3VuZCBpZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9zdG9wRmFkZTogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZCk7XG5cbiAgICAgIGlmIChzb3VuZCAmJiBzb3VuZC5faW50ZXJ2YWwpIHtcbiAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgc291bmQuX25vZGUuZ2Fpbi5jYW5jZWxTY2hlZHVsZWRWYWx1ZXMoSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgIH1cblxuICAgICAgICBjbGVhckludGVydmFsKHNvdW5kLl9pbnRlcnZhbCk7XG4gICAgICAgIHNvdW5kLl9pbnRlcnZhbCA9IG51bGw7XG4gICAgICAgIHNlbGYudm9sdW1lKHNvdW5kLl9mYWRlVG8sIGlkKTtcbiAgICAgICAgc291bmQuX2ZhZGVUbyA9IG51bGw7XG4gICAgICAgIHNlbGYuX2VtaXQoJ2ZhZGUnLCBpZCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQvc2V0IHRoZSBsb29wIHBhcmFtZXRlciBvbiBhIHNvdW5kLiBUaGlzIG1ldGhvZCBjYW4gb3B0aW9uYWxseSB0YWtlIDAsIDEgb3IgMiBhcmd1bWVudHMuXG4gICAgICogICBsb29wKCkgLT4gUmV0dXJucyB0aGUgZ3JvdXAncyBsb29wIHZhbHVlLlxuICAgICAqICAgbG9vcChpZCkgLT4gUmV0dXJucyB0aGUgc291bmQgaWQncyBsb29wIHZhbHVlLlxuICAgICAqICAgbG9vcChsb29wKSAtPiBTZXRzIHRoZSBsb29wIHZhbHVlIGZvciBhbGwgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICAgKiAgIGxvb3AobG9vcCwgaWQpIC0+IFNldHMgdGhlIGxvb3AgdmFsdWUgb2YgcGFzc2VkIHNvdW5kIGlkLlxuICAgICAqIEByZXR1cm4ge0hvd2wvQm9vbGVhbn0gUmV0dXJucyBzZWxmIG9yIGN1cnJlbnQgbG9vcCB2YWx1ZS5cbiAgICAgKi9cbiAgICBsb29wOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgdmFyIGxvb3AsIGlkLCBzb3VuZDtcblxuICAgICAgLy8gRGV0ZXJtaW5lIHRoZSB2YWx1ZXMgZm9yIGxvb3AgYW5kIGlkLlxuICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIFJldHVybiB0aGUgZ3JvdSdzIGxvb3AgdmFsdWUuXG4gICAgICAgIHJldHVybiBzZWxmLl9sb29wO1xuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09ICdib29sZWFuJykge1xuICAgICAgICAgIGxvb3AgPSBhcmdzWzBdO1xuICAgICAgICAgIHNlbGYuX2xvb3AgPSBsb29wO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFJldHVybiB0aGlzIHNvdW5kJ3MgbG9vcCB2YWx1ZS5cbiAgICAgICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChwYXJzZUludChhcmdzWzBdLCAxMCkpO1xuICAgICAgICAgIHJldHVybiBzb3VuZCA/IHNvdW5kLl9sb29wIDogZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgbG9vcCA9IGFyZ3NbMF07XG4gICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1sxXSwgMTApO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyBpZCBpcyBwYXNzZWQsIGdldCBhbGwgSUQncyB0byBiZSBsb29wZWQuXG4gICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgIHNvdW5kLl9sb29wID0gbG9vcDtcbiAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUgJiYgc291bmQuX25vZGUuYnVmZmVyU291cmNlKSB7XG4gICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcCA9IGxvb3A7XG4gICAgICAgICAgICBpZiAobG9vcCkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcFN0YXJ0ID0gc291bmQuX3N0YXJ0IHx8IDA7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5sb29wRW5kID0gc291bmQuX3N0b3A7XG5cbiAgICAgICAgICAgICAgLy8gSWYgcGxheWluZywgcmVzdGFydCBwbGF5YmFjayB0byBlbnN1cmUgbG9vcGluZyB1cGRhdGVzLlxuICAgICAgICAgICAgICBpZiAoc2VsZi5wbGF5aW5nKGlkc1tpXSkpIHtcbiAgICAgICAgICAgICAgICBzZWxmLnBhdXNlKGlkc1tpXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgc2VsZi5wbGF5KGlkc1tpXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldC9zZXQgdGhlIHBsYXliYWNrIHJhdGUgb2YgYSBzb3VuZC4gVGhpcyBtZXRob2QgY2FuIG9wdGlvbmFsbHkgdGFrZSAwLCAxIG9yIDIgYXJndW1lbnRzLlxuICAgICAqICAgcmF0ZSgpIC0+IFJldHVybnMgdGhlIGZpcnN0IHNvdW5kIG5vZGUncyBjdXJyZW50IHBsYXliYWNrIHJhdGUuXG4gICAgICogICByYXRlKGlkKSAtPiBSZXR1cm5zIHRoZSBzb3VuZCBpZCdzIGN1cnJlbnQgcGxheWJhY2sgcmF0ZS5cbiAgICAgKiAgIHJhdGUocmF0ZSkgLT4gU2V0cyB0aGUgcGxheWJhY2sgcmF0ZSBvZiBhbGwgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICAgKiAgIHJhdGUocmF0ZSwgaWQpIC0+IFNldHMgdGhlIHBsYXliYWNrIHJhdGUgb2YgcGFzc2VkIHNvdW5kIGlkLlxuICAgICAqIEByZXR1cm4ge0hvd2wvTnVtYmVyfSBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgcGxheWJhY2sgcmF0ZS5cbiAgICAgKi9cbiAgICByYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgdmFyIHJhdGUsIGlkO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIHZhbHVlcyBiYXNlZCBvbiBhcmd1bWVudHMuXG4gICAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gV2Ugd2lsbCBzaW1wbHkgcmV0dXJuIHRoZSBjdXJyZW50IHJhdGUgb2YgdGhlIGZpcnN0IG5vZGUuXG4gICAgICAgIGlkID0gc2VsZi5fc291bmRzWzBdLl9pZDtcbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgLy8gRmlyc3QgY2hlY2sgaWYgdGhpcyBpcyBhbiBJRCwgYW5kIGlmIG5vdCwgYXNzdW1lIGl0IGlzIGEgbmV3IHJhdGUgdmFsdWUuXG4gICAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcygpO1xuICAgICAgICB2YXIgaW5kZXggPSBpZHMuaW5kZXhPZihhcmdzWzBdKTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMF0sIDEwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByYXRlID0gcGFyc2VGbG9hdChhcmdzWzBdKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICByYXRlID0gcGFyc2VGbG9hdChhcmdzWzBdKTtcbiAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzFdLCAxMCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgcGxheWJhY2sgcmF0ZSBvciByZXR1cm4gdGhlIGN1cnJlbnQgdmFsdWUuXG4gICAgICB2YXIgc291bmQ7XG4gICAgICBpZiAodHlwZW9mIHJhdGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gY2hhbmdlIHBsYXliYWNrIHJhdGUgd2hlbiBjYXBhYmxlLlxuICAgICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnIHx8IHNlbGYuX3BsYXlMb2NrKSB7XG4gICAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgICBldmVudDogJ3JhdGUnLFxuICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgc2VsZi5yYXRlLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXQgdGhlIGdyb3VwIHJhdGUuXG4gICAgICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc2VsZi5fcmF0ZSA9IHJhdGU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVcGRhdGUgb25lIG9yIGFsbCB2b2x1bWVzLlxuICAgICAgICBpZCA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPGlkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZFtpXSk7XG5cbiAgICAgICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgICAgIC8vIEtlZXAgdHJhY2sgb2Ygb3VyIHBvc2l0aW9uIHdoZW4gdGhlIHJhdGUgY2hhbmdlZCBhbmQgdXBkYXRlIHRoZSBwbGF5YmFja1xuICAgICAgICAgICAgLy8gc3RhcnQgcG9zaXRpb24gc28gd2UgY2FuIHByb3Blcmx5IGFkanVzdCB0aGUgc2VlayBwb3NpdGlvbiBmb3IgdGltZSBlbGFwc2VkLlxuICAgICAgICAgICAgaWYgKHNlbGYucGxheWluZyhpZFtpXSkpIHtcbiAgICAgICAgICAgICAgc291bmQuX3JhdGVTZWVrID0gc2VsZi5zZWVrKGlkW2ldKTtcbiAgICAgICAgICAgICAgc291bmQuX3BsYXlTdGFydCA9IHNlbGYuX3dlYkF1ZGlvID8gSG93bGVyLmN0eC5jdXJyZW50VGltZSA6IHNvdW5kLl9wbGF5U3RhcnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzb3VuZC5fcmF0ZSA9IHJhdGU7XG5cbiAgICAgICAgICAgIC8vIENoYW5nZSB0aGUgcGxheWJhY2sgcmF0ZS5cbiAgICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBzb3VuZC5fbm9kZSAmJiBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLnBsYXliYWNrUmF0ZS5zZXRWYWx1ZUF0VGltZShyYXRlLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUucGxheWJhY2tSYXRlID0gcmF0ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gUmVzZXQgdGhlIHRpbWVycy5cbiAgICAgICAgICAgIHZhciBzZWVrID0gc2VsZi5zZWVrKGlkW2ldKTtcbiAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9ICgoc2VsZi5fc3ByaXRlW3NvdW5kLl9zcHJpdGVdWzBdICsgc2VsZi5fc3ByaXRlW3NvdW5kLl9zcHJpdGVdWzFdKSAvIDEwMDApIC0gc2VlaztcbiAgICAgICAgICAgIHZhciB0aW1lb3V0ID0gKGR1cmF0aW9uICogMTAwMCkgLyBNYXRoLmFicyhzb3VuZC5fcmF0ZSk7XG5cbiAgICAgICAgICAgIC8vIFN0YXJ0IGEgbmV3IGVuZCB0aW1lciBpZiBzb3VuZCBpcyBhbHJlYWR5IHBsYXlpbmcuXG4gICAgICAgICAgICBpZiAoc2VsZi5fZW5kVGltZXJzW2lkW2ldXSB8fCAhc291bmQuX3BhdXNlZCkge1xuICAgICAgICAgICAgICBzZWxmLl9jbGVhclRpbWVyKGlkW2ldKTtcbiAgICAgICAgICAgICAgc2VsZi5fZW5kVGltZXJzW2lkW2ldXSA9IHNldFRpbWVvdXQoc2VsZi5fZW5kZWQuYmluZChzZWxmLCBzb3VuZCksIHRpbWVvdXQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZWxmLl9lbWl0KCdyYXRlJywgc291bmQuX2lkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcbiAgICAgICAgcmV0dXJuIHNvdW5kID8gc291bmQuX3JhdGUgOiBzZWxmLl9yYXRlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCB0aGUgc2VlayBwb3NpdGlvbiBvZiBhIHNvdW5kLiBUaGlzIG1ldGhvZCBjYW4gb3B0aW9uYWxseSB0YWtlIDAsIDEgb3IgMiBhcmd1bWVudHMuXG4gICAgICogICBzZWVrKCkgLT4gUmV0dXJucyB0aGUgZmlyc3Qgc291bmQgbm9kZSdzIGN1cnJlbnQgc2VlayBwb3NpdGlvbi5cbiAgICAgKiAgIHNlZWsoaWQpIC0+IFJldHVybnMgdGhlIHNvdW5kIGlkJ3MgY3VycmVudCBzZWVrIHBvc2l0aW9uLlxuICAgICAqICAgc2VlayhzZWVrKSAtPiBTZXRzIHRoZSBzZWVrIHBvc2l0aW9uIG9mIHRoZSBmaXJzdCBzb3VuZCBub2RlLlxuICAgICAqICAgc2VlayhzZWVrLCBpZCkgLT4gU2V0cyB0aGUgc2VlayBwb3NpdGlvbiBvZiBwYXNzZWQgc291bmQgaWQuXG4gICAgICogQHJldHVybiB7SG93bC9OdW1iZXJ9IFJldHVybnMgc2VsZiBvciB0aGUgY3VycmVudCBzZWVrIHBvc2l0aW9uLlxuICAgICAqL1xuICAgIHNlZWs6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICB2YXIgc2VlaywgaWQ7XG5cbiAgICAgIC8vIERldGVybWluZSB0aGUgdmFsdWVzIGJhc2VkIG9uIGFyZ3VtZW50cy5cbiAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBXZSB3aWxsIHNpbXBseSByZXR1cm4gdGhlIGN1cnJlbnQgcG9zaXRpb24gb2YgdGhlIGZpcnN0IG5vZGUuXG4gICAgICAgIGlmIChzZWxmLl9zb3VuZHMubGVuZ3RoKSB7XG4gICAgICAgICAgaWQgPSBzZWxmLl9zb3VuZHNbMF0uX2lkO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIC8vIEZpcnN0IGNoZWNrIGlmIHRoaXMgaXMgYW4gSUQsIGFuZCBpZiBub3QsIGFzc3VtZSBpdCBpcyBhIG5ldyBzZWVrIHBvc2l0aW9uLlxuICAgICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoKTtcbiAgICAgICAgdmFyIGluZGV4ID0gaWRzLmluZGV4T2YoYXJnc1swXSk7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzBdLCAxMCk7XG4gICAgICAgIH0gZWxzZSBpZiAoc2VsZi5fc291bmRzLmxlbmd0aCkge1xuICAgICAgICAgIGlkID0gc2VsZi5fc291bmRzWzBdLl9pZDtcbiAgICAgICAgICBzZWVrID0gcGFyc2VGbG9hdChhcmdzWzBdKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICBzZWVrID0gcGFyc2VGbG9hdChhcmdzWzBdKTtcbiAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzFdLCAxMCk7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZXJlIGlzIG5vIElELCBiYWlsIG91dC5cbiAgICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIHNlZWsgd2hlbiBjYXBhYmxlLlxuICAgICAgaWYgKHR5cGVvZiBzZWVrID09PSAnbnVtYmVyJyAmJiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnIHx8IHNlbGYuX3BsYXlMb2NrKSkge1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ3NlZWsnLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnNlZWsuYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZCk7XG5cbiAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICBpZiAodHlwZW9mIHNlZWsgPT09ICdudW1iZXInICYmIHNlZWsgPj0gMCkge1xuICAgICAgICAgIC8vIFBhdXNlIHRoZSBzb3VuZCBhbmQgdXBkYXRlIHBvc2l0aW9uIGZvciByZXN0YXJ0aW5nIHBsYXliYWNrLlxuICAgICAgICAgIHZhciBwbGF5aW5nID0gc2VsZi5wbGF5aW5nKGlkKTtcbiAgICAgICAgICBpZiAocGxheWluZykge1xuICAgICAgICAgICAgc2VsZi5wYXVzZShpZCwgdHJ1ZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gTW92ZSB0aGUgcG9zaXRpb24gb2YgdGhlIHRyYWNrIGFuZCBjYW5jZWwgdGltZXIuXG4gICAgICAgICAgc291bmQuX3NlZWsgPSBzZWVrO1xuICAgICAgICAgIHNvdW5kLl9lbmRlZCA9IGZhbHNlO1xuICAgICAgICAgIHNlbGYuX2NsZWFyVGltZXIoaWQpO1xuXG4gICAgICAgICAgLy8gVXBkYXRlIHRoZSBzZWVrIHBvc2l0aW9uIGZvciBIVE1MNSBBdWRpby5cbiAgICAgICAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvICYmIHNvdW5kLl9ub2RlICYmICFpc05hTihzb3VuZC5fbm9kZS5kdXJhdGlvbikpIHtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLmN1cnJlbnRUaW1lID0gc2VlaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBTZWVrIGFuZCBlbWl0IHdoZW4gcmVhZHkuXG4gICAgICAgICAgdmFyIHNlZWtBbmRFbWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBSZXN0YXJ0IHRoZSBwbGF5YmFjayBpZiB0aGUgc291bmQgd2FzIHBsYXlpbmcuXG4gICAgICAgICAgICBpZiAocGxheWluZykge1xuICAgICAgICAgICAgICBzZWxmLnBsYXkoaWQsIHRydWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZWxmLl9lbWl0KCdzZWVrJywgaWQpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICAvLyBXYWl0IGZvciB0aGUgcGxheSBsb2NrIHRvIGJlIHVuc2V0IGJlZm9yZSBlbWl0dGluZyAoSFRNTDUgQXVkaW8pLlxuICAgICAgICAgIGlmIChwbGF5aW5nICYmICFzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgICAgdmFyIGVtaXRTZWVrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGlmICghc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgICAgICAgICBzZWVrQW5kRW1pdCgpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZW1pdFNlZWssIDApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgc2V0VGltZW91dChlbWl0U2VlaywgMCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlZWtBbmRFbWl0KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgICAgdmFyIHJlYWxUaW1lID0gc2VsZi5wbGF5aW5nKGlkKSA/IEhvd2xlci5jdHguY3VycmVudFRpbWUgLSBzb3VuZC5fcGxheVN0YXJ0IDogMDtcbiAgICAgICAgICAgIHZhciByYXRlU2VlayA9IHNvdW5kLl9yYXRlU2VlayA/IHNvdW5kLl9yYXRlU2VlayAtIHNvdW5kLl9zZWVrIDogMDtcbiAgICAgICAgICAgIHJldHVybiBzb3VuZC5fc2VlayArIChyYXRlU2VlayArIHJlYWxUaW1lICogTWF0aC5hYnMoc291bmQuX3JhdGUpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHNvdW5kLl9ub2RlLmN1cnJlbnRUaW1lO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgYSBzcGVjaWZpYyBzb3VuZCBpcyBjdXJyZW50bHkgcGxheWluZyBvciBub3QgKGlmIGlkIGlzIHByb3ZpZGVkKSwgb3IgY2hlY2sgaWYgYXQgbGVhc3Qgb25lIG9mIHRoZSBzb3VuZHMgaW4gdGhlIGdyb3VwIGlzIHBsYXlpbmcgb3Igbm90LlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gIGlkIFRoZSBzb3VuZCBpZCB0byBjaGVjay4gSWYgbm9uZSBpcyBwYXNzZWQsIHRoZSB3aG9sZSBzb3VuZCBncm91cCBpcyBjaGVja2VkLlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IFRydWUgaWYgcGxheWluZyBhbmQgZmFsc2UgaWYgbm90LlxuICAgICAqL1xuICAgIHBsYXlpbmc6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIENoZWNrIHRoZSBwYXNzZWQgc291bmQgSUQgKGlmIGFueSkuXG4gICAgICBpZiAodHlwZW9mIGlkID09PSAnbnVtYmVyJykge1xuICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWQpO1xuICAgICAgICByZXR1cm4gc291bmQgPyAhc291bmQuX3BhdXNlZCA6IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBPdGhlcndpc2UsIGxvb3AgdGhyb3VnaCBhbGwgc291bmRzIGFuZCBjaGVjayBpZiBhbnkgYXJlIHBsYXlpbmcuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICghc2VsZi5fc291bmRzW2ldLl9wYXVzZWQpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZHVyYXRpb24gb2YgdGhpcyBzb3VuZC4gUGFzc2luZyBhIHNvdW5kIGlkIHdpbGwgcmV0dXJuIHRoZSBzcHJpdGUgZHVyYXRpb24uXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBUaGUgc291bmQgaWQgdG8gY2hlY2suIElmIG5vbmUgaXMgcGFzc2VkLCByZXR1cm4gZnVsbCBzb3VyY2UgZHVyYXRpb24uXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBBdWRpbyBkdXJhdGlvbiBpbiBzZWNvbmRzLlxuICAgICAqL1xuICAgIGR1cmF0aW9uOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGR1cmF0aW9uID0gc2VsZi5fZHVyYXRpb247XG5cbiAgICAgIC8vIElmIHdlIHBhc3MgYW4gSUQsIGdldCB0aGUgc291bmQgYW5kIHJldHVybiB0aGUgc3ByaXRlIGxlbmd0aC5cbiAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZCk7XG4gICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgZHVyYXRpb24gPSBzZWxmLl9zcHJpdGVbc291bmQuX3Nwcml0ZV1bMV0gLyAxMDAwO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZHVyYXRpb247XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgbG9hZGVkIHN0YXRlIG9mIHRoaXMgSG93bC5cbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9ICd1bmxvYWRlZCcsICdsb2FkaW5nJywgJ2xvYWRlZCdcbiAgICAgKi9cbiAgICBzdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3RhdGU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVubG9hZCBhbmQgZGVzdHJveSB0aGUgY3VycmVudCBIb3dsIG9iamVjdC5cbiAgICAgKiBUaGlzIHdpbGwgaW1tZWRpYXRlbHkgc3RvcCBhbGwgc291bmQgaW5zdGFuY2VzIGF0dGFjaGVkIHRvIHRoaXMgZ3JvdXAuXG4gICAgICovXG4gICAgdW5sb2FkOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gU3RvcCBwbGF5aW5nIGFueSBhY3RpdmUgc291bmRzLlxuICAgICAgdmFyIHNvdW5kcyA9IHNlbGYuX3NvdW5kcztcbiAgICAgIGZvciAodmFyIGk9MDsgaTxzb3VuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gU3RvcCB0aGUgc291bmQgaWYgaXQgaXMgY3VycmVudGx5IHBsYXlpbmcuXG4gICAgICAgIGlmICghc291bmRzW2ldLl9wYXVzZWQpIHtcbiAgICAgICAgICBzZWxmLnN0b3Aoc291bmRzW2ldLl9pZCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZW1vdmUgdGhlIHNvdXJjZSBvciBkaXNjb25uZWN0LlxuICAgICAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgLy8gU2V0IHRoZSBzb3VyY2UgdG8gMC1zZWNvbmQgc2lsZW5jZSB0byBzdG9wIGFueSBkb3dubG9hZGluZyAoZXhjZXB0IGluIElFKS5cbiAgICAgICAgICBzZWxmLl9jbGVhclNvdW5kKHNvdW5kc1tpXS5fbm9kZSk7XG5cbiAgICAgICAgICAvLyBSZW1vdmUgYW55IGV2ZW50IGxpc3RlbmVycy5cbiAgICAgICAgICBzb3VuZHNbaV0uX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBzb3VuZHNbaV0uX2Vycm9yRm4sIGZhbHNlKTtcbiAgICAgICAgICBzb3VuZHNbaV0uX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihIb3dsZXIuX2NhblBsYXlFdmVudCwgc291bmRzW2ldLl9sb2FkRm4sIGZhbHNlKTtcbiAgICAgICAgICBzb3VuZHNbaV0uX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBzb3VuZHNbaV0uX2VuZEZuLCBmYWxzZSk7XG5cbiAgICAgICAgICAvLyBSZWxlYXNlIHRoZSBBdWRpbyBvYmplY3QgYmFjayB0byB0aGUgcG9vbC5cbiAgICAgICAgICBIb3dsZXIuX3JlbGVhc2VIdG1sNUF1ZGlvKHNvdW5kc1tpXS5fbm9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFbXB0eSBvdXQgYWxsIG9mIHRoZSBub2Rlcy5cbiAgICAgICAgZGVsZXRlIHNvdW5kc1tpXS5fbm9kZTtcblxuICAgICAgICAvLyBNYWtlIHN1cmUgYWxsIHRpbWVycyBhcmUgY2xlYXJlZCBvdXQuXG4gICAgICAgIHNlbGYuX2NsZWFyVGltZXIoc291bmRzW2ldLl9pZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFJlbW92ZSB0aGUgcmVmZXJlbmNlcyBpbiB0aGUgZ2xvYmFsIEhvd2xlciBvYmplY3QuXG4gICAgICB2YXIgaW5kZXggPSBIb3dsZXIuX2hvd2xzLmluZGV4T2Yoc2VsZik7XG4gICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICBIb3dsZXIuX2hvd2xzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9XG5cbiAgICAgIC8vIERlbGV0ZSB0aGlzIHNvdW5kIGZyb20gdGhlIGNhY2hlIChpZiBubyBvdGhlciBIb3dsIGlzIHVzaW5nIGl0KS5cbiAgICAgIHZhciByZW1DYWNoZSA9IHRydWU7XG4gICAgICBmb3IgKGk9MDsgaTxIb3dsZXIuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChIb3dsZXIuX2hvd2xzW2ldLl9zcmMgPT09IHNlbGYuX3NyYyB8fCBzZWxmLl9zcmMuaW5kZXhPZihIb3dsZXIuX2hvd2xzW2ldLl9zcmMpID49IDApIHtcbiAgICAgICAgICByZW1DYWNoZSA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjYWNoZSAmJiByZW1DYWNoZSkge1xuICAgICAgICBkZWxldGUgY2FjaGVbc2VsZi5fc3JjXTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYXIgZ2xvYmFsIGVycm9ycy5cbiAgICAgIEhvd2xlci5ub0F1ZGlvID0gZmFsc2U7XG5cbiAgICAgIC8vIENsZWFyIG91dCBgc2VsZmAuXG4gICAgICBzZWxmLl9zdGF0ZSA9ICd1bmxvYWRlZCc7XG4gICAgICBzZWxmLl9zb3VuZHMgPSBbXTtcbiAgICAgIHNlbGYgPSBudWxsO1xuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTGlzdGVuIHRvIGEgY3VzdG9tIGV2ZW50LlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gICBldmVudCBFdmVudCBuYW1lLlxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmbiAgICBMaXN0ZW5lciB0byBjYWxsLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gICBpZCAgICAob3B0aW9uYWwpIE9ubHkgbGlzdGVuIHRvIGV2ZW50cyBmb3IgdGhpcyBzb3VuZC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9ICAgb25jZSAgKElOVEVSTkFMKSBNYXJrcyBldmVudCB0byBmaXJlIG9ubHkgb25jZS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIG9uOiBmdW5jdGlvbihldmVudCwgZm4sIGlkLCBvbmNlKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgZXZlbnRzID0gc2VsZlsnX29uJyArIGV2ZW50XTtcblxuICAgICAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBldmVudHMucHVzaChvbmNlID8ge2lkOiBpZCwgZm46IGZuLCBvbmNlOiBvbmNlfSA6IHtpZDogaWQsIGZuOiBmbn0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEgY3VzdG9tIGV2ZW50LiBDYWxsIHdpdGhvdXQgcGFyYW1ldGVycyB0byByZW1vdmUgYWxsIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgZXZlbnQgRXZlbnQgbmFtZS5cbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gZm4gICAgTGlzdGVuZXIgdG8gcmVtb3ZlLiBMZWF2ZSBlbXB0eSB0byByZW1vdmUgYWxsLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gICBpZCAgICAob3B0aW9uYWwpIE9ubHkgcmVtb3ZlIGV2ZW50cyBmb3IgdGhpcyBzb3VuZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIG9mZjogZnVuY3Rpb24oZXZlbnQsIGZuLCBpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGV2ZW50cyA9IHNlbGZbJ19vbicgKyBldmVudF07XG4gICAgICB2YXIgaSA9IDA7XG5cbiAgICAgIC8vIEFsbG93IHBhc3NpbmcganVzdCBhbiBldmVudCBhbmQgSUQuXG4gICAgICBpZiAodHlwZW9mIGZuID09PSAnbnVtYmVyJykge1xuICAgICAgICBpZCA9IGZuO1xuICAgICAgICBmbiA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmIChmbiB8fCBpZCkge1xuICAgICAgICAvLyBMb29wIHRocm91Z2ggZXZlbnQgc3RvcmUgYW5kIHJlbW92ZSB0aGUgcGFzc2VkIGZ1bmN0aW9uLlxuICAgICAgICBmb3IgKGk9MDsgaTxldmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgaXNJZCA9IChpZCA9PT0gZXZlbnRzW2ldLmlkKTtcbiAgICAgICAgICBpZiAoZm4gPT09IGV2ZW50c1tpXS5mbiAmJiBpc0lkIHx8ICFmbiAmJiBpc0lkKSB7XG4gICAgICAgICAgICBldmVudHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGV2ZW50KSB7XG4gICAgICAgIC8vIENsZWFyIG91dCBhbGwgZXZlbnRzIG9mIHRoaXMgdHlwZS5cbiAgICAgICAgc2VsZlsnX29uJyArIGV2ZW50XSA9IFtdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQ2xlYXIgb3V0IGFsbCBldmVudHMgb2YgZXZlcnkgdHlwZS5cbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhzZWxmKTtcbiAgICAgICAgZm9yIChpPTA7IGk8a2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmICgoa2V5c1tpXS5pbmRleE9mKCdfb24nKSA9PT0gMCkgJiYgQXJyYXkuaXNBcnJheShzZWxmW2tleXNbaV1dKSkge1xuICAgICAgICAgICAgc2VsZltrZXlzW2ldXSA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTGlzdGVuIHRvIGEgY3VzdG9tIGV2ZW50IGFuZCByZW1vdmUgaXQgb25jZSBmaXJlZC5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgZXZlbnQgRXZlbnQgbmFtZS5cbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gZm4gICAgTGlzdGVuZXIgdG8gY2FsbC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9ICAgaWQgICAgKG9wdGlvbmFsKSBPbmx5IGxpc3RlbiB0byBldmVudHMgZm9yIHRoaXMgc291bmQuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBvbmNlOiBmdW5jdGlvbihldmVudCwgZm4sIGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIFNldHVwIHRoZSBldmVudCBsaXN0ZW5lci5cbiAgICAgIHNlbGYub24oZXZlbnQsIGZuLCBpZCwgMSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBFbWl0IGFsbCBldmVudHMgb2YgYSBzcGVjaWZpYyB0eXBlIGFuZCBwYXNzIHRoZSBzb3VuZCBpZC5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IGV2ZW50IEV2ZW50IG5hbWUuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAgICBTb3VuZCBJRC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IG1zZyAgIE1lc3NhZ2UgdG8gZ28gd2l0aCBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9lbWl0OiBmdW5jdGlvbihldmVudCwgaWQsIG1zZykge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGV2ZW50cyA9IHNlbGZbJ19vbicgKyBldmVudF07XG5cbiAgICAgIC8vIExvb3AgdGhyb3VnaCBldmVudCBzdG9yZSBhbmQgZmlyZSBhbGwgZnVuY3Rpb25zLlxuICAgICAgZm9yICh2YXIgaT1ldmVudHMubGVuZ3RoLTE7IGk+PTA7IGktLSkge1xuICAgICAgICAvLyBPbmx5IGZpcmUgdGhlIGxpc3RlbmVyIGlmIHRoZSBjb3JyZWN0IElEIGlzIHVzZWQuXG4gICAgICAgIGlmICghZXZlbnRzW2ldLmlkIHx8IGV2ZW50c1tpXS5pZCA9PT0gaWQgfHwgZXZlbnQgPT09ICdsb2FkJykge1xuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgICAgIGZuLmNhbGwodGhpcywgaWQsIG1zZyk7XG4gICAgICAgICAgfS5iaW5kKHNlbGYsIGV2ZW50c1tpXS5mbiksIDApO1xuXG4gICAgICAgICAgLy8gSWYgdGhpcyBldmVudCB3YXMgc2V0dXAgd2l0aCBgb25jZWAsIHJlbW92ZSBpdC5cbiAgICAgICAgICBpZiAoZXZlbnRzW2ldLm9uY2UpIHtcbiAgICAgICAgICAgIHNlbGYub2ZmKGV2ZW50LCBldmVudHNbaV0uZm4sIGV2ZW50c1tpXS5pZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFBhc3MgdGhlIGV2ZW50IHR5cGUgaW50byBsb2FkIHF1ZXVlIHNvIHRoYXQgaXQgY2FuIGNvbnRpbnVlIHN0ZXBwaW5nLlxuICAgICAgc2VsZi5fbG9hZFF1ZXVlKGV2ZW50KTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFF1ZXVlIG9mIGFjdGlvbnMgaW5pdGlhdGVkIGJlZm9yZSB0aGUgc291bmQgaGFzIGxvYWRlZC5cbiAgICAgKiBUaGVzZSB3aWxsIGJlIGNhbGxlZCBpbiBzZXF1ZW5jZSwgd2l0aCB0aGUgbmV4dCBvbmx5IGZpcmluZ1xuICAgICAqIGFmdGVyIHRoZSBwcmV2aW91cyBoYXMgZmluaXNoZWQgZXhlY3V0aW5nIChldmVuIGlmIGFzeW5jIGxpa2UgcGxheSkuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfbG9hZFF1ZXVlOiBmdW5jdGlvbihldmVudCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBpZiAoc2VsZi5fcXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgdGFzayA9IHNlbGYuX3F1ZXVlWzBdO1xuXG4gICAgICAgIC8vIFJlbW92ZSB0aGlzIHRhc2sgaWYgYSBtYXRjaGluZyBldmVudCB3YXMgcGFzc2VkLlxuICAgICAgICBpZiAodGFzay5ldmVudCA9PT0gZXZlbnQpIHtcbiAgICAgICAgICBzZWxmLl9xdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgIHNlbGYuX2xvYWRRdWV1ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUnVuIHRoZSB0YXNrIGlmIG5vIGV2ZW50IHR5cGUgaXMgcGFzc2VkLlxuICAgICAgICBpZiAoIWV2ZW50KSB7XG4gICAgICAgICAgdGFzay5hY3Rpb24oKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRmlyZWQgd2hlbiBwbGF5YmFjayBlbmRzIGF0IHRoZSBlbmQgb2YgdGhlIGR1cmF0aW9uLlxuICAgICAqIEBwYXJhbSAge1NvdW5kfSBzb3VuZCBUaGUgc291bmQgb2JqZWN0IHRvIHdvcmsgd2l0aC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9lbmRlZDogZnVuY3Rpb24oc291bmQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBzcHJpdGUgPSBzb3VuZC5fc3ByaXRlO1xuXG4gICAgICAvLyBJZiB3ZSBhcmUgdXNpbmcgSUUgYW5kIHRoZXJlIHdhcyBuZXR3b3JrIGxhdGVuY3kgd2UgbWF5IGJlIGNsaXBwaW5nXG4gICAgICAvLyBhdWRpbyBiZWZvcmUgaXQgY29tcGxldGVzIHBsYXlpbmcuIExldHMgY2hlY2sgdGhlIG5vZGUgdG8gbWFrZSBzdXJlIGl0XG4gICAgICAvLyBiZWxpZXZlcyBpdCBoYXMgY29tcGxldGVkLCBiZWZvcmUgZW5kaW5nIHRoZSBwbGF5YmFjay5cbiAgICAgIGlmICghc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUgJiYgIXNvdW5kLl9ub2RlLnBhdXNlZCAmJiAhc291bmQuX25vZGUuZW5kZWQgJiYgc291bmQuX25vZGUuY3VycmVudFRpbWUgPCBzb3VuZC5fc3RvcCkge1xuICAgICAgICBzZXRUaW1lb3V0KHNlbGYuX2VuZGVkLmJpbmQoc2VsZiwgc291bmQpLCAxMDApO1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgLy8gU2hvdWxkIHRoaXMgc291bmQgbG9vcD9cbiAgICAgIHZhciBsb29wID0gISEoc291bmQuX2xvb3AgfHwgc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMl0pO1xuXG4gICAgICAvLyBGaXJlIHRoZSBlbmRlZCBldmVudC5cbiAgICAgIHNlbGYuX2VtaXQoJ2VuZCcsIHNvdW5kLl9pZCk7XG5cbiAgICAgIC8vIFJlc3RhcnQgdGhlIHBsYXliYWNrIGZvciBIVE1MNSBBdWRpbyBsb29wLlxuICAgICAgaWYgKCFzZWxmLl93ZWJBdWRpbyAmJiBsb29wKSB7XG4gICAgICAgIHNlbGYuc3RvcChzb3VuZC5faWQsIHRydWUpLnBsYXkoc291bmQuX2lkKTtcbiAgICAgIH1cblxuICAgICAgLy8gUmVzdGFydCB0aGlzIHRpbWVyIGlmIG9uIGEgV2ViIEF1ZGlvIGxvb3AuXG4gICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgbG9vcCkge1xuICAgICAgICBzZWxmLl9lbWl0KCdwbGF5Jywgc291bmQuX2lkKTtcbiAgICAgICAgc291bmQuX3NlZWsgPSBzb3VuZC5fc3RhcnQgfHwgMDtcbiAgICAgICAgc291bmQuX3JhdGVTZWVrID0gMDtcbiAgICAgICAgc291bmQuX3BsYXlTdGFydCA9IEhvd2xlci5jdHguY3VycmVudFRpbWU7XG5cbiAgICAgICAgdmFyIHRpbWVvdXQgPSAoKHNvdW5kLl9zdG9wIC0gc291bmQuX3N0YXJ0KSAqIDEwMDApIC8gTWF0aC5hYnMoc291bmQuX3JhdGUpO1xuICAgICAgICBzZWxmLl9lbmRUaW1lcnNbc291bmQuX2lkXSA9IHNldFRpbWVvdXQoc2VsZi5fZW5kZWQuYmluZChzZWxmLCBzb3VuZCksIHRpbWVvdXQpO1xuICAgICAgfVxuXG4gICAgICAvLyBNYXJrIHRoZSBub2RlIGFzIHBhdXNlZC5cbiAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiAhbG9vcCkge1xuICAgICAgICBzb3VuZC5fcGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgc291bmQuX2VuZGVkID0gdHJ1ZTtcbiAgICAgICAgc291bmQuX3NlZWsgPSBzb3VuZC5fc3RhcnQgfHwgMDtcbiAgICAgICAgc291bmQuX3JhdGVTZWVrID0gMDtcbiAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihzb3VuZC5faWQpO1xuXG4gICAgICAgIC8vIENsZWFuIHVwIHRoZSBidWZmZXIgc291cmNlLlxuICAgICAgICBzZWxmLl9jbGVhbkJ1ZmZlcihzb3VuZC5fbm9kZSk7XG5cbiAgICAgICAgLy8gQXR0ZW1wdCB0byBhdXRvLXN1c3BlbmQgQXVkaW9Db250ZXh0IGlmIG5vIHNvdW5kcyBhcmUgc3RpbGwgcGxheWluZy5cbiAgICAgICAgSG93bGVyLl9hdXRvU3VzcGVuZCgpO1xuICAgICAgfVxuXG4gICAgICAvLyBXaGVuIHVzaW5nIGEgc3ByaXRlLCBlbmQgdGhlIHRyYWNrLlxuICAgICAgaWYgKCFzZWxmLl93ZWJBdWRpbyAmJiAhbG9vcCkge1xuICAgICAgICBzZWxmLnN0b3Aoc291bmQuX2lkLCB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENsZWFyIHRoZSBlbmQgdGltZXIgZm9yIGEgc291bmQgcGxheWJhY2suXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBUaGUgc291bmQgSUQuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfY2xlYXJUaW1lcjogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgaWYgKHNlbGYuX2VuZFRpbWVyc1tpZF0pIHtcbiAgICAgICAgLy8gQ2xlYXIgdGhlIHRpbWVvdXQgb3IgcmVtb3ZlIHRoZSBlbmRlZCBsaXN0ZW5lci5cbiAgICAgICAgaWYgKHR5cGVvZiBzZWxmLl9lbmRUaW1lcnNbaWRdICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYuX2VuZFRpbWVyc1tpZF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZCk7XG4gICAgICAgICAgaWYgKHNvdW5kICYmIHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICBzb3VuZC5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdlbmRlZCcsIHNlbGYuX2VuZFRpbWVyc1tpZF0sIGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBkZWxldGUgc2VsZi5fZW5kVGltZXJzW2lkXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgc291bmQgaWRlbnRpZmllZCBieSB0aGlzIElELCBvciByZXR1cm4gbnVsbC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIFNvdW5kIElEXG4gICAgICogQHJldHVybiB7T2JqZWN0fSAgICBTb3VuZCBvYmplY3Qgb3IgbnVsbC5cbiAgICAgKi9cbiAgICBfc291bmRCeUlkOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBMb29wIHRocm91Z2ggYWxsIHNvdW5kcyBhbmQgZmluZCB0aGUgb25lIHdpdGggdGhpcyBJRC5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9zb3VuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGlkID09PSBzZWxmLl9zb3VuZHNbaV0uX2lkKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuX3NvdW5kc1tpXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIGFuIGluYWN0aXZlIHNvdW5kIGZyb20gdGhlIHBvb2wgb3IgY3JlYXRlIGEgbmV3IG9uZS5cbiAgICAgKiBAcmV0dXJuIHtTb3VuZH0gU291bmQgcGxheWJhY2sgb2JqZWN0LlxuICAgICAqL1xuICAgIF9pbmFjdGl2ZVNvdW5kOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgc2VsZi5fZHJhaW4oKTtcblxuICAgICAgLy8gRmluZCB0aGUgZmlyc3QgaW5hY3RpdmUgbm9kZSB0byByZWN5Y2xlLlxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoc2VsZi5fc291bmRzW2ldLl9lbmRlZCkge1xuICAgICAgICAgIHJldHVybiBzZWxmLl9zb3VuZHNbaV0ucmVzZXQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyBpbmFjdGl2ZSBub2RlIHdhcyBmb3VuZCwgY3JlYXRlIGEgbmV3IG9uZS5cbiAgICAgIHJldHVybiBuZXcgU291bmQoc2VsZik7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERyYWluIGV4Y2VzcyBpbmFjdGl2ZSBzb3VuZHMgZnJvbSB0aGUgcG9vbC5cbiAgICAgKi9cbiAgICBfZHJhaW46IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGxpbWl0ID0gc2VsZi5fcG9vbDtcbiAgICAgIHZhciBjbnQgPSAwO1xuICAgICAgdmFyIGkgPSAwO1xuXG4gICAgICAvLyBJZiB0aGVyZSBhcmUgbGVzcyBzb3VuZHMgdGhhbiB0aGUgbWF4IHBvb2wgc2l6ZSwgd2UgYXJlIGRvbmUuXG4gICAgICBpZiAoc2VsZi5fc291bmRzLmxlbmd0aCA8IGxpbWl0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gQ291bnQgdGhlIG51bWJlciBvZiBpbmFjdGl2ZSBzb3VuZHMuXG4gICAgICBmb3IgKGk9MDsgaTxzZWxmLl9zb3VuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHNlbGYuX3NvdW5kc1tpXS5fZW5kZWQpIHtcbiAgICAgICAgICBjbnQrKztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBSZW1vdmUgZXhjZXNzIGluYWN0aXZlIHNvdW5kcywgZ29pbmcgaW4gcmV2ZXJzZSBvcmRlci5cbiAgICAgIGZvciAoaT1zZWxmLl9zb3VuZHMubGVuZ3RoIC0gMTsgaT49MDsgaS0tKSB7XG4gICAgICAgIGlmIChjbnQgPD0gbGltaXQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi5fc291bmRzW2ldLl9lbmRlZCkge1xuICAgICAgICAgIC8vIERpc2Nvbm5lY3QgdGhlIGF1ZGlvIHNvdXJjZSB3aGVuIHVzaW5nIFdlYiBBdWRpby5cbiAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgc2VsZi5fc291bmRzW2ldLl9ub2RlKSB7XG4gICAgICAgICAgICBzZWxmLl9zb3VuZHNbaV0uX25vZGUuZGlzY29ubmVjdCgwKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBSZW1vdmUgc291bmRzIHVudGlsIHdlIGhhdmUgdGhlIHBvb2wgc2l6ZS5cbiAgICAgICAgICBzZWxmLl9zb3VuZHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgIGNudC0tO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgSUQncyBmcm9tIHRoZSBzb3VuZHMgcG9vbC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIE9ubHkgcmV0dXJuIG9uZSBJRCBpZiBvbmUgaXMgcGFzc2VkLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSAgICBBcnJheSBvZiBJRHMuXG4gICAgICovXG4gICAgX2dldFNvdW5kSWRzOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB2YXIgaWRzID0gW107XG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9zb3VuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZHMucHVzaChzZWxmLl9zb3VuZHNbaV0uX2lkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpZHM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gW2lkXTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTG9hZCB0aGUgc291bmQgYmFjayBpbnRvIHRoZSBidWZmZXIgc291cmNlLlxuICAgICAqIEBwYXJhbSAge1NvdW5kfSBzb3VuZCBUaGUgc291bmQgb2JqZWN0IHRvIHdvcmsgd2l0aC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9yZWZyZXNoQnVmZmVyOiBmdW5jdGlvbihzb3VuZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBTZXR1cCB0aGUgYnVmZmVyIHNvdXJjZSBmb3IgcGxheWJhY2suXG4gICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UgPSBIb3dsZXIuY3R4LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmJ1ZmZlciA9IGNhY2hlW3NlbGYuX3NyY107XG5cbiAgICAgIC8vIENvbm5lY3QgdG8gdGhlIGNvcnJlY3Qgbm9kZS5cbiAgICAgIGlmIChzb3VuZC5fcGFubmVyKSB7XG4gICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5jb25uZWN0KHNvdW5kLl9wYW5uZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmNvbm5lY3Qoc291bmQuX25vZGUpO1xuICAgICAgfVxuXG4gICAgICAvLyBTZXR1cCBsb29waW5nIGFuZCBwbGF5YmFjayByYXRlLlxuICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3AgPSBzb3VuZC5fbG9vcDtcbiAgICAgIGlmIChzb3VuZC5fbG9vcCkge1xuICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcFN0YXJ0ID0gc291bmQuX3N0YXJ0IHx8IDA7XG4gICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5sb29wRW5kID0gc291bmQuX3N0b3AgfHwgMDtcbiAgICAgIH1cbiAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5wbGF5YmFja1JhdGUuc2V0VmFsdWVBdFRpbWUoc291bmQuX3JhdGUsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUHJldmVudCBtZW1vcnkgbGVha3MgYnkgY2xlYW5pbmcgdXAgdGhlIGJ1ZmZlciBzb3VyY2UgYWZ0ZXIgcGxheWJhY2suXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBub2RlIFNvdW5kJ3MgYXVkaW8gbm9kZSBjb250YWluaW5nIHRoZSBidWZmZXIgc291cmNlLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX2NsZWFuQnVmZmVyOiBmdW5jdGlvbihub2RlKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgaXNJT1MgPSBIb3dsZXIuX25hdmlnYXRvciAmJiBIb3dsZXIuX25hdmlnYXRvci52ZW5kb3IuaW5kZXhPZignQXBwbGUnKSA+PSAwO1xuXG4gICAgICBpZiAoIW5vZGUuYnVmZmVyU291cmNlKSB7XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICBpZiAoSG93bGVyLl9zY3JhdGNoQnVmZmVyICYmIG5vZGUuYnVmZmVyU291cmNlKSB7XG4gICAgICAgIG5vZGUuYnVmZmVyU291cmNlLm9uZW5kZWQgPSBudWxsO1xuICAgICAgICBub2RlLmJ1ZmZlclNvdXJjZS5kaXNjb25uZWN0KDApO1xuICAgICAgICBpZiAoaXNJT1MpIHtcbiAgICAgICAgICB0cnkgeyBub2RlLmJ1ZmZlclNvdXJjZS5idWZmZXIgPSBIb3dsZXIuX3NjcmF0Y2hCdWZmZXI7IH0gY2F0Y2goZSkge31cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbm9kZS5idWZmZXJTb3VyY2UgPSBudWxsO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBzb3VyY2UgdG8gYSAwLXNlY29uZCBzaWxlbmNlIHRvIHN0b3AgYW55IGRvd25sb2FkaW5nIChleGNlcHQgaW4gSUUpLlxuICAgICAqIEBwYXJhbSAge09iamVjdH0gbm9kZSBBdWRpbyBub2RlIHRvIGNsZWFyLlxuICAgICAqL1xuICAgIF9jbGVhclNvdW5kOiBmdW5jdGlvbihub2RlKSB7XG4gICAgICB2YXIgY2hlY2tJRSA9IC9NU0lFIHxUcmlkZW50XFwvLy50ZXN0KEhvd2xlci5fbmF2aWdhdG9yICYmIEhvd2xlci5fbmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgICBpZiAoIWNoZWNrSUUpIHtcbiAgICAgICAgbm9kZS5zcmMgPSAnZGF0YTphdWRpby93YXY7YmFzZTY0LFVrbEdSaWdBQUFCWFFWWkZabTEwSUJJQUFBQUJBQUVBUkt3QUFJaFlBUUFDQUJBQUFBQmtZWFJoQWdBQUFBRUEnO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKiogU2luZ2xlIFNvdW5kIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIFNldHVwIHRoZSBzb3VuZCBvYmplY3QsIHdoaWNoIGVhY2ggbm9kZSBhdHRhY2hlZCB0byBhIEhvd2wgZ3JvdXAgaXMgY29udGFpbmVkIGluLlxuICAgKiBAcGFyYW0ge09iamVjdH0gaG93bCBUaGUgSG93bCBwYXJlbnQgZ3JvdXAuXG4gICAqL1xuICB2YXIgU291bmQgPSBmdW5jdGlvbihob3dsKSB7XG4gICAgdGhpcy5fcGFyZW50ID0gaG93bDtcbiAgICB0aGlzLmluaXQoKTtcbiAgfTtcbiAgU291bmQucHJvdG90eXBlID0ge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgYSBuZXcgU291bmQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge1NvdW5kfVxuICAgICAqL1xuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcblxuICAgICAgLy8gU2V0dXAgdGhlIGRlZmF1bHQgcGFyYW1ldGVycy5cbiAgICAgIHNlbGYuX211dGVkID0gcGFyZW50Ll9tdXRlZDtcbiAgICAgIHNlbGYuX2xvb3AgPSBwYXJlbnQuX2xvb3A7XG4gICAgICBzZWxmLl92b2x1bWUgPSBwYXJlbnQuX3ZvbHVtZTtcbiAgICAgIHNlbGYuX3JhdGUgPSBwYXJlbnQuX3JhdGU7XG4gICAgICBzZWxmLl9zZWVrID0gMDtcbiAgICAgIHNlbGYuX3BhdXNlZCA9IHRydWU7XG4gICAgICBzZWxmLl9lbmRlZCA9IHRydWU7XG4gICAgICBzZWxmLl9zcHJpdGUgPSAnX19kZWZhdWx0JztcblxuICAgICAgLy8gR2VuZXJhdGUgYSB1bmlxdWUgSUQgZm9yIHRoaXMgc291bmQuXG4gICAgICBzZWxmLl9pZCA9ICsrSG93bGVyLl9jb3VudGVyO1xuXG4gICAgICAvLyBBZGQgaXRzZWxmIHRvIHRoZSBwYXJlbnQncyBwb29sLlxuICAgICAgcGFyZW50Ll9zb3VuZHMucHVzaChzZWxmKTtcblxuICAgICAgLy8gQ3JlYXRlIHRoZSBuZXcgbm9kZS5cbiAgICAgIHNlbGYuY3JlYXRlKCk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW5kIHNldHVwIGEgbmV3IHNvdW5kIG9iamVjdCwgd2hldGhlciBIVE1MNSBBdWRpbyBvciBXZWIgQXVkaW8uXG4gICAgICogQHJldHVybiB7U291bmR9XG4gICAgICovXG4gICAgY3JlYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBwYXJlbnQgPSBzZWxmLl9wYXJlbnQ7XG4gICAgICB2YXIgdm9sdW1lID0gKEhvd2xlci5fbXV0ZWQgfHwgc2VsZi5fbXV0ZWQgfHwgc2VsZi5fcGFyZW50Ll9tdXRlZCkgPyAwIDogc2VsZi5fdm9sdW1lO1xuXG4gICAgICBpZiAocGFyZW50Ll93ZWJBdWRpbykge1xuICAgICAgICAvLyBDcmVhdGUgdGhlIGdhaW4gbm9kZSBmb3IgY29udHJvbGxpbmcgdm9sdW1lICh0aGUgc291cmNlIHdpbGwgY29ubmVjdCB0byB0aGlzKS5cbiAgICAgICAgc2VsZi5fbm9kZSA9ICh0eXBlb2YgSG93bGVyLmN0eC5jcmVhdGVHYWluID09PSAndW5kZWZpbmVkJykgPyBIb3dsZXIuY3R4LmNyZWF0ZUdhaW5Ob2RlKCkgOiBIb3dsZXIuY3R4LmNyZWF0ZUdhaW4oKTtcbiAgICAgICAgc2VsZi5fbm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKHZvbHVtZSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgIHNlbGYuX25vZGUucGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgc2VsZi5fbm9kZS5jb25uZWN0KEhvd2xlci5tYXN0ZXJHYWluKTtcbiAgICAgIH0gZWxzZSBpZiAoIUhvd2xlci5ub0F1ZGlvKSB7XG4gICAgICAgIC8vIEdldCBhbiB1bmxvY2tlZCBBdWRpbyBvYmplY3QgZnJvbSB0aGUgcG9vbC5cbiAgICAgICAgc2VsZi5fbm9kZSA9IEhvd2xlci5fb2J0YWluSHRtbDVBdWRpbygpO1xuXG4gICAgICAgIC8vIExpc3RlbiBmb3IgZXJyb3JzIChodHRwOi8vZGV2LnczLm9yZy9odG1sNS9zcGVjLWF1dGhvci12aWV3L3NwZWMuaHRtbCNtZWRpYWVycm9yKS5cbiAgICAgICAgc2VsZi5fZXJyb3JGbiA9IHNlbGYuX2Vycm9yTGlzdGVuZXIuYmluZChzZWxmKTtcbiAgICAgICAgc2VsZi5fbm9kZS5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIHNlbGYuX2Vycm9yRm4sIGZhbHNlKTtcblxuICAgICAgICAvLyBMaXN0ZW4gZm9yICdjYW5wbGF5dGhyb3VnaCcgZXZlbnQgdG8gbGV0IHVzIGtub3cgdGhlIHNvdW5kIGlzIHJlYWR5LlxuICAgICAgICBzZWxmLl9sb2FkRm4gPSBzZWxmLl9sb2FkTGlzdGVuZXIuYmluZChzZWxmKTtcbiAgICAgICAgc2VsZi5fbm9kZS5hZGRFdmVudExpc3RlbmVyKEhvd2xlci5fY2FuUGxheUV2ZW50LCBzZWxmLl9sb2FkRm4sIGZhbHNlKTtcblxuICAgICAgICAvLyBMaXN0ZW4gZm9yIHRoZSAnZW5kZWQnIGV2ZW50IG9uIHRoZSBzb3VuZCB0byBhY2NvdW50IGZvciBlZGdlLWNhc2Ugd2hlcmVcbiAgICAgICAgLy8gYSBmaW5pdGUgc291bmQgaGFzIGEgZHVyYXRpb24gb2YgSW5maW5pdHkuXG4gICAgICAgIHNlbGYuX2VuZEZuID0gc2VsZi5fZW5kTGlzdGVuZXIuYmluZChzZWxmKTtcbiAgICAgICAgc2VsZi5fbm9kZS5hZGRFdmVudExpc3RlbmVyKCdlbmRlZCcsIHNlbGYuX2VuZEZuLCBmYWxzZSk7XG5cbiAgICAgICAgLy8gU2V0dXAgdGhlIG5ldyBhdWRpbyBub2RlLlxuICAgICAgICBzZWxmLl9ub2RlLnNyYyA9IHBhcmVudC5fc3JjO1xuICAgICAgICBzZWxmLl9ub2RlLnByZWxvYWQgPSBwYXJlbnQuX3ByZWxvYWQgPT09IHRydWUgPyAnYXV0bycgOiBwYXJlbnQuX3ByZWxvYWQ7XG4gICAgICAgIHNlbGYuX25vZGUudm9sdW1lID0gdm9sdW1lICogSG93bGVyLnZvbHVtZSgpO1xuXG4gICAgICAgIC8vIEJlZ2luIGxvYWRpbmcgdGhlIHNvdXJjZS5cbiAgICAgICAgc2VsZi5fbm9kZS5sb2FkKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXNldCB0aGUgcGFyYW1ldGVycyBvZiB0aGlzIHNvdW5kIHRvIHRoZSBvcmlnaW5hbCBzdGF0ZSAoZm9yIHJlY3ljbGUpLlxuICAgICAqIEByZXR1cm4ge1NvdW5kfVxuICAgICAqL1xuICAgIHJlc2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBwYXJlbnQgPSBzZWxmLl9wYXJlbnQ7XG5cbiAgICAgIC8vIFJlc2V0IGFsbCBvZiB0aGUgcGFyYW1ldGVycyBvZiB0aGlzIHNvdW5kLlxuICAgICAgc2VsZi5fbXV0ZWQgPSBwYXJlbnQuX211dGVkO1xuICAgICAgc2VsZi5fbG9vcCA9IHBhcmVudC5fbG9vcDtcbiAgICAgIHNlbGYuX3ZvbHVtZSA9IHBhcmVudC5fdm9sdW1lO1xuICAgICAgc2VsZi5fcmF0ZSA9IHBhcmVudC5fcmF0ZTtcbiAgICAgIHNlbGYuX3NlZWsgPSAwO1xuICAgICAgc2VsZi5fcmF0ZVNlZWsgPSAwO1xuICAgICAgc2VsZi5fcGF1c2VkID0gdHJ1ZTtcbiAgICAgIHNlbGYuX2VuZGVkID0gdHJ1ZTtcbiAgICAgIHNlbGYuX3Nwcml0ZSA9ICdfX2RlZmF1bHQnO1xuXG4gICAgICAvLyBHZW5lcmF0ZSBhIG5ldyBJRCBzbyB0aGF0IGl0IGlzbid0IGNvbmZ1c2VkIHdpdGggdGhlIHByZXZpb3VzIHNvdW5kLlxuICAgICAgc2VsZi5faWQgPSArK0hvd2xlci5fY291bnRlcjtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEhUTUw1IEF1ZGlvIGVycm9yIGxpc3RlbmVyIGNhbGxiYWNrLlxuICAgICAqL1xuICAgIF9lcnJvckxpc3RlbmVyOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gRmlyZSBhbiBlcnJvciBldmVudCBhbmQgcGFzcyBiYWNrIHRoZSBjb2RlLlxuICAgICAgc2VsZi5fcGFyZW50Ll9lbWl0KCdsb2FkZXJyb3InLCBzZWxmLl9pZCwgc2VsZi5fbm9kZS5lcnJvciA/IHNlbGYuX25vZGUuZXJyb3IuY29kZSA6IDApO1xuXG4gICAgICAvLyBDbGVhciB0aGUgZXZlbnQgbGlzdGVuZXIuXG4gICAgICBzZWxmLl9ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgc2VsZi5fZXJyb3JGbiwgZmFsc2UpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBIVE1MNSBBdWRpbyBjYW5wbGF5dGhyb3VnaCBsaXN0ZW5lciBjYWxsYmFjay5cbiAgICAgKi9cbiAgICBfbG9hZExpc3RlbmVyOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBwYXJlbnQgPSBzZWxmLl9wYXJlbnQ7XG5cbiAgICAgIC8vIFJvdW5kIHVwIHRoZSBkdXJhdGlvbiB0byBhY2NvdW50IGZvciB0aGUgbG93ZXIgcHJlY2lzaW9uIGluIEhUTUw1IEF1ZGlvLlxuICAgICAgcGFyZW50Ll9kdXJhdGlvbiA9IE1hdGguY2VpbChzZWxmLl9ub2RlLmR1cmF0aW9uICogMTApIC8gMTA7XG5cbiAgICAgIC8vIFNldHVwIGEgc3ByaXRlIGlmIG5vbmUgaXMgZGVmaW5lZC5cbiAgICAgIGlmIChPYmplY3Qua2V5cyhwYXJlbnQuX3Nwcml0ZSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHBhcmVudC5fc3ByaXRlID0ge19fZGVmYXVsdDogWzAsIHBhcmVudC5fZHVyYXRpb24gKiAxMDAwXX07XG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJlbnQuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgICBwYXJlbnQuX3N0YXRlID0gJ2xvYWRlZCc7XG4gICAgICAgIHBhcmVudC5fZW1pdCgnbG9hZCcpO1xuICAgICAgICBwYXJlbnQuX2xvYWRRdWV1ZSgpO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhciB0aGUgZXZlbnQgbGlzdGVuZXIuXG4gICAgICBzZWxmLl9ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoSG93bGVyLl9jYW5QbGF5RXZlbnQsIHNlbGYuX2xvYWRGbiwgZmFsc2UpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBIVE1MNSBBdWRpbyBlbmRlZCBsaXN0ZW5lciBjYWxsYmFjay5cbiAgICAgKi9cbiAgICBfZW5kTGlzdGVuZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcblxuICAgICAgLy8gT25seSBoYW5kbGUgdGhlIGBlbmRlZGBgIGV2ZW50IGlmIHRoZSBkdXJhdGlvbiBpcyBJbmZpbml0eS5cbiAgICAgIGlmIChwYXJlbnQuX2R1cmF0aW9uID09PSBJbmZpbml0eSkge1xuICAgICAgICAvLyBVcGRhdGUgdGhlIHBhcmVudCBkdXJhdGlvbiB0byBtYXRjaCB0aGUgcmVhbCBhdWRpbyBkdXJhdGlvbi5cbiAgICAgICAgLy8gUm91bmQgdXAgdGhlIGR1cmF0aW9uIHRvIGFjY291bnQgZm9yIHRoZSBsb3dlciBwcmVjaXNpb24gaW4gSFRNTDUgQXVkaW8uXG4gICAgICAgIHBhcmVudC5fZHVyYXRpb24gPSBNYXRoLmNlaWwoc2VsZi5fbm9kZS5kdXJhdGlvbiAqIDEwKSAvIDEwO1xuXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgc3ByaXRlIHRoYXQgY29ycmVzcG9uZHMgdG8gdGhlIHJlYWwgZHVyYXRpb24uXG4gICAgICAgIGlmIChwYXJlbnQuX3Nwcml0ZS5fX2RlZmF1bHRbMV0gPT09IEluZmluaXR5KSB7XG4gICAgICAgICAgcGFyZW50Ll9zcHJpdGUuX19kZWZhdWx0WzFdID0gcGFyZW50Ll9kdXJhdGlvbiAqIDEwMDA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSdW4gdGhlIHJlZ3VsYXIgZW5kZWQgbWV0aG9kLlxuICAgICAgICBwYXJlbnQuX2VuZGVkKHNlbGYpO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhciB0aGUgZXZlbnQgbGlzdGVuZXIgc2luY2UgdGhlIGR1cmF0aW9uIGlzIG5vdyBjb3JyZWN0LlxuICAgICAgc2VsZi5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdlbmRlZCcsIHNlbGYuX2VuZEZuLCBmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKiBIZWxwZXIgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICB2YXIgY2FjaGUgPSB7fTtcblxuICAvKipcbiAgICogQnVmZmVyIGEgc291bmQgZnJvbSBVUkwsIERhdGEgVVJJIG9yIGNhY2hlIGFuZCBkZWNvZGUgdG8gYXVkaW8gc291cmNlIChXZWIgQXVkaW8gQVBJKS5cbiAgICogQHBhcmFtICB7SG93bH0gc2VsZlxuICAgKi9cbiAgdmFyIGxvYWRCdWZmZXIgPSBmdW5jdGlvbihzZWxmKSB7XG4gICAgdmFyIHVybCA9IHNlbGYuX3NyYztcblxuICAgIC8vIENoZWNrIGlmIHRoZSBidWZmZXIgaGFzIGFscmVhZHkgYmVlbiBjYWNoZWQgYW5kIHVzZSBpdCBpbnN0ZWFkLlxuICAgIGlmIChjYWNoZVt1cmxdKSB7XG4gICAgICAvLyBTZXQgdGhlIGR1cmF0aW9uIGZyb20gdGhlIGNhY2hlLlxuICAgICAgc2VsZi5fZHVyYXRpb24gPSBjYWNoZVt1cmxdLmR1cmF0aW9uO1xuXG4gICAgICAvLyBMb2FkIHRoZSBzb3VuZCBpbnRvIHRoaXMgSG93bC5cbiAgICAgIGxvYWRTb3VuZChzZWxmKTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICgvXmRhdGE6W147XSs7YmFzZTY0LC8udGVzdCh1cmwpKSB7XG4gICAgICAvLyBEZWNvZGUgdGhlIGJhc2U2NCBkYXRhIFVSSSB3aXRob3V0IFhIUiwgc2luY2Ugc29tZSBicm93c2VycyBkb24ndCBzdXBwb3J0IGl0LlxuICAgICAgdmFyIGRhdGEgPSBhdG9iKHVybC5zcGxpdCgnLCcpWzFdKTtcbiAgICAgIHZhciBkYXRhVmlldyA9IG5ldyBVaW50OEFycmF5KGRhdGEubGVuZ3RoKTtcbiAgICAgIGZvciAodmFyIGk9MDsgaTxkYXRhLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGRhdGFWaWV3W2ldID0gZGF0YS5jaGFyQ29kZUF0KGkpO1xuICAgICAgfVxuXG4gICAgICBkZWNvZGVBdWRpb0RhdGEoZGF0YVZpZXcuYnVmZmVyLCBzZWxmKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTG9hZCB0aGUgYnVmZmVyIGZyb20gdGhlIFVSTC5cbiAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgIHhoci5vcGVuKHNlbGYuX3hoci5tZXRob2QsIHVybCwgdHJ1ZSk7XG4gICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gc2VsZi5feGhyLndpdGhDcmVkZW50aWFscztcbiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInO1xuXG4gICAgICAvLyBBcHBseSBhbnkgY3VzdG9tIGhlYWRlcnMgdG8gdGhlIHJlcXVlc3QuXG4gICAgICBpZiAoc2VsZi5feGhyLmhlYWRlcnMpIHtcbiAgICAgICAgT2JqZWN0LmtleXMoc2VsZi5feGhyLmhlYWRlcnMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoa2V5LCBzZWxmLl94aHIuaGVhZGVyc1trZXldKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gTWFrZSBzdXJlIHdlIGdldCBhIHN1Y2Nlc3NmdWwgcmVzcG9uc2UgYmFjay5cbiAgICAgICAgdmFyIGNvZGUgPSAoeGhyLnN0YXR1cyArICcnKVswXTtcbiAgICAgICAgaWYgKGNvZGUgIT09ICcwJyAmJiBjb2RlICE9PSAnMicgJiYgY29kZSAhPT0gJzMnKSB7XG4gICAgICAgICAgc2VsZi5fZW1pdCgnbG9hZGVycm9yJywgbnVsbCwgJ0ZhaWxlZCBsb2FkaW5nIGF1ZGlvIGZpbGUgd2l0aCBzdGF0dXM6ICcgKyB4aHIuc3RhdHVzICsgJy4nKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBkZWNvZGVBdWRpb0RhdGEoeGhyLnJlc3BvbnNlLCBzZWxmKTtcbiAgICAgIH07XG4gICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBJZiB0aGVyZSBpcyBhbiBlcnJvciwgc3dpdGNoIHRvIEhUTUw1IEF1ZGlvLlxuICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICBzZWxmLl9odG1sNSA9IHRydWU7XG4gICAgICAgICAgc2VsZi5fd2ViQXVkaW8gPSBmYWxzZTtcbiAgICAgICAgICBzZWxmLl9zb3VuZHMgPSBbXTtcbiAgICAgICAgICBkZWxldGUgY2FjaGVbdXJsXTtcbiAgICAgICAgICBzZWxmLmxvYWQoKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHNhZmVYaHJTZW5kKHhocik7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZW5kIHRoZSBYSFIgcmVxdWVzdCB3cmFwcGVkIGluIGEgdHJ5L2NhdGNoLlxuICAgKiBAcGFyYW0gIHtPYmplY3R9IHhociBYSFIgdG8gc2VuZC5cbiAgICovXG4gIHZhciBzYWZlWGhyU2VuZCA9IGZ1bmN0aW9uKHhocikge1xuICAgIHRyeSB7XG4gICAgICB4aHIuc2VuZCgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHhoci5vbmVycm9yKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBEZWNvZGUgYXVkaW8gZGF0YSBmcm9tIGFuIGFycmF5IGJ1ZmZlci5cbiAgICogQHBhcmFtICB7QXJyYXlCdWZmZXJ9IGFycmF5YnVmZmVyIFRoZSBhdWRpbyBkYXRhLlxuICAgKiBAcGFyYW0gIHtIb3dsfSAgICAgICAgc2VsZlxuICAgKi9cbiAgdmFyIGRlY29kZUF1ZGlvRGF0YSA9IGZ1bmN0aW9uKGFycmF5YnVmZmVyLCBzZWxmKSB7XG4gICAgLy8gRmlyZSBhIGxvYWQgZXJyb3IgaWYgc29tZXRoaW5nIGJyb2tlLlxuICAgIHZhciBlcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgc2VsZi5fZW1pdCgnbG9hZGVycm9yJywgbnVsbCwgJ0RlY29kaW5nIGF1ZGlvIGRhdGEgZmFpbGVkLicpO1xuICAgIH07XG5cbiAgICAvLyBMb2FkIHRoZSBzb3VuZCBvbiBzdWNjZXNzLlxuICAgIHZhciBzdWNjZXNzID0gZnVuY3Rpb24oYnVmZmVyKSB7XG4gICAgICBpZiAoYnVmZmVyICYmIHNlbGYuX3NvdW5kcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNhY2hlW3NlbGYuX3NyY10gPSBidWZmZXI7XG4gICAgICAgIGxvYWRTb3VuZChzZWxmLCBidWZmZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXJyb3IoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gRGVjb2RlIHRoZSBidWZmZXIgaW50byBhbiBhdWRpbyBzb3VyY2UuXG4gICAgaWYgKHR5cGVvZiBQcm9taXNlICE9PSAndW5kZWZpbmVkJyAmJiBIb3dsZXIuY3R4LmRlY29kZUF1ZGlvRGF0YS5sZW5ndGggPT09IDEpIHtcbiAgICAgIEhvd2xlci5jdHguZGVjb2RlQXVkaW9EYXRhKGFycmF5YnVmZmVyKS50aGVuKHN1Y2Nlc3MpLmNhdGNoKGVycm9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgSG93bGVyLmN0eC5kZWNvZGVBdWRpb0RhdGEoYXJyYXlidWZmZXIsIHN1Y2Nlc3MsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU291bmQgaXMgbm93IGxvYWRlZCwgc28gZmluaXNoIHNldHRpbmcgZXZlcnl0aGluZyB1cCBhbmQgZmlyZSB0aGUgbG9hZGVkIGV2ZW50LlxuICAgKiBAcGFyYW0gIHtIb3dsfSBzZWxmXG4gICAqIEBwYXJhbSAge09iamVjdH0gYnVmZmVyIFRoZSBkZWNvZGVkIGJ1ZmZlciBzb3VuZCBzb3VyY2UuXG4gICAqL1xuICB2YXIgbG9hZFNvdW5kID0gZnVuY3Rpb24oc2VsZiwgYnVmZmVyKSB7XG4gICAgLy8gU2V0IHRoZSBkdXJhdGlvbi5cbiAgICBpZiAoYnVmZmVyICYmICFzZWxmLl9kdXJhdGlvbikge1xuICAgICAgc2VsZi5fZHVyYXRpb24gPSBidWZmZXIuZHVyYXRpb247XG4gICAgfVxuXG4gICAgLy8gU2V0dXAgYSBzcHJpdGUgaWYgbm9uZSBpcyBkZWZpbmVkLlxuICAgIGlmIChPYmplY3Qua2V5cyhzZWxmLl9zcHJpdGUpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgc2VsZi5fc3ByaXRlID0ge19fZGVmYXVsdDogWzAsIHNlbGYuX2R1cmF0aW9uICogMTAwMF19O1xuICAgIH1cblxuICAgIC8vIEZpcmUgdGhlIGxvYWRlZCBldmVudC5cbiAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICBzZWxmLl9zdGF0ZSA9ICdsb2FkZWQnO1xuICAgICAgc2VsZi5fZW1pdCgnbG9hZCcpO1xuICAgICAgc2VsZi5fbG9hZFF1ZXVlKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXR1cCB0aGUgYXVkaW8gY29udGV4dCB3aGVuIGF2YWlsYWJsZSwgb3Igc3dpdGNoIHRvIEhUTUw1IEF1ZGlvIG1vZGUuXG4gICAqL1xuICB2YXIgc2V0dXBBdWRpb0NvbnRleHQgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBJZiB3ZSBoYXZlIGFscmVhZHkgZGV0ZWN0ZWQgdGhhdCBXZWIgQXVkaW8gaXNuJ3Qgc3VwcG9ydGVkLCBkb24ndCBydW4gdGhpcyBzdGVwIGFnYWluLlxuICAgIGlmICghSG93bGVyLnVzaW5nV2ViQXVkaW8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiB3ZSBhcmUgdXNpbmcgV2ViIEF1ZGlvIGFuZCBzZXR1cCB0aGUgQXVkaW9Db250ZXh0IGlmIHdlIGFyZS5cbiAgICB0cnkge1xuICAgICAgaWYgKHR5cGVvZiBBdWRpb0NvbnRleHQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIEhvd2xlci5jdHggPSBuZXcgQXVkaW9Db250ZXh0KCk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB3ZWJraXRBdWRpb0NvbnRleHQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIEhvd2xlci5jdHggPSBuZXcgd2Via2l0QXVkaW9Db250ZXh0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBIb3dsZXIudXNpbmdXZWJBdWRpbyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0gY2F0Y2goZSkge1xuICAgICAgSG93bGVyLnVzaW5nV2ViQXVkaW8gPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgYXVkaW8gY29udGV4dCBjcmVhdGlvbiBzdGlsbCBmYWlsZWQsIHNldCB1c2luZyB3ZWIgYXVkaW8gdG8gZmFsc2UuXG4gICAgaWYgKCFIb3dsZXIuY3R4KSB7XG4gICAgICBIb3dsZXIudXNpbmdXZWJBdWRpbyA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIGEgd2VidmlldyBpcyBiZWluZyB1c2VkIG9uIGlPUzggb3IgZWFybGllciAocmF0aGVyIHRoYW4gdGhlIGJyb3dzZXIpLlxuICAgIC8vIElmIGl0IGlzLCBkaXNhYmxlIFdlYiBBdWRpbyBhcyBpdCBjYXVzZXMgY3Jhc2hpbmcuXG4gICAgdmFyIGlPUyA9ICgvaVAoaG9uZXxvZHxhZCkvLnRlc3QoSG93bGVyLl9uYXZpZ2F0b3IgJiYgSG93bGVyLl9uYXZpZ2F0b3IucGxhdGZvcm0pKTtcbiAgICB2YXIgYXBwVmVyc2lvbiA9IEhvd2xlci5fbmF2aWdhdG9yICYmIEhvd2xlci5fbmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2goL09TIChcXGQrKV8oXFxkKylfPyhcXGQrKT8vKTtcbiAgICB2YXIgdmVyc2lvbiA9IGFwcFZlcnNpb24gPyBwYXJzZUludChhcHBWZXJzaW9uWzFdLCAxMCkgOiBudWxsO1xuICAgIGlmIChpT1MgJiYgdmVyc2lvbiAmJiB2ZXJzaW9uIDwgOSkge1xuICAgICAgdmFyIHNhZmFyaSA9IC9zYWZhcmkvLnRlc3QoSG93bGVyLl9uYXZpZ2F0b3IgJiYgSG93bGVyLl9uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpO1xuICAgICAgaWYgKEhvd2xlci5fbmF2aWdhdG9yICYmICFzYWZhcmkpIHtcbiAgICAgICAgSG93bGVyLnVzaW5nV2ViQXVkaW8gPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgYW5kIGV4cG9zZSB0aGUgbWFzdGVyIEdhaW5Ob2RlIHdoZW4gdXNpbmcgV2ViIEF1ZGlvICh1c2VmdWwgZm9yIHBsdWdpbnMgb3IgYWR2YW5jZWQgdXNhZ2UpLlxuICAgIGlmIChIb3dsZXIudXNpbmdXZWJBdWRpbykge1xuICAgICAgSG93bGVyLm1hc3RlckdhaW4gPSAodHlwZW9mIEhvd2xlci5jdHguY3JlYXRlR2FpbiA9PT0gJ3VuZGVmaW5lZCcpID8gSG93bGVyLmN0eC5jcmVhdGVHYWluTm9kZSgpIDogSG93bGVyLmN0eC5jcmVhdGVHYWluKCk7XG4gICAgICBIb3dsZXIubWFzdGVyR2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKEhvd2xlci5fbXV0ZWQgPyAwIDogSG93bGVyLl92b2x1bWUsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgSG93bGVyLm1hc3RlckdhaW4uY29ubmVjdChIb3dsZXIuY3R4LmRlc3RpbmF0aW9uKTtcbiAgICB9XG5cbiAgICAvLyBSZS1ydW4gdGhlIHNldHVwIG9uIEhvd2xlci5cbiAgICBIb3dsZXIuX3NldHVwKCk7XG4gIH07XG5cbiAgLy8gQWRkIHN1cHBvcnQgZm9yIEFNRCAoQXN5bmNocm9ub3VzIE1vZHVsZSBEZWZpbml0aW9uKSBsaWJyYXJpZXMgc3VjaCBhcyByZXF1aXJlLmpzLlxuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKFtdLCBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIEhvd2xlcjogSG93bGVyLFxuICAgICAgICBIb3dsOiBIb3dsXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgLy8gQWRkIHN1cHBvcnQgZm9yIENvbW1vbkpTIGxpYnJhcmllcyBzdWNoIGFzIGJyb3dzZXJpZnkuXG4gIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBleHBvcnRzLkhvd2xlciA9IEhvd2xlcjtcbiAgICBleHBvcnRzLkhvd2wgPSBIb3dsO1xuICB9XG5cbiAgLy8gQWRkIHRvIGdsb2JhbCBpbiBOb2RlLmpzIChmb3IgdGVzdGluZywgZXRjKS5cbiAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgZ2xvYmFsLkhvd2xlckdsb2JhbCA9IEhvd2xlckdsb2JhbDtcbiAgICBnbG9iYWwuSG93bGVyID0gSG93bGVyO1xuICAgIGdsb2JhbC5Ib3dsID0gSG93bDtcbiAgICBnbG9iYWwuU291bmQgPSBTb3VuZDtcbiAgfSBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgeyAgLy8gRGVmaW5lIGdsb2JhbGx5IGluIGNhc2UgQU1EIGlzIG5vdCBhdmFpbGFibGUgb3IgdW51c2VkLlxuICAgIHdpbmRvdy5Ib3dsZXJHbG9iYWwgPSBIb3dsZXJHbG9iYWw7XG4gICAgd2luZG93Lkhvd2xlciA9IEhvd2xlcjtcbiAgICB3aW5kb3cuSG93bCA9IEhvd2w7XG4gICAgd2luZG93LlNvdW5kID0gU291bmQ7XG4gIH1cbn0pKCk7XG5cblxuLyohXG4gKiAgU3BhdGlhbCBQbHVnaW4gLSBBZGRzIHN1cHBvcnQgZm9yIHN0ZXJlbyBhbmQgM0QgYXVkaW8gd2hlcmUgV2ViIEF1ZGlvIGlzIHN1cHBvcnRlZC5cbiAqICBcbiAqICBob3dsZXIuanMgdjIuMi40XG4gKiAgaG93bGVyanMuY29tXG4gKlxuICogIChjKSAyMDEzLTIwMjAsIEphbWVzIFNpbXBzb24gb2YgR29sZEZpcmUgU3R1ZGlvc1xuICogIGdvbGRmaXJlc3R1ZGlvcy5jb21cbiAqXG4gKiAgTUlUIExpY2Vuc2VcbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8vIFNldHVwIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgSG93bGVyR2xvYmFsLnByb3RvdHlwZS5fcG9zID0gWzAsIDAsIDBdO1xuICBIb3dsZXJHbG9iYWwucHJvdG90eXBlLl9vcmllbnRhdGlvbiA9IFswLCAwLCAtMSwgMCwgMSwgMF07XG5cbiAgLyoqIEdsb2JhbCBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBIZWxwZXIgbWV0aG9kIHRvIHVwZGF0ZSB0aGUgc3RlcmVvIHBhbm5pbmcgcG9zaXRpb24gb2YgYWxsIGN1cnJlbnQgSG93bHMuXG4gICAqIEZ1dHVyZSBIb3dscyB3aWxsIG5vdCB1c2UgdGhpcyB2YWx1ZSB1bmxlc3MgZXhwbGljaXRseSBzZXQuXG4gICAqIEBwYXJhbSAge051bWJlcn0gcGFuIEEgdmFsdWUgb2YgLTEuMCBpcyBhbGwgdGhlIHdheSBsZWZ0IGFuZCAxLjAgaXMgYWxsIHRoZSB3YXkgcmlnaHQuXG4gICAqIEByZXR1cm4ge0hvd2xlci9OdW1iZXJ9ICAgICBTZWxmIG9yIGN1cnJlbnQgc3RlcmVvIHBhbm5pbmcgdmFsdWUuXG4gICAqL1xuICBIb3dsZXJHbG9iYWwucHJvdG90eXBlLnN0ZXJlbyA9IGZ1bmN0aW9uKHBhbikge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5jdHggfHwgIXNlbGYuY3R4Lmxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBMb29wIHRocm91Z2ggYWxsIEhvd2xzIGFuZCB1cGRhdGUgdGhlaXIgc3RlcmVvIHBhbm5pbmcuXG4gICAgZm9yICh2YXIgaT1zZWxmLl9ob3dscy5sZW5ndGgtMTsgaT49MDsgaS0tKSB7XG4gICAgICBzZWxmLl9ob3dsc1tpXS5zdGVyZW8ocGFuKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgcG9zaXRpb24gb2YgdGhlIGxpc3RlbmVyIGluIDNEIGNhcnRlc2lhbiBzcGFjZS4gU291bmRzIHVzaW5nXG4gICAqIDNEIHBvc2l0aW9uIHdpbGwgYmUgcmVsYXRpdmUgdG8gdGhlIGxpc3RlbmVyJ3MgcG9zaXRpb24uXG4gICAqIEBwYXJhbSAge051bWJlcn0geCBUaGUgeC1wb3NpdGlvbiBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geSBUaGUgeS1wb3NpdGlvbiBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geiBUaGUgei1wb3NpdGlvbiBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEByZXR1cm4ge0hvd2xlci9BcnJheX0gICBTZWxmIG9yIGN1cnJlbnQgbGlzdGVuZXIgcG9zaXRpb24uXG4gICAqL1xuICBIb3dsZXJHbG9iYWwucHJvdG90eXBlLnBvcyA9IGZ1bmN0aW9uKHgsIHksIHopIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuY3R4IHx8ICFzZWxmLmN0eC5saXN0ZW5lcikge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBkZWZhdWx0cyBmb3Igb3B0aW9uYWwgJ3knICYgJ3onLlxuICAgIHkgPSAodHlwZW9mIHkgIT09ICdudW1iZXInKSA/IHNlbGYuX3Bvc1sxXSA6IHk7XG4gICAgeiA9ICh0eXBlb2YgeiAhPT0gJ251bWJlcicpID8gc2VsZi5fcG9zWzJdIDogejtcblxuICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgIHNlbGYuX3BvcyA9IFt4LCB5LCB6XTtcblxuICAgICAgaWYgKHR5cGVvZiBzZWxmLmN0eC5saXN0ZW5lci5wb3NpdGlvblggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLnBvc2l0aW9uWC5zZXRUYXJnZXRBdFRpbWUoc2VsZi5fcG9zWzBdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci5wb3NpdGlvblkuc2V0VGFyZ2V0QXRUaW1lKHNlbGYuX3Bvc1sxXSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIucG9zaXRpb25aLnNldFRhcmdldEF0VGltZShzZWxmLl9wb3NbMl0sIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci5zZXRQb3NpdGlvbihzZWxmLl9wb3NbMF0sIHNlbGYuX3Bvc1sxXSwgc2VsZi5fcG9zWzJdKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHNlbGYuX3BvcztcbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgZGlyZWN0aW9uIHRoZSBsaXN0ZW5lciBpcyBwb2ludGluZyBpbiB0aGUgM0QgY2FydGVzaWFuIHNwYWNlLlxuICAgKiBBIGZyb250IGFuZCB1cCB2ZWN0b3IgbXVzdCBiZSBwcm92aWRlZC4gVGhlIGZyb250IGlzIHRoZSBkaXJlY3Rpb24gdGhlXG4gICAqIGZhY2Ugb2YgdGhlIGxpc3RlbmVyIGlzIHBvaW50aW5nLCBhbmQgdXAgaXMgdGhlIGRpcmVjdGlvbiB0aGUgdG9wIG9mIHRoZVxuICAgKiBsaXN0ZW5lciBpcyBwb2ludGluZy4gVGh1cywgdGhlc2UgdmFsdWVzIGFyZSBleHBlY3RlZCB0byBiZSBhdCByaWdodCBhbmdsZXNcbiAgICogZnJvbSBlYWNoIG90aGVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHggICBUaGUgeC1vcmllbnRhdGlvbiBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geSAgIFRoZSB5LW9yaWVudGF0aW9uIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB6ICAgVGhlIHotb3JpZW50YXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHhVcCBUaGUgeC1vcmllbnRhdGlvbiBvZiB0aGUgdG9wIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB5VXAgVGhlIHktb3JpZW50YXRpb24gb2YgdGhlIHRvcCBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0gelVwIFRoZSB6LW9yaWVudGF0aW9uIG9mIHRoZSB0b3Agb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcmV0dXJuIHtIb3dsZXIvQXJyYXl9ICAgICBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgb3JpZW50YXRpb24gdmVjdG9ycy5cbiAgICovXG4gIEhvd2xlckdsb2JhbC5wcm90b3R5cGUub3JpZW50YXRpb24gPSBmdW5jdGlvbih4LCB5LCB6LCB4VXAsIHlVcCwgelVwKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLmN0eCB8fCAhc2VsZi5jdHgubGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIFNldCB0aGUgZGVmYXVsdHMgZm9yIG9wdGlvbmFsICd5JyAmICd6Jy5cbiAgICB2YXIgb3IgPSBzZWxmLl9vcmllbnRhdGlvbjtcbiAgICB5ID0gKHR5cGVvZiB5ICE9PSAnbnVtYmVyJykgPyBvclsxXSA6IHk7XG4gICAgeiA9ICh0eXBlb2YgeiAhPT0gJ251bWJlcicpID8gb3JbMl0gOiB6O1xuICAgIHhVcCA9ICh0eXBlb2YgeFVwICE9PSAnbnVtYmVyJykgPyBvclszXSA6IHhVcDtcbiAgICB5VXAgPSAodHlwZW9mIHlVcCAhPT0gJ251bWJlcicpID8gb3JbNF0gOiB5VXA7XG4gICAgelVwID0gKHR5cGVvZiB6VXAgIT09ICdudW1iZXInKSA/IG9yWzVdIDogelVwO1xuXG4gICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xuICAgICAgc2VsZi5fb3JpZW50YXRpb24gPSBbeCwgeSwgeiwgeFVwLCB5VXAsIHpVcF07XG5cbiAgICAgIGlmICh0eXBlb2Ygc2VsZi5jdHgubGlzdGVuZXIuZm9yd2FyZFggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLmZvcndhcmRYLnNldFRhcmdldEF0VGltZSh4LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci5mb3J3YXJkWS5zZXRUYXJnZXRBdFRpbWUoeSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIuZm9yd2FyZFouc2V0VGFyZ2V0QXRUaW1lKHosIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLnVwWC5zZXRUYXJnZXRBdFRpbWUoeFVwLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci51cFkuc2V0VGFyZ2V0QXRUaW1lKHlVcCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIudXBaLnNldFRhcmdldEF0VGltZSh6VXAsIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci5zZXRPcmllbnRhdGlvbih4LCB5LCB6LCB4VXAsIHlVcCwgelVwKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG9yO1xuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKiBHcm91cCBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBBZGQgbmV3IHByb3BlcnRpZXMgdG8gdGhlIGNvcmUgaW5pdC5cbiAgICogQHBhcmFtICB7RnVuY3Rpb259IF9zdXBlciBDb3JlIGluaXQgbWV0aG9kLlxuICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgKi9cbiAgSG93bC5wcm90b3R5cGUuaW5pdCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obykge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBTZXR1cCB1c2VyLWRlZmluZWQgZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5fb3JpZW50YXRpb24gPSBvLm9yaWVudGF0aW9uIHx8IFsxLCAwLCAwXTtcbiAgICAgIHNlbGYuX3N0ZXJlbyA9IG8uc3RlcmVvIHx8IG51bGw7XG4gICAgICBzZWxmLl9wb3MgPSBvLnBvcyB8fCBudWxsO1xuICAgICAgc2VsZi5fcGFubmVyQXR0ciA9IHtcbiAgICAgICAgY29uZUlubmVyQW5nbGU6IHR5cGVvZiBvLmNvbmVJbm5lckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZUlubmVyQW5nbGUgOiAzNjAsXG4gICAgICAgIGNvbmVPdXRlckFuZ2xlOiB0eXBlb2Ygby5jb25lT3V0ZXJBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVPdXRlckFuZ2xlIDogMzYwLFxuICAgICAgICBjb25lT3V0ZXJHYWluOiB0eXBlb2Ygby5jb25lT3V0ZXJHYWluICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZU91dGVyR2FpbiA6IDAsXG4gICAgICAgIGRpc3RhbmNlTW9kZWw6IHR5cGVvZiBvLmRpc3RhbmNlTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5kaXN0YW5jZU1vZGVsIDogJ2ludmVyc2UnLFxuICAgICAgICBtYXhEaXN0YW5jZTogdHlwZW9mIG8ubWF4RGlzdGFuY2UgIT09ICd1bmRlZmluZWQnID8gby5tYXhEaXN0YW5jZSA6IDEwMDAwLFxuICAgICAgICBwYW5uaW5nTW9kZWw6IHR5cGVvZiBvLnBhbm5pbmdNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5pbmdNb2RlbCA6ICdIUlRGJyxcbiAgICAgICAgcmVmRGlzdGFuY2U6IHR5cGVvZiBvLnJlZkRpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ucmVmRGlzdGFuY2UgOiAxLFxuICAgICAgICByb2xsb2ZmRmFjdG9yOiB0eXBlb2Ygby5yb2xsb2ZmRmFjdG9yICE9PSAndW5kZWZpbmVkJyA/IG8ucm9sbG9mZkZhY3RvciA6IDFcbiAgICAgIH07XG5cbiAgICAgIC8vIFNldHVwIGV2ZW50IGxpc3RlbmVycy5cbiAgICAgIHNlbGYuX29uc3RlcmVvID0gby5vbnN0ZXJlbyA/IFt7Zm46IG8ub25zdGVyZW99XSA6IFtdO1xuICAgICAgc2VsZi5fb25wb3MgPSBvLm9ucG9zID8gW3tmbjogby5vbnBvc31dIDogW107XG4gICAgICBzZWxmLl9vbm9yaWVudGF0aW9uID0gby5vbm9yaWVudGF0aW9uID8gW3tmbjogby5vbm9yaWVudGF0aW9ufV0gOiBbXTtcblxuICAgICAgLy8gQ29tcGxldGUgaW5pdGlsaXphdGlvbiB3aXRoIGhvd2xlci5qcyBjb3JlJ3MgaW5pdCBmdW5jdGlvbi5cbiAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBvKTtcbiAgICB9O1xuICB9KShIb3dsLnByb3RvdHlwZS5pbml0KTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgc3RlcmVvIHBhbm5pbmcgb2YgdGhlIGF1ZGlvIHNvdXJjZSBmb3IgdGhpcyBzb3VuZCBvciBhbGwgaW4gdGhlIGdyb3VwLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHBhbiAgQSB2YWx1ZSBvZiAtMS4wIGlzIGFsbCB0aGUgd2F5IGxlZnQgYW5kIDEuMCBpcyBhbGwgdGhlIHdheSByaWdodC5cbiAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAob3B0aW9uYWwpIFRoZSBzb3VuZCBJRC4gSWYgbm9uZSBpcyBwYXNzZWQsIGFsbCBpbiBncm91cCB3aWxsIGJlIHVwZGF0ZWQuXG4gICAqIEByZXR1cm4ge0hvd2wvTnVtYmVyfSAgICBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgc3RlcmVvIHBhbm5pbmcgdmFsdWUuXG4gICAqL1xuICBIb3dsLnByb3RvdHlwZS5zdGVyZW8gPSBmdW5jdGlvbihwYW4sIGlkKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLl93ZWJBdWRpbykge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBjaGFuZ2Ugc3RlcmVvIHBhbiB3aGVuIGNhcGFibGUuXG4gICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgIGV2ZW50OiAnc3RlcmVvJyxcbiAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLnN0ZXJlbyhwYW4sIGlkKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBQYW5uZXJTdGVyZW9Ob2RlIHN1cHBvcnQgYW5kIGZhbGxiYWNrIHRvIFBhbm5lck5vZGUgaWYgaXQgZG9lc24ndCBleGlzdC5cbiAgICB2YXIgcGFubmVyVHlwZSA9ICh0eXBlb2YgSG93bGVyLmN0eC5jcmVhdGVTdGVyZW9QYW5uZXIgPT09ICd1bmRlZmluZWQnKSA/ICdzcGF0aWFsJyA6ICdzdGVyZW8nO1xuXG4gICAgLy8gU2V0dXAgdGhlIGdyb3VwJ3Mgc3RlcmVvIHBhbm5pbmcgaWYgbm8gSUQgaXMgcGFzc2VkLlxuICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBSZXR1cm4gdGhlIGdyb3VwJ3Mgc3RlcmVvIHBhbm5pbmcgaWYgbm8gcGFyYW1ldGVycyBhcmUgcGFzc2VkLlxuICAgICAgaWYgKHR5cGVvZiBwYW4gPT09ICdudW1iZXInKSB7XG4gICAgICAgIHNlbGYuX3N0ZXJlbyA9IHBhbjtcbiAgICAgICAgc2VsZi5fcG9zID0gW3BhbiwgMCwgMF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gc2VsZi5fc3RlcmVvO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENoYW5nZSB0aGUgc3RyZW8gcGFubmluZyBvZiBvbmUgb3IgYWxsIHNvdW5kcyBpbiBncm91cC5cbiAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcGFuID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIHNvdW5kLl9zdGVyZW8gPSBwYW47XG4gICAgICAgICAgc291bmQuX3BvcyA9IFtwYW4sIDAsIDBdO1xuXG4gICAgICAgICAgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBhcmUgZmFsbGluZyBiYWNrLCBtYWtlIHN1cmUgdGhlIHBhbm5pbmdNb2RlbCBpcyBlcXVhbHBvd2VyLlxuICAgICAgICAgICAgc291bmQuX3Bhbm5lckF0dHIucGFubmluZ01vZGVsID0gJ2VxdWFscG93ZXInO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhIHBhbm5lciBzZXR1cCBhbmQgY3JlYXRlIGEgbmV3IG9uZSBpZiBub3QuXG4gICAgICAgICAgICBpZiAoIXNvdW5kLl9wYW5uZXIgfHwgIXNvdW5kLl9wYW5uZXIucGFuKSB7XG4gICAgICAgICAgICAgIHNldHVwUGFubmVyKHNvdW5kLCBwYW5uZXJUeXBlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHBhbm5lclR5cGUgPT09ICdzcGF0aWFsJykge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIHNvdW5kLl9wYW5uZXIucG9zaXRpb25YICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIucG9zaXRpb25YLnNldFZhbHVlQXRUaW1lKHBhbiwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5wb3NpdGlvblkuc2V0VmFsdWVBdFRpbWUoMCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5wb3NpdGlvblouc2V0VmFsdWVBdFRpbWUoMCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5zZXRQb3NpdGlvbihwYW4sIDAsIDApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnBhbi5zZXRWYWx1ZUF0VGltZShwYW4sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuX2VtaXQoJ3N0ZXJlbycsIHNvdW5kLl9pZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHNvdW5kLl9zdGVyZW87XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgM0Qgc3BhdGlhbCBwb3NpdGlvbiBvZiB0aGUgYXVkaW8gc291cmNlIGZvciB0aGlzIHNvdW5kIG9yIGdyb3VwIHJlbGF0aXZlIHRvIHRoZSBnbG9iYWwgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geCAgVGhlIHgtcG9zaXRpb24gb2YgdGhlIGF1ZGlvIHNvdXJjZS5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB5ICBUaGUgeS1wb3NpdGlvbiBvZiB0aGUgYXVkaW8gc291cmNlLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHogIFRoZSB6LXBvc2l0aW9uIG9mIHRoZSBhdWRpbyBzb3VyY2UuXG4gICAqIEBwYXJhbSAge051bWJlcn0gaWQgKG9wdGlvbmFsKSBUaGUgc291bmQgSUQuIElmIG5vbmUgaXMgcGFzc2VkLCBhbGwgaW4gZ3JvdXAgd2lsbCBiZSB1cGRhdGVkLlxuICAgKiBAcmV0dXJuIHtIb3dsL0FycmF5fSAgICBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgM0Qgc3BhdGlhbCBwb3NpdGlvbjogW3gsIHksIHpdLlxuICAgKi9cbiAgSG93bC5wcm90b3R5cGUucG9zID0gZnVuY3Rpb24oeCwgeSwgeiwgaWQpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIGNoYW5nZSBwb3NpdGlvbiB3aGVuIGNhcGFibGUuXG4gICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgIGV2ZW50OiAncG9zJyxcbiAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLnBvcyh4LCB5LCB6LCBpZCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIGRlZmF1bHRzIGZvciBvcHRpb25hbCAneScgJiAneicuXG4gICAgeSA9ICh0eXBlb2YgeSAhPT0gJ251bWJlcicpID8gMCA6IHk7XG4gICAgeiA9ICh0eXBlb2YgeiAhPT0gJ251bWJlcicpID8gLTAuNSA6IHo7XG5cbiAgICAvLyBTZXR1cCB0aGUgZ3JvdXAncyBzcGF0aWFsIHBvc2l0aW9uIGlmIG5vIElEIGlzIHBhc3NlZC5cbiAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gUmV0dXJuIHRoZSBncm91cCdzIHNwYXRpYWwgcG9zaXRpb24gaWYgbm8gcGFyYW1ldGVycyBhcmUgcGFzc2VkLlxuICAgICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xuICAgICAgICBzZWxmLl9wb3MgPSBbeCwgeSwgel07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gc2VsZi5fcG9zO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENoYW5nZSB0aGUgc3BhdGlhbCBwb3NpdGlvbiBvZiBvbmUgb3IgYWxsIHNvdW5kcyBpbiBncm91cC5cbiAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICBzb3VuZC5fcG9zID0gW3gsIHksIHpdO1xuXG4gICAgICAgICAgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhIHBhbm5lciBzZXR1cCBhbmQgY3JlYXRlIGEgbmV3IG9uZSBpZiBub3QuXG4gICAgICAgICAgICBpZiAoIXNvdW5kLl9wYW5uZXIgfHwgc291bmQuX3Bhbm5lci5wYW4pIHtcbiAgICAgICAgICAgICAgc2V0dXBQYW5uZXIoc291bmQsICdzcGF0aWFsJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc291bmQuX3Bhbm5lci5wb3NpdGlvblggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIucG9zaXRpb25YLnNldFZhbHVlQXRUaW1lKHgsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWS5zZXRWYWx1ZUF0VGltZSh5LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5wb3NpdGlvblouc2V0VmFsdWVBdFRpbWUoeiwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnNldFBvc2l0aW9uKHgsIHksIHopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuX2VtaXQoJ3BvcycsIHNvdW5kLl9pZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHNvdW5kLl9wb3M7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgZGlyZWN0aW9uIHRoZSBhdWRpbyBzb3VyY2UgaXMgcG9pbnRpbmcgaW4gdGhlIDNEIGNhcnRlc2lhbiBjb29yZGluYXRlXG4gICAqIHNwYWNlLiBEZXBlbmRpbmcgb24gaG93IGRpcmVjdGlvbiB0aGUgc291bmQgaXMsIGJhc2VkIG9uIHRoZSBgY29uZWAgYXR0cmlidXRlcyxcbiAgICogYSBzb3VuZCBwb2ludGluZyBhd2F5IGZyb20gdGhlIGxpc3RlbmVyIGNhbiBiZSBxdWlldCBvciBzaWxlbnQuXG4gICAqIEBwYXJhbSAge051bWJlcn0geCAgVGhlIHgtb3JpZW50YXRpb24gb2YgdGhlIHNvdXJjZS5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB5ICBUaGUgeS1vcmllbnRhdGlvbiBvZiB0aGUgc291cmNlLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHogIFRoZSB6LW9yaWVudGF0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAqIEBwYXJhbSAge051bWJlcn0gaWQgKG9wdGlvbmFsKSBUaGUgc291bmQgSUQuIElmIG5vbmUgaXMgcGFzc2VkLCBhbGwgaW4gZ3JvdXAgd2lsbCBiZSB1cGRhdGVkLlxuICAgKiBAcmV0dXJuIHtIb3dsL0FycmF5fSAgICBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgM0Qgc3BhdGlhbCBvcmllbnRhdGlvbjogW3gsIHksIHpdLlxuICAgKi9cbiAgSG93bC5wcm90b3R5cGUub3JpZW50YXRpb24gPSBmdW5jdGlvbih4LCB5LCB6LCBpZCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gY2hhbmdlIG9yaWVudGF0aW9uIHdoZW4gY2FwYWJsZS5cbiAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgZXZlbnQ6ICdvcmllbnRhdGlvbicsXG4gICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5vcmllbnRhdGlvbih4LCB5LCB6LCBpZCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIGRlZmF1bHRzIGZvciBvcHRpb25hbCAneScgJiAneicuXG4gICAgeSA9ICh0eXBlb2YgeSAhPT0gJ251bWJlcicpID8gc2VsZi5fb3JpZW50YXRpb25bMV0gOiB5O1xuICAgIHogPSAodHlwZW9mIHogIT09ICdudW1iZXInKSA/IHNlbGYuX29yaWVudGF0aW9uWzJdIDogejtcblxuICAgIC8vIFNldHVwIHRoZSBncm91cCdzIHNwYXRpYWwgb3JpZW50YXRpb24gaWYgbm8gSUQgaXMgcGFzc2VkLlxuICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBSZXR1cm4gdGhlIGdyb3VwJ3Mgc3BhdGlhbCBvcmllbnRhdGlvbiBpZiBubyBwYXJhbWV0ZXJzIGFyZSBwYXNzZWQuXG4gICAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICAgIHNlbGYuX29yaWVudGF0aW9uID0gW3gsIHksIHpdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuX29yaWVudGF0aW9uO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENoYW5nZSB0aGUgc3BhdGlhbCBvcmllbnRhdGlvbiBvZiBvbmUgb3IgYWxsIHNvdW5kcyBpbiBncm91cC5cbiAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICBzb3VuZC5fb3JpZW50YXRpb24gPSBbeCwgeSwgel07XG5cbiAgICAgICAgICBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGEgcGFubmVyIHNldHVwIGFuZCBjcmVhdGUgYSBuZXcgb25lIGlmIG5vdC5cbiAgICAgICAgICAgIGlmICghc291bmQuX3Bhbm5lcikge1xuICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgd2UgaGF2ZSBhIHBvc2l0aW9uIHRvIHNldHVwIHRoZSBub2RlIHdpdGguXG4gICAgICAgICAgICAgIGlmICghc291bmQuX3Bvcykge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9wb3MgPSBzZWxmLl9wb3MgfHwgWzAsIDAsIC0wLjVdO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgc2V0dXBQYW5uZXIoc291bmQsICdzcGF0aWFsJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc291bmQuX3Bhbm5lci5vcmllbnRhdGlvblggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIub3JpZW50YXRpb25YLnNldFZhbHVlQXRUaW1lKHgsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLm9yaWVudGF0aW9uWS5zZXRWYWx1ZUF0VGltZSh5LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5vcmllbnRhdGlvblouc2V0VmFsdWVBdFRpbWUoeiwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnNldE9yaWVudGF0aW9uKHgsIHksIHopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuX2VtaXQoJ29yaWVudGF0aW9uJywgc291bmQuX2lkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gc291bmQuX29yaWVudGF0aW9uO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldC9zZXQgdGhlIHBhbm5lciBub2RlJ3MgYXR0cmlidXRlcyBmb3IgYSBzb3VuZCBvciBncm91cCBvZiBzb3VuZHMuXG4gICAqIFRoaXMgbWV0aG9kIGNhbiBvcHRpb25hbGwgdGFrZSAwLCAxIG9yIDIgYXJndW1lbnRzLlxuICAgKiAgIHBhbm5lckF0dHIoKSAtPiBSZXR1cm5zIHRoZSBncm91cCdzIHZhbHVlcy5cbiAgICogICBwYW5uZXJBdHRyKGlkKSAtPiBSZXR1cm5zIHRoZSBzb3VuZCBpZCdzIHZhbHVlcy5cbiAgICogICBwYW5uZXJBdHRyKG8pIC0+IFNldCdzIHRoZSB2YWx1ZXMgb2YgYWxsIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAqICAgcGFubmVyQXR0cihvLCBpZCkgLT4gU2V0J3MgdGhlIHZhbHVlcyBvZiBwYXNzZWQgc291bmQgaWQuXG4gICAqXG4gICAqICAgQXR0cmlidXRlczpcbiAgICogICAgIGNvbmVJbm5lckFuZ2xlIC0gKDM2MCBieSBkZWZhdWx0KSBBIHBhcmFtZXRlciBmb3IgZGlyZWN0aW9uYWwgYXVkaW8gc291cmNlcywgdGhpcyBpcyBhbiBhbmdsZSwgaW4gZGVncmVlcyxcbiAgICogICAgICAgICAgICAgICAgICAgICAgaW5zaWRlIG9mIHdoaWNoIHRoZXJlIHdpbGwgYmUgbm8gdm9sdW1lIHJlZHVjdGlvbi5cbiAgICogICAgIGNvbmVPdXRlckFuZ2xlIC0gKDM2MCBieSBkZWZhdWx0KSBBIHBhcmFtZXRlciBmb3IgZGlyZWN0aW9uYWwgYXVkaW8gc291cmNlcywgdGhpcyBpcyBhbiBhbmdsZSwgaW4gZGVncmVlcyxcbiAgICogICAgICAgICAgICAgICAgICAgICAgb3V0c2lkZSBvZiB3aGljaCB0aGUgdm9sdW1lIHdpbGwgYmUgcmVkdWNlZCB0byBhIGNvbnN0YW50IHZhbHVlIG9mIGBjb25lT3V0ZXJHYWluYC5cbiAgICogICAgIGNvbmVPdXRlckdhaW4gLSAoMCBieSBkZWZhdWx0KSBBIHBhcmFtZXRlciBmb3IgZGlyZWN0aW9uYWwgYXVkaW8gc291cmNlcywgdGhpcyBpcyB0aGUgZ2FpbiBvdXRzaWRlIG9mIHRoZVxuICAgKiAgICAgICAgICAgICAgICAgICAgIGBjb25lT3V0ZXJBbmdsZWAuIEl0IGlzIGEgbGluZWFyIHZhbHVlIGluIHRoZSByYW5nZSBgWzAsIDFdYC5cbiAgICogICAgIGRpc3RhbmNlTW9kZWwgLSAoJ2ludmVyc2UnIGJ5IGRlZmF1bHQpIERldGVybWluZXMgYWxnb3JpdGhtIHVzZWQgdG8gcmVkdWNlIHZvbHVtZSBhcyBhdWRpbyBtb3ZlcyBhd2F5IGZyb21cbiAgICogICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lci4gQ2FuIGJlIGBsaW5lYXJgLCBgaW52ZXJzZWAgb3IgYGV4cG9uZW50aWFsLlxuICAgKiAgICAgbWF4RGlzdGFuY2UgLSAoMTAwMDAgYnkgZGVmYXVsdCkgVGhlIG1heGltdW0gZGlzdGFuY2UgYmV0d2VlbiBzb3VyY2UgYW5kIGxpc3RlbmVyLCBhZnRlciB3aGljaCB0aGUgdm9sdW1lXG4gICAqICAgICAgICAgICAgICAgICAgIHdpbGwgbm90IGJlIHJlZHVjZWQgYW55IGZ1cnRoZXIuXG4gICAqICAgICByZWZEaXN0YW5jZSAtICgxIGJ5IGRlZmF1bHQpIEEgcmVmZXJlbmNlIGRpc3RhbmNlIGZvciByZWR1Y2luZyB2b2x1bWUgYXMgc291cmNlIG1vdmVzIGZ1cnRoZXIgZnJvbSB0aGUgbGlzdGVuZXIuXG4gICAqICAgICAgICAgICAgICAgICAgIFRoaXMgaXMgc2ltcGx5IGEgdmFyaWFibGUgb2YgdGhlIGRpc3RhbmNlIG1vZGVsIGFuZCBoYXMgYSBkaWZmZXJlbnQgZWZmZWN0IGRlcGVuZGluZyBvbiB3aGljaCBtb2RlbFxuICAgKiAgICAgICAgICAgICAgICAgICBpcyB1c2VkIGFuZCB0aGUgc2NhbGUgb2YgeW91ciBjb29yZGluYXRlcy4gR2VuZXJhbGx5LCB2b2x1bWUgd2lsbCBiZSBlcXVhbCB0byAxIGF0IHRoaXMgZGlzdGFuY2UuXG4gICAqICAgICByb2xsb2ZmRmFjdG9yIC0gKDEgYnkgZGVmYXVsdCkgSG93IHF1aWNrbHkgdGhlIHZvbHVtZSByZWR1Y2VzIGFzIHNvdXJjZSBtb3ZlcyBmcm9tIGxpc3RlbmVyLiBUaGlzIGlzIHNpbXBseSBhXG4gICAqICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGUgb2YgdGhlIGRpc3RhbmNlIG1vZGVsIGFuZCBjYW4gYmUgaW4gdGhlIHJhbmdlIG9mIGBbMCwgMV1gIHdpdGggYGxpbmVhcmAgYW5kIGBbMCwgXHUyMjFFXWBcbiAgICogICAgICAgICAgICAgICAgICAgICB3aXRoIGBpbnZlcnNlYCBhbmQgYGV4cG9uZW50aWFsYC5cbiAgICogICAgIHBhbm5pbmdNb2RlbCAtICgnSFJURicgYnkgZGVmYXVsdCkgRGV0ZXJtaW5lcyB3aGljaCBzcGF0aWFsaXphdGlvbiBhbGdvcml0aG0gaXMgdXNlZCB0byBwb3NpdGlvbiBhdWRpby5cbiAgICogICAgICAgICAgICAgICAgICAgICBDYW4gYmUgYEhSVEZgIG9yIGBlcXVhbHBvd2VyYC5cbiAgICpcbiAgICogQHJldHVybiB7SG93bC9PYmplY3R9IFJldHVybnMgc2VsZiBvciBjdXJyZW50IHBhbm5lciBhdHRyaWJ1dGVzLlxuICAgKi9cbiAgSG93bC5wcm90b3R5cGUucGFubmVyQXR0ciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICB2YXIgbywgaWQsIHNvdW5kO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLl93ZWJBdWRpbykge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gRGV0ZXJtaW5lIHRoZSB2YWx1ZXMgYmFzZWQgb24gYXJndW1lbnRzLlxuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gUmV0dXJuIHRoZSBncm91cCdzIHBhbm5lciBhdHRyaWJ1dGUgdmFsdWVzLlxuICAgICAgcmV0dXJuIHNlbGYuX3Bhbm5lckF0dHI7XG4gICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgaWYgKHR5cGVvZiBhcmdzWzBdID09PSAnb2JqZWN0Jykge1xuICAgICAgICBvID0gYXJnc1swXTtcblxuICAgICAgICAvLyBTZXQgdGhlIGdyb3UncyBwYW5uZXIgYXR0cmlidXRlIHZhbHVlcy5cbiAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBpZiAoIW8ucGFubmVyQXR0cikge1xuICAgICAgICAgICAgby5wYW5uZXJBdHRyID0ge1xuICAgICAgICAgICAgICBjb25lSW5uZXJBbmdsZTogby5jb25lSW5uZXJBbmdsZSxcbiAgICAgICAgICAgICAgY29uZU91dGVyQW5nbGU6IG8uY29uZU91dGVyQW5nbGUsXG4gICAgICAgICAgICAgIGNvbmVPdXRlckdhaW46IG8uY29uZU91dGVyR2FpbixcbiAgICAgICAgICAgICAgZGlzdGFuY2VNb2RlbDogby5kaXN0YW5jZU1vZGVsLFxuICAgICAgICAgICAgICBtYXhEaXN0YW5jZTogby5tYXhEaXN0YW5jZSxcbiAgICAgICAgICAgICAgcmVmRGlzdGFuY2U6IG8ucmVmRGlzdGFuY2UsXG4gICAgICAgICAgICAgIHJvbGxvZmZGYWN0b3I6IG8ucm9sbG9mZkZhY3RvcixcbiAgICAgICAgICAgICAgcGFubmluZ01vZGVsOiBvLnBhbm5pbmdNb2RlbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLl9wYW5uZXJBdHRyID0ge1xuICAgICAgICAgICAgY29uZUlubmVyQW5nbGU6IHR5cGVvZiBvLnBhbm5lckF0dHIuY29uZUlubmVyQW5nbGUgIT09ICd1bmRlZmluZWQnID8gby5wYW5uZXJBdHRyLmNvbmVJbm5lckFuZ2xlIDogc2VsZi5fY29uZUlubmVyQW5nbGUsXG4gICAgICAgICAgICBjb25lT3V0ZXJBbmdsZTogdHlwZW9mIG8ucGFubmVyQXR0ci5jb25lT3V0ZXJBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIuY29uZU91dGVyQW5nbGUgOiBzZWxmLl9jb25lT3V0ZXJBbmdsZSxcbiAgICAgICAgICAgIGNvbmVPdXRlckdhaW46IHR5cGVvZiBvLnBhbm5lckF0dHIuY29uZU91dGVyR2FpbiAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIuY29uZU91dGVyR2FpbiA6IHNlbGYuX2NvbmVPdXRlckdhaW4sXG4gICAgICAgICAgICBkaXN0YW5jZU1vZGVsOiB0eXBlb2Ygby5wYW5uZXJBdHRyLmRpc3RhbmNlTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5wYW5uZXJBdHRyLmRpc3RhbmNlTW9kZWwgOiBzZWxmLl9kaXN0YW5jZU1vZGVsLFxuICAgICAgICAgICAgbWF4RGlzdGFuY2U6IHR5cGVvZiBvLnBhbm5lckF0dHIubWF4RGlzdGFuY2UgIT09ICd1bmRlZmluZWQnID8gby5wYW5uZXJBdHRyLm1heERpc3RhbmNlIDogc2VsZi5fbWF4RGlzdGFuY2UsXG4gICAgICAgICAgICByZWZEaXN0YW5jZTogdHlwZW9mIG8ucGFubmVyQXR0ci5yZWZEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIucmVmRGlzdGFuY2UgOiBzZWxmLl9yZWZEaXN0YW5jZSxcbiAgICAgICAgICAgIHJvbGxvZmZGYWN0b3I6IHR5cGVvZiBvLnBhbm5lckF0dHIucm9sbG9mZkZhY3RvciAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIucm9sbG9mZkZhY3RvciA6IHNlbGYuX3JvbGxvZmZGYWN0b3IsXG4gICAgICAgICAgICBwYW5uaW5nTW9kZWw6IHR5cGVvZiBvLnBhbm5lckF0dHIucGFubmluZ01vZGVsICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmVyQXR0ci5wYW5uaW5nTW9kZWwgOiBzZWxmLl9wYW5uaW5nTW9kZWxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBSZXR1cm4gdGhpcyBzb3VuZCdzIHBhbm5lciBhdHRyaWJ1dGUgdmFsdWVzLlxuICAgICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChwYXJzZUludChhcmdzWzBdLCAxMCkpO1xuICAgICAgICByZXR1cm4gc291bmQgPyBzb3VuZC5fcGFubmVyQXR0ciA6IHNlbGYuX3Bhbm5lckF0dHI7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xuICAgICAgbyA9IGFyZ3NbMF07XG4gICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgdGhlIHZhbHVlcyBvZiB0aGUgc3BlY2lmaWVkIHNvdW5kcy5cbiAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAvLyBNZXJnZSB0aGUgbmV3IHZhbHVlcyBpbnRvIHRoZSBzb3VuZC5cbiAgICAgICAgdmFyIHBhID0gc291bmQuX3Bhbm5lckF0dHI7XG4gICAgICAgIHBhID0ge1xuICAgICAgICAgIGNvbmVJbm5lckFuZ2xlOiB0eXBlb2Ygby5jb25lSW5uZXJBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVJbm5lckFuZ2xlIDogcGEuY29uZUlubmVyQW5nbGUsXG4gICAgICAgICAgY29uZU91dGVyQW5nbGU6IHR5cGVvZiBvLmNvbmVPdXRlckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZU91dGVyQW5nbGUgOiBwYS5jb25lT3V0ZXJBbmdsZSxcbiAgICAgICAgICBjb25lT3V0ZXJHYWluOiB0eXBlb2Ygby5jb25lT3V0ZXJHYWluICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZU91dGVyR2FpbiA6IHBhLmNvbmVPdXRlckdhaW4sXG4gICAgICAgICAgZGlzdGFuY2VNb2RlbDogdHlwZW9mIG8uZGlzdGFuY2VNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLmRpc3RhbmNlTW9kZWwgOiBwYS5kaXN0YW5jZU1vZGVsLFxuICAgICAgICAgIG1heERpc3RhbmNlOiB0eXBlb2Ygby5tYXhEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLm1heERpc3RhbmNlIDogcGEubWF4RGlzdGFuY2UsXG4gICAgICAgICAgcmVmRGlzdGFuY2U6IHR5cGVvZiBvLnJlZkRpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ucmVmRGlzdGFuY2UgOiBwYS5yZWZEaXN0YW5jZSxcbiAgICAgICAgICByb2xsb2ZmRmFjdG9yOiB0eXBlb2Ygby5yb2xsb2ZmRmFjdG9yICE9PSAndW5kZWZpbmVkJyA/IG8ucm9sbG9mZkZhY3RvciA6IHBhLnJvbGxvZmZGYWN0b3IsXG4gICAgICAgICAgcGFubmluZ01vZGVsOiB0eXBlb2Ygby5wYW5uaW5nTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5wYW5uaW5nTW9kZWwgOiBwYS5wYW5uaW5nTW9kZWxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBDcmVhdGUgYSBuZXcgcGFubmVyIG5vZGUgaWYgb25lIGRvZXNuJ3QgYWxyZWFkeSBleGlzdC5cbiAgICAgICAgdmFyIHBhbm5lciA9IHNvdW5kLl9wYW5uZXI7XG4gICAgICAgIGlmICghcGFubmVyKSB7XG4gICAgICAgICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgYSBwb3NpdGlvbiB0byBzZXR1cCB0aGUgbm9kZSB3aXRoLlxuICAgICAgICAgIGlmICghc291bmQuX3Bvcykge1xuICAgICAgICAgICAgc291bmQuX3BvcyA9IHNlbGYuX3BvcyB8fCBbMCwgMCwgLTAuNV07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IHBhbm5lciBub2RlLlxuICAgICAgICAgIHNldHVwUGFubmVyKHNvdW5kLCAnc3BhdGlhbCcpO1xuICAgICAgICAgIHBhbm5lciA9IHNvdW5kLl9wYW5uZXJcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgcGFubmVyIHZhbHVlcyBvciBjcmVhdGUgYSBuZXcgcGFubmVyIGlmIG5vbmUgZXhpc3RzLlxuICAgICAgICBwYW5uZXIuY29uZUlubmVyQW5nbGUgPSBwYS5jb25lSW5uZXJBbmdsZTtcbiAgICAgICAgcGFubmVyLmNvbmVPdXRlckFuZ2xlID0gcGEuY29uZU91dGVyQW5nbGU7XG4gICAgICAgIHBhbm5lci5jb25lT3V0ZXJHYWluID0gcGEuY29uZU91dGVyR2FpbjtcbiAgICAgICAgcGFubmVyLmRpc3RhbmNlTW9kZWwgPSBwYS5kaXN0YW5jZU1vZGVsO1xuICAgICAgICBwYW5uZXIubWF4RGlzdGFuY2UgPSBwYS5tYXhEaXN0YW5jZTtcbiAgICAgICAgcGFubmVyLnJlZkRpc3RhbmNlID0gcGEucmVmRGlzdGFuY2U7XG4gICAgICAgIHBhbm5lci5yb2xsb2ZmRmFjdG9yID0gcGEucm9sbG9mZkZhY3RvcjtcbiAgICAgICAgcGFubmVyLnBhbm5pbmdNb2RlbCA9IHBhLnBhbm5pbmdNb2RlbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKiogU2luZ2xlIFNvdW5kIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIEFkZCBuZXcgcHJvcGVydGllcyB0byB0aGUgY29yZSBTb3VuZCBpbml0LlxuICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gX3N1cGVyIENvcmUgU291bmQgaW5pdCBtZXRob2QuXG4gICAqIEByZXR1cm4ge1NvdW5kfVxuICAgKi9cbiAgU291bmQucHJvdG90eXBlLmluaXQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcblxuICAgICAgLy8gU2V0dXAgdXNlci1kZWZpbmVkIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgICAgIHNlbGYuX29yaWVudGF0aW9uID0gcGFyZW50Ll9vcmllbnRhdGlvbjtcbiAgICAgIHNlbGYuX3N0ZXJlbyA9IHBhcmVudC5fc3RlcmVvO1xuICAgICAgc2VsZi5fcG9zID0gcGFyZW50Ll9wb3M7XG4gICAgICBzZWxmLl9wYW5uZXJBdHRyID0gcGFyZW50Ll9wYW5uZXJBdHRyO1xuXG4gICAgICAvLyBDb21wbGV0ZSBpbml0aWxpemF0aW9uIHdpdGggaG93bGVyLmpzIGNvcmUgU291bmQncyBpbml0IGZ1bmN0aW9uLlxuICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cbiAgICAgIC8vIElmIGEgc3RlcmVvIG9yIHBvc2l0aW9uIHdhcyBzcGVjaWZpZWQsIHNldCBpdCB1cC5cbiAgICAgIGlmIChzZWxmLl9zdGVyZW8pIHtcbiAgICAgICAgcGFyZW50LnN0ZXJlbyhzZWxmLl9zdGVyZW8pO1xuICAgICAgfSBlbHNlIGlmIChzZWxmLl9wb3MpIHtcbiAgICAgICAgcGFyZW50LnBvcyhzZWxmLl9wb3NbMF0sIHNlbGYuX3Bvc1sxXSwgc2VsZi5fcG9zWzJdLCBzZWxmLl9pZCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSkoU291bmQucHJvdG90eXBlLmluaXQpO1xuXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgU291bmQucmVzZXQgbWV0aG9kIHRvIGNsZWFuIHVwIHByb3BlcnRpZXMgZnJvbSB0aGUgc3BhdGlhbCBwbHVnaW4uXG4gICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBfc3VwZXIgU291bmQgcmVzZXQgbWV0aG9kLlxuICAgKiBAcmV0dXJuIHtTb3VuZH1cbiAgICovXG4gIFNvdW5kLnByb3RvdHlwZS5yZXNldCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBSZXNldCBhbGwgc3BhdGlhbCBwbHVnaW4gcHJvcGVydGllcyBvbiB0aGlzIHNvdW5kLlxuICAgICAgc2VsZi5fb3JpZW50YXRpb24gPSBwYXJlbnQuX29yaWVudGF0aW9uO1xuICAgICAgc2VsZi5fc3RlcmVvID0gcGFyZW50Ll9zdGVyZW87XG4gICAgICBzZWxmLl9wb3MgPSBwYXJlbnQuX3BvcztcbiAgICAgIHNlbGYuX3Bhbm5lckF0dHIgPSBwYXJlbnQuX3Bhbm5lckF0dHI7XG5cbiAgICAgIC8vIElmIGEgc3RlcmVvIG9yIHBvc2l0aW9uIHdhcyBzcGVjaWZpZWQsIHNldCBpdCB1cC5cbiAgICAgIGlmIChzZWxmLl9zdGVyZW8pIHtcbiAgICAgICAgcGFyZW50LnN0ZXJlbyhzZWxmLl9zdGVyZW8pO1xuICAgICAgfSBlbHNlIGlmIChzZWxmLl9wb3MpIHtcbiAgICAgICAgcGFyZW50LnBvcyhzZWxmLl9wb3NbMF0sIHNlbGYuX3Bvc1sxXSwgc2VsZi5fcG9zWzJdLCBzZWxmLl9pZCk7XG4gICAgICB9IGVsc2UgaWYgKHNlbGYuX3Bhbm5lcikge1xuICAgICAgICAvLyBEaXNjb25uZWN0IHRoZSBwYW5uZXIuXG4gICAgICAgIHNlbGYuX3Bhbm5lci5kaXNjb25uZWN0KDApO1xuICAgICAgICBzZWxmLl9wYW5uZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIHBhcmVudC5fcmVmcmVzaEJ1ZmZlcihzZWxmKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ29tcGxldGUgcmVzZXR0aW5nIG9mIHRoZSBzb3VuZC5cbiAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICB9O1xuICB9KShTb3VuZC5wcm90b3R5cGUucmVzZXQpO1xuXG4gIC8qKiBIZWxwZXIgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IHBhbm5lciBub2RlIGFuZCBzYXZlIGl0IG9uIHRoZSBzb3VuZC5cbiAgICogQHBhcmFtICB7U291bmR9IHNvdW5kIFNwZWNpZmljIHNvdW5kIHRvIHNldHVwIHBhbm5pbmcgb24uXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFR5cGUgb2YgcGFubmVyIHRvIGNyZWF0ZTogJ3N0ZXJlbycgb3IgJ3NwYXRpYWwnLlxuICAgKi9cbiAgdmFyIHNldHVwUGFubmVyID0gZnVuY3Rpb24oc291bmQsIHR5cGUpIHtcbiAgICB0eXBlID0gdHlwZSB8fCAnc3BhdGlhbCc7XG5cbiAgICAvLyBDcmVhdGUgdGhlIG5ldyBwYW5uZXIgbm9kZS5cbiAgICBpZiAodHlwZSA9PT0gJ3NwYXRpYWwnKSB7XG4gICAgICBzb3VuZC5fcGFubmVyID0gSG93bGVyLmN0eC5jcmVhdGVQYW5uZXIoKTtcbiAgICAgIHNvdW5kLl9wYW5uZXIuY29uZUlubmVyQW5nbGUgPSBzb3VuZC5fcGFubmVyQXR0ci5jb25lSW5uZXJBbmdsZTtcbiAgICAgIHNvdW5kLl9wYW5uZXIuY29uZU91dGVyQW5nbGUgPSBzb3VuZC5fcGFubmVyQXR0ci5jb25lT3V0ZXJBbmdsZTtcbiAgICAgIHNvdW5kLl9wYW5uZXIuY29uZU91dGVyR2FpbiA9IHNvdW5kLl9wYW5uZXJBdHRyLmNvbmVPdXRlckdhaW47XG4gICAgICBzb3VuZC5fcGFubmVyLmRpc3RhbmNlTW9kZWwgPSBzb3VuZC5fcGFubmVyQXR0ci5kaXN0YW5jZU1vZGVsO1xuICAgICAgc291bmQuX3Bhbm5lci5tYXhEaXN0YW5jZSA9IHNvdW5kLl9wYW5uZXJBdHRyLm1heERpc3RhbmNlO1xuICAgICAgc291bmQuX3Bhbm5lci5yZWZEaXN0YW5jZSA9IHNvdW5kLl9wYW5uZXJBdHRyLnJlZkRpc3RhbmNlO1xuICAgICAgc291bmQuX3Bhbm5lci5yb2xsb2ZmRmFjdG9yID0gc291bmQuX3Bhbm5lckF0dHIucm9sbG9mZkZhY3RvcjtcbiAgICAgIHNvdW5kLl9wYW5uZXIucGFubmluZ01vZGVsID0gc291bmQuX3Bhbm5lckF0dHIucGFubmluZ01vZGVsO1xuXG4gICAgICBpZiAodHlwZW9mIHNvdW5kLl9wYW5uZXIucG9zaXRpb25YICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWC5zZXRWYWx1ZUF0VGltZShzb3VuZC5fcG9zWzBdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgc291bmQuX3Bhbm5lci5wb3NpdGlvblkuc2V0VmFsdWVBdFRpbWUoc291bmQuX3Bvc1sxXSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgIHNvdW5kLl9wYW5uZXIucG9zaXRpb25aLnNldFZhbHVlQXRUaW1lKHNvdW5kLl9wb3NbMl0sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc291bmQuX3Bhbm5lci5zZXRQb3NpdGlvbihzb3VuZC5fcG9zWzBdLCBzb3VuZC5fcG9zWzFdLCBzb3VuZC5fcG9zWzJdKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBzb3VuZC5fcGFubmVyLm9yaWVudGF0aW9uWCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgc291bmQuX3Bhbm5lci5vcmllbnRhdGlvblguc2V0VmFsdWVBdFRpbWUoc291bmQuX29yaWVudGF0aW9uWzBdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgc291bmQuX3Bhbm5lci5vcmllbnRhdGlvblkuc2V0VmFsdWVBdFRpbWUoc291bmQuX29yaWVudGF0aW9uWzFdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgc291bmQuX3Bhbm5lci5vcmllbnRhdGlvblouc2V0VmFsdWVBdFRpbWUoc291bmQuX29yaWVudGF0aW9uWzJdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNvdW5kLl9wYW5uZXIuc2V0T3JpZW50YXRpb24oc291bmQuX29yaWVudGF0aW9uWzBdLCBzb3VuZC5fb3JpZW50YXRpb25bMV0sIHNvdW5kLl9vcmllbnRhdGlvblsyXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHNvdW5kLl9wYW5uZXIgPSBIb3dsZXIuY3R4LmNyZWF0ZVN0ZXJlb1Bhbm5lcigpO1xuICAgICAgc291bmQuX3Bhbm5lci5wYW4uc2V0VmFsdWVBdFRpbWUoc291bmQuX3N0ZXJlbywgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgfVxuXG4gICAgc291bmQuX3Bhbm5lci5jb25uZWN0KHNvdW5kLl9ub2RlKTtcblxuICAgIC8vIFVwZGF0ZSB0aGUgY29ubmVjdGlvbnMuXG4gICAgaWYgKCFzb3VuZC5fcGF1c2VkKSB7XG4gICAgICBzb3VuZC5fcGFyZW50LnBhdXNlKHNvdW5kLl9pZCwgdHJ1ZSkucGxheShzb3VuZC5faWQsIHRydWUpO1xuICAgIH1cbiAgfTtcbn0pKCk7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGVhcmN1dDtcbm1vZHVsZS5leHBvcnRzLmRlZmF1bHQgPSBlYXJjdXQ7XG5cbmZ1bmN0aW9uIGVhcmN1dChkYXRhLCBob2xlSW5kaWNlcywgZGltKSB7XG5cbiAgICBkaW0gPSBkaW0gfHwgMjtcblxuICAgIHZhciBoYXNIb2xlcyA9IGhvbGVJbmRpY2VzICYmIGhvbGVJbmRpY2VzLmxlbmd0aCxcbiAgICAgICAgb3V0ZXJMZW4gPSBoYXNIb2xlcyA/IGhvbGVJbmRpY2VzWzBdICogZGltIDogZGF0YS5sZW5ndGgsXG4gICAgICAgIG91dGVyTm9kZSA9IGxpbmtlZExpc3QoZGF0YSwgMCwgb3V0ZXJMZW4sIGRpbSwgdHJ1ZSksXG4gICAgICAgIHRyaWFuZ2xlcyA9IFtdO1xuXG4gICAgaWYgKCFvdXRlck5vZGUgfHwgb3V0ZXJOb2RlLm5leHQgPT09IG91dGVyTm9kZS5wcmV2KSByZXR1cm4gdHJpYW5nbGVzO1xuXG4gICAgdmFyIG1pblgsIG1pblksIG1heFgsIG1heFksIHgsIHksIGludlNpemU7XG5cbiAgICBpZiAoaGFzSG9sZXMpIG91dGVyTm9kZSA9IGVsaW1pbmF0ZUhvbGVzKGRhdGEsIGhvbGVJbmRpY2VzLCBvdXRlck5vZGUsIGRpbSk7XG5cbiAgICAvLyBpZiB0aGUgc2hhcGUgaXMgbm90IHRvbyBzaW1wbGUsIHdlJ2xsIHVzZSB6LW9yZGVyIGN1cnZlIGhhc2ggbGF0ZXI7IGNhbGN1bGF0ZSBwb2x5Z29uIGJib3hcbiAgICBpZiAoZGF0YS5sZW5ndGggPiA4MCAqIGRpbSkge1xuICAgICAgICBtaW5YID0gbWF4WCA9IGRhdGFbMF07XG4gICAgICAgIG1pblkgPSBtYXhZID0gZGF0YVsxXTtcblxuICAgICAgICBmb3IgKHZhciBpID0gZGltOyBpIDwgb3V0ZXJMZW47IGkgKz0gZGltKSB7XG4gICAgICAgICAgICB4ID0gZGF0YVtpXTtcbiAgICAgICAgICAgIHkgPSBkYXRhW2kgKyAxXTtcbiAgICAgICAgICAgIGlmICh4IDwgbWluWCkgbWluWCA9IHg7XG4gICAgICAgICAgICBpZiAoeSA8IG1pblkpIG1pblkgPSB5O1xuICAgICAgICAgICAgaWYgKHggPiBtYXhYKSBtYXhYID0geDtcbiAgICAgICAgICAgIGlmICh5ID4gbWF4WSkgbWF4WSA9IHk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtaW5YLCBtaW5ZIGFuZCBpbnZTaXplIGFyZSBsYXRlciB1c2VkIHRvIHRyYW5zZm9ybSBjb29yZHMgaW50byBpbnRlZ2VycyBmb3Igei1vcmRlciBjYWxjdWxhdGlvblxuICAgICAgICBpbnZTaXplID0gTWF0aC5tYXgobWF4WCAtIG1pblgsIG1heFkgLSBtaW5ZKTtcbiAgICAgICAgaW52U2l6ZSA9IGludlNpemUgIT09IDAgPyAzMjc2NyAvIGludlNpemUgOiAwO1xuICAgIH1cblxuICAgIGVhcmN1dExpbmtlZChvdXRlck5vZGUsIHRyaWFuZ2xlcywgZGltLCBtaW5YLCBtaW5ZLCBpbnZTaXplLCAwKTtcblxuICAgIHJldHVybiB0cmlhbmdsZXM7XG59XG5cbi8vIGNyZWF0ZSBhIGNpcmN1bGFyIGRvdWJseSBsaW5rZWQgbGlzdCBmcm9tIHBvbHlnb24gcG9pbnRzIGluIHRoZSBzcGVjaWZpZWQgd2luZGluZyBvcmRlclxuZnVuY3Rpb24gbGlua2VkTGlzdChkYXRhLCBzdGFydCwgZW5kLCBkaW0sIGNsb2Nrd2lzZSkge1xuICAgIHZhciBpLCBsYXN0O1xuXG4gICAgaWYgKGNsb2Nrd2lzZSA9PT0gKHNpZ25lZEFyZWEoZGF0YSwgc3RhcnQsIGVuZCwgZGltKSA+IDApKSB7XG4gICAgICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IGRpbSkgbGFzdCA9IGluc2VydE5vZGUoaSwgZGF0YVtpXSwgZGF0YVtpICsgMV0sIGxhc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAoaSA9IGVuZCAtIGRpbTsgaSA+PSBzdGFydDsgaSAtPSBkaW0pIGxhc3QgPSBpbnNlcnROb2RlKGksIGRhdGFbaV0sIGRhdGFbaSArIDFdLCBsYXN0KTtcbiAgICB9XG5cbiAgICBpZiAobGFzdCAmJiBlcXVhbHMobGFzdCwgbGFzdC5uZXh0KSkge1xuICAgICAgICByZW1vdmVOb2RlKGxhc3QpO1xuICAgICAgICBsYXN0ID0gbGFzdC5uZXh0O1xuICAgIH1cblxuICAgIHJldHVybiBsYXN0O1xufVxuXG4vLyBlbGltaW5hdGUgY29saW5lYXIgb3IgZHVwbGljYXRlIHBvaW50c1xuZnVuY3Rpb24gZmlsdGVyUG9pbnRzKHN0YXJ0LCBlbmQpIHtcbiAgICBpZiAoIXN0YXJ0KSByZXR1cm4gc3RhcnQ7XG4gICAgaWYgKCFlbmQpIGVuZCA9IHN0YXJ0O1xuXG4gICAgdmFyIHAgPSBzdGFydCxcbiAgICAgICAgYWdhaW47XG4gICAgZG8ge1xuICAgICAgICBhZ2FpbiA9IGZhbHNlO1xuXG4gICAgICAgIGlmICghcC5zdGVpbmVyICYmIChlcXVhbHMocCwgcC5uZXh0KSB8fCBhcmVhKHAucHJldiwgcCwgcC5uZXh0KSA9PT0gMCkpIHtcbiAgICAgICAgICAgIHJlbW92ZU5vZGUocCk7XG4gICAgICAgICAgICBwID0gZW5kID0gcC5wcmV2O1xuICAgICAgICAgICAgaWYgKHAgPT09IHAubmV4dCkgYnJlYWs7XG4gICAgICAgICAgICBhZ2FpbiA9IHRydWU7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHAgPSBwLm5leHQ7XG4gICAgICAgIH1cbiAgICB9IHdoaWxlIChhZ2FpbiB8fCBwICE9PSBlbmQpO1xuXG4gICAgcmV0dXJuIGVuZDtcbn1cblxuLy8gbWFpbiBlYXIgc2xpY2luZyBsb29wIHdoaWNoIHRyaWFuZ3VsYXRlcyBhIHBvbHlnb24gKGdpdmVuIGFzIGEgbGlua2VkIGxpc3QpXG5mdW5jdGlvbiBlYXJjdXRMaW5rZWQoZWFyLCB0cmlhbmdsZXMsIGRpbSwgbWluWCwgbWluWSwgaW52U2l6ZSwgcGFzcykge1xuICAgIGlmICghZWFyKSByZXR1cm47XG5cbiAgICAvLyBpbnRlcmxpbmsgcG9seWdvbiBub2RlcyBpbiB6LW9yZGVyXG4gICAgaWYgKCFwYXNzICYmIGludlNpemUpIGluZGV4Q3VydmUoZWFyLCBtaW5YLCBtaW5ZLCBpbnZTaXplKTtcblxuICAgIHZhciBzdG9wID0gZWFyLFxuICAgICAgICBwcmV2LCBuZXh0O1xuXG4gICAgLy8gaXRlcmF0ZSB0aHJvdWdoIGVhcnMsIHNsaWNpbmcgdGhlbSBvbmUgYnkgb25lXG4gICAgd2hpbGUgKGVhci5wcmV2ICE9PSBlYXIubmV4dCkge1xuICAgICAgICBwcmV2ID0gZWFyLnByZXY7XG4gICAgICAgIG5leHQgPSBlYXIubmV4dDtcblxuICAgICAgICBpZiAoaW52U2l6ZSA/IGlzRWFySGFzaGVkKGVhciwgbWluWCwgbWluWSwgaW52U2l6ZSkgOiBpc0VhcihlYXIpKSB7XG4gICAgICAgICAgICAvLyBjdXQgb2ZmIHRoZSB0cmlhbmdsZVxuICAgICAgICAgICAgdHJpYW5nbGVzLnB1c2gocHJldi5pIC8gZGltIHwgMCk7XG4gICAgICAgICAgICB0cmlhbmdsZXMucHVzaChlYXIuaSAvIGRpbSB8IDApO1xuICAgICAgICAgICAgdHJpYW5nbGVzLnB1c2gobmV4dC5pIC8gZGltIHwgMCk7XG5cbiAgICAgICAgICAgIHJlbW92ZU5vZGUoZWFyKTtcblxuICAgICAgICAgICAgLy8gc2tpcHBpbmcgdGhlIG5leHQgdmVydGV4IGxlYWRzIHRvIGxlc3Mgc2xpdmVyIHRyaWFuZ2xlc1xuICAgICAgICAgICAgZWFyID0gbmV4dC5uZXh0O1xuICAgICAgICAgICAgc3RvcCA9IG5leHQubmV4dDtcblxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBlYXIgPSBuZXh0O1xuXG4gICAgICAgIC8vIGlmIHdlIGxvb3BlZCB0aHJvdWdoIHRoZSB3aG9sZSByZW1haW5pbmcgcG9seWdvbiBhbmQgY2FuJ3QgZmluZCBhbnkgbW9yZSBlYXJzXG4gICAgICAgIGlmIChlYXIgPT09IHN0b3ApIHtcbiAgICAgICAgICAgIC8vIHRyeSBmaWx0ZXJpbmcgcG9pbnRzIGFuZCBzbGljaW5nIGFnYWluXG4gICAgICAgICAgICBpZiAoIXBhc3MpIHtcbiAgICAgICAgICAgICAgICBlYXJjdXRMaW5rZWQoZmlsdGVyUG9pbnRzKGVhciksIHRyaWFuZ2xlcywgZGltLCBtaW5YLCBtaW5ZLCBpbnZTaXplLCAxKTtcblxuICAgICAgICAgICAgLy8gaWYgdGhpcyBkaWRuJ3Qgd29yaywgdHJ5IGN1cmluZyBhbGwgc21hbGwgc2VsZi1pbnRlcnNlY3Rpb25zIGxvY2FsbHlcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFzcyA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGVhciA9IGN1cmVMb2NhbEludGVyc2VjdGlvbnMoZmlsdGVyUG9pbnRzKGVhciksIHRyaWFuZ2xlcywgZGltKTtcbiAgICAgICAgICAgICAgICBlYXJjdXRMaW5rZWQoZWFyLCB0cmlhbmdsZXMsIGRpbSwgbWluWCwgbWluWSwgaW52U2l6ZSwgMik7XG5cbiAgICAgICAgICAgIC8vIGFzIGEgbGFzdCByZXNvcnQsIHRyeSBzcGxpdHRpbmcgdGhlIHJlbWFpbmluZyBwb2x5Z29uIGludG8gdHdvXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBhc3MgPT09IDIpIHtcbiAgICAgICAgICAgICAgICBzcGxpdEVhcmN1dChlYXIsIHRyaWFuZ2xlcywgZGltLCBtaW5YLCBtaW5ZLCBpbnZTaXplKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIGNoZWNrIHdoZXRoZXIgYSBwb2x5Z29uIG5vZGUgZm9ybXMgYSB2YWxpZCBlYXIgd2l0aCBhZGphY2VudCBub2Rlc1xuZnVuY3Rpb24gaXNFYXIoZWFyKSB7XG4gICAgdmFyIGEgPSBlYXIucHJldixcbiAgICAgICAgYiA9IGVhcixcbiAgICAgICAgYyA9IGVhci5uZXh0O1xuXG4gICAgaWYgKGFyZWEoYSwgYiwgYykgPj0gMCkgcmV0dXJuIGZhbHNlOyAvLyByZWZsZXgsIGNhbid0IGJlIGFuIGVhclxuXG4gICAgLy8gbm93IG1ha2Ugc3VyZSB3ZSBkb24ndCBoYXZlIG90aGVyIHBvaW50cyBpbnNpZGUgdGhlIHBvdGVudGlhbCBlYXJcbiAgICB2YXIgYXggPSBhLngsIGJ4ID0gYi54LCBjeCA9IGMueCwgYXkgPSBhLnksIGJ5ID0gYi55LCBjeSA9IGMueTtcblxuICAgIC8vIHRyaWFuZ2xlIGJib3g7IG1pbiAmIG1heCBhcmUgY2FsY3VsYXRlZCBsaWtlIHRoaXMgZm9yIHNwZWVkXG4gICAgdmFyIHgwID0gYXggPCBieCA/IChheCA8IGN4ID8gYXggOiBjeCkgOiAoYnggPCBjeCA/IGJ4IDogY3gpLFxuICAgICAgICB5MCA9IGF5IDwgYnkgPyAoYXkgPCBjeSA/IGF5IDogY3kpIDogKGJ5IDwgY3kgPyBieSA6IGN5KSxcbiAgICAgICAgeDEgPSBheCA+IGJ4ID8gKGF4ID4gY3ggPyBheCA6IGN4KSA6IChieCA+IGN4ID8gYnggOiBjeCksXG4gICAgICAgIHkxID0gYXkgPiBieSA/IChheSA+IGN5ID8gYXkgOiBjeSkgOiAoYnkgPiBjeSA/IGJ5IDogY3kpO1xuXG4gICAgdmFyIHAgPSBjLm5leHQ7XG4gICAgd2hpbGUgKHAgIT09IGEpIHtcbiAgICAgICAgaWYgKHAueCA+PSB4MCAmJiBwLnggPD0geDEgJiYgcC55ID49IHkwICYmIHAueSA8PSB5MSAmJlxuICAgICAgICAgICAgcG9pbnRJblRyaWFuZ2xlKGF4LCBheSwgYngsIGJ5LCBjeCwgY3ksIHAueCwgcC55KSAmJlxuICAgICAgICAgICAgYXJlYShwLnByZXYsIHAsIHAubmV4dCkgPj0gMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBwID0gcC5uZXh0O1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBpc0Vhckhhc2hlZChlYXIsIG1pblgsIG1pblksIGludlNpemUpIHtcbiAgICB2YXIgYSA9IGVhci5wcmV2LFxuICAgICAgICBiID0gZWFyLFxuICAgICAgICBjID0gZWFyLm5leHQ7XG5cbiAgICBpZiAoYXJlYShhLCBiLCBjKSA+PSAwKSByZXR1cm4gZmFsc2U7IC8vIHJlZmxleCwgY2FuJ3QgYmUgYW4gZWFyXG5cbiAgICB2YXIgYXggPSBhLngsIGJ4ID0gYi54LCBjeCA9IGMueCwgYXkgPSBhLnksIGJ5ID0gYi55LCBjeSA9IGMueTtcblxuICAgIC8vIHRyaWFuZ2xlIGJib3g7IG1pbiAmIG1heCBhcmUgY2FsY3VsYXRlZCBsaWtlIHRoaXMgZm9yIHNwZWVkXG4gICAgdmFyIHgwID0gYXggPCBieCA/IChheCA8IGN4ID8gYXggOiBjeCkgOiAoYnggPCBjeCA/IGJ4IDogY3gpLFxuICAgICAgICB5MCA9IGF5IDwgYnkgPyAoYXkgPCBjeSA/IGF5IDogY3kpIDogKGJ5IDwgY3kgPyBieSA6IGN5KSxcbiAgICAgICAgeDEgPSBheCA+IGJ4ID8gKGF4ID4gY3ggPyBheCA6IGN4KSA6IChieCA+IGN4ID8gYnggOiBjeCksXG4gICAgICAgIHkxID0gYXkgPiBieSA/IChheSA+IGN5ID8gYXkgOiBjeSkgOiAoYnkgPiBjeSA/IGJ5IDogY3kpO1xuXG4gICAgLy8gei1vcmRlciByYW5nZSBmb3IgdGhlIGN1cnJlbnQgdHJpYW5nbGUgYmJveDtcbiAgICB2YXIgbWluWiA9IHpPcmRlcih4MCwgeTAsIG1pblgsIG1pblksIGludlNpemUpLFxuICAgICAgICBtYXhaID0gek9yZGVyKHgxLCB5MSwgbWluWCwgbWluWSwgaW52U2l6ZSk7XG5cbiAgICB2YXIgcCA9IGVhci5wcmV2WixcbiAgICAgICAgbiA9IGVhci5uZXh0WjtcblxuICAgIC8vIGxvb2sgZm9yIHBvaW50cyBpbnNpZGUgdGhlIHRyaWFuZ2xlIGluIGJvdGggZGlyZWN0aW9uc1xuICAgIHdoaWxlIChwICYmIHAueiA+PSBtaW5aICYmIG4gJiYgbi56IDw9IG1heFopIHtcbiAgICAgICAgaWYgKHAueCA+PSB4MCAmJiBwLnggPD0geDEgJiYgcC55ID49IHkwICYmIHAueSA8PSB5MSAmJiBwICE9PSBhICYmIHAgIT09IGMgJiZcbiAgICAgICAgICAgIHBvaW50SW5UcmlhbmdsZShheCwgYXksIGJ4LCBieSwgY3gsIGN5LCBwLngsIHAueSkgJiYgYXJlYShwLnByZXYsIHAsIHAubmV4dCkgPj0gMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBwID0gcC5wcmV2WjtcblxuICAgICAgICBpZiAobi54ID49IHgwICYmIG4ueCA8PSB4MSAmJiBuLnkgPj0geTAgJiYgbi55IDw9IHkxICYmIG4gIT09IGEgJiYgbiAhPT0gYyAmJlxuICAgICAgICAgICAgcG9pbnRJblRyaWFuZ2xlKGF4LCBheSwgYngsIGJ5LCBjeCwgY3ksIG4ueCwgbi55KSAmJiBhcmVhKG4ucHJldiwgbiwgbi5uZXh0KSA+PSAwKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIG4gPSBuLm5leHRaO1xuICAgIH1cblxuICAgIC8vIGxvb2sgZm9yIHJlbWFpbmluZyBwb2ludHMgaW4gZGVjcmVhc2luZyB6LW9yZGVyXG4gICAgd2hpbGUgKHAgJiYgcC56ID49IG1pblopIHtcbiAgICAgICAgaWYgKHAueCA+PSB4MCAmJiBwLnggPD0geDEgJiYgcC55ID49IHkwICYmIHAueSA8PSB5MSAmJiBwICE9PSBhICYmIHAgIT09IGMgJiZcbiAgICAgICAgICAgIHBvaW50SW5UcmlhbmdsZShheCwgYXksIGJ4LCBieSwgY3gsIGN5LCBwLngsIHAueSkgJiYgYXJlYShwLnByZXYsIHAsIHAubmV4dCkgPj0gMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBwID0gcC5wcmV2WjtcbiAgICB9XG5cbiAgICAvLyBsb29rIGZvciByZW1haW5pbmcgcG9pbnRzIGluIGluY3JlYXNpbmcgei1vcmRlclxuICAgIHdoaWxlIChuICYmIG4ueiA8PSBtYXhaKSB7XG4gICAgICAgIGlmIChuLnggPj0geDAgJiYgbi54IDw9IHgxICYmIG4ueSA+PSB5MCAmJiBuLnkgPD0geTEgJiYgbiAhPT0gYSAmJiBuICE9PSBjICYmXG4gICAgICAgICAgICBwb2ludEluVHJpYW5nbGUoYXgsIGF5LCBieCwgYnksIGN4LCBjeSwgbi54LCBuLnkpICYmIGFyZWEobi5wcmV2LCBuLCBuLm5leHQpID49IDApIHJldHVybiBmYWxzZTtcbiAgICAgICAgbiA9IG4ubmV4dFo7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG59XG5cbi8vIGdvIHRocm91Z2ggYWxsIHBvbHlnb24gbm9kZXMgYW5kIGN1cmUgc21hbGwgbG9jYWwgc2VsZi1pbnRlcnNlY3Rpb25zXG5mdW5jdGlvbiBjdXJlTG9jYWxJbnRlcnNlY3Rpb25zKHN0YXJ0LCB0cmlhbmdsZXMsIGRpbSkge1xuICAgIHZhciBwID0gc3RhcnQ7XG4gICAgZG8ge1xuICAgICAgICB2YXIgYSA9IHAucHJldixcbiAgICAgICAgICAgIGIgPSBwLm5leHQubmV4dDtcblxuICAgICAgICBpZiAoIWVxdWFscyhhLCBiKSAmJiBpbnRlcnNlY3RzKGEsIHAsIHAubmV4dCwgYikgJiYgbG9jYWxseUluc2lkZShhLCBiKSAmJiBsb2NhbGx5SW5zaWRlKGIsIGEpKSB7XG5cbiAgICAgICAgICAgIHRyaWFuZ2xlcy5wdXNoKGEuaSAvIGRpbSB8IDApO1xuICAgICAgICAgICAgdHJpYW5nbGVzLnB1c2gocC5pIC8gZGltIHwgMCk7XG4gICAgICAgICAgICB0cmlhbmdsZXMucHVzaChiLmkgLyBkaW0gfCAwKTtcblxuICAgICAgICAgICAgLy8gcmVtb3ZlIHR3byBub2RlcyBpbnZvbHZlZFxuICAgICAgICAgICAgcmVtb3ZlTm9kZShwKTtcbiAgICAgICAgICAgIHJlbW92ZU5vZGUocC5uZXh0KTtcblxuICAgICAgICAgICAgcCA9IHN0YXJ0ID0gYjtcbiAgICAgICAgfVxuICAgICAgICBwID0gcC5uZXh0O1xuICAgIH0gd2hpbGUgKHAgIT09IHN0YXJ0KTtcblxuICAgIHJldHVybiBmaWx0ZXJQb2ludHMocCk7XG59XG5cbi8vIHRyeSBzcGxpdHRpbmcgcG9seWdvbiBpbnRvIHR3byBhbmQgdHJpYW5ndWxhdGUgdGhlbSBpbmRlcGVuZGVudGx5XG5mdW5jdGlvbiBzcGxpdEVhcmN1dChzdGFydCwgdHJpYW5nbGVzLCBkaW0sIG1pblgsIG1pblksIGludlNpemUpIHtcbiAgICAvLyBsb29rIGZvciBhIHZhbGlkIGRpYWdvbmFsIHRoYXQgZGl2aWRlcyB0aGUgcG9seWdvbiBpbnRvIHR3b1xuICAgIHZhciBhID0gc3RhcnQ7XG4gICAgZG8ge1xuICAgICAgICB2YXIgYiA9IGEubmV4dC5uZXh0O1xuICAgICAgICB3aGlsZSAoYiAhPT0gYS5wcmV2KSB7XG4gICAgICAgICAgICBpZiAoYS5pICE9PSBiLmkgJiYgaXNWYWxpZERpYWdvbmFsKGEsIGIpKSB7XG4gICAgICAgICAgICAgICAgLy8gc3BsaXQgdGhlIHBvbHlnb24gaW4gdHdvIGJ5IHRoZSBkaWFnb25hbFxuICAgICAgICAgICAgICAgIHZhciBjID0gc3BsaXRQb2x5Z29uKGEsIGIpO1xuXG4gICAgICAgICAgICAgICAgLy8gZmlsdGVyIGNvbGluZWFyIHBvaW50cyBhcm91bmQgdGhlIGN1dHNcbiAgICAgICAgICAgICAgICBhID0gZmlsdGVyUG9pbnRzKGEsIGEubmV4dCk7XG4gICAgICAgICAgICAgICAgYyA9IGZpbHRlclBvaW50cyhjLCBjLm5leHQpO1xuXG4gICAgICAgICAgICAgICAgLy8gcnVuIGVhcmN1dCBvbiBlYWNoIGhhbGZcbiAgICAgICAgICAgICAgICBlYXJjdXRMaW5rZWQoYSwgdHJpYW5nbGVzLCBkaW0sIG1pblgsIG1pblksIGludlNpemUsIDApO1xuICAgICAgICAgICAgICAgIGVhcmN1dExpbmtlZChjLCB0cmlhbmdsZXMsIGRpbSwgbWluWCwgbWluWSwgaW52U2l6ZSwgMCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYiA9IGIubmV4dDtcbiAgICAgICAgfVxuICAgICAgICBhID0gYS5uZXh0O1xuICAgIH0gd2hpbGUgKGEgIT09IHN0YXJ0KTtcbn1cblxuLy8gbGluayBldmVyeSBob2xlIGludG8gdGhlIG91dGVyIGxvb3AsIHByb2R1Y2luZyBhIHNpbmdsZS1yaW5nIHBvbHlnb24gd2l0aG91dCBob2xlc1xuZnVuY3Rpb24gZWxpbWluYXRlSG9sZXMoZGF0YSwgaG9sZUluZGljZXMsIG91dGVyTm9kZSwgZGltKSB7XG4gICAgdmFyIHF1ZXVlID0gW10sXG4gICAgICAgIGksIGxlbiwgc3RhcnQsIGVuZCwgbGlzdDtcblxuICAgIGZvciAoaSA9IDAsIGxlbiA9IGhvbGVJbmRpY2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHN0YXJ0ID0gaG9sZUluZGljZXNbaV0gKiBkaW07XG4gICAgICAgIGVuZCA9IGkgPCBsZW4gLSAxID8gaG9sZUluZGljZXNbaSArIDFdICogZGltIDogZGF0YS5sZW5ndGg7XG4gICAgICAgIGxpc3QgPSBsaW5rZWRMaXN0KGRhdGEsIHN0YXJ0LCBlbmQsIGRpbSwgZmFsc2UpO1xuICAgICAgICBpZiAobGlzdCA9PT0gbGlzdC5uZXh0KSBsaXN0LnN0ZWluZXIgPSB0cnVlO1xuICAgICAgICBxdWV1ZS5wdXNoKGdldExlZnRtb3N0KGxpc3QpKTtcbiAgICB9XG5cbiAgICBxdWV1ZS5zb3J0KGNvbXBhcmVYKTtcblxuICAgIC8vIHByb2Nlc3MgaG9sZXMgZnJvbSBsZWZ0IHRvIHJpZ2h0XG4gICAgZm9yIChpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG91dGVyTm9kZSA9IGVsaW1pbmF0ZUhvbGUocXVldWVbaV0sIG91dGVyTm9kZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dGVyTm9kZTtcbn1cblxuZnVuY3Rpb24gY29tcGFyZVgoYSwgYikge1xuICAgIHJldHVybiBhLnggLSBiLng7XG59XG5cbi8vIGZpbmQgYSBicmlkZ2UgYmV0d2VlbiB2ZXJ0aWNlcyB0aGF0IGNvbm5lY3RzIGhvbGUgd2l0aCBhbiBvdXRlciByaW5nIGFuZCBhbmQgbGluayBpdFxuZnVuY3Rpb24gZWxpbWluYXRlSG9sZShob2xlLCBvdXRlck5vZGUpIHtcbiAgICB2YXIgYnJpZGdlID0gZmluZEhvbGVCcmlkZ2UoaG9sZSwgb3V0ZXJOb2RlKTtcbiAgICBpZiAoIWJyaWRnZSkge1xuICAgICAgICByZXR1cm4gb3V0ZXJOb2RlO1xuICAgIH1cblxuICAgIHZhciBicmlkZ2VSZXZlcnNlID0gc3BsaXRQb2x5Z29uKGJyaWRnZSwgaG9sZSk7XG5cbiAgICAvLyBmaWx0ZXIgY29sbGluZWFyIHBvaW50cyBhcm91bmQgdGhlIGN1dHNcbiAgICBmaWx0ZXJQb2ludHMoYnJpZGdlUmV2ZXJzZSwgYnJpZGdlUmV2ZXJzZS5uZXh0KTtcbiAgICByZXR1cm4gZmlsdGVyUG9pbnRzKGJyaWRnZSwgYnJpZGdlLm5leHQpO1xufVxuXG4vLyBEYXZpZCBFYmVybHkncyBhbGdvcml0aG0gZm9yIGZpbmRpbmcgYSBicmlkZ2UgYmV0d2VlbiBob2xlIGFuZCBvdXRlciBwb2x5Z29uXG5mdW5jdGlvbiBmaW5kSG9sZUJyaWRnZShob2xlLCBvdXRlck5vZGUpIHtcbiAgICB2YXIgcCA9IG91dGVyTm9kZSxcbiAgICAgICAgaHggPSBob2xlLngsXG4gICAgICAgIGh5ID0gaG9sZS55LFxuICAgICAgICBxeCA9IC1JbmZpbml0eSxcbiAgICAgICAgbTtcblxuICAgIC8vIGZpbmQgYSBzZWdtZW50IGludGVyc2VjdGVkIGJ5IGEgcmF5IGZyb20gdGhlIGhvbGUncyBsZWZ0bW9zdCBwb2ludCB0byB0aGUgbGVmdDtcbiAgICAvLyBzZWdtZW50J3MgZW5kcG9pbnQgd2l0aCBsZXNzZXIgeCB3aWxsIGJlIHBvdGVudGlhbCBjb25uZWN0aW9uIHBvaW50XG4gICAgZG8ge1xuICAgICAgICBpZiAoaHkgPD0gcC55ICYmIGh5ID49IHAubmV4dC55ICYmIHAubmV4dC55ICE9PSBwLnkpIHtcbiAgICAgICAgICAgIHZhciB4ID0gcC54ICsgKGh5IC0gcC55KSAqIChwLm5leHQueCAtIHAueCkgLyAocC5uZXh0LnkgLSBwLnkpO1xuICAgICAgICAgICAgaWYgKHggPD0gaHggJiYgeCA+IHF4KSB7XG4gICAgICAgICAgICAgICAgcXggPSB4O1xuICAgICAgICAgICAgICAgIG0gPSBwLnggPCBwLm5leHQueCA/IHAgOiBwLm5leHQ7XG4gICAgICAgICAgICAgICAgaWYgKHggPT09IGh4KSByZXR1cm4gbTsgLy8gaG9sZSB0b3VjaGVzIG91dGVyIHNlZ21lbnQ7IHBpY2sgbGVmdG1vc3QgZW5kcG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwID0gcC5uZXh0O1xuICAgIH0gd2hpbGUgKHAgIT09IG91dGVyTm9kZSk7XG5cbiAgICBpZiAoIW0pIHJldHVybiBudWxsO1xuXG4gICAgLy8gbG9vayBmb3IgcG9pbnRzIGluc2lkZSB0aGUgdHJpYW5nbGUgb2YgaG9sZSBwb2ludCwgc2VnbWVudCBpbnRlcnNlY3Rpb24gYW5kIGVuZHBvaW50O1xuICAgIC8vIGlmIHRoZXJlIGFyZSBubyBwb2ludHMgZm91bmQsIHdlIGhhdmUgYSB2YWxpZCBjb25uZWN0aW9uO1xuICAgIC8vIG90aGVyd2lzZSBjaG9vc2UgdGhlIHBvaW50IG9mIHRoZSBtaW5pbXVtIGFuZ2xlIHdpdGggdGhlIHJheSBhcyBjb25uZWN0aW9uIHBvaW50XG5cbiAgICB2YXIgc3RvcCA9IG0sXG4gICAgICAgIG14ID0gbS54LFxuICAgICAgICBteSA9IG0ueSxcbiAgICAgICAgdGFuTWluID0gSW5maW5pdHksXG4gICAgICAgIHRhbjtcblxuICAgIHAgPSBtO1xuXG4gICAgZG8ge1xuICAgICAgICBpZiAoaHggPj0gcC54ICYmIHAueCA+PSBteCAmJiBoeCAhPT0gcC54ICYmXG4gICAgICAgICAgICAgICAgcG9pbnRJblRyaWFuZ2xlKGh5IDwgbXkgPyBoeCA6IHF4LCBoeSwgbXgsIG15LCBoeSA8IG15ID8gcXggOiBoeCwgaHksIHAueCwgcC55KSkge1xuXG4gICAgICAgICAgICB0YW4gPSBNYXRoLmFicyhoeSAtIHAueSkgLyAoaHggLSBwLngpOyAvLyB0YW5nZW50aWFsXG5cbiAgICAgICAgICAgIGlmIChsb2NhbGx5SW5zaWRlKHAsIGhvbGUpICYmXG4gICAgICAgICAgICAgICAgKHRhbiA8IHRhbk1pbiB8fCAodGFuID09PSB0YW5NaW4gJiYgKHAueCA+IG0ueCB8fCAocC54ID09PSBtLnggJiYgc2VjdG9yQ29udGFpbnNTZWN0b3IobSwgcCkpKSkpKSB7XG4gICAgICAgICAgICAgICAgbSA9IHA7XG4gICAgICAgICAgICAgICAgdGFuTWluID0gdGFuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcCA9IHAubmV4dDtcbiAgICB9IHdoaWxlIChwICE9PSBzdG9wKTtcblxuICAgIHJldHVybiBtO1xufVxuXG4vLyB3aGV0aGVyIHNlY3RvciBpbiB2ZXJ0ZXggbSBjb250YWlucyBzZWN0b3IgaW4gdmVydGV4IHAgaW4gdGhlIHNhbWUgY29vcmRpbmF0ZXNcbmZ1bmN0aW9uIHNlY3RvckNvbnRhaW5zU2VjdG9yKG0sIHApIHtcbiAgICByZXR1cm4gYXJlYShtLnByZXYsIG0sIHAucHJldikgPCAwICYmIGFyZWEocC5uZXh0LCBtLCBtLm5leHQpIDwgMDtcbn1cblxuLy8gaW50ZXJsaW5rIHBvbHlnb24gbm9kZXMgaW4gei1vcmRlclxuZnVuY3Rpb24gaW5kZXhDdXJ2ZShzdGFydCwgbWluWCwgbWluWSwgaW52U2l6ZSkge1xuICAgIHZhciBwID0gc3RhcnQ7XG4gICAgZG8ge1xuICAgICAgICBpZiAocC56ID09PSAwKSBwLnogPSB6T3JkZXIocC54LCBwLnksIG1pblgsIG1pblksIGludlNpemUpO1xuICAgICAgICBwLnByZXZaID0gcC5wcmV2O1xuICAgICAgICBwLm5leHRaID0gcC5uZXh0O1xuICAgICAgICBwID0gcC5uZXh0O1xuICAgIH0gd2hpbGUgKHAgIT09IHN0YXJ0KTtcblxuICAgIHAucHJldloubmV4dFogPSBudWxsO1xuICAgIHAucHJldlogPSBudWxsO1xuXG4gICAgc29ydExpbmtlZChwKTtcbn1cblxuLy8gU2ltb24gVGF0aGFtJ3MgbGlua2VkIGxpc3QgbWVyZ2Ugc29ydCBhbGdvcml0aG1cbi8vIGh0dHA6Ly93d3cuY2hpYXJrLmdyZWVuZW5kLm9yZy51ay9+c2d0YXRoYW0vYWxnb3JpdGhtcy9saXN0c29ydC5odG1sXG5mdW5jdGlvbiBzb3J0TGlua2VkKGxpc3QpIHtcbiAgICB2YXIgaSwgcCwgcSwgZSwgdGFpbCwgbnVtTWVyZ2VzLCBwU2l6ZSwgcVNpemUsXG4gICAgICAgIGluU2l6ZSA9IDE7XG5cbiAgICBkbyB7XG4gICAgICAgIHAgPSBsaXN0O1xuICAgICAgICBsaXN0ID0gbnVsbDtcbiAgICAgICAgdGFpbCA9IG51bGw7XG4gICAgICAgIG51bU1lcmdlcyA9IDA7XG5cbiAgICAgICAgd2hpbGUgKHApIHtcbiAgICAgICAgICAgIG51bU1lcmdlcysrO1xuICAgICAgICAgICAgcSA9IHA7XG4gICAgICAgICAgICBwU2l6ZSA9IDA7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgaW5TaXplOyBpKyspIHtcbiAgICAgICAgICAgICAgICBwU2l6ZSsrO1xuICAgICAgICAgICAgICAgIHEgPSBxLm5leHRaO1xuICAgICAgICAgICAgICAgIGlmICghcSkgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBxU2l6ZSA9IGluU2l6ZTtcblxuICAgICAgICAgICAgd2hpbGUgKHBTaXplID4gMCB8fCAocVNpemUgPiAwICYmIHEpKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAocFNpemUgIT09IDAgJiYgKHFTaXplID09PSAwIHx8ICFxIHx8IHAueiA8PSBxLnopKSB7XG4gICAgICAgICAgICAgICAgICAgIGUgPSBwO1xuICAgICAgICAgICAgICAgICAgICBwID0gcC5uZXh0WjtcbiAgICAgICAgICAgICAgICAgICAgcFNpemUtLTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlID0gcTtcbiAgICAgICAgICAgICAgICAgICAgcSA9IHEubmV4dFo7XG4gICAgICAgICAgICAgICAgICAgIHFTaXplLS07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHRhaWwpIHRhaWwubmV4dFogPSBlO1xuICAgICAgICAgICAgICAgIGVsc2UgbGlzdCA9IGU7XG5cbiAgICAgICAgICAgICAgICBlLnByZXZaID0gdGFpbDtcbiAgICAgICAgICAgICAgICB0YWlsID0gZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcCA9IHE7XG4gICAgICAgIH1cblxuICAgICAgICB0YWlsLm5leHRaID0gbnVsbDtcbiAgICAgICAgaW5TaXplICo9IDI7XG5cbiAgICB9IHdoaWxlIChudW1NZXJnZXMgPiAxKTtcblxuICAgIHJldHVybiBsaXN0O1xufVxuXG4vLyB6LW9yZGVyIG9mIGEgcG9pbnQgZ2l2ZW4gY29vcmRzIGFuZCBpbnZlcnNlIG9mIHRoZSBsb25nZXIgc2lkZSBvZiBkYXRhIGJib3hcbmZ1bmN0aW9uIHpPcmRlcih4LCB5LCBtaW5YLCBtaW5ZLCBpbnZTaXplKSB7XG4gICAgLy8gY29vcmRzIGFyZSB0cmFuc2Zvcm1lZCBpbnRvIG5vbi1uZWdhdGl2ZSAxNS1iaXQgaW50ZWdlciByYW5nZVxuICAgIHggPSAoeCAtIG1pblgpICogaW52U2l6ZSB8IDA7XG4gICAgeSA9ICh5IC0gbWluWSkgKiBpbnZTaXplIHwgMDtcblxuICAgIHggPSAoeCB8ICh4IDw8IDgpKSAmIDB4MDBGRjAwRkY7XG4gICAgeCA9ICh4IHwgKHggPDwgNCkpICYgMHgwRjBGMEYwRjtcbiAgICB4ID0gKHggfCAoeCA8PCAyKSkgJiAweDMzMzMzMzMzO1xuICAgIHggPSAoeCB8ICh4IDw8IDEpKSAmIDB4NTU1NTU1NTU7XG5cbiAgICB5ID0gKHkgfCAoeSA8PCA4KSkgJiAweDAwRkYwMEZGO1xuICAgIHkgPSAoeSB8ICh5IDw8IDQpKSAmIDB4MEYwRjBGMEY7XG4gICAgeSA9ICh5IHwgKHkgPDwgMikpICYgMHgzMzMzMzMzMztcbiAgICB5ID0gKHkgfCAoeSA8PCAxKSkgJiAweDU1NTU1NTU1O1xuXG4gICAgcmV0dXJuIHggfCAoeSA8PCAxKTtcbn1cblxuLy8gZmluZCB0aGUgbGVmdG1vc3Qgbm9kZSBvZiBhIHBvbHlnb24gcmluZ1xuZnVuY3Rpb24gZ2V0TGVmdG1vc3Qoc3RhcnQpIHtcbiAgICB2YXIgcCA9IHN0YXJ0LFxuICAgICAgICBsZWZ0bW9zdCA9IHN0YXJ0O1xuICAgIGRvIHtcbiAgICAgICAgaWYgKHAueCA8IGxlZnRtb3N0LnggfHwgKHAueCA9PT0gbGVmdG1vc3QueCAmJiBwLnkgPCBsZWZ0bW9zdC55KSkgbGVmdG1vc3QgPSBwO1xuICAgICAgICBwID0gcC5uZXh0O1xuICAgIH0gd2hpbGUgKHAgIT09IHN0YXJ0KTtcblxuICAgIHJldHVybiBsZWZ0bW9zdDtcbn1cblxuLy8gY2hlY2sgaWYgYSBwb2ludCBsaWVzIHdpdGhpbiBhIGNvbnZleCB0cmlhbmdsZVxuZnVuY3Rpb24gcG9pbnRJblRyaWFuZ2xlKGF4LCBheSwgYngsIGJ5LCBjeCwgY3ksIHB4LCBweSkge1xuICAgIHJldHVybiAoY3ggLSBweCkgKiAoYXkgLSBweSkgPj0gKGF4IC0gcHgpICogKGN5IC0gcHkpICYmXG4gICAgICAgICAgIChheCAtIHB4KSAqIChieSAtIHB5KSA+PSAoYnggLSBweCkgKiAoYXkgLSBweSkgJiZcbiAgICAgICAgICAgKGJ4IC0gcHgpICogKGN5IC0gcHkpID49IChjeCAtIHB4KSAqIChieSAtIHB5KTtcbn1cblxuLy8gY2hlY2sgaWYgYSBkaWFnb25hbCBiZXR3ZWVuIHR3byBwb2x5Z29uIG5vZGVzIGlzIHZhbGlkIChsaWVzIGluIHBvbHlnb24gaW50ZXJpb3IpXG5mdW5jdGlvbiBpc1ZhbGlkRGlhZ29uYWwoYSwgYikge1xuICAgIHJldHVybiBhLm5leHQuaSAhPT0gYi5pICYmIGEucHJldi5pICE9PSBiLmkgJiYgIWludGVyc2VjdHNQb2x5Z29uKGEsIGIpICYmIC8vIGRvbmVzJ3QgaW50ZXJzZWN0IG90aGVyIGVkZ2VzXG4gICAgICAgICAgIChsb2NhbGx5SW5zaWRlKGEsIGIpICYmIGxvY2FsbHlJbnNpZGUoYiwgYSkgJiYgbWlkZGxlSW5zaWRlKGEsIGIpICYmIC8vIGxvY2FsbHkgdmlzaWJsZVxuICAgICAgICAgICAgKGFyZWEoYS5wcmV2LCBhLCBiLnByZXYpIHx8IGFyZWEoYSwgYi5wcmV2LCBiKSkgfHwgLy8gZG9lcyBub3QgY3JlYXRlIG9wcG9zaXRlLWZhY2luZyBzZWN0b3JzXG4gICAgICAgICAgICBlcXVhbHMoYSwgYikgJiYgYXJlYShhLnByZXYsIGEsIGEubmV4dCkgPiAwICYmIGFyZWEoYi5wcmV2LCBiLCBiLm5leHQpID4gMCk7IC8vIHNwZWNpYWwgemVyby1sZW5ndGggY2FzZVxufVxuXG4vLyBzaWduZWQgYXJlYSBvZiBhIHRyaWFuZ2xlXG5mdW5jdGlvbiBhcmVhKHAsIHEsIHIpIHtcbiAgICByZXR1cm4gKHEueSAtIHAueSkgKiAoci54IC0gcS54KSAtIChxLnggLSBwLngpICogKHIueSAtIHEueSk7XG59XG5cbi8vIGNoZWNrIGlmIHR3byBwb2ludHMgYXJlIGVxdWFsXG5mdW5jdGlvbiBlcXVhbHMocDEsIHAyKSB7XG4gICAgcmV0dXJuIHAxLnggPT09IHAyLnggJiYgcDEueSA9PT0gcDIueTtcbn1cblxuLy8gY2hlY2sgaWYgdHdvIHNlZ21lbnRzIGludGVyc2VjdFxuZnVuY3Rpb24gaW50ZXJzZWN0cyhwMSwgcTEsIHAyLCBxMikge1xuICAgIHZhciBvMSA9IHNpZ24oYXJlYShwMSwgcTEsIHAyKSk7XG4gICAgdmFyIG8yID0gc2lnbihhcmVhKHAxLCBxMSwgcTIpKTtcbiAgICB2YXIgbzMgPSBzaWduKGFyZWEocDIsIHEyLCBwMSkpO1xuICAgIHZhciBvNCA9IHNpZ24oYXJlYShwMiwgcTIsIHExKSk7XG5cbiAgICBpZiAobzEgIT09IG8yICYmIG8zICE9PSBvNCkgcmV0dXJuIHRydWU7IC8vIGdlbmVyYWwgY2FzZVxuXG4gICAgaWYgKG8xID09PSAwICYmIG9uU2VnbWVudChwMSwgcDIsIHExKSkgcmV0dXJuIHRydWU7IC8vIHAxLCBxMSBhbmQgcDIgYXJlIGNvbGxpbmVhciBhbmQgcDIgbGllcyBvbiBwMXExXG4gICAgaWYgKG8yID09PSAwICYmIG9uU2VnbWVudChwMSwgcTIsIHExKSkgcmV0dXJuIHRydWU7IC8vIHAxLCBxMSBhbmQgcTIgYXJlIGNvbGxpbmVhciBhbmQgcTIgbGllcyBvbiBwMXExXG4gICAgaWYgKG8zID09PSAwICYmIG9uU2VnbWVudChwMiwgcDEsIHEyKSkgcmV0dXJuIHRydWU7IC8vIHAyLCBxMiBhbmQgcDEgYXJlIGNvbGxpbmVhciBhbmQgcDEgbGllcyBvbiBwMnEyXG4gICAgaWYgKG80ID09PSAwICYmIG9uU2VnbWVudChwMiwgcTEsIHEyKSkgcmV0dXJuIHRydWU7IC8vIHAyLCBxMiBhbmQgcTEgYXJlIGNvbGxpbmVhciBhbmQgcTEgbGllcyBvbiBwMnEyXG5cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbi8vIGZvciBjb2xsaW5lYXIgcG9pbnRzIHAsIHEsIHIsIGNoZWNrIGlmIHBvaW50IHEgbGllcyBvbiBzZWdtZW50IHByXG5mdW5jdGlvbiBvblNlZ21lbnQocCwgcSwgcikge1xuICAgIHJldHVybiBxLnggPD0gTWF0aC5tYXgocC54LCByLngpICYmIHEueCA+PSBNYXRoLm1pbihwLngsIHIueCkgJiYgcS55IDw9IE1hdGgubWF4KHAueSwgci55KSAmJiBxLnkgPj0gTWF0aC5taW4ocC55LCByLnkpO1xufVxuXG5mdW5jdGlvbiBzaWduKG51bSkge1xuICAgIHJldHVybiBudW0gPiAwID8gMSA6IG51bSA8IDAgPyAtMSA6IDA7XG59XG5cbi8vIGNoZWNrIGlmIGEgcG9seWdvbiBkaWFnb25hbCBpbnRlcnNlY3RzIGFueSBwb2x5Z29uIHNlZ21lbnRzXG5mdW5jdGlvbiBpbnRlcnNlY3RzUG9seWdvbihhLCBiKSB7XG4gICAgdmFyIHAgPSBhO1xuICAgIGRvIHtcbiAgICAgICAgaWYgKHAuaSAhPT0gYS5pICYmIHAubmV4dC5pICE9PSBhLmkgJiYgcC5pICE9PSBiLmkgJiYgcC5uZXh0LmkgIT09IGIuaSAmJlxuICAgICAgICAgICAgICAgIGludGVyc2VjdHMocCwgcC5uZXh0LCBhLCBiKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIHAgPSBwLm5leHQ7XG4gICAgfSB3aGlsZSAocCAhPT0gYSk7XG5cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbi8vIGNoZWNrIGlmIGEgcG9seWdvbiBkaWFnb25hbCBpcyBsb2NhbGx5IGluc2lkZSB0aGUgcG9seWdvblxuZnVuY3Rpb24gbG9jYWxseUluc2lkZShhLCBiKSB7XG4gICAgcmV0dXJuIGFyZWEoYS5wcmV2LCBhLCBhLm5leHQpIDwgMCA/XG4gICAgICAgIGFyZWEoYSwgYiwgYS5uZXh0KSA+PSAwICYmIGFyZWEoYSwgYS5wcmV2LCBiKSA+PSAwIDpcbiAgICAgICAgYXJlYShhLCBiLCBhLnByZXYpIDwgMCB8fCBhcmVhKGEsIGEubmV4dCwgYikgPCAwO1xufVxuXG4vLyBjaGVjayBpZiB0aGUgbWlkZGxlIHBvaW50IG9mIGEgcG9seWdvbiBkaWFnb25hbCBpcyBpbnNpZGUgdGhlIHBvbHlnb25cbmZ1bmN0aW9uIG1pZGRsZUluc2lkZShhLCBiKSB7XG4gICAgdmFyIHAgPSBhLFxuICAgICAgICBpbnNpZGUgPSBmYWxzZSxcbiAgICAgICAgcHggPSAoYS54ICsgYi54KSAvIDIsXG4gICAgICAgIHB5ID0gKGEueSArIGIueSkgLyAyO1xuICAgIGRvIHtcbiAgICAgICAgaWYgKCgocC55ID4gcHkpICE9PSAocC5uZXh0LnkgPiBweSkpICYmIHAubmV4dC55ICE9PSBwLnkgJiZcbiAgICAgICAgICAgICAgICAocHggPCAocC5uZXh0LnggLSBwLngpICogKHB5IC0gcC55KSAvIChwLm5leHQueSAtIHAueSkgKyBwLngpKVxuICAgICAgICAgICAgaW5zaWRlID0gIWluc2lkZTtcbiAgICAgICAgcCA9IHAubmV4dDtcbiAgICB9IHdoaWxlIChwICE9PSBhKTtcblxuICAgIHJldHVybiBpbnNpZGU7XG59XG5cbi8vIGxpbmsgdHdvIHBvbHlnb24gdmVydGljZXMgd2l0aCBhIGJyaWRnZTsgaWYgdGhlIHZlcnRpY2VzIGJlbG9uZyB0byB0aGUgc2FtZSByaW5nLCBpdCBzcGxpdHMgcG9seWdvbiBpbnRvIHR3bztcbi8vIGlmIG9uZSBiZWxvbmdzIHRvIHRoZSBvdXRlciByaW5nIGFuZCBhbm90aGVyIHRvIGEgaG9sZSwgaXQgbWVyZ2VzIGl0IGludG8gYSBzaW5nbGUgcmluZ1xuZnVuY3Rpb24gc3BsaXRQb2x5Z29uKGEsIGIpIHtcbiAgICB2YXIgYTIgPSBuZXcgTm9kZShhLmksIGEueCwgYS55KSxcbiAgICAgICAgYjIgPSBuZXcgTm9kZShiLmksIGIueCwgYi55KSxcbiAgICAgICAgYW4gPSBhLm5leHQsXG4gICAgICAgIGJwID0gYi5wcmV2O1xuXG4gICAgYS5uZXh0ID0gYjtcbiAgICBiLnByZXYgPSBhO1xuXG4gICAgYTIubmV4dCA9IGFuO1xuICAgIGFuLnByZXYgPSBhMjtcblxuICAgIGIyLm5leHQgPSBhMjtcbiAgICBhMi5wcmV2ID0gYjI7XG5cbiAgICBicC5uZXh0ID0gYjI7XG4gICAgYjIucHJldiA9IGJwO1xuXG4gICAgcmV0dXJuIGIyO1xufVxuXG4vLyBjcmVhdGUgYSBub2RlIGFuZCBvcHRpb25hbGx5IGxpbmsgaXQgd2l0aCBwcmV2aW91cyBvbmUgKGluIGEgY2lyY3VsYXIgZG91Ymx5IGxpbmtlZCBsaXN0KVxuZnVuY3Rpb24gaW5zZXJ0Tm9kZShpLCB4LCB5LCBsYXN0KSB7XG4gICAgdmFyIHAgPSBuZXcgTm9kZShpLCB4LCB5KTtcblxuICAgIGlmICghbGFzdCkge1xuICAgICAgICBwLnByZXYgPSBwO1xuICAgICAgICBwLm5leHQgPSBwO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgcC5uZXh0ID0gbGFzdC5uZXh0O1xuICAgICAgICBwLnByZXYgPSBsYXN0O1xuICAgICAgICBsYXN0Lm5leHQucHJldiA9IHA7XG4gICAgICAgIGxhc3QubmV4dCA9IHA7XG4gICAgfVxuICAgIHJldHVybiBwO1xufVxuXG5mdW5jdGlvbiByZW1vdmVOb2RlKHApIHtcbiAgICBwLm5leHQucHJldiA9IHAucHJldjtcbiAgICBwLnByZXYubmV4dCA9IHAubmV4dDtcblxuICAgIGlmIChwLnByZXZaKSBwLnByZXZaLm5leHRaID0gcC5uZXh0WjtcbiAgICBpZiAocC5uZXh0WikgcC5uZXh0Wi5wcmV2WiA9IHAucHJldlo7XG59XG5cbmZ1bmN0aW9uIE5vZGUoaSwgeCwgeSkge1xuICAgIC8vIHZlcnRleCBpbmRleCBpbiBjb29yZGluYXRlcyBhcnJheVxuICAgIHRoaXMuaSA9IGk7XG5cbiAgICAvLyB2ZXJ0ZXggY29vcmRpbmF0ZXNcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG5cbiAgICAvLyBwcmV2aW91cyBhbmQgbmV4dCB2ZXJ0ZXggbm9kZXMgaW4gYSBwb2x5Z29uIHJpbmdcbiAgICB0aGlzLnByZXYgPSBudWxsO1xuICAgIHRoaXMubmV4dCA9IG51bGw7XG5cbiAgICAvLyB6LW9yZGVyIGN1cnZlIHZhbHVlXG4gICAgdGhpcy56ID0gMDtcblxuICAgIC8vIHByZXZpb3VzIGFuZCBuZXh0IG5vZGVzIGluIHotb3JkZXJcbiAgICB0aGlzLnByZXZaID0gbnVsbDtcbiAgICB0aGlzLm5leHRaID0gbnVsbDtcblxuICAgIC8vIGluZGljYXRlcyB3aGV0aGVyIHRoaXMgaXMgYSBzdGVpbmVyIHBvaW50XG4gICAgdGhpcy5zdGVpbmVyID0gZmFsc2U7XG59XG5cbi8vIHJldHVybiBhIHBlcmNlbnRhZ2UgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSBwb2x5Z29uIGFyZWEgYW5kIGl0cyB0cmlhbmd1bGF0aW9uIGFyZWE7XG4vLyB1c2VkIHRvIHZlcmlmeSBjb3JyZWN0bmVzcyBvZiB0cmlhbmd1bGF0aW9uXG5lYXJjdXQuZGV2aWF0aW9uID0gZnVuY3Rpb24gKGRhdGEsIGhvbGVJbmRpY2VzLCBkaW0sIHRyaWFuZ2xlcykge1xuICAgIHZhciBoYXNIb2xlcyA9IGhvbGVJbmRpY2VzICYmIGhvbGVJbmRpY2VzLmxlbmd0aDtcbiAgICB2YXIgb3V0ZXJMZW4gPSBoYXNIb2xlcyA/IGhvbGVJbmRpY2VzWzBdICogZGltIDogZGF0YS5sZW5ndGg7XG5cbiAgICB2YXIgcG9seWdvbkFyZWEgPSBNYXRoLmFicyhzaWduZWRBcmVhKGRhdGEsIDAsIG91dGVyTGVuLCBkaW0pKTtcbiAgICBpZiAoaGFzSG9sZXMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGhvbGVJbmRpY2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgc3RhcnQgPSBob2xlSW5kaWNlc1tpXSAqIGRpbTtcbiAgICAgICAgICAgIHZhciBlbmQgPSBpIDwgbGVuIC0gMSA/IGhvbGVJbmRpY2VzW2kgKyAxXSAqIGRpbSA6IGRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgcG9seWdvbkFyZWEgLT0gTWF0aC5hYnMoc2lnbmVkQXJlYShkYXRhLCBzdGFydCwgZW5kLCBkaW0pKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciB0cmlhbmdsZXNBcmVhID0gMDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgdHJpYW5nbGVzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgICAgIHZhciBhID0gdHJpYW5nbGVzW2ldICogZGltO1xuICAgICAgICB2YXIgYiA9IHRyaWFuZ2xlc1tpICsgMV0gKiBkaW07XG4gICAgICAgIHZhciBjID0gdHJpYW5nbGVzW2kgKyAyXSAqIGRpbTtcbiAgICAgICAgdHJpYW5nbGVzQXJlYSArPSBNYXRoLmFicyhcbiAgICAgICAgICAgIChkYXRhW2FdIC0gZGF0YVtjXSkgKiAoZGF0YVtiICsgMV0gLSBkYXRhW2EgKyAxXSkgLVxuICAgICAgICAgICAgKGRhdGFbYV0gLSBkYXRhW2JdKSAqIChkYXRhW2MgKyAxXSAtIGRhdGFbYSArIDFdKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBvbHlnb25BcmVhID09PSAwICYmIHRyaWFuZ2xlc0FyZWEgPT09IDAgPyAwIDpcbiAgICAgICAgTWF0aC5hYnMoKHRyaWFuZ2xlc0FyZWEgLSBwb2x5Z29uQXJlYSkgLyBwb2x5Z29uQXJlYSk7XG59O1xuXG5mdW5jdGlvbiBzaWduZWRBcmVhKGRhdGEsIHN0YXJ0LCBlbmQsIGRpbSkge1xuICAgIHZhciBzdW0gPSAwO1xuICAgIGZvciAodmFyIGkgPSBzdGFydCwgaiA9IGVuZCAtIGRpbTsgaSA8IGVuZDsgaSArPSBkaW0pIHtcbiAgICAgICAgc3VtICs9IChkYXRhW2pdIC0gZGF0YVtpXSkgKiAoZGF0YVtpICsgMV0gKyBkYXRhW2ogKyAxXSk7XG4gICAgICAgIGogPSBpO1xuICAgIH1cbiAgICByZXR1cm4gc3VtO1xufVxuXG4vLyB0dXJuIGEgcG9seWdvbiBpbiBhIG11bHRpLWRpbWVuc2lvbmFsIGFycmF5IGZvcm0gKGUuZy4gYXMgaW4gR2VvSlNPTikgaW50byBhIGZvcm0gRWFyY3V0IGFjY2VwdHNcbmVhcmN1dC5mbGF0dGVuID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICB2YXIgZGltID0gZGF0YVswXVswXS5sZW5ndGgsXG4gICAgICAgIHJlc3VsdCA9IHt2ZXJ0aWNlczogW10sIGhvbGVzOiBbXSwgZGltZW5zaW9uczogZGltfSxcbiAgICAgICAgaG9sZUluZGV4ID0gMDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGRhdGFbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgZGltOyBkKyspIHJlc3VsdC52ZXJ0aWNlcy5wdXNoKGRhdGFbaV1bal1bZF0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgICAgaG9sZUluZGV4ICs9IGRhdGFbaSAtIDFdLmxlbmd0aDtcbiAgICAgICAgICAgIHJlc3VsdC5ob2xlcy5wdXNoKGhvbGVJbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG4iLCAiZXhwb3J0ICogZnJvbSAnLi84dGh3YWxsLWNhbWVyYS5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2FuY2hvci5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2N1cnNvci10YXJnZXQuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9jdXJzb3IuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9kZWJ1Zy1vYmplY3QuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9kZXZpY2Utb3JpZW50YXRpb24tbG9vay5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2Zpbmdlci1jdXJzb3IuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9maXhlZC1mb3ZlYXRpb24uanMnO1xuZXhwb3J0ICogZnJvbSAnLi9oYW5kLXRyYWNraW5nLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vaGl0LXRlc3QtbG9jYXRpb24uanMnO1xuZXhwb3J0ICogZnJvbSAnLi9ob3dsZXItYXVkaW8tbGlzdGVuZXIuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9ob3dsZXItYXVkaW8tc291cmNlLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vaW1hZ2UtdGV4dHVyZS5qcyc7XG5leHBvcnQgKiBmcm9tICcuL21vdXNlLWxvb2suanMnO1xuZXhwb3J0ICogZnJvbSAnLi9wbGF5ZXItaGVpZ2h0LmpzJztcbmV4cG9ydCAqIGZyb20gJy4vdGFyZ2V0LWZyYW1lcmF0ZS5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3RlbGVwb3J0LmpzJztcbmV4cG9ydCAqIGZyb20gJy4vdHJhaWwuanMnO1xuZXhwb3J0ICogZnJvbSAnLi90d28tam9pbnQtaWstc29sdmVyLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vdmlkZW8tdGV4dHVyZS5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3ZyLW1vZGUtYWN0aXZlLXN3aXRjaC5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3BsYW5lLWRldGVjdGlvbi5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3ZybS5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3dhc2QtY29udHJvbHMuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9pbnB1dC1wcm9maWxlLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vb3JiaXRhbC1jYW1lcmEuanMnO1xuIiwgImV4cG9ydCBjb25zdCBiaWdJbnQ9KCk9Pihhc3luYyBlPT57dHJ5e3JldHVybihhd2FpdCBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZShlKSkuaW5zdGFuY2UuZXhwb3J0cy5iKEJpZ0ludCgwKSk9PT1CaWdJbnQoMCl9Y2F0Y2goZSl7cmV0dXJuITF9fSkobmV3IFVpbnQ4QXJyYXkoWzAsOTcsMTE1LDEwOSwxLDAsMCwwLDEsNiwxLDk2LDEsMTI2LDEsMTI2LDMsMiwxLDAsNyw1LDEsMSw5OCwwLDAsMTAsNiwxLDQsMCwzMiwwLDExXSkpLGJ1bGtNZW1vcnk9YXN5bmMoKT0+V2ViQXNzZW1ibHkudmFsaWRhdGUobmV3IFVpbnQ4QXJyYXkoWzAsOTcsMTE1LDEwOSwxLDAsMCwwLDEsNCwxLDk2LDAsMCwzLDIsMSwwLDUsMywxLDAsMSwxMCwxNCwxLDEyLDAsNjUsMCw2NSwwLDY1LDAsMjUyLDEwLDAsMCwxMV0pKSxleGNlcHRpb25zPWFzeW5jKCk9PldlYkFzc2VtYmx5LnZhbGlkYXRlKG5ldyBVaW50OEFycmF5KFswLDk3LDExNSwxMDksMSwwLDAsMCwxLDQsMSw5NiwwLDAsMywyLDEsMCwxMCw4LDEsNiwwLDYsNjQsMjUsMTEsMTFdKSksZXh0ZW5kZWRDb25zdD1hc3luYygpPT5XZWJBc3NlbWJseS52YWxpZGF0ZShuZXcgVWludDhBcnJheShbMCw5NywxMTUsMTA5LDEsMCwwLDAsNSwzLDEsMCwxLDExLDksMSwwLDY1LDEsNjUsMiwxMDYsMTEsMF0pKSxnYz0oKT0+KGFzeW5jKCk9PldlYkFzc2VtYmx5LnZhbGlkYXRlKG5ldyBVaW50OEFycmF5KFswLDk3LDExNSwxMDksMSwwLDAsMCwxLDUsMSw5NSwxLDEyMCwwXSkpKSgpLGpzcGk9KCk9Pihhc3luYygpPT5cIlN1c3BlbmRpbmdcImluIFdlYkFzc2VtYmx5KSgpLG1lbW9yeTY0PWFzeW5jKCk9PldlYkFzc2VtYmx5LnZhbGlkYXRlKG5ldyBVaW50OEFycmF5KFswLDk3LDExNSwxMDksMSwwLDAsMCw1LDMsMSw0LDFdKSksbXVsdGlNZW1vcnk9KCk9Pihhc3luYygpPT57dHJ5e3JldHVybiBuZXcgV2ViQXNzZW1ibHkuTW9kdWxlKG5ldyBVaW50OEFycmF5KFswLDk3LDExNSwxMDksMSwwLDAsMCw1LDUsMiwwLDAsMCwwXSkpLCEwfWNhdGNoKGUpe3JldHVybiExfX0pKCksbXVsdGlWYWx1ZT1hc3luYygpPT5XZWJBc3NlbWJseS52YWxpZGF0ZShuZXcgVWludDhBcnJheShbMCw5NywxMTUsMTA5LDEsMCwwLDAsMSw2LDEsOTYsMCwyLDEyNywxMjcsMywyLDEsMCwxMCw4LDEsNiwwLDY1LDAsNjUsMCwxMV0pKSxtdXRhYmxlR2xvYmFscz1hc3luYygpPT5XZWJBc3NlbWJseS52YWxpZGF0ZShuZXcgVWludDhBcnJheShbMCw5NywxMTUsMTA5LDEsMCwwLDAsMiw4LDEsMSw5NywxLDk4LDMsMTI3LDEsNiw2LDEsMTI3LDEsNjUsMCwxMSw3LDUsMSwxLDk3LDMsMV0pKSxyZWZlcmVuY2VUeXBlcz1hc3luYygpPT5XZWJBc3NlbWJseS52YWxpZGF0ZShuZXcgVWludDhBcnJheShbMCw5NywxMTUsMTA5LDEsMCwwLDAsMSw0LDEsOTYsMCwwLDMsMiwxLDAsMTAsNywxLDUsMCwyMDgsMTEyLDI2LDExXSkpLHJlbGF4ZWRTaW1kPWFzeW5jKCk9PldlYkFzc2VtYmx5LnZhbGlkYXRlKG5ldyBVaW50OEFycmF5KFswLDk3LDExNSwxMDksMSwwLDAsMCwxLDUsMSw5NiwwLDEsMTIzLDMsMiwxLDAsMTAsMTUsMSwxMywwLDY1LDEsMjUzLDE1LDY1LDIsMjUzLDE1LDI1MywxMjgsMiwxMV0pKSxzYXR1cmF0ZWRGbG9hdFRvSW50PWFzeW5jKCk9PldlYkFzc2VtYmx5LnZhbGlkYXRlKG5ldyBVaW50OEFycmF5KFswLDk3LDExNSwxMDksMSwwLDAsMCwxLDQsMSw5NiwwLDAsMywyLDEsMCwxMCwxMiwxLDEwLDAsNjcsMCwwLDAsMCwyNTIsMCwyNiwxMV0pKSxzaWduRXh0ZW5zaW9ucz1hc3luYygpPT5XZWJBc3NlbWJseS52YWxpZGF0ZShuZXcgVWludDhBcnJheShbMCw5NywxMTUsMTA5LDEsMCwwLDAsMSw0LDEsOTYsMCwwLDMsMiwxLDAsMTAsOCwxLDYsMCw2NSwwLDE5MiwyNiwxMV0pKSxzaW1kPWFzeW5jKCk9PldlYkFzc2VtYmx5LnZhbGlkYXRlKG5ldyBVaW50OEFycmF5KFswLDk3LDExNSwxMDksMSwwLDAsMCwxLDUsMSw5NiwwLDEsMTIzLDMsMiwxLDAsMTAsMTAsMSw4LDAsNjUsMCwyNTMsMTUsMjUzLDk4LDExXSkpLHN0cmVhbWluZ0NvbXBpbGF0aW9uPSgpPT4oYXN5bmMoKT0+XCJjb21waWxlU3RyZWFtaW5nXCJpbiBXZWJBc3NlbWJseSkoKSx0YWlsQ2FsbD1hc3luYygpPT5XZWJBc3NlbWJseS52YWxpZGF0ZShuZXcgVWludDhBcnJheShbMCw5NywxMTUsMTA5LDEsMCwwLDAsMSw0LDEsOTYsMCwwLDMsMiwxLDAsMTAsNiwxLDQsMCwxOCwwLDExXSkpLHRocmVhZHM9KCk9Pihhc3luYyBlPT57dHJ5e3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBNZXNzYWdlQ2hhbm5lbCYmKG5ldyBNZXNzYWdlQ2hhbm5lbCkucG9ydDEucG9zdE1lc3NhZ2UobmV3IFNoYXJlZEFycmF5QnVmZmVyKDEpKSxXZWJBc3NlbWJseS52YWxpZGF0ZShlKX1jYXRjaChlKXtyZXR1cm4hMX19KShuZXcgVWludDhBcnJheShbMCw5NywxMTUsMTA5LDEsMCwwLDAsMSw0LDEsOTYsMCwwLDMsMiwxLDAsNSw0LDEsMywxLDEsMTAsMTEsMSw5LDAsNjUsMCwyNTQsMTYsMiwwLDI2LDExXSkpLHR5cGVSZWZsZWN0aW9uPSgpPT4oYXN5bmMoKT0+XCJGdW5jdGlvblwiaW4gV2ViQXNzZW1ibHkpKCk7XG4iLCAiLyoqXG4gKiBDb21wb25lbnQgcHJvcGVydHkgdHlwZS5cbiAqL1xuZXhwb3J0IGVudW0gVHlwZSB7XG4gICAgLyoqXG4gICAgICogKipOYXRpdmUqKlxuICAgICAqXG4gICAgICogUHJvcGVydHkgb2YgYSBuYXRpdmUgY29tcG9uZW50LiBNdXN0IG5vdCBiZSB1c2VkIGluIGN1c3RvbSBjb21wb25lbnRzLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIE5hdGl2ZSA9IDAsXG5cbiAgICAvKipcbiAgICAgKiAqKkJvb2wqKjpcbiAgICAgKlxuICAgICAqIEFwcGVhcnMgaW4gdGhlIGVkaXRvciBhcyBhIGNoZWNrYm94LlxuICAgICAqXG4gICAgICogSW5pdGlhbCB2YWx1ZSBpcyBgZmFsc2VgLCB1bmxlc3Mgb3ZlcnJpZGRlbiBieSB0aGUgYGRlZmF1bHRgIHByb3BlcnR5LlxuICAgICAqL1xuICAgIEJvb2wgPSAxLFxuXG4gICAgLyoqXG4gICAgICogKipJbnQqKjpcbiAgICAgKlxuICAgICAqIEFwcGVhcnMgaW4gdGhlIGVkaXRvciBhcyBhbiBpbnRlZ2VyIGlucHV0IGZpZWxkLlxuICAgICAqXG4gICAgICogSW5pdGlhbCB2YWx1ZSBpcyBgMGAsIHVubGVzcyBvdmVycmlkZGVuIGJ5IHRoZSBgZGVmYXVsdGAgcHJvcGVydHkuXG4gICAgICovXG4gICAgSW50ID0gMixcblxuICAgIC8qKlxuICAgICAqICoqRmxvYXQqKjpcbiAgICAgKlxuICAgICAqIEFwcGVhcnMgaW4gdGhlIGVkaXRvciBhcyBhIGZsb2F0aW5nIHBvaW50IGlucHV0IGZpZWxkLlxuICAgICAqXG4gICAgICogSW5pdGlhbCB2YWx1ZSBpcyBgMC4wYCwgdW5sZXNzIG92ZXJyaWRkZW4gYnkgdGhlIGBkZWZhdWx0YCBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBGbG9hdCA9IDMsXG5cbiAgICAvKipcbiAgICAgKiAqKlN0cmluZyAvIFRleHQqKjpcbiAgICAgKlxuICAgICAqIEFwcGVhcnMgaW4gdGhlIGVkaXRvciBhcyBhIHNpbmdsZS1saW5lIHRleHQgaW5wdXQgZmllbGQuXG4gICAgICpcbiAgICAgKiBJbml0aWFsIHZhbHVlIGlzIGFuIGVtcHR5IHN0cmluZywgdW5sZXNzIG92ZXJyaWRkZW4gYnkgdGhlIGBkZWZhdWx0YFxuICAgICAqIHByb3BlcnR5LlxuICAgICAqL1xuICAgIFN0cmluZyA9IDQsXG5cbiAgICAvKipcbiAgICAgKiAqKkVudW1lcmF0aW9uKio6XG4gICAgICpcbiAgICAgKiBBcHBlYXJzIGluIHRoZSBlZGl0b3IgYXMgYSBkcm9wZG93biB3aXRoIGdpdmVuIHZhbHVlcy4gVGhlIGFkZGl0aW9uYWxcbiAgICAgKiBgdmFsdWVzYCBwYXJhbWV0ZXIgd2l0aCBzZWxlY3Rpb24gb3B0aW9ucyBpcyBtYW5kYXRvcnkuXG4gICAgICpcbiAgICAgKiBUaGUgcHJvcGVydHkgdmFsdWUgaXMgcmVzb2x2ZWQgdG8gYW4gKippbmRleCoqIGludG8gdGhlIGB2YWx1ZXNgIGFycmF5LlxuICAgICAqXG4gICAgICogSW5pdGlhbCB2YWx1ZSBpcyB0aGUgZmlyc3QgZWxlbWVudCBpbiBgdmFsdWVzYCwgdW5sZXNzIG92ZXJyaWRkZW4gYnlcbiAgICAgKiB0aGUgYGRlZmF1bHRgIHByb3BlcnR5LiBUaGUgYGRlZmF1bHRgIHZhbHVlIGNhbiBiZSBhIHN0cmluZyBvciBhbiBpbmRleFxuICAgICAqIGludG8gYHZhbHVlc2AuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAgICAgY2FtZXJhOiB7dHlwZTogVHlwZS5FbnVtLCB2YWx1ZXM6IFsnYXV0bycsICdiYWNrJywgJ2Zyb250J10sIGRlZmF1bHQ6ICdhdXRvJ30sXG4gICAgICogYGBgXG4gICAgICovXG4gICAgRW51bSA9IDUsXG5cbiAgICAvKipcbiAgICAgKiAqKk9iamVjdCByZWZlcmVuY2UqKjpcbiAgICAgKlxuICAgICAqIEFwcGVhcnMgaW4gdGhlIGVkaXRvciBhcyBhbiBvYmplY3QgcmVzb3VyY2Ugc2VsZWN0aW9uIGRyb3Bkb3duXG4gICAgICogd2l0aCBvYmplY3QgcGlja2VyLlxuICAgICAqXG4gICAgICogSW5pdGlhbCB2YWx1ZSBpcyBgbnVsbGAuXG4gICAgICovXG4gICAgT2JqZWN0ID0gNixcblxuICAgIC8qKlxuICAgICAqICoqTWVzaCByZWZlcmVuY2UqKjpcbiAgICAgKlxuICAgICAqIEFwcGVhcnMgaW4gdGhlIGVkaXRvciBhcyBhIG1lc2ggcmVzb3VyY2Ugc2VsZWN0aW9uIGRyb3Bkb3duLlxuICAgICAqXG4gICAgICogSW5pdGlhbCB2YWx1ZSBpcyBgbnVsbGAuXG4gICAgICovXG4gICAgTWVzaCA9IDcsXG5cbiAgICAvKipcbiAgICAgKiAqKlRleHR1cmUgcmVmZXJlbmNlKio6XG4gICAgICpcbiAgICAgKiBBcHBlYXJzIGluIHRoZSBlZGl0b3IgYXMgYSB0ZXh0dXJlIHJlc291cmNlIHNlbGVjdGlvbiBkcm9wZG93bi5cbiAgICAgKlxuICAgICAqIEluaXRpYWwgdmFsdWUgaXMgYG51bGxgLlxuICAgICAqL1xuICAgIFRleHR1cmUgPSA4LFxuXG4gICAgLyoqXG4gICAgICogKipNYXRlcmlhbCByZWZlcmVuY2UqKjpcbiAgICAgKlxuICAgICAqIEFwcGVhcnMgaW4gdGhlIGVkaXRvciBhcyBhIG1hdGVyaWFsIHJlc291cmNlIHNlbGVjdGlvbiBkcm9wZG93bi5cbiAgICAgKlxuICAgICAqIEluaXRpYWwgdmFsdWUgaXMgYG51bGxgLlxuICAgICAqL1xuICAgIE1hdGVyaWFsID0gOSxcblxuICAgIC8qKlxuICAgICAqICoqQW5pbWF0aW9uIHJlZmVyZW5jZSoqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGFuIGFuaW1hdGlvbiByZXNvdXJjZSBzZWxlY3Rpb24gZHJvcGRvd24uXG4gICAgICpcbiAgICAgKiBJbml0aWFsIHZhbHVlIGlzIGBudWxsYC5cbiAgICAgKi9cbiAgICBBbmltYXRpb24gPSAxMCxcblxuICAgIC8qKlxuICAgICAqICoqU2tpbiByZWZlcmVuY2UqKjpcbiAgICAgKlxuICAgICAqIEFwcGVhcnMgaW4gdGhlIGVkaXRvciBhcyBhIHNraW4gcmVzb3VyY2Ugc2VsZWN0aW9uIGRyb3Bkb3duLlxuICAgICAqXG4gICAgICogSW5pdGlhbCB2YWx1ZSBpcyBgbnVsbGAuXG4gICAgICovXG4gICAgU2tpbiA9IDExLFxuXG4gICAgLyoqXG4gICAgICogKipDb2xvcioqOlxuICAgICAqXG4gICAgICogQXBwZWFycyBpbiB0aGUgZWRpdG9yIGFzIGEgY29sb3Igd2lkZ2V0LlxuICAgICAqXG4gICAgICogSW5pdGlhbCB2YWx1ZSBpcyBgWzAuMCwgMC4wLCAwLjAsIDEuMF1gLCB1bmxlc3Mgb3ZlcnJpZGRlbiBieSB0aGVcbiAgICAgKiBgZGVmYXVsdGAgcHJvcGVydHkuXG4gICAgICovXG4gICAgQ29sb3IgPSAxMixcblxuICAgIC8qKlxuICAgICAqICoqVmVjdG9yIG9mIHR3byBmbG9hdHMqKjpcbiAgICAgKlxuICAgICAqIEFwcGVhcnMgaW4gdGhlIGVkaXRvciBhcyBhIHR3by1lbGVtZW50IGZsb2F0aW5nIHBvaW50IGlucHV0IGZpZWxkLlxuICAgICAqXG4gICAgICogSW5pdGlhbCB2YWx1ZSBpcyBgWzAuMCwgMC4wXWAsIHVubGVzcyBvdmVycmlkZGVuIGJ5IHRoZVxuICAgICAqIGBkZWZhdWx0YCBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBWZWN0b3IyID0gMTMsXG5cbiAgICAvKipcbiAgICAgKiAqKlZlY3RvciBvZiB0aHJlZSBmbG9hdHMqKjpcbiAgICAgKlxuICAgICAqIEFwcGVhcnMgaW4gdGhlIGVkaXRvciBhcyBhIHRocmVlLWVsZW1lbnQgZmxvYXRpbmcgcG9pbnQgaW5wdXQgZmllbGQuXG4gICAgICpcbiAgICAgKiBJbml0aWFsIHZhbHVlIGlzIGBbMC4wLCAwLjAsIDAuMF1gLCB1bmxlc3Mgb3ZlcnJpZGRlbiBieSB0aGVcbiAgICAgKiBgZGVmYXVsdGAgcHJvcGVydHkuXG4gICAgICovXG4gICAgVmVjdG9yMyA9IDE0LFxuXG4gICAgLyoqXG4gICAgICogKipWZWN0b3Igb2YgZm91ciBmbG9hdHMqKjpcbiAgICAgKlxuICAgICAqIEFwcGVhcnMgaW4gdGhlIGVkaXRvciBhcyBhIGZvdXItZWxlbWVudCBmbG9hdGluZyBwb2ludCBpbnB1dCBmaWVsZC5cbiAgICAgKlxuICAgICAqIEluaXRpYWwgdmFsdWUgaXMgYFswLjAsIDAuMCwgMC4wLCAwLjBdYCwgdW5sZXNzIG92ZXJyaWRkZW4gYnkgdGhlXG4gICAgICogYGRlZmF1bHRgIHByb3BlcnR5LlxuICAgICAqL1xuICAgIFZlY3RvcjQgPSAxNSxcbn1cblxuLyoqXG4gKiBDbG9uaW5nIGludGVyZmFjZSBmb3IgY29tcG9uZW50IHByb3BlcnRpZXMuXG4gKlxuICogVXNlZCBmb3IgY29tcG9uZW50IGluaXRpYWxpemF0aW9uIGFuZCBjbG9uaW5nLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFByb3BlcnR5Q2xvbmVyIHtcbiAgICAvKipcbiAgICAgKiBDbG9uZSBhIHByb3BlcnR5IHZhbHVlLlxuICAgICAqIEBwYXJhbSB0eXBlIFR5cGUgb2YgdGhlIHByb3BlcnR5LlxuICAgICAqIEBwYXJhbSB2YWx1ZSBWYWx1ZSBvZiB0aGUgcHJvcGVydHkuXG4gICAgICogQHJldHVybnMgVGhlIGNsb25lZCB2YWx1ZS5cbiAgICAgKi9cbiAgICBjbG9uZSh0eXBlOiBUeXBlLCB2YWx1ZTogYW55KTogYW55O1xufVxuXG4vKipcbiAqIERlZmF1bHQgY2xvbmVyIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIENsb25lcyBhcnJheS1saWtlIHByb3BlcnRpZXMgYW5kIGxlYXZlcyBhbGwgb3RoZXIgdHlwZXMgdW5jaGFuZ2VkLlxuICovXG5leHBvcnQgY2xhc3MgRGVmYXVsdFByb3BlcnR5Q2xvbmVyIGltcGxlbWVudHMgUHJvcGVydHlDbG9uZXIge1xuICAgIGNsb25lKHR5cGU6IFR5cGUsIHZhbHVlOiBhbnkpOiBhbnkge1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgVHlwZS5Db2xvcjpcbiAgICAgICAgICAgIGNhc2UgVHlwZS5WZWN0b3IyOlxuICAgICAgICAgICAgY2FzZSBUeXBlLlZlY3RvcjM6XG4gICAgICAgICAgICBjYXNlIFR5cGUuVmVjdG9yNDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUuc2xpY2UoKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKiogRGVmYXVsdCBjbG9uZXIgZm9yIHByb3BlcnR5IHZhbHVlcy4gKi9cbmV4cG9ydCBjb25zdCBkZWZhdWx0UHJvcGVydHlDbG9uZXIgPSBuZXcgRGVmYXVsdFByb3BlcnR5Q2xvbmVyKCk7XG5cbi8qKlxuICogQ3VzdG9tIGNvbXBvbmVudCBwcm9wZXJ0eS5cbiAqXG4gKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBjb21wb25lbnQgcHJvcGVydGllcywgaGF2ZSBhIGxvb2tcbiAqIGF0IHRoZSB7QGxpbmsgQ29tcG9uZW50LlByb3BlcnRpZXN9IGF0dHJpYnV0ZS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDb21wb25lbnRQcm9wZXJ0eSB7XG4gICAgLyoqIFByb3BlcnR5IHR5cGUuICovXG4gICAgdHlwZTogVHlwZTtcbiAgICAvKiogRGVmYXVsdCB2YWx1ZSwgZGVwZW5kaW5nIG9uIHR5cGUuICovXG4gICAgZGVmYXVsdD86IGFueTtcbiAgICAvKiogVmFsdWVzIGZvciB7QGxpbmsgVHlwZS5FbnVtfSAqL1xuICAgIHZhbHVlcz86IHN0cmluZ1tdO1xuICAgIHJlcXVpcmVkPzogYm9vbGVhbjtcbiAgICAvKipcbiAgICAgKiBDbG9uZXIgZm9yIHRoZSBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIElmIG5vdCBkZWZpbmVkLCBmYWxscyBiYWNrIHRvIHtAbGluayBkZWZhdWx0UHJvcGVydHlDbG9uZXJ9LiBUbyBwcmV2ZW50XG4gICAgICogYW55IGNsb25pbmcsIHNldCBhIGN1c3RvbSBjbG9uZXIgdGhhdCBwYXNzZXMgdGhlIG9yaWdpbmFsIHZhbHVlIGJhY2tcbiAgICAgKiBmcm9tIHtAbGluayBQcm9wZXJ0eUNsb25lci5jbG9uZX0uICovXG4gICAgY2xvbmVyPzogUHJvcGVydHlDbG9uZXI7XG59XG5cbi8qKlxuICogQ29tcG9uZW50IHByb3BlcnR5IG5hbWVzcGFjZS5cbiAqXG4gKiBVc2FnZTpcbiAqXG4gKiBgYGBqc1xuICogaW1wb3J0IHtDb21wb25lbnQsIFByb3BlcnR5fSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuICpcbiAqIGNsYXNzIE15Q29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAqICAgICBzdGF0aWMgUHJvcGVydGllcyA9IHtcbiAqICAgICAgICAgbXlCb29sOiBQcm9wZXJ0eS5ib29sKHRydWUpLFxuICogICAgICAgICBteUludDogUHJvcGVydHkuaW50KDQyKSxcbiAqICAgICAgICAgbXlTdHJpbmc6IFByb3BlcnR5LnN0cmluZygnSGVsbG8gV29ybGQhJyksXG4gKiAgICAgICAgIG15TWVzaDogUHJvcGVydHkubWVzaCgpLFxuICogICAgIH1cbiAqIH1cbiAqIGBgYFxuICpcbiAqIEZvciBUeXBlU2NyaXB0IHVzZXJzLCB5b3UgY2FuIHVzZSB0aGUgZGVjb3JhdG9ycyBpbnN0ZWFkLlxuICovXG5leHBvcnQgY29uc3QgUHJvcGVydHkgPSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIGJvb2xlYW4gcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGVmYXVsdFZhbHVlIFRoZSBkZWZhdWx0IHZhbHVlLiBJZiBub3QgcHJvdmlkZWQsIGRlZmF1bHRzIHRvIGBmYWxzZWAuXG4gICAgICovXG4gICAgYm9vbChkZWZhdWx0VmFsdWU6IGJvb2xlYW4gPSBmYWxzZSk6IENvbXBvbmVudFByb3BlcnR5IHtcbiAgICAgICAgcmV0dXJuIHt0eXBlOiBUeXBlLkJvb2wsIGRlZmF1bHQ6IGRlZmF1bHRWYWx1ZX07XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBpbnRlZ2VyIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRlZmF1bHRWYWx1ZSBUaGUgZGVmYXVsdCB2YWx1ZS4gSWYgbm90IHByb3ZpZGVkLCBkZWZhdWx0cyB0byBgMGAuXG4gICAgICovXG4gICAgaW50KGRlZmF1bHRWYWx1ZTogbnVtYmVyID0gMCk6IENvbXBvbmVudFByb3BlcnR5IHtcbiAgICAgICAgcmV0dXJuIHt0eXBlOiBUeXBlLkludCwgZGVmYXVsdDogZGVmYXVsdFZhbHVlfTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIGZsb2F0IHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRlZmF1bHRWYWx1ZSBUaGUgZGVmYXVsdCB2YWx1ZS4gSWYgbm90IHByb3ZpZGVkLCBkZWZhdWx0cyB0byBgMC4wYC5cbiAgICAgKi9cbiAgICBmbG9hdChkZWZhdWx0VmFsdWU6IG51bWJlciA9IDAuMCk6IENvbXBvbmVudFByb3BlcnR5IHtcbiAgICAgICAgcmV0dXJuIHt0eXBlOiBUeXBlLkZsb2F0LCBkZWZhdWx0OiBkZWZhdWx0VmFsdWV9O1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gc3RyaW5nIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRlZmF1bHRWYWx1ZSBUaGUgZGVmYXVsdCB2YWx1ZS4gSWYgbm90IHByb3ZpZGVkLCBkZWZhdWx0cyB0byBgJydgLlxuICAgICAqL1xuICAgIHN0cmluZyhkZWZhdWx0VmFsdWUgPSAnJyk6IENvbXBvbmVudFByb3BlcnR5IHtcbiAgICAgICAgcmV0dXJuIHt0eXBlOiBUeXBlLlN0cmluZywgZGVmYXVsdDogZGVmYXVsdFZhbHVlfTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIGVudW1lcmF0aW9uIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlcyBUaGUgbGlzdCBvZiB2YWx1ZXMuXG4gICAgICogQHBhcmFtIGRlZmF1bHRWYWx1ZSBUaGUgZGVmYXVsdCB2YWx1ZS4gQ2FuIGJlIGEgc3RyaW5nIG9yIGFuIGluZGV4IGludG9cbiAgICAgKiAgICAgYHZhbHVlc2AuIElmIG5vdCBwcm92aWRlZCwgZGVmYXVsdHMgdG8gdGhlIGZpcnN0IGVsZW1lbnQuXG4gICAgICovXG4gICAgZW51bSh2YWx1ZXM6IHN0cmluZ1tdLCBkZWZhdWx0VmFsdWU/OiBzdHJpbmcgfCBudW1iZXIpOiBDb21wb25lbnRQcm9wZXJ0eSB7XG4gICAgICAgIHJldHVybiB7dHlwZTogVHlwZS5FbnVtLCB2YWx1ZXMsIGRlZmF1bHQ6IGRlZmF1bHRWYWx1ZX07XG4gICAgfSxcblxuICAgIC8qKiBDcmVhdGUgYW4ge0BsaW5rIE9iamVjdDNEfSByZWZlcmVuY2UgcHJvcGVydHkuICovXG4gICAgb2JqZWN0KG9wdHM/OiBQcm9wZXJ0eVJlZmVyZW5jZU9wdGlvbnMpOiBDb21wb25lbnRQcm9wZXJ0eSB7XG4gICAgICAgIHJldHVybiB7dHlwZTogVHlwZS5PYmplY3QsIGRlZmF1bHQ6IG51bGwsIHJlcXVpcmVkOiBvcHRzPy5yZXF1aXJlZCA/PyBmYWxzZX07XG4gICAgfSxcblxuICAgIC8qKiBDcmVhdGUgYSB7QGxpbmsgTWVzaH0gcmVmZXJlbmNlIHByb3BlcnR5LiAqL1xuICAgIG1lc2gob3B0cz86IFByb3BlcnR5UmVmZXJlbmNlT3B0aW9ucyk6IENvbXBvbmVudFByb3BlcnR5IHtcbiAgICAgICAgcmV0dXJuIHt0eXBlOiBUeXBlLk1lc2gsIGRlZmF1bHQ6IG51bGwsIHJlcXVpcmVkOiBvcHRzPy5yZXF1aXJlZCA/PyBmYWxzZX07XG4gICAgfSxcblxuICAgIC8qKiBDcmVhdGUgYSB7QGxpbmsgVGV4dHVyZX0gcmVmZXJlbmNlIHByb3BlcnR5LiAqL1xuICAgIHRleHR1cmUob3B0cz86IFByb3BlcnR5UmVmZXJlbmNlT3B0aW9ucyk6IENvbXBvbmVudFByb3BlcnR5IHtcbiAgICAgICAgcmV0dXJuIHt0eXBlOiBUeXBlLlRleHR1cmUsIGRlZmF1bHQ6IG51bGwsIHJlcXVpcmVkOiBvcHRzPy5yZXF1aXJlZCA/PyBmYWxzZX07XG4gICAgfSxcblxuICAgIC8qKiBDcmVhdGUgYSB7QGxpbmsgTWF0ZXJpYWx9IHJlZmVyZW5jZSBwcm9wZXJ0eS4gKi9cbiAgICBtYXRlcmlhbChvcHRzPzogUHJvcGVydHlSZWZlcmVuY2VPcHRpb25zKTogQ29tcG9uZW50UHJvcGVydHkge1xuICAgICAgICByZXR1cm4ge3R5cGU6IFR5cGUuTWF0ZXJpYWwsIGRlZmF1bHQ6IG51bGwsIHJlcXVpcmVkOiBvcHRzPy5yZXF1aXJlZCA/PyBmYWxzZX07XG4gICAgfSxcblxuICAgIC8qKiBDcmVhdGUgYW4ge0BsaW5rIEFuaW1hdGlvbn0gcmVmZXJlbmNlIHByb3BlcnR5LiAqL1xuICAgIGFuaW1hdGlvbihvcHRzPzogUHJvcGVydHlSZWZlcmVuY2VPcHRpb25zKTogQ29tcG9uZW50UHJvcGVydHkge1xuICAgICAgICByZXR1cm4ge3R5cGU6IFR5cGUuQW5pbWF0aW9uLCBkZWZhdWx0OiBudWxsLCByZXF1aXJlZDogb3B0cz8ucmVxdWlyZWQgPz8gZmFsc2V9O1xuICAgIH0sXG5cbiAgICAvKiogQ3JlYXRlIGEge0BsaW5rIFNraW59IHJlZmVyZW5jZSBwcm9wZXJ0eS4gKi9cbiAgICBza2luKG9wdHM/OiBQcm9wZXJ0eVJlZmVyZW5jZU9wdGlvbnMpOiBDb21wb25lbnRQcm9wZXJ0eSB7XG4gICAgICAgIHJldHVybiB7dHlwZTogVHlwZS5Ta2luLCBkZWZhdWx0OiBudWxsLCByZXF1aXJlZDogb3B0cz8ucmVxdWlyZWQgPz8gZmFsc2V9O1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBjb2xvciBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByIFRoZSByZWQgY29tcG9uZW50LCBpbiB0aGUgcmFuZ2UgWzA7IDFdLlxuICAgICAqIEBwYXJhbSBnIFRoZSBncmVlbiBjb21wb25lbnQsIGluIHRoZSByYW5nZSBbMDsgMV0uXG4gICAgICogQHBhcmFtIGIgVGhlIGJsdWUgY29tcG9uZW50LCBpbiB0aGUgcmFuZ2UgWzA7IDFdLlxuICAgICAqIEBwYXJhbSBhIFRoZSBhbHBoYSBjb21wb25lbnQsIGluIHRoZSByYW5nZSBbMDsgMV0uXG4gICAgICovXG4gICAgY29sb3IociA9IDAuMCwgZyA9IDAuMCwgYiA9IDAuMCwgYSA9IDEuMCk6IENvbXBvbmVudFByb3BlcnR5IHtcbiAgICAgICAgcmV0dXJuIHt0eXBlOiBUeXBlLkNvbG9yLCBkZWZhdWx0OiBbciwgZywgYiwgYV19O1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSB0d28tZWxlbWVudCB2ZWN0b3IgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geCBUaGUgeCBjb21wb25lbnQuXG4gICAgICogQHBhcmFtIHkgVGhlIHkgY29tcG9uZW50LlxuICAgICAqL1xuICAgIHZlY3RvcjIoeCA9IDAuMCwgeSA9IDAuMCk6IENvbXBvbmVudFByb3BlcnR5IHtcbiAgICAgICAgcmV0dXJuIHt0eXBlOiBUeXBlLlZlY3RvcjIsIGRlZmF1bHQ6IFt4LCB5XX07XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHRocmVlLWVsZW1lbnQgdmVjdG9yIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHggVGhlIHggY29tcG9uZW50LlxuICAgICAqIEBwYXJhbSB5IFRoZSB5IGNvbXBvbmVudC5cbiAgICAgKiBAcGFyYW0geiBUaGUgeiBjb21wb25lbnQuXG4gICAgICovXG4gICAgdmVjdG9yMyh4ID0gMC4wLCB5ID0gMC4wLCB6ID0gMC4wKTogQ29tcG9uZW50UHJvcGVydHkge1xuICAgICAgICByZXR1cm4ge3R5cGU6IFR5cGUuVmVjdG9yMywgZGVmYXVsdDogW3gsIHksIHpdfTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgZm91ci1lbGVtZW50IHZlY3RvciBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB4IFRoZSB4IGNvbXBvbmVudC5cbiAgICAgKiBAcGFyYW0geSBUaGUgeSBjb21wb25lbnQuXG4gICAgICogQHBhcmFtIHogVGhlIHogY29tcG9uZW50LlxuICAgICAqIEBwYXJhbSB3IFRoZSB3IGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICB2ZWN0b3I0KHggPSAwLjAsIHkgPSAwLjAsIHogPSAwLjAsIHcgPSAwLjApOiBDb21wb25lbnRQcm9wZXJ0eSB7XG4gICAgICAgIHJldHVybiB7dHlwZTogVHlwZS5WZWN0b3I0LCBkZWZhdWx0OiBbeCwgeSwgeiwgd119O1xuICAgIH0sXG59O1xuXG4vKipcbiAqIE9wdGlvbnMgdG8gY3JlYXRlIGEgcmVmZXJlbmNlIHByb3BlcnR5LCBpLmUuLFxuICogb2JqZWN0LCBtZXNoLCBhbmltYXRpb24sIHNraW4sIGV0Yy4uLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFByb3BlcnR5UmVmZXJlbmNlT3B0aW9ucyB7XG4gICAgLyoqIElmIGB0cnVlYCwgdGhlIGNvbXBvbmVudCB3aWxsIHRocm93IGlmIHRoZSBwcm9wZXJ0eSBpc24ndCBpbml0aWFsaXplZC4gKi9cbiAgICByZXF1aXJlZD86IGJvb2xlYW47XG59XG5cbi8qKiBBbGwgdGhlIGtleXMgdGhhdCBleGlzdHMgb24gdGhlIHtAbGluayBQcm9wZXJ0eX0gb2JqZWN0LiAqL1xuZXhwb3J0IHR5cGUgUHJvcGVydHlLZXlzID0ga2V5b2YgdHlwZW9mIFByb3BlcnR5O1xuXG4vKiogUmV0cmlldmUgYWxsIHRoZSBhcmd1bWVudCB0eXBlcyBvZiBhIHtAbGluayBQcm9wZXJ0eX0gZnVuY3Rpb24uICovXG5leHBvcnQgdHlwZSBQcm9wZXJ0eUFyZ3M8a2V5IGV4dGVuZHMgUHJvcGVydHlLZXlzPiA9IFBhcmFtZXRlcnM8KHR5cGVvZiBQcm9wZXJ0eSlba2V5XT47XG4iLCAiaW1wb3J0IHtDb21wb25lbnQsIENvbXBvbmVudENvbnN0cnVjdG9yfSBmcm9tICcuL3dvbmRlcmxhbmQuanMnO1xuaW1wb3J0IHtQcm9wZXJ0eSwgUHJvcGVydHlBcmdzLCBQcm9wZXJ0eUtleXMsIENvbXBvbmVudFByb3BlcnR5LCBUeXBlfSBmcm9tICcuL3Byb3BlcnR5LmpzJztcblxuLyoqXG4gKiBEZWNvcmF0b3IgZm9yIEpTIGNvbXBvbmVudCBwcm9wZXJ0aWVzLlxuICpcbiAqIEBwYXJhbSBkYXRhIFRoZSBwcm9wZXJ0eSBkZXNjcmlwdGlvbiBhcyBhbiBvYmplY3QgbGl0ZXJhbFxuICogQHJldHVybnMgQSBkZWNvcmF0b3IgZnVuY3Rpb24gbW9kaWZ5aW5nIHRoZSBgUHJvcGVydGllc2Agc3RhdGljXG4gKiAgICAgYXR0cmlidXRlXG4gKi9cbmZ1bmN0aW9uIHByb3BlcnR5RGVjb3JhdG9yKGRhdGE6IENvbXBvbmVudFByb3BlcnR5KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQ6IENvbXBvbmVudCwgcHJvcGVydHlLZXk6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBjdG9yID0gdGFyZ2V0LmNvbnN0cnVjdG9yIGFzIENvbXBvbmVudENvbnN0cnVjdG9yO1xuICAgICAgICBjdG9yLlByb3BlcnRpZXMgPSBjdG9yLmhhc093blByb3BlcnR5KCdQcm9wZXJ0aWVzJykgPyBjdG9yLlByb3BlcnRpZXMgOiB7fTtcbiAgICAgICAgY3Rvci5Qcm9wZXJ0aWVzW3Byb3BlcnR5S2V5XSA9IGRhdGE7XG4gICAgfTtcbn1cblxuLyoqXG4gKiBEZWNvcmF0b3IgZm9yIG1ha2luZyBhIGdldHRlciBlbnVtZXJhYmxlLlxuICpcbiAqIFVzYWdlOlxuICpcbiAqIGBgYHRzXG4gKiBjbGFzcyBNeUNsYXNzIHtcbiAqICAgICBAZW51bWVyYWJsZSgpXG4gKiAgICAgZ2V0IHByb2plY3Rpb25NYXRyaXgoKTogRmxvYXQzMkFycmF5IHsgLi4uIH1cbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gZW51bWVyYWJsZSgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKF86IGFueSwgX186IHN0cmluZywgZGVzY3JpcHRvcjogUHJvcGVydHlEZXNjcmlwdG9yKSB7XG4gICAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IHRydWU7XG4gICAgfTtcbn1cblxuLyoqXG4gKiBEZWNvcmF0b3IgZm9yIG5hdGl2ZSBwcm9wZXJ0aWVzLlxuICpcbiAqIFVzYWdlOlxuICpcbiAqIGBgYHRzXG4gKiBjbGFzcyBNeUNsYXNzIHtcbiAqICAgICBAbmF0aXZlUHJvcGVydHkoKVxuICogICAgIGdldCBwcm9qZWN0aW9uTWF0cml4KCk6IEZsb2F0MzJBcnJheSB7IC4uLiB9XG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5hdGl2ZVByb3BlcnR5KCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoXG4gICAgICAgIHRhcmdldDogQ29tcG9uZW50LFxuICAgICAgICBwcm9wZXJ0eUtleTogc3RyaW5nLFxuICAgICAgICBkZXNjcmlwdG9yOiBQcm9wZXJ0eURlc2NyaXB0b3JcbiAgICApIHtcbiAgICAgICAgZW51bWVyYWJsZSgpKHRhcmdldCwgcHJvcGVydHlLZXksIGRlc2NyaXB0b3IpO1xuICAgICAgICBwcm9wZXJ0eURlY29yYXRvcih7dHlwZTogVHlwZS5OYXRpdmV9KSh0YXJnZXQsIHByb3BlcnR5S2V5KTtcbiAgICB9O1xufVxuXG4vKipcbiAqIFByb3BlcnR5IGRlY29yYXRvcnMgbmFtZXNwYWNlLlxuICpcbiAqIFlvdSBjYW4gdXNlIHRoZSBkZWNvcmF0b3JzIHRvIG1hcmsgYSBjbGFzcyBhdHRyaWJ1dGUgYXNcbiAqIGEgV29uZGVybGFuZCBFbmdpbmUgcHJvcGVydHkuXG4gKlxuICogVXNhZ2U6XG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7TWVzaH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbiAqIGltcG9ydCB7cHJvcGVydHl9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaS9kZWNvcmF0b3JzLmpzJztcbiAqXG4gKiBjbGFzcyBNeUNvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gKiAgICAgQHByb3BlcnR5LmJvb2wodHJ1ZSlcbiAqICAgICBteUJvb2whOiBib29sZWFuO1xuICpcbiAqICAgICBAcHJvcGVydHkuaW50KDQyKVxuICogICAgIG15SW50ITogbnVtYmVyO1xuICpcbiAqICAgICBAcHJvcGVydHkuc3RyaW5nKCdIZWxsbyBXb3JsZCEnKVxuICogICAgIG15U3RyaW5nITogc3RyaW5nO1xuICpcbiAqICAgICBAcHJvcGVydHkubWVzaCgpXG4gKiAgICAgbXlNZXNoITogTWVzaDtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEZvciBKYXZhU2NyaXB0IHVzZXJzLCBwbGVhc2UgZGVjbGFyZSB0aGUgcHJvcGVydGllcyBzdGF0aWNhbGx5LlxuICovXG5leHBvcnQgY29uc3QgcHJvcGVydHkgPSB7fSBhcyB7XG4gICAgW2tleSBpbiBQcm9wZXJ0eUtleXNdOiAoXG4gICAgICAgIC4uLmFyZ3M6IFByb3BlcnR5QXJnczxrZXk+XG4gICAgKSA9PiBSZXR1cm5UeXBlPHR5cGVvZiBwcm9wZXJ0eURlY29yYXRvcj47XG59O1xuXG5mb3IgKGNvbnN0IG5hbWUgaW4gUHJvcGVydHkpIHtcbiAgICAvKiBBc3NpZ24gZWFjaCBwcm9wZXJ0eSBmdW5jdG9yIHRvIGEgVHlwZVNjcmlwdCBkZWNvcmF0b3IuXG4gICAgICogVGhpcyBjb2RlIGV4dHJhY3RzIHBhcmFtZXRlcnMgYW5kIHJldHVybiB0eXBlIHRvIHByb3ZpZGUgcHJvcGVyXG4gICAgICogdHlwaW5ncyB0byB0aGUgdXNlci4gKi9cbiAgICBwcm9wZXJ0eVtuYW1lIGFzIFByb3BlcnR5S2V5c10gPSAoLi4uYXJnczogUHJvcGVydHlBcmdzPFByb3BlcnR5S2V5cz4pID0+IHtcbiAgICAgICAgY29uc3QgZnVuY3RvciA9IFByb3BlcnR5W25hbWUgYXMgUHJvcGVydHlLZXlzXSBhcyAoXG4gICAgICAgICAgICAuLi5hcmdzOiB1bmtub3duW11cbiAgICAgICAgKSA9PiBDb21wb25lbnRQcm9wZXJ0eTtcbiAgICAgICAgcmV0dXJuIHByb3BlcnR5RGVjb3JhdG9yKGZ1bmN0b3IoLi4uYXJncykpO1xuICAgIH07XG59XG4iLCAiaW1wb3J0IHtJbWFnZUxpa2V9IGZyb20gJy4uL3R5cGVzLmpzJztcblxuLyoqXG4gKiBDaGVjayBpZiBhIGdpdmVuIHZhbHVlIGlzIGEgbmF0aXZlIHN0cmluZyBvciBhIGBTdHJpbmdgIGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaGFzIHR5cGUgc3RyaW5nIGxpdGVyYWwgb3IgYFN0cmluZ2AsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTdHJpbmcodmFsdWU6IGFueSk6IHZhbHVlIGlzIHN0cmluZyB7XG4gICAgaWYgKHZhbHVlID09PSAnJykgcmV0dXJuIHRydWU7XG4gICAgcmV0dXJuIHZhbHVlICYmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnIHx8IHZhbHVlLmNvbnN0cnVjdG9yID09PSBTdHJpbmcpO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgZ2l2ZW4gdmFsdWUgaXMgYSBuYXRpdmUgbnVtYmVyIG9yIGEgYE51bWJlcmAgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBoYXMgdHlwZSBudW1iZXIgbGl0ZXJhbCBvciBgTnVtYmVyYCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc051bWJlcih2YWx1ZTogYW55KTogdmFsdWUgaXMgbnVtYmVyIHtcbiAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInIHx8IHZhbHVlLmNvbnN0cnVjdG9yID09PSBOdW1iZXI7XG59XG5cbi8qKlxuICogQ2hlY2sgd2hldGhlciBhIGdpdmVuIHZhbHVlIGlzIGEgdmlzdWFsIG1lZGlhLlxuICpcbiAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2tcbiAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBhbiBpbWFnZSwgdmlkZW8sIG9yIGNhbnZhcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzSW1hZ2VMaWtlKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBJbWFnZUxpa2Uge1xuICAgIHJldHVybiAoXG4gICAgICAgIHZhbHVlIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudCB8fFxuICAgICAgICB2YWx1ZSBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQgfHxcbiAgICAgICAgdmFsdWUgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudFxuICAgICk7XG59XG4iLCAiLyoqXG4gKiBMaXN0ZW5lciBjYWxsYmFjayB0eXBlLCB1c2VkIGluIHtAbGluayBFbWl0dGVyLmFkZH0uXG4gKi9cbmV4cG9ydCB0eXBlIExpc3RlbmVyQ2FsbGJhY2s8VCBleHRlbmRzIHVua25vd25bXSA9IHZvaWRbXT4gPSAoLi4uZGF0YTogVCkgPT4gdm9pZDtcblxuLyoqXG4gKiBSZWdpc3RyYXRpb24gb3B0aW9ucyBmb3IgYSBsaXN0ZW5lciBpbiBhbiB7QGxpbmsgRW1pdHRlcn0uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTGlzdGVuZXJPcHRpb25zIHtcbiAgICAvKipcbiAgICAgKiBMaXN0ZW5lciBpZGVudGlmaWVyLiBUaGlzIGlzIHVzZWQgdG8gZmluZCBhbmQgcmVtb3ZlIHRoZSBsaXN0ZW5lclxuICAgICAqIHdpdGhvdXQgbmVlZGluZyB0aGUgY2FsbGJhY2sgcmVmZXJlbmNlLlxuICAgICAqXG4gICAgICogVGhlIGlkZW50aWZpZXIgY2FuIGJlIGFueSB0eXBlLiBIb3dldmVyLCByZW1lbWJlciB0aGF0IHRoZSBjb21wYXJpc29uIHdpbGwgYmVcbiAgICAgKiBieS12YWx1ZSBmb3IgcHJpbWl0aXZlIHR5cGVzIChzdHJpbmcsIG51bWJlciksIGJ1dCBieSByZWZlcmVuY2UgZm9yIG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgcGxlYXNlIGxvb2sgYXQgdGhlIHtAbGluayBFbWl0dGVyLnJlbW92ZX0gbWV0aG9kLlxuICAgICAqL1xuICAgIGlkOiBhbnkgfCB1bmRlZmluZWQ7XG4gICAgLyoqXG4gICAgICogSWYgYHRydWVgLCB0aGUgbGlzdGVuZXIgaXMgYXV0b21hdGljYWxseSByZW1vdmVkIGFmdGVyIGl0J3MgaW52b2tlZC5cbiAgICAgKiBEZWZhdWx0cyB0byBgZmFsc2VgLlxuICAgICAqL1xuICAgIG9uY2U6IGJvb2xlYW47XG59XG5cbi8qKiBJbnRlcm5hbCBsaXN0ZW5lciB0eXBlLiAqL1xudHlwZSBMaXN0ZW5lcjxUIGV4dGVuZHMgdW5rbm93bltdPiA9IExpc3RlbmVyT3B0aW9ucyAmIHtcbiAgICBjYWxsYmFjazogTGlzdGVuZXJDYWxsYmFjazxUPjtcbn07XG5cbi8qKiBJbnRlcm5hbCB0eXBlIGZvciB0cmFuc2FjdGlvbi4gKi9cbmVudW0gVHJhbnNhY3Rpb25UeXBlIHtcbiAgICBBZGRpdGlvbiA9IDEsXG4gICAgUmVtb3ZhbCA9IDIsXG59XG5cbi8qKlxuICogRXZlbnQgZW1pdHRlci5cbiAqXG4gKiBUaGlzIGNsYXNzIGFsbG93cyB0byByZWdpc3RlciBsaXN0ZW5lcnMgdGhhdCB3aWxsIGdldCBub3RpZmllZCBieSB0aGUgZW1pdHRlci5cbiAqXG4gKiBVc2FnZSBleGFtcGxlOlxuICpcbiAqIGBgYGpzXG4gKiAvLyBgb25QcmVSZW5kZXJgIGlzIGFuIGBFbWl0dGVyYCBpbnN0YW5jZS5cbiAqIHNjZW5lLm9uUHJlUmVuZGVyLmFkZCgoKSA9PiBjb25zb2xlLmxvZygnYmVmb3JlIHJlbmRlcmluZycpKTtcbiAqIC8vIGBvblBvc3RSZW5kZXJgIGlzIGFuIGBFbWl0dGVyYCBpbnN0YW5jZS5cbiAqIHNjZW5lLm9uUG9zdFJlbmRlci5hZGQoKCkgPT4gY29uc29sZS5sb2coJ2FmdGVyIHJlbmRlcmluZycpKTtcbiAqIGBgYFxuICpcbiAqIFlvdSBjYW4gY3JlYXRlIHlvdXIgb3duIGVtaXR0ZXJzOlxuICpcbiAqIGBgYGpzXG4gKiBpbXBvcnQge0VtaXR0ZXJ9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4gKlxuICogY29uc3QgZW1pdHRlciA9IG5ldyBFbWl0dGVyKCk7XG4gKiBgYGBcbiAqXG4gKiBZb3UgY2FuIG5vdGlmeSBsaXN0ZW5lcnMgaW4gdG8geW91ciBlbWl0dGVyIHVzaW5nIHtAbGluayBFbWl0dGVyLm5vdGlmeX06XG4gKlxuICogYGBganNcbiAqIC8vIE5vdGlmaWVzIGFsbCB0aGUgbGlzdGVuZXJzLlxuICogZW1pdHRlci5ub3RpZnkoKTtcbiAqIC8vIE5vdGlmaWVzIGFsbCB0aGUgbGlzdGVuZXJzIHdpdGggc29tZSBkYXRhLlxuICogZW1pdHRlci5ub3RpZnkoeyBteUludDogNDIsIG15U3RyOiAnSGVsbG8gV29ybGQhJyB9KTtcbiAqIGBgYFxuICpcbiAqIEBjYXRlZ29yeSBldmVudFxuICovXG5leHBvcnQgY2xhc3MgRW1pdHRlcjxUIGV4dGVuZHMgdW5rbm93bltdID0gdm9pZFtdPiB7XG4gICAgLyoqXG4gICAgICogTGlzdCBvZiBsaXN0ZW5lcnMgdG8gdHJpZ2dlciB3aGVuIGBub3RpZnlgIGlzIGNhbGxlZC5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgX2xpc3RlbmVyczogTGlzdGVuZXI8VD5bXSA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogYHRydWVgIGlmIHRoZSBlbWl0dGVyIGlzIGN1cnJlbnRseSBub3RpZnlpbmcgbGlzdGVuZXJzLiBUaGlzXG4gICAgICogaXMgdXNlZCB0byBkZWZlciBhZGRpdGlvbiBhbmQgcmVtb3ZhbC5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBwcml2YXRlIF9ub3RpZnlpbmcgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIFBlbmRpbmcgYWRkaXRpb25zIC8gcmVtb3ZhbHMsIHBlcmZvcm1lZCBkdXJpbmcgYSBub3RpZmljYXRpb24uXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcHJpdmF0ZSByZWFkb25seSBfdHJhbnNhY3Rpb25zOiB7XG4gICAgICAgIHR5cGU6IFRyYW5zYWN0aW9uVHlwZTtcbiAgICAgICAgZGF0YTogTGlzdGVuZXI8VD4gfCBMaXN0ZW5lckNhbGxiYWNrPFQ+O1xuICAgIH1bXSA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXIgYSBuZXcgbGlzdGVuZXIgdG8gYmUgdHJpZ2dlcmVkIG9uIHtAbGluayBFbWl0dGVyLm5vdGlmeX0uXG4gICAgICpcbiAgICAgKiBCYXNpYyB1c2FnZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogZW1pdHRlci5hZGQoKGRhdGEpID0+IHtcbiAgICAgKiAgICAgY29uc29sZS5sb2coJ2V2ZW50IHJlY2VpdmVkIScpO1xuICAgICAqICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEF1dG9tYXRpY2FsbHkgcmVtb3ZlIHRoZSBsaXN0ZW5lciB3aGVuIGFuIGV2ZW50IGlzIHJlY2VpdmVkOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBlbWl0dGVyLmFkZCgoZGF0YSkgPT4ge1xuICAgICAqICAgICBjb25zb2xlLmxvZygnZXZlbnQgcmVjZWl2ZWQhJyk7XG4gICAgICogICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAqIH0sIHtvbmNlOiB0cnVlfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbGlzdGVuZXIgVGhlIGNhbGxiYWNrIHRvIHJlZ2lzdGVyLlxuICAgICAqIEBwYXJhbSBvcHRzIFRoZSBsaXN0ZW5lciBvcHRpb25zLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgcGxlYXNlIGhhdmUgYSBsb29rXG4gICAgICogICAgIGF0IHRoZSB7QGxpbmsgTGlzdGVuZXJPcHRpb25zfSBpbnRlcmZhY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZylcbiAgICAgKi9cbiAgICBhZGQobGlzdGVuZXI6IExpc3RlbmVyQ2FsbGJhY2s8VD4sIG9wdHM6IFBhcnRpYWw8TGlzdGVuZXJPcHRpb25zPiA9IHt9KTogdGhpcyB7XG4gICAgICAgIGNvbnN0IHtvbmNlID0gZmFsc2UsIGlkID0gdW5kZWZpbmVkfSA9IG9wdHM7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB7aWQsIG9uY2UsIGNhbGxiYWNrOiBsaXN0ZW5lcn07XG4gICAgICAgIGlmICh0aGlzLl9ub3RpZnlpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuX3RyYW5zYWN0aW9ucy5wdXNoKHt0eXBlOiBUcmFuc2FjdGlvblR5cGUuQWRkaXRpb24sIGRhdGF9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2xpc3RlbmVycy5wdXNoKGRhdGEpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBFbWl0dGVyLmFkZH0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbGlzdGVuZXJzIFRoZSBjYWxsYmFjayhzKSB0byByZWdpc3Rlci5cbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBFbWl0dGVyLmFkZH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBwdXNoKC4uLmxpc3RlbmVyczogTGlzdGVuZXJDYWxsYmFjazxUPltdKTogdGhpcyB7XG4gICAgICAgIGZvciAoY29uc3QgY2Igb2YgbGlzdGVuZXJzKSB0aGlzLmFkZChjYik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVyIGEgbmV3IGxpc3RlbmVyIHRvIGJlIHRyaWdnZXJlZCBvbiB7QGxpbmsgRW1pdHRlci5ub3RpZnl9LlxuICAgICAqXG4gICAgICogT25jZSBub3RpZmllZCwgdGhlIGxpc3RlbmVyIHdpbGwgYmUgYXV0b21hdGljYWxseSByZW1vdmVkLlxuICAgICAqXG4gICAgICogVGhlIG1ldGhvZCBpcyBlcXVpdmFsZW50IHRvIGNhbGxpbmcge0BsaW5rIEVtaXR0ZXIuYWRkfSB3aXRoOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBlbWl0dGVyLmFkZChsaXN0ZW5lciwge29uY2U6IHRydWV9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBsaXN0ZW5lciBUaGUgY2FsbGJhY2sgdG8gcmVnaXN0ZXIuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgb25jZShsaXN0ZW5lcjogTGlzdGVuZXJDYWxsYmFjazxUPikge1xuICAgICAgICByZXR1cm4gdGhpcy5hZGQobGlzdGVuZXIsIHtvbmNlOiB0cnVlfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEgcmVnaXN0ZXJlZCBsaXN0ZW5lci5cbiAgICAgKlxuICAgICAqIFVzYWdlIHdpdGggYSBjYWxsYmFjazpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgbGlzdGVuZXIgPSAoZGF0YSkgPT4gY29uc29sZS5sb2coZGF0YSk7XG4gICAgICogZW1pdHRlci5hZGQobGlzdGVuZXIpO1xuICAgICAqXG4gICAgICogLy8gUmVtb3ZlIHVzaW5nIHRoZSBjYWxsYmFjayByZWZlcmVuY2U6XG4gICAgICogZW1pdHRlci5yZW1vdmUobGlzdGVuZXIpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogVXNhZ2Ugd2l0aCBhbiBpZDpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogZW1pdHRlci5hZGQoKGRhdGEpID0+IGNvbnNvbGUubG9nKGRhdGEpLCB7aWQ6ICdteS1jYWxsYmFjayd9KTtcbiAgICAgKlxuICAgICAqIC8vIFJlbW92ZSB1c2luZyB0aGUgaWQ6XG4gICAgICogZW1pdHRlci5yZW1vdmUoJ215LWNhbGxiYWNrJyk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBVc2luZyBpZGVudGlmaWVycywgeW91IHdpbGwgbmVlZCB0byBlbnN1cmUgeW91ciB2YWx1ZSBpcyB1bmlxdWUgdG8gYXZvaWRcbiAgICAgKiByZW1vdmluZyBsaXN0ZW5lcnMgZnJvbSBvdGhlciBsaWJyYXJpZXMsIGUuZy4sOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBlbWl0dGVyLmFkZCgoZGF0YSkgPT4gY29uc29sZS5sb2coZGF0YSksIHtpZDogJ25vbi11bmlxdWUnfSk7XG4gICAgICogLy8gVGhpcyBzZWNvbmQgbGlzdGVuZXIgY291bGQgYmUgYWRkZWQgYnkgYSB0aGlyZC1wYXJ0eSBsaWJyYXJ5LlxuICAgICAqIGVtaXR0ZXIuYWRkKChkYXRhKSA9PiBjb25zb2xlLmxvZygnSGVsbG8gRnJvbSBMaWJyYXJ5IScpLCB7aWQ6ICdub24tdW5pcXVlJ30pO1xuICAgICAqXG4gICAgICogLy8gSG8gU25hcCEgVGhpcyBhbHNvIHJlbW92ZWQgdGhlIGxpYnJhcnkgbGlzdGVuZXIhXG4gICAgICogZW1pdHRlci5yZW1vdmUoJ25vbi11bmlxdWUnKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFRoZSBpZGVudGlmaWVyIGNhbiBiZSBhbnkgdHlwZS4gSG93ZXZlciwgcmVtZW1iZXIgdGhhdCB0aGUgY29tcGFyaXNvbiB3aWxsIGJlXG4gICAgICogYnktdmFsdWUgZm9yIHByaW1pdGl2ZSB0eXBlcyAoc3RyaW5nLCBudW1iZXIpLCBidXQgYnkgcmVmZXJlbmNlIGZvciBvYmplY3RzLlxuICAgICAqXG4gICAgICogRXhhbXBsZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogZW1pdHRlci5hZGQoKCkgPT4gY29uc29sZS5sb2coJ0hlbGxvJyksIHtpZDoge3ZhbHVlOiA0Mn19KTtcbiAgICAgKiBlbWl0dGVyLmFkZCgoKSA9PiBjb25zb2xlLmxvZygnV29ybGQhJyksIHtpZDoge3ZhbHVlOiA0Mn19KTtcbiAgICAgKiBlbWl0dGVyLnJlbW92ZSh7dmFsdWU6IDQyfSk7IC8vIE5vbmUgb2YgdGhlIGFib3ZlIGxpc3RlbmVycyBtYXRjaCFcbiAgICAgKiBlbWl0dGVyLm5vdGlmeSgpOyAvLyBQcmludHMgJ0hlbGxvJyBhbmQgJ1dvcmxkIScuXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBIZXJlLCBib3RoIGVtaXR0ZXJzIGhhdmUgaWQgYHt2YWx1ZTogNDJ9YCwgYnV0IHRoZSBjb21wYXJpc29uIGlzIG1hZGUgYnkgcmVmZXJlbmNlLiBUaHVzLFxuICAgICAqIHRoZSBgcmVtb3ZlKClgIGNhbGwgaGFzIG5vIGVmZmVjdC4gV2UgY2FuIG1ha2UgaXQgd29yayBieSBkb2luZzpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgaWQgPSB7dmFsdWU6IDQyfTtcbiAgICAgKiBlbWl0dGVyLmFkZCgoKSA9PiBjb25zb2xlLmxvZygnSGVsbG8nKSwge2lkfSk7XG4gICAgICogZW1pdHRlci5hZGQoKCkgPT4gY29uc29sZS5sb2coJ1dvcmxkIScpLCB7aWR9KTtcbiAgICAgKiBlbWl0dGVyLnJlbW92ZShpZCk7IC8vIFNhbWUgcmVmZXJlbmNlLCBpdCB3b3JrcyFcbiAgICAgKiBlbWl0dGVyLm5vdGlmeSgpOyAvLyBEb2Vzbid0IHByaW50LlxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIGxpc3RlbmVyIFRoZSByZWdpc3RlcmVkIGNhbGxiYWNrIG9yIGEgdmFsdWUgcmVwcmVzZW50aW5nIHRoZSBgaWRgLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpXG4gICAgICovXG4gICAgcmVtb3ZlKGxpc3RlbmVyOiBMaXN0ZW5lckNhbGxiYWNrPFQ+IHwgYW55KTogdGhpcyB7XG4gICAgICAgIGlmICh0aGlzLl9ub3RpZnlpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuX3RyYW5zYWN0aW9ucy5wdXNoKHt0eXBlOiBUcmFuc2FjdGlvblR5cGUuUmVtb3ZhbCwgZGF0YTogbGlzdGVuZXJ9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gbGlzdGVuZXJzW2ldO1xuICAgICAgICAgICAgaWYgKHRhcmdldC5jYWxsYmFjayA9PT0gbGlzdGVuZXIgfHwgdGFyZ2V0LmlkID09PSBsaXN0ZW5lcikge1xuICAgICAgICAgICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaS0tLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayB3aGV0aGVyIHRoZSBsaXN0ZW5lciBpcyByZWdpc3RlcmVkLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBtZXRob2QgcGVyZm9ybXMgYSBsaW5lYXIgc2VhcmNoLlxuICAgICAqXG4gICAgICogKiBAbm90ZSBEb2Vzbid0IGFjY291bnQgZm9yIHBlbmRpbmcgbGlzdGVuZXJzLCBpLmUuLFxuICAgICAqIGxpc3RlbmVycyBhZGRlZCAvIHJlbW92ZWQgZHVyaW5nIGEgbm90aWZpY2F0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGxpc3RlbmVyIFRoZSByZWdpc3RlcmVkIGNhbGxiYWNrIG9yIGEgdmFsdWUgcmVwcmVzZW50aW5nIHRoZSBgaWRgLlxuICAgICAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgaGFuZGxlIGlzIGZvdW5kLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBoYXMobGlzdGVuZXI6IExpc3RlbmVyQ2FsbGJhY2s8VD4gfCBhbnkpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gbGlzdGVuZXJzW2ldO1xuICAgICAgICAgICAgaWYgKHRhcmdldC5jYWxsYmFjayA9PT0gbGlzdGVuZXIgfHwgdGFyZ2V0LmlkID09PSBsaXN0ZW5lcikgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE5vdGlmeSBsaXN0ZW5lcnMgd2l0aCB0aGUgZ2l2ZW4gZGF0YSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIG1ldGhvZCBlbnN1cmVzIGFsbCBsaXN0ZW5lcnMgYXJlIGNhbGxlZCBldmVuIGlmXG4gICAgICogYW4gZXhjZXB0aW9uIGlzIHRocm93bi4gRm9yIChwb3NzaWJseSkgZmFzdGVyIG5vdGlmaWNhdGlvbixcbiAgICAgKiBwbGVhc2UgdXNlIHtAbGluayBFbWl0dGVyLm5vdGlmeVVuc2FmZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0YSBUaGUgZGF0YSB0byBwYXNzIHRvIGxpc3RlbmVyIHdoZW4gaW52b2tlZC5cbiAgICAgKi9cbiAgICBub3RpZnkoLi4uZGF0YTogVCk6IHZvaWQge1xuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG5cbiAgICAgICAgdGhpcy5fbm90aWZ5aW5nID0gdHJ1ZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3RlbmVyID0gbGlzdGVuZXJzW2ldO1xuICAgICAgICAgICAgaWYgKGxpc3RlbmVyLm9uY2UpIGxpc3RlbmVycy5zcGxpY2UoaS0tLCAxKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXIuY2FsbGJhY2soLi4uZGF0YSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9ub3RpZnlpbmcgPSBmYWxzZTtcblxuICAgICAgICAvKiBQcm9jZXNzIGRlZmVycmVkIGFkZGl0aW9ucyAmIHJlbW92YWxzICovXG4gICAgICAgIHRoaXMuX2ZsdXNoVHJhbnNhY3Rpb25zKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTm90aWZ5IGxpc3RlbmVycyB3aXRoIHRoZSBnaXZlbiBkYXRhIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBub3RlIEJlY2F1c2UgdGhpcyBtZXRob2QgZG9lc24ndCBjYXRjaCBleGNlcHRpb25zLCBzb21lIGxpc3RlbmVyc1xuICAgICAqIHdpbGwgYmUgc2tpcHBlZCBvbiBhIHRocm93LiBQbGVhc2UgdXNlIHtAbGluayBFbWl0dGVyLm5vdGlmeX0gZm9yIHNhZmVcbiAgICAgKiBub3RpZmljYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0YSBUaGUgZGF0YSB0byBwYXNzIHRvIGxpc3RlbmVyIHdoZW4gaW52b2tlZC5cbiAgICAgKi9cbiAgICBub3RpZnlVbnNhZmUoLi4uZGF0YTogVCk6IHZvaWQge1xuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3RlbmVyID0gbGlzdGVuZXJzW2ldO1xuICAgICAgICAgICAgaWYgKGxpc3RlbmVyLm9uY2UpIGxpc3RlbmVycy5zcGxpY2UoaS0tLCAxKTtcbiAgICAgICAgICAgIGxpc3RlbmVyLmNhbGxiYWNrKC4uLmRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogUHJvY2VzcyBkZWZlcnJlZCBhZGRpdGlvbnMgJiByZW1vdmFscyAqL1xuICAgICAgICB0aGlzLl9mbHVzaFRyYW5zYWN0aW9ucygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybiBhIHByb21pc2UgdGhhdCB3aWxsIHJlc29sdmUgb24gdGhlIG5leHQgZXZlbnQuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGUgcHJvbWlzZSBtaWdodCBuZXZlciByZXNvbHZlIGlmIG5vIGV2ZW50IGlzIHNlbnQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBkYXRhIHBhc3NlZCB0b1xuICAgICAqICAgICB7QGxpbmsgRW1pdHRlci5ub3RpZnl9LlxuICAgICAqL1xuICAgIHByb21pc2UoKTogUHJvbWlzZTxUPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzLCBfKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uY2UoKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcyhhcmdzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXMoYXJnc1swXSBhcyBUKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTnVtYmVyIG9mIGxpc3RlbmVycy5cbiAgICAgKlxuICAgICAqIEBub3RlIERvZXNuJ3QgYWNjb3VudCBmb3IgcGVuZGluZyBsaXN0ZW5lcnMsIGkuZS4sXG4gICAgICogbGlzdGVuZXJzIGFkZGVkIC8gcmVtb3ZlZCBkdXJpbmcgYSBub3RpZmljYXRpb24uXG4gICAgICovXG4gICAgZ2V0IGxpc3RlbmVyQ291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9saXN0ZW5lcnMubGVuZ3RoO1xuICAgIH1cblxuICAgIC8qKiBgdHJ1ZWAgaWYgaXQgaGFzIG5vIGxpc3RlbmVycywgYGZhbHNlYCBvdGhlcndpc2UuICovXG4gICAgZ2V0IGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyQ291bnQgPT09IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmx1c2ggYWxsIHBlbmRpbmcgdHJhbnNhY3Rpb25zLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHByaXZhdGUgX2ZsdXNoVHJhbnNhY3Rpb25zKCkge1xuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG4gICAgICAgIGZvciAoY29uc3QgdHJhbnNhY3Rpb24gb2YgdGhpcy5fdHJhbnNhY3Rpb25zKSB7XG4gICAgICAgICAgICBpZiAodHJhbnNhY3Rpb24udHlwZSA9PT0gVHJhbnNhY3Rpb25UeXBlLkFkZGl0aW9uKSB7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXJzLnB1c2godHJhbnNhY3Rpb24uZGF0YSBhcyBMaXN0ZW5lcjxUPik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKHRyYW5zYWN0aW9uLmRhdGEgYXMgTGlzdGVuZXJDYWxsYmFjazxUPik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdHJhbnNhY3Rpb25zLmxlbmd0aCA9IDA7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlZ2lzdHJhdGlvbiBvcHRpb25zIGZvciBhIGxpc3RlbmVyIGluIGFuIHtAbGluayBSZXRhaW5FbWl0dGVyfS5cbiAqXG4gKiBUaG9zZSBvcHRpb25zIGV4dGVuZCB7QGxpbmsgTGlzdGVuZXJPcHRpb25zfS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZXRhaW5MaXN0ZW5lck9wdGlvbnMgZXh0ZW5kcyBMaXN0ZW5lck9wdGlvbnMge1xuICAgIC8qKlxuICAgICAqIElmIGB0cnVlYCwgZGlyZWN0bHkgcmVzb2x2ZXMgaWYgdGhlIGVtaXR0ZXIgcmV0YWlucyBhIHZhbHVlLiBJZiBgZmFsc2VgLFxuICAgICAqIHRoZSBsaXN0ZW5lciBpc24ndCBpbnZva2VkIHVudGlsIHRoZSBuZXh0IHtAbGluayBFbWl0dGVyLm5vdGlmeX0uXG4gICAgICpcbiAgICAgKiBEZWZhdWx0cyB0byBgdHJ1ZWAuXG4gICAgICovXG4gICAgaW1tZWRpYXRlOiBib29sZWFuO1xufVxuXG4vKiBEdW1teSB2YWx1ZSB1c2VkIHdpdGggUmV0YWluRW1pdHRlci4gKi9cbmNvbnN0IFJldGFpbkVtaXR0ZXJVbmRlZmluZWQ6IFJlY29yZDxhbnksIHVua25vd24+ID0ge307XG5cbi8qKlxuICogRXZlbnQgZW1pdHRlciB0aGF0IHJldGFpbnMgZXZlbnQgZGF0YSB3aGVuIG5vdGlmaWVkLlxuICpcbiAqIEFmdGVyIGEgbm90aWZpY2F0aW9uIGhhcHBlbnMsIHN1YnNlcXVlbnQgY2FsbHMgdG8ge0BsaW5rIFJldGFpbkVtaXR0ZXIuYWRkfSB3aWxsIGdldFxuICogYXV0b21hdGljYWxseSBub3RpZmllZC5cbiAqXG4gKiBZb3UgY2FuIHVzZSBhbm90aGVyIGVtaXR0ZXIgaW4gb3JkZXIgdG8gY2FuY2VsIHRoZSBsYXN0IHJldGFpbmVkIGV2ZW50OlxuICpcbiAqIGBgYGpzXG4gKiBpbXBvcnQge0VtaXR0ZXIsIFJldGFpbmVkRW1pdHRlcn0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbiAqXG4gKiBjb25zdCBvblN0YXJ0ID0gbmV3IFJldGFpbmVkRW1pdHRlcigpO1xuICpcbiAqIG9uU3RhcnQubm90aWZ5KDQyKTtcbiAqIG9uU3RhcnQuYWRkKChkYXRhKSA9PiBjb25zb2xlLmxvZyhkYXRhKSkgLy8gUHJpbnRzICc0MicuXG4gKiBgYGBcbiAqXG4gKiBZb3UgY2FuIHJlc2V0IHRoZSBzdGF0ZSBvZiB0aGUgZW1pdHRlciwgaS5lLiwgbWFraW5nIGl0IGZvcmdldCBhYm91dCB0aGVcbiAqIGxhc3QgZXZlbnQgdXNpbmc6XG4gKlxuICogYGBganNcbiAqIGltcG9ydCB7RW1pdHRlciwgUmV0YWluZWRFbWl0dGVyfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuICpcbiAqIGNvbnN0IG9uU3RhcnQgPSBuZXcgUmV0YWluZWRFbWl0dGVyKCk7XG4gKiBvblN0YXJ0Lm5vdGlmeSg0Mik7XG4gKiBvblN0YXJ0LmFkZCgoZGF0YSkgPT4gY29uc29sZS5sb2coZGF0YSkpIC8vIFByaW50cyAnNDInLlxuICpcbiAqIC8vIFJlc2V0IHRoZSBzdGF0ZSBvZiB0aGUgZW1pdHRlci5cbiAqIG9uU3RhcnQucmVzZXQoKTtcbiAqIG9uU3RhcnQuYWRkKChkYXRhKSA9PiBjb25zb2xlLmxvZyhkYXRhKSkgLy8gRG9lc24ndCBwcmludCBhbnl0aGluZy5cbiAqIGBgYFxuICpcbiAqIEZvciBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGVtaXR0ZXJzLCBwbGVhc2UgaGF2ZSBhIGxvb2sgYXQgdGhlIGJhc2Uge0BsaW5rIEVtaXR0ZXJ9IGNsYXNzLlxuICpcbiAqIEBjYXRlZ29yeSBldmVudFxuICovXG5leHBvcnQgY2xhc3MgUmV0YWluRW1pdHRlcjxUIGV4dGVuZHMgdW5rbm93bltdID0gdm9pZFtdPiBleHRlbmRzIEVtaXR0ZXI8VD4ge1xuICAgIC8qKiBQcmUtcmVzb2x2ZWQgZGF0YS4gQGhpZGRlbiAqL1xuICAgIHByb3RlY3RlZCBfZXZlbnQ6IFQgfCB0eXBlb2YgUmV0YWluRW1pdHRlclVuZGVmaW5lZCA9IFJldGFpbkVtaXR0ZXJVbmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBFbWl0dGVyIHRhcmdldCB1c2VkIHRvIHJlc2V0IHRoZSBzdGF0ZSBvZiB0aGlzIGVtaXR0ZXIuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IF9yZXNldDogRW1pdHRlcjxhbnk+IHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqIEBvdmVycmlkZSAqL1xuICAgIGFkZChsaXN0ZW5lcjogTGlzdGVuZXJDYWxsYmFjazxUPiwgb3B0cz86IFBhcnRpYWw8UmV0YWluTGlzdGVuZXJPcHRpb25zPik6IHRoaXMge1xuICAgICAgICBjb25zdCBpbW1lZGlhdGUgPSBvcHRzPy5pbW1lZGlhdGUgPz8gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuX2V2ZW50ICE9PSBSZXRhaW5FbWl0dGVyVW5kZWZpbmVkICYmIGltbWVkaWF0ZSkge1xuICAgICAgICAgICAgbGlzdGVuZXIoLi4uKHRoaXMuX2V2ZW50IGFzIFQpKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlci5hZGQobGlzdGVuZXIsIG9wdHMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSBsaXN0ZW5lciBUaGUgY2FsbGJhY2sgdG8gcmVnaXN0ZXIuXG4gICAgICogQHBhcmFtIGltbWVkaWF0ZSBJZiBgdHJ1ZWAsIGRpcmVjdGx5IHJlc29sdmVzIGlmIHRoZSBlbWl0dGVyIHJldGFpbnMgYSB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICBvbmNlKGxpc3RlbmVyOiBMaXN0ZW5lckNhbGxiYWNrPFQ+LCBpbW1lZGlhdGU/OiBib29sZWFuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFkZChsaXN0ZW5lciwge29uY2U6IHRydWUsIGltbWVkaWF0ZX0pO1xuICAgIH1cblxuICAgIC8qKiBAb3ZlcnJpZGUgKi9cbiAgICBub3RpZnkoLi4uZGF0YTogVCk6IHZvaWQge1xuICAgICAgICB0aGlzLl9ldmVudCA9IGRhdGE7XG4gICAgICAgIHN1cGVyLm5vdGlmeSguLi5kYXRhKTtcbiAgICB9XG5cbiAgICAvKiogQG92ZXJyaWRlICovXG4gICAgbm90aWZ5VW5zYWZlKC4uLmRhdGE6IFQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fZXZlbnQgPSBkYXRhO1xuICAgICAgICBzdXBlci5ub3RpZnlVbnNhZmUoLi4uZGF0YSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzZXQgdGhlIHN0YXRlIG9mIHRoZSBlbWl0dGVyLlxuICAgICAqXG4gICAgICogRnVydGhlciBjYWxsIHRvIHtAbGluayBFbWl0dGVyLmFkZH0gd2lsbCBub3QgYXV0b21hdGljYWxseSByZXNvbHZlLFxuICAgICAqIHVudGlsIGEgbmV3IGNhbGwgdG8ge0BsaW5rIEVtaXR0ZXIubm90aWZ5fSBpcyBwZXJmb3JtZWQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZylcbiAgICAgKi9cbiAgICByZXNldCgpOiB0aGlzIHtcbiAgICAgICAgdGhpcy5fZXZlbnQgPSBSZXRhaW5FbWl0dGVyVW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKiogUmV0dXJucyB0aGUgcmV0YWluZWQgZGF0YSwgb3IgYHVuZGVmaW5lZGAgaWYgbm8gZGF0YSB3YXMgcmV0YWluZWQuICovXG4gICAgZ2V0IGRhdGEoKTogVCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzRGF0YVJldGFpbmVkID8gdGhpcy5fZXZlbnQgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLyoqIGB0cnVlYCBpZiBkYXRhIGlzIHJldGFpbmVkIGZyb20gdGhlIGxhc3QgZXZlbnQsIGBmYWxzZWAgb3RoZXJ3aXNlLiAqL1xuICAgIGdldCBpc0RhdGFSZXRhaW5lZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2V2ZW50ICE9PSBSZXRhaW5FbWl0dGVyVW5kZWZpbmVkO1xuICAgIH1cbn1cbiIsICJpbXBvcnQge1dvbmRlcmxhbmRFbmdpbmV9IGZyb20gJy4uL2VuZ2luZS5qcyc7XG5pbXBvcnQge1ByZWZhYn0gZnJvbSAnLi4vcHJlZmFiLmpzJztcbmltcG9ydCB7U2NlbmV9IGZyb20gJy4uL3NjZW5lLmpzJztcbmltcG9ydCB7Rmlyc3RDb25zdHJ1Y3RvclBhcmFtfSBmcm9tICcuLi90eXBlcy5qcyc7XG5cbi8qKiBJbnRlcmZhY2UgZm9yIGEgcmVzb3VyY2UgY2xhc3MgKi9cbnR5cGUgUmVzb3VyY2VDb25zdHJ1Y3RvcjxUIGV4dGVuZHMgU2NlbmVSZXNvdXJjZSB8IFJlc291cmNlPiA9IHtcbiAgICBuZXcgKGhvc3Q6IEZpcnN0Q29uc3RydWN0b3JQYXJhbTxUPiwgaW5kZXg6IG51bWJlcik6IFQ7XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhIHByb3h5IHRocm93aW5nIGRlc3Ryb3llZCBlcnJvcnMgdXBvbiBhY2Nlc3MuXG4gKlxuICogQHBhcmFtIHR5cGUgVGhlIHR5cGUgdG8gZGlzcGxheSB1cG9uIGVycm9yXG4gKiBAcmV0dXJucyBUaGUgcHJveHkgaW5zdGFuY2VcbiAqL1xuZnVuY3Rpb24gY3JlYXRlRGVzdHJveWVkUHJveHk8VCBleHRlbmRzIFNjZW5lUmVzb3VyY2UgfCBSZXNvdXJjZT4oXG4gICAgaG9zdDogRmlyc3RDb25zdHJ1Y3RvclBhcmFtPFQ+LFxuICAgIHR5cGU6IFJlc291cmNlQ29uc3RydWN0b3I8VD5cbikge1xuICAgIHJldHVybiBuZXcgUHJveHkoXG4gICAgICAgIHt9LFxuICAgICAgICB7XG4gICAgICAgICAgICBnZXQoXywgcGFyYW06IHN0cmluZykge1xuICAgICAgICAgICAgICAgIGlmIChwYXJhbSA9PT0gJ2lzRGVzdHJveWVkJykgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgICAgICBgQ2Fubm90IHJlYWQgJyR7cGFyYW19JyBvZiBkZXN0cm95ZWQgJyR7dHlwZS5uYW1lfScgcmVzb3VyY2UgZnJvbSAke2hvc3R9YFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0KF8sIHBhcmFtOiBzdHJpbmcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIGBDYW5ub3Qgd3JpdGUgJyR7cGFyYW19JyBvZiBkZXN0cm95ZWQgJyR7dHlwZS5uYW1lfScgcmVzb3VyY2UgZnJvbSAke2hvc3R9YFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgKTtcbn1cblxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBlbmdpbmUgcmVzb3VyY2VzLCBzdWNoIGFzOlxuICogLSB7QGxpbmsgVGV4dHVyZX1cbiAqIC0ge0BsaW5rIE1lc2h9XG4gKiAtIHtAbGluayBNYXRlcmlhbH1cbiAqXG4gKiBAc2luY2UgMS4yLjBcbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFJlc291cmNlIHtcbiAgICAvKiogUmVsYXRpdmUgaW5kZXggaW4gdGhlIGhvc3QuIEBoaWRkZW4gKi9cbiAgICByZWFkb25seSBfaW5kZXg6IG51bWJlciA9IC0xO1xuICAgIC8qKiBGb3IgY29tcGF0aWJpbGl0eSB3aXRoIFNjZW5lUmVzb3VyY2UuIEBoaWRkZW4gKi9cbiAgICByZWFkb25seSBfaWQ6IG51bWJlciA9IC0xO1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZW5naW5lOiBXb25kZXJsYW5kRW5naW5lO1xuXG4gICAgY29uc3RydWN0b3IoZW5naW5lOiBXb25kZXJsYW5kRW5naW5lLCBpbmRleDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZSA9IGVuZ2luZTtcbiAgICAgICAgdGhpcy5faW5kZXggPSBpbmRleDtcbiAgICAgICAgdGhpcy5faWQgPSBpbmRleDtcbiAgICB9XG5cbiAgICAvKiogSG9zdGluZyBlbmdpbmUgaW5zdGFuY2UuICovXG4gICAgZ2V0IGVuZ2luZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZTtcbiAgICB9XG5cbiAgICAvKiogSW5kZXggb2YgdGhpcyByZXNvdXJjZSBpbiB0aGUge0BsaW5rIFNjZW5lfSdzIG1hbmFnZXIuICovXG4gICAgZ2V0IGluZGV4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5kZXg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGVxdWFsaXR5IGJ5IGNvbXBhcmluZyBpZHMgYW5kICoqbm90KiogdGhlIEphdmFTY3JpcHQgcmVmZXJlbmNlLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIEphdmFTY3JpcHQgcmVmZXJlbmNlIGNvbXBhcmlzb24gaW5zdGVhZDpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgbWVzaEEgPSBlbmdpbmUubWVzaGVzLmNyZWF0ZSh7dmVydGV4Q291bnQ6IDF9KTtcbiAgICAgKiBjb25zdCBtZXNoQiA9IGVuZ2luZS5tZXNoZXMuY3JlYXRlKHt2ZXJ0ZXhDb3VudDogMX0pO1xuICAgICAqIGNvbnN0IG1lc2hDID0gbWVzaEI7XG4gICAgICogY29uc29sZS5sb2cobWVzaEEgPT09IG1lc2hCKTsgLy8gZmFsc2VcbiAgICAgKiBjb25zb2xlLmxvZyhtZXNoQSA9PT0gbWVzaEEpOyAvLyB0cnVlXG4gICAgICogY29uc29sZS5sb2cobWVzaEIgPT09IG1lc2hDKTsgLy8gdHJ1ZVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGVxdWFscyhvdGhlcjogdGhpcyB8IHVuZGVmaW5lZCB8IG51bGwpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKCFvdGhlcikgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcy5faW5kZXggPT09IG90aGVyLl9pbmRleDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBgdHJ1ZWAgaWYgdGhlIG9iamVjdCBpcyBkZXN0cm95ZWQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqXG4gICAgICogSWYge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUuZXJhc2VQcm90b3R5cGVPbkRlc3Ryb3l9IGlzIGB0cnVlYCxcbiAgICAgKiByZWFkaW5nIGEgY2xhc3MgYXR0cmlidXRlIC8gbWV0aG9kIHdpbGwgdGhyb3cuXG4gICAgICovXG4gICAgZ2V0IGlzRGVzdHJveWVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5kZXggPD0gMDtcbiAgICB9XG59XG5cbi8qKlxuICogQmFzZSBjbGFzcyBmb3Igc2NlbmUgcmVzb3VyY2VzLCBzdWNoIGFzOlxuICogICogLSB7QGxpbmsgVGV4dHVyZX1cbiAqIC0ge0BsaW5rIE1lc2h9XG4gKiAtIHtAbGluayBNYXRlcmlhbH1cbiAqIC0ge0BsaW5rIFNraW59XG4gKiAtIHtAbGluayBBbmltYXRpb259XG4gKlxuICogQHNpbmNlIDEuMi4wXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTY2VuZVJlc291cmNlIHtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIHN0YXRpYyBfcGFjayhzY2VuZTogbnVtYmVyLCBpbmRleDogbnVtYmVyKSB7XG4gICAgICAgIHJldHVybiAoc2NlbmUgPDwgMjIpIHwgaW5kZXg7XG4gICAgfVxuXG4gICAgLyoqIFJlbGF0aXZlIGluZGV4IGluIHRoZSBob3N0LiBAaGlkZGVuICovXG4gICAgcmVhZG9ubHkgX2luZGV4OiBudW1iZXIgPSAtMTtcbiAgICAvKiogRm9yIGNvbXBhdGliaWxpdHkgd2l0aCBTY2VuZVJlc291cmNlLiBAaGlkZGVuICovXG4gICAgcmVhZG9ubHkgX2lkOiBudW1iZXIgPSAtMTtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIHByb3RlY3RlZCByZWFkb25seSBfc2NlbmU6IFByZWZhYjtcblxuICAgIGNvbnN0cnVjdG9yKHNjZW5lOiBQcmVmYWIsIGluZGV4OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5fc2NlbmUgPSBzY2VuZTtcbiAgICAgICAgdGhpcy5faW5kZXggPSBpbmRleDtcbiAgICAgICAgdGhpcy5faWQgPSBTY2VuZVJlc291cmNlLl9wYWNrKHNjZW5lLl9pbmRleCwgaW5kZXgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBlcXVhbGl0eSBieSBjb21wYXJpbmcgaWRzIGFuZCAqKm5vdCoqIHRoZSBKYXZhU2NyaXB0IHJlZmVyZW5jZS5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSBKYXZhU2NyaXB0IHJlZmVyZW5jZSBjb21wYXJpc29uIGluc3RlYWQ6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IG1lc2hBID0gZW5naW5lLm1lc2hlcy5jcmVhdGUoe3ZlcnRleENvdW50OiAxfSk7XG4gICAgICogY29uc3QgbWVzaEIgPSBlbmdpbmUubWVzaGVzLmNyZWF0ZSh7dmVydGV4Q291bnQ6IDF9KTtcbiAgICAgKiBjb25zdCBtZXNoQyA9IG1lc2hCO1xuICAgICAqIGNvbnNvbGUubG9nKG1lc2hBID09PSBtZXNoQik7IC8vIGZhbHNlXG4gICAgICogY29uc29sZS5sb2cobWVzaEEgPT09IG1lc2hBKTsgLy8gdHJ1ZVxuICAgICAqIGNvbnNvbGUubG9nKG1lc2hCID09PSBtZXNoQyk7IC8vIHRydWVcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBlcXVhbHMob3RoZXI6IHRoaXMgfCB1bmRlZmluZWQgfCBudWxsKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghb3RoZXIpIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lkID09PSBvdGhlci5faWQ7XG4gICAgfVxuXG4gICAgLyoqIEhvc3RpbmcgaW5zdGFuY2UuICovXG4gICAgZ2V0IHNjZW5lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2NlbmU7XG4gICAgfVxuXG4gICAgLyoqIEhvc3RpbmcgZW5naW5lIGluc3RhbmNlLiAqL1xuICAgIGdldCBlbmdpbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zY2VuZS5lbmdpbmU7XG4gICAgfVxuXG4gICAgLyoqIEluZGV4IG9mIHRoaXMgcmVzb3VyY2UgaW4gdGhlIHtAbGluayBTY2VuZX0ncyBtYW5hZ2VyLiAqL1xuICAgIGdldCBpbmRleCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2luZGV4O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGB0cnVlYCBpZiB0aGUgb2JqZWN0IGlzIGRlc3Ryb3llZCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBJZiB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5lcmFzZVByb3RvdHlwZU9uRGVzdHJveX0gaXMgYHRydWVgLFxuICAgICAqIHJlYWRpbmcgYSBjbGFzcyBhdHRyaWJ1dGUgLyBtZXRob2Qgd2lsbCB0aHJvdy5cbiAgICAgKi9cbiAgICBnZXQgaXNEZXN0cm95ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pZCA8PSAwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBNYW5hZ2VyIGZvciByZXNvdXJjZXMuXG4gKlxuICogUmVzb3VyY2VzIGFyZSBhY2Nlc3NlZCB2aWEgdGhlIGVuZ2luZSB0aGV5IGJlbG9uZyB0by5cbiAqXG4gKiBAc2VlIHtAbGluayBXb25kZXJsYW5kRW5naW5lLnRleHR1cmVzfSwge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUubWVzaGVzfSxcbiAqIGFuZCB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5tYXRlcmlhbHN9LlxuICpcbiAqIEBzaW5jZSAxLjIuMFxuICovXG5leHBvcnQgY2xhc3MgUmVzb3VyY2VNYW5hZ2VyPFQgZXh0ZW5kcyBTY2VuZVJlc291cmNlIHwgUmVzb3VyY2U+IHtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIHByb3RlY3RlZCByZWFkb25seSBfaG9zdDogRmlyc3RDb25zdHJ1Y3RvclBhcmFtPFQ+O1xuICAgIC8qKiBDYWNoZS4gQGhpZGRlbiAqL1xuICAgIHByb3RlY3RlZCByZWFkb25seSBfY2FjaGU6IChUIHwgbnVsbClbXSA9IFtdO1xuXG4gICAgLyoqIFJlc291cmNlIGNsYXNzLiBAaGlkZGVuICovXG4gICAgcHJpdmF0ZSByZWFkb25seSBfdGVtcGxhdGU6IFJlc291cmNlQ29uc3RydWN0b3I8VD47XG5cbiAgICAvKiogRGVzdHJ1Y3RvciBwcm94eSwgdXNlZCBpZiB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5lcmFzZVByb3RvdHlwZU9uRGVzdHJveX0gaXMgYHRydWVgLiBAaGlkZGVuICovXG4gICAgcHJpdmF0ZSBfZGVzdHJ1Y3Rvcjoge30gfCBudWxsID0gbnVsbDtcblxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2VuZ2luZTogV29uZGVybGFuZEVuZ2luZTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBtYW5hZ2VyXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaG9zdCBUaGUgaG9zdCBjb250YWluaW5nIHRoZSBtYW5hZ2VkIHJlc291cmNlcy5cbiAgICAgKiBAcGFyYW0gQ2xhc3MgVGhlIGNsYXNzIHRvIGluc3RhbnRpYXRlIHdoZW4gd3JhcHBpbmcgYW4gaW5kZXguXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoaG9zdDogRmlyc3RDb25zdHJ1Y3RvclBhcmFtPFQ+LCBDbGFzczogUmVzb3VyY2VDb25zdHJ1Y3RvcjxUPikge1xuICAgICAgICB0aGlzLl9ob3N0ID0gaG9zdDtcbiAgICAgICAgdGhpcy5fdGVtcGxhdGUgPSBDbGFzcztcbiAgICAgICAgdGhpcy5fZW5naW5lID0gKGhvc3QgYXMgUHJlZmFiKS5lbmdpbmUgPz8gaG9zdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXcmFwIHRoZSBpbmRleCBpbnRvIGEgcmVzb3VyY2UgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGUgaW5kZXggaXMgcmVsYXRpdmUgdG8gdGhlIGhvc3QsIGkuZS4sIGRvZXNuJ3QgcGFjayB0aGUgaG9zdCBpbmRleCAoaWYgYW55KS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbmRleCBUaGUgcmVzb3VyY2UgaW5kZXguXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICB3cmFwKGluZGV4OiBudW1iZXIpIHtcbiAgICAgICAgaWYgKGluZGV4IDw9IDApIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCB0ZXh0dXJlID1cbiAgICAgICAgICAgIHRoaXMuX2NhY2hlW2luZGV4XSA/P1xuICAgICAgICAgICAgKHRoaXMuX2NhY2hlW2luZGV4XSA9IG5ldyB0aGlzLl90ZW1wbGF0ZSh0aGlzLl9ob3N0LCBpbmRleCkpO1xuICAgICAgICByZXR1cm4gdGV4dHVyZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSB0aGUgcmVzb3VyY2UgYXQgdGhlIGdpdmVuIGluZGV4LlxuICAgICAqXG4gICAgICogQG5vdGUgVGhlIGluZGV4IGlzIHJlbGF0aXZlIHRvIHRoZSBob3N0LCBpLmUuLCBkb2Vzbid0IHBhY2sgdGhlIGhvc3QgaW5kZXguXG4gICAgICovXG4gICAgZ2V0KGluZGV4OiBudW1iZXIpOiBUIHwgbnVsbCB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZVtpbmRleF0gPz8gbnVsbDtcbiAgICB9XG5cbiAgICAvKiogTnVtYmVyIG9mIHRleHR1cmVzIGFsbG9jYXRlZCBpbiB0aGUgbWFuYWdlci4gKi9cbiAgICBnZXQgYWxsb2NhdGVkQ291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZS5sZW5ndGg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTnVtYmVyIG9mIHRleHR1cmVzIGluIHRoZSBtYW5hZ2VyLlxuICAgICAqXG4gICAgICogQG5vdGUgRm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMsIGF2b2lkIGNhbGxpbmcgdGhpcyBtZXRob2Qgd2hlbiBwb3NzaWJsZS5cbiAgICAgKi9cbiAgICBnZXQgY291bnQoKSB7XG4gICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgcmVzIG9mIHRoaXMuX2NhY2hlKSB7XG4gICAgICAgICAgICBpZiAocmVzICYmIHJlcy5pbmRleCA+PSAwKSArK2NvdW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb3VudDtcbiAgICB9XG5cbiAgICAvKiogSG9zdGluZyBlbmdpbmUgaW5zdGFuY2UuICovXG4gICAgZ2V0IGVuZ2luZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXN0cm95IHRoZSBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgbWV0aG9kIHRha2VzIGNhcmUgb2YgdGhlIHByb3RvdHlwZSBkZXN0cnVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfZGVzdHJveShpbnN0YW5jZTogVCkge1xuICAgICAgICBjb25zdCBpbmRleCA9IGluc3RhbmNlLmluZGV4O1xuICAgICAgICAoaW5zdGFuY2UuX2luZGV4IGFzIG51bWJlcikgPSAtMTtcbiAgICAgICAgKGluc3RhbmNlLl9pZCBhcyBudW1iZXIpID0gLTE7XG4gICAgICAgIHRoaXMuX2NhY2hlW2luZGV4XSA9IG51bGw7XG5cbiAgICAgICAgaWYgKCF0aGlzLmVuZ2luZS5lcmFzZVByb3RvdHlwZU9uRGVzdHJveSkgcmV0dXJuO1xuXG4gICAgICAgIGlmICghdGhpcy5fZGVzdHJ1Y3RvcilcbiAgICAgICAgICAgIHRoaXMuX2Rlc3RydWN0b3IgPSBjcmVhdGVEZXN0cm95ZWRQcm94eSh0aGlzLl9ob3N0LCB0aGlzLl90ZW1wbGF0ZSk7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihpbnN0YW5jZSwgdGhpcy5fZGVzdHJ1Y3Rvcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFyayBhbGwgaW5zdGFuY2VzIGFzIGRlc3Ryb3llZC5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfY2xlYXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5lbmdpbmUuZXJhc2VQcm90b3R5cGVPbkRlc3Ryb3kpIHJldHVybjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9jYWNoZS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLl9jYWNoZVtpXTtcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZSkgdGhpcy5fZGVzdHJveShpbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY2FjaGUubGVuZ3RoID0gMDtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHtMb2dUYWd9IGZyb20gJy4vaW5kZXguanMnO1xuaW1wb3J0IHtQcmVmYWJ9IGZyb20gJy4vcHJlZmFiLmpzJztcbmltcG9ydCB7XG4gICAgQW5pbWF0aW9uQ29tcG9uZW50LFxuICAgIEJyb2tlbkNvbXBvbmVudCxcbiAgICBDb2xsaXNpb25Db21wb25lbnQsXG4gICAgQ29tcG9uZW50LFxuICAgIENvbXBvbmVudENvbnN0cnVjdG9yLFxuICAgIERlc3Ryb3llZENvbXBvbmVudEluc3RhbmNlLFxuICAgIElucHV0Q29tcG9uZW50LFxuICAgIExpZ2h0Q29tcG9uZW50LFxuICAgIE1lc2hDb21wb25lbnQsXG4gICAgUGh5c1hDb21wb25lbnQsXG4gICAgVGV4dENvbXBvbmVudCxcbiAgICBWaWV3Q29tcG9uZW50LFxufSBmcm9tICcuL3dvbmRlcmxhbmQuanMnO1xuXG4vKipcbiAqIE1hbmFnZSBhbGwgY29tcG9uZW50IG1hbmFnZXJzIGluIGEgc2NlbmUuXG4gKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgQ29tcG9uZW50TWFuYWdlcnMge1xuICAgIC8qKiBBbmltYXRpb24gbWFuYWdlciBpbmRleC4gKi9cbiAgICByZWFkb25seSBhbmltYXRpb246IG51bWJlciA9IC0xO1xuICAgIC8qKiBDb2xsaXNpb24gbWFuYWdlciBpbmRleC4gKi9cbiAgICByZWFkb25seSBjb2xsaXNpb246IG51bWJlciA9IC0xO1xuICAgIC8qKiBKYXZhU2NyaXB0IG1hbmFnZXIgaW5kZXguICovXG4gICAgcmVhZG9ubHkganM6IG51bWJlciA9IC0xO1xuICAgIC8qKiBQaHlzeCBtYW5hZ2VyIGluZGV4LiAqL1xuICAgIHJlYWRvbmx5IHBoeXN4OiBudW1iZXIgPSAtMTtcbiAgICAvKiogVmlldyBtYW5hZ2VyIGluZGV4LiAqL1xuICAgIHJlYWRvbmx5IHZpZXc6IG51bWJlciA9IC0xO1xuXG4gICAgLyoqXG4gICAgICogQ29tcG9uZW50IGNsYXNzIGluc3RhbmNlcyBwZXIgdHlwZSB0byBhdm9pZCBHQy5cbiAgICAgKlxuICAgICAqIEBub3RlIE1hcHMgdGhlIG1hbmFnZXIgaW5kZXggdG8gdGhlIGxpc3Qgb2YgY29tcG9uZW50cy5cbiAgICAgKlxuICAgICAqIEB0b2RvOiBSZWZhY3RvciBSZXNvdXJjZU1hbmFnZXIgYW5kIHJlLXVzZSBmb3IgY29tcG9uZW50cy5cbiAgICAgKi9cbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jYWNoZTogKENvbXBvbmVudCB8IG51bGwpW11bXSA9IFtdO1xuICAgIC8qKiBNYW5hZ2VyIGluZGV4IHRvIGNvbXBvbmVudCBjbGFzcy4gKi9cbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jb25zdHJ1Y3RvcnM6IENvbXBvbmVudENvbnN0cnVjdG9yW107XG4gICAgLyogTWFuYWdlciBuYW1lIHRvIHRoZSBtYW5hZ2VyIGluZGV4LiAqL1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX25hdGl2ZU1hbmFnZXJzOiBNYXA8c3RyaW5nLCBudW1iZXI+ID0gbmV3IE1hcCgpO1xuXG4gICAgLyoqIEhvc3QgaW5zdGFuY2UuICovXG4gICAgcHJpdmF0ZSByZWFkb25seSBfc2NlbmU6IFByZWZhYjtcblxuICAgIGNvbnN0cnVjdG9yKHNjZW5lOiBQcmVmYWIpIHtcbiAgICAgICAgdGhpcy5fc2NlbmUgPSBzY2VuZTtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX3NjZW5lLmVuZ2luZS53YXNtO1xuXG4gICAgICAgIGNvbnN0IG5hdGl2ZSA9IFtcbiAgICAgICAgICAgIEFuaW1hdGlvbkNvbXBvbmVudCxcbiAgICAgICAgICAgIENvbGxpc2lvbkNvbXBvbmVudCxcbiAgICAgICAgICAgIElucHV0Q29tcG9uZW50LFxuICAgICAgICAgICAgTGlnaHRDb21wb25lbnQsXG4gICAgICAgICAgICBNZXNoQ29tcG9uZW50LFxuICAgICAgICAgICAgUGh5c1hDb21wb25lbnQsXG4gICAgICAgICAgICBUZXh0Q29tcG9uZW50LFxuICAgICAgICAgICAgVmlld0NvbXBvbmVudCxcbiAgICAgICAgXTtcbiAgICAgICAgdGhpcy5fY2FjaGUgPSBuZXcgQXJyYXkobmF0aXZlLmxlbmd0aCk7XG4gICAgICAgIHRoaXMuX2NvbnN0cnVjdG9ycyA9IG5ldyBBcnJheShuYXRpdmUubGVuZ3RoKTtcblxuICAgICAgICBmb3IgKGNvbnN0IENsYXNzIG9mIG5hdGl2ZSkge1xuICAgICAgICAgICAgY29uc3QgcHRyID0gd2FzbS50ZW1wVVRGOChDbGFzcy5UeXBlTmFtZSk7XG4gICAgICAgICAgICBjb25zdCBtYW5hZ2VyID0gd2FzbS5fd2xfc2NlbmVfZ2V0X2NvbXBvbmVudF9tYW5hZ2VyX2luZGV4KHNjZW5lLl9pbmRleCwgcHRyKTtcbiAgICAgICAgICAgIHRoaXMuX2NvbnN0cnVjdG9ycztcbiAgICAgICAgICAgIHRoaXMuX2NvbnN0cnVjdG9yc1ttYW5hZ2VyXSA9IENsYXNzO1xuICAgICAgICAgICAgdGhpcy5fY2FjaGVbbWFuYWdlcl0gPSBbXSBhcyBDb21wb25lbnRbXTtcbiAgICAgICAgICAgIHRoaXMuX25hdGl2ZU1hbmFnZXJzLnNldChDbGFzcy5UeXBlTmFtZSwgbWFuYWdlcik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmFuaW1hdGlvbiA9IHRoaXMuX25hdGl2ZU1hbmFnZXJzLmdldChBbmltYXRpb25Db21wb25lbnQuVHlwZU5hbWUpITtcbiAgICAgICAgdGhpcy5jb2xsaXNpb24gPSB0aGlzLl9uYXRpdmVNYW5hZ2Vycy5nZXQoQ29sbGlzaW9uQ29tcG9uZW50LlR5cGVOYW1lKSE7XG4gICAgICAgIHRoaXMucGh5c3ggPSB0aGlzLl9uYXRpdmVNYW5hZ2Vycy5nZXQoUGh5c1hDb21wb25lbnQuVHlwZU5hbWUpITtcbiAgICAgICAgdGhpcy52aWV3ID0gdGhpcy5fbmF0aXZlTWFuYWdlcnMuZ2V0KFZpZXdDb21wb25lbnQuVHlwZU5hbWUpITtcblxuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLnRlbXBVVEY4KCdqcycpO1xuICAgICAgICB0aGlzLmpzID0gd2FzbS5fd2xfc2NlbmVfZ2V0X2NvbXBvbmVudF9tYW5hZ2VyX2luZGV4KHNjZW5lLl9pbmRleCwgcHRyKTtcbiAgICAgICAgdGhpcy5fY2FjaGVbdGhpcy5qc10gPSBbXSBhcyBDb21wb25lbnRbXTtcbiAgICB9XG5cbiAgICBjcmVhdGVKcyhpbmRleDogbnVtYmVyLCBpZDogbnVtYmVyLCB0eXBlOiBudW1iZXIsIG9iamVjdDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9zY2VuZS5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgY3RvciA9IHdhc20uX2NvbXBvbmVudFR5cGVzW3R5cGVdO1xuICAgICAgICBpZiAoIWN0b3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVHlwZSBpbmRleCAke3R5cGV9IGlzbid0IHJlZ2lzdGVyZWRgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvZyA9IHRoaXMuX3NjZW5lLmVuZ2luZS5sb2c7XG5cbiAgICAgICAgbGV0IGNvbXBvbmVudCA9IG51bGw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb21wb25lbnQgPSBuZXcgY3Rvcih0aGlzLl9zY2VuZSwgdGhpcy5qcywgaWQpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBsb2cuZXJyb3IoXG4gICAgICAgICAgICAgICAgTG9nVGFnLkNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBgRXhjZXB0aW9uIGR1cmluZyBpbnN0YW50aWF0aW9uIG9mIGNvbXBvbmVudCAke2N0b3IuVHlwZU5hbWV9YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGxvZy5lcnJvcihMb2dUYWcuQ29tcG9uZW50LCBlKTtcbiAgICAgICAgICAgIGNvbXBvbmVudCA9IG5ldyBCcm9rZW5Db21wb25lbnQodGhpcy5fc2NlbmUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbXBvbmVudC5fb2JqZWN0ID0gdGhpcy5fc2NlbmUud3JhcChvYmplY3QpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb21wb25lbnQucmVzZXRQcm9wZXJ0aWVzKCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGxvZy5lcnJvcihcbiAgICAgICAgICAgICAgICBMb2dUYWcuQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgIGBFeGNlcHRpb24gZHVyaW5nICR7Y29tcG9uZW50LnR5cGV9IHJlc2V0UHJvcGVydGllcygpIG9uIG9iamVjdCAke2NvbXBvbmVudC5vYmplY3QubmFtZX1gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbG9nLmVycm9yKExvZ1RhZy5Db21wb25lbnQsIGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fc2NlbmUuX2pzQ29tcG9uZW50c1tpbmRleF0gPSBjb21wb25lbnQ7XG5cbiAgICAgICAgLyogQWRkIHRvIGNhY2hlLiBUaGlzIGlzIHJlcXVpcmVkIGJlY2F1c2UgZGVzdHJ1Y3Rpb24gaXNcbiAgICAgICAgICogSUQtYmFzZWQgYW5kIG5vdCBpbmRleC1iYXNlZC4gKi9cbiAgICAgICAgdGhpcy5fY2FjaGVbdGhpcy5qc11baWRdID0gY29tcG9uZW50O1xuXG4gICAgICAgIHJldHVybiBjb21wb25lbnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgYSBjYWNoZWQgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIG1hbmFnZXIgVGhlIG1hbmFnZXIgaW5kZXguXG4gICAgICogQHBhcmFtIGlkIFRoZSBjb21wb25lbnQgaWQuXG4gICAgICogQHJldHVybnMgVGhlIGNvbXBvbmVudCBpZiBjYWNoZWQsIGBudWxsYCBvdGhlcndpc2UuXG4gICAgICovXG4gICAgZ2V0KG1hbmFnZXI6IG51bWJlciwgaWQ6IG51bWJlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVbbWFuYWdlcl1baWRdID8/IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV3JhcCB0aGUgYW5pbWF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGlkIElkIHRvIHdyYXAuXG4gICAgICogQHJldHVybnMgVGhlIHByZXZpb3VzIGluc3RhbmNlIGlmIGl0IHdhcyBjYWNoZWQsIG9yIGEgbmV3IG9uZS5cbiAgICAgKi9cbiAgICB3cmFwQW5pbWF0aW9uKGlkOiBudW1iZXIpOiBBbmltYXRpb25Db21wb25lbnQge1xuICAgICAgICByZXR1cm4gdGhpcy53cmFwTmF0aXZlKHRoaXMuYW5pbWF0aW9uLCBpZCkgYXMgQW5pbWF0aW9uQ29tcG9uZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdyYXAgdGhlIGNvbGxpc2lvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpZCBJZCB0byB3cmFwLlxuICAgICAqIEByZXR1cm5zIFRoZSBwcmV2aW91cyBpbnN0YW5jZSBpZiBpdCB3YXMgY2FjaGVkLCBvciBhIG5ldyBvbmUuXG4gICAgICovXG4gICAgd3JhcENvbGxpc2lvbihpZDogbnVtYmVyKTogQ29sbGlzaW9uQ29tcG9uZW50IHtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcE5hdGl2ZSh0aGlzLmNvbGxpc2lvbiwgaWQpIGFzIENvbGxpc2lvbkNvbXBvbmVudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXcmFwIHRoZSB2aWV3LlxuICAgICAqXG4gICAgICogQHBhcmFtIGlkIElkIHRvIHdyYXAuXG4gICAgICogQHJldHVybnMgVGhlIHByZXZpb3VzIGluc3RhbmNlIGlmIGl0IHdhcyBjYWNoZWQsIG9yIGEgbmV3IG9uZS5cbiAgICAgKi9cbiAgICB3cmFwVmlldyhpZDogbnVtYmVyKTogVmlld0NvbXBvbmVudCB7XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBOYXRpdmUodGhpcy52aWV3LCBpZCkgYXMgVmlld0NvbXBvbmVudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXcmFwIHRoZSBwaHlzeC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpZCBJZCB0byB3cmFwLlxuICAgICAqIEByZXR1cm5zIFRoZSBwcmV2aW91cyBpbnN0YW5jZSBpZiBpdCB3YXMgY2FjaGVkLCBvciBhIG5ldyBvbmUuXG4gICAgICovXG4gICAgd3JhcFBoeXN4KGlkOiBudW1iZXIpOiBQaHlzWENvbXBvbmVudCB7XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBOYXRpdmUodGhpcy5waHlzeCwgaWQpIGFzIFBoeXNYQ29tcG9uZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhIGNvbXBvbmVudCBpbnN0YW5jZSBpZiBpdCBleGlzdHMsIG9yIGNyZWF0ZSBhbmQgY2FjaGVcbiAgICAgKiBhIG5ldyBvbmUuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuIFBsZWFzZSBoYXZlIGEgbG9vayBhdFxuICAgICAqIHtAbGluayBPYmplY3QzRC5hZGRDb21wb25lbnR9IGluc3RlYWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29tcG9uZW50VHlwZSBDb21wb25lbnQgbWFuYWdlciBpbmRleFxuICAgICAqIEBwYXJhbSBjb21wb25lbnRJZCBDb21wb25lbnQgaWQgaW4gdGhlIG1hbmFnZXJcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEphdmFTY3JpcHQgaW5zdGFuY2Ugd3JhcHBpbmcgdGhlIG5hdGl2ZSBjb21wb25lbnRcbiAgICAgKi9cbiAgICB3cmFwTmF0aXZlKG1hbmFnZXI6IG51bWJlciwgaWQ6IG51bWJlcikge1xuICAgICAgICBpZiAoaWQgPCAwKSByZXR1cm4gbnVsbDtcblxuICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMuX2NhY2hlW21hbmFnZXJdO1xuICAgICAgICBpZiAoY2FjaGVbaWRdKSByZXR1cm4gY2FjaGVbaWRdO1xuXG4gICAgICAgIGNvbnN0IHNjZW5lID0gdGhpcy5fc2NlbmU7XG4gICAgICAgIGNvbnN0IENsYXNzID0gdGhpcy5fY29uc3RydWN0b3JzW21hbmFnZXJdO1xuICAgICAgICBjb25zdCBjb21wb25lbnQgPSBuZXcgQ2xhc3Moc2NlbmUsIG1hbmFnZXIsIGlkKTtcbiAgICAgICAgY2FjaGVbaWRdID0gY29tcG9uZW50O1xuICAgICAgICByZXR1cm4gY29tcG9uZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdyYXAgYSBuYXRpdmUgb3IganMgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHRocm93cyBGb3IgSmF2YVNjcmlwdCBjb21wb25lbnRzIHRoYXQgd2VyZW4ndCBwcmV2aW91c2x5IGNhY2hlZCxcbiAgICAgKiBzaW5jZSB0aGF0IHdvdWxkIGJlIGEgYnVnIGluIHRoZSBydW50aW1lIC8gYXBpLlxuICAgICAqXG4gICAgICogQHBhcmFtIG1hbmFnZXIgVGhlIG1hbmFnZXIgaW5kZXguXG4gICAgICogQHBhcmFtIGlkIFRoZSBpZCB0byB3cmFwLlxuICAgICAqIEByZXR1cm5zIFRoZSBwcmV2aW91cyBpbnN0YW5jZSBpZiBpdCB3YXMgY2FjaGVkLCBvciBhIG5ldyBvbmUuXG4gICAgICovXG4gICAgd3JhcEFueShtYW5hZ2VyOiBudW1iZXIsIGlkOiBudW1iZXIpIHtcbiAgICAgICAgaWYgKGlkIDwgMCkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgaWYgKG1hbmFnZXIgPT09IHRoaXMuanMpIHtcbiAgICAgICAgICAgIGNvbnN0IGZvdW5kID0gdGhpcy5fY2FjaGVbdGhpcy5qc11baWRdO1xuICAgICAgICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSlMgY29tcG9uZW50cyBtdXN0IGFsd2F5cyBiZSBjYWNoZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmb3VuZC5jb25zdHJ1Y3RvciAhPT0gQnJva2VuQ29tcG9uZW50ID8gZm91bmQgOiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcE5hdGl2ZShtYW5hZ2VyLCBpZCk7XG4gICAgfVxuXG4gICAgZ2V0TmF0aXZlTWFuYWdlcihuYW1lOiBzdHJpbmcpOiBudW1iZXIgfCBudWxsIHtcbiAgICAgICAgY29uc3QgbWFuYWdlciA9IHRoaXMuX25hdGl2ZU1hbmFnZXJzLmdldChuYW1lKTtcbiAgICAgICAgcmV0dXJuIG1hbmFnZXIgIT09IHVuZGVmaW5lZCA/IG1hbmFnZXIgOiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBlcmZvcm0gY2xlYW51cCB1cG9uIGNvbXBvbmVudCBkZXN0cnVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbnN0YW5jZSBUaGUgaW5zdGFuY2UgdG8gZGVzdHJveS5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBkZXN0cm95KGluc3RhbmNlOiBDb21wb25lbnQpIHtcbiAgICAgICAgY29uc3QgbG9jYWxJZCA9IGluc3RhbmNlLl9sb2NhbElkO1xuICAgICAgICBjb25zdCBtYW5hZ2VyID0gaW5zdGFuY2UuX21hbmFnZXI7XG4gICAgICAgIChpbnN0YW5jZS5faWQgYXMgbnVtYmVyKSA9IC0xO1xuICAgICAgICAoaW5zdGFuY2UuX2xvY2FsSWQgYXMgbnVtYmVyKSA9IC0xO1xuICAgICAgICAoaW5zdGFuY2UuX21hbmFnZXIgYXMgbnVtYmVyKSA9IC0xO1xuXG4gICAgICAgIGNvbnN0IGVyYXNlUHJvdG90eXBlT25EZXN0cm95ID0gdGhpcy5fc2NlbmUuZW5naW5lLmVyYXNlUHJvdG90eXBlT25EZXN0cm95O1xuICAgICAgICAvKiBEZXN0cm95IHRoZSBwcm90b3R5cGUgb2YgdGhpcyBpbnN0YW5jZSB0byBhdm9pZCB1c2luZyBhIGRhbmdsaW5nIGNvbXBvbmVudCAqL1xuICAgICAgICBpZiAoZXJhc2VQcm90b3R5cGVPbkRlc3Ryb3kgJiYgaW5zdGFuY2UpIHtcbiAgICAgICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihpbnN0YW5jZSwgRGVzdHJveWVkQ29tcG9uZW50SW5zdGFuY2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogUmVtb3ZlIGZyb20gdGhlIGNhY2hlIHRvIGF2b2lkIHNpZGUtZWZmZWN0cyB3aGVuXG4gICAgICAgICAqIHJlLWNyZWF0aW5nIGEgY29tcG9uZW50IHdpdGggdGhlIHNhbWUgaWQuICovXG4gICAgICAgIHRoaXMuX2NhY2hlW21hbmFnZXJdW2xvY2FsSWRdID0gbnVsbDtcbiAgICB9XG5cbiAgICAvKiogTnVtYmVyIG9mIG1hbmFnZXJzLCBpbmNsdWRpbmcgdGhlIEphdmFTY3JpcHQgbWFuYWdlci4gKi9cbiAgICBnZXQgbWFuYWdlcnNDb3VudCgpIHtcbiAgICAgICAgLyogKzEgdG8gYWNjb3VudCBmb3IgdGhlIEphdmFTY3JpcHQgbWFuYWdlciAqL1xuICAgICAgICByZXR1cm4gdGhpcy5fbmF0aXZlTWFuYWdlcnMuc2l6ZSArIDE7XG4gICAgfVxufVxuIiwgImltcG9ydCB7SW1hZ2VMaWtlLCBQcm9ncmVzc0NhbGxiYWNrfSBmcm9tICcuLi90eXBlcy5qcyc7XG5cbi8qKlxuICogVHJhbnNmb3JtZXIgZm9yIHtAbGluayBUcmFuc2Zvcm1TdHJlYW19IHRoYXQgcGFzc2VzIHJlYWQgcHJvZ3Jlc3MgdG8gYVxuICogY2FsbGJhY2suXG4gKlxuICogSW52b2tlcyB0aGUgY2FsbGJhY2sgZm9yIGVhY2ggc3RyZWFtZWQgY2h1bmssIGFuZCBvbmUgZmluYWwgdGltZSB3aGVuIHRoZVxuICogc3RyZWFtIGNsb3Nlcy5cbiAqXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIEZldGNoUHJvZ3Jlc3NUcmFuc2Zvcm1lciBpbXBsZW1lbnRzIFRyYW5zZm9ybWVyPFVpbnQ4QXJyYXksIFVpbnQ4QXJyYXk+IHtcbiAgICAjcHJvZ3Jlc3MgPSAwO1xuICAgICNjYWxsYmFjazogUHJvZ3Jlc3NDYWxsYmFjaztcbiAgICAjdG90YWxTaXplOiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3Rvci5cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgQ2FsbGJhY2sgdGhhdCByZWNlaXZlcyB0aGUgcHJvZ3Jlc3MuXG4gICAgICogQHBhcmFtIHRvdGFsU2l6ZSBUb3RhbCBzaXplIG9mIHRoZSBkYXRhLiBQYXNzIDAgdG8gaW5kaWNhdGUgdGhhdCB0aGVcbiAgICAgKiAgICAgc2l6ZSBpcyB1bmtub3duLCB0aGVuIHRoZSBjYWxsYmFjayB3aWxsIG9ubHkgYmUgY2FsbGVkIG9uY2UgYWZ0ZXJcbiAgICAgKiAgICAgYWxsIGRhdGEgd2FzIHRyYW5zZmVycmVkLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNhbGxiYWNrOiBQcm9ncmVzc0NhbGxiYWNrLCB0b3RhbFNpemUgPSAwKSB7XG4gICAgICAgIHRoaXMuI2NhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICAgIHRoaXMuI3RvdGFsU2l6ZSA9IHRvdGFsU2l6ZTtcbiAgICB9XG5cbiAgICB0cmFuc2Zvcm0oY2h1bms6IFVpbnQ4QXJyYXksIGNvbnRyb2xsZXI6IFRyYW5zZm9ybVN0cmVhbURlZmF1bHRDb250cm9sbGVyPFVpbnQ4QXJyYXk+KSB7XG4gICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShjaHVuayk7XG4gICAgICAgIHRoaXMuI3Byb2dyZXNzICs9IGNodW5rLmxlbmd0aDtcbiAgICAgICAgaWYgKHRoaXMuI3RvdGFsU2l6ZSA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuI2NhbGxiYWNrKHRoaXMuI3Byb2dyZXNzLCB0aGlzLiN0b3RhbFNpemUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZmx1c2goKSB7XG4gICAgICAgIHRoaXMuI2NhbGxiYWNrKHRoaXMuI3Byb2dyZXNzLCB0aGlzLiNwcm9ncmVzcyk7XG4gICAgfVxufVxuXG4vKipcbiAqIFNpbmsgZm9yIGBXcml0YWJsZVN0cmVhbWAgdGhhdCB3cml0ZXMgZGF0YSB0byBhbiBgQXJyYXlCdWZmZXJgLlxuICpcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGNsYXNzIEFycmF5QnVmZmVyU2luayBpbXBsZW1lbnRzIFVuZGVybHlpbmdTaW5rPFVpbnQ4QXJyYXk+IHtcbiAgICAjYnVmZmVyOiBVaW50OEFycmF5O1xuICAgICNvZmZzZXQgPSAwO1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0b3IuXG4gICAgICogQHBhcmFtIHNpemUgSW5pdGlhbCBzaXplIG9mIHRoZSBidWZmZXIuIElmIGxlc3MgdGhhbiB0aGUgcmVjZWl2ZWQgZGF0YSxcbiAgICAgKiAgICAgdGhlIGJ1ZmZlciBpcyBkeW5hbWljYWxseSByZWFsbG9jYXRlZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzaXplID0gMCkge1xuICAgICAgICB0aGlzLiNidWZmZXIgPSBuZXcgVWludDhBcnJheShzaXplKTtcbiAgICB9XG5cbiAgICAvKiogR2V0IHRoZSByZWNlaXZlZCBkYXRhIGFzIGFuIGBBcnJheUJ1ZmZlcmAuICovXG4gICAgZ2V0IGFycmF5QnVmZmVyKCkge1xuICAgICAgICBjb25zdCBhcnJheUJ1ZmZlciA9IHRoaXMuI2J1ZmZlci5idWZmZXI7XG4gICAgICAgIGlmICh0aGlzLiNvZmZzZXQgPCBhcnJheUJ1ZmZlci5ieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gYXJyYXlCdWZmZXIuc2xpY2UoMCwgdGhpcy4jb2Zmc2V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJyYXlCdWZmZXI7XG4gICAgfVxuXG4gICAgd3JpdGUoY2h1bms6IFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgY29uc3QgbmV3TGVuZ3RoID0gdGhpcy4jb2Zmc2V0ICsgY2h1bmsubGVuZ3RoO1xuICAgICAgICBpZiAobmV3TGVuZ3RoID4gdGhpcy4jYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgbmV3QnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoXG4gICAgICAgICAgICAgICAgTWF0aC5tYXgodGhpcy4jYnVmZmVyLmxlbmd0aCAqIDEuNSwgbmV3TGVuZ3RoKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIG5ld0J1ZmZlci5zZXQodGhpcy4jYnVmZmVyKTtcbiAgICAgICAgICAgIHRoaXMuI2J1ZmZlciA9IG5ld0J1ZmZlcjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNidWZmZXIuc2V0KGNodW5rLCB0aGlzLiNvZmZzZXQpO1xuICAgICAgICB0aGlzLiNvZmZzZXQgPSBuZXdMZW5ndGg7XG4gICAgfVxufVxuXG4vKipcbiAqIFNvdXJjZSBmb3IgYFJlYWRhYmxlU3RyZWFtYCB0aGF0IHJlYWRzIGRhdGEgZnJvbSBhbmBBcnJheUJ1ZmZlcmAuXG4gKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgQXJyYXlCdWZmZXJTb3VyY2UgaW1wbGVtZW50cyBVbmRlcmx5aW5nU291cmNlPFVpbnQ4QXJyYXk+IHtcbiAgICAjYnVmZmVyOiBBcnJheUJ1ZmZlcjtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yLlxuICAgICAqIEBwYXJhbSBidWZmZXIgQnVmZmVyIHRvIHJlYWQgZnJvbS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihidWZmZXI6IEFycmF5QnVmZmVyKSB7XG4gICAgICAgIHRoaXMuI2J1ZmZlciA9IGJ1ZmZlcjtcbiAgICB9XG5cbiAgICBzdGFydChjb250cm9sbGVyOiBSZWFkYWJsZVN0cmVhbUNvbnRyb2xsZXI8VWludDhBcnJheT4pIHtcbiAgICAgICAgaWYgKHRoaXMuI2J1ZmZlci5ieXRlTGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKG5ldyBVaW50OEFycmF5KHRoaXMuI2J1ZmZlcikpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICB9XG59XG5cbi8qKlxuICogRmV0Y2ggYSBmaWxlIGFzIGFuIGBBcnJheUJ1ZmZlcmAsIHdpdGggZmV0Y2ggcHJvZ3Jlc3MgcGFzc2VkIHRvIGEgY2FsbGJhY2suXG4gKlxuICogQHBhcmFtIHBhdGggUGF0aCBvZiB0aGUgZmlsZSB0byBmZXRjaC5cbiAqIEBwYXJhbSBvblByb2dyZXNzIENhbGxiYWNrIHJlY2VpdmluZyB0aGUgY3VycmVudCBmZXRjaCBwcm9ncmVzcyBhbmQgdG90YWxcbiAqICAgICBzaXplLCBpbiBieXRlcy4gQWxzbyBjYWxsZWQgYSBmaW5hbCB0aW1lIG9uIGNvbXBsZXRpb24uXG4gKiBAcGFyYW0gc2lnbmFsIEFib3J0IHNpZ25hbCBwYXNzZWQgdG8gYGZldGNoKClgLlxuICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGZldGNoIHN1Y2Nlc3NmdWxseSBjb21wbGV0ZXMuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaFdpdGhQcm9ncmVzcyhcbiAgICBwYXRoOiBzdHJpbmcsXG4gICAgb25Qcm9ncmVzcz86IFByb2dyZXNzQ2FsbGJhY2ssXG4gICAgc2lnbmFsPzogQWJvcnRTaWduYWxcbik6IFByb21pc2U8QXJyYXlCdWZmZXI+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChwYXRoLCB7c2lnbmFsfSk7XG4gICAgaWYgKCFyZXMub2spIHRocm93IHJlcy5zdGF0dXNUZXh0O1xuICAgIGlmICghb25Qcm9ncmVzcyB8fCAhcmVzLmJvZHkpIHJldHVybiByZXMuYXJyYXlCdWZmZXIoKTtcbiAgICBsZXQgc2l6ZSA9IE51bWJlcihyZXMuaGVhZGVycy5nZXQoJ0NvbnRlbnQtTGVuZ3RoJykgPz8gMCk7XG4gICAgaWYgKE51bWJlci5pc05hTihzaXplKSkgc2l6ZSA9IDA7XG4gICAgY29uc3Qgc2luayA9IG5ldyBBcnJheUJ1ZmZlclNpbmsoc2l6ZSk7XG4gICAgYXdhaXQgcmVzLmJvZHlcbiAgICAgICAgLnBpcGVUaHJvdWdoKG5ldyBUcmFuc2Zvcm1TdHJlYW0obmV3IEZldGNoUHJvZ3Jlc3NUcmFuc2Zvcm1lcihvblByb2dyZXNzLCBzaXplKSkpXG4gICAgICAgIC5waXBlVG8obmV3IFdyaXRhYmxlU3RyZWFtKHNpbmspKTtcbiAgICByZXR1cm4gc2luay5hcnJheUJ1ZmZlcjtcbn1cblxuLyoqXG4gKiBGZXRjaCBhIGZpbGUgYXMgYSBgUmVhZGFibGVTdHJlYW1gLCB3aXRoIGZldGNoIHByb2dyZXNzIHBhc3NlZCB0byBhXG4gKiBjYWxsYmFjay5cbiAqXG4gKiBAcGFyYW0gcGF0aCBQYXRoIG9mIHRoZSBmaWxlIHRvIGZldGNoLlxuICogQHBhcmFtIG9uUHJvZ3Jlc3MgQ2FsbGJhY2sgcmVjZWl2aW5nIHRoZSBjdXJyZW50IGZldGNoIHByb2dyZXNzIGFuZCB0b3RhbFxuICogICAgIHNpemUsIGluIGJ5dGVzLiBBbHNvIGNhbGxlZCBhIGZpbmFsIHRpbWUgb24gY29tcGxldGlvbi5cbiAqIEBwYXJhbSBzaWduYWwgQWJvcnQgc2lnbmFsIHBhc3NlZCB0byBgZmV0Y2goKWAuXG4gKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgZmV0Y2ggc3VjY2Vzc2Z1bGx5IGNvbXBsZXRlcy5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoU3RyZWFtV2l0aFByb2dyZXNzKFxuICAgIHBhdGg6IHN0cmluZyxcbiAgICBvblByb2dyZXNzPzogUHJvZ3Jlc3NDYWxsYmFjayxcbiAgICBzaWduYWw/OiBBYm9ydFNpZ25hbFxuKTogUHJvbWlzZTxSZWFkYWJsZVN0cmVhbTxVaW50OEFycmF5Pj4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHBhdGgsIHtzaWduYWx9KTtcbiAgICBpZiAoIXJlcy5vaykgdGhyb3cgcmVzLnN0YXR1c1RleHQ7XG4gICAgY29uc3QgYm9keSA9IHJlcy5ib2R5ID8/IG5ldyBSZWFkYWJsZVN0cmVhbSgpO1xuICAgIGxldCBzaXplID0gTnVtYmVyKHJlcy5oZWFkZXJzLmdldCgnQ29udGVudC1MZW5ndGgnKSA/PyAwKTtcbiAgICBpZiAoTnVtYmVyLmlzTmFOKHNpemUpKSBzaXplID0gMDtcbiAgICBpZiAoIW9uUHJvZ3Jlc3MpIHJldHVybiBib2R5O1xuICAgIGNvbnN0IHN0cmVhbSA9IGJvZHkucGlwZVRocm91Z2goXG4gICAgICAgIG5ldyBUcmFuc2Zvcm1TdHJlYW0obmV3IEZldGNoUHJvZ3Jlc3NUcmFuc2Zvcm1lcihvblByb2dyZXNzLCBzaXplKSlcbiAgICApO1xuICAgIHJldHVybiBzdHJlYW07XG59XG5cbi8qKlxuICogR2V0IHBhcmVudCBwYXRoIGZyb20gYSBVUkwuXG4gKlxuICogQHBhcmFtIHVybCBVUkwgdG8gZ2V0IHRoZSBwYXJlbnQgZnJvbS5cbiAqIEByZXR1cm5zIFBhcmVudCBVUkwgd2l0aG91dCB0cmFpbGluZyBzbGFzaC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEJhc2VVcmwodXJsOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiB1cmwuc3Vic3RyaW5nKDAsIHVybC5sYXN0SW5kZXhPZignLycpKTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIGZpbGVuYW1lIG9mIGEgdXJsLlxuICpcbiAqIEBwYXJhbSB1cmwgVGhlIHVybCB0byBleHRyYWN0IHRoZSBuYW1lIGZyb20uXG4gKiBAcmV0dXJucyBBIHN0cmluZyBjb250YWluaW5nIHRoZSBmaWxlbmFtZS4gSWYgbm8gZmlsZW5hbWUgaXMgZm91bmQsXG4gKiAgICAgcmV0dXJucyB0aGUgaW5wdXQgc3RyaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsZW5hbWUodXJsOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICh1cmwuZW5kc1dpdGgoJy8nKSkge1xuICAgICAgICAvKiBSZW1vdmUgdHJhaWxpbmcgc2xhc2guICovXG4gICAgICAgIHVybCA9IHVybC5zdWJzdHJpbmcoMCwgdXJsLmxhc3RJbmRleE9mKCcvJykpO1xuICAgIH1cbiAgICBjb25zdCBsYXN0U2xhc2ggPSB1cmwubGFzdEluZGV4T2YoJy8nKTtcbiAgICBpZiAobGFzdFNsYXNoIDwgMCkgcmV0dXJuIHVybDtcbiAgICByZXR1cm4gdXJsLnN1YnN0cmluZyhsYXN0U2xhc2ggKyAxKTtcbn1cblxuLyoqXG4gKiBQcm9taXNlIHJlc29sdmVkIG9uY2UgdGhlIGltYWdlIGlzIHJlYWR5IHRvIGJlIHVzZWRcbiAqXG4gKiBAcGFyYW0gaW1hZ2UgVGhlIGltYWdlLCB2aWRlbywgb3IgY2FudmFzIHRvIHdhaXQgZm9yLlxuICogQHJldHVybnMgQSBwcm9taXNlIHdpdGggdGhlIGltYWdlLCBvbmNlIGl0J3MgcmVhZHkgdG8gYmUgdXNlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9uSW1hZ2VSZWFkeTxUIGV4dGVuZHMgSW1hZ2VMaWtlPihpbWFnZTogVCk6IFByb21pc2U8VD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHtcbiAgICAgICAgaWYgKGltYWdlIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHtcbiAgICAgICAgICAgIHJlcyhpbWFnZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaW1hZ2UgaW5zdGFuY2VvZiBIVE1MVmlkZW9FbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAoaW1hZ2UucmVhZHlTdGF0ZSA+PSAyKSB7XG4gICAgICAgICAgICAgICAgcmVzKGltYWdlIGFzIFQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgJ2xvYWRlZGRhdGEnLFxuICAgICAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGltYWdlLnJlYWR5U3RhdGUgPj0gMikgcmVzKGltYWdlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtvbmNlOiB0cnVlfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIGlmICgoaW1hZ2UgYXMgSFRNTEltYWdlRWxlbWVudCkuY29tcGxldGUpIHtcbiAgICAgICAgICAgIHJlcyhpbWFnZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHJlcyhpbWFnZSksIHtvbmNlOiB0cnVlfSk7XG4gICAgICAgIGltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgcmVqLCB7b25jZTogdHJ1ZX0pO1xuICAgIH0pO1xufVxuIiwgImltcG9ydCB7Q29tcG9uZW50TWFuYWdlcnN9IGZyb20gJy4vY29tcG9uZW50LmpzJztcbmltcG9ydCB7V29uZGVybGFuZEVuZ2luZX0gZnJvbSAnLi9lbmdpbmUuanMnO1xuaW1wb3J0IHtSZXNvdXJjZU1hbmFnZXIsIFNjZW5lUmVzb3VyY2V9IGZyb20gJy4vcmVzb3VyY2VzL3Jlc291cmNlLmpzJztcbmltcG9ydCB7UHJvZ3Jlc3NDYWxsYmFja30gZnJvbSAnLi90eXBlcy5qcyc7XG5pbXBvcnQge1xuICAgIGZldGNoU3RyZWFtV2l0aFByb2dyZXNzLFxuICAgIGZldGNoV2l0aFByb2dyZXNzLFxuICAgIGdldEJhc2VVcmwsXG4gICAgZ2V0RmlsZW5hbWUsXG59IGZyb20gJy4vdXRpbHMvZmV0Y2guanMnO1xuaW1wb3J0IHtpc1N0cmluZ30gZnJvbSAnLi91dGlscy9vYmplY3QuanMnO1xuaW1wb3J0IHtcbiAgICBBbmltYXRpb24sXG4gICAgQ29sbGlzaW9uQ2FsbGJhY2ssXG4gICAgQ29tcG9uZW50LFxuICAgIERlc3Ryb3llZE9iamVjdEluc3RhbmNlLFxuICAgIE9iamVjdDNELFxuICAgIFNraW4sXG59IGZyb20gJy4vd29uZGVybGFuZC5qcyc7XG5cbi8qKiBTY2VuZSBsb2FkaW5nIG9wdGlvbnMuICovXG5leHBvcnQgaW50ZXJmYWNlIFNjZW5lTG9hZE9wdGlvbnMge1xuICAgIC8qKiBBbiBpbi1tZW1vcnkgYnVmZmVyLCBjb250YWluaW5nIHRoZSBieXRlcyBvZiBhIGAuYmluYCBmaWxlLiAqL1xuICAgIGJ1ZmZlcjogQXJyYXlCdWZmZXI7XG5cbiAgICAvKiogUGF0aCBmcm9tIHdoaWNoIHJlc291cmNlcyBhcmUgcmVzb2x2ZWQgKGltYWdlcywgbGFuZ3VhZ2VzLCBldGMuLi4pLiAqL1xuICAgIGJhc2VVUkw6IHN0cmluZztcblxuICAgIC8qKiBJZiBgdHJ1ZWAsIGRpc3BhdGNoZXMgYSByZWFkeSBldmVudCBpbiB0aGUgZG9jdW1lbnQuICovXG4gICAgZGlzcGF0Y2hSZWFkeUV2ZW50PzogYm9vbGVhbjtcbn1cblxuLyoqIExvYWRpbmcgb3B0aW9ucyBmb3IgaW4tbWVtb3J5IGRhdGEuICovXG5leHBvcnQgaW50ZXJmYWNlIEluTWVtb3J5TG9hZE9wdGlvbnMge1xuICAgIC8qKiBBbiBpbi1tZW1vcnkgYnVmZmVyLCBjb250YWluaW5nIHRoZSBieXRlcyBvZiBhIGAuYmluYCBmaWxlLiAqL1xuICAgIGJ1ZmZlcjogQXJyYXlCdWZmZXI7XG4gICAgLyoqIFBhdGggZnJvbSB3aGljaCByZXNvdXJjZXMgYXJlIHJlc29sdmVkIChpbWFnZXMsIGxhbmd1YWdlcywgZXRjLi4uKS4gKi9cbiAgICBiYXNlVVJMOiBzdHJpbmc7XG4gICAgLyoqIE5hbWUgb2YgdGhlIGZpbGUuIFRoaXMgaXMgdGhlIHNhbWUgdGhhdCB3aWxsIGJlIHJldHJpZXZlZCB2aWEge0BsaW5rIFNjZW5lI2ZpbGVuYW1lfSAqL1xuICAgIGZpbGVuYW1lPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIExvYWRpbmcgb3B0aW9ucyBmb3Igc3RyZWFtZWQgZGF0YS5cbiAqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3RyZWFtTG9hZE9wdGlvbnMge1xuICAgIC8qKiBTdHJlYW0gdGhhdCB0cmFuc2ZlcnMgdGhlIGJ5dGVzIG9mIGEgYC5iaW5gIGZpbGUuICovXG4gICAgc3RyZWFtOiBSZWFkYWJsZVN0cmVhbTxVaW50OEFycmF5PjtcbiAgICAvKiogUGF0aCBmcm9tIHdoaWNoIHJlc291cmNlcyBhcmUgcmVzb2x2ZWQgKGltYWdlcywgbGFuZ3VhZ2VzLCBldGMuLi4pLiAqL1xuICAgIGJhc2VVUkw6IHN0cmluZztcbiAgICAvKiogTmFtZSBvZiB0aGUgZmlsZS4gVGhpcyBpcyB0aGUgc2FtZSB0aGF0IHdpbGwgYmUgcmV0cmlldmVkIHZpYSB7QGxpbmsgU2NlbmUjZmlsZW5hbWV9ICovXG4gICAgZmlsZW5hbWU/OiBzdHJpbmc7XG59XG5cbi8qKiBPcHRpb25zIGZvciBsb2FkaW5nIGZpbGVzIGZyb20gYSBVUkwuICovXG5leHBvcnQgaW50ZXJmYWNlIFVybExvYWRPcHRpb25zIHtcbiAgICAvKiogVVJMIHRvIGxvYWQuICovXG4gICAgdXJsOiBzdHJpbmc7XG4gICAgLyoqIFNpZ25hbCB0byBhYm9ydCB0aGUgZmlsZSBmZXRjaCByZXF1ZXN0LiAqL1xuICAgIHNpZ25hbD86IEFib3J0U2lnbmFsO1xuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdG8gbG9hZCB0aGUgZmlsZSBhcyBwYXJ0cyBvZiBpdCBhcmUgZmV0Y2hlZC4gSWYgYGZhbHNlYCxcbiAgICAgKiBmZXRjaGVzIHRoZSBlbnRpcmUgZmlsZSBmaXJzdCBiZWZvcmUgbG9hZGluZy4gU3RyZWFtZWQgbG9hZGluZyByZWR1Y2VzXG4gICAgICogbWVtb3J5IHVzYWdlLiBJZiBub3Qgc2V0LCBkZWZhdWx0cyB0byBgdHJ1ZWAuXG4gICAgICovXG4gICAgc3RyZWFtZWQ/OiBib29sZWFuO1xufVxuXG4vKiogT3B0aW9ucyB1c2VkIGR1cmluZyBsb2FkaW5nLiAqL1xuZXhwb3J0IHR5cGUgTG9hZE9wdGlvbnMgPSBzdHJpbmcgfCBVcmxMb2FkT3B0aW9ucztcblxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBwcmVmYWJzLCBzY2VuZXMsIGFuZCBnbFRGLlxuICpcbiAqIEZvciBtb3JlIGluZm9ybWF0aW9uIGhhdmUgYSBsb29rIGF0IHRoZSBkZXJpdmVkIHR5cGVzOlxuICogLSB7QGxpbmsgU2NlbmV9IGZvciBXb25kZXJsYW5kIEVuZ2luZSBhY3RpdmF0YWJsZSBzY2VuZXMgKC5iaW4pXG4gKiAtIHtAbGluayBQcmVmYWJHTFRGfSBmb3IgZ2xURiBzY2VuZXNcbiAqXG4gKiAjIyMjIFJlc291cmNlc1xuICpcbiAqIFdoaWxlICoqbWVzaGVzKiosICoqdGV4dHVyZXMqKiwgYW5kICoqbWF0ZXJpYWxzKiogYXJlIHNoYXJlZFxuICogb24gdGhlIHtAbGluayBXb25kZXJsYW5kRW5naW5lfSBpbnN0YW5jZSwgYSBzY2VuZSBjb21lcyB3aXRoOlxuICogLSBBbmltYXRpb25zOiBNYW5hZ2VkIHVzaW5nIHtAbGluayBQcmVmYWIuYW5pbWF0aW9uc31cbiAqIC0gU2tpbnM6IE1hbmFnZWQgdXNpbmcge0BsaW5rIFByZWZhYi5za2luc31cbiAqXG4gKiBUaG9zZSByZXNvdXJjZXMgYXJlIGJvdW5kIHRvIHRoZSBvYmplY3QgaGllcmFyY2h5IGFuZCBhcmUgdGh1cyByZXF1aXJlZCB0byBiZVxuICogcGVyLXNjZW5lLlxuICpcbiAqICMjIyMgRGVzdHJ1Y3Rpb25cbiAqXG4gKiBGb3Igbm93LCBkZXN0cm95aW5nIGEgc2NlbmUgZG9lc24ndCBhdXRvbWF0aWNhbGx5IHJlbW92ZSB0aGUgcmVzb3VyY2VzIGl0XG4gKiByZWZlcmVuY2VzIGluIHRoZSBlbmdpbmUuIEZvciBtb3JlIGluZm9ybWF0aW9uLCBoYXZlIGEgbG9vayBhdCB0aGVcbiAqIHtAbGluayBTY2VuZS5kZXN0cm95fSBtZXRob2QuXG4gKlxuICogIyMjIyBJc29sYXRpb25cbiAqXG4gKiBJdCdzIGZvcmJpZGRlbiB0byBtaXggb2JqZWN0cyBhbmQgY29tcG9uZW50cyBmcm9tIGRpZmZlcmVudCBzY2VuZXMsIGUuZy4sXG4gKlxuICogYGBganNcbiAqIGNvbnN0IG9iakEgPSBzY2VuZUEuYWRkQ2hpbGQoKTtcbiAqIGNvbnN0IG9iakIgPSBzY2VuZUIuYWRkQ2hpbGQoKTtcbiAqIG9iakEucGFyZW50ID0gb2JqQjsgLy8gVGhyb3dzXG4gKiBgYGBcbiAqXG4gKiBAY2F0ZWdvcnkgc2NlbmVcbiAqXG4gKiBAc2luY2UgMS4yLjBcbiAqL1xuZXhwb3J0IGNsYXNzIFByZWZhYiB7XG4gICAgc3RhdGljIG1ha2VVcmxMb2FkT3B0aW9ucyhvcHRpb25zOiBMb2FkT3B0aW9ucyk6IFVybExvYWRPcHRpb25zIHtcbiAgICAgICAgcmV0dXJuIGlzU3RyaW5nKG9wdGlvbnMpID8ge3VybDogb3B0aW9uc30gOiBvcHRpb25zO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvYWQgYW4gYEFycmF5QnVmZmVyYCB1c2luZyBmZXRjaC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRzIFRoZSB1cmwgb3Igb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0gcHJvZ3Jlc3MgUHJvZ3Jlc3MgY2FsbGJhY2tcbiAgICAgKiBAcmV0dXJucyBBbiB7QGxpbmsgSW5NZW1vcnlMb2FkT3B0aW9uc30gb2JqZWN0LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBsb2FkQnVmZmVyKFxuICAgICAgICBvcHRpb25zOiBMb2FkT3B0aW9ucyxcbiAgICAgICAgcHJvZ3Jlc3M/OiBQcm9ncmVzc0NhbGxiYWNrXG4gICAgKTogUHJvbWlzZTxJbk1lbW9yeUxvYWRPcHRpb25zPiB7XG4gICAgICAgIGNvbnN0IG9wdHMgPSBQcmVmYWIubWFrZVVybExvYWRPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBidWZmZXIgPSBhd2FpdCBmZXRjaFdpdGhQcm9ncmVzcyhvcHRzLnVybCwgcHJvZ3Jlc3MsIG9wdHMuc2lnbmFsKTtcbiAgICAgICAgY29uc3QgYmFzZVVSTCA9IGdldEJhc2VVcmwob3B0cy51cmwpO1xuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IGdldEZpbGVuYW1lKG9wdHMudXJsKTtcbiAgICAgICAgcmV0dXJuIHsuLi5vcHRzLCBidWZmZXIsIGJhc2VVUkwsIGZpbGVuYW1lfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2FkIGEgYFJlYWRhYmxlU3RyZWFtYCB1c2luZyBmZXRjaC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRzIFRoZSB1cmwgb3Igb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0gcHJvZ3Jlc3MgUHJvZ3Jlc3MgY2FsbGJhY2tcbiAgICAgKiBAcmV0dXJucyBBIHtAbGluayBTdHJlYW1Mb2FkT3B0aW9uc30gb2JqZWN0LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBsb2FkU3RyZWFtKFxuICAgICAgICBvcHRpb25zOiBMb2FkT3B0aW9ucyxcbiAgICAgICAgcHJvZ3Jlc3M/OiBQcm9ncmVzc0NhbGxiYWNrXG4gICAgKTogUHJvbWlzZTxTdHJlYW1Mb2FkT3B0aW9ucz4ge1xuICAgICAgICBjb25zdCBvcHRzID0gUHJlZmFiLm1ha2VVcmxMb2FkT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgZmV0Y2hTdHJlYW1XaXRoUHJvZ3Jlc3Mob3B0cy51cmwsIHByb2dyZXNzLCBvcHRzLnNpZ25hbCk7XG4gICAgICAgIGNvbnN0IGJhc2VVUkwgPSBnZXRCYXNlVXJsKG9wdHMudXJsKTtcbiAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBnZXRGaWxlbmFtZShvcHRzLnVybCk7XG4gICAgICAgIHJldHVybiB7Li4ub3B0cywgc3RyZWFtLCBiYXNlVVJMLCBmaWxlbmFtZX07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgdGhlIGluLW1lbW9yeSBsb2FkIG9wdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIHRvIHZhbGlkYXRlLlxuICAgICAqIEByZXR1cm5zIFZhbGlkYXRlZCBvcHRpb25zIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzdGF0aWMgdmFsaWRhdGVCdWZmZXJPcHRpb25zKG9wdGlvbnM6IEluTWVtb3J5TG9hZE9wdGlvbnMpOiB7XG4gICAgICAgIGJ1ZmZlcjogQXJyYXlCdWZmZXI7XG4gICAgICAgIGJhc2VVUkw6IHN0cmluZztcbiAgICAgICAgdXJsOiBzdHJpbmc7XG4gICAgfSB7XG4gICAgICAgIGNvbnN0IHtidWZmZXIsIGJhc2VVUkwsIGZpbGVuYW1lID0gJ3NjZW5lLmJpbid9ID0gb3B0aW9ucztcbiAgICAgICAgaWYgKCFidWZmZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm1pc3NpbmcgJ2J1ZmZlcicgaW4gb3B0aW9uc1wiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzU3RyaW5nKGJhc2VVUkwpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtaXNzaW5nICdiYXNlVVJMJyBpbiBvcHRpb25zXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVybCA9IGJhc2VVUkwgPyBgJHtiYXNlVVJMfS8ke2ZpbGVuYW1lfWAgOiBmaWxlbmFtZTtcbiAgICAgICAgcmV0dXJuIHtidWZmZXIsIGJhc2VVUkwsIHVybH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgdGhlIHN0cmVhbSBsb2FkIG9wdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIHRvIHZhbGlkYXRlLlxuICAgICAqIEByZXR1cm5zIFZhbGlkYXRlZCBvcHRpb25zIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzdGF0aWMgdmFsaWRhdGVTdHJlYW1PcHRpb25zKG9wdGlvbnM6IFN0cmVhbUxvYWRPcHRpb25zKToge1xuICAgICAgICBzdHJlYW06IFJlYWRhYmxlU3RyZWFtPFVpbnQ4QXJyYXk+O1xuICAgICAgICBiYXNlVVJMOiBzdHJpbmc7XG4gICAgICAgIHVybDogc3RyaW5nO1xuICAgIH0ge1xuICAgICAgICBjb25zdCB7c3RyZWFtLCBiYXNlVVJMLCBmaWxlbmFtZSA9ICdzY2VuZS5iaW4nfSA9IG9wdGlvbnM7XG4gICAgICAgIGlmICghc3RyZWFtKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtaXNzaW5nICdzdHJlYW0nIGluIG9wdGlvbnNcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc1N0cmluZyhiYXNlVVJMKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWlzc2luZyAnYmFzZVVSTCcgaW4gb3B0aW9uc1wiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1cmwgPSBiYXNlVVJMID8gYCR7YmFzZVVSTH0vJHtmaWxlbmFtZX1gIDogZmlsZW5hbWU7XG4gICAgICAgIHJldHVybiB7c3RyZWFtLCBiYXNlVVJMLCB1cmx9O1xuICAgIH1cblxuICAgIC8qKiBJbmRleCBpbiB0aGUgc2NlbmUgbWFuYWdlci4gQGhpZGRlbiAqL1xuICAgIHJlYWRvbmx5IF9pbmRleDtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIHByb3RlY3RlZCBfZW5naW5lOiBXb25kZXJsYW5kRW5naW5lO1xuXG4gICAgLyoqXG4gICAgICogQ29tcG9uZW50IG1hbmFnZXIgY2FjaGluZyB0byBhdm9pZCBHQy5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICByZWFkb25seSBfY29tcG9uZW50czogQ29tcG9uZW50TWFuYWdlcnM7XG4gICAgLyoqXG4gICAgICogSmF2YVNjcmlwdCBjb21wb25lbnRzIGZvciB0aGlzIHNjZW5lLlxuICAgICAqXG4gICAgICogVGhpcyBhcnJheSBpcyBtb3ZlZCBpbnRvIHRoZSBXQVNNIGluc3RhbmNlIHVwb24gYWN0aXZhdGlvbi5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICByZWFkb25seSBfanNDb21wb25lbnRzOiBDb21wb25lbnRbXSA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG1hcCBpcyBpbmRleGVkIHVzaW5nIHRoZSBwaHlzeCBjb21wb25lbnQgaWQuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcmVhZG9ubHkgX3B4Q2FsbGJhY2tzOiBNYXA8bnVtYmVyLCBDb2xsaXNpb25DYWxsYmFja1tdPiA9IG5ldyBNYXAoKTtcblxuICAgIC8qKiBAaGlkZGVuICovXG4gICAgcHJpdmF0ZSByZWFkb25seSBfYW5pbWF0aW9ucztcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX3NraW5zO1xuXG4gICAgLyoqXG4gICAgICogT2JqZWN0IGNsYXNzIGluc3RhbmNlcyB0byBhdm9pZCBHQy5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBwcml2YXRlIHJlYWRvbmx5IF9vYmplY3RDYWNoZTogKE9iamVjdDNEIHwgbnVsbClbXSA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogYG9uRGVzdHJveSgpYCBkZXB0aC5cbiAgICAgKlxuICAgICAqIE11bHRpcGxlIGNvbXBvbmVudHMgY2FuIHN0YWNrIGBvbkRlc3Ryb3koKWAgY2FsbHMuXG4gICAgICovXG4gICAgcHJpdmF0ZSBfcGVuZGluZ0Rlc3Ryb3k6IG51bWJlciA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZW5naW5lOiBXb25kZXJsYW5kRW5naW5lLCBpbmRleDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZSA9IGVuZ2luZTtcbiAgICAgICAgdGhpcy5faW5kZXggPSBpbmRleDtcblxuICAgICAgICB0aGlzLl9jb21wb25lbnRzID0gbmV3IENvbXBvbmVudE1hbmFnZXJzKHRoaXMpO1xuICAgICAgICB0aGlzLl9hbmltYXRpb25zID0gbmV3IFJlc291cmNlTWFuYWdlcih0aGlzIGFzIFByZWZhYiwgQW5pbWF0aW9uKTtcbiAgICAgICAgdGhpcy5fc2tpbnMgPSBuZXcgUmVzb3VyY2VNYW5hZ2VyKHRoaXMgYXMgUHJlZmFiLCBTa2luKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYSBuZXcge0BsaW5rIE9iamVjdDNEfSB0byB0aGUgcm9vdCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBTZWUge0BsaW5rIE9iamVjdDNELmFkZENoaWxkfSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgbmV3IHtAbGluayBPYmplY3QzRH0uXG4gICAgICovXG4gICAgYWRkQ2hpbGQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndyYXAoMCkuYWRkQ2hpbGQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYW4gb2JqZWN0IHRvIHRoZSBzY2VuZS5cbiAgICAgKlxuICAgICAqIEFsdGVybmF0aXZlbHksIHlvdSBjYW4gdXNlIHtAbGluayBQcmVmYWIuYWRkQ2hpbGR9IHRvIGFkZCB0aGUgb2JqZWN0XG4gICAgICogdG8gdGhlIHJvb3QsIG9yIHtAbGluayBPYmplY3QzRC5hZGRDaGlsZH0gdG8gYWRkIHRoZSBvYmplY3QgdG8gYSBnaXZlbiBwYXJlbnQ6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IHBhcmVudCA9IHNjZW5lLmFkZENoaWxkKCk7XG4gICAgICogY29uc3QgY2hpbGQgPSBwYXJlbnQuYWRkQ2hpbGQoKTtcbiAgICAgKiAvLyBFcXVpdmFsZW50IHVzaW5nIHNjZW5lLmFkZE9iamVjdFxuICAgICAqIGNvbnN0IHNpYmxpbmcgPSBzY2VuZS5hZGRPYmplY3QocGFyZW50KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXJlbnQgUGFyZW50IG9iamVjdCBvciBgbnVsbGAuXG4gICAgICogQHJldHVybnMgQSBuZXdseSBjcmVhdGVkIG9iamVjdC5cbiAgICAgKi9cbiAgICBhZGRPYmplY3QocGFyZW50OiBPYmplY3QzRCB8IG51bGwgPSBudWxsKTogT2JqZWN0M0Qge1xuICAgICAgICBpZiAocGFyZW50Py5tYXJrZWREZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGFkZCBvYmplY3QuICR7cGFyZW50fSBpcyBtYXJrZWQgYXMgZGVzdHJveWVkLmApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXNzZXJ0T3JpZ2luKHBhcmVudCk7XG4gICAgICAgIHJldHVybiAocGFyZW50ID8/IHRoaXMud3JhcCgwKSkuYWRkQ2hpbGQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCYXRjaC1hZGQgb2JqZWN0cyB0byB0aGUgc2NlbmUuXG4gICAgICpcbiAgICAgKiBXaWxsIHByb3ZpZGUgYmV0dGVyIHBlcmZvcm1hbmNlIGZvciBhZGRpbmcgbXVsdGlwbGUgb2JqZWN0cyAoZS5nLiA+IDE2KVxuICAgICAqIHRoYW4gY2FsbGluZyB7QGxpbmsgU2NlbmUjYWRkT2JqZWN0fSByZXBlYXRlZGx5IGluIGEgbG9vcC5cbiAgICAgKlxuICAgICAqIEJ5IHByb3ZpZGluZyB1cGZyb250IGluZm9ybWF0aW9uIG9mIGhvdyBtYW55IG9iamVjdHMgd2lsbCBiZSByZXF1aXJlZCxcbiAgICAgKiB0aGUgZW5naW5lIGlzIGFibGUgdG8gYmF0Y2gtYWxsb2NhdGUgdGhlIHJlcXVpcmVkIG1lbW9yeSByYXRoZXIgdGhhblxuICAgICAqIGNvbnZlcnZhdGl2ZWx5IGdyb3cgdGhlIG1lbW9yeSBpbiBzbWFsbCBzdGVwcy5cbiAgICAgKlxuICAgICAqIEBleHBlcmltZW50YWwgVGhpcyBBUEkgbWlnaHQgY2hhbmdlIGluIHVwY29taW5nIHZlcnNpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvdW50IE51bWJlciBvZiBvYmplY3RzIHRvIGFkZC5cbiAgICAgKiBAcGFyYW0gcGFyZW50IFBhcmVudCBvYmplY3Qgb3IgYG51bGxgLCBkZWZhdWx0IGBudWxsYC5cbiAgICAgKiBAcGFyYW0gY29tcG9uZW50Q291bnRIaW50IEhpbnQgZm9yIGhvdyBtYW55IGNvbXBvbmVudHMgaW4gdG90YWwgd2lsbFxuICAgICAqICAgICAgYmUgYWRkZWQgdG8gdGhlIGNyZWF0ZWQgb2JqZWN0cyBhZnRlcndhcmRzLCBkZWZhdWx0IGAwYC5cbiAgICAgKiBAcmV0dXJucyBOZXdseSBjcmVhdGVkIG9iamVjdHNcbiAgICAgKi9cbiAgICBhZGRPYmplY3RzKFxuICAgICAgICBjb3VudDogbnVtYmVyLFxuICAgICAgICBwYXJlbnQ6IE9iamVjdDNEIHwgbnVsbCA9IG51bGwsXG4gICAgICAgIGNvbXBvbmVudENvdW50SGludDogbnVtYmVyID0gMFxuICAgICk6IE9iamVjdDNEW10ge1xuICAgICAgICBjb25zdCBwYXJlbnRJZCA9IHBhcmVudCA/IHBhcmVudC5faWQgOiAwO1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLnJlcXVpcmVUZW1wTWVtKGNvdW50ICogMik7XG4gICAgICAgIGNvbnN0IGFjdHVhbENvdW50ID0gdGhpcy5lbmdpbmUud2FzbS5fd2xfc2NlbmVfYWRkX29iamVjdHMoXG4gICAgICAgICAgICB0aGlzLl9pbmRleCxcbiAgICAgICAgICAgIHBhcmVudElkLFxuICAgICAgICAgICAgY291bnQsXG4gICAgICAgICAgICBjb21wb25lbnRDb3VudEhpbnQgfHwgMCxcbiAgICAgICAgICAgIHRoaXMuZW5naW5lLndhc20uX3RlbXBNZW0sXG4gICAgICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl90ZW1wTWVtU2l6ZSA+PiAxXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGlkcyA9IHRoaXMuZW5naW5lLndhc20uX3RlbXBNZW1VaW50MTYuc3ViYXJyYXkoMCwgYWN0dWFsQ291bnQpO1xuICAgICAgICBjb25zdCB3cmFwcGVyID0gdGhpcy53cmFwLmJpbmQodGhpcyk7XG4gICAgICAgIGNvbnN0IG9iamVjdHMgPSBBcnJheS5mcm9tKGlkcywgd3JhcHBlcik7XG4gICAgICAgIHJldHVybiBvYmplY3RzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByZS1hbGxvY2F0ZSBtZW1vcnkgZm9yIGEgZ2l2ZW4gYW1vdW50IG9mIG9iamVjdHMgYW5kIGNvbXBvbmVudHMuXG4gICAgICpcbiAgICAgKiBXaWxsIHByb3ZpZGUgYmV0dGVyIHBlcmZvcm1hbmNlIGZvciBhZGRpbmcgb2JqZWN0cyBsYXRlciB3aXRoIHtAbGluayBTY2VuZSNhZGRPYmplY3R9XG4gICAgICogYW5kIHtAbGluayBTY2VuZSNhZGRPYmplY3RzfS5cbiAgICAgKlxuICAgICAqIEJ5IHByb3ZpZGluZyB1cGZyb250IGluZm9ybWF0aW9uIG9mIGhvdyBtYW55IG9iamVjdHMgd2lsbCBiZSByZXF1aXJlZCxcbiAgICAgKiB0aGUgZW5naW5lIGlzIGFibGUgdG8gYmF0Y2gtYWxsb2NhdGUgdGhlIHJlcXVpcmVkIG1lbW9yeSByYXRoZXIgdGhhblxuICAgICAqIGNvbnNlcnZhdGl2ZWx5IGdyb3cgdGhlIG1lbW9yeSBpbiBzbWFsbCBzdGVwcy5cbiAgICAgKlxuICAgICAqICoqRXhwZXJpbWVudGFsOioqIFRoaXMgQVBJIG1pZ2h0IGNoYW5nZSBpbiB1cGNvbWluZyB2ZXJzaW9ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvYmplY3RDb3VudCBOdW1iZXIgb2Ygb2JqZWN0cyB0byBhZGQuXG4gICAgICogQHBhcmFtIGNvbXBvbmVudENvdW50UGVyVHlwZSBBbW91bnQgb2YgY29tcG9uZW50cyB0b1xuICAgICAqICAgICAgYWxsb2NhdGUgZm9yIHtAbGluayBPYmplY3QzRC5hZGRDb21wb25lbnR9LCBlLmcuIGB7bWVzaDogMTAwLCBjb2xsaXNpb246IDIwMCwgXCJteS1jb21wXCI6IDEwMH1gLlxuICAgICAqIEBzaW5jZSAwLjguMTBcbiAgICAgKi9cbiAgICByZXNlcnZlT2JqZWN0cyhvYmplY3RDb3VudDogbnVtYmVyLCBjb21wb25lbnRDb3VudFBlclR5cGU6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4pIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbXBvbmVudENvdW50UGVyVHlwZSA9IGNvbXBvbmVudENvdW50UGVyVHlwZSB8fCB7fTtcblxuICAgICAgICBjb25zdCBuYW1lcyA9IE9iamVjdC5rZXlzKGNvbXBvbmVudENvdW50UGVyVHlwZSk7XG5cbiAgICAgICAgY29uc3QgY291bnRzUGVyVHlwZUluZGV4ID0gd2FzbS5fdGVtcE1lbUludDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9jb21wb25lbnRzLm1hbmFnZXJzQ291bnQ7ICsraSkge1xuICAgICAgICAgICAgY291bnRzUGVyVHlwZUluZGV4W2ldID0gMDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IG5hbWUgb2YgbmFtZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gY29tcG9uZW50Q291bnRQZXJUeXBlW25hbWVdO1xuICAgICAgICAgICAgY29uc3QgbmF0aXZlSW5kZXggPSB0aGlzLl9jb21wb25lbnRzLmdldE5hdGl2ZU1hbmFnZXIobmFtZSk7XG4gICAgICAgICAgICBjb3VudHNQZXJUeXBlSW5kZXhbbmF0aXZlSW5kZXggIT09IG51bGwgPyBuYXRpdmVJbmRleCA6IHRoaXMuX2NvbXBvbmVudHMuanNdICs9XG4gICAgICAgICAgICAgICAgY291bnQ7XG4gICAgICAgIH1cbiAgICAgICAgd2FzbS5fd2xfc2NlbmVfcmVzZXJ2ZV9vYmplY3RzKHRoaXMuX2luZGV4LCBvYmplY3RDb3VudCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUm9vdCBvYmplY3QncyBjaGlsZHJlbi5cbiAgICAgKlxuICAgICAqIFNlZSB7QGxpbmsgT2JqZWN0M0QuZ2V0Q2hpbGRyZW59IGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBEZXN0aW5hdGlvbiBhcnJheSwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCBgdGhpcy5jaGlsZHJlbkNvdW50YCBlbGVtZW50cy5cbiAgICAgKiBAcmV0dXJucyBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqL1xuICAgIGdldENoaWxkcmVuKG91dDogT2JqZWN0M0RbXSA9IG5ldyBBcnJheSh0aGlzLmNoaWxkcmVuQ291bnQpKTogT2JqZWN0M0RbXSB7XG4gICAgICAgIGNvbnN0IHJvb3QgPSB0aGlzLndyYXAoMCk7XG4gICAgICAgIHJldHVybiByb290LmdldENoaWxkcmVuKG91dCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVG9wLWxldmVsIG9iamVjdHMgb2YgdGhpcyBzY2VuZS5cbiAgICAgKlxuICAgICAqIFNlZSB7QGxpbmsgT2JqZWN0M0QuY2hpbGRyZW59IGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMi4wXG4gICAgICovXG4gICAgZ2V0IGNoaWxkcmVuKCk6IE9iamVjdDNEW10ge1xuICAgICAgICBjb25zdCByb290ID0gdGhpcy53cmFwKDApO1xuICAgICAgICByZXR1cm4gcm9vdC5jaGlsZHJlbjtcbiAgICB9XG5cbiAgICAvKiogVGhlIG51bWJlciBvZiBjaGlsZHJlbiBvZiB0aGUgcm9vdCBvYmplY3QuICovXG4gICAgZ2V0IGNoaWxkcmVuQ291bnQoKTogbnVtYmVyIHtcbiAgICAgICAgY29uc3Qgcm9vdCA9IHRoaXMud3JhcCgwKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX29iamVjdF9nZXRfY2hpbGRyZW5fY291bnQocm9vdC5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlYXJjaCBmb3Igb2JqZWN0cyBtYXRjaGluZyB0aGUgbmFtZS5cbiAgICAgKlxuICAgICAqIFNlZSB7QGxpbmsgT2JqZWN0M0QuZmluZEJ5TmFtZX0gZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSB0byBzZWFyY2ggZm9yLlxuICAgICAqIEBwYXJhbSByZWN1cnNpdmUgSWYgYHRydWVgLCB0aGUgbWV0aG9kIHdpbGwgbG9vayBhdCBhbGwgdGhlIG9iamVjdHMgb2ZcbiAgICAgKiAgICAgdGhpcyBzY2VuZS4gSWYgYGZhbHNlYCwgdGhpcyBtZXRob2Qgd2lsbCBvbmx5IHBlcmZvcm0gdGhlIHNlYXJjaCBpblxuICAgICAqICAgICByb290IG9iamVjdHMuXG4gICAgICogQHJldHVybnMgQW4gYXJyYXkgb2Yge0BsaW5rIE9iamVjdDNEfSBtYXRjaGluZyB0aGUgbmFtZS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjIuMFxuICAgICAqL1xuICAgIGZpbmRCeU5hbWUobmFtZTogc3RyaW5nLCByZWN1cnNpdmUgPSBmYWxzZSk6IE9iamVjdDNEW10ge1xuICAgICAgICBjb25zdCByb290ID0gdGhpcy53cmFwKDApO1xuICAgICAgICByZXR1cm4gcm9vdC5maW5kQnlOYW1lKG5hbWUsIHJlY3Vyc2l2ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VhcmNoIGZvciBhbGwgKip0b3AtbGV2ZWwqKiBvYmplY3RzIG1hdGNoaW5nIHRoZSBuYW1lLlxuICAgICAqXG4gICAgICogU2VlIHtAbGluayBPYmplY3QzRC5maW5kQnlOYW1lRGlyZWN0fSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIHRvIHNlYXJjaCBmb3IuXG4gICAgICogQHJldHVybnMgQW4gYXJyYXkgb2Yge0BsaW5rIE9iamVjdDNEfSBtYXRjaGluZyB0aGUgbmFtZS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjIuMFxuICAgICAqL1xuICAgIGZpbmRCeU5hbWVEaXJlY3QobmFtZTogc3RyaW5nKTogT2JqZWN0M0RbXSB7XG4gICAgICAgIGNvbnN0IHJvb3QgPSB0aGlzLndyYXAoMCk7XG4gICAgICAgIHJldHVybiByb290LmZpbmRCeU5hbWVEaXJlY3QobmFtZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VhcmNoIGZvciAqKmFsbCBvYmplY3RzKiogbWF0Y2hpbmcgdGhlIG5hbWUuXG4gICAgICpcbiAgICAgKiBTZWUge0BsaW5rIE9iamVjdDNELmZpbmRCeU5hbWVSZWN1cnNpdmV9IGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgdG8gc2VhcmNoIGZvci5cbiAgICAgKiBAcmV0dXJucyBBbiBhcnJheSBvZiB7QGxpbmsgT2JqZWN0M0R9IG1hdGNoaW5nIHRoZSBuYW1lLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMi4wXG4gICAgICovXG4gICAgZmluZEJ5TmFtZVJlY3Vyc2l2ZShuYW1lOiBzdHJpbmcpOiBPYmplY3QzRFtdIHtcbiAgICAgICAgY29uc3Qgcm9vdCA9IHRoaXMud3JhcCgwKTtcbiAgICAgICAgcmV0dXJuIHJvb3QuZmluZEJ5TmFtZVJlY3Vyc2l2ZShuYW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXcmFwIGFuIG9iamVjdCBJRCB1c2luZyB7QGxpbmsgT2JqZWN0fS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgbWV0aG9kIHBlcmZvcm1zIGNhY2hpbmcgYW5kIHdpbGwgcmV0dXJuIHRoZSBzYW1lXG4gICAgICogaW5zdGFuY2Ugb24gc3Vic2VxdWVudCBjYWxscy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvYmplY3RJZCBJRCBvZiB0aGUgb2JqZWN0IHRvIGNyZWF0ZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBvYmplY3RcbiAgICAgKi9cbiAgICB3cmFwKG9iamVjdElkOiBudW1iZXIpOiBPYmplY3QzRCB7XG4gICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5fb2JqZWN0Q2FjaGU7XG4gICAgICAgIGNvbnN0IG8gPSBjYWNoZVtvYmplY3RJZF0gfHwgKGNhY2hlW29iamVjdElkXSA9IG5ldyBPYmplY3QzRCh0aGlzLCBvYmplY3RJZCkpO1xuICAgICAgICByZXR1cm4gbztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXN0cm95IHRoZSBzY2VuZS5cbiAgICAgKlxuICAgICAqIEZvciBub3csIGRlc3Ryb3lpbmcgYSBzY2VuZSBkb2Vzbid0IHJlbW92ZSB0aGUgcmVzb3VyY2VzIGl0IHJlZmVyZW5jZXMuIFRodXMsXG4gICAgICogeW91IHdpbGwgbmVlZCB0byByZWxvYWQgYSBtYWluIHNjZW5lIHRvIGZyZWUgdGhlIG1lbW9yeS5cbiAgICAgKlxuICAgICAqIEZvciBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGRlc3RydWN0aW9uLCBoYXZlIGEgbG9vayBhdCB0aGUge0BsaW5rIFNjZW5lLmRlc3Ryb3l9IG1ldGhvZC5cbiAgICAgKi9cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBpZiAodGhpcy5fcGVuZGluZ0Rlc3Ryb3kgPiAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJdCdzIGZvcmJpZGRlbiB0byBkZXN0cm95IGEgc2NlbmUgZnJvbSBvbkRlc3Ryb3koKS5cIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcHhDYWxsYmFja3MuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5lbmdpbmUuX2Rlc3Ryb3lTY2VuZSh0aGlzKTtcbiAgICB9XG5cbiAgICAvKiBQdWJsaWMgR2V0dGVycyAmIFNldHRlcnMgKi9cblxuICAgIC8qKlxuICAgICAqIGB0cnVlYCBpZiB0aGUgc2NlbmUgaXMgYWN0aXZlLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIEFsd2F5cyBmYWxzZSBmb3Ige0BsaW5rIFByZWZhYn0gYW5kIHtAbGluayBQcmVmYWJHTFRGfS5cbiAgICAgKi9cbiAgICBnZXQgaXNBY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuZW5naW5lLndhc20uX3dsX3NjZW5lX2FjdGl2ZSh0aGlzLl9pbmRleCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVsYXRpdmUgZGlyZWN0b3J5IG9mIHRoZSBzY2VuZSB0aGF0IHdhcyBsb2FkZWQuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIHVzZWQgZm9yIGxvYWRpbmcgYW55IGZpbGVzIHJlbGF0aXZlIHRvIHRoZSBzY2VuZS5cbiAgICAgKi9cbiAgICBnZXQgYmFzZVVSTCgpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfc2NlbmVfZ2V0X2Jhc2VVUkwodGhpcy5faW5kZXgpO1xuICAgICAgICBpZiAoIXB0cikgcmV0dXJuICcnO1xuXG4gICAgICAgIHJldHVybiB3YXNtLlVURjhUb1N0cmluZyhwdHIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpbGVuYW1lIHVzZWQgd2hlbiBsb2FkaW5nIHRoZSBmaWxlLlxuICAgICAqXG4gICAgICogSWYgdGhlIHNjZW5lcyB3YXMgbG9hZGVkIGZyb20gbWVtb3J5IGFuZCBubyBmaWxlbmFtZSB3YXMgcHJvdmlkZWQsXG4gICAgICogdGhpcyBhY2Nlc3NvciB3aWxsIHJldHVybiBhbiBlbXB0eSBzdHJpbmcuXG4gICAgICovXG4gICAgZ2V0IGZpbGVuYW1lKCk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9zY2VuZV9nZXRfZmlsZW5hbWUodGhpcy5faW5kZXgpO1xuICAgICAgICBpZiAoIXB0cikgcmV0dXJuICcnO1xuICAgICAgICByZXR1cm4gd2FzbS5VVEY4VG9TdHJpbmcocHRyKTtcbiAgICB9XG5cbiAgICAvKiogQW5pbWF0aW9uIHJlc291cmNlcyAqL1xuICAgIGdldCBhbmltYXRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYW5pbWF0aW9ucztcbiAgICB9XG5cbiAgICAvKiogU2tpbiByZXNvdXJjZXMgKi9cbiAgICBnZXQgc2tpbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9za2lucztcbiAgICB9XG5cbiAgICAvKiogSG9zdGluZyBlbmdpbmUgaW5zdGFuY2UuICovXG4gICAgZ2V0IGVuZ2luZSgpOiBXb25kZXJsYW5kRW5naW5lIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBgdHJ1ZWAgaWYgdGhlIG9iamVjdCBpcyBkZXN0cm95ZWQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqXG4gICAgICogSWYge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUuZXJhc2VQcm90b3R5cGVPbkRlc3Ryb3l9IGlzIGB0cnVlYCxcbiAgICAgKiByZWFkaW5nIGEgY2xhc3MgYXR0cmlidXRlIC8gbWV0aG9kIHdpbGwgdGhyb3cuXG4gICAgICovXG4gICAgZ2V0IGlzRGVzdHJveWVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5kZXggPCAwO1xuICAgIH1cblxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBpZiAodGhpcy5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgcmV0dXJuICdTY2VuZShkZXN0cm95ZWQpJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYFNjZW5lKCcke3RoaXMuZmlsZW5hbWV9JywgJHt0aGlzLl9pbmRleH0pYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgdGhhdCB0aGUgaW5wdXQncyBzY2VuZSBpcyB0aGUgc2FtZSBhcyB0aGlzIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogSXQgaXMgZm9yYmlkZGVuIHRvIG1peCBvYmplY3RzIGFuZCBjb21wb25lbnRzIGZyb20gZGlmZmVyZW50IHNjZW5lcywgZS5nLixcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3Qgb2JqQSA9IHNjZW5lQS5hZGRPYmplY3QoKTtcbiAgICAgKiBjb25zdCBvYmpCID0gc2NlbmVBLmFkZE9iamVjdCgpO1xuICAgICAqIG9iakEucGFyZW50ID0gb2JqQjsgLy8gVGhyb3dzXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgT2JqZWN0IC8gY29tcG9uZW50IHRvIGNoZWNrLlxuICAgICAqXG4gICAgICogQHRocm93cyBJZiBvdGhlcidzIHNjZW5lIGlzbid0IHRoZSBzYW1lIHJlZmVyZW5jZSBhcyB0aGlzLlxuICAgICAqL1xuICAgIGFzc2VydE9yaWdpbihvdGhlcjogT2JqZWN0M0QgfCBDb21wb25lbnQgfCBTY2VuZVJlc291cmNlIHwgdW5kZWZpbmVkIHwgbnVsbCkge1xuICAgICAgICBpZiAob3RoZXIgJiYgKG90aGVyLnNjZW5lIGFzIFByZWZhYikgIT09IHRoaXMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQXR0ZW1wdCB0byB1c2UgJHtvdGhlcn0gZnJvbSAke290aGVyLnNjZW5lfSBpbiAke3RoaXN9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEb3dubG9hZCBkZXBlbmRlbmNpZXMgYW5kIGluaXRpYWxpemUgdGhlIHNjZW5lLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9pbml0aWFsaXplKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9zY2VuZV9pbml0aWFsaXplKHRoaXMuX2luZGV4KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtIGNsZWFudXAgdXBvbiBvYmplY3QgZGVzdHJ1Y3Rpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbG9jYWxJZCBUaGUgaWQgdG8gZGVzdHJveS5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfZGVzdHJveU9iamVjdChsb2NhbElkOiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLl9vYmplY3RDYWNoZVtsb2NhbElkXTtcbiAgICAgICAgaWYgKCFpbnN0YW5jZSkgcmV0dXJuO1xuXG4gICAgICAgIChpbnN0YW5jZS5faWQgYXMgbnVtYmVyKSA9IC0xO1xuICAgICAgICAoaW5zdGFuY2UuX2xvY2FsSWQgYXMgbnVtYmVyKSA9IC0xO1xuXG4gICAgICAgIC8qIERlc3Ryb3kgdGhlIHByb3RvdHlwZSBvZiB0aGlzIGluc3RhbmNlIHRvIGF2b2lkIHVzaW5nIGEgZGFuZ2xpbmcgb2JqZWN0ICovXG4gICAgICAgIGlmICh0aGlzLmVuZ2luZS5lcmFzZVByb3RvdHlwZU9uRGVzdHJveSAmJiBpbnN0YW5jZSkge1xuICAgICAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGluc3RhbmNlLCBEZXN0cm95ZWRPYmplY3RJbnN0YW5jZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBSZW1vdmUgZnJvbSB0aGUgY2FjaGUgdG8gYXZvaWQgc2lkZS1lZmZlY3RzIHdoZW5cbiAgICAgICAgICogcmUtY3JlYXRpbmcgYW4gb2JqZWN0IHdpdGggdGhlIHNhbWUgaWQuICovXG4gICAgICAgIHRoaXMuX29iamVjdENhY2hlW2xvY2FsSWRdID0gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBKYXZhU2NyaXB0IG9ubHkgZGVzdHJ1dGlvbiBvZiBhIGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqIEBub3RlIFByZWZlciB0byB1c2UgdGhpcyBtZXRob2QgdG8gbWFudWFsbHkgY2FsbGluZyB0aGUgZGVzdHJ1Y3Rpb24gY29kZSxcbiAgICAgKiB0byBwcm90ZWN0IHRoZSB1c2VyIGZyb20gaWxsZWdhbCBtZXRob2QgY2FsbHMgaW4ge0BsaW5rIENvbXBvbmVudC5vbkRlc3Ryb3l9LlxuICAgICAqXG4gICAgICogQHBhcmFtIG1hbmFnZXIgVGhlIGNvbXBvbmVudCBtYW5hZ2VyIGluZGV4LlxuICAgICAqIEBwYXJhbSBpZCBUaGUgY29tcG9uZW50IGlkLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9kZXN0cm95Q29tcG9uZW50KG1hbmFnZXI6IG51bWJlciwgaWQ6IG51bWJlcikge1xuICAgICAgICBjb25zdCBjb21wb25lbnQgPSB0aGlzLl9jb21wb25lbnRzLmdldChtYW5hZ2VyLCBpZCk7XG4gICAgICAgICsrdGhpcy5fcGVuZGluZ0Rlc3Ryb3k7XG4gICAgICAgIGNvbXBvbmVudD8uX3RyaWdnZXJPbkRlc3Ryb3koKTtcbiAgICAgICAgLS10aGlzLl9wZW5kaW5nRGVzdHJveTtcbiAgICB9XG59XG4iLCAiLyoqXG4gKiBTY2hlZHVsZSBhIHRpbWVvdXQsIHJlc29sdmluZyBpbiBgdGltZWAgbWlsbGlzZWNvbmRzLlxuICpcbiAqIEBub3RlIGBzZXRUaW1lb3V0YCBiZWluZyBhIG1hY3JvLXRhc2ssIHRoaXMgbWV0aG9kIGNhblxuICogYmUgdXNlIGFzIGEgZGVib3VuY2UgY2FsbC5cbiAqXG4gKiBAcGFyYW0gdGltZSBUaGUgdGltZSB1bnRpbCBpdCByZXNvbHZlcywgaW4gbWlsbGlzZWNvbmRzLlxuICogQHJldHVybnMgQSBwcm9taXNlIHJlc29sdmluZyBpbiBgdGltZWAgbXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0aW1lb3V0KHRpbWU6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzKSA9PiBzZXRUaW1lb3V0KHJlcywgdGltZSkpO1xufVxuXG4vKipcbiAqIENsYW1wIHRoZSB2YWx1ZSBpbiB0aGUgcmFuZ2UgW21pbjsgbWF4XS5cbiAqXG4gKiBAcGFyYW0gdmFsIFRoZSB2YWx1ZSB0byBjbGFtcC5cbiAqIEBwYXJhbSBtaW4gVGhlIG1pbmltdW0gdmFsdWUgKGluY2x1c2l2ZSkuXG4gKiBAcGFyYW0gbWF4IFRoZSBtYXhpbXVtIHZhbHVlIChpbmNsdXNpdmUpLlxuICogQHJldHVybnMgVGhlIGNsYW1wZWQgdmFsdWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGFtcCh2YWw6IG51bWJlciwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5tYXgoTWF0aC5taW4obWF4LCB2YWwpLCBtaW4pO1xufVxuXG4vKipcbiAqIENhcGl0YWxpemUgdGhlIGZpcnN0IGxldHRlciBpbiBhIHN0cmluZy5cbiAqXG4gKiBAbm90ZSBUaGUgc3RyaW5nIG11c3QgYmUgVVRGLTguXG4gKlxuICogQHBhcmFtIHN0ciBUaGUgc3RyaW5nIHRvIGZvcm1hdC5cbiAqIEByZXR1cm5zIFRoZSBzdHJpbmcgd2l0aCB0aGUgZmlyc3QgbGV0dGVyIGNhcGl0YWxpemVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FwaXRhbGl6ZUZpcnN0VVRGOChzdHI6IHN0cmluZykge1xuICAgIHJldHVybiBgJHtzdHJbMF0udG9VcHBlckNhc2UoKX0ke3N0ci5zdWJzdHJpbmcoMSl9YDtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBwcm94eSB0aHJvd2luZyBkZXN0cm95ZWQgZXJyb3JzIHVwb24gYWNjZXNzLlxuICpcbiAqIEBwYXJhbSB0eXBlIFRoZSB0eXBlIHRvIGRpc3BsYXkgdXBvbiBlcnJvclxuICogQHJldHVybnMgVGhlIHByb3h5IGluc3RhbmNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVEZXN0cm95ZWRQcm94eSh0eXBlOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gbmV3IFByb3h5KFxuICAgICAgICB7fSxcbiAgICAgICAge1xuICAgICAgICAgICAgZ2V0KF8sIHBhcmFtOiBzdHJpbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyYW0gPT09ICdpc0Rlc3Ryb3llZCcpIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHJlYWQgJyR7cGFyYW19JyBvZiBkZXN0cm95ZWQgJHt0eXBlfWApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldChfLCBwYXJhbTogc3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3Qgd3JpdGUgJyR7cGFyYW19JyBvZiBkZXN0cm95ZWQgJHt0eXBlfWApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICk7XG59XG4iLCAiLyoqXG4gKiBUeXBlc1xuICovXG5cbmltcG9ydCB7bmF0aXZlUHJvcGVydHksIGVudW1lcmFibGV9IGZyb20gJy4vZGVjb3JhdG9ycy5qcyc7XG5pbXBvcnQge1dvbmRlcmxhbmRFbmdpbmV9IGZyb20gJy4vZW5naW5lLmpzJztcbmltcG9ydCB7aXNJbWFnZUxpa2UsIGlzTnVtYmVyLCBpc1N0cmluZ30gZnJvbSAnLi91dGlscy9vYmplY3QuanMnO1xuaW1wb3J0IHtFbWl0dGVyfSBmcm9tICcuL3V0aWxzL2V2ZW50LmpzJztcbmltcG9ydCB7TWF0ZXJpYWx9IGZyb20gJy4vcmVzb3VyY2VzL21hdGVyaWFsLW1hbmFnZXIuanMnO1xuaW1wb3J0IHtDb21wb25lbnRQcm9wZXJ0eSwgVHlwZSwgZGVmYXVsdFByb3BlcnR5Q2xvbmVyfSBmcm9tICcuL3Byb3BlcnR5LmpzJztcbmltcG9ydCB7V0FTTX0gZnJvbSAnLi93YXNtLmpzJztcbmltcG9ydCB7Q29uc3RydWN0b3IsIEltYWdlTGlrZSwgTnVtYmVyQXJyYXksIFR5cGVkQXJyYXksIFR5cGVkQXJyYXlDdG9yfSBmcm9tICcuL3R5cGVzLmpzJztcbmltcG9ydCB7UmVzb3VyY2UsIFNjZW5lUmVzb3VyY2V9IGZyb20gJy4vcmVzb3VyY2VzL3Jlc291cmNlLmpzJztcbmltcG9ydCB7UHJlZmFifSBmcm9tICcuL3ByZWZhYi5qcyc7XG5pbXBvcnQge1NjZW5lfSBmcm9tICcuL3NjZW5lLmpzJztcbmltcG9ydCB7Y3JlYXRlRGVzdHJveWVkUHJveHl9IGZyb20gJy4vdXRpbHMvbWlzYy5qcyc7XG5cbi8qKlxuICogQ29tcG9uZW50IGNvbnN0cnVjdG9yIHR5cGUuXG4gKlxuICogRm9yIG1vcmUgaW5mb3JtYXRpb24sIHBsZWFzZSBoYXZlIGEgbG9vayBhdCB0aGUge0BsaW5rIENvbXBvbmVudH0gY2xhc3MuXG4gKi9cbmV4cG9ydCB0eXBlIENvbXBvbmVudENvbnN0cnVjdG9yPFQgZXh0ZW5kcyBDb21wb25lbnQgPSBDb21wb25lbnQ+ID0ge1xuICAgIG5ldyAoc2NlbmU6IFByZWZhYiwgbWFuYWdlcjogbnVtYmVyLCBpZDogbnVtYmVyKTogVDtcbn0gJiB7XG4gICAgX2lzQmFzZUNvbXBvbmVudDogYm9vbGVhbjtcbiAgICBfcHJvcGVydHlPcmRlcjogc3RyaW5nW107XG4gICAgVHlwZU5hbWU6IHN0cmluZztcbiAgICBQcm9wZXJ0aWVzOiBSZWNvcmQ8c3RyaW5nLCBDb21wb25lbnRQcm9wZXJ0eT47XG4gICAgSW5oZXJpdFByb3BlcnRpZXM/OiBib29sZWFuO1xuICAgIG9uUmVnaXN0ZXI/OiAoZW5naW5lOiBXb25kZXJsYW5kRW5naW5lKSA9PiB2b2lkO1xufTtcblxuLyoqXG4gKiBDb21wb25lbnQgcHJvdG90eXBlIGludGVyZmFjZS5cbiAqXG4gKiBVc2VyIGNvbXBvbmVudCdzIHNob3VsZCBoYXZlIHRoZSBzYW1lIHN0cnVjdHVyZS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDb21wb25lbnRQcm90byB7XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIHRoZSBjb21wb25lbnQgaW5zdGFudGlhdGlvbi5cbiAgICAgKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgcGxlYXNlIGhhdmUgYSBsb29rIGF0IHtAbGluayBDb21wb25lbnQuaW5pdH0uXG4gICAgICovXG4gICAgaW5pdD86ICgpID0+IHZvaWQ7XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIHRoZSBjb21wb25lbnQgaXMgYWN0aXZhdGVkIGZvciB0aGUgZmlyc3QgdGltZS5cbiAgICAgKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgcGxlYXNlIGhhdmUgYSBsb29rIGF0IHtAbGluayBDb21wb25lbnQuc3RhcnR9LlxuICAgICAqL1xuICAgIHN0YXJ0PzogKCkgPT4gdm9pZDtcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgb25jZSBwZXIgZnJhbWUuXG4gICAgICogRm9yIG1vcmUgaW5mb3JtYXRpb24sIHBsZWFzZSBoYXZlIGEgbG9vayBhdCB7QGxpbmsgQ29tcG9uZW50LnVwZGF0ZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZHQgRGVsdGEgdGltZSwgdGltZSBzaW5jZSBsYXN0IHVwZGF0ZS5cbiAgICAgKi9cbiAgICB1cGRhdGU/OiAoZHQ6IG51bWJlcikgPT4gdm9pZDtcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiB0aGUgY29tcG9uZW50IGdvZXMgZnJvbSBkZWFjdGl2YXRlZCB0byBhY3RpdmF0ZWQuXG4gICAgICogRm9yIG1vcmUgaW5mb3JtYXRpb24sIHBsZWFzZSBoYXZlIGEgbG9vayBhdCB7QGxpbmsgQ29tcG9uZW50Lm9uQWN0aXZhdGV9LlxuICAgICAqL1xuICAgIG9uQWN0aXZhdGU/OiAoKSA9PiB2b2lkO1xuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIHRoZSBjb21wb25lbnQgZ29lcyBmcm9tIGFjdGl2YXRlZCB0byBkZWFjdGl2YXRlZC5cbiAgICAgKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgcGxlYXNlIGhhdmUgYSBsb29rIGF0IHtAbGluayBDb21wb25lbnQub25EZWFjdGl2YXRlfS5cbiAgICAgKi9cbiAgICBvbkRlYWN0aXZhdGU/OiAoKSA9PiB2b2lkO1xuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgcmVtb3ZlZCBmcm9tIGl0cyBvYmplY3QuXG4gICAgICogRm9yIG1vcmUgaW5mb3JtYXRpb24sIHBsZWFzZSBoYXZlIGEgbG9vayBhdCB7QGxpbmsgQ29tcG9uZW50Lm9uRGVzdHJveX0uXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC45LjBcbiAgICAgKi9cbiAgICBvbkRlc3Ryb3k/OiAoKSA9PiB2b2lkO1xufVxuXG4vKipcbiAqIENhbGxiYWNrIHRyaWdnZXJlZCBvbiBjb2xsaXNpb24gZXZlbnQuXG4gKlxuICogQHBhcmFtIHR5cGUgVHlwZSBvZiB0aGUgZXZlbnQuXG4gKiBAcGFyYW0gb3RoZXIgT3RoZXIgY29tcG9uZW50IHRoYXQgd2FzICh1biljb2xsaWRlZCB3aXRoXG4gKi9cbmV4cG9ydCB0eXBlIENvbGxpc2lvbkNhbGxiYWNrID0gKHR5cGU6IENvbGxpc2lvbkV2ZW50VHlwZSwgb3RoZXI6IFBoeXNYQ29tcG9uZW50KSA9PiB2b2lkO1xuXG4vKiogQHRvZG8gUmVtb3ZlIGF0IDEuMC4wICovXG5kZWNsYXJlIGNvbnN0IFdMOiBXb25kZXJsYW5kRW5naW5lO1xuXG4vKipcbiAqIFdvbmRlcmxhbmQgRW5naW5lIEFQSVxuICogQG5hbWVzcGFjZSBXTFxuICovXG5cbi8qKlxuICogRGVmYXVsdCBzZXQgb2YgbG9nZ2luZyB0YWdzIHVzZWQgYnkgdGhlIEFQSS5cbiAqL1xuZXhwb3J0IGVudW0gTG9nVGFnIHtcbiAgICAvKiogSW5pdGlhbGl6YXRpb24sIGNvbXBvbmVudCByZWdpc3RyYXRpb24sIGV0Yy4uLiAqL1xuICAgIEVuZ2luZSA9IDAsXG4gICAgLyoqIFNjZW5lIGxvYWRpbmcgKi9cbiAgICBTY2VuZSA9IDEsXG4gICAgLyoqIENvbXBvbmVudCBpbml0LCB1cGRhdGUsIGV0Yy4uLiAqL1xuICAgIENvbXBvbmVudCA9IDIsXG59XG5cbi8qKlxuICogQ29sbGlkZXIgdHlwZSBlbnVtIGZvciB7QGxpbmsgQ29sbGlzaW9uQ29tcG9uZW50fS5cbiAqL1xuZXhwb3J0IGVudW0gQ29sbGlkZXIge1xuICAgIC8qKlxuICAgICAqICoqU3BoZXJlIENvbGxpZGVyKio6XG4gICAgICpcbiAgICAgKiBTaW1wbGVzdCBhbmQgbW9zdCBwZXJmb3JtYW50IGNvbGxpc2lvbiBzaGFwZS4gSWYgdGhpcyB0eXBlIGlzIHNldCBvbiBhXG4gICAgICoge0BsaW5rIENvbGxpc2lvbkNvbXBvbmVudH0sIG9ubHkgdGhlIGZpcnN0IGNvbXBvbmVudCBvZlxuICAgICAqIHtAbGluayBDb2xsaXNpb25Db21wb25lbnQjZXh0ZW50c30gd2lsbCBiZSB1c2VkIHRvIGRldGVybWluZSB0aGUgcmFkaXVzLlxuICAgICAqL1xuICAgIFNwaGVyZSA9IDAsXG5cbiAgICAvKipcbiAgICAgKiAqKkF4aXMgQWxpZ25lZCBCb3VuZGluZyBCb3ggQ29sbGlkZXIqKjpcbiAgICAgKlxuICAgICAqIEJveCB0aGF0IGlzIGFsd2F5cyBhbGlnbmVkIHRvIFhZWiBheGlzLiBJdCBjYW5ub3QgYmUgcm90YXRlZCBidXQgaXMgbW9yZVxuICAgICAqIGVmZmljaWVudCB0aGFuIHtAbGluayBDb2xsaWRlci5Cb3h9LlxuICAgICAqL1xuICAgIEF4aXNBbGlnbmVkQm94ID0gMSxcblxuICAgIC8qKlxuICAgICAqICoqQWxpZ25lZCBCb3VuZGluZyBCb3ggQ29sbGlkZXIqKjpcbiAgICAgKlxuICAgICAqIEJveCB0aGF0IG1hdGNoZXMgdGhlIG9iamVjdCdzIHJvdGF0aW9uIGFuZCB0cmFuc2xhdGlvbiBjb3JyZWN0bHkuIFRoaXNcbiAgICAgKiBpcyB0aGUgbGVhc3QgZWZmaWNpZW50IGNvbGxpZGVyIGFuZCBzaG91bGQgb25seSBiZSBjaG9zZW4gb3ZlclxuICAgICAqIHtAbGluayBDb2xsaWRlci5TcGhlcmV9IGFuZCB7QGxpbmsgQ29sbGlkZXIuQXhpc0FsaWduZWRCb3h9IGlmIHJlYWxseVxuICAgICAqIG5lY2Vzc2FyeS5cbiAgICAgKi9cbiAgICBCb3ggPSAyLFxufVxuXG4vKipcbiAqIEFsaWdubWVudCB0eXBlIGVudW0gZm9yIHtAbGluayBUZXh0Q29tcG9uZW50fS5cbiAqL1xuZXhwb3J0IGVudW0gQWxpZ25tZW50IHtcbiAgICAvKiogVGV4dCBzdGFydCBpcyBhdCBvYmplY3Qgb3JpZ2luICovXG4gICAgTGVmdCA9IDAsXG5cbiAgICAvKiogVGV4dCBjZW50ZXIgaXMgYXQgb2JqZWN0IG9yaWdpbiAqL1xuICAgIENlbnRlciA9IDEsXG5cbiAgICAvKiogVGV4dCBlbmQgaXMgYXQgb2JqZWN0IG9yaWdpbiAqL1xuICAgIFJpZ2h0ID0gMixcbn1cblxuLyoqXG4gKiBWZXJ0aWNhbCBhbGlnbm1lbnQgdHlwZSBlbnVtIGZvciB7QGxpbmsgVGV4dENvbXBvbmVudH0uXG4gKi9cbmV4cG9ydCBlbnVtIFZlcnRpY2FsQWxpZ25tZW50IHtcbiAgICAvKiogVGV4dCBsaW5lIGlzIGF0IG9iamVjdCBvcmlnaW4gKi9cbiAgICBMaW5lID0gMCxcblxuICAgIC8qKiBUZXh0IG1pZGRsZSBpcyBhdCBvYmplY3Qgb3JpZ2luICovXG4gICAgTWlkZGxlID0gMSxcblxuICAgIC8qKiBUZXh0IHRvcCBpcyBhdCBvYmplY3Qgb3JpZ2luICovXG4gICAgVG9wID0gMixcblxuICAgIC8qKiBUZXh0IGJvdHRvbSBpcyBhdCBvYmplY3Qgb3JpZ2luICovXG4gICAgQm90dG9tID0gMyxcbn1cblxuLyoqXG4gKiBKdXN0aWZpY2F0aW9uIHR5cGUgZW51bSBmb3Ige0BsaW5rIFRleHRDb21wb25lbnR9LlxuICpcbiAqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIFZlcnRpY2FsQWxpZ25tZW50fSBpbnN0ZWFkLlxuICovXG5leHBvcnQgY29uc3QgSnVzdGlmaWNhdGlvbiA9IFZlcnRpY2FsQWxpZ25tZW50O1xuXG4vKipcbiAqIEVmZmVjdCB0eXBlIGVudW0gZm9yIHtAbGluayBUZXh0Q29tcG9uZW50fS5cbiAqL1xuZXhwb3J0IGVudW0gVGV4dEVmZmVjdCB7XG4gICAgLyoqIFRleHQgaXMgcmVuZGVyZWQgbm9ybWFsbHkgKi9cbiAgICBOb25lID0gMCxcblxuICAgIC8qKiBUZXh0IGlzIHJlbmRlcmVkIHdpdGggYW4gb3V0bGluZSAqL1xuICAgIE91dGxpbmUgPSAxLFxufVxuXG4vKipcbiAqIFdyYXAgbW9kZSBlbnVtIGZvciB7QGxpbmsgVGV4dENvbXBvbmVudH0uXG4gKlxuICogQHNpbmNlIDEuMi4xXG4gKi9cbmV4cG9ydCBlbnVtIFRleHRXcmFwTW9kZSB7XG4gICAgLyoqIFRleHQgZG9lc24ndCB3cmFwIGF1dG9tYXRpY2FsbHksIG9ubHkgd2l0aCBleHBsaWNpdCBuZXdsaW5lICovXG4gICAgTm9uZSA9IDAsXG5cbiAgICAvKiogVGV4dCB3cmFwcyBhdCB3b3JkIGJvdW5kYXJpZXMgKi9cbiAgICBTb2Z0ID0gMSxcblxuICAgIC8qKiBUZXh0IHdyYXBzIGFueXdoZXJlICovXG4gICAgSGFyZCA9IDIsXG5cbiAgICAvKiogVGV4dCBpcyBjdXQgb2ZmICovXG4gICAgQ2xpcCA9IDMsXG59XG5cbi8qKlxuICogSW5wdXQgdHlwZSBlbnVtIGZvciB7QGxpbmsgSW5wdXRDb21wb25lbnR9LlxuICovXG5leHBvcnQgZW51bSBJbnB1dFR5cGUge1xuICAgIC8qKiBIZWFkIGlucHV0ICovXG4gICAgSGVhZCA9IDAsXG5cbiAgICAvKiogTGVmdCBleWUgaW5wdXQgKi9cbiAgICBFeWVMZWZ0ID0gMSxcblxuICAgIC8qKiBSaWdodCBleWUgaW5wdXQgKi9cbiAgICBFeWVSaWdodCA9IDIsXG5cbiAgICAvKiogTGVmdCBjb250cm9sbGVyIGlucHV0ICovXG4gICAgQ29udHJvbGxlckxlZnQgPSAzLFxuXG4gICAgLyoqIFJpZ2h0IGNvbnRyb2xsZXIgaW5wdXQgKi9cbiAgICBDb250cm9sbGVyUmlnaHQgPSA0LFxuXG4gICAgLyoqIExlZnQgcmF5IGlucHV0ICovXG4gICAgUmF5TGVmdCA9IDUsXG5cbiAgICAvKiogUmlnaHQgcmF5IGlucHV0ICovXG4gICAgUmF5UmlnaHQgPSA2LFxufVxuXG4vKipcbiAqIFByb2plY3Rpb24gdHlwZSBlbnVtIGZvciB7QGxpbmsgVmlld0NvbXBvbmVudH0uXG4gKi9cbmV4cG9ydCBlbnVtIFByb2plY3Rpb25UeXBlIHtcbiAgICAvKiogUGVyc3BlY3RpdmUgcHJvamVjdGlvbiAqL1xuICAgIFBlcnNwZWN0aXZlID0gMCxcblxuICAgIC8qKiBPcnRob2dyYXBoaWMgcHJvamVjdGlvbiAqL1xuICAgIE9ydGhvZ3JhcGhpYyA9IDEsXG59XG5cbi8qKlxuICogTGlnaHQgdHlwZSBlbnVtIGZvciB7QGxpbmsgTGlnaHRDb21wb25lbnR9LlxuICovXG5leHBvcnQgZW51bSBMaWdodFR5cGUge1xuICAgIC8qKiBQb2ludCBsaWdodCAqL1xuICAgIFBvaW50ID0gMCxcblxuICAgIC8qKiBTcG90IGxpZ2h0ICovXG4gICAgU3BvdCA9IDEsXG5cbiAgICAvKiogU3VuIGxpZ2h0IC8gRGlyZWN0aW9uYWwgbGlnaHQgKi9cbiAgICBTdW4gPSAyLFxufVxuXG4vKipcbiAqIEFuaW1hdGlvbiBzdGF0ZSBvZiB7QGxpbmsgQW5pbWF0aW9uQ29tcG9uZW50fS5cbiAqL1xuZXhwb3J0IGVudW0gQW5pbWF0aW9uU3RhdGUge1xuICAgIC8qKiBBbmltYXRpb24gaXMgY3VycmVudGx5IHBsYXlpbmcgKi9cbiAgICBQbGF5aW5nID0gMCxcblxuICAgIC8qKiBBbmltYXRpb24gaXMgcGF1c2VkIGFuZCB3aWxsIGNvbnRpbnVlIGF0IGN1cnJlbnQgcGxheWJhY2tcbiAgICAgKiB0aW1lIG9uIHtAbGluayBBbmltYXRpb25Db21wb25lbnQjcGxheX0gKi9cbiAgICBQYXVzZWQgPSAxLFxuXG4gICAgLyoqIEFuaW1hdGlvbiBpcyBzdG9wcGVkICovXG4gICAgU3RvcHBlZCA9IDIsXG59XG5cbi8qKlxuICogUm9vdCBtb3Rpb24gbW9kZSBvZiB7QGxpbmsgQW5pbWF0aW9uQ29tcG9uZW50fS5cbiAqL1xuZXhwb3J0IGVudW0gUm9vdE1vdGlvbk1vZGUge1xuICAgIC8qKiBEbyBub3RoaW5nICovXG4gICAgTm9uZSA9IDAsXG4gICAgLyoqIE1vdmUgYW5kIHJvdGF0ZSByb290IHdpdGggdGhlIGRlbHRhIG9mIGl0cyBtb3Rpb24gKi9cbiAgICBBcHBseVRvT3duZXIgPSAxLFxuICAgIC8qKiBTdG9yZSB0aGUgbW90aW9uIHRvIGJlIHJldHJpZXZlZCBieSBhIEpTIHNjcmlwdCAqL1xuICAgIFNjcmlwdCA9IDIsXG59XG5cbi8qKlxuICogUmlnaWQgYm9keSBmb3JjZSBtb2RlIGZvciB7QGxpbmsgUGh5c1hDb21wb25lbnQjYWRkRm9yY2V9IGFuZCB7QGxpbmsgUGh5c1hDb21wb25lbnQjYWRkVG9ycXVlfS5cbiAqXG4gKiBbUGh5c1ggQVBJIFJlZmVyZW5jZV0oaHR0cHM6Ly9nYW1ld29ya3Nkb2NzLm52aWRpYS5jb20vUGh5c1gvNC4xL2RvY3VtZW50YXRpb24vcGh5c3hhcGkvZmlsZXMvc3RydWN0UHhGb3JjZU1vZGUuaHRtbClcbiAqL1xuZXhwb3J0IGVudW0gRm9yY2VNb2RlIHtcbiAgICAvKiogQXBwbHkgYXMgZm9yY2UgKi9cbiAgICBGb3JjZSA9IDAsXG5cbiAgICAvKiogQXBwbHkgYXMgaW1wdWxzZSAqL1xuICAgIEltcHVsc2UgPSAxLFxuXG4gICAgLyoqIEFwcGx5IGFzIHZlbG9jaXR5IGNoYW5nZSwgbWFzcyBkZXBlbmRlbnQgKi9cbiAgICBWZWxvY2l0eUNoYW5nZSA9IDIsXG5cbiAgICAvKiogQXBwbHkgYXMgbWFzcyBkZXBlbmRlbnQgZm9yY2UgKi9cbiAgICBBY2NlbGVyYXRpb24gPSAzLFxufVxuXG4vKipcbiAqIENvbGxpc2lvbiBjYWxsYmFjayBldmVudCB0eXBlLlxuICovXG5leHBvcnQgZW51bSBDb2xsaXNpb25FdmVudFR5cGUge1xuICAgIC8qKiBUb3VjaC9jb250YWN0IGRldGVjdGVkLCBjb2xsaXNpb24gKi9cbiAgICBUb3VjaCA9IDAsXG5cbiAgICAvKiogVG91Y2gvY29udGFjdCBsb3N0LCB1bmNvbGxpZGUgKi9cbiAgICBUb3VjaExvc3QgPSAxLFxuXG4gICAgLyoqIFRvdWNoL2NvbnRhY3Qgd2l0aCB0cmlnZ2VyIGRldGVjdGVkICovXG4gICAgVHJpZ2dlclRvdWNoID0gMixcblxuICAgIC8qKiBUb3VjaC9jb250YWN0IHdpdGggdHJpZ2dlciBsb3N0ICovXG4gICAgVHJpZ2dlclRvdWNoTG9zdCA9IDMsXG59XG5cbi8qKlxuICogUmlnaWQgYm9keSB7QGxpbmsgUGh5c1hDb21wb25lbnQjc2hhcGV9LlxuICpcbiAqIFtQaHlzWCBTREsgR3VpZGVdKGh0dHBzOi8vZ2FtZXdvcmtzZG9jcy5udmlkaWEuY29tL1BoeXNYLzQuMS9kb2N1bWVudGF0aW9uL3BoeXN4Z3VpZGUvTWFudWFsL0dlb21ldHJ5Lmh0bWwjZ2VvbWV0cnktdHlwZXMpLlxuICovXG5leHBvcnQgZW51bSBTaGFwZSB7XG4gICAgLyoqIE5vIHNoYXBlLiAqL1xuICAgIE5vbmUgPSAwLFxuXG4gICAgLyoqIFNwaGVyZSBzaGFwZS4gKi9cbiAgICBTcGhlcmUgPSAxLFxuXG4gICAgLyoqIENhcHN1bGUgc2hhcGUuICovXG4gICAgQ2Fwc3VsZSA9IDIsXG5cbiAgICAvKiogQm94IHNoYXBlLiAqL1xuICAgIEJveCA9IDMsXG5cbiAgICAvKiogUGxhbmUgc2hhcGUuICovXG4gICAgUGxhbmUgPSA0LFxuXG4gICAgLyoqIENvbnZleCBtZXNoIHNoYXBlLiAqL1xuICAgIENvbnZleE1lc2ggPSA1LFxuXG4gICAgLyoqIFRyaWFuZ2xlIG1lc2ggc2hhcGUuICovXG4gICAgVHJpYW5nbGVNZXNoID0gNixcbn1cblxuLyoqXG4gKiBNZXNoIGF0dHJpYnV0ZSBlbnVtLlxuICogQHNpbmNlIDAuOS4wXG4gKi9cbmV4cG9ydCBlbnVtIE1lc2hBdHRyaWJ1dGUge1xuICAgIC8qKiBQb3NpdGlvbiBhdHRyaWJ1dGUsIDMgZmxvYXRzICovXG4gICAgUG9zaXRpb24gPSAwLFxuXG4gICAgLyoqIFRhbmdlbnQgYXR0cmlidXRlLCA0IGZsb2F0cyAqL1xuICAgIFRhbmdlbnQgPSAxLFxuXG4gICAgLyoqIE5vcm1hbCBhdHRyaWJ1dGUsIDMgZmxvYXRzICovXG4gICAgTm9ybWFsID0gMixcblxuICAgIC8qKiBUZXh0dXJlIGNvb3JkaW5hdGUgYXR0cmlidXRlLCAyIGZsb2F0cyAqL1xuICAgIFRleHR1cmVDb29yZGluYXRlID0gMyxcblxuICAgIC8qKiBDb2xvciBhdHRyaWJ1dGUsIDQgZmxvYXRzLCBSR0JBLCByYW5nZSBgMGAgdG8gYDFgICovXG4gICAgQ29sb3IgPSA0LFxuXG4gICAgLyoqIEpvaW50IGlkIGF0dHJpYnV0ZSwgOCB1bnNpZ25lZCBpbnRzICovXG4gICAgSm9pbnRJZCA9IDUsXG5cbiAgICAvKiogSm9pbnQgd2VpZ2h0cyBhdHRyaWJ1dGUsIDggZmxvYXRzICovXG4gICAgSm9pbnRXZWlnaHQgPSA2LFxufVxuXG4vKiogUHJveHkgdXNlZCB0byBvdmVycmlkZSBwcm90b3R5cGVzIG9mIGRlc3Ryb3llZCBvYmplY3RzLiAqL1xuZXhwb3J0IGNvbnN0IERlc3Ryb3llZE9iamVjdEluc3RhbmNlID0gY3JlYXRlRGVzdHJveWVkUHJveHkoJ29iamVjdCcpO1xuLyoqIFByb3h5IHVzZWQgdG8gb3ZlcnJpZGUgcHJvdG90eXBlcyBvZiBkZXN0cm95ZWQgY29tcG9uZW50cy4gKi9cbmV4cG9ydCBjb25zdCBEZXN0cm95ZWRDb21wb25lbnRJbnN0YW5jZSA9IGNyZWF0ZURlc3Ryb3llZFByb3h5KCdjb21wb25lbnQnKTtcbi8qKiBQcm94eSB1c2VkIHRvIG92ZXJyaWRlIHByb3RvdHlwZXMgb2YgZGVzdHJveWVkIHByZWZhYnMuICovXG5leHBvcnQgY29uc3QgRGVzdHJveWVkUHJlZmFiSW5zdGFuY2UgPSBjcmVhdGVEZXN0cm95ZWRQcm94eSgncHJlZmFiL3NjZW5lJyk7XG5cbi8qKlxuICogQ2hlY2sgd2hldGhlciBhIGdpdmVuIHNoYXBlIGlzIGEgbWVzaCBvciBub3QuXG4gKlxuICogQHBhcmFtIHNoYXBlIFRoZSBzaGFwZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgc2hhcGUgaXMgYSBtZXNoLCBgZmFsc2VgIGlmIGl0J3MgYSBwcmltaXRpdmUuXG4gKi9cbmZ1bmN0aW9uIGlzTWVzaFNoYXBlKHNoYXBlOiBTaGFwZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBzaGFwZSA9PT0gU2hhcGUuQ29udmV4TWVzaCB8fCBzaGFwZSA9PT0gU2hhcGUuVHJpYW5nbGVNZXNoO1xufVxuXG4vKipcbiAqIENoZWNrIHdoZXRoZXIgYW4gb2JqZWN0IGlzIHRoZSB7QGxpbmsgQ29tcG9uZW50fSBjbGFzcyBvciBub3QsXG4gKlxuICogQG5vdGUgVGhpcyBtZXRob2QgaWYgZm9vbHByb29mIHRvIGRldmVsb3BlcnMgaW5hZHZlcnRlbnRseSB1c2luZ1xuICogbXVsdGlwbGUgV29uZGVybGFuZCBFbmdpbmUgQVBJIGluIGEgYnVuZGxlLlxuICpcbiAqIEBwYXJhbSB2YWx1ZSBUaGUgb2JqZWN0IHRvIGNoZWNrLlxuICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3QgaXMgYSB7QGxpbmsgQ29tcG9uZW50fSBjbGFzcywgYGZhbHNlYCBvdGhlcndpc2UuXG4gKi9cbmZ1bmN0aW9uIGlzQmFzZUNvbXBvbmVudENsYXNzKFxuICAgIHZhbHVlOiBDb25zdHJ1Y3Rvcjxhbnk+IHwgbnVsbFxuKTogdmFsdWUgaXMgQ29tcG9uZW50Q29uc3RydWN0b3Ige1xuICAgIHJldHVybiAoXG4gICAgICAgICEhdmFsdWUgJiZcbiAgICAgICAgdmFsdWUuaGFzT3duUHJvcGVydHkoJ19pc0Jhc2VDb21wb25lbnQnKSAmJlxuICAgICAgICAodmFsdWUgYXMgQ29tcG9uZW50Q29uc3RydWN0b3IpLl9pc0Jhc2VDb21wb25lbnRcbiAgICApO1xufVxuXG4vKipcbiAqIENvbnN0YW50cy5cbiAqL1xuXG4vKipcbiAqIERlZmF1bHQgd29ybGQgdXAgdmVjdG9yLlxuICovXG5jb25zdCBVUF9WRUNUT1IgPSBbMCwgMSwgMF07XG5cbmNvbnN0IFNRUlRfMyA9IE1hdGguc3FydCgzKTtcblxuLyoqXG4gKiBQcm92aWRlcyBhY2Nlc3MgdG8gYSBjb21wb25lbnQgaW5zdGFuY2Ugb2YgYSBzcGVjaWZpZWQgY29tcG9uZW50IHR5cGUuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBUaGlzIGlzIGhvdyB5b3UgZXh0ZW5kIHRoaXMgY2xhc3MgdG8gY3JlYXRlIHlvdXIgb3duIGN1c3RvbVxuICogY29tcG9uZW50OlxuICpcbiAqIGBgYGpzXG4gKiBpbXBvcnQgeyBDb21wb25lbnQsIFR5cGUgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuICpcbiAqIGV4cG9ydCBjbGFzcyBNeUNvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gKiAgICAgc3RhdGljIFR5cGVOYW1lID0gJ215LWNvbXBvbmVudCc7XG4gKiAgICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gKiAgICAgICAgIG15Qm9vbGVhbjogeyB0eXBlOiBUeXBlLkJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH0sXG4gKiAgICAgfTtcbiAqICAgICBzdGFydCgpIHt9XG4gKiAgICAgb25BY3RpdmF0ZSgpIHt9XG4gKiAgICAgb25EZWFjdGl2YXRlKCkge31cbiAqICAgICB1cGRhdGUoZHQpIHt9XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBJbiBhIGNvbXBvbmVudCwgdGhlIHNjZW5lIGNhbiBiZSBhY2Nlc3NlZCB1c2luZyBgdGhpcy5zY2VuZWA6XG4gKlxuICogYGBganNcbiAqIGltcG9ydCB7IENvbXBvbmVudCwgVHlwZSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4gKlxuICogZXhwb3J0IGNsYXNzIE15Q29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAqICAgICBzdGF0aWMgVHlwZU5hbWUgPSAnbXktY29tcG9uZW50JztcbiAqICAgICBzdGFydCgpIHtcbiAqICAgICAgICAgY29uc3Qgb2JqID0gdGhpcy5zY2VuZS5hZGRPYmplY3QoKTtcbiAqICAgICB9XG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIENvbXBvbmVudCB7XG4gICAgLyoqXG4gICAgICogUGFjayBzY2VuZSBpbmRleCBhbmQgY29tcG9uZW50IGlkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNjZW5lIFNjZW5lIGluZGV4LlxuICAgICAqIEBwYXJhbSBpZCBDb21wb25lbnQgaWQuXG4gICAgICogQHJldHVybnMgVGhlIHBhY2tlZCBpZC5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzdGF0aWMgX3BhY2soc2NlbmU6IG51bWJlciwgaWQ6IG51bWJlcikge1xuICAgICAgICByZXR1cm4gKHNjZW5lIDw8IDIyKSB8IGlkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGB0cnVlYCBmb3IgZXZlcnkgY2xhc3MgaW5oZXJpdGluZyBmcm9tIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGlzIGEgd29ya2Fyb3VuZCBmb3IgYGluc3RhbmNlb2ZgIHRvIHByZXZlbnQgaXNzdWVzXG4gICAgICogdGhhdCBjb3VsZCBhcmlzZSB3aGVuIGFuIGFwcGxpY2F0aW9uIGVuZHMgdXAgdXNpbmcgbXVsdGlwbGUgQVBJIHZlcnNpb25zLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHN0YXRpYyByZWFkb25seSBfaXNCYXNlQ29tcG9uZW50ID0gdHJ1ZTtcblxuICAgIC8qKlxuICAgICAqIEZpeGVkIG9yZGVyIG9mIGF0dHJpYnV0ZXMgaW4gdGhlIGBQcm9wZXJ0aWVzYCBhcnJheS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgaXMgdXNlZCBmb3IgcGFyYW1ldGVyIGRlc2VyaWFsaXphdGlvbiBhbmQgaXMgZmlsbGVkIGR1cmluZ1xuICAgICAqIGNvbXBvbmVudCByZWdpc3RyYXRpb24uXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgc3RhdGljIF9wcm9wZXJ0eU9yZGVyOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgY29tcG9uZW50IGNsYXNzLlxuICAgICAqXG4gICAgICogVGhpcyBpcyB1c2VkIHRvIHJlZ2lzdGVyLCBhZGQsIGFuZCByZXRyaWV2ZSBjb21wb25lbnRzIG9mIGEgZ2l2ZW4gdHlwZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgVHlwZU5hbWU6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFByb3BlcnRpZXMgb2YgdGhpcyBjb21wb25lbnQgY2xhc3MuXG4gICAgICpcbiAgICAgKiBQcm9wZXJ0aWVzIGFyZSBwdWJsaWMgYXR0cmlidXRlcyB0aGF0IGNhbiBiZSBjb25maWd1cmVkIHZpYSB0aGVcbiAgICAgKiBXb25kZXJsYW5kIEVkaXRvci5cbiAgICAgKlxuICAgICAqIEV4YW1wbGU6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGltcG9ydCB7IENvbXBvbmVudCwgVHlwZSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4gICAgICogY2xhc3MgTXlDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgICAqICAgICBzdGF0aWMgVHlwZU5hbWUgPSAnbXktY29tcG9uZW50JztcbiAgICAgKiAgICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gICAgICogICAgICAgICBteUJvb2xlYW46IHsgdHlwZTogVHlwZS5Cb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9LFxuICAgICAqICAgICAgICAgbXlGbG9hdDogeyB0eXBlOiBUeXBlLkZsb2F0LCBkZWZhdWx0OiBmYWxzZSB9LFxuICAgICAqICAgICAgICAgbXlUZXh0dXJlOiB7IHR5cGU6IFR5cGUuVGV4dHVyZSwgZGVmYXVsdDogbnVsbCB9LFxuICAgICAqICAgICB9O1xuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFByb3BlcnRpZXMgYXJlIGF1dG9tYXRpY2FsbHkgYWRkZWQgdG8gZWFjaCBjb21wb25lbnQgaW5zdGFuY2UsIGFuZCBhcmVcbiAgICAgKiBhY2Nlc3NpYmxlIGxpa2UgYW55IEpTIGF0dHJpYnV0ZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogLy8gQ3JlYXRlcyBhIG5ldyBjb21wb25lbnQgYW5kIHNldCBlYWNoIHByb3BlcnRpZXMgdmFsdWU6XG4gICAgICogY29uc3QgbXlDb21wb25lbnQgPSBvYmplY3QuYWRkQ29tcG9uZW50KE15Q29tcG9uZW50LCB7XG4gICAgICogICAgIG15Qm9vbGVhbjogdHJ1ZSxcbiAgICAgKiAgICAgbXlGbG9hdDogNDIuMCxcbiAgICAgKiAgICAgbXlUZXh0dXJlOiBudWxsXG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiAvLyBZb3UgY2FuIGFsc28gb3ZlcnJpZGUgdGhlIHByb3BlcnRpZXMgb24gdGhlIGluc3RhbmNlOlxuICAgICAqIG15Q29tcG9uZW50Lm15Qm9vbGVhbiA9IGZhbHNlO1xuICAgICAqIG15Q29tcG9uZW50Lm15RmxvYXQgPSAtNDIuMDtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqICMjIyMgUmVmZXJlbmNlc1xuICAgICAqXG4gICAgICogUmVmZXJlbmNlIHR5cGVzIChpLmUuLCBtZXNoLCBvYmplY3QsIGV0Yy4uLikgY2FuIGFsc28gYmUgbGlzdGVkIGFzICoqcmVxdWlyZWQqKjpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogaW1wb3J0IHtDb21wb25lbnQsIFByb3BlcnR5fSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuICAgICAqXG4gICAgICogY2xhc3MgTXlDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgICAqICAgICBzdGF0aWMgUHJvcGVydGllcyA9IHtcbiAgICAgKiAgICAgICAgIG15T2JqZWN0OiBQcm9wZXJ0eS5vYmplY3Qoe3JlcXVpcmVkOiB0cnVlfSksXG4gICAgICogICAgICAgICBteUFuaW1hdGlvbjogUHJvcGVydHkuYW5pbWF0aW9uKHtyZXF1aXJlZDogdHJ1ZX0pLFxuICAgICAqICAgICAgICAgbXlUZXh0dXJlOiBQcm9wZXJ0eS50ZXh0dXJlKHtyZXF1aXJlZDogdHJ1ZX0pLFxuICAgICAqICAgICAgICAgbXlNZXNoOiBQcm9wZXJ0eS5tZXNoKHtyZXF1aXJlZDogdHJ1ZX0pLFxuICAgICAqICAgICB9XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogUGxlYXNlIG5vdGUgdGhhdCByZWZlcmVuY2VzIGFyZSB2YWxpZGF0ZWQgKipvbmNlKiogYmVmb3JlIHRoZSBjYWxsIHRvIHtAbGluayBDb21wb25lbnQuc3RhcnR9IG9ubHksXG4gICAgICogdmlhIHRoZSB7QGxpbmsgQ29tcG9uZW50LnZhbGlkYXRlUHJvcGVydGllc30gbWV0aG9kLlxuICAgICAqL1xuICAgIHN0YXRpYyBQcm9wZXJ0aWVzOiBSZWNvcmQ8c3RyaW5nLCBDb21wb25lbnRQcm9wZXJ0eT47XG5cbiAgICAvKipcbiAgICAgKiBXaGVuIHNldCB0byBgdHJ1ZWAsIHRoZSBjaGlsZCBjbGFzcyBpbmhlcml0cyBmcm9tIHRoZSBwYXJlbnRcbiAgICAgKiBwcm9wZXJ0aWVzLCBhcyBzaG93biBpbiB0aGUgZm9sbG93aW5nIGV4YW1wbGU6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGltcG9ydCB7Q29tcG9uZW50LCBQcm9wZXJ0eX0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbiAgICAgKlxuICAgICAqIGNsYXNzIFBhcmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgICogICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdwYXJlbnQnO1xuICAgICAqICAgICBzdGF0aWMgUHJvcGVydGllcyA9IHtwYXJlbnROYW1lOiBQcm9wZXJ0eS5zdHJpbmcoJ3BhcmVudCcpfVxuICAgICAqIH1cbiAgICAgKlxuICAgICAqIGNsYXNzIENoaWxkIGV4dGVuZHMgUGFyZW50IHtcbiAgICAgKiAgICAgc3RhdGljIFR5cGVOYW1lID0gJ2NoaWxkJztcbiAgICAgKiAgICAgc3RhdGljIFByb3BlcnRpZXMgPSB7bmFtZTogUHJvcGVydHkuc3RyaW5nKCdjaGlsZCcpfVxuICAgICAqICAgICBzdGF0aWMgSW5oZXJpdFByb3BlcnRpZXMgPSB0cnVlO1xuICAgICAqXG4gICAgICogICAgIHN0YXJ0KCkge1xuICAgICAqICAgICAgICAgLy8gV29ya3MgYmVjYXVzZSBgSW5oZXJpdFByb3BlcnRpZXNgIGlzIGB0cnVlYC5cbiAgICAgKiAgICAgICAgIGNvbnNvbGUubG9nKGAke3RoaXMubmFtZX0gaW5oZXJpdHMgZnJvbSAke3RoaXMucGFyZW50TmFtZX1gKTtcbiAgICAgKiAgICAgfVxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBub3RlIFByb3BlcnRpZXMgZGVmaW5lZCBpbiBkZXNjZW5kYW50IGNsYXNzZXMgd2lsbCBvdmVycmlkZSBwcm9wZXJ0aWVzXG4gICAgICogd2l0aCB0aGUgc2FtZSBuYW1lIGRlZmluZWQgaW4gYW5jZXN0b3IgY2xhc3Nlcy5cbiAgICAgKlxuICAgICAqIERlZmF1bHRzIHRvIGB0cnVlYC5cbiAgICAgKi9cbiAgICBzdGF0aWMgSW5oZXJpdFByb3BlcnRpZXM/OiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW4gdGhpcyBjb21wb25lbnQgY2xhc3MgaXMgcmVnaXN0ZXJlZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBUaGlzIGNhbGxiYWNrIGNhbiBiZSB1c2VkIHRvIHJlZ2lzdGVyIGRlcGVuZGVuY2llcyBvZiBhIGNvbXBvbmVudCxcbiAgICAgKiBlLmcuLCBjb21wb25lbnQgY2xhc3NlcyB0aGF0IG5lZWQgdG8gYmUgcmVnaXN0ZXJlZCBpbiBvcmRlciB0byBhZGRcbiAgICAgKiB0aGVtIGF0IHJ1bnRpbWUgd2l0aCB7QGxpbmsgT2JqZWN0M0QuYWRkQ29tcG9uZW50fSwgaW5kZXBlbmRlbnQgb2Ygd2hldGhlclxuICAgICAqIHRoZXkgYXJlIHVzZWQgaW4gdGhlIGVkaXRvci5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY2xhc3MgU3Bhd25lciBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgICogICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdzcGF3bmVyJztcbiAgICAgKlxuICAgICAqICAgICBzdGF0aWMgb25SZWdpc3RlcihlbmdpbmUpIHtcbiAgICAgKiAgICAgICAgIGVuZ2luZS5yZWdpc3RlckNvbXBvbmVudChTcGF3bmVkQ29tcG9uZW50KTtcbiAgICAgKiAgICAgfVxuICAgICAqXG4gICAgICogICAgIC8vIFlvdSBjYW4gbm93IHVzZSBhZGRDb21wb25lbnQgd2l0aCBTcGF3bmVkQ29tcG9uZW50XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIFRoaXMgY2FsbGJhY2sgY2FuIGJlIHVzZWQgdG8gcmVnaXN0ZXIgZGlmZmVyZW50IGltcGxlbWVudGF0aW9ucyBvZiBhXG4gICAgICogY29tcG9uZW50IGRlcGVuZGluZyBvbiBjbGllbnQgZmVhdHVyZXMgb3IgQVBJIHZlcnNpb25zLlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAvLyBQcm9wZXJ0aWVzIG5lZWQgdG8gYmUgdGhlIHNhbWUgZm9yIGFsbCBpbXBsZW1lbnRhdGlvbnMhXG4gICAgICogY29uc3QgU2hhcmVkUHJvcGVydGllcyA9IHt9O1xuICAgICAqXG4gICAgICogY2xhc3MgQW5jaG9yIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAgKiAgICAgc3RhdGljIFR5cGVOYW1lID0gJ3NwYXduZXInO1xuICAgICAqICAgICBzdGF0aWMgUHJvcGVydGllcyA9IFNoYXJlZFByb3BlcnRpZXM7XG4gICAgICpcbiAgICAgKiAgICAgc3RhdGljIG9uUmVnaXN0ZXIoZW5naW5lKSB7XG4gICAgICogICAgICAgICBpZihuYXZpZ2F0b3IueHIgPT09IHVuZGVmaW5lZCkge1xuICAgICAqICAgICAgICAgICAgIC8qIFdlYlhSIHVuc3VwcG9ydGVkLCBrZWVwIHRoaXMgZHVtbXkgY29tcG9uZW50ICpcXC9cbiAgICAgKiAgICAgICAgICAgICByZXR1cm47XG4gICAgICogICAgICAgICB9XG4gICAgICogICAgICAgICAvKiBXZWJYUiBzdXBwb3J0ZWQhIE92ZXJyaWRlIGFscmVhZHkgcmVnaXN0ZXJlZCBkdW1teSBpbXBsZW1lbnRhdGlvblxuICAgICAqICAgICAgICAgICogd2l0aCBvbmUgZGVwZW5kaW5nIG9uIGhpdC10ZXN0IEFQSSBzdXBwb3J0ICpcXC9cbiAgICAgKiAgICAgICAgIGVuZ2luZS5yZWdpc3RlckNvbXBvbmVudCh3aW5kb3cuSGl0VGVzdFNvdXJjZSA9PT0gdW5kZWZpbmVkID9cbiAgICAgKiAgICAgICAgICAgICBBbmNob3JXaXRob3V0SGl0VGVzdCA6IEFuY2hvcldpdGhIaXRUZXN0KTtcbiAgICAgKiAgICAgfVxuICAgICAqXG4gICAgICogICAgIC8vIFRoaXMgb25lIGltcGxlbWVudHMgbm8gZnVuY3Rpb25zXG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHN0YXRpYyBvblJlZ2lzdGVyPzogKGVuZ2luZTogV29uZGVybGFuZEVuZ2luZSkgPT4gdm9pZDtcblxuICAgIC8qKlxuICAgICAqIEFsbG93cyB0byBpbmhlcml0IHByb3BlcnRpZXMgZGlyZWN0bHkgaW5zaWRlIHRoZSBlZGl0b3IuXG4gICAgICpcbiAgICAgKiBAbm90ZSBEbyBub3QgdXNlIGRpcmVjdGx5LCBwcmVmZXIgdXNpbmcge0BsaW5rIGluaGVyaXRQcm9wZXJ0aWVzfS5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzdGF0aWMgX2luaGVyaXRQcm9wZXJ0aWVzKCkge1xuICAgICAgICBpbmhlcml0UHJvcGVydGllcyh0aGlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIGluaXRpYWxpemVkIGJ5IHRoZSBydW50aW1lLiBUaGlzIG1ldGhvZFxuICAgICAqIHdpbGwgb25seSBiZSB0cmlnZ2VyZWQgKipvbmNlKiogYWZ0ZXIgaW5zdGFudGlhdGlvbi5cbiAgICAgKlxuICAgICAqIEBub3RlIER1cmluZyB0aGUgaW5pdGlhbGl6YXRpb24gcGhhc2UsIGB0aGlzLnNjZW5lYCB3aWxsIG5vdCBtYXRjaFxuICAgICAqIGBlbmdpbmUuc2NlbmVgLCBzaW5jZSBgZW5naW5lLnNjZW5lYCByZWZlcmVuY2VzIHRoZSAqKmFjdGl2ZSoqIHNjZW5lOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBpbXBvcnQge0NvbXBvbmVudH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbiAgICAgKlxuICAgICAqIGNsYXNzIE15Q29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50e1xuICAgICAqICAgICBpbml0KCkge1xuICAgICAqICAgICAgICAgY29uc3QgYWN0aXZlU2NlbmUgPSB0aGlzLmVuZ2luZS5zY2VuZTtcbiAgICAgKiAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2NlbmUgPT09IGFjdGl2ZVNjZW5lKTsgLy8gUHJpbnRzIGBmYWxzZWBcbiAgICAgKiAgICAgfVxuICAgICAqICAgICBzdGFydCgpIHtcbiAgICAgKiAgICAgICAgIGNvbnN0IGFjdGl2ZVNjZW5lID0gdGhpcy5lbmdpbmUuc2NlbmU7XG4gICAgICogICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnNjZW5lID09PSBhY3RpdmVTY2VuZSk7IC8vIFByaW50cyBgdHJ1ZWBcbiAgICAgKiAgICAgfVxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBpbml0PygpOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBzdGFydGVkIGJ5IHRoZSBydW50aW1lLCBvciBhY3RpdmF0ZWQuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIHVzZSB0aGF0IHRvIHJlLWluaXRpYWxpemUgdGhlIHN0YXRlIG9mIHRoZSBjb21wb25lbnQuXG4gICAgICovXG4gICAgc3RhcnQ/KCk6IHZvaWQ7XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgICoqZXZlcnkgZnJhbWUqKiBieSB0aGUgcnVudGltZS5cbiAgICAgKlxuICAgICAqIFlvdSBzaG91bGQgcGVyZm9ybSB5b3VyIGJ1c2luZXNzIGxvZ2ljIGluIHRoaXMgbWV0aG9kLiBFeGFtcGxlOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBpbXBvcnQgeyBDb21wb25lbnQsIFR5cGUgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuICAgICAqXG4gICAgICogY2xhc3MgVHJhbnNsYXRlRm9yd2FyZENvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgICogICAgIHN0YXRpYyBUeXBlTmFtZSA9ICd0cmFuc2xhdGUtZm9yd2FyZC1jb21wb25lbnQnO1xuICAgICAqICAgICBzdGF0aWMgUHJvcGVydGllcyA9IHtcbiAgICAgKiAgICAgICAgIHNwZWVkOiB7IHR5cGU6IFR5cGUuRmxvYXQsIGRlZmF1bHQ6IDEuMCB9XG4gICAgICogICAgIH07XG4gICAgICogICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAqICAgICAgICAgdGhpcy5fZm9yd2FyZCA9IG5ldyBGbG9hdDMyQXJyYXkoWzAsIDAsIDBdKTtcbiAgICAgKiAgICAgfVxuICAgICAqICAgICB1cGRhdGUoZHQpIHtcbiAgICAgKiAgICAgICAgIHRoaXMub2JqZWN0LmdldEZvcndhcmQodGhpcy5fZm9yd2FyZCk7XG4gICAgICogICAgICAgICB0aGlzLl9mb3J3YXJkWzBdICo9IHRoaXMuc3BlZWQ7XG4gICAgICogICAgICAgICB0aGlzLl9mb3J3YXJkWzFdICo9IHRoaXMuc3BlZWQ7XG4gICAgICogICAgICAgICB0aGlzLl9mb3J3YXJkWzJdICo9IHRoaXMuc3BlZWQ7XG4gICAgICogICAgICAgICB0aGlzLm9iamVjdC50cmFuc2xhdGUodGhpcy5fZm9yd2FyZCk7XG4gICAgICogICAgIH1cbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGVsdGEgRWxhcHNlZCB0aW1lIGJldHdlZW4gdGhpcyBmcmFtZSBhbmQgdGhlIHByZXZpb3VzIG9uZSwgaW4gKipzZWNvbmRzKiouXG4gICAgICovXG4gICAgdXBkYXRlPyhkZWx0YTogbnVtYmVyKTogdm9pZDtcblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIHRoZSBjb21wb25lbnQgZ29lcyBmcm9tIGFuIGluYWN0aXZlIHN0YXRlIHRvIGFuIGFjdGl2ZSBzdGF0ZS5cbiAgICAgKlxuICAgICAqIEBub3RlIFdoZW4gdXNpbmcgKHtAbGluayBXb25kZXJsYW5kRW5naW5lLnN3aXRjaFRvfSksIGFsbCB0aGUgY29tcG9uZW50c1xuICAgICAqIHRoYXQgd2VyZSBwcmV2aW91c2x5IGFjdGl2ZSB3aWxsIHRyaWdnZXIgdGhpcyBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAbm90ZSBZb3UgY2FuIG1hbnVhbGx5IGFjdGl2YXRlIG9yIGRlYWN0aXZhdGUgYSBjb21wb25lbnQgdXNpbmc6IHtAbGluayBDb21wb25lbnQuYWN0aXZlOnNldHRlcn0uXG4gICAgICovXG4gICAgb25BY3RpdmF0ZT8oKTogdm9pZDtcblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIHRoZSBjb21wb25lbnQgZ29lcyBmcm9tIGFuIGFjdGl2YXRlZCBzdGF0ZSB0byBhbiBpbmFjdGl2ZSBzdGF0ZS5cbiAgICAgKlxuICAgICAqIEBub3RlIFdoZW4gdXNpbmcgKHtAbGluayBXb25kZXJsYW5kRW5naW5lLnN3aXRjaFRvfSksIHRoZSBjb21wb25lbnRzIG9mXG4gICAgICogdGhlIHNjZW5lIGdldHRpbmcgZGVhY3RpdmF0ZWQgd2lsbCB0cmlnZ2VyIHRoaXMgbWV0aG9kLlxuICAgICAqXG4gICAgICogQG5vdGUgWW91IGNhbiBtYW51YWxseSBhY3RpdmF0ZSBvciBkZWFjdGl2YXRlIGEgY29tcG9uZW50IHVzaW5nOiB7QGxpbmsgQ29tcG9uZW50LmFjdGl2ZTpzZXR0ZXJ9LlxuICAgICAqL1xuICAgIG9uRGVhY3RpdmF0ZT8oKTogdm9pZDtcblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgcmVtb3ZlZCBmcm9tIGl0cyBvYmplY3QuXG4gICAgICogRm9yIG1vcmUgaW5mb3JtYXRpb24sIHBsZWFzZSBoYXZlIGEgbG9vayBhdCB7QGxpbmsgQ29tcG9uZW50Lm9uRGVzdHJveX0uXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIG1ldGhvZCB3aWxsIG5vdCBiZSB0cmlnZ2VyZWQgZm9yIGluYWN0aXZlIHNjZW5lIGJlaW5nIGRlc3Ryb3llZC5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjkuMFxuICAgICAqL1xuICAgIG9uRGVzdHJveT8oKTogdm9pZDtcblxuICAgIC8qKiBNYW5hZ2VyIGluZGV4LiBAaGlkZGVuICovXG4gICAgcmVhZG9ubHkgX21hbmFnZXI6IG51bWJlcjtcbiAgICAvKiogUGFja2VkIGlkLCBjb250YWluaW5nIHRoZSBzY2VuZSBhbmQgdGhlIGxvY2FsIGlkLiBAaGlkZGVuICovXG4gICAgcmVhZG9ubHkgX2lkOiBudW1iZXI7XG4gICAgLyoqIElkIHJlbGF0aXZlIHRvIHRoZSBzY2VuZSBjb21wb25lbnQncyBtYW5hZ2VyLiBAaGlkZGVuICovXG4gICAgcmVhZG9ubHkgX2xvY2FsSWQ6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIE9iamVjdCBjb250YWluaW5nIHRoaXMgb2JqZWN0LlxuICAgICAqXG4gICAgICogKipOb3RlKio6IFRoaXMgaXMgY2FjaGVkIGZvciBmYXN0ZXIgcmV0cmlldmFsLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9vYmplY3Q6IE9iamVjdDNEIHwgbnVsbDtcblxuICAgIC8qKiBTY2VuZSBpbnN0YW5jZS4gQGhpZGRlbiAqL1xuICAgIHByb3RlY3RlZCByZWFkb25seSBfc2NlbmU6IFByZWZhYjtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZVxuICAgICAqXG4gICAgICogQHBhcmFtIGVuZ2luZSBUaGUgZW5naW5lIGluc3RhbmNlLlxuICAgICAqIEBwYXJhbSBtYW5hZ2VyIEluZGV4IG9mIHRoZSBtYW5hZ2VyLlxuICAgICAqIEBwYXJhbSBpZCBXQVNNIGNvbXBvbmVudCBpbnN0YW5jZSBpbmRleC5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzY2VuZTogUHJlZmFiLCBtYW5hZ2VyOiBudW1iZXIgPSAtMSwgaWQ6IG51bWJlciA9IC0xKSB7XG4gICAgICAgIHRoaXMuX3NjZW5lID0gc2NlbmU7XG4gICAgICAgIHRoaXMuX21hbmFnZXIgPSBtYW5hZ2VyO1xuICAgICAgICB0aGlzLl9sb2NhbElkID0gaWQ7XG4gICAgICAgIHRoaXMuX2lkID0gQ29tcG9uZW50Ll9wYWNrKHNjZW5lLl9pbmRleCwgaWQpO1xuICAgICAgICB0aGlzLl9vYmplY3QgPSBudWxsO1xuICAgIH1cblxuICAgIC8qKiBTY2VuZSB0aGlzIGNvbXBvbmVudCBpcyBwYXJ0IG9mLiAqL1xuICAgIGdldCBzY2VuZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjZW5lO1xuICAgIH1cblxuICAgIC8qKiBIb3N0aW5nIGVuZ2luZSBpbnN0YW5jZS4gKi9cbiAgICBnZXQgZW5naW5lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2NlbmUuZW5naW5lO1xuICAgIH1cblxuICAgIC8qKiBUaGUgbmFtZSBvZiB0aGlzIGNvbXBvbmVudCdzIHR5cGUgKi9cbiAgICBnZXQgdHlwZSgpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBjdG9yID0gdGhpcy5jb25zdHJ1Y3RvciBhcyBDb21wb25lbnRDb25zdHJ1Y3RvcjtcbiAgICAgICAgcmV0dXJuIGN0b3IuVHlwZU5hbWU7XG4gICAgfVxuXG4gICAgLyoqIFRoZSBvYmplY3QgdGhpcyBjb21wb25lbnQgaXMgYXR0YWNoZWQgdG8uICovXG4gICAgZ2V0IG9iamVjdCgpOiBPYmplY3QzRCB7XG4gICAgICAgIGlmICghdGhpcy5fb2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zdCBvYmplY3RJZCA9IHRoaXMuZW5naW5lLndhc20uX3dsX2NvbXBvbmVudF9nZXRfb2JqZWN0KFxuICAgICAgICAgICAgICAgIHRoaXMuX21hbmFnZXIsXG4gICAgICAgICAgICAgICAgdGhpcy5faWRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLl9vYmplY3QgPSB0aGlzLl9zY2VuZS53cmFwKG9iamVjdElkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fb2JqZWN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRoaXMgY29tcG9uZW50IGlzIGFjdGl2ZS5cbiAgICAgKlxuICAgICAqIEFjdGl2YXRpbmcvZGVhY3RpdmF0aW5nIGEgY29tcG9uZW50IGNvbWVzIGF0IGEgc21hbGwgY29zdCBvZiByZW9yZGVyaW5nXG4gICAgICogY29tcG9uZW50cyBpbiB0aGUgcmVzcGVjdGl2ZSBjb21wb25lbnQgbWFuYWdlci4gVGhpcyBmdW5jdGlvbiB0aGVyZWZvcmVcbiAgICAgKiBpcyBub3QgYSB0cml2aWFsIGFzc2lnbm1lbnQuXG4gICAgICpcbiAgICAgKiBEb2VzIG5vdGhpbmcgaWYgdGhlIGNvbXBvbmVudCBpcyBhbHJlYWR5IGFjdGl2YXRlZC9kZWFjdGl2YXRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhY3RpdmUgTmV3IGFjdGl2ZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBzZXQgYWN0aXZlKGFjdGl2ZTogYm9vbGVhbikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9jb21wb25lbnRfc2V0QWN0aXZlKHRoaXMuX21hbmFnZXIsIHRoaXMuX2lkLCBhY3RpdmUpO1xuICAgIH1cblxuICAgIC8qKiBgdHJ1ZWAgaWYgdGhlIGNvbXBvbmVudCBpcyBtYXJrZWQgYXMgYWN0aXZlIGFuZCBpdHMgc2NlbmUgaXMgYWN0aXZlLiAqL1xuICAgIGdldCBhY3RpdmUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcmtlZEFjdGl2ZSAmJiB0aGlzLl9zY2VuZS5pc0FjdGl2ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBgdHJ1ZWAgaWYgdGhlIGNvbXBvbmVudCBpcyBtYXJrZWQgYXMgYWN0aXZlIGluIHRoZSBzY2VuZSwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBAbm90ZSBBdCB0aGUgb3Bwb3NpdGUgb2Yge0BsaW5rIENvbXBvbmVudC5hY3RpdmV9LCB0aGlzIGFjY2Vzc29yIGRvZXNuJ3RcbiAgICAgKiB0YWtlIGludG8gYWNjb3VudCB3aGV0aGVyIHRoZSBzY2VuZSBpcyBhY3RpdmUgb3Igbm90LlxuICAgICAqL1xuICAgIGdldCBtYXJrZWRBY3RpdmUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9jb21wb25lbnRfaXNBY3RpdmUodGhpcy5fbWFuYWdlciwgdGhpcy5faWQpICE9IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29weSBhbGwgdGhlIHByb3BlcnRpZXMgZnJvbSBgc3JjYCBpbnRvIHRoaXMgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAbm90ZSBPbmx5IHByb3BlcnRpZXMgYXJlIGNvcGllZC4gSWYgYSBjb21wb25lbnQgbmVlZHMgdG9cbiAgICAgKiBjb3B5IGV4dHJhIGRhdGEsIGl0IG5lZWRzIHRvIG92ZXJyaWRlIHRoaXMgbWV0aG9kLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNsYXNzIE15Q29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAgKiAgICAgbm9uUHJvcGVydHlEYXRhID0gJ0hlbGxvIFdvcmxkJztcbiAgICAgKlxuICAgICAqICAgICBjb3B5KHNyYykge1xuICAgICAqICAgICAgICAgc3VwZXIuY29weShzcmMpO1xuICAgICAqICAgICAgICAgdGhpcy5ub25Qcm9wZXJ0eURhdGEgPSBzcmMubm9uUHJvcGVydHlEYXRhO1xuICAgICAqICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICogICAgIH1cbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgYnkge0BsaW5rIE9iamVjdDNELmNsb25lfS4gRG8gbm90IGF0dGVtcHQgdG86XG4gICAgICogICAgIC0gQ3JlYXRlIG5ldyBjb21wb25lbnRcbiAgICAgKiAgICAgLSBSZWFkIHJlZmVyZW5jZXMgdG8gb3RoZXIgb2JqZWN0c1xuICAgICAqXG4gICAgICogV2hlbiBjbG9uaW5nIHZpYSB7QGxpbmsgT2JqZWN0M0QuY2xvbmV9LCB0aGlzIG1ldGhvZCB3aWxsIGJlIGNhbGxlZCBiZWZvcmVcbiAgICAgKiB7QGxpbmsgQ29tcG9uZW50LnN0YXJ0fS5cbiAgICAgKlxuICAgICAqIEBub3RlIEphdmFTY3JpcHQgY29tcG9uZW50IHByb3BlcnRpZXMgYXJlbid0IHJldGFyZ2V0ZWQuIFRodXMsIHJlZmVyZW5jZXNcbiAgICAgKiBpbnNpZGUgdGhlIHNvdXJjZSBvYmplY3Qgd2lsbCBub3QgYmUgcmV0YXJnZXRlZCB0byB0aGUgZGVzdGluYXRpb24gb2JqZWN0LFxuICAgICAqIGF0IHRoZSBleGNlcHRpb24gb2YgdGhlIHNraW4gZGF0YSBvbiB7QGxpbmsgTWVzaENvbXBvbmVudH0gYW5kIHtAbGluayBBbmltYXRpb25Db21wb25lbnR9LlxuICAgICAqXG4gICAgICogQHBhcmFtIHNyYyBUaGUgc291cmNlIGNvbXBvbmVudCB0byBjb3B5IGZyb20uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgY29weShzcmM6IFJlY29yZDxzdHJpbmcsIGFueT4pOiB0aGlzIHtcbiAgICAgICAgY29uc3QgY3RvciA9IHRoaXMuY29uc3RydWN0b3IgYXMgQ29tcG9uZW50Q29uc3RydWN0b3I7XG4gICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSBjdG9yLlByb3BlcnRpZXM7XG4gICAgICAgIGlmICghcHJvcGVydGllcykgcmV0dXJuIHRoaXM7XG4gICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IHByb3BlcnRpZXNbbmFtZV07XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHNyY1tuYW1lXTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbnN0IGNsb25lciA9IHByb3BlcnR5LmNsb25lciA/PyBkZWZhdWx0UHJvcGVydHlDbG9uZXI7XG4gICAgICAgICAgICAodGhpcyBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+KVtuYW1lXSA9IGNsb25lci5jbG9uZShwcm9wZXJ0eS50eXBlLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoaXMgY29tcG9uZW50IGZyb20gaXRzIG9iamVjdHMgYW5kIGRlc3Ryb3kgaXQuXG4gICAgICpcbiAgICAgKiBJdCBpcyBiZXN0IHByYWN0aWNlIHRvIHNldCB0aGUgY29tcG9uZW50IHRvIGBudWxsYCBhZnRlcixcbiAgICAgKiB0byBlbnN1cmUgaXQgZG9lcyBub3QgZ2V0IHVzZWQgbGF0ZXIuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqICAgIGMuZGVzdHJveSgpO1xuICAgICAqICAgIGMgPSBudWxsO1xuICAgICAqIGBgYFxuICAgICAqIEBzaW5jZSAwLjkuMFxuICAgICAqL1xuICAgIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSB0aGlzLl9tYW5hZ2VyO1xuICAgICAgICBpZiAobWFuYWdlciA8IDAgfHwgdGhpcy5faWQgPCAwKSByZXR1cm47XG5cbiAgICAgICAgLyogVGhpcyBjYWxsIHdpbGwgbWFyayB0aGUgY29tcG9uZW50IGRlc3Ryb3llZCxcbiAgICAgICAgICogYXV0b21hdGljYWxseSBjYWxsaW5nIGBfdHJpZ2dlck9uRGVzdHJveWAuICAqL1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9jb21wb25lbnRfcmVtb3ZlKG1hbmFnZXIsIHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgZXF1YWxpdHkgYnkgY29tcGFyaW5nIGlkcyBhbmQgKipub3QqKiB0aGUgSmF2YVNjcmlwdCByZWZlcmVuY2UuXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlIFVzZSBKYXZhU2NyaXB0IHJlZmVyZW5jZSBjb21wYXJpc29uIGluc3RlYWQ6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IGNvbXBvbmVudEEgPSBvYmouYWRkQ29tcG9uZW50KCdtZXNoJyk7XG4gICAgICogY29uc3QgY29tcG9uZW50QiA9IG9iai5hZGRDb21wb25lbnQoJ21lc2gnKTtcbiAgICAgKiBjb25zdCBjb21wb25lbnRDID0gY29tcG9uZW50QjtcbiAgICAgKiBjb25zb2xlLmxvZyhjb21wb25lbnRBID09PSBjb21wb25lbnRCKTsgLy8gZmFsc2VcbiAgICAgKiBjb25zb2xlLmxvZyhjb21wb25lbnRBID09PSBjb21wb25lbnRBKTsgLy8gdHJ1ZVxuICAgICAqIGNvbnNvbGUubG9nKGNvbXBvbmVudEIgPT09IGNvbXBvbmVudEMpOyAvLyB0cnVlXG4gICAgICogYGBgXG4gICAgICovXG4gICAgZXF1YWxzKG90aGVyQ29tcG9uZW50OiBDb21wb25lbnQgfCB1bmRlZmluZWQgfCBudWxsKTogYm9vbGVhbiB7XG4gICAgICAgIC8qKiBAdG9kbygyLjAuMCk6IFJlbW92ZSB0aGlzIG1ldGhvZC4gKi9cbiAgICAgICAgaWYgKCFvdGhlckNvbXBvbmVudCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcy5fbWFuYWdlciA9PT0gb3RoZXJDb21wb25lbnQuX21hbmFnZXIgJiYgdGhpcy5faWQgPT09IG90aGVyQ29tcG9uZW50Ll9pZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNldCB0aGUgY29tcG9uZW50IHByb3BlcnRpZXMgdG8gZGVmYXVsdC5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgaXMgYXV0b21hdGljYWxseSBjYWxsZWQgZHVyaW5nIHRoZSBjb21wb25lbnQgaW5zdGFudGlhdGlvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICByZXNldFByb3BlcnRpZXMoKTogdGhpcyB7XG4gICAgICAgIGNvbnN0IGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yIGFzIENvbXBvbmVudENvbnN0cnVjdG9yO1xuICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0gY3Rvci5Qcm9wZXJ0aWVzO1xuICAgICAgICBpZiAoIXByb3BlcnRpZXMpIHJldHVybiB0aGlzO1xuICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gcHJvcGVydGllcykge1xuICAgICAgICAgICAgY29uc3QgcHJvcGVydHkgPSBwcm9wZXJ0aWVzW25hbWVdO1xuICAgICAgICAgICAgY29uc3QgY2xvbmVyID0gcHJvcGVydHkuY2xvbmVyID8/IGRlZmF1bHRQcm9wZXJ0eUNsb25lcjtcbiAgICAgICAgICAgICh0aGlzIGFzIFJlY29yZDxzdHJpbmcsIGFueT4pW25hbWVdID0gY2xvbmVyLmNsb25lKFxuICAgICAgICAgICAgICAgIHByb3BlcnR5LnR5cGUsXG4gICAgICAgICAgICAgICAgcHJvcGVydHkuZGVmYXVsdFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKiogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayBDb21wb25lbnQucmVzZXRQcm9wZXJ0aWVzfSBpbnN0ZWFkLiAqL1xuICAgIHJlc2V0KCk6IHRoaXMge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXNldFByb3BlcnRpZXMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBWYWxpZGF0ZSB0aGUgcHJvcGVydGllcyBvbiB0aGlzIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHRocm93cyBJZiBhbnkgb2YgdGhlIHJlcXVpcmVkIHByb3BlcnRpZXMgaXNuJ3QgaW5pdGlhbGl6ZWRcbiAgICAgKiBvbiB0aGlzIGluc3RhbmNlLlxuICAgICAqL1xuICAgIHZhbGlkYXRlUHJvcGVydGllcygpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY3RvciA9IHRoaXMuY29uc3RydWN0b3IgYXMgQ29tcG9uZW50Q29uc3RydWN0b3I7XG4gICAgICAgIGlmICghY3Rvci5Qcm9wZXJ0aWVzKSByZXR1cm47XG5cbiAgICAgICAgZm9yIChjb25zdCBuYW1lIGluIGN0b3IuUHJvcGVydGllcykge1xuICAgICAgICAgICAgaWYgKCFjdG9yLlByb3BlcnRpZXNbbmFtZV0ucmVxdWlyZWQpIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKCEodGhpcyBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+KVtuYW1lXSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUHJvcGVydHkgJyR7bmFtZX0nIGlzIHJlcXVpcmVkIGJ1dCB3YXMgbm90IGluaXRpYWxpemVkYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAnQ29tcG9uZW50KGRlc3Ryb3llZCknO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgQ29tcG9uZW50KCcke3RoaXMudHlwZX0nLCAke3RoaXMuX2xvY2FsSWR9KWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogYHRydWVgIGlmIHRoZSBjb21wb25lbnQgaXMgZGVzdHJveWVkLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIElmIHtAbGluayBXb25kZXJsYW5kRW5naW5lLmVyYXNlUHJvdG90eXBlT25EZXN0cm95fSBpcyBgdHJ1ZWAsXG4gICAgICogcmVhZGluZyBhIGN1c3RvbSBwcm9wZXJ0eSB3aWxsIG5vdCB3b3JrOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBlbmdpbmUuZXJhc2VQcm90b3R5cGVPbkRlc3Ryb3kgPSB0cnVlO1xuICAgICAqXG4gICAgICogY29uc3QgY29tcCA9IG9iai5hZGRDb21wb25lbnQoJ21lc2gnKTtcbiAgICAgKiBjb21wLmN1c3RvbVBhcmFtID0gJ0hlbGxvIFdvcmxkISc7XG4gICAgICpcbiAgICAgKiBjb25zb2xlLmxvZyhjb21wLmlzRGVzdHJveWVkKTsgLy8gUHJpbnRzIGBmYWxzZWBcbiAgICAgKiBjb21wLmRlc3Ryb3koKTtcbiAgICAgKiBjb25zb2xlLmxvZyhjb21wLmlzRGVzdHJveWVkKTsgLy8gUHJpbnRzIGB0cnVlYFxuICAgICAqIGNvbnNvbGUubG9nKGNvbXAuY3VzdG9tUGFyYW0pOyAvLyBUaHJvd3MgYW4gZXJyb3JcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjEuMVxuICAgICAqL1xuICAgIGdldCBpc0Rlc3Ryb3llZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lkIDwgMDtcbiAgICB9XG5cbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIF9jb3B5KHNyYzogdGhpcywgb2Zmc2V0c1B0cjogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuXG4gICAgICAgIC8qKiBAdG9kbzogU3VwcG9ydCByZXRhcmdldGluZyBmb3IgYE9iamVjdDNELmNsb25lYCBhcyB3ZWxsLiAqL1xuICAgICAgICBjb25zdCBvZmZzZXRzID0gd2FzbS5IRUFQVTMyO1xuICAgICAgICBjb25zdCBvZmZzZXRzU3RhcnQgPSBvZmZzZXRzUHRyID4+PiAyO1xuXG4gICAgICAgIGNvbnN0IGRlc3RTY2VuZSA9IHRoaXMuX3NjZW5lO1xuXG4gICAgICAgIGNvbnN0IGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yIGFzIENvbXBvbmVudENvbnN0cnVjdG9yO1xuICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gY3Rvci5Qcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IChzcmMgYXMgUmVjb3JkPHN0cmluZywgYW55PilbbmFtZV07XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAodGhpcyBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+KVtuYW1lXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHByb3AgPSBjdG9yLlByb3BlcnRpZXNbbmFtZV07XG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSBvZmZzZXRzW29mZnNldHNTdGFydCArIHByb3AudHlwZV07XG5cbiAgICAgICAgICAgIGxldCByZXRhcmdldGVkO1xuICAgICAgICAgICAgc3dpdGNoIChwcm9wLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFR5cGUuT2JqZWN0OiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gd2FzbS5fd2xfb2JqZWN0X2luZGV4KCh2YWx1ZSBhcyBPYmplY3QzRCkuX2lkKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaWQgPSB3YXNtLl93bF9vYmplY3RfaWQoZGVzdFNjZW5lLl9pbmRleCwgaW5kZXggKyBvZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICByZXRhcmdldGVkID0gZGVzdFNjZW5lLndyYXAoaWQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBUeXBlLkFuaW1hdGlvbjpcbiAgICAgICAgICAgICAgICAgICAgcmV0YXJnZXRlZCA9IGRlc3RTY2VuZS5hbmltYXRpb25zLndyYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKyAodmFsdWUgYXMgQW5pbWF0aW9uKS5faW5kZXhcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBUeXBlLlNraW46XG4gICAgICAgICAgICAgICAgICAgIHJldGFyZ2V0ZWQgPSBkZXN0U2NlbmUuc2tpbnMud3JhcChvZmZzZXQgKyAodmFsdWUgYXMgU2tpbikuX2luZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xvbmVyID0gcHJvcC5jbG9uZXIgPz8gZGVmYXVsdFByb3BlcnR5Q2xvbmVyO1xuICAgICAgICAgICAgICAgICAgICByZXRhcmdldGVkID0gY2xvbmVyLmNsb25lKHByb3AudHlwZSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICh0aGlzIGFzIFJlY29yZDxzdHJpbmcsIGFueT4pW25hbWVdID0gcmV0YXJnZXRlZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyIHRoZSBjb21wb25lbnQge0BsaW5rIENvbXBvbmVudC5pbml0fSBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAbm90ZSBVc2UgdGhpcyBtZXRob2QgaW5zdGVhZCBvZiBkaXJlY3RseSBjYWxsaW5nIHtAbGluayBDb21wb25lbnQuaW5pdH0sXG4gICAgICogYmVjYXVzZSB0aGlzIG1ldGhvZCBjcmVhdGVzIGFuIGhhbmRsZXIgZm9yIHRoZSB7QGxpbmsgQ29tcG9uZW50LnN0YXJ0fS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfdHJpZ2dlckluaXQoKSB7XG4gICAgICAgIGlmICh0aGlzLmluaXQpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmdpbmUubG9nLmVycm9yKFxuICAgICAgICAgICAgICAgICAgICBMb2dUYWcuQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgICAgICBgRXhjZXB0aW9uIGR1cmluZyAke3RoaXMudHlwZX0gaW5pdCgpIG9uIG9iamVjdCAke3RoaXMub2JqZWN0Lm5hbWV9YFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmdpbmUubG9nLmVycm9yKExvZ1RhZy5Db21wb25lbnQsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyogQXJtIG9uQWN0aXZhdGUoKSB3aXRoIHRoZSBpbml0aWFsIHN0YXJ0KCkgY2FsbCAqL1xuICAgICAgICBjb25zdCBvbGRBY3RpdmF0ZSA9IHRoaXMub25BY3RpdmF0ZTtcbiAgICAgICAgdGhpcy5vbkFjdGl2YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5vbkFjdGl2YXRlID0gb2xkQWN0aXZhdGU7XG4gICAgICAgICAgICBsZXQgZmFpbGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVQcm9wZXJ0aWVzKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmdpbmUubG9nLmVycm9yKFxuICAgICAgICAgICAgICAgICAgICBMb2dUYWcuQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgICAgICBgRXhjZXB0aW9uIGR1cmluZyAke3RoaXMudHlwZX0gdmFsaWRhdGVQcm9wZXJ0aWVzKCkgb24gb2JqZWN0ICR7dGhpcy5vYmplY3QubmFtZX1gXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZ2luZS5sb2cuZXJyb3IoTG9nVGFnLkNvbXBvbmVudCwgZSk7XG4gICAgICAgICAgICAgICAgZmFpbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0Py4oKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZ2luZS5sb2cuZXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIExvZ1RhZy5Db21wb25lbnQsXG4gICAgICAgICAgICAgICAgICAgIGBFeGNlcHRpb24gZHVyaW5nICR7dGhpcy50eXBlfSBzdGFydCgpIG9uIG9iamVjdCAke3RoaXMub2JqZWN0Lm5hbWV9YFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmdpbmUubG9nLmVycm9yKExvZ1RhZy5Db21wb25lbnQsIGUpO1xuICAgICAgICAgICAgICAgIGZhaWxlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChmYWlsZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF0aGlzLm9uQWN0aXZhdGUpIHJldHVybjtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQWN0aXZhdGUoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZ2luZS5sb2cuZXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIExvZ1RhZy5Db21wb25lbnQsXG4gICAgICAgICAgICAgICAgICAgIGBFeGNlcHRpb24gZHVyaW5nICR7dGhpcy50eXBlfSBvbkFjdGl2YXRlKCkgb24gb2JqZWN0ICR7dGhpcy5vYmplY3QubmFtZX1gXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZ2luZS5sb2cuZXJyb3IoTG9nVGFnLkNvbXBvbmVudCwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlciB0aGUgY29tcG9uZW50IHtAbGluayBDb21wb25lbnQudXBkYXRlfSBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX3RyaWdnZXJVcGRhdGUoZHQ6IG51bWJlcikge1xuICAgICAgICBpZiAoIXRoaXMudXBkYXRlKSByZXR1cm47XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZShkdCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMuZW5naW5lLmxvZy5lcnJvcihcbiAgICAgICAgICAgICAgICBMb2dUYWcuQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgIGBFeGNlcHRpb24gZHVyaW5nICR7dGhpcy50eXBlfSB1cGRhdGUoKSBvbiBvYmplY3QgJHt0aGlzLm9iamVjdC5uYW1lfWBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLmVuZ2luZS5sb2cuZXJyb3IoTG9nVGFnLkNvbXBvbmVudCwgZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmdpbmUud2FzbS5fZGVhY3RpdmF0ZV9jb21wb25lbnRfb25fZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlciB0aGUgY29tcG9uZW50IHtAbGluayBDb21wb25lbnQub25BY3RpdmF0ZX0gbWV0aG9kLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF90cmlnZ2VyT25BY3RpdmF0ZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLm9uQWN0aXZhdGUpIHJldHVybjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMub25BY3RpdmF0ZSgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aGlzLmVuZ2luZS5sb2cuZXJyb3IoXG4gICAgICAgICAgICAgICAgTG9nVGFnLkNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBgRXhjZXB0aW9uIGR1cmluZyAke3RoaXMudHlwZX0gb25BY3RpdmF0ZSgpIG9uIG9iamVjdCAke3RoaXMub2JqZWN0Lm5hbWV9YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMuZW5naW5lLmxvZy5lcnJvcihMb2dUYWcuQ29tcG9uZW50LCBlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXIgdGhlIGNvbXBvbmVudCB7QGxpbmsgQ29tcG9uZW50Lm9uRGVhY3RpdmF0ZX0gbWV0aG9kLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF90cmlnZ2VyT25EZWFjdGl2YXRlKCkge1xuICAgICAgICBpZiAoIXRoaXMub25EZWFjdGl2YXRlKSByZXR1cm47XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLm9uRGVhY3RpdmF0ZSgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aGlzLmVuZ2luZS5sb2cuZXJyb3IoXG4gICAgICAgICAgICAgICAgTG9nVGFnLkNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBgRXhjZXB0aW9uIGR1cmluZyAke3RoaXMudHlwZX0gb25EZWFjdGl2YXRlKCkgb24gb2JqZWN0ICR7dGhpcy5vYmplY3QubmFtZX1gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhpcy5lbmdpbmUubG9nLmVycm9yKExvZ1RhZy5Db21wb25lbnQsIGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlciB0aGUgY29tcG9uZW50IHtAbGluayBDb21wb25lbnQub25EZXN0cm95fSBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX3RyaWdnZXJPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vbkRlc3Ryb3kpIHRoaXMub25EZXN0cm95KCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMuZW5naW5lLmxvZy5lcnJvcihcbiAgICAgICAgICAgICAgICBMb2dUYWcuQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgIGBFeGNlcHRpb24gZHVyaW5nICR7dGhpcy50eXBlfSBvbkRlc3Ryb3koKSBvbiBvYmplY3QgJHt0aGlzLm9iamVjdC5uYW1lfWBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLmVuZ2luZS5sb2cuZXJyb3IoTG9nVGFnLkNvbXBvbmVudCwgZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc2NlbmUuX2NvbXBvbmVudHMuZGVzdHJveSh0aGlzKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ29tcG9uZW50cyBtdXN0IGJlIHJlZ2lzdGVyZWQgYmVmb3JlIGxvYWRpbmcgLyBhcHBlbmRpbmcgYSBzY2VuZS5cbiAqXG4gKiBJdCdzIHBvc3NpYmxlIHRvIGVuZCB1cCB3aXRoIGEgYnJva2VuIGNvbXBvbmVudCBpbiB0aGUgZm9sbG93aW5nIGNhc2VzOlxuICpcbiAqIC0gQ29tcG9uZW50IHdhc24ndCByZWdpc3RlcmVkIHdoZW4gdGhlIHNjZW5lIHdhcyBsb2FkZWRcbiAqIC0gQ29tcG9uZW50IGluc3RhbnRpYXRpb24gZmFpbGVkXG4gKlxuICogVGhpcyBkdW1teSBjb21wb25lbnQgaXMgdGh1cyB1c2VkIGFzIGEgcGxhY2Vob2xkZXIgYnkgdGhlIGVuZ2luZS5cbiAqL1xuZXhwb3J0IGNsYXNzIEJyb2tlbkNvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ19fYnJva2VuLWNvbXBvbmVudF9fJztcbn1cblxuLyoqXG4gKiBNZXJnZSB0aGUgYXNjZW5kYW50IHByb3BlcnRpZXMgb2YgY2xhc3NcbiAqXG4gKiBUaGlzIG1ldGhvZCB3YWxrcyB0aGUgcHJvdG90eXBlIGNoYWluLCBhbmQgbWVyZ2VzXG4gKiBhbGwgdGhlIHByb3BlcnRpZXMgZm91bmQgaW4gcGFyZW50IGNvbXBvbmVudHMuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBgYGBqc1xuICogaW1wb3J0IHtQcm9wZXJ0eSwgaW5oZXJpdFByb3BlcnRpZXN9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4gKlxuICogY2xhc3MgUGFyZW50IHtcbiAqICAgICBzdGF0aWMgUHJvcGVydGllcyA9IHsgcGFyZW50UHJvcDogUHJvcGVydHkuc3RyaW5nKCdwYXJlbnQnKSB9O1xuICogfVxuICpcbiAqIGNsYXNzIENoaWxkIGV4dGVuZHMgUGFyZW50IHtcbiAqICAgICBzdGF0aWMgUHJvcGVydGllcyA9IHsgY2hpbGRQcm9wOiBQcm9wZXJ0eS5zdHJpbmcoJ2NoaWxkJykgfTtcbiAqIH1cbiAqIGluaGVyaXRQcm9wZXJ0aWVzKENoaWxkKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB0YXJnZXQgVGhlIGNsYXNzIGluIHdoaWNoIHByb3BlcnRpZXMgc2hvdWxkIGJlIG1lcmdlZFxuICpcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluaGVyaXRQcm9wZXJ0aWVzKHRhcmdldDogQ29tcG9uZW50Q29uc3RydWN0b3IpIHtcbiAgICBpZiAoIXRhcmdldC5UeXBlTmFtZSkgcmV0dXJuO1xuXG4gICAgY29uc3QgY2hhaW46IENvbXBvbmVudENvbnN0cnVjdG9yW10gPSBbXTtcbiAgICBsZXQgY3VycjogQ29uc3RydWN0b3I8YW55PiB8IG51bGwgPSB0YXJnZXQ7XG4gICAgd2hpbGUgKGN1cnIgJiYgIWlzQmFzZUNvbXBvbmVudENsYXNzKGN1cnIpKSB7XG4gICAgICAgIGNvbnN0IGNvbXAgPSBjdXJyIGFzIENvbXBvbmVudENvbnN0cnVjdG9yO1xuXG4gICAgICAgIC8qIFN0b3AgYXQgdGhlIGZpcnN0IGNsYXNzIHRoYXQgZG9lc24ndCByZXF1aXJlIHByb3BlcnRpZXMgbWVyZ2luZyAqL1xuICAgICAgICBjb25zdCBuZWVkc01lcmdlID0gY29tcC5oYXNPd25Qcm9wZXJ0eSgnSW5oZXJpdFByb3BlcnRpZXMnKVxuICAgICAgICAgICAgPyBjb21wLkluaGVyaXRQcm9wZXJ0aWVzXG4gICAgICAgICAgICA6IHRydWU7XG4gICAgICAgIGlmICghbmVlZHNNZXJnZSkgYnJlYWs7XG5cbiAgICAgICAgaWYgKGNvbXAuaGFzT3duUHJvcGVydHkoJ1Byb3BlcnRpZXMnKSkge1xuICAgICAgICAgICAgLyogV2UgcHVzaCBwcm9wZXJ0aWVzIGV2ZW4gaWYgdGhlIG9iamVjdCBpc24ndCBkZXJpdmluZyBmcm9tIGEgQ29tcG9uZW50IGNsYXNzLlxuICAgICAgICAgICAgICogVGhpcyBjb3VsZCB0aGVvcmV0aWNhbGx5IGxlYWQgdG8gaXNzdWUsIHdoZW4gaW5oZXJpdGluZyBmcm9tIGFub3RoZXIgdHlwZVxuICAgICAgICAgICAgICogb2YgY29tcG9uZW50IChsaXQtbGlrZSBlbGVtZW50cykgYnV0IGV4dHJlbWVseSB1bmxpa2VseS4gKi9cbiAgICAgICAgICAgIGNoYWluLnB1c2goY29tcCk7XG4gICAgICAgIH1cbiAgICAgICAgY3VyciA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihjdXJyKTtcbiAgICB9XG5cbiAgICAvKiBObyBwcm90b3R5cGUgbWVyZ2UgaXMgbmVlZGVkLiAqL1xuICAgIGlmICghY2hhaW4ubGVuZ3RoIHx8IChjaGFpbi5sZW5ndGggPT09IDEgJiYgY2hhaW5bMF0gPT09IHRhcmdldCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG1lcmdlZDogUmVjb3JkPHN0cmluZywgQ29tcG9uZW50UHJvcGVydHk+ID0ge307XG4gICAgZm9yIChsZXQgaSA9IGNoYWluLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24obWVyZ2VkLCBjaGFpbltpXS5Qcm9wZXJ0aWVzKTtcbiAgICB9XG4gICAgdGFyZ2V0LlByb3BlcnRpZXMgPSBtZXJnZWQ7XG59XG5cbi8qKlxuICogTmF0aXZlIGNvbGxpc2lvbiBjb21wb25lbnQuXG4gKlxuICogUHJvdmlkZXMgYWNjZXNzIHRvIGEgbmF0aXZlIGNvbGxpc2lvbiBjb21wb25lbnQgaW5zdGFuY2UuXG4gKi9cbmV4cG9ydCBjbGFzcyBDb2xsaXNpb25Db21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIC8qKiBAb3ZlcnJpZGUgKi9cbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnY29sbGlzaW9uJztcblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRFeHRlbnRzKCk6IEZsb2F0MzJBcnJheTtcbiAgICAvKipcbiAgICAgKiBDb2xsaXNpb24gY29tcG9uZW50IGV4dGVudHMuXG4gICAgICpcbiAgICAgKiBJZiB7QGxpbmsgY29sbGlkZXJ9IHJldHVybnMge0BsaW5rIENvbGxpZGVyLlNwaGVyZX0sIG9ubHkgdGhlIGZpcnN0XG4gICAgICogY29tcG9uZW50IG9mIHRoZSByZXR1cm5lZCB2ZWN0b3IgaXMgdXNlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgRGVzdGluYXRpb24gYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDMgZWxlbWVudHMuXG4gICAgICogQHJldHVybnMgVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBnZXRFeHRlbnRzPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBUKTogVDtcbiAgICBnZXRFeHRlbnRzKG91dDogTnVtYmVyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KDMpKTogTnVtYmVyQXJyYXkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfY29sbGlzaW9uX2NvbXBvbmVudF9nZXRfZXh0ZW50cyh0aGlzLl9pZCkgLyA0OyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgb3V0WzBdID0gd2FzbS5IRUFQRjMyW3B0cl07XG4gICAgICAgIG91dFsxXSA9IHdhc20uSEVBUEYzMltwdHIgKyAxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5IRUFQRjMyW3B0ciArIDJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKiBDb2xsaXNpb24gY29tcG9uZW50IGNvbGxpZGVyICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgY29sbGlkZXIoKTogQ29sbGlkZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfY29sbGlzaW9uX2NvbXBvbmVudF9nZXRfY29sbGlkZXIodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBjb2xsaXNpb24gY29tcG9uZW50IGNvbGxpZGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbGxpZGVyIENvbGxpZGVyIG9mIHRoZSBjb2xsaXNpb24gY29tcG9uZW50LlxuICAgICAqL1xuICAgIHNldCBjb2xsaWRlcihjb2xsaWRlcjogQ29sbGlkZXIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfY29sbGlzaW9uX2NvbXBvbmVudF9zZXRfY29sbGlkZXIodGhpcy5faWQsIGNvbGxpZGVyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBDb2xsaXNpb25Db21wb25lbnQuZ2V0RXh0ZW50c30uXG4gICAgICpcbiAgICAgKiBAbm90ZSBQcmVmZXIgdG8gdXNlIHtAbGluayBDb2xsaXNpb25Db21wb25lbnQuZ2V0RXh0ZW50c30gZm9yIHBlcmZvcm1hbmNlLlxuICAgICAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IGV4dGVudHMoKTogRmxvYXQzMkFycmF5IHtcbiAgICAgICAgLyoqIEB0b2RvOiBCcmVhayBhdCAyLjAuMC4gRG8gbm90IGFsbG93IG1vZGlmeWluZyBtZW1vcnkgaW4tcGxhY2UuICovXG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShcbiAgICAgICAgICAgIHdhc20uSEVBUEYzMi5idWZmZXIsXG4gICAgICAgICAgICB3YXNtLl93bF9jb2xsaXNpb25fY29tcG9uZW50X2dldF9leHRlbnRzKHRoaXMuX2lkKSxcbiAgICAgICAgICAgIDNcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgY29sbGlzaW9uIGNvbXBvbmVudCBleHRlbnRzLlxuICAgICAqXG4gICAgICogSWYge0BsaW5rIGNvbGxpZGVyfSByZXR1cm5zIHtAbGluayBDb2xsaWRlci5TcGhlcmV9LCBvbmx5IHRoZSBmaXJzdFxuICAgICAqIGNvbXBvbmVudCBvZiB0aGUgcGFzc2VkIHZlY3RvciBpcyB1c2VkLlxuICAgICAqXG4gICAgICogRXhhbXBsZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogLy8gU3BhbnMgMSB1bml0IG9uIHRoZSB4LWF4aXMsIDIgb24gdGhlIHktYXhpcywgMyBvbiB0aGUgei1heGlzLlxuICAgICAqIGNvbGxpc2lvbi5leHRlbnQgPSBbMSwgMiwgM107XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXh0ZW50cyBFeHRlbnRzIG9mIHRoZSBjb2xsaXNpb24gY29tcG9uZW50LCBleHBlY3RzIGFcbiAgICAgKiAgICAgIDMgY29tcG9uZW50IGFycmF5LlxuICAgICAqL1xuICAgIHNldCBleHRlbnRzKGV4dGVudHM6IFJlYWRvbmx5PE51bWJlckFycmF5Pikge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfY29sbGlzaW9uX2NvbXBvbmVudF9nZXRfZXh0ZW50cyh0aGlzLl9pZCkgLyA0OyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0cl0gPSBleHRlbnRzWzBdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgMV0gPSBleHRlbnRzWzFdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgMl0gPSBleHRlbnRzWzJdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBjb2xsaXNpb24gY29tcG9uZW50IHJhZGl1cy5cbiAgICAgKlxuICAgICAqIEBub3RlIElmIHtAbGluayBjb2xsaWRlcn0gaXMgbm90IHtAbGluayBDb2xsaWRlci5TcGhlcmV9LCB0aGUgcmV0dXJuZWQgdmFsdWVcbiAgICAgKiBjb3JyZXNwb25kcyB0byB0aGUgcmFkaXVzIG9mIGEgc3BoZXJlIGVuY2xvc2luZyB0aGUgc2hhcGUuXG4gICAgICpcbiAgICAgKiBFeGFtcGxlOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBzcGhlcmUucmFkaXVzID0gMy4wO1xuICAgICAqIGNvbnNvbGUubG9nKHNwaGVyZS5yYWRpdXMpOyAvLyAzLjBcbiAgICAgKlxuICAgICAqIGJveC5leHRlbnRzID0gWzIuMCwgMi4wLCAyLjBdO1xuICAgICAqIGNvbnNvbGUubG9nKGJveC5yYWRpdXMpOyAvLyAxLjczMi4uLlxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICovXG4gICAgZ2V0IHJhZGl1cygpOiBudW1iZXIge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgaWYgKHRoaXMuY29sbGlkZXIgPT09IENvbGxpZGVyLlNwaGVyZSlcbiAgICAgICAgICAgIHJldHVybiB3YXNtLkhFQVBGMzJbd2FzbS5fd2xfY29sbGlzaW9uX2NvbXBvbmVudF9nZXRfZXh0ZW50cyh0aGlzLl9pZCkgPj4gMl07XG4gICAgICAgIGNvbnN0IGV4dGVudHMgPSBuZXcgRmxvYXQzMkFycmF5KFxuICAgICAgICAgICAgd2FzbS5IRUFQRjMyLmJ1ZmZlcixcbiAgICAgICAgICAgIHdhc20uX3dsX2NvbGxpc2lvbl9jb21wb25lbnRfZ2V0X2V4dGVudHModGhpcy5faWQpLFxuICAgICAgICAgICAgM1xuICAgICAgICApO1xuICAgICAgICBjb25zdCB4MiA9IGV4dGVudHNbMF0gKiBleHRlbnRzWzBdO1xuICAgICAgICBjb25zdCB5MiA9IGV4dGVudHNbMV0gKiBleHRlbnRzWzFdO1xuICAgICAgICBjb25zdCB6MiA9IGV4dGVudHNbMl0gKiBleHRlbnRzWzJdO1xuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHgyICsgeTIgKyB6MikgLyAyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBjb2xsaXNpb24gY29tcG9uZW50IHJhZGl1cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByYWRpdXMgUmFkaXVzIG9mIHRoZSBjb2xsaXNpb24gY29tcG9uZW50XG4gICAgICpcbiAgICAgKiBAbm90ZSBJZiB7QGxpbmsgY29sbGlkZXJ9IGlzIG5vdCB7QGxpbmsgQ29sbGlkZXIuU3BoZXJlfSxcbiAgICAgKiB0aGUgZXh0ZW50cyBhcmUgc2V0IHRvIGZvcm0gYSBzcXVhcmUgdGhhdCBmaXRzIGEgc3BoZXJlIHdpdGggdGhlIHByb3ZpZGVkIHJhZGl1cy5cbiAgICAgKlxuICAgICAqIEV4YW1wbGU6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGFhYmJDb2xsaXNpb24ucmFkaXVzID0gMi4wOyAvLyBBQUJCIGZpdHMgYSBzcGhlcmUgb2YgcmFkaXVzIDIuMFxuICAgICAqIGJveENvbGxpc2lvbi5yYWRpdXMgPSAzLjA7IC8vIEJveCBub3cgZml0cyBhIHNwaGVyZSBvZiByYWRpdXMgMy4wLCBrZWVwaW5nIG9yaWVudGF0aW9uXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKi9cbiAgICBzZXQgcmFkaXVzKHJhZGl1czogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IHRoaXMuY29sbGlkZXIgPT09IENvbGxpZGVyLlNwaGVyZSA/IHJhZGl1cyA6ICgyICogcmFkaXVzKSAvIFNRUlRfMztcbiAgICAgICAgdGhpcy5leHRlbnRzLnNldChbbGVuZ3RoLCBsZW5ndGgsIGxlbmd0aF0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbGxpc2lvbiBjb21wb25lbnQgZ3JvdXAuXG4gICAgICpcbiAgICAgKiBUaGUgZ3JvdXBzIGlzIGEgYml0bWFzayB0aGF0IGlzIGNvbXBhcmVkIHRvIG90aGVyIGNvbXBvbmVudHMgaW4ge0BsaW5rIENvbGxpc2lvbkNvbXBvbmVudCNxdWVyeU92ZXJsYXBzfVxuICAgICAqIG9yIHRoZSBncm91cCBpbiB7QGxpbmsgU2NlbmUjcmF5Q2FzdH0uXG4gICAgICpcbiAgICAgKiBDb2xsaWRlcnMgdGhhdCBoYXZlIG5vIGNvbW1vbiBncm91cHMgd2lsbCBub3Qgb3ZlcmxhcCB3aXRoIGVhY2ggb3RoZXIuIElmIGEgY29sbGlkZXJcbiAgICAgKiBoYXMgbm9uZSBvZiB0aGUgZ3JvdXBzIHNldCBmb3Ige0BsaW5rIFNjZW5lI3JheUNhc3R9LCB0aGUgcmF5IHdpbGwgbm90IGhpdCBpdC5cbiAgICAgKlxuICAgICAqIEVhY2ggYml0IHJlcHJlc2VudHMgYmVsb25naW5nIHRvIGEgZ3JvdXAsIHNlZSBleGFtcGxlLlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAgICAvLyBjIGJlbG9uZ3MgdG8gZ3JvdXAgMlxuICAgICAqICAgIGMuZ3JvdXAgPSAoMSA8PCAyKTtcbiAgICAgKlxuICAgICAqICAgIC8vIGMgYmVsb25ncyB0byBncm91cCAwXG4gICAgICogICAgYy5ncm91cCA9ICgxIDw8IDApO1xuICAgICAqXG4gICAgICogICAgLy8gYyBiZWxvbmdzIHRvIGdyb3VwIDAgKmFuZCogMlxuICAgICAqICAgIGMuZ3JvdXAgPSAoMSA8PCAwKSB8ICgxIDw8IDIpO1xuICAgICAqXG4gICAgICogICAgKGMuZ3JvdXAgJiAoMSA8PCAyKSkgIT0gMDsgLy8gdHJ1ZVxuICAgICAqICAgIChjLmdyb3VwICYgKDEgPDwgNykpICE9IDA7IC8vIGZhbHNlXG4gICAgICogYGBgXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgZ3JvdXAoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2NvbGxpc2lvbl9jb21wb25lbnRfZ2V0X2dyb3VwKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgY29sbGlzaW9uIGNvbXBvbmVudCBncm91cC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBncm91cCBHcm91cCBtYXNrIG9mIHRoZSBjb2xsaXNpb24gY29tcG9uZW50LlxuICAgICAqL1xuICAgIHNldCBncm91cChncm91cDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2NvbGxpc2lvbl9jb21wb25lbnRfc2V0X2dyb3VwKHRoaXMuX2lkLCBncm91cCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUXVlcnkgb3ZlcmxhcHBpbmcgb2JqZWN0cy5cbiAgICAgKlxuICAgICAqIFVzYWdlOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBjb2xsaXNpb24gPSBvYmplY3QuZ2V0Q29tcG9uZW50KCdjb2xsaXNpb24nKTtcbiAgICAgKiBjb25zdCBvdmVybGFwcyA9IGNvbGxpc2lvbi5xdWVyeU92ZXJsYXBzKCk7XG4gICAgICogZm9yKGNvbnN0IG90aGVyQ29sbGlzaW9uIG9mIG92ZXJsYXBzKSB7XG4gICAgICogICAgIGNvbnN0IG90aGVyT2JqZWN0ID0gb3RoZXJDb2xsaXNpb24ub2JqZWN0O1xuICAgICAqICAgICBjb25zb2xlLmxvZyhgQ29sbGlzaW9uIHdpdGggb2JqZWN0ICR7b3RoZXJPYmplY3Qub2JqZWN0SWR9YCk7XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHJldHVybnMgQ29sbGlzaW9uIGNvbXBvbmVudHMgb3ZlcmxhcHBpbmcgdGhpcyBjb2xsaWRlci5cbiAgICAgKi9cbiAgICBxdWVyeU92ZXJsYXBzKCk6IENvbGxpc2lvbkNvbXBvbmVudFtdIHtcbiAgICAgICAgY29uc3QgY291bnQgPSB0aGlzLmVuZ2luZS53YXNtLl93bF9jb2xsaXNpb25fY29tcG9uZW50X3F1ZXJ5X292ZXJsYXBzKFxuICAgICAgICAgICAgdGhpcy5faWQsXG4gICAgICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl90ZW1wTWVtLFxuICAgICAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fdGVtcE1lbVNpemUgPj4gMVxuICAgICAgICApO1xuICAgICAgICBjb25zdCBvdmVybGFwczogQ29sbGlzaW9uQ29tcG9uZW50W10gPSBuZXcgQXJyYXkoY291bnQpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gdGhpcy5lbmdpbmUud2FzbS5fdGVtcE1lbVVpbnQxNltpXTtcbiAgICAgICAgICAgIG92ZXJsYXBzW2ldID0gdGhpcy5fc2NlbmUuX2NvbXBvbmVudHMud3JhcENvbGxpc2lvbihpZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG92ZXJsYXBzO1xuICAgIH1cbn1cblxuLyoqXG4gKiBOYXRpdmUgdGV4dCBjb21wb25lbnRcbiAqXG4gKiBQcm92aWRlcyBhY2Nlc3MgdG8gYSBuYXRpdmUgdGV4dCBjb21wb25lbnQgaW5zdGFuY2VcbiAqL1xuZXhwb3J0IGNsYXNzIFRleHRDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIC8qKiBAb3ZlcnJpZGUgKi9cbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAndGV4dCc7XG5cbiAgICAvKiogVGV4dCBjb21wb25lbnQgYWxpZ25tZW50LiAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IGFsaWdubWVudCgpOiBBbGlnbm1lbnQge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfdGV4dF9jb21wb25lbnRfZ2V0X2hvcml6b250YWxfYWxpZ25tZW50KHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGV4dCBjb21wb25lbnQgYWxpZ25tZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIGFsaWdubWVudCBBbGlnbm1lbnQgZm9yIHRoZSB0ZXh0IGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICBzZXQgYWxpZ25tZW50KGFsaWdubWVudDogQWxpZ25tZW50KSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X3NldF9ob3Jpem9udGFsX2FsaWdubWVudCh0aGlzLl9pZCwgYWxpZ25tZW50KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUZXh0IGNvbXBvbmVudCB2ZXJ0aWNhbCBhbGlnbm1lbnQuXG4gICAgICogQHNpbmNlIDEuMi4wXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgdmVydGljYWxBbGlnbm1lbnQoKTogVmVydGljYWxBbGlnbm1lbnQge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfdGV4dF9jb21wb25lbnRfZ2V0X3ZlcnRpY2FsX2FsaWdubWVudCh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRleHQgY29tcG9uZW50IHZlcnRpY2FsIGFsaWdubWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2ZXJ0aWNhbEFsaWdubWVudCBWZXJ0aWNhbCBmb3IgdGhlIHRleHQgY29tcG9uZW50LlxuICAgICAqIEBzaW5jZSAxLjIuMFxuICAgICAqL1xuICAgIHNldCB2ZXJ0aWNhbEFsaWdubWVudCh2ZXJ0aWNhbEFsaWdubWVudDogVmVydGljYWxBbGlnbm1lbnQpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfdGV4dF9jb21wb25lbnRfc2V0X3ZlcnRpY2FsX2FsaWdubWVudChcbiAgICAgICAgICAgIHRoaXMuX2lkLFxuICAgICAgICAgICAgdmVydGljYWxBbGlnbm1lbnRcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUZXh0IGNvbXBvbmVudCBqdXN0aWZpY2F0aW9uLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgVGV4dENvbXBvbmVudC52ZXJ0aWNhbEFsaWdubWVudH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBqdXN0aWZpY2F0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52ZXJ0aWNhbEFsaWdubWVudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGV4dCBjb21wb25lbnQganVzdGlmaWNhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBqdXN0aWZpY2F0aW9uIEp1c3RpZmljYXRpb24gZm9yIHRoZSB0ZXh0IGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIFRleHRDb21wb25lbnQudmVydGljYWxBbGlnbm1lbnR9IGluc3RlYWQuXG4gICAgICovXG4gICAgc2V0IGp1c3RpZmljYXRpb24oanVzdGlmaWNhdGlvbjogVmVydGljYWxBbGlnbm1lbnQpIHtcbiAgICAgICAgdGhpcy52ZXJ0aWNhbEFsaWdubWVudCA9IGp1c3RpZmljYXRpb247XG4gICAgfVxuXG4gICAgLyoqIFRleHQgY29tcG9uZW50IGNoYXJhY3RlciBzcGFjaW5nLiAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IGNoYXJhY3RlclNwYWNpbmcoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X2dldF9jaGFyYWN0ZXJfc3BhY2luZyh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRleHQgY29tcG9uZW50IGNoYXJhY3RlciBzcGFjaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNwYWNpbmcgQ2hhcmFjdGVyIHNwYWNpbmcgZm9yIHRoZSB0ZXh0IGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICBzZXQgY2hhcmFjdGVyU3BhY2luZyhzcGFjaW5nOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfdGV4dF9jb21wb25lbnRfc2V0X2NoYXJhY3Rlcl9zcGFjaW5nKHRoaXMuX2lkLCBzcGFjaW5nKTtcbiAgICB9XG5cbiAgICAvKiogVGV4dCBjb21wb25lbnQgbGluZSBzcGFjaW5nLiAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IGxpbmVTcGFjaW5nKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9nZXRfbGluZV9zcGFjaW5nKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGV4dCBjb21wb25lbnQgbGluZSBzcGFjaW5nXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3BhY2luZyBMaW5lIHNwYWNpbmcgZm9yIHRoZSB0ZXh0IGNvbXBvbmVudFxuICAgICAqL1xuICAgIHNldCBsaW5lU3BhY2luZyhzcGFjaW5nOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfdGV4dF9jb21wb25lbnRfc2V0X2xpbmVfc3BhY2luZyh0aGlzLl9pZCwgc3BhY2luZyk7XG4gICAgfVxuXG4gICAgLyoqIFRleHQgY29tcG9uZW50IGVmZmVjdC4gKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBlZmZlY3QoKTogVGV4dEVmZmVjdCB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9nZXRfZWZmZWN0KHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGV4dCBjb21wb25lbnQgZWZmZWN0XG4gICAgICpcbiAgICAgKiBAcGFyYW0gZWZmZWN0IEVmZmVjdCBmb3IgdGhlIHRleHQgY29tcG9uZW50XG4gICAgICovXG4gICAgc2V0IGVmZmVjdChlZmZlY3Q6IFRleHRFZmZlY3QpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfdGV4dF9jb21wb25lbnRfc2V0X2VmZmVjdCh0aGlzLl9pZCwgZWZmZWN0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUZXh0IGNvbXBvbmVudCBsaW5lIHdyYXAgbW9kZS5cbiAgICAgKiBAc2luY2UgMS4yLjFcbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCB3cmFwTW9kZSgpOiBUZXh0V3JhcE1vZGUge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfdGV4dF9jb21wb25lbnRfZ2V0X3dyYXBNb2RlKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGV4dCBjb21wb25lbnQgbGluZSB3cmFwIG1vZGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gd3JhcE1vZGUgTGluZSB3cmFwIG1vZGUgZm9yIHRoZSB0ZXh0IGNvbXBvbmVudC5cbiAgICAgKiBAc2luY2UgMS4yLjFcbiAgICAgKi9cbiAgICBzZXQgd3JhcE1vZGUod3JhcE1vZGU6IFRleHRXcmFwTW9kZSkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9zZXRfd3JhcE1vZGUodGhpcy5faWQsIHdyYXBNb2RlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUZXh0IGNvbXBvbmVudCBsaW5lIHdyYXAgd2lkdGguXG4gICAgICogQHNpbmNlIDEuMi4xXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgd3JhcFdpZHRoKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9nZXRfd3JhcFdpZHRoKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGV4dCBjb21wb25lbnQgbGluZSB3cmFwIHdpZHRoLlxuICAgICAqXG4gICAgICogT25seSB0YWtlcyBlZmZlY3Qgd2hlbiB7QGxpbmsgd3JhcE1vZGV9IGlzIHNvbWV0aGluZyBvdGhlciB0aGFuXG4gICAgICoge0BsaW5rIFRleHRXcmFwTW9kZS5Ob25lfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB3aWR0aCBMaW5lIHdyYXAgd2lkdGggZm9yIHRoZSB0ZXh0IGNvbXBvbmVudC5cbiAgICAgKiBAc2luY2UgMS4yLjFcbiAgICAgKi9cbiAgICBzZXQgd3JhcFdpZHRoKHdpZHRoOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfdGV4dF9jb21wb25lbnRfc2V0X3dyYXBXaWR0aCh0aGlzLl9pZCwgd2lkdGgpO1xuICAgIH1cblxuICAgIC8qKiBUZXh0IGNvbXBvbmVudCB0ZXh0LiAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IHRleHQoKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX3RleHRfY29tcG9uZW50X2dldF90ZXh0KHRoaXMuX2lkKTtcbiAgICAgICAgcmV0dXJuIHdhc20uVVRGOFRvU3RyaW5nKHB0cik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRleHQgY29tcG9uZW50IHRleHQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGV4dCBUZXh0IG9mIHRoZSB0ZXh0IGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICBzZXQgdGV4dCh0ZXh0OiBhbnkpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX3RleHRfY29tcG9uZW50X3NldF90ZXh0KHRoaXMuX2lkLCB3YXNtLnRlbXBVVEY4KHRleHQudG9TdHJpbmcoKSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBtYXRlcmlhbCB0byByZW5kZXIgdGhlIHRleHQgd2l0aC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtYXRlcmlhbCBOZXcgbWF0ZXJpYWwuXG4gICAgICovXG4gICAgc2V0IG1hdGVyaWFsKG1hdGVyaWFsOiBNYXRlcmlhbCB8IG51bGwgfCB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgbWF0SW5kZXggPSBtYXRlcmlhbCA/IG1hdGVyaWFsLl9pZCA6IDA7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X3NldF9tYXRlcmlhbCh0aGlzLl9pZCwgbWF0SW5kZXgpO1xuICAgIH1cblxuICAgIC8qKiBNYXRlcmlhbCB1c2VkIHRvIHJlbmRlciB0aGUgdGV4dC4gKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBtYXRlcmlhbCgpOiBNYXRlcmlhbCB8IG51bGwge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X2dldF9tYXRlcmlhbCh0aGlzLl9pZCk7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS5tYXRlcmlhbHMud3JhcChpbmRleCk7XG4gICAgfVxuXG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldEJvdW5kaW5nQm94Rm9yVGV4dCh0ZXh0OiBzdHJpbmcpOiBGbG9hdDMyQXJyYXk7XG4gICAgLyoqXG4gICAgICogQXhpcy1hbGlnbmVkIGJvdW5kaW5nIGJveCBmb3IgYSBnaXZlbiB0ZXh0LCBpbiBvYmplY3Qgc3BhY2UuXG4gICAgICpcbiAgICAgKiBUbyBjYWxjdWxhdGUgdGhlIHNpemUgZm9yIHRoZSBjdXJyZW50bHkgc2V0IHRleHQsIHVzZVxuICAgICAqIHtAbGluayBnZXRCb3VuZGluZ0JveH0uXG4gICAgICpcbiAgICAgKiBVc2VmdWwgZm9yIGNhbGN1bGF0aW5nIHRoZSB0ZXh0IHNpemUgYmVmb3JlIGFuIHVwZGF0ZSBhbmQgcG90ZW50aWFsbHlcbiAgICAgKiBhZGp1c3RpbmcgdGhlIHRleHQ6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGxldCB1cGRhdGVkTmFtZSA9ICdzb21lIHZlcnkgbG9uZyBuYW1lJztcbiAgICAgKiBjb25zdCBib3ggPSBuZXcgRmxvYXQzMkFycmF5KDQpO1xuICAgICAqIHRleHQuZ2V0Qm91bmRpbmdCb3hGb3JUZXh0KHVwZGF0ZWROYW1lLCBib3gpO1xuICAgICAqIGNvbnN0IHdpZHRoID0gYm94WzJdIC0gYm94WzBdO1xuICAgICAqIGlmKHdpZHRoID4gMi4wKSB7XG4gICAgICogICAgIHVwZGF0ZWROYW1lID0gdXBkYXRlZE5hbWUuc2xpY2UoMCwgNSkgKyAnLi4uJztcbiAgICAgKiB9XG4gICAgICogdGV4dC50ZXh0ID0gdXBkYXRlZE5hbWU7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGV4dCBUZXh0IHN0cmluZyB0byBjYWxjdWxhdGUgdGhlIGJvdW5kaW5nIGJveCBmb3IuXG4gICAgICogQHBhcmFtIG91dCBQcmVhbGxvY2F0ZWQgYXJyYXkgdG8gd3JpdGUgaW50bywgdG8gYXZvaWQgZ2FyYmFnZSxcbiAgICAgKiAgICAgb3RoZXJ3aXNlIHdpbGwgYWxsb2NhdGUgYSBuZXcgRmxvYXQzMkFycmF5LlxuICAgICAqXG4gICAgICogQHJldHVybnMgQm91bmRpbmcgYm94IC0gbGVmdCwgYm90dG9tLCByaWdodCwgdG9wLlxuICAgICAqL1xuICAgIGdldEJvdW5kaW5nQm94Rm9yVGV4dDxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KHRleHQ6IHN0cmluZywgb3V0OiBUKTogVDtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0Qm91bmRpbmdCb3hGb3JUZXh0PFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4oXG4gICAgICAgIHRleHQ6IHN0cmluZyxcbiAgICAgICAgb3V0OiBUIHwgRmxvYXQzMkFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSg0KVxuICAgICk6IFQgfCBGbG9hdDMyQXJyYXkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgLyogT2Zmc2V0IGJ5IDQgZmxvYXRzLCBvdXRwdXQgaXMgd3JpdHRlbiB0byBfdGVtcE1lbSAqL1xuICAgICAgICBjb25zdCB0ZXh0UHRyID0gd2FzbS50ZW1wVVRGOCh0ZXh0LCA0ICogNCk7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3RleHRfY29tcG9uZW50X2dldF9ib3VuZGluZ0JveChcbiAgICAgICAgICAgIHRoaXMuX2lkLFxuICAgICAgICAgICAgdGV4dFB0cixcbiAgICAgICAgICAgIHdhc20uX3RlbXBNZW1cbiAgICAgICAgKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsyXTtcbiAgICAgICAgb3V0WzNdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzNdO1xuICAgICAgICByZXR1cm4gb3V0IGFzIFQ7XG4gICAgfVxuXG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldEJvdW5kaW5nQm94KCk6IEZsb2F0MzJBcnJheTtcbiAgICAvKipcbiAgICAgKiBBeGlzLWFsaWduZWQgYm91bmRpbmcgYm94LCBpbiBvYmplY3Qgc3BhY2UuXG4gICAgICpcbiAgICAgKiBUaGUgYm91bmRpbmcgYm94IGlzIGNvbXB1dGVkIHVzaW5nIHRoZSBjdXJyZW50IGNvbXBvbmVudCBwcm9wZXJ0aWVzXG4gICAgICogdGhhdCBpbmZsdWVuY2UgdGhlIHBvc2l0aW9uIGFuZCBzaXplIG9mIHRoZSB0ZXh0LiBUaGUgYm91bmRpbmcgYm94IGlzXG4gICAgICogYWZmZWN0ZWQgYnkgYWxpZ25tZW50LCBzcGFjaW5nLCBlZmZlY3QgdHlwZSBhbmQgdGhlIGZvbnQgc2V0IGluIHRoZVxuICAgICAqIG1hdGVyaWFsLlxuICAgICAqXG4gICAgICogVG8gY2FsY3VsYXRlIHRoZSBzaXplIGZvciBhIGRpZmZlcmVudCB0ZXh0LCB1c2VcbiAgICAgKiB7QGxpbmsgZ2V0Qm91bmRpbmdCb3hGb3JUZXh0fS5cbiAgICAgKlxuICAgICAqIFVzZWZ1bCBmb3IgYWRqdXN0aW5nIHRleHQgcG9zaXRpb24gb3Igc2NhbGluZzpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgYm94ID0gbmV3IEZsb2F0MzJBcnJheSg0KTtcbiAgICAgKiB0ZXh0LmdldEJvdW5kaW5nQm94KGJveCk7XG4gICAgICogY29uc3Qgd2lkdGggPSBib3hbMl0gLSBib3hbMF07XG4gICAgICogLy8gTWFrZSB0ZXh0IDFtIHdpZGVcbiAgICAgKiB0ZXh0Lm9iamVjdC5zZXRTY2FsaW5nTG9jYWwoWzEvd2lkdGgsIDEsIDFdKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSB0ZXh0IFRleHQgc3RyaW5nIHRvIGNhbGN1bGF0ZSB0aGUgYm91bmRpbmcgYm94IGZvci5cbiAgICAgKiBAcGFyYW0gb3V0IFByZWFsbG9jYXRlZCBhcnJheSB0byB3cml0ZSBpbnRvLCB0byBhdm9pZCBnYXJiYWdlLFxuICAgICAqICAgICBvdGhlcndpc2Ugd2lsbCBhbGxvY2F0ZSBhIG5ldyBGbG9hdDMyQXJyYXkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBCb3VuZGluZyBib3ggLSBsZWZ0LCBib3R0b20sIHJpZ2h0LCB0b3AuXG4gICAgICovXG4gICAgZ2V0Qm91bmRpbmdCb3g8VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQpOiBUO1xuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRCb3VuZGluZ0JveDxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KFxuICAgICAgICBvdXQ6IFQgfCBGbG9hdDMyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KDQpXG4gICAgKTogVCB8IEZsb2F0MzJBcnJheSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF90ZXh0X2NvbXBvbmVudF9nZXRfYm91bmRpbmdCb3godGhpcy5faWQsIDAsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBvdXRbMF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzJdO1xuICAgICAgICBvdXRbM10gPSB3YXNtLl90ZW1wTWVtRmxvYXRbM107XG4gICAgICAgIHJldHVybiBvdXQgYXMgVDtcbiAgICB9XG59XG5cbi8qKlxuICogTmF0aXZlIHZpZXcgY29tcG9uZW50LlxuICpcbiAqIFByb3ZpZGVzIGFjY2VzcyB0byBhIG5hdGl2ZSB2aWV3IGNvbXBvbmVudCBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFZpZXdDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIC8qKiBAb3ZlcnJpZGUgKi9cbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAndmlldyc7XG5cbiAgICAvKipcbiAgICAgKiBQcm9qZWN0aW9uIHR5cGUgb2YgdGhlIHZpZXcuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4yLjJcbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBwcm9qZWN0aW9uVHlwZSgpOiBQcm9qZWN0aW9uVHlwZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF92aWV3X2NvbXBvbmVudF9nZXRfcHJvamVjdGlvblR5cGUodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcHJvamVjdGlvbiB0eXBlIG9mIHRoZSB2aWV3LlxuICAgICAqXG4gICAgICogQHBhcmFtIHR5cGUgTmV3IHByb2plY3Rpb24gdHlwZS5cbiAgICAgKiBAc2luY2UgMS4yLjJcbiAgICAgKi9cbiAgICBzZXQgcHJvamVjdGlvblR5cGUodHlwZSkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF92aWV3X2NvbXBvbmVudF9zZXRfcHJvamVjdGlvblR5cGUodGhpcy5faWQsIHR5cGUpO1xuICAgIH1cblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRQcm9qZWN0aW9uTWF0cml4KCk6IEZsb2F0MzJBcnJheTtcbiAgICAvKipcbiAgICAgKiBQcm9qZWN0aW9uIG1hdHJpeC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgRGVzdGluYXRpb24gYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDE2IGVsZW1lbnRzLlxuICAgICAqIEByZXR1cm5zIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICovXG4gICAgZ2V0UHJvamVjdGlvbk1hdHJpeDxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCk6IFQ7XG4gICAgZ2V0UHJvamVjdGlvbk1hdHJpeChvdXQ6IE51bWJlckFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSgxNikpOiBOdW1iZXJBcnJheSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBwdHIgPVxuICAgICAgICAgICAgd2FzbS5fd2xfdmlld19jb21wb25lbnRfZ2V0X3Byb2plY3Rpb25fbWF0cml4KHRoaXMuX2lkKSAvIDQ7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyArK2kpIHtcbiAgICAgICAgICAgIG91dFtpXSA9IHdhc20uSEVBUEYzMltwdHIgKyBpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8ge0BsaW5rIFZpZXdDb21wb25lbnQuZ2V0UHJvamVjdGlvbk1hdHJpeH0uXG4gICAgICpcbiAgICAgKiBAbm90ZSBQcmVmZXIgdG8gdXNlIHtAbGluayBWaWV3Q29tcG9uZW50LmdldFByb2plY3Rpb25NYXRyaXh9IGZvciBwZXJmb3JtYW5jZS5cbiAgICAgKi9cbiAgICBAZW51bWVyYWJsZSgpXG4gICAgZ2V0IHByb2plY3Rpb25NYXRyaXgoKTogRmxvYXQzMkFycmF5IHtcbiAgICAgICAgLyoqIEB0b2RvOiBCcmVhayBhdCAyLjAuMC4gRG8gbm90IGFsbG93IG1vZGlmeWluZyBtZW1vcnkgaW4tcGxhY2UuICovXG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShcbiAgICAgICAgICAgIHdhc20uSEVBUEYzMi5idWZmZXIsXG4gICAgICAgICAgICB3YXNtLl93bF92aWV3X2NvbXBvbmVudF9nZXRfcHJvamVjdGlvbl9tYXRyaXgodGhpcy5faWQpLFxuICAgICAgICAgICAgMTZcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKiogVmlld0NvbXBvbmVudCBuZWFyIGNsaXBwaW5nIHBsYW5lIHZhbHVlLiAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IG5lYXIoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3ZpZXdfY29tcG9uZW50X2dldF9uZWFyKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgbmVhciBjbGlwcGluZyBwbGFuZSBkaXN0YW5jZSBmb3IgdGhlIHZpZXcuXG4gICAgICpcbiAgICAgKiBJZiBhbiBYUiBzZXNzaW9uIGlzIGFjdGl2ZSwgdGhlIGNoYW5nZSB3aWxsIGFwcGx5IGluIHRoZVxuICAgICAqIGZvbGxvd2luZyBmcmFtZSwgb3RoZXJ3aXNlIHRoZSBjaGFuZ2UgaXMgaW1tZWRpYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5lYXIgTmVhciBkZXB0aCB2YWx1ZS5cbiAgICAgKi9cbiAgICBzZXQgbmVhcihuZWFyOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfdmlld19jb21wb25lbnRfc2V0X25lYXIodGhpcy5faWQsIG5lYXIpO1xuICAgIH1cblxuICAgIC8qKiBGYXIgY2xpcHBpbmcgcGxhbmUgdmFsdWUuICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgZmFyKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF92aWV3X2NvbXBvbmVudF9nZXRfZmFyKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgZmFyIGNsaXBwaW5nIHBsYW5lIGRpc3RhbmNlIGZvciB0aGUgdmlldy5cbiAgICAgKlxuICAgICAqIElmIGFuIFhSIHNlc3Npb24gaXMgYWN0aXZlLCB0aGUgY2hhbmdlIHdpbGwgYXBwbHkgaW4gdGhlXG4gICAgICogZm9sbG93aW5nIGZyYW1lLCBvdGhlcndpc2UgdGhlIGNoYW5nZSBpcyBpbW1lZGlhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmFyIE5lYXIgZGVwdGggdmFsdWUuXG4gICAgICovXG4gICAgc2V0IGZhcihmYXI6IG51bWJlcikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF92aWV3X2NvbXBvbmVudF9zZXRfZmFyKHRoaXMuX2lkLCBmYXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaG9yaXpvbnRhbCBmaWVsZCBvZiB2aWV3IGZvciB0aGUgdmlldywgKippbiBkZWdyZWVzKiouXG4gICAgICpcbiAgICAgKiBJZiBhbiBYUiBzZXNzaW9uIGlzIGFjdGl2ZSBhbmQgdGhpcyBpcyB0aGUgbGVmdCBvciByaWdodCBleWUgdmlldywgdGhpc1xuICAgICAqIHJldHVybnMgdGhlIGZpZWxkIG9mIHZpZXcgcmVwb3J0ZWQgYnkgdGhlIGRldmljZSwgcmVnYXJkbGVzcyBvZiB0aGUgZm92XG4gICAgICogdGhhdCB3YXMgc2V0LlxuICAgICAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IGZvdigpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfdmlld19jb21wb25lbnRfZ2V0X2Zvdih0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBob3Jpem9udGFsIGZpZWxkIG9mIHZpZXcgZm9yIHRoZSB2aWV3LCAqKmluIGRlZ3JlZXMqKi5cbiAgICAgKlxuICAgICAqIE9ubHkgaGFzIGFuIGVmZmVjdCBpZiB7QGxpbmsgcHJvamVjdGlvblR5cGV9IGlzXG4gICAgICoge0BsaW5rIFByb2plY3Rpb25UeXBlLlBlcnNwZWN0aXZlfS5cbiAgICAgKlxuICAgICAqIElmIGFuIFhSIHNlc3Npb24gaXMgYWN0aXZlIGFuZCB0aGlzIGlzIHRoZSBsZWZ0IG9yIHJpZ2h0IGV5ZSB2aWV3LCB0aGVcbiAgICAgKiBmaWVsZCBvZiB2aWV3IHJlcG9ydGVkIGJ5IHRoZSBkZXZpY2UgaXMgdXNlZCBhbmQgdGhpcyB2YWx1ZSBpcyBpZ25vcmVkLlxuICAgICAqIEFmdGVyIHRoZSBYUiBzZXNzaW9uIGVuZHMsIHRoZSBuZXcgdmFsdWUgaXMgYXBwbGllZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmb3YgSG9yaXpvbnRhbCBmaWVsZCBvZiB2aWV3LCAqKmluIGRlZ3JlZXMqKi5cbiAgICAgKi9cbiAgICBzZXQgZm92KGZvdikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF92aWV3X2NvbXBvbmVudF9zZXRfZm92KHRoaXMuX2lkLCBmb3YpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgd2lkdGggb2YgdGhlIG9ydGhvZ3JhcGhpYyB2aWV3aW5nIHZvbHVtZS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjIuMlxuICAgICAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IGV4dGVudCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfdmlld19jb21wb25lbnRfZ2V0X2V4dGVudCh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB3aWR0aCBvZiB0aGUgb3J0aG9ncmFwaGljIHZpZXdpbmcgdm9sdW1lLlxuICAgICAqXG4gICAgICogT25seSBoYXMgYW4gZWZmZWN0IGlmIHtAbGluayBwcm9qZWN0aW9uVHlwZX0gaXNcbiAgICAgKiB7QGxpbmsgUHJvamVjdGlvblR5cGUuT3J0aG9ncmFwaGljfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBleHRlbnQgTmV3IGV4dGVudC5cbiAgICAgKiBAc2luY2UgMS4yLjJcbiAgICAgKi9cbiAgICBzZXQgZXh0ZW50KGV4dGVudCkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF92aWV3X2NvbXBvbmVudF9zZXRfZXh0ZW50KHRoaXMuX2lkLCBleHRlbnQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBOYXRpdmUgaW5wdXQgY29tcG9uZW50LlxuICpcbiAqIFByb3ZpZGVzIGFjY2VzcyB0byBhIG5hdGl2ZSBpbnB1dCBjb21wb25lbnQgaW5zdGFuY2UuXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnB1dENvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgLyoqIEBvdmVycmlkZSAqL1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdpbnB1dCc7XG5cbiAgICAvKiogSW5wdXQgY29tcG9uZW50IHR5cGUgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBpbnB1dFR5cGUoKTogSW5wdXRUeXBlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2lucHV0X2NvbXBvbmVudF9nZXRfdHlwZSh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGlucHV0IGNvbXBvbmVudCB0eXBlLlxuICAgICAqXG4gICAgICogQHBhcmFtcyBOZXcgaW5wdXQgY29tcG9uZW50IHR5cGUuXG4gICAgICovXG4gICAgc2V0IGlucHV0VHlwZSh0eXBlOiBJbnB1dFR5cGUpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfaW5wdXRfY29tcG9uZW50X3NldF90eXBlKHRoaXMuX2lkLCB0eXBlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXZWJYUiBEZXZpY2UgQVBJIGlucHV0IHNvdXJjZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbnB1dCBjb21wb25lbnQsXG4gICAgICogaWYgdHlwZSB7QGxpbmsgSW5wdXRUeXBlLkNvbnRyb2xsZXJMZWZ0fSBvciB7QGxpbmsgSW5wdXRUeXBlLkNvbnRyb2xsZXJSaWdodH0uXG4gICAgICovXG4gICAgQGVudW1lcmFibGUoKVxuICAgIGdldCB4cklucHV0U291cmNlKCk6IFhSSW5wdXRTb3VyY2UgfCBudWxsIHtcbiAgICAgICAgY29uc3QgeHIgPSB0aGlzLmVuZ2luZS54cjtcbiAgICAgICAgaWYgKCF4cikgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgZm9yIChsZXQgaW5wdXRTb3VyY2Ugb2YgeHIuc2Vzc2lvbi5pbnB1dFNvdXJjZXMpIHtcbiAgICAgICAgICAgIGlmIChpbnB1dFNvdXJjZS5oYW5kZWRuZXNzID09IHRoaXMuaGFuZGVkbmVzcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbnB1dFNvdXJjZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqICdsZWZ0JywgJ3JpZ2h0JyBvciBgbnVsbGAgZGVwZW5kaW5nIG9uIHRoZSB7QGxpbmsgSW5wdXRDb21wb25lbnQjaW5wdXRUeXBlfS5cbiAgICAgKi9cbiAgICBAZW51bWVyYWJsZSgpXG4gICAgZ2V0IGhhbmRlZG5lc3MoKTogJ2xlZnQnIHwgJ3JpZ2h0JyB8IG51bGwge1xuICAgICAgICBjb25zdCBpbnB1dFR5cGUgPSB0aGlzLmlucHV0VHlwZTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgaW5wdXRUeXBlID09IElucHV0VHlwZS5Db250cm9sbGVyUmlnaHQgfHxcbiAgICAgICAgICAgIGlucHV0VHlwZSA9PSBJbnB1dFR5cGUuUmF5UmlnaHQgfHxcbiAgICAgICAgICAgIGlucHV0VHlwZSA9PSBJbnB1dFR5cGUuRXllUmlnaHRcbiAgICAgICAgKVxuICAgICAgICAgICAgcmV0dXJuICdyaWdodCc7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGlucHV0VHlwZSA9PSBJbnB1dFR5cGUuQ29udHJvbGxlckxlZnQgfHxcbiAgICAgICAgICAgIGlucHV0VHlwZSA9PSBJbnB1dFR5cGUuUmF5TGVmdCB8fFxuICAgICAgICAgICAgaW5wdXRUeXBlID09IElucHV0VHlwZS5FeWVMZWZ0XG4gICAgICAgIClcbiAgICAgICAgICAgIHJldHVybiAnbGVmdCc7XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG4vKipcbiAqIE5hdGl2ZSBsaWdodCBjb21wb25lbnQuXG4gKlxuICogUHJvdmlkZXMgYWNjZXNzIHRvIGEgbmF0aXZlIGxpZ2h0IGNvbXBvbmVudCBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGNsYXNzIExpZ2h0Q29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAvKiogQG92ZXJyaWRlICovXG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ2xpZ2h0JztcblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRDb2xvcigpOiBGbG9hdDMyQXJyYXk7XG4gICAgLyoqXG4gICAgICogR2V0IGxpZ2h0IGNvbG9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBEZXN0aW5hdGlvbiBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgMyBlbGVtZW50cy5cbiAgICAgKiBAcmV0dXJucyBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIGdldENvbG9yPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBUKTogVDtcbiAgICBnZXRDb2xvcihvdXQ6IE51bWJlckFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSgzKSk6IE51bWJlckFycmF5IHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfY29sb3IodGhpcy5faWQpIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIG91dFswXSA9IHdhc20uSEVBUEYzMltwdHJdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uSEVBUEYzMltwdHIgKyAyXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgbGlnaHQgY29sb3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYyBOZXcgY29sb3IgYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDMgZWxlbWVudHMuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgc2V0Q29sb3IoYzogUmVhZG9ubHk8TnVtYmVyQXJyYXk+KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9saWdodF9jb21wb25lbnRfZ2V0X2NvbG9yKHRoaXMuX2lkKSAvIDQ7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyXSA9IGNbMF07XG4gICAgICAgIHdhc20uSEVBUEYzMltwdHIgKyAxXSA9IGNbMV07XG4gICAgICAgIHdhc20uSEVBUEYzMltwdHIgKyAyXSA9IGNbMl07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVmlldyBvbiB0aGUgbGlnaHQgY29sb3IuXG4gICAgICpcbiAgICAgKiBAbm90ZSBQcmVmZXIgdG8gdXNlIHtAbGluayBnZXRDb2xvcn0gaW4gcGVyZm9ybWFuY2UtY3JpdGljYWwgY29kZS5cbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBjb2xvcigpOiBGbG9hdDMyQXJyYXkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkoXG4gICAgICAgICAgICB3YXNtLkhFQVBGMzIuYnVmZmVyLFxuICAgICAgICAgICAgd2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X2dldF9jb2xvcih0aGlzLl9pZCksXG4gICAgICAgICAgICAzXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGxpZ2h0IGNvbG9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIGMgQ29sb3Igb2YgdGhlIGxpZ2h0IGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqIEBub3RlIFByZWZlciB0byB1c2Uge0BsaW5rIHNldENvbG9yfSBpbiBwZXJmb3JtYW5jZS1jcml0aWNhbCBjb2RlLlxuICAgICAqL1xuICAgIHNldCBjb2xvcihjOiBSZWFkb25seTxOdW1iZXJBcnJheT4pIHtcbiAgICAgICAgdGhpcy5jb2xvci5zZXQoYyk7XG4gICAgfVxuXG4gICAgLyoqIExpZ2h0IHR5cGUuICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgbGlnaHRUeXBlKCk6IExpZ2h0VHlwZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfZ2V0X3R5cGUodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBsaWdodCB0eXBlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGxpZ2h0VHlwZSBUeXBlIG9mIHRoZSBsaWdodCBjb21wb25lbnQuXG4gICAgICovXG4gICAgc2V0IGxpZ2h0VHlwZSh0OiBMaWdodFR5cGUpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X3NldF90eXBlKHRoaXMuX2lkLCB0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMaWdodCBpbnRlbnNpdHkuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgaW50ZW5zaXR5KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfZ2V0X2ludGVuc2l0eSh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGxpZ2h0IGludGVuc2l0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbnRlbnNpdHkgSW50ZW5zaXR5IG9mIHRoZSBsaWdodCBjb21wb25lbnQuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgc2V0IGludGVuc2l0eShpbnRlbnNpdHk6IG51bWJlcikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfc2V0X2ludGVuc2l0eSh0aGlzLl9pZCwgaW50ZW5zaXR5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPdXRlciBhbmdsZSBmb3Igc3BvdCBsaWdodHMsIGluIGRlZ3JlZXMuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgb3V0ZXJBbmdsZSgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X2dldF9vdXRlckFuZ2xlKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgb3V0ZXIgYW5nbGUgZm9yIHNwb3QgbGlnaHRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFuZ2xlIE91dGVyIGFuZ2xlLCBpbiBkZWdyZWVzLlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIHNldCBvdXRlckFuZ2xlKGFuZ2xlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X3NldF9vdXRlckFuZ2xlKHRoaXMuX2lkLCBhbmdsZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5uZXIgYW5nbGUgZm9yIHNwb3QgbGlnaHRzLCBpbiBkZWdyZWVzLlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IGlubmVyQW5nbGUoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfaW5uZXJBbmdsZSh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGlubmVyIGFuZ2xlIGZvciBzcG90IGxpZ2h0cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhbmdsZSBJbm5lciBhbmdsZSwgaW4gZGVncmVlcy5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBzZXQgaW5uZXJBbmdsZShhbmdsZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9zZXRfaW5uZXJBbmdsZSh0aGlzLl9pZCwgYW5nbGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIGxpZ2h0IGNhc3RzIHNoYWRvd3MuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgc2hhZG93cygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X2dldF9zaGFkb3dzKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgd2hldGhlciB0aGUgbGlnaHQgY2FzdHMgc2hhZG93cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiIFdoZXRoZXIgdGhlIGxpZ2h0IGNhc3RzIHNoYWRvd3MuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgc2V0IHNoYWRvd3MoYjogYm9vbGVhbikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfc2V0X3NoYWRvd3ModGhpcy5faWQsIGIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJhbmdlIGZvciBzaGFkb3dzLlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IHNoYWRvd1JhbmdlKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfZ2V0X3NoYWRvd1JhbmdlKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgcmFuZ2UgZm9yIHNoYWRvd3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmFuZ2UgUmFuZ2UgZm9yIHNoYWRvd3MuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgc2V0IHNoYWRvd1JhbmdlKHJhbmdlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X3NldF9zaGFkb3dSYW5nZSh0aGlzLl9pZCwgcmFuZ2UpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEJpYXMgdmFsdWUgZm9yIHNoYWRvd3MuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgc2hhZG93QmlhcygpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X2dldF9zaGFkb3dCaWFzKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgYmlhcyB2YWx1ZSBmb3Igc2hhZG93cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiaWFzIEJpYXMgZm9yIHNoYWRvd3MuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgc2V0IHNoYWRvd0JpYXMoYmlhczogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9zZXRfc2hhZG93Qmlhcyh0aGlzLl9pZCwgYmlhcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTm9ybWFsIGJpYXMgdmFsdWUgZm9yIHNoYWRvd3MuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgc2hhZG93Tm9ybWFsQmlhcygpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X2dldF9zaGFkb3dOb3JtYWxCaWFzKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgbm9ybWFsIGJpYXMgdmFsdWUgZm9yIHNoYWRvd3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYmlhcyBOb3JtYWwgYmlhcyBmb3Igc2hhZG93cy5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBzZXQgc2hhZG93Tm9ybWFsQmlhcyhiaWFzOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X3NldF9zaGFkb3dOb3JtYWxCaWFzKHRoaXMuX2lkLCBiaWFzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUZXhlbCBzaXplIGZvciBzaGFkb3dzLlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IHNoYWRvd1RleGVsU2l6ZSgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfbGlnaHRfY29tcG9uZW50X2dldF9zaGFkb3dUZXhlbFNpemUodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0ZXhlbCBzaXplIGZvciBzaGFkb3dzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNpemUgVGV4ZWwgc2l6ZSBmb3Igc2hhZG93cy5cbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBzZXQgc2hhZG93VGV4ZWxTaXplKHNpemU6IG51bWJlcikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfc2V0X3NoYWRvd1RleGVsU2l6ZSh0aGlzLl9pZCwgc2l6ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FzY2FkZSBjb3VudCBmb3Ige0BsaW5rIExpZ2h0VHlwZS5TdW59IHNoYWRvd3MuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgY2FzY2FkZUNvdW50KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9saWdodF9jb21wb25lbnRfZ2V0X2Nhc2NhZGVDb3VudCh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGNhc2NhZGUgY291bnQgZm9yIHtAbGluayBMaWdodFR5cGUuU3VufSBzaGFkb3dzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvdW50IENhc2NhZGUgY291bnQuXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgc2V0IGNhc2NhZGVDb3VudChjb3VudDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2xpZ2h0X2NvbXBvbmVudF9zZXRfY2FzY2FkZUNvdW50KHRoaXMuX2lkLCBjb3VudCk7XG4gICAgfVxufVxuXG4vKipcbiAqIE5hdGl2ZSBhbmltYXRpb24gY29tcG9uZW50LlxuICpcbiAqIFByb3ZpZGVzIGFjY2VzcyB0byBhIG5hdGl2ZSBhbmltYXRpb24gY29tcG9uZW50IGluc3RhbmNlLlxuICovXG5leHBvcnQgY2xhc3MgQW5pbWF0aW9uQ29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAvKiogQG92ZXJyaWRlICovXG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ2FuaW1hdGlvbic7XG5cbiAgICAvKipcbiAgICAgKiBFbWl0dGVyIGZvciBhbmltYXRpb24gZXZlbnRzIHRyaWdnZXJlZCBvbiB0aGlzIGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqIFRoZSBmaXJzdCBhcmd1bWVudCBpcyB0aGUgbmFtZSBvZiB0aGUgZXZlbnQuXG4gICAgICovXG4gICAgcmVhZG9ubHkgb25FdmVudCA9IG5ldyBFbWl0dGVyPFtzdHJpbmddPigpO1xuXG4gICAgLyoqXG4gICAgICogU2V0IGFuaW1hdGlvbiB0byBwbGF5LlxuICAgICAqXG4gICAgICogTWFrZSBzdXJlIHRvIHtAbGluayBBbmltYXRpb24jcmV0YXJnZXR9IHRoZSBhbmltYXRpb24gdG8gYWZmZWN0IHRoZVxuICAgICAqIHJpZ2h0IG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYW5pbSBBbmltYXRpb24gdG8gcGxheS5cbiAgICAgKi9cbiAgICBzZXQgYW5pbWF0aW9uKGFuaW06IEFuaW1hdGlvbiB8IG51bGwgfCB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5zY2VuZS5hc3NlcnRPcmlnaW4oYW5pbSk7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfc2V0X2FuaW1hdGlvbihcbiAgICAgICAgICAgIHRoaXMuX2lkLFxuICAgICAgICAgICAgYW5pbSA/IGFuaW0uX2lkIDogMFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKiBBbmltYXRpb24gc2V0IGZvciB0aGlzIGNvbXBvbmVudCAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IGFuaW1hdGlvbigpOiBBbmltYXRpb24gfCBudWxsIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmVuZ2luZS53YXNtLl93bF9hbmltYXRpb25fY29tcG9uZW50X2dldF9hbmltYXRpb24odGhpcy5faWQpO1xuICAgICAgICByZXR1cm4gdGhpcy5fc2NlbmUuYW5pbWF0aW9ucy53cmFwKGluZGV4KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgcGxheSBjb3VudC4gU2V0IHRvIGAwYCB0byBsb29wIGluZGVmaW5pdGVseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwbGF5Q291bnQgTnVtYmVyIG9mIHRpbWVzIHRvIHJlcGVhdCB0aGUgYW5pbWF0aW9uLlxuICAgICAqL1xuICAgIHNldCBwbGF5Q291bnQocGxheUNvdW50OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9zZXRfcGxheUNvdW50KHRoaXMuX2lkLCBwbGF5Q291bnQpO1xuICAgIH1cblxuICAgIC8qKiBOdW1iZXIgb2YgdGltZXMgdGhlIGFuaW1hdGlvbiBpcyBwbGF5ZWQuICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgcGxheUNvdW50KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9hbmltYXRpb25fY29tcG9uZW50X2dldF9wbGF5Q291bnQodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBzcGVlZC4gU2V0IHRvIG5lZ2F0aXZlIHZhbHVlcyB0byBydW4gdGhlIGFuaW1hdGlvbiBiYWNrd2FyZHMuXG4gICAgICpcbiAgICAgKiBTZXR0aW5nIHNwZWVkIGhhcyBhbiBpbW1lZGlhdGUgZWZmZWN0IGZvciB0aGUgY3VycmVudCBmcmFtZSdzIHVwZGF0ZVxuICAgICAqIGFuZCB3aWxsIGNvbnRpbnVlIHdpdGggdGhlIHNwZWVkIGZyb20gdGhlIGN1cnJlbnQgcG9pbnQgaW4gdGhlIGFuaW1hdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzcGVlZCBOZXcgc3BlZWQgYXQgd2hpY2ggdG8gcGxheSB0aGUgYW5pbWF0aW9uLlxuICAgICAqIEBzaW5jZSAwLjguMTBcbiAgICAgKi9cbiAgICBzZXQgc3BlZWQoc3BlZWQ6IG51bWJlcikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9hbmltYXRpb25fY29tcG9uZW50X3NldF9zcGVlZCh0aGlzLl9pZCwgc3BlZWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNwZWVkIGZhY3RvciBhdCB3aGljaCB0aGUgYW5pbWF0aW9uIGlzIHBsYXllZC5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguMTBcbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBzcGVlZCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9nZXRfc3BlZWQodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKiBDdXJyZW50IHBsYXlpbmcgc3RhdGUgb2YgdGhlIGFuaW1hdGlvbiAqL1xuICAgIEBlbnVtZXJhYmxlKClcbiAgICBnZXQgc3RhdGUoKTogQW5pbWF0aW9uU3RhdGUge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9zdGF0ZSh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSG93IHRvIGhhbmRsZSByb290IG1vdGlvbiBvbiB0aGlzIGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjIuMlxuICAgICAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgQGVudW1lcmFibGUoKVxuICAgIGdldCByb290TW90aW9uTW9kZSgpOiBSb290TW90aW9uTW9kZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9hbmltYXRpb25fY29tcG9uZW50X2dldF9yb290TW90aW9uTW9kZSh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGhvdyB0byBoYW5kbGUgcm9vdCBtb3Rpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbW9kZSBNb2RlIHRvIGhhbmRsZSByb290IG1vdGlvbiwgc2VlIHtAbGluayBSb290TW90aW9uTW9kZX0uXG4gICAgICogQHNpbmNlIDEuMi4yXG4gICAgICovXG4gICAgc2V0IHJvb3RNb3Rpb25Nb2RlKG1vZGU6IFJvb3RNb3Rpb25Nb2RlKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfc2V0X3Jvb3RNb3Rpb25Nb2RlKHRoaXMuX2lkLCBtb2RlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDdXJyZW50IGl0ZXJhdGlvbiBvZiB0aGUgYW5pbWF0aW9uLlxuICAgICAqXG4gICAgICogSWYge0BsaW5rIHBsYXlDb3VudH0gaXMgbm90IHVubGltaXRlZCwgdGhlIHZhbHVlIGlzIGluIHRoZSByYW5nZSBmcm9tXG4gICAgICogYDBgIHRvIGBwbGF5Q291bnRgLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMi4zXG4gICAgICovXG4gICAgZ2V0IGl0ZXJhdGlvbigpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9nZXRfaXRlcmF0aW9uKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDdXJyZW50IHBsYXlpbmcgcG9zaXRpb24gb2YgdGhlIGFuaW1hdGlvbiB3aXRoaW4gdGhlIGN1cnJlbnQgaXRlcmF0aW9uLFxuICAgICAqIGluIHNlY29uZHMuXG4gICAgICpcbiAgICAgKiBUaGUgdmFsdWUgaXMgaW4gdGhlIHJhbmdlIGZyb20gYDAuMGAgdG8ge0BsaW5rIEFuaW1hdGlvbkNvbXBvbmVudCNkdXJhdGlvbn0sXG4gICAgICogaWYgcGxheWluZyBpbiByZXZlcnNlLCB0aGlzIHJhbmdlIGlzIHJldmVyc2VkIGFzIHdlbGwuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4yLjNcbiAgICAgKi9cbiAgICBnZXQgcG9zaXRpb24oKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfZ2V0X3Bvc2l0aW9uKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDdXJyZW50IGR1cmF0aW9uIHRvIGxvb3Agb25lIGl0ZXJhdGlvbiBpbiBzZWNvbmRzLCBvZmZlcnMgYSBtb3JlIGFjY3VyYXRlIGR1cmF0aW9uXG4gICAgICogdGhhbiB7QGxpbmsgQW5pbWF0aW9uI2R1cmF0aW9ufSB3aGVuIGJsZW5kaW5nIG11bHRpcGxlIGFuaW1hdGlvbnMuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4yLjNcbiAgICAgKi9cbiAgICBnZXQgZHVyYXRpb24oKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfZ2V0X2R1cmF0aW9uKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQbGF5IGFuaW1hdGlvbi5cbiAgICAgKlxuICAgICAqIElmIHRoZSBhbmltYXRpb24gaXMgY3VycmVudGx5IHBhdXNlZCwgcmVzdW1lcyBmcm9tIHRoYXQgcG9zaXRpb24uIElmIHRoZVxuICAgICAqIGFuaW1hdGlvbiBpcyBhbHJlYWR5IHBsYXlpbmcsIGRvZXMgbm90aGluZy5cbiAgICAgKlxuICAgICAqIFRvIHJlc3RhcnQgdGhlIGFuaW1hdGlvbiwge0BsaW5rIEFuaW1hdGlvbkNvbXBvbmVudCNzdG9wfSBpdCBmaXJzdC5cbiAgICAgKi9cbiAgICBwbGF5KCk6IHZvaWQge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9hbmltYXRpb25fY29tcG9uZW50X3BsYXkodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKiBTdG9wIGFuaW1hdGlvbi4gKi9cbiAgICBzdG9wKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9hbmltYXRpb25fY29tcG9uZW50X3N0b3AodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKiBQYXVzZSBhbmltYXRpb24uICovXG4gICAgcGF1c2UoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfcGF1c2UodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmFsdWUgb2YgYSBmbG9hdCBwYXJhbWV0ZXIgaW4gdGhlIGF0dGFjaGVkIGdyYXBoLlxuICAgICAqIFRocm93cyBpZiB0aGUgcGFyYW1ldGVyIGlzIG1pc3NpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSBOYW1lIG9mIHRoZSBwYXJhbWV0ZXIuXG4gICAgICogQHNpbmNlIDEuMi4wXG4gICAgICovXG4gICAgZ2V0RmxvYXRQYXJhbWV0ZXIobmFtZTogc3RyaW5nKTogbnVtYmVyIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBpbmRleCA9IHdhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfZ2V0R3JhcGhQYXJhbUluZGV4KFxuICAgICAgICAgICAgdGhpcy5faWQsXG4gICAgICAgICAgICB3YXNtLnRlbXBVVEY4KG5hbWUpXG4gICAgICAgICk7XG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBNaXNzaW5nIHBhcmFtZXRlciAnJHtuYW1lfSdgKTtcbiAgICAgICAgfVxuICAgICAgICB3YXNtLl93bF9hbmltYXRpb25fY29tcG9uZW50X2dldEdyYXBoUGFyYW1WYWx1ZSh0aGlzLl9pZCwgaW5kZXgsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICByZXR1cm4gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdmFsdWUgb2YgYSBmbG9hdCBwYXJhbWV0ZXIgaW4gdGhlIGF0dGFjaGVkIGdyYXBoXG4gICAgICogVGhyb3dzIGlmIHRoZSBwYXJhbWV0ZXIgaXMgbWlzc2luZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIHBhcmFtZXRlci5cbiAgICAgKiBAcGFyYW0gdmFsdWUgRmxvYXQgdmFsdWUgdG8gc2V0LlxuICAgICAqIEByZXR1cm5zIDEgaWYgdGhlIHBhcmFtZXRlciB3YXMgc3VjY2Vzc2Z1bGx5IHNldCwgMCBvbiBmYWlsLlxuICAgICAqIEBzaW5jZSAxLjIuMFxuICAgICAqL1xuICAgIHNldEZsb2F0UGFyYW1ldGVyKG5hbWU6IHN0cmluZywgdmFsdWU6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgaW5kZXggPSB3YXNtLl93bF9hbmltYXRpb25fY29tcG9uZW50X2dldEdyYXBoUGFyYW1JbmRleChcbiAgICAgICAgICAgIHRoaXMuX2lkLFxuICAgICAgICAgICAgd2FzbS50ZW1wVVRGOChuYW1lKVxuICAgICAgICApO1xuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgTWlzc2luZyBwYXJhbWV0ZXIgJyR7bmFtZX0nYCk7XG4gICAgICAgIH1cbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzBdID0gdmFsdWU7XG4gICAgICAgIHdhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfc2V0R3JhcGhQYXJhbVZhbHVlKHRoaXMuX2lkLCBpbmRleCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgfVxuXG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldFJvb3RNb3Rpb25UcmFuc2xhdGlvbigpOiBGbG9hdDMyQXJyYXk7XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSByb290IG1vdGlvbiB0cmFuc2xhdGlvbiBpbiAqKmxvY2FsIHNwYWNlKiogY2FsY3VsYXRlZCBmb3IgdGhlIGN1cnJlbnQgZnJhbWUuXG4gICAgICpcbiAgICAgKiBAbm90ZSBJZiB7QGxpbmsgQW5pbWF0aW9uQ29tcG9uZW50LnJvb3RNb3Rpb25Nb2RlfSBpcyBub3RcbiAgICAgKiBzZXQgdG8ge0BsaW5rIFJvb3RNb3Rpb25Nb2RlLlNjcmlwdH0gdGhpcyB3aWxsIGFsd2F5cyByZXR1cm4gYW4gaWRlbnRpdHkgdHJhbnNsYXRpb24uXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4yLjJcbiAgICAgKi9cbiAgICBnZXRSb290TW90aW9uVHJhbnNsYXRpb248VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQpOiBUO1xuICAgIGdldFJvb3RNb3Rpb25UcmFuc2xhdGlvbihvdXQ6IE51bWJlckFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSgzKSk6IE51bWJlckFycmF5IHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfZ2V0X3Jvb3RNb3Rpb25fdHJhbnNsYXRpb24odGhpcy5faWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBvdXRbMF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRSb290TW90aW9uUm90YXRpb24oKTogRmxvYXQzMkFycmF5O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcm9vdCBtb3Rpb24gcm90YXRpb24gaW4gKipsb2NhbCBzcGFjZSoqIGNhbGN1bGF0ZWQgZm9yIHRoZSBjdXJyZW50IGZyYW1lLlxuICAgICAqXG4gICAgICogQG5vdGUgSWYge0BsaW5rIEFuaW1hdGlvbkNvbXBvbmVudC5yb290TW90aW9uTW9kZX0gaXMgbm90XG4gICAgICogc2V0IHRvIHtAbGluayBSb290TW90aW9uTW9kZS5TY3JpcHR9IHRoaXMgd2lsbCBhbHdheXMgcmV0dXJuIGFuIGlkZW50aXR5IHJvdGF0aW9uLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMi4yXG4gICAgICovXG4gICAgZ2V0Um9vdE1vdGlvblJvdGF0aW9uPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBUKTogVDtcbiAgICBnZXRSb290TW90aW9uUm90YXRpb24ob3V0OiBOdW1iZXJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoMykpOiBOdW1iZXJBcnJheSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl93bF9hbmltYXRpb25fY29tcG9uZW50X2dldF9yb290TW90aW9uX3JvdGF0aW9uKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsyXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG59XG5cbi8qKlxuICogTmF0aXZlIG1lc2ggY29tcG9uZW50LlxuICpcbiAqIFByb3ZpZGVzIGFjY2VzcyB0byBhIG5hdGl2ZSBtZXNoIGNvbXBvbmVudCBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGNsYXNzIE1lc2hDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIC8qKiBAb3ZlcnJpZGUgKi9cbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnbWVzaCc7XG5cbiAgICAvKipcbiAgICAgKiBTZXQgbWF0ZXJpYWwgdG8gcmVuZGVyIHRoZSBtZXNoIHdpdGguXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWF0ZXJpYWwgTWF0ZXJpYWwgdG8gcmVuZGVyIHRoZSBtZXNoIHdpdGguXG4gICAgICovXG4gICAgc2V0IG1hdGVyaWFsKG1hdGVyaWFsOiBNYXRlcmlhbCB8IG51bGwgfCB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfbWVzaF9jb21wb25lbnRfc2V0X21hdGVyaWFsKFxuICAgICAgICAgICAgdGhpcy5faWQsXG4gICAgICAgICAgICBtYXRlcmlhbCA/IG1hdGVyaWFsLl9pZCA6IDBcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKiogTWF0ZXJpYWwgdXNlZCB0byByZW5kZXIgdGhlIG1lc2guICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgbWF0ZXJpYWwoKTogTWF0ZXJpYWwgfCBudWxsIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmVuZ2luZS53YXNtLl93bF9tZXNoX2NvbXBvbmVudF9nZXRfbWF0ZXJpYWwodGhpcy5faWQpO1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUubWF0ZXJpYWxzLndyYXAoaW5kZXgpO1xuICAgIH1cblxuICAgIC8qKiBNZXNoIHJlbmRlcmVkIGJ5IHRoaXMgY29tcG9uZW50LiAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IG1lc2goKTogTWVzaCB8IG51bGwge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZW5naW5lLndhc20uX3dsX21lc2hfY29tcG9uZW50X2dldF9tZXNoKHRoaXMuX2lkKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLm1lc2hlcy53cmFwKGluZGV4KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgbWVzaCB0byByZW5kZXJlZCB3aXRoIHRoaXMgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIG1lc2ggTWVzaCByZW5kZXJlZCBieSB0aGlzIGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICBzZXQgbWVzaChtZXNoOiBNZXNoIHwgbnVsbCB8IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9tZXNoX2NvbXBvbmVudF9zZXRfbWVzaCh0aGlzLl9pZCwgbWVzaD8uX2lkID8/IDApO1xuICAgIH1cblxuICAgIC8qKiBTa2luIGZvciB0aGlzIG1lc2ggY29tcG9uZW50LiAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IHNraW4oKTogU2tpbiB8IG51bGwge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZW5naW5lLndhc20uX3dsX21lc2hfY29tcG9uZW50X2dldF9za2luKHRoaXMuX2lkKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjZW5lLnNraW5zLndyYXAoaW5kZXgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBza2luIHRvIHRyYW5zZm9ybSB0aGlzIG1lc2ggY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHNraW4gU2tpbiB0byB1c2UgZm9yIHJlbmRlcmluZyBza2lubmVkIG1lc2hlcy5cbiAgICAgKi9cbiAgICBzZXQgc2tpbihza2luOiBTa2luIHwgbnVsbCB8IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLnNjZW5lLmFzc2VydE9yaWdpbihza2luKTtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfbWVzaF9jb21wb25lbnRfc2V0X3NraW4odGhpcy5faWQsIHNraW4gPyBza2luLl9pZCA6IDApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vcnBoIHRhcmdldHMgZm9yIHRoaXMgbWVzaCBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4yLjBcbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBtb3JwaFRhcmdldHMoKTogTW9ycGhUYXJnZXRzIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5lbmdpbmUud2FzbS5fd2xfbWVzaF9jb21wb25lbnRfZ2V0X21vcnBoX3RhcmdldHModGhpcy5faWQpO1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUubW9ycGhUYXJnZXRzLndyYXAoaW5kZXgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBtb3JwaCB0YXJnZXRzIHRvIHRyYW5zZm9ybSB0aGlzIG1lc2ggY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIG1vcnBoVGFyZ2V0cyBNb3JwaCB0YXJnZXRzIHRvIHVzZSBmb3IgcmVuZGVyaW5nLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMi4wXG4gICAgICovXG4gICAgc2V0IG1vcnBoVGFyZ2V0cyhtb3JwaFRhcmdldHM6IE1vcnBoVGFyZ2V0cyB8IG51bGwgfCB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfbWVzaF9jb21wb25lbnRfc2V0X21vcnBoX3RhcmdldHMoXG4gICAgICAgICAgICB0aGlzLl9pZCxcbiAgICAgICAgICAgIG1vcnBoVGFyZ2V0cz8uX2lkID8/IDBcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBnZXRNb3JwaFRhcmdldFdlaWdodHN9LlxuICAgICAqXG4gICAgICogQG5vdGUgUHJlZmVyIHRvIHVzZSB7QGxpbmsgZ2V0TW9ycGhUYXJnZXRXZWlnaHRzfSBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4yLjBcbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBtb3JwaFRhcmdldFdlaWdodHMoKTogRmxvYXQzMkFycmF5IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TW9ycGhUYXJnZXRXZWlnaHRzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBtb3JwaCB0YXJnZXQgd2VpZ2h0cyB0byB0cmFuc2Zvcm0gdGhpcyBtZXNoIGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB3ZWlnaHRzIE5ldyB3ZWlnaHRzLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMi4wXG4gICAgICovXG4gICAgc2V0IG1vcnBoVGFyZ2V0V2VpZ2h0cyh3ZWlnaHRzOiBSZWFkb25seTxOdW1iZXJBcnJheT4pIHtcbiAgICAgICAgdGhpcy5zZXRNb3JwaFRhcmdldFdlaWdodHMod2VpZ2h0cyk7XG4gICAgfVxuXG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldE1vcnBoVGFyZ2V0V2VpZ2h0cygpOiBGbG9hdDMyQXJyYXk7XG4gICAgLyoqXG4gICAgICogR2V0IG1vcnBoIHRhcmdldCB3ZWlnaHRzIGZvciB0aGlzIG1lc2ggY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBEZXN0aW5hdGlvbiBhcnJheSwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCBhcyBtYW55IGVsZW1lbnRzXG4gICAgICogICAgIGFzIHtAbGluayBNb3JwaFRhcmdldHMuY291bnR9LlxuICAgICAqIEByZXR1cm5zIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4yLjBcbiAgICAgKi9cbiAgICBnZXRNb3JwaFRhcmdldFdlaWdodHM8VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQpOiBUO1xuICAgIGdldE1vcnBoVGFyZ2V0V2VpZ2h0cyhvdXQ/OiBOdW1iZXJBcnJheSk6IE51bWJlckFycmF5IHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGNvdW50ID0gd2FzbS5fd2xfbWVzaF9jb21wb25lbnRfZ2V0X21vcnBoX3RhcmdldF93ZWlnaHRzKFxuICAgICAgICAgICAgdGhpcy5faWQsXG4gICAgICAgICAgICB3YXNtLl90ZW1wTWVtXG4gICAgICAgICk7XG4gICAgICAgIGlmICghb3V0KSB7XG4gICAgICAgICAgICBvdXQgPSBuZXcgRmxvYXQzMkFycmF5KGNvdW50KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyArK2kpIHtcbiAgICAgICAgICAgIG91dFtpXSA9IHdhc20uX3RlbXBNZW1GbG9hdFtpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgd2VpZ2h0IG9mIGEgc2luZ2xlIG1vcnBoIHRhcmdldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0YXJnZXQgSW5kZXggb2YgdGhlIG1vcnBoIHRhcmdldC5cbiAgICAgKiBAcmV0dXJucyBUaGUgd2VpZ2h0LlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMi4wXG4gICAgICovXG4gICAgZ2V0TW9ycGhUYXJnZXRXZWlnaHQodGFyZ2V0OiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgY291bnQgPSB0aGlzLm1vcnBoVGFyZ2V0cz8uY291bnQgPz8gMDtcbiAgICAgICAgaWYgKHRhcmdldCA+PSBjb3VudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbmRleCAke3RhcmdldH0gaXMgb3V0IG9mIGJvdW5kcyBmb3IgJHtjb3VudH0gdGFyZ2V0c2ApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9tZXNoX2NvbXBvbmVudF9nZXRfbW9ycGhfdGFyZ2V0X3dlaWdodChcbiAgICAgICAgICAgIHRoaXMuX2lkLFxuICAgICAgICAgICAgdGFyZ2V0XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IG1vcnBoIHRhcmdldCB3ZWlnaHRzIGZvciB0aGlzIG1lc2ggY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHdlaWdodHMgQXJyYXkgb2YgbmV3IHdlaWdodHMsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgYXMgbWFueVxuICAgICAqICAgICBlbGVtZW50cyBhcyB7QGxpbmsgTW9ycGhUYXJnZXRzLmNvdW50fS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjIuMFxuICAgICAqL1xuICAgIHNldE1vcnBoVGFyZ2V0V2VpZ2h0cyh3ZWlnaHRzOiBSZWFkb25seTxOdW1iZXJBcnJheT4pIHtcbiAgICAgICAgY29uc3QgY291bnQgPSB0aGlzLm1vcnBoVGFyZ2V0cz8uY291bnQgPz8gMDtcbiAgICAgICAgaWYgKHdlaWdodHMubGVuZ3RoICE9PSBjb3VudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCAke2NvdW50fSB3ZWlnaHRzIGJ1dCBnb3QgJHt3ZWlnaHRzLmxlbmd0aH1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0LnNldCh3ZWlnaHRzKTtcbiAgICAgICAgd2FzbS5fd2xfbWVzaF9jb21wb25lbnRfc2V0X21vcnBoX3RhcmdldF93ZWlnaHRzKFxuICAgICAgICAgICAgdGhpcy5faWQsXG4gICAgICAgICAgICB3YXNtLl90ZW1wTWVtLFxuICAgICAgICAgICAgd2VpZ2h0cy5sZW5ndGhcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHdlaWdodCBvZiBhIHNpbmdsZSBtb3JwaCB0YXJnZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGFyZ2V0IEluZGV4IG9mIHRoZSBtb3JwaCB0YXJnZXQuXG4gICAgICogQHBhcmFtIHdlaWdodCBUaGUgbmV3IHdlaWdodC5cbiAgICAgKlxuICAgICAqICMjIFVzYWdlXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IG1lc2ggPSBvYmplY3QuZ2V0Q29tcG9uZW50KCdtZXNoJyk7XG4gICAgICogY29uc3QgbW91dGhUYXJnZXQgPSBtZXNoLm1vcnBoVGFyZ2V0cy5nZXRUYXJnZXRJbmRleCgnbW91dGgnKTtcbiAgICAgKiBtZXNoLnNldE1vcnBoVGFyZ2V0V2VpZ2h0KG1vdXRoVGFyZ2V0LCAwLjUpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMi4wXG4gICAgICovXG4gICAgc2V0TW9ycGhUYXJnZXRXZWlnaHQodGFyZ2V0OiBudW1iZXIsIHdlaWdodDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IGNvdW50ID0gdGhpcy5tb3JwaFRhcmdldHM/LmNvdW50ID8/IDA7XG4gICAgICAgIGlmICh0YXJnZXQgPj0gY291bnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5kZXggJHt0YXJnZXR9IGlzIG91dCBvZiBib3VuZHMgZm9yICR7Y291bnR9IHRhcmdldHNgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9tZXNoX2NvbXBvbmVudF9zZXRfbW9ycGhfdGFyZ2V0X3dlaWdodChcbiAgICAgICAgICAgIHRoaXMuX2lkLFxuICAgICAgICAgICAgdGFyZ2V0LFxuICAgICAgICAgICAgd2VpZ2h0XG4gICAgICAgICk7XG4gICAgfVxufVxuXG4vKipcbiAqIEVudW0gZm9yIFBoeXNpY3MgYXhlcyBsb2NraW5nXG4gKlxuICogU2VlIHtAbGluayBQaHlzWENvbXBvbmVudC5hbmd1bGFyTG9ja0F4aXN9IGFuZCB7QGxpbmsgUGh5c1hDb21wb25lbnQubGluZWFyTG9ja0F4aXN9LlxuICovXG5leHBvcnQgZW51bSBMb2NrQXhpcyB7XG4gICAgLyoqXG4gICAgICogTm8gYXhpcyBzZWxlY3RlZC5cbiAgICAgKi9cbiAgICBOb25lID0gMCxcblxuICAgIC8qKlxuICAgICAqICoqWCBheGlzKio6XG4gICAgICovXG4gICAgWCA9IDEgPDwgMCxcblxuICAgIC8qKlxuICAgICAqICoqWSBheGlzKio6XG4gICAgICovXG4gICAgWSA9IDEgPDwgMSxcblxuICAgIC8qKlxuICAgICAqICoqWiBheGlzKio6XG4gICAgICovXG4gICAgWiA9IDEgPDwgMixcbn1cblxuLyoqXG4gKiBOYXRpdmUgcGh5c3ggcmlnaWQgYm9keSBjb21wb25lbnQuXG4gKlxuICogUHJvdmlkZXMgYWNjZXNzIHRvIGEgbmF0aXZlIG1lc2ggY29tcG9uZW50IGluc3RhbmNlLlxuICogT25seSBhdmFpbGFibGUgd2hlbiB1c2luZyBwaHlzeCBlbmFibGVkIHJ1bnRpbWUsIHNlZSBcIlByb2plY3QgU2V0dGluZ3MgPiBSdW50aW1lXCIuXG4gKi9cbmV4cG9ydCBjbGFzcyBQaHlzWENvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgLyoqIEBvdmVycmlkZSAqL1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdwaHlzeCc7XG5cbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0VHJhbnNsYXRpb25PZmZzZXQoKTogRmxvYXQzMkFycmF5O1xuICAgIC8qKlxuICAgICAqIExvY2FsIHRyYW5zbGF0aW9uIG9mZnNldC5cbiAgICAgKlxuICAgICAqIEFsbG93cyB0byBtb3ZlIGEgcGh5c3ggY29tcG9uZW50IHdpdGhvdXQgY3JlYXRpbmcgYSBuZXcgb2JqZWN0IGluIHRoZSBoaWVyYXJjaHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IERlc3RpbmF0aW9uIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCAzIGVsZW1lbnRzLlxuICAgICAqIEByZXR1cm5zIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4xLjFcbiAgICAgKi9cbiAgICBnZXRUcmFuc2xhdGlvbk9mZnNldDxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCk6IFQ7XG4gICAgZ2V0VHJhbnNsYXRpb25PZmZzZXQob3V0OiBOdW1iZXJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoMykpOiBOdW1iZXJBcnJheSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X29mZnNldFRyYW5zbGF0aW9uKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsyXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0Um90YXRpb25PZmZzZXQoKTogRmxvYXQzMkFycmF5O1xuICAgIC8qKlxuICAgICAqIExvY2FsIHJvdGF0aW9uIG9mZnNldCByZXByZXNlbnRlZCBhcyBhIHF1YXRlcm5pb24uXG4gICAgICpcbiAgICAgKiBBbGxvd3MgdG8gcm90YXRlIGEgcGh5c3ggY29tcG9uZW50IHdpdGhvdXQgY3JlYXRpbmcgYSBuZXcgb2JqZWN0IGluIHRoZSBoaWVyYXJjaHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IERlc3RpbmF0aW9uIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCA0IGVsZW1lbnRzLlxuICAgICAqIEByZXR1cm5zIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4xLjFcbiAgICAgKi9cbiAgICBnZXRSb3RhdGlvbk9mZnNldDxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCk6IFQ7XG4gICAgZ2V0Um90YXRpb25PZmZzZXQob3V0OiBOdW1iZXJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoNCkpOiBOdW1iZXJBcnJheSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBwdHIgPVxuICAgICAgICAgICAgd2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9vZmZzZXRUcmFuc2Zvcm0odGhpcy5faWQpID4+IDI7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICBvdXRbMF0gPSB3YXNtLkhFQVBGMzJbcHRyXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5IRUFQRjMyW3B0ciArIDFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMl07XG4gICAgICAgIG91dFszXSA9IHdhc20uSEVBUEYzMltwdHIgKyAzXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0RXh0ZW50cygpOiBGbG9hdDMyQXJyYXk7XG4gICAgLyoqXG4gICAgICogVGhlIHNoYXBlIGV4dGVudHMgZm9yIGNvbGxpc2lvbiBkZXRlY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IERlc3RpbmF0aW9uIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCAzIGVsZW1lbnRzLlxuICAgICAqIEByZXR1cm5zIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICovXG4gICAgZ2V0RXh0ZW50czxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCk6IFQ7XG4gICAgZ2V0RXh0ZW50cyhvdXQ6IE51bWJlckFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSgzKSk6IE51bWJlckFycmF5IHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfZXh0ZW50cyh0aGlzLl9pZCkgLyA0OyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgb3V0WzBdID0gd2FzbS5IRUFQRjMyW3B0cl07XG4gICAgICAgIG91dFsxXSA9IHdhc20uSEVBUEYzMltwdHIgKyAxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5IRUFQRjMyW3B0ciArIDJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRMaW5lYXJWZWxvY2l0eSgpOiBGbG9hdDMyQXJyYXk7XG4gICAgLyoqXG4gICAgICogTGluZWFyIHZlbG9jaXR5IG9yIGBbMCwgMCwgMF1gIGlmIHRoZSBjb21wb25lbnQgaXMgbm90IGFjdGl2ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgRGVzdGluYXRpb24gYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDMgZWxlbWVudHMuXG4gICAgICogQHJldHVybnMgVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBnZXRMaW5lYXJWZWxvY2l0eTxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCk6IFQ7XG4gICAgZ2V0TGluZWFyVmVsb2NpdHkob3V0OiBOdW1iZXJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoMykpOiBOdW1iZXJBcnJheSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCB0ZW1wTWVtRmxvYXQgPSB3YXNtLl90ZW1wTWVtRmxvYXQ7XG4gICAgICAgIHdhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfbGluZWFyVmVsb2NpdHkoXG4gICAgICAgICAgICB0aGlzLl9pZCxcbiAgICAgICAgICAgIHdhc20uX3RlbXBNZW1cbiAgICAgICAgKTsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIG91dFswXSA9IHRlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB0ZW1wTWVtRmxvYXRbMl07XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuXG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldEFuZ3VsYXJWZWxvY2l0eSgpOiBGbG9hdDMyQXJyYXk7XG4gICAgLyoqXG4gICAgICogQW5ndWxhciB2ZWxvY2l0eSBvciBgWzAsIDAsIDBdYCBpZiB0aGUgY29tcG9uZW50IGlzIG5vdCBhY3RpdmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IERlc3RpbmF0aW9uIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCAzIGVsZW1lbnRzLlxuICAgICAqIEByZXR1cm5zIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICovXG4gICAgZ2V0QW5ndWxhclZlbG9jaXR5PFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBUKTogVDtcbiAgICBnZXRBbmd1bGFyVmVsb2NpdHkob3V0OiBOdW1iZXJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoMykpOiBOdW1iZXJBcnJheSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCB0ZW1wTWVtRmxvYXQgPSB3YXNtLl90ZW1wTWVtRmxvYXQ7XG4gICAgICAgIHdhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfYW5ndWxhclZlbG9jaXR5KFxuICAgICAgICAgICAgdGhpcy5faWQsXG4gICAgICAgICAgICB3YXNtLl90ZW1wTWVtXG4gICAgICAgICk7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICBvdXRbMF0gPSB0ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHRlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gdGVtcE1lbUZsb2F0WzJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRoaXMgcmlnaWQgYm9keSBpcyBzdGF0aWMuXG4gICAgICpcbiAgICAgKiBTZXR0aW5nIHRoaXMgcHJvcGVydHkgb25seSB0YWtlcyBlZmZlY3Qgb25jZSB0aGUgY29tcG9uZW50XG4gICAgICogc3dpdGNoZXMgZnJvbSBpbmFjdGl2ZSB0byBhY3RpdmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYiBXaGV0aGVyIHRoZSByaWdpZCBib2R5IHNob3VsZCBiZSBzdGF0aWMuXG4gICAgICovXG4gICAgc2V0IHN0YXRpYyhiOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfc3RhdGljKHRoaXMuX2lkLCBiKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgcmlnaWQgYm9keSBpcyBzdGF0aWMuXG4gICAgICpcbiAgICAgKiBUaGlzIHByb3BlcnR5IHJldHVybnMgd2hldGhlciB0aGUgcmlnaWQgYm9keSBpcyAqZWZmZWN0aXZlbHkqXG4gICAgICogc3RhdGljLiBJZiBzdGF0aWMgcHJvcGVydHkgd2FzIHNldCB3aGlsZSB0aGUgcmlnaWQgYm9keSB3YXNcbiAgICAgKiBhY3RpdmUsIGl0IHdpbGwgbm90IHRha2UgZWZmZWN0IHVudGlsIHRoZSByaWdpZCBib2R5IGlzIHNldFxuICAgICAqIGluYWN0aXZlIGFuZCBhY3RpdmUgYWdhaW4uIFVudGlsIHRoZSBjb21wb25lbnQgaXMgc2V0IGluYWN0aXZlLFxuICAgICAqIHRoaXMgZ2V0dGVyIHdpbGwgcmV0dXJuIHdoZXRoZXIgdGhlIHJpZ2lkIGJvZHkgaXMgYWN0dWFsbHlcbiAgICAgKiBzdGF0aWMuXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgc3RhdGljKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISF0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X3N0YXRpYyh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byB7QGxpbmsgUGh5c1hDb21wb25lbnQuZ2V0VHJhbnNsYXRpb25PZmZzZXR9LlxuICAgICAqXG4gICAgICogR2l2ZXMgYSBxdWljayB2aWV3IG9mIHRoZSBvZmZzZXQgaW4gYSBkZWJ1Z2dlci5cbiAgICAgKlxuICAgICAqIEBub3RlIFByZWZlciB0byB1c2Uge0BsaW5rIFBoeXNYQ29tcG9uZW50LmdldFRyYW5zbGF0aW9uT2Zmc2V0fSBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4xLjFcbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCB0cmFuc2xhdGlvbk9mZnNldCgpOiBGbG9hdDMyQXJyYXkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRUcmFuc2xhdGlvbk9mZnNldCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgb2Zmc2V0IHRyYW5zbGF0aW9uLlxuICAgICAqXG4gICAgICogVGhlIGFycmF5IG11c3QgYmUgYSB2ZWN0b3Igb2YgYXQgbGVhc3QgKiozKiogZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGUgY29tcG9uZW50IG11c3QgYmUgcmUtYWN0aXZhdGVkIHRvIGFwcGx5IHRoZSBjaGFuZ2UuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4xLjFcbiAgICAgKi9cbiAgICBzZXQgdHJhbnNsYXRpb25PZmZzZXQob2Zmc2V0OiBBcnJheUxpa2U8bnVtYmVyPikge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9vZmZzZXRUcmFuc2xhdGlvbihcbiAgICAgICAgICAgIHRoaXMuX2lkLFxuICAgICAgICAgICAgb2Zmc2V0WzBdLFxuICAgICAgICAgICAgb2Zmc2V0WzFdLFxuICAgICAgICAgICAgb2Zmc2V0WzJdXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byB7QGxpbmsgUGh5c1hDb21wb25lbnQuZ2V0Um90YXRpb25PZmZzZXR9LlxuICAgICAqXG4gICAgICogR2l2ZXMgYSBxdWljayB2aWV3IG9mIHRoZSBvZmZzZXQgaW4gYSBkZWJ1Z2dlci5cbiAgICAgKlxuICAgICAqIEBub3RlIFByZWZlciB0byB1c2Uge0BsaW5rIFBoeXNYQ29tcG9uZW50LmdldFJvdGF0aW9uT2Zmc2V0fSBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4xLjFcbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCByb3RhdGlvbk9mZnNldCgpOiBGbG9hdDMyQXJyYXkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRSb3RhdGlvbk9mZnNldCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgb2Zmc2V0IHJvdGF0aW9uLlxuICAgICAqXG4gICAgICogVGhlIGFycmF5IG11c3QgYmUgYSBxdWF0ZXJuaW9uIG9mIGF0IGxlYXN0ICoqNCoqIGVsZW1lbnRzLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhlIGNvbXBvbmVudCBtdXN0IGJlIHJlLWFjdGl2YXRlZCB0byBhcHBseSB0aGUgY2hhbmdlLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMS4xXG4gICAgICovXG4gICAgc2V0IHJvdGF0aW9uT2Zmc2V0KG9mZnNldDogQXJyYXlMaWtlPG51bWJlcj4pIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfb2Zmc2V0Um90YXRpb24oXG4gICAgICAgICAgICB0aGlzLl9pZCxcbiAgICAgICAgICAgIG9mZnNldFswXSxcbiAgICAgICAgICAgIG9mZnNldFsxXSxcbiAgICAgICAgICAgIG9mZnNldFsyXSxcbiAgICAgICAgICAgIG9mZnNldFszXVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRoaXMgcmlnaWQgYm9keSBpcyBraW5lbWF0aWMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYiBXaGV0aGVyIHRoZSByaWdpZCBib2R5IHNob3VsZCBiZSBraW5lbWF0aWMuXG4gICAgICovXG4gICAgc2V0IGtpbmVtYXRpYyhiOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfa2luZW1hdGljKHRoaXMuX2lkLCBiKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgcmlnaWQgYm9keSBpcyBraW5lbWF0aWMuXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQga2luZW1hdGljKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISF0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2tpbmVtYXRpYyh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHdoZXRoZXIgdGhpcyByaWdpZCBib2R5J3MgZ3Jhdml0eSBpcyBlbmFibGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGIgV2hldGhlciB0aGUgcmlnaWQgYm9keSdzIGdyYXZpdHkgc2hvdWxkIGJlIGVuYWJsZWQuXG4gICAgICovXG4gICAgc2V0IGdyYXZpdHkoYjogYm9vbGVhbikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X2dyYXZpdHkodGhpcy5faWQsIGIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhpcyByaWdpZCBib2R5J3MgZ3Jhdml0eSBmbGFnIGlzIGVuYWJsZWQuXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgZ3Jhdml0eSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9ncmF2aXR5KHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgd2hldGhlciB0aGlzIHJpZ2lkIGJvZHkncyBzaW11bGF0ZSBmbGFnIGlzIGVuYWJsZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYiBXaGV0aGVyIHRoZSByaWdpZCBib2R5J3Mgc2ltdWxhdGUgZmxhZyBzaG91bGQgYmUgZW5hYmxlZC5cbiAgICAgKi9cbiAgICBzZXQgc2ltdWxhdGUoYjogYm9vbGVhbikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X3NpbXVsYXRlKHRoaXMuX2lkLCBiKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgcmlnaWQgYm9keSdzIHNpbXVsYXRlIGZsYWcgaXMgZW5hYmxlZC5cbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBzaW11bGF0ZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9zaW11bGF0ZSh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHdoZXRoZXIgdG8gYWxsb3cgc2ltdWxhdGlvbiBvZiB0aGlzIHJpZ2lkIGJvZHkuXG4gICAgICpcbiAgICAgKiB7QGxpbmsgYWxsb3dTaW11bGF0aW9ufSBhbmQge0BsaW5rIHRyaWdnZXJ9IGNhbiBub3QgYmUgZW5hYmxlZCBhdCB0aGVcbiAgICAgKiBzYW1lIHRpbWUuIEVuYWJsaW5nIHtAbGluayBhbGxvd1NpbXVsYXRpb259IHdoaWxlIHtAbGluayB0cmlnZ2VyfSBpcyBlbmFibGVkXG4gICAgICogd2lsbCBkaXNhYmxlIHtAbGluayB0cmlnZ2VyfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiIFdoZXRoZXIgdG8gYWxsb3cgc2ltdWxhdGlvbiBvZiB0aGlzIHJpZ2lkIGJvZHkuXG4gICAgICovXG4gICAgc2V0IGFsbG93U2ltdWxhdGlvbihiOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfYWxsb3dTaW11bGF0aW9uKHRoaXMuX2lkLCBiKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRvIGFsbG93IHNpbXVsYXRpb24gb2YgdGhpcyByaWdpZCBib2R5LlxuICAgICAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IGFsbG93U2ltdWxhdGlvbigpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9hbGxvd1NpbXVsYXRpb24odGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRoaXMgcmlnaWQgYm9keSBtYXkgYmUgcXVlcmllZCBpbiByYXkgY2FzdHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYiBXaGV0aGVyIHRoaXMgcmlnaWQgYm9keSBtYXkgYmUgcXVlcmllZCBpbiByYXkgY2FzdHMuXG4gICAgICovXG4gICAgc2V0IGFsbG93UXVlcnkoYjogYm9vbGVhbikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X2FsbG93UXVlcnkodGhpcy5faWQsIGIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhpcyByaWdpZCBib2R5IG1heSBiZSBxdWVyaWVkIGluIHJheSBjYXN0cy5cbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBhbGxvd1F1ZXJ5KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISF0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2FsbG93UXVlcnkodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRoaXMgcGh5c2ljcyBib2R5IGlzIGEgdHJpZ2dlci5cbiAgICAgKlxuICAgICAqIHtAbGluayBhbGxvd1NpbXVsYXRpb259IGFuZCB7QGxpbmsgdHJpZ2dlcn0gY2FuIG5vdCBiZSBlbmFibGVkIGF0IHRoZVxuICAgICAqIHNhbWUgdGltZS4gRW5hYmxpbmcgdHJpZ2dlciB3aGlsZSB7QGxpbmsgYWxsb3dTaW11bGF0aW9ufSBpcyBlbmFibGVkLFxuICAgICAqIHdpbGwgZGlzYWJsZSB7QGxpbmsgYWxsb3dTaW11bGF0aW9ufS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiIFdoZXRoZXIgdGhpcyBwaHlzaWNzIGJvZHkgaXMgYSB0cmlnZ2VyLlxuICAgICAqL1xuICAgIHNldCB0cmlnZ2VyKGI6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF90cmlnZ2VyKHRoaXMuX2lkLCBiKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgcGh5c2ljcyBib2R5IGlzIGEgdHJpZ2dlci5cbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCB0cmlnZ2VyKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISF0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X3RyaWdnZXIodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgc2hhcGUgZm9yIGNvbGxpc2lvbiBkZXRlY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcyBOZXcgc2hhcGUuXG4gICAgICogQHNpbmNlIDAuOC41XG4gICAgICovXG4gICAgc2V0IHNoYXBlKHM6IFNoYXBlKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfc2hhcGUodGhpcy5faWQsIHMpO1xuICAgIH1cblxuICAgIC8qKiBUaGUgc2hhcGUgZm9yIGNvbGxpc2lvbiBkZXRlY3Rpb24uICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgc2hhcGUoKTogU2hhcGUge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9zaGFwZSh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGFkZGl0aW9uYWwgZGF0YSBmb3IgdGhlIHNoYXBlLlxuICAgICAqXG4gICAgICogUmV0cmlldmVkIG9ubHkgZnJvbSB7QGxpbmsgUGh5c1hDb21wb25lbnQjc2hhcGVEYXRhfS5cbiAgICAgKiBAc2luY2UgMC44LjEwXG4gICAgICovXG4gICAgc2V0IHNoYXBlRGF0YShkKSB7XG4gICAgICAgIGlmIChkID09IG51bGwgfHwgIWlzTWVzaFNoYXBlKHRoaXMuc2hhcGUpKSByZXR1cm47XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfc2hhcGVfZGF0YSh0aGlzLl9pZCwgZC5pbmRleCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkaXRpb25hbCBkYXRhIGZvciB0aGUgc2hhcGUuXG4gICAgICpcbiAgICAgKiBgbnVsbGAgZm9yIHtAbGluayBTaGFwZX0gdmFsdWVzOiBgTm9uZWAsIGBTcGhlcmVgLCBgQ2Fwc3VsZWAsIGBCb3hgLCBgUGxhbmVgLlxuICAgICAqIGB7aW5kZXg6IG59YCBmb3IgYFRyaWFuZ2xlTWVzaGAgYW5kIGBDb252ZXhIdWxsYC5cbiAgICAgKlxuICAgICAqIFRoaXMgZGF0YSBpcyBjdXJyZW50bHkgb25seSBmb3IgcGFzc2luZyBvbnRvIG9yIGNyZWF0aW5nIG90aGVyIHtAbGluayBQaHlzWENvbXBvbmVudH0uXG4gICAgICogQHNpbmNlIDAuOC4xMFxuICAgICAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IHNoYXBlRGF0YSgpOiB7XG4gICAgICAgIGluZGV4OiBudW1iZXI7XG4gICAgfSB8IG51bGwge1xuICAgICAgICBpZiAoIWlzTWVzaFNoYXBlKHRoaXMuc2hhcGUpKSByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGluZGV4OiB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X3NoYXBlX2RhdGEodGhpcy5faWQpLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgc2hhcGUgZXh0ZW50cyBmb3IgY29sbGlzaW9uIGRldGVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlIE5ldyBleHRlbnRzIGZvciB0aGUgc2hhcGUuXG4gICAgICogQHNpbmNlIDAuOC41XG4gICAgICovXG4gICAgc2V0IGV4dGVudHMoZTogUmVhZG9ubHk8TnVtYmVyQXJyYXk+KSB7XG4gICAgICAgIHRoaXMuZXh0ZW50cy5zZXQoZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byB7QGxpbmsgUGh5c1hDb21wb25lbnQuZ2V0RXh0ZW50c30uXG4gICAgICpcbiAgICAgKiBAbm90ZSBQcmVmZXIgdG8gdXNlIHtAbGluayBQaHlzWENvbXBvbmVudC5nZXRFeHRlbnRzfSBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgZXh0ZW50cygpOiBGbG9hdDMyQXJyYXkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgLyoqIEB0b2RvOiBCcmVhayBhdCAyLjAuMC4gRG8gbm90IGFsbG93IG1vZGlmeWluZyBtZW1vcnkgaW4tcGxhY2UuICovXG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfZXh0ZW50cyh0aGlzLl9pZCk7XG4gICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KHdhc20uSEVBUEYzMi5idWZmZXIsIHB0ciwgMyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHN0YXRpY0ZyaWN0aW9uLlxuICAgICAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IHN0YXRpY0ZyaWN0aW9uKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X3N0YXRpY0ZyaWN0aW9uKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgc3RhdGljRnJpY3Rpb24uXG4gICAgICogQHBhcmFtIHYgTmV3IHN0YXRpY0ZyaWN0aW9uLlxuICAgICAqL1xuICAgIHNldCBzdGF0aWNGcmljdGlvbih2OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9zdGF0aWNGcmljdGlvbih0aGlzLl9pZCwgdik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGR5bmFtaWNGcmljdGlvbi5cbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBkeW5hbWljRnJpY3Rpb24oKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfZHluYW1pY0ZyaWN0aW9uKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgZHluYW1pY0ZyaWN0aW9uXG4gICAgICogQHBhcmFtIHYgTmV3IGR5bmFtaWNEYW1waW5nLlxuICAgICAqL1xuICAgIHNldCBkeW5hbWljRnJpY3Rpb24odjogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfZHluYW1pY0ZyaWN0aW9uKHRoaXMuX2lkLCB2KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYm91bmNpbmVzcy5cbiAgICAgKiBAc2luY2UgMC45LjBcbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBib3VuY2luZXNzKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2JvdW5jaW5lc3ModGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBib3VuY2luZXNzLlxuICAgICAqIEBwYXJhbSB2IE5ldyBib3VuY2luZXNzLlxuICAgICAqIEBzaW5jZSAwLjkuMFxuICAgICAqL1xuICAgIHNldCBib3VuY2luZXNzKHY6IG51bWJlcikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X2JvdW5jaW5lc3ModGhpcy5faWQsIHYpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBsaW5lYXJEYW1waW5nL1xuICAgICAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IGxpbmVhckRhbXBpbmcoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfbGluZWFyRGFtcGluZyh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGxpbmVhckRhbXBpbmcuXG4gICAgICogQHBhcmFtIHYgTmV3IGxpbmVhckRhbXBpbmcuXG4gICAgICovXG4gICAgc2V0IGxpbmVhckRhbXBpbmcodjogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfbGluZWFyRGFtcGluZyh0aGlzLl9pZCwgdik7XG4gICAgfVxuXG4gICAgLyoqIEdldCBhbmd1bGFyRGFtcGluZy4gKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBhbmd1bGFyRGFtcGluZygpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9hbmd1bGFyRGFtcGluZyh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGFuZ3VsYXJEYW1waW5nLlxuICAgICAqIEBwYXJhbSB2IE5ldyBhbmd1bGFyRGFtcGluZy5cbiAgICAgKi9cbiAgICBzZXQgYW5ndWxhckRhbXBpbmcodjogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfYW5ndWxhckRhbXBpbmcodGhpcy5faWQsIHYpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBsaW5lYXIgdmVsb2NpdHkuXG4gICAgICpcbiAgICAgKiBbUGh5c1ggTWFudWFsIC0gXCJWZWxvY2l0eVwiXShodHRwczovL2dhbWV3b3Jrc2RvY3MubnZpZGlhLmNvbS9QaHlzWC80LjEvZG9jdW1lbnRhdGlvbi9waHlzeGd1aWRlL01hbnVhbC9SaWdpZEJvZHlEeW5hbWljcy5odG1sI3ZlbG9jaXR5KVxuICAgICAqXG4gICAgICogSGFzIG5vIGVmZmVjdCwgaWYgdGhlIGNvbXBvbmVudCBpcyBub3QgYWN0aXZlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHYgTmV3IGxpbmVhciB2ZWxvY2l0eS5cbiAgICAgKi9cbiAgICBzZXQgbGluZWFyVmVsb2NpdHkodjogUmVhZG9ubHk8TnVtYmVyQXJyYXk+KSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfbGluZWFyVmVsb2NpdHkodGhpcy5faWQsIHZbMF0sIHZbMV0sIHZbMl0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8ge0BsaW5rIFBoeXNYQ29tcG9uZW50LmdldExpbmVhclZlbG9jaXR5fS5cbiAgICAgKlxuICAgICAqIEBub3RlIFByZWZlciB0byB1c2Uge0BsaW5rIFBoeXNYQ29tcG9uZW50LmdldExpbmVhclZlbG9jaXR5fSBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgbGluZWFyVmVsb2NpdHkoKTogRmxvYXQzMkFycmF5IHtcbiAgICAgICAgLyoqIEB0b2RvOiBCcmVhayBhdCAyLjAuMC4gRG8gbm90IGFsbG93IG1vZGlmeWluZyBtZW1vcnkgaW4tcGxhY2UuICovXG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2xpbmVhclZlbG9jaXR5KHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkod2FzbS5IRUFQRjMyLmJ1ZmZlciwgd2FzbS5fdGVtcE1lbSwgMyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGFuZ3VsYXIgdmVsb2NpdHlcbiAgICAgKlxuICAgICAqIFtQaHlzWCBNYW51YWwgLSBcIlZlbG9jaXR5XCJdKGh0dHBzOi8vZ2FtZXdvcmtzZG9jcy5udmlkaWEuY29tL1BoeXNYLzQuMS9kb2N1bWVudGF0aW9uL3BoeXN4Z3VpZGUvTWFudWFsL1JpZ2lkQm9keUR5bmFtaWNzLmh0bWwjdmVsb2NpdHkpXG4gICAgICpcbiAgICAgKiBIYXMgbm8gZWZmZWN0LCBpZiB0aGUgY29tcG9uZW50IGlzIG5vdCBhY3RpdmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBOZXcgYW5ndWxhciB2ZWxvY2l0eVxuICAgICAqL1xuICAgIHNldCBhbmd1bGFyVmVsb2NpdHkodjogUmVhZG9ubHk8TnVtYmVyQXJyYXk+KSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfYW5ndWxhclZlbG9jaXR5KFxuICAgICAgICAgICAgdGhpcy5faWQsXG4gICAgICAgICAgICB2WzBdLFxuICAgICAgICAgICAgdlsxXSxcbiAgICAgICAgICAgIHZbMl1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBQaHlzWENvbXBvbmVudC5nZXRBbmd1bGFyVmVsb2NpdHl9LlxuICAgICAqXG4gICAgICogQG5vdGUgUHJlZmVyIHRvIHVzZSB7QGxpbmsgUGh5c1hDb21wb25lbnQuZ2V0QW5ndWxhclZlbG9jaXR5fSBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgYW5ndWxhclZlbG9jaXR5KCk6IEZsb2F0MzJBcnJheSB7XG4gICAgICAgIC8qKiBAdG9kbzogQnJlYWsgYXQgMi4wLjAuIERvIG5vdCBhbGxvdyBtb2RpZnlpbmcgbWVtb3J5IGluLXBsYWNlLiAqL1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9hbmd1bGFyVmVsb2NpdHkodGhpcy5faWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSh3YXNtLkhFQVBGMzIuYnVmZmVyLCB3YXNtLl90ZW1wTWVtLCAzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGNvbXBvbmVudHMgZ3JvdXBzIG1hc2suXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmxhZ3MgTmV3IGZsYWdzIHRoYXQgbmVlZCB0byBiZSBzZXQuXG4gICAgICovXG4gICAgc2V0IGdyb3Vwc01hc2soZmxhZ3M6IG51bWJlcikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X2dyb3Vwc01hc2sodGhpcy5faWQsIGZsYWdzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGNvbXBvbmVudHMgZ3JvdXBzIG1hc2sgZmxhZ3MuXG4gICAgICpcbiAgICAgKiBFYWNoIGJpdCByZXByZXNlbnRzIG1lbWJlcnNoaXAgdG8gZ3JvdXAsIHNlZSBleGFtcGxlLlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAvLyBBc3NpZ24gYyB0byBncm91cCAyXG4gICAgICogYy5ncm91cHNNYXNrID0gKDEgPDwgMik7XG4gICAgICpcbiAgICAgKiAvLyBBc3NpZ24gYyB0byBncm91cCAwXG4gICAgICogYy5ncm91cHNNYXNrICA9ICgxIDw8IDApO1xuICAgICAqXG4gICAgICogLy8gQXNzaWduIGMgdG8gZ3JvdXAgMCBhbmQgMlxuICAgICAqIGMuZ3JvdXBzTWFzayA9ICgxIDw8IDApIHwgKDEgPDwgMik7XG4gICAgICpcbiAgICAgKiAoYy5ncm91cHNNYXNrICYgKDEgPDwgMikpICE9IDA7IC8vIHRydWVcbiAgICAgKiAoYy5ncm91cHNNYXNrICYgKDEgPDwgNykpICE9IDA7IC8vIGZhbHNlXG4gICAgICogYGBgXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgZ3JvdXBzTWFzaygpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9ncm91cHNNYXNrKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGNvbXBvbmVudHMgYmxvY2tzIG1hc2suXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmxhZ3MgTmV3IGZsYWdzIHRoYXQgbmVlZCB0byBiZSBzZXQuXG4gICAgICovXG4gICAgc2V0IGJsb2Nrc01hc2soZmxhZ3M6IG51bWJlcikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X2Jsb2Nrc01hc2sodGhpcy5faWQsIGZsYWdzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGNvbXBvbmVudHMgYmxvY2tzIG1hc2sgZmxhZ3MuXG4gICAgICpcbiAgICAgKiBFYWNoIGJpdCByZXByZXNlbnRzIG1lbWJlcnNoaXAgdG8gdGhlIGJsb2NrLCBzZWUgZXhhbXBsZS5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogLy8gQmxvY2sgb3ZlcmxhcCB3aXRoIGFueSBvYmplY3RzIGluIGdyb3VwIDJcbiAgICAgKiBjLmJsb2Nrc01hc2sgPSAoMSA8PCAyKTtcbiAgICAgKlxuICAgICAqIC8vIEJsb2NrIG92ZXJsYXAgd2l0aCBhbnkgb2JqZWN0cyBpbiBncm91cCAwXG4gICAgICogYy5ibG9ja3NNYXNrICA9ICgxIDw8IDApXG4gICAgICpcbiAgICAgKiAvLyBCbG9jayBvdmVybGFwIHdpdGggYW55IG9iamVjdHMgaW4gZ3JvdXAgMCBhbmQgMlxuICAgICAqIGMuYmxvY2tzTWFzayA9ICgxIDw8IDApIHwgKDEgPDwgMik7XG4gICAgICpcbiAgICAgKiAoYy5ibG9ja3NNYXNrICYgKDEgPDwgMikpICE9IDA7IC8vIHRydWVcbiAgICAgKiAoYy5ibG9ja3NNYXNrICYgKDEgPDwgNykpICE9IDA7IC8vIGZhbHNlXG4gICAgICogYGBgXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgYmxvY2tzTWFzaygpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9ibG9ja3NNYXNrKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgYXhlcyB0byBsb2NrIGZvciBsaW5lYXIgdmVsb2NpdHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbG9jayBUaGUgQXhpcyB0aGF0IG5lZWRzIHRvIGJlIHNldC5cbiAgICAgKlxuICAgICAqIENvbWJpbmUgZmxhZ3Mgd2l0aCBCaXR3aXNlIE9SOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBib2R5LmxpbmVhckxvY2tBeGlzID0gTG9ja0F4aXMuWCB8IExvY2tBeGlzLlk7IC8vIHggYW5kIHkgc2V0XG4gICAgICogYm9keS5saW5lYXJMb2NrQXhpcyA9IExvY2tBeGlzLlg7IC8vIHkgdW5zZXRcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgaGFzIG5vIGVmZmVjdCBpZiB0aGUgY29tcG9uZW50IGlzIHN0YXRpYy5cbiAgICAgKi9cbiAgICBzZXQgbGluZWFyTG9ja0F4aXMobG9jazogTG9ja0F4aXMpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9saW5lYXJMb2NrQXhpcyh0aGlzLl9pZCwgbG9jayk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsaW5lYXIgbG9jayBheGVzIGZsYWdzLlxuICAgICAqXG4gICAgICogVG8gZ2V0IHRoZSBzdGF0ZSBvZiBhIHNwZWNpZmljIGZsYWcsIEJpdHdpc2UgQU5EIHdpdGggdGhlIExvY2tBeGlzIG5lZWRlZC5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogaWYoYm9keS5saW5lYXJMb2NrQXhpcyAmIExvY2tBeGlzLlkpIHtcbiAgICAgKiAgICAgY29uc29sZS5sb2coXCJUaGUgWSBmbGFnIHdhcyBzZXQhXCIpO1xuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEByZXR1cm4gYXhlcyB0aGF0IGFyZSBjdXJyZW50bHkgbG9ja2VkIGZvciBsaW5lYXIgbW92ZW1lbnQuXG4gICAgICovXG4gICAgQG5hdGl2ZVByb3BlcnR5KClcbiAgICBnZXQgbGluZWFyTG9ja0F4aXMoKTogTG9ja0F4aXMge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2dldF9saW5lYXJMb2NrQXhpcyh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGF4ZXMgdG8gbG9jayBmb3IgYW5ndWxhciB2ZWxvY2l0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBsb2NrIFRoZSBBeGlzIHRoYXQgbmVlZHMgdG8gYmUgc2V0LlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBib2R5LmFuZ3VsYXJMb2NrQXhpcyA9IExvY2tBeGlzLlggfCBMb2NrQXhpcy5ZOyAvLyB4IGFuZCB5IHNldFxuICAgICAqIGJvZHkuYW5ndWxhckxvY2tBeGlzID0gTG9ja0F4aXMuWDsgLy8geSB1bnNldFxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBoYXMgbm8gZWZmZWN0IGlmIHRoZSBjb21wb25lbnQgaXMgc3RhdGljLlxuICAgICAqL1xuICAgIHNldCBhbmd1bGFyTG9ja0F4aXMobG9jazogTG9ja0F4aXMpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9hbmd1bGFyTG9ja0F4aXModGhpcy5faWQsIGxvY2spO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYW5ndWxhciBsb2NrIGF4ZXMgZmxhZ3MuXG4gICAgICpcbiAgICAgKiBUbyBnZXQgdGhlIHN0YXRlIG9mIGEgc3BlY2lmaWMgZmxhZywgQml0d2lzZSBBTkQgd2l0aCB0aGUgTG9ja0F4aXMgbmVlZGVkOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBpZihib2R5LmFuZ3VsYXJMb2NrQXhpcyAmIExvY2tBeGlzLlkpIHtcbiAgICAgKiAgICAgY29uc29sZS5sb2coXCJUaGUgWSBmbGFnIHdhcyBzZXQhXCIpO1xuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEByZXR1cm4gYXhlcyB0aGF0IGFyZSBjdXJyZW50bHkgbG9ja2VkIGZvciBhbmd1bGFyIG1vdmVtZW50LlxuICAgICAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IGFuZ3VsYXJMb2NrQXhpcygpOiBMb2NrQXhpcyB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfZ2V0X2FuZ3VsYXJMb2NrQXhpcyh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IG1hc3MuXG4gICAgICpcbiAgICAgKiBbUGh5c1ggTWFudWFsIC0gXCJNYXNzIFByb3BlcnRpZXNcIl0oaHR0cHM6Ly9nYW1ld29ya3Nkb2NzLm52aWRpYS5jb20vUGh5c1gvNC4xL2RvY3VtZW50YXRpb24vcGh5c3hndWlkZS9NYW51YWwvUmlnaWRCb2R5RHluYW1pY3MuaHRtbCNtYXNzLXByb3BlcnRpZXMpXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbSBOZXcgbWFzcy5cbiAgICAgKi9cbiAgICBzZXQgbWFzcyhtOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3NldF9tYXNzKHRoaXMuX2lkLCBtKTtcbiAgICB9XG5cbiAgICAvKiogTWFzcyAqL1xuICAgIEBuYXRpdmVQcm9wZXJ0eSgpXG4gICAgZ2V0IG1hc3MoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfbWFzcyh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IG1hc3Mgc3BhY2UgaW50ZXJpYSB0ZW5zb3IuXG4gICAgICpcbiAgICAgKiBbUGh5c1ggTWFudWFsIC0gXCJNYXNzIFByb3BlcnRpZXNcIl0oaHR0cHM6Ly9nYW1ld29ya3Nkb2NzLm52aWRpYS5jb20vUGh5c1gvNC4xL2RvY3VtZW50YXRpb24vcGh5c3hndWlkZS9NYW51YWwvUmlnaWRCb2R5RHluYW1pY3MuaHRtbCNtYXNzLXByb3BlcnRpZXMpXG4gICAgICpcbiAgICAgKiBIYXMgbm8gZWZmZWN0LCBpZiB0aGUgY29tcG9uZW50IGlzIG5vdCBhY3RpdmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBOZXcgbWFzcyBzcGFjZSBpbnRlcmF0aWEgdGVuc29yLlxuICAgICAqL1xuICAgIHNldCBtYXNzU3BhY2VJbnRlcmlhVGVuc29yKHY6IFJlYWRvbmx5PE51bWJlckFycmF5Pikge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9waHlzeF9jb21wb25lbnRfc2V0X21hc3NTcGFjZUluZXJ0aWFUZW5zb3IoXG4gICAgICAgICAgICB0aGlzLl9pZCxcbiAgICAgICAgICAgIHZbMF0sXG4gICAgICAgICAgICB2WzFdLFxuICAgICAgICAgICAgdlsyXVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcmlnaWQgYm9keSB0byBzbGVlcCB1cG9uIGFjdGl2YXRpb24uXG4gICAgICpcbiAgICAgKiBXaGVuIGFzbGVlcCwgdGhlIHJpZ2lkIGJvZHkgd2lsbCBub3QgYmUgc2ltdWxhdGVkIHVudGlsIHRoZSBuZXh0IGNvbnRhY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmxhZyBgdHJ1ZWAgdG8gc2xlZXAgdXBvbiBhY3RpdmF0aW9uLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMS41XG4gICAgICovXG4gICAgc2V0IHNsZWVwT25BY3RpdmF0ZShmbGFnOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfc2xlZXBPbkFjdGl2YXRlKHRoaXMuX2lkLCBmbGFnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBgdHJ1ZWAgaWYgdGhlIHJpZ2lkIGJvZHkgaXMgc2V0IHRvIHNsZWVwIHVwb24gYWN0aXZhdGlvbiwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4xLjVcbiAgICAgKi9cbiAgICBAbmF0aXZlUHJvcGVydHkoKVxuICAgIGdldCBzbGVlcE9uQWN0aXZhdGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfc2xlZXBPbkFjdGl2YXRlKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBcHBseSBhIGZvcmNlLlxuICAgICAqXG4gICAgICogW1BoeXNYIE1hbnVhbCAtIFwiQXBwbHlpbmcgRm9yY2VzIGFuZCBUb3JxdWVzXCJdKGh0dHBzOi8vZ2FtZXdvcmtzZG9jcy5udmlkaWEuY29tL1BoeXNYLzQuMS9kb2N1bWVudGF0aW9uL3BoeXN4Z3VpZGUvTWFudWFsL1JpZ2lkQm9keUR5bmFtaWNzLmh0bWwjYXBwbHlpbmctZm9yY2VzLWFuZC10b3JxdWVzKVxuICAgICAqXG4gICAgICogSGFzIG5vIGVmZmVjdCwgaWYgdGhlIGNvbXBvbmVudCBpcyBub3QgYWN0aXZlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGYgRm9yY2UgdmVjdG9yLlxuICAgICAqIEBwYXJhbSBtIEZvcmNlIG1vZGUsIHNlZSB7QGxpbmsgRm9yY2VNb2RlfSwgZGVmYXVsdCBgRm9yY2VgLlxuICAgICAqIEBwYXJhbSBsb2NhbEZvcmNlIFdoZXRoZXIgdGhlIGZvcmNlIHZlY3RvciBpcyBpbiBsb2NhbCBzcGFjZSwgZGVmYXVsdCBgZmFsc2VgLlxuICAgICAqIEBwYXJhbSBwIFBvc2l0aW9uIHRvIGFwcGx5IGZvcmNlIGF0LCBkZWZhdWx0IGlzIGNlbnRlciBvZiBtYXNzLlxuICAgICAqIEBwYXJhbSBsb2NhbCBXaGV0aGVyIHBvc2l0aW9uIGlzIGluIGxvY2FsIHNwYWNlLCBkZWZhdWx0IGBmYWxzZWAuXG4gICAgICovXG4gICAgYWRkRm9yY2UoXG4gICAgICAgIGY6IFJlYWRvbmx5PE51bWJlckFycmF5PixcbiAgICAgICAgbTogRm9yY2VNb2RlID0gRm9yY2VNb2RlLkZvcmNlLFxuICAgICAgICBsb2NhbEZvcmNlOiBib29sZWFuID0gZmFsc2UsXG4gICAgICAgIHA/OiBSZWFkb25seTxOdW1iZXJBcnJheT4sXG4gICAgICAgIGxvY2FsOiBib29sZWFuID0gZmFsc2VcbiAgICApIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGlmICghcCkge1xuICAgICAgICAgICAgd2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2FkZEZvcmNlKHRoaXMuX2lkLCBmWzBdLCBmWzFdLCBmWzJdLCBtLCBsb2NhbEZvcmNlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB3YXNtLl93bF9waHlzeF9jb21wb25lbnRfYWRkRm9yY2VBdChcbiAgICAgICAgICAgIHRoaXMuX2lkLFxuICAgICAgICAgICAgZlswXSxcbiAgICAgICAgICAgIGZbMV0sXG4gICAgICAgICAgICBmWzJdLFxuICAgICAgICAgICAgbSxcbiAgICAgICAgICAgIGxvY2FsRm9yY2UsXG4gICAgICAgICAgICBwWzBdLFxuICAgICAgICAgICAgcFsxXSxcbiAgICAgICAgICAgIHBbMl0sXG4gICAgICAgICAgICBsb2NhbFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFwcGx5IHRvcnF1ZS5cbiAgICAgKlxuICAgICAqIFtQaHlzWCBNYW51YWwgLSBcIkFwcGx5aW5nIEZvcmNlcyBhbmQgVG9ycXVlc1wiXShodHRwczovL2dhbWV3b3Jrc2RvY3MubnZpZGlhLmNvbS9QaHlzWC80LjEvZG9jdW1lbnRhdGlvbi9waHlzeGd1aWRlL01hbnVhbC9SaWdpZEJvZHlEeW5hbWljcy5odG1sI2FwcGx5aW5nLWZvcmNlcy1hbmQtdG9ycXVlcylcbiAgICAgKlxuICAgICAqIEhhcyBubyBlZmZlY3QsIGlmIHRoZSBjb21wb25lbnQgaXMgbm90IGFjdGl2ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmIEZvcmNlIHZlY3Rvci5cbiAgICAgKiBAcGFyYW0gbSBGb3JjZSBtb2RlLCBzZWUge0BsaW5rIEZvcmNlTW9kZX0sIGRlZmF1bHQgYEZvcmNlYC5cbiAgICAgKi9cbiAgICBhZGRUb3JxdWUoZjogUmVhZG9ubHk8TnVtYmVyQXJyYXk+LCBtOiBGb3JjZU1vZGUgPSBGb3JjZU1vZGUuRm9yY2UpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X2FkZFRvcnF1ZSh0aGlzLl9pZCwgZlswXSwgZlsxXSwgZlsyXSwgbSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIG9uIGNvbGxpc2lvbiBjYWxsYmFjay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjYWxsYmFjayBGdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhpcyByaWdpZCBib2R5ICh1biljb2xsaWRlcyB3aXRoIGFueSBvdGhlci5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogIGxldCByaWdpZEJvZHkgPSB0aGlzLm9iamVjdC5nZXRDb21wb25lbnQoJ3BoeXN4Jyk7XG4gICAgICogIHJpZ2lkQm9keS5vbkNvbGxpc2lvbihmdW5jdGlvbih0eXBlLCBvdGhlcikge1xuICAgICAqICAgICAgLy8gSWdub3JlIHVuY29sbGlkZXNcbiAgICAgKiAgICAgIGlmKHR5cGUgPT0gQ29sbGlzaW9uRXZlbnRUeXBlLlRvdWNoTG9zdCkgcmV0dXJuO1xuICAgICAqXG4gICAgICogICAgICAvLyBUYWtlIGRhbWFnZSBvbiBjb2xsaXNpb24gd2l0aCBlbmVtaWVzXG4gICAgICogICAgICBpZihvdGhlci5vYmplY3QubmFtZS5zdGFydHNXaXRoKFwiZW5lbXktXCIpKSB7XG4gICAgICogICAgICAgICAgdGhpcy5hcHBseURhbWFnZSgxMCk7XG4gICAgICogICAgICB9XG4gICAgICogIH0uYmluZCh0aGlzKSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBJZCBvZiB0aGUgbmV3IGNhbGxiYWNrIGZvciB1c2Ugd2l0aCB7QGxpbmsgUGh5c1hDb21wb25lbnQjcmVtb3ZlQ29sbGlzaW9uQ2FsbGJhY2t9LlxuICAgICAqL1xuICAgIG9uQ29sbGlzaW9uKGNhbGxiYWNrOiBDb2xsaXNpb25DYWxsYmFjayk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLm9uQ29sbGlzaW9uV2l0aCh0aGlzLCBjYWxsYmFjayk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGZpbHRlcmVkIG9uIGNvbGxpc2lvbiBjYWxsYmFjay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlckNvbXAgQ29tcG9uZW50IGZvciB3aGljaCBjYWxsYmFja3Mgd2lsbFxuICAgICAqICAgICAgICBiZSB0cmlnZ2VyZWQuIElmIHlvdSBwYXNzIHRoaXMgY29tcG9uZW50LCB0aGUgbWV0aG9kIGlzIGVxdWl2YWxlbnQgdG8uXG4gICAgICogICAgICAgIHtAbGluayBQaHlzWENvbXBvbmVudCNvbkNvbGxpc2lvbn0uXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIEZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGlzIHJpZ2lkIGJvZHlcbiAgICAgKiAgICAgICAgKHVuKWNvbGxpZGVzIHdpdGggYG90aGVyQ29tcGAuXG4gICAgICogQHJldHVybnMgSWQgb2YgdGhlIG5ldyBjYWxsYmFjayBmb3IgdXNlIHdpdGgge0BsaW5rIFBoeXNYQ29tcG9uZW50I3JlbW92ZUNvbGxpc2lvbkNhbGxiYWNrfS5cbiAgICAgKi9cbiAgICBvbkNvbGxpc2lvbldpdGgob3RoZXJDb21wOiB0aGlzLCBjYWxsYmFjazogQ29sbGlzaW9uQ2FsbGJhY2spOiBudW1iZXIge1xuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSB0aGlzLnNjZW5lLl9weENhbGxiYWNrcztcbiAgICAgICAgaWYgKCFjYWxsYmFja3MuaGFzKHRoaXMuX2lkKSkge1xuICAgICAgICAgICAgY2FsbGJhY2tzLnNldCh0aGlzLl9pZCwgW10pO1xuICAgICAgICB9XG4gICAgICAgIGNhbGxiYWNrcy5nZXQodGhpcy5faWQpIS5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3BoeXN4X2NvbXBvbmVudF9hZGRDYWxsYmFjayh0aGlzLl9pZCwgb3RoZXJDb21wLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEgY29sbGlzaW9uIGNhbGxiYWNrIGFkZGVkIHdpdGgge0BsaW5rIFBoeXNYQ29tcG9uZW50I29uQ29sbGlzaW9ufSBvciB7QGxpbmsgUGh5c1hDb21wb25lbnQjb25Db2xsaXNpb25XaXRofS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjYWxsYmFja0lkIENhbGxiYWNrIGlkIGFzIHJldHVybmVkIGJ5IHtAbGluayBQaHlzWENvbXBvbmVudCNvbkNvbGxpc2lvbn0gb3Ige0BsaW5rIFBoeXNYQ29tcG9uZW50I29uQ29sbGlzaW9uV2l0aH0uXG4gICAgICogQHRocm93cyBXaGVuIHRoZSBjYWxsYmFjayBkb2VzIG5vdCBiZWxvbmcgdG8gdGhlIGNvbXBvbmVudC5cbiAgICAgKiBAdGhyb3dzIFdoZW4gdGhlIGNhbGxiYWNrIGRvZXMgbm90IGV4aXN0LlxuICAgICAqL1xuICAgIHJlbW92ZUNvbGxpc2lvbkNhbGxiYWNrKGNhbGxiYWNrSWQ6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBjb25zdCByID0gdGhpcy5lbmdpbmUud2FzbS5fd2xfcGh5c3hfY29tcG9uZW50X3JlbW92ZUNhbGxiYWNrKHRoaXMuX2lkLCBjYWxsYmFja0lkKTtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gdGhpcy5zY2VuZS5fcHhDYWxsYmFja3M7XG4gICAgICAgIC8qIHIgaXMgdGhlIGFtb3VudCBvZiBvYmplY3QgdG8gcmVtb3ZlIGZyb20gdGhlIGVuZCBvZiB0aGVcbiAgICAgICAgICogY2FsbGJhY2tzIGFycmF5IGZvciB0aGlzIG9iamVjdCAqL1xuICAgICAgICBpZiAocikgY2FsbGJhY2tzLmdldCh0aGlzLl9pZCkhLnNwbGljZSgtcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEFjY2VzcyB0byB0aGUgcGh5c2ljcyBzY2VuZVxuICovXG5leHBvcnQgY2xhc3MgUGh5c2ljcyB7XG4gICAgLyoqXG4gICAgICogSGl0LlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfaGl0OiBSYXlIaXQ7XG5cbiAgICAvKipcbiAgICAgKiBXb25kZXJsYW5kIEVuZ2luZSBpbnN0YW5jZVxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgX2VuZ2luZTogV29uZGVybGFuZEVuZ2luZTtcblxuICAgIC8qKlxuICAgICAqIFJheSBIaXRcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcHJpdmF0ZSBfcmF5SGl0OiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3RvcihlbmdpbmU6IFdvbmRlcmxhbmRFbmdpbmUpIHtcbiAgICAgICAgdGhpcy5fZW5naW5lID0gZW5naW5lO1xuICAgICAgICB0aGlzLl9yYXlIaXQgPSBlbmdpbmUud2FzbS5fbWFsbG9jKDQgKiAoMyAqIDQgKyAzICogNCArIDQgKyAyKSArIDQpO1xuICAgICAgICB0aGlzLl9oaXQgPSBuZXcgUmF5SGl0KGVuZ2luZS5zY2VuZSwgdGhpcy5fcmF5SGl0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYXN0IGEgcmF5IHRocm91Z2ggdGhlIHNjZW5lIGFuZCBmaW5kIGludGVyc2VjdGluZyBwaHlzaWNzIGNvbXBvbmVudHMuXG4gICAgICpcbiAgICAgKiBUaGUgcmVzdWx0aW5nIHJheSBoaXQgd2lsbCBjb250YWluICoqdXAgdG8gNCoqIGNsb3Nlc3QgcmF5IGhpdHMsXG4gICAgICogc29ydGVkIGJ5IGluY3JlYXNpbmcgZGlzdGFuY2UuXG4gICAgICpcbiAgICAgKiBFeGFtcGxlOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBoaXQgPSBlbmdpbmUucGh5c2ljcy5yYXlDYXN0KFxuICAgICAqICAgICBbMCwgMCwgMF0sXG4gICAgICogICAgIFswLCAwLCAxXSxcbiAgICAgKiAgICAgMSA8PCAwIHwgMSA8PCA0LCAvLyBPbmx5IGNoZWNrIGFnYWluc3QgcGh5c2ljcyBjb21wb25lbnRzIGluIGdyb3VwcyAwIGFuZCA0XG4gICAgICogICAgIDI1XG4gICAgICogKTtcbiAgICAgKiBpZiAoaGl0LmhpdENvdW50ID4gMCkge1xuICAgICAqICAgICBjb25zdCBsb2NhdGlvbnMgPSBoaXQuZ2V0TG9jYXRpb25zKCk7XG4gICAgICogICAgIGNvbnNvbGUubG9nKGBPYmplY3QgaGl0IGF0OiAke2xvY2F0aW9uc1swXVswXX0sICR7bG9jYXRpb25zWzBdWzFdfSwgJHtsb2NhdGlvbnNbMF1bMl19YCk7XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIG8gUmF5IG9yaWdpbi5cbiAgICAgKiBAcGFyYW0gZCBSYXkgZGlyZWN0aW9uLlxuICAgICAqIEBwYXJhbSBncm91cE1hc2sgQml0bWFzayBvZiBwaHlzaWNzIGdyb3VwcyB0byBmaWx0ZXIgYnk6IG9ubHkgb2JqZWN0c1xuICAgICAqICAgICAgICB0aGF0IGFyZSBwYXJ0IG9mIGdpdmVuIGdyb3VwcyBhcmUgY29uc2lkZXJlZCBmb3IgdGhlIHJheWNhc3QuXG4gICAgICogQHBhcmFtIG1heERpc3RhbmNlIE1heGltdW0gKippbmNsdXNpdmUqKiBoaXQgZGlzdGFuY2UuIERlZmF1bHRzIHRvIGAxMDBgLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIHtAbGluayBSYXlIaXR9IGluc3RhbmNlLCBjYWNoZWQgYnkgdGhpcyBjbGFzcy5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoZSByZXR1cm5lZCB7QGxpbmsgUmF5SGl0fSBvYmplY3QgaXMgb3duZWQgYnkgdGhlIHtAbGluayBQaHlzaWNzfVxuICAgICAqICAgICAgIGluc3RhbmNlIGFuZCB3aWxsIGJlIHJldXNlZCB3aXRoIHRoZSBuZXh0IHtAbGluayBQaHlzaWNzI3JheUNhc3R9IGNhbGwuXG4gICAgICovXG4gICAgcmF5Q2FzdChcbiAgICAgICAgbzogUmVhZG9ubHk8TnVtYmVyQXJyYXk+LFxuICAgICAgICBkOiBSZWFkb25seTxOdW1iZXJBcnJheT4sXG4gICAgICAgIGdyb3VwTWFzazogbnVtYmVyLFxuICAgICAgICBtYXhEaXN0YW5jZTogbnVtYmVyID0gMTAwLjBcbiAgICApOiBSYXlIaXQge1xuICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMuX2VuZ2luZS5zY2VuZS5faW5kZXg7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9waHlzeF9yYXlfY2FzdChcbiAgICAgICAgICAgIHNjZW5lLFxuICAgICAgICAgICAgb1swXSxcbiAgICAgICAgICAgIG9bMV0sXG4gICAgICAgICAgICBvWzJdLFxuICAgICAgICAgICAgZFswXSxcbiAgICAgICAgICAgIGRbMV0sXG4gICAgICAgICAgICBkWzJdLFxuICAgICAgICAgICAgZ3JvdXBNYXNrLFxuICAgICAgICAgICAgbWF4RGlzdGFuY2UsXG4gICAgICAgICAgICB0aGlzLl9yYXlIaXRcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hpdDtcbiAgICB9XG5cbiAgICAvKiogSG9zdGluZyBlbmdpbmUgaW5zdGFuY2UuICovXG4gICAgZ2V0IGVuZ2luZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZTtcbiAgICB9XG59XG5cbi8qKlxuICogTWVzaCBpbmRleCB0eXBlLlxuICovXG5leHBvcnQgZW51bSBNZXNoSW5kZXhUeXBlIHtcbiAgICAvKiogU2luZ2xlIGJ5dGUgbWVzaCBpbmRleCwgcmFuZ2UgMC0yNTUgKi9cbiAgICBVbnNpZ25lZEJ5dGUgPSAxLFxuXG4gICAgLyoqIFR3byBieXRlIG1lc2ggaW5kZXgsIHJhbmdlIDAtNjU1MzUgKi9cbiAgICBVbnNpZ25lZFNob3J0ID0gMixcblxuICAgIC8qKiBGb3VyIGJ5dGUgbWVzaCBpbmRleCwgcmFuZ2UgMC00Mjk0OTY3Mjk1ICovXG4gICAgVW5zaWduZWRJbnQgPSA0LFxufVxuXG4vKipcbiAqIE1lc2ggc2tpbm5pbmcgdHlwZS5cbiAqL1xuZXhwb3J0IGVudW0gTWVzaFNraW5uaW5nVHlwZSB7XG4gICAgLyoqIE5vdCBza2lubmVkICovXG4gICAgTm9uZSA9IDAsXG5cbiAgICAvKiogU2tpbm5lZCwgNCBqb2ludHMvd2VpZ2h0IHBlciB2ZXJ0ZXggKi9cbiAgICBGb3VySm9pbnRzID0gMSxcblxuICAgIC8qKiBTa2lubmVkLCA4IGpvaW50cy93ZWlnaHQgcGVyIHZlcnRleCAqL1xuICAgIEVpZ2h0Sm9pbnRzID0gMixcbn1cblxuLyoqXG4gKiBNZXNoIGNvbnN0cnVjdG9yIHBhcmFtZXRlcnMgb2JqZWN0LlxuICpcbiAqIFVzYWdlOlxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCBtZXNoID0gTWVzaCh7dmVydGV4Q291bnQ6IDMsIGluZGV4RGF0YTogWzAsIDEsIDJdfSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBNZXNoUGFyYW1ldGVycyB7XG4gICAgLyoqIE51bWJlciBvZiB2ZXJ0aWNlcyB0byBhbGxvY2F0ZS4gKi9cbiAgICB2ZXJ0ZXhDb3VudDogbnVtYmVyO1xuICAgIC8qKiBJbmRleCBkYXRhIHZhbHVlcy4gKi9cbiAgICBpbmRleERhdGE6IFJlYWRvbmx5PE51bWJlckFycmF5PjtcbiAgICAvKiogSW5kZXggdHlwZSwgYG51bGxgIGlmIG5vdCBpbmRleGVkLiAqL1xuICAgIGluZGV4VHlwZTogTWVzaEluZGV4VHlwZTtcbiAgICAvKiogV2hldGhlciB0aGUgbWVzaCBzaG91bGQgYmUgc2tpbm5lZC4gRGVmYXVsdHMgdG8gbm90IHNraW5uZWQuICovXG4gICAgc2tpbm5pbmdUeXBlOiBNZXNoU2tpbm5pbmdUeXBlO1xufVxuXG4vKipcbiAqIFdyYXBwZXIgYXJvdW5kIGEgbmF0aXZlIG1lc2ggZGF0YS5cbiAqXG4gKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBob3cgdG8gY3JlYXRlIG1lc2hlcywgaGF2ZSBhIGxvb2sgYXQgdGhlXG4gKiB7QGxpbmsgTWVzaE1hbmFnZXJ9IGNsYXNzLlxuICpcbiAqICMjIyMgVXBkYXRlXG4gKlxuICogVG8gbW9kaWZ5IGEgbWVzaCwgeW91IGdldCBhY2Nlc3MgdG8gYSB7QGxpbmsgTWVzaEF0dHJpYnV0ZUFjY2Vzc29yfSB0aGF0XG4gKiBhbGxvd3MgeW91IHRvIG1vZGlmeSB0aGUgY29udGVudCBvZiB0aGUgYnVmZmVyczpcbiAqXG4gKiBVc2FnZTpcbiAqXG4gKiBgYGBqc1xuICogY29uc3QgbWVzaCA9IGVuZ2luZS5lcy5jcmVhdGUoe3ZlcnRleENvdW50OiAzLCBpbmRleERhdGE6IFswLCAxLCAyXX0pO1xuICogY29uc3QgcG9zaXRpb25zID0gbWVzaC5hdHRyaWJ1dGUoTWVzaEF0dHJpYnV0ZS5Qb3NpdGlvbik7XG4gKiAuLi5cbiAqIGBgYFxuICpcbiAqIEBub3RlIE1lc2hlcyBhcmUgKipwZXItZW5naW5lKiosIHRoZXkgY2FuIHRodXMgYmUgc2hhcmVkIGJ5IG11bHRpcGxlIHNjZW5lcy5cbiAqL1xuZXhwb3J0IGNsYXNzIE1lc2ggZXh0ZW5kcyBSZXNvdXJjZSB7XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayBNZXNoTWFuYWdlci5jcmVhdGV9IGluc3RlYWQsIGFjY2Vzc2libGUgdmlhIHtAbGluayBXb25kZXJsYW5kRW5naW5lLm1lc2hlc306XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IG1lc2ggPSBlbmdpbmUubWVzaGVzLmNyZWF0ZSh7dmVydGV4Q291bnQ6IDMsIGluZGV4RGF0YTogWzAsIDEsIDJdfSk7XG4gICAgICogLi4uXG4gICAgICogbWVzaC51cGRhdGUoKTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbmdpbmU6IFdvbmRlcmxhbmRFbmdpbmUsIHBhcmFtczogUGFydGlhbDxNZXNoUGFyYW1ldGVycz4gfCBudW1iZXIpIHtcbiAgICAgICAgaWYgKCFpc051bWJlcihwYXJhbXMpKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNoID0gZW5naW5lLm1lc2hlcy5jcmVhdGUocGFyYW1zKTtcbiAgICAgICAgICAgIC8qIGBzdXBlcigpYCBtdXN0IGJlIGNhbGxlZCBhcyBzdGF0ZWQgaW4gdGhlIHNwZWNpZmljYXRpb24gKi9cbiAgICAgICAgICAgIHN1cGVyKGVuZ2luZSwgbWVzaC5faW5kZXgpO1xuICAgICAgICAgICAgcmV0dXJuIG1lc2g7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZW5naW5lLCBwYXJhbXMpO1xuICAgIH1cblxuICAgIC8qKiBOdW1iZXIgb2YgdmVydGljZXMgaW4gdGhpcyBtZXNoLiAqL1xuICAgIGdldCB2ZXJ0ZXhDb3VudCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfbWVzaF9nZXRfdmVydGV4Q291bnQodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKiBJbmRleCBkYXRhIChyZWFkLW9ubHkpIG9yIGBudWxsYCBpZiB0aGUgbWVzaCBpcyBub3QgaW5kZXhlZC4gKi9cbiAgICBnZXQgaW5kZXhEYXRhKCk6IFVpbnQ4QXJyYXkgfCBVaW50MTZBcnJheSB8IFVpbnQzMkFycmF5IHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCB0ZW1wTWVtID0gd2FzbS5fdGVtcE1lbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfbWVzaF9nZXRfaW5kZXhEYXRhKHRoaXMuX2lkLCB0ZW1wTWVtLCB0ZW1wTWVtICsgNCk7XG4gICAgICAgIGlmIChwdHIgPT09IG51bGwpIHJldHVybiBudWxsO1xuXG4gICAgICAgIGNvbnN0IGluZGV4Q291bnQgPSB3YXNtLkhFQVBVMzJbdGVtcE1lbSAvIDRdO1xuICAgICAgICBjb25zdCBpbmRleFNpemUgPSB3YXNtLkhFQVBVMzJbdGVtcE1lbSAvIDQgKyAxXTtcbiAgICAgICAgc3dpdGNoIChpbmRleFNpemUpIHtcbiAgICAgICAgICAgIGNhc2UgTWVzaEluZGV4VHlwZS5VbnNpZ25lZEJ5dGU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KHdhc20uSEVBUFU4LmJ1ZmZlciwgcHRyLCBpbmRleENvdW50KTtcbiAgICAgICAgICAgIGNhc2UgTWVzaEluZGV4VHlwZS5VbnNpZ25lZFNob3J0OlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVWludDE2QXJyYXkod2FzbS5IRUFQVTE2LmJ1ZmZlciwgcHRyLCBpbmRleENvdW50KTtcbiAgICAgICAgICAgIGNhc2UgTWVzaEluZGV4VHlwZS5VbnNpZ25lZEludDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQzMkFycmF5KHdhc20uSEVBUFUzMi5idWZmZXIsIHB0ciwgaW5kZXhDb3VudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXBwbHkgY2hhbmdlcyB0byB7QGxpbmsgYXR0cmlidXRlIHwgdmVydGV4IGF0dHJpYnV0ZXN9LlxuICAgICAqXG4gICAgICogVXBsb2FkcyB0aGUgdXBkYXRlZCB2ZXJ0ZXggYXR0cmlidXRlcyB0byB0aGUgR1BVIGFuZCB1cGRhdGVzIHRoZSBib3VuZGluZ1xuICAgICAqIHNwaGVyZSB0byBtYXRjaCB0aGUgbmV3IHZlcnRleCBwb3NpdGlvbnMuXG4gICAgICpcbiAgICAgKiBTaW5jZSB0aGlzIGlzIGFuIGV4cGVuc2l2ZSBvcGVyYXRpb24sIGNhbGwgaXQgb25seSBvbmNlIHlvdSBoYXZlIHBlcmZvcm1lZFxuICAgICAqIGFsbCBtb2RpZmljYXRpb25zIG9uIGEgbWVzaCBhbmQgYXZvaWQgY2FsbGluZyBpZiB5b3UgZGlkIG5vdCBwZXJmb3JtIGFueVxuICAgICAqIG1vZGlmaWNhdGlvbnMgYXQgYWxsLlxuICAgICAqL1xuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfbWVzaF91cGRhdGUodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRCb3VuZGluZ1NwaGVyZSgpOiBGbG9hdDMyQXJyYXk7XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldEJvdW5kaW5nU3BoZXJlPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBUKTogVDtcbiAgICAvKipcbiAgICAgKiBNZXNoIGJvdW5kaW5nIHNwaGVyZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgUHJlYWxsb2NhdGVkIGFycmF5IHRvIHdyaXRlIGludG8sIHRvIGF2b2lkIGdhcmJhZ2UsXG4gICAgICogICAgIG90aGVyd2lzZSB3aWxsIGFsbG9jYXRlIGEgbmV3IEZsb2F0MzJBcnJheS5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogIGNvbnN0IHNwaGVyZSA9IG5ldyBGbG9hdDMyQXJyYXkoNCk7XG4gICAgICogIGZvciguLi4pIHtcbiAgICAgKiAgICAgIG1lc2guZ2V0Qm91bmRpbmdTcGhlcmUoc3BoZXJlKTtcbiAgICAgKiAgICAgIC4uLlxuICAgICAqICB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBJZiB0aGUgcG9zaXRpb24gZGF0YSBpcyBjaGFuZ2VkLCBjYWxsIHtAbGluayBNZXNoI3VwZGF0ZX0gdG8gdXBkYXRlIHRoZVxuICAgICAqIGJvdW5kaW5nIHNwaGVyZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEJvdW5kaW5nIHNwaGVyZSwgMC0yIHNwaGVyZSBvcmlnaW4sIDMgcmFkaXVzLlxuICAgICAqL1xuICAgIGdldEJvdW5kaW5nU3BoZXJlPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBUIHwgRmxvYXQzMkFycmF5KTogVCB8IEZsb2F0MzJBcnJheTtcbiAgICBnZXRCb3VuZGluZ1NwaGVyZTxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KFxuICAgICAgICBvdXQ6IFQgfCBGbG9hdDMyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KDQpXG4gICAgKTogVCB8IEZsb2F0MzJBcnJheSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9tZXNoX2dldF9ib3VuZGluZ1NwaGVyZSh0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG4gICAgICAgIG91dFszXSA9IHdhc20uX3RlbXBNZW1GbG9hdFszXTtcbiAgICAgICAgcmV0dXJuIG91dCBhcyBUO1xuICAgIH1cblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBhdHRyaWJ1dGUoXG4gICAgICAgIGF0dHI6IE1lc2hBdHRyaWJ1dGUuUG9zaXRpb25cbiAgICApOiBNZXNoQXR0cmlidXRlQWNjZXNzb3I8RmxvYXQzMkFycmF5Q29uc3RydWN0b3I+IHwgbnVsbDtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgYXR0cmlidXRlKFxuICAgICAgICBhdHRyOiBNZXNoQXR0cmlidXRlLlRhbmdlbnRcbiAgICApOiBNZXNoQXR0cmlidXRlQWNjZXNzb3I8RmxvYXQzMkFycmF5Q29uc3RydWN0b3I+IHwgbnVsbDtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgYXR0cmlidXRlKFxuICAgICAgICBhdHRyOiBNZXNoQXR0cmlidXRlLk5vcm1hbFxuICAgICk6IE1lc2hBdHRyaWJ1dGVBY2Nlc3NvcjxGbG9hdDMyQXJyYXlDb25zdHJ1Y3Rvcj4gfCBudWxsO1xuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBhdHRyaWJ1dGUoXG4gICAgICAgIGF0dHI6IE1lc2hBdHRyaWJ1dGUuVGV4dHVyZUNvb3JkaW5hdGVcbiAgICApOiBNZXNoQXR0cmlidXRlQWNjZXNzb3I8RmxvYXQzMkFycmF5Q29uc3RydWN0b3I+IHwgbnVsbDtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgYXR0cmlidXRlKFxuICAgICAgICBhdHRyOiBNZXNoQXR0cmlidXRlLkNvbG9yXG4gICAgKTogTWVzaEF0dHJpYnV0ZUFjY2Vzc29yPEZsb2F0MzJBcnJheUNvbnN0cnVjdG9yPiB8IG51bGw7XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGF0dHJpYnV0ZShcbiAgICAgICAgYXR0cjogTWVzaEF0dHJpYnV0ZS5Kb2ludElkXG4gICAgKTogTWVzaEF0dHJpYnV0ZUFjY2Vzc29yPFVpbnQxNkFycmF5Q29uc3RydWN0b3I+IHwgbnVsbDtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgYXR0cmlidXRlKFxuICAgICAgICBhdHRyOiBNZXNoQXR0cmlidXRlLkpvaW50V2VpZ2h0XG4gICAgKTogTWVzaEF0dHJpYnV0ZUFjY2Vzc29yPEZsb2F0MzJBcnJheUNvbnN0cnVjdG9yPiB8IG51bGw7XG4gICAgLyoqXG4gICAgICogR2V0IGFuIGF0dHJpYnV0ZSBhY2Nlc3NvciB0byByZXRyaWV2ZSBvciBtb2RpZnkgZGF0YSBvZiBnaXZlIGF0dHJpYnV0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhdHRyIEF0dHJpYnV0ZSB0byBnZXQgYWNjZXNzIHRvXG4gICAgICogQHJldHVybnMgQXR0cmlidXRlIHRvIGdldCBhY2Nlc3MgdG8gb3IgYG51bGxgLCBpZiBtZXNoIGRvZXMgbm90IGhhdmUgdGhpcyBhdHRyaWJ1dGUuXG4gICAgICpcbiAgICAgKiBDYWxsIHtAbGluayB1cGRhdGV9IGZvciBjaGFuZ2VzIHRvIHZlcnRleCBhdHRyaWJ1dGVzIHRvIHRha2UgZWZmZWN0LlxuICAgICAqXG4gICAgICogSWYgdGhlcmUgYXJlIG5vIHNoYWRlcnMgaW4gdGhlIHNjZW5lIHRoYXQgdXNlIGBUZXh0dXJlQ29vcmRpbmF0ZWAgZm9yIGV4YW1wbGUsXG4gICAgICogbm8gbWVzaGVzIHdpbGwgaGF2ZSB0aGUgYFRleHR1cmVDb29yZGluYXRlYCBhdHRyaWJ1dGUuXG4gICAgICpcbiAgICAgKiBGb3IgZmxleGlibGUgcmV1c2FibGUgY29tcG9uZW50cywgdGFrZSB0aGlzIGludG8gYWNjb3VudCB0aGF0IG9ubHkgYFBvc2l0aW9uYFxuICAgICAqIGlzIGd1YXJhbnRlZWQgdG8gYmUgcHJlc2VudCBhdCBhbGwgdGltZS5cbiAgICAgKi9cbiAgICBhdHRyaWJ1dGUoYXR0cjogTWVzaEF0dHJpYnV0ZSk6IE1lc2hBdHRyaWJ1dGVBY2Nlc3NvciB8IG51bGw7XG4gICAgYXR0cmlidXRlKGF0dHI6IE1lc2hBdHRyaWJ1dGUpOiBNZXNoQXR0cmlidXRlQWNjZXNzb3IgfCBudWxsIHtcbiAgICAgICAgaWYgKHR5cGVvZiBhdHRyICE9ICdudW1iZXInKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgbnVtYmVyLCBidXQgZ290ICcgKyB0eXBlb2YgYXR0cik7XG5cbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHRlbXBNZW1VaW50MzIgPSB3YXNtLl90ZW1wTWVtVWludDMyO1xuICAgICAgICB3YXNtLl93bF9tZXNoX2dldF9hdHRyaWJ1dGUodGhpcy5faWQsIGF0dHIsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBpZiAodGVtcE1lbVVpbnQzMlswXSA9PSAyNTUpIHJldHVybiBudWxsO1xuXG4gICAgICAgIGNvbnN0IGFycmF5U2l6ZSA9IHRlbXBNZW1VaW50MzJbNV07XG4gICAgICAgIHJldHVybiBuZXcgTWVzaEF0dHJpYnV0ZUFjY2Vzc29yKHRoaXMuZW5naW5lLCB7XG4gICAgICAgICAgICBhdHRyaWJ1dGU6IHRlbXBNZW1VaW50MzJbMF0sXG4gICAgICAgICAgICBvZmZzZXQ6IHRlbXBNZW1VaW50MzJbMV0sXG4gICAgICAgICAgICBzdHJpZGU6IHRlbXBNZW1VaW50MzJbMl0sXG4gICAgICAgICAgICBmb3JtYXRTaXplOiB0ZW1wTWVtVWludDMyWzNdLFxuICAgICAgICAgICAgY29tcG9uZW50Q291bnQ6IHRlbXBNZW1VaW50MzJbNF0sXG4gICAgICAgICAgICAvKiBUaGUgV0FTTSBBUEkgcmV0dXJucyBgMGAgZm9yIGEgc2NhbGFyIHZhbHVlLiBXZSBjbGFtcCBpdCB0byAxIGFzIHdlIHN0cmljdGx5IHVzZSBpdCBhcyBhIG11bHRpcGxpZXIgZm9yIGdldC9zZXQgb3BlcmF0aW9ucyAqL1xuICAgICAgICAgICAgYXJyYXlTaXplOiBhcnJheVNpemUgPyBhcnJheVNpemUgOiAxLFxuICAgICAgICAgICAgbGVuZ3RoOiB0aGlzLnZlcnRleENvdW50LFxuICAgICAgICAgICAgYnVmZmVyVHlwZTogKGF0dHIgIT09IE1lc2hBdHRyaWJ1dGUuSm9pbnRJZFxuICAgICAgICAgICAgICAgID8gRmxvYXQzMkFycmF5XG4gICAgICAgICAgICAgICAgOiBVaW50MTZBcnJheSkgYXMgVHlwZWRBcnJheUN0b3IsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlc3Ryb3kgYW5kIGZyZWUgdGhlIG1lc2hlcyBtZW1vcnkuXG4gICAgICpcbiAgICAgKiBJdCBpcyBiZXN0IHByYWN0aWNlIHRvIHNldCB0aGUgbWVzaCB2YXJpYWJsZSB0byBgbnVsbGAgYWZ0ZXIgY2FsbGluZ1xuICAgICAqIGRlc3Ryb3kgdG8gcHJldmVudCBhY2NpZGVudGFsIHVzZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogICBtZXNoLmRlc3Ryb3koKTtcbiAgICAgKiAgIG1lc2ggPSBudWxsO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQWNjZXNzaW5nIHRoZSBtZXNoIGFmdGVyIGRlc3RydWN0aW9uIGJlaGF2ZXMgbGlrZSBhY2Nlc3NpbmcgYW4gZW1wdHlcbiAgICAgKiBtZXNoLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOS4wXG4gICAgICovXG4gICAgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfbWVzaF9kZXN0cm95KHRoaXMuX2lkKTtcbiAgICAgICAgdGhpcy5lbmdpbmUubWVzaGVzLl9kZXN0cm95KHRoaXMpO1xuICAgIH1cblxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBpZiAodGhpcy5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgcmV0dXJuICdNZXNoKGRlc3Ryb3llZCknO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgTWVzaCgke3RoaXMuX2luZGV4fSlgO1xuICAgIH1cbn1cblxuLyoqXG4gKiBPcHRpb25zIHRvIGNyZWF0ZSBhIG5ldyB7QGxpbmsgTWVzaEF0dHJpYnV0ZUFjY2Vzc29yfSBpbnN0YW5jZS5cbiAqL1xuaW50ZXJmYWNlIE1lc2hBdHRyaWJ1dGVBY2Nlc3Nvck9wdGlvbnM8VCBleHRlbmRzIFR5cGVkQXJyYXlDdG9yPiB7XG4gICAgYXR0cmlidXRlOiBudW1iZXI7XG4gICAgb2Zmc2V0OiBudW1iZXI7XG4gICAgc3RyaWRlOiBudW1iZXI7XG4gICAgZm9ybWF0U2l6ZTogbnVtYmVyO1xuICAgIGNvbXBvbmVudENvdW50OiBudW1iZXI7XG4gICAgYXJyYXlTaXplOiBudW1iZXI7XG4gICAgbGVuZ3RoOiBudW1iZXI7XG4gICAgYnVmZmVyVHlwZTogVDtcbn1cblxuLyoqXG4gKiBBbiBpdGVyYXRvciBvdmVyIGEgbWVzaCB2ZXJ0ZXggYXR0cmlidXRlLlxuICpcbiAqIFVzYWdlOlxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCBtZXNoID0gdGhpcy5vYmplY3QuZ2V0Q29tcG9uZW50KCdtZXNoJykubWVzaDtcbiAqIGNvbnN0IHBvc2l0aW9ucyA9IG1lc2guYXR0cmlidXRlKE1lc2hBdHRyaWJ1dGUuUG9zaXRpb24pO1xuICpcbiAqIC8vIEVxdWl2YWxlbnQgdG8gYG5ldyBGbG9hdDMyQXJyYXkoMylgLlxuICogY29uc3QgdGVtcCA9IHBvc2l0aW9ucy5jcmVhdGVBcnJheSgpO1xuICpcbiAqIGZvcihsZXQgaSA9IDA7IGkgPCBwb3NpdGlvbnMubGVuZ3RoOyArK2kpIHtcbiAqICAgICAvLyBgcG9zYCB3aWxsIHJlZmVyZW5jZSBgdGVtcGAgYW5kIHRoZXJlYnkgbm90IGFsbG9jYXRlIGFkZGl0aW9uYWxcbiAqICAgICAvLyBtZW1vcnksIHdoaWNoIHdvdWxkIGNhdXNlIGEgcGVyZiBzcGlrZSB3aGVuIGNvbGxlY3RlZC5cbiAqICAgICBjb25zdCBwb3MgPSBwb3NpdGlvbnMuZ2V0KGksIHRlbXApO1xuICogICAgIC8vIFNjYWxlIHBvc2l0aW9uIGJ5IDIgb24geC1heGlzIG9ubHkuXG4gKiAgICAgcG9zWzBdICo9IDIuMDtcbiAqICAgICBwb3NpdGlvbnMuc2V0KGksIHBvcyk7XG4gKiB9XG4gKiAvLyBXZSdyZSBkb25lIG1vZGlmeWluZywgdGVsbCB0aGUgZW5naW5lIHRvIG1vdmUgdmVydGV4IGRhdGEgdG8gdGhlIEdQVS5cbiAqIG1lc2gudXBkYXRlKCk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIE1lc2hBdHRyaWJ1dGVBY2Nlc3NvcjxUIGV4dGVuZHMgVHlwZWRBcnJheUN0b3IgPSBUeXBlZEFycmF5Q3Rvcj4ge1xuICAgIC8qKiBNYXggbnVtYmVyIG9mIGVsZW1lbnRzLiAqL1xuICAgIHJlYWRvbmx5IGxlbmd0aDogbnVtYmVyID0gMDtcblxuICAgIC8qKiBXb25kZXJsYW5kIEVuZ2luZSBpbnN0YW5jZS4gQGhpZGRlbiAqL1xuICAgIHByb3RlY3RlZCByZWFkb25seSBfZW5naW5lOiBXb25kZXJsYW5kRW5naW5lO1xuXG4gICAgLyoqIEF0dHJpYnV0ZSBpbmRleC4gQGhpZGRlbiAqL1xuICAgIHByaXZhdGUgX2F0dHJpYnV0ZTogbnVtYmVyID0gLTE7XG4gICAgLyoqIEF0dHJpYnV0ZSBvZmZzZXQuIEBoaWRkZW4gKi9cbiAgICBwcml2YXRlIF9vZmZzZXQ6IG51bWJlciA9IDA7XG4gICAgLyoqIEF0dHJpYnV0ZSBzdHJpZGUuIEBoaWRkZW4gKi9cbiAgICBwcml2YXRlIF9zdHJpZGU6IG51bWJlciA9IDA7XG4gICAgLyoqIEZvcm1hdCBzaXplIG5hdGl2ZSBlbnVtLiBAaGlkZGVuICovXG4gICAgcHJpdmF0ZSBfZm9ybWF0U2l6ZTogbnVtYmVyID0gMDtcbiAgICAvKiogTnVtYmVyIG9mIGNvbXBvbmVudHMgcGVyIHZlcnRleC4gQGhpZGRlbiAqL1xuICAgIHByaXZhdGUgX2NvbXBvbmVudENvdW50OiBudW1iZXIgPSAwO1xuICAgIC8qKiBOdW1iZXIgb2YgdmFsdWVzIHBlciB2ZXJ0ZXguIEBoaWRkZW4gKi9cbiAgICBwcml2YXRlIF9hcnJheVNpemU6IG51bWJlciA9IDE7XG4gICAgLyoqXG4gICAgICogQ2xhc3MgdG8gaW5zdGFudGlhdGUgYW4gQXJyYXlCdWZmZXIgdG8gZ2V0L3NldCB2YWx1ZXMuXG4gICAgICovXG4gICAgcHJpdmF0ZSBfYnVmZmVyVHlwZTogVDtcbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB0byBhbGxvY2F0ZSB0ZW1wb3JhcnkgV0FTTSBtZW1vcnkuIEl0IGlzIGNhY2hlZCBpbiB0aGUgYWNjZXNzb3IgdG8gYXZvaWRcbiAgICAgKiBjb25kaXRpb25hbHMgZHVyaW5nIGdldC9zZXQuXG4gICAgICovXG4gICAgcHJpdmF0ZSBfdGVtcEJ1ZmZlckdldHRlcjogKGJ5dGVzOiBudW1iZXIpID0+IFR5cGVkQXJyYXk8VD47XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAbm90ZSBQbGVhc2UgdXNlIHtAbGluayBNZXNoLmF0dHJpYnV0ZX0gdG8gY3JlYXRlIGEgbmV3IGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgQ29udGFpbnMgaW5mb3JtYXRpb24gYWJvdXQgaG93IHRvIHJlYWQgdGhlIGRhdGEuXG4gICAgICogQG5vdGUgRG8gbm90IHVzZSB0aGlzIGNvbnN0cnVjdG9yLiBJbnN0ZWFkLCBwbGVhc2UgdXNlIHRoZSB7QGxpbmsgTWVzaC5hdHRyaWJ1dGV9IG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbmdpbmU6IFdvbmRlcmxhbmRFbmdpbmUsIG9wdGlvbnM6IE1lc2hBdHRyaWJ1dGVBY2Nlc3Nvck9wdGlvbnM8VD4pIHtcbiAgICAgICAgdGhpcy5fZW5naW5lID0gZW5naW5lO1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG5cbiAgICAgICAgdGhpcy5fYXR0cmlidXRlID0gb3B0aW9ucy5hdHRyaWJ1dGU7XG4gICAgICAgIHRoaXMuX29mZnNldCA9IG9wdGlvbnMub2Zmc2V0O1xuICAgICAgICB0aGlzLl9zdHJpZGUgPSBvcHRpb25zLnN0cmlkZTtcbiAgICAgICAgdGhpcy5fZm9ybWF0U2l6ZSA9IG9wdGlvbnMuZm9ybWF0U2l6ZTtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50Q291bnQgPSBvcHRpb25zLmNvbXBvbmVudENvdW50O1xuICAgICAgICB0aGlzLl9hcnJheVNpemUgPSBvcHRpb25zLmFycmF5U2l6ZTtcbiAgICAgICAgdGhpcy5fYnVmZmVyVHlwZSA9IG9wdGlvbnMuYnVmZmVyVHlwZTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBvcHRpb25zLmxlbmd0aDtcblxuICAgICAgICB0aGlzLl90ZW1wQnVmZmVyR2V0dGVyID0gKFxuICAgICAgICAgICAgdGhpcy5fYnVmZmVyVHlwZSA9PT0gRmxvYXQzMkFycmF5XG4gICAgICAgICAgICAgICAgPyB3YXNtLmdldFRlbXBCdWZmZXJGMzIuYmluZCh3YXNtKVxuICAgICAgICAgICAgICAgIDogd2FzbS5nZXRUZW1wQnVmZmVyVTE2LmJpbmQod2FzbSlcbiAgICAgICAgKSBhcyAoKSA9PiBUeXBlZEFycmF5PFQ+O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBUeXBlZEFycmF5IHRvIGhvbGQgdGhpcyBhdHRyaWJ1dGUncyB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VmdWwgdG8gY3JlYXRlIGEgdmlldyB0byBob2xkIHRoZSBkYXRhIHRvXG4gICAgICogcGFzcyB0byB7QGxpbmsgZ2V0fSBhbmQge0BsaW5rIHNldH1cbiAgICAgKlxuICAgICAqIEV4YW1wbGU6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IHZlcnRleENvdW50ID0gNDtcbiAgICAgKiBjb25zdCBwb3NpdGlvbkF0dHJpYnV0ZSA9IG1lc2guYXR0cmlidXRlKE1lc2hBdHRyaWJ1dGUuUG9zaXRpb24pO1xuICAgICAqXG4gICAgICogLy8gQSBwb3NpdGlvbiBoYXMgMyBmbG9hdHMgcGVyIHZlcnRleC4gVGh1cywgcG9zaXRpb25zIGhhcyBsZW5ndGggMyAqIDQuXG4gICAgICogY29uc3QgcG9zaXRpb25zID0gcG9zaXRpb25BdHRyaWJ1dGUuY3JlYXRlQXJyYXkodmVydGV4Q291bnQpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIGNvdW50IFRoZSBudW1iZXIgb2YgKip2ZXJ0aWNlcyoqIGV4cGVjdGVkLlxuICAgICAqIEByZXR1cm5zIEEgVHlwZWRBcnJheSB3aXRoIHRoZSBhcHByb3ByaWF0ZSBmb3JtYXQgdG8gYWNjZXNzIHRoZSBkYXRhXG4gICAgICovXG4gICAgY3JlYXRlQXJyYXkoY291bnQgPSAxKTogVHlwZWRBcnJheTxUPiB7XG4gICAgICAgIGNvdW50ID0gY291bnQgPiB0aGlzLmxlbmd0aCA/IHRoaXMubGVuZ3RoIDogY291bnQ7XG4gICAgICAgIHJldHVybiBuZXcgdGhpcy5fYnVmZmVyVHlwZShcbiAgICAgICAgICAgIGNvdW50ICogdGhpcy5fY29tcG9uZW50Q291bnQgKiB0aGlzLl9hcnJheVNpemVcbiAgICAgICAgKSBhcyBUeXBlZEFycmF5PFQ+O1xuICAgIH1cblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXQoaW5kZXg6IG51bWJlcik6IFR5cGVkQXJyYXk8VD47XG4gICAgLyoqXG4gICAgICogR2V0IGF0dHJpYnV0ZSBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIGluZGV4IEluZGV4XG4gICAgICogQHBhcmFtIG91dCBQcmVhbGxvY2F0ZWQgYXJyYXkgdG8gd3JpdGUgaW50byxcbiAgICAgKiAgICAgIHRvIGF2b2lkIGdhcmJhZ2UsIG90aGVyd2lzZSB3aWxsIGFsbG9jYXRlIGEgbmV3IFR5cGVkQXJyYXkuXG4gICAgICpcbiAgICAgKiBgb3V0Lmxlbmd0aGAgbmVlZHMgdG8gYmUgYSBtdWx0aXBsZSBvZiB0aGUgYXR0cmlidXRlcyBjb21wb25lbnQgY291bnQsIHNlZVxuICAgICAqIHtAbGluayBNZXNoQXR0cmlidXRlfS4gSWYgYG91dC5sZW5ndGhgIGlzIG1vcmUgdGhhbiBvbmUgbXVsdGlwbGUsIGl0IHdpbGwgYmVcbiAgICAgKiBmaWxsZWQgd2l0aCB0aGUgbmV4dCBuIGF0dHJpYnV0ZSBlbGVtZW50cywgd2hpY2ggY2FuIHJlZHVjZSBvdmVyaGVhZFxuICAgICAqIG9mIHRoaXMgY2FsbC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBgb3V0YCBwYXJhbWV0ZXJcbiAgICAgKi9cbiAgICBnZXQ8VCBleHRlbmRzIE51bWJlckFycmF5PihpbmRleDogbnVtYmVyLCBvdXQ6IFQpOiBUO1xuICAgIGdldChpbmRleDogbnVtYmVyLCBvdXQ6IE51bWJlckFycmF5ID0gdGhpcy5jcmVhdGVBcnJheSgpKTogTnVtYmVyQXJyYXkge1xuICAgICAgICBpZiAob3V0Lmxlbmd0aCAlIHRoaXMuX2NvbXBvbmVudENvdW50ICE9PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgYG91dC5sZW5ndGgsICR7b3V0Lmxlbmd0aH0gaXMgbm90IGEgbXVsdGlwbGUgb2YgdGhlIGF0dHJpYnV0ZSB2ZWN0b3IgY29tcG9uZW50cywgJHt0aGlzLl9jb21wb25lbnRDb3VudH1gXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGVzdCA9IHRoaXMuX3RlbXBCdWZmZXJHZXR0ZXIob3V0Lmxlbmd0aCk7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRTaXplID0gdGhpcy5fYnVmZmVyVHlwZS5CWVRFU19QRVJfRUxFTUVOVDtcbiAgICAgICAgY29uc3QgZGVzdFNpemUgPSBlbGVtZW50U2l6ZSAqIG91dC5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHNyY0Zvcm1hdFNpemUgPSB0aGlzLl9mb3JtYXRTaXplICogdGhpcy5fYXJyYXlTaXplO1xuICAgICAgICBjb25zdCBkZXN0Rm9ybWF0U2l6ZSA9IHRoaXMuX2NvbXBvbmVudENvdW50ICogZWxlbWVudFNpemUgKiB0aGlzLl9hcnJheVNpemU7XG5cbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX21lc2hfZ2V0X2F0dHJpYnV0ZV92YWx1ZXMoXG4gICAgICAgICAgICB0aGlzLl9hdHRyaWJ1dGUsXG4gICAgICAgICAgICBzcmNGb3JtYXRTaXplLFxuICAgICAgICAgICAgdGhpcy5fb2Zmc2V0ICsgaW5kZXggKiB0aGlzLl9zdHJpZGUsXG4gICAgICAgICAgICB0aGlzLl9zdHJpZGUsXG4gICAgICAgICAgICBkZXN0Rm9ybWF0U2l6ZSxcbiAgICAgICAgICAgIGRlc3QuYnl0ZU9mZnNldCxcbiAgICAgICAgICAgIGRlc3RTaXplXG4gICAgICAgICk7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvdXQubGVuZ3RoOyArK2kpIG91dFtpXSA9IGRlc3RbaV07XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGF0dHJpYnV0ZSBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIGkgSW5kZXhcbiAgICAgKiBAcGFyYW0gdiBWYWx1ZSB0byBzZXQgdGhlIGVsZW1lbnQgdG9cbiAgICAgKlxuICAgICAqIGB2Lmxlbmd0aGAgbmVlZHMgdG8gYmUgYSBtdWx0aXBsZSBvZiB0aGUgYXR0cmlidXRlcyBjb21wb25lbnQgY291bnQsIHNlZVxuICAgICAqIHtAbGluayBNZXNoQXR0cmlidXRlfS4gSWYgYHYubGVuZ3RoYCBpcyBtb3JlIHRoYW4gb25lIG11bHRpcGxlLCBpdCB3aWxsIGJlXG4gICAgICogZmlsbGVkIHdpdGggdGhlIG5leHQgbiBhdHRyaWJ1dGUgZWxlbWVudHMsIHdoaWNoIGNhbiByZWR1Y2Ugb3ZlcmhlYWRcbiAgICAgKiBvZiB0aGlzIGNhbGwuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZylcbiAgICAgKi9cbiAgICBzZXQoaTogbnVtYmVyLCB2OiBSZWFkb25seTxOdW1iZXJBcnJheT4pIHtcbiAgICAgICAgaWYgKHYubGVuZ3RoICUgdGhpcy5fY29tcG9uZW50Q291bnQgIT09IDApXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgYG91dC5sZW5ndGgsICR7di5sZW5ndGh9IGlzIG5vdCBhIG11bHRpcGxlIG9mIHRoZSBhdHRyaWJ1dGUgdmVjdG9yIGNvbXBvbmVudHMsICR7dGhpcy5fY29tcG9uZW50Q291bnR9YFxuICAgICAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuX2J1ZmZlclR5cGUuQllURVNfUEVSX0VMRU1FTlQ7XG4gICAgICAgIGNvbnN0IHNyY1NpemUgPSBlbGVtZW50U2l6ZSAqIHYubGVuZ3RoO1xuICAgICAgICBjb25zdCBzcmNGb3JtYXRTaXplID0gdGhpcy5fY29tcG9uZW50Q291bnQgKiBlbGVtZW50U2l6ZSAqIHRoaXMuX2FycmF5U2l6ZTtcbiAgICAgICAgY29uc3QgZGVzdEZvcm1hdFNpemUgPSB0aGlzLl9mb3JtYXRTaXplICogdGhpcy5fYXJyYXlTaXplO1xuXG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcblxuICAgICAgICAvKiBVbmxlc3Mgd2UgYXJlIGFscmVhZHkgd29ya2luZyB3aXRoIGRhdGEgZnJvbSBXQVNNIGhlYXAsIHdlXG4gICAgICAgICAqIG5lZWQgdG8gY29weSBpbnRvIHRlbXBvcmFyeSBtZW1vcnkuICovXG4gICAgICAgIGlmICgodiBhcyBGbG9hdDMyQXJyYXkpLmJ1ZmZlciAhPSB3YXNtLkhFQVBVOC5idWZmZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlc3QgPSB0aGlzLl90ZW1wQnVmZmVyR2V0dGVyKHYubGVuZ3RoKTtcbiAgICAgICAgICAgIGRlc3Quc2V0KHYpO1xuICAgICAgICAgICAgdiA9IGRlc3Q7XG4gICAgICAgIH1cblxuICAgICAgICB3YXNtLl93bF9tZXNoX3NldF9hdHRyaWJ1dGVfdmFsdWVzKFxuICAgICAgICAgICAgdGhpcy5fYXR0cmlidXRlLFxuICAgICAgICAgICAgc3JjRm9ybWF0U2l6ZSxcbiAgICAgICAgICAgICh2IGFzIEZsb2F0MzJBcnJheSkuYnl0ZU9mZnNldCxcbiAgICAgICAgICAgIHNyY1NpemUsXG4gICAgICAgICAgICBkZXN0Rm9ybWF0U2l6ZSxcbiAgICAgICAgICAgIHRoaXMuX29mZnNldCArIGkgKiB0aGlzLl9zdHJpZGUsXG4gICAgICAgICAgICB0aGlzLl9zdHJpZGVcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKiogSG9zdGluZyBlbmdpbmUgaW5zdGFuY2UuICovXG4gICAgZ2V0IGVuZ2luZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZTtcbiAgICB9XG59XG5cbi8qKlxuICogV3JhcHBlciBhcm91bmQgYSBuYXRpdmUgZm9udCByZXNvdXJjZS5cbiAqXG4gKiBAbm90ZSBGb250cyBhcmUgKipwZXItZW5naW5lKiosIHRoZXkgY2FuIHRodXMgYmUgc2hhcmVkIGJ5IG11bHRpcGxlIHNjZW5lcy5cbiAqXG4gKiBAc2luY2UgMS4yLjBcbiAqL1xuZXhwb3J0IGNsYXNzIEZvbnQgZXh0ZW5kcyBSZXNvdXJjZSB7XG4gICAgLyoqIEVtIGhlaWdodCBpbiBvYmplY3Qgc3BhY2UuIEVxdWl2YWxlbnQgdG8gbGluZSBoZWlnaHQuICovXG4gICAgZ2V0IGVtSGVpZ2h0KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9mb250X2dldF9lbUhlaWdodCh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FwIGhlaWdodCBpbiBvYmplY3Qgc3BhY2UuIFRoaXMgaXMgdGhlIHR5cGljYWwgaGVpZ2h0IG9mIGNhcGl0YWxcbiAgICAgKiBsZXR0ZXJzLiBDYW4gYmUgMCBpZiBub3QgZGVmaW5lZCBieSB0aGUgZm9udC5cbiAgICAgKi9cbiAgICBnZXQgY2FwSGVpZ2h0KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9mb250X2dldF9jYXBIZWlnaHQodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFggaGVpZ2h0IGluIG9iamVjdCBzcGFjZS4gVGhpcyBpcyB0aGUgdHlwaWNhbCBoZWlnaHQgb2YgbG93ZXJjYXNlXG4gICAgICogbGV0dGVycy4gQ2FuIGJlIDAgaWYgbm90IGRlZmluZWQgYnkgdGhlIGZvbnQuXG4gICAgICovXG4gICAgZ2V0IHhIZWlnaHQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX2ZvbnRfZ2V0X3hIZWlnaHQodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE91dGxpbmUgc2l6ZS4gVGhpcyBpcyB0aGUgZmFjdG9yIGJ5IHdoaWNoIGNoYXJhY3RlcnMgYXJlIGV4cGFuZGVkIHRvXG4gICAgICogY3JlYXRlIHRoZSBvdXRsaW5lIGVmZmVjdC4gUmV0dXJucyAwIGlmIHRoZSBmb250IHdhcyBjb21waWxlZCB3aXRob3V0XG4gICAgICogYW4gb3V0bGluZS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjIuMVxuICAgICAqL1xuICAgIGdldCBvdXRsaW5lU2l6ZSgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfZm9udF9nZXRfb3V0bGluZVNpemUodGhpcy5faWQpO1xuICAgIH1cbn1cblxuLyoqIFRlbXBvcmFyeSBjYW52YXMgKi9cbmxldCB0ZW1wMmQ6IHtcbiAgICBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xufSB8IG51bGwgPSBudWxsO1xuXG4vKipcbiAqIFdyYXBwZXIgYXJvdW5kIGEgbmF0aXZlIHRleHR1cmUgZGF0YS5cbiAqXG4gKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBob3cgdG8gY3JlYXRlIG1lc2hlcywgaGF2ZSBhIGxvb2sgYXQgdGhlXG4gKiB7QGxpbmsgVGV4dHVyZU1hbmFnZXJ9IGNsYXNzLlxuICpcbiAqIEBub3RlIFRleHR1cmVzIGFyZSAqKnBlci1lbmdpbmUqKiwgdGhleSBjYW4gdGh1cyBiZSBzaGFyZWQgYnkgbXVsdGlwbGUgc2NlbmVzLlxuICovXG5leHBvcnQgY2xhc3MgVGV4dHVyZSBleHRlbmRzIFJlc291cmNlIHtcbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIFRleHR1cmVNYW5hZ2VyLmNyZWF0ZX0gaW5zdGVhZCwgYWNjZXNzaWJsZSB2aWFcbiAgICAgKiB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS50ZXh0dXJlc306XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICogaW1hZ2Uub25sb2FkID0gKCkgPT4ge1xuICAgICAqICAgICBjb25zdCB0ZXh0dXJlID0gZW5naW5lLnRleHR1cmVzLmNyZWF0ZShpbWFnZSk7XG4gICAgICogfTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbmdpbmU6IFdvbmRlcmxhbmRFbmdpbmUsIHBhcmFtOiBJbWFnZUxpa2UgfCBudW1iZXIpIHtcbiAgICAgICAgaWYgKGlzSW1hZ2VMaWtlKHBhcmFtKSkge1xuICAgICAgICAgICAgY29uc3QgdGV4dHVyZSA9IGVuZ2luZS50ZXh0dXJlcy5jcmVhdGUocGFyYW0pO1xuICAgICAgICAgICAgLyogYHN1cGVyKClgIG11c3QgYmUgY2FsbGVkIGFzIHN0YXRlZCBpbiB0aGUgc3BlY2lmaWNhdGlvbiAqL1xuICAgICAgICAgICAgc3VwZXIoZW5naW5lLCB0ZXh0dXJlLl9pbmRleCk7XG4gICAgICAgICAgICByZXR1cm4gdGV4dHVyZTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihlbmdpbmUsIHBhcmFtKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgdGV4dHVyZSBpcyB2YWxpZFxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayBTY2VuZVJlc291cmNlI2lzRGVzdHJveWVkfSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIGdldCB2YWxpZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmlzRGVzdHJveWVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluZGV4IGluIHRoaXMgbWFuYWdlci5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgVGV4dHVyZS5pbmRleH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBnZXQgaWQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXg7XG4gICAgfVxuXG4gICAgLyoqIFVwZGF0ZSB0aGUgdGV4dHVyZSB0byBtYXRjaCB0aGUgSFRNTCBlbGVtZW50IChlLmcuIHJlZmxlY3QgdGhlIGN1cnJlbnQgZnJhbWUgb2YgYSB2aWRlbykuICovXG4gICAgdXBkYXRlKCkge1xuICAgICAgICBjb25zdCBpbWFnZSA9IHRoaXMuX2ltYWdlSW5kZXg7XG4gICAgICAgIGlmICghdGhpcy52YWxpZCB8fCAhaW1hZ2UpIHJldHVybjtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfcmVuZGVyZXJfdXBkYXRlSW1hZ2UoaW1hZ2UpO1xuICAgIH1cblxuICAgIC8qKiBXaWR0aCBvZiB0aGUgdGV4dHVyZS4gKi9cbiAgICBnZXQgd2lkdGgoKTogbnVtYmVyIHtcbiAgICAgICAgLyogSFRNTCB0ZXh0dXJlcyBzaG91bGQgYmUgcmVhZCBkaXJlY3RseSBmcm9tIGpzLCBzaW5jZSB0aGUgQysrIGNvdWxkIGJlXG4gICAgICAgICAqIG9uZSBmcmFtZSBvdXQtb2Ytc3luYyBvbiB0aGUgc2l6ZSBvZiB0aGUgZWxlbWVudCBpdHNlbGYuICovXG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmh0bWxFbGVtZW50O1xuICAgICAgICBpZiAoZWxlbWVudCkgcmV0dXJuIGVsZW1lbnQud2lkdGg7XG5cbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX2ltYWdlX3NpemUodGhpcy5faW1hZ2VJbmRleCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIHJldHVybiB3YXNtLl90ZW1wTWVtVWludDMyWzBdO1xuICAgIH1cblxuICAgIC8qKiBIZWlnaHQgb2YgdGhlIHRleHR1cmUuICovXG4gICAgZ2V0IGhlaWdodCgpOiBudW1iZXIge1xuICAgICAgICAvKiBIVE1MIHRleHR1cmVzIHNob3VsZCBiZSByZWFkIGRpcmVjdGx5IGZyb20ganMsIHNpbmNlIHRoZSBDKysgY291bGQgYmVcbiAgICAgICAgICogb25lIGZyYW1lIG91dC1vZi1zeW5jIG9uIHRoZSBzaXplIG9mIHRoZSBlbGVtZW50IGl0c2VsZi4gKi9cbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuaHRtbEVsZW1lbnQ7XG4gICAgICAgIGlmIChlbGVtZW50KSByZXR1cm4gZWxlbWVudC5oZWlnaHQ7XG5cbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX2ltYWdlX3NpemUodGhpcy5faW1hZ2VJbmRleCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIHJldHVybiB3YXNtLl90ZW1wTWVtVWludDMyWzFdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGh0bWwgZWxlbWVudCBhc3NvY2lhdGVkIHRvIHRoaXMgdGV4dHVyZS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYWNjZXNzb3Igd2lsbCByZXR1cm4gYG51bGxgIGlmIHRoZSBpbWFnZSBpcyBjb21wcmVzc2VkLlxuICAgICAqL1xuICAgIGdldCBodG1sRWxlbWVudCgpOiBJbWFnZUxpa2UgfCBudWxsIHtcbiAgICAgICAgY29uc3QgaW1hZ2UgPSB0aGlzLl9pbWFnZUluZGV4O1xuICAgICAgICBpZiAoIWltYWdlKSByZXR1cm4gbnVsbDtcblxuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QganNJbWFnZUluZGV4ID0gd2FzbS5fd2xfaW1hZ2VfZ2V0X2pzSW1hZ2VfaW5kZXgoaW1hZ2UpO1xuXG4gICAgICAgIC8qIFNpbmNlIHRoZSBmaXJzdCBlbGVtZW50IGlzIGBudWxsYCwgbm8gbmVlZCB0byBjaGVjayBmb3IgYGpzSW1hZ2VJbmRleGAgKi9cbiAgICAgICAgcmV0dXJuIHdhc20uX2ltYWdlc1tqc0ltYWdlSW5kZXhdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBhIHN1YnJhbmdlIG9uIHRoZSB0ZXh0dXJlIHRvIG1hdGNoIHRoZSBIVE1MIGVsZW1lbnQgKGUuZy4gcmVmbGVjdCB0aGUgY3VycmVudCBmcmFtZSBvZiBhIHZpZGVvKS5cbiAgICAgKlxuICAgICAqIFVzYWdlOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAvLyBDb3BpZXMgcmVjdGFuZ2xlIG9mIHBpeGVsIHN0YXJ0aW5nIGZyb20gKDEwLCAyMClcbiAgICAgKiB0ZXh0dXJlLnVwZGF0ZVN1YkltYWdlKDEwLCAyMCwgNjAwLCA0MDApO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHggeCBvZmZzZXRcbiAgICAgKiBAcGFyYW0geSB5IG9mZnNldFxuICAgICAqIEBwYXJhbSB3IHdpZHRoXG4gICAgICogQHBhcmFtIGggaGVpZ2h0XG4gICAgICovXG4gICAgdXBkYXRlU3ViSW1hZ2UoeDogbnVtYmVyLCB5OiBudW1iZXIsIHc6IG51bWJlciwgaDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgaW1hZ2UgPSB0aGlzLl9pbWFnZUluZGV4O1xuICAgICAgICBpZiAoIWltYWdlKSByZXR1cm47XG5cbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGpzSW1hZ2VJbmRleCA9IHdhc20uX3dsX2ltYWdlX2dldF9qc0ltYWdlX2luZGV4KGltYWdlKTtcblxuICAgICAgICAvKiBMYXp5IGluaXRpYWxpemUgdGVtcCBjYW52YXMgKi9cbiAgICAgICAgaWYgKCF0ZW1wMmQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgICAgICBpZiAoIWN0eCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgJ1RleHR1cmUudXBkYXRlU3ViSW1hZ2UoKTogRmFpbGVkIHRvIG9idGFpbiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQuJ1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZW1wMmQgPSB7XG4gICAgICAgICAgICAgICAgY2FudmFzLFxuICAgICAgICAgICAgICAgIGN0eCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpbWcgPSB3YXNtLl9pbWFnZXNbanNJbWFnZUluZGV4XTtcbiAgICAgICAgaWYgKCFpbWcpIHJldHVybjtcblxuICAgICAgICAvKiogQHRvZG86IElmIHRoZSBpbWFnZSBpcyBhbiBpbnN0YW5jZSBvZiBjYW52YXMsIHRoaXNcbiAgICAgICAgICogY2FuIGJlIHNraXBwZWQgZW50aXJlbHkuICovXG4gICAgICAgIHRlbXAyZC5jYW52YXMud2lkdGggPSB3O1xuICAgICAgICB0ZW1wMmQuY2FudmFzLmhlaWdodCA9IGg7XG4gICAgICAgIHRlbXAyZC5jdHguZHJhd0ltYWdlKGltZywgeCwgeSwgdywgaCwgMCwgMCwgdywgaCk7XG5cbiAgICAgICAgY29uc3QgeU9mZnNldCA9ICgoaW1nIGFzIEhUTUxWaWRlb0VsZW1lbnQpLnZpZGVvSGVpZ2h0ID8/IGltZy5oZWlnaHQpIC0geSAtIGg7XG4gICAgICAgIHdhc20uX2ltYWdlc1tqc0ltYWdlSW5kZXhdID0gdGVtcDJkLmNhbnZhcztcbiAgICAgICAgd2FzbS5fd2xfcmVuZGVyZXJfdXBkYXRlSW1hZ2UoaW1hZ2UsIHgsIHlPZmZzZXQpO1xuICAgICAgICB3YXNtLl9pbWFnZXNbanNJbWFnZUluZGV4XSA9IGltZztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXN0cm95IGFuZCBmcmVlIHRoZSB0ZXh0dXJlJ3MgdGV4dHVyZSBhbHRhcyBzcGFjZSBhbmQgbWVtb3J5LlxuICAgICAqXG4gICAgICogSXQgaXMgYmVzdCBwcmFjdGljZSB0byBzZXQgdGhlIHRleHR1cmUgdmFyaWFibGUgdG8gYG51bGxgIGFmdGVyIGNhbGxpbmdcbiAgICAgKiBkZXN0cm95IHRvIHByZXZlbnQgYWNjaWRlbnRhbCB1c2Ugb2YgdGhlIGludmFsaWQgdGV4dHVyZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogICB0ZXh0dXJlLmRlc3Ryb3koKTtcbiAgICAgKiAgIHRleHR1cmUgPSBudWxsO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOS4wXG4gICAgICovXG4gICAgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX3RleHR1cmVfZGVzdHJveSh0aGlzLl9pZCk7XG4gICAgICAgIHRoaXMuZW5naW5lLnRleHR1cmVzLl9kZXN0cm95KHRoaXMpO1xuICAgIH1cblxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBpZiAodGhpcy5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgcmV0dXJuICdUZXh0dXJlKGRlc3Ryb3llZCknO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgVGV4dHVyZSgke3RoaXMuX2luZGV4fSlgO1xuICAgIH1cbiAgICBwcml2YXRlIGdldCBfaW1hZ2VJbmRleCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3RleHR1cmVfZ2V0X2ltYWdlX2luZGV4KHRoaXMuX2lkKTtcbiAgICB9XG59XG5cbi8qKlxuICogV3JhcHBlciBhcm91bmQgYSBuYXRpdmUgYW5pbWF0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgQW5pbWF0aW9uIGV4dGVuZHMgU2NlbmVSZXNvdXJjZSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGluZGV4IEluZGV4IGluIHRoZSBtYW5hZ2VyXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoaG9zdDogV29uZGVybGFuZEVuZ2luZSB8IFByZWZhYiA9IFdMLCBpbmRleDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gaG9zdCBpbnN0YW5jZW9mIFByZWZhYiA/IGhvc3QgOiBob3N0LnNjZW5lO1xuICAgICAgICBzdXBlcihzY2VuZSBhcyBQcmVmYWIsIGluZGV4KTtcbiAgICB9XG5cbiAgICAvKiogRHVyYXRpb24gb2YgdGhpcyBhbmltYXRpb24uICovXG4gICAgZ2V0IGR1cmF0aW9uKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS53YXNtLl93bF9hbmltYXRpb25fZ2V0X2R1cmF0aW9uKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKiogTnVtYmVyIG9mIHRyYWNrcyBpbiB0aGlzIGFuaW1hdGlvbi4gKi9cbiAgICBnZXQgdHJhY2tDb3VudCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfYW5pbWF0aW9uX2dldF90cmFja0NvdW50KHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDbG9uZSB0aGlzIGFuaW1hdGlvbiByZXRhcmdldGVkIHRvIGEgbmV3IHNldCBvZiBvYmplY3RzLlxuICAgICAqXG4gICAgICogVGhlIGNsb25lIHNoYXJlcyBtb3N0IG9mIHRoZSBkYXRhIHdpdGggdGhlIG9yaWdpbmFsIGFuZCBpcyB0aGVyZWZvcmVcbiAgICAgKiBsaWdodC13ZWlnaHQuXG4gICAgICpcbiAgICAgKiAqKkV4cGVyaW1lbnRhbDoqKiBUaGlzIEFQSSBtaWdodCBjaGFuZ2UgaW4gdXBjb21pbmcgdmVyc2lvbnMuXG4gICAgICpcbiAgICAgKiBJZiByZXRhcmdldGluZyB0byB7QGxpbmsgU2tpbn0sIHRoZSBqb2luIG5hbWVzIHdpbGwgYmUgdXNlZCB0byBkZXRlcm1pbmUgYSBtYXBwaW5nXG4gICAgICogZnJvbSB0aGUgcHJldmlvdXMgc2tpbiB0byB0aGUgbmV3IHNraW4uIFRoZSBzb3VyY2Ugc2tpbiB3aWxsIGJlIHJldHJpZXZlZCBmcm9tXG4gICAgICogdGhlIGZpcnN0IHRyYWNrIGluIHRoZSBhbmltYXRpb24gdGhhdCB0YXJnZXRzIGEgam9pbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmV3VGFyZ2V0cyBOZXcgdGFyZ2V0cyBwZXIgdHJhY2suIEV4cGVjdGVkIHRvIGhhdmVcbiAgICAgKiAgICAgIHtAbGluayBBbmltYXRpb24jdHJhY2tDb3VudH0gZWxlbWVudHMgb3IgdG8gYmUgYSB7QGxpbmsgU2tpbn0uXG4gICAgICogQHJldHVybnMgVGhlIHJldGFyZ2V0ZWQgY2xvbmUgb2YgdGhpcyBhbmltYXRpb24uXG4gICAgICovXG4gICAgcmV0YXJnZXQobmV3VGFyZ2V0czogT2JqZWN0M0RbXSB8IFNraW4pOiBBbmltYXRpb24ge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgaWYgKG5ld1RhcmdldHMgaW5zdGFuY2VvZiBTa2luKSB7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHdhc20uX3dsX2FuaW1hdGlvbl9yZXRhcmdldFRvU2tpbih0aGlzLl9pZCwgbmV3VGFyZ2V0cy5faWQpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NjZW5lLmFuaW1hdGlvbnMud3JhcChpbmRleCkhO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld1RhcmdldHMubGVuZ3RoICE9IHRoaXMudHJhY2tDb3VudCkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXG4gICAgICAgICAgICAgICAgJ0V4cGVjdGVkICcgK1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYWNrQ291bnQudG9TdHJpbmcoKSArXG4gICAgICAgICAgICAgICAgICAgICcgdGFyZ2V0cywgYnV0IGdvdCAnICtcbiAgICAgICAgICAgICAgICAgICAgbmV3VGFyZ2V0cy5sZW5ndGgudG9TdHJpbmcoKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl9tYWxsb2MoMiAqIG5ld1RhcmdldHMubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdUYXJnZXRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBvYmplY3QzZCA9IG5ld1RhcmdldHNbaV07XG4gICAgICAgICAgICB0aGlzLnNjZW5lLmFzc2VydE9yaWdpbihvYmplY3QzZCk7XG4gICAgICAgICAgICAvKiBVc2UgbG9jYWwgaWQgaGVyZSBhbmQgKipub3QqKiBwYWNrZWQgaWQsIGJlY2F1c2UgdGhlIFdBU01cbiAgICAgICAgICAgICAqIHRha2VzIG93bmVyc2hpcCBhbmQgcmVpbnRlcnByZXRzIHRoZSBpZHMuICovXG4gICAgICAgICAgICB3YXNtLkhFQVBVMTZbKHB0ciA+Pj4gMSkgKyBpXSA9IG5ld1RhcmdldHNbaV0ub2JqZWN0SWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5kZXggPSB3YXNtLl93bF9hbmltYXRpb25fcmV0YXJnZXQodGhpcy5faWQsIHB0cik7XG4gICAgICAgIHdhc20uX2ZyZWUocHRyKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fc2NlbmUuYW5pbWF0aW9ucy53cmFwKGluZGV4KSE7XG4gICAgfVxuXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICByZXR1cm4gJ0FuaW1hdGlvbihkZXN0cm95ZWQpJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYEFuaW1hdGlvbigke3RoaXMuX2luZGV4fSlgO1xuICAgIH1cbn1cblxuLyoqXG4gKiBTY2VuZSBncmFwaCBvYmplY3QuXG4gKlxuICogTm9kZSBpbiB0aGUgc2NlbmUgZ3JhcGggb3IgXCJlbnRpdHlcIi4gQ29uc2lzdHMgb2YgdHJhbnNmb3JtYXRpb24gYW5kIGEgcmVmZXJlbmNlXG4gKiB0byBpdHMgcGFyZW50IG9iamVjdC4gVXN1YWxseSBob2xkcyBjb21wb25lbnRzIGFuZCBpcyBhY2Nlc3NpYmxlIGJ5IGNvbXBvbmVudHNcbiAqIHRocm91Z2gge0BsaW5rIENvbXBvbmVudCNvYmplY3R9LlxuICpcbiAqIE9iamVjdHMgYXJlIHN0b3JlZCBpbiBhIGRhdGEgb3JpZW50ZWQgbWFubmVyIGluc2lkZSBXZWJBc3NlbWJseSBtZW1vcnkuIFRoaXMgY2xhc3NcbiAqIGlzIGEgSmF2YVNjcmlwdCBBUEkgd3JhcHBlciBhcm91bmQgdGhpcyBtZW1vcnkgZm9yIG1vcmUgY29udmVuaWVudCB1c2UgaW5cbiAqIGNvbXBvbmVudHMuXG4gKlxuICogT2JqZWN0cyBjYW4gYmUgY3JlYXRlZCBhbmQgYWRkZWQgdG8gYSBzY2VuZSB0aHJvdWdoIHtAbGluayBQcmVmYWIuYWRkT2JqZWN0fTpcbiAqXG4gKiBgYGBqc1xuICogY29uc3QgcGFyZW50ID0gc2NlbmUuYWRkT2JqZWN0KCk7XG4gKiBwYXJlbnQubmFtZSA9ICdwYXJlbnRgJztcbiAqIGNvbnN0IGNoaWxkID0gc2NlbmUuYWRkT2JqZWN0KHBhcmVudCk7XG4gKiBjaGlsZC5uYW1lID0gJ2NoaWxkYCc7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIE9iamVjdDNEIHtcbiAgICAvKipcbiAgICAgKiBQYWNrZWQgb2JqZWN0IGlkLCBjb250YWluaW5nIHNjZW5lIGluZGV4IGFuZCBsb2NhbCBpZC5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICByZWFkb25seSBfaWQ6IG51bWJlciA9IC0xO1xuICAgIC8qKiBPYmplY3QgaWQsIHJlbGF0aXZlIHRvIHRoZSBzY2VuZSBtYW5hZ2VyLiBAaGlkZGVuICovXG4gICAgcmVhZG9ubHkgX2xvY2FsSWQ6IG51bWJlciA9IC0xO1xuXG4gICAgLyoqIFNjZW5lIGluc3RhbmNlLiBAaGlkZGVuICovXG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IF9zY2VuZTogUHJlZmFiO1xuICAgIC8qKiBXb25kZXJsYW5kIEVuZ2luZSBpbnN0YW5jZS4gQGhpZGRlbiAqL1xuICAgIHByb3RlY3RlZCByZWFkb25seSBfZW5naW5lOiBXb25kZXJsYW5kRW5naW5lO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIG8gT2JqZWN0IGlkIHRvIHdyYXAuXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBPYmplY3RzIG11c3QgYmUgb2J0YWluZWQgdmlhIHtAbGluayBTY2VuZS5hZGRPYmplY3R9IG9yIHtAbGluayBTY2VuZS53cmFwfTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogLy8gQ3JlYXRlIGEgbmV3IG9iamVjdC5cbiAgICAgKiBjb25zdCBvYmogPSBzY2VuZS5hZGRPYmplY3QoKTtcbiAgICAgKlxuICAgICAqIC8vIFdyYXAgYW4gb2JqZWN0IHVzaW5nIGl0cyBpZC4gVGhlIGlkIG11c3QgYmUgdmFsaWQuXG4gICAgICogY29uc3Qgb2JqID0gc2NlbmUud3JhcCgwKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzY2VuZTogV29uZGVybGFuZEVuZ2luZSB8IFByZWZhYiwgaWQ6IG51bWJlcikge1xuICAgICAgICBzY2VuZSA9IHNjZW5lIGluc3RhbmNlb2YgUHJlZmFiID8gc2NlbmUgOiBzY2VuZS5zY2VuZTtcbiAgICAgICAgdGhpcy5fbG9jYWxJZCA9IGlkO1xuICAgICAgICB0aGlzLl9pZCA9IChzY2VuZS5faW5kZXggPDwgMjIpIHwgaWQ7XG4gICAgICAgIHRoaXMuX3NjZW5lID0gc2NlbmU7XG4gICAgICAgIC8qKiBAdG9kbzogUmVtb3ZlIGFuZCBvbmx5IGtlZXAgZ2V0dGVyLiAqL1xuICAgICAgICB0aGlzLl9lbmdpbmUgPSBzY2VuZS5lbmdpbmU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTmFtZSBvZiB0aGUgb2JqZWN0LlxuICAgICAqXG4gICAgICogVXNlZnVsIGZvciBpZGVudGlmeWluZyBvYmplY3RzIGR1cmluZyBkZWJ1Z2dpbmcuXG4gICAgICovXG4gICAgZ2V0IG5hbWUoKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICByZXR1cm4gd2FzbS5VVEY4VG9TdHJpbmcod2FzbS5fd2xfb2JqZWN0X25hbWUodGhpcy5faWQpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIG9iamVjdCdzIG5hbWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmV3TmFtZSBUaGUgbmV3IG5hbWUgdG8gc2V0LlxuICAgICAqL1xuICAgIHNldCBuYW1lKG5ld05hbWU6IHN0cmluZykge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX29iamVjdF9zZXRfbmFtZSh0aGlzLl9pZCwgd2FzbS50ZW1wVVRGOChuZXdOYW1lKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyZW50IG9mIHRoaXMgb2JqZWN0IG9yIGBudWxsYCBpZiBwYXJlbnRlZCB0byByb290LlxuICAgICAqL1xuICAgIGdldCBwYXJlbnQoKTogT2JqZWN0M0QgfCBudWxsIHtcbiAgICAgICAgY29uc3QgcCA9IHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfcGFyZW50KHRoaXMuX2lkKTtcbiAgICAgICAgcmV0dXJuIHAgPT09IDAgPyBudWxsIDogdGhpcy5fc2NlbmUud3JhcChwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBPYmplY3QzRC5nZXRDaGlsZHJlbn0uXG4gICAgICpcbiAgICAgKiBAbm90ZSBQcmVmZXIgdG8gdXNlIHtAbGluayBPYmplY3QzRC5nZXRDaGlsZHJlbn0gZm9yIHBlcmZvcm1hbmNlLlxuICAgICAqL1xuICAgIGdldCBjaGlsZHJlbigpOiBPYmplY3QzRFtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2hpbGRyZW4oKTtcbiAgICB9XG5cbiAgICAvKiogVGhlIG51bWJlciBvZiBjaGlsZHJlbiBvZiB0aGlzIG9iamVjdC4gKi9cbiAgICBnZXQgY2hpbGRyZW5Db3VudCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9nZXRfY2hpbGRyZW5fY291bnQodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlcGFyZW50IG9iamVjdCB0byBnaXZlbiBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAbm90ZSBSZXBhcmVudGluZyBpcyBub3QgdHJpdmlhbCBhbmQgbWlnaHQgaGF2ZSBhIG5vdGljZWFibGUgcGVyZm9ybWFuY2UgaW1wYWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIG5ld1BhcmVudCBOZXcgcGFyZW50IG9yIGBudWxsYCB0byBwYXJlbnQgdG8gcm9vdFxuICAgICAqL1xuICAgIHNldCBwYXJlbnQobmV3UGFyZW50OiBPYmplY3QzRCB8IHVuZGVmaW5lZCB8IG51bGwpIHtcbiAgICAgICAgaWYgKHRoaXMubWFya2VkRGVzdHJveWVkKSB7XG4gICAgICAgICAgICBjb25zdCBzdHJUaGlzID0gdGhpcy50b1N0cmluZygpO1xuICAgICAgICAgICAgY29uc3Qgc3RyUGFyZW50ID0gbmV3UGFyZW50ID8gbmV3UGFyZW50IDogJ3Jvb3QnO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgIGBGYWlsZWQgdG8gYXR0YWNoICR7c3RyVGhpc30gdG8gJHtzdHJQYXJlbnR9LiAke3N0clRoaXN9IGlzIG1hcmtlZCBhcyBkZXN0cm95ZWQuYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChuZXdQYXJlbnQ/Lm1hcmtlZERlc3Ryb3llZCkge1xuICAgICAgICAgICAgY29uc3Qgc3RyUGFyZW50ID0gbmV3UGFyZW50LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgYEZhaWxlZCB0byBhdHRhY2ggJHt0aGlzfSB0byAke3N0clBhcmVudH0uICR7c3RyUGFyZW50fSBpcyBtYXJrZWQgYXMgZGVzdHJveWVkLmBcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zY2VuZS5hc3NlcnRPcmlnaW4obmV3UGFyZW50KTtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9zZXRfcGFyZW50KFxuICAgICAgICAgICAgdGhpcy5faWQsXG4gICAgICAgICAgICBuZXdQYXJlbnQgPT0gbnVsbCA/IDAgOiBuZXdQYXJlbnQuX2lkXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqIExvY2FsIG9iamVjdCBpZCBpbiB0aGUgc2NlbmUgbWFuYWdlci4gKi9cbiAgICBnZXQgb2JqZWN0SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sb2NhbElkO1xuICAgIH1cblxuICAgIC8qKiBTY2VuZSBpbnN0YW5jZS4gKi9cbiAgICBnZXQgc2NlbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zY2VuZTtcbiAgICB9XG5cbiAgICAvKiogSG9zdGluZyBlbmdpbmUgaW5zdGFuY2UuICovXG4gICAgZ2V0IGVuZ2luZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYW4gb2JqZWN0IGFzIGEgY2hpbGQgb2YgdGhpcyBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgbmV3bHkgY3JlYXRlZCBvYmplY3QuXG4gICAgICovXG4gICAgYWRkQ2hpbGQoKTogT2JqZWN0M0Qge1xuICAgICAgICBjb25zdCBvYmplY3RJZCA9IHRoaXMuZW5naW5lLndhc20uX3dsX3NjZW5lX2FkZF9vYmplY3QodGhpcy5zY2VuZS5faW5kZXgsIHRoaXMuX2lkKTtcbiAgICAgICAgY29uc3Qgb2JqID0gdGhpcy5zY2VuZS53cmFwKG9iamVjdElkKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDbG9uZSB0aGlzIGhpZXJhcmNoeSBpbnRvIGEgbmV3IG9uZS5cbiAgICAgKlxuICAgICAqIENsb25pbmcgY29waWVzIHRoZSBoaWVyYXJjaHkgc3RydWN0dXJlLCBvYmplY3QgbmFtZXMsXG4gICAgICogYXMgd2VsbCBhcyBjb21wb25lbnRzLlxuICAgICAqXG4gICAgICogSmF2YVNjcmlwdCBjb21wb25lbnRzIGFyZSBjbG9uZWQgdXNpbmcge0BsaW5rIENvbXBvbmVudC5jb3B5fS4gWW91IGNhblxuICAgICAqIG92ZXJyaWRlIHRoaXMgbWV0aG9kIGluIHlvdXIgY29tcG9uZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXJlbnQgVGhlIHBhcmVudCBmb3IgdGhlIGNsb25lZCBoaWVyYXJjaHkgb3IgYG51bGxgIHRvIGNsb25lXG4gICAgICogICAgIGludG8gdGhlIHNjZW5lIHJvb3QuIERlZmF1bHRzIHRvIGBudWxsYC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBjbG9uZSBvZiB0aGlzIG9iamVjdC5cbiAgICAgKi9cbiAgICBjbG9uZShwYXJlbnQ6IE9iamVjdDNEIHwgbnVsbCA9IG51bGwpOiBPYmplY3QzRCB7XG4gICAgICAgIHRoaXMuc2NlbmUuYXNzZXJ0T3JpZ2luKHBhcmVudCk7XG4gICAgICAgIGNvbnN0IGVuZ2luZSA9IHRoaXMuX2VuZ2luZTtcbiAgICAgICAgY29uc3QgaWQgPSBlbmdpbmUud2FzbS5fd2xfb2JqZWN0X2Nsb25lKHRoaXMuX2lkLCBwYXJlbnQgPyBwYXJlbnQuX2lkIDogMCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zY2VuZS53cmFwKGlkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGlsZHJlbiBvZiB0aGlzIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBub3RlIENoaWxkIG9yZGVyIGlzICoqdW5kZWZpbmVkKiouIE5vIGFzc3VtcHRpb25zIHNob3VsZCBiZSBtYWRlXG4gICAgICogYWJvdXQgdGhlIGluZGV4IG9mIGEgc3BlY2lmaWMgb2JqZWN0LlxuICAgICAqXG4gICAgICogSWYgeW91IG5lZWQgdG8gYWNjZXNzIGEgc3BlY2lmaWMgY2hpbGQgb2YgdGhpcyBvYmplY3QsIHlvdSBjYW5cbiAgICAgKiB1c2Uge0BsaW5rIE9iamVjdDNELmZpbmRCeU5hbWV9LlxuICAgICAqXG4gICAgICogV2hlbiB0aGUgb2JqZWN0IGV4aXN0cyBpbiB0aGUgc2NlbmUgYXQgZWRpdG9yIHRpbWUsIHByZWZlciBwYXNzaW5nIGl0IGFzXG4gICAgICogYSBjb21wb25lbnQgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAbm90ZSBXaGVuIHByb3ZpZGluZyBhbiBvdXRwdXQgYXJyYXksIG9ubHkgYHRoaXMuY2hpbGRyZW5Db3VudGAgZWxlbWVudHMgd2lsbCBiZSB3cml0dGVuLlxuICAgICAqIFRoZSByZXN0IG9mIHRoZSBhcnJheSB3aWxsIG5vdCBiZSBtb2RpZmllZCBieSB0aGlzIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgRGVzdGluYXRpb24gYXJyYXksIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgYHRoaXMuY2hpbGRyZW5Db3VudGAgZWxlbWVudHMuXG4gICAgICogQHJldHVybnMgVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBnZXRDaGlsZHJlbihvdXQ6IE9iamVjdDNEW10gPSBuZXcgQXJyYXkodGhpcy5jaGlsZHJlbkNvdW50KSk6IE9iamVjdDNEW10ge1xuICAgICAgICBjb25zdCBjaGlsZHJlbkNvdW50ID0gdGhpcy5jaGlsZHJlbkNvdW50O1xuICAgICAgICBpZiAoY2hpbGRyZW5Db3VudCA9PT0gMCkgcmV0dXJuIG91dDtcblxuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHdhc20ucmVxdWlyZVRlbXBNZW0oY2hpbGRyZW5Db3VudCAqIDIpO1xuXG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfZ2V0X2NoaWxkcmVuKFxuICAgICAgICAgICAgdGhpcy5faWQsXG4gICAgICAgICAgICB3YXNtLl90ZW1wTWVtLFxuICAgICAgICAgICAgd2FzbS5fdGVtcE1lbVNpemUgPj4gMVxuICAgICAgICApO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW5Db3VudDsgKytpKSB7XG4gICAgICAgICAgICBvdXRbaV0gPSB0aGlzLl9zY2VuZS53cmFwKHdhc20uX3RlbXBNZW1VaW50MTZbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzZXQgbG9jYWwgdHJhbnNmb3JtYXRpb24gKHRyYW5zbGF0aW9uLCByb3RhdGlvbiBhbmQgc2NhbGluZykgdG8gaWRlbnRpdHkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgcmVzZXRUcmFuc2Zvcm0oKTogdGhpcyB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfcmVzZXRfdHJhbnNsYXRpb25fcm90YXRpb24odGhpcy5faWQpO1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3Jlc2V0X3NjYWxpbmcodGhpcy5faWQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNldCBsb2NhbCBwb3NpdGlvbiBhbmQgcm90YXRpb24gdG8gaWRlbnRpdHkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgcmVzZXRQb3NpdGlvblJvdGF0aW9uKCk6IHRoaXMge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3Jlc2V0X3RyYW5zbGF0aW9uX3JvdGF0aW9uKHRoaXMuX2lkKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnJlc2V0UG9zaXRpb25Sb3RhdGlvbn0gaW5zdGVhZC4gKi9cbiAgICByZXNldFRyYW5zbGF0aW9uUm90YXRpb24oKTogdGhpcyB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc2V0UG9zaXRpb25Sb3RhdGlvbigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlc2V0IGxvY2FsIHJvdGF0aW9uLCBrZWVwIHRyYW5zbGF0aW9uLlxuICAgICAqXG4gICAgICogQG5vdGUgVG8gcmVzZXQgYm90aCByb3RhdGlvbiBhbmQgdHJhbnNsYXRpb24sIHByZWZlclxuICAgICAqICAgICAgIHtAbGluayByZXNldFRyYW5zbGF0aW9uUm90YXRpb259LlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHJlc2V0Um90YXRpb24oKTogdGhpcyB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfcmVzZXRfcm90YXRpb24odGhpcy5faWQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNldCBsb2NhbCB0cmFuc2xhdGlvbiwga2VlcCByb3RhdGlvbi5cbiAgICAgKlxuICAgICAqIEBub3RlIFRvIHJlc2V0IGJvdGggcm90YXRpb24gYW5kIHRyYW5zbGF0aW9uLCBwcmVmZXJcbiAgICAgKiAgICAgICB7QGxpbmsgcmVzZXRUcmFuc2xhdGlvblJvdGF0aW9ufS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICByZXNldFBvc2l0aW9uKCk6IHRoaXMge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3Jlc2V0X3RyYW5zbGF0aW9uKHRoaXMuX2lkKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnJlc2V0UG9zaXRpb259IGluc3RlYWQuICovXG4gICAgcmVzZXRUcmFuc2xhdGlvbigpOiB0aGlzIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzZXRQb3NpdGlvbigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlc2V0IGxvY2FsIHNjYWxpbmcgdG8gaWRlbnRpdHkgKGBgWzEuMCwgMS4wLCAxLjBdYGApLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHJlc2V0U2NhbGluZygpOiB0aGlzIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9yZXNldF9zY2FsaW5nKHRoaXMuX2lkKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnRyYW5zbGF0ZUxvY2FsfSBpbnN0ZWFkLiAqL1xuICAgIHRyYW5zbGF0ZSh2OiBSZWFkb25seTxOdW1iZXJBcnJheT4pOiB0aGlzIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNsYXRlTG9jYWwodik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJhbnNsYXRlIG9iamVjdCBieSBhIHZlY3RvciBpbiB0aGUgcGFyZW50J3Mgc3BhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBWZWN0b3IgdG8gdHJhbnNsYXRlIGJ5LlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHRyYW5zbGF0ZUxvY2FsKHY6IFJlYWRvbmx5PE51bWJlckFycmF5Pik6IHRoaXMge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3RyYW5zbGF0ZSh0aGlzLl9pZCwgdlswXSwgdlsxXSwgdlsyXSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyYW5zbGF0ZSBvYmplY3QgYnkgYSB2ZWN0b3IgaW4gb2JqZWN0IHNwYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHYgVmVjdG9yIHRvIHRyYW5zbGF0ZSBieS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICB0cmFuc2xhdGVPYmplY3QodjogUmVhZG9ubHk8TnVtYmVyQXJyYXk+KTogdGhpcyB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfdHJhbnNsYXRlX29iaih0aGlzLl9pZCwgdlswXSwgdlsxXSwgdlsyXSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyYW5zbGF0ZSBvYmplY3QgYnkgYSB2ZWN0b3IgaW4gd29ybGQgc3BhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBWZWN0b3IgdG8gdHJhbnNsYXRlIGJ5LlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHRyYW5zbGF0ZVdvcmxkKHY6IFJlYWRvbmx5PE51bWJlckFycmF5Pik6IHRoaXMge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3RyYW5zbGF0ZV93b3JsZCh0aGlzLl9pZCwgdlswXSwgdlsxXSwgdlsyXSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5yb3RhdGVBeGlzQW5nbGVEZWdMb2NhbH0gaW5zdGVhZC4gKi9cbiAgICByb3RhdGVBeGlzQW5nbGVEZWcoYTogUmVhZG9ubHk8TnVtYmVyQXJyYXk+LCBkOiBudW1iZXIpOiB0aGlzIHtcbiAgICAgICAgdGhpcy5yb3RhdGVBeGlzQW5nbGVEZWdMb2NhbChhLCBkKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUm90YXRlIGFyb3VuZCBnaXZlbiBheGlzIGJ5IGdpdmVuIGFuZ2xlIChkZWdyZWVzKSBpbiBsb2NhbCBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhIFZlY3RvciByZXByZXNlbnRpbmcgdGhlIHJvdGF0aW9uIGF4aXMuXG4gICAgICogQHBhcmFtIGQgQW5nbGUgaW4gZGVncmVlcy5cbiAgICAgKlxuICAgICAqIEBub3RlIElmIHRoZSBvYmplY3QgaXMgdHJhbnNsYXRlZCB0aGUgcm90YXRpb24gd2lsbCBiZSBhcm91bmRcbiAgICAgKiAgICAgdGhlIHBhcmVudC4gVG8gcm90YXRlIGFyb3VuZCB0aGUgb2JqZWN0IG9yaWdpbiwgdXNlXG4gICAgICogICAgIHtAbGluayByb3RhdGVBeGlzQW5nbGVEZWdPYmplY3R9XG4gICAgICpcbiAgICAgKiBAc2VlIHtAbGluayByb3RhdGVBeGlzQW5nbGVSYWR9XG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgcm90YXRlQXhpc0FuZ2xlRGVnTG9jYWwoYTogUmVhZG9ubHk8TnVtYmVyQXJyYXk+LCBkOiBudW1iZXIpOiB0aGlzIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9yb3RhdGVfYXhpc19hbmdsZSh0aGlzLl9pZCwgYVswXSwgYVsxXSwgYVsyXSwgZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5yb3RhdGVBeGlzQW5nbGVSYWRMb2NhbH0gaW5zdGVhZC4gKi9cbiAgICByb3RhdGVBeGlzQW5nbGVSYWQoYTogUmVhZG9ubHk8TnVtYmVyQXJyYXk+LCBkOiBudW1iZXIpOiB0aGlzIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm90YXRlQXhpc0FuZ2xlUmFkTG9jYWwoYSwgZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUm90YXRlIGFyb3VuZCBnaXZlbiBheGlzIGJ5IGdpdmVuIGFuZ2xlIChyYWRpYW5zKSBpbiBsb2NhbCBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhIFZlY3RvciByZXByZXNlbnRpbmcgdGhlIHJvdGF0aW9uIGF4aXMuXG4gICAgICogQHBhcmFtIGQgQW5nbGUgaW4gcmFkaWFucy5cbiAgICAgKlxuICAgICAqIEBub3RlIElmIHRoZSBvYmplY3QgaXMgdHJhbnNsYXRlZCB0aGUgcm90YXRpb24gd2lsbCBiZSBhcm91bmRcbiAgICAgKiAgICAgdGhlIHBhcmVudC4gVG8gcm90YXRlIGFyb3VuZCB0aGUgb2JqZWN0IG9yaWdpbiwgdXNlXG4gICAgICogICAgIHtAbGluayByb3RhdGVBeGlzQW5nbGVEZWdPYmplY3R9XG4gICAgICpcbiAgICAgKiBAc2VlIHtAbGluayByb3RhdGVBeGlzQW5nbGVEZWd9XG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgcm90YXRlQXhpc0FuZ2xlUmFkTG9jYWwoYTogUmVhZG9ubHk8TnVtYmVyQXJyYXk+LCBkOiBudW1iZXIpOiB0aGlzIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9yb3RhdGVfYXhpc19hbmdsZV9yYWQodGhpcy5faWQsIGFbMF0sIGFbMV0sIGFbMl0sIGQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSb3RhdGUgYXJvdW5kIGdpdmVuIGF4aXMgYnkgZ2l2ZW4gYW5nbGUgKGRlZ3JlZXMpIGluIG9iamVjdCBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhIFZlY3RvciByZXByZXNlbnRpbmcgdGhlIHJvdGF0aW9uIGF4aXMuXG4gICAgICogQHBhcmFtIGQgQW5nbGUgaW4gZGVncmVlcy5cbiAgICAgKlxuICAgICAqIEVxdWl2YWxlbnQgdG8gcHJlcGVuZGluZyBhIHJvdGF0aW9uIHF1YXRlcm5pb24gdG8gdGhlIG9iamVjdCdzXG4gICAgICogbG9jYWwgdHJhbnNmb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBAc2VlIHtAbGluayByb3RhdGVBeGlzQW5nbGVSYWRPYmplY3R9XG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgcm90YXRlQXhpc0FuZ2xlRGVnT2JqZWN0KGE6IFJlYWRvbmx5PE51bWJlckFycmF5PiwgZDogbnVtYmVyKTogdGhpcyB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3Rfcm90YXRlX2F4aXNfYW5nbGVfb2JqKHRoaXMuX2lkLCBhWzBdLCBhWzFdLCBhWzJdLCBkKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUm90YXRlIGFyb3VuZCBnaXZlbiBheGlzIGJ5IGdpdmVuIGFuZ2xlIChyYWRpYW5zKSBpbiBvYmplY3Qgc3BhY2VcbiAgICAgKiBFcXVpdmFsZW50IHRvIHByZXBlbmRpbmcgYSByb3RhdGlvbiBxdWF0ZXJuaW9uIHRvIHRoZSBvYmplY3Qnc1xuICAgICAqIGxvY2FsIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGEgVmVjdG9yIHJlcHJlc2VudGluZyB0aGUgcm90YXRpb24gYXhpc1xuICAgICAqIEBwYXJhbSBkIEFuZ2xlIGluIGRlZ3JlZXNcbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIHJvdGF0ZUF4aXNBbmdsZURlZ09iamVjdH1cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICByb3RhdGVBeGlzQW5nbGVSYWRPYmplY3QoYTogUmVhZG9ubHk8TnVtYmVyQXJyYXk+LCBkOiBudW1iZXIpOiB0aGlzIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9yb3RhdGVfYXhpc19hbmdsZV9yYWRfb2JqKFxuICAgICAgICAgICAgdGhpcy5faWQsXG4gICAgICAgICAgICBhWzBdLFxuICAgICAgICAgICAgYVsxXSxcbiAgICAgICAgICAgIGFbMl0sXG4gICAgICAgICAgICBkXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5yb3RhdGVMb2NhbH0gaW5zdGVhZC4gKi9cbiAgICByb3RhdGUocTogUmVhZG9ubHk8TnVtYmVyQXJyYXk+KTogdGhpcyB7XG4gICAgICAgIHRoaXMucm90YXRlTG9jYWwocSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJvdGF0ZSBieSBhIHF1YXRlcm5pb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcSB0aGUgUXVhdGVybmlvbiB0byByb3RhdGUgYnkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgcm90YXRlTG9jYWwocTogUmVhZG9ubHk8TnVtYmVyQXJyYXk+KTogdGhpcyB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3Rfcm90YXRlX3F1YXQodGhpcy5faWQsIHFbMF0sIHFbMV0sIHFbMl0sIHFbM10pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSb3RhdGUgYnkgYSBxdWF0ZXJuaW9uIGluIG9iamVjdCBzcGFjZS5cbiAgICAgKlxuICAgICAqIEVxdWl2YWxlbnQgdG8gcHJlcGVuZGluZyBhIHJvdGF0aW9uIHF1YXRlcm5pb24gdG8gdGhlIG9iamVjdCdzXG4gICAgICogbG9jYWwgdHJhbnNmb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcSB0aGUgUXVhdGVybmlvbiB0byByb3RhdGUgYnkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgcm90YXRlT2JqZWN0KHE6IFJlYWRvbmx5PE51bWJlckFycmF5Pik6IHRoaXMge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3JvdGF0ZV9xdWF0X29iaih0aGlzLl9pZCwgcVswXSwgcVsxXSwgcVsyXSwgcVszXSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5zY2FsZUxvY2FsfSBpbnN0ZWFkLiAqL1xuICAgIHNjYWxlKHY6IFJlYWRvbmx5PE51bWJlckFycmF5Pik6IHRoaXMge1xuICAgICAgICB0aGlzLnNjYWxlTG9jYWwodik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNjYWxlIG9iamVjdCBieSBhIHZlY3RvciBpbiBvYmplY3Qgc3BhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBWZWN0b3IgdG8gc2NhbGUgYnkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgc2NhbGVMb2NhbCh2OiBSZWFkb25seTxOdW1iZXJBcnJheT4pOiB0aGlzIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9zY2FsZSh0aGlzLl9pZCwgdlswXSwgdlsxXSwgdlsyXSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRQb3NpdGlvbkxvY2FsKCk6IEZsb2F0MzJBcnJheTtcbiAgICAvKipcbiAgICAgKiBDb21wdXRlIGxvY2FsIC8gb2JqZWN0IHNwYWNlIHBvc2l0aW9uIGZyb20gdHJhbnNmb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IERlc3RpbmF0aW9uIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCAzIGVsZW1lbnRzLlxuICAgICAqIEByZXR1cm5zIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICovXG4gICAgZ2V0UG9zaXRpb25Mb2NhbDxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCk6IFQ7XG4gICAgZ2V0UG9zaXRpb25Mb2NhbChvdXQ6IE51bWJlckFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSgzKSk6IE51bWJlckFycmF5IHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICAvKiBUcmFuc2xhdGlvbiBpcyBkaWZmZXJlbnQgdGhhbiByb3RhdGlvbiAmIHNjYWxpbmcuXG4gICAgICAgICAqIFdlIGNhbid0IHNpbXBseSByZWFkIHRoZSBtZW1vcnkuICovXG4gICAgICAgIHdhc20uX3dsX29iamVjdF9nZXRfdHJhbnNsYXRpb25fbG9jYWwodGhpcy5faWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBvdXRbMF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzJdO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRUcmFuc2xhdGlvbkxvY2FsKCk6IEZsb2F0MzJBcnJheTtcbiAgICAvKiogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0QuZ2V0UG9zaXRpb25Mb2NhbH0gaW5zdGVhZC4gKi9cbiAgICBnZXRUcmFuc2xhdGlvbkxvY2FsPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBUKTogVDtcbiAgICBnZXRUcmFuc2xhdGlvbkxvY2FsKG91dDogTnVtYmVyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KDMpKTogTnVtYmVyQXJyYXkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRQb3NpdGlvbkxvY2FsKG91dCk7XG4gICAgfVxuXG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldFBvc2l0aW9uV29ybGQoKTogRmxvYXQzMkFycmF5O1xuICAgIC8qKlxuICAgICAqIENvbXB1dGUgd29ybGQgc3BhY2UgcG9zaXRpb24gZnJvbSB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIE1heSByZWNvbXB1dGUgdHJhbnNmb3JtYXRpb25zIG9mIHRoZSBoaWVyYXJjaHkgb2YgdGhpcyBvYmplY3QsXG4gICAgICogaWYgdGhleSB3ZXJlIGNoYW5nZWQgYnkgSmF2YVNjcmlwdCBjb21wb25lbnRzIHRoaXMgZnJhbWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IERlc3RpbmF0aW9uIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCAzIGVsZW1lbnRzLlxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBnZXRQb3NpdGlvbldvcmxkPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBUKTogVDtcbiAgICBnZXRQb3NpdGlvbldvcmxkKG91dDogTnVtYmVyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KDMpKTogTnVtYmVyQXJyYXkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIC8qIFRyYW5zbGF0aW9uIGlzIGRpZmZlcmVudCB0aGFuIHJvdGF0aW9uICYgc2NhbGluZy5cbiAgICAgICAgICogV2UgY2FuJ3Qgc2ltcGx5IHJlYWQgdGhlIG1lbW9yeS4gKi9cbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X2dldF90cmFuc2xhdGlvbl93b3JsZCh0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuXG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldFRyYW5zbGF0aW9uV29ybGQoKTogRmxvYXQzMkFycmF5O1xuICAgIC8qKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5nZXRQb3NpdGlvbldvcmxkfSBpbnN0ZWFkLiAqL1xuICAgIGdldFRyYW5zbGF0aW9uV29ybGQ8VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQpOiBUO1xuICAgIGdldFRyYW5zbGF0aW9uV29ybGQob3V0OiBOdW1iZXJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoMykpOiBOdW1iZXJBcnJheSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFBvc2l0aW9uV29ybGQob3V0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgbG9jYWwgLyBvYmplY3Qgc3BhY2UgcG9zaXRpb24uXG4gICAgICpcbiAgICAgKiBDb25jYXRlbmF0ZXMgYSBuZXcgdHJhbnNsYXRpb24gZHVhbCBxdWF0ZXJuaW9uIG9udG8gdGhlIGV4aXN0aW5nIHJvdGF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHYgTmV3IGxvY2FsIHBvc2l0aW9uIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCAzIGVsZW1lbnRzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHNldFBvc2l0aW9uTG9jYWwodjogUmVhZG9ubHk8TnVtYmVyQXJyYXk+KTogdGhpcyB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3Rfc2V0X3RyYW5zbGF0aW9uX2xvY2FsKHRoaXMuX2lkLCB2WzBdLCB2WzFdLCB2WzJdKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnNldFBvc2l0aW9uTG9jYWx9IGluc3RlYWQuICovXG4gICAgc2V0VHJhbnNsYXRpb25Mb2NhbCh2OiBSZWFkb25seTxOdW1iZXJBcnJheT4pOiB0aGlzIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0UG9zaXRpb25Mb2NhbCh2KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgd29ybGQgc3BhY2UgcG9zaXRpb24uXG4gICAgICpcbiAgICAgKiBBcHBsaWVzIHRoZSBpbnZlcnNlIHBhcmVudCB0cmFuc2Zvcm0gd2l0aCBhIG5ldyB0cmFuc2xhdGlvbiBkdWFsIHF1YXRlcm5pb25cbiAgICAgKiB3aGljaCBpcyBjb25jYXRlbmF0ZWQgb250byB0aGUgZXhpc3Rpbmcgcm90YXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBOZXcgd29ybGQgcG9zaXRpb24gYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDMgZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgc2V0UG9zaXRpb25Xb3JsZCh2OiBSZWFkb25seTxOdW1iZXJBcnJheT4pOiB0aGlzIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9zZXRfdHJhbnNsYXRpb25fd29ybGQodGhpcy5faWQsIHZbMF0sIHZbMV0sIHZbMl0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKiogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0Quc2V0UG9zaXRpb25Xb3JsZH0gaW5zdGVhZC4gKi9cbiAgICBzZXRUcmFuc2xhdGlvbldvcmxkKHY6IFJlYWRvbmx5PE51bWJlckFycmF5Pik6IHRoaXMge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRQb3NpdGlvbldvcmxkKHYpO1xuICAgIH1cblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRTY2FsaW5nTG9jYWwoKTogRmxvYXQzMkFycmF5O1xuICAgIC8qKlxuICAgICAqIExvY2FsIC8gb2JqZWN0IHNwYWNlIHNjYWxpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IERlc3RpbmF0aW9uIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCAzIGVsZW1lbnRzLlxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIGdldFNjYWxpbmdMb2NhbDxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCk6IFQ7XG4gICAgZ2V0U2NhbGluZ0xvY2FsKG91dDogTnVtYmVyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KDMpKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfb2JqZWN0X3NjYWxpbmdfbG9jYWwodGhpcy5faWQpIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIG91dFswXSA9IHdhc20uSEVBUEYzMltwdHJdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uSEVBUEYzMltwdHIgKyAyXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgbG9jYWwgLyBvYmplY3Qgc3BhY2Ugc2NhbGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2IE5ldyBsb2NhbCBzY2FsaW5nIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCAzIGVsZW1lbnRzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHNldFNjYWxpbmdMb2NhbCh2OiBSZWFkb25seTxOdW1iZXJBcnJheT4pOiB0aGlzIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9zZXRfc2NhbGluZ19sb2NhbCh0aGlzLl9pZCwgdlswXSwgdlsxXSwgdlsyXSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRTY2FsaW5nV29ybGQoKTogRmxvYXQzMkFycmF5O1xuICAgIC8qKlxuICAgICAqIFdvcmxkIHNwYWNlIHNjYWxpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IERlc3RpbmF0aW9uIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCAzIGVsZW1lbnRzLlxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjAuMFxuICAgICAqL1xuICAgIGdldFNjYWxpbmdXb3JsZDxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCk6IFQ7XG4gICAgZ2V0U2NhbGluZ1dvcmxkKG91dDogTnVtYmVyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KDMpKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfb2JqZWN0X3NjYWxpbmdfd29ybGQodGhpcy5faWQpIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIG91dFswXSA9IHdhc20uSEVBUEYzMltwdHJdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uSEVBUEYzMltwdHIgKyAyXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgV29ybGQgc3BhY2Ugc2NhbGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2IE5ldyB3b3JsZCBzY2FsaW5nIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCAzIGVsZW1lbnRzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHNldFNjYWxpbmdXb3JsZCh2OiBSZWFkb25seTxOdW1iZXJBcnJheT4pOiB0aGlzIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9zZXRfc2NhbGluZ193b3JsZCh0aGlzLl9pZCwgdlswXSwgdlsxXSwgdlsyXSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRSb3RhdGlvbkxvY2FsKCk6IEZsb2F0MzJBcnJheTtcbiAgICAvKipcbiAgICAgKiBMb2NhbCBzcGFjZSByb3RhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgRGVzdGluYXRpb24gYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDQgZWxlbWVudHMuXG4gICAgICogQHJldHVybiBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMC4wXG4gICAgICovXG4gICAgZ2V0Um90YXRpb25Mb2NhbDxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCk6IFQ7XG4gICAgZ2V0Um90YXRpb25Mb2NhbChvdXQ6IE51bWJlckFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSg0KSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX29iamVjdF90cmFuc19sb2NhbCh0aGlzLl9pZCkgLyA0OyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgLyogVGhlIGZpcnN0IDQgZmxvYXRzIHJlcHJlc2VudCB0aGUgcm90YXRpb24gcXVhdGVybmlvbi4gKi9cbiAgICAgICAgb3V0WzBdID0gd2FzbS5IRUFQRjMyW3B0cl07XG4gICAgICAgIG91dFsxXSA9IHdhc20uSEVBUEYzMltwdHIgKyAxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5IRUFQRjMyW3B0ciArIDJdO1xuICAgICAgICBvdXRbM10gPSB3YXNtLkhFQVBGMzJbcHRyICsgM107XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGxvY2FsIHNwYWNlIHJvdGF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHYgTmV3IHdvcmxkIHJvdGF0aW9uIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCA0IGVsZW1lbnRzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHNldFJvdGF0aW9uTG9jYWwodjogUmVhZG9ubHk8TnVtYmVyQXJyYXk+KTogdGhpcyB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3Rfc2V0X3JvdGF0aW9uX2xvY2FsKHRoaXMuX2lkLCB2WzBdLCB2WzFdLCB2WzJdLCB2WzNdKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldFJvdGF0aW9uV29ybGQoKTogRmxvYXQzMkFycmF5O1xuICAgIC8qKlxuICAgICAqIFdvcmxkIHNwYWNlIHJvdGF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBEZXN0aW5hdGlvbiBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgNCBlbGVtZW50cy5cbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICBnZXRSb3RhdGlvbldvcmxkPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBUKTogVDtcbiAgICBnZXRSb3RhdGlvbldvcmxkKG91dDogTnVtYmVyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KDQpKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfb2JqZWN0X3RyYW5zX3dvcmxkKHRoaXMuX2lkKSAvIDQ7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICAvKiBUaGUgZmlyc3QgNCBmbG9hdHMgcmVwcmVzZW50IHRoZSByb3RhdGlvbiBxdWF0ZXJuaW9uLiAqL1xuICAgICAgICBvdXRbMF0gPSB3YXNtLkhFQVBGMzJbcHRyXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5IRUFQRjMyW3B0ciArIDFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMl07XG4gICAgICAgIG91dFszXSA9IHdhc20uSEVBUEYzMltwdHIgKyAzXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgbG9jYWwgc3BhY2Ugcm90YXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdiBOZXcgd29ybGQgcm90YXRpb24gYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDQgZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgc2V0Um90YXRpb25Xb3JsZCh2OiBSZWFkb25seTxOdW1iZXJBcnJheT4pOiB0aGlzIHtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9zZXRfcm90YXRpb25fd29ybGQodGhpcy5faWQsIHZbMF0sIHZbMV0sIHZbMl0sIHZbM10pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0VHJhbnNmb3JtTG9jYWwoKTogRmxvYXQzMkFycmF5O1xuICAgIC8qKlxuICAgICAqIExvY2FsIHNwYWNlIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBEZXN0aW5hdGlvbiBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgOCBlbGVtZW50cy5cbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICovXG4gICAgZ2V0VHJhbnNmb3JtTG9jYWw8VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQpOiBUO1xuICAgIGdldFRyYW5zZm9ybUxvY2FsKG91dDogTnVtYmVyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KDgpKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgcHRyID0gd2FzbS5fd2xfb2JqZWN0X3RyYW5zX2xvY2FsKHRoaXMuX2lkKSAvIDQ7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICBvdXRbMF0gPSB3YXNtLkhFQVBGMzJbcHRyXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5IRUFQRjMyW3B0ciArIDFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMl07XG4gICAgICAgIG91dFszXSA9IHdhc20uSEVBUEYzMltwdHIgKyAzXTtcbiAgICAgICAgb3V0WzRdID0gd2FzbS5IRUFQRjMyW3B0ciArIDRdO1xuICAgICAgICBvdXRbNV0gPSB3YXNtLkhFQVBGMzJbcHRyICsgNV07XG4gICAgICAgIG91dFs2XSA9IHdhc20uSEVBUEYzMltwdHIgKyA2XTtcbiAgICAgICAgb3V0WzddID0gd2FzbS5IRUFQRjMyW3B0ciArIDddO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBsb2NhbCBzcGFjZSByb3RhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2IE5ldyBsb2NhbCB0cmFuc2Zvcm0gYXJyYXksIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgOCBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICBzZXRUcmFuc2Zvcm1Mb2NhbCh2OiBSZWFkb25seTxOdW1iZXJBcnJheT4pOiB0aGlzIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9vYmplY3RfdHJhbnNfbG9jYWwodGhpcy5faWQpIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIHdhc20uSEVBUEYzMltwdHJdID0gdlswXTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDFdID0gdlsxXTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDJdID0gdlsyXTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDNdID0gdlszXTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDRdID0gdls0XTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDVdID0gdls1XTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDZdID0gdls2XTtcbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0ciArIDddID0gdls3XTtcbiAgICAgICAgdGhpcy5zZXREaXJ0eSgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0VHJhbnNmb3JtV29ybGQoKTogRmxvYXQzMkFycmF5O1xuICAgIC8qKlxuICAgICAqIFdvcmxkIHNwYWNlIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBEZXN0aW5hdGlvbiBhcnJheSwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCA4IGVsZW1lbnRzLlxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBnZXRUcmFuc2Zvcm1Xb3JsZDxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCk6IFQ7XG4gICAgZ2V0VHJhbnNmb3JtV29ybGQob3V0OiBOdW1iZXJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoOCkpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9vYmplY3RfdHJhbnNfd29ybGQodGhpcy5faWQpIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIG91dFswXSA9IHdhc20uSEVBUEYzMltwdHJdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLkhFQVBGMzJbcHRyICsgMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uSEVBUEYzMltwdHIgKyAyXTtcbiAgICAgICAgb3V0WzNdID0gd2FzbS5IRUFQRjMyW3B0ciArIDNdO1xuICAgICAgICBvdXRbNF0gPSB3YXNtLkhFQVBGMzJbcHRyICsgNF07XG4gICAgICAgIG91dFs1XSA9IHdhc20uSEVBUEYzMltwdHIgKyA1XTtcbiAgICAgICAgb3V0WzZdID0gd2FzbS5IRUFQRjMyW3B0ciArIDZdO1xuICAgICAgICBvdXRbN10gPSB3YXNtLkhFQVBGMzJbcHRyICsgN107XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHdvcmxkIHNwYWNlIHJvdGF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHYgTmV3IHdvcmxkIHRyYW5zZm9ybSBhcnJheSwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCA4IGVsZW1lbnRzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIHNldFRyYW5zZm9ybVdvcmxkKHY6IFJlYWRvbmx5PE51bWJlckFycmF5Pik6IHRoaXMge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX29iamVjdF90cmFuc193b3JsZCh0aGlzLl9pZCkgLyA0OyAvKiBBbGlnbiBGMzIgKi9cbiAgICAgICAgd2FzbS5IRUFQRjMyW3B0cl0gPSB2WzBdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgMV0gPSB2WzFdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgMl0gPSB2WzJdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgM10gPSB2WzNdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgNF0gPSB2WzRdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgNV0gPSB2WzVdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgNl0gPSB2WzZdO1xuICAgICAgICB3YXNtLkhFQVBGMzJbcHRyICsgN10gPSB2WzddO1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3RyYW5zX3dvcmxkX3RvX2xvY2FsKHRoaXMuX2lkKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9jYWwgc3BhY2UgdHJhbnNmb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5zZXRUcmFuc2Zvcm1Mb2NhbH0gYW5kXG4gICAgICoge0BsaW5rIE9iamVjdDNELmdldFRyYW5zZm9ybUxvY2FsfSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIGdldCB0cmFuc2Zvcm1Mb2NhbCgpOiBGbG9hdDMyQXJyYXkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KFxuICAgICAgICAgICAgd2FzbS5IRUFQRjMyLmJ1ZmZlcixcbiAgICAgICAgICAgIHdhc20uX3dsX29iamVjdF90cmFuc19sb2NhbCh0aGlzLl9pZCksXG4gICAgICAgICAgICA4XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGxvY2FsIHRyYW5zZm9ybS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0IExvY2FsIHNwYWNlIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC41XG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5zZXRUcmFuc2Zvcm1Mb2NhbH0gYW5kXG4gICAgICoge0BsaW5rIE9iamVjdDNELmdldFRyYW5zZm9ybUxvY2FsfSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIHNldCB0cmFuc2Zvcm1Mb2NhbCh0OiBSZWFkb25seTxOdW1iZXJBcnJheT4pIHtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1Mb2NhbC5zZXQodCk7XG4gICAgICAgIHRoaXMuc2V0RGlydHkoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHbG9iYWwgLyB3b3JsZCBzcGFjZSB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIE1heSByZWNvbXB1dGUgdHJhbnNmb3JtYXRpb25zIG9mIHRoZSBoaWVyYXJjaHkgb2YgdGhpcyBvYmplY3QsXG4gICAgICogaWYgdGhleSB3ZXJlIGNoYW5nZWQgYnkgSmF2YVNjcmlwdCBjb21wb25lbnRzIHRoaXMgZnJhbWUuXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5zZXRUcmFuc2Zvcm1Xb3JsZH0gYW5kXG4gICAgICoge0BsaW5rIE9iamVjdDNELmdldFRyYW5zZm9ybVdvcmxkfSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIGdldCB0cmFuc2Zvcm1Xb3JsZCgpOiBGbG9hdDMyQXJyYXkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KFxuICAgICAgICAgICAgd2FzbS5IRUFQRjMyLmJ1ZmZlcixcbiAgICAgICAgICAgIHdhc20uX3dsX29iamVjdF90cmFuc193b3JsZCh0aGlzLl9pZCksXG4gICAgICAgICAgICA4XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHdvcmxkIHRyYW5zZm9ybS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0IEdsb2JhbCAvIHdvcmxkIHNwYWNlIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC41XG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5zZXRUcmFuc2Zvcm1Xb3JsZH0gYW5kXG4gICAgICoge0BsaW5rIE9iamVjdDNELmdldFRyYW5zZm9ybVdvcmxkfSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIHNldCB0cmFuc2Zvcm1Xb3JsZCh0OiBSZWFkb25seTxOdW1iZXJBcnJheT4pIHtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1Xb3JsZC5zZXQodCk7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfdHJhbnNfd29ybGRfdG9fbG9jYWwodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvY2FsIC8gb2JqZWN0IHNwYWNlIHNjYWxpbmcuXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5zZXRTY2FsaW5nTG9jYWx9IGFuZFxuICAgICAqIHtAbGluayBPYmplY3QzRC5nZXRTY2FsaW5nTG9jYWx9IGluc3RlYWQuXG4gICAgICovXG4gICAgZ2V0IHNjYWxpbmdMb2NhbCgpOiBGbG9hdDMyQXJyYXkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KFxuICAgICAgICAgICAgd2FzbS5IRUFQRjMyLmJ1ZmZlcixcbiAgICAgICAgICAgIHdhc20uX3dsX29iamVjdF9zY2FsaW5nX2xvY2FsKHRoaXMuX2lkKSxcbiAgICAgICAgICAgIDNcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgbG9jYWwgc3BhY2Ugc2NhbGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzIExvY2FsIHNwYWNlIHNjYWxpbmcuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjdcbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnNldFNjYWxpbmdMb2NhbH0gYW5kXG4gICAgICoge0BsaW5rIE9iamVjdDNELmdldFNjYWxpbmdMb2NhbH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBzZXQgc2NhbGluZ0xvY2FsKHM6IFJlYWRvbmx5PE51bWJlckFycmF5Pikge1xuICAgICAgICB0aGlzLnNjYWxpbmdMb2NhbC5zZXQocyk7XG4gICAgICAgIHRoaXMuc2V0RGlydHkoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHbG9iYWwgLyB3b3JsZCBzcGFjZSBzY2FsaW5nLlxuICAgICAqXG4gICAgICogTWF5IHJlY29tcHV0ZSB0cmFuc2Zvcm1hdGlvbnMgb2YgdGhlIGhpZXJhcmNoeSBvZiB0aGlzIG9iamVjdCxcbiAgICAgKiBpZiB0aGV5IHdlcmUgY2hhbmdlZCBieSBKYXZhU2NyaXB0IGNvbXBvbmVudHMgdGhpcyBmcmFtZS5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELnNldFNjYWxpbmdXb3JsZH0gYW5kXG4gICAgICoge0BsaW5rIE9iamVjdDNELmdldFNjYWxpbmdXb3JsZH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBnZXQgc2NhbGluZ1dvcmxkKCk6IEZsb2F0MzJBcnJheSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkoXG4gICAgICAgICAgICB3YXNtLkhFQVBGMzIuYnVmZmVyLFxuICAgICAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3NjYWxpbmdfd29ybGQodGhpcy5faWQpLFxuICAgICAgICAgICAgM1xuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB3b3JsZCBzcGFjZSBzY2FsaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHQgV29ybGQgc3BhY2Ugc2NhbGluZy5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0Quc2V0U2NhbGluZ1dvcmxkfSBhbmRcbiAgICAgKiB7QGxpbmsgT2JqZWN0M0QuZ2V0U2NhbGluZ1dvcmxkfSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIHNldCBzY2FsaW5nV29ybGQoczogUmVhZG9ubHk8TnVtYmVyQXJyYXk+KSB7XG4gICAgICAgIHRoaXMuc2NhbGluZ1dvcmxkLnNldChzKTtcbiAgICAgICAgdGhpcy5fZW5naW5lLndhc20uX3dsX29iamVjdF9zY2FsaW5nX3dvcmxkX3RvX2xvY2FsKHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2NhbCBzcGFjZSByb3RhdGlvbi5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0QuZ2V0Um90YXRpb25Mb2NhbH0gYW5kXG4gICAgICoge0BsaW5rIE9iamVjdDNELnNldFJvdGF0aW9uTG9jYWx9IGluc3RlYWQuXG4gICAgICovXG4gICAgZ2V0IHJvdGF0aW9uTG9jYWwoKTogRmxvYXQzMkFycmF5IHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtTG9jYWwuc3ViYXJyYXkoMCwgNCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2xvYmFsIC8gd29ybGQgc3BhY2Ugcm90YXRpb25cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0QuZ2V0Um90YXRpb25Xb3JsZH0gYW5kXG4gICAgICoge0BsaW5rIE9iamVjdDNELnNldFJvdGF0aW9uV29ybGR9IGluc3RlYWQuXG4gICAgICovXG4gICAgZ2V0IHJvdGF0aW9uV29ybGQoKTogRmxvYXQzMkFycmF5IHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtV29ybGQuc3ViYXJyYXkoMCwgNCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGxvY2FsIHNwYWNlIHJvdGF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHIgTG9jYWwgc3BhY2Ugcm90YXRpb25cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0QuZ2V0Um90YXRpb25Mb2NhbH0gYW5kXG4gICAgICoge0BsaW5rIE9iamVjdDNELnNldFJvdGF0aW9uTG9jYWx9IGluc3RlYWQuXG4gICAgICovXG4gICAgc2V0IHJvdGF0aW9uTG9jYWwocjogUmVhZG9ubHk8TnVtYmVyQXJyYXk+KSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3Rfc2V0X3JvdGF0aW9uX2xvY2FsKHRoaXMuX2lkLCByWzBdLCByWzFdLCByWzJdLCByWzNdKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgd29ybGQgc3BhY2Ugcm90YXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gciBHbG9iYWwgLyB3b3JsZCBzcGFjZSByb3RhdGlvbi5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0QuZ2V0Um90YXRpb25Xb3JsZH0gYW5kXG4gICAgICoge0BsaW5rIE9iamVjdDNELnNldFJvdGF0aW9uV29ybGR9IGluc3RlYWQuXG4gICAgICovXG4gICAgc2V0IHJvdGF0aW9uV29ybGQocjogUmVhZG9ubHk8TnVtYmVyQXJyYXk+KSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3Rfc2V0X3JvdGF0aW9uX3dvcmxkKHRoaXMuX2lkLCByWzBdLCByWzFdLCByWzJdLCByWzNdKTtcbiAgICB9XG5cbiAgICAvKiogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB7QGxpbmsgT2JqZWN0M0QuZ2V0Rm9yd2FyZFdvcmxkfSBpbnN0ZWFkLiAqL1xuICAgIGdldEZvcndhcmQ8VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQpOiBUIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rm9yd2FyZFdvcmxkKG91dCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29tcHV0ZSB0aGUgb2JqZWN0J3MgZm9yd2FyZCBmYWNpbmcgd29ybGQgc3BhY2UgdmVjdG9yLlxuICAgICAqXG4gICAgICogVGhlIGZvcndhcmQgdmVjdG9yIGluIG9iamVjdCBzcGFjZSBpcyBhbG9uZyB0aGUgbmVnYXRpdmUgei1heGlzLCBpLmUuLFxuICAgICAqIGBbMCwgMCwgLTFdYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgRGVzdGluYXRpb24gYXJyYXkvdmVjdG9yLCBleHBlY3RlZCB0byBoYXZlIGF0IGxlYXN0IDMgZWxlbWVudHMuXG4gICAgICogQHJldHVybiBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqL1xuICAgIGdldEZvcndhcmRXb3JsZDxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCk6IFQge1xuICAgICAgICBvdXRbMF0gPSAwO1xuICAgICAgICBvdXRbMV0gPSAwO1xuICAgICAgICBvdXRbMl0gPSAtMTtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1WZWN0b3JXb3JsZChvdXQpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHtAbGluayBPYmplY3QzRC5nZXRVcFdvcmxkfSBpbnN0ZWFkLiAqL1xuICAgIGdldFVwPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBUKTogVCB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFVwV29ybGQob3V0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb21wdXRlIHRoZSBvYmplY3QncyB1cCBmYWNpbmcgd29ybGQgc3BhY2UgdmVjdG9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBEZXN0aW5hdGlvbiBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgMyBlbGVtZW50cy5cbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICovXG4gICAgZ2V0VXBXb3JsZDxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCk6IFQge1xuICAgICAgICBvdXRbMF0gPSAwO1xuICAgICAgICBvdXRbMV0gPSAxO1xuICAgICAgICBvdXRbMl0gPSAwO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybVZlY3RvcldvcmxkKG91dCk7XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuXG4gICAgLyoqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2Uge0BsaW5rIE9iamVjdDNELmdldFJpZ2h0V29ybGR9IGluc3RlYWQuICovXG4gICAgZ2V0UmlnaHQ8VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQpOiBUIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmlnaHRXb3JsZChvdXQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbXB1dGUgdGhlIG9iamVjdCdzIHJpZ2h0IGZhY2luZyB3b3JsZCBzcGFjZSB2ZWN0b3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IERlc3RpbmF0aW9uIGFycmF5L3ZlY3RvciwgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCAzIGVsZW1lbnRzLlxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBnZXRSaWdodFdvcmxkPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBUKTogVCB7XG4gICAgICAgIG91dFswXSA9IDE7XG4gICAgICAgIG91dFsxXSA9IDA7XG4gICAgICAgIG91dFsyXSA9IDA7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtVmVjdG9yV29ybGQob3V0KTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gYSB2ZWN0b3IgYnkgdGhpcyBvYmplY3QncyB3b3JsZCB0cmFuc2Zvcm0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IE91dCB2ZWN0b3JcbiAgICAgKiBAcGFyYW0gdiBWZWN0b3IgdG8gdHJhbnNmb3JtLCBkZWZhdWx0IGBvdXRgXG4gICAgICogQHJldHVybiBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICovXG4gICAgdHJhbnNmb3JtVmVjdG9yV29ybGQ8VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQsIHY6IE51bWJlckFycmF5ID0gb3V0KTogVCB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzBdID0gdlswXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzFdID0gdlsxXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzJdID0gdlsyXTtcbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3RyYW5zZm9ybVZlY3RvcldvcmxkKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsyXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gYSB2ZWN0b3IgYnkgdGhpcyBvYmplY3QncyBsb2NhbCB0cmFuc2Zvcm0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IE91dCB2ZWN0b3JcbiAgICAgKiBAcGFyYW0gdiBWZWN0b3IgdG8gdHJhbnNmb3JtLCBkZWZhdWx0IGBvdXRgXG4gICAgICogQHJldHVybiBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICovXG4gICAgdHJhbnNmb3JtVmVjdG9yTG9jYWw8VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQsIHY6IE51bWJlckFycmF5ID0gb3V0KTogVCB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzBdID0gdlswXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzFdID0gdlsxXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzJdID0gdlsyXTtcbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3RyYW5zZm9ybVZlY3RvckxvY2FsKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsyXTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gYSBwb2ludCBieSB0aGlzIG9iamVjdCdzIHdvcmxkIHRyYW5zZm9ybS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgT3V0IHBvaW50LlxuICAgICAqIEBwYXJhbSBwIFBvaW50IHRvIHRyYW5zZm9ybSwgZGVmYXVsdCBgb3V0YC5cbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjdcbiAgICAgKi9cbiAgICB0cmFuc2Zvcm1Qb2ludFdvcmxkPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBULCBwOiBOdW1iZXJBcnJheSA9IG91dCk6IFQge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdFswXSA9IHBbMF07XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdFsxXSA9IHBbMV07XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdFsyXSA9IHBbMl07XG4gICAgICAgIHdhc20uX3dsX29iamVjdF90cmFuc2Zvcm1Qb2ludFdvcmxkKHRoaXMuX2lkLCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzBdO1xuICAgICAgICBvdXRbMV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMV07XG4gICAgICAgIG91dFsyXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsyXTtcblxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBhIHBvaW50IGJ5IHRoaXMgb2JqZWN0J3MgbG9jYWwgdHJhbnNmb3JtLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBPdXQgcG9pbnQuXG4gICAgICogQHBhcmFtIHAgUG9pbnQgdG8gdHJhbnNmb3JtLCBkZWZhdWx0IGBvdXRgLlxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqL1xuICAgIHRyYW5zZm9ybVBvaW50TG9jYWw8VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQsIHA6IE51bWJlckFycmF5ID0gb3V0KTogVCB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzBdID0gcFswXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzFdID0gcFsxXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzJdID0gcFsyXTtcbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3RyYW5zZm9ybVBvaW50TG9jYWwodGhpcy5faWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBvdXRbMF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzJdO1xuXG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIGEgdmVjdG9yIGJ5IHRoaXMgb2JqZWN0J3MgaW52ZXJzZSB3b3JsZCB0cmFuc2Zvcm0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IE91dCB2ZWN0b3IuXG4gICAgICogQHBhcmFtIHYgVmVjdG9yIHRvIHRyYW5zZm9ybSwgZGVmYXVsdCBgb3V0YC5cbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjdcbiAgICAgKi9cbiAgICB0cmFuc2Zvcm1WZWN0b3JJbnZlcnNlV29ybGQ8VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQsIHY6IE51bWJlckFycmF5ID0gb3V0KTogVCB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzBdID0gdlswXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzFdID0gdlsxXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzJdID0gdlsyXTtcbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3RyYW5zZm9ybVZlY3RvckludmVyc2VXb3JsZCh0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG5cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gYSB2ZWN0b3IgYnkgdGhpcyBvYmplY3QncyBpbnZlcnNlIGxvY2FsIHRyYW5zZm9ybS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgT3V0IHZlY3RvclxuICAgICAqIEBwYXJhbSB2IFZlY3RvciB0byB0cmFuc2Zvcm0sIGRlZmF1bHQgYG91dGBcbiAgICAgKiBAcmV0dXJuIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMC44LjdcbiAgICAgKi9cbiAgICB0cmFuc2Zvcm1WZWN0b3JJbnZlcnNlTG9jYWw8VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQsIHY6IE51bWJlckFycmF5ID0gb3V0KTogVCB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzBdID0gdlswXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzFdID0gdlsxXTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0WzJdID0gdlsyXTtcbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3RyYW5zZm9ybVZlY3RvckludmVyc2VMb2NhbCh0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG5cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gYSBwb2ludCBieSB0aGlzIG9iamVjdCdzIGludmVyc2Ugd29ybGQgdHJhbnNmb3JtLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBPdXQgcG9pbnQuXG4gICAgICogQHBhcmFtIHAgUG9pbnQgdG8gdHJhbnNmb3JtLCBkZWZhdWx0IGBvdXRgLlxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqL1xuICAgIHRyYW5zZm9ybVBvaW50SW52ZXJzZVdvcmxkPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBULCBwOiBOdW1iZXJBcnJheSA9IG91dCk6IFQge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdFswXSA9IHBbMF07XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdFsxXSA9IHBbMV07XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdFsyXSA9IHBbMl07XG4gICAgICAgIHdhc20uX3dsX29iamVjdF90cmFuc2Zvcm1Qb2ludEludmVyc2VXb3JsZCh0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG5cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gYSBwb2ludCBieSB0aGlzIG9iamVjdCdzIGludmVyc2UgbG9jYWwgdHJhbnNmb3JtLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBPdXQgcG9pbnQuXG4gICAgICogQHBhcmFtIHAgUG9pbnQgdG8gdHJhbnNmb3JtLCBkZWZhdWx0IGBvdXRgLlxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqL1xuICAgIHRyYW5zZm9ybVBvaW50SW52ZXJzZUxvY2FsPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBULCBwOiBOdW1iZXJBcnJheSA9IG91dCk6IFQge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdC5zZXQocCk7XG4gICAgICAgIHdhc20uX3dsX29iamVjdF90cmFuc2Zvcm1Qb2ludEludmVyc2VMb2NhbCh0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG5cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gYW4gb2JqZWN0IHNwYWNlIGR1YWwgcXVhdGVybmlvbiBpbnRvIHdvcmxkIHNwYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBPdXQgdHJhbnNmb3JtYXRpb24uXG4gICAgICogQHBhcmFtIHEgTG9jYWwgc3BhY2UgdHJhbnNmb3JtYXRpb24sIGRlZmF1bHQgYG91dGAuXG4gICAgICogQHJldHVybiBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICovXG4gICAgdG9Xb3JsZFNwYWNlVHJhbnNmb3JtPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBULCBxOiBOdW1iZXJBcnJheSA9IG91dCk6IFQge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdC5zZXQocSk7XG4gICAgICAgIHdhc20uX3dsX29iamVjdF90b1dvcmxkU3BhY2VUcmFuc2Zvcm0odGhpcy5faWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBvdXRbMF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzJdO1xuICAgICAgICBvdXRbM10gPSB3YXNtLl90ZW1wTWVtRmxvYXRbM107XG5cbiAgICAgICAgb3V0WzRdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzRdO1xuICAgICAgICBvdXRbNV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbNV07XG4gICAgICAgIG91dFs2XSA9IHdhc20uX3RlbXBNZW1GbG9hdFs2XTtcbiAgICAgICAgb3V0WzddID0gd2FzbS5fdGVtcE1lbUZsb2F0WzddO1xuXG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIGEgd29ybGQgc3BhY2UgZHVhbCBxdWF0ZXJuaW9uIGludG8gbG9jYWwgc3BhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IE91dCB0cmFuc2Zvcm1hdGlvblxuICAgICAqIEBwYXJhbSBxIFdvcmxkIHNwYWNlIHRyYW5zZm9ybWF0aW9uLCBkZWZhdWx0IGBvdXRgXG4gICAgICogQHJldHVybiBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC43XG4gICAgICovXG4gICAgdG9Mb2NhbFNwYWNlVHJhbnNmb3JtPFQgZXh0ZW5kcyBOdW1iZXJBcnJheT4ob3V0OiBULCBxOiBOdW1iZXJBcnJheSA9IG91dCk6IFQge1xuICAgICAgICBjb25zdCBwID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgIGlmIChwKSB7XG4gICAgICAgICAgICBwLnRvT2JqZWN0U3BhY2VUcmFuc2Zvcm0ob3V0LCBxKTtcbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG91dCAhPT0gcSkge1xuICAgICAgICAgICAgb3V0WzBdID0gcVswXTtcbiAgICAgICAgICAgIG91dFsxXSA9IHFbMV07XG4gICAgICAgICAgICBvdXRbMl0gPSBxWzJdO1xuICAgICAgICAgICAgb3V0WzNdID0gcVszXTtcbiAgICAgICAgICAgIG91dFs0XSA9IHFbNF07XG4gICAgICAgICAgICBvdXRbNV0gPSBxWzVdO1xuICAgICAgICAgICAgb3V0WzZdID0gcVs2XTtcbiAgICAgICAgICAgIG91dFs3XSA9IHFbN107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gYSB3b3JsZCBzcGFjZSBkdWFsIHF1YXRlcm5pb24gaW50byBvYmplY3Qgc3BhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0IE91dCB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKiBAcGFyYW0gcSBXb3JsZCBzcGFjZSB0cmFuc2Zvcm1hdGlvbiwgZGVmYXVsdCBgb3V0YFxuICAgICAqIEByZXR1cm4gVGhlIGBvdXRgIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAwLjguN1xuICAgICAqL1xuICAgIHRvT2JqZWN0U3BhY2VUcmFuc2Zvcm08VCBleHRlbmRzIE51bWJlckFycmF5PihvdXQ6IFQsIHE6IE51bWJlckFycmF5ID0gb3V0KTogVCB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fdGVtcE1lbUZsb2F0LnNldChxKTtcbiAgICAgICAgd2FzbS5fd2xfb2JqZWN0X3RvT2JqZWN0U3BhY2VUcmFuc2Zvcm0odGhpcy5faWQsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBvdXRbMF0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIG91dFsxXSA9IHdhc20uX3RlbXBNZW1GbG9hdFsxXTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzJdO1xuICAgICAgICBvdXRbM10gPSB3YXNtLl90ZW1wTWVtRmxvYXRbM107XG5cbiAgICAgICAgb3V0WzRdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzRdO1xuICAgICAgICBvdXRbNV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbNV07XG4gICAgICAgIG91dFs2XSA9IHdhc20uX3RlbXBNZW1GbG9hdFs2XTtcbiAgICAgICAgb3V0WzddID0gd2FzbS5fdGVtcE1lbUZsb2F0WzddO1xuXG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHVybiB0b3dhcmRzIC8gbG9vayBhdCB0YXJnZXQuXG4gICAgICpcbiAgICAgKiBSb3RhdGVzIHRoZSBvYmplY3Qgc28gdGhhdCBpdHMgZm9yd2FyZCB2ZWN0b3IgZmFjZXMgdG93YXJkcyB0aGUgdGFyZ2V0XG4gICAgICogcG9zaXRpb24uIFRoZSBgdXBgIHZlY3RvciBhY3RzIGFzIGEgaGludCB0byB1bmlxdWVseSBvcmllbnQgdGhlIG9iamVjdCdzXG4gICAgICogdXAgZGlyZWN0aW9uLiBXaGVuIG9yaWVudGluZyBhIHZpZXcgY29tcG9uZW50LCB0aGUgcHJvamVjdGVkIGB1cGAgdmVjdG9yXG4gICAgICogZmFjZXMgdXB3YXJkcyBvbiB0aGUgdmlld2luZyBwbGFuZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwIFRhcmdldCBwb3NpdGlvbiB0byB0dXJuIHRvd2FyZHMsIGluIHdvcmxkIHNwYWNlLlxuICAgICAqIEBwYXJhbSB1cCBVcCB2ZWN0b3IgdG8gYWxpZ24gb2JqZWN0IHdpdGgsIGluIHdvcmxkIHNwYWNlLiBEZWZhdWx0IGlzIGBbMCwgMSwgMF1gLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUmVmZXJlbmNlIHRvIHNlbGYgKGZvciBtZXRob2QgY2hhaW5pbmcpLlxuICAgICAqL1xuICAgIGxvb2tBdChwOiBOdW1iZXJBcnJheSwgdXA6IE51bWJlckFycmF5ID0gVVBfVkVDVE9SKTogdGhpcyB7XG4gICAgICAgIHRoaXMuX2VuZ2luZS53YXNtLl93bF9vYmplY3RfbG9va0F0KFxuICAgICAgICAgICAgdGhpcy5faWQsXG4gICAgICAgICAgICBwWzBdLFxuICAgICAgICAgICAgcFsxXSxcbiAgICAgICAgICAgIHBbMl0sXG4gICAgICAgICAgICB1cFswXSxcbiAgICAgICAgICAgIHVwWzFdLFxuICAgICAgICAgICAgdXBbMl1cbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqIERlc3Ryb3kgdGhlIG9iamVjdCB3aXRoIGFsbCBvZiBpdHMgY29tcG9uZW50cyBhbmQgcmVtb3ZlIGl0IGZyb20gdGhlIHNjZW5lICovXG4gICAgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuX2lkIDwgMCkgcmV0dXJuO1xuICAgICAgICAvKiBUaGlzIHdpbGwgYXV0b21hdGljYWxseSBjYWxsIGBzY2VuZS5fZGVzdHJveU9iamVjdGAgKi9cbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3JlbW92ZSh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFyayB0cmFuc2Zvcm1hdGlvbiBkaXJ0eS5cbiAgICAgKlxuICAgICAqIENhdXNlcyBhbiBldmVudHVhbCByZWNhbGN1bGF0aW9uIG9mIHtAbGluayB0cmFuc2Zvcm1Xb3JsZH0sIGVpdGhlclxuICAgICAqIG9uIG5leHQge0BsaW5rIGdldFRyYW5zbGF0aW9uV29ybGR9LCB7QGxpbmsgdHJhbnNmb3JtV29ybGR9IG9yXG4gICAgICoge0BsaW5rIHNjYWxpbmdXb3JsZH0gb3IgdGhlIGJlZ2lubmluZyBvZiBuZXh0IGZyYW1lLCB3aGljaGV2ZXJcbiAgICAgKiBoYXBwZW5zIGZpcnN0LlxuICAgICAqL1xuICAgIHNldERpcnR5KCk6IHZvaWQge1xuICAgICAgICB0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X3NldF9kaXJ0eSh0aGlzLl9pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzYWJsZS9lbmFibGUgYWxsIGNvbXBvbmVudHMgb2YgdGhpcyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYiBOZXcgc3RhdGUgZm9yIHRoZSBjb21wb25lbnRzLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC41XG4gICAgICovXG4gICAgc2V0IGFjdGl2ZShiOiBib29sZWFuKSB7XG4gICAgICAgIGNvbnN0IGNvbXBzID0gdGhpcy5nZXRDb21wb25lbnRzKCk7XG4gICAgICAgIGZvciAobGV0IGMgb2YgY29tcHMpIHtcbiAgICAgICAgICAgIGMuYWN0aXZlID0gYjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qIGBnZXRDb21wb25lbnRgIG92ZXJsb2FkcyBmb3IgbmF0aXZlIGNvbXBvbmVudHMuICovXG5cbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0Q29tcG9uZW50KHR5cGU6ICdjb2xsaXNpb24nLCBpbmRleD86IG51bWJlcik6IENvbGxpc2lvbkNvbXBvbmVudCB8IG51bGw7XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldENvbXBvbmVudCh0eXBlOiAndGV4dCcsIGluZGV4PzogbnVtYmVyKTogVGV4dENvbXBvbmVudCB8IG51bGw7XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldENvbXBvbmVudCh0eXBlOiAndmlldycsIGluZGV4PzogbnVtYmVyKTogVmlld0NvbXBvbmVudCB8IG51bGw7XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldENvbXBvbmVudCh0eXBlOiAnbWVzaCcsIGluZGV4PzogbnVtYmVyKTogTWVzaENvbXBvbmVudCB8IG51bGw7XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldENvbXBvbmVudCh0eXBlOiAnaW5wdXQnLCBpbmRleD86IG51bWJlcik6IElucHV0Q29tcG9uZW50IHwgbnVsbDtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0Q29tcG9uZW50KHR5cGU6ICdsaWdodCcsIGluZGV4PzogbnVtYmVyKTogTGlnaHRDb21wb25lbnQgfCBudWxsO1xuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRDb21wb25lbnQodHlwZTogJ2FuaW1hdGlvbicsIGluZGV4PzogbnVtYmVyKTogQW5pbWF0aW9uQ29tcG9uZW50IHwgbnVsbDtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0Q29tcG9uZW50KHR5cGU6ICdwaHlzeCcsIGluZGV4PzogbnVtYmVyKTogUGh5c1hDb21wb25lbnQgfCBudWxsO1xuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRDb21wb25lbnQodHlwZU9yQ2xhc3M6IHN0cmluZywgaW5kZXg/OiBudW1iZXIpOiBDb21wb25lbnQgfCBudWxsO1xuICAgIC8qKlxuICAgICAqIEdldCBhIGNvbXBvbmVudCBhdHRhY2hlZCB0byB0aGlzIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0eXBlT3JDbGFzcyBUeXBlIG5hbWUuIEl0J3MgYWxzbyBwb3NzaWJsZSB0byBnaXZlIGEgY2xhc3MgZGVmaW5pdGlvbi5cbiAgICAgKiAgICAgSW4gdGhpcyBjYXNlLCB0aGUgbWV0aG9kIHdpbGwgdXNlIHRoZSBgY2xhc3MuVHlwZU5hbWVgIGZpZWxkIHRvIGZpbmQgdGhlIGNvbXBvbmVudC5cbiAgICAgKiBAcGFyYW0gaW5kZXg9MCBJbmRleCBmb3IgY29tcG9uZW50IG9mIGdpdmVuIHR5cGUuIFRoaXMgY2FuIGJlIHVzZWQgdG8gYWNjZXNzIHNwZWNpZmljXG4gICAgICogICAgICBjb21wb25lbnRzIGlmIHRoZSBvYmplY3QgaGFzIG11bHRpcGxlIGNvbXBvbmVudHMgb2YgdGhlIHNhbWUgdHlwZS5cbiAgICAgKiBAcmV0dXJucyBUaGUgY29tcG9uZW50IG9yIGBudWxsYCBpZiB0aGVyZSBpcyBubyBzdWNoIGNvbXBvbmVudCBvbiB0aGlzIG9iamVjdFxuICAgICAqL1xuICAgIGdldENvbXBvbmVudDxUIGV4dGVuZHMgQ29tcG9uZW50PihcbiAgICAgICAgdHlwZU9yQ2xhc3M6IENvbXBvbmVudENvbnN0cnVjdG9yPFQ+LFxuICAgICAgICBpbmRleD86IG51bWJlclxuICAgICk6IFQgfCBudWxsO1xuICAgIGdldENvbXBvbmVudChcbiAgICAgICAgdHlwZU9yQ2xhc3M6IHN0cmluZyB8IENvbXBvbmVudENvbnN0cnVjdG9yLFxuICAgICAgICBpbmRleDogbnVtYmVyID0gMFxuICAgICk6IENvbXBvbmVudCB8IG51bGwge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHR5cGUgPSBpc1N0cmluZyh0eXBlT3JDbGFzcykgPyB0eXBlT3JDbGFzcyA6IHR5cGVPckNsYXNzLlR5cGVOYW1lO1xuXG4gICAgICAgIGNvbnN0IHNjZW5lID0gdGhpcy5fc2NlbmU7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudFR5cGUgPSB3YXNtLl93bF9zY2VuZV9nZXRfY29tcG9uZW50X21hbmFnZXJfaW5kZXgoXG4gICAgICAgICAgICBzY2VuZS5faW5kZXgsXG4gICAgICAgICAgICB3YXNtLnRlbXBVVEY4KHR5cGUpXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKGNvbXBvbmVudFR5cGUgPCAwKSB7XG4gICAgICAgICAgICAvKiBOb3QgYSBuYXRpdmUgY29tcG9uZW50LCB0cnkganM6ICovXG4gICAgICAgICAgICBjb25zdCB0eXBlSW5kZXggPSB3YXNtLl9jb21wb25lbnRUeXBlSW5kaWNlc1t0eXBlXTtcbiAgICAgICAgICAgIGlmICh0eXBlSW5kZXggPT09IHVuZGVmaW5lZCkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBjb25zdCBqc0luZGV4ID0gd2FzbS5fd2xfZ2V0X2pzX2NvbXBvbmVudF9pbmRleCh0aGlzLl9pZCwgdHlwZUluZGV4LCBpbmRleCk7XG4gICAgICAgICAgICBpZiAoanNJbmRleCA8IDApIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnQgPSB0aGlzLl9zY2VuZS5fanNDb21wb25lbnRzW2pzSW5kZXhdO1xuICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudC5jb25zdHJ1Y3RvciAhPT0gQnJva2VuQ29tcG9uZW50ID8gY29tcG9uZW50IDogbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNvbXBvbmVudElkID0gd2FzbS5fd2xfZ2V0X2NvbXBvbmVudF9pZCh0aGlzLl9pZCwgY29tcG9uZW50VHlwZSwgaW5kZXgpO1xuICAgICAgICByZXR1cm4gc2NlbmUuX2NvbXBvbmVudHMud3JhcE5hdGl2ZShjb21wb25lbnRUeXBlLCBjb21wb25lbnRJZCk7XG4gICAgfVxuXG4gICAgLyogYGdldENvbXBvbmVudHNgIG92ZXJsb2FkcyBmb3IgbmF0aXZlIGNvbXBvbmVudHMuICovXG5cbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0Q29tcG9uZW50cyh0eXBlOiAnY29sbGlzaW9uJyk6IENvbGxpc2lvbkNvbXBvbmVudFtdO1xuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRDb21wb25lbnRzKHR5cGU6ICd0ZXh0Jyk6IFRleHRDb21wb25lbnRbXTtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0Q29tcG9uZW50cyh0eXBlOiAndmlldycpOiBWaWV3Q29tcG9uZW50W107XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldENvbXBvbmVudHModHlwZTogJ21lc2gnKTogTWVzaENvbXBvbmVudFtdO1xuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRDb21wb25lbnRzKHR5cGU6ICdpbnB1dCcpOiBJbnB1dENvbXBvbmVudFtdO1xuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRDb21wb25lbnRzKHR5cGU6ICdsaWdodCcpOiBMaWdodENvbXBvbmVudFtdO1xuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRDb21wb25lbnRzKHR5cGU6ICdhbmltYXRpb24nKTogQW5pbWF0aW9uQ29tcG9uZW50W107XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldENvbXBvbmVudHModHlwZTogJ3BoeXN4Jyk6IFBoeXNYQ29tcG9uZW50W107XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldENvbXBvbmVudHModHlwZT86IHN0cmluZyB8IG51bGwpOiBDb21wb25lbnRbXTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gdHlwZU9yQ2xhc3MgVHlwZSBuYW1lLCBwYXNzIGEgZmFsc2V5IHZhbHVlIChgdW5kZWZpbmVkYCBvciBgbnVsbGApIHRvIHJldHJpZXZlIGFsbC5cbiAgICAgKiAgICAgSXQncyBhbHNvIHBvc3NpYmxlIHRvIGdpdmUgYSBjbGFzcyBkZWZpbml0aW9uLiBJbiB0aGlzIGNhc2UsIHRoZSBtZXRob2Qgd2lsbCB1c2UgdGhlIGBjbGFzcy5UeXBlTmFtZWAgZmllbGQgdG9cbiAgICAgKiAgICAgZmluZCB0aGUgY29tcG9uZW50cy5cbiAgICAgKiBAcmV0dXJucyBBbGwgY29tcG9uZW50cyBvZiBnaXZlbiB0eXBlIGF0dGFjaGVkIHRvIHRoaXMgb2JqZWN0LlxuICAgICAqXG4gICAgICogQG5vdGUgQXMgdGhpcyBmdW5jdGlvbiBpcyBub24tdHJpdmlhbCwgYXZvaWQgdXNpbmcgaXQgaW4gYHVwZGF0ZSgpYCByZXBlYXRlZGx5LFxuICAgICAqICAgICAgYnV0IHJhdGhlciBzdG9yZSBpdHMgcmVzdWx0IGluIGBpbml0KClgIG9yIGBzdGFydCgpYFxuICAgICAqIEB3YXJuaW5nIFRoaXMgbWV0aG9kIHdpbGwgY3VycmVudGx5IHJldHVybiBhdCBtb3N0IDM0MSBjb21wb25lbnRzLlxuICAgICAqL1xuICAgIGdldENvbXBvbmVudHM8VCBleHRlbmRzIENvbXBvbmVudD4odHlwZU9yQ2xhc3M6IENvbXBvbmVudENvbnN0cnVjdG9yPFQ+KTogVFtdO1xuICAgIGdldENvbXBvbmVudHM8VCBleHRlbmRzIENvbXBvbmVudD4oXG4gICAgICAgIHR5cGVPckNsYXNzPzogc3RyaW5nIHwgQ29tcG9uZW50Q29uc3RydWN0b3I8VD4gfCBudWxsXG4gICAgKTogVFtdIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMuX3NjZW5lO1xuXG4gICAgICAgIGxldCBtYW5hZ2VyID0gbnVsbDtcbiAgICAgICAgbGV0IHR5cGUgPSBudWxsO1xuICAgICAgICBpZiAodHlwZU9yQ2xhc3MpIHtcbiAgICAgICAgICAgIHR5cGUgPSBpc1N0cmluZyh0eXBlT3JDbGFzcykgPyB0eXBlT3JDbGFzcyA6IHR5cGVPckNsYXNzLlR5cGVOYW1lO1xuICAgICAgICAgICAgY29uc3QgbmF0aXZlTWFuYWdlciA9IHNjZW5lLl9jb21wb25lbnRzLmdldE5hdGl2ZU1hbmFnZXIodHlwZSk7XG4gICAgICAgICAgICBtYW5hZ2VyID0gbmF0aXZlTWFuYWdlciAhPT0gbnVsbCA/IG5hdGl2ZU1hbmFnZXIgOiBzY2VuZS5fY29tcG9uZW50cy5qcztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNvbXBvbmVudHM6IENvbXBvbmVudFtdID0gW107XG4gICAgICAgIGNvbnN0IG1heENvbXBzID0gTWF0aC5mbG9vcigod2FzbS5fdGVtcE1lbVNpemUgLyAzKSAqIDIpO1xuICAgICAgICBjb25zdCBjb21wb25lbnRzQ291bnQgPSB3YXNtLl93bF9vYmplY3RfZ2V0X2NvbXBvbmVudHMoXG4gICAgICAgICAgICB0aGlzLl9pZCxcbiAgICAgICAgICAgIHdhc20uX3RlbXBNZW0sXG4gICAgICAgICAgICBtYXhDb21wc1xuICAgICAgICApO1xuICAgICAgICBjb25zdCBvZmZzZXQgPSAyICogY29tcG9uZW50c0NvdW50O1xuICAgICAgICB3YXNtLl93bF9vYmplY3RfZ2V0X2NvbXBvbmVudF90eXBlcyh0aGlzLl9pZCwgd2FzbS5fdGVtcE1lbSArIG9mZnNldCwgbWF4Q29tcHMpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29tcG9uZW50c0NvdW50OyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB3YXNtLl90ZW1wTWVtVWludDhbaSArIG9mZnNldF07XG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnRJZCA9IHdhc20uX3RlbXBNZW1VaW50MTZbaV07XG4gICAgICAgICAgICBpZiAobWFuYWdlciAhPT0gbnVsbCAmJiB0ICE9PSBtYW5hZ2VyKSBjb250aW51ZTtcblxuICAgICAgICAgICAgY29uc3QgY29tcCA9IHRoaXMuX3NjZW5lLl9jb21wb25lbnRzLndyYXBBbnkodCwgY29tcG9uZW50SWQpO1xuICAgICAgICAgICAgaWYgKCFjb21wKSBjb250aW51ZTtcbiAgICAgICAgICAgIGlmICh0eXBlICYmIHR5cGUgIT09IChjb21wLmNvbnN0cnVjdG9yIGFzIENvbXBvbmVudENvbnN0cnVjdG9yKS5UeXBlTmFtZSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbXBvbmVudHMucHVzaChjb21wKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29tcG9uZW50cyBhcyBUW107XG4gICAgfVxuXG4gICAgLyogYGFkZENvbXBvbmVudGAgb3ZlcmxvYWRzIGZvciBuYXRpdmUgY29tcG9uZW50cy4gKi9cblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBhZGRDb21wb25lbnQodHlwZTogJ2NvbGxpc2lvbicsIHBhcmFtcz86IFJlY29yZDxzdHJpbmcsIGFueT4pOiBDb2xsaXNpb25Db21wb25lbnQ7XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGFkZENvbXBvbmVudCh0eXBlOiAndGV4dCcsIHBhcmFtcz86IFJlY29yZDxzdHJpbmcsIGFueT4pOiBUZXh0Q29tcG9uZW50O1xuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBhZGRDb21wb25lbnQodHlwZTogJ3ZpZXcnLCBwYXJhbXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogVmlld0NvbXBvbmVudDtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgYWRkQ29tcG9uZW50KHR5cGU6ICdtZXNoJywgcGFyYW1zPzogUmVjb3JkPHN0cmluZywgYW55Pik6IE1lc2hDb21wb25lbnQ7XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGFkZENvbXBvbmVudCh0eXBlOiAnaW5wdXQnLCBwYXJhbXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogSW5wdXRDb21wb25lbnQ7XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGFkZENvbXBvbmVudCh0eXBlOiAnbGlnaHQnLCBwYXJhbXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogTGlnaHRDb21wb25lbnQ7XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGFkZENvbXBvbmVudCh0eXBlOiAnYW5pbWF0aW9uJywgcGFyYW1zPzogUmVjb3JkPHN0cmluZywgYW55Pik6IEFuaW1hdGlvbkNvbXBvbmVudDtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgYWRkQ29tcG9uZW50KHR5cGU6ICdwaHlzeCcsIHBhcmFtcz86IFJlY29yZDxzdHJpbmcsIGFueT4pOiBQaHlzWENvbXBvbmVudDtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgYWRkQ29tcG9uZW50KHR5cGU6IHN0cmluZywgcGFyYW1zPzogUmVjb3JkPHN0cmluZywgYW55Pik6IENvbXBvbmVudDtcbiAgICAvKipcbiAgICAgKiBBZGQgY29tcG9uZW50IG9mIGdpdmVuIHR5cGUgdG8gdGhlIG9iamVjdC5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gdXNlIHRoaXMgZnVuY3Rpb24gdG8gY2xvbmUgY29tcG9uZW50cywgc2VlIHRoZSBleGFtcGxlIGJlbG93LlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAgLy8gQ2xvbmUgZXhpc3RpbmcgY29tcG9uZW50IChzaW5jZSAwLjguMTApXG4gICAgICogIGxldCBvcmlnaW5hbCA9IHRoaXMub2JqZWN0LmdldENvbXBvbmVudCgnbWVzaCcpO1xuICAgICAqICBvdGhlck9iamVjdC5hZGRDb21wb25lbnQoJ21lc2gnLCBvcmlnaW5hbCk7XG4gICAgICogIC8vIENyZWF0ZSBjb21wb25lbnQgZnJvbSBwYXJhbWV0ZXJzXG4gICAgICogIHRoaXMub2JqZWN0LmFkZENvbXBvbmVudCgnbWVzaCcsIHtcbiAgICAgKiAgICAgIG1lc2g6IHNvbWVNZXNoLFxuICAgICAqICAgICAgbWF0ZXJpYWw6IHNvbWVNYXRlcmlhbCxcbiAgICAgKiAgfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHlwZU9yQ2xhc3MgVHlwZW5hbWUgdG8gY3JlYXRlIGEgY29tcG9uZW50IG9mLiBDYW4gYmUgbmF0aXZlIG9yXG4gICAgICogICAgIGN1c3RvbSBKYXZhU2NyaXB0IGNvbXBvbmVudCB0eXBlLiBJdCdzIGFsc28gcG9zc2libGUgdG8gZ2l2ZSBhIGNsYXNzIGRlZmluaXRpb24uXG4gICAgICogICAgIEluIHRoaXMgY2FzZSwgdGhlIG1ldGhvZCB3aWxsIHVzZSB0aGUgYGNsYXNzLlR5cGVOYW1lYCBmaWVsZC5cbiAgICAgKiBAcGFyYW0gcGFyYW1zIFBhcmFtZXRlcnMgdG8gaW5pdGlhbGl6ZSBwcm9wZXJ0aWVzIG9mIHRoZSBuZXcgY29tcG9uZW50LFxuICAgICAqICAgICAgY2FuIGJlIGFub3RoZXIgY29tcG9uZW50IHRvIGNvcHkgcHJvcGVydGllcyBmcm9tLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIGNvbXBvbmVudCBvciBgbnVsbGAgaWYgdGhlIHR5cGUgd2FzIG5vdCBmb3VuZFxuICAgICAqL1xuICAgIGFkZENvbXBvbmVudDxUIGV4dGVuZHMgQ29tcG9uZW50PihcbiAgICAgICAgdHlwZUNsYXNzOiBDb21wb25lbnRDb25zdHJ1Y3RvcjxUPixcbiAgICAgICAgcGFyYW1zPzogUmVjb3JkPHN0cmluZywgYW55PlxuICAgICk6IFQ7XG4gICAgYWRkQ29tcG9uZW50KFxuICAgICAgICB0eXBlT3JDbGFzczogQ29tcG9uZW50Q29uc3RydWN0b3IgfCBzdHJpbmcsXG4gICAgICAgIHBhcmFtcz86IFJlY29yZDxzdHJpbmcsIGFueT5cbiAgICApOiBDb21wb25lbnQge1xuICAgICAgICBpZiAodGhpcy5tYXJrZWREZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGFkZCBjb21wb25lbnQuICR7dGhpc30gaXMgbWFya2VkIGFzIGRlc3Ryb3llZC5gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcblxuICAgICAgICBjb25zdCB0eXBlID0gaXNTdHJpbmcodHlwZU9yQ2xhc3MpID8gdHlwZU9yQ2xhc3MgOiB0eXBlT3JDbGFzcy5UeXBlTmFtZTtcbiAgICAgICAgY29uc3QgbmF0aXZlTWFuYWdlciA9IHRoaXMuX3NjZW5lLl9jb21wb25lbnRzLmdldE5hdGl2ZU1hbmFnZXIodHlwZSk7XG4gICAgICAgIGNvbnN0IGlzTmF0aXZlID0gbmF0aXZlTWFuYWdlciAhPT0gbnVsbDtcbiAgICAgICAgY29uc3QgbWFuYWdlciA9IGlzTmF0aXZlID8gbmF0aXZlTWFuYWdlciA6IHRoaXMuX3NjZW5lLl9jb21wb25lbnRzLmpzO1xuXG4gICAgICAgIGxldCBjb21wb25lbnRJZCA9IC0xO1xuICAgICAgICBpZiAoIWlzTmF0aXZlKSB7XG4gICAgICAgICAgICAvKiBKYXZhU2NyaXB0IGNvbXBvbmVudCAqL1xuICAgICAgICAgICAgaWYgKCEodHlwZSBpbiB3YXNtLl9jb21wb25lbnRUeXBlSW5kaWNlcykpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5rbm93biBjb21wb25lbnQgdHlwZSAnXCIgKyB0eXBlICsgXCInXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29tcG9uZW50SWQgPSB3YXNtLl93bF9vYmplY3RfYWRkX2pzX2NvbXBvbmVudChcbiAgICAgICAgICAgICAgICB0aGlzLl9pZCxcbiAgICAgICAgICAgICAgICB3YXNtLl9jb21wb25lbnRUeXBlSW5kaWNlc1t0eXBlXVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8qIG5hdGl2ZSBjb21wb25lbnQgKi9cbiAgICAgICAgICAgIGNvbXBvbmVudElkID0gd2FzbS5fd2xfb2JqZWN0X2FkZF9jb21wb25lbnQodGhpcy5faWQsIG1hbmFnZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29tcG9uZW50ID0gdGhpcy5fc2NlbmUuX2NvbXBvbmVudHMud3JhcEFueShtYW5hZ2VyLCBjb21wb25lbnRJZCkhO1xuXG4gICAgICAgIGlmIChwYXJhbXMgIT09IHVuZGVmaW5lZCkgY29tcG9uZW50LmNvcHkocGFyYW1zIGFzIENvbXBvbmVudCk7XG5cbiAgICAgICAgLyogRXhwbGljaXRseSBpbml0aWFsaXplIGpzIGNvbXBvbmVudHMgKi9cbiAgICAgICAgaWYgKCFpc05hdGl2ZSkge1xuICAgICAgICAgICAgY29tcG9uZW50Ll90cmlnZ2VySW5pdCgpO1xuICAgICAgICAgICAgLyogc3RhcnQoKSBpcyBjYWxsZWQgdGhyb3VnaCBvbkFjdGl2YXRlKCkgKi9cbiAgICAgICAgfVxuXG4gICAgICAgIC8qIElmIGl0IHdhcyBub3QgZXhwbGljaXRseSByZXF1ZXN0ZWQgYnkgdGhlIHVzZXIgdG8gbGVhdmUgdGhlIGNvbXBvbmVudCBpbmFjdGl2ZSxcbiAgICAgICAgICogd2UgYWN0aXZhdGUgaXQgYXMgYSBmaW5hbCBzdGVwLiBUaGlzIGludmFsaWRhdGVzIGNvbXBvbmVudEluZGV4ISAqL1xuICAgICAgICBpZiAoIXBhcmFtcyB8fCAhKCdhY3RpdmUnIGluIHBhcmFtcyAmJiAhcGFyYW1zLmFjdGl2ZSkpIHtcbiAgICAgICAgICAgIGNvbXBvbmVudC5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZWFyY2ggZm9yIGRlc2NlbmRhbnRzIG1hdGNoaW5nIHRoZSBuYW1lLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgYSB3cmFwcGVyIGFyb3VuZCB7QGxpbmsgT2JqZWN0M0QuZmluZEJ5TmFtZURpcmVjdH0gYW5kXG4gICAgICoge0BsaW5rIE9iamVjdDNELmZpbmRCeU5hbWVSZWN1cnNpdmV9LlxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgdG8gc2VhcmNoIGZvci5cbiAgICAgKiBAcGFyYW0gcmVjdXJzaXZlIElmIGB0cnVlYCwgdGhlIG1ldGhvZCB3aWxsIGxvb2sgYXQgYWxsIHRoZSBkZXNjZW5kYW50cyBvZiB0aGlzIG9iamVjdC5cbiAgICAgKiAgICAgSWYgYGZhbHNlYCwgdGhpcyBtZXRob2Qgd2lsbCBvbmx5IHBlcmZvcm0gdGhlIHNlYXJjaCBpbiBkaXJlY3QgY2hpbGRyZW4uXG4gICAgICogQHJldHVybnMgQW4gYXJyYXkgb2Yge0BsaW5rIE9iamVjdDNEfSBtYXRjaGluZyB0aGUgbmFtZS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjEuMFxuICAgICAqL1xuICAgIGZpbmRCeU5hbWUobmFtZTogc3RyaW5nLCByZWN1cnNpdmUgPSBmYWxzZSk6IE9iamVjdDNEW10ge1xuICAgICAgICByZXR1cm4gcmVjdXJzaXZlID8gdGhpcy5maW5kQnlOYW1lUmVjdXJzaXZlKG5hbWUpIDogdGhpcy5maW5kQnlOYW1lRGlyZWN0KG5hbWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlYXJjaCBmb3IgYWxsICoqZGlyZWN0KiogY2hpbGRyZW4gbWF0Y2hpbmcgdGhlIG5hbWUuXG4gICAgICpcbiAgICAgKiBAbm90ZSBFdmVuIHRob3VnaCB0aGlzIG1ldGhvZCBpcyBoZWF2aWx5IG9wdGltaXplZCwgaXQgZG9lcyBwZXJmb3JtXG4gICAgICogYSBsaW5lYXIgc2VhcmNoIHRvIGZpbmQgdGhlIG9iamVjdHMuIERvIG5vdCB1c2UgaW4gYSBob3QgcGF0aC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIHRvIHNlYXJjaCBmb3IuXG4gICAgICogQHJldHVybnMgQW4gYXJyYXkgb2Yge0BsaW5rIE9iamVjdDNEfSBtYXRjaGluZyB0aGUgbmFtZS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjEuMFxuICAgICAqL1xuICAgIGZpbmRCeU5hbWVEaXJlY3QobmFtZTogc3RyaW5nKTogT2JqZWN0M0RbXSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgaWQgPSB0aGlzLl9pZDtcblxuICAgICAgICAvKiBEaXZpZGUgYnkgNCB0byBnZXQgaGFsZiBhcyBtYW55IHVzaG9ydCBhcyBwb3NzaWJsZSAqL1xuICAgICAgICBjb25zdCB0ZW1wU2l6ZVUxNiA9IHdhc20uX3RlbXBNZW1TaXplID4+IDI7XG4gICAgICAgIGNvbnN0IG1heENvdW50ID0gdGVtcFNpemVVMTYgLSAyOyAvKiBSZXNlcnZlIHR3byB1c2hvcnQgKi9cblxuICAgICAgICBjb25zdCBidWZmZXIgPSB3YXNtLl90ZW1wTWVtVWludDE2O1xuICAgICAgICBidWZmZXJbbWF4Q291bnRdID0gMDsgLyogSW5kZXggb2Zmc2V0ICovXG4gICAgICAgIGJ1ZmZlclttYXhDb3VudCArIDFdID0gMDsgLyogY2hpbGQgY291bnQgKi9cblxuICAgICAgICBjb25zdCBidWZmZXJQdHIgPSB3YXNtLl90ZW1wTWVtO1xuICAgICAgICBjb25zdCBpbmRleFB0ciA9IGJ1ZmZlclB0ciArIG1heENvdW50ICogMjtcbiAgICAgICAgY29uc3QgY2hpbGRDb3VudFB0ciA9IGJ1ZmZlclB0ciArIG1heENvdW50ICogMiArIDI7XG4gICAgICAgIGNvbnN0IG5hbWVQdHIgPSB3YXNtLnRlbXBVVEY4KG5hbWUsIChtYXhDb3VudCArIDIpICogMik7XG5cbiAgICAgICAgY29uc3QgcmVzdWx0OiBPYmplY3QzRFtdID0gW107XG4gICAgICAgIGxldCByZWFkID0gMDtcbiAgICAgICAgd2hpbGUgKFxuICAgICAgICAgICAgKHJlYWQgPSB3YXNtLl93bF9vYmplY3RfZmluZEJ5TmFtZShcbiAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICBuYW1lUHRyLFxuICAgICAgICAgICAgICAgIGluZGV4UHRyLFxuICAgICAgICAgICAgICAgIGNoaWxkQ291bnRQdHIsXG4gICAgICAgICAgICAgICAgYnVmZmVyUHRyLFxuICAgICAgICAgICAgICAgIG1heENvdW50XG4gICAgICAgICAgICApKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVhZDsgKytpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godGhpcy5fc2NlbmUud3JhcChidWZmZXJbaV0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VhcmNoIGZvciAqKmFsbCBkZXNjZW5kYW50cyoqIG1hdGNoaW5nIHRoZSBuYW1lLlxuICAgICAqXG4gICAgICogQG5vdGUgRXZlbiB0aG91Z2ggdGhpcyBtZXRob2QgaXMgaGVhdmlseSBvcHRpbWl6ZWQsIGl0IGRvZXMgcGVyZm9ybVxuICAgICAqIGEgbGluZWFyIHNlYXJjaCB0byBmaW5kIHRoZSBvYmplY3RzLiBEbyBub3QgdXNlIGluIGEgaG90IHBhdGguXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSB0byBzZWFyY2ggZm9yLlxuICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHtAbGluayBPYmplY3QzRH0gbWF0Y2hpbmcgdGhlIG5hbWUuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4xLjBcbiAgICAgKi9cbiAgICBmaW5kQnlOYW1lUmVjdXJzaXZlKG5hbWU6IHN0cmluZyk6IE9iamVjdDNEW10ge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGlkID0gdGhpcy5faWQ7XG5cbiAgICAgICAgLyogRGl2aWRlIGJ5IDQgdG8gZ2V0IGhhbGYgYXMgbWFueSB1c2hvcnQgYXMgcG9zc2libGUgKi9cbiAgICAgICAgY29uc3QgdGVtcFNpemVVMTYgPSB3YXNtLl90ZW1wTWVtU2l6ZSA+PiAyO1xuICAgICAgICBjb25zdCBtYXhDb3VudCA9IHRlbXBTaXplVTE2IC0gMTsgLyogUmVzZXJ2ZSBvbmUgdXNob3J0ICovXG5cbiAgICAgICAgY29uc3QgYnVmZmVyID0gd2FzbS5fdGVtcE1lbVVpbnQxNjtcbiAgICAgICAgYnVmZmVyW21heENvdW50XSA9IDA7IC8qIEluZGV4IG9mZnNldCAqL1xuXG4gICAgICAgIGNvbnN0IGJ1ZmZlclB0ciA9IHdhc20uX3RlbXBNZW07XG4gICAgICAgIGNvbnN0IGluZGV4UHRyID0gYnVmZmVyUHRyICsgbWF4Q291bnQgKiAyO1xuICAgICAgICBjb25zdCBuYW1lUHRyID0gd2FzbS50ZW1wVVRGOChuYW1lLCAobWF4Q291bnQgKyAxKSAqIDIpO1xuXG4gICAgICAgIGxldCByZWFkID0gMDtcbiAgICAgICAgY29uc3QgcmVzdWx0OiBPYmplY3QzRFtdID0gW107XG4gICAgICAgIHdoaWxlIChcbiAgICAgICAgICAgIChyZWFkID0gd2FzbS5fd2xfb2JqZWN0X2ZpbmRCeU5hbWVSZWN1cnNpdmUoXG4gICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgbmFtZVB0cixcbiAgICAgICAgICAgICAgICBpbmRleFB0cixcbiAgICAgICAgICAgICAgICBidWZmZXJQdHIsXG4gICAgICAgICAgICAgICAgbWF4Q291bnRcbiAgICAgICAgICAgICkpXG4gICAgICAgICkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWFkOyArK2kpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh0aGlzLl9zY2VuZS53cmFwKGJ1ZmZlcltpXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIGdpdmVuIG9iamVjdCdzIHRyYW5zZm9ybWF0aW9uIGhhcyBjaGFuZ2VkLlxuICAgICAqL1xuICAgIGdldCBjaGFuZ2VkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9lbmdpbmUud2FzbS5fd2xfb2JqZWN0X2lzX2NoYW5nZWQodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGB0cnVlYCBpZiB0aGUgb2JqZWN0IGlzIGRlc3Ryb3llZCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBJZiB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5lcmFzZVByb3RvdHlwZU9uRGVzdHJveX0gaXMgYHRydWVgLFxuICAgICAqIHJlYWRpbmcgYSBjdXN0b20gcHJvcGVydHkgd2lsbCBub3Qgd29yazpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogZW5naW5lLmVyYXNlUHJvdG90eXBlT25EZXN0cm95ID0gdHJ1ZTtcbiAgICAgKlxuICAgICAqIGNvbnN0IG9iaiA9IHNjZW5lLmFkZE9iamVjdCgpO1xuICAgICAqIG9iai5jdXN0b21QYXJhbSA9ICdIZWxsbyBXb3JsZCEnO1xuICAgICAqXG4gICAgICogY29uc29sZS5sb2cob2JqLmlzRGVzdHJveWVkKTsgLy8gUHJpbnRzIGBmYWxzZWBcbiAgICAgKiBvYmouZGVzdHJveSgpO1xuICAgICAqIGNvbnNvbGUubG9nKG9iai5pc0Rlc3Ryb3llZCk7IC8vIFByaW50cyBgdHJ1ZWBcbiAgICAgKiBjb25zb2xlLmxvZyhvYmouY3VzdG9tUGFyYW0pOyAvLyBUaHJvd3MgYW4gZXJyb3JcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjEuMVxuICAgICAqL1xuICAgIGdldCBpc0Rlc3Ryb3llZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lkIDwgMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBgdHJ1ZWAgaWYgdGhlIG9iamVjdCBpcyBtYXJrZWQgYXMgZGVzdHJveWVkLlxuICAgICAqXG4gICAgICogVGhpcyBib29sZWFuIHdpbGwgb25seSBldmVyIGJlIGB0cnVlYCB3aGVuIHJlYWRpbmcgb2JqZWN0cyBzdGF0ZVxuICAgICAqIGZyb20gdGhlIHtAbGluayBDb21wb25lbnQub25EZXN0cm95fSBjYWxsYmFjaywgaS5lLixcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogaW1wb3J0IHtDb21wb25lbnR9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4gICAgICogY2xhc3MgQ2xlYW51cENvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgICogICAgIG9uRGVzdHJveSgpIHtcbiAgICAgKiAgICAgICAgIGlmICh0aGlzLm9iamVjdC5tYXJrZWREZXN0cm95ZWQpIHtcbiAgICAgKiAgICAgICAgICAgICAvLyB0aGlzIG9iamVjdCBpcyBnZXR0aW5nIHJlbW92ZWRcbiAgICAgKiAgICAgICAgIH0gZWxzZSB7XG4gICAgICogICAgICAgICAgICAgLy8gVGhlIGNvbXBvbmVudCBpcyBnZXR0aW5nIGRlc3Ryb3llZCwgdGhlIG9iamVjdCB3aWxsXG4gICAgICogICAgICAgICAgICAgLy8gc3RpbGwgZXhpc3QgYWZ0ZXIgdGhlIGRlc3RydWN0aW9uIGNhbGxcbiAgICAgKiAgICAgICAgIH1cbiAgICAgKiAgICAgfVxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIENlcnRhaW4gb3BlcmF0aW9ucyBhcmUgZm9yYmlkZGVuIHdoZW4gYW4gb2JqZWN0IGlzIHBlbmRpbmcgZGVzdHJ1Y3Rpb246XG4gICAgICogLSBSZXBhcmVudGluZyB0aGUgb2JqZWN0IHZpYSB7QGxpbmsgcGFyZW50fVxuICAgICAqIC0ge0BsaW5rIGFkZENvbXBvbmVudH1cbiAgICAgKiAtIHtAbGluayBTY2VuZS5hZGRPYmplY3R9XG4gICAgICogLSB7QGxpbmsgU2NlbmUuZGVzdHJveX1cbiAgICAgKi9cbiAgICBnZXQgbWFya2VkRGVzdHJveWVkKCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgaWYgKCF3YXNtLl93bF9vYmplY3RfbWFya2VkRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAvKiogQHRvZG8oMS4zLjApOiBSZW1vdmUgY2hlY2sgZm9yIHJ1bnRpbWUgPCAxLjIuMiAqL1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhIXdhc20uX3dsX29iamVjdF9tYXJrZWREZXN0cm95ZWQodGhpcy5faWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBlcXVhbGl0eSBieSBjb21wYXJpbmcgaWRzIGFuZCAqKm5vdCoqIHRoZSBKYXZhU2NyaXB0IHJlZmVyZW5jZS5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGUgVXNlIEphdmFTY3JpcHQgcmVmZXJlbmNlIGNvbXBhcmlzb24gaW5zdGVhZDpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3Qgb2JqZWN0QSA9IHNjZW5lLmFkZE9iamVjdCgpO1xuICAgICAqIGNvbnN0IG9iamVjdEIgPSBzY2VuZS5hZGRPYmplY3QoKTtcbiAgICAgKiBjb25zdCBvYmplY3RDID0gb2JqZWN0QjtcbiAgICAgKiBjb25zb2xlLmxvZyhvYmplY3RBID09PSBvYmplY3RCKTsgLy8gZmFsc2VcbiAgICAgKiBjb25zb2xlLmxvZyhvYmplY3RBID09PSBvYmplY3RBKTsgLy8gdHJ1ZVxuICAgICAqIGNvbnNvbGUubG9nKG9iamVjdEIgPT09IG9iamVjdEMpOyAvLyB0cnVlXG4gICAgICogYGBgXG4gICAgICovXG4gICAgZXF1YWxzKG90aGVyT2JqZWN0OiBPYmplY3QzRCB8IHVuZGVmaW5lZCB8IG51bGwpOiBib29sZWFuIHtcbiAgICAgICAgLyoqIEB0b2RvKDIuMC4wKTogUmVtb3ZlIHRoaXMgbWV0aG9kLiAqL1xuICAgICAgICBpZiAoIW90aGVyT2JqZWN0KSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0aGlzLl9pZCA9PSBvdGhlck9iamVjdC5faWQ7XG4gICAgfVxuXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICByZXR1cm4gJ09iamVjdDNEKGRlc3Ryb3llZCknO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgT2JqZWN0M0QoJyR7dGhpcy5uYW1lfScsICR7dGhpcy5fbG9jYWxJZH0pYDtcbiAgICB9XG59XG5cbi8qKlxuICogV3JhcHBlciBhcm91bmQgYSBuYXRpdmUgc2tpbiBkYXRhLlxuICovXG5leHBvcnQgY2xhc3MgU2tpbiBleHRlbmRzIFNjZW5lUmVzb3VyY2Uge1xuICAgIC8qKiBBbW91bnQgb2Ygam9pbnRzIGluIHRoaXMgc2tpbi4gKi9cbiAgICBnZXQgam9pbnRDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLndhc20uX3dsX3NraW5fZ2V0X2pvaW50X2NvdW50KHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKiogSm9pbnRzIG9iamVjdCBpZHMgZm9yIHRoaXMgc2tpbiAqL1xuICAgIGdldCBqb2ludElkcygpOiBVaW50MTZBcnJheSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQxNkFycmF5KFxuICAgICAgICAgICAgd2FzbS5IRUFQVTE2LmJ1ZmZlcixcbiAgICAgICAgICAgIHdhc20uX3dsX3NraW5fam9pbnRfaWRzKHRoaXMuX2lkKSxcbiAgICAgICAgICAgIHRoaXMuam9pbnRDb3VudFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIER1YWwgcXVhdGVybmlvbnMgaW4gYSBmbGF0IGFycmF5IG9mIHNpemUgOCB0aW1lcyB7QGxpbmsgam9pbnRDb3VudH0uXG4gICAgICpcbiAgICAgKiBJbnZlcnNlIGJpbmQgdHJhbnNmb3JtcyBvZiB0aGUgc2tpbi5cbiAgICAgKi9cbiAgICBnZXQgaW52ZXJzZUJpbmRUcmFuc2Zvcm1zKCk6IEZsb2F0MzJBcnJheSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShcbiAgICAgICAgICAgIHdhc20uSEVBUEYzMi5idWZmZXIsXG4gICAgICAgICAgICB3YXNtLl93bF9za2luX2ludmVyc2VfYmluZF90cmFuc2Zvcm1zKHRoaXMuX2lkKSxcbiAgICAgICAgICAgIDggKiB0aGlzLmpvaW50Q291bnRcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBWZWN0b3JzIGluIGEgZmxhdCBhcnJheSBvZiBzaXplIDMgdGltZXMge0BsaW5rIGpvaW50Q291bnR9LlxuICAgICAqXG4gICAgICogSW52ZXJzZSBiaW5kIHNjYWxpbmdzIG9mIHRoZSBza2luLlxuICAgICAqL1xuICAgIGdldCBpbnZlcnNlQmluZFNjYWxpbmdzKCk6IEZsb2F0MzJBcnJheSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShcbiAgICAgICAgICAgIHdhc20uSEVBUEYzMi5idWZmZXIsXG4gICAgICAgICAgICB3YXNtLl93bF9za2luX2ludmVyc2VfYmluZF9zY2FsaW5ncyh0aGlzLl9pZCksXG4gICAgICAgICAgICAzICogdGhpcy5qb2ludENvdW50XG4gICAgICAgICk7XG4gICAgfVxufVxuXG4vKipcbiAqIFdyYXBwZXIgYXJvdW5kIGEgbmF0aXZlIHNldCBvZiBtb3JwaCB0YXJnZXRzLlxuICpcbiAqICMjIFVzYWdlXG4gKlxuICogYGBganNcbiAqIGNvbnN0IG1lc2ggPSBvYmplY3QuZ2V0Q29tcG9uZW50KCdtZXNoJyk7XG4gKiBjb25zdCBtb3V0aFRhcmdldCA9IG1lc2gubW9ycGhUYXJnZXRzLmdldFRhcmdldEluZGV4KCdtb3V0aCcpO1xuICogbWVzaC5zZXRNb3JwaFRhcmdldFdlaWdodChtb3V0aFRhcmdldCwgMC41KTtcbiAqIGBgYFxuICpcbiAqIEBzaW5jZSAxLjIuMFxuICovXG5leHBvcnQgY2xhc3MgTW9ycGhUYXJnZXRzIGV4dGVuZHMgUmVzb3VyY2Uge1xuICAgIC8qKiBBbW91bnQgb2YgdGFyZ2V0cyBpbiB0aGlzIG1vcnBoIHRhcmdldCBzZXQuICovXG4gICAgZ2V0IGNvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUud2FzbS5fd2xfbW9ycGhfdGFyZ2V0c19nZXRfdGFyZ2V0X2NvdW50KHRoaXMuX2lkKTtcbiAgICB9XG5cbiAgICAvKiogUmV0dXJucyB0aGUgbmFtZSBvZiBhIGdpdmVuIHRhcmdldCAqL1xuICAgIGdldFRhcmdldE5hbWUodGFyZ2V0OiBudW1iZXIpOiBzdHJpbmcge1xuICAgICAgICBpZiAodGFyZ2V0ID49IHRoaXMuY291bnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5kZXggJHt0YXJnZXR9IGlzIG91dCBvZiBib3VuZHMgZm9yICR7dGhpcy5jb3VudH0gdGFyZ2V0c2ApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICByZXR1cm4gd2FzbS5VVEY4VG9TdHJpbmcod2FzbS5fd2xfbW9ycGhfdGFyZ2V0c19nZXRfdGFyZ2V0X25hbWUodGhpcy5faWQsIHRhcmdldCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaW5kZXggZm9yIGEgZ2l2ZW4gdGFyZ2V0IG5hbWUuXG4gICAgICpcbiAgICAgKiBUaHJvd3MgaWYgbm8gdGFyZ2V0IHdpdGggdGhhdCBuYW1lIGV4aXN0cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIHRhcmdldC5cbiAgICAgKi9cbiAgICBnZXRUYXJnZXRJbmRleChuYW1lOiBzdHJpbmcpOiBudW1iZXIge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgaW5kZXggPSB3YXNtLl93bF9tb3JwaF90YXJnZXRzX2dldF90YXJnZXRfaW5kZXgoXG4gICAgICAgICAgICB0aGlzLl9pZCxcbiAgICAgICAgICAgIHdhc20udGVtcFVURjgobmFtZSlcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYE1pc3NpbmcgdGFyZ2V0ICcke25hbWV9J2ApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmRleDtcbiAgICB9XG59XG5cbi8qIEZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IHdpdGggPCAxLjAuMC4gKi9cbmV4cG9ydCB7T2JqZWN0M0QgYXMgT2JqZWN0fTtcblxuLyoqXG4gKiBSYXkgaGl0LlxuICpcbiAqIFJlc3VsdCBvZiBhIHtAbGluayBTY2VuZS5yYXlDYXN0fSBvciB7QGxpbmsgUGh5c2ljcy5yYXlDYXN0fS5cbiAqXG4gKiBAbm90ZSB0aGlzIGNsYXNzIHdyYXBzIGludGVybmFsIGVuZ2luZSBkYXRhIGFuZCBzaG91bGQgb25seSBiZSBjcmVhdGVkIGludGVybmFsbHkuXG4gKi9cbmV4cG9ydCBjbGFzcyBSYXlIaXQge1xuICAgIC8qKiBTY2VuZSBpbnN0YW5jZS4gQGhpZGRlbiAqL1xuICAgIHJlYWRvbmx5IF9zY2VuZTogU2NlbmU7XG5cbiAgICAvKiogUG9pbnRlciB0byB0aGUgbWVtb3J5IGhlYXAuICovXG4gICAgcHJpdmF0ZSBfcHRyOiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gcHRyIFBvaW50ZXIgdG8gdGhlIHJheSBoaXRzIG1lbW9yeS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzY2VuZTogU2NlbmUsIHB0cjogbnVtYmVyKSB7XG4gICAgICAgIGlmICgocHRyICYgMykgIT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzYWxpZ25lZCBwb2ludGVyOiBwbGVhc2UgcmVwb3J0IGEgYnVnJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc2NlbmUgPSBzY2VuZTtcbiAgICAgICAgdGhpcy5fcHRyID0gcHRyO1xuICAgIH1cblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRMb2NhdGlvbnMoKTogRmxvYXQzMkFycmF5W107XG4gICAgLyoqXG4gICAgICogQXJyYXkgb2YgcmF5IGhpdCBsb2NhdGlvbnMuXG4gICAgICpcbiAgICAgKiAjIyMjIFVzYWdlXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IGhpdCA9IGVuZ2luZS5waHlzaWNzLnJheUNhc3QoKTtcbiAgICAgKiBpZiAoaGl0LmhpdENvdW50ID4gMCkge1xuICAgICAqICAgICBjb25zdCBsb2NhdGlvbnMgPSBoaXQuZ2V0TG9jYXRpb25zKCk7XG4gICAgICogICAgIGNvbnNvbGUubG9nKGBPYmplY3QgaGl0IGF0OiAke2xvY2F0aW9uc1swXVswXX0sICR7bG9jYXRpb25zWzBdWzFdfSwgJHtsb2NhdGlvbnNbMF1bMl19YCk7XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBEZXN0aW5hdGlvbiBhcnJheSBvZiBhcnJheXMvdmVjdG9ycywgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdFxuICAgICAqICAgICBgdGhpcy5oaXRDb3VudGAgZWxlbWVudHMuIEVhY2ggYXJyYXkgaXMgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCAzIGVsZW1lbnRzLlxuICAgICAqIEByZXR1cm5zIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICovXG4gICAgZ2V0TG9jYXRpb25zPFQgZXh0ZW5kcyBOdW1iZXJBcnJheVtdPihvdXQ6IFQpOiBUO1xuICAgIGdldExvY2F0aW9ucyhvdXQ/OiBOdW1iZXJBcnJheVtdKTogTnVtYmVyQXJyYXlbXSB7XG4gICAgICAgIG91dCA9IG91dCA/PyBBcnJheS5mcm9tKHtsZW5ndGg6IHRoaXMuaGl0Q291bnR9LCAoKSA9PiBuZXcgRmxvYXQzMkFycmF5KDMpKTtcblxuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgYWxpZ25lZFB0ciA9IHRoaXMuX3B0ciAvIDQ7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaGl0Q291bnQ7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgbG9jYXRpb25QdHIgPSBhbGlnbmVkUHRyICsgMyAqIGk7XG4gICAgICAgICAgICBvdXRbaV1bMF0gPSB3YXNtLkhFQVBGMzJbbG9jYXRpb25QdHJdO1xuICAgICAgICAgICAgb3V0W2ldWzFdID0gd2FzbS5IRUFQRjMyW2xvY2F0aW9uUHRyICsgMV07XG4gICAgICAgICAgICBvdXRbaV1bMl0gPSB3YXNtLkhFQVBGMzJbbG9jYXRpb25QdHIgKyAyXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXROb3JtYWxzKCk6IEZsb2F0MzJBcnJheVtdO1xuICAgIC8qKlxuICAgICAqIEFycmF5IG9mIHJheSBoaXQgbm9ybWFscyAob25seSB3aGVuIHVzaW5nIHtAbGluayBQaHlzaWNzI3JheUNhc3R9LlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBEZXN0aW5hdGlvbiBhcnJheSBvZiBhcnJheXMvdmVjdG9ycywgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdFxuICAgICAqICAgICBgdGhpcy5oaXRDb3VudGAgZWxlbWVudHMuIEVhY2ggYXJyYXkgaXMgZXhwZWN0ZWQgdG8gaGF2ZSBhdCBsZWFzdCAzIGVsZW1lbnRzLlxuICAgICAqIEByZXR1cm5zIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICovXG4gICAgZ2V0Tm9ybWFsczxUIGV4dGVuZHMgTnVtYmVyQXJyYXlbXT4ob3V0OiBUKTogVDtcbiAgICBnZXROb3JtYWxzKG91dD86IE51bWJlckFycmF5W10pOiBOdW1iZXJBcnJheVtdIHtcbiAgICAgICAgb3V0ID0gb3V0ID8/IEFycmF5LmZyb20oe2xlbmd0aDogdGhpcy5oaXRDb3VudH0sICgpID0+IG5ldyBGbG9hdDMyQXJyYXkoMykpO1xuXG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBhbGlnbmVkUHRyID0gKHRoaXMuX3B0ciArIDQ4KSAvIDQ7IC8qIEFsaWduIEYzMiAqL1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaGl0Q291bnQ7ICsraSkge1xuICAgICAgICAgICAgY29uc3Qgbm9ybWFsUHRyID0gYWxpZ25lZFB0ciArIDMgKiBpO1xuICAgICAgICAgICAgb3V0W2ldWzBdID0gd2FzbS5IRUFQRjMyW25vcm1hbFB0cl07XG4gICAgICAgICAgICBvdXRbaV1bMV0gPSB3YXNtLkhFQVBGMzJbbm9ybWFsUHRyICsgMV07XG4gICAgICAgICAgICBvdXRbaV1bMl0gPSB3YXNtLkhFQVBGMzJbbm9ybWFsUHRyICsgMl07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0RGlzdGFuY2VzKCk6IEZsb2F0MzJBcnJheTtcbiAgICAvKipcbiAgICAgKiBQcmVmZXIgdGhlc2UgdG8gcmVjYWxjdWxhdGluZyB0aGUgZGlzdGFuY2UgZnJvbSBsb2NhdGlvbnMuXG4gICAgICpcbiAgICAgKiBEaXN0YW5jZXMgb2YgYXJyYXkgaGl0cyB0byByYXkgb3JpZ2luLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBEZXN0aW5hdGlvbiBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgdGhpcy5oaXRDb3VudCBlbGVtZW50cy5cbiAgICAgKiBAcmV0dXJucyBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqL1xuICAgIGdldERpc3RhbmNlczxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCk6IFQ7XG4gICAgZ2V0RGlzdGFuY2VzKG91dDogTnVtYmVyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuaGl0Q291bnQpKTogTnVtYmVyQXJyYXkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgYWxpZ25lZFB0ciA9ICh0aGlzLl9wdHIgKyA0OCAqIDIpIC8gNDsgLyogQWxpZ24gRjMyICovXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5oaXRDb3VudDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBkaXN0YW5jZVB0ciA9IGFsaWduZWRQdHIgKyBpO1xuICAgICAgICAgICAgb3V0W2ldID0gd2FzbS5IRUFQRjMyW2Rpc3RhbmNlUHRyXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFycmF5IG9mIGhpdCBvYmplY3RzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBEZXN0aW5hdGlvbiBhcnJheS92ZWN0b3IsIGV4cGVjdGVkIHRvIGhhdmUgYXQgbGVhc3QgYHRoaXMuaGl0Q291bnRgIGVsZW1lbnRzLlxuICAgICAqIEByZXR1cm5zIFRoZSBgb3V0YCBwYXJhbWV0ZXIuXG4gICAgICovXG4gICAgZ2V0T2JqZWN0cyhvdXQ6IE9iamVjdDNEW10gPSBuZXcgQXJyYXkodGhpcy5oaXRDb3VudCkpOiBPYmplY3QzRFtdIHtcbiAgICAgICAgY29uc3QgSEVBUFUxNiA9IHRoaXMuZW5naW5lLndhc20uSEVBUFUxNjtcbiAgICAgICAgY29uc3QgYWxpZ25lZFB0ciA9ICh0aGlzLl9wdHIgKyAoNDggKiAyICsgMTYpKSA+PiAxO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaGl0Q291bnQ7ICsraSkge1xuICAgICAgICAgICAgb3V0W2ldID0gdGhpcy5fc2NlbmUud3JhcChIRUFQVTE2W2FsaWduZWRQdHIgKyBpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICAvKiogSG9zdGluZyBlbmdpbmUgaW5zdGFuY2UuICovXG4gICAgZ2V0IGVuZ2luZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjZW5lLmVuZ2luZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBSYXlIaXQuZ2V0TG9jYXRpb25zfS5cbiAgICAgKlxuICAgICAqIEBub3RlIFByZWZlciB0byB1c2Uge0BsaW5rIFJheUhpdC5nZXRMb2NhdGlvbnN9IGZvciBwZXJmb3JtYW5jZS5cbiAgICAgKi9cbiAgICBnZXQgbG9jYXRpb25zKCk6IEZsb2F0MzJBcnJheVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TG9jYXRpb25zKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byB7QGxpbmsgUmF5SGl0LmdldE5vcm1hbHN9LlxuICAgICAqXG4gICAgICogQG5vdGUgUHJlZmVyIHRvIHVzZSB7QGxpbmsgUmF5SGl0LmdldE5vcm1hbHN9IGZvciBwZXJmb3JtYW5jZS5cbiAgICAgKi9cbiAgICBnZXQgbm9ybWFscygpOiBGbG9hdDMyQXJyYXlbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE5vcm1hbHMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBSYXlIaXQuZ2V0RGlzdGFuY2VzfS5cbiAgICAgKlxuICAgICAqIEBub3RlIFByZWZlciB0byB1c2Uge0BsaW5rIFJheUhpdC5nZXREaXN0YW5jZXN9IGZvciBwZXJmb3JtYW5jZS5cbiAgICAgKi9cbiAgICBnZXQgZGlzdGFuY2VzKCk6IEZsb2F0MzJBcnJheSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldERpc3RhbmNlcygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8ge0BsaW5rIFJheUhpdC5nZXRPYmplY3RzfS5cbiAgICAgKlxuICAgICAqIEBub3RlIFByZWZlciB0byB1c2Uge0BsaW5rIFJheUhpdC5nZXRPYmplY3RzfSBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICovXG4gICAgZ2V0IG9iamVjdHMoKTogKE9iamVjdDNEIHwgbnVsbClbXSB7XG4gICAgICAgIC8qKiBAdG9kbzogUmVtb3ZlIGF0IDIuMC4wLCB0aGlzIGlzIGtlcHQgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkuICovXG4gICAgICAgIGNvbnN0IG9iamVjdHM6IChPYmplY3QzRCB8IG51bGwpW10gPSBbbnVsbCwgbnVsbCwgbnVsbCwgbnVsbF07XG4gICAgICAgIHJldHVybiB0aGlzLmdldE9iamVjdHMob2JqZWN0cyBhcyBPYmplY3QzRFtdKTtcbiAgICB9XG5cbiAgICAvKiogTnVtYmVyIG9mIGhpdHMgKG1heCA0KSAqL1xuICAgIGdldCBoaXRDb3VudCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gTWF0aC5taW4odGhpcy5lbmdpbmUud2FzbS5IRUFQVTMyW3RoaXMuX3B0ciAvIDQgKyAzMF0sIDQpO1xuICAgIH1cbn1cblxuY2xhc3MgbWF0aCB7XG4gICAgLyoqIChFeHBlcmltZW50YWwhKSBDdWJpYyBIZXJtaXRlIHNwbGluZSBpbnRlcnBvbGF0aW9uIGZvciB2ZWN0b3IzIGFuZCBxdWF0ZXJuaW9ucy5cbiAgICAgKlxuICAgICAqIFdpdGggYGYgPT0gMGAsIGBvdXRgIHdpbGwgYmUgYGJgLCBpZiBgZiA9PSAxYCwgYG91dGAgd2lsbCBiZSBjLlxuICAgICAqXG4gICAgICogV2hldGhlciBhIHF1YXRlcm5pb24gb3IgdmVjdG9yMyBpbnRlcnBvbGF0aW9uIGlzIGludGVuZGVkIGlzIGRldGVybWluZWQgYnlcbiAgICAgKiBsZW5ndGggb2YgYGFgLlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dCBBcnJheSB0byB3cml0ZSByZXN1bHQgdG8uXG4gICAgICogQHBhcmFtIGEgRmlyc3QgdGFuZ2VudC9oYW5kbGUuXG4gICAgICogQHBhcmFtIGIgRmlyc3QgcG9pbnQgb3IgcXVhdGVybmlvbi5cbiAgICAgKiBAcGFyYW0gYyBTZWNvbmQgcG9pbnQgb3IgcXVhdGVybmlvbi5cbiAgICAgKiBAcGFyYW0gZCBTZWNvbmQgaGFuZGxlLlxuICAgICAqIEBwYXJhbSBmIEludGVycG9sYXRpb24gZmFjdG9yIGluIFswOyAxXS5cbiAgICAgKiBAcmV0dXJucyBUaGUgYG91dGAgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogQHNpbmNlIDAuOC42XG4gICAgICovXG4gICAgc3RhdGljIGN1YmljSGVybWl0ZTxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KFxuICAgICAgICBvdXQ6IFQsXG4gICAgICAgIGE6IFJlYWRvbmx5PE51bWJlckFycmF5PixcbiAgICAgICAgYjogUmVhZG9ubHk8TnVtYmVyQXJyYXk+LFxuICAgICAgICBjOiBSZWFkb25seTxOdW1iZXJBcnJheT4sXG4gICAgICAgIGQ6IFJlYWRvbmx5PE51bWJlckFycmF5PixcbiAgICAgICAgZjogbnVtYmVyLFxuICAgICAgICBlbmdpbmU6IFdvbmRlcmxhbmRFbmdpbmUgPSBXTFxuICAgICkge1xuICAgICAgICBjb25zdCB3YXNtID0gZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdC5zdWJhcnJheSgwKS5zZXQoYSk7XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdC5zdWJhcnJheSg0KS5zZXQoYik7XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdC5zdWJhcnJheSg4KS5zZXQoYyk7XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdC5zdWJhcnJheSgxMikuc2V0KGQpO1xuXG4gICAgICAgIGNvbnN0IGlzUXVhdCA9IGEubGVuZ3RoID09IDQ7XG5cbiAgICAgICAgd2FzbS5fd2xfbWF0aF9jdWJpY0hlcm1pdGUoXG4gICAgICAgICAgICB3YXNtLl90ZW1wTWVtICsgNCAqIDE2LFxuICAgICAgICAgICAgd2FzbS5fdGVtcE1lbSArIDQgKiAwLFxuICAgICAgICAgICAgd2FzbS5fdGVtcE1lbSArIDQgKiA0LFxuICAgICAgICAgICAgd2FzbS5fdGVtcE1lbSArIDQgKiA4LFxuICAgICAgICAgICAgd2FzbS5fdGVtcE1lbSArIDQgKiAxMixcbiAgICAgICAgICAgIGYsXG4gICAgICAgICAgICBpc1F1YXRcbiAgICAgICAgKTtcbiAgICAgICAgb3V0WzBdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzE2XTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzE3XTtcbiAgICAgICAgb3V0WzJdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzE4XTtcbiAgICAgICAgaWYgKGlzUXVhdCkgb3V0WzNdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzE5XTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG59XG5cbmV4cG9ydCB7bWF0aH07XG5cbi8qKlxuICogQ2xhc3MgZm9yIGFjY2Vzc2luZyBpbnRlcm5hdGlvbmFsaXphdGlvbiAoaTE4bikgZmVhdHVyZXMuXG4gKlxuICogQWxsb3dzIHtAbGluayBJMThOLm9uTGFuZ3VhZ2VDaGFuZ2VkIFwiZGV0ZWN0aW5nIGxhbmd1YWdlIGNoYW5nZVwifSxcbiAqIHtAbGluayBJMThOLmxhbmd1YWdlIFwic2V0dGluZyB0aGUgY3VycmVudCBsYW5ndWFnZVwifSBvciB0cmFuc2xhdGluZ1xuICoge0BsaW5rIEkxOE4udHJhbnNsYXRlIFwiaW5kaXZpZHVhbCB0ZXJtc1wifS5cbiAqXG4gKiBJbnRlcm5hdGlvbmFsaXphdGlvbiB3b3JrcyB3aXRoIHRlcm1zLFxuICogYSBzdHJpbmcgdHlwZSBrZXl3b3JkIHRoYXQgaXMgbGlua2VkIHRvIGEgZGlmZmVyZW50IHRleHQgZm9yIGVhY2ggbGFuZ3VhZ2UuXG4gKlxuICogSW50ZXJuYWxseSwgc3RyaW5nIHBhcmFtZXRlcnMgZm9yIHRleHQgYW5kIGpzIGNvbXBvbmVudHMgYXJlXG4gKiBhdXRvbWF0aWNhbGx5IHN3YXBwZWQgZHVyaW5nIGxhbmd1YWdlIGNoYW5nZSwgZ2l2ZW4gdGhleSBhcmUgbGlua2VkIHRvIGEgdGVybS5cbiAqIElmIG1hbnVhbCB0ZXh0IHN3YXBwaW5nIGlzIGRlc2lyZWQsIHtAbGluayBJMThOLnRyYW5zbGF0ZX1cbiAqIGNhbiBiZSB1c2VkIHRvIHJldHJpZXZlIHRoZSBjdXJyZW50IHRyYW5zbGF0aW9uIGZvciBhbnkgdGVybS5cbiAqXG4gKiBZb3UgY2FuIGFsc28gdXNlIHRoZSB7QGxpbmsgSTE4Ti5vbkxhbmd1YWdlQ2hhbmdlZH0gdG8gbWFudWFsbHkgdXBkYXRlIHRleHRcbiAqIHdoZW4gYSBsYW5ndWFnZSBpcyBjaGFuZ2VkIHRvIGZvciBleGFtcGxlIHVwZGF0ZSBhIG51bWJlciBpbiBhIHN0cmluZy5cbiAqXG4gKiBAc2luY2UgMS4wLjBcbiAqL1xuZXhwb3J0IGNsYXNzIEkxOE4ge1xuICAgIC8qKlxuICAgICAqIHtAbGluayBFbWl0dGVyfSBmb3IgbGFuZ3VhZ2UgY2hhbmdlIGV2ZW50cy5cbiAgICAgKlxuICAgICAqIEZpcnN0IHBhcmFtZXRlciB0byBhIGxpc3RlbmVyIGlzIHRoZSBvbGQgbGFuZ3VhZ2UgaW5kZXgsXG4gICAgICogc2Vjb25kIHBhcmFtZXRlciBpcyB0aGUgbmV3IGxhbmd1YWdlIGluZGV4LlxuICAgICAqXG4gICAgICogVXNhZ2UgZnJvbSBhIHdpdGhpbiBhIGNvbXBvbmVudDpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogdGhpcy5lbmdpbmUuaTE4bi5vbkxhbmd1YWdlQ2hhbmdlZC5hZGQoKG9sZExhbmd1YWdlSW5kZXgsIG5ld0xhbmd1YWdlSW5kZXgpID0+IHtcbiAgICAgKiAgICAgY29uc3Qgb2xkTGFuZ3VhZ2UgPSB0aGlzLmVuZ2luZS5pMThuLmxhbmd1YWdlTmFtZShvbGRMYW5ndWFnZUluZGV4KTtcbiAgICAgKiAgICAgY29uc3QgbmV3TGFuZ3VhZ2UgPSB0aGlzLmVuZ2luZS5pMThuLmxhbmd1YWdlTmFtZShuZXdMYW5ndWFnZUluZGV4KTtcbiAgICAgKiAgICAgY29uc29sZS5sb2coXCJTd2l0Y2hlZCBmcm9tXCIsIG9sZExhbmd1YWdlLCBcInRvXCIsIG5ld0xhbmd1YWdlKTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICByZWFkb25seSBvbkxhbmd1YWdlQ2hhbmdlZCA9IG5ldyBFbWl0dGVyPFtudW1iZXIsIG51bWJlcl0+KCk7XG5cbiAgICAvKiogV29uZGVybGFuZCBFbmdpbmUgaW5zdGFuY2UuIEBoaWRkZW4gKi9cbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgX2VuZ2luZTogV29uZGVybGFuZEVuZ2luZTtcblxuICAgIC8qKiBQcmV2aW91c2x5IHNldCBsYW5ndWFnZSBpbmRleC4gQGhpZGRlbiAqL1xuICAgIHByaXZhdGUgX3ByZXZMYW5ndWFnZUluZGV4OiBudW1iZXIgPSAtMTtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZW5naW5lOiBXb25kZXJsYW5kRW5naW5lKSB7XG4gICAgICAgIHRoaXMuX2VuZ2luZSA9IGVuZ2luZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgY3VycmVudCBsYW5ndWFnZSBhbmQgYXBwbHkgdHJhbnNsYXRpb25zIHRvIGxpbmtlZCB0ZXh0IHBhcmFtZXRlcnMuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGlzIGVxdWl2YWxlbnQgdG8ge0BsaW5rIEkxOE4uc2V0TGFuZ3VhZ2V9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvZGUgTGFuZ3VhZ2UgY29kZSB0byBzd2l0Y2ggdG9cbiAgICAgKi9cbiAgICBzZXQgbGFuZ3VhZ2UoY29kZTogc3RyaW5nIHwgbnVsbCkge1xuICAgICAgICB0aGlzLnNldExhbmd1YWdlKGNvZGUpO1xuICAgIH1cblxuICAgIC8qKiBHZXQgY3VycmVudCBsYW5ndWFnZSBjb2RlLiAqL1xuICAgIGdldCBsYW5ndWFnZSgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBjb2RlID0gd2FzbS5fd2xfaTE4bl9jdXJyZW50TGFuZ3VhZ2UoKTtcbiAgICAgICAgaWYgKGNvZGUgPT09IDApIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gd2FzbS5VVEY4VG9TdHJpbmcoY29kZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjdXJyZW50IGxhbmd1YWdlIGluZGV4LlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbW9yZSBlZmZpY2llbnQgdGhhbiBpdHMgZXF1aXZhbGVudDpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgaW5kZXggPSBpMThuLmxhbmd1YWdlSW5kZXgoaTE4bi5sYW5ndWFnZSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgZ2V0IGN1cnJlbnRJbmRleCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5naW5lLndhc20uX3dsX2kxOG5fY3VycmVudExhbmd1YWdlSW5kZXgoKTtcbiAgICB9XG5cbiAgICAvKiogUHJldmlvdXMgbGFuZ3VhZ2UgaW5kZXguICovXG4gICAgZ2V0IHByZXZpb3VzSW5kZXgoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ByZXZMYW5ndWFnZUluZGV4O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBjdXJyZW50IGxhbmd1YWdlIGFuZCBhcHBseSB0cmFuc2xhdGlvbnMgdG8gbGlua2VkIHRleHQgcGFyYW1ldGVycy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb2RlIFRoZSBsYW5ndWFnZSBjb2RlLlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGN1cnJlbnQgaW5kZXggY29kZSB3aGVuIHRoZVxuICAgICAqICAgICBsYW5ndWFnZSBpcyBsb2FkZWQuXG4gICAgICovXG4gICAgYXN5bmMgc2V0TGFuZ3VhZ2UoY29kZTogc3RyaW5nIHwgbnVsbCk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgICAgIGlmIChjb2RlID09IG51bGwpIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5jdXJyZW50SW5kZXgpO1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHRoaXMuX3ByZXZMYW5ndWFnZUluZGV4ID0gdGhpcy5jdXJyZW50SW5kZXg7XG4gICAgICAgIHdhc20uX3dsX2kxOG5fc2V0TGFuZ3VhZ2Uod2FzbS50ZW1wVVRGOChjb2RlKSk7XG5cbiAgICAgICAgY29uc3Qgc2NlbmUgPSB0aGlzLmVuZ2luZS5zY2VuZTtcblxuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IHdhc20uVVRGOFRvU3RyaW5nKHdhc20uX3dsX2kxOG5fbGFuZ3VhZ2VGaWxlKHRoaXMuY3VycmVudEluZGV4KSk7XG4gICAgICAgIGNvbnN0IHVybCA9IGAke3NjZW5lLmJhc2VVUkx9L2xvY2FsZS8ke2ZpbGVuYW1lfWA7XG5cbiAgICAgICAgYXdhaXQgc2NlbmUuX2Rvd25sb2FkRGVwZW5kZW5jeSh1cmwpO1xuXG4gICAgICAgIHRoaXMub25MYW5ndWFnZUNoYW5nZWQubm90aWZ5KHRoaXMuX3ByZXZMYW5ndWFnZUluZGV4LCB0aGlzLmN1cnJlbnRJbmRleCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudEluZGV4O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0cmFuc2xhdGVkIHN0cmluZyBmb3IgYSB0ZXJtIGZvciB0aGUgY3VycmVudGx5IGxvYWRlZCBsYW5ndWFnZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0ZXJtIFRlcm0gdG8gdHJhbnNsYXRlXG4gICAgICovXG4gICAgdHJhbnNsYXRlKHRlcm06IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHRyYW5zbGF0aW9uID0gd2FzbS5fd2xfaTE4bl90cmFuc2xhdGUod2FzbS50ZW1wVVRGOCh0ZXJtKSk7XG4gICAgICAgIGlmICh0cmFuc2xhdGlvbiA9PT0gMCkgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiB3YXNtLlVURjhUb1N0cmluZyh0cmFuc2xhdGlvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBudW1iZXIgb2YgbGFuZ3VhZ2VzIGluIHRoZSBwcm9qZWN0LlxuICAgICAqXG4gICAgICovXG4gICAgbGFuZ3VhZ2VDb3VudCgpOiBudW1iZXIge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fZW5naW5lLndhc207XG4gICAgICAgIHJldHVybiB3YXNtLl93bF9pMThuX2xhbmd1YWdlQ291bnQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYSBsYW5ndWFnZSBjb2RlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGluZGV4IEluZGV4IG9mIHRoZSBsYW5ndWFnZSB0byBnZXQgdGhlIGNvZGUgZnJvbVxuICAgICAqL1xuICAgIGxhbmd1YWdlSW5kZXgoY29kZTogc3RyaW5nKTogbnVtYmVyIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICByZXR1cm4gd2FzbS5fd2xfaTE4bl9sYW5ndWFnZUluZGV4KHdhc20udGVtcFVURjgoY29kZSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhIGxhbmd1YWdlIGNvZGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW5kZXggSW5kZXggb2YgdGhlIGxhbmd1YWdlIHRvIGdldCB0aGUgY29kZSBmcm9tXG4gICAgICovXG4gICAgbGFuZ3VhZ2VDb2RlKGluZGV4OiBudW1iZXIpOiBzdHJpbmcgfCBudWxsIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuX2VuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBjb2RlID0gd2FzbS5fd2xfaTE4bl9sYW5ndWFnZUNvZGUoaW5kZXgpO1xuICAgICAgICBpZiAoY29kZSA9PT0gMCkgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiB3YXNtLlVURjhUb1N0cmluZyhjb2RlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYSBsYW5ndWFnZSBuYW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIGluZGV4IEluZGV4IG9mIHRoZSBsYW5ndWFnZSB0byBnZXQgdGhlIG5hbWUgZnJvbVxuICAgICAqL1xuICAgIGxhbmd1YWdlTmFtZShpbmRleDogbnVtYmVyKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLl9lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgbmFtZSA9IHdhc20uX3dsX2kxOG5fbGFuZ3VhZ2VOYW1lKGluZGV4KTtcbiAgICAgICAgaWYgKG5hbWUgPT09IDApIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gd2FzbS5VVEY4VG9TdHJpbmcobmFtZSk7XG4gICAgfVxuXG4gICAgLyoqIEhvc3RpbmcgZW5naW5lIGluc3RhbmNlLiAqL1xuICAgIGdldCBlbmdpbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmdpbmU7XG4gICAgfVxufVxuXG4vKiogUHJvcGVydGllcyBvZiBhIFdlYlhSIHNlc3Npb24gKi9cbmV4cG9ydCBjbGFzcyBYUiB7XG4gICAgLyoqIFdvbmRlcmxhbmQgV0FTTSBicmlkZ2UuIEBoaWRkZW4gKi9cbiAgICByZWFkb25seSAjd2FzbTogV0FTTTtcbiAgICByZWFkb25seSAjbW9kZTogWFJTZXNzaW9uTW9kZTtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIHdhc20gV2FzbSBicmlkZ2UgaW5zdGFuY2VcbiAgICAgKiBAcGFyYW0gbW9kZSBDdXJyZW50IFhSIHNlc3Npb24gbW9kZVxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHdhc206IFdBU00sIG1vZGU6IFhSU2Vzc2lvbk1vZGUpIHtcbiAgICAgICAgdGhpcy4jd2FzbSA9IHdhc207XG4gICAgICAgIHRoaXMuI21vZGUgPSBtb2RlO1xuICAgIH1cblxuICAgIC8qKiBDdXJyZW50IFdlYlhSIHNlc3Npb24gbW9kZSAqL1xuICAgIGdldCBzZXNzaW9uTW9kZSgpOiBYUlNlc3Npb25Nb2RlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI21vZGU7XG4gICAgfVxuXG4gICAgLyoqIEN1cnJlbnQgV2ViWFIgc2Vzc2lvbiAqL1xuICAgIGdldCBzZXNzaW9uKCk6IFhSU2Vzc2lvbiB7XG4gICAgICAgIHJldHVybiB0aGlzLiN3YXNtLndlYnhyX3Nlc3Npb24hO1xuICAgIH1cblxuICAgIC8qKiBDdXJyZW50IFdlYlhSIGZyYW1lICovXG4gICAgZ2V0IGZyYW1lKCk6IFhSRnJhbWUge1xuICAgICAgICByZXR1cm4gdGhpcy4jd2FzbS53ZWJ4cl9mcmFtZSE7XG4gICAgfVxuXG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIHJlZmVyZW5jZVNwYWNlRm9yVHlwZSh0eXBlOiAndmlld2VyJyk6IFhSUmVmZXJlbmNlU3BhY2U7XG4gICAgLyoqXG4gICAgICogR2V0IGEgV2ViWFIgcmVmZXJlbmNlIHNwYWNlIG9mIGEgZ2l2ZW4gcmVmZXJlbmNlIHNwYWNlIHR5cGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHlwZSBUeXBlIG9mIHJlZmVyZW5jZSBzcGFjZSB0byBnZXRcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2Ugc3BhY2UsIG9yIGBudWxsYCBpZiB0aGVyZSdzIG5vIHJlZmVyZW5jZSBzcGFjZVxuICAgICAqICAgICBvZiB0aGUgcmVxdWVzdGVkIHR5cGUgYXZhaWxhYmxlXG4gICAgICovXG4gICAgcmVmZXJlbmNlU3BhY2VGb3JUeXBlKHR5cGU6IFhSUmVmZXJlbmNlU3BhY2VUeXBlKTogWFJSZWZlcmVuY2VTcGFjZSB8IG51bGw7XG4gICAgcmVmZXJlbmNlU3BhY2VGb3JUeXBlKHR5cGU6IFhSUmVmZXJlbmNlU3BhY2VUeXBlKTogWFJSZWZlcmVuY2VTcGFjZSB8IG51bGwge1xuICAgICAgICByZXR1cm4gdGhpcy4jd2FzbS53ZWJ4cl9yZWZTcGFjZXMhW3R5cGVdID8/IG51bGw7XG4gICAgfVxuXG4gICAgLyoqIFNldCBjdXJyZW50IHJlZmVyZW5jZSBzcGFjZSB0eXBlIHVzZWQgZm9yIHJldHJpZXZpbmcgZXllLCBoZWFkLCBoYW5kIGFuZCBqb2ludCBwb3NlcyAqL1xuICAgIHNldCBjdXJyZW50UmVmZXJlbmNlU3BhY2UocmVmU3BhY2U6IFhSUmVmZXJlbmNlU3BhY2UpIHtcbiAgICAgICAgdGhpcy4jd2FzbS53ZWJ4cl9yZWZTcGFjZSEgPSByZWZTcGFjZTtcblxuICAgICAgICB0aGlzLiN3YXNtLndlYnhyX3JlZlNwYWNlVHlwZSA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgdHlwZSBvZiBPYmplY3Qua2V5cyh0aGlzLiN3YXNtLndlYnhyX3JlZlNwYWNlcyEpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy4jd2FzbS53ZWJ4cl9yZWZTcGFjZXMhW3R5cGUgYXMgWFJSZWZlcmVuY2VTcGFjZVR5cGVdID09PSByZWZTcGFjZSkge1xuICAgICAgICAgICAgICAgIC8qIEtlZXAgdHJhY2sgb2YgcmVmZXJlbmNlIHNwYWNlIHR5cGUgKi9cbiAgICAgICAgICAgICAgICB0aGlzLiN3YXNtLndlYnhyX3JlZlNwYWNlVHlwZSA9IHR5cGUgYXMgWFJSZWZlcmVuY2VTcGFjZVR5cGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogQ3VycmVudCByZWZlcmVuY2Ugc3BhY2UgdHlwZSB1c2VkIGZvciByZXRyaWV2aW5nIGV5ZSwgaGVhZCwgaGFuZCBhbmQgam9pbnQgcG9zZXMgKi9cbiAgICBnZXQgY3VycmVudFJlZmVyZW5jZVNwYWNlKCk6IFhSUmVmZXJlbmNlU3BhY2Uge1xuICAgICAgICByZXR1cm4gdGhpcy4jd2FzbS53ZWJ4cl9yZWZTcGFjZSE7XG4gICAgfVxuXG4gICAgLyoqIEN1cnJlbnQgV2ViWFIgcmVmZXJlbmNlIHNwYWNlIHR5cGUgb3IgYG51bGxgIGlmIG5vdCBhIGRlZmF1bHQgcmVmZXJlbmNlIHNwYWNlICovXG4gICAgZ2V0IGN1cnJlbnRSZWZlcmVuY2VTcGFjZVR5cGUoKTogWFJSZWZlcmVuY2VTcGFjZVR5cGUge1xuICAgICAgICByZXR1cm4gdGhpcy4jd2FzbS53ZWJ4cl9yZWZTcGFjZVR5cGUhO1xuICAgIH1cblxuICAgIC8qKiBDdXJyZW50IFdlYlhSIGJhc2UgbGF5ZXIgICovXG4gICAgZ2V0IGJhc2VMYXllcigpOiBYUlByb2plY3Rpb25MYXllciB7XG4gICAgICAgIHJldHVybiB0aGlzLiN3YXNtLndlYnhyX2Jhc2VMYXllciE7XG4gICAgfVxuXG4gICAgLyoqIEN1cnJlbnQgV2ViWFIgZnJhbWVidWZmZXIgKi9cbiAgICBnZXQgZnJhbWVidWZmZXJzKCk6IFdlYkdMRnJhbWVidWZmZXJbXSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0aGlzLiN3YXNtLndlYnhyX2ZibykpIHtcbiAgICAgICAgICAgIHJldHVybiBbdGhpcy4jd2FzbS5HTC5mcmFtZWJ1ZmZlcnNbdGhpcy4jd2FzbS53ZWJ4cl9mYm9dXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy4jd2FzbS53ZWJ4cl9mYm8ubWFwKChpZCkgPT4gdGhpcy4jd2FzbS5HTC5mcmFtZWJ1ZmZlcnNbaWRdKTtcbiAgICB9XG59XG5cbi8qKlxuICogRW52aXJvbm1lbnQgbGlnaHRpbmcgcHJvcGVydGllc1xuICpcbiAqIEBzaW5jZSAxLjIuM1xuICovXG5leHBvcnQgY2xhc3MgRW52aXJvbm1lbnQge1xuICAgIC8qKiBTY2VuZSBpbnN0YW5jZS4gQGhpZGRlbiAqL1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX3NjZW5lOiBTY2VuZTtcblxuICAgIC8qKiBDb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHNjZW5lOiBTY2VuZSkge1xuICAgICAgICB0aGlzLl9zY2VuZSA9IHNjZW5lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBpbnRlbnNpdHkgb2YgZW52aXJvbm1lbnQgbGlnaHRpbmcuXG4gICAgICpcbiAgICAgKiBJbmNvbWluZyBlbnZpcm9ubWVudCBsaWdodGluZyBpcyBtdWx0aXBsaWVkIGJ5IHRoaXMgZmFjdG9yLlxuICAgICAqL1xuICAgIGdldCBpbnRlbnNpdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zY2VuZS5lbmdpbmUud2FzbS5fd2xfc2NlbmVfZW52aXJvbm1lbnRfZ2V0X2ludGVuc2l0eShcbiAgICAgICAgICAgIHRoaXMuX3NjZW5lLl9pbmRleFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBpbnRlbnNpdHkgb2YgZW52aXJvbm1lbnQgbGlnaHRpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW50ZW5zaXR5IE5ldyBpbnRlbnNpdHkuXG4gICAgICovXG4gICAgc2V0IGludGVuc2l0eShpbnRlbnNpdHk6IG51bWJlcikge1xuICAgICAgICB0aGlzLl9zY2VuZS5lbmdpbmUud2FzbS5fd2xfc2NlbmVfZW52aXJvbm1lbnRfc2V0X2ludGVuc2l0eShcbiAgICAgICAgICAgIHRoaXMuX3NjZW5lLl9pbmRleCxcbiAgICAgICAgICAgIGludGVuc2l0eVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBnZXRUaW50KCk6IEZsb2F0MzJBcnJheTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGludCBmb3IgZW52aXJvbm1lbnQgbGlnaHRpbmcuXG4gICAgICpcbiAgICAgKiBJbmNvbWluZyBlbnZpcm9ubWVudCBsaWdodGluZyBjb2xvciBjaGFubmVscyBhcmUgbXVsdGlwbGllZCBieSB0aGVzZVxuICAgICAqIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgUHJlYWxsb2NhdGVkIGFycmF5IHRvIHdyaXRlIGludG8sIHRvIGF2b2lkIGdhcmJhZ2UsXG4gICAgICogICAgIG90aGVyd2lzZSB3aWxsIGFsbG9jYXRlIGEgbmV3IEZsb2F0MzJBcnJheS5cbiAgICAgKiBAcmV0dXJucyBUaW50IHZhbHVlcyAtIHJlZCwgZ3JlZW4sIGJsdWUuXG4gICAgICovXG4gICAgZ2V0VGludDxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCk6IFQ7XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldFRpbnQ8VCBleHRlbmRzIE51bWJlckFycmF5PihcbiAgICAgICAgb3V0OiBUIHwgRmxvYXQzMkFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSgzKVxuICAgICk6IFQgfCBGbG9hdDMyQXJyYXkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fc2NlbmUuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX3NjZW5lX2Vudmlyb25tZW50X2dldF90aW50KHRoaXMuX3NjZW5lLl9pbmRleCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIG91dFswXSA9IHdhc20uX3RlbXBNZW1GbG9hdFswXTtcbiAgICAgICAgb3V0WzFdID0gd2FzbS5fdGVtcE1lbUZsb2F0WzFdO1xuICAgICAgICBvdXRbMl0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbMl07XG4gICAgICAgIHJldHVybiBvdXQgYXMgVDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBnZXRUaW50fS5cbiAgICAgKlxuICAgICAqIEBub3RlIFByZWZlciB0byB1c2Uge0BsaW5rIGdldFRpbnR9IGZvciBwZXJmb3JtYW5jZS5cbiAgICAgKi9cbiAgICBnZXQgdGludCgpOiBGbG9hdDMyQXJyYXkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRUaW50KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRpbnQgZm9yIGVudmlyb25tZW50IGxpZ2h0aW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHYgTmV3IHRpbnQgdmFsdWUuIEV4cGVjdHMgYSAzIGNvbXBvbmVudCBhcnJheS5cbiAgICAgKi9cbiAgICBzZXRUaW50KHY6IFJlYWRvbmx5PE51bWJlckFycmF5Pikge1xuICAgICAgICB0aGlzLl9zY2VuZS5lbmdpbmUud2FzbS5fd2xfc2NlbmVfZW52aXJvbm1lbnRfc2V0X3RpbnQoXG4gICAgICAgICAgICB0aGlzLl9zY2VuZS5faW5kZXgsXG4gICAgICAgICAgICB2WzBdLFxuICAgICAgICAgICAgdlsxXSxcbiAgICAgICAgICAgIHZbMl1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKiogRXF1aXZhbGVudCB0byB7QGxpbmsgc2V0VGludH0uICovXG4gICAgc2V0IHRpbnQodjogUmVhZG9ubHk8TnVtYmVyQXJyYXk+KSB7XG4gICAgICAgIHRoaXMuc2V0VGludCh2KTtcbiAgICB9XG5cbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgZ2V0Q29lZmZpY2llbnRzKCk6IEZsb2F0MzJBcnJheTtcbiAgICAvKipcbiAgICAgKiBHZXQgc3BoZXJpY2FsIGhhcm1vbmljcyBjb2VmZmljaWVudHMgZm9yIGluZGlyZWN0IGxpZ2h0aW5nLlxuICAgICAqXG4gICAgICogVGhlc2UgYXJlIDkgc3BoZXJpY2FsIGhhcm1vbmljcyBjb2VmZmljaWVudHMgZm9yIGluZGlyZWN0IGRpZmZ1c2VcbiAgICAgKiBsaWdodGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXQgUHJlYWxsb2NhdGVkIGFycmF5IHRvIHdyaXRlIGludG8sIHRvIGF2b2lkIGdhcmJhZ2UsXG4gICAgICogICAgIG90aGVyd2lzZSB3aWxsIGFsbG9jYXRlIGEgbmV3IEZsb2F0MzJBcnJheS5cbiAgICAgKiBAcmV0dXJucyBTcGhlcmljYWwgaGFybW9uaWNzIGNvZWZmaWNpZW50cy4gQWx3YXlzIDI3IGVsZW1lbnRzLCBldmVyeVxuICAgICAqICAgICBjb25zZWN1dGl2ZSAzIHZhbHVlcyByZXByZXNlbnRpbmcgdGhlIHJlZCwgZ3JlZW4sIGJsdWUgY29tcG9uZW50cyBvZlxuICAgICAqICAgICBhIHNpbmdsZSBjb2VmZmljaWVudC4gVW51c2VkL2VtcHR5IGNvZWZmaWNpZW50cyBhdCB0aGUgZW5kIGNhbiBiZSAwLlxuICAgICAqL1xuICAgIGdldENvZWZmaWNpZW50czxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KG91dDogVCk6IFQ7XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGdldENvZWZmaWNpZW50czxUIGV4dGVuZHMgTnVtYmVyQXJyYXk+KFxuICAgICAgICBvdXQ6IFQgfCBGbG9hdDMyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KDMgKiA5KVxuICAgICk6IFQgfCBGbG9hdDMyQXJyYXkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fc2NlbmUuZW5naW5lLndhc207XG4gICAgICAgIHdhc20ucmVxdWlyZVRlbXBNZW0oMyAqIDkgKiA0KTtcbiAgICAgICAgd2FzbS5fd2xfc2NlbmVfZW52aXJvbm1lbnRfZ2V0X2NvZWZmaWNpZW50cyh0aGlzLl9zY2VuZS5faW5kZXgsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDMgKiA5OyArK2kpIHtcbiAgICAgICAgICAgIG91dFtpXSA9IHdhc20uX3RlbXBNZW1GbG9hdFtpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0IGFzIFQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byB7QGxpbmsgZ2V0Q29lZmZpY2llbnRzfS5cbiAgICAgKlxuICAgICAqIEBub3RlIFByZWZlciB0byB1c2Uge0BsaW5rIGdldENvZWZmaWNpZW50c30gZm9yIHBlcmZvcm1hbmNlLlxuICAgICAqL1xuICAgIGdldCBjb2VmZmljaWVudHMoKTogRmxvYXQzMkFycmF5IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29lZmZpY2llbnRzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHNwaGVyaWNhbCBoYXJtb25pY3MgY29lZmZpY2llbnRzIGZvciBpbmRpcmVjdCBsaWdodGluZy5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoZSBzY2VuZSBtdXN0IGhhdmUgYmVlbiBwYWNrYWdlZCB3aXRoIGVudmlyb25tZW50IGxpZ2h0aW5nIG9uIGZvclxuICAgICAqIHRoaXMgdG8gdGFrZSBlZmZlY3QuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogQ29lZmZpY2llbnRzIGZyb20gW1dlYlhSIExpZ2h0aW5nIEVzdGltYXRpb25dKGh0dHBzOi8vd3d3LnczLm9yZy9UUi93ZWJ4ci1saWdodGluZy1lc3RpbWF0aW9uLTEpXG4gICAgICogY2FuIGJlIHBhc3NlZCBhcyBmb2xsb3dzOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBwcm9iZSA9IGF3YWl0IGVuZ2luZS54ci5zZXNzaW9uLnJlcXVlc3RMaWdodFByb2JlKCk7XG4gICAgICogY29uc3QgZXN0aW1hdGUgPSBlbmdpbmUueHIuZnJhbWUuZ2V0TGlnaHRFc3RpbWF0ZShwcm9iZSk7XG4gICAgICogc2NlbmUuZW52aXJvbm1lbnQuY29lZmZpY2llbnRzID0gZXN0aW1hdGUuc3BoZXJpY2FsSGFybW9uaWNzQ29lZmZpY2llbnRzO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHYgQSBzZXQgb2Ygc3BoZXJpY2FsIGhhcm1vbmljcyBjb2VmZmljaWVudHMsIGV2ZXJ5IDMgZWxlbWVudHNcbiAgICAgKiAgICAgY29uc3RpdHV0aW5nIHRoZSByZWQvZ3JlZW4vYmx1ZSBjb21wb25lbnRzIG9mIGEgc2luZ2xlIGNvZWZmaWNpZW50LlxuICAgICAqICAgICBTaG91bGQgYmUgMCwgMywgMTIgb3IgMjcgKiphcnJheSBlbGVtZW50cyoqLiBQYXNzaW5nIGFuIGVtcHR5IGFycmF5XG4gICAgICogICAgIGRpc2FibGVzIGluZGlyZWN0IGxpZ2h0aW5nLlxuICAgICAqL1xuICAgIHNldENvZWZmaWNpZW50cyh2OiBSZWFkb25seTxOdW1iZXJBcnJheT4pIHtcbiAgICAgICAgbGV0IGNvdW50ID0gdi5sZW5ndGggLyAzO1xuICAgICAgICBpZiAoY291bnQgPiA5KSBjb3VudCA9IDk7XG4gICAgICAgIGVsc2UgaWYgKGNvdW50ID4gNCAmJiBjb3VudCA8IDkpIGNvdW50ID0gNDtcbiAgICAgICAgZWxzZSBpZiAoY291bnQgPiAxICYmIGNvdW50IDwgNCkgY291bnQgPSAxO1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5fc2NlbmUuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdC5zZXQodik7XG4gICAgICAgIHdhc20uX3dsX3NjZW5lX2Vudmlyb25tZW50X3NldF9jb2VmZmljaWVudHMoXG4gICAgICAgICAgICB0aGlzLl9zY2VuZS5faW5kZXgsXG4gICAgICAgICAgICB3YXNtLl90ZW1wTWVtLFxuICAgICAgICAgICAgY291bnRcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKiogRXF1aXZhbGVudCB0byB7QGxpbmsgc2V0Q29lZmZpY2llbnRzfS4gKi9cbiAgICBzZXQgY29lZmZpY2llbnRzKHY6IFJlYWRvbmx5PE51bWJlckFycmF5Pikge1xuICAgICAgICB0aGlzLnNldENvZWZmaWNpZW50cyh2KTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHtXb25kZXJsYW5kRW5naW5lfSBmcm9tICcuLi9lbmdpbmUuanMnO1xuaW1wb3J0IHtOdW1iZXJBcnJheX0gZnJvbSAnLi4vdHlwZXMuanMnO1xuaW1wb3J0IHtjYXBpdGFsaXplRmlyc3RVVEY4LCBjcmVhdGVEZXN0cm95ZWRQcm94eX0gZnJvbSAnLi4vdXRpbHMvbWlzYy5qcyc7XG5pbXBvcnQge0ZvbnQsIFRleHR1cmV9IGZyb20gJy4uL3dvbmRlcmxhbmQuanMnO1xuXG5pbXBvcnQge1Jlc291cmNlLCBSZXNvdXJjZU1hbmFnZXIsIFNjZW5lUmVzb3VyY2V9IGZyb20gJy4vcmVzb3VyY2UuanMnO1xuXG4vKipcbiAqIE1hdGVyaWFsIHBhcmFtZXRlciB0eXBlLlxuICovXG5leHBvcnQgZW51bSBNYXRlcmlhbFBhcmFtVHlwZSB7XG4gICAgLyoqIFVuc2lnbmVkIGludGVnZXIgcGFyYW1ldGVyIHR5cGUuICovXG4gICAgVW5zaWduZWRJbnQgPSAwLFxuICAgIC8qKiBJbnRlZ2VyIHBhcmFtZXRlciB0eXBlLiAqL1xuICAgIEludCA9IDEsXG4gICAgLyoqIDE2LWJpdCBmbG9hdCBwYXJhbWV0ZXIgdHlwZS4gKi9cbiAgICBIYWxmRmxvYXQgPSAyLFxuICAgIC8qKiBGbG9hdCBwYXJhbWV0ZXIgdHlwZS4gKi9cbiAgICBGbG9hdCA9IDMsXG4gICAgLyoqIFNhbXBsZXIgcmVzb3VyY2UgcGFyYW1ldGVyIHR5cGUsIGkuZS4sIGEge0BsaW5rIFRleHR1cmV9LiAqL1xuICAgIFNhbXBsZXIgPSA0LFxuICAgIC8qKlxuICAgICAqIEZvbnQgcmVzb3VyY2UgcGFyYW1ldGVyIHR5cGUuXG4gICAgICpcbiAgICAgKiAqKk5vdGUqKjogQ2hhbmdpbmcgZm9udCBpc24ndCBleHBvc2VkIHlldCBhbmQgd2lsbCByYWlzZSBhbiBlcnJvci5cbiAgICAgKi9cbiAgICBGb250ID0gNSxcbn1cblxuLyoqXG4gKiBDb25zdHJ1Y3RvciBwYXJhbWV0ZXJzIG9iamVjdCBmb3IgYSB7QGxpbmsgTWF0ZXJpYWx9IGluc3RhbmNlLlxuICpcbiAqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgTWF0ZXJpYWxNYW5hZ2VyI2dldFRlbXBsYXRlfSBpbnN0ZWFkOlxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCBQaG9uZ01hdGVyaWFsID0gZW5naW5lLm1hdGVyaWFscy5nZXRUZW1wbGF0ZSgnUGhvbmcgT3BhcXVlJyk7XG4gKiBjb25zdCBtYXRlcmlhbCA9IG5ldyBQaG9uZ01hdGVyaWFsKCk7XG4gKiBtYXRlcmlhbC5zZXREaWZmdXNlQ29sb3IoWzEsIDAsIDBdKTtcbiAqIGBgYFxuICovXG5leHBvcnQgaW50ZXJmYWNlIE1hdGVyaWFsUGFyYW1ldGVycyB7XG4gICAgLyoqIFRoZSBuYW1lIG9mIHRoZSBwaXBlbGluZS4gKi9cbiAgICBwaXBlbGluZTogc3RyaW5nO1xufVxuXG4vKipcbiAqIE1hdGVyaWFsIGNvbnN0cnVjdG9yLlxuICpcbiAqIE1hdGVyaWFsIGNsYXNzZXMgYXJlIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IHRoZSBydW50aW1lIGJhc2VkIG9uIHRoZVxuICogbG9hZGVkIHNjZW5lIHNoYWRlcnMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTWF0ZXJpYWxDb25zdHJ1Y3RvcjxUIGV4dGVuZHMgTWF0ZXJpYWwgPSBNYXRlcmlhbD4ge1xuICAgIC8qKlxuICAgICAqIFNldCBvZiB0aGUgZHluYW1pYyBwYXJhbWV0ZXJzIHRoYXQgZXhpc3Qgb24gdGhlIGRlZmluaXRpb24uXG4gICAgICpcbiAgICAgKiBGb3IgaW5zdGFuY2UsIHRoZSBzZXQgd291bGQgY29udGFpbiBlbGVtZW50cyBzdWNoIGFzIGBhbWJpZW50Q29sb3JgLCBgZGlmZnVzZUNvbG9yYFxuICAgICAqIGZvciBhIFBob25nIG1hdGVyaWFsLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IFBhcmFtZXRlcnM6IFNldDxzdHJpbmc+O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBNYXRlcmlhbC5cbiAgICAgKlxuICAgICAqIFRoZSBtYXRlcmlhbCBpcyBjcmVhdGVkIGZyb20gdGhlIHBpcGVsaW5lIGFzc29jaWF0ZWQgdG8gdGhlIG1hdGVyaWFsIGNsYXNzLlxuICAgICAqXG4gICAgICogQG5vdGUgQ3JlYXRpbmcgbWF0ZXJpYWwgaXMgZXhwZW5zaXZlLiBQbGVhc2UgdXNlIHtAbGluayBNYXRlcmlhbCNjbG9uZX0gdG8gY2xvbmUgYSBtYXRlcmlhbC5cbiAgICAgKiBAbm90ZSBEbyBub3QgdXNlIHRoaXMgY29uc3RydWN0b3IgZGlyZWN0bHkgd2l0aCBhbiBpbmRleCwgdGhpcyBpcyByZXNlcnZlZCBmb3IgaW50ZXJuYWwgcHVycG9zZXMuXG4gICAgICovXG4gICAgbmV3IChpbmRleD86IG51bWJlcik6IFQ7XG59XG5cbi8qKlxuICogV3JhcHBlciBhcm91bmQgYSBuYXRpdmUgbWF0ZXJpYWwuXG4gKlxuICogRm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgaG93IHRvIGNyZWF0ZSBtYXRlcmlhbHMsIGhhdmUgYSBsb29rIGF0IHRoZVxuICoge0BsaW5rIE1hdGVyaWFsTWFuYWdlcn0gY2xhc3MuXG4gKlxuICogIyMjIyBQcm9wZXJ0aWVzXG4gKlxuICogVGhlIG1hdGVyaWFsIHByb3BlcnRpZXMgYXJlIGF1dG9tYXRpY2FsbHkgY29udmVydGVkIGludG8gZ2V0dGVycy9zZXR0ZXJzOlxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCBtYXRlcmlhbCA9IG5ldyBQaG9uZ01hdGVyaWFsKCk7XG4gKlxuICogLy8gU2V0IHRoZSBgZGlmZnVzZUNvbG9yYCBwcm9wZXJ0eVxuICogbWF0ZXJpYWwuc2V0RGlmZnVzZUNvbG9yKFsxLjAsIDAuMCwgMC4wLCAxLjBdKTtcbiAqIGNvbnNvbGUubG9nKG1hdGVyaWFsLmdldERpZmZ1c2VDb2xvcigpKTtcbiAqIGBgYFxuICpcbiAqIEdldHRlcnMgZm9yIG5vbi1zY2FsYXIgdHlwZXMgaGF2ZSBhbiBvcHRpb25hbCBhcmd1bWVudCB0byBza2lwIGFuIGFycmF5XG4gKiBhbGxvY2F0aW9uOlxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCBtYXRlcmlhbCA9IG5ldyBQaG9uZ01hdGVyaWFsKCk7XG4gKiBjb25zdCBkaWZmdXNlID0gWzAsIDAsIDAsIDBdO1xuICogbWF0ZXJpYWwuZ2V0RGlmZnVzZUNvbG9yKGRpZmZ1c2UpO1xuICogY29uc29sZS5sb2coZGlmZnVzZSkgLy8gUHJpbnRzICdbMS4wLCAxLjAsIDEuMCwgMS4wXSdcbiAqIGBgYFxuICpcbiAqIEBub3RlIE1hdGVyaWFscyBhcmUgKipwZXItZW5naW5lKiosIHRoZXkgY2FuIHRodXMgYmUgc2hhcmVkIGJ5IG11bHRpcGxlIHNjZW5lcy5cbiAqXG4gKiAjIyMjIFR5cGVTY3JpcHRcbiAqXG4gKiBUaGUgV29uZGVybGFuZCBFZGl0b3IgY2FuIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGUgbWF0ZXJpYWwgZGVmaW5pdGlvbnMgKC5kLnRzKVxuICogZnJvbSB0aGUgcHJvamVjdCBwaXBlbGluZXMuXG4gKlxuICogVG8gZW5hYmxlIHRoZSBnZW5lcmF0aW9uLCBnbyB0byB0aGUgYFByb2plY3QgU2V0dGluZ3MgPiBKYXZhU2NyaXB0YCBwYW5lbCBhbmRcbiAqIHNldCBgbWF0ZXJpYWxEZWZpbml0aW9uc2AgdG8gYSBwYXRoLCBlLmcuLCBgbWF0ZXJpYWxzLmQudHNgLlxuICpcbiAqIEl0J3MgdGhlbiBwb3NzaWJsZSB0byBjYXN0IHRoZSBtYXRlcmlhbCB0eXBlIHVzaW5nOlxuICpcbiAqIGBgYHRzXG4gKiAvLyBOb3RlIHRoZSBgLmpzYCBpbnN0ZWFkIG9mIGAuZC50c2BcbiAqIGltcG9ydCB7UGhvbmdPcGFxdWV9IGZyb20gJy4vbWF0ZXJpYWxzLmpzJztcbiAqXG4gKiBjb25zdCBtZXNoID0gb2JqZWN0LmdldENvbXBvbmVudCgnbWVzaCcpO1xuICogY29uc3QgbWF0ZXJpYWwgPSBtZXNoLm1hdGVyaWFsIGFzIFBob25nT3BhcXVlO1xuICogbWF0ZXJpYWwuc2V0RGlmZnVzZUNvbG9yKFsxLCAwLCAwLCAxXSk7IC8vIFNldCBhIHJlZCBkaWZmdXNlXG4gKiBgYGBcbiAqXG4gKiBAc2luY2UgMS4yLjBcbiAqL1xuZXhwb3J0IGNsYXNzIE1hdGVyaWFsIGV4dGVuZHMgUmVzb3VyY2Uge1xuICAgIC8qKiBQcm94eSB1c2VkIHRvIG92ZXJyaWRlIHByb3RvdHlwZXMgb2YgZGVzdHJveWVkIG1hdGVyaWFscy4gKi9cbiAgICBzdGF0aWMgcmVhZG9ubHkgX2Rlc3Ryb3llZFByb3RvdHlwZSA9IGNyZWF0ZURlc3Ryb3llZFByb3h5KCdtYXRlcmlhbCcpO1xuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayBNYXRlcmlhbE1hbmFnZXIjZ2V0VGVtcGxhdGV9IHZpYSB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5tYXRlcmlhbHN9XG4gICAgICogdG8gY3JlYXRlIGEgbmV3IG1hdGVyaWFsIHdpdGggYSBnaXZlbiBwaXBlbGluZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgUGhvbmdNYXRlcmlhbCA9IGVuZ2luZS5tYXRlcmlhbHMuZ2V0VGVtcGxhdGUoJ1Bob25nIE9wYXF1ZScpO1xuICAgICAqIGNvbnN0IG1hdGVyaWFsID0gbmV3IFBob25nTWF0ZXJpYWwoKTtcbiAgICAgKiBtYXRlcmlhbC5zZXREaWZmdXNlQ29sb3IoWzEsIDAsIDBdKTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbmdpbmU6IFdvbmRlcmxhbmRFbmdpbmUsIHBhcmFtczogbnVtYmVyIHwgTWF0ZXJpYWxQYXJhbWV0ZXJzKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcGFyYW1zICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgaWYgKCFwYXJhbXM/LnBpcGVsaW5lKSB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIHBhcmFtZXRlciAncGlwZWxpbmUnXCIpO1xuICAgICAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBlbmdpbmUubWF0ZXJpYWxzLmdldFRlbXBsYXRlKHBhcmFtcy5waXBlbGluZSk7XG4gICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IG5ldyB0ZW1wbGF0ZSgpO1xuICAgICAgICAgICAgc3VwZXIoZW5naW5lLCBtYXRlcmlhbC5faW5kZXgpO1xuICAgICAgICAgICAgcmV0dXJuIG1hdGVyaWFsO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGVuZ2luZSwgcGFyYW1zKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayB3aGV0aGVyIGEgcGFyYW1ldGVyIGV4aXN0cyBvbiB0aGlzIG1hdGVyaWFsLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBwYXJhbWV0ZXIgd2l0aCBuYW1lIGBuYW1lYCBleGlzdHMgb24gdGhpcyBtYXRlcmlhbCxcbiAgICAgKiAgICAgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICovXG4gICAgaGFzUGFyYW1ldGVyKG5hbWU6IHN0cmluZykge1xuICAgICAgICBjb25zdCBwYXJhbWV0ZXJzID0gKHRoaXMuY29uc3RydWN0b3IgYXMgTWF0ZXJpYWxDb25zdHJ1Y3RvcikuUGFyYW1ldGVycztcbiAgICAgICAgcmV0dXJuIHBhcmFtZXRlcnMgJiYgcGFyYW1ldGVycy5oYXMobmFtZSk7XG4gICAgfVxuXG4gICAgLyoqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgcGlwZWxpbmV9IGluc3RlYWQuICovXG4gICAgZ2V0IHNoYWRlcigpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5waXBlbGluZTtcbiAgICB9XG5cbiAgICAvKiogTmFtZSBvZiB0aGUgcGlwZWxpbmUgdXNlZCBieSB0aGlzIG1hdGVyaWFsLiAqL1xuICAgIGdldCBwaXBlbGluZSgpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgcmV0dXJuIHdhc20uVVRGOFRvU3RyaW5nKHdhc20uX3dsX21hdGVyaWFsX2dldF9waXBlbGluZSh0aGlzLl9pZCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGNvcHkgb2YgdGhlIHVuZGVybHlpbmcgbmF0aXZlIG1hdGVyaWFsLlxuICAgICAqXG4gICAgICogQHJldHVybnMgTWF0ZXJpYWwgY2xvbmUuXG4gICAgICovXG4gICAgY2xvbmUoKTogTWF0ZXJpYWwgfCBudWxsIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmVuZ2luZS53YXNtLl93bF9tYXRlcmlhbF9jbG9uZSh0aGlzLl9pZCk7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS5tYXRlcmlhbHMud3JhcChpbmRleCk7XG4gICAgfVxuXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICByZXR1cm4gJ01hdGVyaWFsKGRlc3Ryb3llZCknO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgTWF0ZXJpYWwoJyR7dGhpcy5waXBlbGluZX0nLCAke3RoaXMuX2luZGV4fSlgO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdyYXAgYSBuYXRpdmUgbWF0ZXJpYWwgaW5kZXguXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZW5naW5lIEVuZ2luZSBpbnN0YW5jZS5cbiAgICAgKiBAcGFyYW0gaW5kZXggVGhlIGluZGV4LlxuICAgICAqIEByZXR1cm5zIE1hdGVyaWFsIGluc3RhbmNlIG9yIGBudWxsYCBpZiBpbmRleCA8PSAwLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHRoZSB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5tYXRlcmlhbHN9IGluc3RlYWQuXG4gICAgICovXG4gICAgc3RhdGljIHdyYXAoZW5naW5lOiBXb25kZXJsYW5kRW5naW5lLCBpbmRleDogbnVtYmVyKTogTWF0ZXJpYWwgfCBudWxsIHtcbiAgICAgICAgcmV0dXJuIGVuZ2luZS5tYXRlcmlhbHMud3JhcChpbmRleCk7XG4gICAgfVxufVxuXG4vKipcbiAqIE1hbmFnZSBtYXRlcmlhbHMuXG4gKlxuICogIyMjIyBDcmVhdGlvblxuICpcbiAqIFRvIGNyZWF0ZSBhIG1hdGVyaWFsLCBmaXJzdCByZXRyaWV2ZSB0aGUgY2xhc3MgYXNzb2NpYXRlZCB0b1xuICogdGhlIHBpcGVsaW5lIHVzaW5nIHtAbGluayBNYXRlcmlhbE1hbmFnZXIuZ2V0VGVtcGxhdGV9OlxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCBQaG9uZ01hdGVyaWFsID0gZW5naW5lLm1hdGVyaWFscy5nZXRUZW1wbGF0ZSgnUGhvbmcgT3BhcXVlJyk7XG4gKiBgYGBcbiAqXG4gKiBDcmVhdGluZyBhIG1hdGVyaWFsIGlzIHRoZW4gZG9uZSB1c2luZyB0aGUgY29uc3RydWN0b3I6XG4gKlxuICogYGBganNcbiAqIGNvbnN0IG1hdGVyaWFsID0gbmV3IFBob25nTWF0ZXJpYWwoKTtcbiAqIG1hdGVyaWFsLnNldERpZmZ1c2VDb2xvcihbMS4wLCAwLjAsIDAuMCwgMS4wXSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIE1hdGVyaWFsTWFuYWdlciBleHRlbmRzIFJlc291cmNlTWFuYWdlcjxNYXRlcmlhbD4ge1xuICAgIC8qKiBNYXRlcmlhbCBjbGFzc2VzLiBAaGlkZGVuLiAqL1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX21hdGVyaWFsVGVtcGxhdGVzOiBNYXRlcmlhbENvbnN0cnVjdG9yW10gPSBbXTtcblxuICAgIC8qKiBAaGlkZGVuICovXG4gICAgY29uc3RydWN0b3IoZW5naW5lOiBXb25kZXJsYW5kRW5naW5lKSB7XG4gICAgICAgIHN1cGVyKGVuZ2luZSwgTWF0ZXJpYWwpO1xuICAgICAgICB0aGlzLl9jYWNoZURlZmluaXRpb25zKCk7XG4gICAgfVxuXG4gICAgLyoqIEBvdmVycmlkZSAqL1xuICAgIHdyYXAoaW5kZXg6IG51bWJlcikge1xuICAgICAgICBpZiAoaW5kZXggPD0gMCkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgY29uc3QgY2FjaGVkID0gdGhpcy5fY2FjaGVbaW5kZXhdO1xuICAgICAgICBpZiAoY2FjaGVkKSByZXR1cm4gY2FjaGVkO1xuXG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICBjb25zdCBkZWZpbml0aW9uID0gd2FzbS5fd2xfbWF0ZXJpYWxfZ2V0X2RlZmluaXRpb24oaW5kZXgpO1xuXG4gICAgICAgIGNvbnN0IFRlbXBsYXRlID0gdGhpcy5fbWF0ZXJpYWxUZW1wbGF0ZXNbZGVmaW5pdGlvbl07XG4gICAgICAgIGNvbnN0IG1hdGVyaWFsID0gbmV3IFRlbXBsYXRlKGluZGV4KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dyYXBJbnN0YW5jZShtYXRlcmlhbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXRlcmlhbCBjbGFzcyB3aXRoIHRoZSBnaXZlbiBwaXBlbGluZSBuYW1lLlxuICAgICAqXG4gICAgICogIyMjIyBVc2FnZVxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBQaG9uZ01hdGVyaWFsID0gZW5naW5lLm1hdGVyaWFscy5nZXRUZW1wbGF0ZSgnUGhvbmcgT3BhcXVlJyk7XG4gICAgICogY29uc3QgbWF0ZXJpYWwgPSBuZXcgUGhvbmdNYXRlcmlhbCgpO1xuICAgICAqIG1hdGVyaWFsLnNldERpZmZ1c2VDb2xvcihbMS4wLCAwLjAsIDAuMCwgMS4wXSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAjIyMjIFR5cGVTY3JpcHRcbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIHByb3ZpZGUgYSBzaW1wbGUgd2F5IHRvIGNhc3QgdGhlIGNvbnN0cnVjdG9yIHJldHVybmVkIGJ5IGBnZXRUZW1wbGF0ZWA6XG4gICAgICpcbiAgICAgKiBgYGB0c1xuICAgICAqIGludGVyZmFjZSBQaG9uZyB7XG4gICAgICogICAgIGdldEFtYmllbnRDb2xvcihvdXQ/OiBGbG9hdDMyQXJyYXkpOiBGbG9hdDMyQXJyYXk7XG4gICAgICogICAgIHNldEFtYmllbnRDb2xvcih2YWx1ZTogTnVtYmVyQXJyYXkpOiB2b2lkO1xuICAgICAqIH1cbiAgICAgKiBjb25zdCBQaG9uZ01hdGVyaWFsID0gZW5naW5lLm1hdGVyaWFscy5nZXRUZW1wbGF0ZTxQaG9uZz4oJ1Bob25nIE9wYXF1ZScpO1xuICAgICAqIGNvbnN0IG1hdCA9IG5ldyBQaG9uZ01hdGVyaWFsKCk7IC8vIGBtYXRgIGlzIG9mIHR5cGUgYFBob25nYFxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogSG93ZXZlciwgdGhpcyBtZWFucyBtYW51YWxseSB3cml0aW5nIHR5cGVzIGZvciBlYWNoIHBpcGVsaW5lLlxuICAgICAqXG4gICAgICogRm9ydHVuYXRlbHksIFRoZSBXb25kZXJsYW5kIEVkaXRvciBjYW4gYXV0b21hdGljYWxseSBnZW5lcmF0ZSBtYXRlcmlhbCBkZWZpbml0aW9ucyAoLmQudHMpXG4gICAgICogZnJvbSB0aGUgcHJvamVjdCBwaXBlbGluZXMuXG4gICAgICpcbiAgICAgKiBUbyBlbmFibGUgdGhlIGdlbmVyYXRpb24sIGdvIHRvIHRoZSBgUHJvamVjdCBTZXR0aW5ncyA+IEphdmFTY3JpcHRgIHBhbmVsIGFuZFxuICAgICAqIHNldCBgbWF0ZXJpYWxEZWZpbml0aW9uc2AgdG8gYSBwYXRoLCBlLmcuLCBgbWF0ZXJpYWxzLmQudHNgLlxuICAgICAqXG4gICAgICogTWF0ZXJpYWwgY29uc3RydWN0b3JzIHdpbGwgdGhlbiBiZSB0eXBlZCBhdXRvbWF0aWNhbGx5IHdoZW4gdXNpbmcgYSBzdHJpbmcgbGl0ZXJhbCBwaXBlbGluZSBuYW1lOlxuICAgICAqXG4gICAgICogYGBgdHNcbiAgICAgKiAvLyBOb3RlIHRoZSBgLmpzYCBpbnN0ZWFkIG9mIGAuZC50c2BcbiAgICAgKiBpbXBvcnQge1Bob25nT3BhcXVlfSBmcm9tICcuL21hdGVyaWFscy5qcyc7XG4gICAgICpcbiAgICAgKiBjb25zdCBQaG9uZ01hdGVyaWFsID0gZW5naW5lLm1hdGVyaWFscy5nZXRUZW1wbGF0ZSgnUGhvbmcgT3BhcXVlJyk7XG4gICAgICogY29uc3QgbWF0ID0gbmV3IFBob25nTWF0ZXJpYWwoKTsgLy8gYG1hdGAgaXMgb2YgdHlwZSBgUGhvbmdPcGFxdWVgXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGlwZWxpbmUgVGhlIHBpcGVsaW5lIG5hbWUgdG8gc2VhcmNoIGZvci5cbiAgICAgKiBAcmV0dXJucyBUaGUgbWF0ZXJpYWwgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAdGhyb3dzIGBFcnJvcmAgaWYgdGhlIG1hdGVyaWFsIGNsYXNzIGRvZXNuJ3QgZXhpc3QuXG4gICAgICovXG4gICAgZ2V0VGVtcGxhdGU8VCBleHRlbmRzIE1hdGVyaWFsID0gTWF0ZXJpYWw+KHBpcGVsaW5lOiBzdHJpbmcpOiBNYXRlcmlhbENvbnN0cnVjdG9yPFQ+IHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGluZGV4ID0gd2FzbS5fd2xfZ2V0X21hdGVyaWFsX2RlZmluaXRpb25faW5kZXgod2FzbS50ZW1wVVRGOChwaXBlbGluZSkpO1xuICAgICAgICBpZiAoIWluZGV4KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFBpcGVsaW5lICcke3BpcGVsaW5lfScgZG9lc24ndCBleGlzdCBpbiB0aGUgc2NlbmVgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fbWF0ZXJpYWxUZW1wbGF0ZXNbaW5kZXhdIGFzIE1hdGVyaWFsQ29uc3RydWN0b3I8VD47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV3JhcCBhIG1hdGVyaWFsIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHRvZG86IFJlbW92ZSBhdCAyLjAuMC5cbiAgICAgKlxuICAgICAqIEBub3RlIFdyYXBwaW5nIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBvbmNlIHBlciBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbnN0YW5jZSBUaGUgbWF0ZXJpYWwgaW5zdGFuY2UuXG4gICAgICogQHJldHVybnMgVGhlIG5ldyBtYXRlcmlhbCwgd3JhcHBlZCBpbiBhIHByb3h5LlxuICAgICAqL1xuICAgIF93cmFwSW5zdGFuY2UoaW5zdGFuY2U6IE1hdGVyaWFsKTogTWF0ZXJpYWwge1xuICAgICAgICB0aGlzLl9jYWNoZVtpbnN0YW5jZS5pbmRleF0gPSBpbnN0YW5jZTtcbiAgICAgICAgaWYgKCF0aGlzLmVuZ2luZS5sZWdhY3lNYXRlcmlhbFN1cHBvcnQpIHJldHVybiBpbnN0YW5jZTtcblxuICAgICAgICAvKiogQHRvZG86IFJlbW92ZSBhdCAyLjAuMC4gVGhpcyBpcyBrZXB0IGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LiAqL1xuICAgICAgICBjb25zdCBwcm94eSA9IG5ldyBQcm94eShpbnN0YW5jZSwge1xuICAgICAgICAgICAgZ2V0KHRhcmdldDogTWF0ZXJpYWwsIHByb3A6IHN0cmluZykge1xuICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0Lmhhc1BhcmFtZXRlcihwcm9wKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHRhcmdldCBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+KVtwcm9wXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLyoqIFRoaXMgaXMgc2xvdywgYnV0IHVzZXJzIHNob3VsZCBtaWdyYXRlIHRvIGBnZXRQYXJhbWAgKi9cbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gYGdldCR7Y2FwaXRhbGl6ZUZpcnN0VVRGOChwcm9wKX1gO1xuICAgICAgICAgICAgICAgIHJldHVybiAodGFyZ2V0IGFzIFJlY29yZDxzdHJpbmcsIGFueT4pW25hbWVdKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0KHRhcmdldCwgcHJvcDogc3RyaW5nLCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0Lmhhc1BhcmFtZXRlcihwcm9wKSkge1xuICAgICAgICAgICAgICAgICAgICAodGFyZ2V0IGFzIFJlY29yZDxzdHJpbmcgfCBzeW1ib2wsIGFueT4pW3Byb3BdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvKiogVGhpcyBpcyBzbG93LCBidXQgdXNlcnMgc2hvdWxkIG1pZ3JhdGUgdG8gYGdldFBhcmFtYCAqL1xuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgc2V0JHtjYXBpdGFsaXplRmlyc3RVVEY4KHByb3ApfWA7XG4gICAgICAgICAgICAgICAgKHRhcmdldCBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+KVtuYW1lXSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fY2FjaGVbaW5zdGFuY2UuaW5kZXhdID0gcHJveHk7XG4gICAgICAgIHJldHVybiBwcm94eTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWNoZSBhbGwgcGlwZWxpbmUgZGVmaW5pdGlvbnMuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcHJpdmF0ZSBfY2FjaGVEZWZpbml0aW9ucygpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGNvdW50ID0gd2FzbS5fd2xfZ2V0X21hdGVyaWFsX2RlZmluaXRpb25fY291bnQoKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICAgICAgICB0aGlzLl9tYXRlcmlhbFRlbXBsYXRlc1tpXSA9IHRoaXMuX2NyZWF0ZU1hdGVyaWFsVGVtcGxhdGUoaSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBtYXRlcmlhbCBjbGFzcyBmcm9tIGEgZGVmaW5pdGlvbiBpbmRleC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB3YXNtIFRoZSBXQVNNIGluc3RhbmNlLlxuICAgICAqIEBwYXJhbSBkZWZpbml0aW9uSW5kZXggVGhlIGRlZmluaXRpb24gaW5kZXggdG8gd3JhcC5cbiAgICAgKiBAcmV0dXJucyBUaGUgbWF0ZXJpYWwgY2xhc3MuXG4gICAgICovXG4gICAgcHJpdmF0ZSBfY3JlYXRlTWF0ZXJpYWxUZW1wbGF0ZShkZWZpbml0aW9uSW5kZXg6IG51bWJlcikge1xuICAgICAgICBjb25zdCBlbmdpbmUgPSB0aGlzLmVuZ2luZTtcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBjbGFzcyBDdXN0b21NYXRlcmlhbCBleHRlbmRzIE1hdGVyaWFsIHtcbiAgICAgICAgICAgIHN0YXRpYyBQYXJhbWV0ZXJzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcblxuICAgICAgICAgICAgY29uc3RydWN0b3IoaW5kZXg/OiBudW1iZXIpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IGluZGV4ID8/IGVuZ2luZS53YXNtLl93bF9tYXRlcmlhbF9jcmVhdGUoZGVmaW5pdGlvbkluZGV4KTtcbiAgICAgICAgICAgICAgICBzdXBlcihlbmdpbmUsIGluZGV4KTtcbiAgICAgICAgICAgICAgICAvKiogQHRvZG8oMi4wLjApOiBVbmlmeSB3aXRoIE1hdGVyaWFsLiBXZSBuZWVkIHRvIHdyYXAgaW4gYm90aCBzaW5jZSBtYXRlcmlhbHNcbiAgICAgICAgICAgICAgICAgKiBjYW4gYmUgY3JlYXRlZCB2aWEgdGhlIHBhcmVudCBjbGFzcywgb3IgdmlhIGNoaWxkIGNsYXNzZXMuXG4gICAgICAgICAgICAgICAgICogSW4gYWRkaXRpb24sIHdyYXBwaW5nIHJldHVybnMgYSBwcm94eSwgd2Ugd2FudCB0byBzdXBwb3J0IFByb3h5PE1hdGVyaWFsPlxuICAgICAgICAgICAgICAgICAqIGFzIHdlbGwgYXMgUHJveHk8Q3VzdG9tTWF0ZXJpYWw+LiAqL1xuICAgICAgICAgICAgICAgIHJldHVybiBlbmdpbmUubWF0ZXJpYWxzLl93cmFwSW5zdGFuY2UodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IG5iUGFyYW1zID0gd2FzbS5fd2xfbWF0ZXJpYWxfZGVmaW5pdGlvbl9nZXRfcGFyYW1fY291bnQoZGVmaW5pdGlvbkluZGV4KTtcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IG5iUGFyYW1zOyArK2luZGV4KSB7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gd2FzbS5VVEY4VG9TdHJpbmcoXG4gICAgICAgICAgICAgICAgd2FzbS5fd2xfbWF0ZXJpYWxfZGVmaW5pdGlvbl9nZXRfcGFyYW1fbmFtZShkZWZpbml0aW9uSW5kZXgsIGluZGV4KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRlbXBsYXRlLlBhcmFtZXRlcnMuYWRkKG5hbWUpO1xuXG4gICAgICAgICAgICBjb25zdCB0ID0gd2FzbS5fd2xfbWF0ZXJpYWxfZGVmaW5pdGlvbl9nZXRfcGFyYW1fdHlwZShkZWZpbml0aW9uSW5kZXgsIGluZGV4KTtcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSB0ICYgMHhmZjtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudENvdW50ID0gKHQgPj4gOCkgJiAweGZmO1xuICAgICAgICAgICAgLyogbWV0YVR5cGUgY291bGQgYWxzbyBiZSBleHRyYWN0ZWQgdXNpbmc6ICh0ID4+IDE2KSAmIDB4ZmYgKi9cblxuICAgICAgICAgICAgY29uc3QgY2FwaXRhbGl6ZWQgPSBjYXBpdGFsaXplRmlyc3RVVEY4KG5hbWUpO1xuICAgICAgICAgICAgY29uc3QgZ2V0dGVySWQgPSBgZ2V0JHtjYXBpdGFsaXplZH1gO1xuICAgICAgICAgICAgY29uc3Qgc2V0dGVySWQgPSBgc2V0JHtjYXBpdGFsaXplZH1gO1xuXG4gICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZVByb3RvID0gdGVtcGxhdGUucHJvdG90eXBlIGFzIFJlY29yZDxzdHJpbmcsIGFueT47XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIE1hdGVyaWFsUGFyYW1UeXBlLlVuc2lnbmVkSW50OlxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVByb3RvW2dldHRlcklkXSA9IHVpbnQzMkdldHRlcihpbmRleCwgY29tcG9uZW50Q291bnQpO1xuICAgICAgICAgICAgICAgICAgICAvKiBGb3Igbm93LCBpdCdzIG9ubHkgcG9zc2libGUgdG8gc2V0IHNjYWxhciB1aW50IHZhbHVlcyAqL1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVByb3RvW3NldHRlcklkXSA9IHVpbnQzMlNldHRlcihpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgTWF0ZXJpYWxQYXJhbVR5cGUuSW50OlxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVByb3RvW2dldHRlcklkXSA9IGludDMyR2V0dGVyKGluZGV4LCBjb21wb25lbnRDb3VudCk7XG4gICAgICAgICAgICAgICAgICAgIC8qIEZvciBub3csIGl0J3Mgb25seSBwb3NzaWJsZSB0byBzZXQgc2NhbGFyIGludCB2YWx1ZXMuIEludGVnZXIgdmFsdWVzIHNldHRlclxuICAgICAgICAgICAgICAgICAgICAgKiBpcyBwdXJwb3NlbHkgc2hhcmVkIHdpdGggdWludC4gKi9cbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVQcm90b1tzZXR0ZXJJZF0gPSB1aW50MzJTZXR0ZXIoaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIE1hdGVyaWFsUGFyYW1UeXBlLkhhbGZGbG9hdDpcbiAgICAgICAgICAgICAgICBjYXNlIE1hdGVyaWFsUGFyYW1UeXBlLkZsb2F0OlxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVByb3RvW2dldHRlcklkXSA9IGZsb2F0MzJHZXR0ZXIoaW5kZXgsIGNvbXBvbmVudENvdW50KTtcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVQcm90b1tzZXR0ZXJJZF0gPSBmbG9hdDMyU2V0dGVyKGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBNYXRlcmlhbFBhcmFtVHlwZS5TYW1wbGVyOlxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVByb3RvW2dldHRlcklkXSA9IHNhbXBsZXJHZXR0ZXIoaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVByb3RvW3NldHRlcklkXSA9IHNhbXBsZXJTZXR0ZXIoaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIE1hdGVyaWFsUGFyYW1UeXBlLkZvbnQ6XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUHJvdG9bZ2V0dGVySWRdID0gZm9udEdldHRlcihpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIC8qIEZvciBub3csIHNldHRpbmcgZm9udHMgaXMgbm90IHN1cHBvcnRlZCAqL1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZSBhcyBNYXRlcmlhbENvbnN0cnVjdG9yO1xuICAgIH1cbn1cblxuLyoqIEB0b2RvOiBXaXRoIHRoaXMgaW1wbGVtZW50YXRpb24sIGBfd2xfbWF0ZXJpYWxfZ2V0X3BhcmFtX3ZhbHVlYFxuICogZG8gbm90IG5lZWQgdG8gY2hlY2sgZm9yIHRoZSBwYXJhbWV0ZXIgdHlwZSBhbnltb3JlLCB3ZSBjb3VsZCB1c2VcbiAqIGV4cGxpY2l0IGNhbGxzLiAqL1xuXG5mdW5jdGlvbiB1aW50MzJHZXR0ZXIoaW5kZXg6IG51bWJlciwgY291bnQ6IG51bWJlcikge1xuICAgIGlmIChjb3VudCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRoaXM6IE1hdGVyaWFsKSB7XG4gICAgICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgICAgIHdhc20uX3dsX21hdGVyaWFsX2dldF9wYXJhbV92YWx1ZSh0aGlzLl9pZCwgaW5kZXgsIHdhc20uX3RlbXBNZW0pO1xuICAgICAgICAgICAgcmV0dXJuIHdhc20uX3RlbXBNZW1VaW50MzJbMF07XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAodGhpczogTWF0ZXJpYWwsIG91dDogTnVtYmVyQXJyYXkgPSBuZXcgVWludDMyQXJyYXkoY291bnQpKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl93bF9tYXRlcmlhbF9nZXRfcGFyYW1fdmFsdWUodGhpcy5faWQsIGluZGV4LCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvdXQubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIG91dFtpXSA9IHdhc20uX3RlbXBNZW1VaW50MzJbaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufVxuXG5mdW5jdGlvbiB1aW50MzJTZXR0ZXIoaW5kZXg6IG51bWJlcikge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGhpczogTWF0ZXJpYWwsIHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIHdhc20uX3dsX21hdGVyaWFsX3NldF9wYXJhbV92YWx1ZV91aW50KHRoaXMuX2lkLCBpbmRleCwgdmFsdWUpO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIGludDMyR2V0dGVyKGluZGV4OiBudW1iZXIsIGNvdW50OiBudW1iZXIpIHtcbiAgICBpZiAoY291bnQgPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0aGlzOiBNYXRlcmlhbCkge1xuICAgICAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgICAgICB3YXNtLl93bF9tYXRlcmlhbF9nZXRfcGFyYW1fdmFsdWUodGhpcy5faWQsIGluZGV4LCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgICAgIHJldHVybiB3YXNtLl90ZW1wTWVtSW50WzBdO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKHRoaXM6IE1hdGVyaWFsLCBvdXQ6IE51bWJlckFycmF5ID0gbmV3IEludDMyQXJyYXkoY291bnQpKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl93bF9tYXRlcmlhbF9nZXRfcGFyYW1fdmFsdWUodGhpcy5faWQsIGluZGV4LCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvdXQubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIG91dFtpXSA9IHdhc20uX3RlbXBNZW1JbnRbaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBmbG9hdDMyR2V0dGVyKGluZGV4OiBudW1iZXIsIGNvdW50OiBudW1iZXIpIHtcbiAgICBpZiAoY291bnQgPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0aGlzOiBNYXRlcmlhbCkge1xuICAgICAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgICAgICB3YXNtLl93bF9tYXRlcmlhbF9nZXRfcGFyYW1fdmFsdWUodGhpcy5faWQsIGluZGV4LCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgICAgIHJldHVybiB3YXNtLl90ZW1wTWVtRmxvYXRbMF07XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAodGhpczogTWF0ZXJpYWwsIG91dDogTnVtYmVyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KGNvdW50KSkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfbWF0ZXJpYWxfZ2V0X3BhcmFtX3ZhbHVlKHRoaXMuX2lkLCBpbmRleCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3V0Lmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBvdXRbaV0gPSB3YXNtLl90ZW1wTWVtRmxvYXRbaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBmbG9hdDMyU2V0dGVyKGluZGV4OiBudW1iZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRoaXM6IE1hdGVyaWFsLCB2YWx1ZTogbnVtYmVyIHwgTnVtYmVyQXJyYXkpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG5cbiAgICAgICAgbGV0IGNvdW50ID0gMTtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHdhc20uX3RlbXBNZW1GbG9hdFswXSA9IHZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY291bnQgPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyArK2kpIHdhc20uX3RlbXBNZW1GbG9hdFtpXSA9IHZhbHVlW2ldO1xuICAgICAgICB9XG4gICAgICAgIHdhc20uX3dsX21hdGVyaWFsX3NldF9wYXJhbV92YWx1ZV9mbG9hdCh0aGlzLl9pZCwgaW5kZXgsIHdhc20uX3RlbXBNZW0sIGNvdW50KTtcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBzYW1wbGVyR2V0dGVyKGluZGV4OiBudW1iZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRoaXM6IE1hdGVyaWFsKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl93bF9tYXRlcmlhbF9nZXRfcGFyYW1fdmFsdWUodGhpcy5faWQsIGluZGV4LCB3YXNtLl90ZW1wTWVtKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLnRleHR1cmVzLndyYXAod2FzbS5fdGVtcE1lbUludFswXSk7XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gc2FtcGxlclNldHRlcihpbmRleDogbnVtYmVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0aGlzOiBNYXRlcmlhbCwgdmFsdWU6IFRleHR1cmUgfCBudWxsIHwgdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICB3YXNtLl93bF9tYXRlcmlhbF9zZXRfcGFyYW1fdmFsdWVfdWludCh0aGlzLl9pZCwgaW5kZXgsIHZhbHVlPy5faWQgPz8gMCk7XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gZm9udEdldHRlcihpbmRleDogbnVtYmVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0aGlzOiBNYXRlcmlhbCkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfbWF0ZXJpYWxfZ2V0X3BhcmFtX3ZhbHVlKHRoaXMuX2lkLCBpbmRleCwgd2FzbS5fdGVtcE1lbSk7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS5mb250cy53cmFwKHdhc20uX3RlbXBNZW1JbnRbMF0pO1xuICAgIH07XG59XG4iLCAiaW1wb3J0IHtXb25kZXJsYW5kRW5naW5lfSBmcm9tICcuLi9pbmRleC5qcyc7XG5pbXBvcnQge01lc2gsIE1lc2hJbmRleFR5cGUsIE1lc2hQYXJhbWV0ZXJzLCBNZXNoU2tpbm5pbmdUeXBlfSBmcm9tICcuLi93b25kZXJsYW5kLmpzJztcblxuaW1wb3J0IHtSZXNvdXJjZU1hbmFnZXJ9IGZyb20gJy4vcmVzb3VyY2UuanMnO1xuXG4vKipcbiAqIE1hbmFnZSBtZXNoZXMuXG4gKlxuICogIyMjIyBDcmVhdGlvblxuICpcbiAqIENyZWF0aW5nIGEgbWVzaCBpcyBkb25lIHVzaW5nIHtAbGluayBNZXNoTWFuYWdlci5jcmVhdGV9OlxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCBtZXNoID0gZW5naW5lLm1lc2hlcy5jcmVhdGUoe3ZlcnRleENvdW50OiAzLCBpbmRleERhdGE6IFswLCAxLCAyXX0pO1xuICogYGBgXG4gKlxuICogQHNpbmNlIDEuMi4wXG4gKi9cbmV4cG9ydCBjbGFzcyBNZXNoTWFuYWdlciBleHRlbmRzIFJlc291cmNlTWFuYWdlcjxNZXNoPiB7XG4gICAgY29uc3RydWN0b3IoZW5naW5lOiBXb25kZXJsYW5kRW5naW5lKSB7XG4gICAgICAgIHN1cGVyKGVuZ2luZSwgTWVzaCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IG1lc2guXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFyYW1zIFZlcnRleCBhbmQgaW5kZXggZGF0YS4gRm9yIG1vcmUgaW5mb3JtYXRpb24sIGhhdmUgYSBsb29rXG4gICAgICogICAgIGF0IHRoZSB7QGxpbmsgTWVzaFBhcmFtZXRlcnN9IG9iamVjdC5cbiAgICAgKi9cbiAgICBjcmVhdGUocGFyYW1zOiBQYXJ0aWFsPE1lc2hQYXJhbWV0ZXJzPikge1xuICAgICAgICBpZiAoIXBhcmFtcy52ZXJ0ZXhDb3VudCkgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBwYXJhbWV0ZXIgJ3ZlcnRleENvdW50J1wiKTtcblxuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcblxuICAgICAgICBsZXQgaW5kZXhEYXRhID0gMDtcbiAgICAgICAgbGV0IGluZGV4VHlwZSA9IDA7XG4gICAgICAgIGxldCBpbmRleERhdGFTaXplID0gMDtcbiAgICAgICAgaWYgKHBhcmFtcy5pbmRleERhdGEpIHtcbiAgICAgICAgICAgIGluZGV4VHlwZSA9IHBhcmFtcy5pbmRleFR5cGUgfHwgTWVzaEluZGV4VHlwZS5VbnNpZ25lZFNob3J0O1xuICAgICAgICAgICAgaW5kZXhEYXRhU2l6ZSA9IHBhcmFtcy5pbmRleERhdGEubGVuZ3RoICogaW5kZXhUeXBlO1xuICAgICAgICAgICAgaW5kZXhEYXRhID0gd2FzbS5fbWFsbG9jKGluZGV4RGF0YVNpemUpO1xuICAgICAgICAgICAgLyogQ29weSB0aGUgaW5kZXggZGF0YSBpbnRvIHdhc20gbWVtb3J5ICovXG4gICAgICAgICAgICBzd2l0Y2ggKGluZGV4VHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgTWVzaEluZGV4VHlwZS5VbnNpZ25lZEJ5dGU6XG4gICAgICAgICAgICAgICAgICAgIHdhc20uSEVBUFU4LnNldChwYXJhbXMuaW5kZXhEYXRhLCBpbmRleERhdGEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIE1lc2hJbmRleFR5cGUuVW5zaWduZWRTaG9ydDpcbiAgICAgICAgICAgICAgICAgICAgd2FzbS5IRUFQVTE2LnNldChwYXJhbXMuaW5kZXhEYXRhLCBpbmRleERhdGEgPj4gMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgTWVzaEluZGV4VHlwZS5VbnNpZ25lZEludDpcbiAgICAgICAgICAgICAgICAgICAgd2FzbS5IRUFQVTMyLnNldChwYXJhbXMuaW5kZXhEYXRhLCBpbmRleERhdGEgPj4gMik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qge3NraW5uaW5nVHlwZSA9IE1lc2hTa2lubmluZ1R5cGUuTm9uZX0gPSBwYXJhbXM7XG5cbiAgICAgICAgY29uc3QgaW5kZXggPSB3YXNtLl93bF9tZXNoX2NyZWF0ZShcbiAgICAgICAgICAgIGluZGV4RGF0YSxcbiAgICAgICAgICAgIGluZGV4RGF0YVNpemUsXG4gICAgICAgICAgICBpbmRleFR5cGUsXG4gICAgICAgICAgICBwYXJhbXMudmVydGV4Q291bnQsXG4gICAgICAgICAgICBza2lubmluZ1R5cGVcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSBuZXcgTWVzaCh0aGlzLl9ob3N0LCBpbmRleCk7XG4gICAgICAgIHRoaXMuX2NhY2hlW2luc3RhbmNlLmluZGV4XSA9IGluc3RhbmNlO1xuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgfVxufVxuIiwgImltcG9ydCB7V29uZGVybGFuZEVuZ2luZX0gZnJvbSAnLi4vaW5kZXguanMnO1xuaW1wb3J0IHtJbWFnZUxpa2V9IGZyb20gJy4uL3R5cGVzLmpzJztcbmltcG9ydCB7VGV4dHVyZX0gZnJvbSAnLi4vd29uZGVybGFuZC5qcyc7XG5cbmltcG9ydCB7UmVzb3VyY2VNYW5hZ2VyLCBTY2VuZVJlc291cmNlfSBmcm9tICcuL3Jlc291cmNlLmpzJztcblxuLyoqXG4gKiBNYW5hZ2UgdGV4dHVyZXMuXG4gKlxuICogIyMjIyBDcmVhdGlvblxuICpcbiAqIENyZWF0aW5nIGEgdGV4dHVyZSBpcyBkb25lIHVzaW5nIHtAbGluayBUZXh0dXJlTWFuYWdlci5sb2FkfTpcbiAqXG4gKiBgYGBqc1xuICogY29uc3QgdGV4dHVyZSA9IGF3YWl0IGVuZ2luZS50ZXh0dXJlcy5sb2FkKCdteS1pbWFnZS5wbmcnKTtcbiAqIGBgYFxuICpcbiAqIEFsdGVybmF0aXZlbHksIHRleHR1cmVzIGNhbiBiZSBjcmVhdGVkIGRpcmVjdGx5IHZpYSBhIGxvYWRlZCBpbWFnZSB1c2luZ1xuICoge0BsaW5rIFRleHR1cmVNYW5hZ2VyLmNyZWF0ZX0uXG4gKlxuICogQHNpbmNlIDEuMi4wXG4gKi9cbmV4cG9ydCBjbGFzcyBUZXh0dXJlTWFuYWdlciBleHRlbmRzIFJlc291cmNlTWFuYWdlcjxUZXh0dXJlPiB7XG4gICAgY29uc3RydWN0b3IoZW5naW5lOiBXb25kZXJsYW5kRW5naW5lKSB7XG4gICAgICAgIHN1cGVyKGVuZ2luZSwgVGV4dHVyZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IHRleHR1cmUgZnJvbSBhbiBpbWFnZSBvciB2aWRlby5cbiAgICAgKlxuICAgICAqICMjIyMgVXNhZ2VcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICogaW1nLmxvYWQgPSBmdW5jdGlvbihpbWcpIHtcbiAgICAgKiAgICAgY29uc3QgdGV4dHVyZSA9IGVuZ2luZS50ZXh0dXJlcy5jcmVhdGUoaW1nKTtcbiAgICAgKiB9O1xuICAgICAqIGltZy5zcmMgPSAnbXktaW1hZ2UucG5nJztcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBub3RlIFRoZSBtZWRpYSBtdXN0IGFscmVhZHkgYmUgbG9hZGVkLiBUbyBhdXRvbWF0aWNhbGx5XG4gICAgICogbG9hZCB0aGUgbWVkaWEgYW5kIGNyZWF0ZSBhIHRleHR1cmUsIHVzZSB7QGxpbmsgVGV4dHVyZU1hbmFnZXIubG9hZH0gaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbWFnZSBNZWRpYSBlbGVtZW50IHRvIGNyZWF0ZSB0aGUgdGV4dHVyZSBmcm9tLlxuICAgICAqIEByZXRcXHVybnMgVGhlIG5ldyB0ZXh0dXJlIHdpdGggdGhlIG1lZGlhIGNvbnRlbnQuXG4gICAgICovXG4gICAgY3JlYXRlKGltYWdlOiBJbWFnZUxpa2UpOiBUZXh0dXJlIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG5cbiAgICAgICAgY29uc3QganNJbWFnZUluZGV4ID0gd2FzbS5faW1hZ2VzLmxlbmd0aDtcbiAgICAgICAgd2FzbS5faW1hZ2VzLnB1c2goaW1hZ2UpO1xuXG4gICAgICAgIGlmIChpbWFnZSBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQgJiYgIWltYWdlLmNvbXBsZXRlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ltYWdlIG11c3QgYmUgcmVhZHkgdG8gY3JlYXRlIGEgdGV4dHVyZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgd2lkdGggPSAoaW1hZ2UgYXMgSFRNTFZpZGVvRWxlbWVudCkudmlkZW9XaWR0aCA/PyBpbWFnZS53aWR0aDtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gKGltYWdlIGFzIEhUTUxWaWRlb0VsZW1lbnQpLnZpZGVvSGVpZ2h0ID8/IGltYWdlLmhlaWdodDtcblxuICAgICAgICBjb25zdCBpbWFnZUluZGV4ID0gd2FzbS5fd2xfaW1hZ2VfY3JlYXRlKGpzSW1hZ2VJbmRleCwgd2lkdGgsIGhlaWdodCk7XG5cbiAgICAgICAgLyogUmVxdWlyZWQgYmVjYXVzZSB0aGUgaW1hZ2UgaXNuJ3QgYSByZXNvdXJjZSBieSBpdHNlbGYsIGJ1dCB3aWxsIGV2ZW50dWFsbHkgYmUgb25lLiAqL1xuICAgICAgICBjb25zdCBpbmRleCA9IHdhc20uX3dsX3RleHR1cmVfY3JlYXRlKGltYWdlSW5kZXgpO1xuXG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gbmV3IFRleHR1cmUodGhpcy5lbmdpbmUsIGluZGV4KTtcbiAgICAgICAgdGhpcy5fY2FjaGVbaW5zdGFuY2UuaW5kZXhdID0gaW5zdGFuY2U7XG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2FkIGFuIGltYWdlIGZyb20gVVJMIGFzIHtAbGluayBUZXh0dXJlfS5cbiAgICAgKlxuICAgICAqICMjIyMgVXNhZ2VcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgdGV4dHVyZSA9IGF3YWl0IGVuZ2luZS50ZXh0dXJlcy5sb2FkKCdteS1pbWFnZS5wbmcnKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWxlbmFtZSBVUkwgdG8gbG9hZCBmcm9tLlxuICAgICAqIEBwYXJhbSBjcm9zc09yaWdpbiBDcm9zcyBvcmlnaW4gZmxhZyBmb3IgdGhlIGltYWdlIG9iamVjdC5cbiAgICAgKiBAcmV0dXJucyBMb2FkZWQgdGV4dHVyZS5cbiAgICAgKi9cbiAgICBsb2FkKGZpbGVuYW1lOiBzdHJpbmcsIGNyb3NzT3JpZ2luPzogc3RyaW5nKTogUHJvbWlzZTxUZXh0dXJlPiB7XG4gICAgICAgIGxldCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpbWFnZS5jcm9zc09yaWdpbiA9IGNyb3NzT3JpZ2luID8/IGltYWdlLmNyb3NzT3JpZ2luO1xuICAgICAgICBpbWFnZS5zcmMgPSBmaWxlbmFtZTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGltYWdlLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMuY3JlYXRlKGltYWdlKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaW1hZ2Uub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZWplY3QoJ0ZhaWxlZCB0byBsb2FkIGltYWdlLiBOb3QgZm91bmQgb3Igbm8gcmVhZCBhY2Nlc3MnKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsICJpbXBvcnQge1dvbmRlcmxhbmRFbmdpbmV9IGZyb20gJy4vaW5kZXguanMnO1xuaW1wb3J0IHtJbnN0YW50aWF0ZUdsdGZSZXN1bHQsIFNjZW5lfSBmcm9tICcuL3NjZW5lLmpzJztcbmltcG9ydCB7UHJlZmFifSBmcm9tICcuL3ByZWZhYi5qcyc7XG5pbXBvcnQge09iamVjdDNEfSBmcm9tICcuL3dvbmRlcmxhbmQuanMnO1xuXG4vKiogR0xURi1zcGVjaWZpYyBsb2FkaW5nIG9wdGlvbnMuICovXG5leHBvcnQgdHlwZSBHTFRGT3B0aW9ucyA9IHtcbiAgICAvKiogSWYgYHRydWVgLCBleHRlbnNpb25zIHdpbGwgYmUgcGFyc2VkLiAqL1xuICAgIGV4dGVuc2lvbnM/OiBib29sZWFuO1xufTtcblxuLyoqXG4gKiBFeHRlbnNpb24gZGF0YSBvYnRhaW5lZCBmcm9tIGdsVEYgZmlsZXMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgR0xURkV4dGVuc2lvbnNJbnN0YW5jZSB7XG4gICAgLyoqXG4gICAgICogTWVzaCBleHRlbnNpb24gb2JqZWN0cy4gS2V5IGlzIHtAbGluayBPYmplY3QzRC5vYmplY3RJZH0sIHZhbHVlIGlzIEpTT05cbiAgICAgKiBkYXRhIGluZGV4ZWQgYnkgZXh0ZW5zaW9uIG5hbWUuXG4gICAgICovXG4gICAgbWVzaDogUmVjb3JkPG51bWJlciwgUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgYW55Pj4+O1xuICAgIC8qKlxuICAgICAqIE5vZGUgZXh0ZW5zaW9uIG9iamVjdHMuIEtleSBpcyB7QGxpbmsgT2JqZWN0M0Qub2JqZWN0SWR9LCB2YWx1ZSBpcyBKU09OXG4gICAgICogZGF0YSBpbmRleGVkIGJ5IGV4dGVuc2lvbiBuYW1lLlxuICAgICAqL1xuICAgIG5vZGU6IFJlY29yZDxudW1iZXIsIFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIGFueT4+PjtcbiAgICAvKiogUmVtYXBwaW5nIGZyb20gZ2xURiBub2RlIGluZGV4IHRvIHtAbGluayBPYmplY3QzRC5vYmplY3RJZH0uICovXG4gICAgaWRNYXBwaW5nOiBudW1iZXJbXTtcbn1cblxuZXhwb3J0IGNsYXNzIEdMVEZFeHRlbnNpb25zIHtcbiAgICBvYmplY3RDb3VudDogbnVtYmVyO1xuICAgIC8qKiBnbFRGIHJvb3QgZXh0ZW5zaW9ucyBvYmplY3QuIEpTT04gZGF0YSBpbmRleGVkIGJ5IGV4dGVuc2lvbiBuYW1lLiAqL1xuICAgIHJvb3Q6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcbiAgICAvKipcbiAgICAgKiBNZXNoIGV4dGVuc2lvbiBvYmplY3RzLiBLZXkgaXMgdGhlIGdsdGYgaW5kZXgsIHZhbHVlIGlzIEpTT05cbiAgICAgKiBkYXRhIGluZGV4ZWQgYnkgZXh0ZW5zaW9uIG5hbWUuXG4gICAgICovXG4gICAgbWVzaDogUmVjb3JkPG51bWJlciwgUmVjb3JkPHN0cmluZywgYW55Pj4gPSB7fTtcbiAgICAvKipcbiAgICAgKiBOb2RlIGV4dGVuc2lvbiBvYmplY3RzLiBLZXkgaXMgYSBnbFRGIGluZGV4LCB2YWx1ZSBpcyBKU09OXG4gICAgICogZGF0YSBpbmRleGVkIGJ5IGV4dGVuc2lvbiBuYW1lLlxuICAgICAqL1xuICAgIG5vZGU6IFJlY29yZDxudW1iZXIsIFJlY29yZDxzdHJpbmcsIGFueT4+ID0ge307XG5cbiAgICBjb25zdHJ1Y3Rvcihjb3VudDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMub2JqZWN0Q291bnQgPSBjb3VudDtcbiAgICB9XG59XG5cbi8qKlxuICogZ2xURiBzY2VuZS5cbiAqXG4gKiBBdCB0aGUgb3Bwb3NpdGUgb2Yge0BsaW5rIFNjZW5lfSwgZ2xURiBzY2VuZXMgY2FuIGJlIGluc3RhbnRpYXRlZFxuICogaW4gb3RoZXIgc2NlbmVzIGJ1dCBjYW4ndDpcbiAqIC0gQmUgYWN0aXZhdGVkXG4gKiAtIEJlIHRoZSBkZXN0aW5hdGlvbiBvZiBhbiBpbnN0YW50aWF0aW9uXG4gKlxuICogIyMjIyBVc2FnZVxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCBwcmVmYWIgPSBhd2FpdCBlbmdpbmUubG9hZEdMVEYoJ1pvbWJpZS5nbGInKTtcbiAqXG4gKiBjb25zdCBzY2VuZSA9IGVuZ2luZS5zY2VuZTtcbiAqIGZvciAobGV0IGkgPSAwOyBpIDwgMTAwOyArK2kpIHtcbiAqICAgICBzY2VuZS5pbnN0YW50aWF0ZShwcmVmYWIpO1xuICogfVxuICogYGBgXG4gKlxuICogU2luY2UgdGhpcyBjbGFzcyBpbmhlcml0cyBmcm9tIHtAbGluayBQcmVmYWJ9LCB5b3UgY2FuIHVzZSB0aGUgc2hhcmVkXG4gKiBBUEkgdG8gbW9kaWZ5IHRoZSBnbFRGIGJlZm9yZSBhbiBpbnN0YW50aWF0aW9uOlxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCBwcmVmYWIgPSBhd2FpdCBlbmdpbmUubG9hZEdMVEYoJ1pvbWJpZS5nbGInKTtcbiAqIGNvbnN0IHpvbWJpZSA9IHByZWZhYi5maW5kQnlOYW1lKCdab21iaWUnKVswXTtcbiAqXG4gKiAvLyBUaGUgbWVzaCBpcyB0b28gc21hbGwsIHdlIHNjYWxlIHRoZSByb290XG4gKiB6b21iaWUuc2V0U2NhbGluZ1dvcmxkKFsyLCAyLCAyXSk7XG4gKiAvLyBBZGQgYSBjdXN0b20ganMgJ2hlYWx0aCcgY29tcG9uZW50IHRvIHRoZSByb290XG4gKiB6b21iaWUuYWRkQ29tcG9uZW50KCdoZWFsdGgnLCB7dmFsdWU6IDEwMH0pO1xuICpcbiAqIC8vICdab21iaWUnIGlzIHdyYXBwZWQgaW4gYSBuZXcgcm9vdCBhZGRlZCBkdXJpbmcgaW5zdGFudGlhdGlvblxuICogY29uc3Qge3Jvb3R9ID0gZW5naW5lLnNjZW5lLmluc3RhbnRpYXRlKHByZWZhYik7XG4gKiBjb25zdCBpbnN0YW5jZVpvbWJpZSA9IHJvb3QuY2hpbGRyZW5bMF07XG4gKiBjb25zb2xlLmxvZyhpbnN0YW5jZVpvbWJpZS5nZXRTY2FsaW5nV29ybGQoKSk7IC8vIFByaW50cyAnWzIsIDIsIDJdJ1xuICogYGBgXG4gKlxuICogQGNhdGVnb3J5IHNjZW5lXG4gKiBAc2luY2UgMS4yLjBcbiAqL1xuZXhwb3J0IGNsYXNzIFByZWZhYkdMVEYgZXh0ZW5kcyBQcmVmYWIge1xuICAgIC8qKlxuICAgICAqIFJhdyBleHRlbnNpb25zIHJlYWQgZnJvbSB0aGUgZ2xURiBmaWxlLlxuICAgICAqXG4gICAgICogVGhlIGV4dGVuc2lvbnMgd2lsbCBiZSBtYXBwZWQgdG8gdGhlIGhpZXJhcmNoeSB1cG9uIGluc3RhbnRpYXRpb24uXG4gICAgICogRm9yIG1vcmUgaW5mb3JtYXRpb24sIGhhdmUgYSBsb29rIGF0IHRoZSB7QGxpbmsgSW5zdGFudGlhdGVHbHRmUmVzdWx0fSB0eXBlLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhlIGdsVEYgbXVzdCBiZSBsb2FkZWQgd2l0aCBgZXh0ZW5zaW9uc2AgZW5hYmxlZC4gSWYgbm90LCB0aGlzXG4gICAgICogZmllbGQgd2lsbCBiZSBzZXQgdG8gYG51bGxgLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgaGF2ZSBhIGxvb2sgYXQgdGhlXG4gICAgICoge0BsaW5rIEdMVEZPcHRpb25zfSB0eXBlLlxuICAgICAqL1xuICAgIGV4dGVuc2lvbnM6IEdMVEZFeHRlbnNpb25zIHwgbnVsbCA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZW5naW5lOiBXb25kZXJsYW5kRW5naW5lLCBpbmRleDogbnVtYmVyKSB7XG4gICAgICAgIHN1cGVyKGVuZ2luZSwgaW5kZXgpO1xuICAgICAgICB0aGlzLmV4dGVuc2lvbnMgPSB0aGlzLl9yZWFkRXh0ZW5zaW9ucygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluc3RhbnRpYXRlIHRoZSBnbFRGIGV4dGVuc2lvbnMgb24gYW4gYWN0aXZlIHN1YiBzY2VuZSBncmFwaC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpZCBUaGUgcm9vdCBvYmplY3QgaWQuXG4gICAgICogQHBhcmFtIHJlc3VsdCBUaGUgaW5zdGFudGlhdGlvbiBvYmplY3QgcmVzdWx0LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9wcm9jZXNzSW5zdGFudGlhdG9uKGRlc3Q6IFByZWZhYiwgcm9vdDogT2JqZWN0M0QsIHJlc3VsdDogSW5zdGFudGlhdGVHbHRmUmVzdWx0KSB7XG4gICAgICAgIGlmICghdGhpcy5leHRlbnNpb25zKSByZXR1cm4gbnVsbDtcblxuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcblxuICAgICAgICBjb25zdCBjb3VudCA9IHRoaXMuZXh0ZW5zaW9ucy5vYmplY3RDb3VudDtcbiAgICAgICAgY29uc3QgaWRNYXBwaW5nOiBudW1iZXJbXSA9IG5ldyBBcnJheShjb3VudCk7XG5cbiAgICAgICAgLyoqIEB0b2RvOiBXZSBuZWVkIHNvbWUgY2hlY2sgdG8gZW5zdXJlIHRoYXQgdGhlIGdsdGYgbGF5b3V0IGRpZG4ndCBjaGFuZ2UgdG8gcmV0YXJnZXQgZXh0ZW5zaW9ucy5cbiAgICAgICAgICogQXQgbGVhc3QgYSBzaW1wbGUgc2NlbmUgZ3JhcGggc2l6ZSBjaGVjayBzaG91bGQgYmUgcmVxdWlyZWQgdG8gYXZvaWQgYSBzZWdmYXVsdC4gKi9cblxuICAgICAgICBjb25zdCBhY3RpdmVSb290SW5kZXggPSB3YXNtLl93bF9vYmplY3RfaW5kZXgocm9vdC5faWQpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IG1hcHBlZElkID0gd2FzbS5fd2xfZ2xURl9zY2VuZV9leHRlbnNpb25zX2dsdGZJbmRleF90b19pZChcbiAgICAgICAgICAgICAgICB0aGlzLl9pbmRleCxcbiAgICAgICAgICAgICAgICBkZXN0Ll9pbmRleCxcbiAgICAgICAgICAgICAgICBhY3RpdmVSb290SW5kZXgsXG4gICAgICAgICAgICAgICAgaVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlkTWFwcGluZ1tpXSA9IG1hcHBlZElkO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVtYXBwZWQ6IEdMVEZFeHRlbnNpb25zSW5zdGFuY2UgPSB7XG4gICAgICAgICAgICBtZXNoOiB7fSxcbiAgICAgICAgICAgIG5vZGU6IHt9LFxuICAgICAgICAgICAgaWRNYXBwaW5nLFxuICAgICAgICB9O1xuXG4gICAgICAgIGZvciAoY29uc3QgZ2x0ZkluZGV4IGluIHRoaXMuZXh0ZW5zaW9ucy5tZXNoKSB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IGlkTWFwcGluZ1tnbHRmSW5kZXhdO1xuICAgICAgICAgICAgcmVtYXBwZWQubWVzaFtpZF0gPSB0aGlzLmV4dGVuc2lvbnMubWVzaFtnbHRmSW5kZXhdO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgZ2x0ZkluZGV4IGluIHRoaXMuZXh0ZW5zaW9ucy5ub2RlKSB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IGlkTWFwcGluZ1tnbHRmSW5kZXhdO1xuICAgICAgICAgICAgcmVtYXBwZWQubm9kZVtpZF0gPSB0aGlzLmV4dGVuc2lvbnMubm9kZVtnbHRmSW5kZXhdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVzdWx0LmV4dGVuc2lvbnMgPSByZW1hcHBlZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVbm1hcnNoYWxscyBnbHRmIGV4dGVuc2lvbnMuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcHJpdmF0ZSBfcmVhZEV4dGVuc2lvbnMoKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuXG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uX3dsX2dsVEZfc2NlbmVfZ2V0X2V4dGVuc2lvbnModGhpcy5faW5kZXgpO1xuICAgICAgICBpZiAoIXB0cikgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgbGV0IGluZGV4ID0gcHRyIC8gNDtcbiAgICAgICAgY29uc3QgZGF0YSA9IHdhc20uSEVBUFUzMjtcbiAgICAgICAgY29uc3QgcmVhZFN0cmluZyA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0clB0ciA9IGRhdGFbaW5kZXgrK107XG4gICAgICAgICAgICBjb25zdCBzdHJMZW4gPSBkYXRhW2luZGV4KytdO1xuICAgICAgICAgICAgcmV0dXJuIHdhc20uVVRGOFZpZXdUb1N0cmluZyhzdHJQdHIsIHN0clB0ciArIHN0ckxlbik7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3Qgb2JqZWN0Q291bnQgPSBkYXRhW2luZGV4KytdO1xuICAgICAgICBjb25zdCBleHRlbnNpb25zID0gbmV3IEdMVEZFeHRlbnNpb25zKG9iamVjdENvdW50KTtcblxuICAgICAgICBjb25zdCBtZXNoRXh0ZW5zaW9uc1NpemUgPSBkYXRhW2luZGV4KytdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lc2hFeHRlbnNpb25zU2l6ZTsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBvYmplY3RJZCA9IGRhdGFbaW5kZXgrK107XG4gICAgICAgICAgICBleHRlbnNpb25zLm1lc2hbb2JqZWN0SWRdID0gSlNPTi5wYXJzZShyZWFkU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5vZGVFeHRlbnNpb25zU2l6ZSA9IGRhdGFbaW5kZXgrK107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZUV4dGVuc2lvbnNTaXplOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IG9iamVjdElkID0gZGF0YVtpbmRleCsrXTtcbiAgICAgICAgICAgIGV4dGVuc2lvbnMubm9kZVtvYmplY3RJZF0gPSBKU09OLnBhcnNlKHJlYWRTdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgcm9vdEV4dGVuc2lvbnNTdHIgPSByZWFkU3RyaW5nKCk7XG4gICAgICAgIGlmIChyb290RXh0ZW5zaW9uc1N0cikge1xuICAgICAgICAgICAgZXh0ZW5zaW9ucy5yb290ID0gSlNPTi5wYXJzZShyb290RXh0ZW5zaW9uc1N0cik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZXh0ZW5zaW9ucztcbiAgICB9XG59XG4iLCAiaW1wb3J0IHtXb25kZXJsYW5kRW5naW5lfSBmcm9tICcuL2VuZ2luZS5qcyc7XG5pbXBvcnQge0xvZ1RhZywgV0FTTX0gZnJvbSAnLi9pbmRleC5qcyc7XG5pbXBvcnQge0VtaXR0ZXJ9IGZyb20gJy4vdXRpbHMvZXZlbnQuanMnO1xuaW1wb3J0IHtmZXRjaFN0cmVhbVdpdGhQcm9ncmVzcywgZmV0Y2hXaXRoUHJvZ3Jlc3MsIGdldEJhc2VVcmx9IGZyb20gJy4vdXRpbHMvZmV0Y2guanMnO1xuaW1wb3J0IHtpc1N0cmluZ30gZnJvbSAnLi91dGlscy9vYmplY3QuanMnO1xuaW1wb3J0IHtWaWV3Q29tcG9uZW50LCBPYmplY3QzRCwgUmF5SGl0LCBFbnZpcm9ubWVudH0gZnJvbSAnLi93b25kZXJsYW5kLmpzJztcbmltcG9ydCB7TnVtYmVyQXJyYXl9IGZyb20gJy4vdHlwZXMuanMnO1xuaW1wb3J0IHtNYXRlcmlhbH0gZnJvbSAnLi9yZXNvdXJjZXMvbWF0ZXJpYWwtbWFuYWdlci5qcyc7XG5pbXBvcnQge0luTWVtb3J5TG9hZE9wdGlvbnMsIFByZWZhYiwgU2NlbmVMb2FkT3B0aW9uc30gZnJvbSAnLi9wcmVmYWIuanMnO1xuaW1wb3J0IHtHTFRGRXh0ZW5zaW9uc0luc3RhbmNlLCBQcmVmYWJHTFRGfSBmcm9tICcuL3NjZW5lLWdsdGYuanMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEluc3RhbnRpYXRlUmVzdWx0IHtcbiAgICByb290OiBPYmplY3QzRDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbnN0YW50aWF0ZUdsdGZSZXN1bHQgZXh0ZW5kcyBJbnN0YW50aWF0ZVJlc3VsdCB7XG4gICAgZXh0ZW5zaW9uczogR0xURkV4dGVuc2lvbnNJbnN0YW5jZSB8IG51bGw7XG59XG5cbi8qKiBPcHRpb25zIGZvciBzY2VuZSBhY3RpdmF0aW9uLiAqL1xuZXhwb3J0IGludGVyZmFjZSBBY3RpdmF0ZU9wdGlvbnMge1xuICAgIC8qKiBJZiBgdHJ1ZWAsIGRpc3BhdGNoZXMgYSByZWFkeSBldmVudCBpbiB0aGUgZG9jdW1lbnQuICovXG4gICAgZGlzcGF0Y2hSZWFkeUV2ZW50PzogYm9vbGVhbjtcbiAgICAvKipcbiAgICAgKiBJZiBgdHJ1ZWAsIHRoZSBwcm9taXNlIHdpbGwgcmVzb2x2ZSBvbmx5IG9uY2UgYWxsIGRlcGVuZGVuY2llcyBhcmUgZG93bmxvYWRlZC5cbiAgICAgKlxuICAgICAqIElmIGBmYWxzZWAsIHJlc29sdmVzIGFzIHNvb24gYXMgcG9zc2libGUsIGUuZy4sIHdoZW4gdGhlIGxvd2VzdFxuICAgICAqIHJlc29sdXRpb24gdGV4dHVyZXMgYXJlIGF2YWlsYWJsZS5cbiAgICAgKi9cbiAgICB3YWl0Rm9yRGVwZW5kZW5jaWVzPzogYm9vbGVhbjtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIGxlZ2FjeUxvYWRlZD86IGJvb2xlYW47XG59XG5cbi8qKlxuICogTGVnYWN5IGdsdGYgZXh0ZW5zaW9uIHR5cGUuXG4gKlxuICogQGRlcHJlY2F0ZWQgVXNlIHRoZSBuZXcge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUubG9hZEdMVEZ9IEFQSS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBHTFRGRXh0ZW5zaW9uc0xlZ2FjeSB7XG4gICAgLyoqIGdsVEYgcm9vdCBleHRlbnNpb25zIG9iamVjdC4gSlNPTiBkYXRhIGluZGV4ZWQgYnkgZXh0ZW5zaW9uIG5hbWUuICovXG4gICAgcm9vdDogUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgYW55Pj47XG4gICAgLyoqXG4gICAgICogTWVzaCBleHRlbnNpb24gb2JqZWN0cy4gS2V5IGlzIHtAbGluayBPYmplY3QzRC5vYmplY3RJZH0sIHZhbHVlIGlzIEpTT05cbiAgICAgKiBkYXRhIGluZGV4ZWQgYnkgZXh0ZW5zaW9uIG5hbWUuXG4gICAgICovXG4gICAgbWVzaDogUmVjb3JkPG51bWJlciwgUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgYW55Pj4+O1xuICAgIC8qKlxuICAgICAqIE5vZGUgZXh0ZW5zaW9uIG9iamVjdHMuIEtleSBpcyB7QGxpbmsgT2JqZWN0M0Qub2JqZWN0SWR9LCB2YWx1ZSBpcyBKU09OXG4gICAgICogZGF0YSBpbmRleGVkIGJ5IGV4dGVuc2lvbiBuYW1lLlxuICAgICAqL1xuICAgIG5vZGU6IFJlY29yZDxudW1iZXIsIFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIGFueT4+PjtcbiAgICAvKiogUmVtYXBwaW5nIGZyb20gZ2xURiBub2RlIGluZGV4IHRvIHtAbGluayBPYmplY3QzRC5vYmplY3RJZH0uICovXG4gICAgaWRNYXBwaW5nOiBudW1iZXJbXTtcbn1cblxuLyoqIE9wdGlvbnMgZm9yIHtAbGluayBTY2VuZS5hcHBlbmR9LiAqL1xuZXhwb3J0IGludGVyZmFjZSBTY2VuZUFwcGVuZFBhcmFtZXRlcnMge1xuICAgIC8qKiBXaGV0aGVyIHRvIGxvYWQgZ2xURiBleHRlbnNpb24gZGF0YSAqL1xuICAgIGxvYWRHbHRmRXh0ZW5zaW9uczogYm9vbGVhbjtcbiAgICBiYXNlVVJMOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogUmVzdWx0IG9idGFpbmVkIHdoZW4gYXBwZW5kaW5nIGEgc2NlbmUgd2l0aCB7QGxpbmsgU2NlbmUuYXBwZW5kfSB3aXRoIGdsdGYgZXh0ZW5zaW9ucy5cbiAqL1xuZXhwb3J0IHR5cGUgU2NlbmVBcHBlbmRSZXN1bHRXaXRoRXh0ZW5zaW9ucyA9IHtcbiAgICByb290OiBPYmplY3QzRCB8IG51bGw7XG4gICAgZXh0ZW5zaW9uczogR0xURkV4dGVuc2lvbnNMZWdhY3k7XG59O1xuXG4vKipcbiAqIFJlc3VsdCBvYnRhaW5lZCB3aGVuIGFwcGVuZGluZyBhIHNjZW5lIHdpdGgge0BsaW5rIFNjZW5lLmFwcGVuZH0uXG4gKi9cbmV4cG9ydCB0eXBlIFNjZW5lQXBwZW5kUmVzdWx0ID0gKE9iamVjdDNEIHwgbnVsbCkgfCBTY2VuZUFwcGVuZFJlc3VsdFdpdGhFeHRlbnNpb25zO1xuXG4vKipcbiAqIENvbnN0YW50c1xuICovXG5cbi8qKiBNYWdpYyBudW1iZXIgZm9yIC5iaW4gKi9cbmNvbnN0IE1BR0lDX0JJTiA9ICdXTEVWJztcblxuLyoqXG4gKiBTY2VuZSB0eXBlIHRvIGxvYWQgd2l0aCB7QGxpbmsgQ2h1bmtlZFNjZW5lTG9hZFNpbmt9LlxuICpcbiAqIEBzaW5jZSAxLjIuMVxuICogQGhpZGRlblxuICovXG5leHBvcnQgZW51bSBTY2VuZVR5cGUge1xuICAgIFByZWZhYixcbiAgICBNYWluLFxuICAgIERlcGVuZGVuY3ksXG59XG5cbi8qKlxuICogU2luayBmb3IgYFdyaXRhYmxlU3RyZWFtYCB0aGF0IGxvYWRzIHRoZSBkYXRhIGFzIGEgLmJpbiBmaWxlLlxuICpcbiAqIERhdGEgaXMgbG9hZGVkIGNodW5rIGJ5IGNodW5rIHRvIG1pbmltaXplIHRoZSB0b3RhbCBXQVNNIGFsbG9jYXRpb24gc2l6ZS5cbiAqXG4gKiBAc2luY2UgMS4yLjFcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGNsYXNzIENodW5rZWRTY2VuZUxvYWRTaW5rIGltcGxlbWVudHMgVW5kZXJseWluZ1Npbms8VWludDhBcnJheT4ge1xuICAgIHJlYWRvbmx5ICN3YXNtOiBXQVNNO1xuICAgIHJlYWRvbmx5ICN0eXBlOiBTY2VuZVR5cGU7XG4gICAgcmVhZG9ubHkgI2Nsb3NlUGFyYW1ldGVyczogYW55W107XG4gICAgI29mZnNldCA9IDA7XG4gICAgI3JlcXVlc3RlZCA9IDA7XG4gICAgI2ZpcnN0Q2h1bmsgPSB0cnVlO1xuXG4gICAgX2xvYWRJbmRleCA9IC0xO1xuICAgIHNjZW5lSW5kZXggPSAtMTtcblxuICAgIC8qKiBQb2ludGVyIHRvIHRoZSBzdGFnaW5nIGJ1ZmZlci4gKi9cbiAgICAjcHRyOiBudW1iZXIgPSAwO1xuICAgIC8qKiBTdGFnaW5nIGJ1ZmZlciBzaXplLCBpbiAqKmJ5dGVzKiouICovXG4gICAgI2J1ZmZlclNpemU6IG51bWJlciA9IDA7XG5cbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgY29uc3RydWN0b3IoZW5naW5lOiBXb25kZXJsYW5kRW5naW5lLCB0eXBlOiBTY2VuZVR5cGUuUHJlZmFiLCB1cmw6IHN0cmluZyk7XG4gICAgLyoqIEBvdmVybG9hZCAqL1xuICAgIGNvbnN0cnVjdG9yKGVuZ2luZTogV29uZGVybGFuZEVuZ2luZSwgdHlwZTogU2NlbmVUeXBlLk1haW4sIHVybDogc3RyaW5nKTtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGVuZ2luZTogV29uZGVybGFuZEVuZ2luZSxcbiAgICAgICAgdHlwZTogU2NlbmVUeXBlLkRlcGVuZGVuY3ksXG4gICAgICAgIHVybDogc3RyaW5nLFxuICAgICAgICBkZXBlbmRlbnRTY2VuZUluZGV4OiBudW1iZXJcbiAgICApO1xuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIGVuZ2luZSBFbmdpbmUgaW5zdGFuY2VcbiAgICAgKiBAcGFyYW0gdHlwZSBUeXBlIG9mIHNjZW5lIHRvIGxvYWRcbiAgICAgKiBAcGFyYW0gdXJsIFVSTCBmb3IgdGhlIHNjZW5lIGNyZWF0aW9uLiBDYW4gYmUgZW1wdHkuXG4gICAgICogQHBhcmFtIGNsb3NlUGFyYW1ldGVycyBQYXJhbWV0ZXJzIGZvciB0aGUgZmluYWwgZnVuY3Rpb24gdG8gYmUgY2FsbGVkXG4gICAgICogICAgIGR1cmluZyBhIHN1Y2Nlc3NmdWwge0BsaW5rIENodW5rZWRTY2VuZUxvYWRTaW5rLmNsb3NlfS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgZW5naW5lOiBXb25kZXJsYW5kRW5naW5lLFxuICAgICAgICB0eXBlOiBTY2VuZVR5cGUsXG4gICAgICAgIHVybDogc3RyaW5nLFxuICAgICAgICAuLi5jbG9zZVBhcmFtZXRlcnM6IGFueVtdXG4gICAgKSB7XG4gICAgICAgIHRoaXMuI3dhc20gPSBlbmdpbmUud2FzbTtcbiAgICAgICAgdGhpcy4jdHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMuI2Nsb3NlUGFyYW1ldGVycyA9IGNsb3NlUGFyYW1ldGVycztcbiAgICAgICAgdGhpcy5fbG9hZEluZGV4ID0gdGhpcy4jd2FzbS5fd2xfc2NlbmVfY3JlYXRlX2NodW5rZWRfc3RhcnQoXG4gICAgICAgICAgICB0aGlzLiN3YXNtLnRlbXBVVEY4KHVybClcbiAgICAgICAgKTtcbiAgICAgICAgLyogSW5pdGlhbCBidWZmZXIgZm9yIHRoZSBoZWFkZXIgY2h1bmsgKi9cbiAgICAgICAgdGhpcy4jcmVxdWVzdGVkID0gdGhpcy4jd2FzbS5fd2xfc2NlbmVfY3JlYXRlX2NodW5rZWRfYnVmZmVyX3NpemUodGhpcy5fbG9hZEluZGV4KTtcbiAgICAgICAgdGhpcy5fcmVzaXplQnVmZmVyKHRoaXMuI3JlcXVlc3RlZCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfcmVzaXplQnVmZmVyKHNpemU6IG51bWJlcikge1xuICAgICAgICBpZiAodGhpcy4jYnVmZmVyU2l6ZSA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuI3dhc20uX2ZyZWUodGhpcy4jcHRyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNidWZmZXJTaXplID0gc2l6ZTtcbiAgICAgICAgdGhpcy4jcHRyID0gc2l6ZSA/IHRoaXMuI3dhc20uX21hbGxvYyhzaXplKSA6IDA7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfdGhyb3dFcnJvcihyZWFzb246IHN0cmluZykge1xuICAgICAgICB0aGlzLmFib3J0KCk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZWFzb24pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdyaXRlIGEgc2luZ2xlIGJsb2Igb2YgZGF0YS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBibG9iIERhdGEgdG8gcGFyc2VcbiAgICAgKi9cbiAgICB3cml0ZShibG9iOiBVaW50OEFycmF5KSB7XG4gICAgICAgIGxldCByZWFkID0gMDtcbiAgICAgICAgd2hpbGUgKHJlYWQgPCBibG9iLmxlbmd0aCkge1xuICAgICAgICAgICAgLyogRmlsbCB0aGUgc3RhZ2luZyBidWZmZXIgKi9cbiAgICAgICAgICAgIGNvbnN0IHRvUmVhZCA9IE1hdGgubWluKGJsb2IubGVuZ3RoIC0gcmVhZCwgdGhpcy4jYnVmZmVyU2l6ZSAtIHRoaXMuI29mZnNldCk7XG4gICAgICAgICAgICAvKiAqKkRvIG5vdCoqIGF0dGVtcHQgdG8gY3JlYXRlIGEgSEVBUDggdmlldyBoZXJlLCBzaW5jZSB0aGUgbmV4dCB3YXNtIGNhbGwgbWlnaHRcbiAgICAgICAgICAgICAqIHJlLWFsbG9jYXRlIHRoZSBoZWFwLCBtYWtpbmcgdGhpcyB2aWV3IGRhbmdsaW5nLiAqL1xuICAgICAgICAgICAgdGhpcy4jd2FzbS5IRUFQVTguc2V0KFxuICAgICAgICAgICAgICAgIGJsb2Iuc3ViYXJyYXkocmVhZCwgcmVhZCArIHRvUmVhZCksXG4gICAgICAgICAgICAgICAgdGhpcy4jcHRyICsgdGhpcy4jb2Zmc2V0XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhpcy4jb2Zmc2V0ICs9IHRvUmVhZDtcbiAgICAgICAgICAgIHJlYWQgKz0gdG9SZWFkO1xuXG4gICAgICAgICAgICAvKiBOb3QgZW5vdWdoIGRhdGEsIHdhaXQgZm9yIG1vcmUgKi9cbiAgICAgICAgICAgIGlmICh0aGlzLiNyZXF1ZXN0ZWQgPiB0aGlzLiNvZmZzZXQpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAvKiBTZW5kIGRhdGEuIFRoaXMgbG9hZHMgYXMgbWFueSBjaHVua3MgYXMgcG9zc2libGUgYW5kIHRoZW4gdGVsbHNcbiAgICAgICAgICAgICAqIHVzIGhvdyBtdWNoIGRhdGEgaXQncyBtaXNzaW5nLCBhbmQgaG93IG11Y2ggaXQgaGFzIHJlYWQuIFRoZVxuICAgICAgICAgICAgICogcmVhZCBjb3VudCBhbGxvd3MgdXMgdG8gbW92ZSBpbmNvbXBsZXRlIGNodW5rIGRhdGEgdG8gdGhlIHN0YXJ0XG4gICAgICAgICAgICAgKiBvZiB0aGUgYnVmZmVyLiBUaGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHRoZSBidWZmZXIgaXMgYWxsb2NhdGVkXG4gICAgICAgICAgICAgKiB3aXRoIGp1c3QgZW5vdWdoIGRhdGEgdG8gaG9sZCB0aGUgbGFyZ2VzdCBjaHVuay4gKi9cbiAgICAgICAgICAgIGNvbnN0IHJlYWRTaXplUHRyID0gdGhpcy4jd2FzbS5fdGVtcE1lbTtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RlZFB0ciA9IHRoaXMuI3dhc20uX3RlbXBNZW0gKyA0O1xuICAgICAgICAgICAgbGV0IHN1Y2Nlc3M6IGJvb2xlYW47XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSB0aGlzLiN3YXNtLl93bF9zY2VuZV9jcmVhdGVfY2h1bmtlZF9uZXh0KFxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb2FkSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI3B0cixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jb2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICByZWFkU2l6ZVB0cixcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdGVkUHRyXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgICAgIC8qIENhdGNoIGNhbGxzIHRvIGFib3J0KCksIGUuZy4gdmlhIGFzc2VydHMgKi9cbiAgICAgICAgICAgICAgICBzdWNjZXNzID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3Rocm93RXJyb3IoJ0NodW5rIHBhcnNpbmcgZmFpbGVkJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHNlbnRTaXplID0gdGhpcy4jb2Zmc2V0O1xuICAgICAgICAgICAgY29uc3QgcmVhZFNpemUgPSB0aGlzLiN3YXNtLl90ZW1wTWVtVWludDMyWzBdO1xuICAgICAgICAgICAgdGhpcy4jcmVxdWVzdGVkID0gdGhpcy4jd2FzbS5fdGVtcE1lbVVpbnQzMlsxXTtcbiAgICAgICAgICAgIGNvbnN0IGV4dHJhU2l6ZSA9IHNlbnRTaXplIC0gcmVhZFNpemU7XG5cbiAgICAgICAgICAgIC8qICNyZXF1ZXN0ZWQgPT0gMCBzaWduYWxzIGVuZCBvZiAuYmluIGZpbGUgKi9cbiAgICAgICAgICAgIGlmIChleHRyYVNpemUgPiB0aGlzLiNyZXF1ZXN0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90aHJvd0Vycm9yKCdVbmV4cGVjdGVkIGV4dHJhIGRhdGEnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogTm90IGVub3VnaCBkYXRhIGZvciBhIGNodW5rLCB3YWl0IGZvciBtb3JlICovXG4gICAgICAgICAgICBpZiAoIXJlYWRTaXplKSBjb250aW51ZTtcblxuICAgICAgICAgICAgaWYgKGV4dHJhU2l6ZSA+IDApIHtcbiAgICAgICAgICAgICAgICAvKiBXZSBwYXNzZWQgb25lIG9yIG1vcmUgY29tcGxldGUgY2h1bmtzIHBsdXMgaW5jb21wbGV0ZSBleHRyYVxuICAgICAgICAgICAgICAgICAqIGRhdGEgZm9yIHRoZSBuZXh0IGNodW5rLiBNb3ZlIGl0IHRvIHRoZSBidWZmZXIgc3RhcnQuICovXG4gICAgICAgICAgICAgICAgdGhpcy4jd2FzbS5IRUFQVTguY29weVdpdGhpbihcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jcHRyLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLiNwdHIgKyByZWFkU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jcHRyICsgc2VudFNpemVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLiNvZmZzZXQgPSBleHRyYVNpemU7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLiNmaXJzdENodW5rKSB7XG4gICAgICAgICAgICAgICAgLyogRmlyc3QgY2h1bmsgaXMgdGhlIGhlYWRlci4gQXQgdGhpcyBwb2ludCB3ZSBjYW4gcXVlcnkgZm9yXG4gICAgICAgICAgICAgICAgICogdGhlIHJlcXVpcmVkIGJ1ZmZlciBzaXplIGZvciBwYXJzaW5nIHRoZSByZXN0IG9mIHRoZSAuYmluLlxuICAgICAgICAgICAgICAgICAqIFRoZSBpbml0aWFsIGJ1ZmZlciBpcyBleGFjdGx5IHRoZSBzaXplIG9mIHRoZSBoZWFkZXIgY2h1bmtcbiAgICAgICAgICAgICAgICAgKiBzbyAjb2Zmc2V0IHNob3VsZCBiZSAwIGhlcmUgc2luY2Ugd2Ugc2VudCBhIGNvbXBsZXRlIGNodW5rLiAqL1xuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc2l6ZUJ1ZmZlcihcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jd2FzbS5fd2xfc2NlbmVfY3JlYXRlX2NodW5rZWRfYnVmZmVyX3NpemUodGhpcy5fbG9hZEluZGV4KVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdGhpcy4jZmlyc3RDaHVuayA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqIENhbGxlZCB3aGVuIGFsbCBibG9icyBvZiBkYXRhIGhhdmUgYmVlbiB3cml0dGVuICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLiNyZXF1ZXN0ZWQgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLl90aHJvd0Vycm9yKCdVbmV4cGVjdGVkIGVuZCBvZiBkYXRhJyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9yZXNpemVCdWZmZXIoMCk7XG4gICAgICAgIHN3aXRjaCAodGhpcy4jdHlwZSkge1xuICAgICAgICAgICAgY2FzZSBTY2VuZVR5cGUuUHJlZmFiOlxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmVJbmRleCA9IHRoaXMuI3dhc20uX3dsX3NjZW5lX2NyZWF0ZV9jaHVua2VkX2VuZF9wcmVmYWIoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRJbmRleFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFNjZW5lVHlwZS5NYWluOlxuICAgICAgICAgICAgICAgIHRoaXMuI3dhc20uX3dsX3NjZW5lX2NyZWF0ZV9jaHVua2VkX2VuZF9tYWluKHRoaXMuX2xvYWRJbmRleCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZUluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU2NlbmVUeXBlLkRlcGVuZGVuY3k6XG4gICAgICAgICAgICAgICAgW3RoaXMuc2NlbmVJbmRleF0gPSB0aGlzLiNjbG9zZVBhcmFtZXRlcnM7XG4gICAgICAgICAgICAgICAgdGhpcy4jd2FzbS5fd2xfc2NlbmVfY3JlYXRlX2NodW5rZWRfZW5kX3F1ZXVlZChcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbG9hZEluZGV4LFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjZW5lSW5kZXhcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aGlzLiN3YXNtLl93bF9zY2VuZV9jcmVhdGVfY2h1bmtlZF9hYm9ydCh0aGlzLl9sb2FkSW5kZXgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2xvYWRJbmRleCA9IC0xO1xuICAgIH1cblxuICAgIC8qKiBDYWxsZWQgd2hlbiB0aGUgc3RyZWFtIGlzIGFib3J0ZWQgKi9cbiAgICBhYm9ydCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2xvYWRJbmRleCA9PT0gLTEpIHJldHVybjtcbiAgICAgICAgdGhpcy4jd2FzbS5fd2xfc2NlbmVfY3JlYXRlX2NodW5rZWRfYWJvcnQodGhpcy5fbG9hZEluZGV4KTtcbiAgICAgICAgdGhpcy5fbG9hZEluZGV4ID0gLTE7XG4gICAgICAgIHRoaXMuX3Jlc2l6ZUJ1ZmZlcigwKTtcbiAgICB9XG5cbiAgICAvKiogU3RhZ2luZyBidWZmZXIgc2l6ZSAqL1xuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jYnVmZmVyU2l6ZTtcbiAgICB9XG59XG5cbi8qKlxuICogV29uZGVybGFuZCBFbmdpbmUgKC5iaW4pIHNjZW5lLlxuICpcbiAqIFdvbmRlcmxhbmQgRW5naW5lIHBhY2thZ2VzIHR3byB0eXBlcyBvZiBzY2VuZTpcbiAqIC0gQWN0aXZhdGFibGUgc2NlbmU6IENvbnRhaW5zIG9iamVjdHMsIGNvbXBvbmVudHMsIHZpZXdzLCByZXNvdXJjZXMsIGFuZCByZW5kZXJpbmcgZGF0YVxuICogLSBTdHJlYW1hYmxlIHNjZW5lOiBDb250YWlucyBvYmplY3RzLCBjb21wb25lbnRzLCBhbmQgcmVzb3VyY2VzXG4gKlxuICogIyMjIyBBY3RpdmF0aW9uXG4gKlxuICogU29tZSBzY2VuZXMgYXJlICoqYWN0aXZhdGFibGUqKiwgdGhleSBjYW4gdGh1cyBiZSBhdHRhY2hlZCB0byB0aGUgcmVuZGVyZXJcbiAqIHRvIGJlIHVwZGF0ZWQgYW5kIHJlbmRlcmVkIG9uIHRoZSBjYW52YXMuXG4gKlxuICogRm9yIG1vcmUgaW5mb3JtYXRpb24sIGhhdmUgYSBsb29rIGF0IHRoZSB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5zd2l0Y2hUb30gbWV0aG9kLlxuICpcbiAqICMjIyMgSW5zdGFudGlhdGlvblxuICpcbiAqIEJlc2lkZXMgYWN0aXZhdGlvbiwgYSBzY2VuZSBjYW4gaW5zdGFudGlhdGUgdGhlIGNvbnRlbnQgb2YgYW5vdGhlciBzY2VuZS5cbiAqXG4gKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgaGF2ZSBhIGxvb2sgYXQgdGhlIHtAbGluayBTY2VuZSNpbnN0YW50aWF0ZX0gbWV0aG9kLlxuICpcbiAqIEBjYXRlZ29yeSBzY2VuZVxuICovXG5leHBvcnQgY2xhc3MgU2NlbmUgZXh0ZW5kcyBQcmVmYWIge1xuICAgIC8qKiBDYWxsZWQgYmVmb3JlIHJlbmRlcmluZyB0aGUgc2NlbmUgKi9cbiAgICByZWFkb25seSBvblByZVJlbmRlciA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqIENhbGxlZCBhZnRlciB0aGUgc2NlbmUgaGFzIGJlZW4gcmVuZGVyZWQgKi9cbiAgICByZWFkb25seSBvblBvc3RSZW5kZXIgPSBuZXcgRW1pdHRlcigpO1xuXG4gICAgLyoqIFJheSBoaXQgcG9pbnRlciBpbiBXQVNNIGhlYXAuIEBoaWRkZW4gKi9cbiAgICBwcml2YXRlIF9yYXlIaXQ6IG51bWJlcjtcbiAgICAvKiogUmF5IGhpdC4gQGhpZGRlbiAqL1xuICAgIHByaXZhdGUgX2hpdDogUmF5SGl0O1xuXG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBwcml2YXRlIF9lbnZpcm9ubWVudDogRW52aXJvbm1lbnQ7XG5cbiAgICBjb25zdHJ1Y3RvcihlbmdpbmU6IFdvbmRlcmxhbmRFbmdpbmUsIGluZGV4OiBudW1iZXIpIHtcbiAgICAgICAgc3VwZXIoZW5naW5lLCBpbmRleCk7XG4gICAgICAgIC8qKiBgdGhpcy5lbmdpbmU/YCBpcyB1c2VkIGZvciB0ZXN0aW5nLiAqL1xuICAgICAgICB0aGlzLl9yYXlIaXQgPSB0aGlzLmVuZ2luZT8ud2FzbS5fbWFsbG9jKDQgKiAoMyAqIDQgKyAzICogNCArIDQgKyAyKSArIDQpO1xuICAgICAgICB0aGlzLl9oaXQgPSBuZXcgUmF5SGl0KHRoaXMsIHRoaXMuX3JheUhpdCk7XG4gICAgICAgIHRoaXMuX2Vudmlyb25tZW50ID0gbmV3IEVudmlyb25tZW50KHRoaXMpO1xuICAgIH1cblxuICAgIC8qKiBAb3ZlcmxvYWQgKi9cbiAgICBpbnN0YW50aWF0ZShzY2VuZTogUHJlZmFiR0xURik6IEluc3RhbnRpYXRlR2x0ZlJlc3VsdDtcbiAgICAvKiogQG92ZXJsb2FkICovXG4gICAgaW5zdGFudGlhdGUoc2NlbmU6IFByZWZhYik6IEluc3RhbnRpYXRlUmVzdWx0O1xuICAgIC8qKlxuICAgICAqIEluc3RhbnRpYXRlIGBzY2VuZWAgaW50byB0aGlzIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQW55IHNjZW5lIGNhbiBiZSBpbnN0YW50aWF0ZWQgaW50byBvbmUgYW5vdGhlci4gSXQncyB0aHVzIHBvc3NpYmxlXG4gICAgICogdG8gaW5zdGFudGlhdGUgYSB7QGxpbmsgUHJlZmFiR0xURn0gaW50byB0aGlzIGluc3RhbmNlLCBvciBhbm90aGVyXG4gICAgICoge0BsaW5rIFNjZW5lfSBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqICMjIyMgVXNhZ2VcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgcHJlZmFiU2NlbmUgPSBhd2FpdCBlbmdpbmUubG9hZFNjZW5lKCdQcmVmYWIuYmluJyk7XG4gICAgICogLy8gSW5zdGFudGlhdGUgYHByZWZhYlNjZW5lYCBpbnRvIGBzY2VuZWBcbiAgICAgKiBlbmdpbmUuc2NlbmUuaW5zdGFudGlhdGUocHJlZmFiU2NlbmUpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogIyMjIyBTaGFyZWQgUmVzb3VyY2VzXG4gICAgICpcbiAgICAgKiBJbnN0YW50aWF0aW5nICoqZG9lcyBub3QqKiBkdXBsaWNhdGUgcmVzb3VyY2VzLiBFYWNoIGluc3RhbmNlIHdpbGxcbiAgICAgKiByZWZlcmVuY2UgdGhlIHNhbWUgYXNzZXRzIHN0b3JlZCBpbiB0aGUge0BsaW5rIFNjZW5lfSwgZS5nLixcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogLy8gYHpvbWJpZWAgaGFzIG9uZSBtZXNoIGFuZCBvbmUgbWF0ZXJpYWxcbiAgICAgKiBjb25zdCB6b21iaWUgPSBhd2FpdCBlbmdpbmUubG9hZFNjZW5lKCdab21iaWUuYmluJyk7XG4gICAgICpcbiAgICAgKiBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDsgKytpKSB7XG4gICAgICogICAgIGVuZ2luZS5zY2VuZS5pbnN0YW50aWF0ZSh6b21iaWUpO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIGNvbnNvbGUubG9nKGVuZ2luZS5tZXNoZXMuY291bnQpIC8vIFByaW50cyAnMSdcbiAgICAgKiBjb25zb2xlLmxvZyhlbmdpbmUubWF0ZXJpYWxzLmNvdW50KSAvLyBQcmludHMgJzEnXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2NlbmUgVGhlIHNjZW5lIHRvIGluc3RhbnRpYXRlLlxuICAgICAqIEByZXR1cm5zIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBpbnN0YW50aWF0ZWQgcm9vdCB7QGxpbmsgT2JqZWN0M0R9LlxuICAgICAqICAgICBXaGVuIGEgZ2xURiBpcyBpbnN0YW50aWF0ZWQsIHRoZSByZXN1bHQgY2FuIGNvbnRhaW4gZXh0cmEgbWV0YWRhdGEuXG4gICAgICogICAgIEZvciBtb3JlIGluZm9ybWF0aW9uLCBoYXZlIGEgbG9vayBhdCB0aGUge0BsaW5rIEluc3RhbnRpYXRlUmVzdWx0fSB0eXBlLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMi4wXG4gICAgICovXG4gICAgaW5zdGFudGlhdGUocHJlZmFiOiBQcmVmYWIpOiBJbnN0YW50aWF0ZVJlc3VsdDtcbiAgICBpbnN0YW50aWF0ZShwcmVmYWI6IFByZWZhYik6IEluc3RhbnRpYXRlUmVzdWx0IHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IGlkID0gd2FzbS5fd2xfc2NlbmVfaW5zdGFudGlhdGUocHJlZmFiLl9pbmRleCwgdGhpcy5faW5kZXgpO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdDogSW5zdGFudGlhdGVSZXN1bHQgPSB7cm9vdDogdGhpcy53cmFwKGlkKX07XG4gICAgICAgIGlmIChwcmVmYWIgaW5zdGFuY2VvZiBQcmVmYWJHTFRGKSB7XG4gICAgICAgICAgICBjb25zdCBvYmogPSB0aGlzLndyYXAoaWQpO1xuICAgICAgICAgICAgcHJlZmFiLl9wcm9jZXNzSW5zdGFudGlhdG9uKHRoaXMsIG9iaiwgcmVzdWx0IGFzIEluc3RhbnRpYXRlR2x0ZlJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKiogQHRvZG86IEFkZCBgaW5zdGFudGlhdGVCYXRjaGAgdG8gaW5zdGFudGlhdGUgbXVsdGlwbGUgY2h1bmtzIGluIGEgcm93LiAqL1xuXG4gICAgLyoqXG4gICAgICogQHRvZG8gUHJvdmlkZSBhbiBBUEkgdG8gZGVsZXRlIGFsbCByZXNvdXJjZXMgbGlua2VkIHRvIGEgc2NlbmUuXG4gICAgICpcbiAgICAgKiBFeGFtcGxlOlxuICAgICAqXG4gICAgICogYGBgdHNcbiAgICAgKiBjb25zdCBzY2VuZSA9IGF3YWl0IGVuZ2luZS5sb2FkU2NlbmUoJ1NjZW5lLmJpbicpO1xuICAgICAqIC4uLlxuICAgICAqIHNjZW5lLmRlc3Ryb3koe3JlbW92ZVJlc291cmNlczogdHJ1ZX0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogRGVzdHJveSB0aGlzIHNjZW5lIGFuZCByZW1vdmUgaXQgZnJvbSB0aGUgZW5naW5lLlxuICAgICAqXG4gICAgICogQG5vdGUgRGVzdHJveWluZyBhIHNjZW5lICoqZG9lc24ndCoqIHJlbW92ZSB0aGUgbWF0ZXJpYWxzLCBtZXNoZXMsXG4gICAgICogYW5kIHRleHR1cmVzIGl0IHJlZmVyZW5jZXMgaW4gdGhlIGVuZ2luZS4gVGhvc2Ugc2hvdWxkIGJlIGNsZWFuZWQgdXAgZWl0aGVyIGJ5IGxvYWRpbmdcbiAgICAgKiBhbm90aGVyIG1haW4gc2NlbmUgdmlhIHtAbGluayBXb25kZXJsYW5kRW5naW5lLmxvYWRNYWluU2NlbmV9LCBvciBtYW51YWxseSB1c2luZyB7QGxpbmsgTWVzaC5kZXN0cm95fS5cbiAgICAgKlxuICAgICAqIEB0aHJvd3MgSWYgdGhlIHNjZW5lIGlzIGN1cnJlbnRseSBhY3RpdmUuXG4gICAgICogKi9cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBpZiAodGhpcy5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgIGBBdHRlbXB0IHRvIGRlc3Ryb3kgJHt0aGlzfSwgYnV0IGRlc3Ryb3lpbmcgdGhlIGFjdGl2ZSBzY2VuZSBpcyBub3Qgc3VwcG9ydGVkYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIFN0b3JlIGJlZm9yZSBjYWxsaW5nIGBzdXBlci5kZXN0cm95KClgIHNpbmNlIHRoZSBjYWxsXG4gICAgICAgICAqIG1pZ2h0IGRlc3Ryb3kgZW50aXJlbHkgdGhlIHByb3RvdHlwZS4gKi9cbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMuZW5naW5lLndhc207XG4gICAgICAgIGNvbnN0IHJheVB0ciA9IHRoaXMuX3JheUhpdDtcblxuICAgICAgICBzdXBlci5kZXN0cm95KCk7XG5cbiAgICAgICAgd2FzbS5fZnJlZShyYXlQdHIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEN1cnJlbnRseSBhY3RpdmUgdmlldyBjb21wb25lbnRzLlxuICAgICAqL1xuICAgIGdldCBhY3RpdmVWaWV3cygpOiBWaWV3Q29tcG9uZW50W10ge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy5lbmdpbmUud2FzbTtcbiAgICAgICAgY29uc3QgY291bnQgPSB3YXNtLl93bF9zY2VuZV9nZXRfYWN0aXZlX3ZpZXdzKHRoaXMuX2luZGV4LCB3YXNtLl90ZW1wTWVtLCAxNik7XG4gICAgICAgIGNvbnN0IHZpZXdzOiBWaWV3Q29tcG9uZW50W10gPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IHdhc20uX3RlbXBNZW1JbnRbaV07XG4gICAgICAgICAgICB2aWV3cy5wdXNoKHRoaXMuX2NvbXBvbmVudHMud3JhcFZpZXcoaWQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2aWV3cztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYXN0IGEgcmF5IHRocm91Z2ggdGhlIHNjZW5lIGFuZCBmaW5kIGludGVyc2VjdGluZyBjb2xsaXNpb24gY29tcG9uZW50cy5cbiAgICAgKlxuICAgICAqIFRoZSByZXN1bHRpbmcgcmF5IGhpdCB3aWxsIGNvbnRhaW4gKip1cCB0byA0KiogY2xvc2VzdCByYXkgaGl0cyxcbiAgICAgKiBzb3J0ZWQgYnkgaW5jcmVhc2luZyBkaXN0YW5jZS5cbiAgICAgKlxuICAgICAqIEV4YW1wbGU6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IGhpdCA9IGVuZ2luZS5zY2VuZS5yYXlDYXN0KFxuICAgICAqICAgICBbMCwgMCwgMF0sXG4gICAgICogICAgIFswLCAwLCAxXSxcbiAgICAgKiAgICAgMSA8PCAwIHwgMSA8PCA0LCAvLyBPbmx5IGNoZWNrIGFnYWluc3QgY29tcG9uZW50cyBpbiBncm91cHMgMCBhbmQgNFxuICAgICAqICAgICAyNVxuICAgICAqICk7XG4gICAgICogaWYgKGhpdC5oaXRDb3VudCA+IDApIHtcbiAgICAgKiAgICAgY29uc3QgbG9jYXRpb25zID0gaGl0LmdldExvY2F0aW9ucygpO1xuICAgICAqICAgICBjb25zb2xlLmxvZyhgT2JqZWN0IGhpdCBhdDogJHtsb2NhdGlvbnNbMF1bMF19LCAke2xvY2F0aW9uc1swXVsxXX0sICR7bG9jYXRpb25zWzBdWzJdfWApO1xuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBvIFJheSBvcmlnaW4uXG4gICAgICogQHBhcmFtIGQgUmF5IGRpcmVjdGlvbi5cbiAgICAgKiBAcGFyYW0gZ3JvdXBNYXNrIEJpdG1hc2sgb2YgY29sbGlzaW9uIGdyb3VwcyB0byBmaWx0ZXIgYnk6IG9ubHkgb2JqZWN0c1xuICAgICAqICAgICAgICB0aGF0IGFyZSBwYXJ0IG9mIGdpdmVuIGdyb3VwcyBhcmUgY29uc2lkZXJlZCBmb3IgdGhlIHJheWNhc3QuXG4gICAgICogQHBhcmFtIG1heERpc3RhbmNlIE1heGltdW0gKippbmNsdXNpdmUqKiBoaXQgZGlzdGFuY2UuIERlZmF1bHRzIHRvIGAxMDBgLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIHtAbGluayBSYXlIaXR9IGluc3RhbmNlLCBjYWNoZWQgYnkgdGhpcyBjbGFzcy5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoZSByZXR1cm5lZCB7QGxpbmsgUmF5SGl0fSBvYmplY3QgaXMgb3duZWQgYnkgdGhlIHtAbGluayBTY2VuZX1cbiAgICAgKiAgICAgICBpbnN0YW5jZSBhbmQgd2lsbCBiZSByZXVzZWQgd2l0aCB0aGUgbmV4dCB7QGxpbmsgU2NlbmUjcmF5Q2FzdH0gY2FsbC5cbiAgICAgKi9cbiAgICByYXlDYXN0KFxuICAgICAgICBvOiBSZWFkb25seTxOdW1iZXJBcnJheT4sXG4gICAgICAgIGQ6IFJlYWRvbmx5PE51bWJlckFycmF5PixcbiAgICAgICAgZ3JvdXBNYXNrOiBudW1iZXIsXG4gICAgICAgIG1heERpc3RhbmNlID0gMTAwLjBcbiAgICApOiBSYXlIaXQge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9zY2VuZV9yYXlfY2FzdChcbiAgICAgICAgICAgIHRoaXMuX2luZGV4LFxuICAgICAgICAgICAgb1swXSxcbiAgICAgICAgICAgIG9bMV0sXG4gICAgICAgICAgICBvWzJdLFxuICAgICAgICAgICAgZFswXSxcbiAgICAgICAgICAgIGRbMV0sXG4gICAgICAgICAgICBkWzJdLFxuICAgICAgICAgICAgZ3JvdXBNYXNrLFxuICAgICAgICAgICAgdGhpcy5fcmF5SGl0LFxuICAgICAgICAgICAgbWF4RGlzdGFuY2VcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hpdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGJhY2tncm91bmQgY2xlYXIgY29sb3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29sb3IgbmV3IGNsZWFyIGNvbG9yIChSR0JBKS5cbiAgICAgKiBAc2luY2UgMC44LjVcbiAgICAgKi9cbiAgICBzZXQgY2xlYXJDb2xvcihjb2xvcjogbnVtYmVyW10pIHtcbiAgICAgICAgdGhpcy5lbmdpbmUud2FzbS5fd2xfc2NlbmVfc2V0X2NsZWFyQ29sb3IoY29sb3JbMF0sIGNvbG9yWzFdLCBjb2xvclsyXSwgY29sb3JbM10pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRvIGNsZWFyIHRoZSBjb2xvciBmcmFtZWJ1ZmZlciBiZWZvcmUgZHJhd2luZy5cbiAgICAgKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZnVsIGlmIGFuIGV4dGVybmFsIGZyYW1ld29yayAoZS5nLiBhbiBBUiB0cmFja2luZ1xuICAgICAqIGZyYW1ld29yaykgaXMgcmVzcG9uc2libGUgZm9yIGRyYXdpbmcgYSBjYW1lcmEgZnJhbWUgYmVmb3JlIFdvbmRlcmxhbmRcbiAgICAgKiBFbmdpbmUgZHJhd3MgdGhlIHNjZW5lIG9uIHRvcCBvZiBpdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiIFdoZXRoZXIgdG8gZW5hYmxlIGNvbG9yIGNsZWFyLlxuICAgICAqIEBzaW5jZSAwLjkuNFxuICAgICAqL1xuICAgIHNldCBjb2xvckNsZWFyRW5hYmxlZChiOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLndhc20uX3dsX3NjZW5lX2VuYWJsZUNvbG9yQ2xlYXIoYik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZCBhIHNjZW5lIGZpbGUgKC5iaW4pLlxuICAgICAqXG4gICAgICogV2lsbCByZXBsYWNlIHRoZSBjdXJyZW50bHkgYWN0aXZlIHNjZW5lIHdpdGggdGhlIG9uZSBsb2FkZWRcbiAgICAgKiBmcm9tIGdpdmVuIGZpbGUuIEl0IGlzIGFzc3VtZWQgdGhhdCBKYXZhU2NyaXB0IGNvbXBvbmVudHMgcmVxdWlyZWQgYnlcbiAgICAgKiB0aGUgbmV3IHNjZW5lIHdlcmUgcmVnaXN0ZXJlZCBpbiBhZHZhbmNlLlxuICAgICAqXG4gICAgICogT25jZSB0aGUgc2NlbmUgaXMgbG9hZGVkIHN1Y2Nlc3NmdWxseSBhbmQgaW5pdGlhbGl6ZWQsXG4gICAgICoge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUub25TY2VuZUxvYWRlZH0gaXMgbm90aWZpZWQuXG4gICAgICpcbiAgICAgKiAjIyMjIEFycmF5QnVmZmVyXG4gICAgICpcbiAgICAgKiBUaGUgYGxvYWQoKWAgbWV0aG9kIGFjY2VwdHMgYW4gaW4tbWVtb3J5IGJ1ZmZlcjpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogc2NlbmUubG9hZCh7XG4gICAgICogICAgIGJ1ZmZlcjogbmV3IEFycmF5QnVmZmVyKC4uLiksXG4gICAgICogICAgIGJhc2VVUkw6ICdodHRwczovL215LXdlYnNpdGUvYXNzZXRzJ1xuICAgICAqIH0pXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGUgYGJhc2VVUkxgIGlzIG1hbmRhdG9yeS4gSXQncyB1c2VkIHRvIGZldGNoIGltYWdlcyBhbmQgbGFuZ3VhZ2VzLlxuICAgICAqXG4gICAgICogVXNlIHtAbGluayBTY2VuZS5zZXRMb2FkaW5nUHJvZ3Jlc3N9IHRvIHVwZGF0ZSB0aGUgbG9hZGluZyBwcm9ncmVzcyBiYXJcbiAgICAgKiB3aGVuIHVzaW5nIGFuIEFycmF5QnVmZmVyLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHRoZSBuZXcge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUubG9hZE1haW5TY2VuZX0gQVBJLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgUGF0aCB0byB0aGUgZmlsZSB0byBsb2FkLCBvciBhbiBvcHRpb24gb2JqZWN0LlxuICAgICAqICAgICBGb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgb3B0aW9ucywgc2VlIHRoZSB7QGxpbmsgU2NlbmVMb2FkT3B0aW9uc30gZG9jdW1lbnRhdGlvbi5cbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgc2NlbmUgd2FzIGxvYWRlZC5cbiAgICAgKi9cbiAgICBhc3luYyBsb2FkKG9wdGlvbnM6IHN0cmluZyB8IFNjZW5lTG9hZE9wdGlvbnMpOiBQcm9taXNlPFNjZW5lPiB7XG4gICAgICAgIGNvbnN0IGVuZ2luZSA9IHRoaXMuZW5naW5lO1xuXG4gICAgICAgIC8qKiBAdG9kbygyLjAuMCk6IFJlbW92ZSB0aGlzIG1ldGhvZC4gKi9cbiAgICAgICAgbGV0IGRpc3BhdGNoUmVhZHlFdmVudCA9IGZhbHNlO1xuICAgICAgICBsZXQgb3B0czogSW5NZW1vcnlMb2FkT3B0aW9ucztcbiAgICAgICAgaWYgKGlzU3RyaW5nKG9wdGlvbnMpKSB7XG4gICAgICAgICAgICBvcHRzID0gYXdhaXQgU2NlbmUubG9hZEJ1ZmZlcihvcHRpb25zLCAoYnl0ZXM6IG51bWJlciwgc2l6ZTogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmdpbmUubG9nLmluZm8oTG9nVGFnLlNjZW5lLCBgU2NlbmUgZG93bmxvYWRpbmc6ICR7Ynl0ZXN9IC8gJHtzaXplfWApO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5naW5lLnNldExvYWRpbmdQcm9ncmVzcyhieXRlcyAvIHNpemUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvcHRzID0gb3B0aW9ucztcbiAgICAgICAgICAgIGRpc3BhdGNoUmVhZHlFdmVudCA9IG9wdGlvbnMuZGlzcGF0Y2hSZWFkeUV2ZW50ID8/IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2NlbmUgPSBhd2FpdCBlbmdpbmUubG9hZE1haW5TY2VuZUZyb21CdWZmZXIoe1xuICAgICAgICAgICAgLi4ub3B0cyxcbiAgICAgICAgICAgIGRpc3BhdGNoUmVhZHlFdmVudCxcbiAgICAgICAgfSk7XG4gICAgICAgIC8qIERvIG5vdCB1c2UgYHRoaXNgLCBzaW5jZSBgbG9hZE1haW5TY2VuZWAgd2lsbCBkZXN0cm95IGl0LlxuICAgICAgICAgKiBgZXJhc2VQcm90b3R5cGVPbkRlc3Ryb3lgIHdvdWxkIG1ha2UgdGhpcyBpbnN0YW5jZSB1bnVzYWJsZS4gKi9cbiAgICAgICAgZW5naW5lLm9uU2NlbmVMb2FkZWQubm90aWZ5KCk7XG4gICAgICAgIHJldHVybiBzY2VuZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBcHBlbmQgYSBzY2VuZSBmaWxlLlxuICAgICAqXG4gICAgICogTG9hZHMgYW5kIHBhcnNlcyB0aGUgZmlsZSBhbmQgaXRzIGltYWdlcyBhbmQgYXBwZW5kcyB0aGUgcmVzdWx0XG4gICAgICogdG8gdGhlIGN1cnJlbnRseSBhY3RpdmUgc2NlbmUuXG4gICAgICpcbiAgICAgKiBTdXBwb3J0ZWQgZm9ybWF0cyBhcmUgc3RyZWFtYWJsZSBXb25kZXJsYW5kIHNjZW5lIGZpbGVzICguYmluKSBhbmQgZ2xURlxuICAgICAqIDNEIHNjZW5lcyAoLmdsdGYsIC5nbGIpLlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBXTC5zY2VuZS5hcHBlbmQoZmlsZW5hbWUpLnRoZW4ocm9vdCA9PiB7XG4gICAgICogICAgIC8vIHJvb3QgY29udGFpbnMgdGhlIGxvYWRlZCBzY2VuZVxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogSW4gY2FzZSB0aGUgYGxvYWRHbHRmRXh0ZW5zaW9uc2Agb3B0aW9uIGlzIHNldCB0byB0cnVlLCB0aGUgcmVzcG9uc2VcbiAgICAgKiB3aWxsIGJlIGFuIG9iamVjdCBjb250YWluaW5nIGJvdGggdGhlIHJvb3Qgb2YgdGhlIGxvYWRlZCBzY2VuZSBhbmRcbiAgICAgKiBhbnkgZ2xURiBleHRlbnNpb25zIGZvdW5kIG9uIG5vZGVzLCBtZXNoZXMgYW5kIHRoZSByb290IG9mIHRoZSBmaWxlLlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBXTC5zY2VuZS5hcHBlbmQoZmlsZW5hbWUsIHsgbG9hZEdsdGZFeHRlbnNpb25zOiB0cnVlIH0pLnRoZW4oKHtyb290LCBleHRlbnNpb25zfSkgPT4ge1xuICAgICAqICAgICAvLyByb290IGNvbnRhaW5zIHRoZSBsb2FkZWQgc2NlbmVcbiAgICAgKiAgICAgLy8gZXh0ZW5zaW9ucy5yb290IGNvbnRhaW5zIGFueSBleHRlbnNpb25zIGF0IHRoZSByb290IG9mIGdsVEYgZG9jdW1lbnRcbiAgICAgKiAgICAgY29uc3Qgcm9vdEV4dGVuc2lvbnMgPSBleHRlbnNpb25zLnJvb3Q7XG4gICAgICogICAgIC8vIGV4dGVuc2lvbnMubWVzaCBhbmQgZXh0ZW5zaW9ucy5ub2RlIGNvbnRhaW4gZXh0ZW5zaW9ucyBpbmRleGVkIGJ5IE9iamVjdCBpZFxuICAgICAqICAgICBjb25zdCBjaGlsZE9iamVjdCA9IHJvb3QuY2hpbGRyZW5bMF07XG4gICAgICogICAgIGNvbnN0IG1lc2hFeHRlbnNpb25zID0gcm9vdC5tZXNoRXh0ZW5zaW9uc1tjaGlsZE9iamVjdC5vYmplY3RJZF07XG4gICAgICogICAgIGNvbnN0IG5vZGVFeHRlbnNpb25zID0gcm9vdC5ub2RlRXh0ZW5zaW9uc1tjaGlsZE9iamVjdC5vYmplY3RJZF07XG4gICAgICogICAgIC8vIGV4dGVuc2lvbnMuaWRNYXBwaW5nIGNvbnRhaW5zIGEgbWFwcGluZyBmcm9tIGdsVEYgbm9kZSBpbmRleCB0byBPYmplY3QgaWRcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIElmIHRoZSBmaWxlIHRvIGJlIGxvYWRlZCBpcyBsb2NhdGVkIGluIGEgc3ViZm9sZGVyLCBpdCBtaWdodCBiZSB1c2VmdWxcbiAgICAgKiB0byBkZWZpbmUgdGhlIGBiYXNlVVJMYCBvcHRpb24uIFRoaXMgd2lsbCBlbnN1cmUgYW55IGJpbiBmaWxlc1xuICAgICAqIHJlZmVyZW5jZWQgYnkgdGhlIGxvYWRlZCBiaW4gZmlsZSBhcmUgbG9hZGVkIGF0IHRoZSBjb3JyZWN0IHBhdGguXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIFdMLnNjZW5lLmFwcGVuZChmaWxlbmFtZSwgeyBiYXNlVVJMOiAnc2NlbmVzJyB9KS50aGVuKCh7cm9vdCwgZXh0ZW5zaW9uc30pID0+IHtcbiAgICAgKiAgICAgLy8gZG8gc3R1ZmZcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSB0aGUgbmV3IHtAbGluayBQcmVmYWJ9IGFuZCB7QGxpbmsgU2NlbmV9IEFQSS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWxlIFRoZSAuYmluLCAuZ2x0ZiBvciAuZ2xiIGZpbGUgdG8gYXBwZW5kLiBTaG91bGQgYmUgYSBVUkwgb3JcbiAgICAgKiAgIGFuIGBBcnJheUJ1ZmZlcmAgd2l0aCB0aGUgZmlsZSBjb250ZW50LlxuICAgICAqIEBwYXJhbSBvcHRpb25zIEFkZGl0aW9uYWwgb3B0aW9ucyBmb3IgbG9hZGluZy5cbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgc2NlbmUgd2FzIGFwcGVuZGVkLlxuICAgICAqL1xuICAgIGFzeW5jIGFwcGVuZChcbiAgICAgICAgZmlsZTogc3RyaW5nIHwgQXJyYXlCdWZmZXIsXG4gICAgICAgIG9wdGlvbnM6IFBhcnRpYWw8U2NlbmVBcHBlbmRQYXJhbWV0ZXJzPiA9IHt9XG4gICAgKTogUHJvbWlzZTxTY2VuZUFwcGVuZFJlc3VsdD4ge1xuICAgICAgICAvKiogQHRvZG8oMi4wLjApOiBSZW1vdmUgdGhpcyBtZXRob2QuICovXG5cbiAgICAgICAgY29uc3Qge2Jhc2VVUkwgPSBpc1N0cmluZyhmaWxlKSA/IGdldEJhc2VVcmwoZmlsZSkgOiB0aGlzLmJhc2VVUkx9ID0gb3B0aW9ucztcblxuICAgICAgICBjb25zdCBidWZmZXIgPSBpc1N0cmluZyhmaWxlKSA/IGF3YWl0IGZldGNoV2l0aFByb2dyZXNzKGZpbGUpIDogZmlsZTtcbiAgICAgICAgY29uc3QgZGF0YSA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gICAgICAgIGNvbnN0IGlzQmluRmlsZSA9XG4gICAgICAgICAgICBkYXRhLmJ5dGVMZW5ndGggPiBNQUdJQ19CSU4ubGVuZ3RoICYmXG4gICAgICAgICAgICBkYXRhXG4gICAgICAgICAgICAgICAgLnN1YmFycmF5KDAsIE1BR0lDX0JJTi5sZW5ndGgpXG4gICAgICAgICAgICAgICAgLmV2ZXJ5KCh2YWx1ZSwgaSkgPT4gdmFsdWUgPT09IE1BR0lDX0JJTi5jaGFyQ29kZUF0KGkpKTtcblxuICAgICAgICBjb25zdCBzY2VuZSA9IGlzQmluRmlsZVxuICAgICAgICAgICAgPyB0aGlzLmVuZ2luZS5sb2FkUHJlZmFiRnJvbUJ1ZmZlcih7YnVmZmVyLCBiYXNlVVJMfSlcbiAgICAgICAgICAgIDogdGhpcy5lbmdpbmUubG9hZEdMVEZGcm9tQnVmZmVyKHtcbiAgICAgICAgICAgICAgICAgIGJ1ZmZlcixcbiAgICAgICAgICAgICAgICAgIGJhc2VVUkwsXG4gICAgICAgICAgICAgICAgICBleHRlbnNpb25zOiBvcHRpb25zLmxvYWRHbHRmRXh0ZW5zaW9ucyxcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5pbnN0YW50aWF0ZShzY2VuZSkhO1xuICAgICAgICBpZiAoc2NlbmUgaW5zdGFuY2VvZiBQcmVmYWJHTFRGKSB7XG4gICAgICAgICAgICBpZiAoIXNjZW5lLmV4dGVuc2lvbnMpIHJldHVybiByZXN1bHQucm9vdDtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcm9vdDogcmVzdWx0LnJvb3QsXG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uczoge1xuICAgICAgICAgICAgICAgICAgICAuLi4ocmVzdWx0IGFzIEluc3RhbnRpYXRlR2x0ZlJlc3VsdCkuZXh0ZW5zaW9ucyxcbiAgICAgICAgICAgICAgICAgICAgcm9vdDogc2NlbmUuZXh0ZW5zaW9ucy5yb290LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9IGFzIFNjZW5lQXBwZW5kUmVzdWx0V2l0aEV4dGVuc2lvbnM7XG4gICAgICAgIH1cblxuICAgICAgICBzY2VuZS5kZXN0cm95KCk7XG4gICAgICAgIHJldHVybiByZXN1bHQucm9vdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGxvYWRpbmcgc2NyZWVuIHByb2dyZXNzIGJhci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2YWx1ZSBDdXJyZW50IGxvYWRpbmcgcGVyY2VudGFnZSwgaW4gdGhlIHJhbmdlIFswOyAxXS5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5zZXRMb2FkaW5nUHJvZ3Jlc3N9LlxuICAgICAqL1xuICAgIHNldExvYWRpbmdQcm9ncmVzcyhwZXJjZW50YWdlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUuc2V0TG9hZGluZ1Byb2dyZXNzKHBlcmNlbnRhZ2UpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERpc3BhdGNoIGFuIGV2ZW50ICd3bGUtc2NlbmUtcmVhZHknIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgaXMgdXNlZCBmb3IgYXV0b21hdGljIHRlc3RpbmcuXG4gICAgICovXG4gICAgZGlzcGF0Y2hSZWFkeUV2ZW50KCkge1xuICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KFxuICAgICAgICAgICAgbmV3IEN1c3RvbUV2ZW50KCd3bGUtc2NlbmUtcmVhZHknLCB7XG4gICAgICAgICAgICAgICAgZGV0YWlsOiB7ZmlsZW5hbWU6IHRoaXMuZmlsZW5hbWV9LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGN1cnJlbnQgbWF0ZXJpYWwgdG8gcmVuZGVyIHRoZSBza3kuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGUgc2t5IG5lZWRzIHRvIGJlIGVuYWJsZWQgaW4gdGhlIGVkaXRvciB3aGVuIGNyZWF0aW5nIHRoZSBzY2VuZS5cbiAgICAgKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgcGxlYXNlIHJlZmVyIHRvIHRoZSBiYWNrZ3JvdW5kIFt0dXRvcmlhbF0oaHR0cHM6Ly93b25kZXJsYW5kZW5naW5lLmNvbS90dXRvcmlhbHMvYmFja2dyb3VuZC1lZmZlY3QvKS5cbiAgICAgKi9cbiAgICBzZXQgc2t5TWF0ZXJpYWwobWF0ZXJpYWw6IE1hdGVyaWFsIHwgbnVsbCkge1xuICAgICAgICB0aGlzLmVuZ2luZS53YXNtLl93bF9zY2VuZV9zZXRfc2t5X21hdGVyaWFsKHRoaXMuX2luZGV4LCBtYXRlcmlhbD8uX2lkID8/IDApO1xuICAgIH1cblxuICAgIC8qKiBDdXJyZW50IHNreSBtYXRlcmlhbCwgb3IgYG51bGxgIGlmIG5vIHNreSBpcyBzZXQuICovXG4gICAgZ2V0IHNreU1hdGVyaWFsKCk6IE1hdGVyaWFsIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5lbmdpbmUud2FzbS5fd2xfc2NlbmVfZ2V0X3NreV9tYXRlcmlhbCh0aGlzLl9pbmRleCk7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZ2luZS5tYXRlcmlhbHMud3JhcChpbmRleCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW52aXJvbm1lbnQgbGlnaHRpbmcgcHJvcGVydGllcy5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjIuM1xuICAgICAqL1xuICAgIGdldCBlbnZpcm9ubWVudCgpOiBFbnZpcm9ubWVudCB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbnZpcm9ubWVudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNldCB0aGUgc2NlbmUuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBkZWxldGVzIGFsbCB1c2VkIGFuZCBhbGxvY2F0ZWQgb2JqZWN0cywgYW5kIGNvbXBvbmVudHMuXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBMb2FkIGEgbmV3IHNjZW5lIGFuZCBhY3RpdmF0ZSBpdCBpbnN0ZWFkLlxuICAgICAqL1xuICAgIHJlc2V0KCkge1xuICAgICAgICAvKiogQHRvZG8oMi4wLjApOiBSZW1vdmUgdGhpcyBtZXRob2QuICovXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgYW5kIGFwcGx5IHF1ZXVlZCBkZXBlbmRlbmN5IGZpbGVzICguYmluKS5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBhc3luYyBfZG93bmxvYWREZXBlbmRlbmN5KHVybDogc3RyaW5nKSB7XG4gICAgICAgIGlmICh0aGlzLmVuZ2luZS5fY2FuVXNlQ2h1bmtMb2FkaW5nKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNpbmsgPSBuZXcgQ2h1bmtlZFNjZW5lTG9hZFNpbmsoXG4gICAgICAgICAgICAgICAgdGhpcy5lbmdpbmUsXG4gICAgICAgICAgICAgICAgU2NlbmVUeXBlLkRlcGVuZGVuY3ksXG4gICAgICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgICAgIHRoaXMuX2luZGV4XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgZmV0Y2hTdHJlYW1XaXRoUHJvZ3Jlc3ModXJsKTtcbiAgICAgICAgICAgIGF3YWl0IHN0cmVhbS5waXBlVG8obmV3IFdyaXRhYmxlU3RyZWFtKHNpbmspKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuICAgICAgICAgICAgY29uc3QgYnVmZmVyID0gYXdhaXQgZmV0Y2hXaXRoUHJvZ3Jlc3ModXJsKTtcbiAgICAgICAgICAgIGNvbnN0IHB0ciA9IHdhc20uY29weUJ1ZmZlclRvSGVhcChidWZmZXIpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB3YXNtLl93bF9zY2VuZV9sb2FkX3F1ZXVlZF9iaW4odGhpcy5faW5kZXgsIHB0ciwgYnVmZmVyLmJ5dGVMZW5ndGgpO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAvKiBDYXRjaCBjYWxscyB0byBhYm9ydCgpLCBlLmcuIHZpYSBhc3NlcnRzICovXG4gICAgICAgICAgICAgICAgd2FzbS5fZnJlZShwdHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgYW5kIGFwcGx5IHF1ZXVlZCBkZXBlbmRlbmN5IGZpbGVzICguYmluKS5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBhc3luYyBfZG93bmxvYWREZXBlbmRlbmNpZXMoKSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLmVuZ2luZS53YXNtO1xuXG4gICAgICAgIGNvbnN0IGNvdW50ID0gd2FzbS5fd2xfc2NlbmVfcXVldWVkX2Jpbl9jb3VudCh0aGlzLl9pbmRleCk7XG4gICAgICAgIGlmICghY291bnQpIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcblxuICAgICAgICBjb25zdCB1cmxzID0gbmV3IEFycmF5KGNvdW50KS5maWxsKDApLm1hcCgoXywgaTogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwdHIgPSB3YXNtLl93bF9zY2VuZV9xdWV1ZWRfYmluX3BhdGgodGhpcy5faW5kZXgsIGkpO1xuICAgICAgICAgICAgY29uc3QgdXJsID0gd2FzbS5VVEY4VG9TdHJpbmcocHRyKTtcbiAgICAgICAgICAgIHJldHVybiB1cmw7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHdhc20uX3dsX3NjZW5lX2NsZWFyX3F1ZXVlZF9iaW5fbGlzdCh0aGlzLl9pbmRleCk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHVybHMubWFwKCh1cmw6IHN0cmluZykgPT4gdGhpcy5fZG93bmxvYWREZXBlbmRlbmN5KHVybCkpKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHtcbiAgICBDb21wb25lbnQsXG4gICAgQ29tcG9uZW50Q29uc3RydWN0b3IsXG4gICAgUGh5c1hDb21wb25lbnQsXG4gICAgT2JqZWN0IGFzIE9iamVjdDNELFxuICAgIFBoeXNpY3MsXG4gICAgSTE4TixcbiAgICBYUixcbiAgICBNb3JwaFRhcmdldHMsXG4gICAgVGV4dHVyZSxcbiAgICBGb250LFxuICAgIERlc3Ryb3llZFByZWZhYkluc3RhbmNlLFxufSBmcm9tICcuL3dvbmRlcmxhbmQuanMnO1xuXG5pbXBvcnQge0VtaXR0ZXIsIFJldGFpbkVtaXR0ZXJ9IGZyb20gJy4vdXRpbHMvZXZlbnQuanMnO1xuaW1wb3J0IHtpc1N0cmluZ30gZnJvbSAnLi91dGlscy9vYmplY3QuanMnO1xuaW1wb3J0IHtWZXJzaW9ufSBmcm9tICcuL3ZlcnNpb24uanMnO1xuaW1wb3J0IHtXQVNNfSBmcm9tICcuL3dhc20uanMnO1xuaW1wb3J0IHtMb2dnZXJ9IGZyb20gJy4vdXRpbHMvbG9nZ2VyLmpzJztcbmltcG9ydCB7Y2xhbXB9IGZyb20gJy4vdXRpbHMvbWlzYy5qcyc7XG5pbXBvcnQge01hdGVyaWFsTWFuYWdlcn0gZnJvbSAnLi9yZXNvdXJjZXMvbWF0ZXJpYWwtbWFuYWdlci5qcyc7XG5pbXBvcnQge01lc2hNYW5hZ2VyfSBmcm9tICcuL3Jlc291cmNlcy9tZXNoLW1hbmFnZXIuanMnO1xuaW1wb3J0IHtSZXNvdXJjZU1hbmFnZXJ9IGZyb20gJy4vcmVzb3VyY2VzL3Jlc291cmNlLmpzJztcbmltcG9ydCB7VGV4dHVyZU1hbmFnZXJ9IGZyb20gJy4vcmVzb3VyY2VzL3RleHR1cmUtbWFuYWdlci5qcyc7XG5pbXBvcnQge0xvZ1RhZ30gZnJvbSAnLi9pbmRleC5qcyc7XG5pbXBvcnQge0NvbnN0cnVjdG9yLCBJbWFnZUxpa2UsIFByb2dyZXNzQ2FsbGJhY2t9IGZyb20gJy4vdHlwZXMuanMnO1xuaW1wb3J0IHtQcmVmYWIsIEluTWVtb3J5TG9hZE9wdGlvbnMsIExvYWRPcHRpb25zLCBTdHJlYW1Mb2FkT3B0aW9uc30gZnJvbSAnLi9wcmVmYWIuanMnO1xuaW1wb3J0IHtTY2VuZSwgQWN0aXZhdGVPcHRpb25zLCBDaHVua2VkU2NlbmVMb2FkU2luaywgU2NlbmVUeXBlfSBmcm9tICcuL3NjZW5lLmpzJztcbmltcG9ydCB7UHJlZmFiR0xURiwgR0xURk9wdGlvbnN9IGZyb20gJy4vc2NlbmUtZ2x0Zi5qcyc7XG5pbXBvcnQge0FycmF5QnVmZmVyU2luaywgQXJyYXlCdWZmZXJTb3VyY2UsIG9uSW1hZ2VSZWFkeX0gZnJvbSAnLi91dGlscy9mZXRjaC5qcyc7XG5cbmZ1bmN0aW9uIGNoZWNrWFJTdXBwb3J0KCkge1xuICAgIGlmICghbmF2aWdhdG9yLnhyKSB7XG4gICAgICAgIGNvbnN0IGlzTG9jYWxob3N0ID1cbiAgICAgICAgICAgIGxvY2F0aW9uLmhvc3RuYW1lID09PSAnbG9jYWxob3N0JyB8fCBsb2NhdGlvbi5ob3N0bmFtZSA9PT0gJzEyNy4wLjAuMSc7XG4gICAgICAgIGNvbnN0IG1pc3NpbmdIVFRQUyA9IGxvY2F0aW9uLnByb3RvY29sICE9PSAnaHR0cHM6JyAmJiAhaXNMb2NhbGhvc3Q7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcbiAgICAgICAgICAgIG1pc3NpbmdIVFRQU1xuICAgICAgICAgICAgICAgID8gJ1dlYlhSIGlzIG9ubHkgc3VwcG9ydGVkIHdpdGggSFRUUFMgb3Igb24gbG9jYWxob3N0ISdcbiAgICAgICAgICAgICAgICA6ICdXZWJYUiB1bnN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXIuJ1xuICAgICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG59XG5cbi8qKlxuICogTWFpbiBXb25kZXJsYW5kIEVuZ2luZSBpbnN0YW5jZS5cbiAqXG4gKiBDb250cm9scyB0aGUgY2FudmFzLCByZW5kZXJpbmcsIGFuZCBKUyA8LT4gV0FTTSBjb21tdW5pY2F0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgV29uZGVybGFuZEVuZ2luZSB7XG4gICAgLyoqXG4gICAgICoge0BsaW5rIEVtaXR0ZXJ9IGZvciBXZWJYUiBzZXNzaW9uIGVuZCBldmVudHMuXG4gICAgICpcbiAgICAgKiBVc2FnZSBmcm9tIHdpdGhpbiBhIGNvbXBvbmVudDpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogdGhpcy5lbmdpbmUub25YUlNlc3Npb25FbmQuYWRkKCgpID0+IGNvbnNvbGUubG9nKFwiWFIgc2Vzc2lvbiBlbmRlZC5cIikpO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHJlYWRvbmx5IG9uWFJTZXNzaW9uRW5kID0gbmV3IEVtaXR0ZXIoKTtcblxuICAgIC8qKlxuICAgICAqIHtAbGluayBSZXRhaW5FbWl0dGVyfSBmb3IgV2ViWFIgc2Vzc2lvbiBzdGFydCBldmVudHMuXG4gICAgICpcbiAgICAgKiBVc2FnZSBmcm9tIHdpdGhpbiBhIGNvbXBvbmVudDpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogdGhpcy5lbmdpbmUub25YUlNlc3Npb25TdGFydC5hZGQoKHNlc3Npb24sIG1vZGUpID0+IGNvbnNvbGUubG9nKHNlc3Npb24sIG1vZGUpKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIHRoaXMgZW1pdHRlciBpcyByZXRhaW5lZCBhbmQgd2lsbCBhdXRvbWF0aWNhbGx5IGNhbGwgYW55IGNhbGxiYWNrIGFkZGVkXG4gICAgICogd2hpbGUgYSBzZXNzaW9uIGlzIGFscmVhZHkgc3RhcnRlZDpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogLy8gWFIgc2Vzc2lvbiBpcyBhbHJlYWR5IGFjdGl2ZS5cbiAgICAgKiB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvblN0YXJ0LmFkZCgoc2Vzc2lvbiwgbW9kZSkgPT4ge1xuICAgICAqICAgICBjb25zb2xlLmxvZyhzZXNzaW9uLCBtb2RlKTsgLy8gVHJpZ2dlcmVkIGltbWVkaWF0ZWx5LlxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHJlYWRvbmx5IG9uWFJTZXNzaW9uU3RhcnQ6IEVtaXR0ZXI8W1hSU2Vzc2lvbiwgWFJTZXNzaW9uTW9kZV0+ID0gbmV3IFJldGFpbkVtaXR0ZXI8XG4gICAgICAgIFtYUlNlc3Npb24sIFhSU2Vzc2lvbk1vZGVdXG4gICAgPigpO1xuXG4gICAgLyoqXG4gICAgICoge0BsaW5rIEVtaXR0ZXJ9IGZvciBjYW52YXMgLyBtYWluIGZyYW1lYnVmZmVyIHJlc2l6ZSBldmVudHMuXG4gICAgICpcbiAgICAgKiBVc2FnZSBmcm9tIHdpdGhpbiBhIGNvbXBvbmVudDpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogdGhpcy5lbmdpbmUub25SZXNpemUuYWRkKCgpID0+IHtcbiAgICAgKiAgICAgY29uc3QgY2FudmFzID0gdGhpcy5lbmdpbmUuY2FudmFzO1xuICAgICAqICAgICBjb25zb2xlLmxvZyhgTmV3IFNpemU6ICR7Y2FudmFzLndpZHRofSwgJHtjYW52YXMuaGVpZ2h0fWApO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQG5vdGUgVGhlIHNpemUgb2YgdGhlIGNhbnZhcyBpcyBpbiBwaHlzaWNhbCBwaXhlbHMsIGFuZCBpcyBzZXQgdmlhIHtAbGluayBXb25kZXJsYW5kRW5naW5lLnJlc2l6ZX0uXG4gICAgICovXG4gICAgcmVhZG9ubHkgb25SZXNpemU6IEVtaXR0ZXIgPSBuZXcgRW1pdHRlcigpO1xuXG4gICAgLyoqIFdoZXRoZXIgQVIgaXMgc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyLiAqL1xuICAgIHJlYWRvbmx5IGFyU3VwcG9ydGVkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAvKiogV2hldGhlciBWUiBpcyBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIuICovXG4gICAgcmVhZG9ubHkgdnJTdXBwb3J0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIHtAbGluayBSZXRhaW5FbWl0dGVyfSBzaWduYWxsaW5nIHRoZSBlbmQgb2YgdGhlIGxvYWRpbmcgc2NyZWVuLlxuICAgICAqXG4gICAgICogTGlzdGVuZXJzIGdldCBub3RpZmllZCB3aGVuIHRoZSBmaXJzdCBjYWxsIHRvIHtAbGluayBTY2VuZSNsb2FkKCl9IGlzXG4gICAgICogaW52b2tlZC4gQXQgdGhpcyBwb2ludCB0aGUgbmV3IHNjZW5lIGhhcyBub3QgYmVjb21lIGFjdGl2ZSwgYW5kIG5vbmUgb2ZcbiAgICAgKiBpdHMgcmVzb3VyY2VzIG9yIGNvbXBvbmVudHMgYXJlIGluaXRpYWxpemVkLlxuICAgICAqXG4gICAgICogQ29tcGFyZWQgdG8ge0BsaW5rIG9uU2NlbmVMb2FkZWR9LCB0aGlzIGRvZXMgbm90IHdhaXQgZm9yIGFsbCBjb21wb25lbnRzXG4gICAgICogdG8gYmUgZnVsbHkgaW5pdGlhbGl6ZWQgYW5kIGFjdGl2YXRlZC4gQW55IGhhbmRsZXIgYWRkZWQgaW5zaWRlXG4gICAgICoge0BsaW5rIENvbXBvbmVudCNpbml0KCl9LCB7QGxpbmsgQ29tcG9uZW50I3N0YXJ0KCl9IG9yXG4gICAgICoge0BsaW5rIENvbXBvbmVudCNvbkFjdGl2YXRlKCl9IHdpbGwgYmUgY2FsbGVkIGltbWVkaWF0ZWx5LlxuICAgICAqXG4gICAgICogVXNhZ2U6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIHRoaXMuZW5naW5lLm9uTG9hZGluZ1NjcmVlbkVuZC5hZGQoKCkgPT4gY29uc29sZS5sb2coXCJXYWl0IGlzIG92ZXIhXCIpKTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICByZWFkb25seSBvbkxvYWRpbmdTY3JlZW5FbmQgPSBuZXcgUmV0YWluRW1pdHRlcigpO1xuXG4gICAgLyoqXG4gICAgICoge0BsaW5rIEVtaXR0ZXJ9IGZvciBzY2VuZSBsb2FkZWQgZXZlbnRzLlxuICAgICAqXG4gICAgICogTGlzdGVuZXJzIGdldCBub3RpZmllZCB3aGVuIGEgY2FsbCB0byB7QGxpbmsgU2NlbmUjbG9hZCgpfSBmaW5pc2hlcy4gQXRcbiAgICAgKiB0aGlzIHBvaW50IGFsbCByZXNvdXJjZXMgYXJlIGxvYWRlZCBhbmQgYWxsIGNvbXBvbmVudHMgaGFkIHRoZWlyXG4gICAgICoge0BsaW5rIENvbXBvbmVudCNpbml0KCl9IGFzIHdlbGwgYXMgKGlmIGFjdGl2ZSlcbiAgICAgKiB7QGxpbmsgQ29tcG9uZW50I3N0YXJ0KCl9IGFuZCB7QGxpbmsgQ29tcG9uZW50I29uQWN0aXZhdGUoKX0gbWV0aG9kc1xuICAgICAqIGNhbGxlZC5cbiAgICAgKlxuICAgICAqIFVzYWdlIGZyb20gd2l0aGluIGEgY29tcG9uZW50OlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiB0aGlzLmVuZ2luZS5vblNjZW5lTG9hZGVkLmFkZCgoKSA9PiBjb25zb2xlLmxvZyhcIlNjZW5lIHN3aXRjaGVkIVwiKSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIG9uU2NlbmVBY3RpdmF0ZWR9IGluc3RlYWQuXG4gICAgICovXG4gICAgcmVhZG9ubHkgb25TY2VuZUxvYWRlZCA9IG5ldyBFbWl0dGVyKCk7XG5cbiAgICAvKipcbiAgICAgKiB7QGxpbmsgRW1pdHRlcn0gZm9yIHNjZW5lIGFjdGl2YXRlZCBldmVudHMuXG4gICAgICpcbiAgICAgKiBUaGlzIGxpc3RlbmVyIGlzIG5vdGlmaWVkIHdpdGggdGhlIG9sZCBzY2VuZSBhcyBmaXJzdCBwYXJhbWV0ZXIsIGFuZFxuICAgICAqIHRoZSBuZXcgc2NlbmUgYXMgc2Vjb25kLlxuICAgICAqXG4gICAgICogVGhpcyBsaXN0ZW5lciBpcyBub3RpZmllZCBhZnRlciBhbGwgcmVzb3VyY2VzIGFyZSBsb2FkZWQgYW5kIGFsbCBjb21wb25lbnRzIGhhZCB0aGVpclxuICAgICAqIHtAbGluayBDb21wb25lbnQjaW5pdCgpfSBhcyB3ZWxsIGFzIChpZiBhY3RpdmUpXG4gICAgICoge0BsaW5rIENvbXBvbmVudCNzdGFydCgpfSBhbmQge0BsaW5rIENvbXBvbmVudCNvbkFjdGl2YXRlKCl9IG1ldGhvZHNcbiAgICAgKiBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBVc2FnZSBmcm9tIHdpdGhpbiBhIGNvbXBvbmVudDpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogdGhpcy5lbmdpbmUub25TY2VuZUFjdGl2YXRlZC5hZGQoKG9sZFNjZW5lLCBuZXdTY2VuZSkgPT4ge1xuICAgICAqICAgICBjb25zb2xlLmxvZyhgU2NlbmUgc3dpdGNoIGZyb20gJHtvbGRTY2VuZS5maWxlbmFtZX0gdG8gJHtuZXdTY2VuZS5maWxlbmFtZX1gKTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICByZWFkb25seSBvblNjZW5lQWN0aXZhdGVkID0gbmV3IEVtaXR0ZXI8W1NjZW5lLCBTY2VuZV0+KCk7XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiBhIGhvdCByZWxvYWQgaXMgcmVxdWVzdGVkLlxuICAgICAqXG4gICAgICogV2hlbiB1c2luZyB0aGUgV29uZGVybGFuZCBFZGl0b3IsIHRoaXMgd2lsbCBiZSB0cmlnZ2VyZWQgd2hlbiBwYWNrYWdpbmdcbiAgICAgKiB0aGUgcHJvamVjdC5cbiAgICAgKlxuICAgICAqIFRoZSBob3QgcmVsb2FkIGVtaXR0ZXIgY2FuIGJlIHVzZWQgdG8gZG93bmxvYWQgdGhlIHNjZW5lIGNvbXBvbmVudHMgbW9kdWxlLFxuICAgICAqIGFuZCByZS1sb2FkIHRoZSBjdXJyZW50IHNjZW5lOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiB0aGlzLmVuZ2luZS5vbkhvdFJlbG9hZFJlcXVlc3QuYWRkKGFzeW5jIChmaWxlbmFtZTogc3RyaW5nKSA9PiB7XG4gICAgICogICAgIGNvbnN0IHJlZ2lzdGVyID0gKGF3YWl0IGltcG9ydCh6TXlQcm9qZWN0LWJ1bmRsZS5qcycpKS5kZWZhdWx0O1xuICAgICAqICAgICByZWdpc3Rlcih0aGlzLmVuZ2luZSk7XG4gICAgICogICAgIHRoaXMuZW5naW5lLmxvYWRNYWluU2NlbmUoJ015UHJvamVjdC5iaW4nKTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICByZWFkb25seSBvbkhvdFJlbG9hZFJlcXVlc3Q6IEVtaXR0ZXI8W3N0cmluZ10+ID0gbmV3IEVtaXR0ZXIoKTtcblxuICAgIC8qKlxuICAgICAqIEFjY2VzcyB0byBpbnRlcm5hdGlvbmFsaXphdGlvbi5cbiAgICAgKi9cbiAgICByZWFkb25seSBpMThuOiBJMThOID0gbmV3IEkxOE4odGhpcyk7XG5cbiAgICAvKipcbiAgICAgKiBXZWJYUiByZWxhdGVkIHN0YXRlLCBgbnVsbGAgaWYgbm8gWFIgc2Vzc2lvbiBpcyBhY3RpdmUuXG4gICAgICovXG4gICAgcmVhZG9ubHkgeHI6IFhSIHwgbnVsbCA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBJZiBgdHJ1ZWAsIHtAbGluayBUZXh0dXJlfSwge0BsaW5rIE9iamVjdDNEfSwgYW5kIHtAbGluayBDb21wb25lbnR9XG4gICAgICogaW5zdGFuY2VzIGhhdmUgdGhlaXIgcHJvdG90eXBlIGVyYXNlZCB1cG9uIGRlc3RydWN0aW9uLlxuICAgICAqXG4gICAgICogIyMjIyBPYmplY3RcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogZW5naW5lLmVyYXNlUHJvdG90eXBlT25EZXN0cm95ID0gdHJ1ZTtcbiAgICAgKlxuICAgICAqIGNvbnN0IG9iaiA9IGVuZ2luZS5zY2VuZS5hZGRPYmplY3QoKTtcbiAgICAgKiBvYmoubmFtZSA9ICdpYW1hbGl2ZSc7XG4gICAgICogY29uc29sZS5sb2cob2JqLm5hbWUpOyAvLyBQcmludHMgJ2lhbWFsaXZlJ1xuICAgICAqXG4gICAgICogb2JqLmRlc3Ryb3koKTtcbiAgICAgKiBjb25zb2xlLmxvZyhvYmoubmFtZSk7IC8vIFRocm93cyBhbiBlcnJvclxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogIyMjIyBDb21wb25lbnRcbiAgICAgKlxuICAgICAqIENvbXBvbmVudHMgd2lsbCBhbHNvIGJlIGFmZmVjdGVkOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjbGFzcyBNeUNvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgICogICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdteS1jb21wb25lbnQnO1xuICAgICAqICAgICBzdGF0aWMgUHJvcGVydGllcyA9IHtcbiAgICAgKiAgICAgICAgIGFsaXZlOiBQcm9wZXJ0eS5ib29sKHRydWUpXG4gICAgICogICAgIH07XG4gICAgICpcbiAgICAgKiAgICAgc3RhcnQoKSB7XG4gICAgICogICAgICAgICB0aGlzLmRlc3Ryb3koKTtcbiAgICAgKiAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuYWxpdmUpIC8vIFRocm93cyBhbiBlcnJvclxuICAgICAqICAgICB9XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQSBjb21wb25lbnQgaXMgYWxzbyBkZXN0cm95ZWQgaWYgaXRzIGFuY2VzdG9yIGdldHMgZGVzdHJveWVkOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjbGFzcyBNeUNvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgICogICAgIC4uLlxuICAgICAqICAgICBzdGFydCgpIHtcbiAgICAgKiAgICAgICAgIHRoaXMub2JqZWN0LnBhcmVudC5kZXN0cm95KCk7XG4gICAgICogICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmFsaXZlKSAvLyBUaHJvd3MgYW4gZXJyb3JcbiAgICAgKiAgICAgfVxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBub3RlIE5hdGl2ZSBjb21wb25lbnRzIHdpbGwgbm90IGJlIGVyYXNlZCBpZiBkZXN0cm95ZWQgdmlhIG9iamVjdCBkZXN0cnVjdGlvbjpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogY29uc3QgbWVzaCA9IG9iai5hZGRDb21wb25lbnQoJ21lc2gnKTtcbiAgICAgKiBvYmouZGVzdHJveSgpO1xuICAgICAqIGNvbnNvbGUubG9nKG1lc2guYWN0aXZlKSAvLyBEb2Vzbid0IHRocm93IGV2ZW4gaWYgdGhlIG1lc2ggaXMgZGVzdHJveWVkXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4xLjFcbiAgICAgKi9cbiAgICBlcmFzZVByb3RvdHlwZU9uRGVzdHJveSA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogSWYgYHRydWVgLCB0aGUgbWF0ZXJpYWxzIHdpbGwgYmUgd3JhcHBlZCBpbiBhIHByb3h5IHRvIHN1cHBvcnQgcHJlLTEuMi4wXG4gICAgICogbWF0ZXJpYWwgYWNjZXNzLCBpLmUuLFxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBtYXRlcmlhbCA9IG5ldyBNYXRlcmlhbChlbmdpbmUsICdQaG9uZyBPcGFxdWUnKTtcbiAgICAgKiBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgPSBbMS4wLCAwLjAsIDAuMCwgMS4wXTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIElmIGBmYWxzZWAsIHByb3BlcnR5IGFjY2Vzc29ycyB3aWxsIG5vdCBiZSBhdmFpbGFibGUgYW5kIG1hdGVyaWFsXG4gICAgICogcHJvcGVydGllcyBzaG91bGQgYmUgYWNjZXNzZWQgdmlhIG1ldGhvZHMsIGkuZS4sXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IFBob25nT3BhcXVlID0gZW5naW5lLm1hdGVyaWFscy5nZXRUZW1wbGF0ZSgnUGhvbmcgT3BhcXVlJyk7XG4gICAgICogY29uc3QgbWF0ZXJpYWwgPSBuZXcgUGhvbmdPcGFxdWUoKTtcbiAgICAgKiBtYXRlcmlhbC5zZXREaWZmdXNlQ29sb3IoWzEuMCwgMC4wLCAwLjAsIDEuMF0pO1xuICAgICAqIC4uLlxuICAgICAqIGNvbnN0IGRpZmZ1c2UgPSBtYXRlcmlhbC5nZXREaWZmdXNlQ29sb3IoKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFdoZW4gZGlzYWJsZWQsIHJlYWRpbmcvd3JpdGluZyB0byBtYXRlcmlhbHMgaXMgc2xpZ2h0bHkgbW9yZSBlZmZpY2llbnQgb24gdGhlIENQVS5cbiAgICAgKi9cbiAgICBsZWdhY3lNYXRlcmlhbFN1cHBvcnQgPSB0cnVlO1xuXG4gICAgLyoqXG4gICAgICogSWYgYHRydWVgLCBzY2VuZSB3aWxsIGJlIGxvYWRlZCBjaHVuayBieSBjaHVuay5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICByZWFkb25seSBfdXNlQ2h1bmtMb2FkaW5nID0gdHJ1ZTtcblxuICAgIC8qKlxuICAgICAqIFNjZW5lIGNhY2hlIGluIHNjZW5lIG1hbmFnZXIuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX3NjZW5lczogKFByZWZhYiB8IG51bGwpW10gPSBbXTtcblxuICAgIC8qKlxuICAgICAqIEN1cnJlbnRseSBhY3RpdmUgc2NlbmUuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX3NjZW5lOiBTY2VuZSA9IG51bGwhO1xuXG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBwcml2YXRlIF90ZXh0dXJlczogVGV4dHVyZU1hbmFnZXIgPSBudWxsITtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIHByaXZhdGUgX21hdGVyaWFsczogTWF0ZXJpYWxNYW5hZ2VyID0gbnVsbCE7XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBwcml2YXRlIF9tZXNoZXM6IE1lc2hNYW5hZ2VyID0gbnVsbCE7XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBwcml2YXRlIF9tb3JwaFRhcmdldHM6IFJlc291cmNlTWFuYWdlcjxNb3JwaFRhcmdldHM+ID0gbnVsbCE7XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBwcml2YXRlIF9mb250czogUmVzb3VyY2VNYW5hZ2VyPEZvbnQ+ID0gbnVsbCE7XG5cbiAgICAvKipcbiAgICAgKiBXZWJBc3NlbWJseSBicmlkZ2UuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgI3dhc206IFdBU007XG5cbiAgICAvKipcbiAgICAgKiBQaHlzaWNzIG1hbmFnZXIsIG9ubHkgYXZhaWxhYmxlIHdoZW4gcGh5c3ggaXMgZW5hYmxlZCBpbiB0aGUgcnVudGltZS5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICAjcGh5c2ljczogUGh5c2ljcyB8IG51bGwgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogUmVzaXplIG9ic2VydmVyIHRvIHRyYWNrIGZvciBjYW52YXMgc2l6ZSBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgICNyZXNpemVPYnNlcnZlcjogUmVzaXplT2JzZXJ2ZXIgfCBudWxsID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWwgcmVmZXJlbmNlIHNwYWNlIHR5cGUgc2V0IGJ5IHdlYnhyX2luaXQuIFNlZSB7QGxpbmsgX2luaXR9IGZvclxuICAgICAqIG1vcmUgaW5mb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgI2luaXRpYWxSZWZlcmVuY2VTcGFjZVR5cGU6IFhSUmVmZXJlbmNlU3BhY2VUeXBlIHwgbnVsbCA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgZW5naW5lIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHdhc20gV2FzbSBicmlkZ2UgaW5zdGFuY2VcbiAgICAgKiBAcGFyYW0gbG9hZGluZ1NjcmVlbiBMb2FkaW5nIHNjcmVlbiAuYmluIGZpbGUgZGF0YVxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHdhc206IFdBU00sIGxvYWRpbmdTY3JlZW46IEFycmF5QnVmZmVyIHwgbnVsbCkge1xuICAgICAgICB0aGlzLiN3YXNtID0gd2FzbTtcbiAgICAgICAgdGhpcy4jd2FzbVsnX3NldEVuZ2luZSddKHRoaXMpOyAvKiBTdHJpbmcgbG9va3VwIHRvIGJ5cGFzcyBwcml2YXRlLiAqL1xuICAgICAgICB0aGlzLiN3YXNtLl9sb2FkaW5nU2NyZWVuID0gbG9hZGluZ1NjcmVlbjtcblxuICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgJ3dlYmdsY29udGV4dGxvc3QnLFxuICAgICAgICAgICAgKGUpID0+IHRoaXMubG9nLmVycm9yKExvZ1RhZy5FbmdpbmUsICdDb250ZXh0IGxvc3Q6JywgZSksXG4gICAgICAgICAgICBmYWxzZVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0YXJ0IHRoZSBlbmdpbmUgaWYgaXQncyBub3QgYWxyZWFkeSBydW5uaW5nLlxuICAgICAqXG4gICAgICogV2hlbiB1c2luZyB0aGUge0BsaW5rIGxvYWRSdW50aW1lfSBmdW5jdGlvbiwgdGhpcyBtZXRob2QgaXMgY2FsbGVkXG4gICAgICogYXV0b21hdGljYWxseS5cbiAgICAgKi9cbiAgICBzdGFydCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy53YXNtLl93bF9hcHBsaWNhdGlvbl9zdGFydCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVyIGEgY3VzdG9tIEphdmFTY3JpcHQgY29tcG9uZW50IHR5cGUuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIHJlZ2lzdGVyIGEgY29tcG9uZW50IGRpcmVjdGx5IHVzaW5nIGEgY2xhc3MgaW5oZXJpdGluZyBmcm9tIHtAbGluayBDb21wb25lbnR9OlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBpbXBvcnQgeyBDb21wb25lbnQsIFR5cGUgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuICAgICAqXG4gICAgICogZXhwb3J0IGNsYXNzIE15Q29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAgKiAgICAgc3RhdGljIFR5cGVOYW1lID0gJ215LWNvbXBvbmVudCc7XG4gICAgICogICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge1xuICAgICAqICAgICAgICAgbXlQYXJhbToge3R5cGU6IFR5cGUuRmxvYXQsIGRlZmF1bHQ6IDQyLjB9LFxuICAgICAqICAgICB9O1xuICAgICAqICAgICBpbml0KCkge31cbiAgICAgKiAgICAgc3RhcnQoKSB7fVxuICAgICAqICAgICB1cGRhdGUoZHQpIHt9XG4gICAgICogICAgIG9uQWN0aXZhdGUoKSB7fVxuICAgICAqICAgICBvbkRlYWN0aXZhdGUoKSB7fVxuICAgICAqICAgICBvbkRlc3Ryb3koKSB7fVxuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogLy8gSGVyZSwgd2UgYXNzdW1lIHdlIGhhdmUgYW4gZW5naW5lIGFscmVhZHkgaW5zdGFudGlhdGVkLlxuICAgICAqIC8vIEluIGdlbmVyYWwsIHRoZSByZWdpc3RyYXRpb24gb2NjdXJzIGluIHRoZSBgaW5kZXguanNgIGZpbGUgaW4geW91clxuICAgICAqIC8vIGZpbmFsIGFwcGxpY2F0aW9uLlxuICAgICAqIGVuZ2luZS5yZWdpc3RlckNvbXBvbmVudChNeUNvbXBvbmVudCk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiB7QGxhYmVsIENMQVNTRVN9XG4gICAgICogQHBhcmFtIGNsYXNzZXMgQ3VzdG9tIGNvbXBvbmVudChzKSBleHRlbmRpbmcge0BsaW5rIENvbXBvbmVudH0uXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4wLjBcbiAgICAgKi9cbiAgICByZWdpc3RlckNvbXBvbmVudCguLi5jbGFzc2VzOiBDb21wb25lbnRDb25zdHJ1Y3RvcltdKSB7XG4gICAgICAgIGZvciAoY29uc3QgYXJnIG9mIGNsYXNzZXMpIHtcbiAgICAgICAgICAgIHRoaXMud2FzbS5fcmVnaXN0ZXJDb21wb25lbnQoYXJnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgbG9hZGluZyBzY3JlZW4gcHJvZ3Jlc3MgYmFyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlIEN1cnJlbnQgbG9hZGluZyBwZXJjZW50YWdlLCBpbiB0aGUgcmFuZ2UgWzA7IDFdLlxuICAgICAqXG4gICAgICogQHNpbmNlIDEuMi4xXG4gICAgICovXG4gICAgc2V0TG9hZGluZ1Byb2dyZXNzKHBlcmNlbnRhZ2U6IG51bWJlcikge1xuICAgICAgICB0aGlzLndhc20uX3dsX3NldF9sb2FkaW5nX3NjcmVlbl9wcm9ncmVzcyhjbGFtcChwZXJjZW50YWdlLCAwLCAxKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3dpdGNoIHRoZSBjdXJyZW50IGFjdGl2ZSBzY2VuZS5cbiAgICAgKlxuICAgICAqIE9uY2UgYWN0aXZlLCB0aGUgc2NlbmUgd2lsbCBiZSB1cGRhdGVkIGFuZCByZW5kZXJlZCBvbiB0aGUgY2FudmFzLlxuICAgICAqXG4gICAgICogVGhlIGN1cnJlbnRseSBhY3RpdmUgc2NlbmUgaXMgYWNjZXNzZWQgdmlhIHtAbGluayBXb25kZXJsYW5kRW5naW5lLnNjZW5lfTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogaW1wb3J0IHtDb21wb25lbnR9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4gICAgICpcbiAgICAgKiBjbGFzcyBNeUNvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudHtcbiAgICAgKiAgICAgc3RhcnQoKSB7XG4gICAgICogICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnNjZW5lID09PSB0aGlzLmVuZ2luZS5zY2VuZSk7IC8vIFByaW50cyBgdHJ1ZWBcbiAgICAgKiAgICAgfVxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgbWV0aG9kIHdpbGwgdGhyb3cgaWYgdGhlIHNjZW5lIGlzbid0IGFjdGl2YXRhYmxlLlxuICAgICAqXG4gICAgICogIyMjIyBDb21wb25lbnQgTGlmZWN5Y2xlXG4gICAgICpcbiAgICAgKiBNYXJraW5nIGEgc2NlbmUgYXMgYWN0aXZlIHdpbGw6XG4gICAgICogKiBDYWxsIHtAbGluayBDb21wb25lbnQjb25EZWFjdGl2YXRlfSBmb3IgYWxsIGFjdGl2ZSBjb21wb25lbnRzIG9mIHRoZSBwcmV2aW91cyBzY2VuZVxuICAgICAqICogQ2FsbCB7QGxpbmsgQ29tcG9uZW50I29uQWN0aXZhdGV9IGZvciBhbGwgYWN0aXZlIGNvbXBvbmVudHMgb2YgdGhlIG5ldyBzY2VuZVxuICAgICAqXG4gICAgICogIyMjIyBVc2FnZVxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBzY2VuZSA9IGF3YWl0IGVuZ2luZS5sb2FkU2NlbmUoJ1NjZW5lLmJpbicpO1xuICAgICAqIGVuZ2luZS5zd2l0Y2hUbyhzY2VuZSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyBvbmNlIHRoZSBzY2VuZSBpcyByZWFkeS5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjIuMFxuICAgICAqL1xuICAgIGFzeW5jIHN3aXRjaFRvKHNjZW5lOiBTY2VuZSwgb3B0czogQWN0aXZhdGVPcHRpb25zID0ge30pIHtcbiAgICAgICAgdGhpcy53YXNtLl93bF9kZWFjdGl2YXRlX2FjdGl2ZVNjZW5lKCk7XG5cbiAgICAgICAgLyogU3dpdGNoIHJlZmVyZW5jZSBvbiBlbmdpbmUgKipqdXN0KiogYmVmb3JlIGFjdGl2YXRpbmcsIHRvIGFsbG93XG4gICAgICAgICAqIGNvbXBvbmVudCB0byB1c2UgYHRoaXMuZW5naW5lLnNjZW5lYCBpbiBgb25BY3RpdmF0ZSgpYC9gc3RhcnQoKWAuICovXG4gICAgICAgIGNvbnN0IHByZXZpb3VzID0gdGhpcy5zY2VuZTtcbiAgICAgICAgdGhpcy5fcHJlYWN0aXZhdGUoc2NlbmUpO1xuXG4gICAgICAgIHRoaXMud2FzbS5fd2xfc2NlbmVfYWN0aXZhdGUoc2NlbmUuX2luZGV4KTtcblxuICAgICAgICBpZiAoIXRoaXMub25Mb2FkaW5nU2NyZWVuRW5kLmlzRGF0YVJldGFpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLm9uTG9hZGluZ1NjcmVlbkVuZC5ub3RpZnkoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIEZvciBub3csIHdlIGFsd2F5cyBhdXRvbWF0aWNhbGx5IGRvd25sb2FkIGRlcGVuZGVuY2llcyBmb3JcbiAgICAgICAgICogdGhlIHVzZXIsIGkuZS4sIHNlcGFyYXRlIHRleHR1cmVzLmJpbiBhbmQgbGFuZ3VhZ2VzLmJpbi5cbiAgICAgICAgICpcbiAgICAgICAgICogSW4gdGhlIGZ1dHVyZSwgd2UgY2FuIGV2ZW50dWFsbHkgZXhwb3NlIHRoaXMgaW4gdGhlIGNodW5rIEFQSVxuICAgICAgICAgKiB0byBnaXZlIG1vcmUgY29udHJvbCB0byB0aGUgdXNlciBpZiBuZWVkZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdlIGRvIG5vdCBtYWtlIHRoZSB1c2VyIHdhaXQgdW50aWwgdGhlIHRleHR1cmVzIGRvd25sb2FkIGlzIGNvbXBsZXRlLiAqL1xuICAgICAgICBjb25zdCBwcm9taXNlID0gc2NlbmUuX2Rvd25sb2FkRGVwZW5kZW5jaWVzKCk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5pMThuLnNldExhbmd1YWdlKHRoaXMuaTE4bi5sYW5ndWFnZUNvZGUoMCkpO1xuXG4gICAgICAgIGNvbnN0IHtkaXNwYXRjaFJlYWR5RXZlbnQgPSBmYWxzZSwgd2FpdEZvckRlcGVuZGVuY2llcyA9IGZhbHNlfSA9IG9wdHM7XG5cbiAgICAgICAgaWYgKHdhaXRGb3JEZXBlbmRlbmNpZXMpIGF3YWl0IHByb21pc2U7XG5cbiAgICAgICAgdGhpcy5vblNjZW5lQWN0aXZhdGVkLm5vdGlmeShwcmV2aW91cywgc2NlbmUpO1xuXG4gICAgICAgIGlmIChkaXNwYXRjaFJlYWR5RXZlbnQpIHNjZW5lLmRpc3BhdGNoUmVhZHlFdmVudCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvYWQgdGhlIHNjZW5lIGZyb20gYSBVUkwsIGFzIHRoZSBtYWluIHNjZW5lIG9mIGEgbmV3IHtAbGluayBTY2VuZX0uXG4gICAgICpcbiAgICAgKiAjIyMjIFVzYWdlXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIC8vIFRoZSBtZXRob2QgcmV0dXJucyB0aGUgbWFpbiBzY2VuZVxuICAgICAqIGNvbnN0IHNjZW5lID0gYXdhaXQgZW5naW5lLmxvYWRNYWluU2NlbmUoKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqICMjIyMgRGVzdHJ1Y3Rpb25cbiAgICAgKlxuICAgICAqIExvYWRpbmcgYSBuZXcgbWFpbiBzY2VuZSBlbnRpcmVseSByZXNldHMgdGhlIHN0YXRlIG9mIHRoZSBlbmdpbmUsIGFuZCBkZXN0cm95czpcbiAgICAgKiAtIEFsbCBsb2FkZWQgc2NlbmVzLCBwcmVmYWJzLCBhbmQgZ2x0ZiBmaWxlc1xuICAgICAqIC0gTWVzaGVzXG4gICAgICogLSBUZXh0dXJlc1xuICAgICAqIC0gTWF0ZXJpYWxzXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIG1ldGhvZCBjYW4gb25seSBsb2FkIFdvbmRlcmxhbmQgRW5naW5lIGAuYmluYCBmaWxlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBVUkwgcG9pbnRpbmcgdG8gdGhlIHNjZW5lIHRvIGxvYWQgb3IgYW4gb2JqZWN0XG4gICAgICogICAgIGhvbGRpbmcgYWRkaXRpb25hbCBsb2FkaW5nIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIHByb2dyZXNzIE9wdGlvbmFsIHByb2dyZXNzIGNhbGxiYWNrLiBXaGVuIHNldHRpbmcgYSBjdXN0b21cbiAgICAgKiAgICAgY2FsbGJhY2ssIHlvdSBuZWVkIHRvIG1hbnVhbGx5IGNhbGwge0BsaW5rIHNldExvYWRpbmdQcm9ncmVzc30gdG9cbiAgICAgKiAgICAgZ2V0IHByb2dyZXNzIHVwZGF0ZXMgaW4gdGhlIGxvYWRpbmcgc2NyZWVuLlxuICAgICAqIEByZXR1cm5zIFRoZSBtYWluIHNjZW5lIG9mIHRoZSBuZXcge0BsaW5rIFNjZW5lfS5cbiAgICAgKi9cbiAgICBhc3luYyBsb2FkTWFpblNjZW5lKFxuICAgICAgICBvcHRpb25zOiBMb2FkT3B0aW9ucyAmIEFjdGl2YXRlT3B0aW9ucyxcbiAgICAgICAgcHJvZ3Jlc3M/OiBQcm9ncmVzc0NhbGxiYWNrXG4gICAgKSB7XG4gICAgICAgIHByb2dyZXNzID8/PSAoYnl0ZXM6IG51bWJlciwgc2l6ZTogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxvZy5pbmZvKExvZ1RhZy5TY2VuZSwgYFNjZW5lIGRvd25sb2FkaW5nOiAke2J5dGVzfSAvICR7c2l6ZX1gKTtcbiAgICAgICAgICAgIHRoaXMuc2V0TG9hZGluZ1Byb2dyZXNzKGJ5dGVzIC8gc2l6ZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3Qgb3B0cyA9IFByZWZhYi5tYWtlVXJsTG9hZE9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHtzdHJlYW1lZCA9IHRydWV9ID0gb3B0cztcbiAgICAgICAgaWYgKHRoaXMuX2NhblVzZUNodW5rTG9hZGluZygpICYmIHN0cmVhbWVkKSB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gYXdhaXQgU2NlbmUubG9hZFN0cmVhbShvcHRzLCBwcm9ncmVzcyk7XG4gICAgICAgICAgICBjb25zdCB7c3RyZWFtLCB1cmx9ID0gUHJlZmFiLnZhbGlkYXRlU3RyZWFtT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9sb2FkTWFpblNjZW5lKHN0cmVhbSwgdXJsLCBvcHRpb25zIGFzIEFjdGl2YXRlT3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gYXdhaXQgU2NlbmUubG9hZEJ1ZmZlcihvcHRzLCBwcm9ncmVzcyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb2FkTWFpblNjZW5lRnJvbUJ1ZmZlcihvcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNpbWlsYXIgdG8ge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUubG9hZE1haW5TY2VuZX0sIGJ1dCBsb2FkaW5nIGlzIGRvbmVcbiAgICAgKiBmcm9tIGFuIGBBcnJheUJ1ZmZlcmAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgYnVmZmVyIGFuZCBleHRyYSBtZXRhZGF0YS5cbiAgICAgKiBAcmV0dXJucyBUaGUgbWFpbiBzY2VuZSBvZiB0aGUgbmV3IHtAbGluayBTY2VuZX0uXG4gICAgICovXG4gICAgYXN5bmMgbG9hZE1haW5TY2VuZUZyb21CdWZmZXIob3B0aW9uczogSW5NZW1vcnlMb2FkT3B0aW9ucyAmIEFjdGl2YXRlT3B0aW9ucykge1xuICAgICAgICBjb25zdCB7YnVmZmVyLCB1cmx9ID0gUHJlZmFiLnZhbGlkYXRlQnVmZmVyT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvYWRNYWluU2NlbmUoYnVmZmVyLCB1cmwsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvYWQgYSB7QGxpbmsgUHJlZmFifSBmcm9tIGEgVVJMLlxuICAgICAqXG4gICAgICogIyMjIyBVc2FnZVxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBwcmVmYWIgPSBhd2FpdCBlbmdpbmUubG9hZFByZWZhYignUHJlZmFiLmJpbicpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBtZXRob2QgY2FuIG9ubHkgbG9hZCBXb25kZXJsYW5kIEVuZ2luZSBgLmJpbmAgZmlsZXMuXG4gICAgICogQG5vdGUgVGhpcyBtZXRob2QgaXMgYSB3cmFwcGVyIGFyb3VuZCB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5sb2FkUHJlZmFiRnJvbUJ1ZmZlcn0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdXJsIFRoZSBVUkwgcG9pbnRpbmcgdG8gdGhlIHByZWZhYiB0byBsb2FkLlxuICAgICAqIEBwYXJhbSBwcm9ncmVzcyBPcHRpb25hbCBwcm9ncmVzcyBjYWxsYmFjay5cbiAgICAgKiBAcmV0dXJucyBUaGUgbG9hZGVkIHtAbGluayBQcmVmYWJ9LlxuICAgICAqL1xuICAgIGFzeW5jIGxvYWRQcmVmYWIob3B0aW9uczogTG9hZE9wdGlvbnMsIHByb2dyZXNzPzogUHJvZ3Jlc3NDYWxsYmFjaykge1xuICAgICAgICBjb25zdCBvcHRzID0gUHJlZmFiLm1ha2VVcmxMb2FkT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgY29uc3Qge3N0cmVhbWVkID0gdHJ1ZX0gPSBvcHRzO1xuICAgICAgICBpZiAodGhpcy5fY2FuVXNlQ2h1bmtMb2FkaW5nKCkgJiYgc3RyZWFtZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBhd2FpdCBTY2VuZS5sb2FkU3RyZWFtKG9wdHMsIHByb2dyZXNzKTtcbiAgICAgICAgICAgIGNvbnN0IHNjZW5lID0gYXdhaXQgdGhpcy5fbG9hZFNjZW5lRnJvbVN0cmVhbShQcmVmYWIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5fdmFsaWRhdGVMb2FkZWRQcmVmYWIoc2NlbmUpO1xuICAgICAgICAgICAgc2NlbmUuX2luaXRpYWxpemUoKTtcbiAgICAgICAgICAgIHJldHVybiBzY2VuZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBhd2FpdCBTY2VuZS5sb2FkQnVmZmVyKG9wdHMsIHByb2dyZXNzKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRQcmVmYWJGcm9tQnVmZmVyKG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2ltaWxhciB0byB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5sb2FkUHJlZmFifSwgYnV0IGxvYWRpbmcgaXMgZG9uZSBmcm9tXG4gICAgICogYW4gYEFycmF5QnVmZmVyYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBidWZmZXIgYW5kIGV4dHJhIG1ldGFkYXRhLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IGxvYWRlZCB7QGxpbmsgUHJlZmFifS5cbiAgICAgKi9cbiAgICBsb2FkUHJlZmFiRnJvbUJ1ZmZlcihvcHRpb25zOiBJbk1lbW9yeUxvYWRPcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gdGhpcy5fbG9hZFNjZW5lRnJvbUJ1ZmZlcihQcmVmYWIsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLl92YWxpZGF0ZUxvYWRlZFByZWZhYihzY2VuZSk7XG4gICAgICAgIHNjZW5lLl9pbml0aWFsaXplKCk7XG4gICAgICAgIHJldHVybiBzY2VuZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2FkIGEgc2NlbmUgZnJvbSBhIFVSTC5cbiAgICAgKlxuICAgICAqIEF0IHRoZSBvcHBvc2l0ZSBvZiB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5sb2FkTWFpblNjZW5lfSwgdGhlIHNjZW5lIGxvYWRlZFxuICAgICAqIHdpbGwgYmUgYWRkZWQgdG8gdGhlIGxpc3Qgb2YgZXhpc3Rpbmcgc2NlbmVzLCBhbmQgaXRzIHJlc291cmNlcyB3aWxsIGJlIG1hZGVcbiAgICAgKiBhdmFpbGFibGUgZm9yIG90aGVyIHNjZW5lcy9wcmVmYWJzL2dsdGYgdG8gdXNlLlxuICAgICAqXG4gICAgICogIyMjIyBSZXNvdXJjZXMgU2hhcmluZ1xuICAgICAqXG4gICAgICogVXBvbiBsb2FkaW5nLCB0aGUgc2NlbmUgcmVzb3VyY2VzIGFyZSBhZGRlZCBpbiB0aGUgZW5naW5lLCBhbmQgcmVmZXJlbmNlc1xuICAgICAqIHRvIHRob3NlIHJlc291cmNlcyBhcmUgdXBkYXRlZC5cbiAgICAgKlxuICAgICAqIEl0J3MgaW1wb3NzaWJsZSBmb3IgYSBzY2VuZSBsb2FkZWQgd2l0aCB0aGlzIG1ldGhvZCB0byBpbXBvcnQgcGlwZWxpbmVzLlxuICAgICAqIFRodXMsIHRoZSBsb2FkZWQgc2NlbmUgd2lsbCByZWZlcmVuY2UgZXhpc3RpbmcgcGlwZWxpbmVzIGluIHRoZSBtYWluIHNjZW5lLFxuICAgICAqIGJhc2VkIG9uIHRoZWlyIG5hbWVzLlxuICAgICAqXG4gICAgICogIyMjIyBVc2FnZVxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiBjb25zdCBzY2VuZSA9IGF3YWl0IGVuZ2luZS5sb2FkU2NlbmUoJ1NjZW5lLmJpbicpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBtZXRob2QgY2FuIG9ubHkgbG9hZCBXb25kZXJsYW5kIEVuZ2luZSBgLmJpbmAgZmlsZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgVVJMIHBvaW50aW5nIHRvIHRoZSBzY2VuZSB0byBsb2FkIG9yIGFuIG9iamVjdFxuICAgICAqICAgICBob2xkaW5nIGFkZGl0aW9uYWwgbG9hZGluZyBvcHRpb25zLlxuICAgICAqIEBwYXJhbSBwcm9ncmVzcyBPcHRpb25hbCBwcm9ncmVzcyBjYWxsYmFjay5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBsb2FkZWQge0BsaW5rIFNjZW5lfS5cbiAgICAgKi9cbiAgICBhc3luYyBsb2FkU2NlbmUob3B0aW9uczogTG9hZE9wdGlvbnMsIHByb2dyZXNzPzogUHJvZ3Jlc3NDYWxsYmFjaykge1xuICAgICAgICBjb25zdCBvcHRzID0gUHJlZmFiLm1ha2VVcmxMb2FkT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgY29uc3Qge3N0cmVhbWVkID0gdHJ1ZX0gPSBvcHRzO1xuICAgICAgICBpZiAodGhpcy5fY2FuVXNlQ2h1bmtMb2FkaW5nKCkgJiYgc3RyZWFtZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBhd2FpdCBTY2VuZS5sb2FkU3RyZWFtKG9wdHMsIHByb2dyZXNzKTtcbiAgICAgICAgICAgIGNvbnN0IHNjZW5lID0gYXdhaXQgdGhpcy5fbG9hZFNjZW5lRnJvbVN0cmVhbShTY2VuZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLl92YWxpZGF0ZUxvYWRlZFNjZW5lKHNjZW5lKTtcbiAgICAgICAgICAgIHNjZW5lLl9pbml0aWFsaXplKCk7XG4gICAgICAgICAgICByZXR1cm4gc2NlbmU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gYXdhaXQgU2NlbmUubG9hZEJ1ZmZlcihvcHRzLCBwcm9ncmVzcyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb2FkU2NlbmVGcm9tQnVmZmVyKG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgZ2xURiBzY2VuZSBmcm9tIGEgVVJMLlxuICAgICAqXG4gICAgICogQG5vdGUgTG9hZGluZyBnbFRGIGZpbGVzIHJlcXVpcmVzIGBlbmFibGVSdW50aW1lR2x0ZmAgdG8gYmUgY2hlY2tlZCBpblxuICAgICAqICAgICB0aGUgZWRpdG9yIFByb2plY3QgU2V0dGluZ3MuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIG1ldGhvZCBpcyBhIHdyYXBwZXIgYXJvdW5kIHtAbGluayBXb25kZXJsYW5kRW5naW5lLmxvYWRHTFRGRnJvbUJ1ZmZlcn0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgVVJMIHBvaW50aW5nIHRvIHRoZSBzY2VuZSB0byBsb2FkIG9yIGFuIG9iamVjdFxuICAgICAqICAgICBob2xkaW5nIGFkZGl0aW9uYWwgbG9hZGluZyBvcHRpb25zLCBvcHRpb25hbGx5IGluY2x1ZGluZ1xuICAgICAqICAgICB7QGxpbmsgR0xURk9wdGlvbnN9LiB7QGxpbmsgTG9hZE9wdGlvbnMuc3RyZWFtZWR9IGlzIGlnbm9yZWQgYXNcbiAgICAgKiAgICAgc3RyZWFtZWQgZ2xURiBwYXJzaW5nIGlzbid0IHN1cHBvcnRlZC5cbiAgICAgKiBAcGFyYW0gcHJvZ3Jlc3MgT3B0aW9uYWwgcHJvZ3Jlc3MgY2FsbGJhY2suXG4gICAgICogQHJldHVybnMgQSBuZXcgbG9hZGVkIHtAbGluayBQcmVmYWJHTFRGfS5cbiAgICAgKi9cbiAgICBhc3luYyBsb2FkR0xURihvcHRzOiBMb2FkT3B0aW9ucyAmIEdMVEZPcHRpb25zLCBwcm9ncmVzcz86IFByb2dyZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgbWVtT3B0aW9ucyA9IGF3YWl0IFNjZW5lLmxvYWRCdWZmZXIob3B0cywgcHJvZ3Jlc3MpO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gaXNTdHJpbmcob3B0cykgPyBtZW1PcHRpb25zIDogey4uLm9wdHMsIC4uLm1lbU9wdGlvbnN9O1xuICAgICAgICByZXR1cm4gdGhpcy5sb2FkR0xURkZyb21CdWZmZXIob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2ltaWxhciB0byB7QGxpbmsgV29uZGVybGFuZEVuZ2luZS5sb2FkU2NlbmV9LCBidXQgbG9hZGluZyBpcyBkb25lIGZyb21cbiAgICAgKiBhbiBgQXJyYXlCdWZmZXJgLlxuICAgICAqXG4gICAgICogQHRocm93cyBJZiB0aGUgc2NlbmUgaXMgc3RyZWFtYWJsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBidWZmZXIgYW5kIGV4dHJhIG1ldGFkYXRhLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IGxvYWRlZCB7QGxpbmsgU2NlbmV9LlxuICAgICAqL1xuICAgIGxvYWRTY2VuZUZyb21CdWZmZXIob3B0aW9uczogSW5NZW1vcnlMb2FkT3B0aW9ucykge1xuICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMuX2xvYWRTY2VuZUZyb21CdWZmZXIoU2NlbmUsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLl92YWxpZGF0ZUxvYWRlZFNjZW5lKHNjZW5lKTtcbiAgICAgICAgc2NlbmUuX2luaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHNjZW5lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNpbWlsYXIgdG8ge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUubG9hZEdMVEZ9LCBidXQgbG9hZGluZyBpcyBkb25lIGZyb21cbiAgICAgKiBhbiBgQXJyYXlCdWZmZXJgLlxuICAgICAqXG4gICAgICogQG5vdGUgTG9hZGluZyBnbFRGIGZpbGVzIHJlcXVpcmVzIGBlbmFibGVSdW50aW1lR2x0ZmAgdG8gYmUgY2hlY2tlZCBpblxuICAgICAqICAgICB0aGUgZWRpdG9yIFByb2plY3QgU2V0dGluZ3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgYnVmZmVyIGFuZCBleHRyYSBnbFRGIG1ldGFkYXRhLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IGxvYWRlZCB7QGxpbmsgUHJlZmFiR0xURn0uXG4gICAgICovXG4gICAgbG9hZEdMVEZGcm9tQnVmZmVyKG9wdGlvbnM6IEluTWVtb3J5TG9hZE9wdGlvbnMgJiBHTFRGT3B0aW9ucykge1xuICAgICAgICBTY2VuZS52YWxpZGF0ZUJ1ZmZlck9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHtidWZmZXIsIGV4dGVuc2lvbnMgPSBmYWxzZX0gPSBvcHRpb25zO1xuXG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLndhc207XG5cbiAgICAgICAgaWYgKCF3YXNtLl93bF9nbFRGX3NjZW5lX2NyZWF0ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgICdMb2FkaW5nIC5nbHRmIGZpbGVzIHJlcXVpcmVzIGBlbmFibGVSdW50aW1lR2x0ZmAgdG8gYmUgY2hlY2tlZCBpbiB0aGUgZWRpdG9yIFByb2plY3QgU2V0dGluZ3MuJ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHB0ciA9IHdhc20uY29weUJ1ZmZlclRvSGVhcChidWZmZXIpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHdhc20uX3dsX2dsVEZfc2NlbmVfY3JlYXRlKGV4dGVuc2lvbnMsIHB0ciwgYnVmZmVyLmJ5dGVMZW5ndGgpO1xuICAgICAgICAgICAgY29uc3Qgc2NlbmUgPSBuZXcgUHJlZmFiR0xURih0aGlzLCBpbmRleCk7XG4gICAgICAgICAgICB0aGlzLl9zY2VuZXNbc2NlbmUuX2luZGV4XSA9IHNjZW5lO1xuICAgICAgICAgICAgcmV0dXJuIHNjZW5lO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgLyogQ2F0Y2ggY2FsbHMgdG8gYWJvcnQoKSwgZS5nLiB2aWEgYXNzZXJ0cyAqL1xuICAgICAgICAgICAgd2FzbS5fZnJlZShwdHIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHdoZXRoZXIgdGhlIGdpdmVuIGNvbXBvbmVudCBpcyByZWdpc3RlcmVkIG9yIG5vdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0eXBlT3JDbGFzcyBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGNvbXBvbmVudCB0eXBlbmFtZSAoZS5nLiwgYCdjdXJzb3ItY29tcG9uZW50J2ApLFxuICAgICAqICAgICBvciBhIGNvbXBvbmVudCBjbGFzcyAoZS5nLiwgYEN1cnNvckNvbXBvbmVudGApLlxuICAgICAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgY29tcG9uZW50IGlzIHJlZ2lzdGVyZWQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIGlzUmVnaXN0ZXJlZCh0eXBlT3JDbGFzczogc3RyaW5nIHwgQ29tcG9uZW50Q29uc3RydWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3dhc20uaXNSZWdpc3RlcmVkKFxuICAgICAgICAgICAgaXNTdHJpbmcodHlwZU9yQ2xhc3MpID8gdHlwZU9yQ2xhc3MgOiB0eXBlT3JDbGFzcy5UeXBlTmFtZVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlc2l6ZSB0aGUgY2FudmFzIGFuZCB0aGUgcmVuZGVyaW5nIGNvbnRleHQuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGUgYHdpZHRoYCBhbmQgYGhlaWdodGAgcGFyYW1ldGVycyB3aWxsIGJlIHNjYWxlZCBieSB0aGVcbiAgICAgKiBgZGV2aWNlUGl4ZWxSYXRpb2AgdmFsdWUuIEJ5IGRlZmF1bHQsIHRoZSBwaXhlbCByYXRpbyB1c2VkIGlzXG4gICAgICogW3dpbmRvdy5kZXZpY2VQaXhlbFJhdGlvXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2luZG93L2RldmljZVBpeGVsUmF0aW8pLlxuICAgICAqXG4gICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCwgaW4gQ1NTIHBpeGVscy5cbiAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQsIGluIENTUyBwaXhlbHMuXG4gICAgICogQHBhcmFtIGRldmljZVBpeGVsUmF0aW8gVGhlIHBpeGVsIHJhdGlvIGZhY3Rvci5cbiAgICAgKi9cbiAgICByZXNpemUod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIGRldmljZVBpeGVsUmF0aW8gPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbykge1xuICAgICAgICB3aWR0aCA9IHdpZHRoICogZGV2aWNlUGl4ZWxSYXRpbztcbiAgICAgICAgaGVpZ2h0ID0gaGVpZ2h0ICogZGV2aWNlUGl4ZWxSYXRpbztcbiAgICAgICAgdGhpcy5jYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB0aGlzLndhc20uX3dsX2FwcGxpY2F0aW9uX3Jlc2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgdGhpcy5vblJlc2l6ZS5ub3RpZnkoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSdW4gdGhlIG5leHQgZnJhbWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZml4ZWREZWx0YSBUaGUgZWxhcHNlZCB0aW1lIGJldHdlZW4gdGhpcyBmcmFtZSBhbmQgdGhlIHByZXZpb3VzIG9uZS5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoZSBlbmdpbmUgYXV0b21hdGljYWxseSBzY2hlZHVsZXMgbmV4dCBmcmFtZXMuIFlvdSBzaG91bGQgb25seVxuICAgICAqIHVzZSB0aGlzIG1ldGhvZCBmb3IgdGVzdGluZy5cbiAgICAgKi9cbiAgICBuZXh0RnJhbWUoZml4ZWREZWx0YTogbnVtYmVyID0gMCkge1xuICAgICAgICB0aGlzLiN3YXNtLl93bF9uZXh0RnJhbWUoZml4ZWREZWx0YSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVxdWVzdCBhbiBYUiBzZXNzaW9uLlxuICAgICAqXG4gICAgICogQG5vdGUgUGxlYXNlIHVzZSB0aGlzIGNhbGwgaW5zdGVhZCBvZiBkaXJlY3RseSBjYWxsaW5nIGBuYXZpZ2F0b3IueHIucmVxdWVzdFNlc3Npb24oKWAuXG4gICAgICogV29uZGVybGFuZCBFbmdpbmUgcmVxdWlyZXMgdG8gYmUgYXdhcmUgdGhhdCBhIHNlc3Npb24gaXMgc3RhcnRlZCwgYW5kIHRoaXNcbiAgICAgKiBpcyBkb25lIHRocm91Z2ggdGhpcyBjYWxsLlxuICAgICAqXG4gICAgICogQHBhcmFtIG1vZGUgVGhlIFhSIG1vZGUuXG4gICAgICogQHBhcmFtIGZlYXR1cmVzIEFuIGFycmF5IG9mIHJlcXVpcmVkIGZlYXR1cmVzLCBlLmcuLCBgWydsb2NhbC1mbG9vcicsICdoaXQtdGVzdCddYC5cbiAgICAgKiBAcGFyYW0gb3B0aW9uYWxGZWF0dXJlcyBBbiBhcnJheSBvZiBvcHRpb25hbCBmZWF0dXJlcywgZS5nLiwgYFsnYm91bmRlZC1mbG9vcicsICdkZXB0aC1zZW5zaW5nJ11gLlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSByZXNvbHZpbmcgd2l0aCB0aGUgYFhSU2Vzc2lvbmAsIGEgc3RyaW5nIGVycm9yIG1lc3NhZ2Ugb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIHJlcXVlc3RYUlNlc3Npb24oXG4gICAgICAgIG1vZGU6IFhSU2Vzc2lvbk1vZGUsXG4gICAgICAgIGZlYXR1cmVzOiBzdHJpbmdbXSxcbiAgICAgICAgb3B0aW9uYWxGZWF0dXJlczogc3RyaW5nW10gPSBbXVxuICAgICk6IFByb21pc2U8WFJTZXNzaW9uPiB7XG4gICAgICAgIHJldHVybiBjaGVja1hSU3VwcG9ydCgpLnRoZW4oKCkgPT5cbiAgICAgICAgICAgIHRoaXMuI3dhc20ud2VieHJfcmVxdWVzdFNlc3Npb24obW9kZSwgZmVhdHVyZXMsIG9wdGlvbmFsRmVhdHVyZXMpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT2ZmZXIgYW4gWFIgc2Vzc2lvbi5cbiAgICAgKlxuICAgICAqIEFkZHMgYW4gaW50ZXJhY3RpdmUgVUkgZWxlbWVudCB0byB0aGUgYnJvd3NlciBpbnRlcmZhY2UgdG8gc3RhcnQgYW4gWFJcbiAgICAgKiBzZXNzaW9uLiBCcm93c2VyIHN1cHBvcnQgaXMgb3B0aW9uYWwsIHNvIGl0J3MgYWR2aXNlZCB0byBzdGlsbCBhbGxvd1xuICAgICAqIHJlcXVlc3RpbmcgYSBzZXNzaW9uIHdpdGggYSBVSSBlbGVtZW50IG9uIHRoZSB3ZWJzaXRlIGl0c2VsZi5cbiAgICAgKlxuICAgICAqIEBub3RlIFBsZWFzZSB1c2UgdGhpcyBjYWxsIGluc3RlYWQgb2YgZGlyZWN0bHkgY2FsbGluZyBgbmF2aWdhdG9yLnhyLm9mZmVyU2Vzc2lvbigpYC5cbiAgICAgKiBXb25kZXJsYW5kIEVuZ2luZSByZXF1aXJlcyB0byBiZSBhd2FyZSB0aGF0IGEgc2Vzc2lvbiBpcyBzdGFydGVkLCBhbmQgdGhpc1xuICAgICAqIGlzIGRvbmUgdGhyb3VnaCB0aGlzIGNhbGwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbW9kZSBUaGUgWFIgbW9kZS5cbiAgICAgKiBAcGFyYW0gZmVhdHVyZXMgQW4gYXJyYXkgb2YgcmVxdWlyZWQgZmVhdHVyZXMsIGUuZy4sIGBbJ2xvY2FsLWZsb29yJywgJ2hpdC10ZXN0J11gLlxuICAgICAqIEBwYXJhbSBvcHRpb25hbEZlYXR1cmVzIEFuIGFycmF5IG9mIG9wdGlvbmFsIGZlYXR1cmVzLCBlLmcuLCBgWydib3VuZGVkLWZsb29yJywgJ2RlcHRoLXNlbnNpbmcnXWAuXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHJlc29sdmluZyB3aXRoIHRoZSBgWFJTZXNzaW9uYCwgYSBzdHJpbmcgZXJyb3IgbWVzc2FnZSBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMS4xLjVcbiAgICAgKi9cbiAgICBvZmZlclhSU2Vzc2lvbihcbiAgICAgICAgbW9kZTogWFJTZXNzaW9uTW9kZSxcbiAgICAgICAgZmVhdHVyZXM6IHN0cmluZ1tdLFxuICAgICAgICBvcHRpb25hbEZlYXR1cmVzOiBzdHJpbmdbXSA9IFtdXG4gICAgKTogUHJvbWlzZTxYUlNlc3Npb24+IHtcbiAgICAgICAgcmV0dXJuIGNoZWNrWFJTdXBwb3J0KCkudGhlbigoKSA9PlxuICAgICAgICAgICAgdGhpcy4jd2FzbS53ZWJ4cl9vZmZlclNlc3Npb24obW9kZSwgZmVhdHVyZXMsIG9wdGlvbmFsRmVhdHVyZXMpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV3JhcCBhbiBvYmplY3QgSUQgdXNpbmcge0BsaW5rIE9iamVjdH0uXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIG1ldGhvZCBwZXJmb3JtcyBjYWNoaW5nIGFuZCB3aWxsIHJldHVybiB0aGUgc2FtZVxuICAgICAqIGluc3RhbmNlIG9uIHN1YnNlcXVlbnQgY2FsbHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb2JqZWN0SWQgSUQgb2YgdGhlIG9iamVjdCB0byBjcmVhdGUuXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIFNjZW5lI3dyYXB9IGluc3RlYWQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgb2JqZWN0XG4gICAgICovXG4gICAgd3JhcE9iamVjdChvYmplY3RJZDogbnVtYmVyKTogT2JqZWN0M0Qge1xuICAgICAgICByZXR1cm4gdGhpcy5zY2VuZS53cmFwKG9iamVjdElkKTtcbiAgICB9XG5cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuICdlbmdpbmUnO1xuICAgIH1cblxuICAgIC8qIFB1YmxpYyBHZXR0ZXJzICYgU2V0dGVyICovXG5cbiAgICAvKiogQ3VycmVudGx5IGFjdGl2ZSBzY2VuZS4gKi9cbiAgICBnZXQgc2NlbmUoKTogU2NlbmUge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2NlbmU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV2ViQXNzZW1ibHkgYnJpZGdlLlxuICAgICAqXG4gICAgICogQG5vdGUgVXNlIHdpdGggY2FyZS4gVGhpcyBvYmplY3QgaXMgdXNlZCB0byBjb21tdW5pY2F0ZVxuICAgICAqIHdpdGggdGhlIFdlYkFzc2VtYmx5IGNvZGUgdGhyb3VnaG91dCB0aGUgYXBpLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGdldCB3YXNtKCk6IFdBU00ge1xuICAgICAgICByZXR1cm4gdGhpcy4jd2FzbTtcbiAgICB9XG5cbiAgICAvKiogQ2FudmFzIGVsZW1lbnQgdGhhdCBXb25kZXJsYW5kIEVuZ2luZSByZW5kZXJzIHRvLiAqL1xuICAgIGdldCBjYW52YXMoKTogSFRNTENhbnZhc0VsZW1lbnQge1xuICAgICAgICByZXR1cm4gdGhpcy4jd2FzbS5jYW52YXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3VycmVudCBXZWJYUiBzZXNzaW9uIG9yIGBudWxsYCBpZiBubyBzZXNzaW9uIGFjdGl2ZS5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgWFIuc2Vzc2lvbn0gb24gdGhlIHtAbGluayB4cn1cbiAgICAgKiBvYmplY3QgaW5zdGVhZC5cbiAgICAgKi9cbiAgICBnZXQgeHJTZXNzaW9uKCk6IFhSU2Vzc2lvbiB8IG51bGwge1xuICAgICAgICByZXR1cm4gdGhpcy54cj8uc2Vzc2lvbiA/PyBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEN1cnJlbnQgV2ViWFIgZnJhbWUgb3IgYG51bGxgIGlmIG5vIHNlc3Npb24gYWN0aXZlLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayBYUi5mcmFtZX0gb24gdGhlIHtAbGluayB4cn1cbiAgICAgKiBvYmplY3QgaW5zdGVhZC5cbiAgICAgKi9cbiAgICBnZXQgeHJGcmFtZSgpOiBYUkZyYW1lIHwgbnVsbCB7XG4gICAgICAgIHJldHVybiB0aGlzLnhyPy5mcmFtZSA/PyBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEN1cnJlbnQgV2ViWFIgYmFzZSBsYXllciBvciBgbnVsbGAgaWYgbm8gc2Vzc2lvbiBhY3RpdmUuXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIFhSLmJhc2VMYXllcn0gb24gdGhlIHtAbGluayB4cn1cbiAgICAgKiBvYmplY3QgaW5zdGVhZC5cbiAgICAgKi9cbiAgICBnZXQgeHJCYXNlTGF5ZXIoKTogWFJQcm9qZWN0aW9uTGF5ZXIgfCBudWxsIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueHI/LmJhc2VMYXllciA/PyBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEN1cnJlbnQgV2ViWFIgZnJhbWVidWZmZXIgb3IgYG51bGxgIGlmIG5vIHNlc3Npb24gYWN0aXZlLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayBYUi5mcmFtZWJ1ZmZlcnN9IG9uIHRoZVxuICAgICAqIHtAbGluayB4cn0gb2JqZWN0IGluc3RlYWQuXG4gICAgICovXG4gICAgZ2V0IHhyRnJhbWVidWZmZXIoKTogV2ViR0xGcmFtZWJ1ZmZlciB8IG51bGwge1xuICAgICAgICByZXR1cm4gdGhpcy54cj8uZnJhbWVidWZmZXJzWzBdID8/IG51bGw7XG4gICAgfVxuXG4gICAgLyoqIEZyYW1lYnVmZmVyIHNjYWxlIGZhY3Rvci4gKi9cbiAgICBnZXQgeHJGcmFtZWJ1ZmZlclNjYWxlRmFjdG9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jd2FzbS53ZWJ4cl9mcmFtZWJ1ZmZlclNjYWxlRmFjdG9yO1xuICAgIH1cblxuICAgIHNldCB4ckZyYW1lYnVmZmVyU2NhbGVGYWN0b3IodmFsdWU6IG51bWJlcikge1xuICAgICAgICAodGhpcy4jd2FzbS53ZWJ4cl9mcmFtZWJ1ZmZlclNjYWxlRmFjdG9yIGFzIG51bWJlcikgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKiogUGh5c2ljcyBtYW5hZ2VyLCBvbmx5IGF2YWlsYWJsZSB3aGVuIHBoeXN4IGlzIGVuYWJsZWQgaW4gdGhlIHJ1bnRpbWUuICovXG4gICAgZ2V0IHBoeXNpY3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNwaHlzaWNzO1xuICAgIH1cblxuICAgIC8qKiBUZXh0dXJlIHJlc291cmNlcyAqL1xuICAgIGdldCB0ZXh0dXJlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RleHR1cmVzO1xuICAgIH1cblxuICAgIC8qKiBNYXRlcmlhbCByZXNvdXJjZXMgKi9cbiAgICBnZXQgbWF0ZXJpYWxzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWF0ZXJpYWxzO1xuICAgIH1cblxuICAgIC8qKiBNZXNoIHJlc291cmNlcyAqL1xuICAgIGdldCBtZXNoZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tZXNoZXM7XG4gICAgfVxuXG4gICAgLyoqIE1vcnBoIHRhcmdldCBzZXQgcmVzb3VyY2VzICovXG4gICAgZ2V0IG1vcnBoVGFyZ2V0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21vcnBoVGFyZ2V0cztcbiAgICB9XG5cbiAgICAvKiogRm9udCByZXNvdXJjZXMgKi9cbiAgICBnZXQgZm9udHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mb250cztcbiAgICB9XG5cbiAgICAvKiogR2V0IGFsbCB1bmNvbXByZXNzZWQgaW1hZ2VzLiAqL1xuICAgIGdldCBpbWFnZXMoKTogSW1hZ2VMaWtlW10ge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy53YXNtO1xuICAgICAgICBjb25zdCBtYXggPSB3YXNtLl90ZW1wTWVtU2l6ZSA+PiAxO1xuICAgICAgICBjb25zdCBjb3VudCA9IHdhc20uX3dsX2dldF9pbWFnZXMod2FzbS5fdGVtcE1lbSwgbWF4KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IEFycmF5KGNvdW50KTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHdhc20uX3RlbXBNZW1VaW50MTZbaV07XG4gICAgICAgICAgICByZXN1bHRbaV0gPSB3YXNtLl9pbWFnZXNbaW5kZXhdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJvbWlzZSB0aGF0IHJlc29sdmUgb25jZSBhbGwgdW5jb21wcmVzc2VkIGltYWdlcyBhcmUgbG9hZGVkLlxuICAgICAqXG4gICAgICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIGNhbGxpbmcge0BsaW5rIFdvbmRlcmxhbmRFbmdpbmUuaW1hZ2VzfSwgYW5kIHdyYXBwaW5nIGVhY2hcbiAgICAgKiBgbG9hZGAgbGlzdGVuZXIgaW50byBhIHByb21pc2UuXG4gICAgICovXG4gICAgZ2V0IGltYWdlc1Byb21pc2UoKTogUHJvbWlzZTxJbWFnZUxpa2VbXT4ge1xuICAgICAgICBjb25zdCBwcm9taXNlcyA9IHRoaXMuaW1hZ2VzLm1hcCgoaSkgPT4gb25JbWFnZVJlYWR5KGkpKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBgdHJ1ZWAgaWYgdGhlIHRleHR1cmUgc3RyZWFtaW5nIGlzIGN1cnJlbnRseSBpZGxlLCBpLmUuLFxuICAgICAqIG5vdCBhdHRlbXB0aW5nIHRvIHVwbG9hZCBhbnkgdGV4dHVyZXMuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgZ2V0IGlzVGV4dHVyZVN0cmVhbWluZ0lkbGUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMud2FzbS5fd2xfcmVuZGVyZXJfc3RyZWFtaW5nX2lkbGUoKTtcbiAgICB9XG5cbiAgICAvKlxuICAgICAqIEVuYWJsZSBvciBkaXNhYmxlIHRoZSBtZWNoYW5pc20gdG8gYXV0b21hdGljYWxseSByZXNpemUgdGhlIGNhbnZhcy5cbiAgICAgKlxuICAgICAqIEludGVybmFsbHksIHRoZSBlbmdpbmUgdXNlcyBhIFtSZXNpemVPYnNlcnZlcl0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1Jlc2l6ZU9ic2VydmVyKS5cbiAgICAgKiBDaGFuZ2luZyB0aGUgY2FudmFzIGNzcyB3aWxsIHRodXMgYXV0b21hdGljYWxseSBiZSB0cmFja2VkIGJ5IHRoZSBlbmdpbmUuXG4gICAgICovXG4gICAgc2V0IGF1dG9SZXNpemVDYW52YXMoZmxhZzogYm9vbGVhbikge1xuICAgICAgICBjb25zdCBzdGF0ZSA9ICEhdGhpcy4jcmVzaXplT2JzZXJ2ZXI7XG4gICAgICAgIGlmIChzdGF0ZSA9PT0gZmxhZykgcmV0dXJuO1xuXG4gICAgICAgIGlmICghZmxhZykge1xuICAgICAgICAgICAgdGhpcy4jcmVzaXplT2JzZXJ2ZXI/LnVub2JzZXJ2ZSh0aGlzLmNhbnZhcyk7XG4gICAgICAgICAgICB0aGlzLiNyZXNpemVPYnNlcnZlciA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jcmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKGVudHJpZXMpID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgICAgICAgICAgIGlmIChlbnRyeS50YXJnZXQgPT09IHRoaXMuY2FudmFzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzaXplKGVudHJ5LmNvbnRlbnRSZWN0LndpZHRoLCBlbnRyeS5jb250ZW50UmVjdC5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3Jlc2l6ZU9ic2VydmVyLm9ic2VydmUodGhpcy5jYW52YXMpO1xuICAgIH1cblxuICAgIC8qKiBgdHJ1ZWAgaWYgdGhlIGNhbnZhcyBpcyBhdXRvbWF0aWNhbGx5IHJlc2l6ZWQgYnkgdGhlIGVuZ2luZS4gKi9cbiAgICBnZXQgYXV0b1Jlc2l6ZUNhbnZhcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3Jlc2l6ZU9ic2VydmVyICE9PSBudWxsO1xuICAgIH1cblxuICAgIC8qKiBSZXRyaWV2ZXMgdGhlIHJ1bnRpbWUgdmVyc2lvbi4gKi9cbiAgICBnZXQgcnVudGltZVZlcnNpb24oKTogVmVyc2lvbiB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLiN3YXNtO1xuICAgICAgICB3YXNtLl93bF9hcHBsaWNhdGlvbl92ZXJzaW9uKHdhc20uX3RlbXBNZW0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWFqb3I6IHdhc20uX3RlbXBNZW1VaW50MTZbMF0sXG4gICAgICAgICAgICBtaW5vcjogd2FzbS5fdGVtcE1lbVVpbnQxNlsxXSxcbiAgICAgICAgICAgIHBhdGNoOiB3YXNtLl90ZW1wTWVtVWludDE2WzJdLFxuICAgICAgICAgICAgcmM6IHdhc20uX3RlbXBNZW1VaW50MTZbM10sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqIEVuZ2luZSB7QGxpbmsgTG9nZ2VyfS4gVXNlIGl0IHRvIHR1cm4gb24gLyBvZmYgbG9nZ2luZy4gKi9cbiAgICBnZXQgbG9nKCk6IExvZ2dlciB7XG4gICAgICAgIHJldHVybiB0aGlzLiN3YXNtLl9sb2c7XG4gICAgfVxuXG4gICAgLyogSW50ZXJuYWwtT25seSBNZXRob2RzICovXG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIHRoZSBlbmdpbmUuXG4gICAgICpcbiAgICAgKiBAbm90ZSBTaG91bGQgYmUgY2FsbGVkIGFmdGVyIHRoZSBXZWJBc3NlbWJseSBpcyBmdWxseSBsb2FkZWQuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX2luaXQoKSB7XG4gICAgICAgIC8qIEZvcmNlIHRoZSByZWZlcmVuY2Ugc3BhY2UgdG8gJ2xvY2FsJy8ndmlld2VyJyBmb3IgdGhlIGxvYWRpbmcgc2NyZWVuXG4gICAgICAgICAqIHRvIG1ha2Ugc3VyZSB0aGUgaGVhZCBpbnB1dCBpcyBhdCB0aGUgb3JpZ2luLiBEb2luZyBpdCB0aGlzIHdheSB0b1xuICAgICAgICAgKiBhdm9pZCBhZGRpbmcgSlMgY29tcG9uZW50cyB0byB0aGUgbG9hZGluZyBzY3JlZW4uICovXG4gICAgICAgIGNvbnN0IG9uWFJTdGFydCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI2luaXRpYWxSZWZlcmVuY2VTcGFjZVR5cGUgPSB0aGlzLnhyIS5jdXJyZW50UmVmZXJlbmNlU3BhY2VUeXBlO1xuICAgICAgICAgICAgY29uc3QgbmV3U3BhY2UgPVxuICAgICAgICAgICAgICAgIHRoaXMueHIhLnJlZmVyZW5jZVNwYWNlRm9yVHlwZSgnbG9jYWwnKSA/P1xuICAgICAgICAgICAgICAgIHRoaXMueHIhLnJlZmVyZW5jZVNwYWNlRm9yVHlwZSgndmlld2VyJyk7XG4gICAgICAgICAgICB0aGlzLnhyIS5jdXJyZW50UmVmZXJlbmNlU3BhY2UgPSBuZXdTcGFjZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKiBOb3Qgb25jZSgpIGJlY2F1c2UgdGhlIHVzZXIgY2FuIGVudGVyIGFuZCBleGl0IFhSIHNldmVyYWwgdGltZXNcbiAgICAgICAgICogZHVyaW5nIGEgbG9uZyBsb2FkaW5nIHNjcmVlbiAqL1xuICAgICAgICB0aGlzLm9uWFJTZXNzaW9uU3RhcnQuYWRkKG9uWFJTdGFydCk7XG5cbiAgICAgICAgLyogVGhpcyBpcyBjYWxsZWQgYmVmb3JlIGFsbCBpbml0KCkvc3RhcnQoKS9vbkFjdGl2YXRlKCkgc28gd2UgYXZvaWRcbiAgICAgICAgICogb3ZlcndyaXRpbmcgYSB1c2VyLXNldCByZWZlcmVuY2Ugc3BhY2UgKi9cbiAgICAgICAgdGhpcy5vbkxvYWRpbmdTY3JlZW5FbmQub25jZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uWFJTZXNzaW9uU3RhcnQucmVtb3ZlKG9uWFJTdGFydCk7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy54ciB8fCAhdGhpcy4jaW5pdGlhbFJlZmVyZW5jZVNwYWNlVHlwZSkgcmV0dXJuO1xuXG4gICAgICAgICAgICB0aGlzLnhyLmN1cnJlbnRSZWZlcmVuY2VTcGFjZSA9XG4gICAgICAgICAgICAgICAgdGhpcy54ci5yZWZlcmVuY2VTcGFjZUZvclR5cGUodGhpcy4jaW5pdGlhbFJlZmVyZW5jZVNwYWNlVHlwZSkgPz9cbiAgICAgICAgICAgICAgICB0aGlzLnhyLnJlZmVyZW5jZVNwYWNlRm9yVHlwZSgndmlld2VyJyk7XG4gICAgICAgICAgICB0aGlzLiNpbml0aWFsUmVmZXJlbmNlU3BhY2VUeXBlID0gbnVsbDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyogU2V0dXAgdGhlIGVycm9yIGhhbmRsZXIuIFRoaXMgaXMgdXNlZCB0byB0byBtYW5hZ2UgbmF0aXZlIGVycm9ycy4gKi9cbiAgICAgICAgdGhpcy4jd2FzbS5fd2xfc2V0X2Vycm9yX2NhbGxiYWNrKFxuICAgICAgICAgICAgdGhpcy4jd2FzbS5hZGRGdW5jdGlvbigobWVzc2FnZVB0cjogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHRoaXMuI3dhc20uVVRGOFRvU3RyaW5nKG1lc3NhZ2VQdHIpKTtcbiAgICAgICAgICAgIH0sICd2aScpXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy4jcGh5c2ljcyA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLiN3YXNtLndpdGhQaHlzWCkge1xuICAgICAgICAgICAgLyogU2V0dXAgdGhlIHBoeXNpY3MgY2FsbGJhY2suICovXG4gICAgICAgICAgICBjb25zdCBwaHlzaWNzID0gbmV3IFBoeXNpY3ModGhpcyk7XG4gICAgICAgICAgICB0aGlzLiN3YXNtLl93bF9waHlzeF9zZXRfY29sbGlzaW9uX2NhbGxiYWNrKFxuICAgICAgICAgICAgICAgIHRoaXMuI3dhc20uYWRkRnVuY3Rpb24oXG4gICAgICAgICAgICAgICAgICAgIChhOiBudW1iZXIsIGluZGV4OiBudW1iZXIsIHR5cGU6IG51bWJlciwgYjogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwaHlzeEEgPSB0aGlzLnNjZW5lLl9jb21wb25lbnRzLndyYXBQaHlzeChhKSE7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwaHlzeEIgPSB0aGlzLnNjZW5lLl9jb21wb25lbnRzLndyYXBQaHlzeChiKSE7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBXZSBhc3N1bWUgdGhhdCB0aGUgbWFwIHJldHVybnMgYW4gYXJyYXkuIElmIG5vdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIHRoaXMgaXMgYW4gaW50ZXJuYWwgZW5naW5lIGVycm9yLiAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gdGhpcy5zY2VuZS5fcHhDYWxsYmFja3MuZ2V0KHBoeXN4QS5faWQpITtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gY2FsbGJhY2tzW2luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHR5cGUsIHBoeXN4QiBhcyBQaHlzWENvbXBvbmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICd2aWlpaSdcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhpcy4jcGh5c2ljcyA9IHBoeXNpY3M7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlc2l6ZSh0aGlzLmNhbnZhcy5jbGllbnRXaWR0aCwgdGhpcy5jYW52YXMuY2xpZW50SGVpZ2h0KTtcbiAgICAgICAgdGhpcy5fc2NlbmUgPSB0aGlzLl9yZWxvYWQoMCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzZXQgdGhlIHJ1bnRpbWUgc3RhdGUsIGluY2x1ZGluZzpcbiAgICAgKiAgICAgLSBDb21wb25lbnQgY2FjaGVcbiAgICAgKiAgICAgLSBJbWFnZXNcbiAgICAgKiAgICAgLSBDYWxsYmFja3NcbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfcmVzZXQoKSB7XG4gICAgICAgIHRoaXMud2FzbS5yZXNldCgpO1xuICAgICAgICB0aGlzLl9zY2VuZXMubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5fc2NlbmUgPSB0aGlzLl9yZWxvYWQoMCk7XG4gICAgICAgIHJldHVybiB0aGlzLnN3aXRjaFRvKHRoaXMuX3NjZW5lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYW4gZW1wdHkgc2NlbmUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgbmV3bHkgY3JlYXRlZCBzY2VuZVxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9jcmVhdGVFbXB0eSgpOiBTY2VuZSB7XG4gICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLndhc207XG4gICAgICAgIGNvbnN0IGluZGV4ID0gd2FzbS5fd2xfc2NlbmVfY3JlYXRlX2VtcHR5KCk7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gbmV3IFNjZW5lKHRoaXMsIGluZGV4KTtcbiAgICAgICAgdGhpcy5fc2NlbmVzW2luZGV4XSA9IHNjZW5lO1xuICAgICAgICByZXR1cm4gc2NlbmU7XG4gICAgfVxuXG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBfZGVzdHJveVNjZW5lKGluc3RhbmNlOiBQcmVmYWIpIHtcbiAgICAgICAgY29uc3Qgd2FzbSA9IHRoaXMud2FzbTtcbiAgICAgICAgd2FzbS5fd2xfc2NlbmVfZGVzdHJveShpbnN0YW5jZS5faW5kZXgpO1xuXG4gICAgICAgIGNvbnN0IGluZGV4ID0gaW5zdGFuY2UuX2luZGV4O1xuICAgICAgICAoaW5zdGFuY2UuX2luZGV4IGFzIG51bWJlcikgPSAtMTtcbiAgICAgICAgaWYgKHRoaXMuZXJhc2VQcm90b3R5cGVPbkRlc3Ryb3kpIHtcbiAgICAgICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihpbnN0YW5jZSwgRGVzdHJveWVkUHJlZmFiSW5zdGFuY2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fc2NlbmVzW2luZGV4XSA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVsb2FkIHRoZSBzdGF0ZSBvZiB0aGUgZW5naW5lIHdpdGggYSBuZXcgbWFpbiBzY2VuZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbmRleCBTY2VuZSBpbmRleC5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBwcml2YXRlIF9yZWxvYWQoaW5kZXg6IG51bWJlcikge1xuICAgICAgICBjb25zdCBzY2VuZSA9IG5ldyBTY2VuZSh0aGlzLCBpbmRleCk7XG4gICAgICAgIHRoaXMuX3NjZW5lc1tpbmRleF0gPSBzY2VuZTtcblxuICAgICAgICB0aGlzLl90ZXh0dXJlcyA9IG5ldyBUZXh0dXJlTWFuYWdlcih0aGlzKTtcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWxzID0gbmV3IE1hdGVyaWFsTWFuYWdlcih0aGlzKTtcbiAgICAgICAgdGhpcy5fbWVzaGVzID0gbmV3IE1lc2hNYW5hZ2VyKHRoaXMpO1xuICAgICAgICB0aGlzLl9tb3JwaFRhcmdldHMgPSBuZXcgUmVzb3VyY2VNYW5hZ2VyKHRoaXMsIE1vcnBoVGFyZ2V0cyk7XG4gICAgICAgIHRoaXMuX2ZvbnRzID0gbmV3IFJlc291cmNlTWFuYWdlcih0aGlzLCBGb250KTtcblxuICAgICAgICByZXR1cm4gc2NlbmU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGVscGVyIHRvIGxvYWQgYSBtYWluIHNjZW5lIGZyb20gYW4gYEFycmF5QnVmZmVyYCBvciBgUmVhZGFibGVTdHJlYW1gLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRhdGEgQnVmZmVyIG9yIHN0cmVhbS5cbiAgICAgKiBAcGFyYW0gdXJsIEJhc2UgVVJMLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIEFjdGl2YXRpb24gb3B0aW9ucy5cbiAgICAgKiBAcmV0dXJucyBUaGUgbG9hZGVkIG1haW4gc2NlbmUuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBfbG9hZE1haW5TY2VuZShcbiAgICAgICAgZGF0YTogQXJyYXlCdWZmZXIgfCBSZWFkYWJsZVN0cmVhbTxVaW50OEFycmF5PixcbiAgICAgICAgdXJsOiBzdHJpbmcsXG4gICAgICAgIG9wdGlvbnM6IEFjdGl2YXRlT3B0aW9uc1xuICAgICkge1xuICAgICAgICBjb25zdCB3YXNtID0gdGhpcy4jd2FzbTtcblxuICAgICAgICAvKlxuICAgICAgICAgKiAtIERlYWN0aXZhdGUgY3VycmVudGx5IGFjdGl2ZSBzY2VuZVxuICAgICAgICAgKiAtIERlc3Ryb3kgYWxsIHNjZW5lc1xuICAgICAgICAgKiAtIE1hcmsgYWxsIHJlc291cmNlcyBhcyBkZXN0cm95ZWRcbiAgICAgICAgICogLSBBY3RpdmF0aW9uIG9mIG1haW4gc2NlbmUgdG8gcHJldmVudCB0aGUgcnVudGltZSB0byBiZSBpbiBsaW1ib1xuICAgICAgICAgKi9cblxuICAgICAgICB3YXNtLl93bF9kZWFjdGl2YXRlX2FjdGl2ZVNjZW5lKCk7XG5cbiAgICAgICAgLyogT25seSBkZXN0cm95IGFsbCBzY2VuZSBvbmNlIHRoZSBjdXJyZW50IGFjdGl2ZSBvbmUgaXMgZGlzYWJsZWQgKi9cbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuX3NjZW5lcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgY29uc3Qgc2NlbmUgPSB0aGlzLl9zY2VuZXNbaV07XG4gICAgICAgICAgICBpZiAoc2NlbmUpIHNjZW5lLmRlc3Ryb3koKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIE1hcmsgYWxsIHJlc291cmNlcyBhcyBkZXN0cm95ZWQgKi9cbiAgICAgICAgdGhpcy5fdGV4dHVyZXMuX2NsZWFyKCk7XG4gICAgICAgIHRoaXMuX21hdGVyaWFscy5fY2xlYXIoKTtcbiAgICAgICAgdGhpcy5fbWVzaGVzLl9jbGVhcigpO1xuICAgICAgICB0aGlzLl9tb3JwaFRhcmdldHMuX2NsZWFyKCk7XG5cbiAgICAgICAgbGV0IGluZGV4ID0gLTE7XG4gICAgICAgIGlmICh0aGlzLl9jYW5Vc2VDaHVua0xvYWRpbmcoKSkge1xuICAgICAgICAgICAgY29uc3Qgc3RyZWFtID1cbiAgICAgICAgICAgICAgICBkYXRhIGluc3RhbmNlb2YgUmVhZGFibGVTdHJlYW1cbiAgICAgICAgICAgICAgICAgICAgPyBkYXRhXG4gICAgICAgICAgICAgICAgICAgIDogbmV3IFJlYWRhYmxlU3RyZWFtKG5ldyBBcnJheUJ1ZmZlclNvdXJjZShkYXRhKSk7XG4gICAgICAgICAgICBjb25zdCBzaW5rID0gbmV3IENodW5rZWRTY2VuZUxvYWRTaW5rKHRoaXMsIFNjZW5lVHlwZS5NYWluLCB1cmwpO1xuICAgICAgICAgICAgYXdhaXQgc3RyZWFtLnBpcGVUbyhuZXcgV3JpdGFibGVTdHJlYW0oc2luaykpO1xuICAgICAgICAgICAgaW5kZXggPSBzaW5rLnNjZW5lSW5kZXg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgYnVmZmVyOiBBcnJheUJ1ZmZlcjtcbiAgICAgICAgICAgIGlmIChkYXRhIGluc3RhbmNlb2YgUmVhZGFibGVTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaW5rID0gbmV3IEFycmF5QnVmZmVyU2luaygpO1xuICAgICAgICAgICAgICAgIGF3YWl0IGRhdGEucGlwZVRvKG5ldyBXcml0YWJsZVN0cmVhbShzaW5rKSk7XG4gICAgICAgICAgICAgICAgYnVmZmVyID0gc2luay5hcnJheUJ1ZmZlcjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYnVmZmVyID0gZGF0YTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgcHRyID0gd2FzbS5jb3B5QnVmZmVyVG9IZWFwKGJ1ZmZlcik7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gd2FzbS5fd2xfbG9hZF9tYWluX3NjZW5lKFxuICAgICAgICAgICAgICAgICAgICBwdHIsXG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlci5ieXRlTGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICB3YXNtLnRlbXBVVEY4KHVybClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAvKiBDYXRjaCBjYWxscyB0byBhYm9ydCgpLCBlLmcuIHZpYSBhc3NlcnRzICovXG4gICAgICAgICAgICAgICAgd2FzbS5fZnJlZShwdHIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBsb2FkIG1haW4gc2NlbmUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1haW5TY2VuZSA9IHRoaXMuX3JlbG9hZChpbmRleCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdG9kbygyLjAuMClcbiAgICAgICAgICpcbiAgICAgICAgICogQmFja3dhcmQgY29tcGF0aWJpbGl0eTogV2UgbmVlZCB0byBzZXQgdGhpcyBpbnN0YW5jZSByZWZlcmVuY2Ugb24gdGhlXG4gICAgICAgICAqIGVuZ2luZSAqKmJlZm9yZSoqIGNvbXBvbmVudCBjcmVhdGlvbiBvY2N1cnMsIHNpbmNlIHVzZXJzIGhhdmUgYmVlbiBhY2Nlc3NpbmdcbiAgICAgICAgICogdGhlIHNjZW5lIHdpdGggYHRoaXMuZW5naW5lLnNjZW5lYCBpbiBgaW5pdCgpYC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX3ByZWFjdGl2YXRlKG1haW5TY2VuZSk7XG4gICAgICAgIG1haW5TY2VuZS5faW5pdGlhbGl6ZSgpO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuc3dpdGNoVG8obWFpblNjZW5lLCBvcHRpb25zKTtcblxuICAgICAgICByZXR1cm4gbWFpblNjZW5lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhlbHBlciB0byBsb2FkIHByZWZhYiBhbmQgYWN0aXZhdGFibGUgc2NlbmUgZnJvbSBhbiBgQXJyYXlCdWZmZXJgLlxuICAgICAqXG4gICAgICogQHBhcmFtIFByZWZhYkNsYXNzIFNjZW5lIGNvbnN0cnVjdG9yLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIExvYWRpbmcgb3B0aW9ucy5cbiAgICAgKiBAcmV0dXJucyBUaGUgbG9hZGVkIHByZWZhYi5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBwcml2YXRlIF9sb2FkU2NlbmVGcm9tQnVmZmVyPFQgZXh0ZW5kcyBQcmVmYWI+KFxuICAgICAgICBQcmVmYWJDbGFzczogQ29uc3RydWN0b3I8VD4sXG4gICAgICAgIG9wdGlvbnM6IEluTWVtb3J5TG9hZE9wdGlvbnNcbiAgICApIHtcbiAgICAgICAgY29uc3Qge2J1ZmZlciwgdXJsfSA9IFNjZW5lLnZhbGlkYXRlQnVmZmVyT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgbGV0IGluZGV4ID0gLTE7XG5cbiAgICAgICAgaWYgKHRoaXMuX2NhblVzZUNodW5rTG9hZGluZygpKSB7XG4gICAgICAgICAgICBjb25zdCBzaW5rID0gbmV3IENodW5rZWRTY2VuZUxvYWRTaW5rKHRoaXMsIFNjZW5lVHlwZS5QcmVmYWIsIHVybCk7XG4gICAgICAgICAgICBzaW5rLndyaXRlKG5ldyBVaW50OEFycmF5KGJ1ZmZlcikpO1xuICAgICAgICAgICAgc2luay5jbG9zZSgpO1xuICAgICAgICAgICAgaW5kZXggPSBzaW5rLnNjZW5lSW5kZXg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB3YXNtID0gdGhpcy53YXNtO1xuICAgICAgICAgICAgY29uc3QgcHRyID0gd2FzbS5jb3B5QnVmZmVyVG9IZWFwKGJ1ZmZlcik7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSB3YXNtLl93bF9zY2VuZV9jcmVhdGUocHRyLCBidWZmZXIuYnl0ZUxlbmd0aCwgd2FzbS50ZW1wVVRGOCh1cmwpKTtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgLyogQ2F0Y2ggY2FsbHMgdG8gYWJvcnQoKSwgZS5nLiB2aWEgYXNzZXJ0cyAqL1xuICAgICAgICAgICAgICAgIHdhc20uX2ZyZWUocHRyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFpbmRleCkgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gcGFyc2Ugc2NlbmUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIFRoZSBzY2VuZSB3YXMgc3VjY2Vzc2Z1bGx5IGxvYWRlZCBvbiB0aGUgd2FzbSBzaWRlLCB3ZSBuZWVkIHRvXG4gICAgICAgICAqIGFkZCBpdCB0byB0aGUgc2NlbmUgY2FjaGUsIHNpbmNlIHRoZSB3YXNtIG1pZ2h0IHJlYWQgaXQuICovXG4gICAgICAgIGNvbnN0IHNjZW5lID0gbmV3IFByZWZhYkNsYXNzKHRoaXMsIGluZGV4KTtcbiAgICAgICAgdGhpcy5fc2NlbmVzW2luZGV4XSA9IHNjZW5lO1xuICAgICAgICByZXR1cm4gc2NlbmU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGVscGVyIHRvIGxvYWQgcHJlZmFiIGFuZCBhY3RpdmF0YWJsZSBzY2VuZSBmcm9tIGEgYFJlYWRhYmxlU3RyZWFtYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBQcmVmYWJDbGFzcyBTY2VuZSBjb25zdHJ1Y3Rvci5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBMb2FkaW5nIG9wdGlvbnMuXG4gICAgICogQHJldHVybnMgVGhlIGxvYWRlZCBwcmVmYWIuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBfbG9hZFNjZW5lRnJvbVN0cmVhbTxUIGV4dGVuZHMgUHJlZmFiPihcbiAgICAgICAgUHJlZmFiQ2xhc3M6IENvbnN0cnVjdG9yPFQ+LFxuICAgICAgICBvcHRpb25zOiBTdHJlYW1Mb2FkT3B0aW9uc1xuICAgICkge1xuICAgICAgICBjb25zdCB7c3RyZWFtLCB1cmx9ID0gU2NlbmUudmFsaWRhdGVTdHJlYW1PcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICBsZXQgaW5kZXggPSAtMTtcblxuICAgICAgICBpZiAodGhpcy5fY2FuVXNlQ2h1bmtMb2FkaW5nKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNpbmsgPSBuZXcgQ2h1bmtlZFNjZW5lTG9hZFNpbmsodGhpcywgU2NlbmVUeXBlLlByZWZhYiwgdXJsKTtcbiAgICAgICAgICAgIGF3YWl0IHN0cmVhbS5waXBlVG8obmV3IFdyaXRhYmxlU3RyZWFtKHNpbmspKTtcbiAgICAgICAgICAgIGluZGV4ID0gc2luay5zY2VuZUluZGV4O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgc2luayA9IG5ldyBBcnJheUJ1ZmZlclNpbmsoKTtcbiAgICAgICAgICAgIGF3YWl0IHN0cmVhbS5waXBlVG8obmV3IFdyaXRhYmxlU3RyZWFtKHNpbmspKTtcbiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IHNpbmsuYXJyYXlCdWZmZXI7XG5cbiAgICAgICAgICAgIGNvbnN0IHdhc20gPSB0aGlzLndhc207XG4gICAgICAgICAgICBjb25zdCBwdHIgPSB3YXNtLmNvcHlCdWZmZXJUb0hlYXAoYnVmZmVyKTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IHdhc20uX3dsX3NjZW5lX2NyZWF0ZShwdHIsIGJ1ZmZlci5ieXRlTGVuZ3RoLCB3YXNtLnRlbXBVVEY4KHVybCkpO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAvKiBDYXRjaCBjYWxscyB0byBhYm9ydCgpLCBlLmcuIHZpYSBhc3NlcnRzICovXG4gICAgICAgICAgICAgICAgd2FzbS5fZnJlZShwdHIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWluZGV4KSB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSBzY2VuZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogVGhlIHNjZW5lIHdhcyBzdWNjZXNzZnVsbHkgbG9hZGVkIG9uIHRoZSB3YXNtIHNpZGUsIHdlIG5lZWQgdG9cbiAgICAgICAgICogYWRkIGl0IHRvIHRoZSBzY2VuZSBjYWNoZSwgc2luY2UgdGhlIHdhc20gbWlnaHQgcmVhZCBpdC4gKi9cbiAgICAgICAgY29uc3Qgc2NlbmUgPSBuZXcgUHJlZmFiQ2xhc3ModGhpcywgaW5kZXgpO1xuICAgICAgICB0aGlzLl9zY2VuZXNbaW5kZXhdID0gc2NlbmU7XG4gICAgICAgIHJldHVybiBzY2VuZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIGxvYWRlZCBzY2VuZSBpcyBhIHByZWZhYiBhbmQgdGhyb3dzIGFuIGVycm9yIGlmIG5vdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzY2VuZSBUaGUgbG9hZGVkIHNjZW5lXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcHJpdmF0ZSBfdmFsaWRhdGVMb2FkZWRQcmVmYWIoc2NlbmU6IFByZWZhYikge1xuICAgICAgICBpZiAodGhpcy53YXNtLl93bF9zY2VuZV9hY3RpdmF0YWJsZShzY2VuZS5faW5kZXgpKSB7XG4gICAgICAgICAgICB0aGlzLndhc20uX3dsX3NjZW5lX2Rlc3Ryb3koc2NlbmUuX2luZGV4KTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICAnRmlsZSBpcyBub3QgYSBwcmVmYWIuIFRvIGxvYWQgYSBzY2VuZSwgdXNlIGxvYWRTY2VuZSgpIGluc3RlYWQnXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHRoZSBsb2FkZWQgc2NlbmUgaXMgYSBzY2VuZSAoYW5kIG5vdCBhIHByZWZhYikgYW5kIHRocm93cyBhblxuICAgICAqIGVycm9yIGlmIG5vdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzY2VuZSBUaGUgbG9hZGVkIHNjZW5lXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcHJpdmF0ZSBfdmFsaWRhdGVMb2FkZWRTY2VuZShzY2VuZTogU2NlbmUpIHtcbiAgICAgICAgaWYgKCF0aGlzLndhc20uX3dsX3NjZW5lX2FjdGl2YXRhYmxlKHNjZW5lLl9pbmRleCkpIHtcbiAgICAgICAgICAgIHRoaXMud2FzbS5fd2xfc2NlbmVfZGVzdHJveShzY2VuZS5faW5kZXgpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgICdGaWxlIGlzIG5vdCBhIHNjZW5lLiBUbyBsb2FkIGEgcHJlZmFiLCB1c2UgbG9hZFByZWZhYigpIGluc3RlYWQnXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV2hldGhlciBzY2VuZSBsb2FkaW5nIGNhbiBhbmQgc2hvdWxkIGdvIHRocm91Z2hcbiAgICAgKiB7QGxpbmsgQ2h1bmtlZFNjZW5lTG9hZFNpbmt9LlxuICAgICAqXG4gICAgICogRGVwZW5kcyBvbiB0aGUgcnVudGltZSB2ZXJzaW9uIGFuZCB7QGxpbmsgX3VzZUNodW5rTG9hZGluZ30gb3ZlcnJpZGUuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX2NhblVzZUNodW5rTG9hZGluZygpIHtcbiAgICAgICAgLyoqIEB0b2RvIFJlbW92ZSBub24tY2h1bmsgQVBJIGluIDEuMy4wIGVudGlyZWx5ICovXG4gICAgICAgIC8qIENodW5rIEFQSSBnb3QgYWRkZWQgaW4gcnVudGltZSAxLjIuMSAqL1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgdGhpcy5fdXNlQ2h1bmtMb2FkaW5nICYmXG4gICAgICAgICAgICAodGhpcy5ydW50aW1lVmVyc2lvbi5taW5vciA+IDIgfHwgdGhpcy5ydW50aW1lVmVyc2lvbi5wYXRjaCA+PSAxKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgc2NlbmUgZGF0YSBvbiB0aGUgZW5naW5lLCBiZWZvcmUgdGhlIGFjdGl2YXRpb24gb2NjdXJzLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHByaXZhdGUgX3ByZWFjdGl2YXRlKHNjZW5lOiBTY2VuZSkge1xuICAgICAgICB0aGlzLl9zY2VuZSA9IHNjZW5lO1xuICAgICAgICAvKiBVcGRhdGUgdGhlIGN1cnJlbnQgYWN0aXZlIHNjZW5lIGluIHRoZSBwaHlzeCBtYW5hZ2VyICovXG4gICAgICAgIGlmICh0aGlzLnBoeXNpY3MpICh0aGlzLnBoeXNpY3MuX2hpdC5fc2NlbmUgYXMgU2NlbmUpID0gc2NlbmU7XG4gICAgfVxufVxuIiwgIi8qKlxuICogQXNzZXJ0IHRoYXQgdGhlIGdpdmVuIGJpdCBpbmRleCBpcyBsZXNzIHRoYW4gMzIuXG4gKlxuICogQHBhcmFtIGJpdCBUaGUgYml0IHRvIHRlc3QuXG4gKi9cbmZ1bmN0aW9uIGFzc2VydChiaXQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmIChiaXQgPj0gMzIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBCaXRTZXQuZW5hYmxlKCk6IFZhbHVlICR7Yml0fSBpcyBvdmVyIDMxYCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFN0b3JlcyBhIGJpdCBwYXR0ZXJuIHRvIHF1aWNrbHkgdGVzdCBpZiBhbiBpbmRleCBpcyBlbmFibGVkIC8gZGlzYWJsZWQuXG4gKlxuICogVGhpcyBjbGFzcyBjYW4gc3RvcmUgdXAgdG8gKiozMioqIGRpZmZlcmVudCB2YWx1ZXMgaW4gdGhlIHJhbmdlIFswOyAzMV0uXG4gKlxuICogIyMjIyBVc2FnZVxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCBiaXRzZXQgPSBuZXcgQml0U2V0KCk7XG4gKiBiaXRzZXQuZW5hYmxlKDEwKTsgLy8gRW5hYmxlIGJpdCBhdCBpbmRleCBgMTBgLlxuICogY29uc29sZS5sb2coYml0c2V0LmVuYWJsZWQoMTApKTsgLy8gUHJpbnRzICd0cnVlJy5cbiAqIGBgYFxuICpcbiAqICMjIyMgVHlwZVNjcmlwdFxuICpcbiAqIFRoZSBzZXQgY2FuIGJlIHR5cGVkIG92ZXIgYW4gZW51bTpcbiAqXG4gKiBgYGB0c1xuICogZW51bSBUYWcge1xuICogICAgIEZpcnN0ID0gMCxcbiAqICAgICBTZWNvbmQgPSAxLFxuICogfVxuICpcbiAqIGNvbnN0IGJpdHNldCA9IG5ldyBCaXRTZXQ8VGFnPigpO1xuICogYml0c2V0LmVuYWJsZShUYWcuRmlyc3QpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBCaXRTZXQ8VCBleHRlbmRzIG51bWJlciA9IG51bWJlcj4ge1xuICAgIC8qKiBFbmFibGVkIGJpdHMuIEBoaWRkZW4gKi9cbiAgICBwcml2YXRlIF9iaXRzOiBudW1iZXIgPSAwO1xuXG4gICAgLyoqXG4gICAgICogRW5hYmxlIHRoZSBiaXQgYXQgdGhlIGdpdmVuIGluZGV4LlxuICAgICAqXG4gICAgICogQHBhcmFtIGJpdHMgQSBzcHJlYWQgb2YgYWxsIHRoZSBiaXRzIHRvIGVuYWJsZS5cbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgZW5hYmxlKC4uLmJpdHM6IFRbXSkge1xuICAgICAgICBmb3IgKGNvbnN0IGJpdCBvZiBiaXRzKSB7XG4gICAgICAgICAgICBhc3NlcnQoYml0KTtcbiAgICAgICAgICAgIC8qIENhc3RzIHRoZSByZXN1bHQgdG8gYW4gdW5zaWduZWQgaW50ZWdlciAqL1xuICAgICAgICAgICAgdGhpcy5fYml0cyB8PSAoMSA8PCBiaXQpID4+PiAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVuYWJsZSBhbGwgYml0cy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICBlbmFibGVBbGwoKSB7XG4gICAgICAgIHRoaXMuX2JpdHMgPSB+MDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzYWJsZSB0aGUgYml0IGF0IHRoZSBnaXZlbiBpbmRleC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiaXRzIEEgc3ByZWFkIG9mIGFsbCB0aGUgYml0cyB0byBkaXNhYmxlLlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICBkaXNhYmxlKC4uLmJpdHM6IFRbXSkge1xuICAgICAgICBmb3IgKGNvbnN0IGJpdCBvZiBiaXRzKSB7XG4gICAgICAgICAgICBhc3NlcnQoYml0KTtcbiAgICAgICAgICAgIC8qIENhc3RzIHRoZSByZXN1bHQgdG8gYW4gdW5zaWduZWQgaW50ZWdlciAqL1xuICAgICAgICAgICAgdGhpcy5fYml0cyAmPSB+KCgxIDw8IGJpdCkgPj4+IDApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERpc2FibGUgYWxsIGJpdHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgZGlzYWJsZUFsbCgpIHtcbiAgICAgICAgdGhpcy5fYml0cyA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrZXIgd2hldGhlciB0aGUgYml0IGlzIHNldCBvciBub3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYml0IFRoZSBiaXQgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMgYHRydWVgIGlmIGl0J3MgZW5hYmxlZCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICovXG4gICAgZW5hYmxlZChiaXQ6IFQpIHtcbiAgICAgICAgcmV0dXJuICEhKHRoaXMuX2JpdHMgJiAoKDEgPDwgYml0KSA+Pj4gMCkpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQge0JpdFNldH0gZnJvbSAnLi9iaXRzZXQuanMnO1xuXG4vKipcbiAqIExvZ2dpbmcgbGV2ZWxzIHN1cHBvcnRlZCBieSB7QGxpbmsgTG9nZ2VyfS5cbiAqL1xuZXhwb3J0IGVudW0gTG9nTGV2ZWwge1xuICAgIEluZm8gPSAwLFxuICAgIFdhcm4gPSAxLFxuICAgIEVycm9yID0gMixcbn1cblxuLyoqXG4gKiBMb2dnaW5nIHdyYXBwZXIuXG4gKlxuICogVGhpcyBpcyB1c2VkIHRvIGFsbG93IHR1cm5pbmcgb24vb2ZmOlxuICogICAgIC0gYGNvbnNvbGUubG9nYFxuICogICAgIC0gYGNvbnNvbGUud2FybmBcbiAqICAgICAtIGBjb25zb2xlLmVycm9yYFxuICpcbiAqICMjIyMgVXNhZ2VcbiAqXG4gKiBgYGBqc1xuICogaW1wb3J0IHtMb2dnZXIsIExvZ0xldmVsLCBMb2dUYWd9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4gKlxuICogLy8gQ3JlYXRlIGEgbG9nZ2VyIHdpdGggb25seSB0aGUgXCJlcnJvclwiIGFuZCBcIndhcm5cIiBsZXZlbHMgYWN0aXZhdGVkXG4gKiBjb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKExvZ0xldmVsLldhcm4sIExvZ0xldmVsLkVycm9yKTtcbiAqXG4gKiAvLyBPbmx5IHRoZSBcImVycm9yXCIgYW5kIFwid2FyblwiIGxldmVscyBhcmUgYWN0aXZhdGVkLFxuICogLy8gdGhpcyBtZXNzYWdlIGlzbid0IGxvZ2dlZC5cbiAqIGxvZ2dlci5pbmZvKExvZ1RhZy5Db21wb25lbnQsICdUaGlzIG1lc3NhZ2UgaXMgc2h1c2hlZCcpXG4gKlxuICogLy8gUHJpbnRzICdIZWxsbyBFcnJvciEnXG4gKiBsb2dnZXIuZXJyb3IoTG9nVGFnLkNvbXBvbmVudCwgJ0hlbGxvIEVycm9yIScpO1xuICpcbiAqIC8vIFByaW50cyAnSGVsbG8gV2FybmluZyEnXG4gKiBsb2dnZXIud2FybihMb2dUYWcuQ29tcG9uZW50LCAnSGVsbG8gV2FybmluZyEnKTtcbiAqIGBgYFxuICpcbiAqIFRoZSBsb2cgbGV2ZWxzIGNhbiBiZSBjaGFuZ2VkIGF0IGFueXRpbWUgdXNpbmcgdGhlIHtAbGluayBCaXRTZXR9IGFwaTpcbiAqXG4gKiBgYGBqc1xuICogLy8gRW5hYmxlIHRoZSBcImluZm9cIiBsZXZlbFxuICogbG9nZ2VyLmxldmVscy5lbmFibGUoTG9nTGV2ZWwuSW5mbyk7XG4gKiAqIC8vIERpc2FibGUgdGhlIFwid2FyblwiIGxldmVsXG4gKiBsb2dnZXIubGV2ZWxzLmRpc2FibGUoTG9nTGV2ZWwuV2Fybik7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIFRhZ3NcbiAqXG4gKiBJbiBhZGRpdGlvbiwgdGhlIGxvZ2dlciBzdXBwb3J0cyB0YWdnaW5nIG1lc3NhZ2VzOlxuICpcbiAqIGBgYGpzXG4gKiBpbXBvcnQge0xvZ2dlciwgTG9nTGV2ZWwsIExvZ1RhZ30gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbiAqXG4gKiBjb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKExvZ0xldmVsLkluZm8pO1xuICpcbiAqIGxvZ2dlci50YWdzLmRpc2FibGVBbGwoKTtcbiAqXG4gKiAvLyBBbGwgdGFncyBhcmUgb2ZmLCB0aGlzIG1lc3NhZ2UgaXNuJ3QgbG9nZ2VkXG4gKiBsb2dnZXIuaW5mbyhMb2dUYWcuQ29tcG9uZW50LCAnVGhpcyBtZXNzYWdlIGlzIHNodXNoZWQnKTtcbiAqXG4gKiBsb2dnZXIudGFncy5lbmFibGUoTG9nVGFnLkNvbXBvbmVudCk7XG4gKiBsb2dnZXIuaW5mbyhMb2dUYWcuQ29tcG9uZW50LCAnSGVsbG8gV29ybGQhJykgLy8gUHJpbnRzICdIZWxsbyBXb3JsZCEnXG4gKiBgYGBcbiAqXG4gKiBUaGUgdGFnZ2luZyBzeXN0ZW0gZ2l2ZXMgYW5vdGhlciBsYXllciBvZiBjb250cm9sIHRvIGVuYWJsZSAvIGRpc2FibGVcbiAqIHNvbWUgc3BlY2lmaWMgbG9ncy5cbiAqL1xuZXhwb3J0IGNsYXNzIExvZ2dlciB7XG4gICAgLyoqXG4gICAgICogQml0c2V0IG9mIGVuYWJsZWQgbGV2ZWxzLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGxldmVsczogQml0U2V0PExvZ0xldmVsPiA9IG5ldyBCaXRTZXQoKTtcblxuICAgIC8qKlxuICAgICAqIEJpdHNldCBvZiBlbmFibGVkIHRhZ3MuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgdGFnczogQml0U2V0ID0gbmV3IEJpdFNldCgpLmVuYWJsZUFsbCgpO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IGxvZ2dlciBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBsZXZlbHMgRGVmYXVsdCBzZXQgb2YgbGV2ZWxzIHRvIGVuYWJsZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvciguLi5sZXZlbHM6IExvZ0xldmVsW10pIHtcbiAgICAgICAgdGhpcy5sZXZlbHMuZW5hYmxlKC4uLmxldmVscyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9nIHRoZSBtZXNzYWdlKHMpIHVzaW5nIGBjb25zb2xlLmxvZ2AuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGFnIFRhZyByZXByZXNlbnRlZCBieSBhIHBvc2l0aXZlIGludGVnZXIuXG4gICAgICogQHBhcmFtIG1zZyBBIHNwcmVhZCBvZiBtZXNzYWdlIHRvIGxvZy5cbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgaW5mbyh0YWc6IG51bWJlciwgLi4ubXNnOiB1bmtub3duW10pOiB0aGlzIHtcbiAgICAgICAgaWYgKHRoaXMubGV2ZWxzLmVuYWJsZWQoTG9nTGV2ZWwuSW5mbykgJiYgdGhpcy50YWdzLmVuYWJsZWQodGFnKSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coLi4ubXNnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2cgdGhlIG1lc3NhZ2UocykgdXNpbmcgYGNvbnNvbGUud2FybmAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGFnIFRhZyByZXByZXNlbnRlZCBieSBhIHBvc2l0aXZlIGludGVnZXIuXG4gICAgICogQHBhcmFtIG1zZyBBIHNwcmVhZCBvZiBtZXNzYWdlIHRvIGxvZy5cbiAgICAgKiBAcmV0dXJucyBSZWZlcmVuY2UgdG8gc2VsZiAoZm9yIG1ldGhvZCBjaGFpbmluZykuXG4gICAgICovXG4gICAgd2Fybih0YWc6IG51bWJlciwgLi4ubXNnOiB1bmtub3duW10pOiB0aGlzIHtcbiAgICAgICAgaWYgKHRoaXMubGV2ZWxzLmVuYWJsZWQoTG9nTGV2ZWwuV2FybikgJiYgdGhpcy50YWdzLmVuYWJsZWQodGFnKSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKC4uLm1zZyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9nIHRoZSBtZXNzYWdlKHMpIHVzaW5nIGBjb25zb2xlLmVycm9yYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0YWcgVGFnIHJlcHJlc2VudGVkIGJ5IGEgcG9zaXRpdmUgaW50ZWdlci5cbiAgICAgKiBAcGFyYW0gbXNnIEEgc3ByZWFkIG9mIG1lc3NhZ2UgdG8gbG9nLlxuICAgICAqIEByZXR1cm5zIFJlZmVyZW5jZSB0byBzZWxmIChmb3IgbWV0aG9kIGNoYWluaW5nKS5cbiAgICAgKi9cbiAgICBlcnJvcih0YWc6IG51bWJlciwgLi4ubXNnOiB1bmtub3duW10pOiB0aGlzIHtcbiAgICAgICAgaWYgKHRoaXMubGV2ZWxzLmVuYWJsZWQoTG9nTGV2ZWwuRXJyb3IpICYmIHRoaXMudGFncy5lbmFibGVkKHRhZykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoLi4ubXNnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG4iLCAiLypcbiAqIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxuICpcbiAqIENvcHlyaWdodCAoYykgMjAxNC0yMDE2IFBhdHJpY2sgR2Fuc3RlcmVyIDxwYXJvZ2FAcGFyb2dhLmNvbT5cbiAqIENvcHlyaWdodCAoYykgMjAyMC0yMDIzIEFhcm9uIEh1Z2dpbnMgPGFodWdnaW5zQGFhcm9uaHVnZ2lucy5jb20+XG4gKiBDb3B5cmlnaHQgKGMpIDIwMjQgV29uZGVybGFuZCBHbWJIIDxjb250YWN0QHdvbmRlcmxhbmRlbmdpbmUuY29tPlxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2ZcbiAqIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW5cbiAqIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG9cbiAqIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mXG4gKiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sXG4gKiBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGxcbiAqIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1NcbiAqIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUlxuICogQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSXG4gKiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTlxuICogQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG5jb25zdCBrQ2JvclRhZ0JpZ251bSA9IDI7XG5jb25zdCBrQ2JvclRhZ05lZ2F0aXZlQmlnbnVtID0gMztcbi8qIFJGQyA4NzQ2IFRhZyB2YWx1ZXMgZm9yIHR5cGVkIGxpdHRsZS1lbmRpYW4gYXJyYXlzICovXG5jb25zdCBrQ2JvclRhZ1VpbnQ4ID0gNjQ7XG5jb25zdCBrQ2JvclRhZ1VpbnQxNiA9IDY5O1xuY29uc3Qga0Nib3JUYWdVaW50MzIgPSA3MDtcbmNvbnN0IGtDYm9yVGFnVWludDY0ID0gNzE7XG5jb25zdCBrQ2JvclRhZ0ludDggPSA3MjtcbmNvbnN0IGtDYm9yVGFnSW50MTYgPSA3NztcbmNvbnN0IGtDYm9yVGFnSW50MzIgPSA3ODtcbmNvbnN0IGtDYm9yVGFnSW50NjQgPSA3OTtcbmNvbnN0IGtDYm9yVGFnRmxvYXQzMiA9IDg1O1xuY29uc3Qga0Nib3JUYWdGbG9hdDY0ID0gODY7XG5cbi8qKlxuICogV2hldGhlciBrZXkvdmFsdWUgZGljdGlvbmFyaWVzIHNob3VsZCBiZSBkZWNvZGVkIGFzIG9iamVjdHMgb3IgYXNcbiAqIGBNYXA8SywgVj5gLiBUaGUgbGF0dGVyIGlzIHVzZWZ1bCBpZiBub24tc3RyaW5nIGtleXMgb3IgaXRlcmF0aW5nIGluXG4gKiBpbnNlcnRpb24gb3JkZXIgYXJlIHJlcXVpcmVkLlxuICovXG5leHBvcnQgdHlwZSBEaWN0aW9uYXJ5T3B0aW9uID0gJ29iamVjdCcgfCAnbWFwJztcblxuLyoqIE9wdGlvbnMgZm9yIHRoZSBkZWNvZGVyLiAqL1xuZXhwb3J0IGludGVyZmFjZSBPcHRpb25zIHtcbiAgICAvKiogVGhlIGRpY3Rpb25hcnkgdHlwZSB0byB1c2UuIERlZmF1bHRzIHRvIGBvYmplY3RgLiAqL1xuICAgIGRpY3Rpb25hcnk/OiBEaWN0aW9uYXJ5T3B0aW9uO1xufVxuXG4vKiogQSBmdW5jdGlvbiB0byBtb2RpZnkgdGFnZ2VkIHZhbHVlcyB3aGljaCBhcmUgZW5jb3VudGVyZWQgZHVyaW5nIGRlY29kaW5nLiAqL1xuZXhwb3J0IHR5cGUgVGFnZ2VyID0gKHRhZzogbnVtYmVyIHwgYmlnaW50LCB2YWx1ZTogYW55KSA9PiBhbnk7XG5cbi8qKlxuICogQ29udmVydHMgYSBDb25jaXNlIEJpbmFyeSBPYmplY3QgUmVwcmVzZW50YXRpb24gKENCT1IpIGJ1ZmZlciBpbnRvIGFuIG9iamVjdC5cbiAqXG4gKiBgYGBqc1xuICogY29uc3QgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoWzB4YTIsIDB4MDEsIDB4MDIsIDB4MDMsIDB4MDRdKS5idWZmZXI7XG4gKiBjb25zdCBkZWNvZGVkID0gZGVjb2RlKGJ1ZmZlcik7XG4gKiBjb25zb2xlLmxvZyhkZWNvZGVkKTsgLy8geyBcIjFcIjogMiwgXCIzXCI6IDQgfVxuICogYGBgXG4gKlxuICogQ0JPUiB2YWx1ZXMgY2FuIGJlIHdyYXBwZWQgaW4gYSBudW1lcmljIHRhZy4gVG8gaGFuZGxlIGFuZCBwb3NzaWJseVxuICogdHJhbnNmb3JtIHRhZ2dlZCB2YWx1ZXMsIHBhc3MgYSB0YWdnZXIgZnVuY3Rpb246XG4gKlxuICogYGBganNcbiAqIGNvbnN0IGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KFtcbiAqICAgMHhhMSwgMHg2MywgMHg3NSwgMHg3MiwgMHg2YywgMHhkOCwgMHgyMCwgMHg3MCxcbiAqICAgMHg2OCwgMHg3NCwgMHg3NCwgMHg3MCwgMHgzYSwgMHgyZiwgMHgyZiwgMHg3MyxcbiAqICAgMHg2OSwgMHg3NCwgMHg2NSwgMHgyZSwgMHg2MywgMHg2ZiwgMHg2ZCwgMHgyZlxuICogXSk7XG4gKiBjb25zdCBkZWNvZGVkID0gZGVjb2RlKGJ1ZmZlciwgKHRhZywgdmFsdWUpID0+IHtcbiAqICAgICBpZiAodGFnID09PSAzMikgcmV0dXJuIG5ldyBVUkwodmFsdWUpO1xuICogICAgIHJldHVybiB2YWx1ZTtcbiAqIH0pO1xuICogY29uc29sZS5sb2coZGVjb2RlZCk7IC8vIHsgdXJsOiBVUkwgeyBocmVmOiBcImh0dHA6Ly9zaXRlLmNvbS9cIiB9IH1cbiAqIGBgYFxuICpcbiAqIERlY29kZWQgYmFzaWMgdHlwZXMgZ2VuZXJhbGx5IG1hdGNoIHRoZSBlcXVpdmFsZW50IEphdmFTY3JpcHQgdHlwZXMuIEJ5dGVcbiAqIHN0cmluZ3MgYXJlIGRlY29kZWQgdG8gVWludDhBcnJheS5cbiAqXG4gKiBUYWdnZWQgdmFsdWVzIGFyZSBsZWZ0IGFzLWlzLCB3aXRoIHRoZSBmb2xsb3dpbmcgZXhjZXB0aW9uczpcbiAqIC0gQmlnbnVtIHZhbHVlcyAoYnl0ZSBzdHJpbmdzIHdpdGggdGFnIDIgb3IgMykgYXJlIGRlY29kZWQgdG8gQmlnSW50XG4gKiAtIExpdHRsZS1lbmRpYW4gdmVyc2lvbnMgb2YgdHlwZWQgYXJyYXlzIGFzIGRlZmluZWQgaW4gUkZDIDg3NDYgYXJlIGRlY29kZWRcbiAqICAgdG8gSmF2YVNjcmlwdCB0eXBlZCBhcnJheXNcbiAqXG4gKiBAcGFyYW0gZGF0YSBBIHZhbGlkIENCT1IgYnVmZmVyLlxuICogQHBhcmFtIHRhZ2dlciBPcHRpb25hbCBjYWxsYmFjayBmb3IgdHJhbnNmb3JtYXRpb24gb2YgdGFnZ2VkIHZhbHVlcy5cbiAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgZm9yIGRlY29kaW5nIGJlaGF2aW9yLlxuICogQHJldHVybnMgVGhlIENCT1IgYnVmZmVyIGNvbnZlcnRlZCB0byBhIEphdmFTY3JpcHQgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGRlY29kZTxUID0gYW55PihcbiAgICBkYXRhOiBVaW50OEFycmF5LFxuICAgIHRhZ2dlcjogVGFnZ2VyID0gKF8sIHZhbHVlKSA9PiB2YWx1ZSxcbiAgICBvcHRpb25zOiBPcHRpb25zID0ge31cbik6IFQge1xuICAgIGNvbnN0IHtkaWN0aW9uYXJ5ID0gJ29iamVjdCd9ID0gb3B0aW9ucztcbiAgICBjb25zdCBkYXRhVmlldyA9IG5ldyBEYXRhVmlldyhkYXRhLmJ1ZmZlciwgZGF0YS5ieXRlT2Zmc2V0LCBkYXRhLmJ5dGVMZW5ndGgpO1xuICAgIGxldCBvZmZzZXQgPSAwO1xuXG4gICAgZnVuY3Rpb24gY29tbWl0UmVhZDxUPihsZW5ndGg6IG51bWJlciwgdmFsdWU6IFQpOiBUIHtcbiAgICAgICAgb2Zmc2V0ICs9IGxlbmd0aDtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZWFkQXJyYXlCdWZmZXIobGVuZ3RoOiBudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIGNvbW1pdFJlYWQobGVuZ3RoLCBkYXRhLnN1YmFycmF5KG9mZnNldCwgb2Zmc2V0ICsgbGVuZ3RoKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlYWRGbG9hdDE2KCkge1xuICAgICAgICBjb25zdCBQT1dfMl8yNCA9IDUuOTYwNDY0NDc3NTM5MDYzZS04O1xuXG4gICAgICAgIGNvbnN0IHRlbXBBcnJheUJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcig0KTtcbiAgICAgICAgY29uc3QgdGVtcERhdGFWaWV3ID0gbmV3IERhdGFWaWV3KHRlbXBBcnJheUJ1ZmZlcik7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gcmVhZFVpbnQxNigpO1xuXG4gICAgICAgIGNvbnN0IHNpZ24gPSB2YWx1ZSAmIDB4ODAwMDtcbiAgICAgICAgbGV0IGV4cG9uZW50ID0gdmFsdWUgJiAweDdjMDA7XG4gICAgICAgIGNvbnN0IGZyYWN0aW9uID0gdmFsdWUgJiAweDAzZmY7XG5cbiAgICAgICAgaWYgKGV4cG9uZW50ID09PSAweDdjMDApIGV4cG9uZW50ID0gMHhmZiA8PCAxMDtcbiAgICAgICAgZWxzZSBpZiAoZXhwb25lbnQgIT09IDApIGV4cG9uZW50ICs9ICgxMjcgLSAxNSkgPDwgMTA7XG4gICAgICAgIGVsc2UgaWYgKGZyYWN0aW9uICE9PSAwKSByZXR1cm4gKHNpZ24gPyAtMSA6IDEpICogZnJhY3Rpb24gKiBQT1dfMl8yNDtcblxuICAgICAgICB0ZW1wRGF0YVZpZXcuc2V0VWludDMyKDAsIChzaWduIDw8IDE2KSB8IChleHBvbmVudCA8PCAxMykgfCAoZnJhY3Rpb24gPDwgMTMpKTtcbiAgICAgICAgcmV0dXJuIHRlbXBEYXRhVmlldy5nZXRGbG9hdDMyKDApO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZWFkRmxvYXQzMigpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gY29tbWl0UmVhZCg0LCBkYXRhVmlldy5nZXRGbG9hdDMyKG9mZnNldCkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZWFkRmxvYXQ2NCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gY29tbWl0UmVhZCg4LCBkYXRhVmlldy5nZXRGbG9hdDY0KG9mZnNldCkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZWFkVWludDgoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIGNvbW1pdFJlYWQoMSwgZGF0YVtvZmZzZXRdKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVhZFVpbnQxNigpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gY29tbWl0UmVhZCgyLCBkYXRhVmlldy5nZXRVaW50MTYob2Zmc2V0KSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlYWRVaW50MzIoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIGNvbW1pdFJlYWQoNCwgZGF0YVZpZXcuZ2V0VWludDMyKG9mZnNldCkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZWFkVWludDY0KCk6IGJpZ2ludCB7XG4gICAgICAgIHJldHVybiBjb21taXRSZWFkKDgsIGRhdGFWaWV3LmdldEJpZ1VpbnQ2NChvZmZzZXQpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVhZEJyZWFrKCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoZGF0YVtvZmZzZXRdICE9PSAweGZmKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIG9mZnNldCArPSAxO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVhZExlbmd0aChhZGRpdGlvbmFsSW5mb3JtYXRpb246IG51bWJlcik6IG51bWJlciB8IGJpZ2ludCB7XG4gICAgICAgIGlmIChhZGRpdGlvbmFsSW5mb3JtYXRpb24gPCAyNCkgcmV0dXJuIGFkZGl0aW9uYWxJbmZvcm1hdGlvbjtcbiAgICAgICAgaWYgKGFkZGl0aW9uYWxJbmZvcm1hdGlvbiA9PT0gMjQpIHJldHVybiByZWFkVWludDgoKTtcbiAgICAgICAgaWYgKGFkZGl0aW9uYWxJbmZvcm1hdGlvbiA9PT0gMjUpIHJldHVybiByZWFkVWludDE2KCk7XG4gICAgICAgIGlmIChhZGRpdGlvbmFsSW5mb3JtYXRpb24gPT09IDI2KSByZXR1cm4gcmVhZFVpbnQzMigpO1xuICAgICAgICBpZiAoYWRkaXRpb25hbEluZm9ybWF0aW9uID09PSAyNykge1xuICAgICAgICAgICAgY29uc3QgaW50ZWdlciA9IHJlYWRVaW50NjQoKTtcbiAgICAgICAgICAgIGlmIChpbnRlZ2VyIDw9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSKSByZXR1cm4gTnVtYmVyKGludGVnZXIpO1xuICAgICAgICAgICAgcmV0dXJuIGludGVnZXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFkZGl0aW9uYWxJbmZvcm1hdGlvbiA9PT0gMzEpIHJldHVybiAtMTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDQk9SRXJyb3I6IEludmFsaWQgbGVuZ3RoIGVuY29kaW5nJyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlYWRJbmRlZmluaXRlU3RyaW5nTGVuZ3RoKG1ham9yVHlwZTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgY29uc3QgaW5pdGlhbEJ5dGUgPSByZWFkVWludDgoKTtcbiAgICAgICAgaWYgKGluaXRpYWxCeXRlID09PSAweGZmKSByZXR1cm4gLTE7XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IHJlYWRMZW5ndGgoaW5pdGlhbEJ5dGUgJiAweDFmKTtcbiAgICAgICAgaWYgKGxlbmd0aCA8IDAgfHwgaW5pdGlhbEJ5dGUgPj4gNSAhPT0gbWFqb3JUeXBlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NCT1JFcnJvcjogSW52YWxpZCBpbmRlZmluaXRlIGxlbmd0aCBlbGVtZW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE51bWJlcihsZW5ndGgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhcHBlbmRVdGYxNkRhdGEodXRmMTZkYXRhOiBudW1iZXJbXSwgbGVuZ3RoOiBudW1iZXIpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgbGV0IHZhbHVlID0gcmVhZFVpbnQ4KCk7XG4gICAgICAgICAgICBpZiAodmFsdWUgJiAweDgwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhlMCkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9ICgodmFsdWUgJiAweDFmKSA8PCA2KSB8IChyZWFkVWludDgoKSAmIDB4M2YpO1xuICAgICAgICAgICAgICAgICAgICBsZW5ndGggLT0gMTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlIDwgMHhmMCkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAoKHZhbHVlICYgMHgwZikgPDwgMTIpIHxcbiAgICAgICAgICAgICAgICAgICAgICAgICgocmVhZFVpbnQ4KCkgJiAweDNmKSA8PCA2KSB8XG4gICAgICAgICAgICAgICAgICAgICAgICAocmVhZFVpbnQ4KCkgJiAweDNmKTtcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoIC09IDI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPVxuICAgICAgICAgICAgICAgICAgICAgICAgKCh2YWx1ZSAmIDB4MDcpIDw8IDE4KSB8XG4gICAgICAgICAgICAgICAgICAgICAgICAoKHJlYWRVaW50OCgpICYgMHgzZikgPDwgMTIpIHxcbiAgICAgICAgICAgICAgICAgICAgICAgICgocmVhZFVpbnQ4KCkgJiAweDNmKSA8PCA2KSB8XG4gICAgICAgICAgICAgICAgICAgICAgICAocmVhZFVpbnQ4KCkgJiAweDNmKTtcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoIC09IDM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodmFsdWUgPCAweDEwMDAwKSB7XG4gICAgICAgICAgICAgICAgdXRmMTZkYXRhLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSAtPSAweDEwMDAwO1xuICAgICAgICAgICAgICAgIHV0ZjE2ZGF0YS5wdXNoKDB4ZDgwMCB8ICh2YWx1ZSA+PiAxMCkpO1xuICAgICAgICAgICAgICAgIHV0ZjE2ZGF0YS5wdXNoKDB4ZGMwMCB8ICh2YWx1ZSAmIDB4M2ZmKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWNvZGVJdGVtKCk6IGFueSB7XG4gICAgICAgIGNvbnN0IGluaXRpYWxCeXRlID0gcmVhZFVpbnQ4KCk7XG4gICAgICAgIGNvbnN0IG1ham9yVHlwZSA9IGluaXRpYWxCeXRlID4+IDU7XG4gICAgICAgIGNvbnN0IGFkZGl0aW9uYWxJbmZvcm1hdGlvbiA9IGluaXRpYWxCeXRlICYgMHgxZjtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGxldCBsZW5ndGg7XG5cbiAgICAgICAgaWYgKG1ham9yVHlwZSA9PT0gNykge1xuICAgICAgICAgICAgc3dpdGNoIChhZGRpdGlvbmFsSW5mb3JtYXRpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDI1OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZEZsb2F0MTYoKTtcbiAgICAgICAgICAgICAgICBjYXNlIDI2OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZEZsb2F0MzIoKTtcbiAgICAgICAgICAgICAgICBjYXNlIDI3OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZEZsb2F0NjQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxlbmd0aCA9IHJlYWRMZW5ndGgoYWRkaXRpb25hbEluZm9ybWF0aW9uKTtcbiAgICAgICAgaWYgKGxlbmd0aCA8IDAgJiYgKG1ham9yVHlwZSA8IDIgfHwgNiA8IG1ham9yVHlwZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ0JPUkVycm9yOiBJbnZhbGlkIGxlbmd0aCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3dpdGNoIChtYWpvclR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbGVuZ3RoO1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbGVuZ3RoID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTEgLSBsZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAtMW4gLSBsZW5ndGg7XG4gICAgICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICAgICAgICBpZiAobGVuZ3RoIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZnVsbEFycmF5TGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKChsZW5ndGggPSByZWFkSW5kZWZpbml0ZVN0cmluZ0xlbmd0aChtYWpvclR5cGUpKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmdWxsQXJyYXlMZW5ndGggKz0gbGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMucHVzaChyZWFkQXJyYXlCdWZmZXIobGVuZ3RoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZnVsbEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoZnVsbEFycmF5TGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZ1bGxBcnJheU9mZnNldCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVsbEFycmF5LnNldChlbGVtZW50c1tpXSwgZnVsbEFycmF5T2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGxBcnJheU9mZnNldCArPSBlbGVtZW50c1tpXS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bGxBcnJheTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRBcnJheUJ1ZmZlcihsZW5ndGggYXMgbnVtYmVyKS5zbGljZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgICAgICAgLyogQ2FuJ3QgdXNlIFRleHREZWNvZGVyLmRlY29kZSgpIGJlY2F1c2Ugbm90IGFsbCBicm93c2Vyc1xuICAgICAgICAgICAgICAgICAqIHN1cHBvcnQgY2FsbGluZyBpdCB3aXRoIGFuIHVuZGVybHlpbmcgU2hhcmVkQXJyYXlCdWZmZXIgeWV0LlxuICAgICAgICAgICAgICAgICAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vd2hhdHdnL2VuY29kaW5nL2lzc3Vlcy8xNzIgKi9cbiAgICAgICAgICAgICAgICAvKiogQHRvZG8gUmUtZXZhbHVhdGUgYnJvd3NlciBzdXBwb3J0ICovXG4gICAgICAgICAgICAgICAgY29uc3QgdXRmMTZkYXRhOiBudW1iZXJbXSA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChsZW5ndGggPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICgobGVuZ3RoID0gcmVhZEluZGVmaW5pdGVTdHJpbmdMZW5ndGgobWFqb3JUeXBlKSkgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kVXRmMTZEYXRhKHV0ZjE2ZGF0YSwgbGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZFV0ZjE2RGF0YSh1dGYxNmRhdGEsIGxlbmd0aCBhcyBudW1iZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgc3RyaW5nID0gJyc7XG4gICAgICAgICAgICAgICAgY29uc3QgREVDT0RFX0NIVU5LX1NJWkUgPSA4MTkyO1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB1dGYxNmRhdGEubGVuZ3RoOyBpICs9IERFQ09ERV9DSFVOS19TSVpFKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjE2ZGF0YS5zbGljZShpLCBpICsgREVDT0RFX0NIVU5LX1NJWkUpXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIDQ6IHtcbiAgICAgICAgICAgICAgICBsZXQgcmV0QXJyYXk7XG4gICAgICAgICAgICAgICAgaWYgKGxlbmd0aCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0QXJyYXkgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCFyZWFkQnJlYWsoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0QXJyYXkucHVzaChkZWNvZGVJdGVtKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0QXJyYXkgPSBuZXcgQXJyYXkobGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXRBcnJheVtpXSA9IGRlY29kZUl0ZW0oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0QXJyYXk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIDU6IHtcbiAgICAgICAgICAgICAgICBpZiAoZGljdGlvbmFyeSA9PT0gJ21hcCcpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV0TWFwID0gbmV3IE1hcDxhbnksIGFueT4oKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aCB8fCAobGVuZ3RoIDwgMCAmJiAhcmVhZEJyZWFrKCkpOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGRlY29kZUl0ZW0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXRNYXAuaGFzKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NCT1JFcnJvcjogRHVwbGljYXRlIGtleSBlbmNvdW50ZXJlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0TWFwLnNldChrZXksIGRlY29kZUl0ZW0oKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldE1hcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcmV0T2JqZWN0OiBhbnkgPSB7fTtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoIHx8IChsZW5ndGggPCAwICYmICFyZWFkQnJlYWsoKSk7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBkZWNvZGVJdGVtKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocmV0T2JqZWN0LCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NCT1JFcnJvcjogRHVwbGljYXRlIGtleSBlbmNvdW50ZXJlZCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldE9iamVjdFtrZXldID0gZGVjb2RlSXRlbSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0T2JqZWN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSA2OiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBkZWNvZGVJdGVtKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFnID0gbGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2Uga0Nib3JUYWdCaWdudW06XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGtDYm9yVGFnTmVnYXRpdmVCaWdudW06XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG51bSA9IHZhbHVlLnJlZHVjZSgoYWNjLCBuKSA9PiAoYWNjIDw8IDhuKSArIEJpZ0ludChuKSwgMG4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YWcgPT0ga0Nib3JUYWdOZWdhdGl2ZUJpZ251bSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW0gPSAtMW4gLSBudW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudW07XG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBMaXR0bGUtZW5kaWFuIHR5cGVkIGFycmF5cyAoUkZDIDg3NDYpICovXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGtDYm9yVGFnVWludDg6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBrQ2JvclRhZ0ludDg6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnQ4QXJyYXkodmFsdWUuYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2Uga0Nib3JUYWdVaW50MTY6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50MTZBcnJheSh2YWx1ZS5idWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBrQ2JvclRhZ0ludDE2OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSW50MTZBcnJheSh2YWx1ZS5idWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBrQ2JvclRhZ1VpbnQzMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQzMkFycmF5KHZhbHVlLmJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGtDYm9yVGFnSW50MzI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnQzMkFycmF5KHZhbHVlLmJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGtDYm9yVGFnVWludDY0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQmlnVWludDY0QXJyYXkodmFsdWUuYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2Uga0Nib3JUYWdJbnQ2NDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEJpZ0ludDY0QXJyYXkodmFsdWUuYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2Uga0Nib3JUYWdGbG9hdDMyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KHZhbHVlLmJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGtDYm9yVGFnRmxvYXQ2NDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZsb2F0NjRBcnJheSh2YWx1ZS5idWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0YWdnZXIodGFnLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgc3dpdGNoIChsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDIyOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjM6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxlbmd0aCBhcyBudW1iZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcmV0ID0gZGVjb2RlSXRlbSgpO1xuICAgIGlmIChvZmZzZXQgIT09IGRhdGEuYnl0ZUxlbmd0aCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NCT1JFcnJvcjogUmVtYWluaW5nIGJ5dGVzJyk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cbmV4cG9ydCBjb25zdCBDQk9SID0ge1xuICAgIGRlY29kZSxcbn07XG4iLCAiaW1wb3J0IHtMb2dUYWcsIFByZWZhYn0gZnJvbSAnLi9pbmRleC5qcyc7XG5pbXBvcnQge1dvbmRlcmxhbmRFbmdpbmV9IGZyb20gJy4vZW5naW5lLmpzJztcbmltcG9ydCB7Q29tcG9uZW50UHJvcGVydHksIFR5cGUsIGRlZmF1bHRQcm9wZXJ0eUNsb25lcn0gZnJvbSAnLi9wcm9wZXJ0eS5qcyc7XG5pbXBvcnQge1JldGFpbkVtaXR0ZXJ9IGZyb20gJy4vdXRpbHMvZXZlbnQuanMnO1xuaW1wb3J0IHtDQk9SfSBmcm9tICcuL3V0aWxzL2Nib3IuanMnO1xuaW1wb3J0IHtMb2dnZXJ9IGZyb20gJy4vdXRpbHMvbG9nZ2VyLmpzJztcbmltcG9ydCB7XG4gICAgaW5oZXJpdFByb3BlcnRpZXMsXG4gICAgQ29tcG9uZW50LFxuICAgIENvbXBvbmVudENvbnN0cnVjdG9yLFxuICAgIENvbXBvbmVudFByb3RvLFxuICAgIEJyb2tlbkNvbXBvbmVudCxcbiAgICBYUixcbiAgICBBbmltYXRpb25Db21wb25lbnQsXG59IGZyb20gJy4vd29uZGVybGFuZC5qcyc7XG5pbXBvcnQge0ltYWdlTGlrZX0gZnJvbSAnLi90eXBlcy5qcyc7XG5pbXBvcnQge1NjZW5lfSBmcm9tICcuL3NjZW5lLmpzJztcblxudHlwZSBYUlJlcXVlc3RTZXNzaW9uRnVuY3Rpb24gPSAoXG4gICAgbW9kZTogWFJTZXNzaW9uTW9kZSxcbiAgICBmZWF0dXJlczogc3RyaW5nW10sXG4gICAgb3B0aW9uYWxGZWF0dXJlczogc3RyaW5nW11cbikgPT4gUHJvbWlzZTxYUlNlc3Npb24+O1xuXG4vKipcbiAqIERlZmF1bHQgY29tcG9uZW50IHBhcmFtZXRlciB2YWx1ZSBwZXIgdHlwZS5cbiAqL1xuY29uc3QgX2NvbXBvbmVudERlZmF1bHRzID0gbmV3IE1hcDxUeXBlLCBhbnk+KFtcbiAgICBbVHlwZS5Cb29sLCBmYWxzZV0sXG4gICAgW1R5cGUuSW50LCAwXSxcbiAgICBbVHlwZS5GbG9hdCwgMC4wXSxcbiAgICBbVHlwZS5TdHJpbmcsICcnXSxcbiAgICBbVHlwZS5FbnVtLCB1bmRlZmluZWRdLFxuICAgIFtUeXBlLk9iamVjdCwgbnVsbF0sXG4gICAgW1R5cGUuTWVzaCwgbnVsbF0sXG4gICAgW1R5cGUuVGV4dHVyZSwgbnVsbF0sXG4gICAgW1R5cGUuTWF0ZXJpYWwsIG51bGxdLFxuICAgIFtUeXBlLkFuaW1hdGlvbiwgbnVsbF0sXG4gICAgW1R5cGUuU2tpbiwgbnVsbF0sXG4gICAgW1R5cGUuQ29sb3IsIEZsb2F0MzJBcnJheS5mcm9tKFswLjAsIDAuMCwgMC4wLCAxLjBdKV0sXG4gICAgW1R5cGUuVmVjdG9yMiwgRmxvYXQzMkFycmF5LmZyb20oWzAuMCwgMC4wXSldLFxuICAgIFtUeXBlLlZlY3RvcjMsIEZsb2F0MzJBcnJheS5mcm9tKFswLjAsIDAuMCwgMC4wXSldLFxuICAgIFtUeXBlLlZlY3RvcjQsIEZsb2F0MzJBcnJheS5mcm9tKFswLjAsIDAuMCwgMC4wLCAwLjBdKV0sXG5dKTtcblxuLyoqXG4gKiBTZXR1cCB0aGUgZGVmYXVsdHMgdmFsdWUgb2YgdGhlIHByb3BlcnRpZXMgb24gYSBnaXZlblxuICogY29tcG9uZW50IGNsYXNzLlxuICpcbiAqIEBwYXJhbSBjdG9yIFRoZSBjb21wb25lbnQgY2xhc3NcbiAqL1xuZnVuY3Rpb24gX3NldHVwRGVmYXVsdHMoY3RvcjogQ29tcG9uZW50Q29uc3RydWN0b3IpIHtcbiAgICBmb3IgKGNvbnN0IG5hbWUgaW4gY3Rvci5Qcm9wZXJ0aWVzKSB7XG4gICAgICAgIGNvbnN0IHAgPSBjdG9yLlByb3BlcnRpZXNbbmFtZV07XG5cbiAgICAgICAgaWYgKHAudHlwZSA9PT0gVHlwZS5FbnVtKSB7XG4gICAgICAgICAgICAvKiBFbnVtIGRlZmF1bHQgY2FuIGJlIGEgc3RyaW5nIG9yIGFuIGluZGV4LiBDb252ZXJ0IHRvIGFuZC9vclxuICAgICAgICAgICAgICogc2FuaXR5LWNoZWNrIHRoZSBpbmRleC4gKi9cbiAgICAgICAgICAgIGlmIChwLnZhbHVlcz8ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgLyogRG9uJ3QgdHJ5IHRvIGxvb2sgdXAgdGhlIGRlZmF1bHQgaWYgdGhlIHVzZXIgc3BlY2lmaWVkIGFcbiAgICAgICAgICAgICAgICAgKiBudW1iZXIgb3Igd2UgYWxyZWFkeSBjb252ZXJ0ZWQgdG8gb25lLiAqL1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcC5kZWZhdWx0ICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAvKiBJZiB1bmRlZmluZWQsIG1pc3NpbmcgZWxlbWVudCBvciB3cm9uZyB0eXBlIHRoaXMgcmV0dXJuc1xuICAgICAgICAgICAgICAgICAgICAgKiAtMSB3aGljaCBiZWNvbWVzIDAgYmVsb3cuIFRoaXMgbWF0Y2hlcyBlZGl0b3IgYmVoYXZpb3IuICovXG4gICAgICAgICAgICAgICAgICAgIHAuZGVmYXVsdCA9IHAudmFsdWVzLmluZGV4T2YocC5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHAuZGVmYXVsdCA8IDAgfHwgcC5kZWZhdWx0ID49IHAudmFsdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBwLmRlZmF1bHQgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLyogVGhlcmUncyBubyBpbmRleCB2YWx1ZSB0aGF0IG1ha2VzIHNlbnNlICovXG4gICAgICAgICAgICAgICAgcC5kZWZhdWx0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgKHAudHlwZSA9PT0gVHlwZS5Db2xvciB8fFxuICAgICAgICAgICAgICAgIHAudHlwZSA9PT0gVHlwZS5WZWN0b3IyIHx8XG4gICAgICAgICAgICAgICAgcC50eXBlID09PSBUeXBlLlZlY3RvcjMgfHxcbiAgICAgICAgICAgICAgICBwLnR5cGUgPT09IFR5cGUuVmVjdG9yNCkgJiZcbiAgICAgICAgICAgIEFycmF5LmlzQXJyYXkocC5kZWZhdWx0KVxuICAgICAgICApIHtcbiAgICAgICAgICAgIC8qIERlZmF1bHRzIHByb3ZpZGVkIGJ5IHVzZXIgY29kZSBhcmUgY3VycmVudGx5IGFsd2F5cyBhIHN0YW5kYXJkXG4gICAgICAgICAgICAgKiBhcnJheSwgYnV0IGJlY29tZSBhIHR5cGVkIGFycmF5IG9uIHRoZSBwcm9wZXJ0eSAqL1xuICAgICAgICAgICAgcC5kZWZhdWx0ID0gRmxvYXQzMkFycmF5LmZyb20ocC5kZWZhdWx0KTtcbiAgICAgICAgfSBlbHNlIGlmIChwLmRlZmF1bHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgY2xvbmVyID0gcC5jbG9uZXIgPz8gZGVmYXVsdFByb3BlcnR5Q2xvbmVyO1xuICAgICAgICAgICAgcC5kZWZhdWx0ID0gY2xvbmVyLmNsb25lKHAudHlwZSwgX2NvbXBvbmVudERlZmF1bHRzLmdldChwLnR5cGUpKTtcbiAgICAgICAgfVxuICAgICAgICBjdG9yLnByb3RvdHlwZVtuYW1lXSA9IHAuZGVmYXVsdDtcbiAgICB9XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lcyBhIGZpeGVkIG9yZGVyIGZvciBwcm9wZXJ0eSBhdHRyaWJ1dGVzIHVzZWQgZm9yIGRlc2VyaWFsaXphdGlvbi5cbiAqXG4gKiBAcGFyYW0gY3RvciBUaGUgY29tcG9uZW50IGNsYXNzXG4gKi9cbmZ1bmN0aW9uIF9zZXRQcm9wZXJ0eU9yZGVyKGN0b3I6IENvbXBvbmVudENvbnN0cnVjdG9yKSB7XG4gICAgY3Rvci5fcHJvcGVydHlPcmRlciA9IGN0b3IuaGFzT3duUHJvcGVydHkoJ1Byb3BlcnRpZXMnKVxuICAgICAgICA/IE9iamVjdC5rZXlzKGN0b3IuUHJvcGVydGllcykuc29ydCgpXG4gICAgICAgIDogW107XG59XG5cbi8qKlxuICogTG93LWxldmVsIHdyYXBwZXIgdG8gaW50ZXJhY3Qgd2l0aCB0aGUgV2ViQXNzZW1ibHkgY29kZS5cbiAqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBXQVNNIHtcbiAgICAvKipcbiAgICAgKiBFbXNjcmlwdGVuIHdvcmtlciBmaWVsZC5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICByZWFkb25seSB3b3JrZXI6IHN0cmluZyA9ICcnO1xuXG4gICAgLyoqXG4gICAgICogRW1zY3JpcHRlbiB3YXNtIGZpZWxkLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHdhc206IEFycmF5QnVmZmVyID0gbnVsbCE7XG5cbiAgICAvKipcbiAgICAgKiBFbXNjcmlwdGVuIGNhbnZhcy5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICByZWFkb25seSBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50ID0gbnVsbCE7XG5cbiAgICAvKipcbiAgICAgKiBXZWJHUFUgZGV2aWNlLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHByZWluaXRpYWxpemVkV2ViR1BVRGV2aWNlOiBhbnkgPSBudWxsO1xuXG4gICAgLyoqIEN1cnJlbnQgV2ViWFIgICovXG5cbiAgICAvKipcbiAgICAgKiBFbXNjcmlwdGVuIFdlYlhSIHNlc3Npb24uXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICovXG4gICAgcmVhZG9ubHkgd2VieHJfc2Vzc2lvbjogWFJTZXNzaW9uIHwgbnVsbCA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBFbXNjcmlwdGVuIFdlYlhSIHJlcXVlc3Qgc2Vzc2lvbiBjYWxsYmFjay5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICByZWFkb25seSB3ZWJ4cl9yZXF1ZXN0U2Vzc2lvbjogWFJSZXF1ZXN0U2Vzc2lvbkZ1bmN0aW9uID0gbnVsbCE7XG5cbiAgICAvKipcbiAgICAgKiBFbXNjcmlwdGVuIFdlYlhSIG9mZmVyIHNlc3Npb24gY2FsbGJhY2suXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICovXG4gICAgcmVhZG9ubHkgd2VieHJfb2ZmZXJTZXNzaW9uOiBYUlJlcXVlc3RTZXNzaW9uRnVuY3Rpb24gPSBudWxsITtcblxuICAgIC8qKlxuICAgICAqIEVtc2NyaXB0ZW4gV2ViWFIgZnJhbWUuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICovXG4gICAgcmVhZG9ubHkgd2VieHJfZnJhbWU6IFhSRnJhbWUgfCBudWxsID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEVtc2NyaXB0ZW4gY3VycmVudCBXZWJYUiByZWZlcmVuY2Ugc3BhY2UuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICovXG4gICAgd2VieHJfcmVmU3BhY2U6IFhSUmVmZXJlbmNlU3BhY2UgfCBudWxsID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEVtc2NyaXB0ZW4gV2ViWFIgcmVmZXJlbmNlIHNwYWNlcy5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICByZWFkb25seSB3ZWJ4cl9yZWZTcGFjZXM6IFJlY29yZDxcbiAgICAgICAgWFJSZWZlcmVuY2VTcGFjZVR5cGUsXG4gICAgICAgIFhSUmVmZXJlbmNlU3BhY2UgfCB1bmRlZmluZWRcbiAgICA+IHwgbnVsbCA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBFbXNjcmlwdGVuIFdlYlhSIGN1cnJlbnQgcmVmZXJlbmNlIHNwYWNlIHR5cGUuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICovXG4gICAgd2VieHJfcmVmU3BhY2VUeXBlOiBYUlJlZmVyZW5jZVNwYWNlVHlwZSB8IG51bGwgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogRW1zY3JpcHRlbiBXZWJYUiBHTCBwcm9qZWN0aW9uIGxheWVyLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHdlYnhyX2Jhc2VMYXllcjogWFJQcm9qZWN0aW9uTGF5ZXIgfCBudWxsID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEVtc2NyaXB0ZW4gV2ViWFIgZnJhbWVidWZmZXIgc2NhbGUgZmFjdG9yLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqL1xuICAgIHdlYnhyX2ZyYW1lYnVmZmVyU2NhbGVGYWN0b3I6IG51bWJlciA9IDEuMDtcblxuICAgIC8qKlxuICAgICAqIEVtc2NyaXB0ZW4gV2ViWFIgZnJhbWVidWZmZXIocykuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICovXG4gICAgLyogd2VieHJfZmJvIHdpbGwgbm90IGdldCBvdmVyd3JpdHRlbiBpZiB3ZSBhcmUgcmVuZGVyaW5nIHRvIHRoZVxuICAgICAqIGRlZmF1bHQgZnJhbWVidWZmZXIsIGUuZy4sIHdoZW4gdXNpbmcgV2ViWFIgZW11bGF0b3IuICovXG4gICAgcmVhZG9ubHkgd2VieHJfZmJvOiBudW1iZXIgfCBudW1iZXJbXSA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0IGEgV0FTTSBtZW1vcnkgdmlldyB0byBhIEphdmFTY3JpcHQgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHB0ciBQb2ludGVyIHN0YXJ0XG4gICAgICogQHBhcmFtIHB0ckVuZCBQb2ludGVyIGVuZFxuICAgICAqIEByZXR1cm5zIEphdmFTY3JpcHQgc3RyaW5nXG4gICAgICovXG4gICAgVVRGOFZpZXdUb1N0cmluZzogKHB0cjogbnVtYmVyLCBwdHJFbmQ6IG51bWJlcikgPT4gc3RyaW5nO1xuXG4gICAgLyoqIExvZ2dlciBpbnN0YW5jZS4gKi9cbiAgICByZWFkb25seSBfbG9nOiBMb2dnZXIgPSBuZXcgTG9nZ2VyKCk7XG5cbiAgICAvKiogSWYgYHRydWVgLCBsb2dzIHdpbGwgbm90IHNwYW0gdGhlIGNvbnNvbGUgb24gZXJyb3IuICovXG4gICAgX2RlYWN0aXZhdGVfY29tcG9uZW50X29uX2Vycm9yOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAvKiogVGVtcG9yYXJ5IG1lbW9yeSBwb2ludGVyLiAqL1xuICAgIF90ZW1wTWVtOiBudW1iZXIgPSBudWxsITtcbiAgICAvKiogVGVtcG9yYXJ5IG1lbW9yeSBzaXplLiAqL1xuICAgIF90ZW1wTWVtU2l6ZTogbnVtYmVyID0gMDtcbiAgICAvKiogVGVtcG9yYXJ5IGZsb2F0IG1lbW9yeSB2aWV3LiAqL1xuICAgIF90ZW1wTWVtRmxvYXQ6IEZsb2F0MzJBcnJheSA9IG51bGwhO1xuICAgIC8qKiBUZW1wb3JhcnkgaW50IG1lbW9yeSB2aWV3LiAqL1xuICAgIF90ZW1wTWVtSW50OiBJbnQzMkFycmF5ID0gbnVsbCE7XG4gICAgLyoqIFRlbXBvcmFyeSB1aW50OCBtZW1vcnkgdmlldy4gKi9cbiAgICBfdGVtcE1lbVVpbnQ4OiBVaW50OEFycmF5ID0gbnVsbCE7XG4gICAgLyoqIFRlbXBvcmFyeSB1aW50MzIgbWVtb3J5IHZpZXcuICovXG4gICAgX3RlbXBNZW1VaW50MzI6IFVpbnQzMkFycmF5ID0gbnVsbCE7XG4gICAgLyoqIFRlbXBvcmFyeSB1aW50MTYgbWVtb3J5IHZpZXcuICovXG4gICAgX3RlbXBNZW1VaW50MTY6IFVpbnQxNkFycmF5ID0gbnVsbCE7XG5cbiAgICAvKiogTG9hZGluZyBzY3JlZW4gLmJpbiBmaWxlIGRhdGEgKi9cbiAgICBfbG9hZGluZ1NjcmVlbjogQXJyYXlCdWZmZXIgfCBudWxsID0gbnVsbDtcblxuICAgIC8qKiBMaXN0IG9mIGNhbGxiYWNrcyB0cmlnZ2VyZWQgd2hlbiB0aGUgc2NlbmUgaXMgbG9hZGVkLiAqL1xuICAgIHJlYWRvbmx5IF9zY2VuZUxvYWRlZENhbGxiYWNrOiBhbnlbXSA9IFtdO1xuXG4gICAgLyoqIEltYWdlIGNhY2hlLiAqL1xuICAgIF9pbWFnZXM6IChJbWFnZUxpa2UgfCBudWxsKVtdID0gW251bGxdO1xuXG4gICAgLyoqIENvbXBvbmVudCBpbnN0YW5jZXMuICovXG4gICAgcHJpdmF0ZSBfY29tcG9uZW50czogQ29tcG9uZW50W10gPSBudWxsITtcblxuICAgIC8qKiBDb21wb25lbnQgVHlwZSBpbmZvLiAqL1xuICAgIF9jb21wb25lbnRUeXBlczogQ29tcG9uZW50Q29uc3RydWN0b3JbXSA9IFtdO1xuXG4gICAgLyoqIEluZGV4IHBlciBjb21wb25lbnQgdHlwZSBuYW1lLiAqL1xuICAgIF9jb21wb25lbnRUeXBlSW5kaWNlczogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuXG4gICAgLyoqIFdvbmRlcmxhbmQgZW5naW5lIGluc3RhbmNlLiAqL1xuICAgIHByaXZhdGUgX2VuZ2luZTogV29uZGVybGFuZEVuZ2luZSA9IG51bGwhO1xuXG4gICAgLyoqXG4gICAgICogYHRydWVgIGlmIHRoaXMgcnVudGltZSBpcyB1c2luZyBwaHlzeC5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgYXBpIGlzIG1lYW50IHRvIGJlIHVzZWQgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICBwcml2YXRlIF93aXRoUGh5c1g6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIC8qKiBEZWNvZGVyIGZvciBVVEY4IGBBcnJheUJ1ZmZlcmAgdG8gSmF2YVNjcmlwdCBzdHJpbmcuICovXG4gICAgcHJpdmF0ZSByZWFkb25seSBfdXRmOERlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoJ3V0ZjgnKTtcblxuICAgIC8qKlxuICAgICAqIFJlZ2lzdHJhdGlvbiBpbmRleCBvZiB7QGxpbmsgQnJva2VuQ29tcG9uZW50fS5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgdXNlZCB0byByZXR1cm4gZHVtbXkgaW5zdGFuY2VzIHdoZW4gYSBjb21wb25lbnRcbiAgICAgKiBpc24ndCByZWdpc3RlcmVkLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX2Jyb2tlbkNvbXBvbmVudEluZGV4ID0gMDtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgV2ViQXNzZW1ibHkgPD4gQVBJIGJyaWRnZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0aHJlYWRzIGB0cnVlYCBpZiB0aGUgcnVudGltZSB1c2VkIGhhcyB0aHJlYWRzIHN1cHBvcnRcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0aHJlYWRzOiBib29sZWFuKSB7XG4gICAgICAgIGlmICh0aHJlYWRzKSB7XG4gICAgICAgICAgICB0aGlzLlVURjhWaWV3VG9TdHJpbmcgPSAoczogbnVtYmVyLCBlOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXMpIHJldHVybiAnJztcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fdXRmOERlY29kZXIuZGVjb2RlKHRoaXMuSEVBUFU4LnNsaWNlKHMsIGUpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLlVURjhWaWV3VG9TdHJpbmcgPSAoczogbnVtYmVyLCBlOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXMpIHJldHVybiAnJztcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fdXRmOERlY29kZXIuZGVjb2RlKHRoaXMuSEVBUFU4LnN1YmFycmF5KHMsIGUpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAodGhpcy5fYnJva2VuQ29tcG9uZW50SW5kZXggYXMgbnVtYmVyKSA9IHRoaXMuX3JlZ2lzdGVyQ29tcG9uZW50KEJyb2tlbkNvbXBvbmVudCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzZXQgdGhlIGNhY2hlIG9mIHRoZSBsaWJyYXJ5LlxuICAgICAqXG4gICAgICogQG5vdGUgU2hvdWxkIG9ubHkgYmUgY2FsbGVkIHdoZW4gdGVhcmluZyBkb3duIHRoZSBydW50aW1lLlxuICAgICAqL1xuICAgIHJlc2V0KCkge1xuICAgICAgICAvKiBDYWxsZWQgZmlyc3QgdG8gcGVyZm9ybSBjbGVhbnVwLiAqL1xuICAgICAgICB0aGlzLl93bF9yZXNldCgpO1xuXG4gICAgICAgIHRoaXMuX2NvbXBvbmVudHMgPSBudWxsITtcbiAgICAgICAgdGhpcy5faW1hZ2VzLmxlbmd0aCA9IDE7XG4gICAgICAgIHRoaXMuYWxsb2NhdGVUZW1wTWVtb3J5KDEwMjQpO1xuXG4gICAgICAgIHRoaXMuX2NvbXBvbmVudFR5cGVzID0gW107XG4gICAgICAgIHRoaXMuX2NvbXBvbmVudFR5cGVJbmRpY2VzID0ge307XG4gICAgICAgICh0aGlzLl9icm9rZW5Db21wb25lbnRJbmRleCBhcyBudW1iZXIpID0gdGhpcy5fcmVnaXN0ZXJDb21wb25lbnQoQnJva2VuQ29tcG9uZW50KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3Mgd2hldGhlciB0aGUgZ2l2ZW4gY29tcG9uZW50IGlzIHJlZ2lzdGVyZWQgb3Igbm90LlxuICAgICAqXG4gICAgICogQHBhcmFtIGN0b3IgIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgY29tcG9uZW50IHR5cGVuYW1lIChlLmcuLCBgJ2N1cnNvci1jb21wb25lbnQnYCkuXG4gICAgICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBjb21wb25lbnQgaXMgcmVnaXN0ZXJlZCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICovXG4gICAgaXNSZWdpc3RlcmVkKHR5cGU6IHN0cmluZykge1xuICAgICAgICByZXR1cm4gdHlwZSBpbiB0aGlzLl9jb21wb25lbnRUeXBlSW5kaWNlcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlciBhIGxlZ2FjeSBjb21wb25lbnQgaW4gdGhpcyBFbXNjcmlwdGVuIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHR5cGVOYW1lIFRoZSBuYW1lIG9mIHRoZSBjb21wb25lbnQuXG4gICAgICogQHBhcmFtIHBhcmFtcyBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgcGFyYW1ldGVycyAocHJvcGVydGllcykuXG4gICAgICogQHBhcmFtIG9iamVjdCBUaGUgb2JqZWN0J3MgcHJvdG90eXBlLlxuICAgICAqIEByZXR1cm5zIFRoZSByZWdpc3RyYXRpb24gaW5kZXhcbiAgICAgKi9cbiAgICBfcmVnaXN0ZXJDb21wb25lbnRMZWdhY3koXG4gICAgICAgIHR5cGVOYW1lOiBzdHJpbmcsXG4gICAgICAgIHBhcmFtczogUmVjb3JkPHN0cmluZywgQ29tcG9uZW50UHJvcGVydHk+LFxuICAgICAgICBvYmplY3Q6IENvbXBvbmVudFByb3RvXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IGN0b3IgPSBjbGFzcyBDdXN0b21Db21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge307XG4gICAgICAgIGN0b3IuVHlwZU5hbWUgPSB0eXBlTmFtZTtcbiAgICAgICAgY3Rvci5Qcm9wZXJ0aWVzID0gcGFyYW1zO1xuICAgICAgICBPYmplY3QuYXNzaWduKGN0b3IucHJvdG90eXBlLCBvYmplY3QpO1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVnaXN0ZXJDb21wb25lbnQoY3Rvcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXIgYSBjbGFzcyBjb21wb25lbnQgaW4gdGhpcyBFbXNjcmlwdGVuIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGN0b3IgVGhlIGNsYXNzIHRvIHJlZ2lzdGVyLlxuICAgICAqIEByZXR1cm5zIFRoZSByZWdpc3RyYXRpb24gaW5kZXguXG4gICAgICovXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KGN0b3I6IENvbXBvbmVudENvbnN0cnVjdG9yKSB7XG4gICAgICAgIGlmICghY3Rvci5UeXBlTmFtZSkgdGhyb3cgbmV3IEVycm9yKCdubyBuYW1lIHByb3ZpZGVkIGZvciBjb21wb25lbnQuJyk7XG4gICAgICAgIGlmICghY3Rvci5wcm90b3R5cGUuX3RyaWdnZXJJbml0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgYHJlZ2lzdGVyQ29tcG9uZW50KCk6IENvbXBvbmVudCAke2N0b3IuVHlwZU5hbWV9IG11c3QgZXh0ZW5kIENvbXBvbmVudGBcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpbmhlcml0UHJvcGVydGllcyhjdG9yKTtcbiAgICAgICAgX3NldHVwRGVmYXVsdHMoY3Rvcik7XG4gICAgICAgIF9zZXRQcm9wZXJ0eU9yZGVyKGN0b3IpO1xuXG4gICAgICAgIGNvbnN0IHR5cGVJbmRleCA9XG4gICAgICAgICAgICBjdG9yLlR5cGVOYW1lIGluIHRoaXMuX2NvbXBvbmVudFR5cGVJbmRpY2VzXG4gICAgICAgICAgICAgICAgPyB0aGlzLl9jb21wb25lbnRUeXBlSW5kaWNlc1tjdG9yLlR5cGVOYW1lXVxuICAgICAgICAgICAgICAgIDogdGhpcy5fY29tcG9uZW50VHlwZXMubGVuZ3RoO1xuICAgICAgICB0aGlzLl9jb21wb25lbnRUeXBlc1t0eXBlSW5kZXhdID0gY3RvcjtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50VHlwZUluZGljZXNbY3Rvci5UeXBlTmFtZV0gPSB0eXBlSW5kZXg7XG5cbiAgICAgICAgaWYgKGN0b3IgPT09IEJyb2tlbkNvbXBvbmVudCkgcmV0dXJuIHR5cGVJbmRleDtcblxuICAgICAgICB0aGlzLl9sb2cuaW5mbyhcbiAgICAgICAgICAgIExvZ1RhZy5FbmdpbmUsXG4gICAgICAgICAgICAnUmVnaXN0ZXJlZCBjb21wb25lbnQnLFxuICAgICAgICAgICAgY3Rvci5UeXBlTmFtZSxcbiAgICAgICAgICAgIGAoY2xhc3MgJHtjdG9yLm5hbWV9KWAsXG4gICAgICAgICAgICAnd2l0aCBpbmRleCcsXG4gICAgICAgICAgICB0eXBlSW5kZXhcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoY3Rvci5vblJlZ2lzdGVyKSBjdG9yLm9uUmVnaXN0ZXIodGhpcy5fZW5naW5lKTtcblxuICAgICAgICByZXR1cm4gdHlwZUluZGV4O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFsbG9jYXRlIHRoZSByZXF1ZXN0ZWQgYW1vdW50IG9mIHRlbXBvcmFyeSBtZW1vcnlcbiAgICAgKiBpbiB0aGlzIFdBU00gaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2l6ZSBUaGUgbnVtYmVyIG9mIGJ5dGVzIHRvIGFsbG9jYXRlXG4gICAgICovXG4gICAgYWxsb2NhdGVUZW1wTWVtb3J5KHNpemU6IG51bWJlcikge1xuICAgICAgICB0aGlzLl9sb2cuaW5mbyhMb2dUYWcuRW5naW5lLCAnQWxsb2NhdGluZyB0ZW1wIG1lbTonLCBzaXplKTtcbiAgICAgICAgdGhpcy5fdGVtcE1lbVNpemUgPSBzaXplO1xuICAgICAgICBpZiAodGhpcy5fdGVtcE1lbSkgdGhpcy5fZnJlZSh0aGlzLl90ZW1wTWVtKTtcbiAgICAgICAgdGhpcy5fdGVtcE1lbSA9IHRoaXMuX21hbGxvYyh0aGlzLl90ZW1wTWVtU2l6ZSk7XG4gICAgICAgIHRoaXMudXBkYXRlVGVtcE1lbW9yeSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEB0b2RvOiBEZWxldGUgdGhpcyBhbmQgb25seSBrZWVwIGBhbGxvY2F0ZVRlbXBNZW1vcnlgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2l6ZSBOdW1iZXIgb2YgYnl0ZXMgdG8gYWxsb2NhdGVcbiAgICAgKi9cbiAgICByZXF1aXJlVGVtcE1lbShzaXplOiBudW1iZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuX3RlbXBNZW1TaXplID49IHNpemUpIHJldHVybjtcbiAgICAgICAgLyogR3JvdyBpbiAxa2IgaW5jcmVtZW50cyAqL1xuICAgICAgICB0aGlzLmFsbG9jYXRlVGVtcE1lbW9yeShNYXRoLmNlaWwoc2l6ZSAvIDEwMjQpICogMTAyNCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSB0ZW1wb3JhcnkgbWVtb3J5IHZpZXdzLiBUaGlzIG11c3QgYmUgY2FsbGVkIHdoZW5ldmVyIHRoZVxuICAgICAqIHRlbXBvcmFyeSBtZW1vcnkgYWRkcmVzcyBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogQG5vdGUgVGhpcyBhcGkgaXMgbWVhbnQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LlxuICAgICAqL1xuICAgIHVwZGF0ZVRlbXBNZW1vcnkoKSB7XG4gICAgICAgIHRoaXMuX3RlbXBNZW1GbG9hdCA9IG5ldyBGbG9hdDMyQXJyYXkoXG4gICAgICAgICAgICB0aGlzLkhFQVA4LmJ1ZmZlcixcbiAgICAgICAgICAgIHRoaXMuX3RlbXBNZW0sXG4gICAgICAgICAgICB0aGlzLl90ZW1wTWVtU2l6ZSA+PiAyXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuX3RlbXBNZW1JbnQgPSBuZXcgSW50MzJBcnJheShcbiAgICAgICAgICAgIHRoaXMuSEVBUDguYnVmZmVyLFxuICAgICAgICAgICAgdGhpcy5fdGVtcE1lbSxcbiAgICAgICAgICAgIHRoaXMuX3RlbXBNZW1TaXplID4+IDJcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5fdGVtcE1lbVVpbnQzMiA9IG5ldyBVaW50MzJBcnJheShcbiAgICAgICAgICAgIHRoaXMuSEVBUDguYnVmZmVyLFxuICAgICAgICAgICAgdGhpcy5fdGVtcE1lbSxcbiAgICAgICAgICAgIHRoaXMuX3RlbXBNZW1TaXplID4+IDJcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5fdGVtcE1lbVVpbnQxNiA9IG5ldyBVaW50MTZBcnJheShcbiAgICAgICAgICAgIHRoaXMuSEVBUDguYnVmZmVyLFxuICAgICAgICAgICAgdGhpcy5fdGVtcE1lbSxcbiAgICAgICAgICAgIHRoaXMuX3RlbXBNZW1TaXplID4+IDFcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5fdGVtcE1lbVVpbnQ4ID0gbmV3IFVpbnQ4QXJyYXkoXG4gICAgICAgICAgICB0aGlzLkhFQVA4LmJ1ZmZlcixcbiAgICAgICAgICAgIHRoaXMuX3RlbXBNZW0sXG4gICAgICAgICAgICB0aGlzLl90ZW1wTWVtU2l6ZVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSB1aW50OCBidWZmZXIgdmlldyBvbiB0ZW1wb3JhcnkgV0FTTSBtZW1vcnkuXG4gICAgICpcbiAgICAgKiAqKk5vdGUqKjogdGhpcyBtZXRob2QgbWlnaHQgYWxsb2NhdGUgaWYgdGhlIHJlcXVlc3RlZCBtZW1vcnkgaXMgYmlnZ2VyXG4gICAgICogdGhhbiB0aGUgY3VycmVudCB0ZW1wb3JhcnkgbWVtb3J5IGFsbG9jYXRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb3VudCBUaGUgbnVtYmVyIG9mICoqZWxlbWVudHMqKiByZXF1aXJlZFxuICAgICAqIEByZXR1cm5zIEEge0BsaW5rIFR5cGVkQXJyYXl9IG92ZXIgdGhlIFdBU00gbWVtb3J5XG4gICAgICovXG4gICAgZ2V0VGVtcEJ1ZmZlclU4KGNvdW50OiBudW1iZXIpOiBVaW50OEFycmF5IHtcbiAgICAgICAgdGhpcy5yZXF1aXJlVGVtcE1lbShjb3VudCk7XG4gICAgICAgIHJldHVybiB0aGlzLl90ZW1wTWVtVWludDg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHVpbnQxNiBidWZmZXIgdmlldyBvbiB0ZW1wb3JhcnkgV0FTTSBtZW1vcnkuXG4gICAgICpcbiAgICAgKiAqKk5vdGUqKjogdGhpcyBtZXRob2QgbWlnaHQgYWxsb2NhdGUgaWYgdGhlIHJlcXVlc3RlZCBtZW1vcnkgaXMgYmlnZ2VyXG4gICAgICogdGhhbiB0aGUgY3VycmVudCB0ZW1wb3JhcnkgbWVtb3J5IGFsbG9jYXRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb3VudCBUaGUgbnVtYmVyIG9mICoqZWxlbWVudHMqKiByZXF1aXJlZFxuICAgICAqIEByZXR1cm5zIEEge0BsaW5rIFR5cGVkQXJyYXl9IG92ZXIgdGhlIFdBU00gbWVtb3J5XG4gICAgICovXG4gICAgZ2V0VGVtcEJ1ZmZlclUxNihjb3VudDogbnVtYmVyKTogVWludDE2QXJyYXkge1xuICAgICAgICB0aGlzLnJlcXVpcmVUZW1wTWVtKGNvdW50ICogMik7XG4gICAgICAgIHJldHVybiB0aGlzLl90ZW1wTWVtVWludDE2O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSB1aW50MzIgYnVmZmVyIHZpZXcgb24gdGVtcG9yYXJ5IFdBU00gbWVtb3J5LlxuICAgICAqXG4gICAgICogKipOb3RlKio6IHRoaXMgbWV0aG9kIG1pZ2h0IGFsbG9jYXRlIGlmIHRoZSByZXF1ZXN0ZWQgbWVtb3J5IGlzIGJpZ2dlclxuICAgICAqIHRoYW4gdGhlIGN1cnJlbnQgdGVtcG9yYXJ5IG1lbW9yeSBhbGxvY2F0ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY291bnQgVGhlIG51bWJlciBvZiAqKmVsZW1lbnRzKiogcmVxdWlyZWQuXG4gICAgICogQHJldHVybnMgQSB7QGxpbmsgVHlwZWRBcnJheX0gb3ZlciB0aGUgV0FTTSBtZW1vcnkuXG4gICAgICovXG4gICAgZ2V0VGVtcEJ1ZmZlclUzMihjb3VudDogbnVtYmVyKTogVWludDMyQXJyYXkge1xuICAgICAgICB0aGlzLnJlcXVpcmVUZW1wTWVtKGNvdW50ICogNCk7XG4gICAgICAgIHJldHVybiB0aGlzLl90ZW1wTWVtVWludDMyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBpbnQzMiBidWZmZXIgdmlldyBvbiB0ZW1wb3JhcnkgV0FTTSBtZW1vcnkuXG4gICAgICpcbiAgICAgKiAqKk5vdGUqKjogdGhpcyBtZXRob2QgbWlnaHQgYWxsb2NhdGUgaWYgdGhlIHJlcXVlc3RlZCBtZW1vcnkgaXMgYmlnZ2VyXG4gICAgICogdGhhbiB0aGUgY3VycmVudCB0ZW1wb3JhcnkgbWVtb3J5IGFsbG9jYXRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb3VudCBUaGUgbnVtYmVyIG9mICoqZWxlbWVudHMqKiByZXF1aXJlZC5cbiAgICAgKiBAcmV0dXJucyBBIHtAbGluayBUeXBlZEFycmF5fSBvdmVyIHRoZSBXQVNNIG1lbW9yeS5cbiAgICAgKi9cbiAgICBnZXRUZW1wQnVmZmVySTMyKGNvdW50OiBudW1iZXIpOiBJbnQzMkFycmF5IHtcbiAgICAgICAgdGhpcy5yZXF1aXJlVGVtcE1lbShjb3VudCAqIDQpO1xuICAgICAgICByZXR1cm4gdGhpcy5fdGVtcE1lbUludDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgZmxvYXQzMiBidWZmZXIgdmlldyBvbiB0ZW1wb3JhcnkgV0FTTSBtZW1vcnkuXG4gICAgICpcbiAgICAgKiAqKk5vdGUqKjogdGhpcyBtZXRob2QgbWlnaHQgYWxsb2NhdGUgaWYgdGhlIHJlcXVlc3RlZCBtZW1vcnkgaXMgYmlnZ2VyXG4gICAgICogdGhhbiB0aGUgY3VycmVudCB0ZW1wb3JhcnkgbWVtb3J5IGFsbG9jYXRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb3VudCBUaGUgbnVtYmVyIG9mICoqZWxlbWVudHMqKiByZXF1aXJlZC5cbiAgICAgKiBAcmV0dXJucyBBIHtAbGluayBUeXBlZEFycmF5fSBvdmVyIHRoZSBXQVNNIG1lbW9yeS5cbiAgICAgKi9cbiAgICBnZXRUZW1wQnVmZmVyRjMyKGNvdW50OiBudW1iZXIpOiBGbG9hdDMyQXJyYXkge1xuICAgICAgICB0aGlzLnJlcXVpcmVUZW1wTWVtKGNvdW50ICogNCk7XG4gICAgICAgIHJldHVybiB0aGlzLl90ZW1wTWVtRmxvYXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29weSB0aGUgc3RyaW5nIGludG8gdGVtcG9yYXJ5IFdBU00gbWVtb3J5IGFuZCByZXRyaWV2ZSB0aGUgcG9pbnRlci5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoaXMgbWV0aG9kIHdpbGwgY29tcHV0ZSB0aGUgc3RybGVuIGFuZCBhcHBlbmQgYSBgXFwwYC5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoZSByZXN1bHQgc2hvdWxkIGJlIHVzZWQgKipkaXJlY3RseSoqIG90aGVyd2lzZSBpdCBtaWdodCBnZXRcbiAgICAgKiBvdmVycmlkZGVuIGJ5IGFueSBuZXh0IGNhbGwgbW9kaWZ5aW5nIHRoZSB0ZW1wb3JhcnkgbWVtb3J5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHN0ciBUaGUgc3RyaW5nIHRvIHdyaXRlIHRvIHRlbXBvcmFyeSBtZW1vcnlcbiAgICAgKiBAcGFyYW0gYnl0ZU9mZnNldCBUaGUgc3RhcnRpbmcgYnl0ZSBvZmZzZXQgaW4gdGhlIHRlbXBvcmFyeSBtZW1vcnkgYXQgd2hpY2hcbiAgICAgKiAgICAgdGhlIHN0cmluZyBzaG91bGQgYmUgd3JpdHRlbi4gVGhpcyBpcyB1c2VmdWwgd2hlbiB1c2luZyBtdWx0aXBsZSB0ZW1wb3Jhcmllcy5cbiAgICAgKiBAcmV0dXJuIFRoZSB0ZW1wb3JhcnkgcG9pbnRlciBvbnRvIHRoZSBXQVNNIG1lbW9yeVxuICAgICAqL1xuICAgIHRlbXBVVEY4KHN0cjogc3RyaW5nLCBieXRlT2Zmc2V0ID0gMCk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IHN0ckxlbiA9IHRoaXMubGVuZ3RoQnl0ZXNVVEY4KHN0cikgKyAxO1xuICAgICAgICB0aGlzLnJlcXVpcmVUZW1wTWVtKHN0ckxlbiArIGJ5dGVPZmZzZXQpO1xuICAgICAgICBjb25zdCBwdHIgPSB0aGlzLl90ZW1wTWVtICsgYnl0ZU9mZnNldDtcbiAgICAgICAgdGhpcy5zdHJpbmdUb1VURjgoc3RyLCBwdHIsIHN0ckxlbik7XG4gICAgICAgIHJldHVybiBwdHI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29weSB0aGUgYnVmZmVyIGludG8gdGhlIFdBU00gaGVhcC5cbiAgICAgKlxuICAgICAqIEBub3RlIFRoZSByZXR1cm5lZCBwb2ludGVyIG11c3QgYmUgZnJlZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYnVmZmVyIFRoZSBidWZmZXIgdG8gY29weSBpbnRvIHRoZSBoZWFwLlxuICAgICAqIEByZXR1cm5zIEFuIGFsbG9jYXRlZCBwb2ludGVyLCB0aGF0IG11c3QgYmUgZnJlZSBhZnRlciB1c2UuXG4gICAgICovXG4gICAgY29weUJ1ZmZlclRvSGVhcChidWZmZXI6IEFycmF5QnVmZmVyKTogbnVtYmVyIHtcbiAgICAgICAgY29uc3Qgc2l6ZSA9IGJ1ZmZlci5ieXRlTGVuZ3RoO1xuICAgICAgICBjb25zdCBwdHIgPSB0aGlzLl9tYWxsb2Moc2l6ZSk7XG4gICAgICAgIHRoaXMuSEVBUFU4LnNldChuZXcgVWludDhBcnJheShidWZmZXIpLCBwdHIpO1xuICAgICAgICByZXR1cm4gcHRyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBydW50aW1lIHN1cHBvcnRzIHBoeXN4IG9yIG5vdC5cbiAgICAgKi9cbiAgICBnZXQgd2l0aFBoeXNYKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fd2l0aFBoeXNYO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgZW5naW5lIGluc3RhbmNlIGhvbGRpbmcgdGhpcyBicmlkZ2UuXG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZW5naW5lIFRoZSBlbmdpbmUgaW5zdGFuY2UuXG4gICAgICovXG4gICAgcHJvdGVjdGVkIF9zZXRFbmdpbmUoZW5naW5lOiBXb25kZXJsYW5kRW5naW5lKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX2VuZ2luZSA9IGVuZ2luZTtcbiAgICB9XG5cbiAgICAvKiBXZWJBc3NlbWJseSB0byBKUyBjYWxsIGJyaWRnZS4gKi9cblxuICAgIHByb3RlY3RlZCBfd2xqc194cl9zZXNzaW9uX3N0YXJ0KG1vZGU6IFhSU2Vzc2lvbk1vZGUpIHtcbiAgICAgICAgaWYgKHRoaXMuX2VuZ2luZS54ciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgKHRoaXMuX2VuZ2luZS54ciBhcyBYUiB8IG51bGwpID0gbmV3IFhSKHRoaXMsIG1vZGUpO1xuICAgICAgICAgICAgdGhpcy5fZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQubm90aWZ5KHRoaXMud2VieHJfc2Vzc2lvbiEsIG1vZGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHByb3RlY3RlZCBfd2xqc194cl9zZXNzaW9uX2VuZCgpIHtcbiAgICAgICAgY29uc3Qgc3RhcnRFbWl0dGVyID0gdGhpcy5fZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQ7XG4gICAgICAgIGlmIChzdGFydEVtaXR0ZXIgaW5zdGFuY2VvZiBSZXRhaW5FbWl0dGVyKSBzdGFydEVtaXR0ZXIucmVzZXQoKTtcbiAgICAgICAgdGhpcy5fZW5naW5lLm9uWFJTZXNzaW9uRW5kLm5vdGlmeSgpO1xuICAgICAgICAodGhpcy5fZW5naW5lLnhyIGFzIG51bGwpID0gbnVsbDtcbiAgICB9XG4gICAgcHJvdGVjdGVkIF93bGpzX3hyX2Rpc2FibGUoKSB7XG4gICAgICAgIC8qIEB0b2RvIFRoaXMgY291bGQgZGlyZWN0bHkgYmUgZnVsbHkgaGFuZGxlZCBpbiBKUy4gKi9cbiAgICAgICAgKHRoaXMuX2VuZ2luZS5hclN1cHBvcnRlZCBhcyBib29sZWFuKSA9IGZhbHNlO1xuICAgICAgICAodGhpcy5fZW5naW5lLnZyU3VwcG9ydGVkIGFzIGJvb2xlYW4pID0gZmFsc2U7XG4gICAgfVxuICAgIHByb3RlY3RlZCBfd2xqc19pbml0KHdpdGhQaHlzWDogYm9vbGVhbikge1xuICAgICAgICB0aGlzLl93aXRoUGh5c1ggPSB3aXRoUGh5c1g7XG5cbiAgICAgICAgLyogVGFyZ2V0IG1lbW9yeSBmb3IgSlMgQVBJIGZ1bmN0aW9ucyB0aGF0IHJldHVybiBhcnJheXMgKi9cbiAgICAgICAgdGhpcy5hbGxvY2F0ZVRlbXBNZW1vcnkoMTAyNCk7XG4gICAgfVxuICAgIHByb3RlY3RlZCBfd2xqc19zY2VuZV9zd2l0Y2goaW5kZXg6IG51bWJlcikge1xuICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMuX2VuZ2luZS5fc2NlbmVzW2luZGV4XSBhcyBTY2VuZSB8IG51bGw7XG4gICAgICAgIC8qIFNjZW5lIGNhbiBiZSBudWxsIGR1cmluZyB0ZXN0aW5nIHdpdGggYGVuZ2luZS5yZXNldCgpYCAqL1xuICAgICAgICB0aGlzLl9jb21wb25lbnRzID0gc2NlbmU/Ll9qc0NvbXBvbmVudHMgPz8gbnVsbCE7XG4gICAgfVxuICAgIHByb3RlY3RlZCBfd2xqc19kZXN0cm95X2ltYWdlKGluZGV4OiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgaW1nID0gdGhpcy5faW1hZ2VzW2luZGV4XTtcbiAgICAgICAgaWYgKCFpbWcpIHJldHVybjtcblxuICAgICAgICB0aGlzLl9pbWFnZXNbaW5kZXhdID0gbnVsbDtcblxuICAgICAgICBpZiAoKGltZyBhcyBIVE1MSW1hZ2VFbGVtZW50KS5zcmMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgKGltZyBhcyBIVE1MSW1hZ2VFbGVtZW50KS5zcmMgPSAnJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoKGltZyBhcyBIVE1MSW1hZ2VFbGVtZW50KS5vbmxvYWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW1nLm9ubG9hZCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChpbWcgYXMgSFRNTEltYWdlRWxlbWVudCkub25lcnJvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbWcub25lcnJvciA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJvdGVjdGVkIF93bGpzX29iamVjdHNfbWFya0Rlc3Ryb3llZChcbiAgICAgICAgc2NlbmVJbmRleDogbnVtYmVyLFxuICAgICAgICBpZHNQdHI6IG51bWJlcixcbiAgICAgICAgY291bnQ6IG51bWJlclxuICAgICkge1xuICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMuX2VuZ2luZS5fc2NlbmVzW3NjZW5lSW5kZXhdIGFzIFNjZW5lO1xuICAgICAgICBjb25zdCBzdGFydCA9IGlkc1B0ciA+Pj4gMTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IHRoaXMuSEVBUFUxNltzdGFydCArIGldO1xuICAgICAgICAgICAgc2NlbmUuX2Rlc3Ryb3lPYmplY3QoaWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHByb3RlY3RlZCBfd2xqc19zY2VuZV9pbml0aWFsaXplKFxuICAgICAgICBzY2VuZUluZGV4OiBudW1iZXIsXG4gICAgICAgIGlkc1B0cjogbnVtYmVyLFxuICAgICAgICBpZHNFbmQ6IG51bWJlcixcbiAgICAgICAgcGFyYW1EYXRhUHRyOiBudW1iZXIsXG4gICAgICAgIHBhcmFtRGF0YUVuZFB0cjogbnVtYmVyLFxuICAgICAgICBvZmZzZXRzUHRyOiBudW1iZXIsXG4gICAgICAgIG9mZnNldHNFbmRQdHI6IG51bWJlclxuICAgICkge1xuICAgICAgICBjb25zdCBjYm9yID0gdGhpcy5IRUFQVTguc3ViYXJyYXkocGFyYW1EYXRhUHRyLCBwYXJhbURhdGFFbmRQdHIpO1xuICAgICAgICBjb25zdCBvZmZzZXRzID0gdGhpcy5IRUFQVTMyLnN1YmFycmF5KG9mZnNldHNQdHIgPj4+IDIsIG9mZnNldHNFbmRQdHIgPj4+IDIpO1xuICAgICAgICBjb25zdCBpZHMgPSB0aGlzLkhFQVBVMTYuc3ViYXJyYXkoaWRzUHRyID4+PiAxLCBpZHNFbmQgPj4+IDEpO1xuXG4gICAgICAgIGNvbnN0IGVuZ2luZSA9IHRoaXMuX2VuZ2luZTtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBlbmdpbmUuX3NjZW5lc1tzY2VuZUluZGV4XSBhcyBTY2VuZTtcbiAgICAgICAgY29uc3QgY29tcG9uZW50cyA9IHNjZW5lLl9qc0NvbXBvbmVudHM7XG5cbiAgICAgICAgbGV0IGRlY29kZWQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBkZWNvZGVkID0gQ0JPUi5kZWNvZGUoY2Jvcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2xvZy5lcnJvcihMb2dUYWcuRW5naW5lLCAnRXhjZXB0aW9uIGR1cmluZyBjb21wb25lbnQgcGFyYW1ldGVyIGRlY29kaW5nJyk7XG4gICAgICAgICAgICB0aGlzLl9sb2cuZXJyb3IoTG9nVGFnLkNvbXBvbmVudCwgZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZGVjb2RlZCkpIHtcbiAgICAgICAgICAgIHRoaXMuX2xvZy5lcnJvcihMb2dUYWcuRW5naW5lLCAnUGFyYW1ldGVyIGRhdGEgbXVzdCBiZSBhbiBhcnJheScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWNvZGVkLmxlbmd0aCAhPT0gaWRzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5fbG9nLmVycm9yKFxuICAgICAgICAgICAgICAgIExvZ1RhZy5FbmdpbmUsXG4gICAgICAgICAgICAgICAgYFBhcmFtZXRlciBkYXRhIGhhcyBzaXplICR7ZGVjb2RlZC5sZW5ndGh9IGJ1dCBleHBlY3RlZCAke2lkcy5sZW5ndGh9YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVjb2RlZC5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgaWQgPSBDb21wb25lbnQuX3BhY2soc2NlbmVJbmRleCwgaWRzW2ldKTtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fd2xfZ2V0X2pzX2NvbXBvbmVudF9pbmRleF9mb3JfaWQoaWQpO1xuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50ID0gY29tcG9uZW50c1tpbmRleF07XG4gICAgICAgICAgICBjb25zdCBjdG9yID0gY29tcG9uZW50LmNvbnN0cnVjdG9yIGFzIENvbXBvbmVudENvbnN0cnVjdG9yO1xuICAgICAgICAgICAgaWYgKGN0b3IgPT0gQnJva2VuQ29tcG9uZW50KSBjb250aW51ZTtcblxuICAgICAgICAgICAgY29uc3QgcGFyYW1OYW1lcyA9IGN0b3IuX3Byb3BlcnR5T3JkZXI7XG4gICAgICAgICAgICBjb25zdCBwYXJhbVZhbHVlcyA9IGRlY29kZWRbaV07XG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocGFyYW1WYWx1ZXMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbG9nLmVycm9yKExvZ1RhZy5FbmdpbmUsICdDb21wb25lbnQgcGFyYW1ldGVyIGRhdGEgbXVzdCBiZSBhbiBhcnJheScpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhcmFtVmFsdWVzLmxlbmd0aCAhPT0gcGFyYW1OYW1lcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9sb2cuZXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIExvZ1RhZy5FbmdpbmUsXG4gICAgICAgICAgICAgICAgICAgIGBDb21wb25lbnQgcGFyYW1ldGVyIGRhdGEgaGFzIHNpemUgJHtwYXJhbVZhbHVlcy5sZW5ndGh9IGJ1dCBleHBlY3RlZCAke3BhcmFtTmFtZXMubGVuZ3RofWBcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHBhcmFtVmFsdWVzLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IHBhcmFtTmFtZXNbal07XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvcGVydHkgPSBjdG9yLlByb3BlcnRpZXNbbmFtZV07XG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZSA9IHByb3BlcnR5LnR5cGU7XG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gcGFyYW1WYWx1ZXNbal07XG5cbiAgICAgICAgICAgICAgICAvKiBEZWZhdWx0IHZhbHVlcyBhcmUgc2VudCBhcyB1bmRlZmluZWQgdG8gYXZvaWQgd2FzdGluZyBzcGFjZSAqL1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsb25lciA9IHByb3BlcnR5LmNsb25lciA/PyBkZWZhdWx0UHJvcGVydHlDbG9uZXI7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gY2xvbmVyLmNsb25lKHR5cGUsIHByb3BlcnR5LmRlZmF1bHQpO1xuICAgICAgICAgICAgICAgICAgICAoY29tcG9uZW50IGFzIFJlY29yZDxzdHJpbmcsIGFueT4pW25hbWVdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qIFRoaXMgc2tpcHMgdW5zZXQgcmVzb3VyY2UgcGFyYW1ldGVycyBhcyB0aG9zZSBhcmUgc2VudFxuICAgICAgICAgICAgICAgICAqIGRpcmVjdGx5IHdpdGggdHlwZSBudWxsLiBPZmZzZXRzIGZvciBJbnQgYW5kIEZsb2F0IHR5cGVzXG4gICAgICAgICAgICAgICAgICogc2hvdWxkIGFsd2F5cyBiZSAwLiAqL1xuICAgICAgICAgICAgICAgIC8qKiBAdG9kbyBDQk9SIHRhZyB0byBtYXJrIHJlc291cmNlcz8gV2FzdGVzIGEgYnl0ZSB0aG91Z2guICovXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgKz0gb2Zmc2V0c1t0eXBlXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlLkJvb2w6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZS5JbnQ6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZS5GbG9hdDpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlLlN0cmluZzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlLkVudW06XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZS5WZWN0b3IyOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGUuVmVjdG9yMzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlLlZlY3RvcjQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBOb3RoaW5nIHRvIGRvICovXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlLk9iamVjdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHNjZW5lLndyYXAodGhpcy5fd2xfb2JqZWN0X2lkKHNjZW5lLl9pbmRleCwgdmFsdWUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGUuTWVzaDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gZW5naW5lLm1lc2hlcy53cmFwKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGUuVGV4dHVyZTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gZW5naW5lLnRleHR1cmVzLndyYXAodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZS5NYXRlcmlhbDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gZW5naW5lLm1hdGVyaWFscy53cmFwKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGUuQW5pbWF0aW9uOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBzY2VuZS5hbmltYXRpb25zLndyYXAodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZS5Ta2luOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBzY2VuZS5za2lucy53cmFwKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGUuQ29sb3I6XG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBDb2xvcnMgYXJlIHNlbnQgYXMgVWludDhBcnJheS4gTm9ybWFsaXplIHBvc2l0aXZlXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBpbnRlZ2VyIHZhbHVlcyB0byAwLTEuIERvbid0IGFzc3VtZSBhbnkgYml0IHNpemVcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIGhlcmUsIGNvdWxkIGJlY29tZSBVaW50MTZBcnJheSBhcyB3ZWxsLiAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF4ID0gKDEgPDwgKHZhbHVlLkJZVEVTX1BFUl9FTEVNRU5UICogOCkpIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gRmxvYXQzMkFycmF5LmZyb20odmFsdWUsIChmOiBudW1iZXIsIF8pID0+IGYgLyBtYXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgKGNvbXBvbmVudCBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+KVtuYW1lXSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIF93bGpzX3NldF9jb21wb25lbnRfcGFyYW1fdHJhbnNsYXRpb24oXG4gICAgICAgIHNjZW5lOiBudW1iZXIsXG4gICAgICAgIGNvbXBvbmVudDogbnVtYmVyLFxuICAgICAgICBwYXJhbTogbnVtYmVyLFxuICAgICAgICB2YWx1ZVB0cjogbnVtYmVyLFxuICAgICAgICB2YWx1ZUVuZFB0cjogbnVtYmVyXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudHMgPSAodGhpcy5fZW5naW5lLl9zY2VuZXNbc2NlbmVdIGFzIFNjZW5lKS5fanNDb21wb25lbnRzO1xuICAgICAgICBjb25zdCBjb21wID0gY29tcG9uZW50c1tjb21wb25lbnRdO1xuXG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5VVEY4Vmlld1RvU3RyaW5nKHZhbHVlUHRyLCB2YWx1ZUVuZFB0cik7XG4gICAgICAgIGNvbnN0IGN0b3IgPSBjb21wLmNvbnN0cnVjdG9yIGFzIENvbXBvbmVudENvbnN0cnVjdG9yO1xuICAgICAgICBjb25zdCBwYXJhbU5hbWUgPSBjdG9yLl9wcm9wZXJ0eU9yZGVyW3BhcmFtXTtcbiAgICAgICAgKGNvbXAgYXMgUmVjb3JkPHN0cmluZywgYW55PilbcGFyYW1OYW1lXSA9IHZhbHVlO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBfd2xqc19nZXRfY29tcG9uZW50X3R5cGVfaW5kZXgobmFtZVB0cjogbnVtYmVyLCBuYW1lRW5kUHRyOiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgdHlwZW5hbWUgPSB0aGlzLlVURjhWaWV3VG9TdHJpbmcobmFtZVB0ciwgbmFtZUVuZFB0cik7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fY29tcG9uZW50VHlwZUluZGljZXNbdHlwZW5hbWVdO1xuICAgICAgICBpZiAoaW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Jyb2tlbkNvbXBvbmVudEluZGV4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmRleDtcbiAgICB9XG4gICAgcHJvdGVjdGVkIF93bGpzX2NvbXBvbmVudF9jcmVhdGUoXG4gICAgICAgIHNjZW5lSW5kZXg6IG51bWJlcixcbiAgICAgICAgaW5kZXg6IG51bWJlcixcbiAgICAgICAgaWQ6IG51bWJlcixcbiAgICAgICAgdHlwZTogbnVtYmVyLFxuICAgICAgICBvYmplY3Q6IG51bWJlclxuICAgICkge1xuICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMuX2VuZ2luZS5fc2NlbmVzW3NjZW5lSW5kZXhdIGFzIFNjZW5lO1xuICAgICAgICBzY2VuZS5fY29tcG9uZW50cy5jcmVhdGVKcyhpbmRleCwgaWQsIHR5cGUsIG9iamVjdCk7XG4gICAgfVxuICAgIHByb3RlY3RlZCBfd2xqc19jb21wb25lbnRfaW5pdChzY2VuZTogbnVtYmVyLCBjb21wb25lbnQ6IG51bWJlcikge1xuICAgICAgICBjb25zdCBjb21wb25lbnRzID0gKHRoaXMuX2VuZ2luZS5fc2NlbmVzW3NjZW5lXSBhcyBTY2VuZSkuX2pzQ29tcG9uZW50cztcbiAgICAgICAgY29uc3QgYyA9IGNvbXBvbmVudHNbY29tcG9uZW50XTtcbiAgICAgICAgYy5fdHJpZ2dlckluaXQoKTtcbiAgICB9XG4gICAgcHJvdGVjdGVkIF93bGpzX2NvbXBvbmVudF91cGRhdGUoY29tcG9uZW50OiBudW1iZXIsIGR0OiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgYyA9IHRoaXMuX2NvbXBvbmVudHNbY29tcG9uZW50XTtcbiAgICAgICAgYy5fdHJpZ2dlclVwZGF0ZShkdCk7XG4gICAgfVxuICAgIHByb3RlY3RlZCBfd2xqc19jb21wb25lbnRfb25BY3RpdmF0ZShjb21wb25lbnQ6IG51bWJlcikge1xuICAgICAgICBjb25zdCBjID0gdGhpcy5fY29tcG9uZW50c1tjb21wb25lbnRdO1xuICAgICAgICBjLl90cmlnZ2VyT25BY3RpdmF0ZSgpO1xuICAgIH1cbiAgICBwcm90ZWN0ZWQgX3dsanNfY29tcG9uZW50X29uRGVhY3RpdmF0ZShjb21wb25lbnQ6IG51bWJlcikge1xuICAgICAgICBjb25zdCBjID0gdGhpcy5fY29tcG9uZW50c1tjb21wb25lbnRdO1xuICAgICAgICBjLl90cmlnZ2VyT25EZWFjdGl2YXRlKCk7XG4gICAgfVxuICAgIHByb3RlY3RlZCBfd2xqc19jb21wb25lbnRfbWFya0Rlc3Ryb3llZChcbiAgICAgICAgc2NlbmVJbmRleDogbnVtYmVyLFxuICAgICAgICBtYW5hZ2VyOiBudW1iZXIsXG4gICAgICAgIGNvbXBvbmVudElkOiBudW1iZXJcbiAgICApIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSB0aGlzLl9lbmdpbmUuX3NjZW5lc1tzY2VuZUluZGV4XSBhcyBQcmVmYWI7XG4gICAgICAgIHNjZW5lLl9kZXN0cm95Q29tcG9uZW50KG1hbmFnZXIsIGNvbXBvbmVudElkKTtcbiAgICB9XG4gICAgcHJvdGVjdGVkIF93bGpzX3N3YXAoc2NlbmU6IG51bWJlciwgYTogbnVtYmVyLCBiOiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgY29tcG9uZW50cyA9ICh0aGlzLl9lbmdpbmUuX3NjZW5lc1tzY2VuZV0gYXMgU2NlbmUpLl9qc0NvbXBvbmVudHM7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudEEgPSBjb21wb25lbnRzW2FdO1xuICAgICAgICBjb21wb25lbnRzW2FdID0gY29tcG9uZW50c1tiXTtcbiAgICAgICAgY29tcG9uZW50c1tiXSA9IGNvbXBvbmVudEE7XG4gICAgfVxuICAgIHByb3RlY3RlZCBfd2xqc19jb3B5KFxuICAgICAgICBzcmNTY2VuZUluZGV4OiBudW1iZXIsXG4gICAgICAgIHNyY0luZGV4OiBudW1iZXIsXG4gICAgICAgIGRzdFNjZW5lSW5kZXg6IG51bWJlcixcbiAgICAgICAgZHN0SW5kZXg6IG51bWJlcixcbiAgICAgICAgb2Zmc2V0c1B0cjogbnVtYmVyXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IHNyY1NjZW5lID0gdGhpcy5fZW5naW5lLl9zY2VuZXNbc3JjU2NlbmVJbmRleF0gYXMgU2NlbmU7XG4gICAgICAgIGNvbnN0IGRzdFNjZW5lID0gdGhpcy5fZW5naW5lLl9zY2VuZXNbZHN0U2NlbmVJbmRleF0gYXMgU2NlbmU7XG4gICAgICAgIGNvbnN0IGRlc3RDb21wID0gZHN0U2NlbmUuX2pzQ29tcG9uZW50c1tkc3RJbmRleF07XG4gICAgICAgIGNvbnN0IHNyY0NvbXAgPSBzcmNTY2VuZS5fanNDb21wb25lbnRzW3NyY0luZGV4XTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGRlc3RDb21wLl9jb3B5KHNyY0NvbXAsIG9mZnNldHNQdHIpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aGlzLl9sb2cuZXJyb3IoXG4gICAgICAgICAgICAgICAgTG9nVGFnLkNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBgRXhjZXB0aW9uIGR1cmluZyAke2Rlc3RDb21wLnR5cGV9IGNvcHkoKSBvbiBvYmplY3QgJHtkZXN0Q29tcC5vYmplY3QubmFtZX1gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhpcy5fbG9nLmVycm9yKExvZ1RhZy5Db21wb25lbnQsIGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvcndhcmQgYW4gYW5pbWF0aW9uIGV2ZW50IHRvIGEgY29ycmVzcG9uZGluZ1xuICAgICAqIHtAbGluayBBbmltYXRpb25Db21wb25lbnR9XG4gICAgICpcbiAgICAgKiBAbm90ZSBUaGlzIGFwaSBpcyBtZWFudCB0byBiZSB1c2VkIGludGVybmFsbHkuIFBsZWFzZSBoYXZlIGEgbG9vayBhdFxuICAgICAqIHtAbGluayBBbmltYXRpb25Db21wb25lbnQub25FdmVudH0gaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb21wb25lbnRJZCBDb21wb25lbnQgaWQgaW4gdGhlIG1hbmFnZXJcbiAgICAgKiBAcGFyYW0gbmFtZVB0ciBQb2ludGVyIHRvIFVURjggZXZlbnQgbmFtZVxuICAgICAqIEBwYXJhbSBuYW1lRW5kUHRyIFBvaW50ZXIgdG8gZW5kIG9mIFVURjggZXZlbnQgbmFtZVxuICAgICAqL1xuICAgIHByb3RlY3RlZCBfd2xqc190cmlnZ2VyX2FuaW1hdGlvbkV2ZW50KFxuICAgICAgICBjb21wb25lbnRJZDogbnVtYmVyLFxuICAgICAgICBuYW1lUHRyOiBudW1iZXIsXG4gICAgICAgIG5hbWVFbmRQdHI6IG51bWJlclxuICAgICkge1xuICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMuX2VuZ2luZS5zY2VuZTtcbiAgICAgICAgY29uc3QgY29tcCA9IHNjZW5lLl9jb21wb25lbnRzLndyYXBBbmltYXRpb24oY29tcG9uZW50SWQpO1xuICAgICAgICBjb25zdCBuYW1lU3RyID0gdGhpcy5VVEY4Vmlld1RvU3RyaW5nKG5hbWVQdHIsIG5hbWVFbmRQdHIpO1xuICAgICAgICBjb21wLm9uRXZlbnQubm90aWZ5KG5hbWVTdHIpO1xuICAgIH1cbn1cblxuLyogRXh0ZW5kcyB0aGUgV0FTTSBjbGFzcyB3aXRoIHRoZSBXZWJBc3NlbWJseSB0eXBpbmdzICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgV0FTTSB7XG4gICAgSEVBUDg6IEludDhBcnJheTtcbiAgICBIRUFQVTg6IFVpbnQ4QXJyYXk7XG4gICAgSEVBUFUxNjogVWludDE2QXJyYXk7XG4gICAgSEVBUDE2OiBJbnQxNkFycmF5O1xuICAgIEhFQVBVMzI6IFVpbnQzMkFycmF5O1xuICAgIEhFQVAzMjogSW50MzJBcnJheTtcbiAgICBIRUFQRjMyOiBGbG9hdDMyQXJyYXk7XG4gICAgSEVBUEY2NDogRmxvYXQ2NEFycmF5O1xuXG4gICAgR0w6IHtcbiAgICAgICAgZnJhbWVidWZmZXJzOiBXZWJHTEZyYW1lYnVmZmVyW107XG4gICAgfTtcblxuICAgIGFzc2VydDogKGNvbmRpdGlvbjogYm9vbGVhbiwgbXNnPzogc3RyaW5nKSA9PiB2b2lkO1xuICAgIF9mcmVlOiAocHRyOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX21hbGxvYzogKHNpemU6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIGxlbmd0aEJ5dGVzVVRGODogKHN0cjogc3RyaW5nKSA9PiBudW1iZXI7XG4gICAgc3RyaW5nVG9VVEY4OiAoc3RyOiBzdHJpbmcsIG91dFB0cjogbnVtYmVyLCBsZW46IG51bWJlcikgPT4gdm9pZDtcbiAgICBVVEY4VG9TdHJpbmc6IChwdHI6IG51bWJlcikgPT4gc3RyaW5nO1xuICAgIGFkZEZ1bmN0aW9uOiAoZnVuYzogRnVuY3Rpb24sIHNpZzogc3RyaW5nKSA9PiBudW1iZXI7XG4gICAgcmVtb3ZlRnVuY3Rpb246IChwdHI6IG51bWJlcikgPT4gdm9pZDtcblxuICAgIF93bF9zZXRfZXJyb3JfY2FsbGJhY2s6IChjYlB0cjogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9hcHBsaWNhdGlvbl92ZXJzaW9uOiAob3V0OiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX2FwcGxpY2F0aW9uX3N0YXJ0OiAoKSA9PiB2b2lkO1xuICAgIF93bF9hcHBsaWNhdGlvbl9yZXNpemU6ICh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikgPT4gdm9pZDtcblxuICAgIF93bF9uZXh0VXBkYXRlOiAoZGVsdGE6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfbmV4dEZyYW1lOiAoZGVsdGE6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfcmVzZXQ6ICgpID0+IHZvaWQ7XG4gICAgX3dsX2RlYWN0aXZhdGVfYWN0aXZlU2NlbmU6ICgpID0+IHZvaWQ7XG5cbiAgICBfd2xfcmVuZGVyZXJfc2V0X21lc2hfbGF5b3V0OiAobGF5b3V0OiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX3JlbmRlcmVyX3N0cmVhbWluZ19pZGxlOiAoKSA9PiBudW1iZXI7XG5cbiAgICBfd2xfbG9hZF9tYWluX3NjZW5lOiAocHRyOiBudW1iZXIsIHNpemU6IG51bWJlciwgdXJsOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfZ2V0X2ltYWdlczogKG91dDogbnVtYmVyLCBtYXg6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9nZXRfbWF0ZXJpYWxfZGVmaW5pdGlvbl9jb3VudDogKCkgPT4gbnVtYmVyO1xuICAgIF93bF9nZXRfbWF0ZXJpYWxfZGVmaW5pdGlvbl9pbmRleDogKHB0cjogbnVtYmVyKSA9PiBudW1iZXI7XG5cbiAgICBfd2xfc2NlbmVfZ2V0X2FjdGl2ZTogKHJvb3Q6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9zY2VuZV9jcmVhdGU6IChwdHI6IG51bWJlciwgc2l6ZTogbnVtYmVyLCB1cmw6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9zY2VuZV9jcmVhdGVfY2h1bmtlZF9zdGFydDogKHVybDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3NjZW5lX2NyZWF0ZV9jaHVua2VkX2J1ZmZlcl9zaXplOiAoaW5kZXg6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9zY2VuZV9jcmVhdGVfY2h1bmtlZF9uZXh0OiAoXG4gICAgICAgIGluZGV4OiBudW1iZXIsXG4gICAgICAgIHB0cjogbnVtYmVyLFxuICAgICAgICBzaXplOiBudW1iZXIsXG4gICAgICAgIHJlYWRTaXplUHRyOiBudW1iZXIsXG4gICAgICAgIHJlcXVpcmVkU2l6ZVB0cjogbnVtYmVyXG4gICAgKSA9PiBib29sZWFuO1xuICAgIF93bF9zY2VuZV9jcmVhdGVfY2h1bmtlZF9hYm9ydDogKGluZGV4OiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX3NjZW5lX2NyZWF0ZV9jaHVua2VkX2VuZF9wcmVmYWI6IChpbmRleDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3NjZW5lX2NyZWF0ZV9jaHVua2VkX2VuZF9tYWluOiAoaW5kZXg6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfc2NlbmVfY3JlYXRlX2NodW5rZWRfZW5kX3F1ZXVlZDogKFxuICAgICAgICBpbmRleDogbnVtYmVyLFxuICAgICAgICBkZXBlbmRlbnRTY2VuZUluZGV4OiBudW1iZXJcbiAgICApID0+IHZvaWQ7XG4gICAgX3dsX3NjZW5lX2NyZWF0ZV9lbXB0eTogKCkgPT4gbnVtYmVyO1xuICAgIF93bF9zY2VuZV9pbml0aWFsaXplOiAoaW5kZXg6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9zY2VuZV9kZXN0cm95OiAoaW5kZXg6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfc2NlbmVfaW5zdGFudGlhdGU6IChzcmM6IG51bWJlciwgZHN0OiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfc2NlbmVfYWN0aXZhdGU6IChpbmRleDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9zY2VuZV9xdWV1ZWRfYmluX2NvdW50OiAoaW5kZXg6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9zY2VuZV9xdWV1ZWRfYmluX3BhdGg6IChzY2VuZUluZGV4OiBudW1iZXIsIGluZGV4OiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfc2NlbmVfY2xlYXJfcXVldWVkX2Jpbl9saXN0OiAoc2NlbmVJbmRleDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9zY2VuZV9sb2FkX3F1ZXVlZF9iaW46IChpbmRleDogbnVtYmVyLCBwdHI6IG51bWJlciwgc2l6ZTogbnVtYmVyKSA9PiBib29sZWFuO1xuICAgIF93bF9zY2VuZV9hY3RpdmF0YWJsZTogKGluZGV4OiBudW1iZXIpID0+IGJvb2xlYW47XG4gICAgX3dsX3NjZW5lX2FjdGl2ZTogKGluZGV4OiBudW1iZXIpID0+IGJvb2xlYW47XG4gICAgX3dsX3NjZW5lX2dldF9iYXNlVVJMOiAoaW5kZXg6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9zY2VuZV9nZXRfZmlsZW5hbWU6IChpbmRleDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3NjZW5lX2dldF9jb21wb25lbnRfbWFuYWdlcl9pbmRleDogKHNjZW5lOiBudW1iZXIsIHB0cjogbnVtYmVyKSA9PiBudW1iZXI7XG5cbiAgICBfd2xfZ2xURl9zY2VuZV9jcmVhdGU6IChleHRlbnNpb25zOiBib29sZWFuLCBwdHI6IG51bWJlciwgcHRyRW5kOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfZ2xURl9zY2VuZV9nZXRfZXh0ZW5zaW9uczogKGluZGV4OiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfZ2xURl9zY2VuZV9leHRlbnNpb25zX2dsdGZJbmRleF90b19pZDogKFxuICAgICAgICBnbHRmU2NlbmU6IG51bWJlcixcbiAgICAgICAgZGVzdFNjZW5lOiBudW1iZXIsXG4gICAgICAgIG9iamVjdEluZGV4OiBudW1iZXIsXG4gICAgICAgIGdsdGZJbmRleDogbnVtYmVyXG4gICAgKSA9PiBudW1iZXI7XG5cbiAgICBfd2xfc2NlbmVfZ2V0X2FjdGl2ZV92aWV3czogKHNjZW5lOiBudW1iZXIsIHB0cjogbnVtYmVyLCBjb3VudDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3NjZW5lX3JheV9jYXN0OiAoXG4gICAgICAgIHNjZW5lOiBudW1iZXIsXG4gICAgICAgIHg6IG51bWJlcixcbiAgICAgICAgeTogbnVtYmVyLFxuICAgICAgICB6OiBudW1iZXIsXG4gICAgICAgIGR4OiBudW1iZXIsXG4gICAgICAgIGR5OiBudW1iZXIsXG4gICAgICAgIGR6OiBudW1iZXIsXG4gICAgICAgIGdyb3VwTWFzazogbnVtYmVyLFxuICAgICAgICBtYXhEaXN0YW5jZTogbnVtYmVyLFxuICAgICAgICBvdXRQdHI6IG51bWJlclxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfc2NlbmVfYWRkX29iamVjdDogKHNjZW5lOiBudW1iZXIsIHBhcmVudElkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfc2NlbmVfYWRkX29iamVjdHM6IChcbiAgICAgICAgc2NlbmU6IG51bWJlcixcbiAgICAgICAgcGFyZW50SWQ6IG51bWJlcixcbiAgICAgICAgY291bnQ6IG51bWJlcixcbiAgICAgICAgY29tcG9uZW50Q291bnRIaW50OiBudW1iZXIsXG4gICAgICAgIHB0cjogbnVtYmVyLFxuICAgICAgICBzaXplOiBudW1iZXJcbiAgICApID0+IG51bWJlcjtcbiAgICBfd2xfc2NlbmVfcmVzZXJ2ZV9vYmplY3RzOiAoXG4gICAgICAgIHNjZW5lOiBudW1iZXIsXG4gICAgICAgIG9iamVjdENvdW50OiBudW1iZXIsXG4gICAgICAgIF90ZW1wTWVtOiBudW1iZXJcbiAgICApID0+IHZvaWQ7XG4gICAgX3dsX3NjZW5lX3NldF9za3lfbWF0ZXJpYWw6IChpbmRleDogbnVtYmVyLCBpZDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9zY2VuZV9nZXRfc2t5X21hdGVyaWFsOiAoaW5kZXg6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9zY2VuZV9lbnZpcm9ubWVudF9zZXRfaW50ZW5zaXR5OiAoaW5kZXg6IG51bWJlciwgaW50ZW5zaXR5OiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX3NjZW5lX2Vudmlyb25tZW50X2dldF9pbnRlbnNpdHk6IChpbmRleDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3NjZW5lX2Vudmlyb25tZW50X3NldF90aW50OiAoXG4gICAgICAgIGluZGV4OiBudW1iZXIsXG4gICAgICAgIHI6IG51bWJlcixcbiAgICAgICAgZzogbnVtYmVyLFxuICAgICAgICBiOiBudW1iZXJcbiAgICApID0+IHZvaWQ7XG4gICAgX3dsX3NjZW5lX2Vudmlyb25tZW50X2dldF90aW50OiAoaW5kZXg6IG51bWJlciwgcHRyOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX3NjZW5lX2Vudmlyb25tZW50X3NldF9jb2VmZmljaWVudHM6IChcbiAgICAgICAgaW5kZXg6IG51bWJlcixcbiAgICAgICAgcHRyOiBudW1iZXIsXG4gICAgICAgIGNvdW50OiBudW1iZXJcbiAgICApID0+IHZvaWQ7XG4gICAgX3dsX3NjZW5lX2Vudmlyb25tZW50X2dldF9jb2VmZmljaWVudHM6IChpbmRleDogbnVtYmVyLCBwdHI6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfc2NlbmVfc2V0X2NsZWFyQ29sb3I6IChyOiBudW1iZXIsIGc6IG51bWJlciwgYjogbnVtYmVyLCBhOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX3NjZW5lX2VuYWJsZUNvbG9yQ2xlYXI6IChiOiBib29sZWFuKSA9PiB2b2lkO1xuICAgIF93bF9zZXRfbG9hZGluZ19zY3JlZW5fcHJvZ3Jlc3M6IChyYXRpbzogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9jb21wb25lbnRfZ2V0X29iamVjdDogKG1hbmFnZXI6IG51bWJlciwgaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9jb21wb25lbnRfc2V0QWN0aXZlOiAobWFuYWdlcjogbnVtYmVyLCBpZDogbnVtYmVyLCBhY3RpdmU6IGJvb2xlYW4pID0+IHZvaWQ7XG4gICAgX3dsX2NvbXBvbmVudF9pc0FjdGl2ZTogKG1hbmFnZXI6IG51bWJlciwgaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9jb21wb25lbnRfcmVtb3ZlOiAobWFuYWdlcjogbnVtYmVyLCBpZDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9jb2xsaXNpb25fY29tcG9uZW50X2dldF9jb2xsaWRlcjogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfY29sbGlzaW9uX2NvbXBvbmVudF9zZXRfY29sbGlkZXI6IChpZDogbnVtYmVyLCBjb2xsaWRlcjogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9jb2xsaXNpb25fY29tcG9uZW50X2dldF9leHRlbnRzOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9jb2xsaXNpb25fY29tcG9uZW50X2dldF9ncm91cDogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfY29sbGlzaW9uX2NvbXBvbmVudF9zZXRfZ3JvdXA6IChpZDogbnVtYmVyLCBncm91cDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9jb2xsaXNpb25fY29tcG9uZW50X3F1ZXJ5X292ZXJsYXBzOiAoXG4gICAgICAgIGlkOiBudW1iZXIsXG4gICAgICAgIG91dFB0cjogbnVtYmVyLFxuICAgICAgICBvdXRDb3VudDogbnVtYmVyXG4gICAgKSA9PiBudW1iZXI7XG4gICAgX3dsX3RleHRfY29tcG9uZW50X2dldF9ob3Jpem9udGFsX2FsaWdubWVudDogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfdGV4dF9jb21wb25lbnRfc2V0X2hvcml6b250YWxfYWxpZ25tZW50OiAoaWQ6IG51bWJlciwgYWxpZ25tZW50OiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX3RleHRfY29tcG9uZW50X2dldF92ZXJ0aWNhbF9hbGlnbm1lbnQ6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3RleHRfY29tcG9uZW50X3NldF92ZXJ0aWNhbF9hbGlnbm1lbnQ6IChcbiAgICAgICAgaWQ6IG51bWJlcixcbiAgICAgICAgdmVydGljYWxBbGlnbm1lbnQ6IG51bWJlclxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfdGV4dF9jb21wb25lbnRfZ2V0X2NoYXJhY3Rlcl9zcGFjaW5nOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF90ZXh0X2NvbXBvbmVudF9zZXRfY2hhcmFjdGVyX3NwYWNpbmc6IChpZDogbnVtYmVyLCBzcGFjaW5nOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX3RleHRfY29tcG9uZW50X2dldF9saW5lX3NwYWNpbmc6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3RleHRfY29tcG9uZW50X3NldF9saW5lX3NwYWNpbmc6IChpZDogbnVtYmVyLCBzcGFjaW5nOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX3RleHRfY29tcG9uZW50X2dldF9lZmZlY3Q6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3RleHRfY29tcG9uZW50X3NldF9lZmZlY3Q6IChpZDogbnVtYmVyLCBlZmZlY3Q6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfdGV4dF9jb21wb25lbnRfZ2V0X3dyYXBNb2RlOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF90ZXh0X2NvbXBvbmVudF9zZXRfd3JhcE1vZGU6IChpZDogbnVtYmVyLCBtb2RlOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX3RleHRfY29tcG9uZW50X2dldF93cmFwV2lkdGg6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3RleHRfY29tcG9uZW50X3NldF93cmFwV2lkdGg6IChpZDogbnVtYmVyLCB3aWR0aDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF90ZXh0X2NvbXBvbmVudF9nZXRfdGV4dDogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfdGV4dF9jb21wb25lbnRfc2V0X3RleHQ6IChpZDogbnVtYmVyLCBwdHI6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfdGV4dF9jb21wb25lbnRfc2V0X21hdGVyaWFsOiAoaWQ6IG51bWJlciwgbWF0ZXJpYWxJZDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF90ZXh0X2NvbXBvbmVudF9nZXRfbWF0ZXJpYWw6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3RleHRfY29tcG9uZW50X2dldF9ib3VuZGluZ0JveDogKFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICB0ZXh0UHRyOiBudW1iZXIsXG4gICAgICAgIHJlc3VsdFB0cjogbnVtYmVyXG4gICAgKSA9PiBudW1iZXI7XG4gICAgX3dsX3ZpZXdfY29tcG9uZW50X2dldF9wcm9qZWN0aW9uVHlwZTogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfdmlld19jb21wb25lbnRfc2V0X3Byb2plY3Rpb25UeXBlOiAoaWQ6IG51bWJlciwgdHlwZTogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF92aWV3X2NvbXBvbmVudF9nZXRfcHJvamVjdGlvbl9tYXRyaXg6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3ZpZXdfY29tcG9uZW50X2dldF9uZWFyOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF92aWV3X2NvbXBvbmVudF9zZXRfbmVhcjogKGlkOiBudW1iZXIsIG5lYXI6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfdmlld19jb21wb25lbnRfZ2V0X2ZhcjogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfdmlld19jb21wb25lbnRfc2V0X2ZhcjogKGlkOiBudW1iZXIsIGZhcjogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF92aWV3X2NvbXBvbmVudF9nZXRfZm92OiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF92aWV3X2NvbXBvbmVudF9zZXRfZm92OiAoaWQ6IG51bWJlciwgZm92OiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX3ZpZXdfY29tcG9uZW50X2dldF9leHRlbnQ6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3ZpZXdfY29tcG9uZW50X3NldF9leHRlbnQ6IChpZDogbnVtYmVyLCBmb3Y6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfaW5wdXRfY29tcG9uZW50X2dldF90eXBlOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9pbnB1dF9jb21wb25lbnRfc2V0X3R5cGU6IChpZDogbnVtYmVyLCB0eXBlOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfY29sb3I6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfdHlwZTogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfbGlnaHRfY29tcG9uZW50X3NldF90eXBlOiAoaWQ6IG51bWJlciwgdHlwZTogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9saWdodF9jb21wb25lbnRfZ2V0X2ludGVuc2l0eTogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfbGlnaHRfY29tcG9uZW50X3NldF9pbnRlbnNpdHk6IChpZDogbnVtYmVyLCBpbnRlbnNpdHk6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfbGlnaHRfY29tcG9uZW50X2dldF9vdXRlckFuZ2xlOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9saWdodF9jb21wb25lbnRfc2V0X291dGVyQW5nbGU6IChpZDogbnVtYmVyLCBhbmdsZTogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9saWdodF9jb21wb25lbnRfZ2V0X2lubmVyQW5nbGU6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX2xpZ2h0X2NvbXBvbmVudF9zZXRfaW5uZXJBbmdsZTogKGlkOiBudW1iZXIsIGFuZ2xlOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfc2hhZG93czogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfbGlnaHRfY29tcG9uZW50X3NldF9zaGFkb3dzOiAoaWQ6IG51bWJlciwgc2hhZG93czogYm9vbGVhbikgPT4gdm9pZDtcbiAgICBfd2xfbGlnaHRfY29tcG9uZW50X2dldF9zaGFkb3dSYW5nZTogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfbGlnaHRfY29tcG9uZW50X3NldF9zaGFkb3dSYW5nZTogKGlkOiBudW1iZXIsIHJhbmdlOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX2xpZ2h0X2NvbXBvbmVudF9nZXRfc2hhZG93QmlhczogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfbGlnaHRfY29tcG9uZW50X3NldF9zaGFkb3dCaWFzOiAoaWQ6IG51bWJlciwgYmlhczogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9saWdodF9jb21wb25lbnRfZ2V0X3NoYWRvd05vcm1hbEJpYXM6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX2xpZ2h0X2NvbXBvbmVudF9zZXRfc2hhZG93Tm9ybWFsQmlhczogKGlkOiBudW1iZXIsIGJpYXM6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfbGlnaHRfY29tcG9uZW50X2dldF9zaGFkb3dUZXhlbFNpemU6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX2xpZ2h0X2NvbXBvbmVudF9zZXRfc2hhZG93VGV4ZWxTaXplOiAoaWQ6IG51bWJlciwgc2l6ZTogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9saWdodF9jb21wb25lbnRfZ2V0X2Nhc2NhZGVDb3VudDogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfbGlnaHRfY29tcG9uZW50X3NldF9jYXNjYWRlQ291bnQ6IChpZDogbnVtYmVyLCBjb3VudDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9hbmltYXRpb25fY29tcG9uZW50X2dldF9hbmltYXRpb246IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfc2V0X2FuaW1hdGlvbjogKGlkOiBudW1iZXIsIGFuaW1JZDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9hbmltYXRpb25fY29tcG9uZW50X2dldF9wbGF5Q291bnQ6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfc2V0X3BsYXlDb3VudDogKGlkOiBudW1iZXIsIGNvdW50OiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfZ2V0X3NwZWVkOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9hbmltYXRpb25fY29tcG9uZW50X3NldF9zcGVlZDogKGlkOiBudW1iZXIsIHNwZWVkOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfcGxheTogKGlkOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfc3RvcDogKGlkOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfcGF1c2U6IChpZDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9hbmltYXRpb25fY29tcG9uZW50X3N0YXRlOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9hbmltYXRpb25fY29tcG9uZW50X2dldEdyYXBoUGFyYW1WYWx1ZTogKFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICBwYXJhbUluZGV4OiBudW1iZXIsXG4gICAgICAgIG91dFB0cjogbnVtYmVyXG4gICAgKSA9PiBudW1iZXI7XG4gICAgX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfc2V0R3JhcGhQYXJhbVZhbHVlOiAoXG4gICAgICAgIGlkOiBudW1iZXIsXG4gICAgICAgIHBhcmFtSW5kZXg6IG51bWJlcixcbiAgICAgICAgdmFsdWVQdHI6IG51bWJlclxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9nZXRfcm9vdE1vdGlvbk1vZGU6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfc2V0X3Jvb3RNb3Rpb25Nb2RlOiAoaWQ6IG51bWJlciwgdmFsdWU6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9nZXRfcm9vdE1vdGlvbl90cmFuc2xhdGlvbjogKFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICBvdXRQdHI6IG51bWJlclxuICAgICkgPT4gbnVtYmVyO1xuICAgIF93bF9hbmltYXRpb25fY29tcG9uZW50X2dldF9yb290TW90aW9uX3JvdGF0aW9uOiAoaWQ6IG51bWJlciwgb3V0UHRyOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9nZXRHcmFwaFBhcmFtSW5kZXg6IChpZDogbnVtYmVyLCBwYXJhbU5hbWU6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9hbmltYXRpb25fY29tcG9uZW50X2dldF9pdGVyYXRpb246IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfZ2V0X3Bvc2l0aW9uOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9hbmltYXRpb25fY29tcG9uZW50X2dldF9kdXJhdGlvbjogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfbWVzaF9jb21wb25lbnRfZ2V0X21hdGVyaWFsOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9tZXNoX2NvbXBvbmVudF9zZXRfbWF0ZXJpYWw6IChpZDogbnVtYmVyLCBtYXRlcmlhbElkOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX21lc2hfY29tcG9uZW50X2dldF9tZXNoOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9tZXNoX2NvbXBvbmVudF9zZXRfbWVzaDogKGlkOiBudW1iZXIsIG1lc2hJZDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9tZXNoX2NvbXBvbmVudF9nZXRfc2tpbjogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfbWVzaF9jb21wb25lbnRfc2V0X3NraW46IChpZDogbnVtYmVyLCBza2luSWQ6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfbWVzaF9jb21wb25lbnRfZ2V0X21vcnBoX3RhcmdldHM6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX21lc2hfY29tcG9uZW50X3NldF9tb3JwaF90YXJnZXRzOiAoaWQ6IG51bWJlciwgbW9ycGhUYXJnZXRTZXRJZDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9tZXNoX2NvbXBvbmVudF9nZXRfbW9ycGhfdGFyZ2V0X3dlaWdodDogKGlkOiBudW1iZXIsIGluZGV4OiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfbWVzaF9jb21wb25lbnRfZ2V0X21vcnBoX3RhcmdldF93ZWlnaHRzOiAoaWQ6IG51bWJlciwgcHRyOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfbWVzaF9jb21wb25lbnRfc2V0X21vcnBoX3RhcmdldF93ZWlnaHQ6IChcbiAgICAgICAgaWQ6IG51bWJlcixcbiAgICAgICAgaW5kZXg6IG51bWJlcixcbiAgICAgICAgd2VpZ2h0OiBudW1iZXJcbiAgICApID0+IHZvaWQ7XG4gICAgX3dsX21lc2hfY29tcG9uZW50X3NldF9tb3JwaF90YXJnZXRfd2VpZ2h0czogKFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICBwdHI6IG51bWJlcixcbiAgICAgICAgY291bnQ6IG51bWJlclxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X2dldF9zdGF0aWM6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfc3RhdGljOiAoaWQ6IG51bWJlciwgZmxhZzogYm9vbGVhbikgPT4gdm9pZDtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X2dldF9raW5lbWF0aWM6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfa2luZW1hdGljOiAoaWQ6IG51bWJlciwga2luZW1hdGljOiBib29sZWFuKSA9PiB2b2lkO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfZ2V0X2dyYXZpdHk6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfZ3Jhdml0eTogKGlkOiBudW1iZXIsIGdyYXZpdHk6IGJvb2xlYW4pID0+IHZvaWQ7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfc2ltdWxhdGU6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfc2ltdWxhdGU6IChpZDogbnVtYmVyLCBzaW11bGF0aW9uOiBib29sZWFuKSA9PiB2b2lkO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfZ2V0X2FsbG93U2ltdWxhdGlvbjogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X3NldF9hbGxvd1NpbXVsYXRpb246IChpZDogbnVtYmVyLCBhbGxvd1NpbXVsYXRpb246IGJvb2xlYW4pID0+IHZvaWQ7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfYWxsb3dRdWVyeTogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X3NldF9hbGxvd1F1ZXJ5OiAoaWQ6IG51bWJlciwgYWxsb3dRdWVyeTogYm9vbGVhbikgPT4gdm9pZDtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X2dldF90cmlnZ2VyOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfc2V0X3RyaWdnZXI6IChpZDogbnVtYmVyLCB0cmlnZ2VyOiBib29sZWFuKSA9PiB2b2lkO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfZ2V0X3NoYXBlOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfc2V0X3NoYXBlOiAoaWQ6IG51bWJlciwgc2hhcGU6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X2dldF9zaGFwZV9kYXRhOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfc2V0X3NoYXBlX2RhdGE6IChpZDogbnVtYmVyLCBzaGFwZUluZGV4OiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfZXh0ZW50czogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X2dldF9zdGF0aWNGcmljdGlvbjogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X3NldF9zdGF0aWNGcmljdGlvbjogKGlkOiBudW1iZXIsIHZhbHVlOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfZHluYW1pY0ZyaWN0aW9uOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfc2V0X2R5bmFtaWNGcmljdGlvbjogKGlkOiBudW1iZXIsIHZhbHVlOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfYm91bmNpbmVzczogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X3NldF9ib3VuY2luZXNzOiAoaWQ6IG51bWJlciwgdmFsdWU6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X2dldF9saW5lYXJEYW1waW5nOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfc2V0X2xpbmVhckRhbXBpbmc6IChpZDogbnVtYmVyLCB2YWx1ZTogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfZ2V0X2FuZ3VsYXJEYW1waW5nOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfc2V0X2FuZ3VsYXJEYW1waW5nOiAoaWQ6IG51bWJlciwgdmFsdWU6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X2dldF9saW5lYXJWZWxvY2l0eTogKGlkOiBudW1iZXIsIHB0cjogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfbGluZWFyVmVsb2NpdHk6IChcbiAgICAgICAgaWQ6IG51bWJlcixcbiAgICAgICAgeDogbnVtYmVyLFxuICAgICAgICB5OiBudW1iZXIsXG4gICAgICAgIHo6IG51bWJlclxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X2dldF9hbmd1bGFyVmVsb2NpdHk6IChpZDogbnVtYmVyLCBwdHI6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfc2V0X2FuZ3VsYXJWZWxvY2l0eTogKFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICB4OiBudW1iZXIsXG4gICAgICAgIHk6IG51bWJlcixcbiAgICAgICAgejogbnVtYmVyXG4gICAgKSA9PiB2b2lkO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfZ2V0X2dyb3Vwc01hc2s6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfZ3JvdXBzTWFzazogKGlkOiBudW1iZXIsIGZsYWdzOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfYmxvY2tzTWFzazogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X3NldF9ibG9ja3NNYXNrOiAoaWQ6IG51bWJlciwgZmxhZ3M6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X2dldF9saW5lYXJMb2NrQXhpczogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X3NldF9saW5lYXJMb2NrQXhpczogKGlkOiBudW1iZXIsIGxvY2s6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X2dldF9hbmd1bGFyTG9ja0F4aXM6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfYW5ndWxhckxvY2tBeGlzOiAoaWQ6IG51bWJlciwgbG9jazogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfZ2V0X21hc3M6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfbWFzczogKGlkOiBudW1iZXIsIHZhbHVlOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9nZXRfb2Zmc2V0VHJhbnNsYXRpb246IChpZDogbnVtYmVyLCBvdXQ6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X2dldF9vZmZzZXRUcmFuc2Zvcm06IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfb2Zmc2V0VHJhbnNsYXRpb246IChcbiAgICAgICAgaWQ6IG51bWJlcixcbiAgICAgICAgeDogbnVtYmVyLFxuICAgICAgICB5OiBudW1iZXIsXG4gICAgICAgIHo6IG51bWJlclxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X3NldF9vZmZzZXRSb3RhdGlvbjogKFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICB4OiBudW1iZXIsXG4gICAgICAgIHk6IG51bWJlcixcbiAgICAgICAgejogbnVtYmVyLFxuICAgICAgICB3OiBudW1iZXJcbiAgICApID0+IHZvaWQ7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfc2xlZXBPbkFjdGl2YXRlOiAoaWQ6IG51bWJlciwgZmxhZzogYm9vbGVhbikgPT4gdm9pZDtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X2dldF9zbGVlcE9uQWN0aXZhdGU6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9zZXRfbWFzc1NwYWNlSW5lcnRpYVRlbnNvcjogKFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICB4OiBudW1iZXIsXG4gICAgICAgIHk6IG51bWJlcixcbiAgICAgICAgejogbnVtYmVyXG4gICAgKSA9PiB2b2lkO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfYWRkRm9yY2U6IChcbiAgICAgICAgaWQ6IG51bWJlcixcbiAgICAgICAgeDogbnVtYmVyLFxuICAgICAgICB5OiBudW1iZXIsXG4gICAgICAgIHo6IG51bWJlcixcbiAgICAgICAgbW9kZTogbnVtYmVyLFxuICAgICAgICBsb2NhbEZvcmNlOiBib29sZWFuXG4gICAgKSA9PiB2b2lkO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfYWRkRm9yY2VBdDogKFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICB4OiBudW1iZXIsXG4gICAgICAgIHk6IG51bWJlcixcbiAgICAgICAgejogbnVtYmVyLFxuICAgICAgICBtb2RlOiBudW1iZXIsXG4gICAgICAgIGxvY2FsRm9yY2U6IGJvb2xlYW4sXG4gICAgICAgIHBvc1g6IG51bWJlcixcbiAgICAgICAgcG9zWTogbnVtYmVyLFxuICAgICAgICBwb3NaOiBudW1iZXIsXG4gICAgICAgIGxvY2FsOiBib29sZWFuXG4gICAgKSA9PiB2b2lkO1xuICAgIF93bF9waHlzeF9jb21wb25lbnRfYWRkVG9ycXVlOiAoXG4gICAgICAgIGlkOiBudW1iZXIsXG4gICAgICAgIHg6IG51bWJlcixcbiAgICAgICAgeTogbnVtYmVyLFxuICAgICAgICB6OiBudW1iZXIsXG4gICAgICAgIG1vZGU6IG51bWJlclxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfcGh5c3hfY29tcG9uZW50X2FkZENhbGxiYWNrOiAoaWQ6IG51bWJlciwgb3RoZXJJZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3BoeXN4X2NvbXBvbmVudF9yZW1vdmVDYWxsYmFjazogKGlkOiBudW1iZXIsIGNhbGxiYWNrSWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9waHlzeF91cGRhdGVfZ2xvYmFsX3Bvc2U6IChvYmplY3Q6IG51bWJlciwgY29tcG9uZW50OiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX3BoeXN4X3JheV9jYXN0OiAoXG4gICAgICAgIHNjZW5lOiBudW1iZXIsXG4gICAgICAgIHg6IG51bWJlcixcbiAgICAgICAgeTogbnVtYmVyLFxuICAgICAgICB6OiBudW1iZXIsXG4gICAgICAgIGR4OiBudW1iZXIsXG4gICAgICAgIGR5OiBudW1iZXIsXG4gICAgICAgIGR6OiBudW1iZXIsXG4gICAgICAgIGdyb3VwTWFzazogbnVtYmVyLFxuICAgICAgICBvdXRQdHI6IG51bWJlcixcbiAgICAgICAgbWF4RGlzdGFuY2U6IG51bWJlclxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfcGh5c3hfc2V0X2NvbGxpc2lvbl9jYWxsYmFjazogKGNhbGxiYWNrOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX21lc2hfY3JlYXRlOiAoXG4gICAgICAgIGluZGljZXNQdHI6IG51bWJlcixcbiAgICAgICAgaW5kaWNlc1NpemU6IG51bWJlcixcbiAgICAgICAgaW5kZXhUeXBlOiBudW1iZXIsXG4gICAgICAgIHZlcnRleENvdW50OiBudW1iZXIsXG4gICAgICAgIHNraW5uaW5nVHlwZTogbnVtYmVyXG4gICAgKSA9PiBudW1iZXI7XG4gICAgX3dsX21lc2hfZ2V0X3ZlcnRleENvdW50OiAoaW5kZXg6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9tZXNoX2dldF9pbmRleERhdGE6IChpbmRleDogbnVtYmVyLCBvdXRQdHI6IG51bWJlciwgY291bnQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9tZXNoX3VwZGF0ZTogKGluZGV4OiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX21lc2hfZ2V0X2JvdW5kaW5nU3BoZXJlOiAoaW5kZXg6IG51bWJlciwgb3V0UHRyOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX21lc2hfZ2V0X2F0dHJpYnV0ZTogKGluZGV4OiBudW1iZXIsIGF0dHJpYnV0ZTogbnVtYmVyLCBvdXRQdHI6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfbWVzaF9kZXN0cm95OiAoaW5kZXg6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfbWVzaF9nZXRfYXR0cmlidXRlX3ZhbHVlczogKFxuICAgICAgICBhdHRyaWJ1dGU6IG51bWJlcixcbiAgICAgICAgc3JjRm9ybWF0U2l6ZTogbnVtYmVyLFxuICAgICAgICBzcmNQdHI6IG51bWJlcixcbiAgICAgICAgc3JjU3RyaWRlOiBudW1iZXIsXG4gICAgICAgIGRzdEZvcm1hdFNpemU6IG51bWJlcixcbiAgICAgICAgZGVzdFB0cjogbnVtYmVyLFxuICAgICAgICBkc3RTaXplOiBudW1iZXJcbiAgICApID0+IHZvaWQ7XG4gICAgX3dsX21lc2hfc2V0X2F0dHJpYnV0ZV92YWx1ZXM6IChcbiAgICAgICAgYXR0cmlidXRlOiBudW1iZXIsXG4gICAgICAgIHNyY0Zvcm1hdFNpemU6IG51bWJlcixcbiAgICAgICAgc3JjUHRyOiBudW1iZXIsXG4gICAgICAgIHNyY1NpemU6IG51bWJlcixcbiAgICAgICAgZHN0Rm9ybWF0U2l6ZTogbnVtYmVyLFxuICAgICAgICBkZXN0UHRyOiBudW1iZXIsXG4gICAgICAgIGRlc3RTdHJpZGU6IG51bWJlclxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfZm9udF9nZXRfZW1IZWlnaHQ6IChpbmRleDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX2ZvbnRfZ2V0X2NhcEhlaWdodDogKGluZGV4OiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfZm9udF9nZXRfeEhlaWdodDogKGluZGV4OiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfZm9udF9nZXRfb3V0bGluZVNpemU6IChpbmRleDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX21hdGVyaWFsX2NyZWF0ZTogKGRlZmluaXRpb25JbmRleDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX21hdGVyaWFsX2dldF9kZWZpbml0aW9uOiAoaW5kZXg6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9tYXRlcmlhbF9kZWZpbml0aW9uX2dldF9wYXJhbV9jb3VudDogKGluZGV4OiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfbWF0ZXJpYWxfZGVmaW5pdGlvbl9nZXRfcGFyYW1fbmFtZTogKGluZGV4OiBudW1iZXIsIHBhcmFtSW5kZXg6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9tYXRlcmlhbF9kZWZpbml0aW9uX2dldF9wYXJhbV90eXBlOiAoaW5kZXg6IG51bWJlciwgcGFyYW1JbmRleDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX21hdGVyaWFsX2dldF9waXBlbGluZTogKGluZGV4OiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfbWF0ZXJpYWxfY2xvbmU6IChpbmRleDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX21hdGVyaWFsX2dldF9wYXJhbV9pbmRleDogKGluZGV4OiBudW1iZXIsIG5hbWVQdHI6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9tYXRlcmlhbF9nZXRfcGFyYW1fdHlwZTogKGluZGV4OiBudW1iZXIsIHBhcmFtSW5kZXg6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9tYXRlcmlhbF9nZXRfcGFyYW1fdmFsdWU6IChcbiAgICAgICAgaW5kZXg6IG51bWJlcixcbiAgICAgICAgcGFyYW1JbmRleDogbnVtYmVyLFxuICAgICAgICBvdXRQdHI6IG51bWJlclxuICAgICkgPT4gbnVtYmVyO1xuICAgIF93bF9tYXRlcmlhbF9zZXRfcGFyYW1fdmFsdWVfdWludDogKFxuICAgICAgICBpbmRleDogbnVtYmVyLFxuICAgICAgICBwYXJhbUlkOiBudW1iZXIsXG4gICAgICAgIHZhbHVlSWQ6IG51bWJlclxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfbWF0ZXJpYWxfc2V0X3BhcmFtX3ZhbHVlX2Zsb2F0OiAoXG4gICAgICAgIGluZGV4OiBudW1iZXIsXG4gICAgICAgIHBhcmFtSWQ6IG51bWJlcixcbiAgICAgICAgcHRyOiBudW1iZXIsXG4gICAgICAgIGNvdW50OiBudW1iZXJcbiAgICApID0+IHZvaWQ7XG4gICAgX3dsX2ltYWdlX2NyZWF0ZTogKGpzSW1hZ2U6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfdGV4dHVyZV9jcmVhdGU6IChpbWFnZTogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX2ltYWdlX3NpemU6IChpbmRleDogbnVtYmVyLCBvdXQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9pbWFnZV9nZXRfanNJbWFnZV9pbmRleDogKGluZGV4OiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfdGV4dHVyZV9nZXRfaW1hZ2VfaW5kZXg6IChpbmRleDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3JlbmRlcmVyX3VwZGF0ZUltYWdlOiAoXG4gICAgICAgIGltYWdlSW5kZXg6IG51bWJlcixcbiAgICAgICAgeE9mZnNldD86IG51bWJlcixcbiAgICAgICAgeU9mZnNldD86IG51bWJlclxuICAgICkgPT4gbnVtYmVyO1xuICAgIF93bF90ZXh0dXJlX2Rlc3Ryb3k6IChpZDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9hbmltYXRpb25fZ2V0X2R1cmF0aW9uOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9hbmltYXRpb25fZ2V0X3RyYWNrQ291bnQ6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX2FuaW1hdGlvbl9yZXRhcmdldFRvU2tpbjogKGlkOiBudW1iZXIsIHRhcmdldElkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfYW5pbWF0aW9uX3JldGFyZ2V0OiAoaWQ6IG51bWJlciwgcHRyOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfb2JqZWN0X2lkOiAoc2NlbmU6IG51bWJlciwgaW5kZXg6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9vYmplY3RfaW5kZXg6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX29iamVjdF9uYW1lOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9vYmplY3Rfc2V0X25hbWU6IChpZDogbnVtYmVyLCBwdHI6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfb2JqZWN0X3JlbW92ZTogKGlkOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX29iamVjdF9tYXJrZWREZXN0cm95ZWQ6IChpZDogbnVtYmVyKSA9PiBib29sZWFuO1xuICAgIF93bF9vYmplY3RfcGFyZW50OiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9vYmplY3RfZ2V0X2NoaWxkcmVuX2NvdW50OiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9vYmplY3RfZ2V0X2NoaWxkcmVuOiAoaWQ6IG51bWJlciwgb3V0UHRyOiBudW1iZXIsIGNvdW50OiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfb2JqZWN0X3NldF9wYXJlbnQ6IChpZDogbnVtYmVyLCBwYXJlbnRJZDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9vYmplY3RfY2xvbmU6IChpZDogbnVtYmVyLCBwYXJlbnRJZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX29iamVjdF9yZXNldF9zY2FsaW5nOiAoaWQ6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfb2JqZWN0X3Jlc2V0X3RyYW5zbGF0aW9uX3JvdGF0aW9uOiAoaWQ6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfb2JqZWN0X3Jlc2V0X3JvdGF0aW9uOiAoaWQ6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfb2JqZWN0X3Jlc2V0X3RyYW5zbGF0aW9uOiAoaWQ6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfb2JqZWN0X3RyYW5zbGF0ZTogKGlkOiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX29iamVjdF90cmFuc2xhdGVfb2JqOiAoaWQ6IG51bWJlciwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfb2JqZWN0X3RyYW5zbGF0ZV93b3JsZDogKGlkOiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX29iamVjdF9yb3RhdGVfYXhpc19hbmdsZTogKFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICB4OiBudW1iZXIsXG4gICAgICAgIHk6IG51bWJlcixcbiAgICAgICAgejogbnVtYmVyLFxuICAgICAgICBkZWc6IG51bWJlclxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfb2JqZWN0X3JvdGF0ZV9heGlzX2FuZ2xlX3JhZDogKFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICB4OiBudW1iZXIsXG4gICAgICAgIHk6IG51bWJlcixcbiAgICAgICAgejogbnVtYmVyLFxuICAgICAgICByYWQ6IG51bWJlclxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfb2JqZWN0X3JvdGF0ZV9heGlzX2FuZ2xlX29iajogKFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICB4OiBudW1iZXIsXG4gICAgICAgIHk6IG51bWJlcixcbiAgICAgICAgejogbnVtYmVyLFxuICAgICAgICBkZWc6IG51bWJlclxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfb2JqZWN0X3JvdGF0ZV9heGlzX2FuZ2xlX3JhZF9vYmo6IChcbiAgICAgICAgaWQ6IG51bWJlcixcbiAgICAgICAgeDogbnVtYmVyLFxuICAgICAgICB5OiBudW1iZXIsXG4gICAgICAgIHo6IG51bWJlcixcbiAgICAgICAgcmFkOiBudW1iZXJcbiAgICApID0+IHZvaWQ7XG4gICAgX3dsX29iamVjdF9yb3RhdGVfcXVhdDogKFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICB4OiBudW1iZXIsXG4gICAgICAgIHk6IG51bWJlcixcbiAgICAgICAgejogbnVtYmVyLFxuICAgICAgICB3OiBudW1iZXJcbiAgICApID0+IHZvaWQ7XG4gICAgX3dsX29iamVjdF9yb3RhdGVfcXVhdF9vYmo6IChcbiAgICAgICAgaWQ6IG51bWJlcixcbiAgICAgICAgeDogbnVtYmVyLFxuICAgICAgICB5OiBudW1iZXIsXG4gICAgICAgIHo6IG51bWJlcixcbiAgICAgICAgdzogbnVtYmVyXG4gICAgKSA9PiB2b2lkO1xuICAgIF93bF9vYmplY3Rfc2NhbGU6IChpZDogbnVtYmVyLCB4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9vYmplY3RfdHJhbnNfbG9jYWw6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX29iamVjdF9nZXRfdHJhbnNsYXRpb25fbG9jYWw6IChpZDogbnVtYmVyLCBvdXRQdHI6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfb2JqZWN0X3NldF90cmFuc2xhdGlvbl9sb2NhbDogKGlkOiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX29iamVjdF9nZXRfdHJhbnNsYXRpb25fd29ybGQ6IChpZDogbnVtYmVyLCBvdXRQdHI6IG51bWJlcikgPT4gdm9pZDtcbiAgICBfd2xfb2JqZWN0X3NldF90cmFuc2xhdGlvbl93b3JsZDogKGlkOiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX29iamVjdF90cmFuc193b3JsZDogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfb2JqZWN0X3RyYW5zX3dvcmxkX3RvX2xvY2FsOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9vYmplY3Rfc2NhbGluZ19sb2NhbDogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfb2JqZWN0X3NjYWxpbmdfd29ybGQ6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX29iamVjdF9zZXRfc2NhbGluZ19sb2NhbDogKGlkOiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX29iamVjdF9zZXRfc2NhbGluZ193b3JsZDogKGlkOiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX29iamVjdF9zY2FsaW5nX3dvcmxkX3RvX2xvY2FsOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9vYmplY3Rfc2V0X3JvdGF0aW9uX2xvY2FsOiAoXG4gICAgICAgIGlkOiBudW1iZXIsXG4gICAgICAgIHg6IG51bWJlcixcbiAgICAgICAgeTogbnVtYmVyLFxuICAgICAgICB6OiBudW1iZXIsXG4gICAgICAgIHc6IG51bWJlclxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfb2JqZWN0X3NldF9yb3RhdGlvbl93b3JsZDogKFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICB4OiBudW1iZXIsXG4gICAgICAgIHk6IG51bWJlcixcbiAgICAgICAgejogbnVtYmVyLFxuICAgICAgICB3OiBudW1iZXJcbiAgICApID0+IHZvaWQ7XG4gICAgX3dsX29iamVjdF90cmFuc2Zvcm1WZWN0b3JXb3JsZDogKGlkOiBudW1iZXIsIHB0cjogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX29iamVjdF90cmFuc2Zvcm1WZWN0b3JMb2NhbDogKGlkOiBudW1iZXIsIHB0cjogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX29iamVjdF90cmFuc2Zvcm1Qb2ludFdvcmxkOiAoaWQ6IG51bWJlciwgcHRyOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfb2JqZWN0X3RyYW5zZm9ybVBvaW50TG9jYWw6IChpZDogbnVtYmVyLCBwdHI6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9vYmplY3RfdHJhbnNmb3JtVmVjdG9ySW52ZXJzZVdvcmxkOiAoaWQ6IG51bWJlciwgcHRyOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfb2JqZWN0X3RyYW5zZm9ybVZlY3RvckludmVyc2VMb2NhbDogKGlkOiBudW1iZXIsIHB0cjogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX29iamVjdF90cmFuc2Zvcm1Qb2ludEludmVyc2VXb3JsZDogKGlkOiBudW1iZXIsIHB0cjogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX29iamVjdF90cmFuc2Zvcm1Qb2ludEludmVyc2VMb2NhbDogKGlkOiBudW1iZXIsIHB0cjogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX29iamVjdF90b1dvcmxkU3BhY2VUcmFuc2Zvcm06IChpZDogbnVtYmVyLCBwdHI6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9vYmplY3RfdG9PYmplY3RTcGFjZVRyYW5zZm9ybTogKGlkOiBudW1iZXIsIHB0cjogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX29iamVjdF9sb29rQXQ6IChcbiAgICAgICAgaWQ6IG51bWJlcixcbiAgICAgICAgeDogbnVtYmVyLFxuICAgICAgICB5OiBudW1iZXIsXG4gICAgICAgIHo6IG51bWJlcixcbiAgICAgICAgdXBYOiBudW1iZXIsXG4gICAgICAgIHVwWTogbnVtYmVyLFxuICAgICAgICB1cFo6IG51bWJlclxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfb2JqZWN0X3NldF9kaXJ0eTogKGlkOiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX2dldF9qc19jb21wb25lbnRfaW5kZXg6IChpZDogbnVtYmVyLCBvdXRQdHI6IG51bWJlciwgY291bnQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9nZXRfanNfY29tcG9uZW50X2luZGV4X2Zvcl9pZDogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfZ2V0X2NvbXBvbmVudF9pZDogKGlkOiBudW1iZXIsIG1hbmFnZXJJZDogbnVtYmVyLCBpbmRleDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX29iamVjdF9nZXRfY29tcG9uZW50czogKGlkOiBudW1iZXIsIG91dFB0cjogbnVtYmVyLCBjb3VudDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX29iamVjdF9nZXRfY29tcG9uZW50X3R5cGVzOiAoaWQ6IG51bWJlciwgb3V0UHRyOiBudW1iZXIsIGNvdW50OiBudW1iZXIpID0+IHZvaWQ7XG4gICAgX3dsX29iamVjdF9hZGRfanNfY29tcG9uZW50OiAoaWQ6IG51bWJlciwgdHlwZUlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfb2JqZWN0X2FkZF9jb21wb25lbnQ6IChpZDogbnVtYmVyLCB0eXBlSWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9vYmplY3RfaXNfY2hhbmdlZDogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfb2JqZWN0X2ZpbmRCeU5hbWU6IChcbiAgICAgICAgb2JqOiBudW1iZXIsXG4gICAgICAgIG5hbWU6IG51bWJlcixcbiAgICAgICAgaW5kZXhQdHI6IG51bWJlcixcbiAgICAgICAgY2hpbGRQdHI6IG51bWJlcixcbiAgICAgICAgb3V0UHRyOiBudW1iZXIsXG4gICAgICAgIGNvdW50OiBudW1iZXJcbiAgICApID0+IG51bWJlcjtcbiAgICBfd2xfb2JqZWN0X2ZpbmRCeU5hbWVSZWN1cnNpdmU6IChcbiAgICAgICAgb2JqOiBudW1iZXIsXG4gICAgICAgIG5hbWU6IG51bWJlcixcbiAgICAgICAgaW5kZXhQdHI6IG51bWJlcixcbiAgICAgICAgb3V0UHRyOiBudW1iZXIsXG4gICAgICAgIGNvdW50OiBudW1iZXJcbiAgICApID0+IG51bWJlcjtcbiAgICBfd2xfY29tcG9uZW50X21hbmFnZXJfbmFtZTogKHNjZW5lOiBudW1iZXIsIGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfc2tpbl9nZXRfam9pbnRfY291bnQ6IChpZDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX3NraW5fam9pbnRfaWRzOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9za2luX2ludmVyc2VfYmluZF90cmFuc2Zvcm1zOiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9za2luX2ludmVyc2VfYmluZF9zY2FsaW5nczogKGlkOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfbW9ycGhfdGFyZ2V0c19nZXRfdGFyZ2V0X2NvdW50OiAoaWQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9tb3JwaF90YXJnZXRzX2dldF90YXJnZXRfbmFtZTogKGlkOiBudW1iZXIsIHRhcmdldDogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX21vcnBoX3RhcmdldHNfZ2V0X3RhcmdldF9pbmRleDogKGlkOiBudW1iZXIsIG5hbWVQdHI6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9tb3JwaF90YXJnZXRfd2VpZ2h0c19nZXRfd2VpZ2h0OiAoaWQ6IG51bWJlciwgdGFyZ2V0OiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfbW9ycGhfdGFyZ2V0X3dlaWdodHNfc2V0X3dlaWdodDogKFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICB0YXJnZXQ6IG51bWJlcixcbiAgICAgICAgd2VpZ2h0OiBudW1iZXJcbiAgICApID0+IHZvaWQ7XG4gICAgX3dsX21hdGhfY3ViaWNIZXJtaXRlOiAoXG4gICAgICAgIGE6IG51bWJlcixcbiAgICAgICAgYjogbnVtYmVyLFxuICAgICAgICBjOiBudW1iZXIsXG4gICAgICAgIGQ6IG51bWJlcixcbiAgICAgICAgZjogbnVtYmVyLFxuICAgICAgICBlOiBudW1iZXIsXG4gICAgICAgIGlzUXVhdDogYm9vbGVhblxuICAgICkgPT4gdm9pZDtcbiAgICBfd2xfaTE4bl9zZXRMYW5ndWFnZTogKHB0cjogbnVtYmVyKSA9PiB2b2lkO1xuICAgIF93bF9pMThuX2N1cnJlbnRMYW5ndWFnZTogKCkgPT4gbnVtYmVyO1xuICAgIF93bF9pMThuX2N1cnJlbnRMYW5ndWFnZUluZGV4OiAoKSA9PiBudW1iZXI7XG4gICAgX3dsX2kxOG5fdHJhbnNsYXRlOiAocHRyOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfaTE4bl9sYW5ndWFnZUNvdW50OiAoKSA9PiBudW1iZXI7XG4gICAgX3dsX2kxOG5fbGFuZ3VhZ2VJbmRleDogKHB0cjogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX3dsX2kxOG5fbGFuZ3VhZ2VDb2RlOiAoaW5kZXg6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIF93bF9pMThuX2xhbmd1YWdlTmFtZTogKGluZGV4OiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBfd2xfaTE4bl9sYW5ndWFnZUZpbGU6IChpbmRleDogbnVtYmVyKSA9PiBudW1iZXI7XG59XG5cbi8qXG4gKiBBcGkgPD4gUnVudGltZSBjb21wYXRpYmlsaXR5LlxuICpcbiAqIFNvbWUgZmVhdHVyZXMgZXhwb3NlZCBpbiB0aGUgQVBJIGFyZSBvbmx5IGF2YWlsYWJsZSBmcm9tIGEgc3BlY2lmaWNcbiAqIHJ1bnRpbWUgdmVyc2lvbi5cbiAqXG4gKiBFdmVyeSBhZGRlZCBmZWF0dXJlIG11c3QgdGhyb3cgYnkgZGVmYXVsdC4gSWYgdGhlIHJ1bnRpbWUgbG9hZGVkXG4gKiBoYXMgdGhlIHNwZWNpZmljIGZlYXR1cmUsIHRoZSBtZXRob2Qgd2lsbCBiZSBvdmVyd3JpdHRlbiBieSBFbXNjcmlwdGVuXG4gKiB1cG9uIGxvYWRpbmcuXG4gKi9cblxuLyoqXG4gKiBUaHJvd2luZyBmdW5jdGlvbiB1c2VkIGZvciBmZWF0dXJlcyBhZGRlZCBpbiBhIHBhdGNoIHZlcnNpb24uXG4gKlxuICogIyMjIyBVc2FnZVxuICpcbiAqIGBgYHRzXG4gKiBjb25zdCByZXF1aXJlUnVudGltZTFfMV8xID0gdGhyb3dJbnZhbGlkUnVudGltZSgnMS4xLjEnKTtcbiAqIFdBU00ucHJvdG90eXBlLl93bF9uZXdfZnVuY3Rpb24gPSByZXF1aXJlUnVudGltZTFfMV8xO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHZlcnNpb24gVGhlIHZlcnNpb24gaW4gd2hpY2ggdGhlIGZlYXR1cmUgd2FzIGFkZGVkLlxuICogQHJldHVybnMgQSBmdW5jdGlvbiB0aGF0IHdpbGwgdGhyb3cgd2hlbiBjYWxsZWQuXG4gKi9cbmZ1bmN0aW9uIHRocm93SW52YWxpZFJ1bnRpbWUodmVyc2lvbjogc3RyaW5nKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYEZlYXR1cmUgYWRkZWQgaW4gdmVyc2lvbiAke3ZlcnNpb259LmAgK1xuICAgICAgICAgICAgICAgIGBcXG5cXHRcdTIxOTIgUGxlYXNlIHVzZSBhIFdvbmRlcmxhbmQgRW5naW5lIGVkaXRvciB2ZXJzaW9uID49ICR7dmVyc2lvbn1gXG4gICAgICAgICk7XG4gICAgfTtcbn1cblxuLyoqIEB0b2RvIFJlbW92ZSBhdCAxLjMuMCAqL1xuY29uc3QgcmVxdWlyZVJ1bnRpbWUxXzJfMSA9IHRocm93SW52YWxpZFJ1bnRpbWUoJzEuMi4xJyk7XG5XQVNNLnByb3RvdHlwZS5fd2xfdGV4dF9jb21wb25lbnRfZ2V0X3dyYXBNb2RlID0gcmVxdWlyZVJ1bnRpbWUxXzJfMTtcbldBU00ucHJvdG90eXBlLl93bF90ZXh0X2NvbXBvbmVudF9zZXRfd3JhcE1vZGUgPSByZXF1aXJlUnVudGltZTFfMl8xO1xuV0FTTS5wcm90b3R5cGUuX3dsX3RleHRfY29tcG9uZW50X2dldF93cmFwV2lkdGggPSByZXF1aXJlUnVudGltZTFfMl8xO1xuV0FTTS5wcm90b3R5cGUuX3dsX3RleHRfY29tcG9uZW50X3NldF93cmFwV2lkdGggPSByZXF1aXJlUnVudGltZTFfMl8xO1xuV0FTTS5wcm90b3R5cGUuX3dsX2ZvbnRfZ2V0X291dGxpbmVTaXplID0gcmVxdWlyZVJ1bnRpbWUxXzJfMTtcbldBU00ucHJvdG90eXBlLl93bF9zY2VuZV9jcmVhdGVfY2h1bmtlZF9zdGFydCA9IHJlcXVpcmVSdW50aW1lMV8yXzE7XG5XQVNNLnByb3RvdHlwZS5fd2xfc2NlbmVfY3JlYXRlX2NodW5rZWRfYnVmZmVyX3NpemUgPSByZXF1aXJlUnVudGltZTFfMl8xO1xuV0FTTS5wcm90b3R5cGUuX3dsX3NjZW5lX2NyZWF0ZV9jaHVua2VkX25leHQgPSByZXF1aXJlUnVudGltZTFfMl8xO1xuV0FTTS5wcm90b3R5cGUuX3dsX3NjZW5lX2NyZWF0ZV9jaHVua2VkX2Fib3J0ID0gcmVxdWlyZVJ1bnRpbWUxXzJfMTtcbldBU00ucHJvdG90eXBlLl93bF9zY2VuZV9jcmVhdGVfY2h1bmtlZF9lbmRfcHJlZmFiID0gcmVxdWlyZVJ1bnRpbWUxXzJfMTtcbldBU00ucHJvdG90eXBlLl93bF9zY2VuZV9jcmVhdGVfY2h1bmtlZF9lbmRfbWFpbiA9IHJlcXVpcmVSdW50aW1lMV8yXzE7XG5XQVNNLnByb3RvdHlwZS5fd2xfc2NlbmVfY3JlYXRlX2NodW5rZWRfZW5kX3F1ZXVlZCA9IHJlcXVpcmVSdW50aW1lMV8yXzE7XG5jb25zdCByZXF1aXJlUnVudGltZTFfMl8yID0gdGhyb3dJbnZhbGlkUnVudGltZSgnMS4yLjInKTtcbldBU00ucHJvdG90eXBlLl93bF92aWV3X2NvbXBvbmVudF9nZXRfcHJvamVjdGlvblR5cGUgPSByZXF1aXJlUnVudGltZTFfMl8yO1xuV0FTTS5wcm90b3R5cGUuX3dsX3ZpZXdfY29tcG9uZW50X3NldF9wcm9qZWN0aW9uVHlwZSA9IHJlcXVpcmVSdW50aW1lMV8yXzI7XG5XQVNNLnByb3RvdHlwZS5fd2xfdmlld19jb21wb25lbnRfZ2V0X2V4dGVudCA9IHJlcXVpcmVSdW50aW1lMV8yXzI7XG5XQVNNLnByb3RvdHlwZS5fd2xfdmlld19jb21wb25lbnRfc2V0X2V4dGVudCA9IHJlcXVpcmVSdW50aW1lMV8yXzI7XG5XQVNNLnByb3RvdHlwZS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9nZXRfcm9vdE1vdGlvbk1vZGUgPSByZXF1aXJlUnVudGltZTFfMl8yO1xuV0FTTS5wcm90b3R5cGUuX3dsX2FuaW1hdGlvbl9jb21wb25lbnRfc2V0X3Jvb3RNb3Rpb25Nb2RlID0gcmVxdWlyZVJ1bnRpbWUxXzJfMjtcbldBU00ucHJvdG90eXBlLl93bF9hbmltYXRpb25fY29tcG9uZW50X2dldF9yb290TW90aW9uX3RyYW5zbGF0aW9uID0gcmVxdWlyZVJ1bnRpbWUxXzJfMjtcbldBU00ucHJvdG90eXBlLl93bF9hbmltYXRpb25fY29tcG9uZW50X2dldF9yb290TW90aW9uX3JvdGF0aW9uID0gcmVxdWlyZVJ1bnRpbWUxXzJfMjtcbmNvbnN0IHJlcXVpcmVSdW50aW1lMV8yXzMgPSB0aHJvd0ludmFsaWRSdW50aW1lKCcxLjIuMycpO1xuV0FTTS5wcm90b3R5cGUuX3dsX3NjZW5lX2Vudmlyb25tZW50X3NldF9pbnRlbnNpdHkgPSByZXF1aXJlUnVudGltZTFfMl8zO1xuV0FTTS5wcm90b3R5cGUuX3dsX3NjZW5lX2Vudmlyb25tZW50X2dldF9pbnRlbnNpdHkgPSByZXF1aXJlUnVudGltZTFfMl8zO1xuV0FTTS5wcm90b3R5cGUuX3dsX3NjZW5lX2Vudmlyb25tZW50X3NldF90aW50ID0gcmVxdWlyZVJ1bnRpbWUxXzJfMztcbldBU00ucHJvdG90eXBlLl93bF9zY2VuZV9lbnZpcm9ubWVudF9nZXRfdGludCA9IHJlcXVpcmVSdW50aW1lMV8yXzM7XG5XQVNNLnByb3RvdHlwZS5fd2xfc2NlbmVfZW52aXJvbm1lbnRfc2V0X2NvZWZmaWNpZW50cyA9IHJlcXVpcmVSdW50aW1lMV8yXzM7XG5XQVNNLnByb3RvdHlwZS5fd2xfc2NlbmVfZW52aXJvbm1lbnRfZ2V0X2NvZWZmaWNpZW50cyA9IHJlcXVpcmVSdW50aW1lMV8yXzM7XG5XQVNNLnByb3RvdHlwZS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9nZXRfaXRlcmF0aW9uID0gcmVxdWlyZVJ1bnRpbWUxXzJfMztcbldBU00ucHJvdG90eXBlLl93bF9hbmltYXRpb25fY29tcG9uZW50X2dldF9wb3NpdGlvbiA9IHJlcXVpcmVSdW50aW1lMV8yXzM7XG5XQVNNLnByb3RvdHlwZS5fd2xfYW5pbWF0aW9uX2NvbXBvbmVudF9nZXRfZHVyYXRpb24gPSByZXF1aXJlUnVudGltZTFfMl8zO1xuV0FTTS5wcm90b3R5cGUuX3dsX3JlbmRlcmVyX3N0cmVhbWluZ19pZGxlID0gcmVxdWlyZVJ1bnRpbWUxXzJfMztcbiIsICIvKipcbiAqIFRoaXMgZmlsZSBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZC5cbiAqXG4gKiAqKkRvIG5vdCoqIG1vZGlmeSB0aGlzIGZpbGUgZGlyZWN0bHksIGJ1dCBpbnN0ZWFkIHVwZGF0ZVxuICogdGhlICd3cml0ZS12ZXJzaW9uLm1qcycgc2NyaXB0LlxuICovXG5cbi8qKlxuICogVmVyc2lvbiB0eXBlIGZvbGxvd2luZyBhIHN1YnNldCBvZiB0aGUgU2VtYW50aWMgVmVyc2lvbmluZyBzcGVjaWZpY2F0aW9uLlxuICovXG5leHBvcnQgdHlwZSBWZXJzaW9uID0ge21ham9yOiBudW1iZXIsIG1pbm9yOiBudW1iZXIsIHBhdGNoOiBudW1iZXIsIHJjOiBudW1iZXJ9O1xuXG4vKiogVmVyc2lvbiBvZiB0aGlzIEFQSS4gKi9cbmV4cG9ydCBjb25zdCBBUElWZXJzaW9uOiBWZXJzaW9uID0ge1xuICAgIG1ham9yOiAxLFxuICAgIG1pbm9yOiAyLFxuICAgIHBhdGNoOiA0LFxuICAgIHJjOiAwXG59O1xuIiwgImltcG9ydCB7c2ltZCwgdGhyZWFkc30gZnJvbSAnd2FzbS1mZWF0dXJlLWRldGVjdCc7XG5pbXBvcnQge1dvbmRlcmxhbmRFbmdpbmV9IGZyb20gJy4vZW5naW5lLmpzJztcbmltcG9ydCB7TG9nTGV2ZWx9IGZyb20gJy4vdXRpbHMvbG9nZ2VyLmpzJztcbmltcG9ydCB7V0FTTX0gZnJvbSAnLi93YXNtLmpzJztcblxuaW1wb3J0IHtBUElWZXJzaW9uLCBWZXJzaW9ufSBmcm9tICcuL3ZlcnNpb24uanMnO1xuaW1wb3J0IHtnZXRCYXNlVXJsfSBmcm9tICcuL3V0aWxzL2ZldGNoLmpzJztcblxuZXhwb3J0ICogZnJvbSAnLi91dGlscy9pbmRleC5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2RlY29yYXRvcnMuanMnO1xuZXhwb3J0ICogZnJvbSAnLi93b25kZXJsYW5kLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vZW5naW5lLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vcHJvcGVydHkuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9wcmVmYWIuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9zY2VuZS5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3NjZW5lLWdsdGYuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9yZXNvdXJjZXMvcmVzb3VyY2UuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9yZXNvdXJjZXMvbWF0ZXJpYWwtbWFuYWdlci5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3Jlc291cmNlcy9tZXNoLW1hbmFnZXIuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9yZXNvdXJjZXMvdGV4dHVyZS1tYW5hZ2VyLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vdHlwZXMuanMnO1xuZXhwb3J0ICogZnJvbSAnLi92ZXJzaW9uLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vd2FzbS5qcyc7XG5cbi8qKiBSZWxhdGl2ZSBkZWZhdWx0IHBhdGggZm9yIHRoZSBsb2FkaW5nIHNjcmVlbi4gKi9cbmNvbnN0IExPQURJTkdfU0NSRUVOX1BBVEggPSAnV29uZGVybGFuZFJ1bnRpbWUtTG9hZGluZ1NjcmVlbi5iaW4nO1xuXG5mdW5jdGlvbiBsb2FkU2NyaXB0KHNjcmlwdFVSTDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXM6ICgpID0+IHZvaWQsIHJlaikgPT4ge1xuICAgICAgICBjb25zdCBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHMpO1xuICAgICAgICBzLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobm9kZSk7XG4gICAgICAgICAgICByZXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgcy5vbmVycm9yID0gKGUpID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobm9kZSk7XG4gICAgICAgICAgICByZWooZSk7XG4gICAgICAgIH07XG4gICAgICAgIHMuc3JjID0gc2NyaXB0VVJMO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIEZpbmRzIHdoZXRoZXIgc2ltZCAmIHRocmVhZGluZyBhcmUgc3VwcG9ydGVkIG9yIG5vdC5cbiAqXG4gKiBAcmV0dXJucyBBbiBvYmplY3QgY29udGFpbmluZyBib29sZWFuIGZvciBzaW1kIGFuZCB0aHJlYWQuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGRldGVjdEZlYXR1cmVzKCk6IFByb21pc2U8e1xuICAgIHNpbWRTdXBwb3J0ZWQ6IGJvb2xlYW47XG4gICAgdGhyZWFkc1N1cHBvcnRlZDogYm9vbGVhbjtcbn0+IHtcbiAgICBsZXQgW3NpbWRTdXBwb3J0ZWQsIHRocmVhZHNTdXBwb3J0ZWRdID0gYXdhaXQgUHJvbWlzZS5hbGwoW3NpbWQoKSwgdGhyZWFkcygpXSk7XG4gICAgaWYgKHNpbWRTdXBwb3J0ZWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1dBU00gU0lNRCBpcyBzdXBwb3J0ZWQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1dBU00gU0lNRCBpcyBub3Qgc3VwcG9ydGVkJyk7XG4gICAgfVxuICAgIGlmICh0aHJlYWRzU3VwcG9ydGVkKSB7XG4gICAgICAgIGlmIChzZWxmLmNyb3NzT3JpZ2luSXNvbGF0ZWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdXQVNNIFRocmVhZHMgaXMgc3VwcG9ydGVkJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgICAgJ1dBU00gVGhyZWFkcyBpcyBzdXBwb3J0ZWQsIGJ1dCB0aGUgcGFnZSBpcyBub3QgY3Jvc3NPcmlnaW5Jc29sYXRlZCwgdGhlcmVmb3JlIHRocmVhZCBzdXBwb3J0IGlzIGRpc2FibGVkLidcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1dBU00gVGhyZWFkcyBpcyBub3Qgc3VwcG9ydGVkJyk7XG4gICAgfVxuXG4gICAgdGhyZWFkc1N1cHBvcnRlZCA9IHRocmVhZHNTdXBwb3J0ZWQgJiYgc2VsZi5jcm9zc09yaWdpbklzb2xhdGVkO1xuICAgIHJldHVybiB7XG4gICAgICAgIHNpbWRTdXBwb3J0ZWQsXG4gICAgICAgIHRocmVhZHNTdXBwb3J0ZWQsXG4gICAgfTtcbn1cblxuLyoqXG4gKiBPcHRpb25zIGZvciB7QGxpbmsgTG9hZFJ1bnRpbWVPcHRpb25zLnhyT2ZmZXJTZXNzaW9ufVxuICpcbiAqIEBzaW5jZSAxLjEuNVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFhST2ZmZXJTZXNzaW9uT3B0aW9ucyB7XG4gICAgLyoqXG4gICAgICogTW9kZSB0byBvZmZlciBYUiBzZXNzaW9uIHdpdGguIElmIHNldCB0byBgJ2F1dG8nYCwgb2ZmZXJzIGEgc2Vzc2lvblxuICAgICAqIHdpdGggdGhlIGZpcnN0IHN1cHBvcnRlZCBtb2RlIGluIHRoZSBmb2xsb3dpbmcgb3JkZXI6XG4gICAgICogLSBWUlxuICAgICAqIC0gQVJcbiAgICAgKiAtIGlubGluZVxuICAgICAqL1xuICAgIG1vZGU6IFhSU2Vzc2lvbk1vZGUgfCAnYXV0byc7XG4gICAgLyoqIFJlcXVpcmVkIGZlYXR1cmVzIGZvciB0aGUgb2ZmZXJlZCBYUiBzZXNzaW9uICovXG4gICAgZmVhdHVyZXM6IHN0cmluZ1tdO1xuICAgIC8qKiBPcHRpb25hbCBmZWF0dXJlcyBmb3IgdGhlIG9mZmVyZWQgWFIgc2Vzc2lvbiAqL1xuICAgIG9wdGlvbmFsRmVhdHVyZXM6IHN0cmluZ1tdO1xufVxuXG4vKipcbiAqIE9wdGlvbnMgdG8gZm9yd2FyZCB0byB7QGxpbmsgbG9hZFJ1bnRpbWV9XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTG9hZFJ1bnRpbWVPcHRpb25zIHtcbiAgICAvKipcbiAgICAgKiBJZiBgdHJ1ZWAsIGZvcmNlcyB0aGUgcnVudGltZSB0byBsb2FkIHRoZSBTSU1ELWNvbXBhdGlibGUgdmVyc2lvbi5cbiAgICAgKiBJZiBgdW5kZWZpbmVkYCwgcGVyZm9ybXMgYnJvd3NlciBmZWF0dXJlIGRldGVjdGlvbiB0byBjaGVjayB3aGV0aGVyIFNJTUQgaXMgc3VwcG9ydGVkIG9yIG5vdC5cbiAgICAgKi9cbiAgICBzaW1kOiBib29sZWFuO1xuICAgIC8qKlxuICAgICAqIElmIGB0cnVlYCwgZm9yY2VzIHRoZSBydW50aW1lIHRvIGxvYWQgdGhlIHRocmVhZHMtY29tcGF0aWJsZSB2ZXJzaW9uLlxuICAgICAqIElmIGB1bmRlZmluZWRgLCBwZXJmb3JtcyBicm93c2VyIGZlYXR1cmUgZGV0ZWN0aW9uIHRvIGNoZWNrIHdoZXRoZXIgdGhyZWFkcyBhcmUgc3VwcG9ydGVkIG9yIG5vdC5cbiAgICAgKi9cbiAgICB0aHJlYWRzOiBib29sZWFuO1xuICAgIC8qKlxuICAgICAqIElmIGB0cnVlYCwgZm9yY2VzIHRoZSBydW50aW1lIHRvIGxvYWQgdGhlIHdlYmdwdS1jb21wYXRpYmxlIHZlcnNpb24uXG4gICAgICovXG4gICAgd2ViZ3B1OiBib29sZWFuO1xuICAgIC8qKlxuICAgICAqIElmIGB0cnVlYCwgZm9yY2VzIHRoZSBydW50aW1lIHRvIGxvYWQgYSBwaHlzeC1jb21wYXRpYmxlIHZlcnNpb24uXG4gICAgICpcbiAgICAgKiAqKk5vdGUqKjogSWYgeW91ciBzY2VuZSB1c2VzIHBoeXN4LCB5b3UgKiptdXN0KiogZW5hYmxlIHRoaXMgb3B0aW9uLlxuICAgICAqL1xuICAgIHBoeXN4OiBib29sZWFuO1xuICAgIC8qKlxuICAgICAqIElmIGB0cnVlYCwgZm9yY2VzIHRoZSBydW50aW1lIHRvIGxvYWQgYSBsb2FkZXItY29tcGF0aWJsZSB2ZXJzaW9uLlxuICAgICAqXG4gICAgICogVGhpcyBvcHRpb24gYWxsb3dzIHRvIGxvYWQgZ2x0ZiBkYXRhIGF0IHJ1bnRpbWUuXG4gICAgICovXG4gICAgbG9hZGVyOiBib29sZWFuO1xuICAgIC8qKlxuICAgICAqIFBhdGggdG8gdGhlIGxvYWRpbmcgc2NyZWVuLiBJZiBgdW5kZWZpbmVkYCwgZGVmYXVsdHMgdG8gJ1dvbmRlcmxhbmRSdW50aW1lLUxvYWRpbmdTY3JlZW4uYmluJy5cbiAgICAgKiBCZXdhcmUgdGhhdCB0aGVzZSBhcmUgc3BlY2lhbCAuYmluIGZpbGVzIHNpZ25lZCBieSBXb25kZXJsYW5kLiBDdXN0b21pemluZ1xuICAgICAqIHJlcXVpcmVzIGFuIGVudGVycHJpc2UgbGljZW5zZSwgcGxlYXNlIHJlYWNoIG91dCBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICAgKi9cbiAgICBsb2FkaW5nU2NyZWVuOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBEZWZhdWx0IGZyYW1lYnVmZmVyIHNjYWxlIGZhY3Rvci4gVGhpcyBjYW4gbGF0ZXIgYmUgY2hhbmdlZCB1c2luZ1xuICAgICAqIHtAbGluayBXb25kZXJsYW5kRW5naW5lLnhyRnJhbWVidWZmZXJTY2FsZUZhY3Rvcn1cbiAgICAgKi9cbiAgICB4ckZyYW1lYnVmZmVyU2NhbGVGYWN0b3I6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdG8gYWR2ZXJ0aXNlIEFSL1ZSIHNlc3Npb24gc3VwcG9ydCB0byB0aGUgYnJvd3Nlci5cbiAgICAgKlxuICAgICAqIEFkZHMgYW4gaW50ZXJhY3RpdmUgVUkgZWxlbWVudCB0byB0aGUgYnJvd3NlciBpbnRlcmZhY2UgdG8gc3RhcnQgYW4gWFJcbiAgICAgKiBzZXNzaW9uLiBCcm93c2VyIHN1cHBvcnQgaXMgb3B0aW9uYWwsIHNvIGl0J3MgYWR2aXNlZCB0byBzdGlsbCBhbGxvd1xuICAgICAqIHJlcXVlc3RpbmcgYSBzZXNzaW9uIHdpdGggYSBVSSBlbGVtZW50IG9uIHRoZSB3ZWJzaXRlIGl0c2VsZi5cbiAgICAgKlxuICAgICAqIElmIGB1bmRlZmluZWRgLCBubyBYUiBzZXNzaW9uIGlzIGF1dG9tYXRpY2FsbHkgb2ZmZXJlZCB0byB0aGUgYnJvd3Nlci5cbiAgICAgKlxuICAgICAqIEBzaW5jZSAxLjEuNVxuICAgICAqL1xuICAgIHhyT2ZmZXJTZXNzaW9uOiBYUk9mZmVyU2Vzc2lvbk9wdGlvbnM7XG5cbiAgICAvKipcbiAgICAgKiBDYW52YXMgaWQgb3IgZWxlbWVudC4gSWYgdGhpcyBpcyBgdW5kZWZpbmVkYCwgbG9va3MgZm9yIGEgY2FudmFzIHdpdGggaWQgJ2NhbnZhcycuXG4gICAgICovXG4gICAgY2FudmFzOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBMb2dnaW5nIGxldmVsKHMpIHRvIGVuYWJsZS5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIGFsbCBsZXZlbHMgYXJlIGVuYWJsZWQuXG4gICAgICovXG4gICAgbG9nczogTG9nTGV2ZWxbXTtcbn1cblxuLyogR2xvYmFsIGJvb2xlYW4gdG8gY2hlY2sgaWYgQVIvVlIgaXMgc3VwcG9ydGVkLiAqL1xuY29uc3QgeHJTdXBwb3J0ZWQ6IHthcjogYm9vbGVhbjsgdnI6IGJvb2xlYW59ID0ge1xuICAgIGFyOiBudWxsISxcbiAgICB2cjogbnVsbCEsXG59O1xuXG4vKipcbiAqIENoZWNrIHdoZXRoZXIgWFIgaXMgc3VwcG9ydGVkIGFuZCBzdG9yZSB0aGUgcmVzdWx0IGluIHRoZSBnbG9iYWwgc3BhY2UuXG4gKi9cbmZ1bmN0aW9uIGNoZWNrWFJTdXBwb3J0KCk6IFByb21pc2U8e2FyOiBib29sZWFuOyB2cjogYm9vbGVhbn0+IHtcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcgfHwgIW5hdmlnYXRvci54cikge1xuICAgICAgICB4clN1cHBvcnRlZC52ciA9IGZhbHNlO1xuICAgICAgICB4clN1cHBvcnRlZC5hciA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHhyU3VwcG9ydGVkKTtcbiAgICB9XG4gICAgY29uc3QgdnJQcm9taXNlID1cbiAgICAgICAgeHJTdXBwb3J0ZWQudnIgIT09IG51bGxcbiAgICAgICAgICAgID8gUHJvbWlzZS5yZXNvbHZlKClcbiAgICAgICAgICAgIDogbmF2aWdhdG9yLnhyXG4gICAgICAgICAgICAgICAgICAuaXNTZXNzaW9uU3VwcG9ydGVkKCdpbW1lcnNpdmUtdnInKVxuICAgICAgICAgICAgICAgICAgLnRoZW4oKHN1cHBvcnRlZCkgPT4gKHhyU3VwcG9ydGVkLnZyID0gc3VwcG9ydGVkKSlcbiAgICAgICAgICAgICAgICAgIC8qIFRoaXMgY2FuIGhhcHBlbiBpZiB0aGUgYXBwbGljYXRpb24gaXMgZW1iZWRkZWQgaW4gYW4gaWZyYW1lIHdpdGhvdXRcbiAgICAgICAgICAgICAgICAgICAqIHhyLXNwYXRpYWwtdHJhY2tpbmcgcGVybWlzc2lvbi4gbmF2aWdhdG9yLnhyIHdpbGwgYmUgYXZhaWxhYmxlLCBidXRcbiAgICAgICAgICAgICAgICAgICAqIGFueSBhY2Nlc3Mgb2YgaXQgd2lsbCB0aHJvdy4gKi9cbiAgICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiAoeHJTdXBwb3J0ZWQudnIgPSBmYWxzZSkpO1xuICAgIGNvbnN0IGFyUHJvbWlzZSA9XG4gICAgICAgIHhyU3VwcG9ydGVkLmFyICE9PSBudWxsXG4gICAgICAgICAgICA/IFByb21pc2UucmVzb2x2ZSgpXG4gICAgICAgICAgICA6IG5hdmlnYXRvci54clxuICAgICAgICAgICAgICAgICAgLmlzU2Vzc2lvblN1cHBvcnRlZCgnaW1tZXJzaXZlLWFyJylcbiAgICAgICAgICAgICAgICAgIC50aGVuKChzdXBwb3J0ZWQpID0+ICh4clN1cHBvcnRlZC5hciA9IHN1cHBvcnRlZCkpXG4gICAgICAgICAgICAgICAgICAvKiBUaGlzIGNhbiBoYXBwZW4gaWYgdGhlIGFwcGxpY2F0aW9uIGlzIGVtYmVkZGVkIGluIGFuIGlmcmFtZSB3aXRob3V0XG4gICAgICAgICAgICAgICAgICAgKiB4ci1zcGF0aWFsLXRyYWNraW5nIHBlcm1pc3Npb24uIG5hdmlnYXRvci54ciB3aWxsIGJlIGF2YWlsYWJsZSwgYnV0XG4gICAgICAgICAgICAgICAgICAgKiBhbnkgYWNjZXNzIG9mIGl0IHdpbGwgdGhyb3cuICovXG4gICAgICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4gKHhyU3VwcG9ydGVkLmFyID0gZmFsc2UpKTtcblxuICAgIHJldHVybiBQcm9taXNlLmFsbChbdnJQcm9taXNlLCBhclByb21pc2VdKS50aGVuKCgpID0+IHhyU3VwcG9ydGVkKTtcbn1cblxuLyoqXG4gKiBFbnN1cmVzIHRoYXQgdGhpcyBBUEkgaXMgY29tcGF0aWJsZSB3aXRoIHRoZSBnaXZlblxuICogcnVudGltZSB2ZXJzaW9uLlxuICpcbiAqIFdlIG9ubHkgZW5mb3JjZSBjb21wYXRpYmlsaXR5IGZvciBtYWpvciBhbmQgbWlub3IgY29tcG9uZW50cywgaS5lLixcbiAqIHRoZSBydW50aW1lIGFuZCB0aGUgQVBJIG11c3QgYm90aCBiZSBvZiB0aGUgZm9ybSBgeC55LipgLlxuICpcbiAqIEB0aHJvd3MgSWYgdGhlIG1ham9yIG9yIHRoZSBtaW5vciBjb21wb25lbnRzIGFyZSBkaWZmZXJlbnQuXG4gKlxuICogQHBhcmFtIHZlcnNpb24gVGhlIHRhcmdldCB2ZXJzaW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjaGVja1J1bnRpbWVDb21wYXRpYmlsaXR5KHZlcnNpb246IFZlcnNpb24pIHtcbiAgICBjb25zdCB7bWFqb3IsIG1pbm9yfSA9IHZlcnNpb247XG5cbiAgICBsZXQgbWFqb3JEaWZmID0gbWFqb3IgLSBBUElWZXJzaW9uLm1ham9yO1xuICAgIGxldCBtaW5vckRpZmYgPSBtaW5vciAtIEFQSVZlcnNpb24ubWlub3I7XG4gICAgLyogU2FtZSB2ZXJzaW9uLCBzbyBwZXJmZWN0bHkgY29tcGF0aWJsZS4gKi9cbiAgICBpZiAoIW1ham9yRGlmZiAmJiAhbWlub3JEaWZmKSByZXR1cm47XG5cbiAgICBjb25zdCBlcnJvciA9XG4gICAgICAgICdjaGVja1J1bnRpbWVDb21wYXRpYmlsaXR5KCk6IFZlcnNpb24gY29tcGF0aWJpbGl0eSBtaXNtYXRjaDpcXG4nICtcbiAgICAgICAgJ1xcdFx1MjE5MiBBUEkgYW5kIHJ1bnRpbWUgY29tcGF0aWJpbGl0eSBpcyBlbmZvcmNlZCBvbiBhIHBhdGNoIGxldmVsICh2ZXJzaW9ucyB4LnkuKilcXG4nO1xuXG4gICAgY29uc3QgaXNSdW50aW1lT2xkZXIgPSBtYWpvckRpZmYgPCAwIHx8ICghbWFqb3JEaWZmICYmIG1pbm9yRGlmZiA8IDApO1xuICAgIGlmIChpc1J1bnRpbWVPbGRlcikge1xuICAgICAgICAvKiBSdW50aW1lIGlzIG91dCBvZiBkYXRlLiAqL1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgJHtlcnJvcn1cXHRcdTIxOTIgUGxlYXNlIHVzZSBhIFdvbmRlcmxhbmQgRW5naW5lIGVkaXRvciB2ZXJzaW9uID49ICR7QVBJVmVyc2lvbi5tYWpvcn0uJHtBUElWZXJzaW9uLm1pbm9yfS4qYFxuICAgICAgICApO1xuICAgIH1cbiAgICAvKiBBUEkgaXMgb3V0IG9mIGRhdGUuICovXG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgJHtlcnJvcn1cXHRcdTIxOTIgUGxlYXNlIHVzZSBhIG5ldyBBUEkgdmVyc2lvbiA+PSAke3ZlcnNpb24ubWFqb3J9LiR7dmVyc2lvbi5taW5vcn0uKmBcbiAgICApO1xufVxuXG4vKipcbiAqIExvYWQgdGhlIHJ1bnRpbWUgdXNpbmcgdGhlIFdBU00gYW5kIEpTIGZpbGVzLlxuICpcbiAqIEBwYXJhbSBydW50aW1lIFRoZSBydW50aW1lIGJhc2Ugc3RyaW5nLCBlLmcsOiBgV29uZGVybGFuZFJ1bnRpbWUtbG9hZGVyLXBoeXN4YC5cbiAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgdG8gbW9kaWZ5IHRoZSBsb2FkaW5nIGJlaGF2aW91ci5cbiAqXG4gKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBlbmdpbmUgaXMgcmVhZHkgdG8gYmUgdXNlZC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRSdW50aW1lKFxuICAgIHJ1bnRpbWU6IHN0cmluZyxcbiAgICBvcHRpb25zOiBQYXJ0aWFsPExvYWRSdW50aW1lT3B0aW9ucz4gPSB7fVxuKTogUHJvbWlzZTxXb25kZXJsYW5kRW5naW5lPiB7XG4gICAgY29uc3QgeHJQcm9taXNlID0gY2hlY2tYUlN1cHBvcnQoKTtcblxuICAgIGNvbnN0IGJhc2VVUkwgPSBnZXRCYXNlVXJsKHJ1bnRpbWUpO1xuXG4gICAgY29uc3Qge3NpbWRTdXBwb3J0ZWQsIHRocmVhZHNTdXBwb3J0ZWR9ID0gYXdhaXQgZGV0ZWN0RmVhdHVyZXMoKTtcbiAgICBjb25zdCB7XG4gICAgICAgIHNpbWQgPSBzaW1kU3VwcG9ydGVkLFxuICAgICAgICB0aHJlYWRzID0gdGhyZWFkc1N1cHBvcnRlZCxcbiAgICAgICAgd2ViZ3B1ID0gZmFsc2UsXG4gICAgICAgIHBoeXN4ID0gZmFsc2UsXG4gICAgICAgIGxvYWRlciA9IGZhbHNlLFxuICAgICAgICB4ckZyYW1lYnVmZmVyU2NhbGVGYWN0b3IgPSAxLjAsXG4gICAgICAgIHhyT2ZmZXJTZXNzaW9uID0gbnVsbCxcbiAgICAgICAgbG9hZGluZ1NjcmVlbiA9IGJhc2VVUkwgPyBgJHtiYXNlVVJMfS8ke0xPQURJTkdfU0NSRUVOX1BBVEh9YCA6IExPQURJTkdfU0NSRUVOX1BBVEgsXG4gICAgICAgIGNhbnZhcyA9ICdjYW52YXMnLFxuICAgICAgICBsb2dzID0gW0xvZ0xldmVsLkluZm8sIExvZ0xldmVsLldhcm4sIExvZ0xldmVsLkVycm9yXSxcbiAgICB9ID0gb3B0aW9ucztcblxuICAgIGNvbnN0IHZhcmlhbnQgPSBbXTtcbiAgICBpZiAod2ViZ3B1KSB2YXJpYW50LnB1c2goJ3dlYmdwdScpO1xuICAgIGlmIChsb2FkZXIpIHZhcmlhbnQucHVzaCgnbG9hZGVyJyk7XG4gICAgaWYgKHBoeXN4KSB2YXJpYW50LnB1c2goJ3BoeXN4Jyk7XG4gICAgaWYgKHNpbWQpIHZhcmlhbnQucHVzaCgnc2ltZCcpO1xuICAgIGlmICh0aHJlYWRzKSB2YXJpYW50LnB1c2goJ3RocmVhZHMnKTtcblxuICAgIGNvbnN0IHZhcmlhbnRTdHIgPSB2YXJpYW50LmpvaW4oJy0nKTtcblxuICAgIGxldCBmaWxlbmFtZSA9IHJ1bnRpbWU7XG4gICAgaWYgKHZhcmlhbnRTdHIpIGZpbGVuYW1lID0gYCR7ZmlsZW5hbWV9LSR7dmFyaWFudFN0cn1gO1xuXG4gICAgY29uc3QgZG93bmxvYWQgPSBmdW5jdGlvbiAoXG4gICAgICAgIGZpbGVuYW1lOiBzdHJpbmcsXG4gICAgICAgIGVycm9yTWVzc2FnZTogc3RyaW5nXG4gICAgKTogUHJvbWlzZTxBcnJheUJ1ZmZlcj4ge1xuICAgICAgICByZXR1cm4gZmV0Y2goZmlsZW5hbWUpXG4gICAgICAgICAgICAudGhlbigocikgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghci5vaykgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHIuYXJyYXlCdWZmZXIoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKF8pID0+IFByb21pc2UucmVqZWN0KGVycm9yTWVzc2FnZSkpO1xuICAgIH07XG5cbiAgICBjb25zdCBbd2FzbURhdGEsIGxvYWRpbmdTY3JlZW5EYXRhXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgZG93bmxvYWQoYCR7ZmlsZW5hbWV9Lndhc21gLCBgRmFpbGVkIHRvIGZldGNoIHJ1bnRpbWUgLndhc20gZmlsZTogJHtmaWxlbmFtZX1gKSxcbiAgICAgICAgZG93bmxvYWQobG9hZGluZ1NjcmVlbiwgJ0ZhaWxlZCB0byBmZXRjaCBsb2FkaW5nIHNjcmVlbiBmaWxlJyksXG4gICAgXSk7XG5cbiAgICBjb25zdCBjYW52YXNFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2FudmFzKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcbiAgICBpZiAoIWNhbnZhc0VsZW1lbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBsb2FkUnVudGltZSgpOiBGYWlsZWQgdG8gZmluZCBjYW52YXMgd2l0aCBpZCAnJHtjYW52YXN9J2ApO1xuICAgIH1cbiAgICBpZiAoIShjYW52YXNFbGVtZW50IGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgbG9hZFJ1bnRpbWUoKTogSFRNTCBlbGVtZW50ICcke2NhbnZhc30nIG11c3QgYmUgYSBjYW52YXNgKTtcbiAgICB9XG5cbiAgICBjb25zdCB3YXNtID0gbmV3IFdBU00odGhyZWFkcyk7XG4gICAgKHdhc20ud29ya2VyIGFzIHN0cmluZykgPSBgJHtmaWxlbmFtZX0ud29ya2VyLmpzYDtcbiAgICAod2FzbS53YXNtIGFzIEFycmF5QnVmZmVyKSA9IHdhc21EYXRhO1xuICAgICh3YXNtLmNhbnZhcyBhcyBIVE1MQ2FudmFzRWxlbWVudCkgPSBjYW52YXNFbGVtZW50O1xuICAgIHdhc20uX2xvZy5sZXZlbHMuZW5hYmxlKC4uLmxvZ3MpO1xuXG4gICAgaWYgKHdlYmdwdSkge1xuICAgICAgICBjb25zdCBhZGFwdGVyID0gYXdhaXQgKG5hdmlnYXRvciBhcyBhbnkpLmdwdS5yZXF1ZXN0QWRhcHRlcigpO1xuICAgICAgICBjb25zdCBkZXNjID0ge1xuICAgICAgICAgICAgcmVxdWlyZWRGZWF0dXJlczogWyd0ZXh0dXJlLWNvbXByZXNzaW9uLWJjJ10sXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGRldmljZSA9IGF3YWl0IGFkYXB0ZXIucmVxdWVzdERldmljZShkZXNjKTtcbiAgICAgICAgKHdhc20ucHJlaW5pdGlhbGl6ZWRXZWJHUFVEZXZpY2UgYXMgYW55KSA9IGRldmljZTtcbiAgICB9XG5cbiAgICBjb25zdCBlbmdpbmUgPSBuZXcgV29uZGVybGFuZEVuZ2luZSh3YXNtLCBsb2FkaW5nU2NyZWVuRGF0YSk7XG5cbiAgICBpZiAoIXdpbmRvdy5fV0wpIHtcbiAgICAgICAgd2luZG93Ll9XTCA9IHtydW50aW1lczoge319O1xuICAgIH1cbiAgICBjb25zdCBydW50aW1lcyA9IHdpbmRvdy5fV0wucnVudGltZXM7XG5cbiAgICAvKiBHbG9iYWwgaWRlbnRpZmllciBvZiB0aGlzIHJ1bnRpbWUgaW4gYHdpbmRvd2AuICovXG4gICAgY29uc3QgcnVudGltZUdsb2JhbElkID0gdmFyaWFudFN0ciA/IHZhcmlhbnRTdHIgOiAnZGVmYXVsdCc7XG4gICAgLyogT25seSBsb2FkIHRoZSBydW50aW1lIGlmIG5vdCBwcmV2aW91c2x5IGxvYWRlZCBpbiB0aGUgcGFnZSAqL1xuICAgIGlmICghcnVudGltZXNbcnVudGltZUdsb2JhbElkXSkge1xuICAgICAgICBhd2FpdCBsb2FkU2NyaXB0KGAke2ZpbGVuYW1lfS5qc2ApO1xuICAgICAgICBydW50aW1lc1tydW50aW1lR2xvYmFsSWRdID0gd2luZG93Lmluc3RhbnRpYXRlV29uZGVybGFuZFJ1bnRpbWUhO1xuICAgICAgICB3aW5kb3cuaW5zdGFudGlhdGVXb25kZXJsYW5kUnVudGltZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgYXdhaXQgcnVudGltZXNbcnVudGltZUdsb2JhbElkXSh3YXNtKTtcbiAgICBlbmdpbmUuX2luaXQoKTtcblxuICAgIC8qIFRocm93cyBpZiB0aGUgcnVudGltZSBpc24ndCBjb21wYXRpYmxlIHdpdGggdGhlIEFQSS4gKi9cbiAgICBjaGVja1J1bnRpbWVDb21wYXRpYmlsaXR5KGVuZ2luZS5ydW50aW1lVmVyc2lvbik7XG5cbiAgICBjb25zdCB4ciA9IGF3YWl0IHhyUHJvbWlzZTtcbiAgICAoZW5naW5lLmFyU3VwcG9ydGVkIGFzIGJvb2xlYW4pID0geHIuYXI7XG4gICAgKGVuZ2luZS52clN1cHBvcnRlZCBhcyBib29sZWFuKSA9IHhyLnZyO1xuICAgIGVuZ2luZS54ckZyYW1lYnVmZmVyU2NhbGVGYWN0b3IgPSB4ckZyYW1lYnVmZmVyU2NhbGVGYWN0b3I7XG5cbiAgICBlbmdpbmUuYXV0b1Jlc2l6ZUNhbnZhcyA9IHRydWU7XG4gICAgZW5naW5lLnN0YXJ0KCk7XG5cbiAgICBpZiAoeHJPZmZlclNlc3Npb24gIT09IG51bGwpIHtcbiAgICAgICAgbGV0IG1vZGUgPSB4ck9mZmVyU2Vzc2lvbi5tb2RlO1xuICAgICAgICBpZiAobW9kZSA9PSAnYXV0bycpIHtcbiAgICAgICAgICAgIGlmIChlbmdpbmUudnJTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgICAgICBtb2RlID0gJ2ltbWVyc2l2ZS12cic7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVuZ2luZS5hclN1cHBvcnRlZCkge1xuICAgICAgICAgICAgICAgIG1vZGUgPSAnaW1tZXJzaXZlLWFyJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbW9kZSA9ICdpbmxpbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgb2ZmZXJTZXNzaW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZW5naW5lXG4gICAgICAgICAgICAgICAgLm9mZmVyWFJTZXNzaW9uKFxuICAgICAgICAgICAgICAgICAgICBtb2RlIGFzIFhSU2Vzc2lvbk1vZGUsXG4gICAgICAgICAgICAgICAgICAgIHhyT2ZmZXJTZXNzaW9uLmZlYXR1cmVzLFxuICAgICAgICAgICAgICAgICAgICB4ck9mZmVyU2Vzc2lvbi5vcHRpb25hbEZlYXR1cmVzXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIC50aGVuKFxuICAgICAgICAgICAgICAgICAgICAvKiBXaGVuIHRoZSBzZXNzaW9uIGVuZHMsIG9mZmVyIHRvIHN0YXJ0IGEgbmV3IG9uZSBhZ2FpbiAqL1xuICAgICAgICAgICAgICAgICAgICAocykgPT4gcy5hZGRFdmVudExpc3RlbmVyKCdlbmQnLCBvZmZlclNlc3Npb24pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIC8qIFRoZSBicm93c2VyIG1heSBub3Qgc3VwcG9lciBvZmZlciBzZXNzaW9uLCBvciBhIHByZXZpb3VzIHJlcXVlc3RcbiAgICAgICAgICAgICAgICAgKiB3YXMgcmVwbGFjZWQgYnkgYSBuZXcgb25lLiBOb3QgY3J1Y2lhbCwgYnV0IGluZm9ybSB0aGUgdXNlci4gKi9cbiAgICAgICAgICAgICAgICAuY2F0Y2goY29uc29sZS53YXJuKTtcbiAgICAgICAgfTtcblxuICAgICAgICBvZmZlclNlc3Npb24oKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZW5naW5lO1xufVxuIiwgImltcG9ydCB7IENvbXBvbmVudCwgVHlwZSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4vKipcbiAqIDh0aHdhbGwgY2FtZXJhIGNvbXBvbmVudC5cbiAqXG4gKiBTZXRzIHVwIHRoZSA4dGh3YWxsIHBpcGVsaW5lIGFuZCByZXRyaWV2ZXMgdHJhY2tpbmcgZXZlbnRzIHRvIHBsYWNlIGFuXG4gKiBvYmplY3QgYXQgdGhlIGxvY2F0aW9uIG9mIHRoZSB0cmFja2VkIEFSIGNhbWVyYSAvIG1vYmlsZSBkZXZpY2UuXG4gKlxuICogVXNlIHRoaXMgZm9yIFNMQU0gdHJhY2tpbmcgYmFzZWQgb24gOHRod2FsbC5cbiAqXG4gKiBNYWtlIHN1cmUgdG8gZW5hYmxlIDh0aHdhbGwgaW4gXCJQcm9qZWN0IFNldHRpbmdzXCIgPiBcIkFSXCIuIFNlZSBhbHNvIHRoZVxuICogW0FSIEdldHRpbmcgU3RhcnRlZCBHdWlkZV0oL2dldHRpbmctc3RhcnRlZC9xdWljay1zdGFydC1hcilcbiAqXG4gKlxuICogQ3VycmVudGx5IG9ubHkgc3VwcG9ydHMgd29ybGQtdHJhY2tpbmcgKFNMQU0pIHVzaW5nIEJBQ0sgY2FtZXJhLlxuICpcbiAqIC0gcmVtb3ZlIGFueSBvY2N1cnJlbmNlcyBvZiB0aGUgb2xkIDh0aHdhbGwtY2FtZXJhIGNvbXBvbmVudCBpbiB0aGUgZWRpdG9yXG4gKiAtIEFkZCB0aGlzIGNvbXBvbmVudCB0byBOb25WckNhbWVyYVxuICpcbiAqIElNUE9SVEFOVCFcbiAqIC0gdW50aWwgaXQgZ2V0J3MgZml4ZWQsIHNlbGVjdCAnY3VzdG9tSW5kZXhIdG1sJyBpbiB0aGUgcHJvamVjdCBzZXR0aW5nc1xuICogLSBvcGVuIGEgZ2VuZXJhdGVkIGluZGV4Lmh0bWwgYW5kIGNyb3Nzb3JpZ2luPVwiYW5vbnltb3VzXCIgYXR0cmlidXRlIHRvIHRoZSA8c2NyaXB0PiB0YWcgd2hlcmUgLy9hcHBzLjh0aHdhbGwuY29tL3hyd2ViIGlzIGxvYWRlZFxuICpcbiAqXG4gKiAjIyMjIyMjIyMgVXNpbmcgVUkgb3ZlcmxheXMgIyMjIyMjIyMjIyMjI1xuICogQnkgZGVmYXVsdCwgdGhpcyBjb21wb25lbnQgcmVuZGVycyBvd24gVUkgdG8gZ2l2ZSB0aGUgdXNlciBmZWVkYmFjayBhYm91dCByZWplY3RlZCBwZXJtaXNzaW9ucyBvciB0cmFja2luZyBlcnJvcnMuXG4gKiBJdCBjYW4gYmUgY2hhbmdlZCBieSBlbmFibGluZyB1c2VDdXN0b21VSU92ZXJsYXlzIGZsYWcuXG4gKlxuICogSWYgdXNlQ3VzdG9tVUlPdmVybGF5cyBpcyBlbmFibGVkLCB5b3UgYXJlIGV4cGVjdGVkIGhhbmRsZSB0aGUgZm9sbG93aW5nIGV2ZW50cyBkaXNwYXRjaGVkIGJ5IHRoZSB3aW5kb3cgb2JqZWN0OlxuICogLSBcIjh0aHdhbGwtcmVxdWVzdC11c2VyLWludGVyYWN0aW9uXCIgLSB1c2VkIG9ubHkgb24gaU9TIHNhZmFyaS4gUmVxdWVzdCBhIHVzZXIgdG8gcGVyZm9ybSBhbmQgaW50ZXJhY3Rpb24gd2l0aCB0aGUgcGFnZSBzbyB0aGF0IGphdmFzY3JpcHQgaXMgYWxsb3dlZCB0byBhbGxvd2VkIHRvIHJlcXVlc3QgYSBtb3Rpb24vY2FtZXJhL21pYyBwZXJtaXNzaW9ucy5cbiAqICBNYWtlIHN1cmUgdGhlIHdpbmRvdyBvYmplY3QgaXMgZGlzcGF0Y2hpbmcgYW4gJzh0aHdhbGwtc2FmZS10by1yZXF1ZXN0LXBlcm1pc3Npb25zJyBldmVudCBhZnRlciBpbnRlcmFjdGlvbiBoYXMgaGFwcGVuZWQuXG4gKiBgYGBcbiAqIDxidXR0b24gb25jbGljaz1cIndpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnOHRod2FsbC1zYWZlLXRvLXJlcXVlc3QtcGVybWlzc2lvbnMnKSlcIj5BbGxvdyBTZW5zb3JzPC9idXR0b24+XG4gKiBgYGBcbiAqXG4gKiAtIFwiOHRod2FsbC1wZXJtaXNzaW9uLWZhaWxcIiAtIHVzZXIgcmVqZWN0ZWQgYW55IG9mIHRoZSBwZXJtaXNzaW9uc1xuICpcbiAqIC0gXCI4dGh3YWxsLWVycm9yXCIgLSBydW50aW1lIDh0aHdhbGwgZXJyb3Igb2NjdXJyZWRcbiAqL1xuY2xhc3MgQVJDYW1lcmE4dGh3YWxsIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnOHRod2FsbC1jYW1lcmEnO1xuICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge1xuICAgICAgICAvKiogT3ZlcnJpZGUgdGhlIFdMIGh0bWwgb3ZlcmxheXMgZm9yIGhhbmRsaW5nIGNhbWVyYS9tb3Rpb24gcGVybWlzc2lvbnMgYW5kIGVycm9yIGhhbmRsaW5nICovXG4gICAgICAgIHVzZUN1c3RvbVVJT3ZlcmxheXM6IHsgdHlwZTogVHlwZS5Cb29sLCBkZWZhdWx0OiBmYWxzZSB9LFxuICAgIH07XG4gICAgLyogOHRod2FsbCBjYW1lcmEgcGlwZWxpbmUgbW9kdWxlIG5hbWUgKi9cbiAgICBuYW1lID0gJ3dvbmRlcmxhbmQtZW5naW5lLTh0aHdhbGwtY2FtZXJhJztcbiAgICBzdGFydGVkID0gZmFsc2U7XG4gICAgdmlldyA9IG51bGw7IC8vIGNhY2hlIGNhbWVyYVxuICAgIHBvc2l0aW9uID0gWzAsIDAsIDBdOyAvLyBjYWNoZSA4dGh3YWxsIGNhbSBwb3NpdGlvblxuICAgIHJvdGF0aW9uID0gWzAsIDAsIDAsIC0xXTsgLy8gY2FjaGUgOHRod2FsbCBjYW0gcm90YXRpb25cbiAgICBnbFRleHR1cmVSZW5kZXJlciA9IG51bGw7IC8vIGNhY2hlIFhSOC5HbFRleHR1cmVSZW5kZXJlci5waXBlbGluZU1vZHVsZVxuICAgIHByb21wdEZvckRldmljZU1vdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIC8vIFRlbGwgYW55b25lIHdobydzIGludGVyZXN0ZWQgdGhhdCB3ZSB3YW50IHRvIGdldCBzb21lIHVzZXIgaW50ZXJhY3Rpb25cbiAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnOHRod2FsbC1yZXF1ZXN0LXVzZXItaW50ZXJhY3Rpb24nKSk7XG4gICAgICAgICAgICAvLyBXYWl0IHVudGlsIHNvbWVvbmUgcmVzcG9uc2UgdGhhdCB1c2VyIGludGVyYWN0aW9uIGhhcHBlbmVkXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignOHRod2FsbC1zYWZlLXRvLXJlcXVlc3QtcGVybWlzc2lvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW90aW9uRXZlbnQgPSBhd2FpdCBEZXZpY2VNb3Rpb25FdmVudC5yZXF1ZXN0UGVybWlzc2lvbigpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG1vdGlvbkV2ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGV4Y2VwdGlvbikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXhjZXB0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGdldFBlcm1pc3Npb25zKCkge1xuICAgICAgICAvLyBpT1MgXCJmZWF0dXJlXCIuIElmIHdlIHdhbnQgdG8gcmVxdWVzdCB0aGUgRGV2aWNlTW90aW9uIHBlcm1pc3Npb24sIHVzZXIgaGFzIHRvIGludGVyYWN0IHdpdGggdGhlIHBhZ2UgYXQgZmlyc3QgKHRvdWNoIGl0KS5cbiAgICAgICAgLy8gSWYgdGhlcmUgd2FzIG5vIGludGVyYWN0aW9uIGRvbmUgc28gZmFyLCB3ZSB3aWxsIHJlbmRlciBhIEhUTUwgb3ZlcmxheSB3aXRoIHdvdWxkIGdldCB0aGUgdXNlciB0byBpbnRlcmFjdCB3aXRoIHRoZSBzY3JlZW5cbiAgICAgICAgaWYgKERldmljZU1vdGlvbkV2ZW50ICYmIERldmljZU1vdGlvbkV2ZW50LnJlcXVlc3RQZXJtaXNzaW9uKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IERldmljZU1vdGlvbkV2ZW50LnJlcXVlc3RQZXJtaXNzaW9uKCk7XG4gICAgICAgICAgICAgICAgLy8gVGhlIHVzZXIgbXVzdCBoYXZlIHJlamVjdGVkIHRoZSBtb3Rpb24gZXZlbnQgb24gcHJldmlvdXMgcGFnZSBsb2FkLiAoc2FmYXJpIHJlbWVtYmVycyB0aGlzIGNob2ljZSkuXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gJ2dyYW50ZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTW90aW9uRXZlbnQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXhjZXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgLy8gVXNlciBoYWQgbm8gaW50ZXJhY3Rpb24gd2l0aCB0aGUgcGFnZSBzbyBmYXJcbiAgICAgICAgICAgICAgICBpZiAoZXhjZXB0aW9uLm5hbWUgPT09ICdOb3RBbGxvd2VkRXJyb3InKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vdGlvbkV2ZW50ID0gYXdhaXQgdGhpcy5wcm9tcHRGb3JEZXZpY2VNb3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vdGlvbkV2ZW50ICE9PSAnZ3JhbnRlZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTW90aW9uRXZlbnQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNb3Rpb25FdmVudCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHdlIGdldCB0aGUgY2FtZXJhIHN0cmVhbVxuICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoe1xuICAgICAgICAgICAgICAgIHZpZGVvOiB0cnVlLFxuICAgICAgICAgICAgICAgIGF1ZGlvOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBJZiB3ZSBzdWNjZXNzZnVsbHkgYWNxdWlyZWQgdGhlIGNhbWVyYSBzdHJlYW0gLSB3ZSBjYW4gc3RvcCBpdCBhbmQgd2FpdCB1bnRpbCA4dGh3YWxsIHJlcXVlc3RzIGl0IGFnYWluXG4gICAgICAgICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaCgodHJhY2spID0+IHtcbiAgICAgICAgICAgICAgICB0cmFjay5zdG9wKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXhjZXB0aW9uKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NhbWVyYScpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGluaXQoKSB7XG4gICAgICAgIHRoaXMudmlldyA9IHRoaXMub2JqZWN0LmdldENvbXBvbmVudCgndmlldycpO1xuICAgICAgICB0aGlzLm9uVXBkYXRlID0gdGhpcy5vblVwZGF0ZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uQXR0YWNoID0gdGhpcy5vbkF0dGFjaC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uRXhjZXB0aW9uID0gdGhpcy5vbkV4Y2VwdGlvbi5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uQ2FtZXJhU3RhdHVzQ2hhbmdlID0gdGhpcy5vbkNhbWVyYVN0YXR1c0NoYW5nZS5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdGhpcy5vYmplY3QuZ2V0Q29tcG9uZW50KCd2aWV3Jyk7XG4gICAgICAgIGlmICghdGhpcy51c2VDdXN0b21VSU92ZXJsYXlzKSB7XG4gICAgICAgICAgICBPdmVybGF5c0hhbmRsZXIuaW5pdCgpO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmdldFBlcm1pc3Npb25zKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBVc2VyIGRpZCBub3QgZ3JhbnQgdGhlIGNhbWVyYSBvciBtb3Rpb25FdmVudCBwZXJtaXNzaW9uc1xuICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCc4dGh3YWxsLXBlcm1pc3Npb24tZmFpbCcsIHsgZGV0YWlsOiBlcnJvciB9KSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy53YWl0Rm9yWFI4KCk7XG4gICAgICAgIFhSOC5YckNvbnRyb2xsZXIuY29uZmlndXJlKHtcbiAgICAgICAgICAgIGRpc2FibGVXb3JsZFRyYWNraW5nOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZ2xUZXh0dXJlUmVuZGVyZXIgPSBYUjguR2xUZXh0dXJlUmVuZGVyZXIucGlwZWxpbmVNb2R1bGUoKTtcbiAgICAgICAgWFI4LmFkZENhbWVyYVBpcGVsaW5lTW9kdWxlcyhbXG4gICAgICAgICAgICB0aGlzLmdsVGV4dHVyZVJlbmRlcmVyLFxuICAgICAgICAgICAgWFI4LlhyQ29udHJvbGxlci5waXBlbGluZU1vZHVsZSgpLFxuICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgXSk7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZzoge1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogWFI4LlhyQ29uZmlnLmNhbWVyYSgpLkJBQ0ssXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FudmFzOiBNb2R1bGUuY2FudmFzLFxuICAgICAgICAgICAgYWxsb3dlZERldmljZXM6IFhSOC5YckNvbmZpZy5kZXZpY2UoKS5BTlksXG4gICAgICAgICAgICBvd25SdW5Mb29wOiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICAgICAgWFI4LnJ1bihjb25maWcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIDh0aHdhbGwgcGlwZWxpbmUgZnVuY3Rpb25cbiAgICAgKi9cbiAgICBvbkF0dGFjaChwYXJhbXMpIHtcbiAgICAgICAgdGhpcy5zdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5lbmdpbmUuc2NlbmUuY29sb3JDbGVhckVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgZ2wgPSBNb2R1bGUuY3R4O1xuICAgICAgICBjb25zdCByb3QgPSB0aGlzLm9iamVjdC5yb3RhdGlvbldvcmxkO1xuICAgICAgICBjb25zdCBwb3MgPSB0aGlzLm9iamVjdC5nZXRUcmFuc2xhdGlvbldvcmxkKFtdKTtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IEFycmF5LmZyb20ocG9zKTtcbiAgICAgICAgdGhpcy5yb3RhdGlvbiA9IEFycmF5LmZyb20ocm90KTtcbiAgICAgICAgWFI4LlhyQ29udHJvbGxlci51cGRhdGVDYW1lcmFQcm9qZWN0aW9uTWF0cml4KHtcbiAgICAgICAgICAgIG9yaWdpbjogeyB4OiBwb3NbMF0sIHk6IHBvc1sxXSwgejogcG9zWzJdIH0sXG4gICAgICAgICAgICBmYWNpbmc6IHsgeDogcm90WzBdLCB5OiByb3RbMV0sIHo6IHJvdFsyXSwgdzogcm90WzNdIH0sXG4gICAgICAgICAgICBjYW06IHtcbiAgICAgICAgICAgICAgICBwaXhlbFJlY3RXaWR0aDogTW9kdWxlLmNhbnZhcy53aWR0aCxcbiAgICAgICAgICAgICAgICBwaXhlbFJlY3RIZWlnaHQ6IE1vZHVsZS5jYW52YXMuaGVpZ2h0LFxuICAgICAgICAgICAgICAgIG5lYXJDbGlwUGxhbmU6IHRoaXMudmlldy5uZWFyLFxuICAgICAgICAgICAgICAgIGZhckNsaXBQbGFuZTogdGhpcy52aWV3LmZhcixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVuZ2luZS5zY2VuZS5vblByZVJlbmRlci5wdXNoKCgpID0+IHtcbiAgICAgICAgICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5EUkFXX0ZSQU1FQlVGRkVSLCBudWxsKTtcbiAgICAgICAgICAgIFhSOC5ydW5QcmVSZW5kZXIoRGF0ZS5ub3coKSk7XG4gICAgICAgICAgICBYUjgucnVuUmVuZGVyKCk7IC8vIDwtLS0gdGVsbCA4dGh3YWxsIHRvIGRvIGl0J3MgdGhpbmcgKGFsdGVybmF0aXZlbHkgY2FsbCB0aGlzLmdsVGV4dHVyZVJlbmRlcmVyLm9uUmVuZGVyKCkgaWYgeW91IG9ubHkgY2FyZSBhYm91dCBjYW1lcmEgZmVlZCApXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVuZ2luZS5zY2VuZS5vblBvc3RSZW5kZXIucHVzaCgoKSA9PiB7XG4gICAgICAgICAgICBYUjgucnVuUG9zdFJlbmRlcihEYXRlLm5vdygpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogOHRod2FsbCBwaXBlbGluZSBmdW5jdGlvblxuICAgICAqL1xuICAgIG9uQ2FtZXJhU3RhdHVzQ2hhbmdlKGUpIHtcbiAgICAgICAgaWYgKGUgJiYgZS5zdGF0dXMgPT09ICdmYWlsZWQnKSB7XG4gICAgICAgICAgICB0aGlzLm9uRXhjZXB0aW9uKG5ldyBFcnJvcihgQ2FtZXJhIGZhaWxlZCB3aXRoIHN0YXR1czogJHtlLnN0YXR1c31gKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiA4dGh3YWxsIHBpcGVsaW5lIGZ1bmN0aW9uXG4gICAgICovXG4gICAgb25VcGRhdGUoZSkge1xuICAgICAgICBpZiAoIWUucHJvY2Vzc0NwdVJlc3VsdC5yZWFsaXR5KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCB7IHJvdGF0aW9uLCBwb3NpdGlvbiwgaW50cmluc2ljcyB9ID0gZS5wcm9jZXNzQ3B1UmVzdWx0LnJlYWxpdHk7XG4gICAgICAgIHRoaXMucm90YXRpb25bMF0gPSByb3RhdGlvbi54O1xuICAgICAgICB0aGlzLnJvdGF0aW9uWzFdID0gcm90YXRpb24ueTtcbiAgICAgICAgdGhpcy5yb3RhdGlvblsyXSA9IHJvdGF0aW9uLno7XG4gICAgICAgIHRoaXMucm90YXRpb25bM10gPSByb3RhdGlvbi53O1xuICAgICAgICB0aGlzLnBvc2l0aW9uWzBdID0gcG9zaXRpb24ueDtcbiAgICAgICAgdGhpcy5wb3NpdGlvblsxXSA9IHBvc2l0aW9uLnk7XG4gICAgICAgIHRoaXMucG9zaXRpb25bMl0gPSBwb3NpdGlvbi56O1xuICAgICAgICBpZiAoaW50cmluc2ljcykge1xuICAgICAgICAgICAgY29uc3QgcHJvamVjdGlvbk1hdHJpeCA9IHRoaXMudmlldy5wcm9qZWN0aW9uTWF0cml4O1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgLyogU29tZSBwcm9jZXNzQ3B1UmVzdWx0LnJlYWxpdHkuaW50cmluc2ljcyBhcmUgc2V0IHRvIEluZmluaXR5LFxuICAgICAgICAgICAgICAgICAqIHdoaWNoIGJyYWtlcyBvdXIgcHJvamVjdGlvbk1hdHJpeC4gU28gd2UganVzdCBmaWx0ZXIgdGhvc2UgZWxlbWVudHMgb3V0LiAqL1xuICAgICAgICAgICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUoaW50cmluc2ljc1tpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdGlvbk1hdHJpeFtpXSA9IGludHJpbnNpY3NbaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwb3NpdGlvbiAmJiByb3RhdGlvbikge1xuICAgICAgICAgICAgdGhpcy5vYmplY3Qucm90YXRpb25Xb3JsZCA9IHRoaXMucm90YXRpb247XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5zZXRUcmFuc2xhdGlvbldvcmxkKHRoaXMucG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogOHRod2FsbCBwaXBlbGluZSBmdW5jdGlvblxuICAgICAqL1xuICAgIG9uRXhjZXB0aW9uKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJzh0aHdhbGwgZXhjZXB0aW9uOicsIGVycm9yKTtcbiAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCc4dGh3YWxsLWVycm9yJywgeyBkZXRhaWw6IGVycm9yIH0pKTtcbiAgICB9XG4gICAgd2FpdEZvclhSOCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCBfcmVqKSA9PiB7XG4gICAgICAgICAgICBpZiAod2luZG93LlhSOCkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd4cmxvYWRlZCcsICgpID0+IHJlc29sdmUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCB7IEFSQ2FtZXJhOHRod2FsbCB9O1xuY29uc3QgT3ZlcmxheXNIYW5kbGVyID0ge1xuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVSZXF1ZXN0VXNlckludGVyYWN0aW9uID0gdGhpcy5oYW5kbGVSZXF1ZXN0VXNlckludGVyYWN0aW9uLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlUGVybWlzc2lvbkZhaWwgPSB0aGlzLmhhbmRsZVBlcm1pc3Npb25GYWlsLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlRXJyb3IgPSB0aGlzLmhhbmRsZUVycm9yLmJpbmQodGhpcyk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCc4dGh3YWxsLXJlcXVlc3QtdXNlci1pbnRlcmFjdGlvbicsIHRoaXMuaGFuZGxlUmVxdWVzdFVzZXJJbnRlcmFjdGlvbik7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCc4dGh3YWxsLXBlcm1pc3Npb24tZmFpbCcsIHRoaXMuaGFuZGxlUGVybWlzc2lvbkZhaWwpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignOHRod2FsbC1lcnJvcicsIHRoaXMuaGFuZGxlRXJyb3IpO1xuICAgIH0sXG4gICAgaGFuZGxlUmVxdWVzdFVzZXJJbnRlcmFjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBvdmVybGF5ID0gdGhpcy5zaG93T3ZlcmxheShyZXF1ZXN0UGVybWlzc2lvbk92ZXJsYXkpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignOHRod2FsbC1zYWZlLXRvLXJlcXVlc3QtcGVybWlzc2lvbnMnLCAoKSA9PiB7XG4gICAgICAgICAgICBvdmVybGF5LnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGhhbmRsZVBlcm1pc3Npb25GYWlsOiBmdW5jdGlvbiAoX3JlYXNvbikge1xuICAgICAgICB0aGlzLnNob3dPdmVybGF5KGZhaWxlZFBlcm1pc3Npb25PdmVybGF5KTtcbiAgICB9LFxuICAgIGhhbmRsZUVycm9yOiBmdW5jdGlvbiAoX2Vycm9yKSB7XG4gICAgICAgIHRoaXMuc2hvd092ZXJsYXkocnVudGltZUVycm9yT3ZlcmxheSk7XG4gICAgfSxcbiAgICBzaG93T3ZlcmxheTogZnVuY3Rpb24gKGh0bWxDb250ZW50KSB7XG4gICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgb3ZlcmxheS5pbm5lckhUTUwgPSBodG1sQ29udGVudDtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdmVybGF5KTtcbiAgICAgICAgcmV0dXJuIG92ZXJsYXk7XG4gICAgfSxcbn07XG5jb25zdCByZXF1ZXN0UGVybWlzc2lvbk92ZXJsYXkgPSBgXG48c3R5bGU+XG4gICNyZXF1ZXN0LXBlcm1pc3Npb24tb3ZlcmxheSB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMDtcbiAgICBsZWZ0OiAwO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICB6LWluZGV4OiA5OTk7XG4gICAgY29sb3I6ICNmZmY7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjUpO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBmb250LWZhbWlseTogc2Fucy1zZXJpZjtcbiAgfVxuXG4gIC5yZXF1ZXN0LXBlcm1pc3Npb24tb3ZlcmxheV90aXRsZSB7XG4gICAgbWFyZ2luOiAzMHB4O1xuICAgIGZvbnQtc2l6ZTogMzJweDtcbiAgfVxuXG4gIC5yZXF1ZXN0LXBlcm1pc3Npb24tb3ZlcmxheV9idXR0b24ge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNlODAwODY7XG4gICAgZm9udC1zaXplOiAyMnB4O1xuICAgIHBhZGRpbmc6IDEwcHggMzBweDtcbiAgICBjb2xvcjogI2ZmZjtcbiAgICBib3JkZXItcmFkaXVzOiAxNXB4O1xuICAgIGJvcmRlcjogbm9uZTtcbiAgfVxuPC9zdHlsZT5cblxuPGRpdiBpZD1cInJlcXVlc3QtcGVybWlzc2lvbi1vdmVybGF5XCI+XG4gIDxkaXYgY2xhc3M9XCJyZXF1ZXN0LXBlcm1pc3Npb24tb3ZlcmxheV90aXRsZVwiPlRoaXMgYXBwIHJlcXVpcmVzIHRvIHVzZSB5b3VyIGNhbWVyYSBhbmQgbW90aW9uIHNlbnNvcnM8L2Rpdj5cblxuICA8YnV0dG9uIGNsYXNzPVwicmVxdWVzdC1wZXJtaXNzaW9uLW92ZXJsYXlfYnV0dG9uXCIgb25jbGljaz1cIndpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnOHRod2FsbC1zYWZlLXRvLXJlcXVlc3QtcGVybWlzc2lvbnMnKSlcIj5PSzwvYnV0dG9uPlxuPC9kaXY+YDtcbmNvbnN0IGZhaWxlZFBlcm1pc3Npb25PdmVybGF5ID0gYFxuPHN0eWxlPlxuICAjZmFpbGVkLXBlcm1pc3Npb24tb3ZlcmxheSB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMDtcbiAgICBsZWZ0OiAwO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICB6LWluZGV4OiA5OTk7XG4gICAgY29sb3I6ICNmZmY7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjUpO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBmb250LWZhbWlseTogc2Fucy1zZXJpZjtcbiAgfVxuXG4gIC5mYWlsZWQtcGVybWlzc2lvbi1vdmVybGF5X3RpdGxlIHtcbiAgICBtYXJnaW46IDMwcHg7XG4gICAgZm9udC1zaXplOiAzMnB4O1xuICB9XG5cbiAgLmZhaWxlZC1wZXJtaXNzaW9uLW92ZXJsYXlfYnV0dG9uIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTgwMDg2O1xuICAgIGZvbnQtc2l6ZTogMjJweDtcbiAgICBwYWRkaW5nOiAxMHB4IDMwcHg7XG4gICAgY29sb3I6ICNmZmY7XG4gICAgYm9yZGVyLXJhZGl1czogMTVweDtcbiAgICBib3JkZXI6IG5vbmU7XG4gIH1cbjwvc3R5bGU+XG5cbjxkaXYgaWQ9XCJmYWlsZWQtcGVybWlzc2lvbi1vdmVybGF5XCI+XG4gIDxkaXYgY2xhc3M9XCJmYWlsZWQtcGVybWlzc2lvbi1vdmVybGF5X3RpdGxlXCI+RmFpbGVkIHRvIGdyYW50IHBlcm1pc3Npb25zLiBSZXNldCB0aGUgdGhlIHBlcm1pc3Npb25zIGFuZCByZWZyZXNoIHRoZSBwYWdlLjwvZGl2PlxuXG4gIDxidXR0b24gY2xhc3M9XCJmYWlsZWQtcGVybWlzc2lvbi1vdmVybGF5X2J1dHRvblwiIG9uY2xpY2s9XCJ3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcIj5SZWZyZXNoIHRoZSBwYWdlPC9idXR0b24+XG48L2Rpdj5gO1xuY29uc3QgcnVudGltZUVycm9yT3ZlcmxheSA9IGBcbjxzdHlsZT5cbiAgI3dhbGwtZXJyb3Itb3ZlcmxheSB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMDtcbiAgICBsZWZ0OiAwO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICB6LWluZGV4OiA5OTk7XG4gICAgY29sb3I6ICNmZmY7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjUpO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBmb250LWZhbWlseTogc2Fucy1zZXJpZjtcbiAgfVxuXG4gIC53YWxsLWVycm9yLW92ZXJsYXlfdGl0bGUge1xuICAgIG1hcmdpbjogMzBweDtcbiAgICBmb250LXNpemU6IDMycHg7XG4gIH1cblxuICAud2FsbC1lcnJvci1vdmVybGF5X2J1dHRvbiB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2U4MDA4NjtcbiAgICBmb250LXNpemU6IDIycHg7XG4gICAgcGFkZGluZzogMTBweCAzMHB4O1xuICAgIGNvbG9yOiAjZmZmO1xuICAgIGJvcmRlci1yYWRpdXM6IDE1cHg7XG4gICAgYm9yZGVyOiBub25lO1xuICB9XG48L3N0eWxlPlxuXG48ZGl2IGlkPVwid2FsbC1lcnJvci1vdmVybGF5XCI+XG4gIDxkaXYgY2xhc3M9XCJ3YWxsLWVycm9yLW92ZXJsYXlfdGl0bGVcIj5FcnJvciBoYXMgb2NjdXJyZWQuIFBsZWFzZSByZWxvYWQgdGhlIHBhZ2U8L2Rpdj5cblxuICA8YnV0dG9uIGNsYXNzPVwid2FsbC1lcnJvci1vdmVybGF5X2J1dHRvblwiIG9uY2xpY2s9XCJ3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcIj5SZWxvYWQ8L2J1dHRvbj5cbjwvZGl2PmA7XG4iLCAiY29uc3QgdGVtcFZlYyA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG5jb25zdCB0ZW1wUXVhdCA9IG5ldyBGbG9hdDMyQXJyYXkoNCk7XG5leHBvcnQgZnVuY3Rpb24gc2V0WFJSaWdpZFRyYW5zZm9ybUxvY2FsKG8sIHRyYW5zZm9ybSkge1xuICAgIGNvbnN0IHIgPSB0cmFuc2Zvcm0ub3JpZW50YXRpb247XG4gICAgdGVtcFF1YXRbMF0gPSByLng7XG4gICAgdGVtcFF1YXRbMV0gPSByLnk7XG4gICAgdGVtcFF1YXRbMl0gPSByLno7XG4gICAgdGVtcFF1YXRbM10gPSByLnc7XG4gICAgY29uc3QgdCA9IHRyYW5zZm9ybS5wb3NpdGlvbjtcbiAgICB0ZW1wVmVjWzBdID0gdC54O1xuICAgIHRlbXBWZWNbMV0gPSB0Lnk7XG4gICAgdGVtcFZlY1syXSA9IHQuejtcbiAgICBvLnJlc2V0UG9zaXRpb25Sb3RhdGlvbigpO1xuICAgIG8uc2V0Um90YXRpb25Mb2NhbCh0ZW1wUXVhdCk7XG4gICAgby50cmFuc2xhdGVMb2NhbCh0ZW1wVmVjKTtcbn1cbiIsICJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBDb21wb25lbnQsIEVtaXR0ZXIgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuaW1wb3J0IHsgcHJvcGVydHkgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGkvZGVjb3JhdG9ycy5qcyc7XG5pbXBvcnQgeyBzZXRYUlJpZ2lkVHJhbnNmb3JtTG9jYWwgfSBmcm9tICcuL3V0aWxzL3dlYnhyLmpzJztcbnZhciB0ZW1wVmVjMyA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG52YXIgdGVtcFF1YXQgPSBuZXcgRmxvYXQzMkFycmF5KDQpO1xuLyoqXG4gKiBTZXRzIHRoZSBsb2NhdGlvbiBvZiB0aGUgb2JqZWN0IHRvIHRoZSBsb2NhdGlvbiBvZiBhbiBYUkFuY2hvclxuICpcbiAqIENyZWF0ZSBhbmNob3JzIHVzaW5nIHRoZSBgQW5jaG9yLmNyZWF0ZSgpYCBzdGF0aWMgZnVuY3Rpb24uXG4gKlxuICogRXhhbXBsZSBmb3IgdXNlIHdpdGggY3Vyc29yOlxuICogYGBganNcbiAqIGN1cnNvclRhcmdldC5vbkNsaWNrLmFkZCgob2JqZWN0LCBjdXJzb3IsIG9yaWdpbmFsRXZlbnQpID0+IHtcbiAqICAgICAvKiBPbmx5IGV2ZW50cyBpbiBYUiB3aWxsIGhhdmUgYSBmcmFtZSBhdHRhY2hlZCAqXFwvXG4gKiAgICAgaWYoIW9yaWdpbmFsRXZlbnQuZnJhbWUpIHJldHVybjtcbiAqICAgICBBbmNob3IuY3JlYXRlKGFuY2hvck9iamVjdCwge3V1aWQ6IGlkLCBwZXJzaXN0OiB0cnVlfSwgb3JpZ2luYWxFdmVudC5mcmFtZSk7XG4gKiB9KTtcbiAqIGBgYFxuICovXG5jbGFzcyBBbmNob3IgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdhbmNob3InO1xuICAgIC8qIFN0YXRpYyBtYW5hZ2VtZW50IG9mIGFsbCBhbmNob3JzICovXG4gICAgc3RhdGljICNhbmNob3JzID0gW107XG4gICAgcGVyc2lzdCA9IGZhbHNlO1xuICAgIC8qKiBVbmlxdWUgaWRlbnRpZmllciB0byBsb2FkIGEgcGVyc2lzdGVudCBhbmNob3IgZnJvbSwgb3IgZW1wdHkvbnVsbCBpZiB1bmtub3duICovXG4gICAgdXVpZCA9IG51bGw7XG4gICAgLyoqIFRoZSB4ckFuY2hvciwgaWYgY3JlYXRlZCAqL1xuICAgIHhyQW5jaG9yID0gbnVsbDtcbiAgICAvKiogRW1pdHMgZXZlbnRzIHdoZW4gdGhlIGFuY2hvciBpcyBjcmVhdGVkIGVpdGhlciBieSBiZWluZyByZXN0b3JlZCBvciBuZXdseSBjcmVhdGVkICovXG4gICAgb25DcmVhdGUgPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKiBXaGV0aGVyIHRoZSBhbmNob3IgaXMgY3VycmVudGx5IGJlaW5nIHRyYWNrZWQgKi9cbiAgICB2aXNpYmxlID0gZmFsc2U7XG4gICAgLyoqIEVtaXRzIGFuIGV2ZW50IHdoZW4gdGhpcyBhbmNob3Igc3RhcnRzIHRyYWNraW5nICovXG4gICAgb25UcmFja2luZ0ZvdW5kID0gbmV3IEVtaXR0ZXIoKTtcbiAgICAvKiogRW1pdHMgYW4gZXZlbnQgd2hlbiB0aGlzIGFuY2hvciBzdG9wcyB0cmFja2luZyAqL1xuICAgIG9uVHJhY2tpbmdMb3N0ID0gbmV3IEVtaXR0ZXIoKTtcbiAgICAvKiogWFJGcmFtZSB0byB1c2UgZm9yIGNyZWF0aW5nIHRoZSBhbmNob3IgKi9cbiAgICB4ckZyYW1lID0gbnVsbDtcbiAgICAvKiogWFJIaXRUZXN0UmVzdWx0IHRvIHVzZSBmb3IgY3JlYXRpbmcgdGhlIGFuY2hvciAqL1xuICAgIHhySGl0UmVzdWx0ID0gbnVsbDtcbiAgICAvKiogUmV0cmlldmUgYWxsIGFuY2hvcnMgb2YgdGhlIGN1cnJlbnQgc2NlbmUgKi9cbiAgICBzdGF0aWMgZ2V0QWxsQW5jaG9ycygpIHtcbiAgICAgICAgcmV0dXJuIEFuY2hvci4jYW5jaG9ycztcbiAgICB9XG4gICAgc3RhdGljICNhZGRBbmNob3IoYW5jaG9yKSB7XG4gICAgICAgIEFuY2hvci4jYW5jaG9ycy5wdXNoKGFuY2hvcik7XG4gICAgfVxuICAgIHN0YXRpYyAjcmVtb3ZlQW5jaG9yKGFuY2hvcikge1xuICAgICAgICBjb25zdCBpbmRleCA9IEFuY2hvci4jYW5jaG9ycy5pbmRleE9mKGFuY2hvcik7XG4gICAgICAgIGlmIChpbmRleCA8IDApXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIEFuY2hvci4jYW5jaG9ycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgYW5jaG9yXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbyBPYmplY3QgdG8gYXR0YWNoIHRoZSBjb21wb25lbnQgdG9cbiAgICAgKiBAcGFyYW0gcGFyYW1zIFBhcmFtZXRlcnMgZm9yIHRoZSBhbmNob3IgY29tcG9uZW50XG4gICAgICogQHBhcmFtIGZyYW1lIFhSRnJhbWUgdG8gdXNlIGZvciBhbmNob3IgY3JhdGlvbiwgaWYgbnVsbCwgd2lsbCB1c2UgdGhlIGN1cnJlbnQgZnJhbWUgaWYgYXZhaWxhYmxlXG4gICAgICogQHBhcmFtIGhpdFJlc3VsdCBPcHRpb25hbCBoaXQtdGVzdCByZXN1bHQgdG8gY3JlYXRlIHRoZSBhbmNob3Igd2l0aFxuICAgICAqIEByZXR1cm5zIFByb21pc2UgZm9yIHRoZSBuZXdseSBjcmVhdGVkIGFuY2hvciBjb21wb25lbnRcbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKG8sIHBhcmFtcywgZnJhbWUsIGhpdFJlc3VsdCkge1xuICAgICAgICBjb25zdCBhID0gby5hZGRDb21wb25lbnQoQW5jaG9yLCB7IC4uLnBhcmFtcywgYWN0aXZlOiBmYWxzZSB9KTtcbiAgICAgICAgaWYgKGEgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgYS54ckhpdFJlc3VsdCA9IGhpdFJlc3VsdCA/PyBudWxsO1xuICAgICAgICBhLnhyRnJhbWUgPSBmcmFtZSA/PyBudWxsO1xuICAgICAgICBhLm9uQ3JlYXRlLm9uY2UoKCkgPT4gKChhLnhyRnJhbWUgPSBudWxsKSwgKGEueHJIaXRSZXN1bHQgPSBudWxsKSkpO1xuICAgICAgICBhLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIHJldHVybiBhLm9uQ3JlYXRlLnByb21pc2UoKTtcbiAgICB9XG4gICAgI2dldEZyYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy54ckZyYW1lIHx8IHRoaXMuZW5naW5lLnhyLmZyYW1lO1xuICAgIH1cbiAgICBhc3luYyAjY3JlYXRlQW5jaG9yKCkge1xuICAgICAgICBpZiAoIXRoaXMuI2dldEZyYW1lKCkuY3JlYXRlQW5jaG9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgY3JlYXRlIGFuY2hvciAtIGFuY2hvcnMgbm90IHN1cHBvcnRlZCwgZGlkIHlvdSBlbmFibGUgdGhlICdhbmNob3JzJyBXZWJYUiBmZWF0dXJlP1wiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy54ckhpdFJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKHRoaXMueHJIaXRSZXN1bHQuY3JlYXRlQW5jaG9yID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVlc3RlZCBhbmNob3Igb24gWFJIaXRUZXN0UmVzdWx0LCBidXQgV2ViWFIgaGl0LXRlc3QgZmVhdHVyZSBpcyBub3QgYXZhaWxhYmxlLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMueHJIaXRSZXN1bHQuY3JlYXRlQW5jaG9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5nZXRUcmFuc2xhdGlvbldvcmxkKHRlbXBWZWMzKTtcbiAgICAgICAgICAgIHRlbXBRdWF0LnNldCh0aGlzLm9iamVjdC5yb3RhdGlvbldvcmxkKTtcbiAgICAgICAgICAgIGNvbnN0IHJvdGF0aW9uID0gdGVtcFF1YXQ7XG4gICAgICAgICAgICBjb25zdCBhbmNob3JQb3NlID0gbmV3IFhSUmlnaWRUcmFuc2Zvcm0oeyB4OiB0ZW1wVmVjM1swXSwgeTogdGVtcFZlYzNbMV0sIHo6IHRlbXBWZWMzWzJdIH0sIHsgeDogcm90YXRpb25bMF0sIHk6IHJvdGF0aW9uWzFdLCB6OiByb3RhdGlvblsyXSwgdzogcm90YXRpb25bM10gfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy4jZ2V0RnJhbWUoKT8uY3JlYXRlQW5jaG9yKGFuY2hvclBvc2UsIHRoaXMuZW5naW5lLnhyLmN1cnJlbnRSZWZlcmVuY2VTcGFjZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgI29uQWRkQW5jaG9yKGFuY2hvcikge1xuICAgICAgICBpZiAoIWFuY2hvcilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHRoaXMucGVyc2lzdCkge1xuICAgICAgICAgICAgaWYgKGFuY2hvci5yZXF1ZXN0UGVyc2lzdGVudEhhbmRsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYW5jaG9yLnJlcXVlc3RQZXJzaXN0ZW50SGFuZGxlKCkudGhlbigodXVpZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnV1aWQgPSB1dWlkO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiNvbkNyZWF0ZShhbmNob3IpO1xuICAgICAgICAgICAgICAgICAgICBBbmNob3IuI2FkZEFuY2hvcih0aGlzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ2FuY2hvcjogUGVyc2lzdGVudCBhbmNob3JzIGFyZSBub3Qgc3VwcG9ydGVkIGJ5IHlvdXIgY2xpZW50LiBJZ25vcmluZyBwZXJzaXN0IHByb3BlcnR5LicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuI29uQ3JlYXRlKGFuY2hvcik7XG4gICAgfVxuICAgICNvblJlc3RvcmVBbmNob3IoYW5jaG9yKSB7XG4gICAgICAgIHRoaXMuI29uQ3JlYXRlKGFuY2hvcik7XG4gICAgfVxuICAgICNvbkNyZWF0ZShhbmNob3IpIHtcbiAgICAgICAgdGhpcy54ckFuY2hvciA9IGFuY2hvcjtcbiAgICAgICAgdGhpcy5vbkNyZWF0ZS5ub3RpZnkodGhpcyk7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICBpZiAodGhpcy51dWlkICYmIHRoaXMuZW5naW5lLnhyKSB7XG4gICAgICAgICAgICB0aGlzLnBlcnNpc3QgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuZW5naW5lLnhyLnNlc3Npb24ucmVzdG9yZVBlcnNpc3RlbnRBbmNob3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignYW5jaG9yOiBQZXJzaXN0ZW50IGFuY2hvcnMgYXJlIG5vdCBzdXBwb3J0ZWQgYnkgeW91ciBjbGllbnQuIElnbm9yaW5nIHBlcnNpc3QgcHJvcGVydHkuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVuZ2luZS54ci5zZXNzaW9uLnJlc3RvcmVQZXJzaXN0ZW50QW5jaG9yKHRoaXMudXVpZCkudGhlbih0aGlzLiNvblJlc3RvcmVBbmNob3IuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy4jZ2V0RnJhbWUoKSkge1xuICAgICAgICAgICAgdGhpcy4jY3JlYXRlQW5jaG9yKCkudGhlbih0aGlzLiNvbkFkZEFuY2hvci5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQW5jaG9ycyBjYW4gb25seSBiZSBjcmVhdGVkIGR1cmluZyB0aGUgWFIgZnJhbWUgaW4gYW4gYWN0aXZlIFhSIHNlc3Npb24nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIGlmICghdGhpcy54ckFuY2hvciB8fCAhdGhpcy5lbmdpbmUueHIpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIC8qIFdlIG5lZWQgdG8gdXNlIHRoZSBhY3R1YWwgZnJhbWUgZnJvbSB0aGUgZHJhdyBjYWxsYmFjayBoZXJlICovXG4gICAgICAgIGNvbnN0IHBvc2UgPSB0aGlzLmVuZ2luZS54ci5mcmFtZS5nZXRQb3NlKHRoaXMueHJBbmNob3IuYW5jaG9yU3BhY2UsIHRoaXMuZW5naW5lLnhyLmN1cnJlbnRSZWZlcmVuY2VTcGFjZSk7XG4gICAgICAgIGNvbnN0IHZpc2libGUgPSAhIXBvc2U7XG4gICAgICAgIGlmICh2aXNpYmxlICE9IHRoaXMudmlzaWJsZSkge1xuICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gdmlzaWJsZTtcbiAgICAgICAgICAgICh2aXNpYmxlID8gdGhpcy5vblRyYWNraW5nRm91bmQgOiB0aGlzLm9uVHJhY2tpbmdMb3N0KS5ub3RpZnkodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvc2UpIHtcbiAgICAgICAgICAgIHNldFhSUmlnaWRUcmFuc2Zvcm1Mb2NhbCh0aGlzLm9iamVjdCwgcG9zZS50cmFuc2Zvcm0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uRGVzdHJveSgpIHtcbiAgICAgICAgQW5jaG9yLiNyZW1vdmVBbmNob3IodGhpcyk7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuYm9vbChmYWxzZSlcbl0sIEFuY2hvci5wcm90b3R5cGUsIFwicGVyc2lzdFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuc3RyaW5nKClcbl0sIEFuY2hvci5wcm90b3R5cGUsIFwidXVpZFwiLCB2b2lkIDApO1xuZXhwb3J0IHsgQW5jaG9yIH07XG4iLCAiaW1wb3J0IHsgQ29tcG9uZW50LCBFbWl0dGVyIH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbi8qKlxuICogQ2xpY2svaG92ZXIvbW92ZS9idXR0b24gdGFyZ2V0IGZvciBbY3Vyc29yXSgjY3Vyc29yKS5cbiAqXG4gKiBUbyB0cmlnZ2VyIGNvZGUgd2hlbiBjbGlja2luZywgaG92ZXJpbmcsIHVuaG92ZXJpbmcsIG1vdmluZyBjdXJzb3IsIHByZXNzaW5nXG4gKiBjdXJzb3IgYnV0dG9uIG9yIHJlbGVhc2luZyBjdXJzb3IgYnV0dG9uLCB1c2UgYC5hZGRDbGlja0Z1bmN0aW9uKGYpYCxcbiAqIGAuYWRkSG92ZXJGdW5jdGlvbihmKWAsIGAuYWRkVW5Ib3ZlckZ1bmN0aW9uKGYpYCxcbiAqIGAuYWRkTW92ZUZ1bmN0aW9uKGYpYCwgYC5hZGREb3duRnVuY3Rpb24oZilgIGFuZFxuICogYC5hZGRVcEZ1bmN0aW9uKGYpYCByZXNwZWN0aXZlbHkgd2l0aCBhbnkgYGZ1bmN0aW9uIGYoKSB7fWAuXG4gKlxuICogVG8gY2FsbCBtZW1iZXJzIG9uIGEgZGlmZmVyZW50IGNvbXBvbmVudCwgeW91IGNhbiBzZXQgdXAgYSBjdXJzb3IgdGFyZ2V0IGxpa2VcbiAqIHNvOlxuICpcbiAqIGBgYGpzXG4gKiBzdGFydDogZnVuY3Rpb24oKSB7XG4gKiAgIGxldCB0YXJnZXQgPSB0aGlzLm9iamVjdC5hZGRDb21wb25lbnQoJ2N1cnNvci10YXJnZXQnKTtcbiAqICAgdGFyZ2V0Lm9uQ2xpY2suYWRkKHRoaXMub25DbGljay5iaW5kKHRoaXMpKTtcbiAqIH0sXG4gKiBvbkNsaWNrOiBmdW5jdGlvbigpIHtcbiAqICAgY29uc29sZS5sb2codGhpcy5vYmplY3QubmFtZSwgXCJ3YXMgY2xpY2tlZCFcIik7XG4gKiB9XG4gKiBgYGBcbiAqICoqRnVuY3Rpb25zOioqXG4gKlxuICogYGBganNcbiAqIGNvbnN0IHRhcmdldCA9IHRoaXMub2JqZWN0LmdldENvbXBvbmVudChDdXJzb3JUYXJnZXQpO1xuICogY29uc3QgY2FsbGJhY2sgPSBmdW5jdGlvbihvYmplY3QsIGN1cnNvckNvbXBvbmVudCkge307XG4gKlxuICogdGFyZ2V0Lm9uSG92ZXIuYWRkKGNhbGxiYWNrKTtcbiAqIHRhcmdldC5vbkhvdmVyLnJlbW92ZShjYWxsYmFjayk7XG4gKlxuICogdGFyZ2V0Lm9uVW5Ib3Zlci5hZGQoY2FsbGJhY2spO1xuICogdGFyZ2V0Lm9uVW5Ib3Zlci5yZW1vdmUoY2FsbGJhY2spO1xuICpcbiAqIHRhcmdldC5vbkNsaWNrLmFkZChjYWxsYmFjayk7XG4gKiB0YXJnZXQub25DbGljay5yZW1vdmUoY2FsbGJhY2spO1xuICpcbiAqIHRhcmdldC5vbk1vdmUuYWRkKGNhbGxiYWNrKTtcbiAqIHRhcmdldC5vbk1vdmUucmVtb3ZlKGNhbGxiYWNrKTtcbiAqXG4gKiB0YXJnZXQub25Eb3duLmFkZChjYWxsYmFjayk7XG4gKiB0YXJnZXQub25Eb3duLnJlbW92ZShjYWxsYmFjayk7XG4gKlxuICogdGFyZ2V0Lm9uVXAuYWRkKGNhbGxiYWNrKTtcbiAqIHRhcmdldC5vblVwLnJlbW92ZShjYWxsYmFjayk7XG4gKiBgYGBcbiAqXG4gKiAqKlJlcXVpcmVtZW50czoqKlxuICogLSBhIGBjb2xsaXNpb25gIGNvbXBvbmVudCB0byBiZSBhdHRhY2hlZCB0byB0aGUgc2FtZSBvYmplY3QuXG4gKlxuICogU2VlIFtBbmltYXRpb24gRXhhbXBsZV0oL3Nob3djYXNlL2FuaW1hdGlvbikuXG4gKi9cbmNsYXNzIEN1cnNvclRhcmdldCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ2N1cnNvci10YXJnZXQnO1xuICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge307XG4gICAgLyoqIEVtaXR0ZXIgZm9yIGV2ZW50cyB3aGVuIHRoZSB0YXJnZXQgaXMgaG92ZXJlZCAqL1xuICAgIG9uSG92ZXIgPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKiBFbWl0dGVyIGZvciBldmVudHMgd2hlbiB0aGUgdGFyZ2V0IGlzIHVuaG92ZXJlZCAqL1xuICAgIG9uVW5ob3ZlciA9IG5ldyBFbWl0dGVyKCk7XG4gICAgLyoqIEVtaXR0ZXIgZm9yIGV2ZW50cyB3aGVuIHRoZSB0YXJnZXQgaXMgY2xpY2tlZCAqL1xuICAgIG9uQ2xpY2sgPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKiBFbWl0dGVyIGZvciBldmVudHMgd2hlbiB0aGUgY3Vyc29yIG1vdmVzIG9uIHRoZSB0YXJnZXQgKi9cbiAgICBvbk1vdmUgPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKiBFbWl0dGVyIGZvciBldmVudHMgd2hlbiB0aGUgdXNlciBwcmVzc2VkIHRoZSBzZWxlY3QgYnV0dG9uIG9uIHRoZSB0YXJnZXQgKi9cbiAgICBvbkRvd24gPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKiBFbWl0dGVyIGZvciBldmVudHMgd2hlbiB0aGUgdXNlciB1bnByZXNzZWQgdGhlIHNlbGVjdCBidXR0b24gb24gdGhlIHRhcmdldCAqL1xuICAgIG9uVXAgPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSB0aGUgZW1pdHRlciBpbnN0ZWFkLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAgICB0aGlzLm9uSG92ZXIuYWRkKGYpO1xuICAgICAqL1xuICAgIGFkZEhvdmVyRnVuY3Rpb24oZikge1xuICAgICAgICB0aGlzLm9uSG92ZXIuYWRkKGYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGVtaXR0ZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgdGhpcy5vbkhvdmVyLnJlbW92ZShmKTtcbiAgICAgKi9cbiAgICByZW1vdmVIb3ZlckZ1bmN0aW9uKGYpIHtcbiAgICAgICAgdGhpcy5vbkhvdmVyLnJlbW92ZShmKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHRoZSBlbWl0dGVyIGluc3RlYWQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqICAgIHRoaXMub25VbmhvdmVyLmFkZChmKTtcbiAgICAgKi9cbiAgICBhZGRVbkhvdmVyRnVuY3Rpb24oZikge1xuICAgICAgICB0aGlzLm9uVW5ob3Zlci5hZGQoZik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSB0aGUgZW1pdHRlciBpbnN0ZWFkLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAgICB0aGlzLm9uVW5ob3Zlci5yZW1vdmUoZik7XG4gICAgICovXG4gICAgcmVtb3ZlVW5Ib3ZlckZ1bmN0aW9uKGYpIHtcbiAgICAgICAgdGhpcy5vblVuaG92ZXIucmVtb3ZlKGYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGVtaXR0ZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgdGhpcy5vbkNsaWNrLmFkZChmKTtcbiAgICAgKi9cbiAgICBhZGRDbGlja0Z1bmN0aW9uKGYpIHtcbiAgICAgICAgdGhpcy5vbkNsaWNrLmFkZChmKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHRoZSBlbWl0dGVyIGluc3RlYWQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqICAgIGNvbXBvbmVudC5vbkNsaWNrLnJlbW92ZShmKTtcbiAgICAgKi9cbiAgICByZW1vdmVDbGlja0Z1bmN0aW9uKGYpIHtcbiAgICAgICAgdGhpcy5vbkNsaWNrLnJlbW92ZShmKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHRoZSBlbWl0dGVyIGluc3RlYWQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqICAgIGNvbXBvbmVudC5vbk1vdmUuYWRkKGYpO1xuICAgICAqL1xuICAgIGFkZE1vdmVGdW5jdGlvbihmKSB7XG4gICAgICAgIHRoaXMub25Nb3ZlLmFkZChmKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHRoZSBlbWl0dGVyIGluc3RlYWQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqICAgIGNvbXBvbmVudC5vbk1vdmUucmVtb3ZlKGYpO1xuICAgICAqL1xuICAgIHJlbW92ZU1vdmVGdW5jdGlvbihmKSB7XG4gICAgICAgIHRoaXMub25Nb3ZlLnJlbW92ZShmKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHRoZSBlbWl0dGVyIGluc3RlYWQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqICAgIGNvbXBvbmVudC5vbkRvd24uYWRkKGYpO1xuICAgICAqL1xuICAgIGFkZERvd25GdW5jdGlvbihmKSB7XG4gICAgICAgIHRoaXMub25Eb3duLmFkZChmKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHRoZSBlbWl0dGVyIGluc3RlYWQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqICAgIGNvbXBvbmVudC5vbkRvd24ucmVtb3ZlKGYpO1xuICAgICAqL1xuICAgIHJlbW92ZURvd25GdW5jdGlvbihmKSB7XG4gICAgICAgIHRoaXMub25Eb3duLnJlbW92ZShmKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHRoZSBlbWl0dGVyIGluc3RlYWQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqICAgIGNvbXBvbmVudC5vblVwLmFkZChmKTtcbiAgICAgKi9cbiAgICBhZGRVcEZ1bmN0aW9uKGYpIHtcbiAgICAgICAgdGhpcy5vblVwLmFkZChmKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHRoZSBlbWl0dGVyIGluc3RlYWQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqICAgIGNvbXBvbmVudC5vblVwLnJlbW92ZShmKTtcbiAgICAgKi9cbiAgICByZW1vdmVVcEZ1bmN0aW9uKGYpIHtcbiAgICAgICAgdGhpcy5vblVwLnJlbW92ZShmKTtcbiAgICB9XG59XG5leHBvcnQgeyBDdXJzb3JUYXJnZXQgfTtcbiIsICIvKipcbiAqIENvbW1vbiB1dGlsaXRpZXNcbiAqIEBtb2R1bGUgZ2xNYXRyaXhcbiAqL1xuLy8gQ29uZmlndXJhdGlvbiBDb25zdGFudHNcbmV4cG9ydCB2YXIgRVBTSUxPTiA9IDAuMDAwMDAxO1xuZXhwb3J0IHZhciBBUlJBWV9UWVBFID0gdHlwZW9mIEZsb2F0MzJBcnJheSAhPT0gJ3VuZGVmaW5lZCcgPyBGbG9hdDMyQXJyYXkgOiBBcnJheTtcbmV4cG9ydCB2YXIgUkFORE9NID0gTWF0aC5yYW5kb207XG4vKipcbiAqIFNldHMgdGhlIHR5cGUgb2YgYXJyYXkgdXNlZCB3aGVuIGNyZWF0aW5nIG5ldyB2ZWN0b3JzIGFuZCBtYXRyaWNlc1xuICpcbiAqIEBwYXJhbSB7RmxvYXQzMkFycmF5Q29uc3RydWN0b3IgfCBBcnJheUNvbnN0cnVjdG9yfSB0eXBlIEFycmF5IHR5cGUsIHN1Y2ggYXMgRmxvYXQzMkFycmF5IG9yIEFycmF5XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNldE1hdHJpeEFycmF5VHlwZSh0eXBlKSB7XG4gIEFSUkFZX1RZUEUgPSB0eXBlO1xufVxudmFyIGRlZ3JlZSA9IE1hdGguUEkgLyAxODA7XG4vKipcbiAqIENvbnZlcnQgRGVncmVlIFRvIFJhZGlhblxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBhIEFuZ2xlIGluIERlZ3JlZXNcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdG9SYWRpYW4oYSkge1xuICByZXR1cm4gYSAqIGRlZ3JlZTtcbn1cbi8qKlxuICogVGVzdHMgd2hldGhlciBvciBub3QgdGhlIGFyZ3VtZW50cyBoYXZlIGFwcHJveGltYXRlbHkgdGhlIHNhbWUgdmFsdWUsIHdpdGhpbiBhbiBhYnNvbHV0ZVxuICogb3IgcmVsYXRpdmUgdG9sZXJhbmNlIG9mIGdsTWF0cml4LkVQU0lMT04gKGFuIGFic29sdXRlIHRvbGVyYW5jZSBpcyB1c2VkIGZvciB2YWx1ZXMgbGVzc1xuICogdGhhbiBvciBlcXVhbCB0byAxLjAsIGFuZCBhIHJlbGF0aXZlIHRvbGVyYW5jZSBpcyB1c2VkIGZvciBsYXJnZXIgdmFsdWVzKVxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBhIFRoZSBmaXJzdCBudW1iZXIgdG8gdGVzdC5cbiAqIEBwYXJhbSB7TnVtYmVyfSBiIFRoZSBzZWNvbmQgbnVtYmVyIHRvIHRlc3QuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgbnVtYmVycyBhcmUgYXBwcm94aW1hdGVseSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHMoYSwgYikge1xuICByZXR1cm4gTWF0aC5hYnMoYSAtIGIpIDw9IEVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEpLCBNYXRoLmFicyhiKSk7XG59XG5pZiAoIU1hdGguaHlwb3QpIE1hdGguaHlwb3QgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB5ID0gMCxcbiAgICAgIGkgPSBhcmd1bWVudHMubGVuZ3RoO1xuXG4gIHdoaWxlIChpLS0pIHtcbiAgICB5ICs9IGFyZ3VtZW50c1tpXSAqIGFyZ3VtZW50c1tpXTtcbiAgfVxuXG4gIHJldHVybiBNYXRoLnNxcnQoeSk7XG59OyIsICJpbXBvcnQgKiBhcyBnbE1hdHJpeCBmcm9tIFwiLi9jb21tb24uanNcIjtcbi8qKlxuICogM3gzIE1hdHJpeFxuICogQG1vZHVsZSBtYXQzXG4gKi9cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGlkZW50aXR5IG1hdDNcbiAqXG4gKiBAcmV0dXJucyB7bWF0M30gYSBuZXcgM3gzIG1hdHJpeFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSg5KTtcblxuICBpZiAoZ2xNYXRyaXguQVJSQVlfVFlQRSAhPSBGbG9hdDMyQXJyYXkpIHtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gICAgb3V0WzNdID0gMDtcbiAgICBvdXRbNV0gPSAwO1xuICAgIG91dFs2XSA9IDA7XG4gICAgb3V0WzddID0gMDtcbiAgfVxuXG4gIG91dFswXSA9IDE7XG4gIG91dFs0XSA9IDE7XG4gIG91dFs4XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENvcGllcyB0aGUgdXBwZXItbGVmdCAzeDMgdmFsdWVzIGludG8gdGhlIGdpdmVuIG1hdDMuXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyAzeDMgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSAgIHRoZSBzb3VyY2UgNHg0IG1hdHJpeFxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tTWF0NChvdXQsIGEpIHtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgb3V0WzNdID0gYVs0XTtcbiAgb3V0WzRdID0gYVs1XTtcbiAgb3V0WzVdID0gYVs2XTtcbiAgb3V0WzZdID0gYVs4XTtcbiAgb3V0WzddID0gYVs5XTtcbiAgb3V0WzhdID0gYVsxMF07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgbWF0MyBpbml0aWFsaXplZCB3aXRoIHZhbHVlcyBmcm9tIGFuIGV4aXN0aW5nIG1hdHJpeFxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIG1hdHJpeCB0byBjbG9uZVxuICogQHJldHVybnMge21hdDN9IGEgbmV3IDN4MyBtYXRyaXhcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY2xvbmUoYSkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoOSk7XG4gIG91dFswXSA9IGFbMF07XG4gIG91dFsxXSA9IGFbMV07XG4gIG91dFsyXSA9IGFbMl07XG4gIG91dFszXSA9IGFbM107XG4gIG91dFs0XSA9IGFbNF07XG4gIG91dFs1XSA9IGFbNV07XG4gIG91dFs2XSA9IGFbNl07XG4gIG91dFs3XSA9IGFbN107XG4gIG91dFs4XSA9IGFbOF07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENvcHkgdGhlIHZhbHVlcyBmcm9tIG9uZSBtYXQzIHRvIGFub3RoZXJcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY29weShvdXQsIGEpIHtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgb3V0WzNdID0gYVszXTtcbiAgb3V0WzRdID0gYVs0XTtcbiAgb3V0WzVdID0gYVs1XTtcbiAgb3V0WzZdID0gYVs2XTtcbiAgb3V0WzddID0gYVs3XTtcbiAgb3V0WzhdID0gYVs4XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlIGEgbmV3IG1hdDMgd2l0aCB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG0wMCBDb21wb25lbnQgaW4gY29sdW1uIDAsIHJvdyAwIHBvc2l0aW9uIChpbmRleCAwKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0wMSBDb21wb25lbnQgaW4gY29sdW1uIDAsIHJvdyAxIHBvc2l0aW9uIChpbmRleCAxKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0wMiBDb21wb25lbnQgaW4gY29sdW1uIDAsIHJvdyAyIHBvc2l0aW9uIChpbmRleCAyKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0xMCBDb21wb25lbnQgaW4gY29sdW1uIDEsIHJvdyAwIHBvc2l0aW9uIChpbmRleCAzKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0xMSBDb21wb25lbnQgaW4gY29sdW1uIDEsIHJvdyAxIHBvc2l0aW9uIChpbmRleCA0KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0xMiBDb21wb25lbnQgaW4gY29sdW1uIDEsIHJvdyAyIHBvc2l0aW9uIChpbmRleCA1KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMCBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAwIHBvc2l0aW9uIChpbmRleCA2KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMSBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAxIHBvc2l0aW9uIChpbmRleCA3KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMiBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAyIHBvc2l0aW9uIChpbmRleCA4KVxuICogQHJldHVybnMge21hdDN9IEEgbmV3IG1hdDNcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVZhbHVlcyhtMDAsIG0wMSwgbTAyLCBtMTAsIG0xMSwgbTEyLCBtMjAsIG0yMSwgbTIyKSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSg5KTtcbiAgb3V0WzBdID0gbTAwO1xuICBvdXRbMV0gPSBtMDE7XG4gIG91dFsyXSA9IG0wMjtcbiAgb3V0WzNdID0gbTEwO1xuICBvdXRbNF0gPSBtMTE7XG4gIG91dFs1XSA9IG0xMjtcbiAgb3V0WzZdID0gbTIwO1xuICBvdXRbN10gPSBtMjE7XG4gIG91dFs4XSA9IG0yMjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2V0IHRoZSBjb21wb25lbnRzIG9mIGEgbWF0MyB0byB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMDAgQ29tcG9uZW50IGluIGNvbHVtbiAwLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggMClcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMDEgQ29tcG9uZW50IGluIGNvbHVtbiAwLCByb3cgMSBwb3NpdGlvbiAoaW5kZXggMSlcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMDIgQ29tcG9uZW50IGluIGNvbHVtbiAwLCByb3cgMiBwb3NpdGlvbiAoaW5kZXggMilcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMTAgQ29tcG9uZW50IGluIGNvbHVtbiAxLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggMylcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMTEgQ29tcG9uZW50IGluIGNvbHVtbiAxLCByb3cgMSBwb3NpdGlvbiAoaW5kZXggNClcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMTIgQ29tcG9uZW50IGluIGNvbHVtbiAxLCByb3cgMiBwb3NpdGlvbiAoaW5kZXggNSlcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMjAgQ29tcG9uZW50IGluIGNvbHVtbiAyLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggNilcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMjEgQ29tcG9uZW50IGluIGNvbHVtbiAyLCByb3cgMSBwb3NpdGlvbiAoaW5kZXggNylcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMjIgQ29tcG9uZW50IGluIGNvbHVtbiAyLCByb3cgMiBwb3NpdGlvbiAoaW5kZXggOClcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0KG91dCwgbTAwLCBtMDEsIG0wMiwgbTEwLCBtMTEsIG0xMiwgbTIwLCBtMjEsIG0yMikge1xuICBvdXRbMF0gPSBtMDA7XG4gIG91dFsxXSA9IG0wMTtcbiAgb3V0WzJdID0gbTAyO1xuICBvdXRbM10gPSBtMTA7XG4gIG91dFs0XSA9IG0xMTtcbiAgb3V0WzVdID0gbTEyO1xuICBvdXRbNl0gPSBtMjA7XG4gIG91dFs3XSA9IG0yMTtcbiAgb3V0WzhdID0gbTIyO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTZXQgYSBtYXQzIHRvIHRoZSBpZGVudGl0eSBtYXRyaXhcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpZGVudGl0eShvdXQpIHtcbiAgb3V0WzBdID0gMTtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMTtcbiAgb3V0WzVdID0gMDtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogVHJhbnNwb3NlIHRoZSB2YWx1ZXMgb2YgYSBtYXQzXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zcG9zZShvdXQsIGEpIHtcbiAgLy8gSWYgd2UgYXJlIHRyYW5zcG9zaW5nIG91cnNlbHZlcyB3ZSBjYW4gc2tpcCBhIGZldyBzdGVwcyBidXQgaGF2ZSB0byBjYWNoZSBzb21lIHZhbHVlc1xuICBpZiAob3V0ID09PSBhKSB7XG4gICAgdmFyIGEwMSA9IGFbMV0sXG4gICAgICAgIGEwMiA9IGFbMl0sXG4gICAgICAgIGExMiA9IGFbNV07XG4gICAgb3V0WzFdID0gYVszXTtcbiAgICBvdXRbMl0gPSBhWzZdO1xuICAgIG91dFszXSA9IGEwMTtcbiAgICBvdXRbNV0gPSBhWzddO1xuICAgIG91dFs2XSA9IGEwMjtcbiAgICBvdXRbN10gPSBhMTI7XG4gIH0gZWxzZSB7XG4gICAgb3V0WzBdID0gYVswXTtcbiAgICBvdXRbMV0gPSBhWzNdO1xuICAgIG91dFsyXSA9IGFbNl07XG4gICAgb3V0WzNdID0gYVsxXTtcbiAgICBvdXRbNF0gPSBhWzRdO1xuICAgIG91dFs1XSA9IGFbN107XG4gICAgb3V0WzZdID0gYVsyXTtcbiAgICBvdXRbN10gPSBhWzVdO1xuICAgIG91dFs4XSA9IGFbOF07XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBJbnZlcnRzIGEgbWF0M1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpbnZlcnQob3V0LCBhKSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl07XG4gIHZhciBhMTAgPSBhWzNdLFxuICAgICAgYTExID0gYVs0XSxcbiAgICAgIGExMiA9IGFbNV07XG4gIHZhciBhMjAgPSBhWzZdLFxuICAgICAgYTIxID0gYVs3XSxcbiAgICAgIGEyMiA9IGFbOF07XG4gIHZhciBiMDEgPSBhMjIgKiBhMTEgLSBhMTIgKiBhMjE7XG4gIHZhciBiMTEgPSAtYTIyICogYTEwICsgYTEyICogYTIwO1xuICB2YXIgYjIxID0gYTIxICogYTEwIC0gYTExICogYTIwOyAvLyBDYWxjdWxhdGUgdGhlIGRldGVybWluYW50XG5cbiAgdmFyIGRldCA9IGEwMCAqIGIwMSArIGEwMSAqIGIxMSArIGEwMiAqIGIyMTtcblxuICBpZiAoIWRldCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZGV0ID0gMS4wIC8gZGV0O1xuICBvdXRbMF0gPSBiMDEgKiBkZXQ7XG4gIG91dFsxXSA9ICgtYTIyICogYTAxICsgYTAyICogYTIxKSAqIGRldDtcbiAgb3V0WzJdID0gKGExMiAqIGEwMSAtIGEwMiAqIGExMSkgKiBkZXQ7XG4gIG91dFszXSA9IGIxMSAqIGRldDtcbiAgb3V0WzRdID0gKGEyMiAqIGEwMCAtIGEwMiAqIGEyMCkgKiBkZXQ7XG4gIG91dFs1XSA9ICgtYTEyICogYTAwICsgYTAyICogYTEwKSAqIGRldDtcbiAgb3V0WzZdID0gYjIxICogZGV0O1xuICBvdXRbN10gPSAoLWEyMSAqIGEwMCArIGEwMSAqIGEyMCkgKiBkZXQ7XG4gIG91dFs4XSA9IChhMTEgKiBhMDAgLSBhMDEgKiBhMTApICogZGV0O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBhZGp1Z2F0ZSBvZiBhIG1hdDNcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYWRqb2ludChvdXQsIGEpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXTtcbiAgdmFyIGExMCA9IGFbM10sXG4gICAgICBhMTEgPSBhWzRdLFxuICAgICAgYTEyID0gYVs1XTtcbiAgdmFyIGEyMCA9IGFbNl0sXG4gICAgICBhMjEgPSBhWzddLFxuICAgICAgYTIyID0gYVs4XTtcbiAgb3V0WzBdID0gYTExICogYTIyIC0gYTEyICogYTIxO1xuICBvdXRbMV0gPSBhMDIgKiBhMjEgLSBhMDEgKiBhMjI7XG4gIG91dFsyXSA9IGEwMSAqIGExMiAtIGEwMiAqIGExMTtcbiAgb3V0WzNdID0gYTEyICogYTIwIC0gYTEwICogYTIyO1xuICBvdXRbNF0gPSBhMDAgKiBhMjIgLSBhMDIgKiBhMjA7XG4gIG91dFs1XSA9IGEwMiAqIGExMCAtIGEwMCAqIGExMjtcbiAgb3V0WzZdID0gYTEwICogYTIxIC0gYTExICogYTIwO1xuICBvdXRbN10gPSBhMDEgKiBhMjAgLSBhMDAgKiBhMjE7XG4gIG91dFs4XSA9IGEwMCAqIGExMSAtIGEwMSAqIGExMDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZGV0ZXJtaW5hbnQgb2YgYSBtYXQzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGRldGVybWluYW50IG9mIGFcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZGV0ZXJtaW5hbnQoYSkge1xuICB2YXIgYTAwID0gYVswXSxcbiAgICAgIGEwMSA9IGFbMV0sXG4gICAgICBhMDIgPSBhWzJdO1xuICB2YXIgYTEwID0gYVszXSxcbiAgICAgIGExMSA9IGFbNF0sXG4gICAgICBhMTIgPSBhWzVdO1xuICB2YXIgYTIwID0gYVs2XSxcbiAgICAgIGEyMSA9IGFbN10sXG4gICAgICBhMjIgPSBhWzhdO1xuICByZXR1cm4gYTAwICogKGEyMiAqIGExMSAtIGExMiAqIGEyMSkgKyBhMDEgKiAoLWEyMiAqIGExMCArIGExMiAqIGEyMCkgKyBhMDIgKiAoYTIxICogYTEwIC0gYTExICogYTIwKTtcbn1cbi8qKlxuICogTXVsdGlwbGllcyB0d28gbWF0MydzXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlwbHkob3V0LCBhLCBiKSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl07XG4gIHZhciBhMTAgPSBhWzNdLFxuICAgICAgYTExID0gYVs0XSxcbiAgICAgIGExMiA9IGFbNV07XG4gIHZhciBhMjAgPSBhWzZdLFxuICAgICAgYTIxID0gYVs3XSxcbiAgICAgIGEyMiA9IGFbOF07XG4gIHZhciBiMDAgPSBiWzBdLFxuICAgICAgYjAxID0gYlsxXSxcbiAgICAgIGIwMiA9IGJbMl07XG4gIHZhciBiMTAgPSBiWzNdLFxuICAgICAgYjExID0gYls0XSxcbiAgICAgIGIxMiA9IGJbNV07XG4gIHZhciBiMjAgPSBiWzZdLFxuICAgICAgYjIxID0gYls3XSxcbiAgICAgIGIyMiA9IGJbOF07XG4gIG91dFswXSA9IGIwMCAqIGEwMCArIGIwMSAqIGExMCArIGIwMiAqIGEyMDtcbiAgb3V0WzFdID0gYjAwICogYTAxICsgYjAxICogYTExICsgYjAyICogYTIxO1xuICBvdXRbMl0gPSBiMDAgKiBhMDIgKyBiMDEgKiBhMTIgKyBiMDIgKiBhMjI7XG4gIG91dFszXSA9IGIxMCAqIGEwMCArIGIxMSAqIGExMCArIGIxMiAqIGEyMDtcbiAgb3V0WzRdID0gYjEwICogYTAxICsgYjExICogYTExICsgYjEyICogYTIxO1xuICBvdXRbNV0gPSBiMTAgKiBhMDIgKyBiMTEgKiBhMTIgKyBiMTIgKiBhMjI7XG4gIG91dFs2XSA9IGIyMCAqIGEwMCArIGIyMSAqIGExMCArIGIyMiAqIGEyMDtcbiAgb3V0WzddID0gYjIwICogYTAxICsgYjIxICogYTExICsgYjIyICogYTIxO1xuICBvdXRbOF0gPSBiMjAgKiBhMDIgKyBiMjEgKiBhMTIgKyBiMjIgKiBhMjI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFRyYW5zbGF0ZSBhIG1hdDMgYnkgdGhlIGdpdmVuIHZlY3RvclxuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgbWF0cml4IHRvIHRyYW5zbGF0ZVxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IHYgdmVjdG9yIHRvIHRyYW5zbGF0ZSBieVxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2xhdGUob3V0LCBhLCB2KSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl0sXG4gICAgICBhMTAgPSBhWzNdLFxuICAgICAgYTExID0gYVs0XSxcbiAgICAgIGExMiA9IGFbNV0sXG4gICAgICBhMjAgPSBhWzZdLFxuICAgICAgYTIxID0gYVs3XSxcbiAgICAgIGEyMiA9IGFbOF0sXG4gICAgICB4ID0gdlswXSxcbiAgICAgIHkgPSB2WzFdO1xuICBvdXRbMF0gPSBhMDA7XG4gIG91dFsxXSA9IGEwMTtcbiAgb3V0WzJdID0gYTAyO1xuICBvdXRbM10gPSBhMTA7XG4gIG91dFs0XSA9IGExMTtcbiAgb3V0WzVdID0gYTEyO1xuICBvdXRbNl0gPSB4ICogYTAwICsgeSAqIGExMCArIGEyMDtcbiAgb3V0WzddID0geCAqIGEwMSArIHkgKiBhMTEgKyBhMjE7XG4gIG91dFs4XSA9IHggKiBhMDIgKyB5ICogYTEyICsgYTIyO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGVzIGEgbWF0MyBieSB0aGUgZ2l2ZW4gYW5nbGVcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIG1hdHJpeCB0byByb3RhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZShvdXQsIGEsIHJhZCkge1xuICB2YXIgYTAwID0gYVswXSxcbiAgICAgIGEwMSA9IGFbMV0sXG4gICAgICBhMDIgPSBhWzJdLFxuICAgICAgYTEwID0gYVszXSxcbiAgICAgIGExMSA9IGFbNF0sXG4gICAgICBhMTIgPSBhWzVdLFxuICAgICAgYTIwID0gYVs2XSxcbiAgICAgIGEyMSA9IGFbN10sXG4gICAgICBhMjIgPSBhWzhdLFxuICAgICAgcyA9IE1hdGguc2luKHJhZCksXG4gICAgICBjID0gTWF0aC5jb3MocmFkKTtcbiAgb3V0WzBdID0gYyAqIGEwMCArIHMgKiBhMTA7XG4gIG91dFsxXSA9IGMgKiBhMDEgKyBzICogYTExO1xuICBvdXRbMl0gPSBjICogYTAyICsgcyAqIGExMjtcbiAgb3V0WzNdID0gYyAqIGExMCAtIHMgKiBhMDA7XG4gIG91dFs0XSA9IGMgKiBhMTEgLSBzICogYTAxO1xuICBvdXRbNV0gPSBjICogYTEyIC0gcyAqIGEwMjtcbiAgb3V0WzZdID0gYTIwO1xuICBvdXRbN10gPSBhMjE7XG4gIG91dFs4XSA9IGEyMjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2NhbGVzIHRoZSBtYXQzIGJ5IHRoZSBkaW1lbnNpb25zIGluIHRoZSBnaXZlbiB2ZWMyXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBtYXRyaXggdG8gcm90YXRlXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gdiB0aGUgdmVjMiB0byBzY2FsZSB0aGUgbWF0cml4IGJ5XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKiovXG5cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZShvdXQsIGEsIHYpIHtcbiAgdmFyIHggPSB2WzBdLFxuICAgICAgeSA9IHZbMV07XG4gIG91dFswXSA9IHggKiBhWzBdO1xuICBvdXRbMV0gPSB4ICogYVsxXTtcbiAgb3V0WzJdID0geCAqIGFbMl07XG4gIG91dFszXSA9IHkgKiBhWzNdO1xuICBvdXRbNF0gPSB5ICogYVs0XTtcbiAgb3V0WzVdID0geSAqIGFbNV07XG4gIG91dFs2XSA9IGFbNl07XG4gIG91dFs3XSA9IGFbN107XG4gIG91dFs4XSA9IGFbOF07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBtYXRyaXggZnJvbSBhIHZlY3RvciB0cmFuc2xhdGlvblxuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XG4gKlxuICogICAgIG1hdDMuaWRlbnRpdHkoZGVzdCk7XG4gKiAgICAgbWF0My50cmFuc2xhdGUoZGVzdCwgZGVzdCwgdmVjKTtcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCBtYXQzIHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gdiBUcmFuc2xhdGlvbiB2ZWN0b3JcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVRyYW5zbGF0aW9uKG91dCwgdikge1xuICBvdXRbMF0gPSAxO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAxO1xuICBvdXRbNV0gPSAwO1xuICBvdXRbNl0gPSB2WzBdO1xuICBvdXRbN10gPSB2WzFdO1xuICBvdXRbOF0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gYSBnaXZlbiBhbmdsZVxuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XG4gKlxuICogICAgIG1hdDMuaWRlbnRpdHkoZGVzdCk7XG4gKiAgICAgbWF0My5yb3RhdGUoZGVzdCwgZGVzdCwgcmFkKTtcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCBtYXQzIHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUm90YXRpb24ob3V0LCByYWQpIHtcbiAgdmFyIHMgPSBNYXRoLnNpbihyYWQpLFxuICAgICAgYyA9IE1hdGguY29zKHJhZCk7XG4gIG91dFswXSA9IGM7XG4gIG91dFsxXSA9IHM7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IC1zO1xuICBvdXRbNF0gPSBjO1xuICBvdXRbNV0gPSAwO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gYSB2ZWN0b3Igc2NhbGluZ1xuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XG4gKlxuICogICAgIG1hdDMuaWRlbnRpdHkoZGVzdCk7XG4gKiAgICAgbWF0My5zY2FsZShkZXN0LCBkZXN0LCB2ZWMpO1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IG1hdDMgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSB2IFNjYWxpbmcgdmVjdG9yXG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21TY2FsaW5nKG91dCwgdikge1xuICBvdXRbMF0gPSB2WzBdO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSB2WzFdO1xuICBvdXRbNV0gPSAwO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDb3BpZXMgdGhlIHZhbHVlcyBmcm9tIGEgbWF0MmQgaW50byBhIG1hdDNcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDJkfSBhIHRoZSBtYXRyaXggdG8gY29weVxuICogQHJldHVybnMge21hdDN9IG91dFxuICoqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbU1hdDJkKG91dCwgYSkge1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSBhWzJdO1xuICBvdXRbNF0gPSBhWzNdO1xuICBvdXRbNV0gPSAwO1xuICBvdXRbNl0gPSBhWzRdO1xuICBvdXRbN10gPSBhWzVdO1xuICBvdXRbOF0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIGEgM3gzIG1hdHJpeCBmcm9tIHRoZSBnaXZlbiBxdWF0ZXJuaW9uXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgbWF0MyByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IHEgUXVhdGVybmlvbiB0byBjcmVhdGUgbWF0cml4IGZyb21cbiAqXG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21RdWF0KG91dCwgcSkge1xuICB2YXIgeCA9IHFbMF0sXG4gICAgICB5ID0gcVsxXSxcbiAgICAgIHogPSBxWzJdLFxuICAgICAgdyA9IHFbM107XG4gIHZhciB4MiA9IHggKyB4O1xuICB2YXIgeTIgPSB5ICsgeTtcbiAgdmFyIHoyID0geiArIHo7XG4gIHZhciB4eCA9IHggKiB4MjtcbiAgdmFyIHl4ID0geSAqIHgyO1xuICB2YXIgeXkgPSB5ICogeTI7XG4gIHZhciB6eCA9IHogKiB4MjtcbiAgdmFyIHp5ID0geiAqIHkyO1xuICB2YXIgenogPSB6ICogejI7XG4gIHZhciB3eCA9IHcgKiB4MjtcbiAgdmFyIHd5ID0gdyAqIHkyO1xuICB2YXIgd3ogPSB3ICogejI7XG4gIG91dFswXSA9IDEgLSB5eSAtIHp6O1xuICBvdXRbM10gPSB5eCAtIHd6O1xuICBvdXRbNl0gPSB6eCArIHd5O1xuICBvdXRbMV0gPSB5eCArIHd6O1xuICBvdXRbNF0gPSAxIC0geHggLSB6ejtcbiAgb3V0WzddID0genkgLSB3eDtcbiAgb3V0WzJdID0genggLSB3eTtcbiAgb3V0WzVdID0genkgKyB3eDtcbiAgb3V0WzhdID0gMSAtIHh4IC0geXk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgYSAzeDMgbm9ybWFsIG1hdHJpeCAodHJhbnNwb3NlIGludmVyc2UpIGZyb20gdGhlIDR4NCBtYXRyaXhcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCBtYXQzIHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSBNYXQ0IHRvIGRlcml2ZSB0aGUgbm9ybWFsIG1hdHJpeCBmcm9tXG4gKlxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxGcm9tTWF0NChvdXQsIGEpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXSxcbiAgICAgIGEwMyA9IGFbM107XG4gIHZhciBhMTAgPSBhWzRdLFxuICAgICAgYTExID0gYVs1XSxcbiAgICAgIGExMiA9IGFbNl0sXG4gICAgICBhMTMgPSBhWzddO1xuICB2YXIgYTIwID0gYVs4XSxcbiAgICAgIGEyMSA9IGFbOV0sXG4gICAgICBhMjIgPSBhWzEwXSxcbiAgICAgIGEyMyA9IGFbMTFdO1xuICB2YXIgYTMwID0gYVsxMl0sXG4gICAgICBhMzEgPSBhWzEzXSxcbiAgICAgIGEzMiA9IGFbMTRdLFxuICAgICAgYTMzID0gYVsxNV07XG4gIHZhciBiMDAgPSBhMDAgKiBhMTEgLSBhMDEgKiBhMTA7XG4gIHZhciBiMDEgPSBhMDAgKiBhMTIgLSBhMDIgKiBhMTA7XG4gIHZhciBiMDIgPSBhMDAgKiBhMTMgLSBhMDMgKiBhMTA7XG4gIHZhciBiMDMgPSBhMDEgKiBhMTIgLSBhMDIgKiBhMTE7XG4gIHZhciBiMDQgPSBhMDEgKiBhMTMgLSBhMDMgKiBhMTE7XG4gIHZhciBiMDUgPSBhMDIgKiBhMTMgLSBhMDMgKiBhMTI7XG4gIHZhciBiMDYgPSBhMjAgKiBhMzEgLSBhMjEgKiBhMzA7XG4gIHZhciBiMDcgPSBhMjAgKiBhMzIgLSBhMjIgKiBhMzA7XG4gIHZhciBiMDggPSBhMjAgKiBhMzMgLSBhMjMgKiBhMzA7XG4gIHZhciBiMDkgPSBhMjEgKiBhMzIgLSBhMjIgKiBhMzE7XG4gIHZhciBiMTAgPSBhMjEgKiBhMzMgLSBhMjMgKiBhMzE7XG4gIHZhciBiMTEgPSBhMjIgKiBhMzMgLSBhMjMgKiBhMzI7IC8vIENhbGN1bGF0ZSB0aGUgZGV0ZXJtaW5hbnRcblxuICB2YXIgZGV0ID0gYjAwICogYjExIC0gYjAxICogYjEwICsgYjAyICogYjA5ICsgYjAzICogYjA4IC0gYjA0ICogYjA3ICsgYjA1ICogYjA2O1xuXG4gIGlmICghZGV0KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBkZXQgPSAxLjAgLyBkZXQ7XG4gIG91dFswXSA9IChhMTEgKiBiMTEgLSBhMTIgKiBiMTAgKyBhMTMgKiBiMDkpICogZGV0O1xuICBvdXRbMV0gPSAoYTEyICogYjA4IC0gYTEwICogYjExIC0gYTEzICogYjA3KSAqIGRldDtcbiAgb3V0WzJdID0gKGExMCAqIGIxMCAtIGExMSAqIGIwOCArIGExMyAqIGIwNikgKiBkZXQ7XG4gIG91dFszXSA9IChhMDIgKiBiMTAgLSBhMDEgKiBiMTEgLSBhMDMgKiBiMDkpICogZGV0O1xuICBvdXRbNF0gPSAoYTAwICogYjExIC0gYTAyICogYjA4ICsgYTAzICogYjA3KSAqIGRldDtcbiAgb3V0WzVdID0gKGEwMSAqIGIwOCAtIGEwMCAqIGIxMCAtIGEwMyAqIGIwNikgKiBkZXQ7XG4gIG91dFs2XSA9IChhMzEgKiBiMDUgLSBhMzIgKiBiMDQgKyBhMzMgKiBiMDMpICogZGV0O1xuICBvdXRbN10gPSAoYTMyICogYjAyIC0gYTMwICogYjA1IC0gYTMzICogYjAxKSAqIGRldDtcbiAgb3V0WzhdID0gKGEzMCAqIGIwNCAtIGEzMSAqIGIwMiArIGEzMyAqIGIwMCkgKiBkZXQ7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdlbmVyYXRlcyBhIDJEIHByb2plY3Rpb24gbWF0cml4IHdpdGggdGhlIGdpdmVuIGJvdW5kc1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IG1hdDMgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cbiAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCBXaWR0aCBvZiB5b3VyIGdsIGNvbnRleHRcbiAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHQgSGVpZ2h0IG9mIGdsIGNvbnRleHRcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcHJvamVjdGlvbihvdXQsIHdpZHRoLCBoZWlnaHQpIHtcbiAgb3V0WzBdID0gMiAvIHdpZHRoO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAtMiAvIGhlaWdodDtcbiAgb3V0WzVdID0gMDtcbiAgb3V0WzZdID0gLTE7XG4gIG91dFs3XSA9IDE7XG4gIG91dFs4XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBtYXQzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgbWF0cml4IHRvIHJlcHJlc2VudCBhcyBhIHN0cmluZ1xuICogQHJldHVybnMge1N0cmluZ30gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBtYXRyaXhcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3RyKGEpIHtcbiAgcmV0dXJuIFwibWF0MyhcIiArIGFbMF0gKyBcIiwgXCIgKyBhWzFdICsgXCIsIFwiICsgYVsyXSArIFwiLCBcIiArIGFbM10gKyBcIiwgXCIgKyBhWzRdICsgXCIsIFwiICsgYVs1XSArIFwiLCBcIiArIGFbNl0gKyBcIiwgXCIgKyBhWzddICsgXCIsIFwiICsgYVs4XSArIFwiKVwiO1xufVxuLyoqXG4gKiBSZXR1cm5zIEZyb2Jlbml1cyBub3JtIG9mIGEgbWF0M1xuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBtYXRyaXggdG8gY2FsY3VsYXRlIEZyb2Jlbml1cyBub3JtIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBGcm9iZW5pdXMgbm9ybVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9iKGEpIHtcbiAgcmV0dXJuIE1hdGguaHlwb3QoYVswXSwgYVsxXSwgYVsyXSwgYVszXSwgYVs0XSwgYVs1XSwgYVs2XSwgYVs3XSwgYVs4XSk7XG59XG4vKipcbiAqIEFkZHMgdHdvIG1hdDMnc1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSArIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gKyBiWzFdO1xuICBvdXRbMl0gPSBhWzJdICsgYlsyXTtcbiAgb3V0WzNdID0gYVszXSArIGJbM107XG4gIG91dFs0XSA9IGFbNF0gKyBiWzRdO1xuICBvdXRbNV0gPSBhWzVdICsgYls1XTtcbiAgb3V0WzZdID0gYVs2XSArIGJbNl07XG4gIG91dFs3XSA9IGFbN10gKyBiWzddO1xuICBvdXRbOF0gPSBhWzhdICsgYls4XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU3VidHJhY3RzIG1hdHJpeCBiIGZyb20gbWF0cml4IGFcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzdWJ0cmFjdChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAtIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gLSBiWzFdO1xuICBvdXRbMl0gPSBhWzJdIC0gYlsyXTtcbiAgb3V0WzNdID0gYVszXSAtIGJbM107XG4gIG91dFs0XSA9IGFbNF0gLSBiWzRdO1xuICBvdXRbNV0gPSBhWzVdIC0gYls1XTtcbiAgb3V0WzZdID0gYVs2XSAtIGJbNl07XG4gIG91dFs3XSA9IGFbN10gLSBiWzddO1xuICBvdXRbOF0gPSBhWzhdIC0gYls4XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTXVsdGlwbHkgZWFjaCBlbGVtZW50IG9mIHRoZSBtYXRyaXggYnkgYSBzY2FsYXIuXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBtYXRyaXggdG8gc2NhbGVcbiAqIEBwYXJhbSB7TnVtYmVyfSBiIGFtb3VudCB0byBzY2FsZSB0aGUgbWF0cml4J3MgZWxlbWVudHMgYnlcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlwbHlTY2FsYXIob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gKiBiO1xuICBvdXRbMV0gPSBhWzFdICogYjtcbiAgb3V0WzJdID0gYVsyXSAqIGI7XG4gIG91dFszXSA9IGFbM10gKiBiO1xuICBvdXRbNF0gPSBhWzRdICogYjtcbiAgb3V0WzVdID0gYVs1XSAqIGI7XG4gIG91dFs2XSA9IGFbNl0gKiBiO1xuICBvdXRbN10gPSBhWzddICogYjtcbiAgb3V0WzhdID0gYVs4XSAqIGI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEFkZHMgdHdvIG1hdDMncyBhZnRlciBtdWx0aXBseWluZyBlYWNoIGVsZW1lbnQgb2YgdGhlIHNlY29uZCBvcGVyYW5kIGJ5IGEgc2NhbGFyIHZhbHVlLlxuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gc2NhbGUgdGhlIGFtb3VudCB0byBzY2FsZSBiJ3MgZWxlbWVudHMgYnkgYmVmb3JlIGFkZGluZ1xuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aXBseVNjYWxhckFuZEFkZChvdXQsIGEsIGIsIHNjYWxlKSB7XG4gIG91dFswXSA9IGFbMF0gKyBiWzBdICogc2NhbGU7XG4gIG91dFsxXSA9IGFbMV0gKyBiWzFdICogc2NhbGU7XG4gIG91dFsyXSA9IGFbMl0gKyBiWzJdICogc2NhbGU7XG4gIG91dFszXSA9IGFbM10gKyBiWzNdICogc2NhbGU7XG4gIG91dFs0XSA9IGFbNF0gKyBiWzRdICogc2NhbGU7XG4gIG91dFs1XSA9IGFbNV0gKyBiWzVdICogc2NhbGU7XG4gIG91dFs2XSA9IGFbNl0gKyBiWzZdICogc2NhbGU7XG4gIG91dFs3XSA9IGFbN10gKyBiWzddICogc2NhbGU7XG4gIG91dFs4XSA9IGFbOF0gKyBiWzhdICogc2NhbGU7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIG1hdHJpY2VzIGhhdmUgZXhhY3RseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbiAod2hlbiBjb21wYXJlZCB3aXRoID09PSlcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSBUaGUgZmlyc3QgbWF0cml4LlxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGIgVGhlIHNlY29uZCBtYXRyaXguXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgbWF0cmljZXMgYXJlIGVxdWFsLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGV4YWN0RXF1YWxzKGEsIGIpIHtcbiAgcmV0dXJuIGFbMF0gPT09IGJbMF0gJiYgYVsxXSA9PT0gYlsxXSAmJiBhWzJdID09PSBiWzJdICYmIGFbM10gPT09IGJbM10gJiYgYVs0XSA9PT0gYls0XSAmJiBhWzVdID09PSBiWzVdICYmIGFbNl0gPT09IGJbNl0gJiYgYVs3XSA9PT0gYls3XSAmJiBhWzhdID09PSBiWzhdO1xufVxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBtYXRyaWNlcyBoYXZlIGFwcHJveGltYXRlbHkgdGhlIHNhbWUgZWxlbWVudHMgaW4gdGhlIHNhbWUgcG9zaXRpb24uXG4gKlxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgVGhlIGZpcnN0IG1hdHJpeC5cbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBiIFRoZSBzZWNvbmQgbWF0cml4LlxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhlIG1hdHJpY2VzIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHMoYSwgYikge1xuICB2YXIgYTAgPSBhWzBdLFxuICAgICAgYTEgPSBhWzFdLFxuICAgICAgYTIgPSBhWzJdLFxuICAgICAgYTMgPSBhWzNdLFxuICAgICAgYTQgPSBhWzRdLFxuICAgICAgYTUgPSBhWzVdLFxuICAgICAgYTYgPSBhWzZdLFxuICAgICAgYTcgPSBhWzddLFxuICAgICAgYTggPSBhWzhdO1xuICB2YXIgYjAgPSBiWzBdLFxuICAgICAgYjEgPSBiWzFdLFxuICAgICAgYjIgPSBiWzJdLFxuICAgICAgYjMgPSBiWzNdLFxuICAgICAgYjQgPSBiWzRdLFxuICAgICAgYjUgPSBiWzVdLFxuICAgICAgYjYgPSBiWzZdLFxuICAgICAgYjcgPSBiWzddLFxuICAgICAgYjggPSBiWzhdO1xuICByZXR1cm4gTWF0aC5hYnMoYTAgLSBiMCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTApLCBNYXRoLmFicyhiMCkpICYmIE1hdGguYWJzKGExIC0gYjEpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExKSwgTWF0aC5hYnMoYjEpKSAmJiBNYXRoLmFicyhhMiAtIGIyKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMiksIE1hdGguYWJzKGIyKSkgJiYgTWF0aC5hYnMoYTMgLSBiMykgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTMpLCBNYXRoLmFicyhiMykpICYmIE1hdGguYWJzKGE0IC0gYjQpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE0KSwgTWF0aC5hYnMoYjQpKSAmJiBNYXRoLmFicyhhNSAtIGI1KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhNSksIE1hdGguYWJzKGI1KSkgJiYgTWF0aC5hYnMoYTYgLSBiNikgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTYpLCBNYXRoLmFicyhiNikpICYmIE1hdGguYWJzKGE3IC0gYjcpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE3KSwgTWF0aC5hYnMoYjcpKSAmJiBNYXRoLmFicyhhOCAtIGI4KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhOCksIE1hdGguYWJzKGI4KSk7XG59XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgbWF0My5tdWx0aXBseX1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgbXVsID0gbXVsdGlwbHk7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgbWF0My5zdWJ0cmFjdH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgc3ViID0gc3VidHJhY3Q7IiwgImltcG9ydCAqIGFzIGdsTWF0cml4IGZyb20gXCIuL2NvbW1vbi5qc1wiO1xuLyoqXG4gKiA0eDQgTWF0cml4PGJyPkZvcm1hdDogY29sdW1uLW1ham9yLCB3aGVuIHR5cGVkIG91dCBpdCBsb29rcyBsaWtlIHJvdy1tYWpvcjxicj5UaGUgbWF0cmljZXMgYXJlIGJlaW5nIHBvc3QgbXVsdGlwbGllZC5cbiAqIEBtb2R1bGUgbWF0NFxuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBpZGVudGl0eSBtYXQ0XG4gKlxuICogQHJldHVybnMge21hdDR9IGEgbmV3IDR4NCBtYXRyaXhcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKCkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMTYpO1xuXG4gIGlmIChnbE1hdHJpeC5BUlJBWV9UWVBFICE9IEZsb2F0MzJBcnJheSkge1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gMDtcbiAgICBvdXRbM10gPSAwO1xuICAgIG91dFs0XSA9IDA7XG4gICAgb3V0WzZdID0gMDtcbiAgICBvdXRbN10gPSAwO1xuICAgIG91dFs4XSA9IDA7XG4gICAgb3V0WzldID0gMDtcbiAgICBvdXRbMTFdID0gMDtcbiAgICBvdXRbMTJdID0gMDtcbiAgICBvdXRbMTNdID0gMDtcbiAgICBvdXRbMTRdID0gMDtcbiAgfVxuXG4gIG91dFswXSA9IDE7XG4gIG91dFs1XSA9IDE7XG4gIG91dFsxMF0gPSAxO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBtYXQ0IGluaXRpYWxpemVkIHdpdGggdmFsdWVzIGZyb20gYW4gZXhpc3RpbmcgbWF0cml4XG4gKlxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgbWF0cml4IHRvIGNsb25lXG4gKiBAcmV0dXJucyB7bWF0NH0gYSBuZXcgNHg0IG1hdHJpeFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZShhKSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSgxNik7XG4gIG91dFswXSA9IGFbMF07XG4gIG91dFsxXSA9IGFbMV07XG4gIG91dFsyXSA9IGFbMl07XG4gIG91dFszXSA9IGFbM107XG4gIG91dFs0XSA9IGFbNF07XG4gIG91dFs1XSA9IGFbNV07XG4gIG91dFs2XSA9IGFbNl07XG4gIG91dFs3XSA9IGFbN107XG4gIG91dFs4XSA9IGFbOF07XG4gIG91dFs5XSA9IGFbOV07XG4gIG91dFsxMF0gPSBhWzEwXTtcbiAgb3V0WzExXSA9IGFbMTFdO1xuICBvdXRbMTJdID0gYVsxMl07XG4gIG91dFsxM10gPSBhWzEzXTtcbiAgb3V0WzE0XSA9IGFbMTRdO1xuICBvdXRbMTVdID0gYVsxNV07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENvcHkgdGhlIHZhbHVlcyBmcm9tIG9uZSBtYXQ0IHRvIGFub3RoZXJcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY29weShvdXQsIGEpIHtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgb3V0WzNdID0gYVszXTtcbiAgb3V0WzRdID0gYVs0XTtcbiAgb3V0WzVdID0gYVs1XTtcbiAgb3V0WzZdID0gYVs2XTtcbiAgb3V0WzddID0gYVs3XTtcbiAgb3V0WzhdID0gYVs4XTtcbiAgb3V0WzldID0gYVs5XTtcbiAgb3V0WzEwXSA9IGFbMTBdO1xuICBvdXRbMTFdID0gYVsxMV07XG4gIG91dFsxMl0gPSBhWzEyXTtcbiAgb3V0WzEzXSA9IGFbMTNdO1xuICBvdXRbMTRdID0gYVsxNF07XG4gIG91dFsxNV0gPSBhWzE1XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlIGEgbmV3IG1hdDQgd2l0aCB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG0wMCBDb21wb25lbnQgaW4gY29sdW1uIDAsIHJvdyAwIHBvc2l0aW9uIChpbmRleCAwKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0wMSBDb21wb25lbnQgaW4gY29sdW1uIDAsIHJvdyAxIHBvc2l0aW9uIChpbmRleCAxKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0wMiBDb21wb25lbnQgaW4gY29sdW1uIDAsIHJvdyAyIHBvc2l0aW9uIChpbmRleCAyKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0wMyBDb21wb25lbnQgaW4gY29sdW1uIDAsIHJvdyAzIHBvc2l0aW9uIChpbmRleCAzKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0xMCBDb21wb25lbnQgaW4gY29sdW1uIDEsIHJvdyAwIHBvc2l0aW9uIChpbmRleCA0KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0xMSBDb21wb25lbnQgaW4gY29sdW1uIDEsIHJvdyAxIHBvc2l0aW9uIChpbmRleCA1KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0xMiBDb21wb25lbnQgaW4gY29sdW1uIDEsIHJvdyAyIHBvc2l0aW9uIChpbmRleCA2KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0xMyBDb21wb25lbnQgaW4gY29sdW1uIDEsIHJvdyAzIHBvc2l0aW9uIChpbmRleCA3KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMCBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAwIHBvc2l0aW9uIChpbmRleCA4KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMSBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAxIHBvc2l0aW9uIChpbmRleCA5KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMiBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAyIHBvc2l0aW9uIChpbmRleCAxMClcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMjMgQ29tcG9uZW50IGluIGNvbHVtbiAyLCByb3cgMyBwb3NpdGlvbiAoaW5kZXggMTEpXG4gKiBAcGFyYW0ge051bWJlcn0gbTMwIENvbXBvbmVudCBpbiBjb2x1bW4gMywgcm93IDAgcG9zaXRpb24gKGluZGV4IDEyKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0zMSBDb21wb25lbnQgaW4gY29sdW1uIDMsIHJvdyAxIHBvc2l0aW9uIChpbmRleCAxMylcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzIgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMiBwb3NpdGlvbiAoaW5kZXggMTQpXG4gKiBAcGFyYW0ge051bWJlcn0gbTMzIENvbXBvbmVudCBpbiBjb2x1bW4gMywgcm93IDMgcG9zaXRpb24gKGluZGV4IDE1KVxuICogQHJldHVybnMge21hdDR9IEEgbmV3IG1hdDRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVZhbHVlcyhtMDAsIG0wMSwgbTAyLCBtMDMsIG0xMCwgbTExLCBtMTIsIG0xMywgbTIwLCBtMjEsIG0yMiwgbTIzLCBtMzAsIG0zMSwgbTMyLCBtMzMpIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDE2KTtcbiAgb3V0WzBdID0gbTAwO1xuICBvdXRbMV0gPSBtMDE7XG4gIG91dFsyXSA9IG0wMjtcbiAgb3V0WzNdID0gbTAzO1xuICBvdXRbNF0gPSBtMTA7XG4gIG91dFs1XSA9IG0xMTtcbiAgb3V0WzZdID0gbTEyO1xuICBvdXRbN10gPSBtMTM7XG4gIG91dFs4XSA9IG0yMDtcbiAgb3V0WzldID0gbTIxO1xuICBvdXRbMTBdID0gbTIyO1xuICBvdXRbMTFdID0gbTIzO1xuICBvdXRbMTJdID0gbTMwO1xuICBvdXRbMTNdID0gbTMxO1xuICBvdXRbMTRdID0gbTMyO1xuICBvdXRbMTVdID0gbTMzO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTZXQgdGhlIGNvbXBvbmVudHMgb2YgYSBtYXQ0IHRvIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtOdW1iZXJ9IG0wMCBDb21wb25lbnQgaW4gY29sdW1uIDAsIHJvdyAwIHBvc2l0aW9uIChpbmRleCAwKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0wMSBDb21wb25lbnQgaW4gY29sdW1uIDAsIHJvdyAxIHBvc2l0aW9uIChpbmRleCAxKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0wMiBDb21wb25lbnQgaW4gY29sdW1uIDAsIHJvdyAyIHBvc2l0aW9uIChpbmRleCAyKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0wMyBDb21wb25lbnQgaW4gY29sdW1uIDAsIHJvdyAzIHBvc2l0aW9uIChpbmRleCAzKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0xMCBDb21wb25lbnQgaW4gY29sdW1uIDEsIHJvdyAwIHBvc2l0aW9uIChpbmRleCA0KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0xMSBDb21wb25lbnQgaW4gY29sdW1uIDEsIHJvdyAxIHBvc2l0aW9uIChpbmRleCA1KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0xMiBDb21wb25lbnQgaW4gY29sdW1uIDEsIHJvdyAyIHBvc2l0aW9uIChpbmRleCA2KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0xMyBDb21wb25lbnQgaW4gY29sdW1uIDEsIHJvdyAzIHBvc2l0aW9uIChpbmRleCA3KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMCBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAwIHBvc2l0aW9uIChpbmRleCA4KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMSBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAxIHBvc2l0aW9uIChpbmRleCA5KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMiBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAyIHBvc2l0aW9uIChpbmRleCAxMClcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMjMgQ29tcG9uZW50IGluIGNvbHVtbiAyLCByb3cgMyBwb3NpdGlvbiAoaW5kZXggMTEpXG4gKiBAcGFyYW0ge051bWJlcn0gbTMwIENvbXBvbmVudCBpbiBjb2x1bW4gMywgcm93IDAgcG9zaXRpb24gKGluZGV4IDEyKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0zMSBDb21wb25lbnQgaW4gY29sdW1uIDMsIHJvdyAxIHBvc2l0aW9uIChpbmRleCAxMylcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzIgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMiBwb3NpdGlvbiAoaW5kZXggMTQpXG4gKiBAcGFyYW0ge051bWJlcn0gbTMzIENvbXBvbmVudCBpbiBjb2x1bW4gMywgcm93IDMgcG9zaXRpb24gKGluZGV4IDE1KVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXQob3V0LCBtMDAsIG0wMSwgbTAyLCBtMDMsIG0xMCwgbTExLCBtMTIsIG0xMywgbTIwLCBtMjEsIG0yMiwgbTIzLCBtMzAsIG0zMSwgbTMyLCBtMzMpIHtcbiAgb3V0WzBdID0gbTAwO1xuICBvdXRbMV0gPSBtMDE7XG4gIG91dFsyXSA9IG0wMjtcbiAgb3V0WzNdID0gbTAzO1xuICBvdXRbNF0gPSBtMTA7XG4gIG91dFs1XSA9IG0xMTtcbiAgb3V0WzZdID0gbTEyO1xuICBvdXRbN10gPSBtMTM7XG4gIG91dFs4XSA9IG0yMDtcbiAgb3V0WzldID0gbTIxO1xuICBvdXRbMTBdID0gbTIyO1xuICBvdXRbMTFdID0gbTIzO1xuICBvdXRbMTJdID0gbTMwO1xuICBvdXRbMTNdID0gbTMxO1xuICBvdXRbMTRdID0gbTMyO1xuICBvdXRbMTVdID0gbTMzO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTZXQgYSBtYXQ0IHRvIHRoZSBpZGVudGl0eSBtYXRyaXhcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpZGVudGl0eShvdXQpIHtcbiAgb3V0WzBdID0gMTtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gMTtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMDtcbiAgb3V0WzldID0gMDtcbiAgb3V0WzEwXSA9IDE7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNF0gPSAwO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogVHJhbnNwb3NlIHRoZSB2YWx1ZXMgb2YgYSBtYXQ0XG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zcG9zZShvdXQsIGEpIHtcbiAgLy8gSWYgd2UgYXJlIHRyYW5zcG9zaW5nIG91cnNlbHZlcyB3ZSBjYW4gc2tpcCBhIGZldyBzdGVwcyBidXQgaGF2ZSB0byBjYWNoZSBzb21lIHZhbHVlc1xuICBpZiAob3V0ID09PSBhKSB7XG4gICAgdmFyIGEwMSA9IGFbMV0sXG4gICAgICAgIGEwMiA9IGFbMl0sXG4gICAgICAgIGEwMyA9IGFbM107XG4gICAgdmFyIGExMiA9IGFbNl0sXG4gICAgICAgIGExMyA9IGFbN107XG4gICAgdmFyIGEyMyA9IGFbMTFdO1xuICAgIG91dFsxXSA9IGFbNF07XG4gICAgb3V0WzJdID0gYVs4XTtcbiAgICBvdXRbM10gPSBhWzEyXTtcbiAgICBvdXRbNF0gPSBhMDE7XG4gICAgb3V0WzZdID0gYVs5XTtcbiAgICBvdXRbN10gPSBhWzEzXTtcbiAgICBvdXRbOF0gPSBhMDI7XG4gICAgb3V0WzldID0gYTEyO1xuICAgIG91dFsxMV0gPSBhWzE0XTtcbiAgICBvdXRbMTJdID0gYTAzO1xuICAgIG91dFsxM10gPSBhMTM7XG4gICAgb3V0WzE0XSA9IGEyMztcbiAgfSBlbHNlIHtcbiAgICBvdXRbMF0gPSBhWzBdO1xuICAgIG91dFsxXSA9IGFbNF07XG4gICAgb3V0WzJdID0gYVs4XTtcbiAgICBvdXRbM10gPSBhWzEyXTtcbiAgICBvdXRbNF0gPSBhWzFdO1xuICAgIG91dFs1XSA9IGFbNV07XG4gICAgb3V0WzZdID0gYVs5XTtcbiAgICBvdXRbN10gPSBhWzEzXTtcbiAgICBvdXRbOF0gPSBhWzJdO1xuICAgIG91dFs5XSA9IGFbNl07XG4gICAgb3V0WzEwXSA9IGFbMTBdO1xuICAgIG91dFsxMV0gPSBhWzE0XTtcbiAgICBvdXRbMTJdID0gYVszXTtcbiAgICBvdXRbMTNdID0gYVs3XTtcbiAgICBvdXRbMTRdID0gYVsxMV07XG4gICAgb3V0WzE1XSA9IGFbMTVdO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogSW52ZXJ0cyBhIG1hdDRcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaW52ZXJ0KG91dCwgYSkge1xuICB2YXIgYTAwID0gYVswXSxcbiAgICAgIGEwMSA9IGFbMV0sXG4gICAgICBhMDIgPSBhWzJdLFxuICAgICAgYTAzID0gYVszXTtcbiAgdmFyIGExMCA9IGFbNF0sXG4gICAgICBhMTEgPSBhWzVdLFxuICAgICAgYTEyID0gYVs2XSxcbiAgICAgIGExMyA9IGFbN107XG4gIHZhciBhMjAgPSBhWzhdLFxuICAgICAgYTIxID0gYVs5XSxcbiAgICAgIGEyMiA9IGFbMTBdLFxuICAgICAgYTIzID0gYVsxMV07XG4gIHZhciBhMzAgPSBhWzEyXSxcbiAgICAgIGEzMSA9IGFbMTNdLFxuICAgICAgYTMyID0gYVsxNF0sXG4gICAgICBhMzMgPSBhWzE1XTtcbiAgdmFyIGIwMCA9IGEwMCAqIGExMSAtIGEwMSAqIGExMDtcbiAgdmFyIGIwMSA9IGEwMCAqIGExMiAtIGEwMiAqIGExMDtcbiAgdmFyIGIwMiA9IGEwMCAqIGExMyAtIGEwMyAqIGExMDtcbiAgdmFyIGIwMyA9IGEwMSAqIGExMiAtIGEwMiAqIGExMTtcbiAgdmFyIGIwNCA9IGEwMSAqIGExMyAtIGEwMyAqIGExMTtcbiAgdmFyIGIwNSA9IGEwMiAqIGExMyAtIGEwMyAqIGExMjtcbiAgdmFyIGIwNiA9IGEyMCAqIGEzMSAtIGEyMSAqIGEzMDtcbiAgdmFyIGIwNyA9IGEyMCAqIGEzMiAtIGEyMiAqIGEzMDtcbiAgdmFyIGIwOCA9IGEyMCAqIGEzMyAtIGEyMyAqIGEzMDtcbiAgdmFyIGIwOSA9IGEyMSAqIGEzMiAtIGEyMiAqIGEzMTtcbiAgdmFyIGIxMCA9IGEyMSAqIGEzMyAtIGEyMyAqIGEzMTtcbiAgdmFyIGIxMSA9IGEyMiAqIGEzMyAtIGEyMyAqIGEzMjsgLy8gQ2FsY3VsYXRlIHRoZSBkZXRlcm1pbmFudFxuXG4gIHZhciBkZXQgPSBiMDAgKiBiMTEgLSBiMDEgKiBiMTAgKyBiMDIgKiBiMDkgKyBiMDMgKiBiMDggLSBiMDQgKiBiMDcgKyBiMDUgKiBiMDY7XG5cbiAgaWYgKCFkZXQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGRldCA9IDEuMCAvIGRldDtcbiAgb3V0WzBdID0gKGExMSAqIGIxMSAtIGExMiAqIGIxMCArIGExMyAqIGIwOSkgKiBkZXQ7XG4gIG91dFsxXSA9IChhMDIgKiBiMTAgLSBhMDEgKiBiMTEgLSBhMDMgKiBiMDkpICogZGV0O1xuICBvdXRbMl0gPSAoYTMxICogYjA1IC0gYTMyICogYjA0ICsgYTMzICogYjAzKSAqIGRldDtcbiAgb3V0WzNdID0gKGEyMiAqIGIwNCAtIGEyMSAqIGIwNSAtIGEyMyAqIGIwMykgKiBkZXQ7XG4gIG91dFs0XSA9IChhMTIgKiBiMDggLSBhMTAgKiBiMTEgLSBhMTMgKiBiMDcpICogZGV0O1xuICBvdXRbNV0gPSAoYTAwICogYjExIC0gYTAyICogYjA4ICsgYTAzICogYjA3KSAqIGRldDtcbiAgb3V0WzZdID0gKGEzMiAqIGIwMiAtIGEzMCAqIGIwNSAtIGEzMyAqIGIwMSkgKiBkZXQ7XG4gIG91dFs3XSA9IChhMjAgKiBiMDUgLSBhMjIgKiBiMDIgKyBhMjMgKiBiMDEpICogZGV0O1xuICBvdXRbOF0gPSAoYTEwICogYjEwIC0gYTExICogYjA4ICsgYTEzICogYjA2KSAqIGRldDtcbiAgb3V0WzldID0gKGEwMSAqIGIwOCAtIGEwMCAqIGIxMCAtIGEwMyAqIGIwNikgKiBkZXQ7XG4gIG91dFsxMF0gPSAoYTMwICogYjA0IC0gYTMxICogYjAyICsgYTMzICogYjAwKSAqIGRldDtcbiAgb3V0WzExXSA9IChhMjEgKiBiMDIgLSBhMjAgKiBiMDQgLSBhMjMgKiBiMDApICogZGV0O1xuICBvdXRbMTJdID0gKGExMSAqIGIwNyAtIGExMCAqIGIwOSAtIGExMiAqIGIwNikgKiBkZXQ7XG4gIG91dFsxM10gPSAoYTAwICogYjA5IC0gYTAxICogYjA3ICsgYTAyICogYjA2KSAqIGRldDtcbiAgb3V0WzE0XSA9IChhMzEgKiBiMDEgLSBhMzAgKiBiMDMgLSBhMzIgKiBiMDApICogZGV0O1xuICBvdXRbMTVdID0gKGEyMCAqIGIwMyAtIGEyMSAqIGIwMSArIGEyMiAqIGIwMCkgKiBkZXQ7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGFkanVnYXRlIG9mIGEgbWF0NFxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGpvaW50KG91dCwgYSkge1xuICB2YXIgYTAwID0gYVswXSxcbiAgICAgIGEwMSA9IGFbMV0sXG4gICAgICBhMDIgPSBhWzJdLFxuICAgICAgYTAzID0gYVszXTtcbiAgdmFyIGExMCA9IGFbNF0sXG4gICAgICBhMTEgPSBhWzVdLFxuICAgICAgYTEyID0gYVs2XSxcbiAgICAgIGExMyA9IGFbN107XG4gIHZhciBhMjAgPSBhWzhdLFxuICAgICAgYTIxID0gYVs5XSxcbiAgICAgIGEyMiA9IGFbMTBdLFxuICAgICAgYTIzID0gYVsxMV07XG4gIHZhciBhMzAgPSBhWzEyXSxcbiAgICAgIGEzMSA9IGFbMTNdLFxuICAgICAgYTMyID0gYVsxNF0sXG4gICAgICBhMzMgPSBhWzE1XTtcbiAgb3V0WzBdID0gYTExICogKGEyMiAqIGEzMyAtIGEyMyAqIGEzMikgLSBhMjEgKiAoYTEyICogYTMzIC0gYTEzICogYTMyKSArIGEzMSAqIChhMTIgKiBhMjMgLSBhMTMgKiBhMjIpO1xuICBvdXRbMV0gPSAtKGEwMSAqIChhMjIgKiBhMzMgLSBhMjMgKiBhMzIpIC0gYTIxICogKGEwMiAqIGEzMyAtIGEwMyAqIGEzMikgKyBhMzEgKiAoYTAyICogYTIzIC0gYTAzICogYTIyKSk7XG4gIG91dFsyXSA9IGEwMSAqIChhMTIgKiBhMzMgLSBhMTMgKiBhMzIpIC0gYTExICogKGEwMiAqIGEzMyAtIGEwMyAqIGEzMikgKyBhMzEgKiAoYTAyICogYTEzIC0gYTAzICogYTEyKTtcbiAgb3V0WzNdID0gLShhMDEgKiAoYTEyICogYTIzIC0gYTEzICogYTIyKSAtIGExMSAqIChhMDIgKiBhMjMgLSBhMDMgKiBhMjIpICsgYTIxICogKGEwMiAqIGExMyAtIGEwMyAqIGExMikpO1xuICBvdXRbNF0gPSAtKGExMCAqIChhMjIgKiBhMzMgLSBhMjMgKiBhMzIpIC0gYTIwICogKGExMiAqIGEzMyAtIGExMyAqIGEzMikgKyBhMzAgKiAoYTEyICogYTIzIC0gYTEzICogYTIyKSk7XG4gIG91dFs1XSA9IGEwMCAqIChhMjIgKiBhMzMgLSBhMjMgKiBhMzIpIC0gYTIwICogKGEwMiAqIGEzMyAtIGEwMyAqIGEzMikgKyBhMzAgKiAoYTAyICogYTIzIC0gYTAzICogYTIyKTtcbiAgb3V0WzZdID0gLShhMDAgKiAoYTEyICogYTMzIC0gYTEzICogYTMyKSAtIGExMCAqIChhMDIgKiBhMzMgLSBhMDMgKiBhMzIpICsgYTMwICogKGEwMiAqIGExMyAtIGEwMyAqIGExMikpO1xuICBvdXRbN10gPSBhMDAgKiAoYTEyICogYTIzIC0gYTEzICogYTIyKSAtIGExMCAqIChhMDIgKiBhMjMgLSBhMDMgKiBhMjIpICsgYTIwICogKGEwMiAqIGExMyAtIGEwMyAqIGExMik7XG4gIG91dFs4XSA9IGExMCAqIChhMjEgKiBhMzMgLSBhMjMgKiBhMzEpIC0gYTIwICogKGExMSAqIGEzMyAtIGExMyAqIGEzMSkgKyBhMzAgKiAoYTExICogYTIzIC0gYTEzICogYTIxKTtcbiAgb3V0WzldID0gLShhMDAgKiAoYTIxICogYTMzIC0gYTIzICogYTMxKSAtIGEyMCAqIChhMDEgKiBhMzMgLSBhMDMgKiBhMzEpICsgYTMwICogKGEwMSAqIGEyMyAtIGEwMyAqIGEyMSkpO1xuICBvdXRbMTBdID0gYTAwICogKGExMSAqIGEzMyAtIGExMyAqIGEzMSkgLSBhMTAgKiAoYTAxICogYTMzIC0gYTAzICogYTMxKSArIGEzMCAqIChhMDEgKiBhMTMgLSBhMDMgKiBhMTEpO1xuICBvdXRbMTFdID0gLShhMDAgKiAoYTExICogYTIzIC0gYTEzICogYTIxKSAtIGExMCAqIChhMDEgKiBhMjMgLSBhMDMgKiBhMjEpICsgYTIwICogKGEwMSAqIGExMyAtIGEwMyAqIGExMSkpO1xuICBvdXRbMTJdID0gLShhMTAgKiAoYTIxICogYTMyIC0gYTIyICogYTMxKSAtIGEyMCAqIChhMTEgKiBhMzIgLSBhMTIgKiBhMzEpICsgYTMwICogKGExMSAqIGEyMiAtIGExMiAqIGEyMSkpO1xuICBvdXRbMTNdID0gYTAwICogKGEyMSAqIGEzMiAtIGEyMiAqIGEzMSkgLSBhMjAgKiAoYTAxICogYTMyIC0gYTAyICogYTMxKSArIGEzMCAqIChhMDEgKiBhMjIgLSBhMDIgKiBhMjEpO1xuICBvdXRbMTRdID0gLShhMDAgKiAoYTExICogYTMyIC0gYTEyICogYTMxKSAtIGExMCAqIChhMDEgKiBhMzIgLSBhMDIgKiBhMzEpICsgYTMwICogKGEwMSAqIGExMiAtIGEwMiAqIGExMSkpO1xuICBvdXRbMTVdID0gYTAwICogKGExMSAqIGEyMiAtIGExMiAqIGEyMSkgLSBhMTAgKiAoYTAxICogYTIyIC0gYTAyICogYTIxKSArIGEyMCAqIChhMDEgKiBhMTIgLSBhMDIgKiBhMTEpO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBkZXRlcm1pbmFudCBvZiBhIG1hdDRcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge051bWJlcn0gZGV0ZXJtaW5hbnQgb2YgYVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBkZXRlcm1pbmFudChhKSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl0sXG4gICAgICBhMDMgPSBhWzNdO1xuICB2YXIgYTEwID0gYVs0XSxcbiAgICAgIGExMSA9IGFbNV0sXG4gICAgICBhMTIgPSBhWzZdLFxuICAgICAgYTEzID0gYVs3XTtcbiAgdmFyIGEyMCA9IGFbOF0sXG4gICAgICBhMjEgPSBhWzldLFxuICAgICAgYTIyID0gYVsxMF0sXG4gICAgICBhMjMgPSBhWzExXTtcbiAgdmFyIGEzMCA9IGFbMTJdLFxuICAgICAgYTMxID0gYVsxM10sXG4gICAgICBhMzIgPSBhWzE0XSxcbiAgICAgIGEzMyA9IGFbMTVdO1xuICB2YXIgYjAwID0gYTAwICogYTExIC0gYTAxICogYTEwO1xuICB2YXIgYjAxID0gYTAwICogYTEyIC0gYTAyICogYTEwO1xuICB2YXIgYjAyID0gYTAwICogYTEzIC0gYTAzICogYTEwO1xuICB2YXIgYjAzID0gYTAxICogYTEyIC0gYTAyICogYTExO1xuICB2YXIgYjA0ID0gYTAxICogYTEzIC0gYTAzICogYTExO1xuICB2YXIgYjA1ID0gYTAyICogYTEzIC0gYTAzICogYTEyO1xuICB2YXIgYjA2ID0gYTIwICogYTMxIC0gYTIxICogYTMwO1xuICB2YXIgYjA3ID0gYTIwICogYTMyIC0gYTIyICogYTMwO1xuICB2YXIgYjA4ID0gYTIwICogYTMzIC0gYTIzICogYTMwO1xuICB2YXIgYjA5ID0gYTIxICogYTMyIC0gYTIyICogYTMxO1xuICB2YXIgYjEwID0gYTIxICogYTMzIC0gYTIzICogYTMxO1xuICB2YXIgYjExID0gYTIyICogYTMzIC0gYTIzICogYTMyOyAvLyBDYWxjdWxhdGUgdGhlIGRldGVybWluYW50XG5cbiAgcmV0dXJuIGIwMCAqIGIxMSAtIGIwMSAqIGIxMCArIGIwMiAqIGIwOSArIGIwMyAqIGIwOCAtIGIwNCAqIGIwNyArIGIwNSAqIGIwNjtcbn1cbi8qKlxuICogTXVsdGlwbGllcyB0d28gbWF0NHNcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aXBseShvdXQsIGEsIGIpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXSxcbiAgICAgIGEwMyA9IGFbM107XG4gIHZhciBhMTAgPSBhWzRdLFxuICAgICAgYTExID0gYVs1XSxcbiAgICAgIGExMiA9IGFbNl0sXG4gICAgICBhMTMgPSBhWzddO1xuICB2YXIgYTIwID0gYVs4XSxcbiAgICAgIGEyMSA9IGFbOV0sXG4gICAgICBhMjIgPSBhWzEwXSxcbiAgICAgIGEyMyA9IGFbMTFdO1xuICB2YXIgYTMwID0gYVsxMl0sXG4gICAgICBhMzEgPSBhWzEzXSxcbiAgICAgIGEzMiA9IGFbMTRdLFxuICAgICAgYTMzID0gYVsxNV07IC8vIENhY2hlIG9ubHkgdGhlIGN1cnJlbnQgbGluZSBvZiB0aGUgc2Vjb25kIG1hdHJpeFxuXG4gIHZhciBiMCA9IGJbMF0sXG4gICAgICBiMSA9IGJbMV0sXG4gICAgICBiMiA9IGJbMl0sXG4gICAgICBiMyA9IGJbM107XG4gIG91dFswXSA9IGIwICogYTAwICsgYjEgKiBhMTAgKyBiMiAqIGEyMCArIGIzICogYTMwO1xuICBvdXRbMV0gPSBiMCAqIGEwMSArIGIxICogYTExICsgYjIgKiBhMjEgKyBiMyAqIGEzMTtcbiAgb3V0WzJdID0gYjAgKiBhMDIgKyBiMSAqIGExMiArIGIyICogYTIyICsgYjMgKiBhMzI7XG4gIG91dFszXSA9IGIwICogYTAzICsgYjEgKiBhMTMgKyBiMiAqIGEyMyArIGIzICogYTMzO1xuICBiMCA9IGJbNF07XG4gIGIxID0gYls1XTtcbiAgYjIgPSBiWzZdO1xuICBiMyA9IGJbN107XG4gIG91dFs0XSA9IGIwICogYTAwICsgYjEgKiBhMTAgKyBiMiAqIGEyMCArIGIzICogYTMwO1xuICBvdXRbNV0gPSBiMCAqIGEwMSArIGIxICogYTExICsgYjIgKiBhMjEgKyBiMyAqIGEzMTtcbiAgb3V0WzZdID0gYjAgKiBhMDIgKyBiMSAqIGExMiArIGIyICogYTIyICsgYjMgKiBhMzI7XG4gIG91dFs3XSA9IGIwICogYTAzICsgYjEgKiBhMTMgKyBiMiAqIGEyMyArIGIzICogYTMzO1xuICBiMCA9IGJbOF07XG4gIGIxID0gYls5XTtcbiAgYjIgPSBiWzEwXTtcbiAgYjMgPSBiWzExXTtcbiAgb3V0WzhdID0gYjAgKiBhMDAgKyBiMSAqIGExMCArIGIyICogYTIwICsgYjMgKiBhMzA7XG4gIG91dFs5XSA9IGIwICogYTAxICsgYjEgKiBhMTEgKyBiMiAqIGEyMSArIGIzICogYTMxO1xuICBvdXRbMTBdID0gYjAgKiBhMDIgKyBiMSAqIGExMiArIGIyICogYTIyICsgYjMgKiBhMzI7XG4gIG91dFsxMV0gPSBiMCAqIGEwMyArIGIxICogYTEzICsgYjIgKiBhMjMgKyBiMyAqIGEzMztcbiAgYjAgPSBiWzEyXTtcbiAgYjEgPSBiWzEzXTtcbiAgYjIgPSBiWzE0XTtcbiAgYjMgPSBiWzE1XTtcbiAgb3V0WzEyXSA9IGIwICogYTAwICsgYjEgKiBhMTAgKyBiMiAqIGEyMCArIGIzICogYTMwO1xuICBvdXRbMTNdID0gYjAgKiBhMDEgKyBiMSAqIGExMSArIGIyICogYTIxICsgYjMgKiBhMzE7XG4gIG91dFsxNF0gPSBiMCAqIGEwMiArIGIxICogYTEyICsgYjIgKiBhMjIgKyBiMyAqIGEzMjtcbiAgb3V0WzE1XSA9IGIwICogYTAzICsgYjEgKiBhMTMgKyBiMiAqIGEyMyArIGIzICogYTMzO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBUcmFuc2xhdGUgYSBtYXQ0IGJ5IHRoZSBnaXZlbiB2ZWN0b3JcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIG1hdHJpeCB0byB0cmFuc2xhdGVcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSB2IHZlY3RvciB0byB0cmFuc2xhdGUgYnlcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNsYXRlKG91dCwgYSwgdikge1xuICB2YXIgeCA9IHZbMF0sXG4gICAgICB5ID0gdlsxXSxcbiAgICAgIHogPSB2WzJdO1xuICB2YXIgYTAwLCBhMDEsIGEwMiwgYTAzO1xuICB2YXIgYTEwLCBhMTEsIGExMiwgYTEzO1xuICB2YXIgYTIwLCBhMjEsIGEyMiwgYTIzO1xuXG4gIGlmIChhID09PSBvdXQpIHtcbiAgICBvdXRbMTJdID0gYVswXSAqIHggKyBhWzRdICogeSArIGFbOF0gKiB6ICsgYVsxMl07XG4gICAgb3V0WzEzXSA9IGFbMV0gKiB4ICsgYVs1XSAqIHkgKyBhWzldICogeiArIGFbMTNdO1xuICAgIG91dFsxNF0gPSBhWzJdICogeCArIGFbNl0gKiB5ICsgYVsxMF0gKiB6ICsgYVsxNF07XG4gICAgb3V0WzE1XSA9IGFbM10gKiB4ICsgYVs3XSAqIHkgKyBhWzExXSAqIHogKyBhWzE1XTtcbiAgfSBlbHNlIHtcbiAgICBhMDAgPSBhWzBdO1xuICAgIGEwMSA9IGFbMV07XG4gICAgYTAyID0gYVsyXTtcbiAgICBhMDMgPSBhWzNdO1xuICAgIGExMCA9IGFbNF07XG4gICAgYTExID0gYVs1XTtcbiAgICBhMTIgPSBhWzZdO1xuICAgIGExMyA9IGFbN107XG4gICAgYTIwID0gYVs4XTtcbiAgICBhMjEgPSBhWzldO1xuICAgIGEyMiA9IGFbMTBdO1xuICAgIGEyMyA9IGFbMTFdO1xuICAgIG91dFswXSA9IGEwMDtcbiAgICBvdXRbMV0gPSBhMDE7XG4gICAgb3V0WzJdID0gYTAyO1xuICAgIG91dFszXSA9IGEwMztcbiAgICBvdXRbNF0gPSBhMTA7XG4gICAgb3V0WzVdID0gYTExO1xuICAgIG91dFs2XSA9IGExMjtcbiAgICBvdXRbN10gPSBhMTM7XG4gICAgb3V0WzhdID0gYTIwO1xuICAgIG91dFs5XSA9IGEyMTtcbiAgICBvdXRbMTBdID0gYTIyO1xuICAgIG91dFsxMV0gPSBhMjM7XG4gICAgb3V0WzEyXSA9IGEwMCAqIHggKyBhMTAgKiB5ICsgYTIwICogeiArIGFbMTJdO1xuICAgIG91dFsxM10gPSBhMDEgKiB4ICsgYTExICogeSArIGEyMSAqIHogKyBhWzEzXTtcbiAgICBvdXRbMTRdID0gYTAyICogeCArIGExMiAqIHkgKyBhMjIgKiB6ICsgYVsxNF07XG4gICAgb3V0WzE1XSA9IGEwMyAqIHggKyBhMTMgKiB5ICsgYTIzICogeiArIGFbMTVdO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2NhbGVzIHRoZSBtYXQ0IGJ5IHRoZSBkaW1lbnNpb25zIGluIHRoZSBnaXZlbiB2ZWMzIG5vdCB1c2luZyB2ZWN0b3JpemF0aW9uXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBtYXRyaXggdG8gc2NhbGVcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSB2IHRoZSB2ZWMzIHRvIHNjYWxlIHRoZSBtYXRyaXggYnlcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKG91dCwgYSwgdikge1xuICB2YXIgeCA9IHZbMF0sXG4gICAgICB5ID0gdlsxXSxcbiAgICAgIHogPSB2WzJdO1xuICBvdXRbMF0gPSBhWzBdICogeDtcbiAgb3V0WzFdID0gYVsxXSAqIHg7XG4gIG91dFsyXSA9IGFbMl0gKiB4O1xuICBvdXRbM10gPSBhWzNdICogeDtcbiAgb3V0WzRdID0gYVs0XSAqIHk7XG4gIG91dFs1XSA9IGFbNV0gKiB5O1xuICBvdXRbNl0gPSBhWzZdICogeTtcbiAgb3V0WzddID0gYVs3XSAqIHk7XG4gIG91dFs4XSA9IGFbOF0gKiB6O1xuICBvdXRbOV0gPSBhWzldICogejtcbiAgb3V0WzEwXSA9IGFbMTBdICogejtcbiAgb3V0WzExXSA9IGFbMTFdICogejtcbiAgb3V0WzEyXSA9IGFbMTJdO1xuICBvdXRbMTNdID0gYVsxM107XG4gIG91dFsxNF0gPSBhWzE0XTtcbiAgb3V0WzE1XSA9IGFbMTVdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGVzIGEgbWF0NCBieSB0aGUgZ2l2ZW4gYW5nbGUgYXJvdW5kIHRoZSBnaXZlbiBheGlzXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBtYXRyaXggdG8gcm90YXRlXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGF4aXMgdGhlIGF4aXMgdG8gcm90YXRlIGFyb3VuZFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGUob3V0LCBhLCByYWQsIGF4aXMpIHtcbiAgdmFyIHggPSBheGlzWzBdLFxuICAgICAgeSA9IGF4aXNbMV0sXG4gICAgICB6ID0gYXhpc1syXTtcbiAgdmFyIGxlbiA9IE1hdGguaHlwb3QoeCwgeSwgeik7XG4gIHZhciBzLCBjLCB0O1xuICB2YXIgYTAwLCBhMDEsIGEwMiwgYTAzO1xuICB2YXIgYTEwLCBhMTEsIGExMiwgYTEzO1xuICB2YXIgYTIwLCBhMjEsIGEyMiwgYTIzO1xuICB2YXIgYjAwLCBiMDEsIGIwMjtcbiAgdmFyIGIxMCwgYjExLCBiMTI7XG4gIHZhciBiMjAsIGIyMSwgYjIyO1xuXG4gIGlmIChsZW4gPCBnbE1hdHJpeC5FUFNJTE9OKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBsZW4gPSAxIC8gbGVuO1xuICB4ICo9IGxlbjtcbiAgeSAqPSBsZW47XG4gIHogKj0gbGVuO1xuICBzID0gTWF0aC5zaW4ocmFkKTtcbiAgYyA9IE1hdGguY29zKHJhZCk7XG4gIHQgPSAxIC0gYztcbiAgYTAwID0gYVswXTtcbiAgYTAxID0gYVsxXTtcbiAgYTAyID0gYVsyXTtcbiAgYTAzID0gYVszXTtcbiAgYTEwID0gYVs0XTtcbiAgYTExID0gYVs1XTtcbiAgYTEyID0gYVs2XTtcbiAgYTEzID0gYVs3XTtcbiAgYTIwID0gYVs4XTtcbiAgYTIxID0gYVs5XTtcbiAgYTIyID0gYVsxMF07XG4gIGEyMyA9IGFbMTFdOyAvLyBDb25zdHJ1Y3QgdGhlIGVsZW1lbnRzIG9mIHRoZSByb3RhdGlvbiBtYXRyaXhcblxuICBiMDAgPSB4ICogeCAqIHQgKyBjO1xuICBiMDEgPSB5ICogeCAqIHQgKyB6ICogcztcbiAgYjAyID0geiAqIHggKiB0IC0geSAqIHM7XG4gIGIxMCA9IHggKiB5ICogdCAtIHogKiBzO1xuICBiMTEgPSB5ICogeSAqIHQgKyBjO1xuICBiMTIgPSB6ICogeSAqIHQgKyB4ICogcztcbiAgYjIwID0geCAqIHogKiB0ICsgeSAqIHM7XG4gIGIyMSA9IHkgKiB6ICogdCAtIHggKiBzO1xuICBiMjIgPSB6ICogeiAqIHQgKyBjOyAvLyBQZXJmb3JtIHJvdGF0aW9uLXNwZWNpZmljIG1hdHJpeCBtdWx0aXBsaWNhdGlvblxuXG4gIG91dFswXSA9IGEwMCAqIGIwMCArIGExMCAqIGIwMSArIGEyMCAqIGIwMjtcbiAgb3V0WzFdID0gYTAxICogYjAwICsgYTExICogYjAxICsgYTIxICogYjAyO1xuICBvdXRbMl0gPSBhMDIgKiBiMDAgKyBhMTIgKiBiMDEgKyBhMjIgKiBiMDI7XG4gIG91dFszXSA9IGEwMyAqIGIwMCArIGExMyAqIGIwMSArIGEyMyAqIGIwMjtcbiAgb3V0WzRdID0gYTAwICogYjEwICsgYTEwICogYjExICsgYTIwICogYjEyO1xuICBvdXRbNV0gPSBhMDEgKiBiMTAgKyBhMTEgKiBiMTEgKyBhMjEgKiBiMTI7XG4gIG91dFs2XSA9IGEwMiAqIGIxMCArIGExMiAqIGIxMSArIGEyMiAqIGIxMjtcbiAgb3V0WzddID0gYTAzICogYjEwICsgYTEzICogYjExICsgYTIzICogYjEyO1xuICBvdXRbOF0gPSBhMDAgKiBiMjAgKyBhMTAgKiBiMjEgKyBhMjAgKiBiMjI7XG4gIG91dFs5XSA9IGEwMSAqIGIyMCArIGExMSAqIGIyMSArIGEyMSAqIGIyMjtcbiAgb3V0WzEwXSA9IGEwMiAqIGIyMCArIGExMiAqIGIyMSArIGEyMiAqIGIyMjtcbiAgb3V0WzExXSA9IGEwMyAqIGIyMCArIGExMyAqIGIyMSArIGEyMyAqIGIyMjtcblxuICBpZiAoYSAhPT0gb3V0KSB7XG4gICAgLy8gSWYgdGhlIHNvdXJjZSBhbmQgZGVzdGluYXRpb24gZGlmZmVyLCBjb3B5IHRoZSB1bmNoYW5nZWQgbGFzdCByb3dcbiAgICBvdXRbMTJdID0gYVsxMl07XG4gICAgb3V0WzEzXSA9IGFbMTNdO1xuICAgIG91dFsxNF0gPSBhWzE0XTtcbiAgICBvdXRbMTVdID0gYVsxNV07XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGVzIGEgbWF0cml4IGJ5IHRoZSBnaXZlbiBhbmdsZSBhcm91bmQgdGhlIFggYXhpc1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgbWF0cml4IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCB0aGUgYW5nbGUgdG8gcm90YXRlIHRoZSBtYXRyaXggYnlcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlWChvdXQsIGEsIHJhZCkge1xuICB2YXIgcyA9IE1hdGguc2luKHJhZCk7XG4gIHZhciBjID0gTWF0aC5jb3MocmFkKTtcbiAgdmFyIGExMCA9IGFbNF07XG4gIHZhciBhMTEgPSBhWzVdO1xuICB2YXIgYTEyID0gYVs2XTtcbiAgdmFyIGExMyA9IGFbN107XG4gIHZhciBhMjAgPSBhWzhdO1xuICB2YXIgYTIxID0gYVs5XTtcbiAgdmFyIGEyMiA9IGFbMTBdO1xuICB2YXIgYTIzID0gYVsxMV07XG5cbiAgaWYgKGEgIT09IG91dCkge1xuICAgIC8vIElmIHRoZSBzb3VyY2UgYW5kIGRlc3RpbmF0aW9uIGRpZmZlciwgY29weSB0aGUgdW5jaGFuZ2VkIHJvd3NcbiAgICBvdXRbMF0gPSBhWzBdO1xuICAgIG91dFsxXSA9IGFbMV07XG4gICAgb3V0WzJdID0gYVsyXTtcbiAgICBvdXRbM10gPSBhWzNdO1xuICAgIG91dFsxMl0gPSBhWzEyXTtcbiAgICBvdXRbMTNdID0gYVsxM107XG4gICAgb3V0WzE0XSA9IGFbMTRdO1xuICAgIG91dFsxNV0gPSBhWzE1XTtcbiAgfSAvLyBQZXJmb3JtIGF4aXMtc3BlY2lmaWMgbWF0cml4IG11bHRpcGxpY2F0aW9uXG5cblxuICBvdXRbNF0gPSBhMTAgKiBjICsgYTIwICogcztcbiAgb3V0WzVdID0gYTExICogYyArIGEyMSAqIHM7XG4gIG91dFs2XSA9IGExMiAqIGMgKyBhMjIgKiBzO1xuICBvdXRbN10gPSBhMTMgKiBjICsgYTIzICogcztcbiAgb3V0WzhdID0gYTIwICogYyAtIGExMCAqIHM7XG4gIG91dFs5XSA9IGEyMSAqIGMgLSBhMTEgKiBzO1xuICBvdXRbMTBdID0gYTIyICogYyAtIGExMiAqIHM7XG4gIG91dFsxMV0gPSBhMjMgKiBjIC0gYTEzICogcztcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlcyBhIG1hdHJpeCBieSB0aGUgZ2l2ZW4gYW5nbGUgYXJvdW5kIHRoZSBZIGF4aXNcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIG1hdHJpeCB0byByb3RhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVkob3V0LCBhLCByYWQpIHtcbiAgdmFyIHMgPSBNYXRoLnNpbihyYWQpO1xuICB2YXIgYyA9IE1hdGguY29zKHJhZCk7XG4gIHZhciBhMDAgPSBhWzBdO1xuICB2YXIgYTAxID0gYVsxXTtcbiAgdmFyIGEwMiA9IGFbMl07XG4gIHZhciBhMDMgPSBhWzNdO1xuICB2YXIgYTIwID0gYVs4XTtcbiAgdmFyIGEyMSA9IGFbOV07XG4gIHZhciBhMjIgPSBhWzEwXTtcbiAgdmFyIGEyMyA9IGFbMTFdO1xuXG4gIGlmIChhICE9PSBvdXQpIHtcbiAgICAvLyBJZiB0aGUgc291cmNlIGFuZCBkZXN0aW5hdGlvbiBkaWZmZXIsIGNvcHkgdGhlIHVuY2hhbmdlZCByb3dzXG4gICAgb3V0WzRdID0gYVs0XTtcbiAgICBvdXRbNV0gPSBhWzVdO1xuICAgIG91dFs2XSA9IGFbNl07XG4gICAgb3V0WzddID0gYVs3XTtcbiAgICBvdXRbMTJdID0gYVsxMl07XG4gICAgb3V0WzEzXSA9IGFbMTNdO1xuICAgIG91dFsxNF0gPSBhWzE0XTtcbiAgICBvdXRbMTVdID0gYVsxNV07XG4gIH0gLy8gUGVyZm9ybSBheGlzLXNwZWNpZmljIG1hdHJpeCBtdWx0aXBsaWNhdGlvblxuXG5cbiAgb3V0WzBdID0gYTAwICogYyAtIGEyMCAqIHM7XG4gIG91dFsxXSA9IGEwMSAqIGMgLSBhMjEgKiBzO1xuICBvdXRbMl0gPSBhMDIgKiBjIC0gYTIyICogcztcbiAgb3V0WzNdID0gYTAzICogYyAtIGEyMyAqIHM7XG4gIG91dFs4XSA9IGEwMCAqIHMgKyBhMjAgKiBjO1xuICBvdXRbOV0gPSBhMDEgKiBzICsgYTIxICogYztcbiAgb3V0WzEwXSA9IGEwMiAqIHMgKyBhMjIgKiBjO1xuICBvdXRbMTFdID0gYTAzICogcyArIGEyMyAqIGM7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZXMgYSBtYXRyaXggYnkgdGhlIGdpdmVuIGFuZ2xlIGFyb3VuZCB0aGUgWiBheGlzXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBtYXRyaXggdG8gcm90YXRlXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVaKG91dCwgYSwgcmFkKSB7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkKTtcbiAgdmFyIGMgPSBNYXRoLmNvcyhyYWQpO1xuICB2YXIgYTAwID0gYVswXTtcbiAgdmFyIGEwMSA9IGFbMV07XG4gIHZhciBhMDIgPSBhWzJdO1xuICB2YXIgYTAzID0gYVszXTtcbiAgdmFyIGExMCA9IGFbNF07XG4gIHZhciBhMTEgPSBhWzVdO1xuICB2YXIgYTEyID0gYVs2XTtcbiAgdmFyIGExMyA9IGFbN107XG5cbiAgaWYgKGEgIT09IG91dCkge1xuICAgIC8vIElmIHRoZSBzb3VyY2UgYW5kIGRlc3RpbmF0aW9uIGRpZmZlciwgY29weSB0aGUgdW5jaGFuZ2VkIGxhc3Qgcm93XG4gICAgb3V0WzhdID0gYVs4XTtcbiAgICBvdXRbOV0gPSBhWzldO1xuICAgIG91dFsxMF0gPSBhWzEwXTtcbiAgICBvdXRbMTFdID0gYVsxMV07XG4gICAgb3V0WzEyXSA9IGFbMTJdO1xuICAgIG91dFsxM10gPSBhWzEzXTtcbiAgICBvdXRbMTRdID0gYVsxNF07XG4gICAgb3V0WzE1XSA9IGFbMTVdO1xuICB9IC8vIFBlcmZvcm0gYXhpcy1zcGVjaWZpYyBtYXRyaXggbXVsdGlwbGljYXRpb25cblxuXG4gIG91dFswXSA9IGEwMCAqIGMgKyBhMTAgKiBzO1xuICBvdXRbMV0gPSBhMDEgKiBjICsgYTExICogcztcbiAgb3V0WzJdID0gYTAyICogYyArIGExMiAqIHM7XG4gIG91dFszXSA9IGEwMyAqIGMgKyBhMTMgKiBzO1xuICBvdXRbNF0gPSBhMTAgKiBjIC0gYTAwICogcztcbiAgb3V0WzVdID0gYTExICogYyAtIGEwMSAqIHM7XG4gIG91dFs2XSA9IGExMiAqIGMgLSBhMDIgKiBzO1xuICBvdXRbN10gPSBhMTMgKiBjIC0gYTAzICogcztcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIGEgdmVjdG9yIHRyYW5zbGF0aW9uXG4gKiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gKGJ1dCBtdWNoIGZhc3RlciB0aGFuKTpcbiAqXG4gKiAgICAgbWF0NC5pZGVudGl0eShkZXN0KTtcbiAqICAgICBtYXQ0LnRyYW5zbGF0ZShkZXN0LCBkZXN0LCB2ZWMpO1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSB2IFRyYW5zbGF0aW9uIHZlY3RvclxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVHJhbnNsYXRpb24ob3V0LCB2KSB7XG4gIG91dFswXSA9IDE7XG4gIG91dFsxXSA9IDA7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IDA7XG4gIG91dFs1XSA9IDE7XG4gIG91dFs2XSA9IDA7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IDA7XG4gIG91dFs5XSA9IDA7XG4gIG91dFsxMF0gPSAxO1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IHZbMF07XG4gIG91dFsxM10gPSB2WzFdO1xuICBvdXRbMTRdID0gdlsyXTtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBtYXRyaXggZnJvbSBhIHZlY3RvciBzY2FsaW5nXG4gKiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gKGJ1dCBtdWNoIGZhc3RlciB0aGFuKTpcbiAqXG4gKiAgICAgbWF0NC5pZGVudGl0eShkZXN0KTtcbiAqICAgICBtYXQ0LnNjYWxlKGRlc3QsIGRlc3QsIHZlYyk7XG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHYgU2NhbGluZyB2ZWN0b3JcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVNjYWxpbmcob3V0LCB2KSB7XG4gIG91dFswXSA9IHZbMF07XG4gIG91dFsxXSA9IDA7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IDA7XG4gIG91dFs1XSA9IHZbMV07XG4gIG91dFs2XSA9IDA7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IDA7XG4gIG91dFs5XSA9IDA7XG4gIG91dFsxMF0gPSB2WzJdO1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IDA7XG4gIG91dFsxM10gPSAwO1xuICBvdXRbMTRdID0gMDtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBtYXRyaXggZnJvbSBhIGdpdmVuIGFuZ2xlIGFyb3VuZCBhIGdpdmVuIGF4aXNcbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDQucm90YXRlKGRlc3QsIGRlc3QsIHJhZCwgYXhpcyk7XG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCB0aGUgYW5nbGUgdG8gcm90YXRlIHRoZSBtYXRyaXggYnlcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBheGlzIHRoZSBheGlzIHRvIHJvdGF0ZSBhcm91bmRcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVJvdGF0aW9uKG91dCwgcmFkLCBheGlzKSB7XG4gIHZhciB4ID0gYXhpc1swXSxcbiAgICAgIHkgPSBheGlzWzFdLFxuICAgICAgeiA9IGF4aXNbMl07XG4gIHZhciBsZW4gPSBNYXRoLmh5cG90KHgsIHksIHopO1xuICB2YXIgcywgYywgdDtcblxuICBpZiAobGVuIDwgZ2xNYXRyaXguRVBTSUxPTikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgbGVuID0gMSAvIGxlbjtcbiAgeCAqPSBsZW47XG4gIHkgKj0gbGVuO1xuICB6ICo9IGxlbjtcbiAgcyA9IE1hdGguc2luKHJhZCk7XG4gIGMgPSBNYXRoLmNvcyhyYWQpO1xuICB0ID0gMSAtIGM7IC8vIFBlcmZvcm0gcm90YXRpb24tc3BlY2lmaWMgbWF0cml4IG11bHRpcGxpY2F0aW9uXG5cbiAgb3V0WzBdID0geCAqIHggKiB0ICsgYztcbiAgb3V0WzFdID0geSAqIHggKiB0ICsgeiAqIHM7XG4gIG91dFsyXSA9IHogKiB4ICogdCAtIHkgKiBzO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSB4ICogeSAqIHQgLSB6ICogcztcbiAgb3V0WzVdID0geSAqIHkgKiB0ICsgYztcbiAgb3V0WzZdID0geiAqIHkgKiB0ICsgeCAqIHM7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IHggKiB6ICogdCArIHkgKiBzO1xuICBvdXRbOV0gPSB5ICogeiAqIHQgLSB4ICogcztcbiAgb3V0WzEwXSA9IHogKiB6ICogdCArIGM7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNF0gPSAwO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIHRoZSBnaXZlbiBhbmdsZSBhcm91bmQgdGhlIFggYXhpc1xuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XG4gKlxuICogICAgIG1hdDQuaWRlbnRpdHkoZGVzdCk7XG4gKiAgICAgbWF0NC5yb3RhdGVYKGRlc3QsIGRlc3QsIHJhZCk7XG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCB0aGUgYW5nbGUgdG8gcm90YXRlIHRoZSBtYXRyaXggYnlcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVhSb3RhdGlvbihvdXQsIHJhZCkge1xuICB2YXIgcyA9IE1hdGguc2luKHJhZCk7XG4gIHZhciBjID0gTWF0aC5jb3MocmFkKTsgLy8gUGVyZm9ybSBheGlzLXNwZWNpZmljIG1hdHJpeCBtdWx0aXBsaWNhdGlvblxuXG4gIG91dFswXSA9IDE7XG4gIG91dFsxXSA9IDA7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IDA7XG4gIG91dFs1XSA9IGM7XG4gIG91dFs2XSA9IHM7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IDA7XG4gIG91dFs5XSA9IC1zO1xuICBvdXRbMTBdID0gYztcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSAwO1xuICBvdXRbMTNdID0gMDtcbiAgb3V0WzE0XSA9IDA7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gdGhlIGdpdmVuIGFuZ2xlIGFyb3VuZCB0aGUgWSBheGlzXG4gKiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gKGJ1dCBtdWNoIGZhc3RlciB0aGFuKTpcbiAqXG4gKiAgICAgbWF0NC5pZGVudGl0eShkZXN0KTtcbiAqICAgICBtYXQ0LnJvdGF0ZVkoZGVzdCwgZGVzdCwgcmFkKTtcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tWVJvdGF0aW9uKG91dCwgcmFkKSB7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkKTtcbiAgdmFyIGMgPSBNYXRoLmNvcyhyYWQpOyAvLyBQZXJmb3JtIGF4aXMtc3BlY2lmaWMgbWF0cml4IG11bHRpcGxpY2F0aW9uXG5cbiAgb3V0WzBdID0gYztcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gLXM7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IDA7XG4gIG91dFs1XSA9IDE7XG4gIG91dFs2XSA9IDA7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IHM7XG4gIG91dFs5XSA9IDA7XG4gIG91dFsxMF0gPSBjO1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IDA7XG4gIG91dFsxM10gPSAwO1xuICBvdXRbMTRdID0gMDtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBtYXRyaXggZnJvbSB0aGUgZ2l2ZW4gYW5nbGUgYXJvdW5kIHRoZSBaIGF4aXNcbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDQucm90YXRlWihkZXN0LCBkZXN0LCByYWQpO1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21aUm90YXRpb24ob3V0LCByYWQpIHtcbiAgdmFyIHMgPSBNYXRoLnNpbihyYWQpO1xuICB2YXIgYyA9IE1hdGguY29zKHJhZCk7IC8vIFBlcmZvcm0gYXhpcy1zcGVjaWZpYyBtYXRyaXggbXVsdGlwbGljYXRpb25cblxuICBvdXRbMF0gPSBjO1xuICBvdXRbMV0gPSBzO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAtcztcbiAgb3V0WzVdID0gYztcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMDtcbiAgb3V0WzldID0gMDtcbiAgb3V0WzEwXSA9IDE7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNF0gPSAwO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIGEgcXVhdGVybmlvbiByb3RhdGlvbiBhbmQgdmVjdG9yIHRyYW5zbGF0aW9uXG4gKiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gKGJ1dCBtdWNoIGZhc3RlciB0aGFuKTpcbiAqXG4gKiAgICAgbWF0NC5pZGVudGl0eShkZXN0KTtcbiAqICAgICBtYXQ0LnRyYW5zbGF0ZShkZXN0LCB2ZWMpO1xuICogICAgIGxldCBxdWF0TWF0ID0gbWF0NC5jcmVhdGUoKTtcbiAqICAgICBxdWF0NC50b01hdDQocXVhdCwgcXVhdE1hdCk7XG4gKiAgICAgbWF0NC5tdWx0aXBseShkZXN0LCBxdWF0TWF0KTtcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge3F1YXQ0fSBxIFJvdGF0aW9uIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSB2IFRyYW5zbGF0aW9uIHZlY3RvclxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUm90YXRpb25UcmFuc2xhdGlvbihvdXQsIHEsIHYpIHtcbiAgLy8gUXVhdGVybmlvbiBtYXRoXG4gIHZhciB4ID0gcVswXSxcbiAgICAgIHkgPSBxWzFdLFxuICAgICAgeiA9IHFbMl0sXG4gICAgICB3ID0gcVszXTtcbiAgdmFyIHgyID0geCArIHg7XG4gIHZhciB5MiA9IHkgKyB5O1xuICB2YXIgejIgPSB6ICsgejtcbiAgdmFyIHh4ID0geCAqIHgyO1xuICB2YXIgeHkgPSB4ICogeTI7XG4gIHZhciB4eiA9IHggKiB6MjtcbiAgdmFyIHl5ID0geSAqIHkyO1xuICB2YXIgeXogPSB5ICogejI7XG4gIHZhciB6eiA9IHogKiB6MjtcbiAgdmFyIHd4ID0gdyAqIHgyO1xuICB2YXIgd3kgPSB3ICogeTI7XG4gIHZhciB3eiA9IHcgKiB6MjtcbiAgb3V0WzBdID0gMSAtICh5eSArIHp6KTtcbiAgb3V0WzFdID0geHkgKyB3ejtcbiAgb3V0WzJdID0geHogLSB3eTtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0geHkgLSB3ejtcbiAgb3V0WzVdID0gMSAtICh4eCArIHp6KTtcbiAgb3V0WzZdID0geXogKyB3eDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0geHogKyB3eTtcbiAgb3V0WzldID0geXogLSB3eDtcbiAgb3V0WzEwXSA9IDEgLSAoeHggKyB5eSk7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gdlswXTtcbiAgb3V0WzEzXSA9IHZbMV07XG4gIG91dFsxNF0gPSB2WzJdO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBtYXQ0IGZyb20gYSBkdWFsIHF1YXQuXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgTWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgRHVhbCBRdWF0ZXJuaW9uXG4gKiBAcmV0dXJucyB7bWF0NH0gbWF0NCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUXVhdDIob3V0LCBhKSB7XG4gIHZhciB0cmFuc2xhdGlvbiA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDMpO1xuICB2YXIgYnggPSAtYVswXSxcbiAgICAgIGJ5ID0gLWFbMV0sXG4gICAgICBieiA9IC1hWzJdLFxuICAgICAgYncgPSBhWzNdLFxuICAgICAgYXggPSBhWzRdLFxuICAgICAgYXkgPSBhWzVdLFxuICAgICAgYXogPSBhWzZdLFxuICAgICAgYXcgPSBhWzddO1xuICB2YXIgbWFnbml0dWRlID0gYnggKiBieCArIGJ5ICogYnkgKyBieiAqIGJ6ICsgYncgKiBidzsgLy9Pbmx5IHNjYWxlIGlmIGl0IG1ha2VzIHNlbnNlXG5cbiAgaWYgKG1hZ25pdHVkZSA+IDApIHtcbiAgICB0cmFuc2xhdGlvblswXSA9IChheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5KSAqIDIgLyBtYWduaXR1ZGU7XG4gICAgdHJhbnNsYXRpb25bMV0gPSAoYXkgKiBidyArIGF3ICogYnkgKyBheiAqIGJ4IC0gYXggKiBieikgKiAyIC8gbWFnbml0dWRlO1xuICAgIHRyYW5zbGF0aW9uWzJdID0gKGF6ICogYncgKyBhdyAqIGJ6ICsgYXggKiBieSAtIGF5ICogYngpICogMiAvIG1hZ25pdHVkZTtcbiAgfSBlbHNlIHtcbiAgICB0cmFuc2xhdGlvblswXSA9IChheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5KSAqIDI7XG4gICAgdHJhbnNsYXRpb25bMV0gPSAoYXkgKiBidyArIGF3ICogYnkgKyBheiAqIGJ4IC0gYXggKiBieikgKiAyO1xuICAgIHRyYW5zbGF0aW9uWzJdID0gKGF6ICogYncgKyBhdyAqIGJ6ICsgYXggKiBieSAtIGF5ICogYngpICogMjtcbiAgfVxuXG4gIGZyb21Sb3RhdGlvblRyYW5zbGF0aW9uKG91dCwgYSwgdHJhbnNsYXRpb24pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSB0cmFuc2xhdGlvbiB2ZWN0b3IgY29tcG9uZW50IG9mIGEgdHJhbnNmb3JtYXRpb25cbiAqICBtYXRyaXguIElmIGEgbWF0cml4IGlzIGJ1aWx0IHdpdGggZnJvbVJvdGF0aW9uVHJhbnNsYXRpb24sXG4gKiAgdGhlIHJldHVybmVkIHZlY3RvciB3aWxsIGJlIHRoZSBzYW1lIGFzIHRoZSB0cmFuc2xhdGlvbiB2ZWN0b3JcbiAqICBvcmlnaW5hbGx5IHN1cHBsaWVkLlxuICogQHBhcmFtICB7dmVjM30gb3V0IFZlY3RvciB0byByZWNlaXZlIHRyYW5zbGF0aW9uIGNvbXBvbmVudFxuICogQHBhcmFtICB7UmVhZG9ubHlNYXQ0fSBtYXQgTWF0cml4IHRvIGJlIGRlY29tcG9zZWQgKGlucHV0KVxuICogQHJldHVybiB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRyYW5zbGF0aW9uKG91dCwgbWF0KSB7XG4gIG91dFswXSA9IG1hdFsxMl07XG4gIG91dFsxXSA9IG1hdFsxM107XG4gIG91dFsyXSA9IG1hdFsxNF07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIHNjYWxpbmcgZmFjdG9yIGNvbXBvbmVudCBvZiBhIHRyYW5zZm9ybWF0aW9uXG4gKiAgbWF0cml4LiBJZiBhIG1hdHJpeCBpcyBidWlsdCB3aXRoIGZyb21Sb3RhdGlvblRyYW5zbGF0aW9uU2NhbGVcbiAqICB3aXRoIGEgbm9ybWFsaXplZCBRdWF0ZXJuaW9uIHBhcmFtdGVyLCB0aGUgcmV0dXJuZWQgdmVjdG9yIHdpbGwgYmVcbiAqICB0aGUgc2FtZSBhcyB0aGUgc2NhbGluZyB2ZWN0b3JcbiAqICBvcmlnaW5hbGx5IHN1cHBsaWVkLlxuICogQHBhcmFtICB7dmVjM30gb3V0IFZlY3RvciB0byByZWNlaXZlIHNjYWxpbmcgZmFjdG9yIGNvbXBvbmVudFxuICogQHBhcmFtICB7UmVhZG9ubHlNYXQ0fSBtYXQgTWF0cml4IHRvIGJlIGRlY29tcG9zZWQgKGlucHV0KVxuICogQHJldHVybiB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNjYWxpbmcob3V0LCBtYXQpIHtcbiAgdmFyIG0xMSA9IG1hdFswXTtcbiAgdmFyIG0xMiA9IG1hdFsxXTtcbiAgdmFyIG0xMyA9IG1hdFsyXTtcbiAgdmFyIG0yMSA9IG1hdFs0XTtcbiAgdmFyIG0yMiA9IG1hdFs1XTtcbiAgdmFyIG0yMyA9IG1hdFs2XTtcbiAgdmFyIG0zMSA9IG1hdFs4XTtcbiAgdmFyIG0zMiA9IG1hdFs5XTtcbiAgdmFyIG0zMyA9IG1hdFsxMF07XG4gIG91dFswXSA9IE1hdGguaHlwb3QobTExLCBtMTIsIG0xMyk7XG4gIG91dFsxXSA9IE1hdGguaHlwb3QobTIxLCBtMjIsIG0yMyk7XG4gIG91dFsyXSA9IE1hdGguaHlwb3QobTMxLCBtMzIsIG0zMyk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgYSBxdWF0ZXJuaW9uIHJlcHJlc2VudGluZyB0aGUgcm90YXRpb25hbCBjb21wb25lbnRcbiAqICBvZiBhIHRyYW5zZm9ybWF0aW9uIG1hdHJpeC4gSWYgYSBtYXRyaXggaXMgYnVpbHQgd2l0aFxuICogIGZyb21Sb3RhdGlvblRyYW5zbGF0aW9uLCB0aGUgcmV0dXJuZWQgcXVhdGVybmlvbiB3aWxsIGJlIHRoZVxuICogIHNhbWUgYXMgdGhlIHF1YXRlcm5pb24gb3JpZ2luYWxseSBzdXBwbGllZC5cbiAqIEBwYXJhbSB7cXVhdH0gb3V0IFF1YXRlcm5pb24gdG8gcmVjZWl2ZSB0aGUgcm90YXRpb24gY29tcG9uZW50XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gbWF0IE1hdHJpeCB0byBiZSBkZWNvbXBvc2VkIChpbnB1dClcbiAqIEByZXR1cm4ge3F1YXR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSb3RhdGlvbihvdXQsIG1hdCkge1xuICB2YXIgc2NhbGluZyA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDMpO1xuICBnZXRTY2FsaW5nKHNjYWxpbmcsIG1hdCk7XG4gIHZhciBpczEgPSAxIC8gc2NhbGluZ1swXTtcbiAgdmFyIGlzMiA9IDEgLyBzY2FsaW5nWzFdO1xuICB2YXIgaXMzID0gMSAvIHNjYWxpbmdbMl07XG4gIHZhciBzbTExID0gbWF0WzBdICogaXMxO1xuICB2YXIgc20xMiA9IG1hdFsxXSAqIGlzMjtcbiAgdmFyIHNtMTMgPSBtYXRbMl0gKiBpczM7XG4gIHZhciBzbTIxID0gbWF0WzRdICogaXMxO1xuICB2YXIgc20yMiA9IG1hdFs1XSAqIGlzMjtcbiAgdmFyIHNtMjMgPSBtYXRbNl0gKiBpczM7XG4gIHZhciBzbTMxID0gbWF0WzhdICogaXMxO1xuICB2YXIgc20zMiA9IG1hdFs5XSAqIGlzMjtcbiAgdmFyIHNtMzMgPSBtYXRbMTBdICogaXMzO1xuICB2YXIgdHJhY2UgPSBzbTExICsgc20yMiArIHNtMzM7XG4gIHZhciBTID0gMDtcblxuICBpZiAodHJhY2UgPiAwKSB7XG4gICAgUyA9IE1hdGguc3FydCh0cmFjZSArIDEuMCkgKiAyO1xuICAgIG91dFszXSA9IDAuMjUgKiBTO1xuICAgIG91dFswXSA9IChzbTIzIC0gc20zMikgLyBTO1xuICAgIG91dFsxXSA9IChzbTMxIC0gc20xMykgLyBTO1xuICAgIG91dFsyXSA9IChzbTEyIC0gc20yMSkgLyBTO1xuICB9IGVsc2UgaWYgKHNtMTEgPiBzbTIyICYmIHNtMTEgPiBzbTMzKSB7XG4gICAgUyA9IE1hdGguc3FydCgxLjAgKyBzbTExIC0gc20yMiAtIHNtMzMpICogMjtcbiAgICBvdXRbM10gPSAoc20yMyAtIHNtMzIpIC8gUztcbiAgICBvdXRbMF0gPSAwLjI1ICogUztcbiAgICBvdXRbMV0gPSAoc20xMiArIHNtMjEpIC8gUztcbiAgICBvdXRbMl0gPSAoc20zMSArIHNtMTMpIC8gUztcbiAgfSBlbHNlIGlmIChzbTIyID4gc20zMykge1xuICAgIFMgPSBNYXRoLnNxcnQoMS4wICsgc20yMiAtIHNtMTEgLSBzbTMzKSAqIDI7XG4gICAgb3V0WzNdID0gKHNtMzEgLSBzbTEzKSAvIFM7XG4gICAgb3V0WzBdID0gKHNtMTIgKyBzbTIxKSAvIFM7XG4gICAgb3V0WzFdID0gMC4yNSAqIFM7XG4gICAgb3V0WzJdID0gKHNtMjMgKyBzbTMyKSAvIFM7XG4gIH0gZWxzZSB7XG4gICAgUyA9IE1hdGguc3FydCgxLjAgKyBzbTMzIC0gc20xMSAtIHNtMjIpICogMjtcbiAgICBvdXRbM10gPSAoc20xMiAtIHNtMjEpIC8gUztcbiAgICBvdXRbMF0gPSAoc20zMSArIHNtMTMpIC8gUztcbiAgICBvdXRbMV0gPSAoc20yMyArIHNtMzIpIC8gUztcbiAgICBvdXRbMl0gPSAwLjI1ICogUztcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBtYXRyaXggZnJvbSBhIHF1YXRlcm5pb24gcm90YXRpb24sIHZlY3RvciB0cmFuc2xhdGlvbiBhbmQgdmVjdG9yIHNjYWxlXG4gKiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gKGJ1dCBtdWNoIGZhc3RlciB0aGFuKTpcbiAqXG4gKiAgICAgbWF0NC5pZGVudGl0eShkZXN0KTtcbiAqICAgICBtYXQ0LnRyYW5zbGF0ZShkZXN0LCB2ZWMpO1xuICogICAgIGxldCBxdWF0TWF0ID0gbWF0NC5jcmVhdGUoKTtcbiAqICAgICBxdWF0NC50b01hdDQocXVhdCwgcXVhdE1hdCk7XG4gKiAgICAgbWF0NC5tdWx0aXBseShkZXN0LCBxdWF0TWF0KTtcbiAqICAgICBtYXQ0LnNjYWxlKGRlc3QsIHNjYWxlKVxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7cXVhdDR9IHEgUm90YXRpb24gcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHYgVHJhbnNsYXRpb24gdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gcyBTY2FsaW5nIHZlY3RvclxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUm90YXRpb25UcmFuc2xhdGlvblNjYWxlKG91dCwgcSwgdiwgcykge1xuICAvLyBRdWF0ZXJuaW9uIG1hdGhcbiAgdmFyIHggPSBxWzBdLFxuICAgICAgeSA9IHFbMV0sXG4gICAgICB6ID0gcVsyXSxcbiAgICAgIHcgPSBxWzNdO1xuICB2YXIgeDIgPSB4ICsgeDtcbiAgdmFyIHkyID0geSArIHk7XG4gIHZhciB6MiA9IHogKyB6O1xuICB2YXIgeHggPSB4ICogeDI7XG4gIHZhciB4eSA9IHggKiB5MjtcbiAgdmFyIHh6ID0geCAqIHoyO1xuICB2YXIgeXkgPSB5ICogeTI7XG4gIHZhciB5eiA9IHkgKiB6MjtcbiAgdmFyIHp6ID0geiAqIHoyO1xuICB2YXIgd3ggPSB3ICogeDI7XG4gIHZhciB3eSA9IHcgKiB5MjtcbiAgdmFyIHd6ID0gdyAqIHoyO1xuICB2YXIgc3ggPSBzWzBdO1xuICB2YXIgc3kgPSBzWzFdO1xuICB2YXIgc3ogPSBzWzJdO1xuICBvdXRbMF0gPSAoMSAtICh5eSArIHp6KSkgKiBzeDtcbiAgb3V0WzFdID0gKHh5ICsgd3opICogc3g7XG4gIG91dFsyXSA9ICh4eiAtIHd5KSAqIHN4O1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAoeHkgLSB3eikgKiBzeTtcbiAgb3V0WzVdID0gKDEgLSAoeHggKyB6eikpICogc3k7XG4gIG91dFs2XSA9ICh5eiArIHd4KSAqIHN5O1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAoeHogKyB3eSkgKiBzejtcbiAgb3V0WzldID0gKHl6IC0gd3gpICogc3o7XG4gIG91dFsxMF0gPSAoMSAtICh4eCArIHl5KSkgKiBzejtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSB2WzBdO1xuICBvdXRbMTNdID0gdlsxXTtcbiAgb3V0WzE0XSA9IHZbMl07XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gYSBxdWF0ZXJuaW9uIHJvdGF0aW9uLCB2ZWN0b3IgdHJhbnNsYXRpb24gYW5kIHZlY3RvciBzY2FsZSwgcm90YXRpbmcgYW5kIHNjYWxpbmcgYXJvdW5kIHRoZSBnaXZlbiBvcmlnaW5cbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDQudHJhbnNsYXRlKGRlc3QsIHZlYyk7XG4gKiAgICAgbWF0NC50cmFuc2xhdGUoZGVzdCwgb3JpZ2luKTtcbiAqICAgICBsZXQgcXVhdE1hdCA9IG1hdDQuY3JlYXRlKCk7XG4gKiAgICAgcXVhdDQudG9NYXQ0KHF1YXQsIHF1YXRNYXQpO1xuICogICAgIG1hdDQubXVsdGlwbHkoZGVzdCwgcXVhdE1hdCk7XG4gKiAgICAgbWF0NC5zY2FsZShkZXN0LCBzY2FsZSlcbiAqICAgICBtYXQ0LnRyYW5zbGF0ZShkZXN0LCBuZWdhdGl2ZU9yaWdpbik7XG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtxdWF0NH0gcSBSb3RhdGlvbiBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdiBUcmFuc2xhdGlvbiB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBzIFNjYWxpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gbyBUaGUgb3JpZ2luIHZlY3RvciBhcm91bmQgd2hpY2ggdG8gc2NhbGUgYW5kIHJvdGF0ZVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUm90YXRpb25UcmFuc2xhdGlvblNjYWxlT3JpZ2luKG91dCwgcSwgdiwgcywgbykge1xuICAvLyBRdWF0ZXJuaW9uIG1hdGhcbiAgdmFyIHggPSBxWzBdLFxuICAgICAgeSA9IHFbMV0sXG4gICAgICB6ID0gcVsyXSxcbiAgICAgIHcgPSBxWzNdO1xuICB2YXIgeDIgPSB4ICsgeDtcbiAgdmFyIHkyID0geSArIHk7XG4gIHZhciB6MiA9IHogKyB6O1xuICB2YXIgeHggPSB4ICogeDI7XG4gIHZhciB4eSA9IHggKiB5MjtcbiAgdmFyIHh6ID0geCAqIHoyO1xuICB2YXIgeXkgPSB5ICogeTI7XG4gIHZhciB5eiA9IHkgKiB6MjtcbiAgdmFyIHp6ID0geiAqIHoyO1xuICB2YXIgd3ggPSB3ICogeDI7XG4gIHZhciB3eSA9IHcgKiB5MjtcbiAgdmFyIHd6ID0gdyAqIHoyO1xuICB2YXIgc3ggPSBzWzBdO1xuICB2YXIgc3kgPSBzWzFdO1xuICB2YXIgc3ogPSBzWzJdO1xuICB2YXIgb3ggPSBvWzBdO1xuICB2YXIgb3kgPSBvWzFdO1xuICB2YXIgb3ogPSBvWzJdO1xuICB2YXIgb3V0MCA9ICgxIC0gKHl5ICsgenopKSAqIHN4O1xuICB2YXIgb3V0MSA9ICh4eSArIHd6KSAqIHN4O1xuICB2YXIgb3V0MiA9ICh4eiAtIHd5KSAqIHN4O1xuICB2YXIgb3V0NCA9ICh4eSAtIHd6KSAqIHN5O1xuICB2YXIgb3V0NSA9ICgxIC0gKHh4ICsgenopKSAqIHN5O1xuICB2YXIgb3V0NiA9ICh5eiArIHd4KSAqIHN5O1xuICB2YXIgb3V0OCA9ICh4eiArIHd5KSAqIHN6O1xuICB2YXIgb3V0OSA9ICh5eiAtIHd4KSAqIHN6O1xuICB2YXIgb3V0MTAgPSAoMSAtICh4eCArIHl5KSkgKiBzejtcbiAgb3V0WzBdID0gb3V0MDtcbiAgb3V0WzFdID0gb3V0MTtcbiAgb3V0WzJdID0gb3V0MjtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gb3V0NDtcbiAgb3V0WzVdID0gb3V0NTtcbiAgb3V0WzZdID0gb3V0NjtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gb3V0ODtcbiAgb3V0WzldID0gb3V0OTtcbiAgb3V0WzEwXSA9IG91dDEwO1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IHZbMF0gKyBveCAtIChvdXQwICogb3ggKyBvdXQ0ICogb3kgKyBvdXQ4ICogb3opO1xuICBvdXRbMTNdID0gdlsxXSArIG95IC0gKG91dDEgKiBveCArIG91dDUgKiBveSArIG91dDkgKiBveik7XG4gIG91dFsxNF0gPSB2WzJdICsgb3ogLSAob3V0MiAqIG94ICsgb3V0NiAqIG95ICsgb3V0MTAgKiBveik7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIGEgNHg0IG1hdHJpeCBmcm9tIHRoZSBnaXZlbiBxdWF0ZXJuaW9uXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IHEgUXVhdGVybmlvbiB0byBjcmVhdGUgbWF0cml4IGZyb21cbiAqXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21RdWF0KG91dCwgcSkge1xuICB2YXIgeCA9IHFbMF0sXG4gICAgICB5ID0gcVsxXSxcbiAgICAgIHogPSBxWzJdLFxuICAgICAgdyA9IHFbM107XG4gIHZhciB4MiA9IHggKyB4O1xuICB2YXIgeTIgPSB5ICsgeTtcbiAgdmFyIHoyID0geiArIHo7XG4gIHZhciB4eCA9IHggKiB4MjtcbiAgdmFyIHl4ID0geSAqIHgyO1xuICB2YXIgeXkgPSB5ICogeTI7XG4gIHZhciB6eCA9IHogKiB4MjtcbiAgdmFyIHp5ID0geiAqIHkyO1xuICB2YXIgenogPSB6ICogejI7XG4gIHZhciB3eCA9IHcgKiB4MjtcbiAgdmFyIHd5ID0gdyAqIHkyO1xuICB2YXIgd3ogPSB3ICogejI7XG4gIG91dFswXSA9IDEgLSB5eSAtIHp6O1xuICBvdXRbMV0gPSB5eCArIHd6O1xuICBvdXRbMl0gPSB6eCAtIHd5O1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSB5eCAtIHd6O1xuICBvdXRbNV0gPSAxIC0geHggLSB6ejtcbiAgb3V0WzZdID0genkgKyB3eDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0genggKyB3eTtcbiAgb3V0WzldID0genkgLSB3eDtcbiAgb3V0WzEwXSA9IDEgLSB4eCAtIHl5O1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IDA7XG4gIG91dFsxM10gPSAwO1xuICBvdXRbMTRdID0gMDtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdlbmVyYXRlcyBhIGZydXN0dW0gbWF0cml4IHdpdGggdGhlIGdpdmVuIGJvdW5kc1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cbiAqIEBwYXJhbSB7TnVtYmVyfSBsZWZ0IExlZnQgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7TnVtYmVyfSByaWdodCBSaWdodCBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtOdW1iZXJ9IGJvdHRvbSBCb3R0b20gYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7TnVtYmVyfSB0b3AgVG9wIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge051bWJlcn0gbmVhciBOZWFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge051bWJlcn0gZmFyIEZhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcnVzdHVtKG91dCwgbGVmdCwgcmlnaHQsIGJvdHRvbSwgdG9wLCBuZWFyLCBmYXIpIHtcbiAgdmFyIHJsID0gMSAvIChyaWdodCAtIGxlZnQpO1xuICB2YXIgdGIgPSAxIC8gKHRvcCAtIGJvdHRvbSk7XG4gIHZhciBuZiA9IDEgLyAobmVhciAtIGZhcik7XG4gIG91dFswXSA9IG5lYXIgKiAyICogcmw7XG4gIG91dFsxXSA9IDA7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IDA7XG4gIG91dFs1XSA9IG5lYXIgKiAyICogdGI7XG4gIG91dFs2XSA9IDA7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IChyaWdodCArIGxlZnQpICogcmw7XG4gIG91dFs5XSA9ICh0b3AgKyBib3R0b20pICogdGI7XG4gIG91dFsxMF0gPSAoZmFyICsgbmVhcikgKiBuZjtcbiAgb3V0WzExXSA9IC0xO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNF0gPSBmYXIgKiBuZWFyICogMiAqIG5mO1xuICBvdXRbMTVdID0gMDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgcGVyc3BlY3RpdmUgcHJvamVjdGlvbiBtYXRyaXggd2l0aCB0aGUgZ2l2ZW4gYm91bmRzLlxuICogVGhlIG5lYXIvZmFyIGNsaXAgcGxhbmVzIGNvcnJlc3BvbmQgdG8gYSBub3JtYWxpemVkIGRldmljZSBjb29yZGluYXRlIFogcmFuZ2Ugb2YgWy0xLCAxXSxcbiAqIHdoaWNoIG1hdGNoZXMgV2ViR0wvT3BlbkdMJ3MgY2xpcCB2b2x1bWUuXG4gKiBQYXNzaW5nIG51bGwvdW5kZWZpbmVkL25vIHZhbHVlIGZvciBmYXIgd2lsbCBnZW5lcmF0ZSBpbmZpbml0ZSBwcm9qZWN0aW9uIG1hdHJpeC5cbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IGZydXN0dW0gbWF0cml4IHdpbGwgYmUgd3JpdHRlbiBpbnRvXG4gKiBAcGFyYW0ge251bWJlcn0gZm92eSBWZXJ0aWNhbCBmaWVsZCBvZiB2aWV3IGluIHJhZGlhbnNcbiAqIEBwYXJhbSB7bnVtYmVyfSBhc3BlY3QgQXNwZWN0IHJhdGlvLiB0eXBpY2FsbHkgdmlld3BvcnQgd2lkdGgvaGVpZ2h0XG4gKiBAcGFyYW0ge251bWJlcn0gbmVhciBOZWFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gZmFyIEZhciBib3VuZCBvZiB0aGUgZnJ1c3R1bSwgY2FuIGJlIG51bGwgb3IgSW5maW5pdHlcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcGVyc3BlY3RpdmVOTyhvdXQsIGZvdnksIGFzcGVjdCwgbmVhciwgZmFyKSB7XG4gIHZhciBmID0gMS4wIC8gTWF0aC50YW4oZm92eSAvIDIpLFxuICAgICAgbmY7XG4gIG91dFswXSA9IGYgLyBhc3BlY3Q7XG4gIG91dFsxXSA9IDA7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IDA7XG4gIG91dFs1XSA9IGY7XG4gIG91dFs2XSA9IDA7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IDA7XG4gIG91dFs5XSA9IDA7XG4gIG91dFsxMV0gPSAtMTtcbiAgb3V0WzEyXSA9IDA7XG4gIG91dFsxM10gPSAwO1xuICBvdXRbMTVdID0gMDtcblxuICBpZiAoZmFyICE9IG51bGwgJiYgZmFyICE9PSBJbmZpbml0eSkge1xuICAgIG5mID0gMSAvIChuZWFyIC0gZmFyKTtcbiAgICBvdXRbMTBdID0gKGZhciArIG5lYXIpICogbmY7XG4gICAgb3V0WzE0XSA9IDIgKiBmYXIgKiBuZWFyICogbmY7XG4gIH0gZWxzZSB7XG4gICAgb3V0WzEwXSA9IC0xO1xuICAgIG91dFsxNF0gPSAtMiAqIG5lYXI7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIG1hdDQucGVyc3BlY3RpdmVOT31cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgcGVyc3BlY3RpdmUgPSBwZXJzcGVjdGl2ZU5PO1xuLyoqXG4gKiBHZW5lcmF0ZXMgYSBwZXJzcGVjdGl2ZSBwcm9qZWN0aW9uIG1hdHJpeCBzdWl0YWJsZSBmb3IgV2ViR1BVIHdpdGggdGhlIGdpdmVuIGJvdW5kcy5cbiAqIFRoZSBuZWFyL2ZhciBjbGlwIHBsYW5lcyBjb3JyZXNwb25kIHRvIGEgbm9ybWFsaXplZCBkZXZpY2UgY29vcmRpbmF0ZSBaIHJhbmdlIG9mIFswLCAxXSxcbiAqIHdoaWNoIG1hdGNoZXMgV2ViR1BVL1Z1bGthbi9EaXJlY3RYL01ldGFsJ3MgY2xpcCB2b2x1bWUuXG4gKiBQYXNzaW5nIG51bGwvdW5kZWZpbmVkL25vIHZhbHVlIGZvciBmYXIgd2lsbCBnZW5lcmF0ZSBpbmZpbml0ZSBwcm9qZWN0aW9uIG1hdHJpeC5cbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IGZydXN0dW0gbWF0cml4IHdpbGwgYmUgd3JpdHRlbiBpbnRvXG4gKiBAcGFyYW0ge251bWJlcn0gZm92eSBWZXJ0aWNhbCBmaWVsZCBvZiB2aWV3IGluIHJhZGlhbnNcbiAqIEBwYXJhbSB7bnVtYmVyfSBhc3BlY3QgQXNwZWN0IHJhdGlvLiB0eXBpY2FsbHkgdmlld3BvcnQgd2lkdGgvaGVpZ2h0XG4gKiBAcGFyYW0ge251bWJlcn0gbmVhciBOZWFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gZmFyIEZhciBib3VuZCBvZiB0aGUgZnJ1c3R1bSwgY2FuIGJlIG51bGwgb3IgSW5maW5pdHlcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcGVyc3BlY3RpdmVaTyhvdXQsIGZvdnksIGFzcGVjdCwgbmVhciwgZmFyKSB7XG4gIHZhciBmID0gMS4wIC8gTWF0aC50YW4oZm92eSAvIDIpLFxuICAgICAgbmY7XG4gIG91dFswXSA9IGYgLyBhc3BlY3Q7XG4gIG91dFsxXSA9IDA7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IDA7XG4gIG91dFs1XSA9IGY7XG4gIG91dFs2XSA9IDA7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IDA7XG4gIG91dFs5XSA9IDA7XG4gIG91dFsxMV0gPSAtMTtcbiAgb3V0WzEyXSA9IDA7XG4gIG91dFsxM10gPSAwO1xuICBvdXRbMTVdID0gMDtcblxuICBpZiAoZmFyICE9IG51bGwgJiYgZmFyICE9PSBJbmZpbml0eSkge1xuICAgIG5mID0gMSAvIChuZWFyIC0gZmFyKTtcbiAgICBvdXRbMTBdID0gZmFyICogbmY7XG4gICAgb3V0WzE0XSA9IGZhciAqIG5lYXIgKiBuZjtcbiAgfSBlbHNlIHtcbiAgICBvdXRbMTBdID0gLTE7XG4gICAgb3V0WzE0XSA9IC1uZWFyO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgcGVyc3BlY3RpdmUgcHJvamVjdGlvbiBtYXRyaXggd2l0aCB0aGUgZ2l2ZW4gZmllbGQgb2Ygdmlldy5cbiAqIFRoaXMgaXMgcHJpbWFyaWx5IHVzZWZ1bCBmb3IgZ2VuZXJhdGluZyBwcm9qZWN0aW9uIG1hdHJpY2VzIHRvIGJlIHVzZWRcbiAqIHdpdGggdGhlIHN0aWxsIGV4cGVyaWVtZW50YWwgV2ViVlIgQVBJLlxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cbiAqIEBwYXJhbSB7T2JqZWN0fSBmb3YgT2JqZWN0IGNvbnRhaW5pbmcgdGhlIGZvbGxvd2luZyB2YWx1ZXM6IHVwRGVncmVlcywgZG93bkRlZ3JlZXMsIGxlZnREZWdyZWVzLCByaWdodERlZ3JlZXNcbiAqIEBwYXJhbSB7bnVtYmVyfSBuZWFyIE5lYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSBmYXIgRmFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHBlcnNwZWN0aXZlRnJvbUZpZWxkT2ZWaWV3KG91dCwgZm92LCBuZWFyLCBmYXIpIHtcbiAgdmFyIHVwVGFuID0gTWF0aC50YW4oZm92LnVwRGVncmVlcyAqIE1hdGguUEkgLyAxODAuMCk7XG4gIHZhciBkb3duVGFuID0gTWF0aC50YW4oZm92LmRvd25EZWdyZWVzICogTWF0aC5QSSAvIDE4MC4wKTtcbiAgdmFyIGxlZnRUYW4gPSBNYXRoLnRhbihmb3YubGVmdERlZ3JlZXMgKiBNYXRoLlBJIC8gMTgwLjApO1xuICB2YXIgcmlnaHRUYW4gPSBNYXRoLnRhbihmb3YucmlnaHREZWdyZWVzICogTWF0aC5QSSAvIDE4MC4wKTtcbiAgdmFyIHhTY2FsZSA9IDIuMCAvIChsZWZ0VGFuICsgcmlnaHRUYW4pO1xuICB2YXIgeVNjYWxlID0gMi4wIC8gKHVwVGFuICsgZG93blRhbik7XG4gIG91dFswXSA9IHhTY2FsZTtcbiAgb3V0WzFdID0gMC4wO1xuICBvdXRbMl0gPSAwLjA7XG4gIG91dFszXSA9IDAuMDtcbiAgb3V0WzRdID0gMC4wO1xuICBvdXRbNV0gPSB5U2NhbGU7XG4gIG91dFs2XSA9IDAuMDtcbiAgb3V0WzddID0gMC4wO1xuICBvdXRbOF0gPSAtKChsZWZ0VGFuIC0gcmlnaHRUYW4pICogeFNjYWxlICogMC41KTtcbiAgb3V0WzldID0gKHVwVGFuIC0gZG93blRhbikgKiB5U2NhbGUgKiAwLjU7XG4gIG91dFsxMF0gPSBmYXIgLyAobmVhciAtIGZhcik7XG4gIG91dFsxMV0gPSAtMS4wO1xuICBvdXRbMTJdID0gMC4wO1xuICBvdXRbMTNdID0gMC4wO1xuICBvdXRbMTRdID0gZmFyICogbmVhciAvIChuZWFyIC0gZmFyKTtcbiAgb3V0WzE1XSA9IDAuMDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgb3J0aG9nb25hbCBwcm9qZWN0aW9uIG1hdHJpeCB3aXRoIHRoZSBnaXZlbiBib3VuZHMuXG4gKiBUaGUgbmVhci9mYXIgY2xpcCBwbGFuZXMgY29ycmVzcG9uZCB0byBhIG5vcm1hbGl6ZWQgZGV2aWNlIGNvb3JkaW5hdGUgWiByYW5nZSBvZiBbLTEsIDFdLFxuICogd2hpY2ggbWF0Y2hlcyBXZWJHTC9PcGVuR0wncyBjbGlwIHZvbHVtZS5cbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IGZydXN0dW0gbWF0cml4IHdpbGwgYmUgd3JpdHRlbiBpbnRvXG4gKiBAcGFyYW0ge251bWJlcn0gbGVmdCBMZWZ0IGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gcmlnaHQgUmlnaHQgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSBib3R0b20gQm90dG9tIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gdG9wIFRvcCBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IG5lYXIgTmVhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IGZhciBGYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gb3J0aG9OTyhvdXQsIGxlZnQsIHJpZ2h0LCBib3R0b20sIHRvcCwgbmVhciwgZmFyKSB7XG4gIHZhciBsciA9IDEgLyAobGVmdCAtIHJpZ2h0KTtcbiAgdmFyIGJ0ID0gMSAvIChib3R0b20gLSB0b3ApO1xuICB2YXIgbmYgPSAxIC8gKG5lYXIgLSBmYXIpO1xuICBvdXRbMF0gPSAtMiAqIGxyO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAwO1xuICBvdXRbNV0gPSAtMiAqIGJ0O1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAwO1xuICBvdXRbOV0gPSAwO1xuICBvdXRbMTBdID0gMiAqIG5mO1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IChsZWZ0ICsgcmlnaHQpICogbHI7XG4gIG91dFsxM10gPSAodG9wICsgYm90dG9tKSAqIGJ0O1xuICBvdXRbMTRdID0gKGZhciArIG5lYXIpICogbmY7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIG1hdDQub3J0aG9OT31cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgb3J0aG8gPSBvcnRob05PO1xuLyoqXG4gKiBHZW5lcmF0ZXMgYSBvcnRob2dvbmFsIHByb2plY3Rpb24gbWF0cml4IHdpdGggdGhlIGdpdmVuIGJvdW5kcy5cbiAqIFRoZSBuZWFyL2ZhciBjbGlwIHBsYW5lcyBjb3JyZXNwb25kIHRvIGEgbm9ybWFsaXplZCBkZXZpY2UgY29vcmRpbmF0ZSBaIHJhbmdlIG9mIFswLCAxXSxcbiAqIHdoaWNoIG1hdGNoZXMgV2ViR1BVL1Z1bGthbi9EaXJlY3RYL01ldGFsJ3MgY2xpcCB2b2x1bWUuXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCBmcnVzdHVtIG1hdHJpeCB3aWxsIGJlIHdyaXR0ZW4gaW50b1xuICogQHBhcmFtIHtudW1iZXJ9IGxlZnQgTGVmdCBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IHJpZ2h0IFJpZ2h0IGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gYm90dG9tIEJvdHRvbSBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IHRvcCBUb3AgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSBuZWFyIE5lYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSBmYXIgRmFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG9ydGhvWk8ob3V0LCBsZWZ0LCByaWdodCwgYm90dG9tLCB0b3AsIG5lYXIsIGZhcikge1xuICB2YXIgbHIgPSAxIC8gKGxlZnQgLSByaWdodCk7XG4gIHZhciBidCA9IDEgLyAoYm90dG9tIC0gdG9wKTtcbiAgdmFyIG5mID0gMSAvIChuZWFyIC0gZmFyKTtcbiAgb3V0WzBdID0gLTIgKiBscjtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gLTIgKiBidDtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMDtcbiAgb3V0WzldID0gMDtcbiAgb3V0WzEwXSA9IG5mO1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IChsZWZ0ICsgcmlnaHQpICogbHI7XG4gIG91dFsxM10gPSAodG9wICsgYm90dG9tKSAqIGJ0O1xuICBvdXRbMTRdID0gbmVhciAqIG5mO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgbG9vay1hdCBtYXRyaXggd2l0aCB0aGUgZ2l2ZW4gZXllIHBvc2l0aW9uLCBmb2NhbCBwb2ludCwgYW5kIHVwIGF4aXMuXG4gKiBJZiB5b3Ugd2FudCBhIG1hdHJpeCB0aGF0IGFjdHVhbGx5IG1ha2VzIGFuIG9iamVjdCBsb29rIGF0IGFub3RoZXIgb2JqZWN0LCB5b3Ugc2hvdWxkIHVzZSB0YXJnZXRUbyBpbnN0ZWFkLlxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBleWUgUG9zaXRpb24gb2YgdGhlIHZpZXdlclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGNlbnRlciBQb2ludCB0aGUgdmlld2VyIGlzIGxvb2tpbmcgYXRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSB1cCB2ZWMzIHBvaW50aW5nIHVwXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxvb2tBdChvdXQsIGV5ZSwgY2VudGVyLCB1cCkge1xuICB2YXIgeDAsIHgxLCB4MiwgeTAsIHkxLCB5MiwgejAsIHoxLCB6MiwgbGVuO1xuICB2YXIgZXlleCA9IGV5ZVswXTtcbiAgdmFyIGV5ZXkgPSBleWVbMV07XG4gIHZhciBleWV6ID0gZXllWzJdO1xuICB2YXIgdXB4ID0gdXBbMF07XG4gIHZhciB1cHkgPSB1cFsxXTtcbiAgdmFyIHVweiA9IHVwWzJdO1xuICB2YXIgY2VudGVyeCA9IGNlbnRlclswXTtcbiAgdmFyIGNlbnRlcnkgPSBjZW50ZXJbMV07XG4gIHZhciBjZW50ZXJ6ID0gY2VudGVyWzJdO1xuXG4gIGlmIChNYXRoLmFicyhleWV4IC0gY2VudGVyeCkgPCBnbE1hdHJpeC5FUFNJTE9OICYmIE1hdGguYWJzKGV5ZXkgLSBjZW50ZXJ5KSA8IGdsTWF0cml4LkVQU0lMT04gJiYgTWF0aC5hYnMoZXlleiAtIGNlbnRlcnopIDwgZ2xNYXRyaXguRVBTSUxPTikge1xuICAgIHJldHVybiBpZGVudGl0eShvdXQpO1xuICB9XG5cbiAgejAgPSBleWV4IC0gY2VudGVyeDtcbiAgejEgPSBleWV5IC0gY2VudGVyeTtcbiAgejIgPSBleWV6IC0gY2VudGVyejtcbiAgbGVuID0gMSAvIE1hdGguaHlwb3QoejAsIHoxLCB6Mik7XG4gIHowICo9IGxlbjtcbiAgejEgKj0gbGVuO1xuICB6MiAqPSBsZW47XG4gIHgwID0gdXB5ICogejIgLSB1cHogKiB6MTtcbiAgeDEgPSB1cHogKiB6MCAtIHVweCAqIHoyO1xuICB4MiA9IHVweCAqIHoxIC0gdXB5ICogejA7XG4gIGxlbiA9IE1hdGguaHlwb3QoeDAsIHgxLCB4Mik7XG5cbiAgaWYgKCFsZW4pIHtcbiAgICB4MCA9IDA7XG4gICAgeDEgPSAwO1xuICAgIHgyID0gMDtcbiAgfSBlbHNlIHtcbiAgICBsZW4gPSAxIC8gbGVuO1xuICAgIHgwICo9IGxlbjtcbiAgICB4MSAqPSBsZW47XG4gICAgeDIgKj0gbGVuO1xuICB9XG5cbiAgeTAgPSB6MSAqIHgyIC0gejIgKiB4MTtcbiAgeTEgPSB6MiAqIHgwIC0gejAgKiB4MjtcbiAgeTIgPSB6MCAqIHgxIC0gejEgKiB4MDtcbiAgbGVuID0gTWF0aC5oeXBvdCh5MCwgeTEsIHkyKTtcblxuICBpZiAoIWxlbikge1xuICAgIHkwID0gMDtcbiAgICB5MSA9IDA7XG4gICAgeTIgPSAwO1xuICB9IGVsc2Uge1xuICAgIGxlbiA9IDEgLyBsZW47XG4gICAgeTAgKj0gbGVuO1xuICAgIHkxICo9IGxlbjtcbiAgICB5MiAqPSBsZW47XG4gIH1cblxuICBvdXRbMF0gPSB4MDtcbiAgb3V0WzFdID0geTA7XG4gIG91dFsyXSA9IHowO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSB4MTtcbiAgb3V0WzVdID0geTE7XG4gIG91dFs2XSA9IHoxO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSB4MjtcbiAgb3V0WzldID0geTI7XG4gIG91dFsxMF0gPSB6MjtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSAtKHgwICogZXlleCArIHgxICogZXlleSArIHgyICogZXlleik7XG4gIG91dFsxM10gPSAtKHkwICogZXlleCArIHkxICogZXlleSArIHkyICogZXlleik7XG4gIG91dFsxNF0gPSAtKHowICogZXlleCArIHoxICogZXlleSArIHoyICogZXlleik7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBtYXRyaXggdGhhdCBtYWtlcyBzb21ldGhpbmcgbG9vayBhdCBzb21ldGhpbmcgZWxzZS5cbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IGZydXN0dW0gbWF0cml4IHdpbGwgYmUgd3JpdHRlbiBpbnRvXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gZXllIFBvc2l0aW9uIG9mIHRoZSB2aWV3ZXJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBjZW50ZXIgUG9pbnQgdGhlIHZpZXdlciBpcyBsb29raW5nIGF0XG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdXAgdmVjMyBwb2ludGluZyB1cFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0YXJnZXRUbyhvdXQsIGV5ZSwgdGFyZ2V0LCB1cCkge1xuICB2YXIgZXlleCA9IGV5ZVswXSxcbiAgICAgIGV5ZXkgPSBleWVbMV0sXG4gICAgICBleWV6ID0gZXllWzJdLFxuICAgICAgdXB4ID0gdXBbMF0sXG4gICAgICB1cHkgPSB1cFsxXSxcbiAgICAgIHVweiA9IHVwWzJdO1xuICB2YXIgejAgPSBleWV4IC0gdGFyZ2V0WzBdLFxuICAgICAgejEgPSBleWV5IC0gdGFyZ2V0WzFdLFxuICAgICAgejIgPSBleWV6IC0gdGFyZ2V0WzJdO1xuICB2YXIgbGVuID0gejAgKiB6MCArIHoxICogejEgKyB6MiAqIHoyO1xuXG4gIGlmIChsZW4gPiAwKSB7XG4gICAgbGVuID0gMSAvIE1hdGguc3FydChsZW4pO1xuICAgIHowICo9IGxlbjtcbiAgICB6MSAqPSBsZW47XG4gICAgejIgKj0gbGVuO1xuICB9XG5cbiAgdmFyIHgwID0gdXB5ICogejIgLSB1cHogKiB6MSxcbiAgICAgIHgxID0gdXB6ICogejAgLSB1cHggKiB6MixcbiAgICAgIHgyID0gdXB4ICogejEgLSB1cHkgKiB6MDtcbiAgbGVuID0geDAgKiB4MCArIHgxICogeDEgKyB4MiAqIHgyO1xuXG4gIGlmIChsZW4gPiAwKSB7XG4gICAgbGVuID0gMSAvIE1hdGguc3FydChsZW4pO1xuICAgIHgwICo9IGxlbjtcbiAgICB4MSAqPSBsZW47XG4gICAgeDIgKj0gbGVuO1xuICB9XG5cbiAgb3V0WzBdID0geDA7XG4gIG91dFsxXSA9IHgxO1xuICBvdXRbMl0gPSB4MjtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gejEgKiB4MiAtIHoyICogeDE7XG4gIG91dFs1XSA9IHoyICogeDAgLSB6MCAqIHgyO1xuICBvdXRbNl0gPSB6MCAqIHgxIC0gejEgKiB4MDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gejA7XG4gIG91dFs5XSA9IHoxO1xuICBvdXRbMTBdID0gejI7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gZXlleDtcbiAgb3V0WzEzXSA9IGV5ZXk7XG4gIG91dFsxNF0gPSBleWV6O1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIG1hdDRcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSBtYXRyaXggdG8gcmVwcmVzZW50IGFzIGEgc3RyaW5nXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIG1hdHJpeFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzdHIoYSkge1xuICByZXR1cm4gXCJtYXQ0KFwiICsgYVswXSArIFwiLCBcIiArIGFbMV0gKyBcIiwgXCIgKyBhWzJdICsgXCIsIFwiICsgYVszXSArIFwiLCBcIiArIGFbNF0gKyBcIiwgXCIgKyBhWzVdICsgXCIsIFwiICsgYVs2XSArIFwiLCBcIiArIGFbN10gKyBcIiwgXCIgKyBhWzhdICsgXCIsIFwiICsgYVs5XSArIFwiLCBcIiArIGFbMTBdICsgXCIsIFwiICsgYVsxMV0gKyBcIiwgXCIgKyBhWzEyXSArIFwiLCBcIiArIGFbMTNdICsgXCIsIFwiICsgYVsxNF0gKyBcIiwgXCIgKyBhWzE1XSArIFwiKVwiO1xufVxuLyoqXG4gKiBSZXR1cm5zIEZyb2Jlbml1cyBub3JtIG9mIGEgbWF0NFxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBtYXRyaXggdG8gY2FsY3VsYXRlIEZyb2Jlbml1cyBub3JtIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBGcm9iZW5pdXMgbm9ybVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9iKGEpIHtcbiAgcmV0dXJuIE1hdGguaHlwb3QoYVswXSwgYVsxXSwgYVsyXSwgYVszXSwgYVs0XSwgYVs1XSwgYVs2XSwgYVs3XSwgYVs4XSwgYVs5XSwgYVsxMF0sIGFbMTFdLCBhWzEyXSwgYVsxM10sIGFbMTRdLCBhWzE1XSk7XG59XG4vKipcbiAqIEFkZHMgdHdvIG1hdDQnc1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSArIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gKyBiWzFdO1xuICBvdXRbMl0gPSBhWzJdICsgYlsyXTtcbiAgb3V0WzNdID0gYVszXSArIGJbM107XG4gIG91dFs0XSA9IGFbNF0gKyBiWzRdO1xuICBvdXRbNV0gPSBhWzVdICsgYls1XTtcbiAgb3V0WzZdID0gYVs2XSArIGJbNl07XG4gIG91dFs3XSA9IGFbN10gKyBiWzddO1xuICBvdXRbOF0gPSBhWzhdICsgYls4XTtcbiAgb3V0WzldID0gYVs5XSArIGJbOV07XG4gIG91dFsxMF0gPSBhWzEwXSArIGJbMTBdO1xuICBvdXRbMTFdID0gYVsxMV0gKyBiWzExXTtcbiAgb3V0WzEyXSA9IGFbMTJdICsgYlsxMl07XG4gIG91dFsxM10gPSBhWzEzXSArIGJbMTNdO1xuICBvdXRbMTRdID0gYVsxNF0gKyBiWzE0XTtcbiAgb3V0WzE1XSA9IGFbMTVdICsgYlsxNV07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFN1YnRyYWN0cyBtYXRyaXggYiBmcm9tIG1hdHJpeCBhXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3VidHJhY3Qob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gLSBiWzBdO1xuICBvdXRbMV0gPSBhWzFdIC0gYlsxXTtcbiAgb3V0WzJdID0gYVsyXSAtIGJbMl07XG4gIG91dFszXSA9IGFbM10gLSBiWzNdO1xuICBvdXRbNF0gPSBhWzRdIC0gYls0XTtcbiAgb3V0WzVdID0gYVs1XSAtIGJbNV07XG4gIG91dFs2XSA9IGFbNl0gLSBiWzZdO1xuICBvdXRbN10gPSBhWzddIC0gYls3XTtcbiAgb3V0WzhdID0gYVs4XSAtIGJbOF07XG4gIG91dFs5XSA9IGFbOV0gLSBiWzldO1xuICBvdXRbMTBdID0gYVsxMF0gLSBiWzEwXTtcbiAgb3V0WzExXSA9IGFbMTFdIC0gYlsxMV07XG4gIG91dFsxMl0gPSBhWzEyXSAtIGJbMTJdO1xuICBvdXRbMTNdID0gYVsxM10gLSBiWzEzXTtcbiAgb3V0WzE0XSA9IGFbMTRdIC0gYlsxNF07XG4gIG91dFsxNV0gPSBhWzE1XSAtIGJbMTVdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBNdWx0aXBseSBlYWNoIGVsZW1lbnQgb2YgdGhlIG1hdHJpeCBieSBhIHNjYWxhci5cbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIG1hdHJpeCB0byBzY2FsZVxuICogQHBhcmFtIHtOdW1iZXJ9IGIgYW1vdW50IHRvIHNjYWxlIHRoZSBtYXRyaXgncyBlbGVtZW50cyBieVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aXBseVNjYWxhcihvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAqIGI7XG4gIG91dFsxXSA9IGFbMV0gKiBiO1xuICBvdXRbMl0gPSBhWzJdICogYjtcbiAgb3V0WzNdID0gYVszXSAqIGI7XG4gIG91dFs0XSA9IGFbNF0gKiBiO1xuICBvdXRbNV0gPSBhWzVdICogYjtcbiAgb3V0WzZdID0gYVs2XSAqIGI7XG4gIG91dFs3XSA9IGFbN10gKiBiO1xuICBvdXRbOF0gPSBhWzhdICogYjtcbiAgb3V0WzldID0gYVs5XSAqIGI7XG4gIG91dFsxMF0gPSBhWzEwXSAqIGI7XG4gIG91dFsxMV0gPSBhWzExXSAqIGI7XG4gIG91dFsxMl0gPSBhWzEyXSAqIGI7XG4gIG91dFsxM10gPSBhWzEzXSAqIGI7XG4gIG91dFsxNF0gPSBhWzE0XSAqIGI7XG4gIG91dFsxNV0gPSBhWzE1XSAqIGI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEFkZHMgdHdvIG1hdDQncyBhZnRlciBtdWx0aXBseWluZyBlYWNoIGVsZW1lbnQgb2YgdGhlIHNlY29uZCBvcGVyYW5kIGJ5IGEgc2NhbGFyIHZhbHVlLlxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gc2NhbGUgdGhlIGFtb3VudCB0byBzY2FsZSBiJ3MgZWxlbWVudHMgYnkgYmVmb3JlIGFkZGluZ1xuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aXBseVNjYWxhckFuZEFkZChvdXQsIGEsIGIsIHNjYWxlKSB7XG4gIG91dFswXSA9IGFbMF0gKyBiWzBdICogc2NhbGU7XG4gIG91dFsxXSA9IGFbMV0gKyBiWzFdICogc2NhbGU7XG4gIG91dFsyXSA9IGFbMl0gKyBiWzJdICogc2NhbGU7XG4gIG91dFszXSA9IGFbM10gKyBiWzNdICogc2NhbGU7XG4gIG91dFs0XSA9IGFbNF0gKyBiWzRdICogc2NhbGU7XG4gIG91dFs1XSA9IGFbNV0gKyBiWzVdICogc2NhbGU7XG4gIG91dFs2XSA9IGFbNl0gKyBiWzZdICogc2NhbGU7XG4gIG91dFs3XSA9IGFbN10gKyBiWzddICogc2NhbGU7XG4gIG91dFs4XSA9IGFbOF0gKyBiWzhdICogc2NhbGU7XG4gIG91dFs5XSA9IGFbOV0gKyBiWzldICogc2NhbGU7XG4gIG91dFsxMF0gPSBhWzEwXSArIGJbMTBdICogc2NhbGU7XG4gIG91dFsxMV0gPSBhWzExXSArIGJbMTFdICogc2NhbGU7XG4gIG91dFsxMl0gPSBhWzEyXSArIGJbMTJdICogc2NhbGU7XG4gIG91dFsxM10gPSBhWzEzXSArIGJbMTNdICogc2NhbGU7XG4gIG91dFsxNF0gPSBhWzE0XSArIGJbMTRdICogc2NhbGU7XG4gIG91dFsxNV0gPSBhWzE1XSArIGJbMTVdICogc2NhbGU7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIG1hdHJpY2VzIGhhdmUgZXhhY3RseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbiAod2hlbiBjb21wYXJlZCB3aXRoID09PSlcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSBUaGUgZmlyc3QgbWF0cml4LlxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGIgVGhlIHNlY29uZCBtYXRyaXguXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgbWF0cmljZXMgYXJlIGVxdWFsLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGV4YWN0RXF1YWxzKGEsIGIpIHtcbiAgcmV0dXJuIGFbMF0gPT09IGJbMF0gJiYgYVsxXSA9PT0gYlsxXSAmJiBhWzJdID09PSBiWzJdICYmIGFbM10gPT09IGJbM10gJiYgYVs0XSA9PT0gYls0XSAmJiBhWzVdID09PSBiWzVdICYmIGFbNl0gPT09IGJbNl0gJiYgYVs3XSA9PT0gYls3XSAmJiBhWzhdID09PSBiWzhdICYmIGFbOV0gPT09IGJbOV0gJiYgYVsxMF0gPT09IGJbMTBdICYmIGFbMTFdID09PSBiWzExXSAmJiBhWzEyXSA9PT0gYlsxMl0gJiYgYVsxM10gPT09IGJbMTNdICYmIGFbMTRdID09PSBiWzE0XSAmJiBhWzE1XSA9PT0gYlsxNV07XG59XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIG1hdHJpY2VzIGhhdmUgYXBwcm94aW1hdGVseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSBUaGUgZmlyc3QgbWF0cml4LlxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGIgVGhlIHNlY29uZCBtYXRyaXguXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgbWF0cmljZXMgYXJlIGVxdWFsLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGVxdWFscyhhLCBiKSB7XG4gIHZhciBhMCA9IGFbMF0sXG4gICAgICBhMSA9IGFbMV0sXG4gICAgICBhMiA9IGFbMl0sXG4gICAgICBhMyA9IGFbM107XG4gIHZhciBhNCA9IGFbNF0sXG4gICAgICBhNSA9IGFbNV0sXG4gICAgICBhNiA9IGFbNl0sXG4gICAgICBhNyA9IGFbN107XG4gIHZhciBhOCA9IGFbOF0sXG4gICAgICBhOSA9IGFbOV0sXG4gICAgICBhMTAgPSBhWzEwXSxcbiAgICAgIGExMSA9IGFbMTFdO1xuICB2YXIgYTEyID0gYVsxMl0sXG4gICAgICBhMTMgPSBhWzEzXSxcbiAgICAgIGExNCA9IGFbMTRdLFxuICAgICAgYTE1ID0gYVsxNV07XG4gIHZhciBiMCA9IGJbMF0sXG4gICAgICBiMSA9IGJbMV0sXG4gICAgICBiMiA9IGJbMl0sXG4gICAgICBiMyA9IGJbM107XG4gIHZhciBiNCA9IGJbNF0sXG4gICAgICBiNSA9IGJbNV0sXG4gICAgICBiNiA9IGJbNl0sXG4gICAgICBiNyA9IGJbN107XG4gIHZhciBiOCA9IGJbOF0sXG4gICAgICBiOSA9IGJbOV0sXG4gICAgICBiMTAgPSBiWzEwXSxcbiAgICAgIGIxMSA9IGJbMTFdO1xuICB2YXIgYjEyID0gYlsxMl0sXG4gICAgICBiMTMgPSBiWzEzXSxcbiAgICAgIGIxNCA9IGJbMTRdLFxuICAgICAgYjE1ID0gYlsxNV07XG4gIHJldHVybiBNYXRoLmFicyhhMCAtIGIwKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMCksIE1hdGguYWJzKGIwKSkgJiYgTWF0aC5hYnMoYTEgLSBiMSkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTEpLCBNYXRoLmFicyhiMSkpICYmIE1hdGguYWJzKGEyIC0gYjIpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEyKSwgTWF0aC5hYnMoYjIpKSAmJiBNYXRoLmFicyhhMyAtIGIzKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMyksIE1hdGguYWJzKGIzKSkgJiYgTWF0aC5hYnMoYTQgLSBiNCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTQpLCBNYXRoLmFicyhiNCkpICYmIE1hdGguYWJzKGE1IC0gYjUpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE1KSwgTWF0aC5hYnMoYjUpKSAmJiBNYXRoLmFicyhhNiAtIGI2KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhNiksIE1hdGguYWJzKGI2KSkgJiYgTWF0aC5hYnMoYTcgLSBiNykgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTcpLCBNYXRoLmFicyhiNykpICYmIE1hdGguYWJzKGE4IC0gYjgpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE4KSwgTWF0aC5hYnMoYjgpKSAmJiBNYXRoLmFicyhhOSAtIGI5KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhOSksIE1hdGguYWJzKGI5KSkgJiYgTWF0aC5hYnMoYTEwIC0gYjEwKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMTApLCBNYXRoLmFicyhiMTApKSAmJiBNYXRoLmFicyhhMTEgLSBiMTEpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExMSksIE1hdGguYWJzKGIxMSkpICYmIE1hdGguYWJzKGExMiAtIGIxMikgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTEyKSwgTWF0aC5hYnMoYjEyKSkgJiYgTWF0aC5hYnMoYTEzIC0gYjEzKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMTMpLCBNYXRoLmFicyhiMTMpKSAmJiBNYXRoLmFicyhhMTQgLSBiMTQpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExNCksIE1hdGguYWJzKGIxNCkpICYmIE1hdGguYWJzKGExNSAtIGIxNSkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTE1KSwgTWF0aC5hYnMoYjE1KSk7XG59XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgbWF0NC5tdWx0aXBseX1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgbXVsID0gbXVsdGlwbHk7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgbWF0NC5zdWJ0cmFjdH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgc3ViID0gc3VidHJhY3Q7IiwgImltcG9ydCAqIGFzIGdsTWF0cml4IGZyb20gXCIuL2NvbW1vbi5qc1wiO1xuaW1wb3J0ICogYXMgbWF0MyBmcm9tIFwiLi9tYXQzLmpzXCI7XG5pbXBvcnQgKiBhcyB2ZWMzIGZyb20gXCIuL3ZlYzMuanNcIjtcbmltcG9ydCAqIGFzIHZlYzQgZnJvbSBcIi4vdmVjNC5qc1wiO1xuLyoqXG4gKiBRdWF0ZXJuaW9uXG4gKiBAbW9kdWxlIHF1YXRcbiAqL1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgaWRlbnRpdHkgcXVhdFxuICpcbiAqIEByZXR1cm5zIHtxdWF0fSBhIG5ldyBxdWF0ZXJuaW9uXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDQpO1xuXG4gIGlmIChnbE1hdHJpeC5BUlJBWV9UWVBFICE9IEZsb2F0MzJBcnJheSkge1xuICAgIG91dFswXSA9IDA7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICB9XG5cbiAgb3V0WzNdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2V0IGEgcXVhdCB0byB0aGUgaWRlbnRpdHkgcXVhdGVybmlvblxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpZGVudGl0eShvdXQpIHtcbiAgb3V0WzBdID0gMDtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2V0cyBhIHF1YXQgZnJvbSB0aGUgZ2l2ZW4gYW5nbGUgYW5kIHJvdGF0aW9uIGF4aXMsXG4gKiB0aGVuIHJldHVybnMgaXQuXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYXhpcyB0aGUgYXhpcyBhcm91bmQgd2hpY2ggdG8gcm90YXRlXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSBpbiByYWRpYW5zXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKiovXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRBeGlzQW5nbGUob3V0LCBheGlzLCByYWQpIHtcbiAgcmFkID0gcmFkICogMC41O1xuICB2YXIgcyA9IE1hdGguc2luKHJhZCk7XG4gIG91dFswXSA9IHMgKiBheGlzWzBdO1xuICBvdXRbMV0gPSBzICogYXhpc1sxXTtcbiAgb3V0WzJdID0gcyAqIGF4aXNbMl07XG4gIG91dFszXSA9IE1hdGguY29zKHJhZCk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdldHMgdGhlIHJvdGF0aW9uIGF4aXMgYW5kIGFuZ2xlIGZvciBhIGdpdmVuXG4gKiAgcXVhdGVybmlvbi4gSWYgYSBxdWF0ZXJuaW9uIGlzIGNyZWF0ZWQgd2l0aFxuICogIHNldEF4aXNBbmdsZSwgdGhpcyBtZXRob2Qgd2lsbCByZXR1cm4gdGhlIHNhbWVcbiAqICB2YWx1ZXMgYXMgcHJvdmlkaWVkIGluIHRoZSBvcmlnaW5hbCBwYXJhbWV0ZXIgbGlzdFxuICogIE9SIGZ1bmN0aW9uYWxseSBlcXVpdmFsZW50IHZhbHVlcy5cbiAqIEV4YW1wbGU6IFRoZSBxdWF0ZXJuaW9uIGZvcm1lZCBieSBheGlzIFswLCAwLCAxXSBhbmRcbiAqICBhbmdsZSAtOTAgaXMgdGhlIHNhbWUgYXMgdGhlIHF1YXRlcm5pb24gZm9ybWVkIGJ5XG4gKiAgWzAsIDAsIDFdIGFuZCAyNzAuIFRoaXMgbWV0aG9kIGZhdm9ycyB0aGUgbGF0dGVyLlxuICogQHBhcmFtICB7dmVjM30gb3V0X2F4aXMgIFZlY3RvciByZWNlaXZpbmcgdGhlIGF4aXMgb2Ygcm90YXRpb25cbiAqIEBwYXJhbSAge1JlYWRvbmx5UXVhdH0gcSAgICAgUXVhdGVybmlvbiB0byBiZSBkZWNvbXBvc2VkXG4gKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICBBbmdsZSwgaW4gcmFkaWFucywgb2YgdGhlIHJvdGF0aW9uXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEF4aXNBbmdsZShvdXRfYXhpcywgcSkge1xuICB2YXIgcmFkID0gTWF0aC5hY29zKHFbM10pICogMi4wO1xuICB2YXIgcyA9IE1hdGguc2luKHJhZCAvIDIuMCk7XG5cbiAgaWYgKHMgPiBnbE1hdHJpeC5FUFNJTE9OKSB7XG4gICAgb3V0X2F4aXNbMF0gPSBxWzBdIC8gcztcbiAgICBvdXRfYXhpc1sxXSA9IHFbMV0gLyBzO1xuICAgIG91dF9heGlzWzJdID0gcVsyXSAvIHM7XG4gIH0gZWxzZSB7XG4gICAgLy8gSWYgcyBpcyB6ZXJvLCByZXR1cm4gYW55IGF4aXMgKG5vIHJvdGF0aW9uIC0gYXhpcyBkb2VzIG5vdCBtYXR0ZXIpXG4gICAgb3V0X2F4aXNbMF0gPSAxO1xuICAgIG91dF9heGlzWzFdID0gMDtcbiAgICBvdXRfYXhpc1syXSA9IDA7XG4gIH1cblxuICByZXR1cm4gcmFkO1xufVxuLyoqXG4gKiBHZXRzIHRoZSBhbmd1bGFyIGRpc3RhbmNlIGJldHdlZW4gdHdvIHVuaXQgcXVhdGVybmlvbnNcbiAqXG4gKiBAcGFyYW0gIHtSZWFkb25seVF1YXR9IGEgICAgIE9yaWdpbiB1bml0IHF1YXRlcm5pb25cbiAqIEBwYXJhbSAge1JlYWRvbmx5UXVhdH0gYiAgICAgRGVzdGluYXRpb24gdW5pdCBxdWF0ZXJuaW9uXG4gKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICBBbmdsZSwgaW4gcmFkaWFucywgYmV0d2VlbiB0aGUgdHdvIHF1YXRlcm5pb25zXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEFuZ2xlKGEsIGIpIHtcbiAgdmFyIGRvdHByb2R1Y3QgPSBkb3QoYSwgYik7XG4gIHJldHVybiBNYXRoLmFjb3MoMiAqIGRvdHByb2R1Y3QgKiBkb3Rwcm9kdWN0IC0gMSk7XG59XG4vKipcbiAqIE11bHRpcGxpZXMgdHdvIHF1YXQnc1xuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aXBseShvdXQsIGEsIGIpIHtcbiAgdmFyIGF4ID0gYVswXSxcbiAgICAgIGF5ID0gYVsxXSxcbiAgICAgIGF6ID0gYVsyXSxcbiAgICAgIGF3ID0gYVszXTtcbiAgdmFyIGJ4ID0gYlswXSxcbiAgICAgIGJ5ID0gYlsxXSxcbiAgICAgIGJ6ID0gYlsyXSxcbiAgICAgIGJ3ID0gYlszXTtcbiAgb3V0WzBdID0gYXggKiBidyArIGF3ICogYnggKyBheSAqIGJ6IC0gYXogKiBieTtcbiAgb3V0WzFdID0gYXkgKiBidyArIGF3ICogYnkgKyBheiAqIGJ4IC0gYXggKiBiejtcbiAgb3V0WzJdID0gYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieDtcbiAgb3V0WzNdID0gYXcgKiBidyAtIGF4ICogYnggLSBheSAqIGJ5IC0gYXogKiBiejtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlcyBhIHF1YXRlcm5pb24gYnkgdGhlIGdpdmVuIGFuZ2xlIGFib3V0IHRoZSBYIGF4aXNcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCBxdWF0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBxdWF0IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IHJhZCBhbmdsZSAoaW4gcmFkaWFucykgdG8gcm90YXRlXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVgob3V0LCBhLCByYWQpIHtcbiAgcmFkICo9IDAuNTtcbiAgdmFyIGF4ID0gYVswXSxcbiAgICAgIGF5ID0gYVsxXSxcbiAgICAgIGF6ID0gYVsyXSxcbiAgICAgIGF3ID0gYVszXTtcbiAgdmFyIGJ4ID0gTWF0aC5zaW4ocmFkKSxcbiAgICAgIGJ3ID0gTWF0aC5jb3MocmFkKTtcbiAgb3V0WzBdID0gYXggKiBidyArIGF3ICogYng7XG4gIG91dFsxXSA9IGF5ICogYncgKyBheiAqIGJ4O1xuICBvdXRbMl0gPSBheiAqIGJ3IC0gYXkgKiBieDtcbiAgb3V0WzNdID0gYXcgKiBidyAtIGF4ICogYng7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZXMgYSBxdWF0ZXJuaW9uIGJ5IHRoZSBnaXZlbiBhbmdsZSBhYm91dCB0aGUgWSBheGlzXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgcXVhdCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdCB0byByb3RhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWQgYW5nbGUgKGluIHJhZGlhbnMpIHRvIHJvdGF0ZVxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVZKG91dCwgYSwgcmFkKSB7XG4gIHJhZCAqPSAwLjU7XG4gIHZhciBheCA9IGFbMF0sXG4gICAgICBheSA9IGFbMV0sXG4gICAgICBheiA9IGFbMl0sXG4gICAgICBhdyA9IGFbM107XG4gIHZhciBieSA9IE1hdGguc2luKHJhZCksXG4gICAgICBidyA9IE1hdGguY29zKHJhZCk7XG4gIG91dFswXSA9IGF4ICogYncgLSBheiAqIGJ5O1xuICBvdXRbMV0gPSBheSAqIGJ3ICsgYXcgKiBieTtcbiAgb3V0WzJdID0gYXogKiBidyArIGF4ICogYnk7XG4gIG91dFszXSA9IGF3ICogYncgLSBheSAqIGJ5O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGVzIGEgcXVhdGVybmlvbiBieSB0aGUgZ2l2ZW4gYW5nbGUgYWJvdXQgdGhlIFogYXhpc1xuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHF1YXQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXQgdG8gcm90YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkIGFuZ2xlIChpbiByYWRpYW5zKSB0byByb3RhdGVcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlWihvdXQsIGEsIHJhZCkge1xuICByYWQgKj0gMC41O1xuICB2YXIgYXggPSBhWzBdLFxuICAgICAgYXkgPSBhWzFdLFxuICAgICAgYXogPSBhWzJdLFxuICAgICAgYXcgPSBhWzNdO1xuICB2YXIgYnogPSBNYXRoLnNpbihyYWQpLFxuICAgICAgYncgPSBNYXRoLmNvcyhyYWQpO1xuICBvdXRbMF0gPSBheCAqIGJ3ICsgYXkgKiBiejtcbiAgb3V0WzFdID0gYXkgKiBidyAtIGF4ICogYno7XG4gIG91dFsyXSA9IGF6ICogYncgKyBhdyAqIGJ6O1xuICBvdXRbM10gPSBhdyAqIGJ3IC0gYXogKiBiejtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgVyBjb21wb25lbnQgb2YgYSBxdWF0IGZyb20gdGhlIFgsIFksIGFuZCBaIGNvbXBvbmVudHMuXG4gKiBBc3N1bWVzIHRoYXQgcXVhdGVybmlvbiBpcyAxIHVuaXQgaW4gbGVuZ3RoLlxuICogQW55IGV4aXN0aW5nIFcgY29tcG9uZW50IHdpbGwgYmUgaWdub3JlZC5cbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXQgdG8gY2FsY3VsYXRlIFcgY29tcG9uZW50IG9mXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZVcob3V0LCBhKSB7XG4gIHZhciB4ID0gYVswXSxcbiAgICAgIHkgPSBhWzFdLFxuICAgICAgeiA9IGFbMl07XG4gIG91dFswXSA9IHg7XG4gIG91dFsxXSA9IHk7XG4gIG91dFsyXSA9IHo7XG4gIG91dFszXSA9IE1hdGguc3FydChNYXRoLmFicygxLjAgLSB4ICogeCAtIHkgKiB5IC0geiAqIHopKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlIHRoZSBleHBvbmVudGlhbCBvZiBhIHVuaXQgcXVhdGVybmlvbi5cbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXQgdG8gY2FsY3VsYXRlIHRoZSBleHBvbmVudGlhbCBvZlxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBleHAob3V0LCBhKSB7XG4gIHZhciB4ID0gYVswXSxcbiAgICAgIHkgPSBhWzFdLFxuICAgICAgeiA9IGFbMl0sXG4gICAgICB3ID0gYVszXTtcbiAgdmFyIHIgPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTtcbiAgdmFyIGV0ID0gTWF0aC5leHAodyk7XG4gIHZhciBzID0gciA+IDAgPyBldCAqIE1hdGguc2luKHIpIC8gciA6IDA7XG4gIG91dFswXSA9IHggKiBzO1xuICBvdXRbMV0gPSB5ICogcztcbiAgb3V0WzJdID0geiAqIHM7XG4gIG91dFszXSA9IGV0ICogTWF0aC5jb3Mocik7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZSB0aGUgbmF0dXJhbCBsb2dhcml0aG0gb2YgYSB1bml0IHF1YXRlcm5pb24uXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBxdWF0IHRvIGNhbGN1bGF0ZSB0aGUgZXhwb25lbnRpYWwgb2ZcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbG4ob3V0LCBhKSB7XG4gIHZhciB4ID0gYVswXSxcbiAgICAgIHkgPSBhWzFdLFxuICAgICAgeiA9IGFbMl0sXG4gICAgICB3ID0gYVszXTtcbiAgdmFyIHIgPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTtcbiAgdmFyIHQgPSByID4gMCA/IE1hdGguYXRhbjIociwgdykgLyByIDogMDtcbiAgb3V0WzBdID0geCAqIHQ7XG4gIG91dFsxXSA9IHkgKiB0O1xuICBvdXRbMl0gPSB6ICogdDtcbiAgb3V0WzNdID0gMC41ICogTWF0aC5sb2coeCAqIHggKyB5ICogeSArIHogKiB6ICsgdyAqIHcpO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGUgdGhlIHNjYWxhciBwb3dlciBvZiBhIHVuaXQgcXVhdGVybmlvbi5cbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXQgdG8gY2FsY3VsYXRlIHRoZSBleHBvbmVudGlhbCBvZlxuICogQHBhcmFtIHtOdW1iZXJ9IGIgYW1vdW50IHRvIHNjYWxlIHRoZSBxdWF0ZXJuaW9uIGJ5XG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHBvdyhvdXQsIGEsIGIpIHtcbiAgbG4ob3V0LCBhKTtcbiAgc2NhbGUob3V0LCBvdXQsIGIpO1xuICBleHAob3V0LCBvdXQpO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBQZXJmb3JtcyBhIHNwaGVyaWNhbCBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHR3byBxdWF0XG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gdCBpbnRlcnBvbGF0aW9uIGFtb3VudCwgaW4gdGhlIHJhbmdlIFswLTFdLCBiZXR3ZWVuIHRoZSB0d28gaW5wdXRzXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNsZXJwKG91dCwgYSwgYiwgdCkge1xuICAvLyBiZW5jaG1hcmtzOlxuICAvLyAgICBodHRwOi8vanNwZXJmLmNvbS9xdWF0ZXJuaW9uLXNsZXJwLWltcGxlbWVudGF0aW9uc1xuICB2YXIgYXggPSBhWzBdLFxuICAgICAgYXkgPSBhWzFdLFxuICAgICAgYXogPSBhWzJdLFxuICAgICAgYXcgPSBhWzNdO1xuICB2YXIgYnggPSBiWzBdLFxuICAgICAgYnkgPSBiWzFdLFxuICAgICAgYnogPSBiWzJdLFxuICAgICAgYncgPSBiWzNdO1xuICB2YXIgb21lZ2EsIGNvc29tLCBzaW5vbSwgc2NhbGUwLCBzY2FsZTE7IC8vIGNhbGMgY29zaW5lXG5cbiAgY29zb20gPSBheCAqIGJ4ICsgYXkgKiBieSArIGF6ICogYnogKyBhdyAqIGJ3OyAvLyBhZGp1c3Qgc2lnbnMgKGlmIG5lY2Vzc2FyeSlcblxuICBpZiAoY29zb20gPCAwLjApIHtcbiAgICBjb3NvbSA9IC1jb3NvbTtcbiAgICBieCA9IC1ieDtcbiAgICBieSA9IC1ieTtcbiAgICBieiA9IC1iejtcbiAgICBidyA9IC1idztcbiAgfSAvLyBjYWxjdWxhdGUgY29lZmZpY2llbnRzXG5cblxuICBpZiAoMS4wIC0gY29zb20gPiBnbE1hdHJpeC5FUFNJTE9OKSB7XG4gICAgLy8gc3RhbmRhcmQgY2FzZSAoc2xlcnApXG4gICAgb21lZ2EgPSBNYXRoLmFjb3MoY29zb20pO1xuICAgIHNpbm9tID0gTWF0aC5zaW4ob21lZ2EpO1xuICAgIHNjYWxlMCA9IE1hdGguc2luKCgxLjAgLSB0KSAqIG9tZWdhKSAvIHNpbm9tO1xuICAgIHNjYWxlMSA9IE1hdGguc2luKHQgKiBvbWVnYSkgLyBzaW5vbTtcbiAgfSBlbHNlIHtcbiAgICAvLyBcImZyb21cIiBhbmQgXCJ0b1wiIHF1YXRlcm5pb25zIGFyZSB2ZXJ5IGNsb3NlXG4gICAgLy8gIC4uLiBzbyB3ZSBjYW4gZG8gYSBsaW5lYXIgaW50ZXJwb2xhdGlvblxuICAgIHNjYWxlMCA9IDEuMCAtIHQ7XG4gICAgc2NhbGUxID0gdDtcbiAgfSAvLyBjYWxjdWxhdGUgZmluYWwgdmFsdWVzXG5cblxuICBvdXRbMF0gPSBzY2FsZTAgKiBheCArIHNjYWxlMSAqIGJ4O1xuICBvdXRbMV0gPSBzY2FsZTAgKiBheSArIHNjYWxlMSAqIGJ5O1xuICBvdXRbMl0gPSBzY2FsZTAgKiBheiArIHNjYWxlMSAqIGJ6O1xuICBvdXRbM10gPSBzY2FsZTAgKiBhdyArIHNjYWxlMSAqIGJ3O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSByYW5kb20gdW5pdCBxdWF0ZXJuaW9uXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJhbmRvbShvdXQpIHtcbiAgLy8gSW1wbGVtZW50YXRpb24gb2YgaHR0cDovL3BsYW5uaW5nLmNzLnVpdWMuZWR1L25vZGUxOTguaHRtbFxuICAvLyBUT0RPOiBDYWxsaW5nIHJhbmRvbSAzIHRpbWVzIGlzIHByb2JhYmx5IG5vdCB0aGUgZmFzdGVzdCBzb2x1dGlvblxuICB2YXIgdTEgPSBnbE1hdHJpeC5SQU5ET00oKTtcbiAgdmFyIHUyID0gZ2xNYXRyaXguUkFORE9NKCk7XG4gIHZhciB1MyA9IGdsTWF0cml4LlJBTkRPTSgpO1xuICB2YXIgc3FydDFNaW51c1UxID0gTWF0aC5zcXJ0KDEgLSB1MSk7XG4gIHZhciBzcXJ0VTEgPSBNYXRoLnNxcnQodTEpO1xuICBvdXRbMF0gPSBzcXJ0MU1pbnVzVTEgKiBNYXRoLnNpbigyLjAgKiBNYXRoLlBJICogdTIpO1xuICBvdXRbMV0gPSBzcXJ0MU1pbnVzVTEgKiBNYXRoLmNvcygyLjAgKiBNYXRoLlBJICogdTIpO1xuICBvdXRbMl0gPSBzcXJ0VTEgKiBNYXRoLnNpbigyLjAgKiBNYXRoLlBJICogdTMpO1xuICBvdXRbM10gPSBzcXJ0VTEgKiBNYXRoLmNvcygyLjAgKiBNYXRoLlBJICogdTMpO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBpbnZlcnNlIG9mIGEgcXVhdFxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdCB0byBjYWxjdWxhdGUgaW52ZXJzZSBvZlxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpbnZlcnQob3V0LCBhKSB7XG4gIHZhciBhMCA9IGFbMF0sXG4gICAgICBhMSA9IGFbMV0sXG4gICAgICBhMiA9IGFbMl0sXG4gICAgICBhMyA9IGFbM107XG4gIHZhciBkb3QgPSBhMCAqIGEwICsgYTEgKiBhMSArIGEyICogYTIgKyBhMyAqIGEzO1xuICB2YXIgaW52RG90ID0gZG90ID8gMS4wIC8gZG90IDogMDsgLy8gVE9ETzogV291bGQgYmUgZmFzdGVyIHRvIHJldHVybiBbMCwwLDAsMF0gaW1tZWRpYXRlbHkgaWYgZG90ID09IDBcblxuICBvdXRbMF0gPSAtYTAgKiBpbnZEb3Q7XG4gIG91dFsxXSA9IC1hMSAqIGludkRvdDtcbiAgb3V0WzJdID0gLWEyICogaW52RG90O1xuICBvdXRbM10gPSBhMyAqIGludkRvdDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgY29uanVnYXRlIG9mIGEgcXVhdFxuICogSWYgdGhlIHF1YXRlcm5pb24gaXMgbm9ybWFsaXplZCwgdGhpcyBmdW5jdGlvbiBpcyBmYXN0ZXIgdGhhbiBxdWF0LmludmVyc2UgYW5kIHByb2R1Y2VzIHRoZSBzYW1lIHJlc3VsdC5cbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXQgdG8gY2FsY3VsYXRlIGNvbmp1Z2F0ZSBvZlxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjb25qdWdhdGUob3V0LCBhKSB7XG4gIG91dFswXSA9IC1hWzBdO1xuICBvdXRbMV0gPSAtYVsxXTtcbiAgb3V0WzJdID0gLWFbMl07XG4gIG91dFszXSA9IGFbM107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBxdWF0ZXJuaW9uIGZyb20gdGhlIGdpdmVuIDN4MyByb3RhdGlvbiBtYXRyaXguXG4gKlxuICogTk9URTogVGhlIHJlc3VsdGFudCBxdWF0ZXJuaW9uIGlzIG5vdCBub3JtYWxpemVkLCBzbyB5b3Ugc2hvdWxkIGJlIHN1cmVcbiAqIHRvIHJlbm9ybWFsaXplIHRoZSBxdWF0ZXJuaW9uIHlvdXJzZWxmIHdoZXJlIG5lY2Vzc2FyeS5cbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBtIHJvdGF0aW9uIG1hdHJpeFxuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21NYXQzKG91dCwgbSkge1xuICAvLyBBbGdvcml0aG0gaW4gS2VuIFNob2VtYWtlJ3MgYXJ0aWNsZSBpbiAxOTg3IFNJR0dSQVBIIGNvdXJzZSBub3Rlc1xuICAvLyBhcnRpY2xlIFwiUXVhdGVybmlvbiBDYWxjdWx1cyBhbmQgRmFzdCBBbmltYXRpb25cIi5cbiAgdmFyIGZUcmFjZSA9IG1bMF0gKyBtWzRdICsgbVs4XTtcbiAgdmFyIGZSb290O1xuXG4gIGlmIChmVHJhY2UgPiAwLjApIHtcbiAgICAvLyB8d3wgPiAxLzIsIG1heSBhcyB3ZWxsIGNob29zZSB3ID4gMS8yXG4gICAgZlJvb3QgPSBNYXRoLnNxcnQoZlRyYWNlICsgMS4wKTsgLy8gMndcblxuICAgIG91dFszXSA9IDAuNSAqIGZSb290O1xuICAgIGZSb290ID0gMC41IC8gZlJvb3Q7IC8vIDEvKDR3KVxuXG4gICAgb3V0WzBdID0gKG1bNV0gLSBtWzddKSAqIGZSb290O1xuICAgIG91dFsxXSA9IChtWzZdIC0gbVsyXSkgKiBmUm9vdDtcbiAgICBvdXRbMl0gPSAobVsxXSAtIG1bM10pICogZlJvb3Q7XG4gIH0gZWxzZSB7XG4gICAgLy8gfHd8IDw9IDEvMlxuICAgIHZhciBpID0gMDtcbiAgICBpZiAobVs0XSA+IG1bMF0pIGkgPSAxO1xuICAgIGlmIChtWzhdID4gbVtpICogMyArIGldKSBpID0gMjtcbiAgICB2YXIgaiA9IChpICsgMSkgJSAzO1xuICAgIHZhciBrID0gKGkgKyAyKSAlIDM7XG4gICAgZlJvb3QgPSBNYXRoLnNxcnQobVtpICogMyArIGldIC0gbVtqICogMyArIGpdIC0gbVtrICogMyArIGtdICsgMS4wKTtcbiAgICBvdXRbaV0gPSAwLjUgKiBmUm9vdDtcbiAgICBmUm9vdCA9IDAuNSAvIGZSb290O1xuICAgIG91dFszXSA9IChtW2ogKiAzICsga10gLSBtW2sgKiAzICsgal0pICogZlJvb3Q7XG4gICAgb3V0W2pdID0gKG1baiAqIDMgKyBpXSArIG1baSAqIDMgKyBqXSkgKiBmUm9vdDtcbiAgICBvdXRba10gPSAobVtrICogMyArIGldICsgbVtpICogMyArIGtdKSAqIGZSb290O1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIHF1YXRlcm5pb24gZnJvbSB0aGUgZ2l2ZW4gZXVsZXIgYW5nbGUgeCwgeSwgei5cbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7eH0gQW5nbGUgdG8gcm90YXRlIGFyb3VuZCBYIGF4aXMgaW4gZGVncmVlcy5cbiAqIEBwYXJhbSB7eX0gQW5nbGUgdG8gcm90YXRlIGFyb3VuZCBZIGF4aXMgaW4gZGVncmVlcy5cbiAqIEBwYXJhbSB7en0gQW5nbGUgdG8gcm90YXRlIGFyb3VuZCBaIGF4aXMgaW4gZGVncmVlcy5cbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRXVsZXIob3V0LCB4LCB5LCB6KSB7XG4gIHZhciBoYWxmVG9SYWQgPSAwLjUgKiBNYXRoLlBJIC8gMTgwLjA7XG4gIHggKj0gaGFsZlRvUmFkO1xuICB5ICo9IGhhbGZUb1JhZDtcbiAgeiAqPSBoYWxmVG9SYWQ7XG4gIHZhciBzeCA9IE1hdGguc2luKHgpO1xuICB2YXIgY3ggPSBNYXRoLmNvcyh4KTtcbiAgdmFyIHN5ID0gTWF0aC5zaW4oeSk7XG4gIHZhciBjeSA9IE1hdGguY29zKHkpO1xuICB2YXIgc3ogPSBNYXRoLnNpbih6KTtcbiAgdmFyIGN6ID0gTWF0aC5jb3Moeik7XG4gIG91dFswXSA9IHN4ICogY3kgKiBjeiAtIGN4ICogc3kgKiBzejtcbiAgb3V0WzFdID0gY3ggKiBzeSAqIGN6ICsgc3ggKiBjeSAqIHN6O1xuICBvdXRbMl0gPSBjeCAqIGN5ICogc3ogLSBzeCAqIHN5ICogY3o7XG4gIG91dFszXSA9IGN4ICogY3kgKiBjeiArIHN4ICogc3kgKiBzejtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIHF1YXRlbmlvblxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHZlY3RvciB0byByZXByZXNlbnQgYXMgYSBzdHJpbmdcbiAqIEByZXR1cm5zIHtTdHJpbmd9IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgdmVjdG9yXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN0cihhKSB7XG4gIHJldHVybiBcInF1YXQoXCIgKyBhWzBdICsgXCIsIFwiICsgYVsxXSArIFwiLCBcIiArIGFbMl0gKyBcIiwgXCIgKyBhWzNdICsgXCIpXCI7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgcXVhdCBpbml0aWFsaXplZCB3aXRoIHZhbHVlcyBmcm9tIGFuIGV4aXN0aW5nIHF1YXRlcm5pb25cbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBxdWF0ZXJuaW9uIHRvIGNsb25lXG4gKiBAcmV0dXJucyB7cXVhdH0gYSBuZXcgcXVhdGVybmlvblxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBjbG9uZSA9IHZlYzQuY2xvbmU7XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgcXVhdCBpbml0aWFsaXplZCB3aXRoIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0geCBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkgWSBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB6IFogY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0gdyBXIGNvbXBvbmVudFxuICogQHJldHVybnMge3F1YXR9IGEgbmV3IHF1YXRlcm5pb25cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgZnJvbVZhbHVlcyA9IHZlYzQuZnJvbVZhbHVlcztcbi8qKlxuICogQ29weSB0aGUgdmFsdWVzIGZyb20gb25lIHF1YXQgdG8gYW5vdGhlclxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgdGhlIHNvdXJjZSBxdWF0ZXJuaW9uXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGNvcHkgPSB2ZWM0LmNvcHk7XG4vKipcbiAqIFNldCB0aGUgY29tcG9uZW50cyBvZiBhIHF1YXQgdG8gdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtOdW1iZXJ9IHggWCBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFkgY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geiBaIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHcgVyBjb21wb25lbnRcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgc2V0ID0gdmVjNC5zZXQ7XG4vKipcbiAqIEFkZHMgdHdvIHF1YXQnc1xuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBhZGQgPSB2ZWM0LmFkZDtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBxdWF0Lm11bHRpcGx5fVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBtdWwgPSBtdWx0aXBseTtcbi8qKlxuICogU2NhbGVzIGEgcXVhdCBieSBhIHNjYWxhciBudW1iZXJcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgdGhlIHZlY3RvciB0byBzY2FsZVxuICogQHBhcmFtIHtOdW1iZXJ9IGIgYW1vdW50IHRvIHNjYWxlIHRoZSB2ZWN0b3IgYnlcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgc2NhbGUgPSB2ZWM0LnNjYWxlO1xuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBkb3QgcHJvZHVjdCBvZiB0d28gcXVhdCdzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gZG90IHByb2R1Y3Qgb2YgYSBhbmQgYlxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBkb3QgPSB2ZWM0LmRvdDtcbi8qKlxuICogUGVyZm9ybXMgYSBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHR3byBxdWF0J3NcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50LCBpbiB0aGUgcmFuZ2UgWzAtMV0sIGJldHdlZW4gdGhlIHR3byBpbnB1dHNcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgbGVycCA9IHZlYzQubGVycDtcbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbGVuZ3RoIG9mIGEgcXVhdFxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHZlY3RvciB0byBjYWxjdWxhdGUgbGVuZ3RoIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBsZW5ndGggb2YgYVxuICovXG5cbmV4cG9ydCB2YXIgbGVuZ3RoID0gdmVjNC5sZW5ndGg7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgcXVhdC5sZW5ndGh9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGxlbiA9IGxlbmd0aDtcbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgc3F1YXJlZCBsZW5ndGggb2YgYSBxdWF0XG4gKlxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgdmVjdG9yIHRvIGNhbGN1bGF0ZSBzcXVhcmVkIGxlbmd0aCBvZlxuICogQHJldHVybnMge051bWJlcn0gc3F1YXJlZCBsZW5ndGggb2YgYVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzcXVhcmVkTGVuZ3RoID0gdmVjNC5zcXVhcmVkTGVuZ3RoO1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHF1YXQuc3F1YXJlZExlbmd0aH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgc3FyTGVuID0gc3F1YXJlZExlbmd0aDtcbi8qKlxuICogTm9ybWFsaXplIGEgcXVhdFxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdGVybmlvbiB0byBub3JtYWxpemVcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgbm9ybWFsaXplID0gdmVjNC5ub3JtYWxpemU7XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIHF1YXRlcm5pb25zIGhhdmUgZXhhY3RseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbiAod2hlbiBjb21wYXJlZCB3aXRoID09PSlcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBUaGUgZmlyc3QgcXVhdGVybmlvbi5cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBiIFRoZSBzZWNvbmQgcXVhdGVybmlvbi5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSB2ZWN0b3JzIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5cbmV4cG9ydCB2YXIgZXhhY3RFcXVhbHMgPSB2ZWM0LmV4YWN0RXF1YWxzO1xuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBxdWF0ZXJuaW9ucyBoYXZlIGFwcHJveGltYXRlbHkgdGhlIHNhbWUgZWxlbWVudHMgaW4gdGhlIHNhbWUgcG9zaXRpb24uXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgVGhlIGZpcnN0IHZlY3Rvci5cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBiIFRoZSBzZWNvbmQgdmVjdG9yLlxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhlIHZlY3RvcnMgYXJlIGVxdWFsLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cblxuZXhwb3J0IHZhciBlcXVhbHMgPSB2ZWM0LmVxdWFscztcbi8qKlxuICogU2V0cyBhIHF1YXRlcm5pb24gdG8gcmVwcmVzZW50IHRoZSBzaG9ydGVzdCByb3RhdGlvbiBmcm9tIG9uZVxuICogdmVjdG9yIHRvIGFub3RoZXIuXG4gKlxuICogQm90aCB2ZWN0b3JzIGFyZSBhc3N1bWVkIHRvIGJlIHVuaXQgbGVuZ3RoLlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvbi5cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBpbml0aWFsIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIGRlc3RpbmF0aW9uIHZlY3RvclxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbmV4cG9ydCB2YXIgcm90YXRpb25UbyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHRtcHZlYzMgPSB2ZWMzLmNyZWF0ZSgpO1xuICB2YXIgeFVuaXRWZWMzID0gdmVjMy5mcm9tVmFsdWVzKDEsIDAsIDApO1xuICB2YXIgeVVuaXRWZWMzID0gdmVjMy5mcm9tVmFsdWVzKDAsIDEsIDApO1xuICByZXR1cm4gZnVuY3Rpb24gKG91dCwgYSwgYikge1xuICAgIHZhciBkb3QgPSB2ZWMzLmRvdChhLCBiKTtcblxuICAgIGlmIChkb3QgPCAtMC45OTk5OTkpIHtcbiAgICAgIHZlYzMuY3Jvc3ModG1wdmVjMywgeFVuaXRWZWMzLCBhKTtcbiAgICAgIGlmICh2ZWMzLmxlbih0bXB2ZWMzKSA8IDAuMDAwMDAxKSB2ZWMzLmNyb3NzKHRtcHZlYzMsIHlVbml0VmVjMywgYSk7XG4gICAgICB2ZWMzLm5vcm1hbGl6ZSh0bXB2ZWMzLCB0bXB2ZWMzKTtcbiAgICAgIHNldEF4aXNBbmdsZShvdXQsIHRtcHZlYzMsIE1hdGguUEkpO1xuICAgICAgcmV0dXJuIG91dDtcbiAgICB9IGVsc2UgaWYgKGRvdCA+IDAuOTk5OTk5KSB7XG4gICAgICBvdXRbMF0gPSAwO1xuICAgICAgb3V0WzFdID0gMDtcbiAgICAgIG91dFsyXSA9IDA7XG4gICAgICBvdXRbM10gPSAxO1xuICAgICAgcmV0dXJuIG91dDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmVjMy5jcm9zcyh0bXB2ZWMzLCBhLCBiKTtcbiAgICAgIG91dFswXSA9IHRtcHZlYzNbMF07XG4gICAgICBvdXRbMV0gPSB0bXB2ZWMzWzFdO1xuICAgICAgb3V0WzJdID0gdG1wdmVjM1syXTtcbiAgICAgIG91dFszXSA9IDEgKyBkb3Q7XG4gICAgICByZXR1cm4gbm9ybWFsaXplKG91dCwgb3V0KTtcbiAgICB9XG4gIH07XG59KCk7XG4vKipcbiAqIFBlcmZvcm1zIGEgc3BoZXJpY2FsIGxpbmVhciBpbnRlcnBvbGF0aW9uIHdpdGggdHdvIGNvbnRyb2wgcG9pbnRzXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYyB0aGUgdGhpcmQgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGQgdGhlIGZvdXJ0aCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gdCBpbnRlcnBvbGF0aW9uIGFtb3VudCwgaW4gdGhlIHJhbmdlIFswLTFdLCBiZXR3ZWVuIHRoZSB0d28gaW5wdXRzXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IHZhciBzcWxlcnAgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB0ZW1wMSA9IGNyZWF0ZSgpO1xuICB2YXIgdGVtcDIgPSBjcmVhdGUoKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChvdXQsIGEsIGIsIGMsIGQsIHQpIHtcbiAgICBzbGVycCh0ZW1wMSwgYSwgZCwgdCk7XG4gICAgc2xlcnAodGVtcDIsIGIsIGMsIHQpO1xuICAgIHNsZXJwKG91dCwgdGVtcDEsIHRlbXAyLCAyICogdCAqICgxIC0gdCkpO1xuICAgIHJldHVybiBvdXQ7XG4gIH07XG59KCk7XG4vKipcbiAqIFNldHMgdGhlIHNwZWNpZmllZCBxdWF0ZXJuaW9uIHdpdGggdmFsdWVzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGdpdmVuXG4gKiBheGVzLiBFYWNoIGF4aXMgaXMgYSB2ZWMzIGFuZCBpcyBleHBlY3RlZCB0byBiZSB1bml0IGxlbmd0aCBhbmRcbiAqIHBlcnBlbmRpY3VsYXIgdG8gYWxsIG90aGVyIHNwZWNpZmllZCBheGVzLlxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSB2aWV3ICB0aGUgdmVjdG9yIHJlcHJlc2VudGluZyB0aGUgdmlld2luZyBkaXJlY3Rpb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSByaWdodCB0aGUgdmVjdG9yIHJlcHJlc2VudGluZyB0aGUgbG9jYWwgXCJyaWdodFwiIGRpcmVjdGlvblxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHVwICAgIHRoZSB2ZWN0b3IgcmVwcmVzZW50aW5nIHRoZSBsb2NhbCBcInVwXCIgZGlyZWN0aW9uXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IHZhciBzZXRBeGVzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbWF0ciA9IG1hdDMuY3JlYXRlKCk7XG4gIHJldHVybiBmdW5jdGlvbiAob3V0LCB2aWV3LCByaWdodCwgdXApIHtcbiAgICBtYXRyWzBdID0gcmlnaHRbMF07XG4gICAgbWF0clszXSA9IHJpZ2h0WzFdO1xuICAgIG1hdHJbNl0gPSByaWdodFsyXTtcbiAgICBtYXRyWzFdID0gdXBbMF07XG4gICAgbWF0cls0XSA9IHVwWzFdO1xuICAgIG1hdHJbN10gPSB1cFsyXTtcbiAgICBtYXRyWzJdID0gLXZpZXdbMF07XG4gICAgbWF0cls1XSA9IC12aWV3WzFdO1xuICAgIG1hdHJbOF0gPSAtdmlld1syXTtcbiAgICByZXR1cm4gbm9ybWFsaXplKG91dCwgZnJvbU1hdDMob3V0LCBtYXRyKSk7XG4gIH07XG59KCk7IiwgImltcG9ydCAqIGFzIGdsTWF0cml4IGZyb20gXCIuL2NvbW1vbi5qc1wiO1xuLyoqXG4gKiAzIERpbWVuc2lvbmFsIFZlY3RvclxuICogQG1vZHVsZSB2ZWMzXG4gKi9cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3LCBlbXB0eSB2ZWMzXG4gKlxuICogQHJldHVybnMge3ZlYzN9IGEgbmV3IDNEIHZlY3RvclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSgzKTtcblxuICBpZiAoZ2xNYXRyaXguQVJSQVlfVFlQRSAhPSBGbG9hdDMyQXJyYXkpIHtcbiAgICBvdXRbMF0gPSAwO1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gMDtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdmVjMyBpbml0aWFsaXplZCB3aXRoIHZhbHVlcyBmcm9tIGFuIGV4aXN0aW5nIHZlY3RvclxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHZlY3RvciB0byBjbG9uZVxuICogQHJldHVybnMge3ZlYzN9IGEgbmV3IDNEIHZlY3RvclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZShhKSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSgzKTtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbGVuZ3RoIG9mIGEgdmVjM1xuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHZlY3RvciB0byBjYWxjdWxhdGUgbGVuZ3RoIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBsZW5ndGggb2YgYVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsZW5ndGgoYSkge1xuICB2YXIgeCA9IGFbMF07XG4gIHZhciB5ID0gYVsxXTtcbiAgdmFyIHogPSBhWzJdO1xuICByZXR1cm4gTWF0aC5oeXBvdCh4LCB5LCB6KTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB2ZWMzIGluaXRpYWxpemVkIHdpdGggdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHogWiBjb21wb25lbnRcbiAqIEByZXR1cm5zIHt2ZWMzfSBhIG5ldyAzRCB2ZWN0b3JcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVZhbHVlcyh4LCB5LCB6KSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSgzKTtcbiAgb3V0WzBdID0geDtcbiAgb3V0WzFdID0geTtcbiAgb3V0WzJdID0gejtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ29weSB0aGUgdmFsdWVzIGZyb20gb25lIHZlYzMgdG8gYW5vdGhlclxuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgc291cmNlIHZlY3RvclxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjb3B5KG91dCwgYSkge1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICBvdXRbMl0gPSBhWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTZXQgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWMzIHRvIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtOdW1iZXJ9IHggWCBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFkgY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geiBaIGNvbXBvbmVudFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXQob3V0LCB4LCB5LCB6KSB7XG4gIG91dFswXSA9IHg7XG4gIG91dFsxXSA9IHk7XG4gIG91dFsyXSA9IHo7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEFkZHMgdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSArIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gKyBiWzFdO1xuICBvdXRbMl0gPSBhWzJdICsgYlsyXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU3VidHJhY3RzIHZlY3RvciBiIGZyb20gdmVjdG9yIGFcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzdWJ0cmFjdChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAtIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gLSBiWzFdO1xuICBvdXRbMl0gPSBhWzJdIC0gYlsyXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTXVsdGlwbGllcyB0d28gdmVjMydzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlwbHkob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gKiBiWzBdO1xuICBvdXRbMV0gPSBhWzFdICogYlsxXTtcbiAgb3V0WzJdID0gYVsyXSAqIGJbMl07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIERpdmlkZXMgdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRpdmlkZShvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAvIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gLyBiWzFdO1xuICBvdXRbMl0gPSBhWzJdIC8gYlsyXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTWF0aC5jZWlsIHRoZSBjb21wb25lbnRzIG9mIGEgdmVjM1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB2ZWN0b3IgdG8gY2VpbFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjZWlsKG91dCwgYSkge1xuICBvdXRbMF0gPSBNYXRoLmNlaWwoYVswXSk7XG4gIG91dFsxXSA9IE1hdGguY2VpbChhWzFdKTtcbiAgb3V0WzJdID0gTWF0aC5jZWlsKGFbMl0pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBNYXRoLmZsb29yIHRoZSBjb21wb25lbnRzIG9mIGEgdmVjM1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB2ZWN0b3IgdG8gZmxvb3JcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZmxvb3Iob3V0LCBhKSB7XG4gIG91dFswXSA9IE1hdGguZmxvb3IoYVswXSk7XG4gIG91dFsxXSA9IE1hdGguZmxvb3IoYVsxXSk7XG4gIG91dFsyXSA9IE1hdGguZmxvb3IoYVsyXSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIG1pbmltdW0gb2YgdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG1pbihvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gTWF0aC5taW4oYVswXSwgYlswXSk7XG4gIG91dFsxXSA9IE1hdGgubWluKGFbMV0sIGJbMV0pO1xuICBvdXRbMl0gPSBNYXRoLm1pbihhWzJdLCBiWzJdKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgbWF4aW11bSBvZiB0d28gdmVjMydzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbWF4KG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBNYXRoLm1heChhWzBdLCBiWzBdKTtcbiAgb3V0WzFdID0gTWF0aC5tYXgoYVsxXSwgYlsxXSk7XG4gIG91dFsyXSA9IE1hdGgubWF4KGFbMl0sIGJbMl0pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBNYXRoLnJvdW5kIHRoZSBjb21wb25lbnRzIG9mIGEgdmVjM1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB2ZWN0b3IgdG8gcm91bmRcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm91bmQob3V0LCBhKSB7XG4gIG91dFswXSA9IE1hdGgucm91bmQoYVswXSk7XG4gIG91dFsxXSA9IE1hdGgucm91bmQoYVsxXSk7XG4gIG91dFsyXSA9IE1hdGgucm91bmQoYVsyXSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFNjYWxlcyBhIHZlYzMgYnkgYSBzY2FsYXIgbnVtYmVyXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSB2ZWN0b3IgdG8gc2NhbGVcbiAqIEBwYXJhbSB7TnVtYmVyfSBiIGFtb3VudCB0byBzY2FsZSB0aGUgdmVjdG9yIGJ5XG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICogYjtcbiAgb3V0WzFdID0gYVsxXSAqIGI7XG4gIG91dFsyXSA9IGFbMl0gKiBiO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBBZGRzIHR3byB2ZWMzJ3MgYWZ0ZXIgc2NhbGluZyB0aGUgc2Vjb25kIG9wZXJhbmQgYnkgYSBzY2FsYXIgdmFsdWVcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHNjYWxlIHRoZSBhbW91bnQgdG8gc2NhbGUgYiBieSBiZWZvcmUgYWRkaW5nXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlQW5kQWRkKG91dCwgYSwgYiwgc2NhbGUpIHtcbiAgb3V0WzBdID0gYVswXSArIGJbMF0gKiBzY2FsZTtcbiAgb3V0WzFdID0gYVsxXSArIGJbMV0gKiBzY2FsZTtcbiAgb3V0WzJdID0gYVsyXSArIGJbMl0gKiBzY2FsZTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZXVjbGlkaWFuIGRpc3RhbmNlIGJldHdlZW4gdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGRpc3RhbmNlIGJldHdlZW4gYSBhbmQgYlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBkaXN0YW5jZShhLCBiKSB7XG4gIHZhciB4ID0gYlswXSAtIGFbMF07XG4gIHZhciB5ID0gYlsxXSAtIGFbMV07XG4gIHZhciB6ID0gYlsyXSAtIGFbMl07XG4gIHJldHVybiBNYXRoLmh5cG90KHgsIHksIHopO1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBzcXVhcmVkIGV1Y2xpZGlhbiBkaXN0YW5jZSBiZXR3ZWVuIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBzcXVhcmVkIGRpc3RhbmNlIGJldHdlZW4gYSBhbmQgYlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzcXVhcmVkRGlzdGFuY2UoYSwgYikge1xuICB2YXIgeCA9IGJbMF0gLSBhWzBdO1xuICB2YXIgeSA9IGJbMV0gLSBhWzFdO1xuICB2YXIgeiA9IGJbMl0gLSBhWzJdO1xuICByZXR1cm4geCAqIHggKyB5ICogeSArIHogKiB6O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBzcXVhcmVkIGxlbmd0aCBvZiBhIHZlYzNcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB2ZWN0b3IgdG8gY2FsY3VsYXRlIHNxdWFyZWQgbGVuZ3RoIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBzcXVhcmVkIGxlbmd0aCBvZiBhXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWRMZW5ndGgoYSkge1xuICB2YXIgeCA9IGFbMF07XG4gIHZhciB5ID0gYVsxXTtcbiAgdmFyIHogPSBhWzJdO1xuICByZXR1cm4geCAqIHggKyB5ICogeSArIHogKiB6O1xufVxuLyoqXG4gKiBOZWdhdGVzIHRoZSBjb21wb25lbnRzIG9mIGEgdmVjM1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB2ZWN0b3IgdG8gbmVnYXRlXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG5lZ2F0ZShvdXQsIGEpIHtcbiAgb3V0WzBdID0gLWFbMF07XG4gIG91dFsxXSA9IC1hWzFdO1xuICBvdXRbMl0gPSAtYVsyXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgaW52ZXJzZSBvZiB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzNcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIGludmVydFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpbnZlcnNlKG91dCwgYSkge1xuICBvdXRbMF0gPSAxLjAgLyBhWzBdO1xuICBvdXRbMV0gPSAxLjAgLyBhWzFdO1xuICBvdXRbMl0gPSAxLjAgLyBhWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBOb3JtYWxpemUgYSB2ZWMzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHZlY3RvciB0byBub3JtYWxpemVcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplKG91dCwgYSkge1xuICB2YXIgeCA9IGFbMF07XG4gIHZhciB5ID0gYVsxXTtcbiAgdmFyIHogPSBhWzJdO1xuICB2YXIgbGVuID0geCAqIHggKyB5ICogeSArIHogKiB6O1xuXG4gIGlmIChsZW4gPiAwKSB7XG4gICAgLy9UT0RPOiBldmFsdWF0ZSB1c2Ugb2YgZ2xtX2ludnNxcnQgaGVyZT9cbiAgICBsZW4gPSAxIC8gTWF0aC5zcXJ0KGxlbik7XG4gIH1cblxuICBvdXRbMF0gPSBhWzBdICogbGVuO1xuICBvdXRbMV0gPSBhWzFdICogbGVuO1xuICBvdXRbMl0gPSBhWzJdICogbGVuO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBkb3QgcHJvZHVjdCBvZiB0d28gdmVjMydzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gZG90IHByb2R1Y3Qgb2YgYSBhbmQgYlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBkb3QoYSwgYikge1xuICByZXR1cm4gYVswXSAqIGJbMF0gKyBhWzFdICogYlsxXSArIGFbMl0gKiBiWzJdO1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgY3Jvc3MgcHJvZHVjdCBvZiB0d28gdmVjMydzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY3Jvc3Mob3V0LCBhLCBiKSB7XG4gIHZhciBheCA9IGFbMF0sXG4gICAgICBheSA9IGFbMV0sXG4gICAgICBheiA9IGFbMl07XG4gIHZhciBieCA9IGJbMF0sXG4gICAgICBieSA9IGJbMV0sXG4gICAgICBieiA9IGJbMl07XG4gIG91dFswXSA9IGF5ICogYnogLSBheiAqIGJ5O1xuICBvdXRbMV0gPSBheiAqIGJ4IC0gYXggKiBiejtcbiAgb3V0WzJdID0gYXggKiBieSAtIGF5ICogYng7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFBlcmZvcm1zIGEgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gdmVjMydzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50LCBpbiB0aGUgcmFuZ2UgWzAtMV0sIGJldHdlZW4gdGhlIHR3byBpbnB1dHNcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbGVycChvdXQsIGEsIGIsIHQpIHtcbiAgdmFyIGF4ID0gYVswXTtcbiAgdmFyIGF5ID0gYVsxXTtcbiAgdmFyIGF6ID0gYVsyXTtcbiAgb3V0WzBdID0gYXggKyB0ICogKGJbMF0gLSBheCk7XG4gIG91dFsxXSA9IGF5ICsgdCAqIChiWzFdIC0gYXkpO1xuICBvdXRbMl0gPSBheiArIHQgKiAoYlsyXSAtIGF6KTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUGVyZm9ybXMgYSBoZXJtaXRlIGludGVycG9sYXRpb24gd2l0aCB0d28gY29udHJvbCBwb2ludHNcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGMgdGhlIHRoaXJkIG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBkIHRoZSBmb3VydGggb3BlcmFuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHQgaW50ZXJwb2xhdGlvbiBhbW91bnQsIGluIHRoZSByYW5nZSBbMC0xXSwgYmV0d2VlbiB0aGUgdHdvIGlucHV0c1xuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBoZXJtaXRlKG91dCwgYSwgYiwgYywgZCwgdCkge1xuICB2YXIgZmFjdG9yVGltZXMyID0gdCAqIHQ7XG4gIHZhciBmYWN0b3IxID0gZmFjdG9yVGltZXMyICogKDIgKiB0IC0gMykgKyAxO1xuICB2YXIgZmFjdG9yMiA9IGZhY3RvclRpbWVzMiAqICh0IC0gMikgKyB0O1xuICB2YXIgZmFjdG9yMyA9IGZhY3RvclRpbWVzMiAqICh0IC0gMSk7XG4gIHZhciBmYWN0b3I0ID0gZmFjdG9yVGltZXMyICogKDMgLSAyICogdCk7XG4gIG91dFswXSA9IGFbMF0gKiBmYWN0b3IxICsgYlswXSAqIGZhY3RvcjIgKyBjWzBdICogZmFjdG9yMyArIGRbMF0gKiBmYWN0b3I0O1xuICBvdXRbMV0gPSBhWzFdICogZmFjdG9yMSArIGJbMV0gKiBmYWN0b3IyICsgY1sxXSAqIGZhY3RvcjMgKyBkWzFdICogZmFjdG9yNDtcbiAgb3V0WzJdID0gYVsyXSAqIGZhY3RvcjEgKyBiWzJdICogZmFjdG9yMiArIGNbMl0gKiBmYWN0b3IzICsgZFsyXSAqIGZhY3RvcjQ7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFBlcmZvcm1zIGEgYmV6aWVyIGludGVycG9sYXRpb24gd2l0aCB0d28gY29udHJvbCBwb2ludHNcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGMgdGhlIHRoaXJkIG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBkIHRoZSBmb3VydGggb3BlcmFuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHQgaW50ZXJwb2xhdGlvbiBhbW91bnQsIGluIHRoZSByYW5nZSBbMC0xXSwgYmV0d2VlbiB0aGUgdHdvIGlucHV0c1xuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBiZXppZXIob3V0LCBhLCBiLCBjLCBkLCB0KSB7XG4gIHZhciBpbnZlcnNlRmFjdG9yID0gMSAtIHQ7XG4gIHZhciBpbnZlcnNlRmFjdG9yVGltZXNUd28gPSBpbnZlcnNlRmFjdG9yICogaW52ZXJzZUZhY3RvcjtcbiAgdmFyIGZhY3RvclRpbWVzMiA9IHQgKiB0O1xuICB2YXIgZmFjdG9yMSA9IGludmVyc2VGYWN0b3JUaW1lc1R3byAqIGludmVyc2VGYWN0b3I7XG4gIHZhciBmYWN0b3IyID0gMyAqIHQgKiBpbnZlcnNlRmFjdG9yVGltZXNUd287XG4gIHZhciBmYWN0b3IzID0gMyAqIGZhY3RvclRpbWVzMiAqIGludmVyc2VGYWN0b3I7XG4gIHZhciBmYWN0b3I0ID0gZmFjdG9yVGltZXMyICogdDtcbiAgb3V0WzBdID0gYVswXSAqIGZhY3RvcjEgKyBiWzBdICogZmFjdG9yMiArIGNbMF0gKiBmYWN0b3IzICsgZFswXSAqIGZhY3RvcjQ7XG4gIG91dFsxXSA9IGFbMV0gKiBmYWN0b3IxICsgYlsxXSAqIGZhY3RvcjIgKyBjWzFdICogZmFjdG9yMyArIGRbMV0gKiBmYWN0b3I0O1xuICBvdXRbMl0gPSBhWzJdICogZmFjdG9yMSArIGJbMl0gKiBmYWN0b3IyICsgY1syXSAqIGZhY3RvcjMgKyBkWzJdICogZmFjdG9yNDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgcmFuZG9tIHZlY3RvciB3aXRoIHRoZSBnaXZlbiBzY2FsZVxuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge051bWJlcn0gW3NjYWxlXSBMZW5ndGggb2YgdGhlIHJlc3VsdGluZyB2ZWN0b3IuIElmIG9tbWl0dGVkLCBhIHVuaXQgdmVjdG9yIHdpbGwgYmUgcmV0dXJuZWRcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tKG91dCwgc2NhbGUpIHtcbiAgc2NhbGUgPSBzY2FsZSB8fCAxLjA7XG4gIHZhciByID0gZ2xNYXRyaXguUkFORE9NKCkgKiAyLjAgKiBNYXRoLlBJO1xuICB2YXIgeiA9IGdsTWF0cml4LlJBTkRPTSgpICogMi4wIC0gMS4wO1xuICB2YXIgelNjYWxlID0gTWF0aC5zcXJ0KDEuMCAtIHogKiB6KSAqIHNjYWxlO1xuICBvdXRbMF0gPSBNYXRoLmNvcyhyKSAqIHpTY2FsZTtcbiAgb3V0WzFdID0gTWF0aC5zaW4ocikgKiB6U2NhbGU7XG4gIG91dFsyXSA9IHogKiBzY2FsZTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgdmVjMyB3aXRoIGEgbWF0NC5cbiAqIDR0aCB2ZWN0b3IgY29tcG9uZW50IGlzIGltcGxpY2l0bHkgJzEnXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSB2ZWN0b3IgdG8gdHJhbnNmb3JtXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gbSBtYXRyaXggdG8gdHJhbnNmb3JtIHdpdGhcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtTWF0NChvdXQsIGEsIG0pIHtcbiAgdmFyIHggPSBhWzBdLFxuICAgICAgeSA9IGFbMV0sXG4gICAgICB6ID0gYVsyXTtcbiAgdmFyIHcgPSBtWzNdICogeCArIG1bN10gKiB5ICsgbVsxMV0gKiB6ICsgbVsxNV07XG4gIHcgPSB3IHx8IDEuMDtcbiAgb3V0WzBdID0gKG1bMF0gKiB4ICsgbVs0XSAqIHkgKyBtWzhdICogeiArIG1bMTJdKSAvIHc7XG4gIG91dFsxXSA9IChtWzFdICogeCArIG1bNV0gKiB5ICsgbVs5XSAqIHogKyBtWzEzXSkgLyB3O1xuICBvdXRbMl0gPSAobVsyXSAqIHggKyBtWzZdICogeSArIG1bMTBdICogeiArIG1bMTRdKSAvIHc7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIHZlYzMgd2l0aCBhIG1hdDMuXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSB2ZWN0b3IgdG8gdHJhbnNmb3JtXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gbSB0aGUgM3gzIG1hdHJpeCB0byB0cmFuc2Zvcm0gd2l0aFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1NYXQzKG91dCwgYSwgbSkge1xuICB2YXIgeCA9IGFbMF0sXG4gICAgICB5ID0gYVsxXSxcbiAgICAgIHogPSBhWzJdO1xuICBvdXRbMF0gPSB4ICogbVswXSArIHkgKiBtWzNdICsgeiAqIG1bNl07XG4gIG91dFsxXSA9IHggKiBtWzFdICsgeSAqIG1bNF0gKyB6ICogbVs3XTtcbiAgb3V0WzJdID0geCAqIG1bMl0gKyB5ICogbVs1XSArIHogKiBtWzhdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSB2ZWMzIHdpdGggYSBxdWF0XG4gKiBDYW4gYWxzbyBiZSB1c2VkIGZvciBkdWFsIHF1YXRlcm5pb25zLiAoTXVsdGlwbHkgaXQgd2l0aCB0aGUgcmVhbCBwYXJ0KVxuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgdmVjdG9yIHRvIHRyYW5zZm9ybVxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IHEgcXVhdGVybmlvbiB0byB0cmFuc2Zvcm0gd2l0aFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1RdWF0KG91dCwgYSwgcSkge1xuICAvLyBiZW5jaG1hcmtzOiBodHRwczovL2pzcGVyZi5jb20vcXVhdGVybmlvbi10cmFuc2Zvcm0tdmVjMy1pbXBsZW1lbnRhdGlvbnMtZml4ZWRcbiAgdmFyIHF4ID0gcVswXSxcbiAgICAgIHF5ID0gcVsxXSxcbiAgICAgIHF6ID0gcVsyXSxcbiAgICAgIHF3ID0gcVszXTtcbiAgdmFyIHggPSBhWzBdLFxuICAgICAgeSA9IGFbMV0sXG4gICAgICB6ID0gYVsyXTsgLy8gdmFyIHF2ZWMgPSBbcXgsIHF5LCBxel07XG4gIC8vIHZhciB1diA9IHZlYzMuY3Jvc3MoW10sIHF2ZWMsIGEpO1xuXG4gIHZhciB1dnggPSBxeSAqIHogLSBxeiAqIHksXG4gICAgICB1dnkgPSBxeiAqIHggLSBxeCAqIHosXG4gICAgICB1dnogPSBxeCAqIHkgLSBxeSAqIHg7IC8vIHZhciB1dXYgPSB2ZWMzLmNyb3NzKFtdLCBxdmVjLCB1dik7XG5cbiAgdmFyIHV1dnggPSBxeSAqIHV2eiAtIHF6ICogdXZ5LFxuICAgICAgdXV2eSA9IHF6ICogdXZ4IC0gcXggKiB1dnosXG4gICAgICB1dXZ6ID0gcXggKiB1dnkgLSBxeSAqIHV2eDsgLy8gdmVjMy5zY2FsZSh1diwgdXYsIDIgKiB3KTtcblxuICB2YXIgdzIgPSBxdyAqIDI7XG4gIHV2eCAqPSB3MjtcbiAgdXZ5ICo9IHcyO1xuICB1dnogKj0gdzI7IC8vIHZlYzMuc2NhbGUodXV2LCB1dXYsIDIpO1xuXG4gIHV1dnggKj0gMjtcbiAgdXV2eSAqPSAyO1xuICB1dXZ6ICo9IDI7IC8vIHJldHVybiB2ZWMzLmFkZChvdXQsIGEsIHZlYzMuYWRkKG91dCwgdXYsIHV1dikpO1xuXG4gIG91dFswXSA9IHggKyB1dnggKyB1dXZ4O1xuICBvdXRbMV0gPSB5ICsgdXZ5ICsgdXV2eTtcbiAgb3V0WzJdID0geiArIHV2eiArIHV1dno7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZSBhIDNEIHZlY3RvciBhcm91bmQgdGhlIHgtYXhpc1xuICogQHBhcmFtIHt2ZWMzfSBvdXQgVGhlIHJlY2VpdmluZyB2ZWMzXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSBUaGUgdmVjMyBwb2ludCB0byByb3RhdGVcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIFRoZSBvcmlnaW4gb2YgdGhlIHJvdGF0aW9uXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIFRoZSBhbmdsZSBvZiByb3RhdGlvbiBpbiByYWRpYW5zXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVgob3V0LCBhLCBiLCByYWQpIHtcbiAgdmFyIHAgPSBbXSxcbiAgICAgIHIgPSBbXTsgLy9UcmFuc2xhdGUgcG9pbnQgdG8gdGhlIG9yaWdpblxuXG4gIHBbMF0gPSBhWzBdIC0gYlswXTtcbiAgcFsxXSA9IGFbMV0gLSBiWzFdO1xuICBwWzJdID0gYVsyXSAtIGJbMl07IC8vcGVyZm9ybSByb3RhdGlvblxuXG4gIHJbMF0gPSBwWzBdO1xuICByWzFdID0gcFsxXSAqIE1hdGguY29zKHJhZCkgLSBwWzJdICogTWF0aC5zaW4ocmFkKTtcbiAgclsyXSA9IHBbMV0gKiBNYXRoLnNpbihyYWQpICsgcFsyXSAqIE1hdGguY29zKHJhZCk7IC8vdHJhbnNsYXRlIHRvIGNvcnJlY3QgcG9zaXRpb25cblxuICBvdXRbMF0gPSByWzBdICsgYlswXTtcbiAgb3V0WzFdID0gclsxXSArIGJbMV07XG4gIG91dFsyXSA9IHJbMl0gKyBiWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGUgYSAzRCB2ZWN0b3IgYXJvdW5kIHRoZSB5LWF4aXNcbiAqIEBwYXJhbSB7dmVjM30gb3V0IFRoZSByZWNlaXZpbmcgdmVjM1xuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgVGhlIHZlYzMgcG9pbnQgdG8gcm90YXRlXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiBUaGUgb3JpZ2luIG9mIHRoZSByb3RhdGlvblxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCBUaGUgYW5nbGUgb2Ygcm90YXRpb24gaW4gcmFkaWFuc1xuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVZKG91dCwgYSwgYiwgcmFkKSB7XG4gIHZhciBwID0gW10sXG4gICAgICByID0gW107IC8vVHJhbnNsYXRlIHBvaW50IHRvIHRoZSBvcmlnaW5cblxuICBwWzBdID0gYVswXSAtIGJbMF07XG4gIHBbMV0gPSBhWzFdIC0gYlsxXTtcbiAgcFsyXSA9IGFbMl0gLSBiWzJdOyAvL3BlcmZvcm0gcm90YXRpb25cblxuICByWzBdID0gcFsyXSAqIE1hdGguc2luKHJhZCkgKyBwWzBdICogTWF0aC5jb3MocmFkKTtcbiAgclsxXSA9IHBbMV07XG4gIHJbMl0gPSBwWzJdICogTWF0aC5jb3MocmFkKSAtIHBbMF0gKiBNYXRoLnNpbihyYWQpOyAvL3RyYW5zbGF0ZSB0byBjb3JyZWN0IHBvc2l0aW9uXG5cbiAgb3V0WzBdID0gclswXSArIGJbMF07XG4gIG91dFsxXSA9IHJbMV0gKyBiWzFdO1xuICBvdXRbMl0gPSByWzJdICsgYlsyXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlIGEgM0QgdmVjdG9yIGFyb3VuZCB0aGUgei1heGlzXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCBUaGUgcmVjZWl2aW5nIHZlYzNcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIFRoZSB2ZWMzIHBvaW50IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgVGhlIG9yaWdpbiBvZiB0aGUgcm90YXRpb25cbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgVGhlIGFuZ2xlIG9mIHJvdGF0aW9uIGluIHJhZGlhbnNcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlWihvdXQsIGEsIGIsIHJhZCkge1xuICB2YXIgcCA9IFtdLFxuICAgICAgciA9IFtdOyAvL1RyYW5zbGF0ZSBwb2ludCB0byB0aGUgb3JpZ2luXG5cbiAgcFswXSA9IGFbMF0gLSBiWzBdO1xuICBwWzFdID0gYVsxXSAtIGJbMV07XG4gIHBbMl0gPSBhWzJdIC0gYlsyXTsgLy9wZXJmb3JtIHJvdGF0aW9uXG5cbiAgclswXSA9IHBbMF0gKiBNYXRoLmNvcyhyYWQpIC0gcFsxXSAqIE1hdGguc2luKHJhZCk7XG4gIHJbMV0gPSBwWzBdICogTWF0aC5zaW4ocmFkKSArIHBbMV0gKiBNYXRoLmNvcyhyYWQpO1xuICByWzJdID0gcFsyXTsgLy90cmFuc2xhdGUgdG8gY29ycmVjdCBwb3NpdGlvblxuXG4gIG91dFswXSA9IHJbMF0gKyBiWzBdO1xuICBvdXRbMV0gPSByWzFdICsgYlsxXTtcbiAgb3V0WzJdID0gclsyXSArIGJbMl07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdldCB0aGUgYW5nbGUgYmV0d2VlbiB0d28gM0QgdmVjdG9yc1xuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgVGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIFRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gVGhlIGFuZ2xlIGluIHJhZGlhbnNcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYW5nbGUoYSwgYikge1xuICB2YXIgYXggPSBhWzBdLFxuICAgICAgYXkgPSBhWzFdLFxuICAgICAgYXogPSBhWzJdLFxuICAgICAgYnggPSBiWzBdLFxuICAgICAgYnkgPSBiWzFdLFxuICAgICAgYnogPSBiWzJdLFxuICAgICAgbWFnMSA9IE1hdGguc3FydChheCAqIGF4ICsgYXkgKiBheSArIGF6ICogYXopLFxuICAgICAgbWFnMiA9IE1hdGguc3FydChieCAqIGJ4ICsgYnkgKiBieSArIGJ6ICogYnopLFxuICAgICAgbWFnID0gbWFnMSAqIG1hZzIsXG4gICAgICBjb3NpbmUgPSBtYWcgJiYgZG90KGEsIGIpIC8gbWFnO1xuICByZXR1cm4gTWF0aC5hY29zKE1hdGgubWluKE1hdGgubWF4KGNvc2luZSwgLTEpLCAxKSk7XG59XG4vKipcbiAqIFNldCB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzMgdG8gemVyb1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHplcm8ob3V0KSB7XG4gIG91dFswXSA9IDAuMDtcbiAgb3V0WzFdID0gMC4wO1xuICBvdXRbMl0gPSAwLjA7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSB2ZWN0b3JcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB2ZWN0b3IgdG8gcmVwcmVzZW50IGFzIGEgc3RyaW5nXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHZlY3RvclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzdHIoYSkge1xuICByZXR1cm4gXCJ2ZWMzKFwiICsgYVswXSArIFwiLCBcIiArIGFbMV0gKyBcIiwgXCIgKyBhWzJdICsgXCIpXCI7XG59XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIHZlY3RvcnMgaGF2ZSBleGFjdGx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uICh3aGVuIGNvbXBhcmVkIHdpdGggPT09KVxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIFRoZSBmaXJzdCB2ZWN0b3IuXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiBUaGUgc2Vjb25kIHZlY3Rvci5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSB2ZWN0b3JzIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBleGFjdEVxdWFscyhhLCBiKSB7XG4gIHJldHVybiBhWzBdID09PSBiWzBdICYmIGFbMV0gPT09IGJbMV0gJiYgYVsyXSA9PT0gYlsyXTtcbn1cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgdmVjdG9ycyBoYXZlIGFwcHJveGltYXRlbHkgdGhlIHNhbWUgZWxlbWVudHMgaW4gdGhlIHNhbWUgcG9zaXRpb24uXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgVGhlIGZpcnN0IHZlY3Rvci5cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIFRoZSBzZWNvbmQgdmVjdG9yLlxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhlIHZlY3RvcnMgYXJlIGVxdWFsLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGVxdWFscyhhLCBiKSB7XG4gIHZhciBhMCA9IGFbMF0sXG4gICAgICBhMSA9IGFbMV0sXG4gICAgICBhMiA9IGFbMl07XG4gIHZhciBiMCA9IGJbMF0sXG4gICAgICBiMSA9IGJbMV0sXG4gICAgICBiMiA9IGJbMl07XG4gIHJldHVybiBNYXRoLmFicyhhMCAtIGIwKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMCksIE1hdGguYWJzKGIwKSkgJiYgTWF0aC5hYnMoYTEgLSBiMSkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTEpLCBNYXRoLmFicyhiMSkpICYmIE1hdGguYWJzKGEyIC0gYjIpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEyKSwgTWF0aC5hYnMoYjIpKTtcbn1cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMzLnN1YnRyYWN0fVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzdWIgPSBzdWJ0cmFjdDtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMzLm11bHRpcGx5fVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBtdWwgPSBtdWx0aXBseTtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMzLmRpdmlkZX1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgZGl2ID0gZGl2aWRlO1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzMuZGlzdGFuY2V9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGRpc3QgPSBkaXN0YW5jZTtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMzLnNxdWFyZWREaXN0YW5jZX1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgc3FyRGlzdCA9IHNxdWFyZWREaXN0YW5jZTtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMzLmxlbmd0aH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgbGVuID0gbGVuZ3RoO1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzMuc3F1YXJlZExlbmd0aH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgc3FyTGVuID0gc3F1YXJlZExlbmd0aDtcbi8qKlxuICogUGVyZm9ybSBzb21lIG9wZXJhdGlvbiBvdmVyIGFuIGFycmF5IG9mIHZlYzNzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGEgdGhlIGFycmF5IG9mIHZlY3RvcnMgdG8gaXRlcmF0ZSBvdmVyXG4gKiBAcGFyYW0ge051bWJlcn0gc3RyaWRlIE51bWJlciBvZiBlbGVtZW50cyBiZXR3ZWVuIHRoZSBzdGFydCBvZiBlYWNoIHZlYzMuIElmIDAgYXNzdW1lcyB0aWdodGx5IHBhY2tlZFxuICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCBOdW1iZXIgb2YgZWxlbWVudHMgdG8gc2tpcCBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcnJheVxuICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50IE51bWJlciBvZiB2ZWMzcyB0byBpdGVyYXRlIG92ZXIuIElmIDAgaXRlcmF0ZXMgb3ZlciBlbnRpcmUgYXJyYXlcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggdmVjdG9yIGluIHRoZSBhcnJheVxuICogQHBhcmFtIHtPYmplY3R9IFthcmddIGFkZGl0aW9uYWwgYXJndW1lbnQgdG8gcGFzcyB0byBmblxuICogQHJldHVybnMge0FycmF5fSBhXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGZvckVhY2ggPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB2ZWMgPSBjcmVhdGUoKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChhLCBzdHJpZGUsIG9mZnNldCwgY291bnQsIGZuLCBhcmcpIHtcbiAgICB2YXIgaSwgbDtcblxuICAgIGlmICghc3RyaWRlKSB7XG4gICAgICBzdHJpZGUgPSAzO1xuICAgIH1cblxuICAgIGlmICghb2Zmc2V0KSB7XG4gICAgICBvZmZzZXQgPSAwO1xuICAgIH1cblxuICAgIGlmIChjb3VudCkge1xuICAgICAgbCA9IE1hdGgubWluKGNvdW50ICogc3RyaWRlICsgb2Zmc2V0LCBhLmxlbmd0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGwgPSBhLmxlbmd0aDtcbiAgICB9XG5cbiAgICBmb3IgKGkgPSBvZmZzZXQ7IGkgPCBsOyBpICs9IHN0cmlkZSkge1xuICAgICAgdmVjWzBdID0gYVtpXTtcbiAgICAgIHZlY1sxXSA9IGFbaSArIDFdO1xuICAgICAgdmVjWzJdID0gYVtpICsgMl07XG4gICAgICBmbih2ZWMsIHZlYywgYXJnKTtcbiAgICAgIGFbaV0gPSB2ZWNbMF07XG4gICAgICBhW2kgKyAxXSA9IHZlY1sxXTtcbiAgICAgIGFbaSArIDJdID0gdmVjWzJdO1xuICAgIH1cblxuICAgIHJldHVybiBhO1xuICB9O1xufSgpOyIsICJpbXBvcnQgKiBhcyBnbE1hdHJpeCBmcm9tIFwiLi9jb21tb24uanNcIjtcbi8qKlxuICogNCBEaW1lbnNpb25hbCBWZWN0b3JcbiAqIEBtb2R1bGUgdmVjNFxuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldywgZW1wdHkgdmVjNFxuICpcbiAqIEByZXR1cm5zIHt2ZWM0fSBhIG5ldyA0RCB2ZWN0b3JcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKCkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoNCk7XG5cbiAgaWYgKGdsTWF0cml4LkFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgb3V0WzBdID0gMDtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gICAgb3V0WzNdID0gMDtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdmVjNCBpbml0aWFsaXplZCB3aXRoIHZhbHVlcyBmcm9tIGFuIGV4aXN0aW5nIHZlY3RvclxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHZlY3RvciB0byBjbG9uZVxuICogQHJldHVybnMge3ZlYzR9IGEgbmV3IDREIHZlY3RvclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZShhKSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSg0KTtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgb3V0WzNdID0gYVszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB2ZWM0IGluaXRpYWxpemVkIHdpdGggdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHogWiBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB3IFcgY29tcG9uZW50XG4gKiBAcmV0dXJucyB7dmVjNH0gYSBuZXcgNEQgdmVjdG9yXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21WYWx1ZXMoeCwgeSwgeiwgdykge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoNCk7XG4gIG91dFswXSA9IHg7XG4gIG91dFsxXSA9IHk7XG4gIG91dFsyXSA9IHo7XG4gIG91dFszXSA9IHc7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENvcHkgdGhlIHZhbHVlcyBmcm9tIG9uZSB2ZWM0IHRvIGFub3RoZXJcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIHNvdXJjZSB2ZWN0b3JcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY29weShvdXQsIGEpIHtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgb3V0WzNdID0gYVszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2V0IHRoZSBjb21wb25lbnRzIG9mIGEgdmVjNCB0byB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHogWiBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB3IFcgY29tcG9uZW50XG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNldChvdXQsIHgsIHksIHosIHcpIHtcbiAgb3V0WzBdID0geDtcbiAgb3V0WzFdID0geTtcbiAgb3V0WzJdID0gejtcbiAgb3V0WzNdID0gdztcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQWRkcyB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICsgYlswXTtcbiAgb3V0WzFdID0gYVsxXSArIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gKyBiWzJdO1xuICBvdXRbM10gPSBhWzNdICsgYlszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU3VidHJhY3RzIHZlY3RvciBiIGZyb20gdmVjdG9yIGFcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzdWJ0cmFjdChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAtIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gLSBiWzFdO1xuICBvdXRbMl0gPSBhWzJdIC0gYlsyXTtcbiAgb3V0WzNdID0gYVszXSAtIGJbM107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE11bHRpcGxpZXMgdHdvIHZlYzQnc1xuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5KG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICogYlswXTtcbiAgb3V0WzFdID0gYVsxXSAqIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gKiBiWzJdO1xuICBvdXRbM10gPSBhWzNdICogYlszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogRGl2aWRlcyB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZGl2aWRlKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdIC8gYlswXTtcbiAgb3V0WzFdID0gYVsxXSAvIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gLyBiWzJdO1xuICBvdXRbM10gPSBhWzNdIC8gYlszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTWF0aC5jZWlsIHRoZSBjb21wb25lbnRzIG9mIGEgdmVjNFxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB2ZWN0b3IgdG8gY2VpbFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjZWlsKG91dCwgYSkge1xuICBvdXRbMF0gPSBNYXRoLmNlaWwoYVswXSk7XG4gIG91dFsxXSA9IE1hdGguY2VpbChhWzFdKTtcbiAgb3V0WzJdID0gTWF0aC5jZWlsKGFbMl0pO1xuICBvdXRbM10gPSBNYXRoLmNlaWwoYVszXSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE1hdGguZmxvb3IgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWM0XG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHZlY3RvciB0byBmbG9vclxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmbG9vcihvdXQsIGEpIHtcbiAgb3V0WzBdID0gTWF0aC5mbG9vcihhWzBdKTtcbiAgb3V0WzFdID0gTWF0aC5mbG9vcihhWzFdKTtcbiAgb3V0WzJdID0gTWF0aC5mbG9vcihhWzJdKTtcbiAgb3V0WzNdID0gTWF0aC5mbG9vcihhWzNdKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgbWluaW11bSBvZiB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbWluKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBNYXRoLm1pbihhWzBdLCBiWzBdKTtcbiAgb3V0WzFdID0gTWF0aC5taW4oYVsxXSwgYlsxXSk7XG4gIG91dFsyXSA9IE1hdGgubWluKGFbMl0sIGJbMl0pO1xuICBvdXRbM10gPSBNYXRoLm1pbihhWzNdLCBiWzNdKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgbWF4aW11bSBvZiB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbWF4KG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBNYXRoLm1heChhWzBdLCBiWzBdKTtcbiAgb3V0WzFdID0gTWF0aC5tYXgoYVsxXSwgYlsxXSk7XG4gIG91dFsyXSA9IE1hdGgubWF4KGFbMl0sIGJbMl0pO1xuICBvdXRbM10gPSBNYXRoLm1heChhWzNdLCBiWzNdKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTWF0aC5yb3VuZCB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzRcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdmVjdG9yIHRvIHJvdW5kXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdW5kKG91dCwgYSkge1xuICBvdXRbMF0gPSBNYXRoLnJvdW5kKGFbMF0pO1xuICBvdXRbMV0gPSBNYXRoLnJvdW5kKGFbMV0pO1xuICBvdXRbMl0gPSBNYXRoLnJvdW5kKGFbMl0pO1xuICBvdXRbM10gPSBNYXRoLnJvdW5kKGFbM10pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTY2FsZXMgYSB2ZWM0IGJ5IGEgc2NhbGFyIG51bWJlclxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgdmVjdG9yIHRvIHNjYWxlXG4gKiBAcGFyYW0ge051bWJlcn0gYiBhbW91bnQgdG8gc2NhbGUgdGhlIHZlY3RvciBieVxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZShvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAqIGI7XG4gIG91dFsxXSA9IGFbMV0gKiBiO1xuICBvdXRbMl0gPSBhWzJdICogYjtcbiAgb3V0WzNdID0gYVszXSAqIGI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEFkZHMgdHdvIHZlYzQncyBhZnRlciBzY2FsaW5nIHRoZSBzZWNvbmQgb3BlcmFuZCBieSBhIHNjYWxhciB2YWx1ZVxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gc2NhbGUgdGhlIGFtb3VudCB0byBzY2FsZSBiIGJ5IGJlZm9yZSBhZGRpbmdcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2NhbGVBbmRBZGQob3V0LCBhLCBiLCBzY2FsZSkge1xuICBvdXRbMF0gPSBhWzBdICsgYlswXSAqIHNjYWxlO1xuICBvdXRbMV0gPSBhWzFdICsgYlsxXSAqIHNjYWxlO1xuICBvdXRbMl0gPSBhWzJdICsgYlsyXSAqIHNjYWxlO1xuICBvdXRbM10gPSBhWzNdICsgYlszXSAqIHNjYWxlO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBldWNsaWRpYW4gZGlzdGFuY2UgYmV0d2VlbiB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gZGlzdGFuY2UgYmV0d2VlbiBhIGFuZCBiXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3RhbmNlKGEsIGIpIHtcbiAgdmFyIHggPSBiWzBdIC0gYVswXTtcbiAgdmFyIHkgPSBiWzFdIC0gYVsxXTtcbiAgdmFyIHogPSBiWzJdIC0gYVsyXTtcbiAgdmFyIHcgPSBiWzNdIC0gYVszXTtcbiAgcmV0dXJuIE1hdGguaHlwb3QoeCwgeSwgeiwgdyk7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHNxdWFyZWQgZXVjbGlkaWFuIGRpc3RhbmNlIGJldHdlZW4gdHdvIHZlYzQnc1xuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IHNxdWFyZWQgZGlzdGFuY2UgYmV0d2VlbiBhIGFuZCBiXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWREaXN0YW5jZShhLCBiKSB7XG4gIHZhciB4ID0gYlswXSAtIGFbMF07XG4gIHZhciB5ID0gYlsxXSAtIGFbMV07XG4gIHZhciB6ID0gYlsyXSAtIGFbMl07XG4gIHZhciB3ID0gYlszXSAtIGFbM107XG4gIHJldHVybiB4ICogeCArIHkgKiB5ICsgeiAqIHogKyB3ICogdztcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbGVuZ3RoIG9mIGEgdmVjNFxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHZlY3RvciB0byBjYWxjdWxhdGUgbGVuZ3RoIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBsZW5ndGggb2YgYVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsZW5ndGgoYSkge1xuICB2YXIgeCA9IGFbMF07XG4gIHZhciB5ID0gYVsxXTtcbiAgdmFyIHogPSBhWzJdO1xuICB2YXIgdyA9IGFbM107XG4gIHJldHVybiBNYXRoLmh5cG90KHgsIHksIHosIHcpO1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBzcXVhcmVkIGxlbmd0aCBvZiBhIHZlYzRcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB2ZWN0b3IgdG8gY2FsY3VsYXRlIHNxdWFyZWQgbGVuZ3RoIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBzcXVhcmVkIGxlbmd0aCBvZiBhXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWRMZW5ndGgoYSkge1xuICB2YXIgeCA9IGFbMF07XG4gIHZhciB5ID0gYVsxXTtcbiAgdmFyIHogPSBhWzJdO1xuICB2YXIgdyA9IGFbM107XG4gIHJldHVybiB4ICogeCArIHkgKiB5ICsgeiAqIHogKyB3ICogdztcbn1cbi8qKlxuICogTmVnYXRlcyB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzRcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdmVjdG9yIHRvIG5lZ2F0ZVxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBuZWdhdGUob3V0LCBhKSB7XG4gIG91dFswXSA9IC1hWzBdO1xuICBvdXRbMV0gPSAtYVsxXTtcbiAgb3V0WzJdID0gLWFbMl07XG4gIG91dFszXSA9IC1hWzNdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbnZlcnNlIG9mIHRoZSBjb21wb25lbnRzIG9mIGEgdmVjNFxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB2ZWN0b3IgdG8gaW52ZXJ0XG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGludmVyc2Uob3V0LCBhKSB7XG4gIG91dFswXSA9IDEuMCAvIGFbMF07XG4gIG91dFsxXSA9IDEuMCAvIGFbMV07XG4gIG91dFsyXSA9IDEuMCAvIGFbMl07XG4gIG91dFszXSA9IDEuMCAvIGFbM107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE5vcm1hbGl6ZSBhIHZlYzRcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdmVjdG9yIHRvIG5vcm1hbGl6ZVxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemUob3V0LCBhKSB7XG4gIHZhciB4ID0gYVswXTtcbiAgdmFyIHkgPSBhWzFdO1xuICB2YXIgeiA9IGFbMl07XG4gIHZhciB3ID0gYVszXTtcbiAgdmFyIGxlbiA9IHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHcgKiB3O1xuXG4gIGlmIChsZW4gPiAwKSB7XG4gICAgbGVuID0gMSAvIE1hdGguc3FydChsZW4pO1xuICB9XG5cbiAgb3V0WzBdID0geCAqIGxlbjtcbiAgb3V0WzFdID0geSAqIGxlbjtcbiAgb3V0WzJdID0geiAqIGxlbjtcbiAgb3V0WzNdID0gdyAqIGxlbjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZG90IHByb2R1Y3Qgb2YgdHdvIHZlYzQnc1xuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGRvdCBwcm9kdWN0IG9mIGEgYW5kIGJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZG90KGEsIGIpIHtcbiAgcmV0dXJuIGFbMF0gKiBiWzBdICsgYVsxXSAqIGJbMV0gKyBhWzJdICogYlsyXSArIGFbM10gKiBiWzNdO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjcm9zcy1wcm9kdWN0IG9mIHRocmVlIHZlY3RvcnMgaW4gYSA0LWRpbWVuc2lvbmFsIHNwYWNlXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IHJlc3VsdCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IFUgdGhlIGZpcnN0IHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IFYgdGhlIHNlY29uZCB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBXIHRoZSB0aGlyZCB2ZWN0b3JcbiAqIEByZXR1cm5zIHt2ZWM0fSByZXN1bHRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY3Jvc3Mob3V0LCB1LCB2LCB3KSB7XG4gIHZhciBBID0gdlswXSAqIHdbMV0gLSB2WzFdICogd1swXSxcbiAgICAgIEIgPSB2WzBdICogd1syXSAtIHZbMl0gKiB3WzBdLFxuICAgICAgQyA9IHZbMF0gKiB3WzNdIC0gdlszXSAqIHdbMF0sXG4gICAgICBEID0gdlsxXSAqIHdbMl0gLSB2WzJdICogd1sxXSxcbiAgICAgIEUgPSB2WzFdICogd1szXSAtIHZbM10gKiB3WzFdLFxuICAgICAgRiA9IHZbMl0gKiB3WzNdIC0gdlszXSAqIHdbMl07XG4gIHZhciBHID0gdVswXTtcbiAgdmFyIEggPSB1WzFdO1xuICB2YXIgSSA9IHVbMl07XG4gIHZhciBKID0gdVszXTtcbiAgb3V0WzBdID0gSCAqIEYgLSBJICogRSArIEogKiBEO1xuICBvdXRbMV0gPSAtKEcgKiBGKSArIEkgKiBDIC0gSiAqIEI7XG4gIG91dFsyXSA9IEcgKiBFIC0gSCAqIEMgKyBKICogQTtcbiAgb3V0WzNdID0gLShHICogRCkgKyBIICogQiAtIEkgKiBBO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBQZXJmb3JtcyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHZlYzQnc1xuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gdCBpbnRlcnBvbGF0aW9uIGFtb3VudCwgaW4gdGhlIHJhbmdlIFswLTFdLCBiZXR3ZWVuIHRoZSB0d28gaW5wdXRzXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxlcnAob3V0LCBhLCBiLCB0KSB7XG4gIHZhciBheCA9IGFbMF07XG4gIHZhciBheSA9IGFbMV07XG4gIHZhciBheiA9IGFbMl07XG4gIHZhciBhdyA9IGFbM107XG4gIG91dFswXSA9IGF4ICsgdCAqIChiWzBdIC0gYXgpO1xuICBvdXRbMV0gPSBheSArIHQgKiAoYlsxXSAtIGF5KTtcbiAgb3V0WzJdID0gYXogKyB0ICogKGJbMl0gLSBheik7XG4gIG91dFszXSA9IGF3ICsgdCAqIChiWzNdIC0gYXcpO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSByYW5kb20gdmVjdG9yIHdpdGggdGhlIGdpdmVuIHNjYWxlXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7TnVtYmVyfSBbc2NhbGVdIExlbmd0aCBvZiB0aGUgcmVzdWx0aW5nIHZlY3Rvci4gSWYgb21taXR0ZWQsIGEgdW5pdCB2ZWN0b3Igd2lsbCBiZSByZXR1cm5lZFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByYW5kb20ob3V0LCBzY2FsZSkge1xuICBzY2FsZSA9IHNjYWxlIHx8IDEuMDsgLy8gTWFyc2FnbGlhLCBHZW9yZ2UuIENob29zaW5nIGEgUG9pbnQgZnJvbSB0aGUgU3VyZmFjZSBvZiBhXG4gIC8vIFNwaGVyZS4gQW5uLiBNYXRoLiBTdGF0aXN0LiA0MyAoMTk3MiksIG5vLiAyLCA2NDUtLTY0Ni5cbiAgLy8gaHR0cDovL3Byb2plY3RldWNsaWQub3JnL2V1Y2xpZC5hb21zLzExNzc2OTI2NDQ7XG5cbiAgdmFyIHYxLCB2MiwgdjMsIHY0O1xuICB2YXIgczEsIHMyO1xuXG4gIGRvIHtcbiAgICB2MSA9IGdsTWF0cml4LlJBTkRPTSgpICogMiAtIDE7XG4gICAgdjIgPSBnbE1hdHJpeC5SQU5ET00oKSAqIDIgLSAxO1xuICAgIHMxID0gdjEgKiB2MSArIHYyICogdjI7XG4gIH0gd2hpbGUgKHMxID49IDEpO1xuXG4gIGRvIHtcbiAgICB2MyA9IGdsTWF0cml4LlJBTkRPTSgpICogMiAtIDE7XG4gICAgdjQgPSBnbE1hdHJpeC5SQU5ET00oKSAqIDIgLSAxO1xuICAgIHMyID0gdjMgKiB2MyArIHY0ICogdjQ7XG4gIH0gd2hpbGUgKHMyID49IDEpO1xuXG4gIHZhciBkID0gTWF0aC5zcXJ0KCgxIC0gczEpIC8gczIpO1xuICBvdXRbMF0gPSBzY2FsZSAqIHYxO1xuICBvdXRbMV0gPSBzY2FsZSAqIHYyO1xuICBvdXRbMl0gPSBzY2FsZSAqIHYzICogZDtcbiAgb3V0WzNdID0gc2NhbGUgKiB2NCAqIGQ7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIHZlYzQgd2l0aCBhIG1hdDQuXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSB2ZWN0b3IgdG8gdHJhbnNmb3JtXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gbSBtYXRyaXggdG8gdHJhbnNmb3JtIHdpdGhcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtTWF0NChvdXQsIGEsIG0pIHtcbiAgdmFyIHggPSBhWzBdLFxuICAgICAgeSA9IGFbMV0sXG4gICAgICB6ID0gYVsyXSxcbiAgICAgIHcgPSBhWzNdO1xuICBvdXRbMF0gPSBtWzBdICogeCArIG1bNF0gKiB5ICsgbVs4XSAqIHogKyBtWzEyXSAqIHc7XG4gIG91dFsxXSA9IG1bMV0gKiB4ICsgbVs1XSAqIHkgKyBtWzldICogeiArIG1bMTNdICogdztcbiAgb3V0WzJdID0gbVsyXSAqIHggKyBtWzZdICogeSArIG1bMTBdICogeiArIG1bMTRdICogdztcbiAgb3V0WzNdID0gbVszXSAqIHggKyBtWzddICogeSArIG1bMTFdICogeiArIG1bMTVdICogdztcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgdmVjNCB3aXRoIGEgcXVhdFxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgdmVjdG9yIHRvIHRyYW5zZm9ybVxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IHEgcXVhdGVybmlvbiB0byB0cmFuc2Zvcm0gd2l0aFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1RdWF0KG91dCwgYSwgcSkge1xuICB2YXIgeCA9IGFbMF0sXG4gICAgICB5ID0gYVsxXSxcbiAgICAgIHogPSBhWzJdO1xuICB2YXIgcXggPSBxWzBdLFxuICAgICAgcXkgPSBxWzFdLFxuICAgICAgcXogPSBxWzJdLFxuICAgICAgcXcgPSBxWzNdOyAvLyBjYWxjdWxhdGUgcXVhdCAqIHZlY1xuXG4gIHZhciBpeCA9IHF3ICogeCArIHF5ICogeiAtIHF6ICogeTtcbiAgdmFyIGl5ID0gcXcgKiB5ICsgcXogKiB4IC0gcXggKiB6O1xuICB2YXIgaXogPSBxdyAqIHogKyBxeCAqIHkgLSBxeSAqIHg7XG4gIHZhciBpdyA9IC1xeCAqIHggLSBxeSAqIHkgLSBxeiAqIHo7IC8vIGNhbGN1bGF0ZSByZXN1bHQgKiBpbnZlcnNlIHF1YXRcblxuICBvdXRbMF0gPSBpeCAqIHF3ICsgaXcgKiAtcXggKyBpeSAqIC1xeiAtIGl6ICogLXF5O1xuICBvdXRbMV0gPSBpeSAqIHF3ICsgaXcgKiAtcXkgKyBpeiAqIC1xeCAtIGl4ICogLXF6O1xuICBvdXRbMl0gPSBpeiAqIHF3ICsgaXcgKiAtcXogKyBpeCAqIC1xeSAtIGl5ICogLXF4O1xuICBvdXRbM10gPSBhWzNdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTZXQgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWM0IHRvIHplcm9cbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB6ZXJvKG91dCkge1xuICBvdXRbMF0gPSAwLjA7XG4gIG91dFsxXSA9IDAuMDtcbiAgb3V0WzJdID0gMC4wO1xuICBvdXRbM10gPSAwLjA7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSB2ZWN0b3JcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB2ZWN0b3IgdG8gcmVwcmVzZW50IGFzIGEgc3RyaW5nXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHZlY3RvclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzdHIoYSkge1xuICByZXR1cm4gXCJ2ZWM0KFwiICsgYVswXSArIFwiLCBcIiArIGFbMV0gKyBcIiwgXCIgKyBhWzJdICsgXCIsIFwiICsgYVszXSArIFwiKVwiO1xufVxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSB2ZWN0b3JzIGhhdmUgZXhhY3RseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbiAod2hlbiBjb21wYXJlZCB3aXRoID09PSlcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSBUaGUgZmlyc3QgdmVjdG9yLlxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgVGhlIHNlY29uZCB2ZWN0b3IuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmVjdG9ycyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXhhY3RFcXVhbHMoYSwgYikge1xuICByZXR1cm4gYVswXSA9PT0gYlswXSAmJiBhWzFdID09PSBiWzFdICYmIGFbMl0gPT09IGJbMl0gJiYgYVszXSA9PT0gYlszXTtcbn1cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgdmVjdG9ycyBoYXZlIGFwcHJveGltYXRlbHkgdGhlIHNhbWUgZWxlbWVudHMgaW4gdGhlIHNhbWUgcG9zaXRpb24uXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgVGhlIGZpcnN0IHZlY3Rvci5cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBiIFRoZSBzZWNvbmQgdmVjdG9yLlxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhlIHZlY3RvcnMgYXJlIGVxdWFsLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGVxdWFscyhhLCBiKSB7XG4gIHZhciBhMCA9IGFbMF0sXG4gICAgICBhMSA9IGFbMV0sXG4gICAgICBhMiA9IGFbMl0sXG4gICAgICBhMyA9IGFbM107XG4gIHZhciBiMCA9IGJbMF0sXG4gICAgICBiMSA9IGJbMV0sXG4gICAgICBiMiA9IGJbMl0sXG4gICAgICBiMyA9IGJbM107XG4gIHJldHVybiBNYXRoLmFicyhhMCAtIGIwKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMCksIE1hdGguYWJzKGIwKSkgJiYgTWF0aC5hYnMoYTEgLSBiMSkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTEpLCBNYXRoLmFicyhiMSkpICYmIE1hdGguYWJzKGEyIC0gYjIpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEyKSwgTWF0aC5hYnMoYjIpKSAmJiBNYXRoLmFicyhhMyAtIGIzKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMyksIE1hdGguYWJzKGIzKSk7XG59XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjNC5zdWJ0cmFjdH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgc3ViID0gc3VidHJhY3Q7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjNC5tdWx0aXBseX1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgbXVsID0gbXVsdGlwbHk7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjNC5kaXZpZGV9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGRpdiA9IGRpdmlkZTtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWM0LmRpc3RhbmNlfVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBkaXN0ID0gZGlzdGFuY2U7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjNC5zcXVhcmVkRGlzdGFuY2V9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHNxckRpc3QgPSBzcXVhcmVkRGlzdGFuY2U7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjNC5sZW5ndGh9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGxlbiA9IGxlbmd0aDtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWM0LnNxdWFyZWRMZW5ndGh9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHNxckxlbiA9IHNxdWFyZWRMZW5ndGg7XG4vKipcbiAqIFBlcmZvcm0gc29tZSBvcGVyYXRpb24gb3ZlciBhbiBhcnJheSBvZiB2ZWM0cy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhIHRoZSBhcnJheSBvZiB2ZWN0b3JzIHRvIGl0ZXJhdGUgb3ZlclxuICogQHBhcmFtIHtOdW1iZXJ9IHN0cmlkZSBOdW1iZXIgb2YgZWxlbWVudHMgYmV0d2VlbiB0aGUgc3RhcnQgb2YgZWFjaCB2ZWM0LiBJZiAwIGFzc3VtZXMgdGlnaHRseSBwYWNrZWRcbiAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQgTnVtYmVyIG9mIGVsZW1lbnRzIHRvIHNraXAgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgYXJyYXlcbiAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudCBOdW1iZXIgb2YgdmVjNHMgdG8gaXRlcmF0ZSBvdmVyLiBJZiAwIGl0ZXJhdGVzIG92ZXIgZW50aXJlIGFycmF5XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBGdW5jdGlvbiB0byBjYWxsIGZvciBlYWNoIHZlY3RvciBpbiB0aGUgYXJyYXlcbiAqIEBwYXJhbSB7T2JqZWN0fSBbYXJnXSBhZGRpdGlvbmFsIGFyZ3VtZW50IHRvIHBhc3MgdG8gZm5cbiAqIEByZXR1cm5zIHtBcnJheX0gYVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBmb3JFYWNoID0gZnVuY3Rpb24gKCkge1xuICB2YXIgdmVjID0gY3JlYXRlKCk7XG4gIHJldHVybiBmdW5jdGlvbiAoYSwgc3RyaWRlLCBvZmZzZXQsIGNvdW50LCBmbiwgYXJnKSB7XG4gICAgdmFyIGksIGw7XG5cbiAgICBpZiAoIXN0cmlkZSkge1xuICAgICAgc3RyaWRlID0gNDtcbiAgICB9XG5cbiAgICBpZiAoIW9mZnNldCkge1xuICAgICAgb2Zmc2V0ID0gMDtcbiAgICB9XG5cbiAgICBpZiAoY291bnQpIHtcbiAgICAgIGwgPSBNYXRoLm1pbihjb3VudCAqIHN0cmlkZSArIG9mZnNldCwgYS5sZW5ndGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsID0gYS5sZW5ndGg7XG4gICAgfVxuXG4gICAgZm9yIChpID0gb2Zmc2V0OyBpIDwgbDsgaSArPSBzdHJpZGUpIHtcbiAgICAgIHZlY1swXSA9IGFbaV07XG4gICAgICB2ZWNbMV0gPSBhW2kgKyAxXTtcbiAgICAgIHZlY1syXSA9IGFbaSArIDJdO1xuICAgICAgdmVjWzNdID0gYVtpICsgM107XG4gICAgICBmbih2ZWMsIHZlYywgYXJnKTtcbiAgICAgIGFbaV0gPSB2ZWNbMF07XG4gICAgICBhW2kgKyAxXSA9IHZlY1sxXTtcbiAgICAgIGFbaSArIDJdID0gdmVjWzJdO1xuICAgICAgYVtpICsgM10gPSB2ZWNbM107XG4gICAgfVxuXG4gICAgcmV0dXJuIGE7XG4gIH07XG59KCk7IiwgImltcG9ydCAqIGFzIGdsTWF0cml4IGZyb20gXCIuL2NvbW1vbi5qc1wiO1xuaW1wb3J0ICogYXMgcXVhdCBmcm9tIFwiLi9xdWF0LmpzXCI7XG5pbXBvcnQgKiBhcyBtYXQ0IGZyb20gXCIuL21hdDQuanNcIjtcbi8qKlxuICogRHVhbCBRdWF0ZXJuaW9uPGJyPlxuICogRm9ybWF0OiBbcmVhbCwgZHVhbF08YnI+XG4gKiBRdWF0ZXJuaW9uIGZvcm1hdDogWFlaVzxicj5cbiAqIE1ha2Ugc3VyZSB0byBoYXZlIG5vcm1hbGl6ZWQgZHVhbCBxdWF0ZXJuaW9ucywgb3RoZXJ3aXNlIHRoZSBmdW5jdGlvbnMgbWF5IG5vdCB3b3JrIGFzIGludGVuZGVkLjxicj5cbiAqIEBtb2R1bGUgcXVhdDJcbiAqL1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgaWRlbnRpdHkgZHVhbCBxdWF0XG4gKlxuICogQHJldHVybnMge3F1YXQyfSBhIG5ldyBkdWFsIHF1YXRlcm5pb24gW3JlYWwgLT4gcm90YXRpb24sIGR1YWwgLT4gdHJhbnNsYXRpb25dXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgdmFyIGRxID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoOCk7XG5cbiAgaWYgKGdsTWF0cml4LkFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgZHFbMF0gPSAwO1xuICAgIGRxWzFdID0gMDtcbiAgICBkcVsyXSA9IDA7XG4gICAgZHFbNF0gPSAwO1xuICAgIGRxWzVdID0gMDtcbiAgICBkcVs2XSA9IDA7XG4gICAgZHFbN10gPSAwO1xuICB9XG5cbiAgZHFbM10gPSAxO1xuICByZXR1cm4gZHE7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgcXVhdCBpbml0aWFsaXplZCB3aXRoIHZhbHVlcyBmcm9tIGFuIGV4aXN0aW5nIHF1YXRlcm5pb25cbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgZHVhbCBxdWF0ZXJuaW9uIHRvIGNsb25lXG4gKiBAcmV0dXJucyB7cXVhdDJ9IG5ldyBkdWFsIHF1YXRlcm5pb25cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZShhKSB7XG4gIHZhciBkcSA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDgpO1xuICBkcVswXSA9IGFbMF07XG4gIGRxWzFdID0gYVsxXTtcbiAgZHFbMl0gPSBhWzJdO1xuICBkcVszXSA9IGFbM107XG4gIGRxWzRdID0gYVs0XTtcbiAgZHFbNV0gPSBhWzVdO1xuICBkcVs2XSA9IGFbNl07XG4gIGRxWzddID0gYVs3XTtcbiAgcmV0dXJuIGRxO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGR1YWwgcXVhdCBpbml0aWFsaXplZCB3aXRoIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0geDEgWCBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB5MSBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHoxIFogY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0gdzEgVyBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB4MiBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkyIFkgY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0gejIgWiBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB3MiBXIGNvbXBvbmVudFxuICogQHJldHVybnMge3F1YXQyfSBuZXcgZHVhbCBxdWF0ZXJuaW9uXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVZhbHVlcyh4MSwgeTEsIHoxLCB3MSwgeDIsIHkyLCB6MiwgdzIpIHtcbiAgdmFyIGRxID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoOCk7XG4gIGRxWzBdID0geDE7XG4gIGRxWzFdID0geTE7XG4gIGRxWzJdID0gejE7XG4gIGRxWzNdID0gdzE7XG4gIGRxWzRdID0geDI7XG4gIGRxWzVdID0geTI7XG4gIGRxWzZdID0gejI7XG4gIGRxWzddID0gdzI7XG4gIHJldHVybiBkcTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBkdWFsIHF1YXQgZnJvbSB0aGUgZ2l2ZW4gdmFsdWVzIChxdWF0IGFuZCB0cmFuc2xhdGlvbilcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0geDEgWCBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB5MSBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHoxIFogY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0gdzEgVyBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB4MiBYIGNvbXBvbmVudCAodHJhbnNsYXRpb24pXG4gKiBAcGFyYW0ge051bWJlcn0geTIgWSBjb21wb25lbnQgKHRyYW5zbGF0aW9uKVxuICogQHBhcmFtIHtOdW1iZXJ9IHoyIFogY29tcG9uZW50ICh0cmFuc2xhdGlvbilcbiAqIEByZXR1cm5zIHtxdWF0Mn0gbmV3IGR1YWwgcXVhdGVybmlvblxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21Sb3RhdGlvblRyYW5zbGF0aW9uVmFsdWVzKHgxLCB5MSwgejEsIHcxLCB4MiwgeTIsIHoyKSB7XG4gIHZhciBkcSA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDgpO1xuICBkcVswXSA9IHgxO1xuICBkcVsxXSA9IHkxO1xuICBkcVsyXSA9IHoxO1xuICBkcVszXSA9IHcxO1xuICB2YXIgYXggPSB4MiAqIDAuNSxcbiAgICAgIGF5ID0geTIgKiAwLjUsXG4gICAgICBheiA9IHoyICogMC41O1xuICBkcVs0XSA9IGF4ICogdzEgKyBheSAqIHoxIC0gYXogKiB5MTtcbiAgZHFbNV0gPSBheSAqIHcxICsgYXogKiB4MSAtIGF4ICogejE7XG4gIGRxWzZdID0gYXogKiB3MSArIGF4ICogeTEgLSBheSAqIHgxO1xuICBkcVs3XSA9IC1heCAqIHgxIC0gYXkgKiB5MSAtIGF6ICogejE7XG4gIHJldHVybiBkcTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIGR1YWwgcXVhdCBmcm9tIGEgcXVhdGVybmlvbiBhbmQgYSB0cmFuc2xhdGlvblxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gZHVhbCBxdWF0ZXJuaW9uIHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gcSBhIG5vcm1hbGl6ZWQgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHQgdHJhbmxhdGlvbiB2ZWN0b3JcbiAqIEByZXR1cm5zIHtxdWF0Mn0gZHVhbCBxdWF0ZXJuaW9uIHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVJvdGF0aW9uVHJhbnNsYXRpb24ob3V0LCBxLCB0KSB7XG4gIHZhciBheCA9IHRbMF0gKiAwLjUsXG4gICAgICBheSA9IHRbMV0gKiAwLjUsXG4gICAgICBheiA9IHRbMl0gKiAwLjUsXG4gICAgICBieCA9IHFbMF0sXG4gICAgICBieSA9IHFbMV0sXG4gICAgICBieiA9IHFbMl0sXG4gICAgICBidyA9IHFbM107XG4gIG91dFswXSA9IGJ4O1xuICBvdXRbMV0gPSBieTtcbiAgb3V0WzJdID0gYno7XG4gIG91dFszXSA9IGJ3O1xuICBvdXRbNF0gPSBheCAqIGJ3ICsgYXkgKiBieiAtIGF6ICogYnk7XG4gIG91dFs1XSA9IGF5ICogYncgKyBheiAqIGJ4IC0gYXggKiBiejtcbiAgb3V0WzZdID0gYXogKiBidyArIGF4ICogYnkgLSBheSAqIGJ4O1xuICBvdXRbN10gPSAtYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgZHVhbCBxdWF0IGZyb20gYSB0cmFuc2xhdGlvblxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gZHVhbCBxdWF0ZXJuaW9uIHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdCB0cmFuc2xhdGlvbiB2ZWN0b3JcbiAqIEByZXR1cm5zIHtxdWF0Mn0gZHVhbCBxdWF0ZXJuaW9uIHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVRyYW5zbGF0aW9uKG91dCwgdCkge1xuICBvdXRbMF0gPSAwO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAxO1xuICBvdXRbNF0gPSB0WzBdICogMC41O1xuICBvdXRbNV0gPSB0WzFdICogMC41O1xuICBvdXRbNl0gPSB0WzJdICogMC41O1xuICBvdXRbN10gPSAwO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgZHVhbCBxdWF0IGZyb20gYSBxdWF0ZXJuaW9uXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBkdWFsIHF1YXRlcm5pb24gcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBxIHRoZSBxdWF0ZXJuaW9uXG4gKiBAcmV0dXJucyB7cXVhdDJ9IGR1YWwgcXVhdGVybmlvbiByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21Sb3RhdGlvbihvdXQsIHEpIHtcbiAgb3V0WzBdID0gcVswXTtcbiAgb3V0WzFdID0gcVsxXTtcbiAgb3V0WzJdID0gcVsyXTtcbiAgb3V0WzNdID0gcVszXTtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gMDtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBkdWFsIHF1YXQgZnJvbSBhIG1hdHJpeCAoNHg0KVxuICpcbiAqIEBwYXJhbSB7cXVhdDJ9IG91dCB0aGUgZHVhbCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgbWF0cml4XG4gKiBAcmV0dXJucyB7cXVhdDJ9IGR1YWwgcXVhdCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21NYXQ0KG91dCwgYSkge1xuICAvL1RPRE8gT3B0aW1pemUgdGhpc1xuICB2YXIgb3V0ZXIgPSBxdWF0LmNyZWF0ZSgpO1xuICBtYXQ0LmdldFJvdGF0aW9uKG91dGVyLCBhKTtcbiAgdmFyIHQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSgzKTtcbiAgbWF0NC5nZXRUcmFuc2xhdGlvbih0LCBhKTtcbiAgZnJvbVJvdGF0aW9uVHJhbnNsYXRpb24ob3V0LCBvdXRlciwgdCk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENvcHkgdGhlIHZhbHVlcyBmcm9tIG9uZSBkdWFsIHF1YXQgdG8gYW5vdGhlclxuICpcbiAqIEBwYXJhbSB7cXVhdDJ9IG91dCB0aGUgcmVjZWl2aW5nIGR1YWwgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIHRoZSBzb3VyY2UgZHVhbCBxdWF0ZXJuaW9uXG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNvcHkob3V0LCBhKSB7XG4gIG91dFswXSA9IGFbMF07XG4gIG91dFsxXSA9IGFbMV07XG4gIG91dFsyXSA9IGFbMl07XG4gIG91dFszXSA9IGFbM107XG4gIG91dFs0XSA9IGFbNF07XG4gIG91dFs1XSA9IGFbNV07XG4gIG91dFs2XSA9IGFbNl07XG4gIG91dFs3XSA9IGFbN107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFNldCBhIGR1YWwgcXVhdCB0byB0aGUgaWRlbnRpdHkgZHVhbCBxdWF0ZXJuaW9uXG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHJldHVybnMge3F1YXQyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaWRlbnRpdHkob3V0KSB7XG4gIG91dFswXSA9IDA7XG4gIG91dFsxXSA9IDA7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDE7XG4gIG91dFs0XSA9IDA7XG4gIG91dFs1XSA9IDA7XG4gIG91dFs2XSA9IDA7XG4gIG91dFs3XSA9IDA7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFNldCB0aGUgY29tcG9uZW50cyBvZiBhIGR1YWwgcXVhdCB0byB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtOdW1iZXJ9IHgxIFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geTEgWSBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB6MSBaIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHcxIFcgY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geDIgWCBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB5MiBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHoyIFogY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0gdzIgVyBjb21wb25lbnRcbiAqIEByZXR1cm5zIHtxdWF0Mn0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0KG91dCwgeDEsIHkxLCB6MSwgdzEsIHgyLCB5MiwgejIsIHcyKSB7XG4gIG91dFswXSA9IHgxO1xuICBvdXRbMV0gPSB5MTtcbiAgb3V0WzJdID0gejE7XG4gIG91dFszXSA9IHcxO1xuICBvdXRbNF0gPSB4MjtcbiAgb3V0WzVdID0geTI7XG4gIG91dFs2XSA9IHoyO1xuICBvdXRbN10gPSB3MjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogR2V0cyB0aGUgcmVhbCBwYXJ0IG9mIGEgZHVhbCBxdWF0XG4gKiBAcGFyYW0gIHtxdWF0fSBvdXQgcmVhbCBwYXJ0XG4gKiBAcGFyYW0gIHtSZWFkb25seVF1YXQyfSBhIER1YWwgUXVhdGVybmlvblxuICogQHJldHVybiB7cXVhdH0gcmVhbCBwYXJ0XG4gKi9cblxuZXhwb3J0IHZhciBnZXRSZWFsID0gcXVhdC5jb3B5O1xuLyoqXG4gKiBHZXRzIHRoZSBkdWFsIHBhcnQgb2YgYSBkdWFsIHF1YXRcbiAqIEBwYXJhbSAge3F1YXR9IG91dCBkdWFsIHBhcnRcbiAqIEBwYXJhbSAge1JlYWRvbmx5UXVhdDJ9IGEgRHVhbCBRdWF0ZXJuaW9uXG4gKiBAcmV0dXJuIHtxdWF0fSBkdWFsIHBhcnRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RHVhbChvdXQsIGEpIHtcbiAgb3V0WzBdID0gYVs0XTtcbiAgb3V0WzFdID0gYVs1XTtcbiAgb3V0WzJdID0gYVs2XTtcbiAgb3V0WzNdID0gYVs3XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2V0IHRoZSByZWFsIGNvbXBvbmVudCBvZiBhIGR1YWwgcXVhdCB0byB0aGUgZ2l2ZW4gcXVhdGVybmlvblxuICpcbiAqIEBwYXJhbSB7cXVhdDJ9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBxIGEgcXVhdGVybmlvbiByZXByZXNlbnRpbmcgdGhlIHJlYWwgcGFydFxuICogQHJldHVybnMge3F1YXQyfSBvdXRcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgc2V0UmVhbCA9IHF1YXQuY29weTtcbi8qKlxuICogU2V0IHRoZSBkdWFsIGNvbXBvbmVudCBvZiBhIGR1YWwgcXVhdCB0byB0aGUgZ2l2ZW4gcXVhdGVybmlvblxuICpcbiAqIEBwYXJhbSB7cXVhdDJ9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBxIGEgcXVhdGVybmlvbiByZXByZXNlbnRpbmcgdGhlIGR1YWwgcGFydFxuICogQHJldHVybnMge3F1YXQyfSBvdXRcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXREdWFsKG91dCwgcSkge1xuICBvdXRbNF0gPSBxWzBdO1xuICBvdXRbNV0gPSBxWzFdO1xuICBvdXRbNl0gPSBxWzJdO1xuICBvdXRbN10gPSBxWzNdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZXRzIHRoZSB0cmFuc2xhdGlvbiBvZiBhIG5vcm1hbGl6ZWQgZHVhbCBxdWF0XG4gKiBAcGFyYW0gIHt2ZWMzfSBvdXQgdHJhbnNsYXRpb25cbiAqIEBwYXJhbSAge1JlYWRvbmx5UXVhdDJ9IGEgRHVhbCBRdWF0ZXJuaW9uIHRvIGJlIGRlY29tcG9zZWRcbiAqIEByZXR1cm4ge3ZlYzN9IHRyYW5zbGF0aW9uXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRyYW5zbGF0aW9uKG91dCwgYSkge1xuICB2YXIgYXggPSBhWzRdLFxuICAgICAgYXkgPSBhWzVdLFxuICAgICAgYXogPSBhWzZdLFxuICAgICAgYXcgPSBhWzddLFxuICAgICAgYnggPSAtYVswXSxcbiAgICAgIGJ5ID0gLWFbMV0sXG4gICAgICBieiA9IC1hWzJdLFxuICAgICAgYncgPSBhWzNdO1xuICBvdXRbMF0gPSAoYXggKiBidyArIGF3ICogYnggKyBheSAqIGJ6IC0gYXogKiBieSkgKiAyO1xuICBvdXRbMV0gPSAoYXkgKiBidyArIGF3ICogYnkgKyBheiAqIGJ4IC0gYXggKiBieikgKiAyO1xuICBvdXRbMl0gPSAoYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieCkgKiAyO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBUcmFuc2xhdGVzIGEgZHVhbCBxdWF0IGJ5IHRoZSBnaXZlbiB2ZWN0b3JcbiAqXG4gKiBAcGFyYW0ge3F1YXQyfSBvdXQgdGhlIHJlY2VpdmluZyBkdWFsIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSB0aGUgZHVhbCBxdWF0ZXJuaW9uIHRvIHRyYW5zbGF0ZVxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHYgdmVjdG9yIHRvIHRyYW5zbGF0ZSBieVxuICogQHJldHVybnMge3F1YXQyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNsYXRlKG91dCwgYSwgdikge1xuICB2YXIgYXgxID0gYVswXSxcbiAgICAgIGF5MSA9IGFbMV0sXG4gICAgICBhejEgPSBhWzJdLFxuICAgICAgYXcxID0gYVszXSxcbiAgICAgIGJ4MSA9IHZbMF0gKiAwLjUsXG4gICAgICBieTEgPSB2WzFdICogMC41LFxuICAgICAgYnoxID0gdlsyXSAqIDAuNSxcbiAgICAgIGF4MiA9IGFbNF0sXG4gICAgICBheTIgPSBhWzVdLFxuICAgICAgYXoyID0gYVs2XSxcbiAgICAgIGF3MiA9IGFbN107XG4gIG91dFswXSA9IGF4MTtcbiAgb3V0WzFdID0gYXkxO1xuICBvdXRbMl0gPSBhejE7XG4gIG91dFszXSA9IGF3MTtcbiAgb3V0WzRdID0gYXcxICogYngxICsgYXkxICogYnoxIC0gYXoxICogYnkxICsgYXgyO1xuICBvdXRbNV0gPSBhdzEgKiBieTEgKyBhejEgKiBieDEgLSBheDEgKiBiejEgKyBheTI7XG4gIG91dFs2XSA9IGF3MSAqIGJ6MSArIGF4MSAqIGJ5MSAtIGF5MSAqIGJ4MSArIGF6MjtcbiAgb3V0WzddID0gLWF4MSAqIGJ4MSAtIGF5MSAqIGJ5MSAtIGF6MSAqIGJ6MSArIGF3MjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlcyBhIGR1YWwgcXVhdCBhcm91bmQgdGhlIFggYXhpc1xuICpcbiAqIEBwYXJhbSB7cXVhdDJ9IG91dCB0aGUgcmVjZWl2aW5nIGR1YWwgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIHRoZSBkdWFsIHF1YXRlcm5pb24gdG8gcm90YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkIGhvdyBmYXIgc2hvdWxkIHRoZSByb3RhdGlvbiBiZVxuICogQHJldHVybnMge3F1YXQyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlWChvdXQsIGEsIHJhZCkge1xuICB2YXIgYnggPSAtYVswXSxcbiAgICAgIGJ5ID0gLWFbMV0sXG4gICAgICBieiA9IC1hWzJdLFxuICAgICAgYncgPSBhWzNdLFxuICAgICAgYXggPSBhWzRdLFxuICAgICAgYXkgPSBhWzVdLFxuICAgICAgYXogPSBhWzZdLFxuICAgICAgYXcgPSBhWzddLFxuICAgICAgYXgxID0gYXggKiBidyArIGF3ICogYnggKyBheSAqIGJ6IC0gYXogKiBieSxcbiAgICAgIGF5MSA9IGF5ICogYncgKyBhdyAqIGJ5ICsgYXogKiBieCAtIGF4ICogYnosXG4gICAgICBhejEgPSBheiAqIGJ3ICsgYXcgKiBieiArIGF4ICogYnkgLSBheSAqIGJ4LFxuICAgICAgYXcxID0gYXcgKiBidyAtIGF4ICogYnggLSBheSAqIGJ5IC0gYXogKiBiejtcbiAgcXVhdC5yb3RhdGVYKG91dCwgYSwgcmFkKTtcbiAgYnggPSBvdXRbMF07XG4gIGJ5ID0gb3V0WzFdO1xuICBieiA9IG91dFsyXTtcbiAgYncgPSBvdXRbM107XG4gIG91dFs0XSA9IGF4MSAqIGJ3ICsgYXcxICogYnggKyBheTEgKiBieiAtIGF6MSAqIGJ5O1xuICBvdXRbNV0gPSBheTEgKiBidyArIGF3MSAqIGJ5ICsgYXoxICogYnggLSBheDEgKiBiejtcbiAgb3V0WzZdID0gYXoxICogYncgKyBhdzEgKiBieiArIGF4MSAqIGJ5IC0gYXkxICogYng7XG4gIG91dFs3XSA9IGF3MSAqIGJ3IC0gYXgxICogYnggLSBheTEgKiBieSAtIGF6MSAqIGJ6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGVzIGEgZHVhbCBxdWF0IGFyb3VuZCB0aGUgWSBheGlzXG4gKlxuICogQHBhcmFtIHtxdWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgZHVhbCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgdGhlIGR1YWwgcXVhdGVybmlvbiB0byByb3RhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWQgaG93IGZhciBzaG91bGQgdGhlIHJvdGF0aW9uIGJlXG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVZKG91dCwgYSwgcmFkKSB7XG4gIHZhciBieCA9IC1hWzBdLFxuICAgICAgYnkgPSAtYVsxXSxcbiAgICAgIGJ6ID0gLWFbMl0sXG4gICAgICBidyA9IGFbM10sXG4gICAgICBheCA9IGFbNF0sXG4gICAgICBheSA9IGFbNV0sXG4gICAgICBheiA9IGFbNl0sXG4gICAgICBhdyA9IGFbN10sXG4gICAgICBheDEgPSBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5LFxuICAgICAgYXkxID0gYXkgKiBidyArIGF3ICogYnkgKyBheiAqIGJ4IC0gYXggKiBieixcbiAgICAgIGF6MSA9IGF6ICogYncgKyBhdyAqIGJ6ICsgYXggKiBieSAtIGF5ICogYngsXG4gICAgICBhdzEgPSBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6O1xuICBxdWF0LnJvdGF0ZVkob3V0LCBhLCByYWQpO1xuICBieCA9IG91dFswXTtcbiAgYnkgPSBvdXRbMV07XG4gIGJ6ID0gb3V0WzJdO1xuICBidyA9IG91dFszXTtcbiAgb3V0WzRdID0gYXgxICogYncgKyBhdzEgKiBieCArIGF5MSAqIGJ6IC0gYXoxICogYnk7XG4gIG91dFs1XSA9IGF5MSAqIGJ3ICsgYXcxICogYnkgKyBhejEgKiBieCAtIGF4MSAqIGJ6O1xuICBvdXRbNl0gPSBhejEgKiBidyArIGF3MSAqIGJ6ICsgYXgxICogYnkgLSBheTEgKiBieDtcbiAgb3V0WzddID0gYXcxICogYncgLSBheDEgKiBieCAtIGF5MSAqIGJ5IC0gYXoxICogYno7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZXMgYSBkdWFsIHF1YXQgYXJvdW5kIHRoZSBaIGF4aXNcbiAqXG4gKiBAcGFyYW0ge3F1YXQyfSBvdXQgdGhlIHJlY2VpdmluZyBkdWFsIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSB0aGUgZHVhbCBxdWF0ZXJuaW9uIHRvIHJvdGF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IHJhZCBob3cgZmFyIHNob3VsZCB0aGUgcm90YXRpb24gYmVcbiAqIEByZXR1cm5zIHtxdWF0Mn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVoob3V0LCBhLCByYWQpIHtcbiAgdmFyIGJ4ID0gLWFbMF0sXG4gICAgICBieSA9IC1hWzFdLFxuICAgICAgYnogPSAtYVsyXSxcbiAgICAgIGJ3ID0gYVszXSxcbiAgICAgIGF4ID0gYVs0XSxcbiAgICAgIGF5ID0gYVs1XSxcbiAgICAgIGF6ID0gYVs2XSxcbiAgICAgIGF3ID0gYVs3XSxcbiAgICAgIGF4MSA9IGF4ICogYncgKyBhdyAqIGJ4ICsgYXkgKiBieiAtIGF6ICogYnksXG4gICAgICBheTEgPSBheSAqIGJ3ICsgYXcgKiBieSArIGF6ICogYnggLSBheCAqIGJ6LFxuICAgICAgYXoxID0gYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieCxcbiAgICAgIGF3MSA9IGF3ICogYncgLSBheCAqIGJ4IC0gYXkgKiBieSAtIGF6ICogYno7XG4gIHF1YXQucm90YXRlWihvdXQsIGEsIHJhZCk7XG4gIGJ4ID0gb3V0WzBdO1xuICBieSA9IG91dFsxXTtcbiAgYnogPSBvdXRbMl07XG4gIGJ3ID0gb3V0WzNdO1xuICBvdXRbNF0gPSBheDEgKiBidyArIGF3MSAqIGJ4ICsgYXkxICogYnogLSBhejEgKiBieTtcbiAgb3V0WzVdID0gYXkxICogYncgKyBhdzEgKiBieSArIGF6MSAqIGJ4IC0gYXgxICogYno7XG4gIG91dFs2XSA9IGF6MSAqIGJ3ICsgYXcxICogYnogKyBheDEgKiBieSAtIGF5MSAqIGJ4O1xuICBvdXRbN10gPSBhdzEgKiBidyAtIGF4MSAqIGJ4IC0gYXkxICogYnkgLSBhejEgKiBiejtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlcyBhIGR1YWwgcXVhdCBieSBhIGdpdmVuIHF1YXRlcm5pb24gKGEgKiBxKVxuICpcbiAqIEBwYXJhbSB7cXVhdDJ9IG91dCB0aGUgcmVjZWl2aW5nIGR1YWwgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIHRoZSBkdWFsIHF1YXRlcm5pb24gdG8gcm90YXRlXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gcSBxdWF0ZXJuaW9uIHRvIHJvdGF0ZSBieVxuICogQHJldHVybnMge3F1YXQyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlQnlRdWF0QXBwZW5kKG91dCwgYSwgcSkge1xuICB2YXIgcXggPSBxWzBdLFxuICAgICAgcXkgPSBxWzFdLFxuICAgICAgcXogPSBxWzJdLFxuICAgICAgcXcgPSBxWzNdLFxuICAgICAgYXggPSBhWzBdLFxuICAgICAgYXkgPSBhWzFdLFxuICAgICAgYXogPSBhWzJdLFxuICAgICAgYXcgPSBhWzNdO1xuICBvdXRbMF0gPSBheCAqIHF3ICsgYXcgKiBxeCArIGF5ICogcXogLSBheiAqIHF5O1xuICBvdXRbMV0gPSBheSAqIHF3ICsgYXcgKiBxeSArIGF6ICogcXggLSBheCAqIHF6O1xuICBvdXRbMl0gPSBheiAqIHF3ICsgYXcgKiBxeiArIGF4ICogcXkgLSBheSAqIHF4O1xuICBvdXRbM10gPSBhdyAqIHF3IC0gYXggKiBxeCAtIGF5ICogcXkgLSBheiAqIHF6O1xuICBheCA9IGFbNF07XG4gIGF5ID0gYVs1XTtcbiAgYXogPSBhWzZdO1xuICBhdyA9IGFbN107XG4gIG91dFs0XSA9IGF4ICogcXcgKyBhdyAqIHF4ICsgYXkgKiBxeiAtIGF6ICogcXk7XG4gIG91dFs1XSA9IGF5ICogcXcgKyBhdyAqIHF5ICsgYXogKiBxeCAtIGF4ICogcXo7XG4gIG91dFs2XSA9IGF6ICogcXcgKyBhdyAqIHF6ICsgYXggKiBxeSAtIGF5ICogcXg7XG4gIG91dFs3XSA9IGF3ICogcXcgLSBheCAqIHF4IC0gYXkgKiBxeSAtIGF6ICogcXo7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZXMgYSBkdWFsIHF1YXQgYnkgYSBnaXZlbiBxdWF0ZXJuaW9uIChxICogYSlcbiAqXG4gKiBAcGFyYW0ge3F1YXQyfSBvdXQgdGhlIHJlY2VpdmluZyBkdWFsIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBxIHF1YXRlcm5pb24gdG8gcm90YXRlIGJ5XG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgdGhlIGR1YWwgcXVhdGVybmlvbiB0byByb3RhdGVcbiAqIEByZXR1cm5zIHtxdWF0Mn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZUJ5UXVhdFByZXBlbmQob3V0LCBxLCBhKSB7XG4gIHZhciBxeCA9IHFbMF0sXG4gICAgICBxeSA9IHFbMV0sXG4gICAgICBxeiA9IHFbMl0sXG4gICAgICBxdyA9IHFbM10sXG4gICAgICBieCA9IGFbMF0sXG4gICAgICBieSA9IGFbMV0sXG4gICAgICBieiA9IGFbMl0sXG4gICAgICBidyA9IGFbM107XG4gIG91dFswXSA9IHF4ICogYncgKyBxdyAqIGJ4ICsgcXkgKiBieiAtIHF6ICogYnk7XG4gIG91dFsxXSA9IHF5ICogYncgKyBxdyAqIGJ5ICsgcXogKiBieCAtIHF4ICogYno7XG4gIG91dFsyXSA9IHF6ICogYncgKyBxdyAqIGJ6ICsgcXggKiBieSAtIHF5ICogYng7XG4gIG91dFszXSA9IHF3ICogYncgLSBxeCAqIGJ4IC0gcXkgKiBieSAtIHF6ICogYno7XG4gIGJ4ID0gYVs0XTtcbiAgYnkgPSBhWzVdO1xuICBieiA9IGFbNl07XG4gIGJ3ID0gYVs3XTtcbiAgb3V0WzRdID0gcXggKiBidyArIHF3ICogYnggKyBxeSAqIGJ6IC0gcXogKiBieTtcbiAgb3V0WzVdID0gcXkgKiBidyArIHF3ICogYnkgKyBxeiAqIGJ4IC0gcXggKiBiejtcbiAgb3V0WzZdID0gcXogKiBidyArIHF3ICogYnogKyBxeCAqIGJ5IC0gcXkgKiBieDtcbiAgb3V0WzddID0gcXcgKiBidyAtIHF4ICogYnggLSBxeSAqIGJ5IC0gcXogKiBiejtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlcyBhIGR1YWwgcXVhdCBhcm91bmQgYSBnaXZlbiBheGlzLiBEb2VzIHRoZSBub3JtYWxpc2F0aW9uIGF1dG9tYXRpY2FsbHlcbiAqXG4gKiBAcGFyYW0ge3F1YXQyfSBvdXQgdGhlIHJlY2VpdmluZyBkdWFsIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSB0aGUgZHVhbCBxdWF0ZXJuaW9uIHRvIHJvdGF0ZVxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGF4aXMgdGhlIGF4aXMgdG8gcm90YXRlIGFyb3VuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCBob3cgZmFyIHRoZSByb3RhdGlvbiBzaG91bGQgYmVcbiAqIEByZXR1cm5zIHtxdWF0Mn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZUFyb3VuZEF4aXMob3V0LCBhLCBheGlzLCByYWQpIHtcbiAgLy9TcGVjaWFsIGNhc2UgZm9yIHJhZCA9IDBcbiAgaWYgKE1hdGguYWJzKHJhZCkgPCBnbE1hdHJpeC5FUFNJTE9OKSB7XG4gICAgcmV0dXJuIGNvcHkob3V0LCBhKTtcbiAgfVxuXG4gIHZhciBheGlzTGVuZ3RoID0gTWF0aC5oeXBvdChheGlzWzBdLCBheGlzWzFdLCBheGlzWzJdKTtcbiAgcmFkID0gcmFkICogMC41O1xuICB2YXIgcyA9IE1hdGguc2luKHJhZCk7XG4gIHZhciBieCA9IHMgKiBheGlzWzBdIC8gYXhpc0xlbmd0aDtcbiAgdmFyIGJ5ID0gcyAqIGF4aXNbMV0gLyBheGlzTGVuZ3RoO1xuICB2YXIgYnogPSBzICogYXhpc1syXSAvIGF4aXNMZW5ndGg7XG4gIHZhciBidyA9IE1hdGguY29zKHJhZCk7XG4gIHZhciBheDEgPSBhWzBdLFxuICAgICAgYXkxID0gYVsxXSxcbiAgICAgIGF6MSA9IGFbMl0sXG4gICAgICBhdzEgPSBhWzNdO1xuICBvdXRbMF0gPSBheDEgKiBidyArIGF3MSAqIGJ4ICsgYXkxICogYnogLSBhejEgKiBieTtcbiAgb3V0WzFdID0gYXkxICogYncgKyBhdzEgKiBieSArIGF6MSAqIGJ4IC0gYXgxICogYno7XG4gIG91dFsyXSA9IGF6MSAqIGJ3ICsgYXcxICogYnogKyBheDEgKiBieSAtIGF5MSAqIGJ4O1xuICBvdXRbM10gPSBhdzEgKiBidyAtIGF4MSAqIGJ4IC0gYXkxICogYnkgLSBhejEgKiBiejtcbiAgdmFyIGF4ID0gYVs0XSxcbiAgICAgIGF5ID0gYVs1XSxcbiAgICAgIGF6ID0gYVs2XSxcbiAgICAgIGF3ID0gYVs3XTtcbiAgb3V0WzRdID0gYXggKiBidyArIGF3ICogYnggKyBheSAqIGJ6IC0gYXogKiBieTtcbiAgb3V0WzVdID0gYXkgKiBidyArIGF3ICogYnkgKyBheiAqIGJ4IC0gYXggKiBiejtcbiAgb3V0WzZdID0gYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieDtcbiAgb3V0WzddID0gYXcgKiBidyAtIGF4ICogYnggLSBheSAqIGJ5IC0gYXogKiBiejtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQWRkcyB0d28gZHVhbCBxdWF0J3NcbiAqXG4gKiBAcGFyYW0ge3F1YXQyfSBvdXQgdGhlIHJlY2VpdmluZyBkdWFsIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3F1YXQyfSBvdXRcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGQob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gKyBiWzBdO1xuICBvdXRbMV0gPSBhWzFdICsgYlsxXTtcbiAgb3V0WzJdID0gYVsyXSArIGJbMl07XG4gIG91dFszXSA9IGFbM10gKyBiWzNdO1xuICBvdXRbNF0gPSBhWzRdICsgYls0XTtcbiAgb3V0WzVdID0gYVs1XSArIGJbNV07XG4gIG91dFs2XSA9IGFbNl0gKyBiWzZdO1xuICBvdXRbN10gPSBhWzddICsgYls3XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTXVsdGlwbGllcyB0d28gZHVhbCBxdWF0J3NcbiAqXG4gKiBAcGFyYW0ge3F1YXQyfSBvdXQgdGhlIHJlY2VpdmluZyBkdWFsIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3F1YXQyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlwbHkob3V0LCBhLCBiKSB7XG4gIHZhciBheDAgPSBhWzBdLFxuICAgICAgYXkwID0gYVsxXSxcbiAgICAgIGF6MCA9IGFbMl0sXG4gICAgICBhdzAgPSBhWzNdLFxuICAgICAgYngxID0gYls0XSxcbiAgICAgIGJ5MSA9IGJbNV0sXG4gICAgICBiejEgPSBiWzZdLFxuICAgICAgYncxID0gYls3XSxcbiAgICAgIGF4MSA9IGFbNF0sXG4gICAgICBheTEgPSBhWzVdLFxuICAgICAgYXoxID0gYVs2XSxcbiAgICAgIGF3MSA9IGFbN10sXG4gICAgICBieDAgPSBiWzBdLFxuICAgICAgYnkwID0gYlsxXSxcbiAgICAgIGJ6MCA9IGJbMl0sXG4gICAgICBidzAgPSBiWzNdO1xuICBvdXRbMF0gPSBheDAgKiBidzAgKyBhdzAgKiBieDAgKyBheTAgKiBiejAgLSBhejAgKiBieTA7XG4gIG91dFsxXSA9IGF5MCAqIGJ3MCArIGF3MCAqIGJ5MCArIGF6MCAqIGJ4MCAtIGF4MCAqIGJ6MDtcbiAgb3V0WzJdID0gYXowICogYncwICsgYXcwICogYnowICsgYXgwICogYnkwIC0gYXkwICogYngwO1xuICBvdXRbM10gPSBhdzAgKiBidzAgLSBheDAgKiBieDAgLSBheTAgKiBieTAgLSBhejAgKiBiejA7XG4gIG91dFs0XSA9IGF4MCAqIGJ3MSArIGF3MCAqIGJ4MSArIGF5MCAqIGJ6MSAtIGF6MCAqIGJ5MSArIGF4MSAqIGJ3MCArIGF3MSAqIGJ4MCArIGF5MSAqIGJ6MCAtIGF6MSAqIGJ5MDtcbiAgb3V0WzVdID0gYXkwICogYncxICsgYXcwICogYnkxICsgYXowICogYngxIC0gYXgwICogYnoxICsgYXkxICogYncwICsgYXcxICogYnkwICsgYXoxICogYngwIC0gYXgxICogYnowO1xuICBvdXRbNl0gPSBhejAgKiBidzEgKyBhdzAgKiBiejEgKyBheDAgKiBieTEgLSBheTAgKiBieDEgKyBhejEgKiBidzAgKyBhdzEgKiBiejAgKyBheDEgKiBieTAgLSBheTEgKiBieDA7XG4gIG91dFs3XSA9IGF3MCAqIGJ3MSAtIGF4MCAqIGJ4MSAtIGF5MCAqIGJ5MSAtIGF6MCAqIGJ6MSArIGF3MSAqIGJ3MCAtIGF4MSAqIGJ4MCAtIGF5MSAqIGJ5MCAtIGF6MSAqIGJ6MDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBxdWF0Mi5tdWx0aXBseX1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgbXVsID0gbXVsdGlwbHk7XG4vKipcbiAqIFNjYWxlcyBhIGR1YWwgcXVhdCBieSBhIHNjYWxhciBudW1iZXJcbiAqXG4gKiBAcGFyYW0ge3F1YXQyfSBvdXQgdGhlIHJlY2VpdmluZyBkdWFsIHF1YXRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSB0aGUgZHVhbCBxdWF0IHRvIHNjYWxlXG4gKiBAcGFyYW0ge051bWJlcn0gYiBhbW91bnQgdG8gc2NhbGUgdGhlIGR1YWwgcXVhdCBieVxuICogQHJldHVybnMge3F1YXQyfSBvdXRcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZShvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAqIGI7XG4gIG91dFsxXSA9IGFbMV0gKiBiO1xuICBvdXRbMl0gPSBhWzJdICogYjtcbiAgb3V0WzNdID0gYVszXSAqIGI7XG4gIG91dFs0XSA9IGFbNF0gKiBiO1xuICBvdXRbNV0gPSBhWzVdICogYjtcbiAgb3V0WzZdID0gYVs2XSAqIGI7XG4gIG91dFs3XSA9IGFbN10gKiBiO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBkb3QgcHJvZHVjdCBvZiB0d28gZHVhbCBxdWF0J3MgKFRoZSBkb3QgcHJvZHVjdCBvZiB0aGUgcmVhbCBwYXJ0cylcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGRvdCBwcm9kdWN0IG9mIGEgYW5kIGJcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgZG90ID0gcXVhdC5kb3Q7XG4vKipcbiAqIFBlcmZvcm1zIGEgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gZHVhbCBxdWF0cydzXG4gKiBOT1RFOiBUaGUgcmVzdWx0aW5nIGR1YWwgcXVhdGVybmlvbnMgd29uJ3QgYWx3YXlzIGJlIG5vcm1hbGl6ZWQgKFRoZSBlcnJvciBpcyBtb3N0IG5vdGljZWFibGUgd2hlbiB0ID0gMC41KVxuICpcbiAqIEBwYXJhbSB7cXVhdDJ9IG91dCB0aGUgcmVjZWl2aW5nIGR1YWwgcXVhdFxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gdCBpbnRlcnBvbGF0aW9uIGFtb3VudCwgaW4gdGhlIHJhbmdlIFswLTFdLCBiZXR3ZWVuIHRoZSB0d28gaW5wdXRzXG4gKiBAcmV0dXJucyB7cXVhdDJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsZXJwKG91dCwgYSwgYiwgdCkge1xuICB2YXIgbXQgPSAxIC0gdDtcbiAgaWYgKGRvdChhLCBiKSA8IDApIHQgPSAtdDtcbiAgb3V0WzBdID0gYVswXSAqIG10ICsgYlswXSAqIHQ7XG4gIG91dFsxXSA9IGFbMV0gKiBtdCArIGJbMV0gKiB0O1xuICBvdXRbMl0gPSBhWzJdICogbXQgKyBiWzJdICogdDtcbiAgb3V0WzNdID0gYVszXSAqIG10ICsgYlszXSAqIHQ7XG4gIG91dFs0XSA9IGFbNF0gKiBtdCArIGJbNF0gKiB0O1xuICBvdXRbNV0gPSBhWzVdICogbXQgKyBiWzVdICogdDtcbiAgb3V0WzZdID0gYVs2XSAqIG10ICsgYls2XSAqIHQ7XG4gIG91dFs3XSA9IGFbN10gKiBtdCArIGJbN10gKiB0O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBpbnZlcnNlIG9mIGEgZHVhbCBxdWF0LiBJZiB0aGV5IGFyZSBub3JtYWxpemVkLCBjb25qdWdhdGUgaXMgY2hlYXBlclxuICpcbiAqIEBwYXJhbSB7cXVhdDJ9IG91dCB0aGUgcmVjZWl2aW5nIGR1YWwgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIGR1YWwgcXVhdCB0byBjYWxjdWxhdGUgaW52ZXJzZSBvZlxuICogQHJldHVybnMge3F1YXQyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaW52ZXJ0KG91dCwgYSkge1xuICB2YXIgc3FsZW4gPSBzcXVhcmVkTGVuZ3RoKGEpO1xuICBvdXRbMF0gPSAtYVswXSAvIHNxbGVuO1xuICBvdXRbMV0gPSAtYVsxXSAvIHNxbGVuO1xuICBvdXRbMl0gPSAtYVsyXSAvIHNxbGVuO1xuICBvdXRbM10gPSBhWzNdIC8gc3FsZW47XG4gIG91dFs0XSA9IC1hWzRdIC8gc3FsZW47XG4gIG91dFs1XSA9IC1hWzVdIC8gc3FsZW47XG4gIG91dFs2XSA9IC1hWzZdIC8gc3FsZW47XG4gIG91dFs3XSA9IGFbN10gLyBzcWxlbjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgY29uanVnYXRlIG9mIGEgZHVhbCBxdWF0XG4gKiBJZiB0aGUgZHVhbCBxdWF0ZXJuaW9uIGlzIG5vcm1hbGl6ZWQsIHRoaXMgZnVuY3Rpb24gaXMgZmFzdGVyIHRoYW4gcXVhdDIuaW52ZXJzZSBhbmQgcHJvZHVjZXMgdGhlIHNhbWUgcmVzdWx0LlxuICpcbiAqIEBwYXJhbSB7cXVhdDJ9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSBxdWF0IHRvIGNhbGN1bGF0ZSBjb25qdWdhdGUgb2ZcbiAqIEByZXR1cm5zIHtxdWF0Mn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbmp1Z2F0ZShvdXQsIGEpIHtcbiAgb3V0WzBdID0gLWFbMF07XG4gIG91dFsxXSA9IC1hWzFdO1xuICBvdXRbMl0gPSAtYVsyXTtcbiAgb3V0WzNdID0gYVszXTtcbiAgb3V0WzRdID0gLWFbNF07XG4gIG91dFs1XSA9IC1hWzVdO1xuICBvdXRbNl0gPSAtYVs2XTtcbiAgb3V0WzddID0gYVs3XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbGVuZ3RoIG9mIGEgZHVhbCBxdWF0XG4gKlxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIGR1YWwgcXVhdCB0byBjYWxjdWxhdGUgbGVuZ3RoIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBsZW5ndGggb2YgYVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBsZW5ndGggPSBxdWF0Lmxlbmd0aDtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBxdWF0Mi5sZW5ndGh9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGxlbiA9IGxlbmd0aDtcbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgc3F1YXJlZCBsZW5ndGggb2YgYSBkdWFsIHF1YXRcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGEgZHVhbCBxdWF0IHRvIGNhbGN1bGF0ZSBzcXVhcmVkIGxlbmd0aCBvZlxuICogQHJldHVybnMge051bWJlcn0gc3F1YXJlZCBsZW5ndGggb2YgYVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzcXVhcmVkTGVuZ3RoID0gcXVhdC5zcXVhcmVkTGVuZ3RoO1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHF1YXQyLnNxdWFyZWRMZW5ndGh9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHNxckxlbiA9IHNxdWFyZWRMZW5ndGg7XG4vKipcbiAqIE5vcm1hbGl6ZSBhIGR1YWwgcXVhdFxuICpcbiAqIEBwYXJhbSB7cXVhdDJ9IG91dCB0aGUgcmVjZWl2aW5nIGR1YWwgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIGR1YWwgcXVhdGVybmlvbiB0byBub3JtYWxpemVcbiAqIEByZXR1cm5zIHtxdWF0Mn0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplKG91dCwgYSkge1xuICB2YXIgbWFnbml0dWRlID0gc3F1YXJlZExlbmd0aChhKTtcblxuICBpZiAobWFnbml0dWRlID4gMCkge1xuICAgIG1hZ25pdHVkZSA9IE1hdGguc3FydChtYWduaXR1ZGUpO1xuICAgIHZhciBhMCA9IGFbMF0gLyBtYWduaXR1ZGU7XG4gICAgdmFyIGExID0gYVsxXSAvIG1hZ25pdHVkZTtcbiAgICB2YXIgYTIgPSBhWzJdIC8gbWFnbml0dWRlO1xuICAgIHZhciBhMyA9IGFbM10gLyBtYWduaXR1ZGU7XG4gICAgdmFyIGIwID0gYVs0XTtcbiAgICB2YXIgYjEgPSBhWzVdO1xuICAgIHZhciBiMiA9IGFbNl07XG4gICAgdmFyIGIzID0gYVs3XTtcbiAgICB2YXIgYV9kb3RfYiA9IGEwICogYjAgKyBhMSAqIGIxICsgYTIgKiBiMiArIGEzICogYjM7XG4gICAgb3V0WzBdID0gYTA7XG4gICAgb3V0WzFdID0gYTE7XG4gICAgb3V0WzJdID0gYTI7XG4gICAgb3V0WzNdID0gYTM7XG4gICAgb3V0WzRdID0gKGIwIC0gYTAgKiBhX2RvdF9iKSAvIG1hZ25pdHVkZTtcbiAgICBvdXRbNV0gPSAoYjEgLSBhMSAqIGFfZG90X2IpIC8gbWFnbml0dWRlO1xuICAgIG91dFs2XSA9IChiMiAtIGEyICogYV9kb3RfYikgLyBtYWduaXR1ZGU7XG4gICAgb3V0WzddID0gKGIzIC0gYTMgKiBhX2RvdF9iKSAvIG1hZ25pdHVkZTtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBkdWFsIHF1YXRlbmlvblxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSBkdWFsIHF1YXRlcm5pb24gdG8gcmVwcmVzZW50IGFzIGEgc3RyaW5nXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGR1YWwgcXVhdFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzdHIoYSkge1xuICByZXR1cm4gXCJxdWF0MihcIiArIGFbMF0gKyBcIiwgXCIgKyBhWzFdICsgXCIsIFwiICsgYVsyXSArIFwiLCBcIiArIGFbM10gKyBcIiwgXCIgKyBhWzRdICsgXCIsIFwiICsgYVs1XSArIFwiLCBcIiArIGFbNl0gKyBcIiwgXCIgKyBhWzddICsgXCIpXCI7XG59XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIGR1YWwgcXVhdGVybmlvbnMgaGF2ZSBleGFjdGx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uICh3aGVuIGNvbXBhcmVkIHdpdGggPT09KVxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSB0aGUgZmlyc3QgZHVhbCBxdWF0ZXJuaW9uLlxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBiIHRoZSBzZWNvbmQgZHVhbCBxdWF0ZXJuaW9uLlxuICogQHJldHVybnMge0Jvb2xlYW59IHRydWUgaWYgdGhlIGR1YWwgcXVhdGVybmlvbnMgYXJlIGVxdWFsLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGV4YWN0RXF1YWxzKGEsIGIpIHtcbiAgcmV0dXJuIGFbMF0gPT09IGJbMF0gJiYgYVsxXSA9PT0gYlsxXSAmJiBhWzJdID09PSBiWzJdICYmIGFbM10gPT09IGJbM10gJiYgYVs0XSA9PT0gYls0XSAmJiBhWzVdID09PSBiWzVdICYmIGFbNl0gPT09IGJbNl0gJiYgYVs3XSA9PT0gYls3XTtcbn1cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgZHVhbCBxdWF0ZXJuaW9ucyBoYXZlIGFwcHJveGltYXRlbHkgdGhlIHNhbWUgZWxlbWVudHMgaW4gdGhlIHNhbWUgcG9zaXRpb24uXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVF1YXQyfSBhIHRoZSBmaXJzdCBkdWFsIHF1YXQuXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdDJ9IGIgdGhlIHNlY29uZCBkdWFsIHF1YXQuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdHJ1ZSBpZiB0aGUgZHVhbCBxdWF0cyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGEsIGIpIHtcbiAgdmFyIGEwID0gYVswXSxcbiAgICAgIGExID0gYVsxXSxcbiAgICAgIGEyID0gYVsyXSxcbiAgICAgIGEzID0gYVszXSxcbiAgICAgIGE0ID0gYVs0XSxcbiAgICAgIGE1ID0gYVs1XSxcbiAgICAgIGE2ID0gYVs2XSxcbiAgICAgIGE3ID0gYVs3XTtcbiAgdmFyIGIwID0gYlswXSxcbiAgICAgIGIxID0gYlsxXSxcbiAgICAgIGIyID0gYlsyXSxcbiAgICAgIGIzID0gYlszXSxcbiAgICAgIGI0ID0gYls0XSxcbiAgICAgIGI1ID0gYls1XSxcbiAgICAgIGI2ID0gYls2XSxcbiAgICAgIGI3ID0gYls3XTtcbiAgcmV0dXJuIE1hdGguYWJzKGEwIC0gYjApIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEwKSwgTWF0aC5hYnMoYjApKSAmJiBNYXRoLmFicyhhMSAtIGIxKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMSksIE1hdGguYWJzKGIxKSkgJiYgTWF0aC5hYnMoYTIgLSBiMikgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTIpLCBNYXRoLmFicyhiMikpICYmIE1hdGguYWJzKGEzIC0gYjMpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEzKSwgTWF0aC5hYnMoYjMpKSAmJiBNYXRoLmFicyhhNCAtIGI0KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhNCksIE1hdGguYWJzKGI0KSkgJiYgTWF0aC5hYnMoYTUgLSBiNSkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTUpLCBNYXRoLmFicyhiNSkpICYmIE1hdGguYWJzKGE2IC0gYjYpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE2KSwgTWF0aC5hYnMoYjYpKSAmJiBNYXRoLmFicyhhNyAtIGI3KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhNyksIE1hdGguYWJzKGI3KSk7XG59IiwgInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IENvbXBvbmVudCwgRW1pdHRlciB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaS9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IHNldFhSUmlnaWRUcmFuc2Zvcm1Mb2NhbCB9IGZyb20gJy4vdXRpbHMvd2VieHIuanMnO1xuLyoqXG4gKiBTZXRzIHVwIGEgW1dlYlhSIERldmljZSBBUEkgXCJIaXQgVGVzdFwiXShodHRwczovL2ltbWVyc2l2ZS13ZWIuZ2l0aHViLmlvL2hpdC10ZXN0LylcbiAqIGFuZCBwbGFjZXMgdGhlIG9iamVjdCB0byB0aGUgaGl0IGxvY2F0aW9uLlxuICpcbiAqICoqUmVxdWlyZW1lbnRzOioqXG4gKiAgLSBTcGVjaWZ5IGAnaGl0LXRlc3QnYCBpbiB0aGUgcmVxdWlyZWQgb3Igb3B0aW9uYWwgZmVhdHVyZXMgb24gdGhlIEFSIGJ1dHRvbiBpbiB5b3VyIGh0bWwgZmlsZS5cbiAqICAgIFNlZSBbV2FzdGVwYXBlcmJpbiBBUl0oL3Nob3djYXNlL3dwYi1hcikgYXMgYW4gZXhhbXBsZS5cbiAqL1xuY2xhc3MgSGl0VGVzdExvY2F0aW9uIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnaGl0LXRlc3QtbG9jYXRpb24nO1xuICAgIHRlbXBTY2FsaW5nID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICB2aXNpYmxlID0gZmFsc2U7XG4gICAgeHJIaXRUZXN0U291cmNlID0gbnVsbDtcbiAgICAvKiogUmVmZXJlbmNlIHNwYWNlIGZvciBjcmVhdGluZyB0aGUgaGl0IHRlc3Qgd2hlbiB0aGUgc2Vzc2lvbiBzdGFydHMgKi9cbiAgICB4clJlZmVyZW5jZVNwYWNlID0gbnVsbDtcbiAgICAvKipcbiAgICAgKiBGb3IgbWFpbnRhaW5pbmcgYmFja3dhcmRzIGNvbXBhdGliaWxpdHk6IFdoZXRoZXIgdG8gc2NhbGUgdGhlIG9iamVjdCB0byAwIGFuZCBiYWNrLlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSBvbkhpdExvc3QgYW5kIG9uSGl0Rm91bmQgaW5zdGVhZC5cbiAgICAgKi9cbiAgICBzY2FsZU9iamVjdCA9IHRydWU7XG4gICAgLyoqIEVtaXRzIGFuIGV2ZW50IHdoZW4gdGhlIGhpdCB0ZXN0IHN3aXRjaGVzIGZyb20gdmlzaWJsZSB0byBpbnZpc2libGUgKi9cbiAgICBvbkhpdExvc3QgPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKiBFbWl0cyBhbiBldmVudCB3aGVuIHRoZSBoaXQgdGVzdCBzd2l0Y2hlcyBmcm9tIGludmlzaWJsZSB0byB2aXNpYmxlICovXG4gICAgb25IaXRGb3VuZCA9IG5ldyBFbWl0dGVyKCk7XG4gICAgb25TZXNzaW9uU3RhcnRDYWxsYmFjayA9IG51bGw7XG4gICAgb25TZXNzaW9uRW5kQ2FsbGJhY2sgPSBudWxsO1xuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLm9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2sgPSB0aGlzLm9uWFJTZXNzaW9uU3RhcnQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vblNlc3Npb25FbmRDYWxsYmFjayA9IHRoaXMub25YUlNlc3Npb25FbmQuYmluZCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuc2NhbGVPYmplY3QpIHtcbiAgICAgICAgICAgIHRoaXMudGVtcFNjYWxpbmcuc2V0KHRoaXMub2JqZWN0LnNjYWxpbmdMb2NhbCk7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5zY2FsZShbMCwgMCwgMF0pO1xuICAgICAgICAgICAgdGhpcy5vbkhpdExvc3QuYWRkKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBTY2FsaW5nLnNldCh0aGlzLm9iamVjdC5zY2FsaW5nTG9jYWwpO1xuICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0LnNjYWxlKFswLCAwLCAwXSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMub25IaXRGb3VuZC5hZGQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0LnNjYWxpbmdMb2NhbC5zZXQodGhpcy50ZW1wU2NhbGluZyk7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmplY3Quc2V0RGlydHkoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uQWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQuYWRkKHRoaXMub25TZXNzaW9uU3RhcnRDYWxsYmFjayk7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uRW5kLmFkZCh0aGlzLm9uU2Vzc2lvbkVuZENhbGxiYWNrKTtcbiAgICB9XG4gICAgb25EZWFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvblN0YXJ0LnJlbW92ZSh0aGlzLm9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2spO1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvbkVuZC5yZW1vdmUodGhpcy5vblNlc3Npb25FbmRDYWxsYmFjayk7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgY29uc3Qgd2FzVmlzaWJsZSA9IHRoaXMudmlzaWJsZTtcbiAgICAgICAgaWYgKHRoaXMueHJIaXRUZXN0U291cmNlKSB7XG4gICAgICAgICAgICBjb25zdCBmcmFtZSA9IHRoaXMuZW5naW5lLnhyRnJhbWU7XG4gICAgICAgICAgICBpZiAoIWZyYW1lKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGxldCBoaXRUZXN0UmVzdWx0cyA9IGZyYW1lLmdldEhpdFRlc3RSZXN1bHRzKHRoaXMueHJIaXRUZXN0U291cmNlKTtcbiAgICAgICAgICAgIGlmIChoaXRUZXN0UmVzdWx0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBvc2UgPSBoaXRUZXN0UmVzdWx0c1swXS5nZXRQb3NlKHRoaXMuZW5naW5lLnhyLmN1cnJlbnRSZWZlcmVuY2VTcGFjZSk7XG4gICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gISFwb3NlO1xuICAgICAgICAgICAgICAgIGlmIChwb3NlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFhSUmlnaWRUcmFuc2Zvcm1Mb2NhbCh0aGlzLm9iamVjdCwgcG9zZS50cmFuc2Zvcm0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qIEVtaXQgZXZlbnRzIGZvciB2aXNpYmxlIHN0YXRlIGNoYW5nZSAqL1xuICAgICAgICBpZiAodGhpcy52aXNpYmxlICE9IHdhc1Zpc2libGUpIHtcbiAgICAgICAgICAgICh0aGlzLnZpc2libGUgPyB0aGlzLm9uSGl0Rm91bmQgOiB0aGlzLm9uSGl0TG9zdCkubm90aWZ5KHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldEhpdFRlc3RSZXN1bHRzKGZyYW1lID0gdGhpcy5lbmdpbmUueHI/LmZyYW1lID8/IG51bGwpIHtcbiAgICAgICAgaWYgKCFmcmFtZSlcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgLyogTWF5IGhhcHBlbiBpZiB0aGUgaGl0IHRlc3Qgc291cmNlIGNvdWxkbid0IGJlIGNyZWF0ZWQgKi9cbiAgICAgICAgaWYgKCF0aGlzLnhySGl0VGVzdFNvdXJjZSlcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgcmV0dXJuIGZyYW1lLmdldEhpdFRlc3RSZXN1bHRzKHRoaXMueHJIaXRUZXN0U291cmNlKTtcbiAgICB9XG4gICAgb25YUlNlc3Npb25TdGFydChzZXNzaW9uKSB7XG4gICAgICAgIGlmIChzZXNzaW9uLnJlcXVlc3RIaXRUZXN0U291cmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2hpdC10ZXN0LWxvY2F0aW9uOiBoaXQgdGVzdCBmZWF0dXJlIG5vdCBhdmFpbGFibGUuIERlYWN0aXZhdGluZyBjb21wb25lbnQuJyk7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNlc3Npb25cbiAgICAgICAgICAgIC5yZXF1ZXN0SGl0VGVzdFNvdXJjZSh7XG4gICAgICAgICAgICBzcGFjZTogdGhpcy54clJlZmVyZW5jZVNwYWNlID8/XG4gICAgICAgICAgICAgICAgdGhpcy5lbmdpbmUueHIucmVmZXJlbmNlU3BhY2VGb3JUeXBlKCd2aWV3ZXInKSxcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKChoaXRUZXN0U291cmNlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnhySGl0VGVzdFNvdXJjZSA9IGhpdFRlc3RTb3VyY2U7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gICAgfVxuICAgIG9uWFJTZXNzaW9uRW5kKCkge1xuICAgICAgICBpZiAoIXRoaXMueHJIaXRUZXN0U291cmNlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLnhySGl0VGVzdFNvdXJjZS5jYW5jZWwoKTtcbiAgICAgICAgdGhpcy54ckhpdFRlc3RTb3VyY2UgPSBudWxsO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmJvb2wodHJ1ZSlcbl0sIEhpdFRlc3RMb2NhdGlvbi5wcm90b3R5cGUsIFwic2NhbGVPYmplY3RcIiwgdm9pZCAwKTtcbmV4cG9ydCB7IEhpdFRlc3RMb2NhdGlvbiB9O1xuIiwgInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IENvbXBvbmVudCwgVmlld0NvbXBvbmVudCwgRW1pdHRlciwgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuaW1wb3J0IHsgcHJvcGVydHkgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGkvZGVjb3JhdG9ycy5qcyc7XG5pbXBvcnQgeyB2ZWMzLCBtYXQ0IH0gZnJvbSAnZ2wtbWF0cml4JztcbmltcG9ydCB7IEN1cnNvclRhcmdldCB9IGZyb20gJy4vY3Vyc29yLXRhcmdldC5qcyc7XG5pbXBvcnQgeyBIaXRUZXN0TG9jYXRpb24gfSBmcm9tICcuL2hpdC10ZXN0LWxvY2F0aW9uLmpzJztcbmNvbnN0IHRlbXBWZWMgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuY29uc3QgWkVSTyA9IFswLCAwLCAwXTtcbi8qKiBHbG9iYWwgdGFyZ2V0IGZvciB7QGxpbmsgQ3Vyc29yfSAqL1xuY2xhc3MgQ3Vyc29yVGFyZ2V0RW1pdHRlcnMge1xuICAgIC8qKiBFbWl0dGVyIGZvciBldmVudHMgd2hlbiB0aGUgdGFyZ2V0IGlzIGhvdmVyZWQgKi9cbiAgICBvbkhvdmVyID0gbmV3IEVtaXR0ZXIoKTtcbiAgICAvKiogRW1pdHRlciBmb3IgZXZlbnRzIHdoZW4gdGhlIHRhcmdldCBpcyB1bmhvdmVyZWQgKi9cbiAgICBvblVuaG92ZXIgPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKiBFbWl0dGVyIGZvciBldmVudHMgd2hlbiB0aGUgdGFyZ2V0IGlzIGNsaWNrZWQgKi9cbiAgICBvbkNsaWNrID0gbmV3IEVtaXR0ZXIoKTtcbiAgICAvKiogRW1pdHRlciBmb3IgZXZlbnRzIHdoZW4gdGhlIGN1cnNvciBtb3ZlcyBvbiB0aGUgdGFyZ2V0ICovXG4gICAgb25Nb3ZlID0gbmV3IEVtaXR0ZXIoKTtcbiAgICAvKiogRW1pdHRlciBmb3IgZXZlbnRzIHdoZW4gdGhlIHVzZXIgcHJlc3NlZCB0aGUgc2VsZWN0IGJ1dHRvbiBvbiB0aGUgdGFyZ2V0ICovXG4gICAgb25Eb3duID0gbmV3IEVtaXR0ZXIoKTtcbiAgICAvKiogRW1pdHRlciBmb3IgZXZlbnRzIHdoZW4gdGhlIHVzZXIgdW5wcmVzc2VkIHRoZSBzZWxlY3QgYnV0dG9uIG9uIHRoZSB0YXJnZXQgKi9cbiAgICBvblVwID0gbmV3IEVtaXR0ZXIoKTtcbn1cbi8qKlxuICogM0QgY3Vyc29yIGZvciBkZXNrdG9wL21vYmlsZS9WUi5cbiAqXG4gKiBJbXBsZW1lbnRzIGEgcmF5LWNhc3RpbmcgY3Vyc29yIGludG8gdGhlIHNjZW5lLiBUbyByZWFjdCB0b1xuICogY2xpY2tpbmcvaG92ZXIvdW5ob3Zlci9jdXJzb3IgZG93bi9jdXJzb3IgdXAvbW92ZSB1c2UgYVxuICogW2N1cnNvci10YXJnZXRdKCNjdXJzb3ItdGFyZ2V0KS5cbiAqXG4gKiBGb3IgVlIsIHRoZSByYXkgaXMgY2FzdCBpbiBkaXJlY3Rpb24gb2ZcbiAqIFt0aGlzLm9iamVjdC5nZXRGb3J3YXJkKCldKC9qc2FwaS9vYmplY3QvI2dldGZvcndhcmQpLiBGb3IgZGVza3RvcCBhbmQgbW9iaWxlLCB0aGVcbiAqIGZvcndhcmQgdmVjdG9yIGlzIGludmVyc2UtcHJvamVjdGVkIHRvIGFjY291bnQgZm9yIHdoZXJlIG9uIHNjcmVlbiB0aGUgdXNlciBjbGlja2VkLlxuICpcbiAqIGAuZ2xvYmFsVGFyZ2V0YCBjYW4gYmUgdXNlZCB0byBjYWxsIGNhbGxiYWNrcyBmb3IgYWxsIG9iamVjdHMsIGV2ZW4gdGhvc2UgdGhhdFxuICogZG8gbm90IGhhdmUgYSBjdXJzb3IgdGFyZ2V0IGF0dGFjaGVkLCBidXQgbWF0Y2ggdGhlIGNvbGxpc2lvbiBncm91cC5cbiAqXG4gKiBgLmhpdFRlc3RUYXJnZXRgIGNhbiBiZSB1c2VkIHRvIGNhbGwgY2FsbGJhY2tzIFdlYlhSIGhpdCB0ZXN0IHJlc3VsdHMsXG4gKlxuICogU2VlIFtBbmltYXRpb24gRXhhbXBsZV0oL3Nob3djYXNlL2FuaW1hdGlvbikuXG4gKi9cbmNsYXNzIEN1cnNvciBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ2N1cnNvcic7XG4gICAgLyogRGVwZW5kZW5jaWVzIGlzIGRlcHJlY2F0ZWQsIGJ1dCB3ZSBrZWVwIGl0IGhlcmUgZm9yIGNvbXBhdGliaWxpdHlcbiAgICAgKiB3aXRoIDEuMC4wLXJjMiB1bnRpbCAxLjAuMCBpcyByZWxlYXNlZCAqL1xuICAgIHN0YXRpYyBEZXBlbmRlbmNpZXMgPSBbSGl0VGVzdExvY2F0aW9uXTtcbiAgICBzdGF0aWMgb25SZWdpc3RlcihlbmdpbmUpIHtcbiAgICAgICAgZW5naW5lLnJlZ2lzdGVyQ29tcG9uZW50KEhpdFRlc3RMb2NhdGlvbik7XG4gICAgfVxuICAgIF9jb2xsaXNpb25NYXNrID0gMDtcbiAgICBfb25EZWFjdGl2YXRlQ2FsbGJhY2tzID0gW107XG4gICAgX2lucHV0ID0gbnVsbDtcbiAgICBfb3JpZ2luID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICBfY3Vyc29yT2JqU2NhbGUgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgIF9kaXJlY3Rpb24gPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgIF9wcm9qZWN0aW9uTWF0cml4ID0gbmV3IEZsb2F0MzJBcnJheSgxNik7XG4gICAgX3ZpZXdDb21wb25lbnQgPSBudWxsO1xuICAgIF9pc0Rvd24gPSBmYWxzZTtcbiAgICBfbGFzdElzRG93biA9IGZhbHNlO1xuICAgIF9hclRvdWNoRG93biA9IGZhbHNlO1xuICAgIF9sYXN0UG9pbnRlclBvcyA9IG5ldyBGbG9hdDMyQXJyYXkoMik7XG4gICAgX2xhc3RDdXJzb3JQb3NPblRhcmdldCA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgX2hpdFRlc3RMb2NhdGlvbiA9IG51bGw7XG4gICAgX2hpdFRlc3RPYmplY3QgPSBudWxsO1xuICAgIF9vblNlc3Npb25TdGFydENhbGxiYWNrID0gbnVsbDtcbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoZSBjdXJzb3IgKGFuZCBjdXJzb3JPYmplY3QpIGlzIHZpc2libGUsIGkuZS4gcG9pbnRpbmcgYXQgYW4gb2JqZWN0XG4gICAgICogdGhhdCBtYXRjaGVzIHRoZSBjb2xsaXNpb24gZ3JvdXBcbiAgICAgKi9cbiAgICB2aXNpYmxlID0gdHJ1ZTtcbiAgICAvKiogQ3VycmVudGx5IGhvdmVyZWQgb2JqZWN0ICovXG4gICAgaG92ZXJpbmdPYmplY3QgPSBudWxsO1xuICAgIC8qKiBDdXJzb3JUYXJnZXQgY29tcG9uZW50IG9mIHRoZSBjdXJyZW50bHkgaG92ZXJlZCBvYmplY3QgKi9cbiAgICBob3ZlcmluZ09iamVjdFRhcmdldCA9IG51bGw7XG4gICAgLyoqIFdoZXRoZXIgdGhlIGN1cnNvciBpcyBob3ZlcmluZyByZWFsaXR5IHZpYSBoaXQtdGVzdCAqL1xuICAgIGhvdmVyaW5nUmVhbGl0eSA9IGZhbHNlO1xuICAgIC8qKlxuICAgICAqIEdsb2JhbCB0YXJnZXQgbGV0cyB5b3UgcmVjZWl2ZSBnbG9iYWwgY3Vyc29yIGV2ZW50cyBvbiBhbnkgb2JqZWN0LlxuICAgICAqL1xuICAgIGdsb2JhbFRhcmdldCA9IG5ldyBDdXJzb3JUYXJnZXRFbWl0dGVycygpO1xuICAgIC8qKlxuICAgICAqIEhpdCB0ZXN0IHRhcmdldCBsZXRzIHlvdSByZWNlaXZlIGN1cnNvciBldmVudHMgZm9yIFwicmVhbGl0eVwiLCBpZlxuICAgICAqIGB1c2VXZWJYUkhpdFRlc3RgIGlzIHNldCB0byBgdHJ1ZWAuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYGpzXG4gICAgICogY3Vyc29yLmhpdFRlc3RUYXJnZXQub25DbGljay5hZGQoKGhpdCwgY3Vyc29yKSA9PiB7XG4gICAgICogICAgIC8vIFVzZXIgY2xpY2tlZCBvbiByZWFsaXR5XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgaGl0VGVzdFRhcmdldCA9IG5ldyBDdXJzb3JUYXJnZXRFbWl0dGVycygpO1xuICAgIC8qKiBXb3JsZCBwb3NpdGlvbiBvZiB0aGUgY3Vyc29yICovXG4gICAgY3Vyc29yUG9zID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICAvKiogQ29sbGlzaW9uIGdyb3VwIGZvciB0aGUgcmF5IGNhc3QuIE9ubHkgb2JqZWN0cyBpbiB0aGlzIGdyb3VwIHdpbGwgYmUgYWZmZWN0ZWQgYnkgdGhpcyBjdXJzb3IuICovXG4gICAgY29sbGlzaW9uR3JvdXAgPSAxO1xuICAgIC8qKiAob3B0aW9uYWwpIE9iamVjdCB0aGF0IHZpc3VhbGl6ZXMgdGhlIGN1cnNvcidzIHJheS4gKi9cbiAgICBjdXJzb3JSYXlPYmplY3QgPSBudWxsO1xuICAgIC8qKiBBeGlzIGFsb25nIHdoaWNoIHRvIHNjYWxlIHRoZSBgY3Vyc29yUmF5T2JqZWN0YC4gKi9cbiAgICBjdXJzb3JSYXlTY2FsaW5nQXhpcyA9IDI7XG4gICAgLyoqIChvcHRpb25hbCkgT2JqZWN0IHRoYXQgdmlzdWFsaXplcyB0aGUgY3Vyc29yJ3MgaGl0IGxvY2F0aW9uLiAqL1xuICAgIGN1cnNvck9iamVjdCA9IG51bGw7XG4gICAgLyoqIEhhbmRlZG5lc3MgZm9yIFZSIGN1cnNvcnMgdG8gYWNjZXB0IHRyaWdnZXIgZXZlbnRzIG9ubHkgZnJvbSByZXNwZWN0aXZlIGNvbnRyb2xsZXIuICovXG4gICAgaGFuZGVkbmVzcyA9IDA7XG4gICAgLyoqIE1vZGUgZm9yIHJheWNhc3RpbmcsIHdoZXRoZXIgdG8gdXNlIFBoeXNYIG9yIHNpbXBsZSBjb2xsaXNpb24gY29tcG9uZW50cyAqL1xuICAgIHJheUNhc3RNb2RlID0gMDtcbiAgICAvKiogTWF4aW11bSBkaXN0YW5jZSBmb3IgdGhlIGN1cnNvcidzIHJheSBjYXN0LiAqL1xuICAgIG1heERpc3RhbmNlID0gMTAwO1xuICAgIC8qKiBXaGV0aGVyIHRvIHNldCB0aGUgQ1NTIHN0eWxlIG9mIHRoZSBtb3VzZSBjdXJzb3Igb24gZGVza3RvcCAqL1xuICAgIHN0eWxlQ3Vyc29yID0gdHJ1ZTtcbiAgICAvKipcbiAgICAgKiBVc2UgV2ViWFIgaGl0LXRlc3QgaWYgYXZhaWxhYmxlLlxuICAgICAqXG4gICAgICogQXR0YWNoZXMgYSBoaXQtdGVzdC1sb2NhdGlvbiBjb21wb25lbnQgdG8gdGhlIGN1cnNvck9iamVjdCwgd2hpY2ggd2lsbCBiZSB1c2VkXG4gICAgICogYnkgdGhlIGN1cnNvciB0byBzZW5kIGV2ZW50cyB0byB0aGUgaGl0VGVzdFRhcmdldCB3aXRoIEhpdFRlc3RSZXN1bHQuXG4gICAgICovXG4gICAgdXNlV2ViWFJIaXRUZXN0ID0gZmFsc2U7XG4gICAgX29uVmlld3BvcnRSZXNpemUgPSAoKSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5fdmlld0NvbXBvbmVudClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgLyogUHJvamVjdGlvbiBtYXRyaXggd2lsbCBjaGFuZ2UgaWYgdGhlIHZpZXdwb3J0IGlzIHJlc2l6ZWQsIHdoaWNoIHdpbGwgYWZmZWN0IHRoZVxuICAgICAgICAgKiBwcm9qZWN0aW9uIG1hdHJpeCBiZWNhdXNlIG9mIHRoZSBhc3BlY3QgcmF0aW8uICovXG4gICAgICAgIG1hdDQuaW52ZXJ0KHRoaXMuX3Byb2plY3Rpb25NYXRyaXgsIHRoaXMuX3ZpZXdDb21wb25lbnQucHJvamVjdGlvbk1hdHJpeCk7XG4gICAgfTtcbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5fY29sbGlzaW9uTWFzayA9IDEgPDwgdGhpcy5jb2xsaXNpb25Hcm91cDtcbiAgICAgICAgaWYgKHRoaXMuaGFuZGVkbmVzcyA9PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dENvbXAgPSB0aGlzLm9iamVjdC5nZXRDb21wb25lbnQoJ2lucHV0Jyk7XG4gICAgICAgICAgICBpZiAoIWlucHV0Q29tcCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignY3Vyc29yIGNvbXBvbmVudCBvbiBvYmplY3QnLCB0aGlzLm9iamVjdC5uYW1lLCAnd2FzIGNvbmZpZ3VyZWQgd2l0aCBoYW5kZWRuZXNzIFwiaW5wdXQgY29tcG9uZW50XCIsICcgK1xuICAgICAgICAgICAgICAgICAgICAnYnV0IG9iamVjdCBoYXMgbm8gaW5wdXQgY29tcG9uZW50LicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kZWRuZXNzID0gaW5wdXRDb21wLmhhbmRlZG5lc3MgfHwgJ25vbmUnO1xuICAgICAgICAgICAgICAgIHRoaXMuX2lucHV0ID0gaW5wdXRDb21wO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5oYW5kZWRuZXNzID0gWydsZWZ0JywgJ3JpZ2h0JywgJ25vbmUnXVt0aGlzLmhhbmRlZG5lc3MgLSAxXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl92aWV3Q29tcG9uZW50ID0gdGhpcy5vYmplY3QuZ2V0Q29tcG9uZW50KFZpZXdDb21wb25lbnQpO1xuICAgICAgICBpZiAodGhpcy51c2VXZWJYUkhpdFRlc3QpIHtcbiAgICAgICAgICAgIHRoaXMuX2hpdFRlc3RPYmplY3QgPSB0aGlzLmVuZ2luZS5zY2VuZS5hZGRPYmplY3QodGhpcy5vYmplY3QpO1xuICAgICAgICAgICAgdGhpcy5faGl0VGVzdExvY2F0aW9uID1cbiAgICAgICAgICAgICAgICB0aGlzLl9oaXRUZXN0T2JqZWN0LmFkZENvbXBvbmVudChIaXRUZXN0TG9jYXRpb24sIHtcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVPYmplY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0pID8/IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fb25TZXNzaW9uU3RhcnRDYWxsYmFjayA9IHRoaXMuc2V0dXBWUkV2ZW50cy5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICBvbkFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvblN0YXJ0LmFkZCh0aGlzLl9vblNlc3Npb25TdGFydENhbGxiYWNrKTtcbiAgICAgICAgdGhpcy5lbmdpbmUub25SZXNpemUuYWRkKHRoaXMuX29uVmlld3BvcnRSZXNpemUpO1xuICAgICAgICB0aGlzLl9zZXRDdXJzb3JWaXNpYmlsaXR5KHRydWUpO1xuICAgICAgICAvKiBJZiB0aGlzIG9iamVjdCBhbHNvIGhhcyBhIHZpZXcgY29tcG9uZW50LCB3ZSB3aWxsIGVuYWJsZSBpbnZlcnNlLXByb2plY3RlZCBtb3VzZSBjbGlja3MsXG4gICAgICAgICAqIG90aGVyd2lzZSBqdXN0IHVzZSB0aGUgb2JqZWN0cyB0cmFuc2Zvcm1hdGlvbiAqL1xuICAgICAgICBpZiAodGhpcy5fdmlld0NvbXBvbmVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCBjYW52YXMgPSB0aGlzLmVuZ2luZS5jYW52YXM7XG4gICAgICAgICAgICBjb25zdCBvbkNsaWNrID0gdGhpcy5vbkNsaWNrLmJpbmQodGhpcyk7XG4gICAgICAgICAgICBjb25zdCBvblBvaW50ZXJNb3ZlID0gdGhpcy5vblBvaW50ZXJNb3ZlLmJpbmQodGhpcyk7XG4gICAgICAgICAgICBjb25zdCBvblBvaW50ZXJEb3duID0gdGhpcy5vblBvaW50ZXJEb3duLmJpbmQodGhpcyk7XG4gICAgICAgICAgICBjb25zdCBvblBvaW50ZXJVcCA9IHRoaXMub25Qb2ludGVyVXAuYmluZCh0aGlzKTtcbiAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2spO1xuICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJtb3ZlJywgb25Qb2ludGVyTW92ZSk7XG4gICAgICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCBvblBvaW50ZXJEb3duKTtcbiAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCBvblBvaW50ZXJVcCk7XG4gICAgICAgICAgICB0aGlzLl9vbkRlYWN0aXZhdGVDYWxsYmFja3MucHVzaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGljayk7XG4gICAgICAgICAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJtb3ZlJywgb25Qb2ludGVyTW92ZSk7XG4gICAgICAgICAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgb25Qb2ludGVyRG93bik7XG4gICAgICAgICAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIG9uUG9pbnRlclVwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX29uVmlld3BvcnRSZXNpemUoKTtcbiAgICB9XG4gICAgX3NldEN1cnNvclJheVRyYW5zZm9ybShoaXRQb3NpdGlvbikge1xuICAgICAgICBpZiAoIXRoaXMuY3Vyc29yUmF5T2JqZWN0KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBkaXN0ID0gdmVjMy5kaXN0KHRoaXMuX29yaWdpbiwgaGl0UG9zaXRpb24pO1xuICAgICAgICB0aGlzLmN1cnNvclJheU9iamVjdC5zZXRQb3NpdGlvbkxvY2FsKFswLjAsIDAuMCwgLWRpc3QgLyAyXSk7XG4gICAgICAgIGlmICh0aGlzLmN1cnNvclJheVNjYWxpbmdBeGlzICE9IDQpIHtcbiAgICAgICAgICAgIC8qIFNjYWxlIG9ubHkgdGhlIHJlcXVlc3RlZCBheGlzLCByZWxhdGl2ZSB0byB0aGUgb3JpZ2luYWwgc2NhbGluZyAqL1xuICAgICAgICAgICAgdGVtcFZlYy5maWxsKDEpO1xuICAgICAgICAgICAgdGVtcFZlY1t0aGlzLmN1cnNvclJheVNjYWxpbmdBeGlzXSA9IGRpc3QgLyAyO1xuICAgICAgICAgICAgdGhpcy5jdXJzb3JSYXlPYmplY3Quc2V0U2NhbGluZ0xvY2FsKHRlbXBWZWMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9zZXRDdXJzb3JWaXNpYmlsaXR5KHZpc2libGUpIHtcbiAgICAgICAgaWYgKHRoaXMudmlzaWJsZSA9PSB2aXNpYmxlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLnZpc2libGUgPSB2aXNpYmxlO1xuICAgICAgICBpZiAoIXRoaXMuY3Vyc29yT2JqZWN0KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAodmlzaWJsZSkge1xuICAgICAgICAgICAgdGhpcy5jdXJzb3JPYmplY3Quc2V0U2NhbGluZ1dvcmxkKHRoaXMuX2N1cnNvck9ialNjYWxlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY3Vyc29yT2JqZWN0LmdldFNjYWxpbmdXb3JsZCh0aGlzLl9jdXJzb3JPYmpTY2FsZSk7XG4gICAgICAgICAgICB0aGlzLmN1cnNvck9iamVjdC5zY2FsZUxvY2FsKFswLCAwLCAwXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICAvKiBJZiBpbiBWUiwgc2V0IHRoZSBjdXJzb3IgcmF5IGJhc2VkIG9uIG9iamVjdCB0cmFuc2Zvcm0gKi9cbiAgICAgICAgLyogU2luY2UgR29vZ2xlIENhcmRib2FyZCB0YXAgaXMgcmVnaXN0ZXJlZCBhcyBhclRvdWNoRG93biB3aXRob3V0IGEgZ2FtZXBhZCwgd2UgbmVlZCB0byBjaGVjayBmb3IgZ2FtZXBhZCBwcmVzZW5jZSAqL1xuICAgICAgICBpZiAodGhpcy5lbmdpbmUueHIgJiZcbiAgICAgICAgICAgIHRoaXMuX2FyVG91Y2hEb3duICYmXG4gICAgICAgICAgICB0aGlzLl9pbnB1dCAmJlxuICAgICAgICAgICAgdGhpcy5lbmdpbmUueHIuc2Vzc2lvbi5pbnB1dFNvdXJjZXNbMF0uaGFuZGVkbmVzcyA9PT0gJ25vbmUnICYmXG4gICAgICAgICAgICB0aGlzLmVuZ2luZS54ci5zZXNzaW9uLmlucHV0U291cmNlc1swXS5nYW1lcGFkKSB7XG4gICAgICAgICAgICAvKiBXZWJYUiBBUiBpbnB1dCAqL1xuICAgICAgICAgICAgY29uc3QgcCA9IHRoaXMuZW5naW5lLnhyLnNlc3Npb24uaW5wdXRTb3VyY2VzWzBdLmdhbWVwYWQuYXhlcztcbiAgICAgICAgICAgIC8qIFNjcmVlbnNwYWNlIFkgaXMgaW52ZXJ0ZWQgKi9cbiAgICAgICAgICAgIHRoaXMuX2RpcmVjdGlvblswXSA9IHBbMF07XG4gICAgICAgICAgICB0aGlzLl9kaXJlY3Rpb25bMV0gPSAtcFsxXTtcbiAgICAgICAgICAgIHRoaXMuX2RpcmVjdGlvblsyXSA9IC0xLjA7XG4gICAgICAgICAgICB0aGlzLmFwcGx5VHJhbnNmb3JtQW5kUHJvamVjdERpcmVjdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZW5naW5lLnhyICYmIHRoaXMuX2lucHV0ICYmIHRoaXMuX2lucHV0LnhySW5wdXRTb3VyY2UpIHtcbiAgICAgICAgICAgIC8qIFdlYlhSIFZSIGlucHV0ICovXG4gICAgICAgICAgICB0aGlzLl9kaXJlY3Rpb25bMF0gPSAwO1xuICAgICAgICAgICAgdGhpcy5fZGlyZWN0aW9uWzFdID0gMDtcbiAgICAgICAgICAgIHRoaXMuX2RpcmVjdGlvblsyXSA9IC0xLjA7XG4gICAgICAgICAgICB0aGlzLmFwcGx5VHJhbnNmb3JtVG9EaXJlY3Rpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLl92aWV3Q29tcG9uZW50KSB7XG4gICAgICAgICAgICAvKiBBcHBseSBwb3RlbnRpYWxseSBjaGFuZ2VkIHRyYW5zZm9ybSB0byBsYXN0IHN0b3JlZCBwb2ludGVyXG4gICAgICAgICAgICAgKiBwb3NpdGlvbiAqL1xuICAgICAgICAgICAgdGhpcy51cGRhdGVEaXJlY3Rpb24oKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJheUNhc3QobnVsbCwgdGhpcy5lbmdpbmUueHI/LmZyYW1lKTtcbiAgICAgICAgaWYgKHRoaXMuY3Vyc29yT2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ob3ZlcmluZ09iamVjdCAmJlxuICAgICAgICAgICAgICAgICh0aGlzLmN1cnNvclBvc1swXSAhPSAwIHx8IHRoaXMuY3Vyc29yUG9zWzFdICE9IDAgfHwgdGhpcy5jdXJzb3JQb3NbMl0gIT0gMCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRDdXJzb3JWaXNpYmlsaXR5KHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3Vyc29yT2JqZWN0LnNldFBvc2l0aW9uV29ybGQodGhpcy5jdXJzb3JQb3MpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3NldEN1cnNvclJheVRyYW5zZm9ybSh0aGlzLmN1cnNvclBvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRDdXJzb3JWaXNpYmlsaXR5KGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiBSZXR1cm5zIHRoZSBob3ZlcmVkIGN1cnNvciB0YXJnZXQsIGlmIGF2YWlsYWJsZSAqL1xuICAgIG5vdGlmeShldmVudCwgb3JpZ2luYWxFdmVudCkge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSB0aGlzLmhvdmVyaW5nT2JqZWN0O1xuICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICBjb25zdCBjdXJzb3JUYXJnZXQgPSB0aGlzLmhvdmVyaW5nT2JqZWN0VGFyZ2V0O1xuICAgICAgICAgICAgaWYgKGN1cnNvclRhcmdldClcbiAgICAgICAgICAgICAgICBjdXJzb3JUYXJnZXRbZXZlbnRdLm5vdGlmeSh0YXJnZXQsIHRoaXMsIG9yaWdpbmFsRXZlbnQgPz8gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRoaXMuZ2xvYmFsVGFyZ2V0W2V2ZW50XS5ub3RpZnkodGFyZ2V0LCB0aGlzLCBvcmlnaW5hbEV2ZW50ID8/IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaG92ZXJCZWhhdmlvdXIocmF5SGl0LCBoaXRUZXN0UmVzdWx0LCBkb0NsaWNrLCBvcmlnaW5hbEV2ZW50KSB7XG4gICAgICAgIC8qIE9sZCBBUEkgdmVyc2lvbiBkb2VzIG5vdCByZXR1cm4gbnVsbCBmb3Igb2JqZWN0c1swXSBpZiBubyBoaXQgKi9cbiAgICAgICAgY29uc3QgaGl0ID0gIXRoaXMuaG92ZXJpbmdSZWFsaXR5ICYmIHJheUhpdC5oaXRDb3VudCA+IDAgPyByYXlIaXQub2JqZWN0c1swXSA6IG51bGw7XG4gICAgICAgIGlmIChoaXQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5ob3ZlcmluZ09iamVjdCB8fCAhdGhpcy5ob3ZlcmluZ09iamVjdC5lcXVhbHMoaGl0KSkge1xuICAgICAgICAgICAgICAgIC8qIFVuaG92ZXIgcHJldmlvdXMsIGlmIGV4aXN0cyAqL1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmhvdmVyaW5nT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KCdvblVuaG92ZXInLCBvcmlnaW5hbEV2ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLyogSG92ZXIgbmV3IG9iamVjdCAqL1xuICAgICAgICAgICAgICAgIHRoaXMuaG92ZXJpbmdPYmplY3QgPSBoaXQ7XG4gICAgICAgICAgICAgICAgdGhpcy5ob3ZlcmluZ09iamVjdFRhcmdldCA9IHRoaXMuaG92ZXJpbmdPYmplY3QuZ2V0Q29tcG9uZW50KEN1cnNvclRhcmdldCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3R5bGVDdXJzb3IpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5naW5lLmNhbnZhcy5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoJ29uSG92ZXInLCBvcmlnaW5hbEV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmhvdmVyaW5nT2JqZWN0KSB7XG4gICAgICAgICAgICAvKiBQcmV2aW91c2x5IGhvdmVyaW5nIG9iamVjdCwgbm93IGhvdmVyaW5nIG5vdGhpbmcgKi9cbiAgICAgICAgICAgIHRoaXMubm90aWZ5KCdvblVuaG92ZXInLCBvcmlnaW5hbEV2ZW50KTtcbiAgICAgICAgICAgIHRoaXMuaG92ZXJpbmdPYmplY3QgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5ob3ZlcmluZ09iamVjdFRhcmdldCA9IG51bGw7XG4gICAgICAgICAgICBpZiAodGhpcy5zdHlsZUN1cnNvcilcbiAgICAgICAgICAgICAgICB0aGlzLmVuZ2luZS5jYW52YXMuc3R5bGUuY3Vyc29yID0gJ2RlZmF1bHQnO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhvdmVyaW5nT2JqZWN0KSB7XG4gICAgICAgICAgICAvKiBvbkRvd24vb25VcCBmb3Igb2JqZWN0ICovXG4gICAgICAgICAgICBpZiAodGhpcy5faXNEb3duICE9PSB0aGlzLl9sYXN0SXNEb3duKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkodGhpcy5faXNEb3duID8gJ29uRG93bicgOiAnb25VcCcsIG9yaWdpbmFsRXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyogb25DbGljayBmb3Igb2JqZWN0ICovXG4gICAgICAgICAgICBpZiAoZG9DbGljaylcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeSgnb25DbGljaycsIG9yaWdpbmFsRXZlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaG92ZXJpbmdSZWFsaXR5KSB7XG4gICAgICAgICAgICAvKiBvbkRvd24vb25VcCBmb3IgaGl0IHRlc3QgKi9cbiAgICAgICAgICAgIGlmICh0aGlzLl9pc0Rvd24gIT09IHRoaXMuX2xhc3RJc0Rvd24pIHtcbiAgICAgICAgICAgICAgICAodGhpcy5faXNEb3duID8gdGhpcy5oaXRUZXN0VGFyZ2V0Lm9uRG93biA6IHRoaXMuaGl0VGVzdFRhcmdldC5vblVwKS5ub3RpZnkoaGl0VGVzdFJlc3VsdCwgdGhpcywgb3JpZ2luYWxFdmVudCA/PyB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyogb25DbGljayBmb3IgaGl0IHRlc3QgKi9cbiAgICAgICAgICAgIGlmIChkb0NsaWNrKVxuICAgICAgICAgICAgICAgIHRoaXMuaGl0VGVzdFRhcmdldC5vbkNsaWNrLm5vdGlmeShoaXRUZXN0UmVzdWx0LCB0aGlzLCBvcmlnaW5hbEV2ZW50ID8/IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgLyogb25Nb3ZlICovXG4gICAgICAgIGlmIChoaXQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmhvdmVyaW5nT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ob3ZlcmluZ09iamVjdC50cmFuc2Zvcm1Qb2ludEludmVyc2VXb3JsZCh0ZW1wVmVjLCB0aGlzLmN1cnNvclBvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0ZW1wVmVjLnNldCh0aGlzLmN1cnNvclBvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXZlYzMuZXF1YWxzKHRoaXMuX2xhc3RDdXJzb3JQb3NPblRhcmdldCwgdGVtcFZlYykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeSgnb25Nb3ZlJywgb3JpZ2luYWxFdmVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fbGFzdEN1cnNvclBvc09uVGFyZ2V0LnNldCh0ZW1wVmVjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmhvdmVyaW5nUmVhbGl0eSkge1xuICAgICAgICAgICAgaWYgKCF2ZWMzLmVxdWFscyh0aGlzLl9sYXN0Q3Vyc29yUG9zT25UYXJnZXQsIHRoaXMuY3Vyc29yUG9zKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGl0VGVzdFRhcmdldC5vbk1vdmUubm90aWZ5KGhpdFRlc3RSZXN1bHQsIHRoaXMsIG9yaWdpbmFsRXZlbnQgPz8gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9sYXN0Q3Vyc29yUG9zT25UYXJnZXQuc2V0KHRoaXMuY3Vyc29yUG9zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2xhc3RDdXJzb3JQb3NPblRhcmdldC5zZXQodGhpcy5jdXJzb3JQb3MpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2xhc3RJc0Rvd24gPSB0aGlzLl9pc0Rvd247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHVwIGV2ZW50IGxpc3RlbmVycyBvbiBzZXNzaW9uIG9iamVjdFxuICAgICAqIEBwYXJhbSBzIFdlYlhSIHNlc3Npb25cbiAgICAgKlxuICAgICAqIFNldHMgdXAgJ3NlbGVjdCcgYW5kICdlbmQnIGV2ZW50cy5cbiAgICAgKi9cbiAgICBzZXR1cFZSRXZlbnRzKHMpIHtcbiAgICAgICAgaWYgKCFzKVxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignc2V0dXBWUkV2ZW50cyBjYWxsZWQgd2l0aG91dCBhIHZhbGlkIHNlc3Npb24nKTtcbiAgICAgICAgLyogQmVjYXVzZSB3ZSByZW1vdmUgdGhlIGNhbGxiYWNrIGluIC5hY3RpdmUgYW5kIGFub3RoZXIgY29tcG9uZW50IG1pZ2h0XG4gICAgICAgICAqIGRlYWN0aXZhdGUgdGhlIGN1cnNvciBkdXJpbmcgb25YUlNlc3Npb25TdGFydCwgd2UgbWFrZSBzdXJlIHRoZSBjdXJzb3JcbiAgICAgICAgICogcmVhbGx5IGlzIGFjdGl2ZSB3aGVuIHdlIHJ1biB0aGlzICovXG4gICAgICAgIGlmICghdGhpcy5hY3RpdmUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIC8qIElmIGluIFZSLCBvbmUtdGltZSBiaW5kIHRoZSBsaXN0ZW5lciAqL1xuICAgICAgICBjb25zdCBvblNlbGVjdCA9IHRoaXMub25TZWxlY3QuYmluZCh0aGlzKTtcbiAgICAgICAgcy5hZGRFdmVudExpc3RlbmVyKCdzZWxlY3QnLCBvblNlbGVjdCk7XG4gICAgICAgIGNvbnN0IG9uU2VsZWN0U3RhcnQgPSB0aGlzLm9uU2VsZWN0U3RhcnQuYmluZCh0aGlzKTtcbiAgICAgICAgcy5hZGRFdmVudExpc3RlbmVyKCdzZWxlY3RzdGFydCcsIG9uU2VsZWN0U3RhcnQpO1xuICAgICAgICBjb25zdCBvblNlbGVjdEVuZCA9IHRoaXMub25TZWxlY3RFbmQuYmluZCh0aGlzKTtcbiAgICAgICAgcy5hZGRFdmVudExpc3RlbmVyKCdzZWxlY3RlbmQnLCBvblNlbGVjdEVuZCk7XG4gICAgICAgIHRoaXMuX29uRGVhY3RpdmF0ZUNhbGxiYWNrcy5wdXNoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5lbmdpbmUueHIpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgcy5yZW1vdmVFdmVudExpc3RlbmVyKCdzZWxlY3QnLCBvblNlbGVjdCk7XG4gICAgICAgICAgICBzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3NlbGVjdHN0YXJ0Jywgb25TZWxlY3RTdGFydCk7XG4gICAgICAgICAgICBzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3NlbGVjdGVuZCcsIG9uU2VsZWN0RW5kKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8qIEFmdGVyIEFSIHNlc3Npb24gd2FzIGVudGVyZWQsIHRoZSBwcm9qZWN0aW9uIG1hdHJpeCBjaGFuZ2VkICovXG4gICAgICAgIHRoaXMuX29uVmlld3BvcnRSZXNpemUoKTtcbiAgICB9XG4gICAgb25EZWFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvblN0YXJ0LnJlbW92ZSh0aGlzLl9vblNlc3Npb25TdGFydENhbGxiYWNrKTtcbiAgICAgICAgdGhpcy5lbmdpbmUub25SZXNpemUucmVtb3ZlKHRoaXMuX29uVmlld3BvcnRSZXNpemUpO1xuICAgICAgICB0aGlzLl9zZXRDdXJzb3JWaXNpYmlsaXR5KGZhbHNlKTtcbiAgICAgICAgaWYgKHRoaXMuaG92ZXJpbmdPYmplY3QpXG4gICAgICAgICAgICB0aGlzLm5vdGlmeSgnb25VbmhvdmVyJywgbnVsbCk7XG4gICAgICAgIGlmICh0aGlzLmN1cnNvclJheU9iamVjdClcbiAgICAgICAgICAgIHRoaXMuY3Vyc29yUmF5T2JqZWN0LnNldFNjYWxpbmdMb2NhbChaRVJPKTtcbiAgICAgICAgLyogRW5zdXJlIGFsbCBldmVudCBsaXN0ZW5lcnMgYXJlIHJlbW92ZWQgKi9cbiAgICAgICAgZm9yIChjb25zdCBmIG9mIHRoaXMuX29uRGVhY3RpdmF0ZUNhbGxiYWNrcylcbiAgICAgICAgICAgIGYoKTtcbiAgICAgICAgdGhpcy5fb25EZWFjdGl2YXRlQ2FsbGJhY2tzLmxlbmd0aCA9IDA7XG4gICAgfVxuICAgIG9uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5faGl0VGVzdE9iamVjdD8uZGVzdHJveSgpO1xuICAgIH1cbiAgICAvKiogJ3NlbGVjdCcgZXZlbnQgbGlzdGVuZXIgKi9cbiAgICBvblNlbGVjdChlKSB7XG4gICAgICAgIGlmIChlLmlucHV0U291cmNlLmhhbmRlZG5lc3MgIT0gdGhpcy5oYW5kZWRuZXNzKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLnJheUNhc3QoZSwgZS5mcmFtZSwgdHJ1ZSk7XG4gICAgfVxuICAgIC8qKiAnc2VsZWN0c3RhcnQnIGV2ZW50IGxpc3RlbmVyICovXG4gICAgb25TZWxlY3RTdGFydChlKSB7XG4gICAgICAgIHRoaXMuX2FyVG91Y2hEb3duID0gdHJ1ZTtcbiAgICAgICAgaWYgKGUuaW5wdXRTb3VyY2UuaGFuZGVkbmVzcyA9PSB0aGlzLmhhbmRlZG5lc3MpIHtcbiAgICAgICAgICAgIHRoaXMuX2lzRG93biA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnJheUNhc3QoZSwgZS5mcmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqICdzZWxlY3RlbmQnIGV2ZW50IGxpc3RlbmVyICovXG4gICAgb25TZWxlY3RFbmQoZSkge1xuICAgICAgICB0aGlzLl9hclRvdWNoRG93biA9IGZhbHNlO1xuICAgICAgICBpZiAoZS5pbnB1dFNvdXJjZS5oYW5kZWRuZXNzID09IHRoaXMuaGFuZGVkbmVzcykge1xuICAgICAgICAgICAgdGhpcy5faXNEb3duID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnJheUNhc3QoZSwgZS5mcmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqICdwb2ludGVybW92ZScgZXZlbnQgbGlzdGVuZXIgKi9cbiAgICBvblBvaW50ZXJNb3ZlKGUpIHtcbiAgICAgICAgLyogRG9uJ3QgY2FyZSBhYm91dCBzZWNvbmRhcnkgcG9pbnRlcnMgKi9cbiAgICAgICAgaWYgKCFlLmlzUHJpbWFyeSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy51cGRhdGVNb3VzZVBvcyhlKTtcbiAgICAgICAgdGhpcy5yYXlDYXN0KGUsIG51bGwpO1xuICAgIH1cbiAgICAvKiogJ2NsaWNrJyBldmVudCBsaXN0ZW5lciAqL1xuICAgIG9uQ2xpY2soZSkge1xuICAgICAgICB0aGlzLnVwZGF0ZU1vdXNlUG9zKGUpO1xuICAgICAgICB0aGlzLnJheUNhc3QoZSwgbnVsbCwgdHJ1ZSk7XG4gICAgfVxuICAgIC8qKiAncG9pbnRlcmRvd24nIGV2ZW50IGxpc3RlbmVyICovXG4gICAgb25Qb2ludGVyRG93bihlKSB7XG4gICAgICAgIC8qIERvbid0IGNhcmUgYWJvdXQgc2Vjb25kYXJ5IHBvaW50ZXJzIG9yIG5vbi1sZWZ0IGNsaWNrcyAqL1xuICAgICAgICBpZiAoIWUuaXNQcmltYXJ5IHx8IGUuYnV0dG9uICE9PSAwKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLnVwZGF0ZU1vdXNlUG9zKGUpO1xuICAgICAgICB0aGlzLl9pc0Rvd24gPSB0cnVlO1xuICAgICAgICB0aGlzLnJheUNhc3QoZSk7XG4gICAgfVxuICAgIC8qKiAncG9pbnRlcnVwJyBldmVudCBsaXN0ZW5lciAqL1xuICAgIG9uUG9pbnRlclVwKGUpIHtcbiAgICAgICAgLyogRG9uJ3QgY2FyZSBhYm91dCBzZWNvbmRhcnkgcG9pbnRlcnMgb3Igbm9uLWxlZnQgY2xpY2tzICovXG4gICAgICAgIGlmICghZS5pc1ByaW1hcnkgfHwgZS5idXR0b24gIT09IDApXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMudXBkYXRlTW91c2VQb3MoZSk7XG4gICAgICAgIHRoaXMuX2lzRG93biA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJheUNhc3QoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBtb3VzZSBwb3NpdGlvbiBpbiBub24tVlIgbW9kZSBhbmQgcmF5Y2FzdCBmb3IgbmV3IHBvc2l0aW9uXG4gICAgICogQHJldHVybnMgQHJlZiBSYXlIaXQgZm9yIG5ldyBwb3NpdGlvbi5cbiAgICAgKi9cbiAgICB1cGRhdGVNb3VzZVBvcyhlKSB7XG4gICAgICAgIHRoaXMuX2xhc3RQb2ludGVyUG9zWzBdID0gZS5jbGllbnRYO1xuICAgICAgICB0aGlzLl9sYXN0UG9pbnRlclBvc1sxXSA9IGUuY2xpZW50WTtcbiAgICAgICAgdGhpcy51cGRhdGVEaXJlY3Rpb24oKTtcbiAgICB9XG4gICAgdXBkYXRlRGlyZWN0aW9uKCkge1xuICAgICAgICBjb25zdCBib3VuZHMgPSB0aGlzLmVuZ2luZS5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIC8qIEdldCBkaXJlY3Rpb24gaW4gbm9ybWFsaXplZCBkZXZpY2UgY29vcmRpbmF0ZSBzcGFjZSBmcm9tIG1vdXNlIHBvc2l0aW9uICovXG4gICAgICAgIGNvbnN0IGxlZnQgPSB0aGlzLl9sYXN0UG9pbnRlclBvc1swXSAvIGJvdW5kcy53aWR0aDtcbiAgICAgICAgY29uc3QgdG9wID0gdGhpcy5fbGFzdFBvaW50ZXJQb3NbMV0gLyBib3VuZHMuaGVpZ2h0O1xuICAgICAgICB0aGlzLl9kaXJlY3Rpb25bMF0gPSBsZWZ0ICogMiAtIDE7XG4gICAgICAgIHRoaXMuX2RpcmVjdGlvblsxXSA9IC10b3AgKiAyICsgMTtcbiAgICAgICAgdGhpcy5fZGlyZWN0aW9uWzJdID0gLTEuMDtcbiAgICAgICAgdGhpcy5hcHBseVRyYW5zZm9ybUFuZFByb2plY3REaXJlY3Rpb24oKTtcbiAgICB9XG4gICAgYXBwbHlUcmFuc2Zvcm1BbmRQcm9qZWN0RGlyZWN0aW9uKCkge1xuICAgICAgICAvKiBSZXZlcnNlLXByb2plY3QgdGhlIGRpcmVjdGlvbiBpbnRvIHZpZXcgc3BhY2UgKi9cbiAgICAgICAgdmVjMy50cmFuc2Zvcm1NYXQ0KHRoaXMuX2RpcmVjdGlvbiwgdGhpcy5fZGlyZWN0aW9uLCB0aGlzLl9wcm9qZWN0aW9uTWF0cml4KTtcbiAgICAgICAgdmVjMy5ub3JtYWxpemUodGhpcy5fZGlyZWN0aW9uLCB0aGlzLl9kaXJlY3Rpb24pO1xuICAgICAgICB0aGlzLmFwcGx5VHJhbnNmb3JtVG9EaXJlY3Rpb24oKTtcbiAgICB9XG4gICAgYXBwbHlUcmFuc2Zvcm1Ub0RpcmVjdGlvbigpIHtcbiAgICAgICAgdGhpcy5vYmplY3QudHJhbnNmb3JtVmVjdG9yV29ybGQodGhpcy5fZGlyZWN0aW9uLCB0aGlzLl9kaXJlY3Rpb24pO1xuICAgICAgICB0aGlzLm9iamVjdC5nZXRQb3NpdGlvbldvcmxkKHRoaXMuX29yaWdpbik7XG4gICAgfVxuICAgIHJheUNhc3Qob3JpZ2luYWxFdmVudCwgZnJhbWUgPSBudWxsLCBkb0NsaWNrID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgcmF5SGl0ID0gdGhpcy5yYXlDYXN0TW9kZSA9PSAwXG4gICAgICAgICAgICA/IHRoaXMuZW5naW5lLnNjZW5lLnJheUNhc3QodGhpcy5fb3JpZ2luLCB0aGlzLl9kaXJlY3Rpb24sIHRoaXMuX2NvbGxpc2lvbk1hc2spXG4gICAgICAgICAgICA6IHRoaXMuZW5naW5lLnBoeXNpY3MucmF5Q2FzdCh0aGlzLl9vcmlnaW4sIHRoaXMuX2RpcmVjdGlvbiwgdGhpcy5fY29sbGlzaW9uTWFzaywgdGhpcy5tYXhEaXN0YW5jZSk7XG4gICAgICAgIGxldCBoaXRSZXN1bHREaXN0YW5jZSA9IEluZmluaXR5O1xuICAgICAgICBsZXQgaGl0VGVzdFJlc3VsdCA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLl9oaXRUZXN0TG9jYXRpb24/LnZpc2libGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2hpdFRlc3RPYmplY3QuZ2V0UG9zaXRpb25Xb3JsZCh0aGlzLmN1cnNvclBvcyk7XG4gICAgICAgICAgICBoaXRSZXN1bHREaXN0YW5jZSA9IHZlYzMuZGlzdGFuY2UodGhpcy5vYmplY3QuZ2V0UG9zaXRpb25Xb3JsZCh0ZW1wVmVjKSwgdGhpcy5jdXJzb3JQb3MpO1xuICAgICAgICAgICAgaGl0VGVzdFJlc3VsdCA9IHRoaXMuX2hpdFRlc3RMb2NhdGlvbj8uZ2V0SGl0VGVzdFJlc3VsdHMoZnJhbWUpWzBdO1xuICAgICAgICB9XG4gICAgICAgIGxldCBob3ZlcmluZ1JlYWxpdHkgPSBmYWxzZTtcbiAgICAgICAgaWYgKHJheUhpdC5oaXRDb3VudCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGQgPSByYXlIaXQuZGlzdGFuY2VzWzBdO1xuICAgICAgICAgICAgaWYgKGhpdFJlc3VsdERpc3RhbmNlID49IGQpIHtcbiAgICAgICAgICAgICAgICAvKiBPdmVycmlkZSBjdXJzb3JQb3Mgc2V0IGJ5IGhpdCB0ZXN0IGxvY2F0aW9uICovXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJzb3JQb3Muc2V0KHJheUhpdC5sb2NhdGlvbnNbMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaG92ZXJpbmdSZWFsaXR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChoaXRSZXN1bHREaXN0YW5jZSA8IEluZmluaXR5KSB7XG4gICAgICAgICAgICAvKiBjdXJzb3JQb3MgYWxyZWFkeSBzZXQgKi9cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY3Vyc29yUG9zLmZpbGwoMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhvdmVyaW5nUmVhbGl0eSAmJiAhdGhpcy5ob3ZlcmluZ1JlYWxpdHkpIHtcbiAgICAgICAgICAgIHRoaXMuaGl0VGVzdFRhcmdldC5vbkhvdmVyLm5vdGlmeShoaXRUZXN0UmVzdWx0LCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghaG92ZXJpbmdSZWFsaXR5ICYmIHRoaXMuaG92ZXJpbmdSZWFsaXR5KSB7XG4gICAgICAgICAgICB0aGlzLmhpdFRlc3RUYXJnZXQub25VbmhvdmVyLm5vdGlmeShoaXRUZXN0UmVzdWx0LCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhvdmVyaW5nUmVhbGl0eSA9IGhvdmVyaW5nUmVhbGl0eTtcbiAgICAgICAgdGhpcy5ob3ZlckJlaGF2aW91cihyYXlIaXQsIGhpdFRlc3RSZXN1bHQsIGRvQ2xpY2ssIG9yaWdpbmFsRXZlbnQpO1xuICAgICAgICByZXR1cm4gcmF5SGl0O1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmludCgxKVxuXSwgQ3Vyc29yLnByb3RvdHlwZSwgXCJjb2xsaXNpb25Hcm91cFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkub2JqZWN0KClcbl0sIEN1cnNvci5wcm90b3R5cGUsIFwiY3Vyc29yUmF5T2JqZWN0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5lbnVtKFsneCcsICd5JywgJ3onLCAnbm9uZSddLCAneicpXG5dLCBDdXJzb3IucHJvdG90eXBlLCBcImN1cnNvclJheVNjYWxpbmdBeGlzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5vYmplY3QoKVxuXSwgQ3Vyc29yLnByb3RvdHlwZSwgXCJjdXJzb3JPYmplY3RcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmVudW0oWydpbnB1dCBjb21wb25lbnQnLCAnbGVmdCcsICdyaWdodCcsICdub25lJ10sICdpbnB1dCBjb21wb25lbnQnKVxuXSwgQ3Vyc29yLnByb3RvdHlwZSwgXCJoYW5kZWRuZXNzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5lbnVtKFsnY29sbGlzaW9uJywgJ3BoeXN4J10sICdjb2xsaXNpb24nKVxuXSwgQ3Vyc29yLnByb3RvdHlwZSwgXCJyYXlDYXN0TW9kZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoMTAwKVxuXSwgQ3Vyc29yLnByb3RvdHlwZSwgXCJtYXhEaXN0YW5jZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuYm9vbCh0cnVlKVxuXSwgQ3Vyc29yLnByb3RvdHlwZSwgXCJzdHlsZUN1cnNvclwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuYm9vbChmYWxzZSlcbl0sIEN1cnNvci5wcm90b3R5cGUsIFwidXNlV2ViWFJIaXRUZXN0XCIsIHZvaWQgMCk7XG5leHBvcnQgeyBDdXJzb3IgfTtcbiIsICJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuaW1wb3J0IHsgcHJvcGVydHkgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGkvZGVjb3JhdG9ycy5qcyc7XG5pbXBvcnQgeyBxdWF0MiB9IGZyb20gJ2dsLW1hdHJpeCc7XG4vKipcbiAqIFByaW50cyBzb21lIGxpbWl0ZWQgZGVidWcgaW5mb3JtYXRpb24gYWJvdXQgdGhlIG9iamVjdC5cbiAqXG4gKiBJbmZvcm1hdGlvbiBjb25zaXN0cyBvZjogVGhpcyBvYmplY3QncyBuYW1lLCBhbiBvYmplY3QgcGFyYW1ldGVyJ3MgbmFtZSxcbiAqIHRoZSBvYmplY3QncyB3b3JsZCB0cmFuc2xhdGlvbiwgd29ybGQgdHJhbnNmb3JtIGFuZCBsb2NhbCB0cmFuc2Zvcm0uXG4gKlxuICogTWFpbmx5IHVzZWQgYnkgZW5naW5lIGRldmVsb3BlcnMgZm9yIGRlYnVnIHB1cnBvc2VzIG9yIGFzIGV4YW1wbGUgY29kZS5cbiAqL1xuY2xhc3MgRGVidWdPYmplY3QgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdkZWJ1Zy1vYmplY3QnO1xuICAgIC8qKiBBIHNlY29uZCBvYmplY3QgdG8gcHJpbnQgdGhlIG5hbWUgb2YgKi9cbiAgICBvYmogPSBudWxsO1xuICAgIHN0YXJ0KCkge1xuICAgICAgICBsZXQgb3JpZ2luID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICAgICAgcXVhdDIuZ2V0VHJhbnNsYXRpb24ob3JpZ2luLCB0aGlzLm9iamVjdC50cmFuc2Zvcm1Xb3JsZCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdEZWJ1ZyBvYmplY3Q6JywgdGhpcy5vYmplY3QubmFtZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdPdGhlciBvYmplY3Q6JywgdGhpcy5vYmo/Lm5hbWUpO1xuICAgICAgICBjb25zb2xlLmxvZygnXFx0dHJhbnNsYXRpb24nLCBvcmlnaW4pO1xuICAgICAgICBjb25zb2xlLmxvZygnXFx0dHJhbnNmb3JtV29ybGQnLCB0aGlzLm9iamVjdC50cmFuc2Zvcm1Xb3JsZCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdcXHR0cmFuc2Zvcm1Mb2NhbCcsIHRoaXMub2JqZWN0LnRyYW5zZm9ybUxvY2FsKTtcbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5vYmplY3QoKVxuXSwgRGVidWdPYmplY3QucHJvdG90eXBlLCBcIm9ialwiLCB2b2lkIDApO1xuZXhwb3J0IHsgRGVidWdPYmplY3QgfTtcbiIsICJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuLyoqXG4gKiBGdW5jdGlvbiB0byBjb252ZXJ0IGEgRXVsZXIgaW4gWVhaIG9yZGVyIHRvIGEgcXVhdGVybmlvblxuICovXG5mdW5jdGlvbiBxdWF0RnJvbUV1bGVyWVhaKG91dCwgeCwgeSwgeikge1xuICAgIGNvbnN0IGMxID0gTWF0aC5jb3MoeCAvIDIpO1xuICAgIGNvbnN0IGMyID0gTWF0aC5jb3MoeSAvIDIpO1xuICAgIGNvbnN0IGMzID0gTWF0aC5jb3MoeiAvIDIpO1xuICAgIGNvbnN0IHMxID0gTWF0aC5zaW4oeCAvIDIpO1xuICAgIGNvbnN0IHMyID0gTWF0aC5zaW4oeSAvIDIpO1xuICAgIGNvbnN0IHMzID0gTWF0aC5zaW4oeiAvIDIpO1xuICAgIG91dFswXSA9IHMxICogYzIgKiBjMyArIGMxICogczIgKiBzMztcbiAgICBvdXRbMV0gPSBjMSAqIHMyICogYzMgLSBzMSAqIGMyICogczM7XG4gICAgb3V0WzJdID0gYzEgKiBjMiAqIHMzIC0gczEgKiBzMiAqIGMzO1xuICAgIG91dFszXSA9IGMxICogYzIgKiBjMyArIHMxICogczIgKiBzMztcbn1cbi8qKlxuICogUmV0cmlldmUgZGV2aWNlIG9yaWVudGF0aW9uIGZyb20gYSBtb2JpbGUgZGV2aWNlIGFuZCBzZXQgdGhlIG9iamVjdCdzXG4gKiBvcmllbnRhdGlvbiBhY2NvcmRpbmdseS5cbiAqXG4gKiBVc2VmdWwgZm9yIG1hZ2ljIHdpbmRvdyBleHBlcmllbmNlcy5cbiAqL1xuY2xhc3MgRGV2aWNlT3JpZW50YXRpb25Mb29rIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnZGV2aWNlLW9yaWVudGF0aW9uLWxvb2snO1xuICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge307XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMucm90YXRpb25YID0gMDtcbiAgICAgICAgdGhpcy5yb3RhdGlvblkgPSAwO1xuICAgICAgICB0aGlzLmxhc3RDbGllbnRYID0gLTE7XG4gICAgICAgIHRoaXMubGFzdENsaWVudFkgPSAtMTtcbiAgICB9XG4gICAgaW5pdCgpIHtcbiAgICAgICAgLyogSW5pdGlhbGl6ZSBkZXZpY2Ugb3JpZW50YXRpb24gd2l0aCBJZGVudGl0eSBRdWF0ZXJuaW9uICovXG4gICAgICAgIHRoaXMuZGV2aWNlT3JpZW50YXRpb24gPSBbMCwgMCwgMCwgMV07XG4gICAgICAgIHRoaXMuc2NyZWVuT3JpZW50YXRpb24gPSB3aW5kb3cuaW5uZXJIZWlnaHQgPiB3aW5kb3cuaW5uZXJXaWR0aCA/IDAgOiA5MDtcbiAgICAgICAgdGhpcy5fb3JpZ2luID0gWzAsIDAsIDBdO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZGV2aWNlb3JpZW50YXRpb24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgbGV0IGFscGhhID0gZS5hbHBoYSB8fCAwO1xuICAgICAgICAgICAgbGV0IGJldGEgPSBlLmJldGEgfHwgMDtcbiAgICAgICAgICAgIGxldCBnYW1tYSA9IGUuZ2FtbWEgfHwgMDtcbiAgICAgICAgICAgIGNvbnN0IHRvUmFkID0gTWF0aC5QSSAvIDE4MDtcbiAgICAgICAgICAgIHF1YXRGcm9tRXVsZXJZWFoodGhpcy5kZXZpY2VPcmllbnRhdGlvbiwgYmV0YSAqIHRvUmFkLCBhbHBoYSAqIHRvUmFkLCAtZ2FtbWEgKiB0b1JhZCk7XG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvcmllbnRhdGlvbmNoYW5nZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnNjcmVlbk9yaWVudGF0aW9uID0gd2luZG93Lm9yaWVudGF0aW9uIHx8IDA7XG4gICAgICAgIH0uYmluZCh0aGlzKSwgZmFsc2UpO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIC8qIERvbid0IHVzZSBkZXZpY2Ugb3JpZW50YXRpb24gaW4gVlIgKi9cbiAgICAgICAgaWYgKHRoaXMuZW5naW5lLnhyKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLm9iamVjdC5nZXRUcmFuc2xhdGlvbkxvY2FsKHRoaXMuX29yaWdpbik7XG4gICAgICAgIHRoaXMub2JqZWN0LnJlc2V0VHJhbnNmb3JtKCk7XG4gICAgICAgIGlmICh0aGlzLnNjcmVlbk9yaWVudGF0aW9uICE9IDApIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnJvdGF0ZUF4aXNBbmdsZURlZyhbMCwgMCwgLTFdLCB0aGlzLnNjcmVlbk9yaWVudGF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9iamVjdC5yb3RhdGUoWy1NYXRoLnNxcnQoMC41KSwgMCwgMCwgTWF0aC5zcXJ0KDAuNSldKTtcbiAgICAgICAgdGhpcy5vYmplY3Qucm90YXRlKHRoaXMuZGV2aWNlT3JpZW50YXRpb24pO1xuICAgICAgICB0aGlzLm9iamVjdC50cmFuc2xhdGUodGhpcy5fb3JpZ2luKTtcbiAgICB9XG59XG5leHBvcnQgeyBEZXZpY2VPcmllbnRhdGlvbkxvb2sgfTtcbiIsICJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuLyoqXG4gKiBFbmFibGVzIGludGVyYWN0aW9uIHdpdGggY3Vyc29yLXRhcmdldHMgdGhyb3VnaCBjb2xsaXNpb24gb3ZlcmxhcHMsXG4gKiBlLmcuIG9uIHRoZSB0aXAgb2YgYSBmaW5nZXIgb24gYSB0cmFja2VkIGhhbmQuXG4gKlxuICogKipSZXF1aXJlbWVudHM6KipcbiAqICAtIEEgY29sbGlzaW9uIGNvbXBvbmVudCAodXN1YWxseSBhIHNwaGVyZSB3aXRoIGAwLjA1YCByYWRpdXMpIG9uIHRoZSBzYW1lIG9iamVjdFxuICpcbiAqIEBzaW5jZSAwLjguNVxuICovXG5jbGFzcyBGaW5nZXJDdXJzb3IgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdmaW5nZXItY3Vyc29yJztcbiAgICBzdGF0aWMgUHJvcGVydGllcyA9IHt9O1xuICAgIGluaXQoKSB7XG4gICAgICAgIHRoaXMubGFzdFRhcmdldCA9IG51bGw7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLnRpcCA9IHRoaXMub2JqZWN0LmdldENvbXBvbmVudCgnY29sbGlzaW9uJyk7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgY29uc3Qgb3ZlcmxhcHMgPSB0aGlzLnRpcC5xdWVyeU92ZXJsYXBzKCk7XG4gICAgICAgIGxldCBvdmVybGFwRm91bmQgPSBudWxsO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG92ZXJsYXBzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBvID0gb3ZlcmxhcHNbaV0ub2JqZWN0O1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gby5nZXRDb21wb25lbnQoJ2N1cnNvci10YXJnZXQnKTtcbiAgICAgICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRhcmdldC5lcXVhbHModGhpcy5sYXN0VGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQub25Ib3ZlcihvLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Lm9uQ2xpY2sobywgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG92ZXJsYXBGb3VuZCA9IHRhcmdldDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIW92ZXJsYXBGb3VuZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMubGFzdFRhcmdldClcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RUYXJnZXQub25VbmhvdmVyKHRoaXMubGFzdFRhcmdldC5vYmplY3QsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5sYXN0VGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubGFzdFRhcmdldCA9IG92ZXJsYXBGb3VuZDtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCB7IEZpbmdlckN1cnNvciB9O1xuIiwgImltcG9ydCB7IENvbXBvbmVudCwgVHlwZSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4vKipcbiAqIEFwcGxpZXMgW2ZpeGVkIGZvdmVhdGlvbl0oaHR0cHM6Ly93d3cudzMub3JnL1RSL3dlYnhybGF5ZXJzLTEvI2RvbS14cmNvbXBvc2l0aW9ubGF5ZXItZml4ZWRmb3ZlYXRpb24pXG4gKiBvbmNlIGEgV2ViWFIgc2Vzc2lvbiBpcyBzdGFydGVkXG4gKlxuICogRml4ZWQgZm92ZWF0aW9uIHJlZHVjZXMgc2hhZGluZyBjb3N0IGF0IHRoZSBwZXJpcGhlcnkgYnkgcmVuZGVyaW5nIGF0IGxvd2VyIHJlc29sdXRpb25zIGF0IHRoZVxuICogZWRnZXMgb2YgdGhlIHVzZXJzIHZpc2lvbi5cbiAqL1xuY2xhc3MgRml4ZWRGb3ZlYXRpb24gZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdmaXhlZC1mb3ZlYXRpb24nO1xuICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge1xuICAgICAgICAvKiogQW1vdW50IHRvIGFwcGx5IGZyb20gMCAobm9uZSkgdG8gMSAoZnVsbCkgKi9cbiAgICAgICAgZml4ZWRGb3ZlYXRpb246IHsgdHlwZTogVHlwZS5GbG9hdCwgZGVmYXVsdDogMC41IH0sXG4gICAgfTtcbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5vblNlc3Npb25TdGFydENhbGxiYWNrID0gdGhpcy5zZXRGaXhlZEZvdmVhdGlvbi5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICBvbkFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvblN0YXJ0LmFkZCh0aGlzLm9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2spO1xuICAgIH1cbiAgICBvbkRlYWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQucmVtb3ZlKHRoaXMub25TZXNzaW9uU3RhcnRDYWxsYmFjayk7XG4gICAgfVxuICAgIHNldEZpeGVkRm92ZWF0aW9uKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS54ci5iYXNlTGF5ZXIuZml4ZWRGb3ZlYXRpb24gPSB0aGlzLmZpeGVkRm92ZWF0aW9uO1xuICAgIH1cbn1cbmV4cG9ydCB7IEZpeGVkRm92ZWF0aW9uIH07XG4iLCAidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuaW1wb3J0IHsgQ29tcG9uZW50LCBNZXNoQ29tcG9uZW50LCB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaS9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IHZlYzMsIHF1YXQgfSBmcm9tICdnbC1tYXRyaXgnO1xuaW1wb3J0IHsgc2V0WFJSaWdpZFRyYW5zZm9ybUxvY2FsIH0gZnJvbSAnLi91dGlscy93ZWJ4ci5qcyc7XG5jb25zdCBPUkRFUkVEX0pPSU5UUyA9IFtcbiAgICAnd3Jpc3QnLFxuICAgICd0aHVtYi1tZXRhY2FycGFsJyxcbiAgICAndGh1bWItcGhhbGFueC1wcm94aW1hbCcsXG4gICAgJ3RodW1iLXBoYWxhbngtZGlzdGFsJyxcbiAgICAndGh1bWItdGlwJyxcbiAgICAnaW5kZXgtZmluZ2VyLW1ldGFjYXJwYWwnLFxuICAgICdpbmRleC1maW5nZXItcGhhbGFueC1wcm94aW1hbCcsXG4gICAgJ2luZGV4LWZpbmdlci1waGFsYW54LWludGVybWVkaWF0ZScsXG4gICAgJ2luZGV4LWZpbmdlci1waGFsYW54LWRpc3RhbCcsXG4gICAgJ2luZGV4LWZpbmdlci10aXAnLFxuICAgICdtaWRkbGUtZmluZ2VyLW1ldGFjYXJwYWwnLFxuICAgICdtaWRkbGUtZmluZ2VyLXBoYWxhbngtcHJveGltYWwnLFxuICAgICdtaWRkbGUtZmluZ2VyLXBoYWxhbngtaW50ZXJtZWRpYXRlJyxcbiAgICAnbWlkZGxlLWZpbmdlci1waGFsYW54LWRpc3RhbCcsXG4gICAgJ21pZGRsZS1maW5nZXItdGlwJyxcbiAgICAncmluZy1maW5nZXItbWV0YWNhcnBhbCcsXG4gICAgJ3JpbmctZmluZ2VyLXBoYWxhbngtcHJveGltYWwnLFxuICAgICdyaW5nLWZpbmdlci1waGFsYW54LWludGVybWVkaWF0ZScsXG4gICAgJ3JpbmctZmluZ2VyLXBoYWxhbngtZGlzdGFsJyxcbiAgICAncmluZy1maW5nZXItdGlwJyxcbiAgICAncGlua3ktZmluZ2VyLW1ldGFjYXJwYWwnLFxuICAgICdwaW5reS1maW5nZXItcGhhbGFueC1wcm94aW1hbCcsXG4gICAgJ3Bpbmt5LWZpbmdlci1waGFsYW54LWludGVybWVkaWF0ZScsXG4gICAgJ3Bpbmt5LWZpbmdlci1waGFsYW54LWRpc3RhbCcsXG4gICAgJ3Bpbmt5LWZpbmdlci10aXAnLFxuXTtcbmNvbnN0IGludlRyYW5zbGF0aW9uID0gdmVjMy5jcmVhdGUoKTtcbmNvbnN0IGludlJvdGF0aW9uID0gcXVhdC5jcmVhdGUoKTtcbmNvbnN0IHRlbXBWZWMwID0gdmVjMy5jcmVhdGUoKTtcbmNvbnN0IHRlbXBWZWMxID0gdmVjMy5jcmVhdGUoKTtcbi8qKlxuICogRWFzeSBoYW5kIHRyYWNraW5nIHRocm91Z2ggdGhlIFdlYlhSIERldmljZSBBUElcbiAqIFtcIkhhbmQgSW5wdXRcIiBBUEldKGh0dHBzOi8vaW1tZXJzaXZlLXdlYi5naXRodWIuaW8vd2VieHItaGFuZC1pbnB1dC8pLlxuICpcbiAqIEFsbG93cyBkaXNwbGF5aW5nIGhhbmRzIGVpdGhlciBhcyBzcGhlcmUtam9pbnRzIG9yIHNraW5uZWQgbWVzaC5cbiAqXG4gKiBUbyByZWFjdCB0byBncmFiYmluZywgdXNlIGB0aGlzLmlzR3JhYmJpbmcoKWAuIEZvciBvdGhlciBnZXN0dXJlcywgcmVmZXJcbiAqIHRvIGB0aGlzLmpvaW50c2AgLSBhbiBhcnJheSBvZiBbT2JqZWN0M0RdKC9qc2FwaS9vYmplY3QzZCkgYW5kIHVzZSB0aGUgam9pbnRcbiAqIGluZGljZXMgbGlzdGVkIFtpbiB0aGUgV2ViWFIgSGFuZCBJbnB1dCBzcGVjaWZpY2F0aW9uXShodHRwczovL2ltbWVyc2l2ZS13ZWIuZ2l0aHViLmlvL3dlYnhyLWhhbmQtaW5wdXQvI3NrZWxldG9uLWpvaW50cy1zZWN0aW9uKS5cbiAqXG4gKiBJdCBpcyBvZnRlbiBkZXNpcmVkIHRvIHVzZSBlaXRoZXIgaGFuZCB0cmFja2luZyBvciBjb250cm9sbGVycywgbm90IGJvdGguXG4gKiBUaGlzIGNvbXBvbmVudCBwcm92aWRlcyBgZGVhY3RpdmF0ZUNoaWxkcmVuV2l0aG91dFBvc2VgIHRvIGhpZGUgdGhlIGhhbmRcbiAqIHRyYWNraW5nIHZpc3VhbGl6YXRpb24gaWYgbm8gcG9zZSBpcyBhdmFpbGFibGUgYW5kIGBjb250cm9sbGVyVG9EZWFjdGl2YXRlYFxuICogZm9yIGRpc2FibGluZyBhbm90aGVyIG9iamVjdCBvbmNlIGEgaGFuZCB0cmFja2luZyBwb3NlICppcyogYXZhaWxhYmxlLlxuICogT3V0c2lkZSBvZiBYUiBzZXNzaW9ucywgdHJhY2tpbmcgb3IgY29udHJvbGxlcnMgYXJlIG5laXRoZXIgZW5hYmxlZCBub3IgZGlzYWJsZWRcbiAqIHRvIHBsYXkgd2VsbCB3aXRoIHRoZSBbdnItbW9kZS1hY3RpdmUtc3dpdGNoXSgjdnItbW9kZS1hY3RpdmUtc3dpdGNoKSBjb21wb25lbnQuXG4gKlxuICogKipSZXF1aXJlbWVudHM6KipcbiAqICAtIFRvIHVzZSBoYW5kLXRyYWNraW5nLCBlbmFibGUgXCJqb2ludCB0cmFja2luZ1wiIGluIGBjaHJvbWU6Ly9mbGFnc2Agb25cbiAqICAgIE9jdWx1cyBCcm93c2VyIGZvciBPY3VsdXMgUXVlc3QvT2N1bHVzIFF1ZXN0IDIuXG4gKlxuICogU2VlIFtIYW5kIFRyYWNraW5nIEV4YW1wbGVdKC9zaG93Y2FzZS9oYW5kLXRyYWNraW5nKS5cbiAqL1xuY2xhc3MgSGFuZFRyYWNraW5nIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnaGFuZC10cmFja2luZyc7XG4gICAgLyoqIEhhbmRlZG5lc3MgZGV0ZXJtaW5pbmcgd2hldGhlciB0byByZWNlaXZlIHRyYWNraW5nIGlucHV0IGZyb20gcmlnaHQgb3IgbGVmdCBoYW5kICovXG4gICAgaGFuZGVkbmVzcyA9IDA7XG4gICAgLyoqIChvcHRpb25hbCkgTWVzaCB0byB1c2UgdG8gdmlzdWFsaXplIGpvaW50cyAqL1xuICAgIGpvaW50TWVzaCA9IG51bGw7XG4gICAgLyoqIE1hdGVyaWFsIHRvIHVzZSBmb3IgZGlzcGxheS4gQXBwbGllZCB0byBlaXRoZXIgdGhlIHNwYXduZWQgc2tpbm5lZCBtZXNoIG9yIHRoZSBqb2ludCBzcGhlcmVzLiAqL1xuICAgIGpvaW50TWF0ZXJpYWwgPSBudWxsO1xuICAgIC8qKiAob3B0aW9uYWwpIFNraW4gdG8gYXBwbHkgdHJhY2tlZCBqb2ludCBwb3NlcyB0by4gSWYgbm90IHByZXNlbnQsXG4gICAgICogam9pbnQgc3BoZXJlcyB3aWxsIGJlIHVzZWQgZm9yIGRpc3BsYXkgaW5zdGVhZC4gKi9cbiAgICBoYW5kU2tpbiA9IG51bGw7XG4gICAgLyoqIERlYWN0aXZhdGUgY2hpbGRyZW4gaWYgbm8gcG9zZSB3YXMgdHJhY2tlZCAqL1xuICAgIGRlYWN0aXZhdGVDaGlsZHJlbldpdGhvdXRQb3NlID0gdHJ1ZTtcbiAgICAvKiogQ29udHJvbGxlciBvYmplY3RzIHRvIGFjdGl2YXRlIGluY2x1ZGluZyBjaGlsZHJlbiBpZiBubyBwb3NlIGlzIGF2YWlsYWJsZSAqL1xuICAgIGNvbnRyb2xsZXJUb0RlYWN0aXZhdGUgPSBudWxsO1xuICAgIGluaXQoKSB7XG4gICAgICAgIHRoaXMuaGFuZGVkbmVzcyA9IFsnbGVmdCcsICdyaWdodCddW3RoaXMuaGFuZGVkbmVzc107XG4gICAgfVxuICAgIGpvaW50cyA9IHt9O1xuICAgIHNlc3Npb24gPSBudWxsO1xuICAgIC8qIFdoZXRoZXIgbGFzdCB1cGRhdGUgaGFkIGEgaGFuZCBwb3NlICovXG4gICAgaGFzUG9zZSA9IGZhbHNlO1xuICAgIF9jaGlsZHJlbkFjdGl2ZSA9IHRydWU7XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGlmICghKCdYUkhhbmQnIGluIHdpbmRvdykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignV2ViWFIgSGFuZCBUcmFja2luZyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgYnJvd3Nlci4nKTtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaGFuZFNraW4pIHtcbiAgICAgICAgICAgIGNvbnN0IHNraW4gPSB0aGlzLmhhbmRTa2luO1xuICAgICAgICAgICAgY29uc3Qgam9pbnRJZHMgPSBza2luLmpvaW50SWRzO1xuICAgICAgICAgICAgLyogTWFwIHRoZSB3cmlzdCAqL1xuICAgICAgICAgICAgdGhpcy5qb2ludHNbT1JERVJFRF9KT0lOVFNbMF1dID0gdGhpcy5lbmdpbmUud3JhcE9iamVjdChqb2ludElkc1swXSk7XG4gICAgICAgICAgICAvKiBJbmRleCBpbiBPUkRFUkVEX0pPSU5UUyB0aGF0IHdlIGFyZSBtYXBwaW5nIHRvIG91ciBqb2ludHMgKi9cbiAgICAgICAgICAgIC8qIFNraXAgdGh1bWIwIGpvaW50LCBzdGFydCBhdCB0aHVtYjEgKi9cbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgam9pbnRJZHMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICAgICAgICBjb25zdCBqb2ludCA9IHRoaXMuZW5naW5lLndyYXBPYmplY3Qoam9pbnRJZHNbal0pO1xuICAgICAgICAgICAgICAgIC8qIHRpcCBqb2ludHMgYXJlIG9ubHkgbmVlZGVkIGZvciBqb2ludCByZW5kZXJpbmcsIHNvIHdlIHNraXAgdGhvc2Ugd2hpbGUgbWFwcGluZyAqL1xuICAgICAgICAgICAgICAgIHRoaXMuam9pbnRzW2pvaW50Lm5hbWVdID0gam9pbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKiBJZiB3ZSBoYXZlIGEgaGFuZCBza2luLCBubyBuZWVkIHRvIHNwYXduIHRoZSBqb2ludHMtYmFzZWQgb25lICovXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLyogU3Bhd24gam9pbnRzICovXG4gICAgICAgIGNvbnN0IGpvaW50T2JqZWN0cyA9IHRoaXMuZW5naW5lLnNjZW5lLmFkZE9iamVjdHMoT1JERVJFRF9KT0lOVFMubGVuZ3RoLCB0aGlzLm9iamVjdCwgT1JERVJFRF9KT0lOVFMubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBPUkRFUkVEX0pPSU5UUy5sZW5ndGg7ICsraikge1xuICAgICAgICAgICAgY29uc3Qgam9pbnQgPSBqb2ludE9iamVjdHNbal07XG4gICAgICAgICAgICBqb2ludC5hZGRDb21wb25lbnQoTWVzaENvbXBvbmVudCwge1xuICAgICAgICAgICAgICAgIG1lc2g6IHRoaXMuam9pbnRNZXNoLFxuICAgICAgICAgICAgICAgIG1hdGVyaWFsOiB0aGlzLmpvaW50TWF0ZXJpYWwsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuam9pbnRzW09SREVSRURfSk9JTlRTW2pdXSA9IGpvaW50O1xuICAgICAgICAgICAgam9pbnQubmFtZSA9IE9SREVSRURfSk9JTlRTW2pdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZShkdCkge1xuICAgICAgICBpZiAoIXRoaXMuZW5naW5lLnhyKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLmhhc1Bvc2UgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuZW5naW5lLnhyLnNlc3Npb24uaW5wdXRTb3VyY2VzKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZW5naW5lLnhyLnNlc3Npb24uaW5wdXRTb3VyY2VzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5wdXRTb3VyY2UgPSB0aGlzLmVuZ2luZS54ci5zZXNzaW9uLmlucHV0U291cmNlc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAoIWlucHV0U291cmNlPy5oYW5kIHx8IGlucHV0U291cmNlPy5oYW5kZWRuZXNzICE9IHRoaXMuaGFuZGVkbmVzcylcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY29uc3Qgd3Jpc3RTcGFjZSA9IGlucHV0U291cmNlLmhhbmQuZ2V0KCd3cmlzdCcpO1xuICAgICAgICAgICAgICAgIGlmICh3cmlzdFNwYWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHAgPSB0aGlzLmVuZ2luZS54ci5mcmFtZS5nZXRKb2ludFBvc2Uod3Jpc3RTcGFjZSwgdGhpcy5lbmdpbmUueHIuY3VycmVudFJlZmVyZW5jZVNwYWNlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFhSUmlnaWRUcmFuc2Zvcm1Mb2NhbCh0aGlzLm9iamVjdCwgcC50cmFuc2Zvcm0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0LmdldFJvdGF0aW9uTG9jYWwoaW52Um90YXRpb24pO1xuICAgICAgICAgICAgICAgIHF1YXQuY29uanVnYXRlKGludlJvdGF0aW9uLCBpbnZSb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmplY3QuZ2V0UG9zaXRpb25Mb2NhbChpbnZUcmFuc2xhdGlvbik7XG4gICAgICAgICAgICAgICAgLyogVGhlcmUgaXMgYSBib25lICd3cmlzdCcsIGJ1dCBpdCBqdXN0IHNpdHMgb24gdGhlIHJvb3RcbiAgICAgICAgICAgICAgICAgKiBvYmplY3QuIEl0IGNvdWxkIGhhdmUgYW4gaW5pdGlhbCB0cmFuc2Zvcm0gd2Ugd2FudCB0b1xuICAgICAgICAgICAgICAgICAqIGNsZWFyIGZvciBza2lubmluZywgdGhvdWdoLiAqL1xuICAgICAgICAgICAgICAgIHRoaXMuam9pbnRzWyd3cmlzdCddLnJlc2V0VHJhbnNmb3JtKCk7XG4gICAgICAgICAgICAgICAgLyogV3Jpc3QgaXMgYWxyZWFkeSBoYW5kbGVkLCBzbyBzdGFydCBhdCAxICovXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBPUkRFUkVEX0pPSU5UUy5sZW5ndGg7ICsraikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBqb2ludE5hbWUgPSBPUkRFUkVEX0pPSU5UU1tqXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgam9pbnQgPSB0aGlzLmpvaW50c1tqb2ludE5hbWVdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWpvaW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIGxldCBqb2ludFBvc2UgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBqb2ludFNwYWNlID0gaW5wdXRTb3VyY2UuaGFuZC5nZXQoam9pbnROYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpvaW50U3BhY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpvaW50UG9zZSA9IHRoaXMuZW5naW5lLnhyLmZyYW1lLmdldEpvaW50UG9zZShqb2ludFNwYWNlLCB0aGlzLmVuZ2luZS54ci5jdXJyZW50UmVmZXJlbmNlU3BhY2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChqb2ludFBvc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzUG9zZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBqb2ludC5yZXNldFBvc2l0aW9uUm90YXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpvaW50LnRyYW5zbGF0ZUxvY2FsKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqb2ludFBvc2UudHJhbnNmb3JtLnBvc2l0aW9uLnggLSBpbnZUcmFuc2xhdGlvblswXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqb2ludFBvc2UudHJhbnNmb3JtLnBvc2l0aW9uLnkgLSBpbnZUcmFuc2xhdGlvblsxXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqb2ludFBvc2UudHJhbnNmb3JtLnBvc2l0aW9uLnogLSBpbnZUcmFuc2xhdGlvblsyXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgam9pbnQucm90YXRlTG9jYWwoaW52Um90YXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgam9pbnQucm90YXRlT2JqZWN0KFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqb2ludFBvc2UudHJhbnNmb3JtLm9yaWVudGF0aW9uLngsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgam9pbnRQb3NlLnRyYW5zZm9ybS5vcmllbnRhdGlvbi55LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpvaW50UG9zZS50cmFuc2Zvcm0ub3JpZW50YXRpb24ueixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqb2ludFBvc2UudHJhbnNmb3JtLm9yaWVudGF0aW9uLncsXG4gICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5oYW5kU2tpbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIExhc3Qgam9pbnQgcmFkaXVzIG9mIGVhY2ggZmluZ2VyIGlzIG51bGwgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gam9pbnRQb3NlLnJhZGl1cyB8fCAwLjAwNztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqb2ludC5zZXRTY2FsaW5nTG9jYWwoW3IsIHIsIHJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaGFzUG9zZSAmJiB0aGlzLl9jaGlsZHJlbkFjdGl2ZSkge1xuICAgICAgICAgICAgdGhpcy5fY2hpbGRyZW5BY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmRlYWN0aXZhdGVDaGlsZHJlbldpdGhvdXRQb3NlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDaGlsZHJlbkFjdGl2ZShmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb250cm9sbGVyVG9EZWFjdGl2YXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyVG9EZWFjdGl2YXRlLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDaGlsZHJlbkFjdGl2ZSh0cnVlLCB0aGlzLmNvbnRyb2xsZXJUb0RlYWN0aXZhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaGFzUG9zZSAmJiAhdGhpcy5fY2hpbGRyZW5BY3RpdmUpIHtcbiAgICAgICAgICAgIHRoaXMuX2NoaWxkcmVuQWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmRlYWN0aXZhdGVDaGlsZHJlbldpdGhvdXRQb3NlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDaGlsZHJlbkFjdGl2ZSh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRyb2xsZXJUb0RlYWN0aXZhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXJUb0RlYWN0aXZhdGUuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDaGlsZHJlbkFjdGl2ZShmYWxzZSwgdGhpcy5jb250cm9sbGVyVG9EZWFjdGl2YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRDaGlsZHJlbkFjdGl2ZShhY3RpdmUsIG9iamVjdCkge1xuICAgICAgICBvYmplY3QgPSBvYmplY3QgfHwgdGhpcy5vYmplY3Q7XG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gb2JqZWN0LmNoaWxkcmVuO1xuICAgICAgICBmb3IgKGNvbnN0IG8gb2YgY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIG8uYWN0aXZlID0gYWN0aXZlO1xuICAgICAgICAgICAgdGhpcy5zZXRDaGlsZHJlbkFjdGl2ZShhY3RpdmUsIG8pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlzR3JhYmJpbmcoKSB7XG4gICAgICAgIHRoaXMuam9pbnRzWydpbmRleC1maW5nZXItdGlwJ10uZ2V0UG9zaXRpb25Mb2NhbCh0ZW1wVmVjMCk7XG4gICAgICAgIHRoaXMuam9pbnRzWyd0aHVtYi10aXAnXS5nZXRQb3NpdGlvbkxvY2FsKHRlbXBWZWMxKTtcbiAgICAgICAgcmV0dXJuIHZlYzMuc3FyRGlzdCh0ZW1wVmVjMCwgdGVtcFZlYzEpIDwgMC4wMDE7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZW51bShbJ2xlZnQnLCAncmlnaHQnXSlcbl0sIEhhbmRUcmFja2luZy5wcm90b3R5cGUsIFwiaGFuZGVkbmVzc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkubWVzaCgpXG5dLCBIYW5kVHJhY2tpbmcucHJvdG90eXBlLCBcImpvaW50TWVzaFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkubWF0ZXJpYWwoKVxuXSwgSGFuZFRyYWNraW5nLnByb3RvdHlwZSwgXCJqb2ludE1hdGVyaWFsXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5za2luKClcbl0sIEhhbmRUcmFja2luZy5wcm90b3R5cGUsIFwiaGFuZFNraW5cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmJvb2wodHJ1ZSlcbl0sIEhhbmRUcmFja2luZy5wcm90b3R5cGUsIFwiZGVhY3RpdmF0ZUNoaWxkcmVuV2l0aG91dFBvc2VcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5Lm9iamVjdCgpXG5dLCBIYW5kVHJhY2tpbmcucHJvdG90eXBlLCBcImNvbnRyb2xsZXJUb0RlYWN0aXZhdGVcIiwgdm9pZCAwKTtcbmV4cG9ydCB7IEhhbmRUcmFja2luZyB9O1xuIiwgImltcG9ydCB7IENvbXBvbmVudCwgVHlwZSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgJ2hvd2xlcic7XG4vKipcbiAqIChTcGF0aWFsKSBhdWRpbyBsaXN0ZW5lciBiYXNlZCBvbiBbSG93bGVyLmpzXShodHRwczovL2hvd2xlcmpzLmNvbS8pLlxuICpcbiAqIFJldHJpZXZlcyB0aGUgbG9jYXRpb24gYW5kIG9yaWVudGF0aW9uIG9mIHRoZSBvYmplY3QgYW5kIHBhc3NlcyBpdFxuICogdG8gW0hvd2xlci5wb3MoKV0oaHR0cHM6Ly9naXRodWIuY29tL2dvbGRmaXJlL2hvd2xlci5qcyNwb3N4LXktei1pZClcbiAqIGFuZCBbSG93bGVyLm9yaWVudGF0aW9uKCldKGh0dHBzOi8vZ2l0aHViLmNvbS9nb2xkZmlyZS9ob3dsZXIuanMjb3JpZW50YXRpb254LXktei1pZCkuXG4gKi9cbmNsYXNzIEhvd2xlckF1ZGlvTGlzdGVuZXIgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdob3dsZXItYXVkaW8tbGlzdGVuZXInO1xuICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge1xuICAgICAgICAvKiogV2hldGhlciBhdWRpbyBzaG91bGQgYmUgc3BhdGlhbGl6ZWQvcG9zaXRpb25hbC4gKi9cbiAgICAgICAgc3BhdGlhbDogeyB0eXBlOiBUeXBlLkJvb2wsIGRlZmF1bHQ6IHRydWUgfSxcbiAgICB9O1xuICAgIGluaXQoKSB7XG4gICAgICAgIHRoaXMub3JpZ2luID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICAgICAgdGhpcy5md2QgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgICAgICB0aGlzLnVwID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICBpZiAoIXRoaXMuc3BhdGlhbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5vYmplY3QuZ2V0VHJhbnNsYXRpb25Xb3JsZCh0aGlzLm9yaWdpbik7XG4gICAgICAgIHRoaXMub2JqZWN0LmdldEZvcndhcmQodGhpcy5md2QpO1xuICAgICAgICB0aGlzLm9iamVjdC5nZXRVcCh0aGlzLnVwKTtcbiAgICAgICAgSG93bGVyLnBvcyh0aGlzLm9yaWdpblswXSwgdGhpcy5vcmlnaW5bMV0sIHRoaXMub3JpZ2luWzJdKTtcbiAgICAgICAgSG93bGVyLm9yaWVudGF0aW9uKHRoaXMuZndkWzBdLCB0aGlzLmZ3ZFsxXSwgdGhpcy5md2RbMl0sIHRoaXMudXBbMF0sIHRoaXMudXBbMV0sIHRoaXMudXBbMl0pO1xuICAgIH1cbn1cbmV4cG9ydCB7IEhvd2xlckF1ZGlvTGlzdGVuZXIgfTtcbiIsICJpbXBvcnQgeyBDb21wb25lbnQsIFR5cGUgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuaW1wb3J0ICdob3dsZXInO1xuLyoqXG4gKiAoU3BhdGlhbCkgYXVkaW8gc291cmNlIGJhc2VkIG9uIFtIb3dsZXIuanNdKGh0dHBzOi8vaG93bGVyanMuY29tLykuXG4gKlxuICogQ3JlYXRlcyBhIEhvd2xlciBhdWRpbyBzb3VyY2UsIHBsYXlzIGFuIGF1ZGlvIGZpbGUgb24gaXQgYW5kIHVwZGF0ZXNcbiAqIGl0cyBwb3NpdGlvbi5cbiAqXG4gKiBPcHRpbWl6ZXMgdGhlIHBvc2l0aW9uIHVwZGF0ZSB0byBvbmx5IHVwZGF0ZSBpZiB0aGUgZGlmZmVyZW5jZSB0byBsYXN0XG4gKiBwb3NpdGlvbiBpcyBsYXJnZXIgdGhhbiBoYWxmIGEgY2VudGltZXRlci4gVG8gZm9yY2UgdXBkYXRlcyAoZS5nLiBpZlxuICogdGhlIHNvdW5kIHNvdXJjZSBpcyBfdmVyeV8gY2xvc2UgdG8gdGhlIGxpc3RlbmVyKSxcbiAqIHVzZSBgLnVwZGF0ZVBvc2l0aW9uKClgLlxuICovXG5jbGFzcyBIb3dsZXJBdWRpb1NvdXJjZSBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ2hvd2xlci1hdWRpby1zb3VyY2UnO1xuICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge1xuICAgICAgICAvKiogVm9sdW1lICovXG4gICAgICAgIHZvbHVtZTogeyB0eXBlOiBUeXBlLkZsb2F0LCBkZWZhdWx0OiAxLjAgfSxcbiAgICAgICAgLyoqIFdoZXRoZXIgYXVkaW8gc2hvdWxkIGJlIHNwYXRpYWxpemVkL3Bvc2l0aW9uYWwgKi9cbiAgICAgICAgc3BhdGlhbDogeyB0eXBlOiBUeXBlLkJvb2wsIGRlZmF1bHQ6IHRydWUgfSxcbiAgICAgICAgLyoqIFdoZXRoZXIgdG8gbG9vcCB0aGUgc291bmQgKi9cbiAgICAgICAgbG9vcDogeyB0eXBlOiBUeXBlLkJvb2wsIGRlZmF1bHQ6IGZhbHNlIH0sXG4gICAgICAgIC8qKiBXaGV0aGVyIHRvIHN0YXJ0IHBsYXlpbmcgYXV0b21hdGljYWxseSAqL1xuICAgICAgICBhdXRvcGxheTogeyB0eXBlOiBUeXBlLkJvb2wsIGRlZmF1bHQ6IGZhbHNlIH0sXG4gICAgICAgIC8qKiBVUkwgdG8gYSBzb3VuZCBmaWxlIHRvIHBsYXkgKi9cbiAgICAgICAgc3JjOiB7IHR5cGU6IFR5cGUuU3RyaW5nLCBkZWZhdWx0OiAnJyB9LFxuICAgIH07XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuYXVkaW8gPSBuZXcgSG93bCh7XG4gICAgICAgICAgICBzcmM6IFt0aGlzLnNyY10sXG4gICAgICAgICAgICBsb29wOiB0aGlzLmxvb3AsXG4gICAgICAgICAgICB2b2x1bWU6IHRoaXMudm9sdW1lLFxuICAgICAgICAgICAgYXV0b3BsYXk6IHRoaXMuYXV0b3BsYXksXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmxhc3RQbGF5ZWRBdWRpb0lkID0gbnVsbDtcbiAgICAgICAgdGhpcy5vcmlnaW4gPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgICAgICB0aGlzLmxhc3RPcmlnaW4gPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgICAgICBpZiAodGhpcy5zcGF0aWFsICYmIHRoaXMuYXV0b3BsYXkpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUG9zaXRpb24oKTtcbiAgICAgICAgICAgIHRoaXMucGxheSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNwYXRpYWwgfHwgIXRoaXMubGFzdFBsYXllZEF1ZGlvSWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMub2JqZWN0LmdldFRyYW5zbGF0aW9uV29ybGQodGhpcy5vcmlnaW4pO1xuICAgICAgICAvKiBPbmx5IGNhbGwgcG9zKCkgaWYgdGhlIHBvc2l0aW9uIG1vdmVkIG1vcmUgdGhhbiBoYWxmIGEgY2VudGltZXRlclxuICAgICAgICAgKiBvdGhlcndpc2UgdGhpcyBnZXRzIHZlcnkgcGVyZm9ybWFuY2UgaGVhdnkuXG4gICAgICAgICAqIFNtYWxsZXIgbW92ZW1lbnQgc2hvdWxkIG9ubHkgYmUgcGVyY2VpdmFibGUgaWYgY2xvc2UgdG8gdGhlXG4gICAgICAgICAqIGVhciBhbnl3YXkuICovXG4gICAgICAgIGlmIChNYXRoLmFicyh0aGlzLmxhc3RPcmlnaW5bMF0gLSB0aGlzLm9yaWdpblswXSkgPiAwLjAwNSB8fFxuICAgICAgICAgICAgTWF0aC5hYnModGhpcy5sYXN0T3JpZ2luWzFdIC0gdGhpcy5vcmlnaW5bMV0pID4gMC4wMDUgfHxcbiAgICAgICAgICAgIE1hdGguYWJzKHRoaXMubGFzdE9yaWdpblsyXSAtIHRoaXMub3JpZ2luWzJdKSA+IDAuMDA1KSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVBvc2l0aW9uKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlUG9zaXRpb24oKSB7XG4gICAgICAgIHRoaXMuYXVkaW8ucG9zKHRoaXMub3JpZ2luWzBdLCB0aGlzLm9yaWdpblsxXSwgdGhpcy5vcmlnaW5bMl0sIHRoaXMubGFzdFBsYXllZEF1ZGlvSWQpO1xuICAgICAgICB0aGlzLmxhc3RPcmlnaW4uc2V0KHRoaXMub3JpZ2luKTtcbiAgICB9XG4gICAgcGxheSgpIHtcbiAgICAgICAgaWYgKHRoaXMubGFzdFBsYXllZEF1ZGlvSWQpXG4gICAgICAgICAgICB0aGlzLmF1ZGlvLnN0b3AodGhpcy5sYXN0UGxheWVkQXVkaW9JZCk7XG4gICAgICAgIHRoaXMubGFzdFBsYXllZEF1ZGlvSWQgPSB0aGlzLmF1ZGlvLnBsYXkoKTtcbiAgICAgICAgaWYgKHRoaXMuc3BhdGlhbClcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUG9zaXRpb24oKTtcbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmxhc3RQbGF5ZWRBdWRpb0lkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLmF1ZGlvLnN0b3AodGhpcy5sYXN0UGxheWVkQXVkaW9JZCk7XG4gICAgICAgIHRoaXMubGFzdFBsYXllZEF1ZGlvSWQgPSBudWxsO1xuICAgIH1cbiAgICBvbkRlYWN0aXZhdGUoKSB7XG4gICAgICAgIC8qIFN0b3Agc291bmQgd2hlbiBjb21wb25lbnQgaXMgZGVhY3RpdmF0ZWQgb3IgZGVzdHJveWVkLCBlLmcuXG4gICAgICAgICAqIHdoZW4gc3dpdGNoaW5nIHNjZW5lcyAqL1xuICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICB9XG59XG5leHBvcnQgeyBIb3dsZXJBdWRpb1NvdXJjZSB9O1xuIiwgIi8qKlxuICogU2V0IHRoZSBkaWZmdXNlL2ZsYXQgdGV4dHVyZSBvZiBrbm93biBwaXBlbGluZXMuXG4gKlxuICogQHBhcmFtIG1hdCBNYXRlcmlhbCB0byBzZXQgdGhlIHRleHR1cmUgb25cbiAqIEBwYXJhbSB0ZXh0dXJlIFRleHR1cmUgdG8gc2V0XG4gKiBAcGFyYW0gY3VzdG9tVGV4dHVyZVByb3BlcnR5IFRleHR1cmUgcHJvcGVydHkgdG8gc2V0IG9yIGAnYXV0bydgIHRvIGF1dG9tYXRpY2FsbHlcbiAqICAgICAgZGV0ZWN0IHRoZSByaWdodCB0ZXh0dXJlIHByb3BlcnR5IGJhc2VkIG9uIGtub3duIHBpcGVsaW5lLlxuICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBwcm9wZXJ0eSB3YXMgc2V0LCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldEZpcnN0TWF0ZXJpYWxUZXh0dXJlKG1hdCwgdGV4dHVyZSwgY3VzdG9tVGV4dHVyZVByb3BlcnR5KSB7XG4gICAgaWYgKGN1c3RvbVRleHR1cmVQcm9wZXJ0eSAhPT0gJ2F1dG8nKSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgbWF0W2N1c3RvbVRleHR1cmVQcm9wZXJ0eV0gPSB0ZXh0dXJlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3Qgc2hhZGVyID0gbWF0LnNoYWRlcjtcbiAgICBpZiAoc2hhZGVyID09PSAnRmxhdCBPcGFxdWUgVGV4dHVyZWQnKSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgbWF0LmZsYXRUZXh0dXJlID0gdGV4dHVyZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNoYWRlciA9PT0gJ1Bob25nIE9wYXF1ZSBUZXh0dXJlZCcgfHxcbiAgICAgICAgc2hhZGVyID09PSAnRm9saWFnZScgfHxcbiAgICAgICAgc2hhZGVyID09PSAnUGhvbmcgTm9ybWFsbWFwcGVkJyB8fFxuICAgICAgICBzaGFkZXIgPT09ICdQaG9uZyBMaWdodG1hcHBlZCcpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBtYXQuZGlmZnVzZVRleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2hhZGVyID09PSAnUGFydGljbGUnKSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgbWF0Lm1haW5UZXh0dXJlID0gdGV4dHVyZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNoYWRlciA9PT0gJ0Rpc3RhbmNlRmllbGRWZWN0b3InKSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgbWF0LnZlY3RvclRleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2hhZGVyID09PSAnQmFja2dyb3VuZCcgfHwgc2hhZGVyID09PSAnU2t5Jykge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIG1hdC50ZXh0dXJlID0gdGV4dHVyZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNoYWRlciA9PT0gJ1BoeXNpY2FsIE9wYXF1ZSBUZXh0dXJlZCcpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBtYXQuYWxiZWRvVGV4dHVyZSA9IHRleHR1cmU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgZnVuY3Rpb24gZGVnMnJhZCh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAqIE1hdGguUEkgLyAxODAuMDtcbn1cbmV4cG9ydCBmdW5jdGlvbiByYWQyZGVnKHZhbHVlKSB7XG4gICAgcmV0dXJuICh2YWx1ZSAqIDE4MC4wKSAvIE1hdGguUEk7XG59XG4iLCAiaW1wb3J0IHsgQ29tcG9uZW50LCBQcm9wZXJ0eSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgeyBzZXRGaXJzdE1hdGVyaWFsVGV4dHVyZSB9IGZyb20gJy4vdXRpbHMvdXRpbHMuanMnO1xuLyoqXG4gKiBEb3dubG9hZHMgYW4gaW1hZ2UgZnJvbSBVUkwgYW5kIGFwcGxpZXMgaXQgYXMgYGRpZmZ1c2VUZXh0dXJlYCBvciBgZmxhdFRleHR1cmVgXG4gKiB0byBhbiBhdHRhY2hlZCBtZXNoIGNvbXBvbmVudC5cbiAqXG4gKiBNYXRlcmlhbHMgZnJvbSB0aGUgZm9sbG93aW5nIHNoYWRlcnMgYXJlIHN1cHBvcnRlZDpcbiAqICAtIFwiUGhvbmcgT3BhcXVlIFRleHR1cmVkXCJcbiAqICAtIFwiRmxhdCBPcGFxdWUgVGV4dHVyZWRcIlxuICogIC0gXCJCYWNrZ3JvdW5kXCJcbiAqICAtIFwiUGh5c2ljYWwgT3BhcXVlIFRleHR1cmVkXCJcbiAqICAtIFwiRm9saWFnZVwiXG4gKi9cbmNsYXNzIEltYWdlVGV4dHVyZSBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ2ltYWdlLXRleHR1cmUnO1xuICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge1xuICAgICAgICAvKiogVVJMIHRvIGRvd25sb2FkIHRoZSBpbWFnZSBmcm9tICovXG4gICAgICAgIHVybDogUHJvcGVydHkuc3RyaW5nKCksXG4gICAgICAgIC8qKiBNYXRlcmlhbCB0byBhcHBseSB0aGUgdmlkZW8gdGV4dHVyZSB0byAqL1xuICAgICAgICBtYXRlcmlhbDogUHJvcGVydHkubWF0ZXJpYWwoKSxcbiAgICAgICAgLyoqIE5hbWUgb2YgdGhlIHRleHR1cmUgcHJvcGVydHkgdG8gc2V0ICovXG4gICAgICAgIHRleHR1cmVQcm9wZXJ0eTogUHJvcGVydHkuc3RyaW5nKCdhdXRvJyksXG4gICAgfTtcbiAgICBzdGFydCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLm1hdGVyaWFsKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcignaW1hZ2UtdGV4dHVyZTogbWF0ZXJpYWwgcHJvcGVydHkgbm90IHNldCcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW5naW5lLnRleHR1cmVzXG4gICAgICAgICAgICAubG9hZCh0aGlzLnVybCwgJ2Fub255bW91cycpXG4gICAgICAgICAgICAudGhlbigodGV4dHVyZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbWF0ID0gdGhpcy5tYXRlcmlhbDtcbiAgICAgICAgICAgIGlmICghc2V0Rmlyc3RNYXRlcmlhbFRleHR1cmUobWF0LCB0ZXh0dXJlLCB0aGlzLnRleHR1cmVQcm9wZXJ0eSkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdTaGFkZXInLCBtYXQuc2hhZGVyLCAnbm90IHN1cHBvcnRlZCBieSBpbWFnZS10ZXh0dXJlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goY29uc29sZS5lcnIpO1xuICAgIH1cbn1cbmV4cG9ydCB7IEltYWdlVGV4dHVyZSB9O1xuIiwgInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaS9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IHZlYzMgfSBmcm9tICdnbC1tYXRyaXgnO1xuY29uc3QgcHJldmVudERlZmF1bHQgPSAoZSkgPT4geyBlLnByZXZlbnREZWZhdWx0KCk7IH07XG4vKipcbiAqIENvbnRyb2xzIHRoZSBjYW1lcmEgb3JpZW50YXRpb24gdGhyb3VnaCBtb3VzZSBtb3ZlbWVudC5cbiAqXG4gKiBFZmZpY2llbnRseSBpbXBsZW1lbnRlZCB0byBhZmZlY3Qgb2JqZWN0IG9yaWVudGF0aW9uIG9ubHlcbiAqIHdoZW4gdGhlIG1vdXNlIG1vdmVzLlxuICovXG5jbGFzcyBNb3VzZUxvb2tDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICdtb3VzZS1sb29rJztcbiAgICAvKiogTW91c2UgbG9vayBzZW5zaXRpdml0eSAqL1xuICAgIHNlbnNpdGl0eSA9IDAuMjU7XG4gICAgLyoqIFJlcXVpcmUgYSBtb3VzZSBidXR0b24gdG8gYmUgcHJlc3NlZCB0byBjb250cm9sIHZpZXcuXG4gICAgICogT3RoZXJ3aXNlIHZpZXcgd2lsbCBhbGx3YXlzIGZvbGxvdyBtb3VzZSBtb3ZlbWVudCAqL1xuICAgIHJlcXVpcmVNb3VzZURvd24gPSB0cnVlO1xuICAgIC8qKiBJZiBcIm1vdmVPbkNsaWNrXCIgaXMgZW5hYmxlZCwgbW91c2UgYnV0dG9uIHdoaWNoIHNob3VsZFxuICAgICAqIGJlIGhlbGQgZG93biB0byBjb250cm9sIHZpZXcgKi9cbiAgICBtb3VzZUJ1dHRvbkluZGV4ID0gMDtcbiAgICAvKiogRW5hYmxlcyBwb2ludGVyIGxvY2sgb24gXCJtb3VzZWRvd25cIiBldmVudCBvbiBjYW52YXMgKi9cbiAgICBwb2ludGVyTG9ja09uQ2xpY2sgPSBmYWxzZTtcbiAgICBjdXJyZW50Um90YXRpb25ZID0gMDtcbiAgICBjdXJyZW50Um90YXRpb25YID0gMDtcbiAgICBvcmlnaW4gPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgIHBhcmVudE9yaWdpbiA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgcm90YXRpb25YID0gMDtcbiAgICByb3RhdGlvblkgPSAwO1xuICAgIG1vdXNlRG93biA9IGZhbHNlO1xuICAgIG9uQWN0aXZhdGUoKSB7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25Nb3VzZU1vdmUpO1xuICAgICAgICBjb25zdCBjYW52YXMgPSB0aGlzLmVuZ2luZS5jYW52YXM7XG4gICAgICAgIGlmICh0aGlzLnBvaW50ZXJMb2NrT25DbGljaykge1xuICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMucmVxdWVzdFBvaW50ZXJMb2NrKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5yZXF1aXJlTW91c2VEb3duKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5tb3VzZUJ1dHRvbkluZGV4ID09PSAyKSB7XG4gICAgICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgcHJldmVudERlZmF1bHQsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm9uTW91c2VEb3duKTtcbiAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5vbk1vdXNlVXApO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uRGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbk1vdXNlTW92ZSk7XG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuZW5naW5lLmNhbnZhcztcbiAgICAgICAgaWYgKHRoaXMucG9pbnRlckxvY2tPbkNsaWNrKSB7XG4gICAgICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5yZXF1ZXN0UG9pbnRlckxvY2spO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnJlcXVpcmVNb3VzZURvd24pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm1vdXNlQnV0dG9uSW5kZXggPT09IDIpIHtcbiAgICAgICAgICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBwcmV2ZW50RGVmYXVsdCwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25Nb3VzZURvd24pO1xuICAgICAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm9uTW91c2VVcCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVxdWVzdFBvaW50ZXJMb2NrID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBjYW52YXMgPSB0aGlzLmVuZ2luZS5jYW52YXM7XG4gICAgICAgIGNhbnZhcy5yZXF1ZXN0UG9pbnRlckxvY2sgPVxuICAgICAgICAgICAgY2FudmFzLnJlcXVlc3RQb2ludGVyTG9jayB8fFxuICAgICAgICAgICAgICAgIGNhbnZhcy5tb3pSZXF1ZXN0UG9pbnRlckxvY2sgfHxcbiAgICAgICAgICAgICAgICBjYW52YXMud2Via2l0UmVxdWVzdFBvaW50ZXJMb2NrO1xuICAgICAgICBjYW52YXMucmVxdWVzdFBvaW50ZXJMb2NrKCk7XG4gICAgfTtcbiAgICBvbk1vdXNlRG93biA9IChlKSA9PiB7XG4gICAgICAgIGlmIChlLmJ1dHRvbiA9PT0gdGhpcy5tb3VzZUJ1dHRvbkluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLm1vdXNlRG93biA9IHRydWU7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICdncmFiYmluZyc7XG4gICAgICAgICAgICBpZiAoZS5idXR0b24gPT09IDEpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgLyogUHJldmVudCBzY3JvbGxpbmcgKi9cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIG9uTW91c2VVcCA9IChlKSA9PiB7XG4gICAgICAgIGlmIChlLmJ1dHRvbiA9PT0gdGhpcy5tb3VzZUJ1dHRvbkluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLm1vdXNlRG93biA9IGZhbHNlO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSAnaW5pdGlhbCc7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIG9uTW91c2VNb3ZlID0gKGUpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlICYmICh0aGlzLm1vdXNlRG93biB8fCAhdGhpcy5yZXF1aXJlTW91c2VEb3duKSkge1xuICAgICAgICAgICAgdGhpcy5yb3RhdGlvblkgPSAoLXRoaXMuc2Vuc2l0aXR5ICogZS5tb3ZlbWVudFgpIC8gMTAwO1xuICAgICAgICAgICAgdGhpcy5yb3RhdGlvblggPSAoLXRoaXMuc2Vuc2l0aXR5ICogZS5tb3ZlbWVudFkpIC8gMTAwO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50Um90YXRpb25YICs9IHRoaXMucm90YXRpb25YO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50Um90YXRpb25ZICs9IHRoaXMucm90YXRpb25ZO1xuICAgICAgICAgICAgLyogMS41MDcgPSBQSS8yID0gOTBcdTAwQjAgKi9cbiAgICAgICAgICAgIHRoaXMuY3VycmVudFJvdGF0aW9uWCA9IE1hdGgubWluKDEuNTA3LCB0aGlzLmN1cnJlbnRSb3RhdGlvblgpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50Um90YXRpb25YID0gTWF0aC5tYXgoLTEuNTA3LCB0aGlzLmN1cnJlbnRSb3RhdGlvblgpO1xuICAgICAgICAgICAgdGhpcy5vYmplY3QuZ2V0UG9zaXRpb25Xb3JsZCh0aGlzLm9yaWdpbik7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnQgPSB0aGlzLm9iamVjdC5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgICAgICAgICAgcGFyZW50LmdldFBvc2l0aW9uV29ybGQodGhpcy5wYXJlbnRPcmlnaW4pO1xuICAgICAgICAgICAgICAgIHZlYzMuc3ViKHRoaXMub3JpZ2luLCB0aGlzLm9yaWdpbiwgdGhpcy5wYXJlbnRPcmlnaW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vYmplY3QucmVzZXRQb3NpdGlvblJvdGF0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5yb3RhdGVBeGlzQW5nbGVSYWRMb2NhbChbMSwgMCwgMF0sIHRoaXMuY3VycmVudFJvdGF0aW9uWCk7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5yb3RhdGVBeGlzQW5nbGVSYWRMb2NhbChbMCwgMSwgMF0sIHRoaXMuY3VycmVudFJvdGF0aW9uWSk7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC50cmFuc2xhdGVMb2NhbCh0aGlzLm9yaWdpbik7XG4gICAgICAgIH1cbiAgICB9O1xufVxuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoMC4yNSlcbl0sIE1vdXNlTG9va0NvbXBvbmVudC5wcm90b3R5cGUsIFwic2Vuc2l0aXR5XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5ib29sKHRydWUpXG5dLCBNb3VzZUxvb2tDb21wb25lbnQucHJvdG90eXBlLCBcInJlcXVpcmVNb3VzZURvd25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmludCgpXG5dLCBNb3VzZUxvb2tDb21wb25lbnQucHJvdG90eXBlLCBcIm1vdXNlQnV0dG9uSW5kZXhcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmJvb2woZmFsc2UpXG5dLCBNb3VzZUxvb2tDb21wb25lbnQucHJvdG90eXBlLCBcInBvaW50ZXJMb2NrT25DbGlja1wiLCB2b2lkIDApO1xuZXhwb3J0IHsgTW91c2VMb29rQ29tcG9uZW50IH07XG4iLCAidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbmltcG9ydCB7IHByb3BlcnR5IH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpL2RlY29yYXRvcnMuanMnO1xuLyoqXG4gKiBTZXQgcGxheWVyIGhlaWdodCBmb3IgYSBZLW9mZnNldCBhYm92ZSB0aGUgZ3JvdW5kIGZvclxuICogJ2xvY2FsJyBhbmQgJ3ZpZXdlcicgcmVmZXJlbmNlIHNwYWNlcy5cbiAqL1xuY2xhc3MgUGxheWVySGVpZ2h0IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAncGxheWVyLWhlaWdodCc7XG4gICAgaGVpZ2h0ID0gMS43NTtcbiAgICBvblNlc3Npb25TdGFydENhbGxiYWNrO1xuICAgIG9uU2Vzc2lvbkVuZENhbGxiYWNrO1xuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLm9iamVjdC5yZXNldFBvc2l0aW9uUm90YXRpb24oKTtcbiAgICAgICAgdGhpcy5vYmplY3QudHJhbnNsYXRlTG9jYWwoWzAuMCwgdGhpcy5oZWlnaHQsIDAuMF0pO1xuICAgICAgICB0aGlzLm9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2sgPSB0aGlzLm9uWFJTZXNzaW9uU3RhcnQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vblNlc3Npb25FbmRDYWxsYmFjayA9IHRoaXMub25YUlNlc3Npb25FbmQuYmluZCh0aGlzKTtcbiAgICB9XG4gICAgb25BY3RpdmF0ZSgpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUub25YUlNlc3Npb25TdGFydC5hZGQodGhpcy5vblNlc3Npb25TdGFydENhbGxiYWNrKTtcbiAgICAgICAgdGhpcy5lbmdpbmUub25YUlNlc3Npb25FbmQuYWRkKHRoaXMub25TZXNzaW9uRW5kQ2FsbGJhY2spO1xuICAgIH1cbiAgICBvbkRlYWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQucmVtb3ZlKHRoaXMub25TZXNzaW9uU3RhcnRDYWxsYmFjayk7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uRW5kLnJlbW92ZSh0aGlzLm9uU2Vzc2lvbkVuZENhbGxiYWNrKTtcbiAgICB9XG4gICAgb25YUlNlc3Npb25TdGFydCgpIHtcbiAgICAgICAgY29uc3QgdHlwZSA9IHRoaXMuZW5naW5lLnhyPy5jdXJyZW50UmVmZXJlbmNlU3BhY2VUeXBlO1xuICAgICAgICBpZiAodHlwZSAhPT0gJ2xvY2FsJyAmJiB0eXBlICE9PSAndmlld2VyJykge1xuICAgICAgICAgICAgdGhpcy5vYmplY3QucmVzZXRQb3NpdGlvblJvdGF0aW9uKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25YUlNlc3Npb25FbmQoKSB7XG4gICAgICAgIGNvbnN0IHR5cGUgPSB0aGlzLmVuZ2luZS54cj8uY3VycmVudFJlZmVyZW5jZVNwYWNlVHlwZTtcbiAgICAgICAgaWYgKHR5cGUgIT09ICdsb2NhbCcgJiYgdHlwZSAhPT0gJ3ZpZXdlcicpIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnJlc2V0UG9zaXRpb25Sb3RhdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5vYmplY3QudHJhbnNsYXRlTG9jYWwoWzAuMCwgdGhpcy5oZWlnaHQsIDAuMF0pO1xuICAgICAgICB9XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoMS43NSlcbl0sIFBsYXllckhlaWdodC5wcm90b3R5cGUsIFwiaGVpZ2h0XCIsIHZvaWQgMCk7XG5leHBvcnQgeyBQbGF5ZXJIZWlnaHQgfTtcbiIsICJpbXBvcnQgeyBDb21wb25lbnQsIFR5cGUgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuLyoqXG4gKiBTZXRzIHRoZSB0YXJnZXQgZnJhbWVyYXRlXG4gKlxuICogW1VwZGF0ZXMgdGhlIHRhcmdldCBmcmFtZXJhdGVdKGh0dHBzOi8vaW1tZXJzaXZlLXdlYi5naXRodWIuaW8vd2VieHIvI2RvbS14cnNlc3Npb24tdXBkYXRldGFyZ2V0ZnJhbWVyYXRlKVxuICogdG8gdGhlIGNsb3Nlc3QgW3N1cHBvcnRlZCB0YXJnZXQgZnJhbWVyYXRlXShodHRwczovL2ltbWVyc2l2ZS13ZWIuZ2l0aHViLmlvL3dlYnhyLyNkb20teHJzZXNzaW9uLXN1cHBvcnRlZEZyYW1lUmF0ZXMpXG4gKiB0byB0aGUgZ2l2ZW4gYGZyYW1lcmF0ZWAuXG4gKlxuICogVGhlIHRhcmdldCBmcmFtZXJhdGUgaXMgdXNlZCBmb3IgdGhlIGRldmljZSdzIFZSIGNvbXBvc2l0b3IgYXMgYW4gaW5kaWNhdGlvbiBvZiBob3cgb2Z0ZW4gdG8gcmVmcmVzaCB0aGVcbiAqIHNjcmVlbiB3aXRoIG5ldyBpbWFnZXMuIFRoaXMgbWVhbnMgdGhlIGFwcCB3aWxsIGJlIGFza2VkIHRvIHByb2R1Y2UgZnJhbWVzIGluIG1vcmUgcmVndWxhciBpbnRlcnZhbHMsXG4gKiBwb3RlbnRpYWxseSBzcGVuZGluZyBsZXNzIHRpbWUgb24gZnJhbWVzIHRoYXQgYXJlIGxpa2VseSB0byBiZSBkcm9wcGVkLlxuICpcbiAqIEZvciBhcHBzIHdpdGggaGVhdnkgbG9hZCwgc2V0dGluZyBhIHdlbGwgbWF0Y2hpbmcgdGFyZ2V0IGZyYW1lcmF0ZSBjYW4gaW1wcm92ZSB0aGUgYXBwcyByZW5kZXJpbmcgc3RhYmlsaXR5XG4gKiBhbmQgcmVkdWNlIHN0dXR0ZXIuXG4gKlxuICogTGlrZXdpc2UsIHRoZSB0YXJnZXQgZnJhbWVyYXRlIGNhbiBiZSB1c2VkIHRvIGVuYWJsZSAxMjBIeiByZWZyZXNoIHJhdGVzIG9uIE9jdWx1cyBRdWVzdCAyIG9uIHNpbXBsZXIgYXBwcy5cbiAqL1xuY2xhc3MgVGFyZ2V0RnJhbWVyYXRlIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAndGFyZ2V0LWZyYW1lcmF0ZSc7XG4gICAgc3RhdGljIFByb3BlcnRpZXMgPSB7XG4gICAgICAgIGZyYW1lcmF0ZTogeyB0eXBlOiBUeXBlLkZsb2F0LCBkZWZhdWx0OiA5MC4wIH0sXG4gICAgfTtcbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5vblNlc3Npb25TdGFydENhbGxiYWNrID0gdGhpcy5zZXRUYXJnZXRGcmFtZXJhdGUuYmluZCh0aGlzKTtcbiAgICB9XG4gICAgb25BY3RpdmF0ZSgpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUub25YUlNlc3Npb25TdGFydC5hZGQodGhpcy5vblNlc3Npb25TdGFydENhbGxiYWNrKTtcbiAgICB9XG4gICAgb25EZWFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvblN0YXJ0LnJlbW92ZSh0aGlzLm9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2spO1xuICAgIH1cbiAgICBzZXRUYXJnZXRGcmFtZXJhdGUocykge1xuICAgICAgICBpZiAocy5zdXBwb3J0ZWRGcmFtZVJhdGVzICYmIHMudXBkYXRlVGFyZ2V0RnJhbWVSYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBhID0gdGhpcy5lbmdpbmUueHIuc2Vzc2lvbi5zdXBwb3J0ZWRGcmFtZVJhdGVzO1xuICAgICAgICAgICAgYS5zb3J0KChhLCBiKSA9PiBNYXRoLmFicyhhIC0gdGhpcy5mcmFtZXJhdGUpIC0gTWF0aC5hYnMoYiAtIHRoaXMuZnJhbWVyYXRlKSk7XG4gICAgICAgICAgICB0aGlzLmVuZ2luZS54ci5zZXNzaW9uLnVwZGF0ZVRhcmdldEZyYW1lUmF0ZShhWzBdKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCB7IFRhcmdldEZyYW1lcmF0ZSB9O1xuIiwgImltcG9ydCB7IHZlYzMsIHF1YXQyIH0gZnJvbSAnZ2wtbWF0cml4JztcbmltcG9ydCB7IENvbXBvbmVudCwgVHlwZSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG4vKipcbiAqIFRlbGVwb3J0IFZSIGxvY29tb3Rpb24uXG4gKlxuICogU2VlIFtUZWxlcG9ydCBFeGFtcGxlXSgvc2hvd2Nhc2UvdGVsZXBvcnQpLlxuICovXG5jbGFzcyBUZWxlcG9ydENvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ3RlbGVwb3J0JztcbiAgICBzdGF0aWMgUHJvcGVydGllcyA9IHtcbiAgICAgICAgLyoqIE9iamVjdCB0aGF0IHdpbGwgYmUgcGxhY2VkIGFzIGluZGljaWF0aW9uIGZvcndoZXJlIHRoZSBwbGF5ZXIgd2lsbCB0ZWxlcG9ydCB0by4gKi9cbiAgICAgICAgdGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0OiB7IHR5cGU6IFR5cGUuT2JqZWN0IH0sXG4gICAgICAgIC8qKiBSb290IG9mIHRoZSBwbGF5ZXIsIHRoZSBvYmplY3QgdGhhdCB3aWxsIGJlIHBvc2l0aW9uZWQgb24gdGVsZXBvcnRhdGlvbi4gKi9cbiAgICAgICAgY2FtUm9vdDogeyB0eXBlOiBUeXBlLk9iamVjdCB9LFxuICAgICAgICAvKiogTm9uLXZyIGNhbWVyYSBmb3IgdXNlIG91dHNpZGUgb2YgVlIgKi9cbiAgICAgICAgY2FtOiB7IHR5cGU6IFR5cGUuT2JqZWN0IH0sXG4gICAgICAgIC8qKiBMZWZ0IGV5ZSBmb3IgdXNlIGluIFZSKi9cbiAgICAgICAgZXllTGVmdDogeyB0eXBlOiBUeXBlLk9iamVjdCB9LFxuICAgICAgICAvKiogUmlnaHQgZXllIGZvciB1c2UgaW4gVlIqL1xuICAgICAgICBleWVSaWdodDogeyB0eXBlOiBUeXBlLk9iamVjdCB9LFxuICAgICAgICAvKiogSGFuZGVkbmVzcyBmb3IgVlIgY3Vyc29ycyB0byBhY2NlcHQgdHJpZ2dlciBldmVudHMgb25seSBmcm9tIHJlc3BlY3RpdmUgY29udHJvbGxlci4gKi9cbiAgICAgICAgaGFuZGVkbmVzczoge1xuICAgICAgICAgICAgdHlwZTogVHlwZS5FbnVtLFxuICAgICAgICAgICAgdmFsdWVzOiBbJ2lucHV0IGNvbXBvbmVudCcsICdsZWZ0JywgJ3JpZ2h0JywgJ25vbmUnXSxcbiAgICAgICAgICAgIGRlZmF1bHQ6ICdpbnB1dCBjb21wb25lbnQnLFxuICAgICAgICB9LFxuICAgICAgICAvKiogQ29sbGlzaW9uIGdyb3VwIG9mIHZhbGlkIFwiZmxvb3JcIiBvYmplY3RzIHRoYXQgY2FuIGJlIHRlbGVwb3J0ZWQgb24gKi9cbiAgICAgICAgZmxvb3JHcm91cDogeyB0eXBlOiBUeXBlLkludCwgZGVmYXVsdDogMSB9LFxuICAgICAgICAvKiogSG93IGZhciB0aGUgdGh1bWJzdGljayBuZWVkcyB0byBiZSBwdXNoZWQgdG8gaGF2ZSB0aGUgdGVsZXBvcnQgdGFyZ2V0IGluZGljYXRvciBzaG93IHVwICovXG4gICAgICAgIHRodW1ic3RpY2tBY3RpdmF0aW9uVGhyZXNoaG9sZDogeyB0eXBlOiBUeXBlLkZsb2F0LCBkZWZhdWx0OiAtMC43IH0sXG4gICAgICAgIC8qKiBIb3cgZmFyIHRoZSB0aHVtYnN0aWNrIG5lZWRzIHRvIGJlIHJlbGVhc2VkIHRvIGV4ZWN1dGUgdGhlIHRlbGVwb3J0ICovXG4gICAgICAgIHRodW1ic3RpY2tEZWFjdGl2YXRpb25UaHJlc2hob2xkOiB7IHR5cGU6IFR5cGUuRmxvYXQsIGRlZmF1bHQ6IDAuMyB9LFxuICAgICAgICAvKiogT2Zmc2V0IHRvIGFwcGx5IHRvIHRoZSBpbmRpY2F0b3Igb2JqZWN0LCBlLmcuIHRvIGF2b2lkIGl0IGZyb20gWi1maWdodGluZyB3aXRoIHRoZSBmbG9vciAqL1xuICAgICAgICBpbmRpY2F0b3JZT2Zmc2V0OiB7IHR5cGU6IFR5cGUuRmxvYXQsIGRlZmF1bHQ6IDAuMDEgfSxcbiAgICAgICAgLyoqIE1vZGUgZm9yIHJheWNhc3RpbmcsIHdoZXRoZXIgdG8gdXNlIFBoeXNYIG9yIHNpbXBsZSBjb2xsaXNpb24gY29tcG9uZW50cyAqL1xuICAgICAgICByYXlDYXN0TW9kZToge1xuICAgICAgICAgICAgdHlwZTogVHlwZS5FbnVtLFxuICAgICAgICAgICAgdmFsdWVzOiBbJ2NvbGxpc2lvbicsICdwaHlzeCddLFxuICAgICAgICAgICAgZGVmYXVsdDogJ2NvbGxpc2lvbicsXG4gICAgICAgIH0sXG4gICAgICAgIC8qKiBNYXggZGlzdGFuY2UgZm9yIFBoeXNYIHJheWNhc3QgKi9cbiAgICAgICAgbWF4RGlzdGFuY2U6IHsgdHlwZTogVHlwZS5GbG9hdCwgZGVmYXVsdDogMTAwLjAgfSxcbiAgICB9O1xuICAgIGluaXQoKSB7XG4gICAgICAgIHRoaXMuX3ByZXZUaHVtYnN0aWNrQXhpcyA9IG5ldyBGbG9hdDMyQXJyYXkoMik7XG4gICAgICAgIHRoaXMuX3RlbXBWZWMgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgICAgICB0aGlzLl90ZW1wVmVjMCA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgICAgIHRoaXMuX2N1cnJlbnRJbmRpY2F0b3JSb3RhdGlvbiA9IDA7XG4gICAgICAgIHRoaXMuaW5wdXQgPSB0aGlzLm9iamVjdC5nZXRDb21wb25lbnQoJ2lucHV0Jyk7XG4gICAgICAgIGlmICghdGhpcy5pbnB1dCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcih0aGlzLm9iamVjdC5uYW1lLCAnZ2VuZXJpYy10ZWxlcG9ydC1jb21wb25lbnQuanM6IGlucHV0IGNvbXBvbmVudCBpcyByZXF1aXJlZCBvbiB0aGUgb2JqZWN0Jyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnRlbGVwb3J0SW5kaWNhdG9yTWVzaE9iamVjdCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcih0aGlzLm9iamVjdC5uYW1lLCAnZ2VuZXJpYy10ZWxlcG9ydC1jb21wb25lbnQuanM6IFRlbGVwb3J0IGluZGljYXRvciBtZXNoIGlzIG1pc3NpbmcnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuY2FtUm9vdCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcih0aGlzLm9iamVjdC5uYW1lLCAnZ2VuZXJpYy10ZWxlcG9ydC1jb21wb25lbnQuanM6IGNhbVJvb3Qgbm90IHNldCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNJbmRpY2F0aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaW5kaWNhdG9ySGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5oaXRTcG90ID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICAgICAgdGhpcy5faGFzSGl0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2V4dHJhUm90YXRpb24gPSAwO1xuICAgICAgICB0aGlzLl9jdXJyZW50U3RpY2tBeGVzID0gbmV3IEZsb2F0MzJBcnJheSgyKTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhbSkge1xuICAgICAgICAgICAgdGhpcy5pc01vdXNlSW5kaWNhdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25Nb3VzZURvd24uYmluZCh0aGlzKSk7XG4gICAgICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZVVwLmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhhbmRlZG5lc3MgPT0gMCkge1xuICAgICAgICAgICAgY29uc3QgaW5wdXRDb21wID0gdGhpcy5vYmplY3QuZ2V0Q29tcG9uZW50KCdpbnB1dCcpO1xuICAgICAgICAgICAgaWYgKCFpbnB1dENvbXApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ3RlbGVwb3J0IGNvbXBvbmVudCBvbiBvYmplY3QnLCB0aGlzLm9iamVjdC5uYW1lLCAnd2FzIGNvbmZpZ3VyZWQgd2l0aCBoYW5kZWRuZXNzIFwiaW5wdXQgY29tcG9uZW50XCIsICcgK1xuICAgICAgICAgICAgICAgICAgICAnYnV0IG9iamVjdCBoYXMgbm8gaW5wdXQgY29tcG9uZW50LicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kZWRuZXNzID0gaW5wdXRDb21wLmhhbmRlZG5lc3M7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dCA9IGlucHV0Q29tcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGVkbmVzcyA9IFsnbGVmdCcsICdyaWdodCddW3RoaXMuaGFuZGVkbmVzcyAtIDFdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub25TZXNzaW9uU3RhcnRDYWxsYmFjayA9IHRoaXMuc2V0dXBWUkV2ZW50cy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnRlbGVwb3J0SW5kaWNhdG9yTWVzaE9iamVjdC5hY3RpdmUgPSBmYWxzZTtcbiAgICB9XG4gICAgb25BY3RpdmF0ZSgpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUub25YUlNlc3Npb25TdGFydC5hZGQodGhpcy5vblNlc3Npb25TdGFydENhbGxiYWNrKTtcbiAgICB9XG4gICAgb25EZWFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS5vblhSU2Vzc2lvblN0YXJ0LnJlbW92ZSh0aGlzLm9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2spO1xuICAgIH1cbiAgICAvKiBHZXQgY3VycmVudCBjYW1lcmEgWSByb3RhdGlvbiAqL1xuICAgIF9nZXRDYW1Sb3RhdGlvbigpIHtcbiAgICAgICAgdGhpcy5leWVMZWZ0LmdldEZvcndhcmQodGhpcy5fdGVtcFZlYyk7XG4gICAgICAgIHRoaXMuX3RlbXBWZWNbMV0gPSAwO1xuICAgICAgICB2ZWMzLm5vcm1hbGl6ZSh0aGlzLl90ZW1wVmVjLCB0aGlzLl90ZW1wVmVjKTtcbiAgICAgICAgcmV0dXJuIE1hdGguYXRhbjIodGhpcy5fdGVtcFZlY1swXSwgdGhpcy5fdGVtcFZlY1syXSk7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgbGV0IGlucHV0TGVuZ3RoID0gMDtcbiAgICAgICAgaWYgKHRoaXMuZ2FtZXBhZCAmJiB0aGlzLmdhbWVwYWQuYXhlcykge1xuICAgICAgICAgICAgdGhpcy5fY3VycmVudFN0aWNrQXhlc1swXSA9IHRoaXMuZ2FtZXBhZC5heGVzWzJdO1xuICAgICAgICAgICAgdGhpcy5fY3VycmVudFN0aWNrQXhlc1sxXSA9IHRoaXMuZ2FtZXBhZC5heGVzWzNdO1xuICAgICAgICAgICAgaW5wdXRMZW5ndGggPVxuICAgICAgICAgICAgICAgIE1hdGguYWJzKHRoaXMuX2N1cnJlbnRTdGlja0F4ZXNbMF0pICsgTWF0aC5hYnModGhpcy5fY3VycmVudFN0aWNrQXhlc1sxXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmlzSW5kaWNhdGluZyAmJlxuICAgICAgICAgICAgdGhpcy5fcHJldlRodW1ic3RpY2tBeGlzWzFdID49IHRoaXMudGh1bWJzdGlja0FjdGl2YXRpb25UaHJlc2hob2xkICYmXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50U3RpY2tBeGVzWzFdIDwgdGhpcy50aHVtYnN0aWNrQWN0aXZhdGlvblRocmVzaGhvbGQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNJbmRpY2F0aW5nID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmlzSW5kaWNhdGluZyAmJlxuICAgICAgICAgICAgaW5wdXRMZW5ndGggPCB0aGlzLnRodW1ic3RpY2tEZWFjdGl2YXRpb25UaHJlc2hob2xkKSB7XG4gICAgICAgICAgICB0aGlzLmlzSW5kaWNhdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy50ZWxlcG9ydEluZGljYXRvck1lc2hPYmplY3QuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAodGhpcy5faGFzSGl0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdGVsZXBvcnRQbGF5ZXIodGhpcy5oaXRTcG90LCB0aGlzLl9leHRyYVJvdGF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc0luZGljYXRpbmcgJiYgdGhpcy50ZWxlcG9ydEluZGljYXRvck1lc2hPYmplY3QgJiYgdGhpcy5pbnB1dCkge1xuICAgICAgICAgICAgY29uc3Qgb3JpZ2luID0gdGhpcy5fdGVtcFZlYzA7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5nZXRQb3NpdGlvbldvcmxkKG9yaWdpbik7XG4gICAgICAgICAgICBjb25zdCBkaXJlY3Rpb24gPSB0aGlzLm9iamVjdC5nZXRGb3J3YXJkV29ybGQodGhpcy5fdGVtcFZlYyk7XG4gICAgICAgICAgICBsZXQgcmF5SGl0ID0gKHRoaXMucmF5SGl0ID1cbiAgICAgICAgICAgICAgICB0aGlzLnJheUNhc3RNb2RlID09IDBcbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmVuZ2luZS5zY2VuZS5yYXlDYXN0KG9yaWdpbiwgZGlyZWN0aW9uLCAxIDw8IHRoaXMuZmxvb3JHcm91cClcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLmVuZ2luZS5waHlzaWNzLnJheUNhc3Qob3JpZ2luLCBkaXJlY3Rpb24sIDEgPDwgdGhpcy5mbG9vckdyb3VwLCB0aGlzLm1heERpc3RhbmNlKSk7XG4gICAgICAgICAgICBpZiAocmF5SGl0LmhpdENvdW50ID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5kaWNhdG9ySGlkZGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5fZXh0cmFSb3RhdGlvbiA9XG4gICAgICAgICAgICAgICAgICAgIE1hdGguUEkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hdGFuMih0aGlzLl9jdXJyZW50U3RpY2tBeGVzWzBdLCB0aGlzLl9jdXJyZW50U3RpY2tBeGVzWzFdKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50SW5kaWNhdG9yUm90YXRpb24gPVxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9nZXRDYW1Sb3RhdGlvbigpICsgKHRoaXMuX2V4dHJhUm90YXRpb24gLSBNYXRoLlBJKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRlbGVwb3J0SW5kaWNhdG9yTWVzaE9iamVjdC5yZXNldFBvc2l0aW9uUm90YXRpb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRlbGVwb3J0SW5kaWNhdG9yTWVzaE9iamVjdC5yb3RhdGVBeGlzQW5nbGVSYWQoWzAsIDEsIDBdLCB0aGlzLl9jdXJyZW50SW5kaWNhdG9yUm90YXRpb24pO1xuICAgICAgICAgICAgICAgIHRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0LnRyYW5zbGF0ZShyYXlIaXQubG9jYXRpb25zWzBdKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRlbGVwb3J0SW5kaWNhdG9yTWVzaE9iamVjdC50cmFuc2xhdGUoW1xuICAgICAgICAgICAgICAgICAgICAwLjAsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kaWNhdG9yWU9mZnNldCxcbiAgICAgICAgICAgICAgICAgICAgMC4wLFxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgIHRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0LmFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5oaXRTcG90LnNldChyYXlIaXQubG9jYXRpb25zWzBdKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9oYXNIaXQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmluZGljYXRvckhpZGRlbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbGVwb3J0SW5kaWNhdG9yTWVzaE9iamVjdC5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRpY2F0b3JIaWRkZW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9oYXNIaXQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnRlbGVwb3J0SW5kaWNhdG9yTWVzaE9iamVjdCAmJiB0aGlzLmlzTW91c2VJbmRpY2F0aW5nKSB7XG4gICAgICAgICAgICB0aGlzLm9uTW91c2VQcmVzc2VkKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcHJldlRodW1ic3RpY2tBeGlzLnNldCh0aGlzLl9jdXJyZW50U3RpY2tBeGVzKTtcbiAgICB9XG4gICAgc2V0dXBWUkV2ZW50cyhzKSB7XG4gICAgICAgIC8qIElmIGluIFZSLCBvbmUtdGltZSBiaW5kIHRoZSBsaXN0ZW5lciAqL1xuICAgICAgICB0aGlzLnNlc3Npb24gPSBzO1xuICAgICAgICBzLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8qIFJlc2V0IGNhY2hlIG9uY2UgdGhlIHNlc3Npb24gZW5kcyB0byByZWJpbmQgc2VsZWN0IGV0YywgaW4gY2FzZVxuICAgICAgICAgICAgICogaXQgc3RhcnRzIGFnYWluICovXG4gICAgICAgICAgICB0aGlzLmdhbWVwYWQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uID0gbnVsbDtcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgICAgaWYgKHMuaW5wdXRTb3VyY2VzICYmIHMuaW5wdXRTb3VyY2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzLmlucHV0U291cmNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBpbnB1dFNvdXJjZSA9IHMuaW5wdXRTb3VyY2VzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dFNvdXJjZS5oYW5kZWRuZXNzID09IHRoaXMuaGFuZGVkbmVzcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWVwYWQgPSBpbnB1dFNvdXJjZS5nYW1lcGFkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0c291cmNlc2NoYW5nZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5hZGRlZCAmJiBlLmFkZGVkLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZS5hZGRlZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgaW5wdXRTb3VyY2UgPSBlLmFkZGVkW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXRTb3VyY2UuaGFuZGVkbmVzcyA9PSB0aGlzLmhhbmRlZG5lc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZXBhZCA9IGlucHV0U291cmNlLmdhbWVwYWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgfVxuICAgIG9uTW91c2VEb3duKCkge1xuICAgICAgICB0aGlzLmlzTW91c2VJbmRpY2F0aW5nID0gdHJ1ZTtcbiAgICB9XG4gICAgb25Nb3VzZVVwKCkge1xuICAgICAgICB0aGlzLmlzTW91c2VJbmRpY2F0aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0LmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5faGFzSGl0KSB7XG4gICAgICAgICAgICB0aGlzLl90ZWxlcG9ydFBsYXllcih0aGlzLmhpdFNwb3QsIDAuMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25Nb3VzZVByZXNzZWQoKSB7XG4gICAgICAgIGxldCBvcmlnaW4gPSBbMCwgMCwgMF07XG4gICAgICAgIHRoaXMuY2FtLmdldFBvc2l0aW9uV29ybGQob3JpZ2luKTtcbiAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5jYW0uZ2V0Rm9yd2FyZCh0aGlzLl90ZW1wVmVjKTtcbiAgICAgICAgbGV0IHJheUhpdCA9ICh0aGlzLnJheUhpdCA9XG4gICAgICAgICAgICB0aGlzLnJheUNhc3RNb2RlID09IDBcbiAgICAgICAgICAgICAgICA/IHRoaXMuZW5naW5lLnNjZW5lLnJheUNhc3Qob3JpZ2luLCBkaXJlY3Rpb24sIDEgPDwgdGhpcy5mbG9vckdyb3VwKVxuICAgICAgICAgICAgICAgIDogdGhpcy5lbmdpbmUucGh5c2ljcy5yYXlDYXN0KG9yaWdpbiwgZGlyZWN0aW9uLCAxIDw8IHRoaXMuZmxvb3JHcm91cCwgdGhpcy5tYXhEaXN0YW5jZSkpO1xuICAgICAgICBpZiAocmF5SGl0LmhpdENvdW50ID4gMCkge1xuICAgICAgICAgICAgdGhpcy5pbmRpY2F0b3JIaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgICAgIGRpcmVjdGlvblsxXSA9IDA7XG4gICAgICAgICAgICB2ZWMzLm5vcm1hbGl6ZShkaXJlY3Rpb24sIGRpcmVjdGlvbik7XG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50SW5kaWNhdG9yUm90YXRpb24gPVxuICAgICAgICAgICAgICAgIC1NYXRoLnNpZ24oZGlyZWN0aW9uWzJdKSAqIE1hdGguYWNvcyhkaXJlY3Rpb25bMF0pIC0gTWF0aC5QSSAqIDAuNTtcbiAgICAgICAgICAgIHRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0LnJlc2V0UG9zaXRpb25Sb3RhdGlvbigpO1xuICAgICAgICAgICAgdGhpcy50ZWxlcG9ydEluZGljYXRvck1lc2hPYmplY3Qucm90YXRlQXhpc0FuZ2xlUmFkKFswLCAxLCAwXSwgdGhpcy5fY3VycmVudEluZGljYXRvclJvdGF0aW9uKTtcbiAgICAgICAgICAgIHRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0LnRyYW5zbGF0ZShyYXlIaXQubG9jYXRpb25zWzBdKTtcbiAgICAgICAgICAgIHRoaXMudGVsZXBvcnRJbmRpY2F0b3JNZXNoT2JqZWN0LmFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmhpdFNwb3QgPSByYXlIaXQubG9jYXRpb25zWzBdO1xuICAgICAgICAgICAgdGhpcy5faGFzSGl0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pbmRpY2F0b3JIaWRkZW4pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRlbGVwb3J0SW5kaWNhdG9yTWVzaE9iamVjdC5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmluZGljYXRvckhpZGRlbiA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9oYXNIaXQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfdGVsZXBvcnRQbGF5ZXIobmV3UG9zaXRpb24sIHJvdGF0aW9uVG9BZGQpIHtcbiAgICAgICAgdGhpcy5jYW1Sb290LnJvdGF0ZUF4aXNBbmdsZVJhZChbMCwgMSwgMF0sIHJvdGF0aW9uVG9BZGQpO1xuICAgICAgICBjb25zdCBwID0gdGhpcy5fdGVtcFZlYztcbiAgICAgICAgY29uc3QgcDEgPSB0aGlzLl90ZW1wVmVjMDtcbiAgICAgICAgaWYgKHRoaXMuc2Vzc2lvbikge1xuICAgICAgICAgICAgdGhpcy5leWVMZWZ0LmdldFBvc2l0aW9uV29ybGQocCk7XG4gICAgICAgICAgICB0aGlzLmV5ZVJpZ2h0LmdldFBvc2l0aW9uV29ybGQocDEpO1xuICAgICAgICAgICAgdmVjMy5hZGQocCwgcCwgcDEpO1xuICAgICAgICAgICAgdmVjMy5zY2FsZShwLCBwLCAwLjUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jYW0uZ2V0UG9zaXRpb25Xb3JsZChwKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhbVJvb3QuZ2V0UG9zaXRpb25Xb3JsZChwMSk7XG4gICAgICAgIHZlYzMuc3ViKHAsIHAxLCBwKTtcbiAgICAgICAgcFswXSArPSBuZXdQb3NpdGlvblswXTtcbiAgICAgICAgcFsxXSA9IG5ld1Bvc2l0aW9uWzFdO1xuICAgICAgICBwWzJdICs9IG5ld1Bvc2l0aW9uWzJdO1xuICAgICAgICB0aGlzLmNhbVJvb3Quc2V0UG9zaXRpb25Xb3JsZChwKTtcbiAgICB9XG59XG5leHBvcnQgeyBUZWxlcG9ydENvbXBvbmVudCB9O1xuIiwgInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IENvbXBvbmVudCwgTWVzaCwgTWVzaEluZGV4VHlwZSwgTWVzaEF0dHJpYnV0ZSwgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuaW1wb3J0IHsgcHJvcGVydHkgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGkvZGVjb3JhdG9ycy5qcyc7XG5pbXBvcnQgeyB2ZWMzIH0gZnJvbSAnZ2wtbWF0cml4JztcbmNvbnN0IGRpcmVjdGlvbiA9IHZlYzMuY3JlYXRlKCk7XG5jb25zdCBvZmZzZXQgPSB2ZWMzLmNyZWF0ZSgpO1xuY29uc3Qgbm9ybWFsID0gdmVjMy5jcmVhdGUoKTtcbmNvbnN0IFVQID0gdmVjMy5mcm9tVmFsdWVzKDAsIDEsIDApO1xuLyoqXG4gKiBEeW5hbWljIG1lc2gtYmFzZWQgdHJhaWxcbiAqXG4gKiBUaGlzIGNvbXBvbmVudCBrZWVwcyB0cmFjayBvZiB0aGUgd29ybGQgcG9zaXRpb24gb2YgdGhlIG9iamVjdCBpdCdzIGFkZGVkIHRvLlxuICogQXQgYSBmaXhlZCBpbnRlcnZhbCB0aGUgd29ybGQgcG9zaXRpb24gaXMgc3RvcmVkIGFzIHN0YXJ0IGFuZCBlbmQgcG9pbnRzIG9mIHRoZSB0cmFpbCBzZWdtZW50cy5cbiAqXG4gKiBUaGUgdHJhaWwgdGFwZXJzIG9mZiBhbG9uZyBpdHMgbGVuZ3RoLiBVViB0ZXh0dXJlIGNvb3JkaW5hdGVzIGFyZSBzZXR1cCBzdWNoIHRoYXQgdGhlXG4gKiBVLWF4aXMgY292ZXJzIHRoZSB3aWR0aCBvZiB0aGUgdHJhaWwgYW5kIHRoZSBWLWF4aXMgY292ZXJzIHRoZSBsZW5ndGggb2YgdGhlIHRyYWlsLlxuICogVGhpcyBhbGxvd3MgdGhlIHRyYWlsJ3MgYXBwZWFyYW5jZSB0byBiZSBkZWZpbmVkIHVzaW5nIGEgdGV4dHVyZS5cbiAqL1xuY2xhc3MgVHJhaWwgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICd0cmFpbCc7XG4gICAgLyoqIFRoZSBtYXRlcmlhbCB0byBhcHBseSB0byB0aGUgdHJhaWwgbWVzaCAqL1xuICAgIG1hdGVyaWFsID0gbnVsbDtcbiAgICAvKiogVGhlIG51bWJlciBvZiBzZWdtZW50cyBpbiB0aGUgdHJhaWwgbWVzaCAqL1xuICAgIHNlZ21lbnRzID0gNTA7XG4gICAgLyoqIFRoZSB0aW1lIGludGVydmFsIGJlZm9yZSByZWNvcmRpbmcgYSBuZXcgcG9pbnQgKi9cbiAgICBpbnRlcnZhbCA9IDAuMTtcbiAgICAvKiogVGhlIHdpZHRoIG9mIHRoZSB0cmFpbCAoaW4gd29ybGQgc3BhY2UpICovXG4gICAgd2lkdGggPSAxLjA7XG4gICAgLyoqIFdoZXRoZXIgb3Igbm90IHRoZSB0cmFpbCBzaG91bGQgdGFwZXIgb2ZmICovXG4gICAgdGFwZXIgPSB0cnVlO1xuICAgIC8qKlxuICAgICAqIFRoZSBtYXhpbXVtIGRlbHRhIHRpbWUgaW4gc2Vjb25kcywgYWJvdmUgd2hpY2ggdGhlIHRyYWlsIHJlc2V0cy5cbiAgICAgKiBUaGlzIHByZXZlbnRzIHRoZSB0cmFpbCBmcm9tIGp1bXBpbmcgYXJvdW5kIHdoZW4gdXBkYXRlcyBoYXBwZW5cbiAgICAgKiBpbmZyZXF1ZW50bHkgKGUuZy4gd2hlbiB0aGUgdGFiIGRvZXNuJ3QgaGF2ZSBmb2N1cykuXG4gICAgICovXG4gICAgcmVzZXRUaHJlc2hvbGQgPSAwLjU7XG4gICAgX2N1cnJlbnRQb2ludEluZGV4ID0gMDtcbiAgICBfdGltZVRpbGxOZXh0ID0gMDtcbiAgICBfcG9pbnRzID0gW107XG4gICAgX3RyYWlsQ29udGFpbmVyID0gbnVsbDtcbiAgICBfbWVzaENvbXAgPSBudWxsO1xuICAgIF9tZXNoID0gbnVsbDtcbiAgICBfaW5kZXhEYXRhID0gbnVsbDtcbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5fcG9pbnRzID0gbmV3IEFycmF5KHRoaXMuc2VnbWVudHMgKyAxKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9wb2ludHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHRoaXMuX3BvaW50c1tpXSA9IHZlYzMuY3JlYXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgLyogVGhlIHBvaW50cyBhcnJheSBpcyBjaXJjdWxhciwgc28ga2VlcCB0cmFjayBvZiBpdHMgaGVhZCAqL1xuICAgICAgICB0aGlzLl90aW1lVGlsbE5leHQgPSB0aGlzLmludGVydmFsO1xuICAgICAgICB0aGlzLl90cmFpbENvbnRhaW5lciA9IHRoaXMuZW5naW5lLnNjZW5lLmFkZE9iamVjdCgpO1xuICAgICAgICB0aGlzLl9tZXNoQ29tcCA9IHRoaXMuX3RyYWlsQ29udGFpbmVyLmFkZENvbXBvbmVudCgnbWVzaCcpO1xuICAgICAgICB0aGlzLl9tZXNoQ29tcC5tYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWw7XG4gICAgICAgIC8qIEVhY2ggcG9pbnQgd2lsbCBoYXZlIHR3byB2ZXJ0aWNlczsgb25lIG9uIGVpdGhlciBzaWRlICovXG4gICAgICAgIGNvbnN0IHZlcnRleENvdW50ID0gMiAqIHRoaXMuX3BvaW50cy5sZW5ndGg7XG4gICAgICAgIC8qIEVhY2ggc2VnbWVudCBjb25zaXN0cyBvZiB0d28gdHJpYW5nbGVzICovXG4gICAgICAgIHRoaXMuX2luZGV4RGF0YSA9IG5ldyBVaW50MzJBcnJheSg2ICogdGhpcy5zZWdtZW50cyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCB2ID0gMDsgaSA8IHZlcnRleENvdW50IC0gMjsgaSArPSAyLCB2ICs9IDYpIHtcbiAgICAgICAgICAgIHRoaXMuX2luZGV4RGF0YVxuICAgICAgICAgICAgICAgIC5zdWJhcnJheSh2LCB2ICsgNilcbiAgICAgICAgICAgICAgICAuc2V0KFtpICsgMSwgaSArIDAsIGkgKyAyLCBpICsgMiwgaSArIDMsIGkgKyAxXSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbWVzaCA9IG5ldyBNZXNoKHRoaXMuZW5naW5lLCB7XG4gICAgICAgICAgICB2ZXJ0ZXhDb3VudDogdmVydGV4Q291bnQsXG4gICAgICAgICAgICBpbmRleERhdGE6IHRoaXMuX2luZGV4RGF0YSxcbiAgICAgICAgICAgIGluZGV4VHlwZTogTWVzaEluZGV4VHlwZS5VbnNpZ25lZEludCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX21lc2hDb21wLm1lc2ggPSB0aGlzLl9tZXNoO1xuICAgIH1cbiAgICB1cGRhdGVWZXJ0aWNlcygpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9tZXNoKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBwb3NpdGlvbnMgPSB0aGlzLl9tZXNoLmF0dHJpYnV0ZShNZXNoQXR0cmlidXRlLlBvc2l0aW9uKTtcbiAgICAgICAgY29uc3QgdGV4Q29vcmRzID0gdGhpcy5fbWVzaC5hdHRyaWJ1dGUoTWVzaEF0dHJpYnV0ZS5UZXh0dXJlQ29vcmRpbmF0ZSk7XG4gICAgICAgIGNvbnN0IG5vcm1hbHMgPSB0aGlzLl9tZXNoLmF0dHJpYnV0ZShNZXNoQXR0cmlidXRlLk5vcm1hbCk7XG4gICAgICAgIHZlYzMuc2V0KGRpcmVjdGlvbiwgMCwgMCwgMCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fcG9pbnRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyID0gdGhpcy5fcG9pbnRzWyh0aGlzLl9jdXJyZW50UG9pbnRJbmRleCArIGkgKyAxKSAlIHRoaXMuX3BvaW50cy5sZW5ndGhdO1xuICAgICAgICAgICAgY29uc3QgbmV4dCA9IHRoaXMuX3BvaW50c1sodGhpcy5fY3VycmVudFBvaW50SW5kZXggKyBpICsgMikgJSB0aGlzLl9wb2ludHMubGVuZ3RoXTtcbiAgICAgICAgICAgIC8qIFRoZSBsYXN0IHBvaW50IGhhcyBubyBuZXh0LCBzbyByZS11c2UgdGhlIGRpcmVjdGlvbiBvZiB0aGUgcHJldmlvdXMgc2VnbWVudCAqL1xuICAgICAgICAgICAgaWYgKGkgIT09IHRoaXMuX3BvaW50cy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgdmVjMy5zdWIoZGlyZWN0aW9uLCBuZXh0LCBjdXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZlYzMuY3Jvc3Mob2Zmc2V0LCBVUCwgZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIHZlYzMubm9ybWFsaXplKG9mZnNldCwgb2Zmc2V0KTtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVGcmFjdGlvbiA9IDEuMCAtIHRoaXMuX3RpbWVUaWxsTmV4dCAvIHRoaXMuaW50ZXJ2YWw7XG4gICAgICAgICAgICBjb25zdCBmcmFjdGlvbiA9IChpIC0gdGltZUZyYWN0aW9uKSAvIHRoaXMuc2VnbWVudHM7XG4gICAgICAgICAgICB2ZWMzLnNjYWxlKG9mZnNldCwgb2Zmc2V0LCAoKHRoaXMudGFwZXIgPyBmcmFjdGlvbiA6IDEuMCkgKiB0aGlzLndpZHRoKSAvIDIuMCk7XG4gICAgICAgICAgICBwb3NpdGlvbnMuc2V0KGkgKiAyLCBbXG4gICAgICAgICAgICAgICAgY3VyclswXSAtIG9mZnNldFswXSxcbiAgICAgICAgICAgICAgICBjdXJyWzFdIC0gb2Zmc2V0WzFdLFxuICAgICAgICAgICAgICAgIGN1cnJbMl0gLSBvZmZzZXRbMl0sXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIHBvc2l0aW9ucy5zZXQoaSAqIDIgKyAxLCBbXG4gICAgICAgICAgICAgICAgY3VyclswXSArIG9mZnNldFswXSxcbiAgICAgICAgICAgICAgICBjdXJyWzFdICsgb2Zmc2V0WzFdLFxuICAgICAgICAgICAgICAgIGN1cnJbMl0gKyBvZmZzZXRbMl0sXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIGlmIChub3JtYWxzKSB7XG4gICAgICAgICAgICAgICAgdmVjMy5jcm9zcyhub3JtYWwsIGRpcmVjdGlvbiwgb2Zmc2V0KTtcbiAgICAgICAgICAgICAgICB2ZWMzLm5vcm1hbGl6ZShub3JtYWwsIG5vcm1hbCk7XG4gICAgICAgICAgICAgICAgbm9ybWFscy5zZXQoaSAqIDIsIG5vcm1hbCk7XG4gICAgICAgICAgICAgICAgbm9ybWFscy5zZXQoaSAqIDIgKyAxLCBub3JtYWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRleENvb3Jkcykge1xuICAgICAgICAgICAgICAgIHRleENvb3Jkcy5zZXQoaSAqIDIsIFswLCBmcmFjdGlvbl0pO1xuICAgICAgICAgICAgICAgIHRleENvb3Jkcy5zZXQoaSAqIDIgKyAxLCBbMSwgZnJhY3Rpb25dKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKiBOb3RpZnkgV0xFIHRoYXQgdGhlIG1lc2ggaGFzIGNoYW5nZWQgKi9cbiAgICAgICAgdGhpcy5fbWVzaC51cGRhdGUoKTtcbiAgICB9XG4gICAgcmVzZXRUcmFpbCgpIHtcbiAgICAgICAgdGhpcy5vYmplY3QuZ2V0UG9zaXRpb25Xb3JsZCh0aGlzLl9wb2ludHNbMF0pO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMuX3BvaW50cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmVjMy5jb3B5KHRoaXMuX3BvaW50c1tpXSwgdGhpcy5fcG9pbnRzWzBdKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jdXJyZW50UG9pbnRJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuX3RpbWVUaWxsTmV4dCA9IHRoaXMuaW50ZXJ2YWw7XG4gICAgfVxuICAgIHVwZGF0ZShkdCkge1xuICAgICAgICB0aGlzLl90aW1lVGlsbE5leHQgLT0gZHQ7XG4gICAgICAgIGlmIChkdCA+IHRoaXMucmVzZXRUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXRUcmFpbCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl90aW1lVGlsbE5leHQgPCAwKSB7XG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50UG9pbnRJbmRleCA9ICh0aGlzLl9jdXJyZW50UG9pbnRJbmRleCArIDEpICUgdGhpcy5fcG9pbnRzLmxlbmd0aDtcbiAgICAgICAgICAgIHRoaXMuX3RpbWVUaWxsTmV4dCA9ICh0aGlzLl90aW1lVGlsbE5leHQgJSB0aGlzLmludGVydmFsKSArIHRoaXMuaW50ZXJ2YWw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vYmplY3QuZ2V0UG9zaXRpb25Xb3JsZCh0aGlzLl9wb2ludHNbdGhpcy5fY3VycmVudFBvaW50SW5kZXhdKTtcbiAgICAgICAgdGhpcy51cGRhdGVWZXJ0aWNlcygpO1xuICAgIH1cbiAgICBvbkFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLnJlc2V0VHJhaWwoKTtcbiAgICAgICAgaWYgKHRoaXMuX21lc2hDb21wKVxuICAgICAgICAgICAgdGhpcy5fbWVzaENvbXAuYWN0aXZlID0gdHJ1ZTtcbiAgICB9XG4gICAgb25EZWFjdGl2YXRlKCkge1xuICAgICAgICBpZiAodGhpcy5fbWVzaENvbXApXG4gICAgICAgICAgICB0aGlzLl9tZXNoQ29tcC5hY3RpdmUgPSBmYWxzZTtcbiAgICB9XG4gICAgb25EZXN0cm95KCkge1xuICAgICAgICBpZiAodGhpcy5fdHJhaWxDb250YWluZXIpXG4gICAgICAgICAgICB0aGlzLl90cmFpbENvbnRhaW5lci5kZXN0cm95KCk7XG4gICAgICAgIGlmICh0aGlzLl9tZXNoKVxuICAgICAgICAgICAgdGhpcy5fbWVzaC5kZXN0cm95KCk7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkubWF0ZXJpYWwoKVxuXSwgVHJhaWwucHJvdG90eXBlLCBcIm1hdGVyaWFsXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5pbnQoNTApXG5dLCBUcmFpbC5wcm90b3R5cGUsIFwic2VnbWVudHNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmZsb2F0KDUwKVxuXSwgVHJhaWwucHJvdG90eXBlLCBcImludGVydmFsXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5mbG9hdCgxLjApXG5dLCBUcmFpbC5wcm90b3R5cGUsIFwid2lkdGhcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmJvb2wodHJ1ZSlcbl0sIFRyYWlsLnByb3RvdHlwZSwgXCJ0YXBlclwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoMS4wKVxuXSwgVHJhaWwucHJvdG90eXBlLCBcInJlc2V0VGhyZXNob2xkXCIsIHZvaWQgMCk7XG5leHBvcnQgeyBUcmFpbCB9O1xuIiwgImltcG9ydCB7IENvbXBvbmVudCwgUHJvcGVydHkgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuaW1wb3J0IHsgdmVjMyB9IGZyb20gJ2dsLW1hdHJpeCc7XG5mdW5jdGlvbiBjbGFtcCh2LCBhLCBiKSB7XG4gICAgcmV0dXJuIE1hdGgubWF4KGEsIE1hdGgubWluKHYsIGIpKTtcbn1cbmNvbnN0IHJvb3RTY2FsaW5nID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbmNvbnN0IHRlbXBRdWF0ID0gbmV3IEZsb2F0MzJBcnJheSg0KTtcbmNvbnN0IG1pZGRsZVBvcyA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG5jb25zdCBlbmRQb3MgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuY29uc3QgdGFyZ2V0UG9zID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbmNvbnN0IGhlbHBlclBvcyA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG5jb25zdCByb290VHJhbnNmb3JtID0gbmV3IEZsb2F0MzJBcnJheSg4KTtcbmNvbnN0IG1pZGRsZVRyYW5zZm9ybSA9IG5ldyBGbG9hdDMyQXJyYXkoOCk7XG5jb25zdCBlbmRUcmFuc2Zvcm0gPSBuZXcgRmxvYXQzMkFycmF5KDgpO1xuLyoqXG4gKiBTb2x2ZSBpbnZlcnNlIGtpbmVtYXRpY3MgZm9yIGEgdHdvIGpvaW50IGNoYWluc1xuICpcbiAqIEluc3BpcmVkIGJ5IGh0dHA6Ly90aGVvcmFuZ2VkdWNrLmNvbS9wYWdlL3NpbXBsZS10d28tam9pbnRcbiAqL1xuY29uc3QgdHdvSm9pbnRJSyA9IChmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgdGEgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgIGNvbnN0IGNhID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICBjb25zdCBiYSA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgY29uc3QgYWIgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgIGNvbnN0IGNiID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICBjb25zdCBheGlzMCA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgY29uc3QgYXhpczEgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgIGNvbnN0IHRlbXAgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICAgIHJldHVybiBmdW5jdGlvbiAocm9vdCwgbWlkZGxlLCBiLCBjLCB0YXJnZXRQb3MsIGVwcywgaGVscGVyKSB7XG4gICAgICAgIC8qIGEgPSBbMCwgMCwgMF0sIHNpbmNlIGV2ZXJ5dGhpbmcgaXMgY29tcHV0ZWQgaW4gcm9vdC1zcGFjZSAqL1xuICAgICAgICBiYS5zZXQoYik7XG4gICAgICAgIGNvbnN0IGxhYiA9IHZlYzMubGVuZ3RoKGJhKTtcbiAgICAgICAgdmVjMy5zdWIodGEsIGIsIGMpO1xuICAgICAgICBjb25zdCBsY2IgPSB2ZWMzLmxlbmd0aCh0YSk7XG4gICAgICAgIHRhLnNldCh0YXJnZXRQb3MpO1xuICAgICAgICBjb25zdCBsYXQgPSBjbGFtcCh2ZWMzLmxlbmd0aCh0YSksIGVwcywgbGFiICsgbGNiIC0gZXBzKTtcbiAgICAgICAgY2Euc2V0KGMpO1xuICAgICAgICB2ZWMzLnNjYWxlKGFiLCBiLCAtMSk7XG4gICAgICAgIHZlYzMuc3ViKGNiLCBjLCBiKTtcbiAgICAgICAgdmVjMy5ub3JtYWxpemUoY2EsIGNhKTtcbiAgICAgICAgdmVjMy5ub3JtYWxpemUoYmEsIGJhKTtcbiAgICAgICAgdmVjMy5ub3JtYWxpemUoYWIsIGFiKTtcbiAgICAgICAgdmVjMy5ub3JtYWxpemUoY2IsIGNiKTtcbiAgICAgICAgdmVjMy5ub3JtYWxpemUodGEsIHRhKTtcbiAgICAgICAgLyogU3VwcG9zZWRseSBudW1lcmljYWwgZXJyb3JzIGNhbiBjYXVzZSB0aGUgZG90IHRvIGdvIG91dCBvZiAtMSwgMSByYW5nZSAqL1xuICAgICAgICBjb25zdCBhY19hYl8wID0gTWF0aC5hY29zKGNsYW1wKHZlYzMuZG90KGNhLCBiYSksIC0xLCAxKSk7XG4gICAgICAgIGNvbnN0IGJhX2JjXzAgPSBNYXRoLmFjb3MoY2xhbXAodmVjMy5kb3QoYWIsIGNiKSwgLTEsIDEpKTtcbiAgICAgICAgY29uc3QgYWNfYXRfMCA9IE1hdGguYWNvcyhjbGFtcCh2ZWMzLmRvdChjYSwgdGEpLCAtMSwgMSkpO1xuICAgICAgICBjb25zdCBhY19hYl8xID0gTWF0aC5hY29zKGNsYW1wKChsY2IgKiBsY2IgLSBsYWIgKiBsYWIgLSBsYXQgKiBsYXQpIC8gKC0yICogbGFiICogbGF0KSwgLTEsIDEpKTtcbiAgICAgICAgY29uc3QgYmFfYmNfMSA9IE1hdGguYWNvcyhjbGFtcCgobGF0ICogbGF0IC0gbGFiICogbGFiIC0gbGNiICogbGNiKSAvICgtMiAqIGxhYiAqIGxjYiksIC0xLCAxKSk7XG4gICAgICAgIGlmIChoZWxwZXIpIHtcbiAgICAgICAgICAgIHZlYzMuc3ViKGJhLCBoZWxwZXIsIGIpO1xuICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUoYmEsIGJhKTtcbiAgICAgICAgfVxuICAgICAgICB2ZWMzLmNyb3NzKGF4aXMwLCBjYSwgYmEpO1xuICAgICAgICB2ZWMzLm5vcm1hbGl6ZShheGlzMCwgYXhpczApO1xuICAgICAgICB2ZWMzLmNyb3NzKGF4aXMxLCBjLCB0YXJnZXRQb3MpO1xuICAgICAgICB2ZWMzLm5vcm1hbGl6ZShheGlzMSwgYXhpczEpO1xuICAgICAgICBtaWRkbGUudHJhbnNmb3JtVmVjdG9ySW52ZXJzZUxvY2FsKHRlbXAsIGF4aXMwKTtcbiAgICAgICAgcm9vdC5yb3RhdGVBeGlzQW5nbGVSYWRPYmplY3QoYXhpczEsIGFjX2F0XzApO1xuICAgICAgICByb290LnJvdGF0ZUF4aXNBbmdsZVJhZE9iamVjdChheGlzMCwgYWNfYWJfMSAtIGFjX2FiXzApO1xuICAgICAgICBtaWRkbGUucm90YXRlQXhpc0FuZ2xlUmFkT2JqZWN0KGF4aXMwLCBiYV9iY18xIC0gYmFfYmNfMCk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEludmVyc2Uga2luZW1hdGljcyBmb3IgdHdvLWpvaW50IGNoYWlucyAoZS5nLiBrbmVlcyBvciBlbGJvd3MpXG4gKi9cbmNsYXNzIFR3b0pvaW50SWtTb2x2ZXIgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICd0d28tam9pbnQtaWstc29sdmVyJztcbiAgICBzdGF0aWMgUHJvcGVydGllcyA9IHtcbiAgICAgICAgLyoqIFJvb3QgYm9uZSwgbmV2ZXIgbW92ZXMgKi9cbiAgICAgICAgcm9vdDogUHJvcGVydHkub2JqZWN0KCksXG4gICAgICAgIC8qKiBCb25lIGF0dGFjaGVkIHRvIHRoZSByb290ICovXG4gICAgICAgIG1pZGRsZTogUHJvcGVydHkub2JqZWN0KCksXG4gICAgICAgIC8qKiBCb25lIGF0dGFjaGVkIHRvIHRoZSBtaWRkbGUgKi9cbiAgICAgICAgZW5kOiBQcm9wZXJ0eS5vYmplY3QoKSxcbiAgICAgICAgLyoqIFRhcmdldCB0aGUgam9pbnMgc2hvdWxkIHJlYWNoIGZvciAqL1xuICAgICAgICB0YXJnZXQ6IFByb3BlcnR5Lm9iamVjdCgpLFxuICAgICAgICAvKiogRmxhZyBmb3IgY29weWluZyByb3RhdGlvbiBmcm9tIHRhcmdldCB0byBlbmQgKi9cbiAgICAgICAgY29weVRhcmdldFJvdGF0aW9uOiBQcm9wZXJ0eS5ib29sKHRydWUpLFxuICAgICAgICAvKiogSGVscGVyIG9iamVjdCB0byB1c2UgdG8gZGV0ZXJtaW5lIGpvaW50IHJvdGF0aW9uIGF4aXMgKi9cbiAgICAgICAgaGVscGVyOiBQcm9wZXJ0eS5vYmplY3QoKSxcbiAgICB9O1xuICAgIHRpbWUgPSAwO1xuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLnJvb3QuZ2V0VHJhbnNmb3JtTG9jYWwocm9vdFRyYW5zZm9ybSk7XG4gICAgICAgIHRoaXMubWlkZGxlLmdldFRyYW5zZm9ybUxvY2FsKG1pZGRsZVRyYW5zZm9ybSk7XG4gICAgICAgIHRoaXMuZW5kLmdldFRyYW5zZm9ybUxvY2FsKGVuZFRyYW5zZm9ybSk7XG4gICAgfVxuICAgIHVwZGF0ZShkdCkge1xuICAgICAgICB0aGlzLnRpbWUgKz0gZHQ7XG4gICAgICAgIC8qIFJlc2V0IHRvIG9yaWdpbmFsIHBvc2UgZm9yIHN0YWJpbGl0eSAqL1xuICAgICAgICB0aGlzLnJvb3Quc2V0VHJhbnNmb3JtTG9jYWwocm9vdFRyYW5zZm9ybSk7XG4gICAgICAgIHRoaXMubWlkZGxlLnNldFRyYW5zZm9ybUxvY2FsKG1pZGRsZVRyYW5zZm9ybSk7XG4gICAgICAgIHRoaXMuZW5kLnNldFRyYW5zZm9ybUxvY2FsKGVuZFRyYW5zZm9ybSk7XG4gICAgICAgIHRoaXMucm9vdC5nZXRTY2FsaW5nV29ybGQocm9vdFNjYWxpbmcpO1xuICAgICAgICAvKiBHZXQgam9pbnQgcG9zaXRpb25zIGluIHJvb3Qtc3BhY2UgKi9cbiAgICAgICAgdGhpcy5taWRkbGUuZ2V0UG9zaXRpb25Mb2NhbChtaWRkbGVQb3MpO1xuICAgICAgICB0aGlzLmVuZC5nZXRQb3NpdGlvbkxvY2FsKGVuZFBvcyk7XG4gICAgICAgIHRoaXMubWlkZGxlLnRyYW5zZm9ybVBvaW50TG9jYWwoZW5kUG9zLCBlbmRQb3MpO1xuICAgICAgICBpZiAodGhpcy5oZWxwZXIpIHtcbiAgICAgICAgICAgIC8qIEdldCBoZWxwZXIgcG9zaXRpb24gaW4gcm9vdCBzcGFjZSAqL1xuICAgICAgICAgICAgdGhpcy5oZWxwZXIuZ2V0UG9zaXRpb25Xb3JsZChoZWxwZXJQb3MpO1xuICAgICAgICAgICAgdGhpcy5yb290LnRyYW5zZm9ybVBvaW50SW52ZXJzZVdvcmxkKGhlbHBlclBvcywgaGVscGVyUG9zKTtcbiAgICAgICAgICAgIHZlYzMuZGl2KGhlbHBlclBvcywgaGVscGVyUG9zLCByb290U2NhbGluZyk7XG4gICAgICAgIH1cbiAgICAgICAgLyogR2V0IHRhcmdldCBwb3NpdGlvbiBpbiByb290IHNwYWNlICovXG4gICAgICAgIHRoaXMudGFyZ2V0LmdldFBvc2l0aW9uV29ybGQodGFyZ2V0UG9zKTtcbiAgICAgICAgdGhpcy5yb290LnRyYW5zZm9ybVBvaW50SW52ZXJzZVdvcmxkKHRhcmdldFBvcywgdGFyZ2V0UG9zKTtcbiAgICAgICAgdmVjMy5kaXYodGFyZ2V0UG9zLCB0YXJnZXRQb3MsIHJvb3RTY2FsaW5nKTtcbiAgICAgICAgdHdvSm9pbnRJSyh0aGlzLnJvb3QsIHRoaXMubWlkZGxlLCBtaWRkbGVQb3MsIGVuZFBvcywgdGFyZ2V0UG9zLCAwLjAxLCB0aGlzLmhlbHBlciA/IGhlbHBlclBvcyA6IG51bGwsIHRoaXMudGltZSk7XG4gICAgICAgIGlmICh0aGlzLmNvcHlUYXJnZXRSb3RhdGlvbikge1xuICAgICAgICAgICAgdGhpcy5lbmQuc2V0Um90YXRpb25Xb3JsZCh0aGlzLnRhcmdldC5nZXRSb3RhdGlvbldvcmxkKHRlbXBRdWF0KSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgeyBUd29Kb2ludElrU29sdmVyIH07XG4iLCAiaW1wb3J0IHsgQ29tcG9uZW50LCBUZXh0dXJlLCBQcm9wZXJ0eSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgeyBzZXRGaXJzdE1hdGVyaWFsVGV4dHVyZSB9IGZyb20gJy4vdXRpbHMvdXRpbHMuanMnO1xuLyoqXG4gKiBEb3dubG9hZHMgYSB2aWRlbyBmcm9tIFVSTCBhbmQgYXBwbGllcyBpdCBhcyBgZGlmZnVzZVRleHR1cmVgIG9yIGBmbGF0VGV4dHVyZWBcbiAqIG9uIGdpdmVuIG1hdGVyaWFsLlxuICpcbiAqIFZpZGVvIHRleHR1cmVzIG5lZWQgdG8gYmUgdXBkYXRlZCByZWd1bGFybHkgd2hlbmV2ZXJcbiAqIGEgbmV3IGZyYW1lIGlzIGF2YWlsYWJsZS4gVGhpcyBjb21wb25lbnQgaGFuZGxlcyB0aGVcbiAqIGRldGVjdGlvbiBvZiBhIG5ldyBmcmFtZSBhbmQgdXBkYXRlcyB0aGUgdGV4dHVyZSB0b1xuICogcmVmbGVjdCB0aGUgdmlkZW8ncyBjdXJyZW50IGZyYW1lLlxuICpcbiAqIE1hdGVyaWFscyBmcm9tIHRoZSBmb2xsb3dpbmcgc2hhZGVycyBhcmUgc3VwcG9ydGVkOlxuICogIC0gXCJQaG9uZyBPcGFxdWUgVGV4dHVyZWRcIlxuICogIC0gXCJGbGF0IE9wYXF1ZSBUZXh0dXJlZFwiXG4gKiAgLSBcIkJhY2tncm91bmRcIlxuICogIC0gXCJQaHlzaWNhbCBPcGFxdWUgVGV4dHVyZWRcIlxuICogIC0gXCJGb2xpYWdlXCJcbiAqXG4gKiBUaGUgdmlkZW8gY2FuIGJlIGFjY2Vzc2VkIHRocm91Z2ggYHRoaXMudmlkZW9gOlxuICpcbiAqIGBgYGpzXG4gKiAgIGxldCB2aWRlb1RleHR1cmUgPSB0aGlzLm9iamVjdC5nZXRDb21wb25lbnQoJ3ZpZGVvLXRleHR1cmUnKTtcbiAqICAgdmlkZW9UZXh0dXJlLnZpZGVvLnBsYXkoKTtcbiAqICAgdmlkZW9UZXh0dXJlLnZpZGVvLnBhdXNlKCk7XG4gKiBgYGBcbiAqXG4gKiBTZWUgW1ZpZGVvIEV4YW1wbGVdKC9zaG93Y2FzZS92aWRlbykuXG4gKi9cbmNsYXNzIFZpZGVvVGV4dHVyZSBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ3ZpZGVvLXRleHR1cmUnO1xuICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge1xuICAgICAgICAvKiogVVJMIHRvIGRvd25sb2FkIHZpZGVvIGZyb20gKi9cbiAgICAgICAgdXJsOiBQcm9wZXJ0eS5zdHJpbmcoKSxcbiAgICAgICAgLyoqIE1hdGVyaWFsIHRvIGFwcGx5IHRoZSB2aWRlbyB0ZXh0dXJlIHRvICovXG4gICAgICAgIG1hdGVyaWFsOiBQcm9wZXJ0eS5tYXRlcmlhbCgpLFxuICAgICAgICAvKiogV2hldGhlciB0byBsb29wIHRoZSB2aWRlbyAqL1xuICAgICAgICBsb29wOiBQcm9wZXJ0eS5ib29sKHRydWUpLFxuICAgICAgICAvKiogV2hldGhlciB0byBhdXRvbWF0aWNhbGx5IHN0YXJ0IHBsYXlpbmcgdGhlIHZpZGVvICovXG4gICAgICAgIGF1dG9wbGF5OiBQcm9wZXJ0eS5ib29sKHRydWUpLFxuICAgICAgICAvKiogV2hldGhlciB0byBtdXRlIHNvdW5kICovXG4gICAgICAgIG11dGVkOiBQcm9wZXJ0eS5ib29sKHRydWUpLFxuICAgICAgICAvKiogTmFtZSBvZiB0aGUgdGV4dHVyZSBwcm9wZXJ0eSB0byBzZXQgKi9cbiAgICAgICAgdGV4dHVyZVByb3BlcnR5OiBQcm9wZXJ0eS5zdHJpbmcoJ2F1dG8nKSxcbiAgICB9O1xuICAgIGluaXQoKSB7XG4gICAgICAgIGlmICghdGhpcy5tYXRlcmlhbCkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ3ZpZGVvLXRleHR1cmU6IG1hdGVyaWFsIHByb3BlcnR5IG5vdCBzZXQnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvYWRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmZyYW1lVXBkYXRlUmVxdWVzdGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMudmlkZW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuICAgICAgICB0aGlzLnZpZGVvLnNyYyA9IHRoaXMudXJsO1xuICAgICAgICB0aGlzLnZpZGVvLmNyb3NzT3JpZ2luID0gJ2Fub255bW91cyc7XG4gICAgICAgIHRoaXMudmlkZW8ucGxheXNJbmxpbmUgPSB0cnVlO1xuICAgICAgICB0aGlzLnZpZGVvLmxvb3AgPSB0aGlzLmxvb3A7XG4gICAgICAgIHRoaXMudmlkZW8ubXV0ZWQgPSB0aGlzLm11dGVkO1xuICAgICAgICB0aGlzLnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ3BsYXlpbmcnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxvYWRlZCA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodGhpcy5hdXRvcGxheSkge1xuICAgICAgICAgICAgY29uc3QgcGxheUFmdGVyVXNlckdlc3R1cmUgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy52aWRlby5wbGF5KCk7XG4gICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcGxheUFmdGVyVXNlckdlc3R1cmUpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgcGxheUFmdGVyVXNlckdlc3R1cmUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHBsYXlBZnRlclVzZXJHZXN0dXJlKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgcGxheUFmdGVyVXNlckdlc3R1cmUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFwcGx5VGV4dHVyZSgpIHtcbiAgICAgICAgY29uc3QgbWF0ID0gdGhpcy5tYXRlcmlhbDtcbiAgICAgICAgY29uc3Qgc2hhZGVyID0gbWF0LnNoYWRlcjtcbiAgICAgICAgY29uc3QgdGV4dHVyZSA9ICh0aGlzLnRleHR1cmUgPSBuZXcgVGV4dHVyZSh0aGlzLmVuZ2luZSwgdGhpcy52aWRlbykpO1xuICAgICAgICBpZiAoIXNldEZpcnN0TWF0ZXJpYWxUZXh0dXJlKG1hdCwgdGV4dHVyZSwgdGhpcy50ZXh0dXJlUHJvcGVydHkpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdTaGFkZXInLCBzaGFkZXIsICdub3Qgc3VwcG9ydGVkIGJ5IHZpZGVvLXRleHR1cmUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJ3JlcXVlc3RWaWRlb0ZyYW1lQ2FsbGJhY2snIGluIHRoaXMudmlkZW8pIHtcbiAgICAgICAgICAgIHRoaXMudmlkZW8ucmVxdWVzdFZpZGVvRnJhbWVDYWxsYmFjayh0aGlzLnVwZGF0ZVZpZGVvLmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy52aWRlby5hZGRFdmVudExpc3RlbmVyKCd0aW1ldXBkYXRlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZnJhbWVVcGRhdGVSZXF1ZXN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKGR0KSB7XG4gICAgICAgIGlmICh0aGlzLmxvYWRlZCAmJiB0aGlzLmZyYW1lVXBkYXRlUmVxdWVzdGVkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50ZXh0dXJlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0dXJlLnVwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLyogQXBwbHkgdGV4dHVyZSBvbiBmaXJzdCBmcmFtZSB1cGRhdGUgcmVxdWVzdCAqL1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlUZXh0dXJlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZyYW1lVXBkYXRlUmVxdWVzdGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlVmlkZW8oKSB7XG4gICAgICAgIHRoaXMuZnJhbWVVcGRhdGVSZXF1ZXN0ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnZpZGVvLnJlcXVlc3RWaWRlb0ZyYW1lQ2FsbGJhY2sodGhpcy51cGRhdGVWaWRlby5iaW5kKHRoaXMpKTtcbiAgICB9XG59XG5leHBvcnQgeyBWaWRlb1RleHR1cmUgfTtcbiIsICJpbXBvcnQgeyBDb21wb25lbnQsIFR5cGUgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuLyoqXG4gKiBBbGxvd3Mgc3dpdGNoaW5nIGFsbCBvdGhlciBjb21wb25lbnRzIG9uIGFuIG9iamVjdCB0byBhY3RpdmUvaW5hY3RpdmVcbiAqIGRlcGVuZGluZyBvbiB3aGV0aGVyIGEgVlIvQVIgc2Vzc2lvbiBpcyBhY3RpdmUuXG4gKlxuICogVXNlZnVsIGZvciBoaWRpbmcgY29udHJvbGxlcnMgdW50aWwgdGhlIHVzZXIgZW50ZXJzIFZSIGZvciBleGFtcGxlLlxuICovXG5jbGFzcyBWck1vZGVBY3RpdmVTd2l0Y2ggZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICd2ci1tb2RlLWFjdGl2ZS1zd2l0Y2gnO1xuICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge1xuICAgICAgICAvKiogV2hlbiBjb21wb25lbnRzIHNob3VsZCBiZSBhY3RpdmU6IEluIFZSIG9yIHdoZW4gbm90IGluIFZSICovXG4gICAgICAgIGFjdGl2YXRlQ29tcG9uZW50czoge1xuICAgICAgICAgICAgdHlwZTogVHlwZS5FbnVtLFxuICAgICAgICAgICAgdmFsdWVzOiBbJ2luIFZSJywgJ2luIG5vbi1WUiddLFxuICAgICAgICAgICAgZGVmYXVsdDogJ2luIFZSJyxcbiAgICAgICAgfSxcbiAgICAgICAgLyoqIFdoZXRoZXIgY2hpbGQgb2JqZWN0J3MgY29tcG9uZW50cyBzaG91bGQgYmUgYWZmZWN0ZWQgKi9cbiAgICAgICAgYWZmZWN0Q2hpbGRyZW46IHsgdHlwZTogVHlwZS5Cb29sLCBkZWZhdWx0OiB0cnVlIH0sXG4gICAgfTtcbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5jb21wb25lbnRzID0gW107XG4gICAgICAgIHRoaXMuZ2V0Q29tcG9uZW50cyh0aGlzLm9iamVjdCk7XG4gICAgICAgIC8qIEluaXRpYWwgYWN0aXZhdGlvbi9kZWFjdGl2YXRpb24gKi9cbiAgICAgICAgdGhpcy5vblhSU2Vzc2lvbkVuZCgpO1xuICAgICAgICB0aGlzLm9uU2Vzc2lvblN0YXJ0Q2FsbGJhY2sgPSB0aGlzLm9uWFJTZXNzaW9uU3RhcnQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vblNlc3Npb25FbmRDYWxsYmFjayA9IHRoaXMub25YUlNlc3Npb25FbmQuYmluZCh0aGlzKTtcbiAgICB9XG4gICAgb25BY3RpdmF0ZSgpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUub25YUlNlc3Npb25TdGFydC5hZGQodGhpcy5vblNlc3Npb25TdGFydENhbGxiYWNrKTtcbiAgICAgICAgdGhpcy5lbmdpbmUub25YUlNlc3Npb25FbmQuYWRkKHRoaXMub25TZXNzaW9uRW5kQ2FsbGJhY2spO1xuICAgIH1cbiAgICBvbkRlYWN0aXZhdGUoKSB7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQucmVtb3ZlKHRoaXMub25TZXNzaW9uU3RhcnRDYWxsYmFjayk7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uRW5kLnJlbW92ZSh0aGlzLm9uU2Vzc2lvbkVuZENhbGxiYWNrKTtcbiAgICB9XG4gICAgZ2V0Q29tcG9uZW50cyhvYmopIHtcbiAgICAgICAgY29uc3QgY29tcHMgPSBvYmouZ2V0Q29tcG9uZW50cygpLmZpbHRlcigoYykgPT4gYy50eXBlICE9PSAndnItbW9kZS1hY3RpdmUtc3dpdGNoJyk7XG4gICAgICAgIHRoaXMuY29tcG9uZW50cyA9IHRoaXMuY29tcG9uZW50cy5jb25jYXQoY29tcHMpO1xuICAgICAgICBpZiAodGhpcy5hZmZlY3RDaGlsZHJlbikge1xuICAgICAgICAgICAgbGV0IGNoaWxkcmVuID0gb2JqLmNoaWxkcmVuO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q29tcG9uZW50cyhjaGlsZHJlbltpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0Q29tcG9uZW50c0FjdGl2ZShhY3RpdmUpIHtcbiAgICAgICAgY29uc3QgY29tcHMgPSB0aGlzLmNvbXBvbmVudHM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29tcHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbXBzW2ldLmFjdGl2ZSA9IGFjdGl2ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvblhSU2Vzc2lvblN0YXJ0KCkge1xuICAgICAgICB0aGlzLnNldENvbXBvbmVudHNBY3RpdmUodGhpcy5hY3RpdmF0ZUNvbXBvbmVudHMgPT0gMCk7XG4gICAgfVxuICAgIG9uWFJTZXNzaW9uRW5kKCkge1xuICAgICAgICB0aGlzLnNldENvbXBvbmVudHNBY3RpdmUodGhpcy5hY3RpdmF0ZUNvbXBvbmVudHMgIT0gMCk7XG4gICAgfVxufVxuZXhwb3J0IHsgVnJNb2RlQWN0aXZlU3dpdGNoIH07XG4iLCAidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuaW1wb3J0IHsgQ29sbGlkZXIsIENvbGxpc2lvbkNvbXBvbmVudCwgQ29tcG9uZW50LCBFbWl0dGVyLCBNZXNoLCBNZXNoQXR0cmlidXRlLCBNZXNoQ29tcG9uZW50LCBNZXNoSW5kZXhUeXBlLCB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaS9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IHNldFhSUmlnaWRUcmFuc2Zvcm1Mb2NhbCB9IGZyb20gJy4vdXRpbHMvd2VieHIuanMnO1xuLy8gRklYTUU6IGVhcmN1dCBvdmVycmlkZXMgZGVmYXVsdCBleHBvcnQsIGJyZWFraW5nIG91ciB0ZXN0c1xuaW1wb3J0IGVhcmN1dCBmcm9tICdlYXJjdXQnO1xuY29uc3QgdGVtcFZlYzMgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuLyoqIENvbXB1dGUgbWluaW11bSBhbmQgbWF4aXVtIGV4dGVudHMgb2YgZ2l2ZW4gbGlzdCBvZiBjb250b3VyIHBvaW50cyAqL1xuZnVuY3Rpb24gZXh0ZW50c0Zyb21Db250b3VyKG91dCwgcG9pbnRzKSB7XG4gICAgaWYgKHBvaW50cy5sZW5ndGggPT0gMClcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICBsZXQgYWJzTWF4WCA9IE1hdGguYWJzKHBvaW50c1swXS54KTtcbiAgICBsZXQgYWJzTWF4WiA9IE1hdGguYWJzKHBvaW50c1swXS56KTtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHBvaW50cy5sZW5ndGg7ICsraSkge1xuICAgICAgICBhYnNNYXhYID0gTWF0aC5tYXgoYWJzTWF4WCwgTWF0aC5hYnMocG9pbnRzW2ldLngpKTtcbiAgICAgICAgYWJzTWF4WiA9IE1hdGgubWF4KGFic01heFosIE1hdGguYWJzKHBvaW50c1tpXS56KSk7XG4gICAgfVxuICAgIG91dFswXSA9IGFic01heFg7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSBhYnNNYXhaO1xufVxuLyoqIENoZWNrIHdoZXRoZXIgeCBsaWVzIGJldHdlZW4gYSBhbmQgYiAqL1xuZnVuY3Rpb24gd2l0aGluKHgsIGEsIGIpIHtcbiAgICBpZiAoYSA+IGIpXG4gICAgICAgIHJldHVybiB4IDwgYSAmJiB4ID4gYjtcbiAgICByZXR1cm4geCA+IGEgJiYgeCA8IGI7XG59XG4vKipcbiAqIENoZWNrIHdoZXRoZXIgZ2l2ZW4gcG9pbnQgb24gcGxhbmUncyBib3VuZGluZyBib3ggaXMgaW5zaWRlIHBsYW5lJ3MgcG9seWdvblxuICpcbiAqIEBwYXJhbSBwIDNEIHBvaW50IGluIHBsYW5lJ3MgbG9jYWwgc3BhY2UsIFkgdmFsdWUgaXMgaWdub3JlZCwgc2luY2UgaXQgaXMgYXNzdW1lZFxuICogICAgIHRoYXQgdGhlIHBvaW50IHdhcyBjaGVja2VkIGFnYWluc3QgdGhlIHBsYW5lJ3MgYm91bmRpbmcgYm94LlxuICogQHBhcmFtIHBsYW5lIFhSUGxhbmUgdGhhdCBoYXMgYFhSUGxhbmUucG9seWdvbmBcbiAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgcG9pbnQgbGllcyBvbiB0aGUgcGxhbmVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzUG9pbnRMb2NhbE9uWFJQbGFuZVBvbHlnb24ocCwgcGxhbmUpIHtcbiAgICBjb25zdCBwb2ludHMgPSBwbGFuZS5wb2x5Z29uO1xuICAgIGlmIChwb2ludHMubGVuZ3RoIDwgMylcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIC8qIENvdW50IHJheSBpbnRlcnNlY3Rpb25zOiBldmVuID09IGluc2lkZSwgb2RkID09IG91dHNpZGUgKi9cbiAgICBjb25zdCBwWCA9IHBbMF07XG4gICAgY29uc3QgcFogPSBwWzJdO1xuICAgIGxldCBpbnRlcnNlY3Rpb25zID0gMDtcbiAgICBmb3IgKGxldCBuID0gMCwgbCA9IHBvaW50cy5sZW5ndGggLSAxOyBuIDwgcG9pbnRzLmxlbmd0aDsgKytuKSB7XG4gICAgICAgIGNvbnN0IGFYID0gcG9pbnRzW2xdLng7XG4gICAgICAgIGNvbnN0IGFaID0gcG9pbnRzW2xdLno7XG4gICAgICAgIGNvbnN0IHMgPSAocG9pbnRzW25dLnogLSBhWikgLyAocG9pbnRzW25dLnggLSBhWCk7XG4gICAgICAgIGNvbnN0IHggPSBNYXRoLmFicygocFogLSBhWikgLyBzKTtcbiAgICAgICAgaWYgKHggPj0gMC4wICYmIHggPD0gMS4wICYmIHdpdGhpbih4ICsgcFgsIGFYLCBwb2ludHNbbl0ueCkpXG4gICAgICAgICAgICArK2ludGVyc2VjdGlvbnM7XG4gICAgICAgIGwgPSBuO1xuICAgIH1cbiAgICByZXR1cm4gKGludGVyc2VjdGlvbnMgJiAxKSA9PSAwO1xufVxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIGdpdmVuIHBvaW50IG9uIHBsYW5lJ3MgYm91bmRpbmcgYm94IGlzIGluc2lkZSBwbGFuZSdzIHBvbHlnb25cbiAqXG4gKiBAcGFyYW0gcCAzRCBwb2ludCB0byB0ZXN0LiBJdCBpcyBhc3N1bWVkIHRoYXQgdGhlIHBvaW50IHdhcyBjaGVja2VkIGFnYWluc3RcbiAqICAgICB0aGUgcGxhbmUncyBib3VuZGluZyBib3ggYmVmb3JlaGFuZC5cbiAqIEBwYXJhbSBwbGFuZSBYUlBsYW5lIHRoYXQgaGFzIGBYUlBsYW5lLnBvbHlnb25gXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHBvaW50IGxpZXMgb24gdGhlIHBsYW5lXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1BvaW50V29ybGRPblhSUGxhbmVQb2x5Z29uKG9iamVjdCwgcCwgcGxhbmUpIHtcbiAgICBpZiAocGxhbmUucG9seWdvbi5sZW5ndGggPCAzKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgaXNQb2ludExvY2FsT25YUlBsYW5lUG9seWdvbihvYmplY3QudHJhbnNmb3JtUG9pbnRJbnZlcnNlV29ybGQodGVtcFZlYzMsIHApLCBwbGFuZSk7XG59XG4vKipcbiAqIENyZWF0ZSBhIHBsYW5lIG1lc2ggZnJvbSBhIGxpc3Qgb2YgY29udG91ciBwb2ludHNcbiAqXG4gKiBAcGFyYW0gZW5naW5lIEVuZ2luZSB0byBjcmVhdGUgdGhlIG1lc2ggd2l0aFxuICogQHBhcmFtIHBvaW50cyBDb250b3VyIHBvaW50c1xuICogQHBhcmFtIG1lc2hUb1VwZGF0ZSBPcHRpb25hbCBtZXNoIHRvIHVwZGF0ZSBpbnN0ZWFkIG9mIGNyZWF0aW5nIGEgbmV3IG9uZS5cbiAqL1xuZnVuY3Rpb24gcGxhbmVNZXNoRnJvbUNvbnRvdXIoZW5naW5lLCBwb2ludHMsIG1lc2hUb1VwZGF0ZSA9IG51bGwpIHtcbiAgICBjb25zdCB2ZXJ0ZXhDb3VudCA9IHBvaW50cy5sZW5ndGg7XG4gICAgY29uc3QgdmVydGljZXMgPSBuZXcgRmxvYXQzMkFycmF5KHZlcnRleENvdW50ICogMik7XG4gICAgZm9yIChsZXQgaSA9IDAsIGQgPSAwOyBpIDwgdmVydGV4Q291bnQ7ICsraSwgZCArPSAyKSB7XG4gICAgICAgIHZlcnRpY2VzW2RdID0gcG9pbnRzW2ldLng7XG4gICAgICAgIHZlcnRpY2VzW2QgKyAxXSA9IHBvaW50c1tpXS56O1xuICAgIH1cbiAgICBjb25zdCB0cmlhbmdsZXMgPSBlYXJjdXQodmVydGljZXMpO1xuICAgIGNvbnN0IG1lc2ggPSBtZXNoVG9VcGRhdGUgfHxcbiAgICAgICAgbmV3IE1lc2goZW5naW5lLCB7XG4gICAgICAgICAgICB2ZXJ0ZXhDb3VudCxcbiAgICAgICAgICAgIC8qIEFzc3VtcHRpb24gaGVyZSB0aGF0IHdlIHdpbGwgbmV2ZXIgaGF2ZSBtb3JlIHRoYW4gMjU2IHBvaW50c1xuICAgICAgICAgICAgICogaW4gdGhlIGRldGVjdGVkIHBsYW5lIG1lc2hlcyEgKi9cbiAgICAgICAgICAgIGluZGV4VHlwZTogTWVzaEluZGV4VHlwZS5VbnNpZ25lZEJ5dGUsXG4gICAgICAgICAgICBpbmRleERhdGE6IHRyaWFuZ2xlcyxcbiAgICAgICAgfSk7XG4gICAgaWYgKG1lc2gudmVydGV4Q291bnQgIT09IHZlcnRleENvdW50KSB7XG4gICAgICAgIGNvbnNvbGUud2FybigndmVydGV4Q291bnQgb2YgbWVzaFRvVXBkYXRlIGRpZCBub3QgbWF0Y2ggcmVxdWlyZWQgdmVydGV4Q291bnQnKTtcbiAgICAgICAgcmV0dXJuIG1lc2g7XG4gICAgfVxuICAgIGNvbnN0IHBvc2l0aW9ucyA9IG1lc2guYXR0cmlidXRlKE1lc2hBdHRyaWJ1dGUuUG9zaXRpb24pO1xuICAgIGNvbnN0IHRleHR1cmVDb29yZHMgPSBtZXNoLmF0dHJpYnV0ZShNZXNoQXR0cmlidXRlLlRleHR1cmVDb29yZGluYXRlKTtcbiAgICBjb25zdCBub3JtYWxzID0gbWVzaC5hdHRyaWJ1dGUoTWVzaEF0dHJpYnV0ZS5Ob3JtYWwpO1xuICAgIHRlbXBWZWMzWzFdID0gMDtcbiAgICBmb3IgKGxldCBpID0gMCwgcyA9IDA7IGkgPCB2ZXJ0ZXhDb3VudDsgKytpLCBzICs9IDIpIHtcbiAgICAgICAgdGVtcFZlYzNbMF0gPSB2ZXJ0aWNlc1tzXTtcbiAgICAgICAgdGVtcFZlYzNbMl0gPSB2ZXJ0aWNlc1tzICsgMV07XG4gICAgICAgIHBvc2l0aW9ucy5zZXQoaSwgdGVtcFZlYzMpO1xuICAgIH1cbiAgICB0ZXh0dXJlQ29vcmRzPy5zZXQoMCwgdmVydGljZXMpO1xuICAgIGlmIChub3JtYWxzKSB7XG4gICAgICAgIHRlbXBWZWMzWzBdID0gMDtcbiAgICAgICAgdGVtcFZlYzNbMV0gPSAxO1xuICAgICAgICB0ZW1wVmVjM1syXSA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydGV4Q291bnQ7ICsraSkge1xuICAgICAgICAgICAgbm9ybWFscy5zZXQoaSwgdGVtcFZlYzMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChtZXNoVG9VcGRhdGUpXG4gICAgICAgIG1lc2gudXBkYXRlKCk7XG4gICAgcmV0dXJuIG1lc2g7XG59XG4vKipcbiAqIEdlbmVyYXRlIG1lc2hlcyBhbmQgY29sbGlzaW9ucyBmb3IgWFJQbGFuZXMgdXNpbmcgW1dlYlhSIERldmljZSBBUEkgLSBQbGFuZSBEZXRlY3Rpb25dKGh0dHBzOi8vaW1tZXJzaXZlLXdlYi5naXRodWIuaW8vcmVhbC13b3JsZC1nZW9tZXRyeS9wbGFuZS1kZXRlY3Rpb24uaHRtbCkuXG4gKi9cbmNsYXNzIFBsYW5lRGV0ZWN0aW9uIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAncGxhbmUtZGV0ZWN0aW9uJztcbiAgICAvKipcbiAgICAgKiBNYXRlcmlhbCB0byBhc3NpZ24gdG8gY3JlYXRlZCBwbGFuZSBtZXNoZXMgb3IgYG51bGxgIGlmIG1lc2hlcyBzaG91bGQgbm90IGJlIGNyZWF0ZWQuXG4gICAgICovXG4gICAgcGxhbmVNYXRlcmlhbCA9IG51bGw7XG4gICAgLyoqXG4gICAgICogQ29sbGlzaW9uIG1hc2sgdG8gYXNzaWduIHRvIG5ld2x5IGNyZWF0ZWQgY29sbGlzaW9uIGNvbXBvbmVudHMgb3IgYSBuZWdhdGl2ZSB2YWx1ZSBpZlxuICAgICAqIGNvbGxpc2lvbiBjb21wb25lbnRzIHNob3VsZCBub3QgYmUgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBjb2xsaXNpb25NYXNrID0gLTE7XG4gICAgLyoqIE1hcCBvZiBhbGwgcGxhbmVzIGFuZCB0aGVpciBsYXN0IHVwZGF0ZWQgdGltZXN0YW1wcyAqL1xuICAgIHBsYW5lcyA9IG5ldyBNYXAoKTtcbiAgICAvKiogT2JqZWN0cyBnZW5lcmF0ZWQgZm9yIGVhY2ggWFJQbGFuZSAqL1xuICAgIHBsYW5lT2JqZWN0cyA9IG5ldyBNYXAoKTtcbiAgICAvKiogQ2FsbGVkIHdoZW4gYSBwbGFuZSBzdGFydHMgdHJhY2tpbmcgKi9cbiAgICBvblBsYW5lRm91bmQgPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKiBDYWxsZWQgd2hlbiBhIHBsYW5lIHN0b3BzIHRyYWNraW5nICovXG4gICAgb25QbGFuZUxvc3QgPSBuZXcgRW1pdHRlcigpO1xuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuZ2luZS54cj8uZnJhbWUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgaWYgKHRoaXMuZW5naW5lLnhyLmZyYW1lLmRldGVjdGVkUGxhbmVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3BsYW5lLWRldGVjdGlvbjogV2ViWFIgZmVhdHVyZSBub3QgYXZhaWxhYmxlLicpO1xuICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGNvbnN0IGRldGVjdGVkUGxhbmVzID0gdGhpcy5lbmdpbmUueHIuZnJhbWUuZGV0ZWN0ZWRQbGFuZXM7XG4gICAgICAgIGZvciAoY29uc3QgW3BsYW5lLCBfXSBvZiB0aGlzLnBsYW5lcykge1xuICAgICAgICAgICAgaWYgKCFkZXRlY3RlZFBsYW5lcy5oYXMocGxhbmUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jcGxhbmVMb3N0KHBsYW5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkZXRlY3RlZFBsYW5lcy5mb3JFYWNoKChwbGFuZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMucGxhbmVzLmhhcyhwbGFuZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAocGxhbmUubGFzdENoYW5nZWRUaW1lID4gdGhpcy5wbGFuZXMuZ2V0KHBsYW5lKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiNwbGFuZVVwZGF0ZShwbGFuZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jcGxhbmVGb3VuZChwbGFuZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLiNwbGFuZVVwZGF0ZVBvc2UocGxhbmUpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgI3BsYW5lTG9zdChwbGFuZSkge1xuICAgICAgICB0aGlzLnBsYW5lcy5kZWxldGUocGxhbmUpO1xuICAgICAgICBjb25zdCBvID0gdGhpcy5wbGFuZU9iamVjdHMuZ2V0KHBsYW5lKTtcbiAgICAgICAgdGhpcy5vblBsYW5lTG9zdC5ub3RpZnkocGxhbmUsIG8pO1xuICAgICAgICAvKiBVc2VyIG1pZ2h0IGRlc3Ryb3kgdGhlIG9iamVjdCAqL1xuICAgICAgICBpZiAoby5vYmplY3RJZCA+IDApXG4gICAgICAgICAgICBvLmRlc3Ryb3koKTtcbiAgICB9XG4gICAgI3BsYW5lRm91bmQocGxhbmUpIHtcbiAgICAgICAgdGhpcy5wbGFuZXMuc2V0KHBsYW5lLCBwbGFuZS5sYXN0Q2hhbmdlZFRpbWUpO1xuICAgICAgICBjb25zdCBvID0gdGhpcy5lbmdpbmUuc2NlbmUuYWRkT2JqZWN0KHRoaXMub2JqZWN0KTtcbiAgICAgICAgdGhpcy5wbGFuZU9iamVjdHMuc2V0KHBsYW5lLCBvKTtcbiAgICAgICAgaWYgKHRoaXMucGxhbmVNYXRlcmlhbCkge1xuICAgICAgICAgICAgby5hZGRDb21wb25lbnQoTWVzaENvbXBvbmVudCwge1xuICAgICAgICAgICAgICAgIG1lc2g6IHBsYW5lTWVzaEZyb21Db250b3VyKHRoaXMuZW5naW5lLCBwbGFuZS5wb2x5Z29uKSxcbiAgICAgICAgICAgICAgICBtYXRlcmlhbDogdGhpcy5wbGFuZU1hdGVyaWFsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY29sbGlzaW9uTWFzayA+PSAwKSB7XG4gICAgICAgICAgICBleHRlbnRzRnJvbUNvbnRvdXIodGVtcFZlYzMsIHBsYW5lLnBvbHlnb24pO1xuICAgICAgICAgICAgdGVtcFZlYzNbMV0gPSAwLjAyNTtcbiAgICAgICAgICAgIG8uYWRkQ29tcG9uZW50KENvbGxpc2lvbkNvbXBvbmVudCwge1xuICAgICAgICAgICAgICAgIGdyb3VwOiB0aGlzLmNvbGxpc2lvbk1hc2ssXG4gICAgICAgICAgICAgICAgY29sbGlkZXI6IENvbGxpZGVyLkJveCxcbiAgICAgICAgICAgICAgICBleHRlbnRzOiB0ZW1wVmVjMyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub25QbGFuZUZvdW5kLm5vdGlmeShwbGFuZSwgbyk7XG4gICAgfVxuICAgICNwbGFuZVVwZGF0ZShwbGFuZSkge1xuICAgICAgICB0aGlzLnBsYW5lcy5zZXQocGxhbmUsIHBsYW5lLmxhc3RDaGFuZ2VkVGltZSk7XG4gICAgICAgIGNvbnN0IHBsYW5lTWVzaCA9IHRoaXMucGxhbmVPYmplY3RzLmdldChwbGFuZSkuZ2V0Q29tcG9uZW50KE1lc2hDb21wb25lbnQpO1xuICAgICAgICBpZiAoIXBsYW5lTWVzaClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcGxhbmVNZXNoRnJvbUNvbnRvdXIodGhpcy5lbmdpbmUsIHBsYW5lLnBvbHlnb24sIHBsYW5lTWVzaC5tZXNoKTtcbiAgICB9XG4gICAgI3BsYW5lVXBkYXRlUG9zZShwbGFuZSkge1xuICAgICAgICBjb25zdCBvID0gdGhpcy5wbGFuZU9iamVjdHMuZ2V0KHBsYW5lKTtcbiAgICAgICAgY29uc3QgcG9zZSA9IHRoaXMuZW5naW5lLnhyLmZyYW1lLmdldFBvc2UocGxhbmUucGxhbmVTcGFjZSwgdGhpcy5lbmdpbmUueHIuY3VycmVudFJlZmVyZW5jZVNwYWNlKTtcbiAgICAgICAgaWYgKCFwb3NlKSB7XG4gICAgICAgICAgICBvLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNldFhSUmlnaWRUcmFuc2Zvcm1Mb2NhbChvLCBwb3NlLnRyYW5zZm9ybSk7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkubWF0ZXJpYWwoKVxuXSwgUGxhbmVEZXRlY3Rpb24ucHJvdG90eXBlLCBcInBsYW5lTWF0ZXJpYWxcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmludCgpXG5dLCBQbGFuZURldGVjdGlvbi5wcm90b3R5cGUsIFwiY29sbGlzaW9uTWFza1wiLCB2b2lkIDApO1xuZXhwb3J0IHsgUGxhbmVEZXRlY3Rpb24gfTtcbiIsICJpbXBvcnQgeyBDb21wb25lbnQsIFR5cGUsIEdMVEZFeHRlbnNpb25zIH0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvYXBpJztcbmltcG9ydCB7IHZlYzMsIG1hdDQsIHF1YXQsIHF1YXQyIH0gZnJvbSAnZ2wtbWF0cml4JztcbmNvbnN0IFZSTV9ST0xMX0FYRVMgPSB7XG4gICAgWDogWzEuMCwgMC4wLCAwLjBdLFxuICAgIFk6IFswLjAsIDEuMCwgMC4wXSxcbiAgICBaOiBbMC4wLCAwLjAsIDEuMF0sXG59O1xuY29uc3QgVlJNX0FJTV9BWEVTID0ge1xuICAgIFBvc2l0aXZlWDogWzEuMCwgMC4wLCAwLjBdLFxuICAgIE5lZ2F0aXZlWDogWy0xLjAsIDAuMCwgMC4wXSxcbiAgICBQb3NpdGl2ZVk6IFswLjAsIDEuMCwgMC4wXSxcbiAgICBOZWdhdGl2ZVk6IFswLjAsIC0xLjAsIDAuMF0sXG4gICAgUG9zaXRpdmVaOiBbMC4wLCAwLjAsIDEuMF0sXG4gICAgTmVnYXRpdmVaOiBbMC4wLCAwLjAsIC0xLjBdLFxufTtcbi8qKlxuICogQ29tcG9uZW50IGZvciBsb2FkaW5nIGFuZCBoYW5kbGluZyBWUk0gMS4wIG1vZGVscy5cbiAqXG4gKiBQb3Npbmcgb2YgdGhlIG1vZGVsIHNob3VsZCBiZSBkb25lIGV4Y2x1c2l2ZWx5IGJ5IHJvdGF0aW5nIHRoZSBib25lcy4gVGhlc2UgY2FuIGJlXG4gKiBhY2Nlc3NlZCB1c2luZyB0aGUgYC5ib25lc2AgcHJvcGVydHkgYW5kIGZvbGxvdyB0aGUgVlJNIGJvbmUgbmFtaW5nLiBOb3RlIHRoYXQgbm90XG4gKiBhbGwgVlJNIG1vZGVscyB3aWxsIGhhdmUgYWxsIHBvc3NpYmxlIGJvbmVzLiBUaGUgcmVzdCBwb3NlIChULXBvc2UpIGlzIGNhcHR1cmVkIGluXG4gKiB0aGUgYC5yZXN0UG9zZWAgcHJvcGVydHkuIFJlc2V0dGluZyBhIGJvbmUgdG8gaXRzIHJlc3QgcG9zZSBjYW4gYmUgZG9uZSBhcyBmb2xsb3dzOlxuICogYGBganNcbiAqIHZybUNvbXBvbmVudC5ib25lc1t2cm1Cb25lTmFtZV0ucm90YXRpb25Mb2NhbCA9IHZybUNvbXBvbmVudC5yZXN0UG9zZVt2cm1Cb25lTmFtZV07XG4gKiBgYGBcbiAqXG4gKiBNb3ZpbmcgdGhlIG1vZGVsIHRocm91Z2ggdGhlIHdvcmxkIHNob3VsZCBiZSBkb25lIGJ5IG1vdmluZyB0aGUgb2JqZWN0IHRoaXMgY29tcG9uZW50XG4gKiBpcyBhdHRhY2hlZCB0by4gSW4gb3RoZXIgd29yZHMsIGJ5IG1vdmluZyB0aGUgcm9vdCBvZiB0aGUgVlJNIG1vZGVsLiBUaGUgYm9uZXMgYW5kIGFueVxuICogZGVzY2VuZGFudCBvYmplY3RzIHNob3VsZCAqbm90KiBiZSB1c2VkIHRvIG1vdmUgdGhlIFZSTSBtb2RlbC5cbiAqXG4gKiBUaGUgY29yZSBleHRlbnNpb24gYFZSTUNfdnJtYCBhcyB3ZWxsIGFzIHRoZWBWUk1DX3NwcmluZ0JvbmVgIGFuZCBgVlJNQ19ub2RlX2NvbnN0cmFpbnRgXG4gKiBleHRlbnNpb25zIGFyZSBzdXBwb3J0ZWQuXG4gKlxuICogKipMaW1pdGF0aW9uczoqKlxuICogLSBObyBzdXBwb3J0IGZvciBgVlJNQ19tYXRlcmlhbF9tdG9vbmBcbiAqIC0gRXhwcmVzc2lvbnMgYXJlbid0IHN1cHBvcnRlZFxuICogLSBFeHByZXNzaW9uIGJhc2VkIGxvb2tBdCBpc24ndCBzdXBwb3J0ZWRcbiAqIC0gTWVzaCBhbm5vdGF0aW9uIG1vZGUgYGF1dG9gIGlzIG5vdCBzdXBwb3J0ZWQgKGZpcnN0IHBlcnNvbiBtb2RlKVxuICovXG5jbGFzcyBWcm0gZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICd2cm0nO1xuICAgIHN0YXRpYyBQcm9wZXJ0aWVzID0ge1xuICAgICAgICAvKiogVVJMIHRvIGEgVlJNIGZpbGUgdG8gbG9hZCAqL1xuICAgICAgICBzcmM6IHsgdHlwZTogVHlwZS5TdHJpbmcgfSxcbiAgICAgICAgLyoqIE9iamVjdCB0aGUgVlJNIGlzIGxvb2tpbmcgYXQgKi9cbiAgICAgICAgbG9va0F0VGFyZ2V0OiB7IHR5cGU6IFR5cGUuT2JqZWN0IH0sXG4gICAgfTtcbiAgICAvKiogTWV0YSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgVlJNIG1vZGVsICovXG4gICAgbWV0YSA9IG51bGw7XG4gICAgLyoqIFRoZSBodW1hbm9pZCBib25lcyBvZiB0aGUgVlJNIG1vZGVsICovXG4gICAgYm9uZXMgPSB7XG4gICAgICAgIC8qIFRvcnNvICovXG4gICAgICAgIGhpcHM6IG51bGwsXG4gICAgICAgIHNwaW5lOiBudWxsLFxuICAgICAgICBjaGVzdDogbnVsbCxcbiAgICAgICAgdXBwZXJDaGVzdDogbnVsbCxcbiAgICAgICAgbmVjazogbnVsbCxcbiAgICAgICAgLyogSGVhZCAqL1xuICAgICAgICBoZWFkOiBudWxsLFxuICAgICAgICBsZWZ0RXllOiBudWxsLFxuICAgICAgICByaWdodEV5ZTogbnVsbCxcbiAgICAgICAgamF3OiBudWxsLFxuICAgICAgICAvKiBMZWdzICovXG4gICAgICAgIGxlZnRVcHBlckxlZzogbnVsbCxcbiAgICAgICAgbGVmdExvd2VyTGVnOiBudWxsLFxuICAgICAgICBsZWZ0Rm9vdDogbnVsbCxcbiAgICAgICAgbGVmdFRvZXM6IG51bGwsXG4gICAgICAgIHJpZ2h0VXBwZXJMZWc6IG51bGwsXG4gICAgICAgIHJpZ2h0TG93ZXJMZWc6IG51bGwsXG4gICAgICAgIHJpZ2h0Rm9vdDogbnVsbCxcbiAgICAgICAgcmlnaHRUb2VzOiBudWxsLFxuICAgICAgICAvKiBBcm1zICovXG4gICAgICAgIGxlZnRTaG91bGRlcjogbnVsbCxcbiAgICAgICAgbGVmdFVwcGVyQXJtOiBudWxsLFxuICAgICAgICBsZWZ0TG93ZXJBcm06IG51bGwsXG4gICAgICAgIGxlZnRIYW5kOiBudWxsLFxuICAgICAgICByaWdodFNob3VsZGVyOiBudWxsLFxuICAgICAgICByaWdodFVwcGVyQXJtOiBudWxsLFxuICAgICAgICByaWdodExvd2VyQXJtOiBudWxsLFxuICAgICAgICByaWdodEhhbmQ6IG51bGwsXG4gICAgICAgIC8qIEZpbmdlcnMgKi9cbiAgICAgICAgbGVmdFRodW1iTWV0YWNhcnBhbDogbnVsbCxcbiAgICAgICAgbGVmdFRodW1iUHJveGltYWw6IG51bGwsXG4gICAgICAgIGxlZnRUaHVtYkRpc3RhbDogbnVsbCxcbiAgICAgICAgbGVmdEluZGV4UHJveGltYWw6IG51bGwsXG4gICAgICAgIGxlZnRJbmRleEludGVybWVkaWF0ZTogbnVsbCxcbiAgICAgICAgbGVmdEluZGV4RGlzdGFsOiBudWxsLFxuICAgICAgICBsZWZ0TWlkZGxlUHJveGltYWw6IG51bGwsXG4gICAgICAgIGxlZnRNaWRkbGVJbnRlcm1lZGlhdGU6IG51bGwsXG4gICAgICAgIGxlZnRNaWRkbGVEaXN0YWw6IG51bGwsXG4gICAgICAgIGxlZnRSaW5nUHJveGltYWw6IG51bGwsXG4gICAgICAgIGxlZnRSaW5nSW50ZXJtZWRpYXRlOiBudWxsLFxuICAgICAgICBsZWZ0UmluZ0Rpc3RhbDogbnVsbCxcbiAgICAgICAgbGVmdExpdHRsZVByb3hpbWFsOiBudWxsLFxuICAgICAgICBsZWZ0TGl0dGxlSW50ZXJtZWRpYXRlOiBudWxsLFxuICAgICAgICBsZWZ0TGl0dGxlRGlzdGFsOiBudWxsLFxuICAgICAgICByaWdodFRodW1iTWV0YWNhcnBhbDogbnVsbCxcbiAgICAgICAgcmlnaHRUaHVtYlByb3hpbWFsOiBudWxsLFxuICAgICAgICByaWdodFRodW1iRGlzdGFsOiBudWxsLFxuICAgICAgICByaWdodEluZGV4UHJveGltYWw6IG51bGwsXG4gICAgICAgIHJpZ2h0SW5kZXhJbnRlcm1lZGlhdGU6IG51bGwsXG4gICAgICAgIHJpZ2h0SW5kZXhEaXN0YWw6IG51bGwsXG4gICAgICAgIHJpZ2h0TWlkZGxlUHJveGltYWw6IG51bGwsXG4gICAgICAgIHJpZ2h0TWlkZGxlSW50ZXJtZWRpYXRlOiBudWxsLFxuICAgICAgICByaWdodE1pZGRsZURpc3RhbDogbnVsbCxcbiAgICAgICAgcmlnaHRSaW5nUHJveGltYWw6IG51bGwsXG4gICAgICAgIHJpZ2h0UmluZ0ludGVybWVkaWF0ZTogbnVsbCxcbiAgICAgICAgcmlnaHRSaW5nRGlzdGFsOiBudWxsLFxuICAgICAgICByaWdodExpdHRsZVByb3hpbWFsOiBudWxsLFxuICAgICAgICByaWdodExpdHRsZUludGVybWVkaWF0ZTogbnVsbCxcbiAgICAgICAgcmlnaHRMaXR0bGVEaXN0YWw6IG51bGwsXG4gICAgfTtcbiAgICAvKiogUm90YXRpb25zIG9mIHRoZSBib25lcyBpbiB0aGUgcmVzdCBwb3NlIChULXBvc2UpICovXG4gICAgcmVzdFBvc2UgPSB7fTtcbiAgICAvKiBBbGwgbm9kZSBjb25zdHJhaW50cywgb3JkZXJlZCB0byBkZWFsIHdpdGggZGVwZW5kZW5jaWVzICovXG4gICAgX25vZGVDb25zdHJhaW50cyA9IFtdO1xuICAgIC8qIFZSTUNfc3ByaW5nQm9uZSBjaGFpbnMgKi9cbiAgICBfc3ByaW5nQ2hhaW5zID0gW107XG4gICAgLyogU3BoZXJpY2FsIGNvbGxpZGVycyBmb3Igc3ByaW5nIGJvbmVzICovXG4gICAgX3NwaGVyZUNvbGxpZGVycyA9IFtdO1xuICAgIC8qIENhcHN1bGUgc2hhcGVkIGNvbGxpZGVycyBmb3Igc3ByaW5nIGJvbmVzICovXG4gICAgX2NhcHN1bGVDb2xsaWRlcnMgPSBbXTtcbiAgICAvKiBJbmRpY2F0ZXMgd2hpY2ggbWVzaGVzIGFyZSByZW5kZXJlZCBpbiBmaXJzdC90aGlyZCBwZXJzb24gdmlld3MgKi9cbiAgICBfZmlyc3RQZXJzb25Bbm5vdGF0aW9ucyA9IFtdO1xuICAgIC8qIENvbnRhaW5zIGRldGFpbHMgZm9yIChib25lIHR5cGUpIGxvb2tBdCBiZWhhdmlvdXIgKi9cbiAgICBfbG9va0F0ID0gbnVsbDtcbiAgICAvKiBXaGV0aGVyIG9yIG5vdCB0aGUgVlJNIGNvbXBvbmVudCBoYXMgYmVlbiBpbml0aWFsaXplZCB3aXRoIGBpbml0aWFsaXplVnJtYCAqL1xuICAgIF9pbml0aWFsaXplZCA9IGZhbHNlO1xuICAgIGluaXQoKSB7XG4gICAgICAgIHRoaXMuX3RlbXBWMyA9IHZlYzMuY3JlYXRlKCk7XG4gICAgICAgIHRoaXMuX3RlbXBWM0EgPSB2ZWMzLmNyZWF0ZSgpO1xuICAgICAgICB0aGlzLl90ZW1wVjNCID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgdGhpcy5fdGVtcFF1YXQgPSBxdWF0LmNyZWF0ZSgpO1xuICAgICAgICB0aGlzLl90ZW1wUXVhdEEgPSBxdWF0LmNyZWF0ZSgpO1xuICAgICAgICB0aGlzLl90ZW1wUXVhdEIgPSBxdWF0LmNyZWF0ZSgpO1xuICAgICAgICB0aGlzLl90ZW1wTWF0NEEgPSBtYXQ0LmNyZWF0ZSgpO1xuICAgICAgICB0aGlzLl90ZW1wUXVhdDIgPSBxdWF0Mi5jcmVhdGUoKTtcbiAgICAgICAgdGhpcy5fdGFpbFRvU2hhcGUgPSB2ZWMzLmNyZWF0ZSgpO1xuICAgICAgICB0aGlzLl9oZWFkVG9UYWlsID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgdGhpcy5faW5lcnRpYSA9IHZlYzMuY3JlYXRlKCk7XG4gICAgICAgIHRoaXMuX3N0aWZmbmVzcyA9IHZlYzMuY3JlYXRlKCk7XG4gICAgICAgIHRoaXMuX2V4dGVybmFsID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgdGhpcy5fcmlnaHRWZWN0b3IgPSB2ZWMzLnNldCh2ZWMzLmNyZWF0ZSgpLCAxLCAwLCAwKTtcbiAgICAgICAgdGhpcy5fdXBWZWN0b3IgPSB2ZWMzLnNldCh2ZWMzLmNyZWF0ZSgpLCAwLCAxLCAwKTtcbiAgICAgICAgdGhpcy5fZm9yd2FyZFZlY3RvciA9IHZlYzMuc2V0KHZlYzMuY3JlYXRlKCksIDAsIDAsIDEpO1xuICAgICAgICB0aGlzLl9pZGVudGl0eVF1YXQgPSBxdWF0LmlkZW50aXR5KHF1YXQuY3JlYXRlKCkpO1xuICAgICAgICB0aGlzLl9yYWQyZGVnID0gMTgwLjAgLyBNYXRoLlBJO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNyYykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcigndnJtOiBzcmMgcHJvcGVydHkgbm90IHNldCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW5naW5lLnNjZW5lXG4gICAgICAgICAgICAuYXBwZW5kKHRoaXMuc3JjLCB7IGxvYWRHbHRmRXh0ZW5zaW9uczogdHJ1ZSB9KVxuICAgICAgICAgICAgLnRoZW4oKHsgcm9vdCwgZXh0ZW5zaW9ucyB9KSA9PiB7XG4gICAgICAgICAgICByb290LmNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiAoY2hpbGQucGFyZW50ID0gdGhpcy5vYmplY3QpKTtcbiAgICAgICAgICAgIHRoaXMuX2luaXRpYWxpemVWcm0oZXh0ZW5zaW9ucyk7XG4gICAgICAgICAgICByb290LmRlc3Ryb3koKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyB0aGUgVlJNIGdsVEYgZXh0ZW5zaW9ucyBhbmQgaW5pdGlhbGl6ZXMgdGhlIHZybSBjb21wb25lbnQuXG4gICAgICogQHBhcmFtIHtHTFRGRXh0ZW5zaW9uc30gZXh0ZW5zaW9ucyBUaGUgZ2xURiBleHRlbnNpb25zIGZvciB0aGUgVlJNIG1vZGVsXG4gICAgICovXG4gICAgX2luaXRpYWxpemVWcm0oZXh0ZW5zaW9ucykge1xuICAgICAgICBpZiAodGhpcy5faW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdWUk0gY29tcG9uZW50IGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBWUk1DX3ZybSA9IGV4dGVuc2lvbnMucm9vdFsnVlJNQ192cm0nXTtcbiAgICAgICAgaWYgKCFWUk1DX3ZybSkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ01pc3NpbmcgVlJNIGV4dGVuc2lvbnMnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoVlJNQ192cm0uc3BlY1ZlcnNpb24gIT09ICcxLjAnKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgVW5zdXBwb3J0ZWQgVlJNIHZlcnNpb24sIG9ubHkgMS4wIGlzIHN1cHBvcnRlZCwgYnV0IGVuY291bnRlcmVkICcke1ZSTUNfdnJtLnNwZWNWZXJzaW9ufSdgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1ldGEgPSBWUk1DX3ZybS5tZXRhO1xuICAgICAgICB0aGlzLl9wYXJzZUh1bWFub2lkKFZSTUNfdnJtLmh1bWFub2lkLCBleHRlbnNpb25zKTtcbiAgICAgICAgaWYgKFZSTUNfdnJtLmZpcnN0UGVyc29uKSB7XG4gICAgICAgICAgICB0aGlzLl9wYXJzZUZpcnN0UGVyc29uKFZSTUNfdnJtLmZpcnN0UGVyc29uLCBleHRlbnNpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoVlJNQ192cm0ubG9va0F0KSB7XG4gICAgICAgICAgICB0aGlzLl9wYXJzZUxvb2tBdChWUk1DX3ZybS5sb29rQXQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2ZpbmRBbmRQYXJzZU5vZGVDb25zdHJhaW50cyhleHRlbnNpb25zKTtcbiAgICAgICAgY29uc3Qgc3ByaW5nQm9uZSA9IGV4dGVuc2lvbnMucm9vdFsnVlJNQ19zcHJpbmdCb25lJ107XG4gICAgICAgIGlmIChzcHJpbmdCb25lKSB7XG4gICAgICAgICAgICB0aGlzLl9wYXJzZUFuZEluaXRpYWxpemVTcHJpbmdCb25lcyhzcHJpbmdCb25lLCBleHRlbnNpb25zKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9pbml0aWFsaXplZCA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZUh1bWFub2lkKGh1bWFub2lkLCBleHRlbnNpb25zKSB7XG4gICAgICAgIGZvciAoY29uc3QgYm9uZU5hbWUgaW4gaHVtYW5vaWQuaHVtYW5Cb25lcykge1xuICAgICAgICAgICAgaWYgKCEoYm9uZU5hbWUgaW4gdGhpcy5ib25lcykpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFVucmVjb2duaXplZCBib25lICcke2JvbmVOYW1lfSdgKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBodW1hbm9pZC5odW1hbkJvbmVzW2JvbmVOYW1lXS5ub2RlO1xuICAgICAgICAgICAgY29uc3Qgb2JqZWN0SWQgPSBleHRlbnNpb25zLmlkTWFwcGluZ1tub2RlXTtcbiAgICAgICAgICAgIHRoaXMuYm9uZXNbYm9uZU5hbWVdID0gdGhpcy5lbmdpbmUud3JhcE9iamVjdChvYmplY3RJZCk7XG4gICAgICAgICAgICB0aGlzLnJlc3RQb3NlW2JvbmVOYW1lXSA9IHF1YXQuY29weShxdWF0LmNyZWF0ZSgpLCB0aGlzLmJvbmVzW2JvbmVOYW1lXS5yb3RhdGlvbkxvY2FsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfcGFyc2VGaXJzdFBlcnNvbihmaXJzdFBlcnNvbiwgZXh0ZW5zaW9ucykge1xuICAgICAgICBmb3IgKGNvbnN0IG1lc2hBbm5vdGF0aW9uIG9mIGZpcnN0UGVyc29uLm1lc2hBbm5vdGF0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgYW5ub3RhdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBub2RlOiB0aGlzLmVuZ2luZS53cmFwT2JqZWN0KGV4dGVuc2lvbnMuaWRNYXBwaW5nW21lc2hBbm5vdGF0aW9uLm5vZGVdKSxcbiAgICAgICAgICAgICAgICBmaXJzdFBlcnNvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICB0aGlyZFBlcnNvbjogdHJ1ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzd2l0Y2ggKG1lc2hBbm5vdGF0aW9uLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdmaXJzdFBlcnNvbk9ubHknOlxuICAgICAgICAgICAgICAgICAgICBhbm5vdGF0aW9uLnRoaXJkUGVyc29uID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RoaXJkUGVyc29uT25seSc6XG4gICAgICAgICAgICAgICAgICAgIGFubm90YXRpb24uZmlyc3RQZXJzb24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYm90aCc6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2F1dG8nOlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJGaXJzdCBwZXJzb24gbWVzaCBhbm5vdGF0aW9uIHR5cGUgJ2F1dG8nIGlzIG5vdCBzdXBwb3J0ZWQsIHRyZWF0aW5nIGFzICdib3RoJyFcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEludmFsaWQgbWVzaCBhbm5vdGF0aW9uIHR5cGUgJyR7bWVzaEFubm90YXRpb24udHlwZX0nYCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fZmlyc3RQZXJzb25Bbm5vdGF0aW9ucy5wdXNoKGFubm90YXRpb24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9wYXJzZUxvb2tBdChsb29rQXQpIHtcbiAgICAgICAgaWYgKGxvb2tBdC50eXBlICE9PSAnYm9uZScpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgVW5zdXBwb3J0ZWQgbG9va0F0IHR5cGUgJyR7bG9va0F0LnR5cGV9Jywgb25seSAnYm9uZScgaXMgc3VwcG9ydGVkYCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VSYW5nZU1hcCA9IChyYW5nZU1hcCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpbnB1dE1heFZhbHVlOiByYW5nZU1hcC5pbnB1dE1heFZhbHVlLFxuICAgICAgICAgICAgICAgIG91dHB1dFNjYWxlOiByYW5nZU1hcC5vdXRwdXRTY2FsZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX2xvb2tBdCA9IHtcbiAgICAgICAgICAgIG9mZnNldEZyb21IZWFkQm9uZTogbG9va0F0Lm9mZnNldEZyb21IZWFkQm9uZSB8fCBbMCwgMCwgMF0sXG4gICAgICAgICAgICBob3Jpem9udGFsSW5uZXI6IHBhcnNlUmFuZ2VNYXAobG9va0F0LnJhbmdlTWFwSG9yaXpvbnRhbElubmVyKSxcbiAgICAgICAgICAgIGhvcml6b250YWxPdXRlcjogcGFyc2VSYW5nZU1hcChsb29rQXQucmFuZ2VNYXBIb3Jpem9udGFsT3V0ZXIpLFxuICAgICAgICAgICAgdmVydGljYWxEb3duOiBwYXJzZVJhbmdlTWFwKGxvb2tBdC5yYW5nZU1hcFZlcnRpY2FsRG93biksXG4gICAgICAgICAgICB2ZXJ0aWNhbFVwOiBwYXJzZVJhbmdlTWFwKGxvb2tBdC5yYW5nZU1hcFZlcnRpY2FsVXApLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBfZmluZEFuZFBhcnNlTm9kZUNvbnN0cmFpbnRzKGV4dGVuc2lvbnMpIHtcbiAgICAgICAgY29uc3QgdHJhdmVyc2UgPSAob2JqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub2RlRXh0ZW5zaW9ucyA9IGV4dGVuc2lvbnMubm9kZVtvYmplY3Qub2JqZWN0SWRdO1xuICAgICAgICAgICAgaWYgKG5vZGVFeHRlbnNpb25zICYmICdWUk1DX25vZGVfY29uc3RyYWludCcgaW4gbm9kZUV4dGVuc2lvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBub2RlQ29uc3RyYWludEV4dGVuc2lvbiA9IG5vZGVFeHRlbnNpb25zWydWUk1DX25vZGVfY29uc3RyYWludCddO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnN0cmFpbnQgPSBub2RlQ29uc3RyYWludEV4dGVuc2lvbi5jb25zdHJhaW50O1xuICAgICAgICAgICAgICAgIGxldCB0eXBlLCBheGlzO1xuICAgICAgICAgICAgICAgIGlmICgncm9sbCcgaW4gY29uc3RyYWludCkge1xuICAgICAgICAgICAgICAgICAgICB0eXBlID0gJ3JvbGwnO1xuICAgICAgICAgICAgICAgICAgICBheGlzID0gVlJNX1JPTExfQVhFU1tjb25zdHJhaW50LnJvbGwucm9sbEF4aXNdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgnYWltJyBpbiBjb25zdHJhaW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSAnYWltJztcbiAgICAgICAgICAgICAgICAgICAgYXhpcyA9IFZSTV9BSU1fQVhFU1tjb25zdHJhaW50LmFpbS5haW1BeGlzXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoJ3JvdGF0aW9uJyBpbiBjb25zdHJhaW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSAncm90YXRpb24nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2UgPSB0aGlzLmVuZ2luZS53cmFwT2JqZWN0KGV4dGVuc2lvbnMuaWRNYXBwaW5nW2NvbnN0cmFpbnRbdHlwZV0uc291cmNlXSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX25vZGVDb25zdHJhaW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjogb2JqZWN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgYXhpczogYXhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodDogY29uc3RyYWludFt0eXBlXS53ZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBSZXN0IHBvc2UgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uUmVzdExvY2FsUm90YXRpb246IHF1YXQuY29weShxdWF0LmNyZWF0ZSgpLCBvYmplY3Qucm90YXRpb25Mb2NhbCksXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VSZXN0TG9jYWxSb3RhdGlvbjogcXVhdC5jb3B5KHF1YXQuY3JlYXRlKCksIHNvdXJjZS5yb3RhdGlvbkxvY2FsKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZVJlc3RMb2NhbFJvdGF0aW9uSW52OiBxdWF0LmludmVydChxdWF0LmNyZWF0ZSgpLCBzb3VyY2Uucm90YXRpb25Mb2NhbCksXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdVbnJlY29nbml6ZWQgb3IgaW52YWxpZCBWUk1DX25vZGVfY29uc3RyYWludCwgaWdub3JpbmcgaXQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIG9iamVjdC5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIHRyYXZlcnNlKGNoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdHJhdmVyc2UodGhpcy5vYmplY3QpO1xuICAgIH1cbiAgICBfcGFyc2VBbmRJbml0aWFsaXplU3ByaW5nQm9uZXMoc3ByaW5nQm9uZSwgZXh0ZW5zaW9ucykge1xuICAgICAgICBjb25zdCBjb2xsaWRlcnMgPSAoc3ByaW5nQm9uZS5jb2xsaWRlcnMgfHwgW10pLm1hcCgoY29sbGlkZXIsIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNoYXBlVHlwZSA9ICdjYXBzdWxlJyBpbiBjb2xsaWRlci5zaGFwZSA/ICdjYXBzdWxlJyA6ICdzcGhlcmUnO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpZDogaSxcbiAgICAgICAgICAgICAgICBvYmplY3Q6IHRoaXMuZW5naW5lLndyYXBPYmplY3QoZXh0ZW5zaW9ucy5pZE1hcHBpbmdbY29sbGlkZXIubm9kZV0pLFxuICAgICAgICAgICAgICAgIHNoYXBlOiB7XG4gICAgICAgICAgICAgICAgICAgIGlzQ2Fwc3VsZTogc2hhcGVUeXBlID09PSAnY2Fwc3VsZScsXG4gICAgICAgICAgICAgICAgICAgIHJhZGl1czogY29sbGlkZXIuc2hhcGVbc2hhcGVUeXBlXS5yYWRpdXMsXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldDogY29sbGlkZXIuc2hhcGVbc2hhcGVUeXBlXS5vZmZzZXQsXG4gICAgICAgICAgICAgICAgICAgIHRhaWw6IGNvbGxpZGVyLnNoYXBlW3NoYXBlVHlwZV0udGFpbCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNhY2hlOiB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWQ6IHZlYzMuY3JlYXRlKCksXG4gICAgICAgICAgICAgICAgICAgIHRhaWw6IHZlYzMuY3JlYXRlKCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9zcGhlcmVDb2xsaWRlcnMgPSBjb2xsaWRlcnMuZmlsdGVyKChjKSA9PiAhYy5zaGFwZS5pc0NhcHN1bGUpO1xuICAgICAgICB0aGlzLl9jYXBzdWxlQ29sbGlkZXJzID0gY29sbGlkZXJzLmZpbHRlcigoYykgPT4gYy5zaGFwZS5pc0NhcHN1bGUpO1xuICAgICAgICBjb25zdCBjb2xsaWRlckdyb3VwcyA9IChzcHJpbmdCb25lLmNvbGxpZGVyR3JvdXBzIHx8IFtdKS5tYXAoKGdyb3VwKSA9PiAoe1xuICAgICAgICAgICAgbmFtZTogZ3JvdXAubmFtZSxcbiAgICAgICAgICAgIGNvbGxpZGVyczogZ3JvdXAuY29sbGlkZXJzLm1hcCgoYykgPT4gY29sbGlkZXJzW2NdKSxcbiAgICAgICAgfSkpO1xuICAgICAgICBmb3IgKGNvbnN0IHNwcmluZyBvZiBzcHJpbmdCb25lLnNwcmluZ3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGpvaW50cyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBqb2ludCBvZiBzcHJpbmcuam9pbnRzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3ByaW5nSm9pbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgIGhpdFJhZGl1czogMC4wLFxuICAgICAgICAgICAgICAgICAgICBzdGlmZm5lc3M6IDEuMCxcbiAgICAgICAgICAgICAgICAgICAgZ3Jhdml0eVBvd2VyOiAwLjAsXG4gICAgICAgICAgICAgICAgICAgIGdyYXZpdHlEaXI6IFswLjAsIC0xLjAsIDAuMF0sXG4gICAgICAgICAgICAgICAgICAgIGRyYWdGb3JjZTogMC41LFxuICAgICAgICAgICAgICAgICAgICBub2RlOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBzdGF0ZTogbnVsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oc3ByaW5nSm9pbnQsIGpvaW50KTtcbiAgICAgICAgICAgICAgICBzcHJpbmdKb2ludC5ub2RlID0gdGhpcy5lbmdpbmUud3JhcE9iamVjdChleHRlbnNpb25zLmlkTWFwcGluZ1tzcHJpbmdKb2ludC5ub2RlXSk7XG4gICAgICAgICAgICAgICAgam9pbnRzLnB1c2goc3ByaW5nSm9pbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc3ByaW5nQ2hhaW5Db2xsaWRlcnMgPSAoc3ByaW5nLmNvbGxpZGVyR3JvdXBzIHx8IFtdKS5mbGF0TWFwKChjZykgPT4gY29sbGlkZXJHcm91cHNbY2ddLmNvbGxpZGVycyk7XG4gICAgICAgICAgICB0aGlzLl9zcHJpbmdDaGFpbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgbmFtZTogc3ByaW5nLm5hbWUsXG4gICAgICAgICAgICAgICAgY2VudGVyOiBzcHJpbmcuY2VudGVyXG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy5lbmdpbmUud3JhcE9iamVjdChleHRlbnNpb25zLmlkTWFwcGluZ1tzcHJpbmcuY2VudGVyXSlcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgICAgICAgIGpvaW50cyxcbiAgICAgICAgICAgICAgICBzcGhlcmVDb2xsaWRlcnM6IHNwcmluZ0NoYWluQ29sbGlkZXJzLmZpbHRlcigoYykgPT4gIWMuc2hhcGUuaXNDYXBzdWxlKSxcbiAgICAgICAgICAgICAgICBjYXBzdWxlQ29sbGlkZXJzOiBzcHJpbmdDaGFpbkNvbGxpZGVycy5maWx0ZXIoKGMpID0+IGMuc2hhcGUuaXNDYXBzdWxlKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8qIEluaXRpYWxpemUgc3ByaW5nIGJvbmUgam9pbnQgc3RhdGUgKi9cbiAgICAgICAgZm9yIChjb25zdCBzcHJpbmdDaGFpbiBvZiB0aGlzLl9zcHJpbmdDaGFpbnMpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3ByaW5nQ2hhaW4uam9pbnRzLmxlbmd0aCAtIDE7ICsraSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNwcmluZ0JvbmVKb2ludCA9IHNwcmluZ0NoYWluLmpvaW50c1tpXTtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZFNwcmluZ0JvbmVKb2ludCA9IHNwcmluZ0NoYWluLmpvaW50c1tpICsgMV07XG4gICAgICAgICAgICAgICAgY29uc3Qgc3ByaW5nQm9uZVBvc2l0aW9uID0gc3ByaW5nQm9uZUpvaW50Lm5vZGUuZ2V0VHJhbnNsYXRpb25Xb3JsZCh2ZWMzLmNyZWF0ZSgpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZFNwcmluZ0JvbmVQb3NpdGlvbiA9IGNoaWxkU3ByaW5nQm9uZUpvaW50Lm5vZGUuZ2V0VHJhbnNsYXRpb25Xb3JsZCh2ZWMzLmNyZWF0ZSgpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBib25lRGlyZWN0aW9uID0gdmVjMy5zdWJ0cmFjdCh0aGlzLl90ZW1wVjNBLCBzcHJpbmdCb25lUG9zaXRpb24sIGNoaWxkU3ByaW5nQm9uZVBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgcHJldlRhaWw6IGNoaWxkU3ByaW5nQm9uZVBvc2l0aW9uLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGFpbDogdmVjMy5jb3B5KHZlYzMuY3JlYXRlKCksIGNoaWxkU3ByaW5nQm9uZVBvc2l0aW9uKSxcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbExvY2FsUm90YXRpb246IHF1YXQuY29weShxdWF0LmNyZWF0ZSgpLCBzcHJpbmdCb25lSm9pbnQubm9kZS5yb3RhdGlvbkxvY2FsKSxcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbExvY2FsVHJhbnNmb3JtSW52ZXJ0OiBxdWF0Mi5pbnZlcnQocXVhdDIuY3JlYXRlKCksIHNwcmluZ0JvbmVKb2ludC5ub2RlLnRyYW5zZm9ybUxvY2FsKSxcbiAgICAgICAgICAgICAgICAgICAgYm9uZUF4aXM6IHZlYzMubm9ybWFsaXplKHZlYzMuY3JlYXRlKCksIGNoaWxkU3ByaW5nQm9uZUpvaW50Lm5vZGUuZ2V0VHJhbnNsYXRpb25Mb2NhbCh0aGlzLl90ZW1wVjMpKSxcbiAgICAgICAgICAgICAgICAgICAgLyogRW5zdXJlIGJvbmUgbGVuZ3RoIGlzIGF0IGxlYXN0IDFjbSB0byBhdm9pZCBqaXR0ZXJ5IGJlaGF2aW91ciBmcm9tIHplcm8tbGVuZ3RoIGJvbmVzICovXG4gICAgICAgICAgICAgICAgICAgIGJvbmVMZW5ndGg6IE1hdGgubWF4KDAuMDEsIHZlYzMubGVuZ3RoKGJvbmVEaXJlY3Rpb24pKSxcbiAgICAgICAgICAgICAgICAgICAgLyogVGFpbCBwb3NpdGlvbnMgaW4gY2VudGVyIHNwYWNlLCBpZiBuZWVkZWQgKi9cbiAgICAgICAgICAgICAgICAgICAgcHJldlRhaWxDZW50ZXI6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUYWlsQ2VudGVyOiBudWxsLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKHNwcmluZ0NoYWluLmNlbnRlcikge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5wcmV2VGFpbENlbnRlciA9IHNwcmluZ0NoYWluLmNlbnRlci50cmFuc2Zvcm1Qb2ludEludmVyc2VXb3JsZCh2ZWMzLmNyZWF0ZSgpLCBjaGlsZFNwcmluZ0JvbmVQb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmN1cnJlbnRUYWlsQ2VudGVyID0gdmVjMy5jb3B5KHZlYzMuY3JlYXRlKCksIGNoaWxkU3ByaW5nQm9uZVBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3ByaW5nQm9uZUpvaW50LnN0YXRlID0gc3RhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKGR0KSB7XG4gICAgICAgIGlmICghdGhpcy5faW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvKiAxLiBSZXNvbHZlIGh1bWFub2lkIGJvbmVzIChwZXJmb3JtZWQgYnkgdXNlcikgKi9cbiAgICAgICAgLyogMi4gUmVzb2x2ZSBMb29rQXQgKGJvbmUgdHlwZSkgYXMgdGhlIHBvc2l0aW9uIG9mIHRoZSBoZWFkIGlzIGRldGVybWluZWQgKi9cbiAgICAgICAgdGhpcy5fcmVzb2x2ZUxvb2tBdCgpO1xuICAgICAgICAvKiAzLiBFeHByZXNzaW9uIHVwZGF0ZSAoVE9ETykgKi9cbiAgICAgICAgLyogNC4gQXBwbHkgRXhwcmVzc2lvbiAoVE9ETykgKi9cbiAgICAgICAgLyogNS4gUmVzb2x2ZSBjb25zdHJhaW50cyAqL1xuICAgICAgICB0aGlzLl9yZXNvbHZlQ29uc3RyYWludHMoKTtcbiAgICAgICAgLyogNi4gUmVzb2x2ZSBTcHJpbmcgQm9uZSAqL1xuICAgICAgICB0aGlzLl91cGRhdGVTcHJpbmdCb25lcyhkdCk7XG4gICAgfVxuICAgIF9yYW5nZU1hcChyYW5nZU1hcCwgaW5wdXQpIHtcbiAgICAgICAgY29uc3QgbWF4VmFsdWUgPSByYW5nZU1hcC5pbnB1dE1heFZhbHVlO1xuICAgICAgICBjb25zdCBvdXRwdXRTY2FsZSA9IHJhbmdlTWFwLm91dHB1dFNjYWxlO1xuICAgICAgICByZXR1cm4gKE1hdGgubWluKGlucHV0LCBtYXhWYWx1ZSkgLyBtYXhWYWx1ZSkgKiBvdXRwdXRTY2FsZTtcbiAgICB9XG4gICAgX3Jlc29sdmVMb29rQXQoKSB7XG4gICAgICAgIGlmICghdGhpcy5fbG9va0F0IHx8ICF0aGlzLmxvb2tBdFRhcmdldCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxvb2tBdFNvdXJjZSA9IHRoaXMuYm9uZXMuaGVhZC50cmFuc2Zvcm1Qb2ludFdvcmxkKHRoaXMuX3RlbXBWM0EsIHRoaXMuX2xvb2tBdC5vZmZzZXRGcm9tSGVhZEJvbmUpO1xuICAgICAgICBjb25zdCBsb29rQXRUYXJnZXQgPSB0aGlzLmxvb2tBdFRhcmdldC5nZXRUcmFuc2xhdGlvbldvcmxkKHRoaXMuX3RlbXBWM0IpO1xuICAgICAgICBjb25zdCBsb29rQXREaXJlY3Rpb24gPSB2ZWMzLnN1Yih0aGlzLl90ZW1wVjNBLCBsb29rQXRUYXJnZXQsIGxvb2tBdFNvdXJjZSk7XG4gICAgICAgIHZlYzMubm9ybWFsaXplKGxvb2tBdERpcmVjdGlvbiwgbG9va0F0RGlyZWN0aW9uKTtcbiAgICAgICAgLyogQ29udmVydCB0aGUgZGlyZWN0aW9uIGludG8gTG9va0F0IHNwYWNlICovXG4gICAgICAgIHRoaXMuYm9uZXMuaGVhZC5wYXJlbnQudHJhbnNmb3JtVmVjdG9ySW52ZXJzZVdvcmxkKGxvb2tBdERpcmVjdGlvbik7XG4gICAgICAgIGNvbnN0IHogPSB2ZWMzLmRvdChsb29rQXREaXJlY3Rpb24sIHRoaXMuX2ZvcndhcmRWZWN0b3IpO1xuICAgICAgICBjb25zdCB4ID0gdmVjMy5kb3QobG9va0F0RGlyZWN0aW9uLCB0aGlzLl9yaWdodFZlY3Rvcik7XG4gICAgICAgIGNvbnN0IHlhdyA9IE1hdGguYXRhbjIoeCwgeikgKiB0aGlzLl9yYWQyZGVnO1xuICAgICAgICBjb25zdCB4eiA9IE1hdGguc3FydCh4ICogeCArIHogKiB6KTtcbiAgICAgICAgY29uc3QgeSA9IHZlYzMuZG90KGxvb2tBdERpcmVjdGlvbiwgdGhpcy5fdXBWZWN0b3IpO1xuICAgICAgICBsZXQgcGl0Y2ggPSBNYXRoLmF0YW4yKC15LCB4eikgKiB0aGlzLl9yYWQyZGVnO1xuICAgICAgICAvKiBMaW1pdCBwaXRjaCAqL1xuICAgICAgICBpZiAocGl0Y2ggPiAwKSB7XG4gICAgICAgICAgICBwaXRjaCA9IHRoaXMuX3JhbmdlTWFwKHRoaXMuX2xvb2tBdC52ZXJ0aWNhbERvd24sIHBpdGNoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBpdGNoID0gLXRoaXMuX3JhbmdlTWFwKHRoaXMuX2xvb2tBdC52ZXJ0aWNhbFVwLCAtcGl0Y2gpO1xuICAgICAgICB9XG4gICAgICAgIC8qIExlZnQgZXllIChsaW1pdCB5YXcpICovXG4gICAgICAgIGlmICh0aGlzLmJvbmVzLmxlZnRFeWUpIHtcbiAgICAgICAgICAgIGxldCB5YXdMZWZ0ID0geWF3O1xuICAgICAgICAgICAgaWYgKHlhd0xlZnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgeWF3TGVmdCA9IHRoaXMuX3JhbmdlTWFwKHRoaXMuX2xvb2tBdC5ob3Jpem9udGFsSW5uZXIsIHlhd0xlZnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgeWF3TGVmdCA9IC10aGlzLl9yYW5nZU1hcCh0aGlzLl9sb29rQXQuaG9yaXpvbnRhbE91dGVyLCAteWF3TGVmdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBleWVSb3RhdGlvbiA9IHF1YXQuZnJvbUV1bGVyKHRoaXMuX3RlbXBRdWF0QSwgcGl0Y2gsIHlhd0xlZnQsIDApO1xuICAgICAgICAgICAgdGhpcy5ib25lcy5sZWZ0RXllLnJvdGF0aW9uTG9jYWwgPSBxdWF0Lm11bHRpcGx5KGV5ZVJvdGF0aW9uLCB0aGlzLnJlc3RQb3NlLmxlZnRFeWUsIGV5ZVJvdGF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICAvKiBSaWdodCBleWUgKGxpbWl0IHlhdykgKi9cbiAgICAgICAgaWYgKHRoaXMuYm9uZXMucmlnaHRFeWUpIHtcbiAgICAgICAgICAgIGxldCB5YXdSaWdodCA9IHlhdztcbiAgICAgICAgICAgIGlmICh5YXdSaWdodCA+IDApIHtcbiAgICAgICAgICAgICAgICB5YXdSaWdodCA9IHRoaXMuX3JhbmdlTWFwKHRoaXMuX2xvb2tBdC5ob3Jpem9udGFsT3V0ZXIsIHlhd1JpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHlhd1JpZ2h0ID0gLXRoaXMuX3JhbmdlTWFwKHRoaXMuX2xvb2tBdC5ob3Jpem9udGFsSW5uZXIsIC15YXdSaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBleWVSb3RhdGlvbiA9IHF1YXQuZnJvbUV1bGVyKHRoaXMuX3RlbXBRdWF0QSwgcGl0Y2gsIHlhd1JpZ2h0LCAwKTtcbiAgICAgICAgICAgIHRoaXMuYm9uZXMucmlnaHRFeWUucm90YXRpb25Mb2NhbCA9IHF1YXQubXVsdGlwbHkoZXllUm90YXRpb24sIHRoaXMucmVzdFBvc2UucmlnaHRFeWUsIGV5ZVJvdGF0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfcmVzb2x2ZUNvbnN0cmFpbnRzKCkge1xuICAgICAgICBmb3IgKGNvbnN0IG5vZGVDb25zdHJhaW50IG9mIHRoaXMuX25vZGVDb25zdHJhaW50cykge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZUNvbnN0cmFpbnQobm9kZUNvbnN0cmFpbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9yZXNvbHZlQ29uc3RyYWludChub2RlQ29uc3RyYWludCkge1xuICAgICAgICBjb25zdCBkc3RSZXN0UXVhdCA9IG5vZGVDb25zdHJhaW50LmRlc3RpbmF0aW9uUmVzdExvY2FsUm90YXRpb247XG4gICAgICAgIGNvbnN0IHNyY1Jlc3RRdWF0SW52ID0gbm9kZUNvbnN0cmFpbnQuc291cmNlUmVzdExvY2FsUm90YXRpb25JbnY7XG4gICAgICAgIGNvbnN0IHRhcmdldFF1YXQgPSBxdWF0LmlkZW50aXR5KHRoaXMuX3RlbXBRdWF0QSk7XG4gICAgICAgIHN3aXRjaCAobm9kZUNvbnN0cmFpbnQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSAncm9sbCc6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWx0YVNyY1F1YXQgPSBxdWF0Lm11bHRpcGx5KHRoaXMuX3RlbXBRdWF0QSwgc3JjUmVzdFF1YXRJbnYsIG5vZGVDb25zdHJhaW50LnNvdXJjZS5yb3RhdGlvbkxvY2FsKTtcbiAgICAgICAgICAgICAgICAgICAgLyogc291cmNlIHRvIHBhcmVudCAqL1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWx0YVNyY1F1YXRJblBhcmVudCA9IHF1YXQubXVsdGlwbHkodGhpcy5fdGVtcFF1YXRBLCBub2RlQ29uc3RyYWludC5zb3VyY2VSZXN0TG9jYWxSb3RhdGlvbiwgZGVsdGFTcmNRdWF0KTtcbiAgICAgICAgICAgICAgICAgICAgcXVhdC5tdWwoZGVsdGFTcmNRdWF0SW5QYXJlbnQsIGRlbHRhU3JjUXVhdEluUGFyZW50LCBzcmNSZXN0UXVhdEludik7XG4gICAgICAgICAgICAgICAgICAgIC8qIHBhcmVudCB0byBkZXN0aW5hdGlvbiAqL1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkc3RSZXN0UXVhdEludiA9IHF1YXQuaW52ZXJ0KHRoaXMuX3RlbXBRdWF0QiwgZHN0UmVzdFF1YXQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWx0YVNyY1F1YXRJbkRzdCA9IHF1YXQubXVsdGlwbHkodGhpcy5fdGVtcFF1YXRCLCBkc3RSZXN0UXVhdEludiwgZGVsdGFTcmNRdWF0SW5QYXJlbnQpO1xuICAgICAgICAgICAgICAgICAgICBxdWF0Lm11bHRpcGx5KGRlbHRhU3JjUXVhdEluRHN0LCBkZWx0YVNyY1F1YXRJbkRzdCwgZHN0UmVzdFF1YXQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b1ZlYyA9IHZlYzMudHJhbnNmb3JtUXVhdCh0aGlzLl90ZW1wVjNBLCBub2RlQ29uc3RyYWludC5heGlzLCBkZWx0YVNyY1F1YXRJbkRzdCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyb21Ub1F1YXQgPSBxdWF0LnJvdGF0aW9uVG8odGhpcy5fdGVtcFF1YXRBLCBub2RlQ29uc3RyYWludC5heGlzLCB0b1ZlYyk7XG4gICAgICAgICAgICAgICAgICAgIHF1YXQubXVsKHRhcmdldFF1YXQsIGRzdFJlc3RRdWF0LCBxdWF0LmludmVydCh0aGlzLl90ZW1wUXVhdCwgZnJvbVRvUXVhdCkpO1xuICAgICAgICAgICAgICAgICAgICBxdWF0Lm11bCh0YXJnZXRRdWF0LCB0YXJnZXRRdWF0LCBkZWx0YVNyY1F1YXRJbkRzdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYWltJzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRzdFBhcmVudFdvcmxkUXVhdCA9IG5vZGVDb25zdHJhaW50LmRlc3RpbmF0aW9uLnBhcmVudC5yb3RhdGlvbldvcmxkO1xuICAgICAgICAgICAgICAgICAgICAvKiBmcm9tVmVjID0gYWltQXhpcy5hcHBseVF1YXRlcm5pb24oIGRzdFBhcmVudFdvcmxkUXVhdCAqIGRzdFJlc3RRdWF0ICkgKi9cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJvbVZlYyA9IHZlYzMudHJhbnNmb3JtUXVhdCh0aGlzLl90ZW1wVjNBLCBub2RlQ29uc3RyYWludC5heGlzLCBkc3RSZXN0UXVhdCk7XG4gICAgICAgICAgICAgICAgICAgIHZlYzMudHJhbnNmb3JtUXVhdChmcm9tVmVjLCBmcm9tVmVjLCBkc3RQYXJlbnRXb3JsZFF1YXQpO1xuICAgICAgICAgICAgICAgICAgICAvKiB0b1ZlYyA9ICggc3JjV29ybGRQb3MgLSBkc3RXb3JsZFBvcyApLm5vcm1hbGl6ZWQgKi9cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9WZWMgPSBub2RlQ29uc3RyYWludC5zb3VyY2UuZ2V0VHJhbnNsYXRpb25Xb3JsZCh0aGlzLl90ZW1wVjNCKTtcbiAgICAgICAgICAgICAgICAgICAgdmVjMy5zdWIodG9WZWMsIHRvVmVjLCBub2RlQ29uc3RyYWludC5kZXN0aW5hdGlvbi5nZXRUcmFuc2xhdGlvbldvcmxkKHRoaXMuX3RlbXBWMykpO1xuICAgICAgICAgICAgICAgICAgICB2ZWMzLm5vcm1hbGl6ZSh0b1ZlYywgdG9WZWMpO1xuICAgICAgICAgICAgICAgICAgICAvKiBmcm9tVG9RdWF0ID0gUXVhdGVybmlvbi5mcm9tVG9Sb3RhdGlvbiggZnJvbVZlYywgdG9WZWMgKSAqL1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmcm9tVG9RdWF0ID0gcXVhdC5yb3RhdGlvblRvKHRoaXMuX3RlbXBRdWF0QSwgZnJvbVZlYywgdG9WZWMpO1xuICAgICAgICAgICAgICAgICAgICBxdWF0Lm11bCh0YXJnZXRRdWF0LCBxdWF0LmludmVydCh0aGlzLl90ZW1wUXVhdCwgZHN0UGFyZW50V29ybGRRdWF0KSwgZnJvbVRvUXVhdCk7XG4gICAgICAgICAgICAgICAgICAgIHF1YXQubXVsKHRhcmdldFF1YXQsIHRhcmdldFF1YXQsIGRzdFBhcmVudFdvcmxkUXVhdCk7XG4gICAgICAgICAgICAgICAgICAgIHF1YXQubXVsKHRhcmdldFF1YXQsIHRhcmdldFF1YXQsIGRzdFJlc3RRdWF0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdyb3RhdGlvbic6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzcmNEZWx0YVF1YXQgPSBxdWF0Lm11bCh0YXJnZXRRdWF0LCBzcmNSZXN0UXVhdEludiwgbm9kZUNvbnN0cmFpbnQuc291cmNlLnJvdGF0aW9uTG9jYWwpO1xuICAgICAgICAgICAgICAgICAgICBxdWF0Lm11bCh0YXJnZXRRdWF0LCBkc3RSZXN0UXVhdCwgc3JjRGVsdGFRdWF0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLyogQXBwbHkgY29uc3RyYWludCAqL1xuICAgICAgICBxdWF0LnNsZXJwKHRhcmdldFF1YXQsIGRzdFJlc3RRdWF0LCB0YXJnZXRRdWF0LCBub2RlQ29uc3RyYWludC53ZWlnaHQpO1xuICAgICAgICBub2RlQ29uc3RyYWludC5kZXN0aW5hdGlvbi5yb3RhdGlvbkxvY2FsID0gdGFyZ2V0UXVhdDtcbiAgICB9XG4gICAgX3VwZGF0ZVNwcmluZ0JvbmVzKGR0KSB7XG4gICAgICAgIC8qIFByZS1jb21wdXRlIGNvbGxpZGVyIHBvc2l0aW9ucyAqL1xuICAgICAgICB0aGlzLl9zcGhlcmVDb2xsaWRlcnMuZm9yRWFjaCgoeyBvYmplY3QsIHNoYXBlLCBjYWNoZSB9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSB2ZWMzLmNvcHkoY2FjaGUuaGVhZCwgc2hhcGUub2Zmc2V0KTtcbiAgICAgICAgICAgIG9iamVjdC50cmFuc2Zvcm1WZWN0b3JXb3JsZChvZmZzZXQpO1xuICAgICAgICAgICAgdmVjMy5hZGQoY2FjaGUuaGVhZCwgb2JqZWN0LmdldFRyYW5zbGF0aW9uV29ybGQodGhpcy5fdGVtcFYzKSwgb2Zmc2V0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2NhcHN1bGVDb2xsaWRlcnMuZm9yRWFjaCgoeyBvYmplY3QsIHNoYXBlLCBjYWNoZSB9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzaGFwZUNlbnRlciA9IG9iamVjdC5nZXRUcmFuc2xhdGlvbldvcmxkKHRoaXMuX3RlbXBWM0EpO1xuICAgICAgICAgICAgY29uc3QgaGVhZE9mZnNldCA9IHZlYzMuY29weShjYWNoZS5oZWFkLCBzaGFwZS5vZmZzZXQpO1xuICAgICAgICAgICAgb2JqZWN0LnRyYW5zZm9ybVZlY3RvcldvcmxkKGhlYWRPZmZzZXQpO1xuICAgICAgICAgICAgdmVjMy5hZGQoY2FjaGUuaGVhZCwgc2hhcGVDZW50ZXIsIGhlYWRPZmZzZXQpO1xuICAgICAgICAgICAgY29uc3QgdGFpbE9mZnNldCA9IHZlYzMuY29weShjYWNoZS50YWlsLCBzaGFwZS50YWlsKTtcbiAgICAgICAgICAgIG9iamVjdC50cmFuc2Zvcm1WZWN0b3JXb3JsZCh0YWlsT2Zmc2V0KTtcbiAgICAgICAgICAgIHZlYzMuYWRkKGNhY2hlLnRhaWwsIHNoYXBlQ2VudGVyLCB0YWlsT2Zmc2V0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8qIFVwZGF0ZSBzcHJpbmcgY2hhaW5zICovXG4gICAgICAgIHRoaXMuX3NwcmluZ0NoYWlucy5mb3JFYWNoKChzcHJpbmdDaGFpbikgPT4ge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcHJpbmdDaGFpbi5qb2ludHMubGVuZ3RoIC0gMTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgam9pbnQgPSBzcHJpbmdDaGFpbi5qb2ludHNbaV07XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50V29ybGRSb3RhdGlvbiA9IGpvaW50Lm5vZGUucGFyZW50XG4gICAgICAgICAgICAgICAgICAgID8gam9pbnQubm9kZS5wYXJlbnQucm90YXRpb25Xb3JsZFxuICAgICAgICAgICAgICAgICAgICA6IHRoaXMuX2lkZW50aXR5UXVhdDtcbiAgICAgICAgICAgICAgICAvKiAxLiBGb3JjZXMgKi9cbiAgICAgICAgICAgICAgICAvKiBpbmVydGlhID0gKGN1cnJlbnRUYWlsIC0gcHJldlRhaWwpICogKDEuMGYgLSBkcmFnRm9yY2UpOyAqL1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZXJ0aWEgPSB0aGlzLl9pbmVydGlhO1xuICAgICAgICAgICAgICAgIGlmIChzcHJpbmdDaGFpbi5jZW50ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmVjMy5zdWIoaW5lcnRpYSwgam9pbnQuc3RhdGUuY3VycmVudFRhaWxDZW50ZXIsIGpvaW50LnN0YXRlLnByZXZUYWlsQ2VudGVyKTtcbiAgICAgICAgICAgICAgICAgICAgc3ByaW5nQ2hhaW4uY2VudGVyLnRyYW5zZm9ybVZlY3RvcldvcmxkKGluZXJ0aWEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmVjMy5zdWIoaW5lcnRpYSwgam9pbnQuc3RhdGUuY3VycmVudFRhaWwsIGpvaW50LnN0YXRlLnByZXZUYWlsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmVjMy5zY2FsZShpbmVydGlhLCBpbmVydGlhLCAxLjAgLSBqb2ludC5kcmFnRm9yY2UpO1xuICAgICAgICAgICAgICAgIC8qIHN0aWZmbmVzcyA9IGRlbHRhVGltZSAqIHBhcmVudFdvcmxkUm90YXRpb24gKiBsb2NhbFJvdGF0aW9uICogYm9uZUF4aXMgKiBzdGlmZm5lc3NGb3JjZTsgKi9cbiAgICAgICAgICAgICAgICBjb25zdCBzdGlmZm5lc3MgPSB2ZWMzLmNvcHkodGhpcy5fc3RpZmZuZXNzLCBqb2ludC5zdGF0ZS5ib25lQXhpcyk7XG4gICAgICAgICAgICAgICAgdmVjMy50cmFuc2Zvcm1RdWF0KHN0aWZmbmVzcywgc3RpZmZuZXNzLCBqb2ludC5zdGF0ZS5pbml0aWFsTG9jYWxSb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgdmVjMy50cmFuc2Zvcm1RdWF0KHN0aWZmbmVzcywgc3RpZmZuZXNzLCBwYXJlbnRXb3JsZFJvdGF0aW9uKTtcbiAgICAgICAgICAgICAgICB2ZWMzLnNjYWxlKHN0aWZmbmVzcywgc3RpZmZuZXNzLCBkdCAqIGpvaW50LnN0aWZmbmVzcyk7XG4gICAgICAgICAgICAgICAgLyogZXh0ZXJuYWwgPSBkZWx0YVRpbWUgKiBncmF2aXR5RGlyICogZ3Jhdml0eVBvd2VyOyAqL1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4dGVybmFsID0gdmVjMy5zY2FsZSh0aGlzLl9leHRlcm5hbCwgam9pbnQuZ3Jhdml0eURpciwgZHQgKiBqb2ludC5ncmF2aXR5UG93ZXIpO1xuICAgICAgICAgICAgICAgIC8qIG5leHRUYWlsID0gY3VycmVudFRhaWwgKyBpbmVydGlhICsgc3RpZmZuZXNzICsgZXh0ZXJuYWw7ICovXG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dFRhaWwgPSB2ZWMzLmNvcHkodGhpcy5fdGVtcFYzQSwgam9pbnQuc3RhdGUuY3VycmVudFRhaWwpO1xuICAgICAgICAgICAgICAgIHZlYzMuYWRkKG5leHRUYWlsLCBuZXh0VGFpbCwgaW5lcnRpYSk7XG4gICAgICAgICAgICAgICAgdmVjMy5hZGQobmV4dFRhaWwsIG5leHRUYWlsLCBzdGlmZm5lc3MpO1xuICAgICAgICAgICAgICAgIHZlYzMuYWRkKG5leHRUYWlsLCBuZXh0VGFpbCwgZXh0ZXJuYWwpO1xuICAgICAgICAgICAgICAgIC8qIGNvbnN0cmFpbiB0aGUgbGVuZ3RoICovXG4gICAgICAgICAgICAgICAgLyogbmV4dFRhaWwgPSB3b3JsZFBvc2l0aW9uICsgKG5leHRUYWlsIC0gd29ybGRQb3NpdGlvbikubm9ybWFsaXplZCAqIGJvbmVMZW5ndGg7ICovXG4gICAgICAgICAgICAgICAgY29uc3Qgd29ybGRQb3NpdGlvbiA9IGpvaW50Lm5vZGUuZ2V0VHJhbnNsYXRpb25Xb3JsZCh0aGlzLl90ZW1wVjNCKTtcbiAgICAgICAgICAgICAgICB2ZWMzLnN1YihuZXh0VGFpbCwgbmV4dFRhaWwsIHdvcmxkUG9zaXRpb24pO1xuICAgICAgICAgICAgICAgIHZlYzMubm9ybWFsaXplKG5leHRUYWlsLCBuZXh0VGFpbCk7XG4gICAgICAgICAgICAgICAgdmVjMy5zY2FsZUFuZEFkZChuZXh0VGFpbCwgd29ybGRQb3NpdGlvbiwgbmV4dFRhaWwsIGpvaW50LnN0YXRlLmJvbmVMZW5ndGgpO1xuICAgICAgICAgICAgICAgIC8qIDIuIENvbGxpc2lvbiB3aXRoIGNvbGxpZGVycyAqL1xuICAgICAgICAgICAgICAgIC8qIFNwaGVyZSBjb2xsaWRlcnMgKi9cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHsgc2hhcGUsIGNhY2hlIH0gb2Ygc3ByaW5nQ2hhaW4uc3BoZXJlQ29sbGlkZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YWlsVG9TaGFwZSA9IHRoaXMuX3RhaWxUb1NoYXBlO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGhlcmVDZW50ZXIgPSBjYWNoZS5oZWFkO1xuICAgICAgICAgICAgICAgICAgICB0YWlsVG9TaGFwZSA9IHZlYzMuc3ViKHRhaWxUb1NoYXBlLCBuZXh0VGFpbCwgc3BoZXJlQ2VudGVyKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmFkaXVzID0gc2hhcGUucmFkaXVzICsgam9pbnQuaGl0UmFkaXVzO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXN0ID0gdmVjMy5sZW5ndGgodGFpbFRvU2hhcGUpIC0gcmFkaXVzO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdCA8IDAuMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUodGFpbFRvU2hhcGUsIHRhaWxUb1NoYXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMuc2NhbGVBbmRBZGQobmV4dFRhaWwsIG5leHRUYWlsLCB0YWlsVG9TaGFwZSwgLWRpc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLyogY29uc3RyYWludCB0aGUgbGVuZ3RoICovXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWMzLnN1YihuZXh0VGFpbCwgbmV4dFRhaWwsIHdvcmxkUG9zaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUobmV4dFRhaWwsIG5leHRUYWlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMuc2NhbGVBbmRBZGQobmV4dFRhaWwsIHdvcmxkUG9zaXRpb24sIG5leHRUYWlsLCBqb2ludC5zdGF0ZS5ib25lTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvKiBDYXBzdWxlIGNvbGxpZGVycyAqL1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgeyBzaGFwZSwgY2FjaGUgfSBvZiBzcHJpbmdDaGFpbi5jYXBzdWxlQ29sbGlkZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YWlsVG9TaGFwZSA9IHRoaXMuX3RhaWxUb1NoYXBlO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkID0gY2FjaGUuaGVhZDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFpbCA9IGNhY2hlLnRhaWw7XG4gICAgICAgICAgICAgICAgICAgIC8qIE5haXZlbHkgc3RhcnQgd2l0aCBkaXN0YW5jZSB0byB0aGUgaGVhZCAqL1xuICAgICAgICAgICAgICAgICAgICB0YWlsVG9TaGFwZSA9IHZlYzMuc3ViKHRhaWxUb1NoYXBlLCBuZXh0VGFpbCwgaGVhZCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRUb1RhaWwgPSB2ZWMzLnN1Yih0aGlzLl9oZWFkVG9UYWlsLCB0YWlsLCBoZWFkKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZG90ID0gdmVjMy5kb3QoaGVhZFRvVGFpbCwgdGFpbFRvU2hhcGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmVjMy5zcXVhcmVkTGVuZ3RoKGhlYWRUb1RhaWwpIDw9IGRvdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLyogQ2xvc2VzdCB0byB0YWlsICovXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWMzLnN1Yih0YWlsVG9TaGFwZSwgbmV4dFRhaWwsIHRhaWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRvdCA+IDAuMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLyogQ2xvc2VzdCB0byBtaWRkbGUgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMuc2NhbGUoaGVhZFRvVGFpbCwgaGVhZFRvVGFpbCwgZG90IC8gdmVjMy5zcXVhcmVkTGVuZ3RoKGhlYWRUb1RhaWwpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMuc3ViKHRhaWxUb1NoYXBlLCB0YWlsVG9TaGFwZSwgaGVhZFRvVGFpbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmFkaXVzID0gc2hhcGUucmFkaXVzICsgam9pbnQuaGl0UmFkaXVzO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXN0ID0gdmVjMy5sZW5ndGgodGFpbFRvU2hhcGUpIC0gcmFkaXVzO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdCA8IDAuMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUodGFpbFRvU2hhcGUsIHRhaWxUb1NoYXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMuc2NhbGVBbmRBZGQobmV4dFRhaWwsIG5leHRUYWlsLCB0YWlsVG9TaGFwZSwgLWRpc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLyogY29uc3RyYWludCB0aGUgbGVuZ3RoICovXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWMzLnN1YihuZXh0VGFpbCwgbmV4dFRhaWwsIHdvcmxkUG9zaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUobmV4dFRhaWwsIG5leHRUYWlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMuc2NhbGVBbmRBZGQobmV4dFRhaWwsIHdvcmxkUG9zaXRpb24sIG5leHRUYWlsLCBqb2ludC5zdGF0ZS5ib25lTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvKiAzLiBBcHBseWluZyByb3RhdGlvbiAqL1xuICAgICAgICAgICAgICAgIHZlYzMuY29weShqb2ludC5zdGF0ZS5wcmV2VGFpbCwgam9pbnQuc3RhdGUuY3VycmVudFRhaWwpO1xuICAgICAgICAgICAgICAgIHZlYzMuY29weShqb2ludC5zdGF0ZS5jdXJyZW50VGFpbCwgbmV4dFRhaWwpO1xuICAgICAgICAgICAgICAgIGlmIChzcHJpbmdDaGFpbi5jZW50ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmVjMy5jb3B5KGpvaW50LnN0YXRlLnByZXZUYWlsQ2VudGVyLCBqb2ludC5zdGF0ZS5jdXJyZW50VGFpbENlbnRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZlYzMuY29weShqb2ludC5zdGF0ZS5jdXJyZW50VGFpbENlbnRlciwgbmV4dFRhaWwpO1xuICAgICAgICAgICAgICAgICAgICBzcHJpbmdDaGFpbi5jZW50ZXIudHJhbnNmb3JtUG9pbnRJbnZlcnNlV29ybGQoam9pbnQuc3RhdGUuY3VycmVudFRhaWxDZW50ZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvKiB0byA9IChuZXh0VGFpbCAqIChub2RlLnBhcmVudC53b3JsZE1hdHJpeCAqIGluaXRpYWxMb2NhbE1hdHJpeCkuaW52ZXJzZSkubm9ybWFsaXplZCAqL1xuICAgICAgICAgICAgICAgIGpvaW50Lm5vZGUucGFyZW50LnRyYW5zZm9ybVBvaW50SW52ZXJzZVdvcmxkKG5leHRUYWlsKTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0VGFpbER1YWxRdWF0ID0gcXVhdDIuZnJvbVRyYW5zbGF0aW9uKHRoaXMuX3RlbXBRdWF0MiwgbmV4dFRhaWwpO1xuICAgICAgICAgICAgICAgIHF1YXQyLm11bHRpcGx5KG5leHRUYWlsRHVhbFF1YXQsIGpvaW50LnN0YXRlLmluaXRpYWxMb2NhbFRyYW5zZm9ybUludmVydCwgbmV4dFRhaWxEdWFsUXVhdCk7XG4gICAgICAgICAgICAgICAgcXVhdDIuZ2V0VHJhbnNsYXRpb24obmV4dFRhaWwsIG5leHRUYWlsRHVhbFF1YXQpO1xuICAgICAgICAgICAgICAgIHZlYzMubm9ybWFsaXplKG5leHRUYWlsLCBuZXh0VGFpbCk7XG4gICAgICAgICAgICAgICAgLyogbm9kZS5yb3RhdGlvbiA9IGluaXRpYWxMb2NhbFJvdGF0aW9uICogUXVhdGVybmlvbi5mcm9tVG9RdWF0ZXJuaW9uKGJvbmVBeGlzLCB0byk7ICovXG4gICAgICAgICAgICAgICAgY29uc3Qgam9pbnRSb3RhdGlvbiA9IHF1YXQucm90YXRpb25Ubyh0aGlzLl90ZW1wUXVhdEEsIGpvaW50LnN0YXRlLmJvbmVBeGlzLCBuZXh0VGFpbCk7XG4gICAgICAgICAgICAgICAgam9pbnQubm9kZS5yb3RhdGlvbkxvY2FsID0gcXVhdC5tdWwodGhpcy5fdGVtcFF1YXRBLCBqb2ludC5zdGF0ZS5pbml0aWFsTG9jYWxSb3RhdGlvbiwgam9pbnRSb3RhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGZpcnN0UGVyc29uIFdoZXRoZXIgdGhlIG1vZGVsIHNob3VsZCByZW5kZXIgZm9yIGZpcnN0IHBlcnNvbiBvciB0aGlyZCBwZXJzb24gdmlld3NcbiAgICAgKi9cbiAgICBzZXQgZmlyc3RQZXJzb24oZmlyc3RQZXJzb24pIHtcbiAgICAgICAgdGhpcy5fZmlyc3RQZXJzb25Bbm5vdGF0aW9ucy5mb3JFYWNoKChhbm5vdGF0aW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2aXNpYmxlID0gZmlyc3RQZXJzb24gPT0gYW5ub3RhdGlvbi5maXJzdFBlcnNvbiB8fFxuICAgICAgICAgICAgICAgIGZpcnN0UGVyc29uICE9IGFubm90YXRpb24udGhpcmRQZXJzb247XG4gICAgICAgICAgICBhbm5vdGF0aW9uLm5vZGUuZ2V0Q29tcG9uZW50cygnbWVzaCcpLmZvckVhY2goKG1lc2gpID0+IHtcbiAgICAgICAgICAgICAgICBtZXNoLmFjdGl2ZSA9IHZpc2libGU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IHsgVnJtIH07XG4iLCAiaW1wb3J0IHsgdmVjMyB9IGZyb20gJ2dsLW1hdHJpeCc7XG5pbXBvcnQgeyBDb21wb25lbnQsIFR5cGUgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuY29uc3QgX2RpcmVjdGlvbiA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4vKipcbiAqIEJhc2ljIG1vdmVtZW50IHdpdGggVy9BL1MvRCBrZXlzLlxuICovXG5jbGFzcyBXYXNkQ29udHJvbHNDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBUeXBlTmFtZSA9ICd3YXNkLWNvbnRyb2xzJztcbiAgICBzdGF0aWMgUHJvcGVydGllcyA9IHtcbiAgICAgICAgLyoqIE1vdmVtZW50IHNwZWVkIGluIG0vcy4gKi9cbiAgICAgICAgc3BlZWQ6IHsgdHlwZTogVHlwZS5GbG9hdCwgZGVmYXVsdDogMC4xIH0sXG4gICAgICAgIC8qKiBGbGFnIGZvciBvbmx5IG1vdmluZyB0aGUgb2JqZWN0IG9uIHRoZSBnbG9iYWwgeCAmIHogcGxhbmVzICovXG4gICAgICAgIGxvY2tZOiB7IHR5cGU6IFR5cGUuQm9vbCwgZGVmYXVsdDogZmFsc2UgfSxcbiAgICAgICAgLyoqIE9iamVjdCBvZiB3aGljaCB0aGUgb3JpZW50YXRpb24gaXMgdXNlZCB0byBkZXRlcm1pbmUgZm9yd2FyZCBkaXJlY3Rpb24gKi9cbiAgICAgICAgaGVhZE9iamVjdDogeyB0eXBlOiBUeXBlLk9iamVjdCB9LFxuICAgIH07XG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy51cCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJpZ2h0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZG93biA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxlZnQgPSBmYWxzZTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLnByZXNzLmJpbmQodGhpcykpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLnJlbGVhc2UuYmluZCh0aGlzKSk7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLmhlYWRPYmplY3QgPSB0aGlzLmhlYWRPYmplY3QgfHwgdGhpcy5vYmplY3Q7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgdmVjMy56ZXJvKF9kaXJlY3Rpb24pO1xuICAgICAgICBpZiAodGhpcy51cClcbiAgICAgICAgICAgIF9kaXJlY3Rpb25bMl0gLT0gMS4wO1xuICAgICAgICBpZiAodGhpcy5kb3duKVxuICAgICAgICAgICAgX2RpcmVjdGlvblsyXSArPSAxLjA7XG4gICAgICAgIGlmICh0aGlzLmxlZnQpXG4gICAgICAgICAgICBfZGlyZWN0aW9uWzBdIC09IDEuMDtcbiAgICAgICAgaWYgKHRoaXMucmlnaHQpXG4gICAgICAgICAgICBfZGlyZWN0aW9uWzBdICs9IDEuMDtcbiAgICAgICAgdmVjMy5ub3JtYWxpemUoX2RpcmVjdGlvbiwgX2RpcmVjdGlvbik7XG4gICAgICAgIF9kaXJlY3Rpb25bMF0gKj0gdGhpcy5zcGVlZDtcbiAgICAgICAgX2RpcmVjdGlvblsyXSAqPSB0aGlzLnNwZWVkO1xuICAgICAgICB2ZWMzLnRyYW5zZm9ybVF1YXQoX2RpcmVjdGlvbiwgX2RpcmVjdGlvbiwgdGhpcy5oZWFkT2JqZWN0LnRyYW5zZm9ybVdvcmxkKTtcbiAgICAgICAgaWYgKHRoaXMubG9ja1kpIHtcbiAgICAgICAgICAgIF9kaXJlY3Rpb25bMV0gPSAwO1xuICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUoX2RpcmVjdGlvbiwgX2RpcmVjdGlvbik7XG4gICAgICAgICAgICB2ZWMzLnNjYWxlKF9kaXJlY3Rpb24sIF9kaXJlY3Rpb24sIHRoaXMuc3BlZWQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2JqZWN0LnRyYW5zbGF0ZUxvY2FsKF9kaXJlY3Rpb24pO1xuICAgIH1cbiAgICBwcmVzcyhlKSB7XG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IDM4IC8qIHVwICovIHx8XG4gICAgICAgICAgICBlLmtleUNvZGUgPT09IDg3IC8qIHcgKi8gfHxcbiAgICAgICAgICAgIGUua2V5Q29kZSA9PT0gOTAgLyogeiAqLykge1xuICAgICAgICAgICAgdGhpcy51cCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZS5rZXlDb2RlID09PSAzOSAvKiByaWdodCAqLyB8fCBlLmtleUNvZGUgPT09IDY4IC8qIGQgKi8pIHtcbiAgICAgICAgICAgIHRoaXMucmlnaHQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gNDAgLyogZG93biAqLyB8fCBlLmtleUNvZGUgPT09IDgzIC8qIHMgKi8pIHtcbiAgICAgICAgICAgIHRoaXMuZG93biA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZS5rZXlDb2RlID09PSAzNyAvKiBsZWZ0ICovIHx8XG4gICAgICAgICAgICBlLmtleUNvZGUgPT09IDY1IC8qIGEgKi8gfHxcbiAgICAgICAgICAgIGUua2V5Q29kZSA9PT0gODEgLyogcSAqLykge1xuICAgICAgICAgICAgdGhpcy5sZWZ0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWxlYXNlKGUpIHtcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMzggLyogdXAgKi8gfHxcbiAgICAgICAgICAgIGUua2V5Q29kZSA9PT0gODcgLyogdyAqLyB8fFxuICAgICAgICAgICAgZS5rZXlDb2RlID09PSA5MCAvKiB6ICovKSB7XG4gICAgICAgICAgICB0aGlzLnVwID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZS5rZXlDb2RlID09PSAzOSAvKiByaWdodCAqLyB8fCBlLmtleUNvZGUgPT09IDY4IC8qIGQgKi8pIHtcbiAgICAgICAgICAgIHRoaXMucmlnaHQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlLmtleUNvZGUgPT09IDQwIC8qIGRvd24gKi8gfHwgZS5rZXlDb2RlID09PSA4MyAvKiBzICovKSB7XG4gICAgICAgICAgICB0aGlzLmRvd24gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlLmtleUNvZGUgPT09IDM3IC8qIGxlZnQgKi8gfHxcbiAgICAgICAgICAgIGUua2V5Q29kZSA9PT0gNjUgLyogYSAqLyB8fFxuICAgICAgICAgICAgZS5rZXlDb2RlID09PSA4MSAvKiBxICovKSB7XG4gICAgICAgICAgICB0aGlzLmxlZnQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCB7IFdhc2RDb250cm9sc0NvbXBvbmVudCB9O1xuIiwgInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IENvbXBvbmVudCwgRW1pdHRlciB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XG5pbXBvcnQgeyBIYW5kVHJhY2tpbmcgfSBmcm9tICcuL2hhbmQtdHJhY2tpbmcuanMnO1xuaW1wb3J0IHsgdmVjMywgcXVhdCB9IGZyb20gJ2dsLW1hdHJpeCc7XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaS9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IFZyTW9kZUFjdGl2ZVN3aXRjaCB9IGZyb20gJy4vdnItbW9kZS1hY3RpdmUtc3dpdGNoLmpzJztcbmNvbnN0IF90ZW1wVmVjID0gdmVjMy5jcmVhdGUoKTtcbmNvbnN0IF90ZW1wUXVhdCA9IHF1YXQuY3JlYXRlKCk7XG5jb25zdCBfdGVtcFJvdGF0aW9uMSA9IG5ldyBGbG9hdDMyQXJyYXkoNCk7XG5jb25zdCBfdGVtcFJvdGF0aW9uMiA9IG5ldyBGbG9hdDMyQXJyYXkoNCk7XG5jb25zdCBtaW5UZW1wID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbmNvbnN0IG1heFRlbXAgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuY29uc3QgaGFuZHMgPSBbJ2xlZnQnLCAncmlnaHQnXTtcbi8qKlxuICogRHluYW1pY2FsbHkgbG9hZCBhbmQgbWFwIGlucHV0IHByb2ZpbGVzIGZvciBYUiBjb250cm9sbGVycy5cbiAqL1xuY2xhc3MgSW5wdXRQcm9maWxlIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgVHlwZU5hbWUgPSAnaW5wdXQtcHJvZmlsZSc7XG4gICAgLyoqXG4gICAgICogQSBjYWNoZSB0byBzdG9yZSBsb2FkZWQgcHJvZmlsZXMgZm9yIHJldXNlLlxuICAgICAqL1xuICAgIHN0YXRpYyBDYWNoZSA9IG5ldyBNYXAoKTtcbiAgICBfZ2FtZXBhZE9iamVjdHMgPSB7fTtcbiAgICBfY29udHJvbGxlck1vZGVsID0gbnVsbDtcbiAgICBfZGVmYXVsdENvbnRyb2xsZXJDb21wb25lbnRzO1xuICAgIF9oYW5kZWRuZXNzO1xuICAgIF9wcm9maWxlSlNPTiA9IG51bGw7XG4gICAgX2J1dHRvbnMgPSBbXTtcbiAgICBfYXhlcyA9IFtdO1xuICAgIC8qKlxuICAgICAqIFRoZSBYUiBnYW1lcGFkIGFzc29jaWF0ZWQgd2l0aCB0aGUgY3VycmVudCBpbnB1dCBzb3VyY2UuXG4gICAgICovXG4gICAgZ2FtZXBhZDtcbiAgICAvKipcbiAgICAgKiBBIHJlZmVyZW5jZSB0byB0aGUgZW1pdHRlciB3aGljaCB0cmlnZ2VyZWQgb24gbW9kZWwgbG9kYWVkIGV2ZW50LlxuICAgICAqL1xuICAgIG9uTW9kZWxMb2FkZWQgPSBuZXcgRW1pdHRlcigpO1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdXJsIG9mIGlucHV0IHByb2ZpbGUganNvbiBmaWxlXG4gICAgICovXG4gICAgdXJsO1xuICAgIC8qKlxuICAgICAqIEEgc2V0IG9mIGNvbXBvbmVudHMgdG8gZmlsdGVyIGR1cmluZyBjb21wb25lbnQgcmV0cmlldmFsLlxuICAgICAqL1xuICAgIHRvRmlsdGVyID0gbmV3IFNldChbJ3ZyLW1vZGUtYWN0aXZlLW1vZGUtc3dpdGNoJ10pO1xuICAgIC8qKlxuICAgICAqIFRoZSBpbmRleCByZXByZXNlbnRpbmcgdGhlIGhhbmRlZG5lc3Mgb2YgdGhlIGNvbnRyb2xsZXIgKDAgZm9yIGxlZnQsIDEgZm9yIHJpZ2h0KS5cbiAgICAgKi9cbiAgICBoYW5kZWRuZXNzID0gMDtcbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBwYXRoIHdoZXJlIFhSIGlucHV0IHByb2ZpbGVzIGFyZSBzdG9yZWQuXG4gICAgICovXG4gICAgZGVmYXVsdEJhc2VQYXRoO1xuICAgIC8qKlxuICAgICAqIEFuIG9wdGlvbmFsIGZvbGRlciBwYXRoIGZvciBsb2FkaW5nIGN1c3RvbSBYUiBpbnB1dCBwcm9maWxlcy5cbiAgICAgKi9cbiAgICBjdXN0b21CYXNlUGF0aDtcbiAgICAvKipcbiAgICAgKiBUaGUgZGVmYXVsdCAzRCBjb250cm9sbGVyIG1vZGVsIHVzZWQgd2hlbiBhIGN1c3RvbSBtb2RlbCBmYWlscyB0byBsb2FkLlxuICAgICAqL1xuICAgIGRlZmF1bHRDb250cm9sbGVyO1xuICAgIC8qKlxuICAgICAqIFRoZSBvYmplY3Qgd2hpY2ggaGFzIEhhbmRUcmFja2luZyBjb21wb25lbnQgYWRkZWQgdG8gaXQuXG4gICAgICovXG4gICAgdHJhY2tlZEhhbmQ7XG4gICAgLyoqXG4gICAgICogSWYgdHJ1ZSwgdGhlIGlucHV0IHByb2ZpbGUgd2lsbCBiZSBtYXBwZWQgdG8gdGhlIGRlZmF1bHQgY29udHJvbGxlciwgYW5kIG5vIGR5bmFtaWMgM0QgbW9kZWwgb2YgY29udHJvbGxlciB3aWxsIGJlIGxvYWRlZC5cbiAgICAgKi9cbiAgICBtYXBUb0RlZmF1bHRDb250cm9sbGVyO1xuICAgIC8qKlxuICAgICAqIElmIHRydWUsIGFkZHMgYSBWUiBtb2RlIHN3aXRjaCBjb21wb25lbnQgdG8gdGhlIGxvYWRlZCBjb250cm9sbGVyIG1vZGVsLlxuICAgICAqL1xuICAgIGFkZFZyTW9kZVN3aXRjaDtcbiAgICBvbkFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLl9oYW5kZWRuZXNzID0gaGFuZHNbdGhpcy5oYW5kZWRuZXNzXTtcbiAgICAgICAgY29uc3QgZGVmYXVsdEhhbmROYW1lID0gJ0hhbmQnICsgdGhpcy5faGFuZGVkbmVzcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHRoaXMuX2hhbmRlZG5lc3Muc2xpY2UoMSk7XG4gICAgICAgIHRoaXMudHJhY2tlZEhhbmQgPVxuICAgICAgICAgICAgdGhpcy50cmFja2VkSGFuZCA/PyB0aGlzLm9iamVjdC5wYXJlbnQ/LmZpbmRCeU5hbWVSZWN1cnNpdmUoZGVmYXVsdEhhbmROYW1lKVswXTtcbiAgICAgICAgdGhpcy5kZWZhdWx0Q29udHJvbGxlciA9IHRoaXMuZGVmYXVsdENvbnRyb2xsZXIgfHwgdGhpcy5vYmplY3QuY2hpbGRyZW5bMF07XG4gICAgICAgIHRoaXMuX2RlZmF1bHRDb250cm9sbGVyQ29tcG9uZW50cyA9IHRoaXMuX2dldENvbXBvbmVudHModGhpcy5kZWZhdWx0Q29udHJvbGxlcik7XG4gICAgICAgIHRoaXMuZW5naW5lLm9uWFJTZXNzaW9uU3RhcnQuYWRkKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW5naW5lLnhyPy5zZXNzaW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0c291cmNlc2NoYW5nZScsIHRoaXMuX29uSW5wdXRTb3VyY2VzQ2hhbmdlLmJpbmQodGhpcykpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgb25EZWFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLmVuZ2luZS54cj8uc2Vzc2lvbj8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW5wdXRzb3VyY2VzY2hhbmdlJywgdGhpcy5fb25JbnB1dFNvdXJjZXNDaGFuZ2UuYmluZCh0aGlzKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgbmV3bHkgbG9hZGVkIGNvbnRyb2xsZXJzIGZvciB0aGUgSGFuZFRyYWNraW5nIGNvbXBvbmVudCB0byBwcm9wZXIgc3dpdGNoaW5nLlxuICAgICAqIEBwYXJhbSBjb250cm9sbGVyT2JqZWN0IFRoZSBjb250cm9sbGVyIG9iamVjdC5cbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX3NldEhhbmRUcmFja2luZ0NvbnRyb2xsZXJzKGNvbnRyb2xsZXJPYmplY3QpIHtcbiAgICAgICAgY29uc3QgaGFuZHRyYWNraW5nQ29tcG9uZW50ID0gdGhpcy50cmFja2VkSGFuZC5nZXRDb21wb25lbnQoSGFuZFRyYWNraW5nKTtcbiAgICAgICAgaWYgKCFoYW5kdHJhY2tpbmdDb21wb25lbnQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGhhbmR0cmFja2luZ0NvbXBvbmVudC5jb250cm9sbGVyVG9EZWFjdGl2YXRlID0gY29udHJvbGxlck9iamVjdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBjb21wb25lbnRzIGZyb20gdGhlIHNwZWNpZmllZCBvYmplY3QgYW5kIGl0cyBjaGlsZHJlbi5cbiAgICAgKiBAcGFyYW0gb2JqIFRoZSBvYmplY3QgdG8gcmV0cmlldmUgY29tcG9uZW50cyBmcm9tLlxuICAgICAqIEByZXR1cm4gQW4gYXJyYXkgb2YgY29tcG9uZW50cy5cbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX2dldENvbXBvbmVudHMob2JqKSB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudHMgPSBbXTtcbiAgICAgICAgaWYgKG9iaiA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudHM7XG4gICAgICAgIGNvbnN0IHN0YWNrID0gW29ial07XG4gICAgICAgIHdoaWxlIChzdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50T2JqID0gc3RhY2sucG9wKCk7XG4gICAgICAgICAgICBjb25zdCBjb21wcyA9IGN1cnJlbnRPYmpcbiAgICAgICAgICAgICAgICAuZ2V0Q29tcG9uZW50cygpXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoYykgPT4gIXRoaXMudG9GaWx0ZXIuaGFzKGMudHlwZSkpO1xuICAgICAgICAgICAgY29tcG9uZW50cy5wdXNoKC4uLmNvbXBzKTtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gY3VycmVudE9iai5jaGlsZHJlbjtcbiAgICAgICAgICAgIC8vIFB1c2ggY2hpbGRyZW4gb250byB0aGUgc3RhY2sgaW4gcmV2ZXJzZSBvcmRlciB0byBtYWludGFpbiB0aGUgY29ycmVjdCBvcmRlclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGNoaWxkcmVuLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaChjaGlsZHJlbltpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFjdGl2YXRlcyBvciBkZWFjdGl2YXRlcyBjb21wb25lbnRzIGJhc2VkIG9uIHRoZSBzcGVjaWZpZWQgYm9vbGVhbiB2YWx1ZS5cbiAgICAgKiBAcGFyYW0gYWN0aXZlIElmIHRydWUsIGNvbXBvbmVudHMgYXJlIHNldCB0byBhY3RpdmU7IG90aGVyd2lzZSwgdGhleSBhcmUgc2V0IHRvIGluYWN0aXZlLlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfc2V0Q29tcG9uZW50c0FjdGl2ZShhY3RpdmUpIHtcbiAgICAgICAgY29uc3QgY29tcHMgPSB0aGlzLl9kZWZhdWx0Q29udHJvbGxlckNvbXBvbmVudHM7XG4gICAgICAgIGlmIChjb21wcyA9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29tcHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbXBzW2ldLmFjdGl2ZSA9IGFjdGl2ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBFdmVudCBoYW5kbGVyIHRyaWdnZXJlZCB3aGVuIFhSIGlucHV0IHNvdXJjZXMgY2hhbmdlLlxuICAgICAqIERldGVjdHMgbmV3IFhSIGlucHV0IHNvdXJjZXMgYW5kIGluaXRpYXRlcyB0aGUgbG9hZGluZyBvZiBpbnB1dCBwcm9maWxlcy5cbiAgICAgKiBAcGFyYW0gZXZlbnQgVGhlIFhSIGlucHV0IHNvdXJjZSBjaGFuZ2UgZXZlbnQuXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9vbklucHV0U291cmNlc0NoYW5nZShldmVudCkge1xuICAgICAgICBpZiAodGhpcy5faXNNb2RlbExvYWRlZCgpICYmICF0aGlzLm1hcFRvRGVmYXVsdENvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX3NldENvbXBvbmVudHNBY3RpdmUoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGV2ZW50LmFkZGVkLmZvckVhY2goKHhySW5wdXRTb3VyY2UpID0+IHtcbiAgICAgICAgICAgIGlmICh4cklucHV0U291cmNlLmhhbmQgIT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBpZiAodGhpcy5faGFuZGVkbmVzcyAhPSB4cklucHV0U291cmNlLmhhbmRlZG5lc3MpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5nYW1lcGFkID0geHJJbnB1dFNvdXJjZS5nYW1lcGFkO1xuICAgICAgICAgICAgY29uc3QgcHJvZmlsZSA9IHRoaXMuY3VzdG9tQmFzZVBhdGggIT09ICcnXG4gICAgICAgICAgICAgICAgPyB0aGlzLmN1c3RvbUJhc2VQYXRoXG4gICAgICAgICAgICAgICAgOiB0aGlzLmRlZmF1bHRCYXNlUGF0aCArIHhySW5wdXRTb3VyY2UucHJvZmlsZXNbMF07XG4gICAgICAgICAgICB0aGlzLnVybCA9IHByb2ZpbGUgKyAnL3Byb2ZpbGUuanNvbic7XG4gICAgICAgICAgICB0aGlzLl9wcm9maWxlSlNPTiA9IElucHV0UHJvZmlsZS5DYWNoZS5nZXQodGhpcy51cmwpID8/IG51bGw7XG4gICAgICAgICAgICBpZiAodGhpcy5fcHJvZmlsZUpTT04gIT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBmZXRjaCh0aGlzLnVybClcbiAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgIC50aGVuKChvdXQpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9maWxlSlNPTiA9IG91dDtcbiAgICAgICAgICAgICAgICBJbnB1dFByb2ZpbGUuQ2FjaGUuc2V0KHRoaXMudXJsLCB0aGlzLl9wcm9maWxlSlNPTik7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9pc01vZGVsTG9hZGVkKCkpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRBbmRNYXBHYW1lcGFkKHByb2ZpbGUpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gbG9hZCBwcm9maWxlIGZyb20gJHt0aGlzLnVybH0uIFJlYXNvbjpgLCBlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHRoZSAzRCBjb250cm9sbGVyIG1vZGVsIGlzIGxvYWRlZC5cbiAgICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIG1vZGVsIGlzIGxvYWRlZDsgb3RoZXJ3aXNlLCBmYWxzZS5cbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX2lzTW9kZWxMb2FkZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb250cm9sbGVyTW9kZWwgIT09IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvYWRzIHRoZSAzRCBjb250cm9sbGVyIG1vZGVsIGFuZCBjYWNoZXMgdGhlIG1hcHBpbmcgdG8gdGhlIGdhbWVwYWQuXG4gICAgICogQHBhcmFtIHByb2ZpbGUgVGhlIHBhdGggdG8gdGhlIGlucHV0IHByb2ZpbGUuXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIGFzeW5jIF9sb2FkQW5kTWFwR2FtZXBhZChwcm9maWxlKSB7XG4gICAgICAgIGNvbnN0IGFzc2V0UGF0aCA9IHByb2ZpbGUgKyAnLycgKyB0aGlzLl9oYW5kZWRuZXNzICsgJy5nbGInO1xuICAgICAgICB0aGlzLl9jb250cm9sbGVyTW9kZWwgPSB0aGlzLmRlZmF1bHRDb250cm9sbGVyO1xuICAgICAgICBpZiAoIXRoaXMubWFwVG9EZWZhdWx0Q29udHJvbGxlcikge1xuICAgICAgICAgICAgLyoqIGxvYWQgM2QgbW9kZWwgaW4gdGhlIHJ1bnRpbWUgd2l0aCBwcm9maWxlIHVybCAqL1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jb250cm9sbGVyTW9kZWwgPSAoYXdhaXQgdGhpcy5lbmdpbmUuc2NlbmUuYXBwZW5kKGFzc2V0UGF0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gbG9hZCBpLXAgY29udHJvbGxlciBtb2RlbC4gUmVhc29uOmAsIGUsIGBDb250aW51aW5nIHdpdGggJHt0aGlzLl9oYW5kZWRuZXNzfSBkZWZhdWx0IGNvbnRyb2xsZXIuYCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0Q29tcG9uZW50c0FjdGl2ZSh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2NvbnRyb2xsZXJNb2RlbC5wYXJlbnQgPSB0aGlzLm9iamVjdDtcbiAgICAgICAgICAgIHRoaXMuX2NvbnRyb2xsZXJNb2RlbC5zZXRQb3NpdGlvbkxvY2FsKFswLCAwLCAwXSk7XG4gICAgICAgICAgICB0aGlzLl9zZXRDb21wb25lbnRzQWN0aXZlKGZhbHNlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFkZFZyTW9kZVN3aXRjaClcbiAgICAgICAgICAgICAgICB0aGlzLl9jb250cm9sbGVyTW9kZWwuYWRkQ29tcG9uZW50KFZyTW9kZUFjdGl2ZVN3aXRjaCk7XG4gICAgICAgICAgICB0aGlzLm9uTW9kZWxMb2FkZWQubm90aWZ5KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY2FjaGVHYW1lcGFkT2JqZWN0c0Zyb21Qcm9maWxlKHRoaXMuX3Byb2ZpbGVKU09OLCB0aGlzLl9jb250cm9sbGVyTW9kZWwpO1xuICAgICAgICB0aGlzLl9zZXRIYW5kVHJhY2tpbmdDb250cm9sbGVycyh0aGlzLl9jb250cm9sbGVyTW9kZWwpO1xuICAgICAgICB0aGlzLnVwZGF0ZSA9ICgpID0+IHRoaXMuX21hcEdhbWVwYWRJbnB1dCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWNoZXMgZ2FtZXBhZCBvYmplY3RzIChidXR0b25zLCBheGVzKSBmcm9tIHRoZSBsb2FkZWQgaW5wdXQgcHJvZmlsZS5cbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgX2NhY2hlR2FtZXBhZE9iamVjdHNGcm9tUHJvZmlsZShwcm9maWxlLCBvYmopIHtcbiAgICAgICAgY29uc3QgY29tcG9uZW50cyA9IHByb2ZpbGUubGF5b3V0c1t0aGlzLl9oYW5kZWRuZXNzXS5jb21wb25lbnRzO1xuICAgICAgICBpZiAoIWNvbXBvbmVudHMpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuX2J1dHRvbnMgPSBbXTtcbiAgICAgICAgdGhpcy5fYXhlcyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGkgaW4gY29tcG9uZW50cykge1xuICAgICAgICAgICAgY29uc3QgdmlzdWFsUmVzcG9uc2VzID0gY29tcG9uZW50c1tpXS52aXN1YWxSZXNwb25zZXM7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGogaW4gdmlzdWFsUmVzcG9uc2VzKSB7XG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIGJ1dHRvbnMgd2l0aCBuZXcgaW50ZXJmYWNlIG9mIGN1cnJlbnQgdmlzdWFsIHJlc3BvbnNlXG4gICAgICAgICAgICAgICAgY29uc3QgdmlzdWFsUmVzcG9uc2UgPSB2aXN1YWxSZXNwb25zZXNbal07XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWVOb2RlID0gdmlzdWFsUmVzcG9uc2UudmFsdWVOb2RlTmFtZTtcbiAgICAgICAgICAgICAgICBjb25zdCBtaW5Ob2RlID0gdmlzdWFsUmVzcG9uc2UubWluTm9kZU5hbWU7XG4gICAgICAgICAgICAgICAgY29uc3QgbWF4Tm9kZSA9IHZpc3VhbFJlc3BvbnNlLm1heE5vZGVOYW1lO1xuICAgICAgICAgICAgICAgIHRoaXMuX2dhbWVwYWRPYmplY3RzW3ZhbHVlTm9kZV0gPSBvYmouZmluZEJ5TmFtZVJlY3Vyc2l2ZSh2YWx1ZU5vZGUpWzBdO1xuICAgICAgICAgICAgICAgIHRoaXMuX2dhbWVwYWRPYmplY3RzW21pbk5vZGVdID0gb2JqLmZpbmRCeU5hbWVSZWN1cnNpdmUobWluTm9kZSlbMF07XG4gICAgICAgICAgICAgICAgdGhpcy5fZ2FtZXBhZE9iamVjdHNbbWF4Tm9kZV0gPSBvYmouZmluZEJ5TmFtZVJlY3Vyc2l2ZShtYXhOb2RlKVswXTtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRpY2UgPSB2aXN1YWxSZXNwb25zZXNbal0uY29tcG9uZW50UHJvcGVydHk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy5fZ2FtZXBhZE9iamVjdHNbdmFsdWVOb2RlXSxcbiAgICAgICAgICAgICAgICAgICAgbWluOiB0aGlzLl9nYW1lcGFkT2JqZWN0c1ttaW5Ob2RlXSxcbiAgICAgICAgICAgICAgICAgICAgbWF4OiB0aGlzLl9nYW1lcGFkT2JqZWN0c1ttYXhOb2RlXSxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbXBvbmVudHNbaV0uZ2FtZXBhZEluZGljZXNbaW5kaWNlXSwgLy8gQXNzaWduIGEgdW5pcXVlIElEXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGluZGljZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdidXR0b24nOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYnV0dG9ucy5wdXNoKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd4QXhpcyc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3lBeGlzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2F4ZXMucHVzaChyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQXNzaWducyBhIHRyYW5zZm9ybWVkIHBvc2l0aW9uIGFuZCByb3RhdGlvbiB0byB0aGUgdGFyZ2V0IGJhc2VkIG9uIG1pbmltdW0gYW5kIG1heGltdW0gdmFsdWVzIGFuZCBhIG5vcm1hbGl6ZWQgaW5wdXQgdmFsdWUuXG4gICAgICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IG9iamVjdCB0byBiZSB0cmFuc2Zvcm1lZC5cbiAgICAgKiBAcGFyYW0gbWluIFRoZSBtaW5pbXVtIG9iamVjdCBwcm92aWRpbmcgdHJhbnNmb3JtYXRpb24gbGltaXRzLlxuICAgICAqIEBwYXJhbSBtYXggVGhlIG1heGltdW0gb2JqZWN0IHByb3ZpZGluZyB0cmFuc2Zvcm1hdGlvbiBsaW1pdHMuXG4gICAgICogQHBhcmFtIHZhbHVlIFRoZSBub3JtYWxpemVkIGlucHV0IHZhbHVlLlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBfYXNzaWduVHJhbnNmb3JtKHRhcmdldCwgbWluLCBtYXgsIHZhbHVlKSB7XG4gICAgICAgIHZlYzMubGVycChfdGVtcFZlYywgbWluLmdldFBvc2l0aW9uV29ybGQobWluVGVtcCksIG1heC5nZXRQb3NpdGlvbldvcmxkKG1heFRlbXApLCB2YWx1ZSk7XG4gICAgICAgIHRhcmdldC5zZXRQb3NpdGlvbldvcmxkKF90ZW1wVmVjKTtcbiAgICAgICAgcXVhdC5sZXJwKF90ZW1wUXVhdCwgbWluLmdldFJvdGF0aW9uV29ybGQoX3RlbXBSb3RhdGlvbjEpLCBtYXguZ2V0Um90YXRpb25Xb3JsZChfdGVtcFJvdGF0aW9uMiksIHZhbHVlKTtcbiAgICAgICAgcXVhdC5ub3JtYWxpemUoX3RlbXBRdWF0LCBfdGVtcFF1YXQpO1xuICAgICAgICB0YXJnZXQuc2V0Um90YXRpb25Xb3JsZChfdGVtcFF1YXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXBzIGlucHV0IHZhbHVlcyAoYnV0dG9ucywgYXhlcykgdG8gdGhlIDNEIGNvbnRyb2xsZXIgbW9kZWwuXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIF9tYXBHYW1lcGFkSW5wdXQoKSB7XG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIHRoaXMuX2J1dHRvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvblZhbHVlID0gdGhpcy5nYW1lcGFkLmJ1dHRvbnNbYnV0dG9uLmlkXS52YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuX2Fzc2lnblRyYW5zZm9ybShidXR0b24udGFyZ2V0LCBidXR0b24ubWluLCBidXR0b24ubWF4LCBidXR0b25WYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBheGlzIG9mIHRoaXMuX2F4ZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGF4aXNWYWx1ZSA9IHRoaXMuZ2FtZXBhZC5heGVzW2F4aXMuaWRdO1xuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZEF4aXNWYWx1ZSA9IChheGlzVmFsdWUgKyAxKSAvIDI7XG4gICAgICAgICAgICB0aGlzLl9hc3NpZ25UcmFuc2Zvcm0oYXhpcy50YXJnZXQsIGF4aXMubWluLCBheGlzLm1heCwgbm9ybWFsaXplZEF4aXNWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5lbnVtKGhhbmRzLCAwKVxuXSwgSW5wdXRQcm9maWxlLnByb3RvdHlwZSwgXCJoYW5kZWRuZXNzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5zdHJpbmcoJ2h0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vQHdlYnhyLWlucHV0LXByb2ZpbGVzL2Fzc2V0c0BsYXRlc3QvZGlzdC9wcm9maWxlcy8nKVxuXSwgSW5wdXRQcm9maWxlLnByb3RvdHlwZSwgXCJkZWZhdWx0QmFzZVBhdGhcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LnN0cmluZygpXG5dLCBJbnB1dFByb2ZpbGUucHJvdG90eXBlLCBcImN1c3RvbUJhc2VQYXRoXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5vYmplY3QoKVxuXSwgSW5wdXRQcm9maWxlLnByb3RvdHlwZSwgXCJkZWZhdWx0Q29udHJvbGxlclwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkub2JqZWN0KClcbl0sIElucHV0UHJvZmlsZS5wcm90b3R5cGUsIFwidHJhY2tlZEhhbmRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmJvb2woZmFsc2UpXG5dLCBJbnB1dFByb2ZpbGUucHJvdG90eXBlLCBcIm1hcFRvRGVmYXVsdENvbnRyb2xsZXJcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmJvb2wodHJ1ZSlcbl0sIElucHV0UHJvZmlsZS5wcm90b3R5cGUsIFwiYWRkVnJNb2RlU3dpdGNoXCIsIHZvaWQgMCk7XG5leHBvcnQgeyBJbnB1dFByb2ZpbGUgfTtcbiIsICJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGknO1xuaW1wb3J0IHsgcHJvcGVydHkgfSBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9hcGkvZGVjb3JhdG9ycy5qcyc7XG5pbXBvcnQgeyBkZWcycmFkLCByYWQyZGVnIH0gZnJvbSAnLi91dGlscy91dGlscy5qcyc7XG5pbXBvcnQgeyBxdWF0LCB2ZWMzIH0gZnJvbSAnZ2wtbWF0cml4JztcbmNvbnN0IHByZXZlbnREZWZhdWx0ID0gKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG59O1xuY29uc3QgdGVtcFZlYyA9IFswLCAwLCAwXTtcbmNvbnN0IHRlbXBxdWF0ID0gcXVhdC5jcmVhdGUoKTtcbmNvbnN0IHRlbXBxdWF0MiA9IHF1YXQuY3JlYXRlKCk7XG5jb25zdCB0ZW1wVmVjMyA9IHZlYzMuY3JlYXRlKCk7XG4vKipcbiAqIE9yYml0YWxDYW1lcmEgY29tcG9uZW50IGFsbG93cyB0aGUgdXNlciB0byBvcmJpdCBhcm91bmQgYSB0YXJnZXQgcG9pbnQsIHdoaWNoXG4gKiBpcyB0aGUgcG9zaXRpb24gb2YgdGhlIG9iamVjdCBpdHNlbGYuIEl0IHJvdGF0ZXMgYXQgdGhlIHNwZWNpZmllZCBkaXN0YW5jZS5cbiAqXG4gKiBAcmVtYXJrc1xuICogVGhlIGNvbXBvbmVudCB3b3JrcyB1c2luZyBtb3VzZSBvciB0b3VjaC4gVGhlcmVmb3IgaXQgZG9lcyBub3Qgd29yayBpbiBWUi5cbiAqL1xuY2xhc3MgT3JiaXRhbENhbWVyYSBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ29yYml0YWwtY2FtZXJhJztcbiAgICBtb3VzZUJ1dHRvbkluZGV4ID0gMDtcbiAgICByYWRpYWwgPSA1O1xuICAgIG1pbkVsZXZhdGlvbiA9IDAuMDtcbiAgICBtYXhFbGV2YXRpb24gPSA4OS45OTtcbiAgICBtaW5ab29tID0gMC4wMTtcbiAgICBtYXhab29tID0gMTAuMDtcbiAgICB4U2Vuc2l0aXZpdHkgPSAwLjU7XG4gICAgeVNlbnNpdGl2aXR5ID0gMC41O1xuICAgIHpvb21TZW5zaXRpdml0eSA9IDAuMDI7XG4gICAgZGFtcGluZyA9IDAuOTtcbiAgICBfbW91c2VEb3duID0gZmFsc2U7XG4gICAgX29yaWdpbiA9IFswLCAwLCAwXTtcbiAgICBfYXppbXV0aCA9IDA7XG4gICAgX3BvbGFyID0gNDU7XG4gICAgX2luaXRpYWxQaW5jaERpc3RhbmNlID0gMDtcbiAgICBfdG91Y2hTdGFydFggPSAwO1xuICAgIF90b3VjaFN0YXJ0WSA9IDA7XG4gICAgX2F6aW11dGhTcGVlZCA9IDA7XG4gICAgX3BvbGFyU3BlZWQgPSAwO1xuICAgIGluaXQoKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LmdldFBvc2l0aW9uV29ybGQodGhpcy5fb3JpZ2luKTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUNhbWVyYSgpO1xuICAgIH1cbiAgICBvbkFjdGl2YXRlKCkge1xuICAgICAgICBjb25zdCBjYW52YXMgPSB0aGlzLmVuZ2luZS5jYW52YXM7XG4gICAgICAgIGlmICh0aGlzLm1vdXNlQnV0dG9uSW5kZXggPT09IDIpIHtcbiAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIHByZXZlbnREZWZhdWx0LCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9vbk1vdXNlRG93bik7XG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIHRoaXMuX29uTW91c2VTY3JvbGwsIHsgcGFzc2l2ZTogZmFsc2UgfSk7XG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5fb25Ub3VjaFN0YXJ0LCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xuICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5fb25Ub3VjaE1vdmUsIHsgcGFzc2l2ZTogZmFsc2UgfSk7XG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX29uVG91Y2hFbmQpO1xuICAgIH1cbiAgICBvbkRlYWN0aXZhdGUoKSB7XG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuZW5naW5lLmNhbnZhcztcbiAgICAgICAgaWYgKHRoaXMubW91c2VCdXR0b25JbmRleCA9PT0gMikge1xuICAgICAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgcHJldmVudERlZmF1bHQpO1xuICAgICAgICB9XG4gICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9vbk1vdXNlTW92ZSk7XG4gICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9vbk1vdXNlRG93bik7XG4gICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCd3aGVlbCcsIHRoaXMuX29uTW91c2VTY3JvbGwpO1xuICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuX29uVG91Y2hTdGFydCk7XG4gICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLl9vblRvdWNoTW92ZSk7XG4gICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX29uVG91Y2hFbmQpO1xuICAgICAgICAvKiBSZXNldCBzdGF0ZSB0byBtYWtlIHN1cmUgbm90aGluZyBnZXRzIHN0dWNrICovXG4gICAgICAgIHRoaXMuX21vdXNlRG93biA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9pbml0aWFsUGluY2hEaXN0YW5jZSA9IDA7XG4gICAgICAgIHRoaXMuX3RvdWNoU3RhcnRYID0gMDtcbiAgICAgICAgdGhpcy5fdG91Y2hTdGFydFkgPSAwO1xuICAgICAgICB0aGlzLl9hemltdXRoU3BlZWQgPSAwO1xuICAgICAgICB0aGlzLl9wb2xhclNwZWVkID0gMDtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICAvKiBBbHdheXMgYXBwbHkgZGFtcGluZywgYmVjYXVzZSB0aGVyZSdzIG5vIGV2ZW50IGZvciBzdG9wIG1vdmluZyAqL1xuICAgICAgICB0aGlzLl9hemltdXRoU3BlZWQgKj0gdGhpcy5kYW1waW5nO1xuICAgICAgICB0aGlzLl9wb2xhclNwZWVkICo9IHRoaXMuZGFtcGluZztcbiAgICAgICAgLyogU3RvcCBjb21wbGV0ZWx5IGlmIHRoZSBzcGVlZCBpcyB2ZXJ5IGxvdyB0byBhdm9pZCBlbmRsZXNzIHRpbnkgbW92ZW1lbnRzICovXG4gICAgICAgIGlmIChNYXRoLmFicyh0aGlzLl9hemltdXRoU3BlZWQpIDwgMC4wMSlcbiAgICAgICAgICAgIHRoaXMuX2F6aW11dGhTcGVlZCA9IDA7XG4gICAgICAgIGlmIChNYXRoLmFicyh0aGlzLl9wb2xhclNwZWVkKSA8IDAuMDEpXG4gICAgICAgICAgICB0aGlzLl9wb2xhclNwZWVkID0gMDtcbiAgICAgICAgLyogQXBwbHkgdGhlIHNwZWVkIHRvIHRoZSBjYW1lcmEgYW5nbGVzICovXG4gICAgICAgIHRoaXMuX2F6aW11dGggKz0gdGhpcy5fYXppbXV0aFNwZWVkO1xuICAgICAgICB0aGlzLl9wb2xhciArPSB0aGlzLl9wb2xhclNwZWVkO1xuICAgICAgICAvKiBDbGFtcCB0aGUgcG9sYXIgYW5nbGUgKi9cbiAgICAgICAgdGhpcy5fcG9sYXIgPSBNYXRoLm1pbih0aGlzLm1heEVsZXZhdGlvbiwgTWF0aC5tYXgodGhpcy5taW5FbGV2YXRpb24sIHRoaXMuX3BvbGFyKSk7XG4gICAgICAgIC8qIFVwZGF0ZSB0aGUgY2FtZXJhIGlmIHRoZXJlJ3MgYW55IHNwZWVkICovXG4gICAgICAgIGlmICh0aGlzLl9hemltdXRoU3BlZWQgIT09IDAgfHwgdGhpcy5fcG9sYXJTcGVlZCAhPT0gMCkge1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlQ2FtZXJhKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjbG9zZXN0IHBvc2l0aW9uIHRvIHRoZSBnaXZlbiBwb3NpdGlvbiBvbiB0aGUgb3JiaXQgc3BoZXJlIG9mIHRoZSBjYW1lcmEuXG4gICAgICogVGhpcyBjYW4gYmUgdXNlZCB0byBnZXQgYSBwb3NpdGlvbiBhbmQgcm90YXRpb24gdG8gdHJhbnNpdGlvbiB0by5cbiAgICAgKlxuICAgICAqIFlvdSBwYXNzIHRoaXMgYSBwb3NpdGlvbiBvYmplY3QuIFRoZSBtZXRob2QgY2FsY3VsYXRlcyB0aGUgY2xvc2VzdCBwb3NpdGl0aW9uIGFuZCB1cGRhdGVzIHRoZSBwb3NpdGlvbiBwYXJhbWV0ZXIuXG4gICAgICogSXQgYWxzbyBzZXRzIHRoZSByb3RhdGlvbiBwYXJhbWV0ZXIgdG8gcmVmbGVjdCB0aGUgcm90YXRlIHRoZSBjYW1lcmEgd2lsbCBoYXZlIHdoZW4gaXQgaXMgb24gdGhlIG9yYml0IHNwaGVyZSxcbiAgICAgKiBwb2ludGluZyB0b3dhcmRzIHRoZSBjZW50ZXIuXG4gICAgICogQHBhcmFtIHBvc2l0aW9uIHRoZSBwb3NpdGlvbiB0byBnZXQgdGhlIGNsb3Nlc3QgcG9zaXRpb24gdG9cbiAgICAgKiBAcGFyYW0gcm90YXRpb24gdGhlIHJvdGF0aW9uIHRvIGdldCB0aGUgY2xvc2VzdCBwb3NpdGlvbiB0b1xuICAgICAqL1xuICAgIGdldENsb3Nlc3RQb3NpdGlvbihwb3NpdGlvbiwgcm90YXRpb24pIHtcbiAgICAgICAgLyogSXQncyBhIGJpdCBoYWNreSwgYnV0IHRoZSBlYXNpZXN0IHdheSB0byBnZXQgdGhlIHJvdGF0aW9uIG9mIHRoZSBjYW1lcmEgaXMganVzdCBicmllZmx5XG4gICAgICAgICBjaGFuZ2UgdGhlIHJvdGF0aW9uIHRvIGxvb2sgYXQgdGhlIGNlbnRlciBhbmQgdGhlbiBnZXQgdGhlIHJvdGF0aW9uLiAqL1xuICAgICAgICB0aGlzLm9iamVjdC5nZXRSb3RhdGlvbldvcmxkKHRlbXBxdWF0KTtcbiAgICAgICAgdGhpcy5vYmplY3QubG9va0F0KHRoaXMuX29yaWdpbik7XG4gICAgICAgIHRoaXMub2JqZWN0LmdldFJvdGF0aW9uV29ybGQodGVtcHF1YXQyKTtcbiAgICAgICAgaWYgKHF1YXQuZG90KHRlbXBxdWF0LCB0ZW1wcXVhdDIpIDwgMCkge1xuICAgICAgICAgICAgcXVhdC5zY2FsZSh0ZW1wcXVhdDIsIHRlbXBxdWF0MiwgLTEpOyAvKiBOZWdhdGUgdG8gZW5zdXJlIHNob3J0ZXN0IHBhdGggKi9cbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9iamVjdC5zZXRSb3RhdGlvbldvcmxkKHRlbXBxdWF0KTtcbiAgICAgICAgLyogQ2FsY3VsYXRlIHRoZSBkaXJlY3Rpb24gZnJvbSB0aGUgY2VudGVyIG9mIG9yYml0IHRvIHRoZSBjdXJyZW50IGNhbWVyYSBwb3NpdGlvbiAqL1xuICAgICAgICBjb25zdCBkaXJlY3Rpb25Ub0NhbWVyYSA9IHZlYzMuY3JlYXRlKCk7XG4gICAgICAgIHZlYzMuc3VidHJhY3QoZGlyZWN0aW9uVG9DYW1lcmEsIHBvc2l0aW9uLCB0aGlzLl9vcmlnaW4pO1xuICAgICAgICB2ZWMzLm5vcm1hbGl6ZShkaXJlY3Rpb25Ub0NhbWVyYSwgZGlyZWN0aW9uVG9DYW1lcmEpO1xuICAgICAgICAvKiBTY2FsZSB0aGlzIGRpcmVjdGlvbiBieSB0aGUgcmFkaXVzIG9mIHlvdXIgb3JiaXRhbCBzcGhlcmUgdG8gZ2V0IHRoZSBuZWFyZXN0IHBvaW50IG9uIHRoZSBzcGhlcmUgKi9cbiAgICAgICAgY29uc3QgbmVhcmVzdFBvaW50T25TcGhlcmUgPSB2ZWMzLmNyZWF0ZSgpO1xuICAgICAgICB2ZWMzLnNjYWxlKG5lYXJlc3RQb2ludE9uU3BoZXJlLCBkaXJlY3Rpb25Ub0NhbWVyYSwgdGhpcy5yYWRpYWwpO1xuICAgICAgICB2ZWMzLmFkZChuZWFyZXN0UG9pbnRPblNwaGVyZSwgbmVhcmVzdFBvaW50T25TcGhlcmUsIHRoaXMuX29yaWdpbik7XG4gICAgICAgIHZlYzMuY29weShwb3NpdGlvbiwgbmVhcmVzdFBvaW50T25TcGhlcmUpO1xuICAgICAgICBxdWF0LmNvcHkocm90YXRpb24sIHRlbXBxdWF0Mik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY2FtZXJhIHBvc2l0aW9uIGJhc2VkIG9uIHRoZSBnaXZlbiBwb3NpdGlvbiBhbmQgY2FsY3VsYXRlIHRoZSByb3RhdGlvbi5cbiAgICAgKiBAcGFyYW0gY2FtZXJhUG9zaXRpb24gdGhlIHBvc2l0aW9uIHRvIHNldCB0aGUgY2FtZXJhIHRvXG4gICAgICovXG4gICAgc2V0UG9zaXRpb24oY2FtZXJhUG9zaXRpb24pIHtcbiAgICAgICAgY29uc3QgY2VudGVyT2ZPcmJpdCA9IHRoaXMuX29yaWdpbjtcbiAgICAgICAgLyogQ29tcHV0ZSB0aGUgZGlyZWN0aW9uIHZlY3RvciAqL1xuICAgICAgICB2ZWMzLnN1YnRyYWN0KHRlbXBWZWMzLCBjYW1lcmFQb3NpdGlvbiwgY2VudGVyT2ZPcmJpdCk7XG4gICAgICAgIHZlYzMubm9ybWFsaXplKHRlbXBWZWMzLCB0ZW1wVmVjMyk7XG4gICAgICAgIC8qIENvbXB1dGUgdGhlIGF6aW11dGggYW5nbGUgKGluIHJhZGlhbnMpICovXG4gICAgICAgIGNvbnN0IGF6aW11dGggPSBNYXRoLmF0YW4yKHRlbXBWZWMzWzBdLCB0ZW1wVmVjM1syXSk7XG4gICAgICAgIC8qIENvbXB1dGUgdGhlIHBvbGFyIGFuZ2xlIChpbiByYWRpYW5zKSAqL1xuICAgICAgICBjb25zdCBwb2xhciA9IE1hdGguYWNvcyh0ZW1wVmVjM1sxXSk7XG4gICAgICAgIGNvbnN0IGF6aW11dGhEZWcgPSByYWQyZGVnKGF6aW11dGgpO1xuICAgICAgICAvKiBQb2xhciBpcyBpbnZlcnRlZCB0byBtYXRjaCB0aGUgb3JiaXRhbCBjYW1lcmEgKi9cbiAgICAgICAgY29uc3QgcG9sYXJEZWcgPSA5MCAtIHJhZDJkZWcocG9sYXIpO1xuICAgICAgICB0aGlzLl9hemltdXRoID0gYXppbXV0aERlZztcbiAgICAgICAgdGhpcy5fcG9sYXIgPSBwb2xhckRlZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBjYW1lcmEgcG9zaXRpb24gYmFzZWQgb24gdGhlIGN1cnJlbnQgYXppbXV0aCxcbiAgICAgKiBwb2xhciBhbmQgcmFkaWFsIHZhbHVlc1xuICAgICAqL1xuICAgIF91cGRhdGVDYW1lcmEoKSB7XG4gICAgICAgIGNvbnN0IGF6aW11dGhJblJhZGlhbnMgPSBkZWcycmFkKHRoaXMuX2F6aW11dGgpO1xuICAgICAgICBjb25zdCBwb2xhckluUmFkaWFucyA9IGRlZzJyYWQodGhpcy5fcG9sYXIpO1xuICAgICAgICB0ZW1wVmVjWzBdID0gdGhpcy5yYWRpYWwgKiBNYXRoLnNpbihhemltdXRoSW5SYWRpYW5zKSAqIE1hdGguY29zKHBvbGFySW5SYWRpYW5zKTtcbiAgICAgICAgdGVtcFZlY1sxXSA9IHRoaXMucmFkaWFsICogTWF0aC5zaW4ocG9sYXJJblJhZGlhbnMpO1xuICAgICAgICB0ZW1wVmVjWzJdID0gdGhpcy5yYWRpYWwgKiBNYXRoLmNvcyhhemltdXRoSW5SYWRpYW5zKSAqIE1hdGguY29zKHBvbGFySW5SYWRpYW5zKTtcbiAgICAgICAgdGhpcy5vYmplY3Quc2V0UG9zaXRpb25Xb3JsZCh0ZW1wVmVjKTtcbiAgICAgICAgdGhpcy5vYmplY3QudHJhbnNsYXRlV29ybGQodGhpcy5fb3JpZ2luKTtcbiAgICAgICAgdGhpcy5vYmplY3QubG9va0F0KHRoaXMuX29yaWdpbik7XG4gICAgfVxuICAgIC8qIE1vdXNlIEV2ZW50IEhhbmRsZXJzICovXG4gICAgX29uTW91c2VEb3duID0gKGUpID0+IHtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9vbk1vdXNlVXApO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5fb25Nb3VzZU1vdmUpO1xuICAgICAgICBpZiAoZS5idXR0b24gPT09IHRoaXMubW91c2VCdXR0b25JbmRleCkge1xuICAgICAgICAgICAgdGhpcy5fbW91c2VEb3duID0gdHJ1ZTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gJ2dyYWJiaW5nJztcbiAgICAgICAgICAgIGlmIChlLmJ1dHRvbiA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgLyogdG8gcHJldmVudCBzY3JvbGxpbmcgKi9cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIF9vbk1vdXNlVXAgPSAoZSkgPT4ge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX29uTW91c2VVcCk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9vbk1vdXNlTW92ZSk7XG4gICAgICAgIGlmIChlLmJ1dHRvbiA9PT0gdGhpcy5tb3VzZUJ1dHRvbkluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLl9tb3VzZURvd24gPSBmYWxzZTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gJ2luaXRpYWwnO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBfb25Nb3VzZU1vdmUgPSAoZSkgPT4ge1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUgJiYgdGhpcy5fbW91c2VEb3duKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hY3RpdmUgJiYgdGhpcy5fbW91c2VEb3duKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fYXppbXV0aFNwZWVkID0gLShlLm1vdmVtZW50WCAqIHRoaXMueFNlbnNpdGl2aXR5KTtcbiAgICAgICAgICAgICAgICB0aGlzLl9wb2xhclNwZWVkID0gZS5tb3ZlbWVudFkgKiB0aGlzLnlTZW5zaXRpdml0eTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgX29uTW91c2VTY3JvbGwgPSAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8qIHRvIHByZXZlbnQgc2Nyb2xsaW5nICovXG4gICAgICAgIHRoaXMucmFkaWFsICo9IDEgLSBlLmRlbHRhWSAqIHRoaXMuem9vbVNlbnNpdGl2aXR5ICogLTAuMDAxO1xuICAgICAgICB0aGlzLnJhZGlhbCA9IE1hdGgubWluKHRoaXMubWF4Wm9vbSwgTWF0aC5tYXgodGhpcy5taW5ab29tLCB0aGlzLnJhZGlhbCkpO1xuICAgICAgICB0aGlzLl91cGRhdGVDYW1lcmEoKTtcbiAgICB9O1xuICAgIC8qIFRvdWNoIGV2ZW50IGhhbmRsZXJzICovXG4gICAgX29uVG91Y2hTdGFydCA9IChlKSA9PiB7XG4gICAgICAgIGlmIChlLnRvdWNoZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAvKiB0byBwcmV2ZW50IHNjcm9sbGluZyBhbmQgYWxsb3cgdXMgdG8gdHJhY2sgdG91Y2ggbW92ZW1lbnQgKi9cbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuX3RvdWNoU3RhcnRYID0gZS50b3VjaGVzWzBdLmNsaWVudFg7XG4gICAgICAgICAgICB0aGlzLl90b3VjaFN0YXJ0WSA9IGUudG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgICAgICAgdGhpcy5fbW91c2VEb3duID0gdHJ1ZTsgLyogVHJlYXQgdG91Y2ggbGlrZSBtb3VzZSBkb3duICovXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZS50b3VjaGVzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgLyogQ2FsY3VsYXRlIGluaXRpYWwgcGluY2ggZGlzdGFuY2UgKi9cbiAgICAgICAgICAgIHRoaXMuX2luaXRpYWxQaW5jaERpc3RhbmNlID0gdGhpcy5fZ2V0RGlzdGFuY2VCZXR3ZWVuVG91Y2hlcyhlLnRvdWNoZXMpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvKiBQcmV2ZW50IGRlZmF1bHQgcGluY2ggYWN0aW9ucyAqL1xuICAgICAgICB9XG4gICAgfTtcbiAgICBfb25Ub3VjaE1vdmUgPSAoZSkgPT4ge1xuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlIHx8ICF0aGlzLl9tb3VzZURvd24pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8qIHRvIHByZXZlbnQgbW92aW5nIHRoZSBwYWdlICovXG4gICAgICAgIGlmIChlLnRvdWNoZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBjb25zdCBkZWx0YVggPSBlLnRvdWNoZXNbMF0uY2xpZW50WCAtIHRoaXMuX3RvdWNoU3RhcnRYO1xuICAgICAgICAgICAgY29uc3QgZGVsdGFZID0gZS50b3VjaGVzWzBdLmNsaWVudFkgLSB0aGlzLl90b3VjaFN0YXJ0WTtcbiAgICAgICAgICAgIHRoaXMuX2F6aW11dGhTcGVlZCA9IC0oZGVsdGFYICogdGhpcy54U2Vuc2l0aXZpdHkpO1xuICAgICAgICAgICAgdGhpcy5fcG9sYXJTcGVlZCA9IGRlbHRhWSAqIHRoaXMueVNlbnNpdGl2aXR5O1xuICAgICAgICAgICAgdGhpcy5fdG91Y2hTdGFydFggPSBlLnRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgICAgICAgIHRoaXMuX3RvdWNoU3RhcnRZID0gZS50b3VjaGVzWzBdLmNsaWVudFk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZS50b3VjaGVzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgLyogSGFuZGxlIHBpbmNoIHpvb20gKi9cbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRQaW5jaERpc3RhbmNlID0gdGhpcy5fZ2V0RGlzdGFuY2VCZXR3ZWVuVG91Y2hlcyhlLnRvdWNoZXMpO1xuICAgICAgICAgICAgY29uc3QgcGluY2hTY2FsZSA9IHRoaXMuX2luaXRpYWxQaW5jaERpc3RhbmNlIC8gY3VycmVudFBpbmNoRGlzdGFuY2U7XG4gICAgICAgICAgICB0aGlzLnJhZGlhbCAqPSBwaW5jaFNjYWxlO1xuICAgICAgICAgICAgdGhpcy5yYWRpYWwgPSBNYXRoLm1pbih0aGlzLm1heFpvb20sIE1hdGgubWF4KHRoaXMubWluWm9vbSwgdGhpcy5yYWRpYWwpKTtcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUNhbWVyYSgpO1xuICAgICAgICAgICAgLyogVXBkYXRlIGluaXRpYWwgcGluY2ggZGlzdGFuY2UgZm9yIG5leHQgbW92ZSAqL1xuICAgICAgICAgICAgdGhpcy5faW5pdGlhbFBpbmNoRGlzdGFuY2UgPSBjdXJyZW50UGluY2hEaXN0YW5jZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgX29uVG91Y2hFbmQgPSAoZSkgPT4ge1xuICAgICAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgIHRoaXMuX21vdXNlRG93biA9IGZhbHNlOyAvKiBUcmVhdCB0b3VjaCBlbmQgbGlrZSBtb3VzZSB1cCAqL1xuICAgICAgICB9XG4gICAgICAgIGlmIChlLnRvdWNoZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAvKiBQcmVwYXJlIGZvciBwb3NzaWJsZSBzaW5nbGUgdG91Y2ggbW92ZW1lbnQgKi9cbiAgICAgICAgICAgIHRoaXMuX3RvdWNoU3RhcnRYID0gZS50b3VjaGVzWzBdLmNsaWVudFg7XG4gICAgICAgICAgICB0aGlzLl90b3VjaFN0YXJ0WSA9IGUudG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gdG8gY2FsY3VsYXRlIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHR3byB0b3VjaCBwb2ludHNcbiAgICAgKiBAcGFyYW0gdG91Y2hlcyBsaXN0IG9mIHRvdWNoIHBvaW50c1xuICAgICAqIEByZXR1cm5zIGRpc3RhbmNlIGJldHdlZW4gdGhlIHR3byB0b3VjaCBwb2ludHNcbiAgICAgKi9cbiAgICBfZ2V0RGlzdGFuY2VCZXR3ZWVuVG91Y2hlcyh0b3VjaGVzKSB7XG4gICAgICAgIGNvbnN0IGR4ID0gdG91Y2hlc1swXS5jbGllbnRYIC0gdG91Y2hlc1sxXS5jbGllbnRYO1xuICAgICAgICBjb25zdCBkeSA9IHRvdWNoZXNbMF0uY2xpZW50WSAtIHRvdWNoZXNbMV0uY2xpZW50WTtcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuaW50KClcbl0sIE9yYml0YWxDYW1lcmEucHJvdG90eXBlLCBcIm1vdXNlQnV0dG9uSW5kZXhcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmZsb2F0KDUpXG5dLCBPcmJpdGFsQ2FtZXJhLnByb3RvdHlwZSwgXCJyYWRpYWxcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmZsb2F0KClcbl0sIE9yYml0YWxDYW1lcmEucHJvdG90eXBlLCBcIm1pbkVsZXZhdGlvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoODkuOTkpXG5dLCBPcmJpdGFsQ2FtZXJhLnByb3RvdHlwZSwgXCJtYXhFbGV2YXRpb25cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmZsb2F0KClcbl0sIE9yYml0YWxDYW1lcmEucHJvdG90eXBlLCBcIm1pblpvb21cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmZsb2F0KDEwLjApXG5dLCBPcmJpdGFsQ2FtZXJhLnByb3RvdHlwZSwgXCJtYXhab29tXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eS5mbG9hdCgwLjUpXG5dLCBPcmJpdGFsQ2FtZXJhLnByb3RvdHlwZSwgXCJ4U2Vuc2l0aXZpdHlcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5LmZsb2F0KDAuNSlcbl0sIE9yYml0YWxDYW1lcmEucHJvdG90eXBlLCBcInlTZW5zaXRpdml0eVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoMC4wMilcbl0sIE9yYml0YWxDYW1lcmEucHJvdG90eXBlLCBcInpvb21TZW5zaXRpdml0eVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkuZmxvYXQoMC45KVxuXSwgT3JiaXRhbENhbWVyYS5wcm90b3R5cGUsIFwiZGFtcGluZ1wiLCB2b2lkIDApO1xuZXhwb3J0IHsgT3JiaXRhbENhbWVyYSB9O1xuIiwgImltcG9ydCB7Q29tcG9uZW50LCBJbnB1dENvbXBvbmVudCwgTWVzaENvbXBvbmVudCwgUHJvcGVydHl9IGZyb20gJ0B3b25kZXJsYW5kZW5naW5lL2FwaSc7XHJcbmltcG9ydCB7Q3Vyc29yVGFyZ2V0LCBIb3dsZXJBdWRpb1NvdXJjZX0gZnJvbSAnQHdvbmRlcmxhbmRlbmdpbmUvY29tcG9uZW50cyc7XHJcblxyXG4vKipcclxuICogSGVscGVyIGZ1bmN0aW9uIHRvIHRyaWdnZXIgaGFwdGljIGZlZWRiYWNrIHB1bHNlLlxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IEFuIG9iamVjdCB3aXRoICdpbnB1dCcgY29tcG9uZW50IGF0dGFjaGVkXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJlbmd0aCBTdHJlbmd0aCBmcm9tIDAuMCAtIDEuMFxyXG4gKiBAcGFyYW0ge251bWJlcn0gZHVyYXRpb24gRHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaGFwdGljRmVlZGJhY2sob2JqZWN0LCBzdHJlbmd0aCwgZHVyYXRpb24pIHtcclxuICAgIGNvbnN0IGlucHV0ID0gb2JqZWN0LmdldENvbXBvbmVudChJbnB1dENvbXBvbmVudCk7XHJcbiAgICBpZiAoaW5wdXQgJiYgaW5wdXQueHJJbnB1dFNvdXJjZSkge1xyXG4gICAgICAgIGNvbnN0IGdhbWVwYWQgPSBpbnB1dC54cklucHV0U291cmNlLmdhbWVwYWQ7XHJcbiAgICAgICAgaWYgKGdhbWVwYWQgJiYgZ2FtZXBhZC5oYXB0aWNBY3R1YXRvcnMpXHJcbiAgICAgICAgICAgIGdhbWVwYWQuaGFwdGljQWN0dWF0b3JzWzBdLnB1bHNlKHN0cmVuZ3RoLCBkdXJhdGlvbik7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBCdXR0b24gY29tcG9uZW50LlxyXG4gKlxyXG4gKiBTaG93cyBhICdob3Zlck1hdGVyaWFsJyBvbiBjdXJzb3IgaG92ZXIsIG1vdmVzIGJhY2t3YXJkIG9uIGN1cnNvciBkb3duLFxyXG4gKiByZXR1cm5zIHRvIGl0cyBwb3NpdGlvbiBvbiBjdXJzb3IgdXAsIHBsYXlzIGNsaWNrL3VuY2xpY2sgc291bmRzIGFuZCBoYXB0aWNcclxuICogZmVlZGJhY2sgb24gaG92ZXIuXHJcbiAqXHJcbiAqIFVzZSBgdGFyZ2V0Lm9uQ2xpY2suYWRkKCgpID0+IHt9KWAgb24gdGhlIGBjdXJzb3ItdGFyZ2V0YCBjb21wb25lbnQgdXNlZFxyXG4gKiB3aXRoIHRoZSBidXR0b24gdG8gZGVmaW5lIHRoZSBidXR0b24ncyBhY3Rpb24uXHJcbiAqXHJcbiAqIFN1cHBvcnRzIGludGVyYWN0aW9uIHdpdGggYGZpbmdlci1jdXJzb3JgIGNvbXBvbmVudCBmb3IgaGFuZCB0cmFja2luZy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBCdXR0b25Db21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgc3RhdGljIFR5cGVOYW1lID0gJ2J1dHRvbic7XHJcbiAgICBzdGF0aWMgUHJvcGVydGllcyA9IHtcclxuICAgICAgICAvKiogT2JqZWN0IHRoYXQgaGFzIHRoZSBidXR0b24ncyBtZXNoIGF0dGFjaGVkICovXHJcbiAgICAgICAgYnV0dG9uTWVzaE9iamVjdDogUHJvcGVydHkub2JqZWN0KCksXHJcbiAgICAgICAgLyoqIE1hdGVyaWFsIHRvIGFwcGx5IHdoZW4gdGhlIHVzZXIgaG92ZXJzIHRoZSBidXR0b24gKi9cclxuICAgICAgICBob3Zlck1hdGVyaWFsOiBQcm9wZXJ0eS5tYXRlcmlhbCgpLFxyXG4gICAgfTtcclxuXHJcbiAgICBzdGF0aWMgb25SZWdpc3RlcihlbmdpbmUpIHtcclxuICAgICAgICBlbmdpbmUucmVnaXN0ZXJDb21wb25lbnQoSG93bGVyQXVkaW9Tb3VyY2UpO1xyXG4gICAgICAgIGVuZ2luZS5yZWdpc3RlckNvbXBvbmVudChDdXJzb3JUYXJnZXQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIFBvc2l0aW9uIHRvIHJldHVybiB0byB3aGVuIFwidW5wcmVzc2luZ1wiIHRoZSBidXR0b24gKi9cclxuICAgIHJldHVyblBvcyA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XHJcblxyXG4gICAgc3RhcnQoKSB7XHJcbiAgICAgICAgdGhpcy5tZXNoID0gdGhpcy5idXR0b25NZXNoT2JqZWN0LmdldENvbXBvbmVudChNZXNoQ29tcG9uZW50KTtcclxuICAgICAgICB0aGlzLmRlZmF1bHRNYXRlcmlhbCA9IHRoaXMubWVzaC5tYXRlcmlhbDtcclxuICAgICAgICB0aGlzLmJ1dHRvbk1lc2hPYmplY3QuZ2V0VHJhbnNsYXRpb25Mb2NhbCh0aGlzLnJldHVyblBvcyk7XHJcblxyXG4gICAgICAgIHRoaXMudGFyZ2V0ID1cclxuICAgICAgICAgICAgdGhpcy5vYmplY3QuZ2V0Q29tcG9uZW50KEN1cnNvclRhcmdldCkgfHxcclxuICAgICAgICAgICAgdGhpcy5vYmplY3QuYWRkQ29tcG9uZW50KEN1cnNvclRhcmdldCk7XHJcblxyXG4gICAgICAgIHRoaXMuc291bmRDbGljayA9IHRoaXMub2JqZWN0LmFkZENvbXBvbmVudChIb3dsZXJBdWRpb1NvdXJjZSwge1xyXG4gICAgICAgICAgICBzcmM6ICdzZngvY2xpY2sud2F2JyxcclxuICAgICAgICAgICAgc3BhdGlhbDogdHJ1ZSxcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNvdW5kVW5DbGljayA9IHRoaXMub2JqZWN0LmFkZENvbXBvbmVudChIb3dsZXJBdWRpb1NvdXJjZSwge1xyXG4gICAgICAgICAgICBzcmM6ICdzZngvdW5jbGljay53YXYnLFxyXG4gICAgICAgICAgICBzcGF0aWFsOiB0cnVlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQWN0aXZhdGUoKSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXQub25Ib3Zlci5hZGQodGhpcy5vbkhvdmVyKTtcclxuICAgICAgICB0aGlzLnRhcmdldC5vblVuaG92ZXIuYWRkKHRoaXMub25VbmhvdmVyKTtcclxuICAgICAgICB0aGlzLnRhcmdldC5vbkRvd24uYWRkKHRoaXMub25Eb3duKTtcclxuICAgICAgICB0aGlzLnRhcmdldC5vblVwLmFkZCh0aGlzLm9uVXApO1xyXG4gICAgfVxyXG5cclxuICAgIG9uRGVhY3RpdmF0ZSgpIHtcclxuICAgICAgICB0aGlzLnRhcmdldC5vbkhvdmVyLnJlbW92ZSh0aGlzLm9uSG92ZXIpO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0Lm9uVW5ob3Zlci5yZW1vdmUodGhpcy5vblVuaG92ZXIpO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0Lm9uRG93bi5yZW1vdmUodGhpcy5vbkRvd24pO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0Lm9uVXAucmVtb3ZlKHRoaXMub25VcCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyogQ2FsbGVkIGJ5ICdjdXJzb3ItdGFyZ2V0JyAqL1xyXG4gICAgb25Ib3ZlciA9IChfLCBjdXJzb3IpID0+IHtcclxuICAgICAgICB0aGlzLm1lc2gubWF0ZXJpYWwgPSB0aGlzLmhvdmVyTWF0ZXJpYWw7XHJcbiAgICAgICAgaWYgKGN1cnNvci50eXBlID09PSAnZmluZ2VyLWN1cnNvcicpIHtcclxuICAgICAgICAgICAgdGhpcy5vbkRvd24oXywgY3Vyc29yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGhhcHRpY0ZlZWRiYWNrKGN1cnNvci5vYmplY3QsIDAuNSwgNTApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIENhbGxlZCBieSAnY3Vyc29yLXRhcmdldCcgKi9cclxuICAgIG9uRG93biA9IChfLCBjdXJzb3IpID0+IHtcclxuICAgICAgICB0aGlzLnNvdW5kQ2xpY2sucGxheSgpO1xyXG4gICAgICAgIHRoaXMuYnV0dG9uTWVzaE9iamVjdC50cmFuc2xhdGUoWzAuMCwgLTAuMSwgMC4wXSk7XHJcbiAgICAgICAgaGFwdGljRmVlZGJhY2soY3Vyc29yLm9iamVjdCwgMS4wLCAyMCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyogQ2FsbGVkIGJ5ICdjdXJzb3ItdGFyZ2V0JyAqL1xyXG4gICAgb25VcCA9IChfLCBjdXJzb3IpID0+IHtcclxuICAgICAgICB0aGlzLnNvdW5kVW5DbGljay5wbGF5KCk7XHJcbiAgICAgICAgdGhpcy5idXR0b25NZXNoT2JqZWN0LnNldFRyYW5zbGF0aW9uTG9jYWwodGhpcy5yZXR1cm5Qb3MpO1xyXG4gICAgICAgIGhhcHRpY0ZlZWRiYWNrKGN1cnNvci5vYmplY3QsIDAuNywgMjApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIENhbGxlZCBieSAnY3Vyc29yLXRhcmdldCcgKi9cclxuICAgIG9uVW5ob3ZlciA9IChfLCBjdXJzb3IpID0+IHtcclxuICAgICAgICB0aGlzLm1lc2gubWF0ZXJpYWwgPSB0aGlzLmRlZmF1bHRNYXRlcmlhbDtcclxuICAgICAgICBpZiAoY3Vyc29yLnR5cGUgPT09ICdmaW5nZXItY3Vyc29yJykge1xyXG4gICAgICAgICAgICB0aGlzLm9uVXAoXywgY3Vyc29yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGhhcHRpY0ZlZWRiYWNrKGN1cnNvci5vYmplY3QsIDAuMywgNTApO1xyXG4gICAgfVxyXG59XHJcbiIsICJpbXBvcnQgKiBhcyBfX3dvbmRlcmxhbmRlbmdpbmVfY29tcG9uZW50cyBmcm9tICdAd29uZGVybGFuZGVuZ2luZS9jb21wb25lbnRzJztcbl9yZWdpc3RlckVkaXRvcihfX3dvbmRlcmxhbmRlbmdpbmVfY29tcG9uZW50cyk7XG5pbXBvcnQgKiBhcyBfQ19fVXNlcnNfbWlrZW1fRG9jdW1lbnRzX1dvbmRlcmxhbmRFbmdpbmVfbXJfd29ybGRfanNfYnV0dG9uX2pzIGZyb20gJ0M6L1VzZXJzL21pa2VtL0RvY3VtZW50cy9Xb25kZXJsYW5kRW5naW5lL21yLXdvcmxkL2pzL2J1dHRvbi5qcyc7XG5fcmVnaXN0ZXJFZGl0b3IoX0NfX1VzZXJzX21pa2VtX0RvY3VtZW50c19Xb25kZXJsYW5kRW5naW5lX21yX3dvcmxkX2pzX2J1dHRvbl9qcyk7XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBVUEsT0FBQyxXQUFXO0FBRVY7QUFTQSxZQUFJQSxnQkFBZSxXQUFXO0FBQzVCLGVBQUssS0FBSztBQUFBLFFBQ1o7QUFDQSxRQUFBQSxjQUFhLFlBQVk7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFVBS3ZCLE1BQU0sV0FBVztBQUNm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QUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxXQUFPO0FBQUEsRUFDVDtBQVNPLFdBQVMsS0FBSyxLQUFLLEdBQUc7QUFDM0IsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsV0FBTztBQUFBLEVBQ1Q7QUF1Qk8sV0FBUyxXQUFXLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUs7QUFDekcsUUFBSSxNQUFNLElBQWEsV0FBVyxFQUFFO0FBQ3BDLFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsV0FBTztBQUFBLEVBQ1Q7QUF3Qk8sV0FBUyxJQUFJLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUN2RyxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFdBQU87QUFBQSxFQUNUO0FBUU8sV0FBUyxTQUFTLEtBQUs7QUFDNUIsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixXQUFPO0FBQUEsRUFDVDtBQVNPLFdBQVMsVUFBVSxLQUFLLEdBQUc7QUFFaEMsUUFBSSxRQUFRLEdBQUc7QUFDYixVQUFJLE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQztBQUNiLFVBQUksTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQztBQUNiLFVBQUksTUFBTSxFQUFFLEVBQUU7QUFDZCxVQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixVQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixVQUFJLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDYixVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNiLFVBQUksQ0FBQyxJQUFJO0FBQ1QsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxVQUFJLEVBQUUsSUFBSTtBQUNWLFVBQUksRUFBRSxJQUFJO0FBQ1YsVUFBSSxFQUFFLElBQUk7QUFBQSxJQUNaLE9BQU87QUFDTCxVQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixVQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixVQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixVQUFJLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDYixVQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixVQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixVQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixVQUFJLENBQUMsSUFBSSxFQUFFLEVBQUU7QUFDYixVQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixVQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixVQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxVQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxVQUFJLEVBQUUsSUFBSSxFQUFFLENBQUM7QUFDYixVQUFJLEVBQUUsSUFBSSxFQUFFLENBQUM7QUFDYixVQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxVQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFBQSxJQUNoQjtBQUVBLFdBQU87QUFBQSxFQUNUO0FBU08sV0FBUyxPQUFPLEtBQUssR0FBRztBQUM3QixRQUFJLE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDO0FBQ2IsUUFBSSxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQztBQUNiLFFBQUksTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUU7QUFDZCxRQUFJLE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFO0FBQ2QsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFFNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUU1RSxRQUFJLENBQUMsS0FBSztBQUNSLGFBQU87QUFBQSxJQUNUO0FBRUEsVUFBTSxJQUFNO0FBQ1osUUFBSSxDQUFDLEtBQUssTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDL0MsUUFBSSxDQUFDLEtBQUssTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDL0MsUUFBSSxDQUFDLEtBQUssTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDL0MsUUFBSSxDQUFDLEtBQUssTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDL0MsUUFBSSxDQUFDLEtBQUssTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDL0MsUUFBSSxDQUFDLEtBQUssTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDL0MsUUFBSSxDQUFDLEtBQUssTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDL0MsUUFBSSxDQUFDLEtBQUssTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDL0MsUUFBSSxDQUFDLEtBQUssTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDL0MsUUFBSSxDQUFDLEtBQUssTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDL0MsUUFBSSxFQUFFLEtBQUssTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDaEQsUUFBSSxFQUFFLEtBQUssTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDaEQsUUFBSSxFQUFFLEtBQUssTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDaEQsUUFBSSxFQUFFLEtBQUssTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDaEQsUUFBSSxFQUFFLEtBQUssTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDaEQsUUFBSSxFQUFFLEtBQUssTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDaEQsV0FBTztBQUFBLEVBQ1Q7QUFTTyxXQUFTLFFBQVEsS0FBSyxHQUFHO0FBQzlCLFFBQUksTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUM7QUFDYixRQUFJLE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDO0FBQ2IsUUFBSSxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRTtBQUNkLFFBQUksTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUU7QUFDZCxRQUFJLENBQUMsSUFBSSxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDbEcsUUFBSSxDQUFDLElBQUksRUFBRSxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDcEcsUUFBSSxDQUFDLElBQUksT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ2xHLFFBQUksQ0FBQyxJQUFJLEVBQUUsT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ3BHLFFBQUksQ0FBQyxJQUFJLEVBQUUsT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ3BHLFFBQUksQ0FBQyxJQUFJLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNsRyxRQUFJLENBQUMsSUFBSSxFQUFFLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNwRyxRQUFJLENBQUMsSUFBSSxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDbEcsUUFBSSxDQUFDLElBQUksT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ2xHLFFBQUksQ0FBQyxJQUFJLEVBQUUsT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ3BHLFFBQUksRUFBRSxJQUFJLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNuRyxRQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNyRyxRQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNyRyxRQUFJLEVBQUUsSUFBSSxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDbkcsUUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDckcsUUFBSSxFQUFFLElBQUksT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ25HLFdBQU87QUFBQSxFQUNUO0FBUU8sV0FBUyxZQUFZLEdBQUc7QUFDN0IsUUFBSSxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQztBQUNiLFFBQUksTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUM7QUFDYixRQUFJLE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFO0FBQ2QsUUFBSSxNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRTtBQUNkLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLFFBQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixRQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsUUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBRTVCLFdBQU8sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQUEsRUFDM0U7QUFVTyxXQUFTLFNBQVMsS0FBSyxHQUFHLEdBQUc7QUFDbEMsUUFBSSxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQztBQUNiLFFBQUksTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUM7QUFDYixRQUFJLE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFO0FBQ2QsUUFBSSxNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRTtBQUVkLFFBQUksS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQy9DLFFBQUksQ0FBQyxJQUFJLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDL0MsUUFBSSxDQUFDLElBQUksS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSztBQUMvQyxRQUFJLENBQUMsSUFBSSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQy9DLFNBQUssRUFBRSxDQUFDO0FBQ1IsU0FBSyxFQUFFLENBQUM7QUFDUixTQUFLLEVBQUUsQ0FBQztBQUNSLFNBQUssRUFBRSxDQUFDO0FBQ1IsUUFBSSxDQUFDLElBQUksS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSztBQUMvQyxRQUFJLENBQUMsSUFBSSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQy9DLFFBQUksQ0FBQyxJQUFJLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDL0MsUUFBSSxDQUFDLElBQUksS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSztBQUMvQyxTQUFLLEVBQUUsQ0FBQztBQUNSLFNBQUssRUFBRSxDQUFDO0FBQ1IsU0FBSyxFQUFFLEVBQUU7QUFDVCxTQUFLLEVBQUUsRUFBRTtBQUNULFFBQUksQ0FBQyxJQUFJLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDL0MsUUFBSSxDQUFDLElBQUksS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSztBQUMvQyxRQUFJLEVBQUUsSUFBSSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQ2hELFFBQUksRUFBRSxJQUFJLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDaEQsU0FBSyxFQUFFLEVBQUU7QUFDVCxTQUFLLEVBQUUsRUFBRTtBQUNULFNBQUssRUFBRSxFQUFFO0FBQ1QsU0FBSyxFQUFFLEVBQUU7QUFDVCxRQUFJLEVBQUUsSUFBSSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQ2hELFFBQUksRUFBRSxJQUFJLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDaEQsUUFBSSxFQUFFLElBQUksS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSztBQUNoRCxRQUFJLEVBQUUsSUFBSSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQ2hELFdBQU87QUFBQSxFQUNUO0FBVU8sV0FBUyxVQUFVLEtBQUssR0FBRyxHQUFHO0FBQ25DLFFBQUksSUFBSSxFQUFFLENBQUMsR0FDUCxJQUFJLEVBQUUsQ0FBQyxHQUNQLElBQUksRUFBRSxDQUFDO0FBQ1gsUUFBSSxLQUFLLEtBQUssS0FBSztBQUNuQixRQUFJLEtBQUssS0FBSyxLQUFLO0FBQ25CLFFBQUksS0FBSyxLQUFLLEtBQUs7QUFFbkIsUUFBSSxNQUFNLEtBQUs7QUFDYixVQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDLElBQUksSUFBSSxFQUFFLEVBQUU7QUFDL0MsVUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQyxJQUFJLElBQUksRUFBRSxFQUFFO0FBQy9DLFVBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDLElBQUksSUFBSSxFQUFFLEVBQUUsSUFBSSxJQUFJLEVBQUUsRUFBRTtBQUNoRCxVQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQyxJQUFJLElBQUksRUFBRSxFQUFFLElBQUksSUFBSSxFQUFFLEVBQUU7QUFBQSxJQUNsRCxPQUFPO0FBQ0wsWUFBTSxFQUFFLENBQUM7QUFDVCxZQUFNLEVBQUUsQ0FBQztBQUNULFlBQU0sRUFBRSxDQUFDO0FBQ1QsWUFBTSxFQUFFLENBQUM7QUFDVCxZQUFNLEVBQUUsQ0FBQztBQUNULFlBQU0sRUFBRSxDQUFDO0FBQ1QsWUFBTSxFQUFFLENBQUM7QUFDVCxZQUFNLEVBQUUsQ0FBQztBQUNULFlBQU0sRUFBRSxDQUFDO0FBQ1QsWUFBTSxFQUFFLENBQUM7QUFDVCxZQUFNLEVBQUUsRUFBRTtBQUNWLFlBQU0sRUFBRSxFQUFFO0FBQ1YsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksQ0FBQyxJQUFJO0FBQ1QsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksQ0FBQyxJQUFJO0FBQ1QsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLENBQUMsSUFBSTtBQUNULFVBQUksQ0FBQyxJQUFJO0FBQ1QsVUFBSSxDQUFDLElBQUk7QUFDVCxVQUFJLEVBQUUsSUFBSTtBQUNWLFVBQUksRUFBRSxJQUFJO0FBQ1YsVUFBSSxFQUFFLElBQUksTUFBTSxJQUFJLE1BQU0sSUFBSSxNQUFNLElBQUksRUFBRSxFQUFFO0FBQzVDLFVBQUksRUFBRSxJQUFJLE1BQU0sSUFBSSxNQUFNLElBQUksTUFBTSxJQUFJLEVBQUUsRUFBRTtBQUM1QyxVQUFJLEVBQUUsSUFBSSxNQUFNLElBQUksTUFBTSxJQUFJLE1BQU0sSUFBSSxFQUFFLEVBQUU7QUFDNUMsVUFBSSxFQUFFLElBQUksTUFBTSxJQUFJLE1BQU0sSUFBSSxNQUFNLElBQUksRUFBRSxFQUFFO0FBQUEsSUFDOUM7QUFFQSxXQUFPO0FBQUEsRUFDVDtBQVVPLFdBQVMsTUFBTSxLQUFLLEdBQUcsR0FBRztBQUMvQixRQUFJLElBQUksRUFBRSxDQUFDLEdBQ1AsSUFBSSxFQUFFLENBQUMsR0FDUCxJQUFJLEVBQUUsQ0FBQztBQUNYLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO0FBQ2hCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJO0FBQ2xCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJO0FBQ2xCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFdBQU87QUFBQSxFQUNUO0FBV08sV0FBUyxPQUFPLEtBQUssR0FBRyxLQUFLLE1BQU07QUFDeEMsUUFBSSxJQUFJLEtBQUssQ0FBQyxHQUNWLElBQUksS0FBSyxDQUFDLEdBQ1YsSUFBSSxLQUFLLENBQUM7QUFDZCxRQUFJQyxPQUFNLEtBQUssTUFBTSxHQUFHLEdBQUcsQ0FBQztBQUM1QixRQUFJLEdBQUcsR0FBRztBQUNWLFFBQUksS0FBSyxLQUFLLEtBQUs7QUFDbkIsUUFBSSxLQUFLLEtBQUssS0FBSztBQUNuQixRQUFJLEtBQUssS0FBSyxLQUFLO0FBQ25CLFFBQUksS0FBSyxLQUFLO0FBQ2QsUUFBSSxLQUFLLEtBQUs7QUFDZCxRQUFJLEtBQUssS0FBSztBQUVkLFFBQUlBLE9BQWUsU0FBUztBQUMxQixhQUFPO0FBQUEsSUFDVDtBQUVBLElBQUFBLE9BQU0sSUFBSUE7QUFDVixTQUFLQTtBQUNMLFNBQUtBO0FBQ0wsU0FBS0E7QUFDTCxRQUFJLEtBQUssSUFBSSxHQUFHO0FBQ2hCLFFBQUksS0FBSyxJQUFJLEdBQUc7QUFDaEIsUUFBSSxJQUFJO0FBQ1IsVUFBTSxFQUFFLENBQUM7QUFDVCxVQUFNLEVBQUUsQ0FBQztBQUNULFVBQU0sRUFBRSxDQUFDO0FBQ1QsVUFBTSxFQUFFLENBQUM7QUFDVCxVQUFNLEVBQUUsQ0FBQztBQUNULFVBQU0sRUFBRSxDQUFDO0FBQ1QsVUFBTSxFQUFFLENBQUM7QUFDVCxVQUFNLEVBQUUsQ0FBQztBQUNULFVBQU0sRUFBRSxDQUFDO0FBQ1QsVUFBTSxFQUFFLENBQUM7QUFDVCxVQUFNLEVBQUUsRUFBRTtBQUNWLFVBQU0sRUFBRSxFQUFFO0FBRVYsVUFBTSxJQUFJLElBQUksSUFBSTtBQUNsQixVQUFNLElBQUksSUFBSSxJQUFJLElBQUk7QUFDdEIsVUFBTSxJQUFJLElBQUksSUFBSSxJQUFJO0FBQ3RCLFVBQU0sSUFBSSxJQUFJLElBQUksSUFBSTtBQUN0QixVQUFNLElBQUksSUFBSSxJQUFJO0FBQ2xCLFVBQU0sSUFBSSxJQUFJLElBQUksSUFBSTtBQUN0QixVQUFNLElBQUksSUFBSSxJQUFJLElBQUk7QUFDdEIsVUFBTSxJQUFJLElBQUksSUFBSSxJQUFJO0FBQ3RCLFVBQU0sSUFBSSxJQUFJLElBQUk7QUFFbEIsUUFBSSxDQUFDLElBQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQ3ZDLFFBQUksQ0FBQyxJQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUN2QyxRQUFJLENBQUMsSUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDdkMsUUFBSSxDQUFDLElBQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQ3ZDLFFBQUksQ0FBQyxJQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUN2QyxRQUFJLENBQUMsSUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDdkMsUUFBSSxDQUFDLElBQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQ3ZDLFFBQUksQ0FBQyxJQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUN2QyxRQUFJLENBQUMsSUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDdkMsUUFBSSxDQUFDLElBQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQ3ZDLFFBQUksRUFBRSxJQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUN4QyxRQUFJLEVBQUUsSUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFFeEMsUUFBSSxNQUFNLEtBQUs7QUFFYixVQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxVQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxVQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxVQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFBQSxJQUNoQjtBQUVBLFdBQU87QUFBQSxFQUNUO0FBVU8sV0FBUyxRQUFRLEtBQUssR0FBRyxLQUFLO0FBQ25DLFFBQUksSUFBSSxLQUFLLElBQUksR0FBRztBQUNwQixRQUFJLElBQUksS0FBSyxJQUFJLEdBQUc7QUFDcEIsUUFBSSxNQUFNLEVBQUUsQ0FBQztBQUNiLFFBQUksTUFBTSxFQUFFLENBQUM7QUFDYixRQUFJLE1BQU0sRUFBRSxDQUFDO0FBQ2IsUUFBSSxNQUFNLEVBQUUsQ0FBQztBQUNiLFFBQUksTUFBTSxFQUFFLENBQUM7QUFDYixRQUFJLE1BQU0sRUFBRSxDQUFDO0FBQ2IsUUFBSSxNQUFNLEVBQUUsRUFBRTtBQUNkLFFBQUksTUFBTSxFQUFFLEVBQUU7QUFFZCxRQUFJLE1BQU0sS0FBSztBQUViLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNkLFVBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUFBLElBQ2hCO0FBR0EsUUFBSSxDQUFDLElBQUksTUFBTSxJQUFJLE1BQU07QUFDekIsUUFBSSxDQUFDLElBQUksTUFBTSxJQUFJLE1BQU07QUFDekIsUUFBSSxDQUFDLElBQUksTUFBTSxJQUFJLE1BQU07QUFDekIsUUFBSSxDQUFDLElBQUksTUFBTSxJQUFJLE1BQU07QUFDekIsUUFBSSxDQUFDLElBQUksTUFBTSxJQUFJLE1BQU07QUFDekIsUUFBSSxDQUFDLElBQUksTUFBTSxJQUFJLE1BQU07QUFDekIsUUFBSSxFQUFFLElBQUksTUFBTSxJQUFJLE1BQU07QUFDMUIsUUFBSSxFQUFFLElBQUksTUFBTSxJQUFJLE1BQU07QUFDMUIsV0FBTztBQUFBLEVBQ1Q7QUFVTyxXQUFTLFFBQVEsS0FBSyxHQUFHLEtBQUs7QUFDbkMsUUFBSSxJQUFJLEtBQUssSUFBSSxHQUFHO0FBQ3BCLFFBQUksSUFBSSxLQUFLLElBQUksR0FBRztBQUNwQixRQUFJLE1BQU0sRUFBRSxDQUFDO0FBQ2IsUUFBSSxNQUFNLEVBQUUsQ0FBQztBQUNiLFFBQUksTUFBTSxFQUFFLENBQUM7QUFDYixRQUFJLE1BQU0sRUFBRSxDQUFDO0FBQ2IsUUFBSSxNQUFNLEVBQUUsQ0FBQztBQUNiLFFBQUksTUFBTSxFQUFFLENBQUM7QUFDYixRQUFJLE1BQU0sRUFBRSxFQUFFO0FBQ2QsUUFBSSxNQUFNLEVBQUUsRUFBRTtBQUVkLFFBQUksTUFBTSxLQUFLO0FBRWIsVUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osVUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osVUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osVUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osVUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsVUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsVUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ2QsVUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQUEsSUFDaEI7QUFHQSxRQUFJLENBQUMsSUFBSSxNQUFNLElBQUksTUFBTTtBQUN6QixRQUFJLENBQUMsSUFBSSxNQUFNLElBQUksTUFBTTtBQUN6QixRQUFJLENBQUMsSUFBSSxNQUFNLElBQUksTUFBTTtBQUN6QixRQUFJLENBQUMsSUFBSSxNQUFNLElBQUksTUFBTTtBQUN6QixRQUFJLENBQUMsSUFBSSxNQUFNLElBQUksTUFBTTtBQUN6QixRQUFJLENBQUMsSUFBSSxNQUFNLElBQUksTUFBTTtBQUN6QixRQUFJLEVBQUUsSUFBSSxNQUFNLElBQUksTUFBTTtBQUMxQixRQUFJLEVBQUUsSUFBSSxNQUFNLElBQUksTUFBTTtBQUMxQixXQUFPO0FBQUEsRUFDVDtBQVVPLFdBQVMsUUFBUSxLQUFLLEdBQUcsS0FBSztBQUNuQyxRQUFJLElBQUksS0FBSyxJQUFJLEdBQUc7QUFDcEIsUUFBSSxJQUFJLEtBQUssSUFBSSxHQUFHO0FBQ3BCLFFBQUksTUFBTSxFQUFFLENBQUM7QUFDYixRQUFJLE1BQU0sRUFBRSxDQUFDO0FBQ2IsUUFBSSxNQUFNLEVBQUUsQ0FBQztBQUNiLFFBQUksTUFBTSxFQUFFLENBQUM7QUFDYixRQUFJLE1BQU0sRUFBRSxDQUFDO0FBQ2IsUUFBSSxNQUFNLEVBQUUsQ0FBQztBQUNiLFFBQUksTUFBTSxFQUFFLENBQUM7QUFDYixRQUFJLE1BQU0sRUFBRSxDQUFDO0FBRWIsUUFBSSxNQUFNLEtBQUs7QUFFYixVQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixVQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixVQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxVQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxVQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxVQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxVQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDZCxVQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFBQSxJQUNoQjtBQUdBLFFBQUksQ0FBQyxJQUFJLE1BQU0sSUFBSSxNQUFNO0FBQ3pCLFFBQUksQ0FBQyxJQUFJLE1BQU0sSUFBSSxNQUFNO0FBQ3pCLFFBQUksQ0FBQyxJQUFJLE1BQU0sSUFBSSxNQUFNO0FBQ3pCLFFBQUksQ0FBQyxJQUFJLE1BQU0sSUFBSSxNQUFNO0FBQ3pCLFFBQUksQ0FBQyxJQUFJLE1BQU0sSUFBSSxNQUFNO0FBQ3pCLFFBQUksQ0FBQyxJQUFJLE1BQU0sSUFBSSxNQUFNO0FBQ3pCLFFBQUksQ0FBQyxJQUFJLE1BQU0sSUFBSSxNQUFNO0FBQ3pCLFFBQUksQ0FBQyxJQUFJLE1BQU0sSUFBSSxNQUFNO0FBQ3pCLFdBQU87QUFBQSxFQUNUO0FBYU8sV0FBUyxnQkFBZ0IsS0FBSyxHQUFHO0FBQ3RDLFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQztBQUNiLFFBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQztBQUNiLFFBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQztBQUNiLFFBQUksRUFBRSxJQUFJO0FBQ1YsV0FBTztBQUFBLEVBQ1Q7QUFhTyxXQUFTLFlBQVksS0FBSyxHQUFHO0FBQ2xDLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLEVBQUUsSUFBSSxFQUFFLENBQUM7QUFDYixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsV0FBTztBQUFBLEVBQ1Q7QUFjTyxXQUFTLGFBQWEsS0FBSyxLQUFLLE1BQU07QUFDM0MsUUFBSSxJQUFJLEtBQUssQ0FBQyxHQUNWLElBQUksS0FBSyxDQUFDLEdBQ1YsSUFBSSxLQUFLLENBQUM7QUFDZCxRQUFJQSxPQUFNLEtBQUssTUFBTSxHQUFHLEdBQUcsQ0FBQztBQUM1QixRQUFJLEdBQUcsR0FBRztBQUVWLFFBQUlBLE9BQWUsU0FBUztBQUMxQixhQUFPO0FBQUEsSUFDVDtBQUVBLElBQUFBLE9BQU0sSUFBSUE7QUFDVixTQUFLQTtBQUNMLFNBQUtBO0FBQ0wsU0FBS0E7QUFDTCxRQUFJLEtBQUssSUFBSSxHQUFHO0FBQ2hCLFFBQUksS0FBSyxJQUFJLEdBQUc7QUFDaEIsUUFBSSxJQUFJO0FBRVIsUUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLElBQUk7QUFDckIsUUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLElBQUksSUFBSTtBQUN6QixRQUFJLENBQUMsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJO0FBQ3pCLFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLElBQUksSUFBSTtBQUN6QixRQUFJLENBQUMsSUFBSSxJQUFJLElBQUksSUFBSTtBQUNyQixRQUFJLENBQUMsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJO0FBQ3pCLFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLElBQUksSUFBSTtBQUN6QixRQUFJLENBQUMsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJO0FBQ3pCLFFBQUksRUFBRSxJQUFJLElBQUksSUFBSSxJQUFJO0FBQ3RCLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixXQUFPO0FBQUEsRUFDVDtBQWFPLFdBQVMsY0FBYyxLQUFLLEtBQUs7QUFDdEMsUUFBSSxJQUFJLEtBQUssSUFBSSxHQUFHO0FBQ3BCLFFBQUksSUFBSSxLQUFLLElBQUksR0FBRztBQUVwQixRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSSxDQUFDO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsV0FBTztBQUFBLEVBQ1Q7QUFhTyxXQUFTLGNBQWMsS0FBSyxLQUFLO0FBQ3RDLFFBQUksSUFBSSxLQUFLLElBQUksR0FBRztBQUNwQixRQUFJLElBQUksS0FBSyxJQUFJLEdBQUc7QUFFcEIsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJLENBQUM7QUFDVixRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFdBQU87QUFBQSxFQUNUO0FBYU8sV0FBUyxjQUFjLEtBQUssS0FBSztBQUN0QyxRQUFJLElBQUksS0FBSyxJQUFJLEdBQUc7QUFDcEIsUUFBSSxJQUFJLEtBQUssSUFBSSxHQUFHO0FBRXBCLFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUksQ0FBQztBQUNWLFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixXQUFPO0FBQUEsRUFDVDtBQWlCTyxXQUFTLHdCQUF3QixLQUFLLEdBQUcsR0FBRztBQUVqRCxRQUFJLElBQUksRUFBRSxDQUFDLEdBQ1AsSUFBSSxFQUFFLENBQUMsR0FDUCxJQUFJLEVBQUUsQ0FBQyxHQUNQLElBQUksRUFBRSxDQUFDO0FBQ1gsUUFBSSxLQUFLLElBQUk7QUFDYixRQUFJLEtBQUssSUFBSTtBQUNiLFFBQUksS0FBSyxJQUFJO0FBQ2IsUUFBSSxLQUFLLElBQUk7QUFDYixRQUFJLEtBQUssSUFBSTtBQUNiLFFBQUksS0FBSyxJQUFJO0FBQ2IsUUFBSSxLQUFLLElBQUk7QUFDYixRQUFJLEtBQUssSUFBSTtBQUNiLFFBQUksS0FBSyxJQUFJO0FBQ2IsUUFBSSxLQUFLLElBQUk7QUFDYixRQUFJLEtBQUssSUFBSTtBQUNiLFFBQUksS0FBSyxJQUFJO0FBQ2IsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEtBQUs7QUFDZCxRQUFJLENBQUMsSUFBSSxLQUFLO0FBQ2QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSSxLQUFLO0FBQ2QsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEtBQUs7QUFDZCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJLEtBQUs7QUFDZCxRQUFJLENBQUMsSUFBSSxLQUFLO0FBQ2QsUUFBSSxFQUFFLElBQUksS0FBSyxLQUFLO0FBQ3BCLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUksRUFBRSxDQUFDO0FBQ2IsUUFBSSxFQUFFLElBQUksRUFBRSxDQUFDO0FBQ2IsUUFBSSxFQUFFLElBQUksRUFBRSxDQUFDO0FBQ2IsUUFBSSxFQUFFLElBQUk7QUFDVixXQUFPO0FBQUEsRUFDVDtBQVNPLFdBQVMsVUFBVSxLQUFLLEdBQUc7QUFDaEMsUUFBSSxjQUFjLElBQWEsV0FBVyxDQUFDO0FBQzNDLFFBQUksS0FBSyxDQUFDLEVBQUUsQ0FBQyxHQUNULEtBQUssQ0FBQyxFQUFFLENBQUMsR0FDVCxLQUFLLENBQUMsRUFBRSxDQUFDLEdBQ1QsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQztBQUNaLFFBQUksWUFBWSxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO0FBRW5ELFFBQUksWUFBWSxHQUFHO0FBQ2pCLGtCQUFZLENBQUMsS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLE1BQU0sSUFBSTtBQUMvRCxrQkFBWSxDQUFDLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxNQUFNLElBQUk7QUFDL0Qsa0JBQVksQ0FBQyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssTUFBTSxJQUFJO0FBQUEsSUFDakUsT0FBTztBQUNMLGtCQUFZLENBQUMsS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLE1BQU07QUFDM0Qsa0JBQVksQ0FBQyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssTUFBTTtBQUMzRCxrQkFBWSxDQUFDLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxNQUFNO0FBQUEsSUFDN0Q7QUFFQSw0QkFBd0IsS0FBSyxHQUFHLFdBQVc7QUFDM0MsV0FBTztBQUFBLEVBQ1Q7QUFXTyxXQUFTLGVBQWUsS0FBSyxLQUFLO0FBQ3ZDLFFBQUksQ0FBQyxJQUFJLElBQUksRUFBRTtBQUNmLFFBQUksQ0FBQyxJQUFJLElBQUksRUFBRTtBQUNmLFFBQUksQ0FBQyxJQUFJLElBQUksRUFBRTtBQUNmLFdBQU87QUFBQSxFQUNUO0FBWU8sV0FBUyxXQUFXLEtBQUssS0FBSztBQUNuQyxRQUFJLE1BQU0sSUFBSSxDQUFDO0FBQ2YsUUFBSSxNQUFNLElBQUksQ0FBQztBQUNmLFFBQUksTUFBTSxJQUFJLENBQUM7QUFDZixRQUFJLE1BQU0sSUFBSSxDQUFDO0FBQ2YsUUFBSSxNQUFNLElBQUksQ0FBQztBQUNmLFFBQUksTUFBTSxJQUFJLENBQUM7QUFDZixRQUFJLE1BQU0sSUFBSSxDQUFDO0FBQ2YsUUFBSSxNQUFNLElBQUksQ0FBQztBQUNmLFFBQUksTUFBTSxJQUFJLEVBQUU7QUFDaEIsUUFBSSxDQUFDLElBQUksS0FBSyxNQUFNLEtBQUssS0FBSyxHQUFHO0FBQ2pDLFFBQUksQ0FBQyxJQUFJLEtBQUssTUFBTSxLQUFLLEtBQUssR0FBRztBQUNqQyxRQUFJLENBQUMsSUFBSSxLQUFLLE1BQU0sS0FBSyxLQUFLLEdBQUc7QUFDakMsV0FBTztBQUFBLEVBQ1Q7QUFXTyxXQUFTLFlBQVksS0FBSyxLQUFLO0FBQ3BDLFFBQUksVUFBVSxJQUFhLFdBQVcsQ0FBQztBQUN2QyxlQUFXLFNBQVMsR0FBRztBQUN2QixRQUFJLE1BQU0sSUFBSSxRQUFRLENBQUM7QUFDdkIsUUFBSSxNQUFNLElBQUksUUFBUSxDQUFDO0FBQ3ZCLFFBQUksTUFBTSxJQUFJLFFBQVEsQ0FBQztBQUN2QixRQUFJLE9BQU8sSUFBSSxDQUFDLElBQUk7QUFDcEIsUUFBSSxPQUFPLElBQUksQ0FBQyxJQUFJO0FBQ3BCLFFBQUksT0FBTyxJQUFJLENBQUMsSUFBSTtBQUNwQixRQUFJLE9BQU8sSUFBSSxDQUFDLElBQUk7QUFDcEIsUUFBSSxPQUFPLElBQUksQ0FBQyxJQUFJO0FBQ3BCLFFBQUksT0FBTyxJQUFJLENBQUMsSUFBSTtBQUNwQixRQUFJLE9BQU8sSUFBSSxDQUFDLElBQUk7QUFDcEIsUUFBSSxPQUFPLElBQUksQ0FBQyxJQUFJO0FBQ3BCLFFBQUksT0FBTyxJQUFJLEVBQUUsSUFBSTtBQUNyQixRQUFJLFFBQVEsT0FBTyxPQUFPO0FBQzFCLFFBQUksSUFBSTtBQUVSLFFBQUksUUFBUSxHQUFHO0FBQ2IsVUFBSSxLQUFLLEtBQUssUUFBUSxDQUFHLElBQUk7QUFDN0IsVUFBSSxDQUFDLElBQUksT0FBTztBQUNoQixVQUFJLENBQUMsS0FBSyxPQUFPLFFBQVE7QUFDekIsVUFBSSxDQUFDLEtBQUssT0FBTyxRQUFRO0FBQ3pCLFVBQUksQ0FBQyxLQUFLLE9BQU8sUUFBUTtBQUFBLElBQzNCLFdBQVcsT0FBTyxRQUFRLE9BQU8sTUFBTTtBQUNyQyxVQUFJLEtBQUssS0FBSyxJQUFNLE9BQU8sT0FBTyxJQUFJLElBQUk7QUFDMUMsVUFBSSxDQUFDLEtBQUssT0FBTyxRQUFRO0FBQ3pCLFVBQUksQ0FBQyxJQUFJLE9BQU87QUFDaEIsVUFBSSxDQUFDLEtBQUssT0FBTyxRQUFRO0FBQ3pCLFVBQUksQ0FBQyxLQUFLLE9BQU8sUUFBUTtBQUFBLElBQzNCLFdBQVcsT0FBTyxNQUFNO0FBQ3RCLFVBQUksS0FBSyxLQUFLLElBQU0sT0FBTyxPQUFPLElBQUksSUFBSTtBQUMxQyxVQUFJLENBQUMsS0FBSyxPQUFPLFFBQVE7QUFDekIsVUFBSSxDQUFDLEtBQUssT0FBTyxRQUFRO0FBQ3pCLFVBQUksQ0FBQyxJQUFJLE9BQU87QUFDaEIsVUFBSSxDQUFDLEtBQUssT0FBTyxRQUFRO0FBQUEsSUFDM0IsT0FBTztBQUNMLFVBQUksS0FBSyxLQUFLLElBQU0sT0FBTyxPQUFPLElBQUksSUFBSTtBQUMxQyxVQUFJLENBQUMsS0FBSyxPQUFPLFFBQVE7QUFDekIsVUFBSSxDQUFDLEtBQUssT0FBTyxRQUFRO0FBQ3pCLFVBQUksQ0FBQyxLQUFLLE9BQU8sUUFBUTtBQUN6QixVQUFJLENBQUMsSUFBSSxPQUFPO0FBQUEsSUFDbEI7QUFFQSxXQUFPO0FBQUEsRUFDVDtBQW1CTyxXQUFTLDZCQUE2QixLQUFLLEdBQUcsR0FBRyxHQUFHO0FBRXpELFFBQUksSUFBSSxFQUFFLENBQUMsR0FDUCxJQUFJLEVBQUUsQ0FBQyxHQUNQLElBQUksRUFBRSxDQUFDLEdBQ1AsSUFBSSxFQUFFLENBQUM7QUFDWCxRQUFJLEtBQUssSUFBSTtBQUNiLFFBQUksS0FBSyxJQUFJO0FBQ2IsUUFBSSxLQUFLLElBQUk7QUFDYixRQUFJLEtBQUssSUFBSTtBQUNiLFFBQUksS0FBSyxJQUFJO0FBQ2IsUUFBSSxLQUFLLElBQUk7QUFDYixRQUFJLEtBQUssSUFBSTtBQUNiLFFBQUksS0FBSyxJQUFJO0FBQ2IsUUFBSSxLQUFLLElBQUk7QUFDYixRQUFJLEtBQUssSUFBSTtBQUNiLFFBQUksS0FBSyxJQUFJO0FBQ2IsUUFBSSxLQUFLLElBQUk7QUFDYixRQUFJLEtBQUssRUFBRSxDQUFDO0FBQ1osUUFBSSxLQUFLLEVBQUUsQ0FBQztBQUNaLFFBQUksS0FBSyxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsS0FBSyxLQUFLLEtBQUssT0FBTztBQUMzQixRQUFJLENBQUMsS0FBSyxLQUFLLE1BQU07QUFDckIsUUFBSSxDQUFDLEtBQUssS0FBSyxNQUFNO0FBQ3JCLFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLEtBQUssS0FBSyxNQUFNO0FBQ3JCLFFBQUksQ0FBQyxLQUFLLEtBQUssS0FBSyxPQUFPO0FBQzNCLFFBQUksQ0FBQyxLQUFLLEtBQUssTUFBTTtBQUNyQixRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxLQUFLLEtBQUssTUFBTTtBQUNyQixRQUFJLENBQUMsS0FBSyxLQUFLLE1BQU07QUFDckIsUUFBSSxFQUFFLEtBQUssS0FBSyxLQUFLLE9BQU87QUFDNUIsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSSxFQUFFLENBQUM7QUFDYixRQUFJLEVBQUUsSUFBSSxFQUFFLENBQUM7QUFDYixRQUFJLEVBQUUsSUFBSSxFQUFFLENBQUM7QUFDYixRQUFJLEVBQUUsSUFBSTtBQUNWLFdBQU87QUFBQSxFQUNUO0FBc0JPLFdBQVMsbUNBQW1DLEtBQUssR0FBRyxHQUFHLEdBQUcsR0FBRztBQUVsRSxRQUFJLElBQUksRUFBRSxDQUFDLEdBQ1AsSUFBSSxFQUFFLENBQUMsR0FDUCxJQUFJLEVBQUUsQ0FBQyxHQUNQLElBQUksRUFBRSxDQUFDO0FBQ1gsUUFBSSxLQUFLLElBQUk7QUFDYixRQUFJLEtBQUssSUFBSTtBQUNiLFFBQUksS0FBSyxJQUFJO0FBQ2IsUUFBSSxLQUFLLElBQUk7QUFDYixRQUFJLEtBQUssSUFBSTtBQUNiLFFBQUksS0FBSyxJQUFJO0FBQ2IsUUFBSSxLQUFLLElBQUk7QUFDYixRQUFJLEtBQUssSUFBSTtBQUNiLFFBQUksS0FBSyxJQUFJO0FBQ2IsUUFBSSxLQUFLLElBQUk7QUFDYixRQUFJLEtBQUssSUFBSTtBQUNiLFFBQUksS0FBSyxJQUFJO0FBQ2IsUUFBSSxLQUFLLEVBQUUsQ0FBQztBQUNaLFFBQUksS0FBSyxFQUFFLENBQUM7QUFDWixRQUFJLEtBQUssRUFBRSxDQUFDO0FBQ1osUUFBSSxLQUFLLEVBQUUsQ0FBQztBQUNaLFFBQUksS0FBSyxFQUFFLENBQUM7QUFDWixRQUFJLEtBQUssRUFBRSxDQUFDO0FBQ1osUUFBSSxRQUFRLEtBQUssS0FBSyxPQUFPO0FBQzdCLFFBQUksUUFBUSxLQUFLLE1BQU07QUFDdkIsUUFBSSxRQUFRLEtBQUssTUFBTTtBQUN2QixRQUFJLFFBQVEsS0FBSyxNQUFNO0FBQ3ZCLFFBQUksUUFBUSxLQUFLLEtBQUssT0FBTztBQUM3QixRQUFJLFFBQVEsS0FBSyxNQUFNO0FBQ3ZCLFFBQUksUUFBUSxLQUFLLE1BQU07QUFDdkIsUUFBSSxRQUFRLEtBQUssTUFBTTtBQUN2QixRQUFJLFNBQVMsS0FBSyxLQUFLLE9BQU87QUFDOUIsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksTUFBTSxPQUFPLEtBQUssT0FBTyxLQUFLLE9BQU87QUFDdEQsUUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksTUFBTSxPQUFPLEtBQUssT0FBTyxLQUFLLE9BQU87QUFDdEQsUUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksTUFBTSxPQUFPLEtBQUssT0FBTyxLQUFLLFFBQVE7QUFDdkQsUUFBSSxFQUFFLElBQUk7QUFDVixXQUFPO0FBQUEsRUFDVDtBQVVPLFdBQVMsU0FBUyxLQUFLLEdBQUc7QUFDL0IsUUFBSSxJQUFJLEVBQUUsQ0FBQyxHQUNQLElBQUksRUFBRSxDQUFDLEdBQ1AsSUFBSSxFQUFFLENBQUMsR0FDUCxJQUFJLEVBQUUsQ0FBQztBQUNYLFFBQUksS0FBSyxJQUFJO0FBQ2IsUUFBSSxLQUFLLElBQUk7QUFDYixRQUFJLEtBQUssSUFBSTtBQUNiLFFBQUksS0FBSyxJQUFJO0FBQ2IsUUFBSSxLQUFLLElBQUk7QUFDYixRQUFJLEtBQUssSUFBSTtBQUNiLFFBQUksS0FBSyxJQUFJO0FBQ2IsUUFBSSxLQUFLLElBQUk7QUFDYixRQUFJLEtBQUssSUFBSTtBQUNiLFFBQUksS0FBSyxJQUFJO0FBQ2IsUUFBSSxLQUFLLElBQUk7QUFDYixRQUFJLEtBQUssSUFBSTtBQUNiLFFBQUksQ0FBQyxJQUFJLElBQUksS0FBSztBQUNsQixRQUFJLENBQUMsSUFBSSxLQUFLO0FBQ2QsUUFBSSxDQUFDLElBQUksS0FBSztBQUNkLFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUksS0FBSztBQUNkLFFBQUksQ0FBQyxJQUFJLElBQUksS0FBSztBQUNsQixRQUFJLENBQUMsSUFBSSxLQUFLO0FBQ2QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSSxLQUFLO0FBQ2QsUUFBSSxDQUFDLElBQUksS0FBSztBQUNkLFFBQUksRUFBRSxJQUFJLElBQUksS0FBSztBQUNuQixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsV0FBTztBQUFBLEVBQ1Q7QUFjTyxXQUFTLFFBQVEsS0FBSyxNQUFNLE9BQU8sUUFBUSxLQUFLLE1BQU0sS0FBSztBQUNoRSxRQUFJLEtBQUssS0FBSyxRQUFRO0FBQ3RCLFFBQUksS0FBSyxLQUFLLE1BQU07QUFDcEIsUUFBSSxLQUFLLEtBQUssT0FBTztBQUNyQixRQUFJLENBQUMsSUFBSSxPQUFPLElBQUk7QUFDcEIsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSSxPQUFPLElBQUk7QUFDcEIsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxLQUFLLFFBQVEsUUFBUTtBQUMxQixRQUFJLENBQUMsS0FBSyxNQUFNLFVBQVU7QUFDMUIsUUFBSSxFQUFFLEtBQUssTUFBTSxRQUFRO0FBQ3pCLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJLE1BQU0sT0FBTyxJQUFJO0FBQzNCLFFBQUksRUFBRSxJQUFJO0FBQ1YsV0FBTztBQUFBLEVBQ1Q7QUFlTyxXQUFTLGNBQWMsS0FBSyxNQUFNLFFBQVEsTUFBTSxLQUFLO0FBQzFELFFBQUksSUFBSSxJQUFNLEtBQUssSUFBSSxPQUFPLENBQUMsR0FDM0I7QUFDSixRQUFJLENBQUMsSUFBSSxJQUFJO0FBQ2IsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFFVixRQUFJLE9BQU8sUUFBUSxRQUFRLFVBQVU7QUFDbkMsV0FBSyxLQUFLLE9BQU87QUFDakIsVUFBSSxFQUFFLEtBQUssTUFBTSxRQUFRO0FBQ3pCLFVBQUksRUFBRSxJQUFJLElBQUksTUFBTSxPQUFPO0FBQUEsSUFDN0IsT0FBTztBQUNMLFVBQUksRUFBRSxJQUFJO0FBQ1YsVUFBSSxFQUFFLElBQUksS0FBSztBQUFBLElBQ2pCO0FBRUEsV0FBTztBQUFBLEVBQ1Q7QUFNTyxNQUFJLGNBQWM7QUFlbEIsV0FBUyxjQUFjLEtBQUssTUFBTSxRQUFRLE1BQU0sS0FBSztBQUMxRCxRQUFJLElBQUksSUFBTSxLQUFLLElBQUksT0FBTyxDQUFDLEdBQzNCO0FBQ0osUUFBSSxDQUFDLElBQUksSUFBSTtBQUNiLFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBRVYsUUFBSSxPQUFPLFFBQVEsUUFBUSxVQUFVO0FBQ25DLFdBQUssS0FBSyxPQUFPO0FBQ2pCLFVBQUksRUFBRSxJQUFJLE1BQU07QUFDaEIsVUFBSSxFQUFFLElBQUksTUFBTSxPQUFPO0FBQUEsSUFDekIsT0FBTztBQUNMLFVBQUksRUFBRSxJQUFJO0FBQ1YsVUFBSSxFQUFFLElBQUksQ0FBQztBQUFBLElBQ2I7QUFFQSxXQUFPO0FBQUEsRUFDVDtBQWFPLFdBQVMsMkJBQTJCLEtBQUssS0FBSyxNQUFNLEtBQUs7QUFDOUQsUUFBSSxRQUFRLEtBQUssSUFBSSxJQUFJLFlBQVksS0FBSyxLQUFLLEdBQUs7QUFDcEQsUUFBSSxVQUFVLEtBQUssSUFBSSxJQUFJLGNBQWMsS0FBSyxLQUFLLEdBQUs7QUFDeEQsUUFBSSxVQUFVLEtBQUssSUFBSSxJQUFJLGNBQWMsS0FBSyxLQUFLLEdBQUs7QUFDeEQsUUFBSSxXQUFXLEtBQUssSUFBSSxJQUFJLGVBQWUsS0FBSyxLQUFLLEdBQUs7QUFDMUQsUUFBSSxTQUFTLEtBQU8sVUFBVTtBQUM5QixRQUFJLFNBQVMsS0FBTyxRQUFRO0FBQzVCLFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSSxHQUFHLFVBQVUsWUFBWSxTQUFTO0FBQzNDLFFBQUksQ0FBQyxLQUFLLFFBQVEsV0FBVyxTQUFTO0FBQ3RDLFFBQUksRUFBRSxJQUFJLE9BQU8sT0FBTztBQUN4QixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSSxNQUFNLFFBQVEsT0FBTztBQUMvQixRQUFJLEVBQUUsSUFBSTtBQUNWLFdBQU87QUFBQSxFQUNUO0FBZ0JPLFdBQVMsUUFBUSxLQUFLLE1BQU0sT0FBTyxRQUFRLEtBQUssTUFBTSxLQUFLO0FBQ2hFLFFBQUksS0FBSyxLQUFLLE9BQU87QUFDckIsUUFBSSxLQUFLLEtBQUssU0FBUztBQUN2QixRQUFJLEtBQUssS0FBSyxPQUFPO0FBQ3JCLFFBQUksQ0FBQyxJQUFJLEtBQUs7QUFDZCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJLEtBQUs7QUFDZCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksRUFBRSxJQUFJLElBQUk7QUFDZCxRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxLQUFLLE9BQU8sU0FBUztBQUMzQixRQUFJLEVBQUUsS0FBSyxNQUFNLFVBQVU7QUFDM0IsUUFBSSxFQUFFLEtBQUssTUFBTSxRQUFRO0FBQ3pCLFFBQUksRUFBRSxJQUFJO0FBQ1YsV0FBTztBQUFBLEVBQ1Q7QUFNTyxNQUFJLFFBQVE7QUFnQlosV0FBUyxRQUFRLEtBQUssTUFBTSxPQUFPLFFBQVEsS0FBSyxNQUFNLEtBQUs7QUFDaEUsUUFBSSxLQUFLLEtBQUssT0FBTztBQUNyQixRQUFJLEtBQUssS0FBSyxTQUFTO0FBQ3ZCLFFBQUksS0FBSyxLQUFLLE9BQU87QUFDckIsUUFBSSxDQUFDLElBQUksS0FBSztBQUNkLFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUksS0FBSztBQUNkLFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxLQUFLLE9BQU8sU0FBUztBQUMzQixRQUFJLEVBQUUsS0FBSyxNQUFNLFVBQVU7QUFDM0IsUUFBSSxFQUFFLElBQUksT0FBTztBQUNqQixRQUFJLEVBQUUsSUFBSTtBQUNWLFdBQU87QUFBQSxFQUNUO0FBWU8sV0FBUyxPQUFPLEtBQUssS0FBSyxRQUFRLElBQUk7QUFDM0MsUUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksSUFBSUE7QUFDeEMsUUFBSSxPQUFPLElBQUksQ0FBQztBQUNoQixRQUFJLE9BQU8sSUFBSSxDQUFDO0FBQ2hCLFFBQUksT0FBTyxJQUFJLENBQUM7QUFDaEIsUUFBSSxNQUFNLEdBQUcsQ0FBQztBQUNkLFFBQUksTUFBTSxHQUFHLENBQUM7QUFDZCxRQUFJLE1BQU0sR0FBRyxDQUFDO0FBQ2QsUUFBSSxVQUFVLE9BQU8sQ0FBQztBQUN0QixRQUFJLFVBQVUsT0FBTyxDQUFDO0FBQ3RCLFFBQUksVUFBVSxPQUFPLENBQUM7QUFFdEIsUUFBSSxLQUFLLElBQUksT0FBTyxPQUFPLElBQWEsV0FBVyxLQUFLLElBQUksT0FBTyxPQUFPLElBQWEsV0FBVyxLQUFLLElBQUksT0FBTyxPQUFPLElBQWEsU0FBUztBQUM3SSxhQUFPLFNBQVMsR0FBRztBQUFBLElBQ3JCO0FBRUEsU0FBSyxPQUFPO0FBQ1osU0FBSyxPQUFPO0FBQ1osU0FBSyxPQUFPO0FBQ1osSUFBQUEsT0FBTSxJQUFJLEtBQUssTUFBTSxJQUFJLElBQUksRUFBRTtBQUMvQixVQUFNQTtBQUNOLFVBQU1BO0FBQ04sVUFBTUE7QUFDTixTQUFLLE1BQU0sS0FBSyxNQUFNO0FBQ3RCLFNBQUssTUFBTSxLQUFLLE1BQU07QUFDdEIsU0FBSyxNQUFNLEtBQUssTUFBTTtBQUN0QixJQUFBQSxPQUFNLEtBQUssTUFBTSxJQUFJLElBQUksRUFBRTtBQUUzQixRQUFJLENBQUNBLE1BQUs7QUFDUixXQUFLO0FBQ0wsV0FBSztBQUNMLFdBQUs7QUFBQSxJQUNQLE9BQU87QUFDTCxNQUFBQSxPQUFNLElBQUlBO0FBQ1YsWUFBTUE7QUFDTixZQUFNQTtBQUNOLFlBQU1BO0FBQUEsSUFDUjtBQUVBLFNBQUssS0FBSyxLQUFLLEtBQUs7QUFDcEIsU0FBSyxLQUFLLEtBQUssS0FBSztBQUNwQixTQUFLLEtBQUssS0FBSyxLQUFLO0FBQ3BCLElBQUFBLE9BQU0sS0FBSyxNQUFNLElBQUksSUFBSSxFQUFFO0FBRTNCLFFBQUksQ0FBQ0EsTUFBSztBQUNSLFdBQUs7QUFDTCxXQUFLO0FBQ0wsV0FBSztBQUFBLElBQ1AsT0FBTztBQUNMLE1BQUFBLE9BQU0sSUFBSUE7QUFDVixZQUFNQTtBQUNOLFlBQU1BO0FBQ04sWUFBTUE7QUFBQSxJQUNSO0FBRUEsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLE9BQU8sS0FBSyxPQUFPLEtBQUs7QUFDekMsUUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLE9BQU8sS0FBSyxPQUFPLEtBQUs7QUFDekMsUUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLE9BQU8sS0FBSyxPQUFPLEtBQUs7QUFDekMsUUFBSSxFQUFFLElBQUk7QUFDVixXQUFPO0FBQUEsRUFDVDtBQVdPLFdBQVMsU0FBUyxLQUFLLEtBQUssUUFBUSxJQUFJO0FBQzdDLFFBQUksT0FBTyxJQUFJLENBQUMsR0FDWixPQUFPLElBQUksQ0FBQyxHQUNaLE9BQU8sSUFBSSxDQUFDLEdBQ1osTUFBTSxHQUFHLENBQUMsR0FDVixNQUFNLEdBQUcsQ0FBQyxHQUNWLE1BQU0sR0FBRyxDQUFDO0FBQ2QsUUFBSSxLQUFLLE9BQU8sT0FBTyxDQUFDLEdBQ3BCLEtBQUssT0FBTyxPQUFPLENBQUMsR0FDcEIsS0FBSyxPQUFPLE9BQU8sQ0FBQztBQUN4QixRQUFJQSxPQUFNLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUVuQyxRQUFJQSxPQUFNLEdBQUc7QUFDWCxNQUFBQSxPQUFNLElBQUksS0FBSyxLQUFLQSxJQUFHO0FBQ3ZCLFlBQU1BO0FBQ04sWUFBTUE7QUFDTixZQUFNQTtBQUFBLElBQ1I7QUFFQSxRQUFJLEtBQUssTUFBTSxLQUFLLE1BQU0sSUFDdEIsS0FBSyxNQUFNLEtBQUssTUFBTSxJQUN0QixLQUFLLE1BQU0sS0FBSyxNQUFNO0FBQzFCLElBQUFBLE9BQU0sS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO0FBRS9CLFFBQUlBLE9BQU0sR0FBRztBQUNYLE1BQUFBLE9BQU0sSUFBSSxLQUFLLEtBQUtBLElBQUc7QUFDdkIsWUFBTUE7QUFDTixZQUFNQTtBQUNOLFlBQU1BO0FBQUEsSUFDUjtBQUVBLFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUs7QUFDeEIsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUs7QUFDeEIsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUs7QUFDeEIsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsUUFBSSxFQUFFLElBQUk7QUFDVixRQUFJLEVBQUUsSUFBSTtBQUNWLFFBQUksRUFBRSxJQUFJO0FBQ1YsV0FBTztBQUFBLEVBQ1Q7QUFRTyxXQUFTLElBQUksR0FBRztBQUNyQixXQUFPLFVBQVUsRUFBRSxDQUFDLElBQUksT0FBTyxFQUFFLENBQUMsSUFBSSxPQUFPLEVBQUUsQ0FBQyxJQUFJLE9BQU8sRUFBRSxDQUFDLElBQUksT0FBTyxFQUFFLENBQUMsSUFBSSxPQUFPLEVBQUUsQ0FBQyxJQUFJLE9BQU8sRUFBRSxDQUFDLElBQUksT0FBTyxFQUFFLENBQUMsSUFBSSxPQUFPLEVBQUUsQ0FBQyxJQUFJLE9BQU8sRUFBRSxDQUFDLElBQUksT0FBTyxFQUFFLEVBQUUsSUFBSSxPQUFPLEVBQUUsRUFBRSxJQUFJLE9BQU8sRUFBRSxFQUFFLElBQUksT0FBTyxFQUFFLEVBQUUsSUFBSSxPQUFPLEVBQUUsRUFBRSxJQUFJLE9BQU8sRUFBRSxFQUFFLElBQUk7QUFBQSxFQUNsUDtBQVFPLFdBQVMsS0FBSyxHQUFHO0FBQ3RCLFdBQU8sS0FBSyxNQUFNLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDO0FBQUEsRUFDeEg7QUFVTyxXQUFTLElBQUksS0FBSyxHQUFHLEdBQUc7QUFDN0IsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUN0QixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDdEIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ3RCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUN0QixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDdEIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ3RCLFdBQU87QUFBQSxFQUNUO0FBVU8sV0FBUyxTQUFTLEtBQUssR0FBRyxHQUFHO0FBQ2xDLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDdEIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ3RCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUN0QixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDdEIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQ3RCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUN0QixXQUFPO0FBQUEsRUFDVDtBQVVPLFdBQVMsZUFBZSxLQUFLLEdBQUcsR0FBRztBQUN4QyxRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSTtBQUNoQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSTtBQUNoQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSTtBQUNoQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSTtBQUNoQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSTtBQUNoQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSTtBQUNoQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSTtBQUNoQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSTtBQUNoQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSTtBQUNoQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSTtBQUNoQixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSTtBQUNsQixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSTtBQUNsQixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSTtBQUNsQixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSTtBQUNsQixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSTtBQUNsQixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSTtBQUNsQixXQUFPO0FBQUEsRUFDVDtBQVdPLFdBQVMscUJBQXFCLEtBQUssR0FBRyxHQUFHQyxRQUFPO0FBQ3JELFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJQTtBQUN2QixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSUE7QUFDdkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUlBO0FBQ3ZCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJQTtBQUN2QixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSUE7QUFDdkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUlBO0FBQ3ZCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJQTtBQUN2QixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSUE7QUFDdkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUlBO0FBQ3ZCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJQTtBQUN2QixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSUE7QUFDMUIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUlBO0FBQzFCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJQTtBQUMxQixRQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSUE7QUFDMUIsUUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUlBO0FBQzFCLFFBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJQTtBQUMxQixXQUFPO0FBQUEsRUFDVDtBQVNPLFdBQVMsWUFBWSxHQUFHLEdBQUc7QUFDaEMsV0FBTyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUU7QUFBQSxFQUNoUztBQVNPLFdBQVMsT0FBTyxHQUFHLEdBQUc7QUFDM0IsUUFBSSxLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQztBQUNaLFFBQUksS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUM7QUFDWixRQUFJLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFO0FBQ2QsUUFBSSxNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRTtBQUNkLFFBQUksS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUM7QUFDWixRQUFJLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDO0FBQ1osUUFBSSxLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRTtBQUNkLFFBQUksTUFBTSxFQUFFLEVBQUUsR0FDVixNQUFNLEVBQUUsRUFBRSxHQUNWLE1BQU0sRUFBRSxFQUFFLEdBQ1YsTUFBTSxFQUFFLEVBQUU7QUFDZCxXQUFPLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxLQUFLLEVBQUUsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxNQUFNLEdBQUcsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxHQUFHLEdBQUcsS0FBSyxJQUFJLEdBQUcsQ0FBQyxLQUFLLEtBQUssSUFBSSxNQUFNLEdBQUcsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxHQUFHLEdBQUcsS0FBSyxJQUFJLEdBQUcsQ0FBQyxLQUFLLEtBQUssSUFBSSxNQUFNLEdBQUcsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFBSSxHQUFHLEdBQUcsS0FBSyxJQUFJLEdBQUcsQ0FBQyxLQUFLLEtBQUssSUFBSSxNQUFNLEdBQUcsS0FBYyxVQUFVLEtBQUssSUFBSSxHQUFLLEtBQUssSUFB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QUFDLElBQUksS0FBSyxLQUFLLEtBQUs7QUFDeEIsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUs7QUFDeEIsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUs7QUFDeEIsV0FBTztBQUFBLEVBQ1Q7QUFVTyxXQUFTQyxTQUFRLEtBQUssR0FBRyxLQUFLO0FBQ25DLFdBQU87QUFDUCxRQUFJLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDO0FBQ1osUUFBSSxLQUFLLEtBQUssSUFBSSxHQUFHLEdBQ2pCLEtBQUssS0FBSyxJQUFJLEdBQUc7QUFDckIsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUs7QUFDeEIsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUs7QUFDeEIsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUs7QUFDeEIsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUs7QUFDeEIsV0FBTztBQUFBLEVBQ1Q7QUFVTyxXQUFTQyxTQUFRLEtBQUssR0FBRyxLQUFLO0FBQ25DLFdBQU87QUFDUCxRQUFJLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDO0FBQ1osUUFBSSxLQUFLLEtBQUssSUFBSSxHQUFHLEdBQ2pCLEtBQUssS0FBSyxJQUFJLEdBQUc7QUFDckIsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUs7QUFDeEIsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUs7QUFDeEIsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUs7QUFDeEIsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUs7QUFDeEIsV0FBTztBQUFBLEVBQ1Q7QUFXTyxXQUFTLFdBQVcsS0FBSyxHQUFHO0FBQ2pDLFFBQUksSUFBSSxFQUFFLENBQUMsR0FDUCxJQUFJLEVBQUUsQ0FBQyxHQUNQLElBQUksRUFBRSxD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SUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWixXQUFPO0FBQUEsRUFDVDtBQVFPLFdBQVNDLFVBQVMsS0FBSztBQUM1QixRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsV0FBTztBQUFBLEVBQ1Q7QUFpQk8sV0FBU0MsS0FBSSxLQUFLLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksSUFBSTtBQUN2RCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsUUFBSSxDQUFDLElBQUk7QUFDVCxRQUFJLENBQUMsSUFBSTtBQUNULFFBQUksQ0FBQyxJQUFJO0FBQ1QsV0FBTztBQUFBLEVBQ1Q7QUFRTyxNQUFJLFVBQWVGO0FBUW5CLFdBQVMsUUFBUSxLQUFLLEdBQUc7QUFDOUIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1osV0FBTztBQUFBLEVBQ1Q7QUFVTyxNQUFJLFVBQWVBO0FBVW5CLFdBQVMsUUFBUSxLQUFLLEdBQUc7QUFDOUIsUUFBSSxDQUFD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SyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUs7QUFDNUMsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUM1QyxRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO0FBQzVDLFFBQUksQ0FBQyxJQUFJLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUs7QUFDNUMsU0FBSyxFQUFFLENBQUM7QUFDUixTQUFLLEVBQUUsQ0FBQztBQUNSLFNBQUssRUFBRSxDQUFDO0FBQ1IsU0FBSyxFQUFFLENBQUM7QUFDUixRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO0FBQzVDLFFBQUksQ0FBQyxJQUFJLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUs7QUFDNUMsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUM1QyxRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO0FBQzVDLFdBQU87QUFBQSxFQUNUO0FBVU8sV0FBUyxvQkFBb0IsS0FBSyxHQUFHLEdBQUc7QUFDN0MsUUFBSSxLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDO0FBQ1osUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUM1QyxRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO0FBQzVDLFFBQUksQ0FBQyxJQUFJLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUs7QUFDNUMsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUM1QyxTQUFLLEVBQUUsQ0FBQztBQUNSLFNBQUssRUFBRSxDQUFDO0FBQ1IsU0FBSyxFQUFFLENBQUM7QUFDUixTQUFLLEVBQUUsQ0FBQztBQUNSLFFBQUksQ0FBQyxJQUFJLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUs7QUFDNUMsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUM1QyxRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO0FBQzVDLFFBQUksQ0FBQyxJQUFJLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUs7QUFDNUMsV0FBTztBQUFBLEVBQ1Q7QUFXTyxXQUFTLGlCQUFpQixLQUFLLEdBQUcsTUFBTSxLQUFLO0FBRWxELFFBQUksS0FBSyxJQUFJLEdBQUcsSUFBYSxTQUFTO0FBQ3BDLGFBQU9QLE1BQUssS0FBSyxDQUFDO0FBQUEsSUFDcEI7QUFFQSxRQUFJLGFBQWEsS0FBSyxNQUFNLEtBQUssQ0FBQyxHQUFHLEtBQUssQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDO0FBQ3JELFVBQU0sTUFBTTtBQUNaLFFBQUksSUFBSSxLQUFLLElBQUksR0FBRztBQUNwQixRQUFJLEtBQUssSUFBSSxLQUFLLENBQUMsSUFBSTtBQUN2QixRQUFJLEtBQUssSUFBSSxLQUFLLENBQUMsSUFBSTtBQUN2QixRQUFJLEtBQUssSUFBSSxLQUFLLENBQUMsSUFBSTtBQUN2QixRQUFJLEtBQUssS0FBSyxJQUFJLEdBQUc7QUFDckIsUUFBSSxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQztBQUNiLFFBQUksQ0FBQyxJQUFJLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU07QUFDaEQsUUFBSSxDQUFDLElBQUksTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTTtBQUNoRCxRQUFJLENBQUMsSUFBSSxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNO0FBQ2hELFFBQUksQ0FBQyxJQUFJLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU07QUFDaEQsUUFBSSxLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQztBQUNaLFFBQUksQ0FBQyxJQUFJLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUs7QUFDNUMsUUFBSSxDQUFDLElBQUksS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUM1QyxRQUFJLENBQUMsSUFBSSxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLO0FBQzVDLFFBQUksQ0FBQyxJQUFJLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUs7QUFDNUMsV0FBTztBQUFBLEVBQ1Q7QUFXTyxXQUFTUSxLQUFJLEtBQUssR0FBRyxHQUFHO0FBQzdCLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbkIsV0FBTztBQUFBLEVBQ1Q7QUFVTyxXQUFTQyxVQUFTLEtBQUssR0FBRyxHQUFHO0FBQ2xDLFFBQUksTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUMsR0FDVCxNQUFNLEVBQUUsQ0FBQyxHQUNULE1BQU0sRUFBRSxDQUFDLEdBQ1QsTUFBTSxFQUFFLENBQUM7QUFDYixRQUFJLENBQUMsSUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQ25ELFFBQUksQ0FBQyxJQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDbkQsUUFBSSxDQUFDLElBQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUNuRCxRQUFJLENBQUMsSUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQ25ELFFBQUksQ0FBQyxJQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQ25HLFFBQUksQ0FBQyxJQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQ25HLFFBQUksQ0FBQyxJQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQ25HLFFBQUksQ0FBQyxJQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0s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QUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUFBLEVBQzVJO0FBU08sV0FBU0MsUUFBTyxHQUFHLEdBQUc7QUFDM0IsUUFBSSxLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDO0FBQ1osUUFBSSxLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDLEdBQ1IsS0FBSyxFQUFFLENBQUMsR0FDUixLQUFLLEVBQUUsQ0FBQyxHQUNSLEtBQUssRUFBRSxDQUFDO0FBQ1osV0FBTyxLQUFLLElBQUksS0FBSyxFQUFFLEtBQWMsVUFBVSxLQUFLLElBQUksR0FBSyxLQUFLLElBQUksRUFBRSxHQUFHLEtBQUssSUFBSSxFQUFFLENBQUMsS0FBSyxLQUFLLElBQUksS0FBSyxFQUFFLEtBQWMsVUFBVSxLQUFLLElBQUksR0FBSyxLQUFLLElBQUksRUFBRSxHQUFHLEtBQUssSUFBSSxFQUFFLENBQUMsS0FBSyxLQUFLLElBQUksS0FBSyxFQUFFLEtBQWMsVUFBVSxLQUFLLElBQUksR0FBSyxLQUFLLElBQUksRUFBRSxHQUFHLEtBQUssSUFBSSxFQUFFLENBQUMsS0FBSyxLQUFLLElBQUksS0FBSyxFQUFFLEtBQWMsVUFBVSxLQUFLLElBQUksR0FB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QUFLLFdBQVcsS0FBSztBQUMxQixVQUFJLE9BQU8sU0FBUyxpQkFBaUI7QUFDakMsYUFBSyxLQUFLLEdBQUcsTUFBTTtBQUFBLE1BQ3ZCO0FBRUEscUJBQWUsT0FBTyxRQUFRLEtBQUssRUFBRTtBQUFBLElBQ3pDO0FBQUEsRUFDSjtBQWxGSSxnQkFEUyxpQkFDRixZQUFXO0FBQ2xCLGdCQUZTLGlCQUVGLGNBQWE7QUFBQTtBQUFBLElBRWhCLGtCQUFrQixTQUFTLE9BQU87QUFBQTtBQUFBLElBRWxDLGVBQWUsU0FBUyxTQUFTO0FBQUEsRUFDckM7OztBQ3JDSixrQkFBZ0IsWUFBNkI7QUFFN0Msa0JBQWdCLGNBQWdFOyIsCiAgIm5hbWVzIjogWyJIb3dsZXJHbG9iYWwiLCAic2VsZiIsICJIb3dsZXIiLCAiZSIsICJpIiwgIkhvd2wiLCAic3RyIiwgIlNvdW5kIiwgImxlbiIsICJlYXJjdXQiLCAiZXF1YWxzIiwgImxlbiIsICJUeXBlIiwgImNyZWF0ZURlc3Ryb3llZFByb3h5IiwgIkxvZ1RhZyIsICJDb2xsaWRlciIsICJBbGlnbm1lbnQiLCAiVmVydGljYWxBbGlnbm1lbnQiLCAiVGV4dEVmZmVjdCIsICJUZXh0V3JhcE1vZGUiLCAiSW5wdXRUeXBlIiwgIlByb2plY3Rpb25UeXBlIiwgIkxpZ2h0VHlwZSIsICJBbmltYXRpb25TdGF0ZSIsICJSb290TW90aW9uTW9kZSIsICJGb3JjZU1vZGUiLCAiQ29sbGlzaW9uRXZlbnRUeXBlIiwgIlNoYXBlIiwgIk1lc2hBdHRyaWJ1dGUiLCAiY3JlYXRlRGVzdHJveWVkUHJveHkiLCAiQ29tcG9uZW50IiwgInByb3BlcnR5IiwgIm9mZnNldCIsICJfYSIsICJsZW5ndGgiLCAiYW5nbGUiLCAiTG9ja0F4aXMiLCAiTWVzaEluZGV4VHlwZSIsICJNZXNoU2tpbm5pbmdUeXBlIiwgImNhbnZhcyIsICJNYXRlcmlhbFBhcmFtVHlwZSIsICJfYSIsICJjcmVhdGVEZXN0cm95ZWRQcm94eSIsICJTY2VuZVR5cGUiLCAiTG9nTGV2ZWwiLCAib2Zmc2V0IiwgImxlbmd0aCIsICJXQVNNIiwgInRocmVhZHMiLCAiQ29tcG9uZW50IiwgInN0ciIsICJwcm9wZXJ0eSIsICJtYXgiLCAidGVtcFF1YXQiLCAiX2EiLCAiY3JlYXRlIiwgImNyZWF0ZSIsICJsZW4iLCAic2NhbGUiLCAiYWRkIiwgImNsb25lIiwgImNvcHkiLCAiY3JlYXRlIiwgImRvdCIsICJlcXVhbHMiLCAiZXhhY3RFcXVhbHMiLCAiZnJvbVZhbHVlcyIsICJpZGVudGl0eSIsICJpbnZlcnQiLCAibGVuIiwgImxlbmd0aCIsICJsZXJwIiwgIm11bCIsICJtdWx0aXBseSIsICJub3JtYWxpemUiLCAicmFuZG9tIiwgInJvdGF0ZVgiLCAicm90YXRlWSIsICJyb3RhdGVaIiwgInNjYWxlIiwgInNldCIsICJzcXJMZW4iLCAic3F1YXJlZExlbmd0aCIsICJzdHIiLCAiYWRkIiwgImNsb25lIiwgImNvcHkiLCAiY3JlYXRlIiwgImVxdWFscyIsICJleGFjdEVxdWFscyIsICJmcm9tVmFsdWVzIiwgIm11bCIsICJtdWx0aXBseSIsICJyb3RhdGVYIiwgInJvdGF0ZVkiLCAicm90YXRlWiIsICJzY2FsZSIsICJzZXQiLCAic3RyIiwgInN1YiIsICJzdWJ0cmFjdCIsICJjcmVhdGUiLCAiY2xvbmUiLCAiZnJvbVZhbHVlcyIsICJjb3B5IiwgInNldCIsICJhZGQiLCAic3VidHJhY3QiLCAibXVsdGlwbHkiLCAic2NhbGUiLCAibGVuIiwgInJvdGF0ZVgiLCAicm90YXRlWSIsICJyb3RhdGVaIiwgInN0ciIsICJleGFjdEVxdWFscyIsICJlcXVhbHMiLCAic3ViIiwgIm11bCIsICJvZmZzZXQiLCAiY3JlYXRlIiwgImNsb25lIiwgImZyb21WYWx1ZXMiLCAiY29weSIsICJzZXQiLCAiYWRkIiwgInNjYWxlIiwgImxlbmd0aCIsICJzcXVhcmVkTGVuZ3RoIiwgIm5vcm1hbGl6ZSIsICJsZW4iLCAiZG90IiwgImxlcnAiLCAiZXhhY3RFcXVhbHMiLCAiZXF1YWxzIiwgImZvckVhY2giLCAiY3JlYXRlIiwgIm9mZnNldCIsICJjcmVhdGUiLCAiaWRlbnRpdHkiLCAiZG90IiwgIm11bHRpcGx5IiwgInJvdGF0ZVgiLCAicm90YXRlWSIsICJyb3RhdGVaIiwgInNjYWxlIiwgInJhbmRvbSIsICJpbnZlcnQiLCAic3RyIiwgImNsb25lIiwgImZyb21WYWx1ZXMiLCAiY29weSIsICJzZXQiLCAiYWRkIiwgIm11bCIsICJsZXJwIiwgImxlbmd0aCIsICJsZW4iLCAic3F1YXJlZExlbmd0aCIsICJzcXJMZW4iLCAibm9ybWFsaXplIiwgImV4YWN0RXF1YWxzIiwgImVxdWFscyIsICJhZGQiLCAiY2xvbmUiLCAiY29uanVnYXRlIiwgImNvcHkiLCAiY3JlYXRlIiwgImRvdCIsICJlcXVhbHMiLCAiZXhhY3RFcXVhbHMiLCAiZnJvbVJvdGF0aW9uIiwgImZyb21Sb3RhdGlvblRyYW5zbGF0aW9uIiwgImZyb21UcmFuc2xhdGlvbiIsICJmcm9tVmFsdWVzIiwgImdldFRyYW5zbGF0aW9uIiwgImlkZW50aXR5IiwgImludmVydCIsICJsZW4iLCAibGVuZ3RoIiwgImxlcnAiLCAibXVsIiwgIm11bHRpcGx5IiwgIm5vcm1hbGl6ZSIsICJyb3RhdGVYIiwgInJvdGF0ZVkiLCAicm90YXRlWiIsICJzY2FsZSIsICJzZXQiLCAic3FyTGVuIiwgInNxdWFyZWRMZW5ndGgiLCAic3RyIiwgInRyYW5zbGF0ZSIsICJjcmVhdGUiLCAiY2xvbmUiLCAiZnJvbVZhbHVlcyIsICJmcm9tUm90YXRpb25UcmFuc2xhdGlvbiIsICJmcm9tVHJhbnNsYXRpb24iLCAiZnJvbVJvdGF0aW9uIiwgImNvcHkiLCAiaWRlbnRpdHkiLCAic2V0IiwgImdldFRyYW5zbGF0aW9uIiwgInRyYW5zbGF0ZSIsICJyb3RhdGVYIiwgInJvdGF0ZVkiLCAicm90YXRlWiIsICJhZGQiLCAibXVsdGlwbHkiLCAibXVsIiwgInNjYWxlIiwgImRvdCIsICJsZXJwIiwgImludmVydCIsICJzcXVhcmVkTGVuZ3RoIiwgImNvbmp1Z2F0ZSIsICJsZW5ndGgiLCAibGVuIiwgInNxckxlbiIsICJub3JtYWxpemUiLCAic3RyIiwgImV4YWN0RXF1YWxzIiwgImVxdWFscyIsICJfX2RlY29yYXRlIiwgIl9fZGVjb3JhdGUiLCAidGVtcFZlYyIsICJjYW52YXMiLCAiZGlzdCIsICJfX2RlY29yYXRlIiwgIl9fZGVjb3JhdGUiLCAiaW1wb3J0X2hvd2xlciIsICJfX2RlY29yYXRlIiwgImNhbnZhcyIsICJfX2RlY29yYXRlIiwgImEiLCAiZGlyZWN0aW9uIiwgIl9fZGVjb3JhdGUiLCAidGVtcFF1YXQiLCAidGFyZ2V0UG9zIiwgIl9fZGVjb3JhdGUiLCAidGVtcFZlYzMiLCAiZWFyY3V0IiwgImxvb2tBdCIsICJvZmZzZXQiLCAiZGlzdCIsICJkb3QiLCAiX19kZWNvcmF0ZSIsICJtaW4iLCAibWF4IiwgIl9fZGVjb3JhdGUiLCAicHJldmVudERlZmF1bHQiLCAidGVtcFZlYyIsICJ0ZW1wVmVjMyIsICJjYW52YXMiXQp9Cg==
